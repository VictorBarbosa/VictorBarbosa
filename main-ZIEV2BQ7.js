import{$ as xi,$a as vne,$b as Ske,A as Jf,Aa as No,Ab as ad,B as AR,Ba as Hs,Bb as Zu,C as Dz,Ca as Oz,Cb as A1,D as pne,Da as QAe,Db as iu,E as WAe,Ea as Rz,Eb as Zs,F as kR,Fa as JAe,Fb as Qs,G as Nz,Ga as fS,Gb as jz,H as Ds,Ha as wh,Hb as pS,I as hne,Ia as FR,Ib as Sne,J as _1,Ja as Rk,Jb as Sg,K as S1,Ka as Pk,Kb as Ii,L as IR,La as eke,Lb as Bz,M as mne,Ma as tke,Mb as gke,N as Uc,Na as rke,Nb as Cne,O as DR,Oa as nke,Ob as Ene,P as aS,Pa as oke,Pb as Bk,Q as lS,Qa as ike,Qb as $z,R as C1,Ra as ske,Rb as yke,S as gne,Sa as nd,Sb as ld,T as qAe,Ta as ake,Tb as bke,U as HAe,Ua as OR,Ub as su,V as YAe,Va as Ys,Vb as xke,W as yne,Wa as vr,Wb as vke,X as Mz,Xa as Lk,Xb as Tne,Y as E1,Ya as lke,Yb as wke,Z as ed,Za as Pz,Zb as _ke,_ as Ns,_a as Lz,_b as yn,a as Gt,aa as is,ab as uke,ac as PR,b as Is,ba as XAe,bb as Cn,bc as Cke,c as TR,ca as xr,cb as cke,cc as Eke,da as jn,db as fke,dc as hS,e as N,ea as KAe,eb as _h,ec as Tke,f as mt,fa as En,fb as jk,fc as Ake,g as fn,ga as bne,gb as sp,gc as $k,h as Al,ha as Et,hb as od,hc as Qu,i as kl,ia as Zt,ib as dke,ic as kke,j as je,ja as Fz,jb as wne,jc as Ike,k as UAe,ka as xne,kb as pke,kc as Ane,l as _b,la as NR,lb as Ku,lc as Dke,m as VAe,ma as ki,mb as id,mc as Nke,n as Mk,na as Bn,nb as Xs,o as cne,oa as Va,ob as _ne,p as fne,pa as MR,pb as Gc,pc as LR,q as Xn,qa as ZAe,qb as RR,qc as mS,r as Ua,ra as Sb,rb as dS,s as w1,sa as _g,sb as Bo,sc as Cb,t as Xu,ta as T1,tb as ti,tc as zk,u as kr,ua as td,ub as Ks,uc as gS,v as sS,va as rd,vb as sd,w as dne,wa as uS,wb as hke,x as GAe,xa as Ok,xb as nu,y as dn,ya as Vc,yb as mke,z as Fk,za as cS,zb as ou}from"./chunk-MPM6KI4S.js";function Wc(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var F1,Tg,Toe=N(()=>{"use strict";F1=class{constructor(r,n){this.backend=r,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,n){this.dataIdsCount++,this.data.set(r,n)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}},Tg=class{refCount(r){return Wc("refCount")}incRef(r){return Wc("incRef")}timerAvailable(){return!0}time(r){return Wc("time")}read(r){return Wc("read")}readSync(r){return Wc("readSync")}readToGPU(r,n){return Wc("readToGPU")}numDataIds(){return Wc("numDataIds")}disposeData(r,n){return Wc("disposeData")}write(r,n,o){return Wc("write")}move(r,n,o,i,s){return Wc("move")}createTensorFromGPUData(r,n,o){return Wc("createTensorFromGPUData")}memory(){return Wc("memory")}floatPrecision(){return Wc("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Wc("dispose")}}});function UIe(t){let r=t.length,n=0;for(;r>0;)n=Math.random()*r|0,r--,f8(t,r,n)}function ukt(t,r){if(t.length!==r.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${r.length}`);let n=t.length,o=0;for(;n>0;)o=Math.random()*n|0,n--,f8(t,n,o),f8(r,n,o)}function eI(t,r,n){return Math.max(t,Math.min(r,n))}function ckt(t){return t%2===0?t:t+1}function f8(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function fkt(t){let r=0;for(let n=0;n<t.length;n++)r+=t[n];return r}function dkt(t,r){let n=Math.random();return r*n+(1-n)*t}function pkt(t,r){let n=0;for(let o=0;o<t.length;o++){let i=Number(t[o])-Number(r[o]);n+=i*i}return n}function pe(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}function $o(t,r,n=""){pe(au(t,r),()=>n+` Shapes ${t} and ${r} must match`)}function fd(t){pe(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function on(t){if(t.length===0)return 1;let r=t[0];for(let n=1;n<t.length;n++)r*=t[n];return r}function hkt(t){return t.length===0}function Aoe(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&r[n]!==null&&t[n]!==r[n])return!1;return!0}function au(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function Tb(t){return t%1===0}function mkt(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let r=Math.exp(2*t);return(r-1)/(r+1)}}function gkt(t){let r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function ykt(t){let r=new Uint32Array(t);for(let n=0;n<t;++n)r[n]=n;return UIe(r),r}function vS(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function bkt(t,r=i=>0,n,o){return new Promise((i,s)=>{let a=0,l=()=>{if(t()){i();return}a++;let u=r(a);if(n!=null&&a>=n){s();return}o!=null?o(l,u):setTimeout(l,u)};l()})}function xkt(t,r){let n=1,o=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(o!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${o} and dim ${s}`);o=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(o===-1){if(r>0&&r!==n)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(r%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${r} / ${n}`);let i=t.slice();return i[o]=r/n,i}function gs(t,r){let n=r.length;return t=t==null?r.map((o,i)=>i):[].concat(t),pe(t.every(o=>o>=-n&&o<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),pe(t.every(o=>Tb(o)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(o=>o<0?n+o:o)}function koe(t,r){let n=[],o=[],i=r!=null&&Array.isArray(r)&&r.length===0,s=r==null||i?null:gs(r,t).sort(),a=0;for(let l=0;l<t.length;++l){if(s!=null){if(s[a]===l&&t[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(s[a]==null||s[a]>l)&&t[l]===1&&(n.push(t[l]),o.push(l)),s[a]<=l&&a++}t[l]!==1&&(n.push(t[l]),o.push(l))}return{newShape:n,keptDims:o}}function Ioe(t,r){return d8(t,r)}function d8(t,r){let n=null;if(t==null||t==="float32")n=new Float32Array(r);else if(t==="int32")n=new Int32Array(r);else if(t==="bool")n=new Uint8Array(r);else if(t==="string")n=new Array(r);else throw new Error(`Unknown data type ${t}`);return n}function Doe(t,r){for(let n=0;n<t.length;n++){let o=t[n];if(isNaN(o)||!isFinite(o))throw Error(`A tensor of type ${r} being uploaded contains ${o}.`)}}function Noe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function vkt(t,r){return!(r==="complex64"||r==="float32"&&t!=="complex64"||r==="int32"&&t!=="float32"&&t!=="complex64"||r==="bool"&&t==="bool")}function tI(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Moe(t){if(t==null)return 0;let r=0;return t.forEach(n=>r+=n.length),r}function Eh(t){return typeof t=="string"||t instanceof String}function VIe(t){return typeof t=="boolean"}function GIe(t){return typeof t=="number"}function O1(t){return Array.isArray(t)?O1(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":GIe(t)?"float32":Eh(t)?"string":VIe(t)?"bool":"float32"}function Ag(t){return!!(t&&t.constructor&&t.call&&t.apply)}function rI(t,r){for(let n=r;n<t;++n)if(t%n===0)return n;return t}function kg(t){let r=t.length;if(r<2)return[];let n=new Array(r-1);n[r-2]=t[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*t[o+1];return n}function WIe(t,r,n,o=!1){let i=new Array;if(r.length===1){let s=r[0]*(o?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{let s=r[0],a=r.slice(1),l=a.reduce((u,c)=>u*c)*(o?2:1);for(let u=0;u<s;u++)i[u]=WIe(t+u*l,a,n,o)}return i}function xS(t,r,n=!1){if(t.length===0)return r[0];let o=t.reduce((i,s)=>i*s)*(n?2:1);if(o===0)return[];if(o!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}${n?" for a complex tensor":""}.`);return WIe(0,t,r,n)}function wkt(t,r){if(Array.isArray(t))return t;if(r==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(r==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(r==="bool"||r==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${r}`)}function f3(t,r){let n=nI(t,r);for(let o=0;o<n.length;o++)n[o]=1;return n}function nI(t,r){if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function _kt(t,r){let n=t.reduce((o,i)=>o*i,1);if(r==null||r==="float32")return xS(t,new Float32Array(n));if(r==="int32")return xS(t,new Int32Array(n));if(r==="bool")return xS(t,new Uint8Array(n));throw new Error(`Unknown data type ${r}`)}function ri(t){t.forEach(r=>{pe(Number.isInteger(r)&&r>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Skt(t,r,n){if(r===0)return 0;if(r===1)return t[0];let o=t[t.length-1];for(let i=0;i<t.length-1;++i)o+=n[i]*t[i];return o}function Ckt(t,r,n){if(r===0)return[];if(r===1)return[t];let o=new Array(r);for(let i=0;i<o.length-1;++i)o[i]=Math.floor(t/n[i]),t-=o[i]*n[i];return o[o.length-1]=t,o}function wS(t){return t&&t.then&&typeof t.then=="function"}var Js=N(()=>{"use strict";});function Tkt(t){let r={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...o)=>(Akt(r,o[0],o[1]),o.join("="))),r}function Akt(t,r,n){t[decodeURIComponent(r)]=decodeURIComponent(n||"")}function kkt(t,r){let n=r.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:r}function Me(){return p8}function HIe(t){p8=t}var qIe,oI,p8,_a=N(()=>{"use strict";Js();qIe="tfjsflags",oI=class{constructor(r){this.global=r,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Tkt,this.populateURLFlags()}setPlatform(r,n){this.platform!=null&&(Me().getBool("IS_TEST")||Me().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${r}.`)),this.platformName=r,this.platform=n}registerFlag(r,n,o){if(this.flagRegistry[r]={evaluationFn:n,setHook:o},this.urlFlags[r]!=null){let i=this.urlFlags[r];Me().getBool("IS_TEST")||Me().getBool("PROD")||console.warn(`Setting feature override from URL ${r}: ${i}.`),this.set(r,i)}}getAsync(r){return je(this,null,function*(){return r in this.flags?this.flags[r]:(this.flags[r]=yield this.evaluateFlag(r),this.flags[r])})}get(r){if(r in this.flags)return this.flags[r];let n=this.evaluateFlag(r);if(wS(n))throw new Error(`Flag ${r} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[r]=n,this.flags[r]}getNumber(r){return this.get(r)}getBool(r){return this.get(r)}getString(r){return this.get(r)}getFlags(){return this.flags}get features(){return this.flags}set(r,n){if(this.flagRegistry[r]==null)throw new Error(`Cannot set flag ${r} as it has not been registered.`);this.flags[r]=n,this.flagRegistry[r].setHook!=null&&this.flagRegistry[r].setHook(n)}evaluateFlag(r){if(this.flagRegistry[r]==null)throw new Error(`Cannot evaluate flag '${r}': no evaluation function found.`);return this.flagRegistry[r].evaluationFn()}setFlags(r){this.flags=Object.assign({},r)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let r=this.getQueryParams(this.global.location.search);qIe in r&&r[qIe].split(",").forEach(o=>{let[i,s]=o.split(":");this.urlFlags[i]=kkt(i,s)})}};p8=null});function Ooe(){if(Foe==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Foe=t}return Foe}function Ikt(){let t=Ooe();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function d3(t,r){let n=Ikt();if(n.has(t))return n.get(t);{let o=r();return n.set(t,o),n.get(t)}}var Foe,h8=N(()=>{"use strict";});var Ab,Ig,Dg,lp,kb,_S,SS,Ib,Db,Ng,Mg,Fg,Og,Rg,Nb,CS,Mb,ES,Fb,Ob,TS,R1,Roe,AS,Th,Pg,Lg,kS,Rb,Pb,Lb,IS,jb,Bb,DS,NS,jg,Bg,MS,$b,FS,OS,RS,zb,PS,LS,jS,Ub,iI,sI,aI,$g,BS,zg,$S,Ug,P1,Vg,Vb,Gg,zS,US,VS,Wg,qg,Gb,Wb,GS,L1,Hg,Ah,WS,qS,Yg,Xg,Kg,qb,j1,B1,HS,Zg,Qg,$1,z1,U1,Dkt,Poe,Nkt,Hb,YS,Mkt,Yb,Jg,Xb,XS,Kb,KS,ZS,Zb,Qb,e0,Jb,t0,QS,r0,ex,V1,JS,eC,tC,tx,rx,nx,ox,Fkt,n0,ix,sx,rC,nC,oC,iC,sC,o0,i0,ax,lx,aC,ux,lC,s0,cx,a0,l0,uC,cC,fC,fx,u0,dx,c0,f0,d0,p0,h0,m0,px,hx,mx,gx,dC,pC,hC,mC,gC,g0,yC,G1,bC,xC,vC,wC,y0,b0,x0,kh,_C,SC,Ih,CC,yx,bx,Okt,xx,v0,lI,EC,W1,q1,H1,Ee=N(()=>{"use strict";Ab="Abs",Ig="Acos",Dg="Acosh",lp="Add",kb="AddN",_S="All",SS="Any",Ib="ArgMax",Db="ArgMin",Ng="Asin",Mg="Asinh",Fg="Atan",Og="Atanh",Rg="Atan2",Nb="AvgPool",CS="AvgPoolGrad",Mb="AvgPool3D",ES="AvgPool3DGrad",Fb="BatchMatMul",Ob="BatchToSpaceND",TS="Bincount",R1="BitwiseAnd",Roe="BroadcastTo",AS="BroadcastArgs",Th="Cast",Pg="Ceil",Lg="ClipByValue",kS="Complex",Rb="ComplexAbs",Pb="Concat",Lb="Conv2D",IS="Conv2DBackpropFilter",jb="Conv2DBackpropInput",Bb="Conv3D",DS="Conv3DBackpropFilterV2",NS="Conv3DBackpropInputV2",jg="Cos",Bg="Cosh",MS="Cumprod",$b="Cumsum",FS="CropAndResize",OS="DenseBincount",RS="DepthToSpace",zb="DepthwiseConv2dNative",PS="DepthwiseConv2dNativeBackpropFilter",LS="DepthwiseConv2dNativeBackpropInput",jS="Diag",Ub="Dilation2D",iI="Dilation2DBackpropInput",sI="Dilation2DBackpropFilter",aI="Draw",$g="RealDiv",BS="Einsum",zg="Elu",$S="EluGrad",Ug="Erf",P1="Equal",Vg="Exp",Vb="ExpandDims",Gg="Expm1",zS="FFT",US="Fill",VS="FlipLeftRight",Wg="Floor",qg="FloorDiv",Gb="FusedBatchNorm",Wb="GatherV2",GS="GatherNd",L1="Greater",Hg="GreaterEqual",Ah="Identity",WS="IFFT",qS="Imag",Yg="IsFinite",Xg="IsInf",Kg="IsNan",qb="LeakyRelu",j1="Less",B1="LessEqual",HS="LinSpace",Zg="Log",Qg="Log1p",$1="LogicalAnd",z1="LogicalNot",U1="LogicalOr",Dkt="LogicalXor",Poe="LogSoftmax",Nkt="LowerBound",Hb="LRN",YS="LRNGrad",Mkt="MatrixBandPart",Yb="Max",Jg="Maximum",Xb="MaxPool",XS="MaxPoolGrad",Kb="MaxPool3D",KS="MaxPool3DGrad",ZS="MaxPoolWithArgmax",Zb="Mean",Qb="Min",e0="Minimum",Jb="MirrorPad",t0="Mod",QS="Multinomial",r0="Multiply",ex="Neg",V1="NotEqual",JS="NonMaxSuppressionV3",eC="NonMaxSuppressionV4",tC="NonMaxSuppressionV5",tx="OnesLike",rx="OneHot",nx="Pack",ox="PadV2",Fkt="Pool",n0="Pow",ix="Prelu",sx="Prod",rC="RaggedGather",nC="RaggedRange",oC="RaggedTensorToTensor",iC="Range",sC="Real",o0="Reciprocal",i0="Relu",ax="Reshape",lx="ResizeNearestNeighbor",aC="ResizeNearestNeighborGrad",ux="ResizeBilinear",lC="ResizeBilinearGrad",s0="Relu6",cx="Reverse",a0="Round",l0="Rsqrt",uC="ScatterNd",cC="TensorScatterUpdate",fC="SearchSorted",fx="Select",u0="Selu",dx="Slice",c0="Sin",f0="Sinh",d0="Sign",p0="Sigmoid",h0="Softplus",m0="Sqrt",px="Sum",hx="SpaceToBatchND",mx="SplitV",gx="Softmax",dC="SparseFillEmptyRows",pC="SparseReshape",hC="SparseSegmentMean",mC="SparseSegmentSum",gC="SparseToDense",g0="SquaredDifference",yC="Square",G1="StaticRegexReplace",bC="StridedSlice",xC="StringNGrams",vC="StringSplit",wC="StringToHashBucketFast",y0="Sub",b0="Tan",x0="Tanh",kh="Tile",_C="TopK",SC="Transform",Ih="Transpose",CC="Unique",yx="Unpack",bx="UnsortedSegmentSum",Okt="UpperBound",xx="ZerosLike",v0="Step",lI="FromPixels",EC="RotateWithOffset",W1="_FusedMatMul",q1="FusedConv2D",H1="FusedDepthwiseConv2D"});function w0(...t){Me().getBool("IS_TEST")||Me().getBool("PROD")||console.warn(...t)}function Rkt(...t){Me().getBool("IS_TEST")||Me().getBool("PROD")||console.log(...t)}var m8=N(()=>{"use strict";_a();});function TC(t,r){let n=joe(t,r);return uI.get(n)}function g8(t){return p3.get(t)}function h3(t){let r=uI.entries(),n=[];for(;;){let{done:o,value:i}=r.next();if(o)break;let[s,a]=i,[l]=s.split("_");l===t&&n.push(a)}return n}function cI(t){let{kernelName:r,backendName:n}=t,o=joe(r,n);uI.has(o)&&w0(`The kernel '${r}' for backend '${n}' is already registered`),uI.set(o,t)}function Loe(t){let{kernelName:r}=t;p3.has(r)&&Me().getBool("DEBUG")&&w0(`Overriding the gradient for '${r}'`),p3.set(r,t)}function Pkt(t,r){let n=joe(t,r);if(!uI.has(n))throw new Error(`The kernel '${t}' for backend '${r}' is not registered`);uI.delete(n)}function Lkt(t){if(!p3.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);p3.delete(t)}function jkt(t,r){h3(t).forEach(o=>{let i=Object.assign({},o,{backendName:r});cI(i)})}function joe(t,r){return`${r}_${t}`}var uI,p3,m3=N(()=>{"use strict";_a();h8();m8();uI=d3("kernelRegistry",()=>new Map),p3=d3("gradRegistry",()=>new Map)});function y8(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Boe=N(()=>{"use strict";});var iDe=mt((tjr,oDe)=>{"use strict";oDe.exports=vi;var up=null;try{up=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function vi(t,r,n){this.low=t|0,this.high=r|0,this.unsigned=!!n}vi.prototype.__isLong__;Object.defineProperty(vi.prototype,"__isLong__",{value:!0});function Hc(t){return(t&&t.__isLong__)===!0}vi.isLong=Hc;var XIe={},KIe={};function kC(t,r){var n,o,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(o=KIe[t],o)?o:(n=wi(t,(t|0)<0?-1:0,!0),i&&(KIe[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(o=XIe[t],o)?o:(n=wi(t,t<0?-1:0,!1),i&&(XIe[t]=n),n))}vi.fromInt=kC;function cp(t,r){if(isNaN(t))return r?AC:fp;if(r){if(t<0)return AC;if(t>=eDe)return nDe}else{if(t<=-QIe)return qc;if(t+1>=QIe)return rDe}return t<0?cp(-t,r).neg():wi(t%dI|0,t/dI|0,r)}vi.fromNumber=cp;function wi(t,r,n){return new vi(t,r,n)}vi.fromBits=wi;var b8=Math.pow;function zoe(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return fp;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return zoe(t.substring(1),r,n).neg();for(var i=cp(b8(n,8)),s=fp,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+l),n);if(l<8){var c=cp(b8(n,l));s=s.mul(c).add(cp(u))}else s=s.mul(i),s=s.add(cp(u))}return s.unsigned=r,s}vi.fromString=zoe;function Dh(t,r){return typeof t=="number"?cp(t,r):typeof t=="string"?zoe(t,r):wi(t.low,t.high,typeof r=="boolean"?r:t.unsigned)}vi.fromValue=Dh;var ZIe=65536,Bkt=1<<24,dI=ZIe*ZIe,eDe=dI*dI,QIe=eDe/2,JIe=kC(Bkt),fp=kC(0);vi.ZERO=fp;var AC=kC(0,!0);vi.UZERO=AC;var fI=kC(1);vi.ONE=fI;var tDe=kC(1,!0);vi.UONE=tDe;var $oe=kC(-1);vi.NEG_ONE=$oe;var rDe=wi(-1,2147483647,!1);vi.MAX_VALUE=rDe;var nDe=wi(-1,-1,!0);vi.MAX_UNSIGNED_VALUE=nDe;var qc=wi(0,-2147483648,!1);vi.MIN_VALUE=qc;var $t=vi.prototype;$t.toInt=function(){return this.unsigned?this.low>>>0:this.low};$t.toNumber=function(){return this.unsigned?(this.high>>>0)*dI+(this.low>>>0):this.high*dI+(this.low>>>0)};$t.toString=function(r){if(r=r||10,r<2||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(qc)){var n=cp(r),o=this.div(n),i=o.mul(n).sub(this);return o.toString(r)+i.toInt().toString(r)}else return"-"+this.neg().toString(r);for(var s=cp(b8(r,6),this.unsigned),a=this,l="";;){var u=a.div(s),c=a.sub(u.mul(s)).toInt()>>>0,f=c.toString(r);if(a=u,a.isZero())return f+l;for(;f.length<6;)f="0"+f;l=""+f+l}};$t.getHighBits=function(){return this.high};$t.getHighBitsUnsigned=function(){return this.high>>>0};$t.getLowBits=function(){return this.low};$t.getLowBitsUnsigned=function(){return this.low>>>0};$t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qc)?64:this.neg().getNumBitsAbs();for(var r=this.high!=0?this.high:this.low,n=31;n>0&&!(r&1<<n);n--);return this.high!=0?n+33:n+1};$t.isZero=function(){return this.high===0&&this.low===0};$t.eqz=$t.isZero;$t.isNegative=function(){return!this.unsigned&&this.high<0};$t.isPositive=function(){return this.unsigned||this.high>=0};$t.isOdd=function(){return(this.low&1)===1};$t.isEven=function(){return(this.low&1)===0};$t.equals=function(r){return Hc(r)||(r=Dh(r)),this.unsigned!==r.unsigned&&this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low};$t.eq=$t.equals;$t.notEquals=function(r){return!this.eq(r)};$t.neq=$t.notEquals;$t.ne=$t.notEquals;$t.lessThan=function(r){return this.comp(r)<0};$t.lt=$t.lessThan;$t.lessThanOrEqual=function(r){return this.comp(r)<=0};$t.lte=$t.lessThanOrEqual;$t.le=$t.lessThanOrEqual;$t.greaterThan=function(r){return this.comp(r)>0};$t.gt=$t.greaterThan;$t.greaterThanOrEqual=function(r){return this.comp(r)>=0};$t.gte=$t.greaterThanOrEqual;$t.ge=$t.greaterThanOrEqual;$t.compare=function(r){if(Hc(r)||(r=Dh(r)),this.eq(r))return 0;var n=this.isNegative(),o=r.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1};$t.comp=$t.compare;$t.negate=function(){return!this.unsigned&&this.eq(qc)?qc:this.not().add(fI)};$t.neg=$t.negate;$t.add=function(r){Hc(r)||(r=Dh(r));var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=r.high>>>16,l=r.high&65535,u=r.low>>>16,c=r.low&65535,f=0,d=0,p=0,h=0;return h+=s+c,p+=h>>>16,h&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=o+l,f+=d>>>16,d&=65535,f+=n+a,f&=65535,wi(p<<16|h,f<<16|d,this.unsigned)};$t.subtract=function(r){return Hc(r)||(r=Dh(r)),this.add(r.neg())};$t.sub=$t.subtract;$t.multiply=function(r){if(this.isZero())return fp;if(Hc(r)||(r=Dh(r)),up){var n=up.mul(this.low,this.high,r.low,r.high);return wi(n,up.get_high(),this.unsigned)}if(r.isZero())return fp;if(this.eq(qc))return r.isOdd()?qc:fp;if(r.eq(qc))return this.isOdd()?qc:fp;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(JIe)&&r.lt(JIe))return cp(this.toNumber()*r.toNumber(),this.unsigned);var o=this.high>>>16,i=this.high&65535,s=this.low>>>16,a=this.low&65535,l=r.high>>>16,u=r.high&65535,c=r.low>>>16,f=r.low&65535,d=0,p=0,h=0,m=0;return m+=a*f,h+=m>>>16,m&=65535,h+=s*f,p+=h>>>16,h&=65535,h+=a*c,p+=h>>>16,h&=65535,p+=i*f,d+=p>>>16,p&=65535,p+=s*c,d+=p>>>16,p&=65535,p+=a*u,d+=p>>>16,p&=65535,d+=o*f+i*c+s*u+a*l,d&=65535,wi(h<<16|m,d<<16|p,this.unsigned)};$t.mul=$t.multiply;$t.divide=function(r){if(Hc(r)||(r=Dh(r)),r.isZero())throw Error("division by zero");if(up){if(!this.unsigned&&this.high===-2147483648&&r.low===-1&&r.high===-1)return this;var n=(this.unsigned?up.div_u:up.div_s)(this.low,this.high,r.low,r.high);return wi(n,up.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?AC:fp;var o,i,s;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return AC;if(r.gt(this.shru(1)))return tDe;s=AC}else{if(this.eq(qc)){if(r.eq(fI)||r.eq($oe))return qc;if(r.eq(qc))return fI;var a=this.shr(1);return o=a.div(r).shl(1),o.eq(fp)?r.isNegative()?fI:$oe:(i=this.sub(r.mul(o)),s=o.add(i.div(r)),s)}else if(r.eq(qc))return this.unsigned?AC:fp;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();s=fp}for(i=this;i.gte(r);){o=Math.max(1,Math.floor(i.toNumber()/r.toNumber()));for(var l=Math.ceil(Math.log(o)/Math.LN2),u=l<=48?1:b8(2,l-48),c=cp(o),f=c.mul(r);f.isNegative()||f.gt(i);)o-=u,c=cp(o,this.unsigned),f=c.mul(r);c.isZero()&&(c=fI),s=s.add(c),i=i.sub(f)}return s};$t.div=$t.divide;$t.modulo=function(r){if(Hc(r)||(r=Dh(r)),up){var n=(this.unsigned?up.rem_u:up.rem_s)(this.low,this.high,r.low,r.high);return wi(n,up.get_high(),this.unsigned)}return this.sub(this.div(r).mul(r))};$t.mod=$t.modulo;$t.rem=$t.modulo;$t.not=function(){return wi(~this.low,~this.high,this.unsigned)};$t.and=function(r){return Hc(r)||(r=Dh(r)),wi(this.low&r.low,this.high&r.high,this.unsigned)};$t.or=function(r){return Hc(r)||(r=Dh(r)),wi(this.low|r.low,this.high|r.high,this.unsigned)};$t.xor=function(r){return Hc(r)||(r=Dh(r)),wi(this.low^r.low,this.high^r.high,this.unsigned)};$t.shiftLeft=function(r){return Hc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?wi(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):wi(0,this.low<<r-32,this.unsigned)};$t.shl=$t.shiftLeft;$t.shiftRight=function(r){return Hc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?wi(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):wi(this.high>>r-32,this.high>=0?0:-1,this.unsigned)};$t.shr=$t.shiftRight;$t.shiftRightUnsigned=function(r){if(Hc(r)&&(r=r.toInt()),r&=63,r===0)return this;var n=this.high;if(r<32){var o=this.low;return wi(o>>>r|n<<32-r,n>>>r,this.unsigned)}else return r===32?wi(n,0,this.unsigned):wi(n>>>r-32,0,this.unsigned)};$t.shru=$t.shiftRightUnsigned;$t.shr_u=$t.shiftRightUnsigned;$t.toSigned=function(){return this.unsigned?wi(this.low,this.high,!1):this};$t.toUnsigned=function(){return this.unsigned?this:wi(this.low,this.high,!0)};$t.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()};$t.toBytesLE=function(){var r=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]};$t.toBytesBE=function(){var r=this.high,n=this.low;return[r>>>24,r>>>16&255,r>>>8&255,r&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};vi.fromBytes=function(r,n,o){return o?vi.fromBytesLE(r,n):vi.fromBytesBE(r,n)};vi.fromBytesLE=function(r,n){return new vi(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,n)};vi.fromBytesBE=function(r,n){return new vi(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],n)}});function g3(t){return DC.fromString(t,!0,16)}function Uoe(t){return t.xor(t.shru(47))}function lDe(t,r,n){let o=t.slice(r,r+n);return DC.fromBytes(Array.from(o),!0,!0)}function ni(t,r){return lDe(t,r,8)}function sDe(t,r){return lDe(t,r,4)}function Sa(t,r){return r===0?t:t.shru(r).or(t.shl(64-r))}function Y1(t,r,n=g3("9ddfea08eb382d69")){let o=t.xor(r).mul(n);o=o.xor(o.shru(47));let i=r.xor(o).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function $kt(t,r,n,o,i,s){i=i.add(t),s=Sa(s.add(i).add(o),21);let a=i;return i=i.add(r),i=i.add(n),s=s.add(Sa(i,44)),[i.add(o),s.add(a)]}function x8(t,r,n,o){return $kt(ni(t,r),ni(t,r+8),ni(t,r+16),ni(t,r+24),n,o)}function zkt(t,r=t.length){if(r>=8){let n=lu.add(r*2),o=ni(t,0).add(lu),i=ni(t,r-8),s=Sa(i,37).mul(n).add(o),a=Sa(o,25).add(i).mul(n);return Y1(s,a,n)}if(r>=4){let n=lu.add(r*2),o=sDe(t,0);return Y1(o.shl(3).add(r),sDe(t,r-4),n)}if(r>0){let n=t[0],o=t[r>>1],i=t[r-1],s=n+(o<<8),a=r+(i<<2);return Uoe(lu.mul(s).xor(aDe.mul(a))).mul(lu)}return lu}function Ukt(t,r=t.length){let n=lu.add(r*2),o=ni(t,0).mul(IC),i=ni(t,8),s=ni(t,r-8).mul(n),a=ni(t,r-16).mul(lu);return Y1(Sa(o.add(i),43).add(Sa(s,30)).add(a),o.add(Sa(i.add(lu),18)).add(s),n)}function Vkt(t,r=t.length){let n=lu.add(r*2),o=ni(t,0).mul(lu),i=ni(t,8),s=ni(t,r-8).mul(n),a=ni(t,r-16).mul(lu),l=Sa(o.add(i),43).add(Sa(s,30)).add(a),u=Y1(l,o.add(Sa(i.add(lu),18)).add(s),n),c=ni(t,16).mul(n),f=ni(t,24),d=l.add(ni(t,r-32)).mul(n),p=u.add(ni(t,r-24)).mul(n);return Y1(Sa(c.add(f),43).add(Sa(d,30)).add(p),c.add(Sa(f.add(o),18)).add(d),n)}function Gkt(t,r=t.length){let n=DC.fromNumber(81,!0);if(r<=32)return r<=16?zkt(t,r):Ukt(t,r);if(r<=64)return Vkt(t,r);let o=n,i=n.mul(IC).add(113),s=Uoe(i.mul(lu).add(113)).mul(lu),a=[DC.UZERO,DC.UZERO],l=[DC.UZERO,DC.UZERO];o=o.mul(lu).add(ni(t,0));let u=0,c=(r-1>>6)*64,f=c+(r-1&63)-63;do o=Sa(o.add(i).add(a[0]).add(ni(t,u+8)),37).mul(IC),i=Sa(i.add(a[1]).add(ni(t,u+48)),42).mul(IC),o=o.xor(l[1]),i=i.add(a[0]).add(ni(t,u+40)),s=Sa(s.add(l[0]),33).mul(IC),a=x8(t,u,a[1].mul(IC),o.add(l[0])),l=x8(t,u+32,s.add(l[1]),i.add(ni(t,u+16))),[s,o]=[o,s],u+=64;while(u!==c);let d=IC.add(s.and(255).shl(1));return u=f,l[0]=l[0].add(r-1&63),a[0]=a[0].add(l[0]),l[0]=l[0].add(a[0]),o=Sa(o.add(i).add(a[0]).add(ni(t,u+8)),37).mul(d),i=Sa(i.add(a[1]).add(ni(t,u+48)),42).mul(d),o=o.xor(l[1].mul(9)),i=i.add(a[0].mul(9).add(ni(t,u+40))),s=Sa(s.add(l[0]),33).mul(d),a=x8(t,u,a[1].mul(d),o.add(l[0])),l=x8(t,u+32,s.add(l[1]),i.add(ni(t,u+16))),[s,o]=[o,s],Y1(Y1(a[0],l[0],d).add(Uoe(i).mul(aDe)).add(s),Y1(a[1],l[1],d).add(o),d)}var Voe,DC,aDe,IC,lu,uDe=N(()=>{"use strict";Voe=Al(iDe());DC=Voe.default||Voe;aDe=g3("c3a5c85c97cb3127"),IC=g3("b492b66fbe98f273"),lu=g3("9ae16a3b2f90404f")});var Y={};fn(Y,{arraysEqual:()=>au,arraysEqualWithNull:()=>Aoe,assert:()=>pe,assertNonNegativeIntegerDimensions:()=>ri,assertNonNull:()=>fd,assertShapesMatch:()=>$o,bytesFromStringArray:()=>Moe,bytesPerElement:()=>tI,checkConversionForErrors:()=>Doe,clamp:()=>eI,computeStrides:()=>kg,convertBackendValuesAndArrayBuffer:()=>wkt,createScalarValue:()=>Wkt,createShuffledIndices:()=>ykt,decodeString:()=>hI,distSquared:()=>pkt,encodeString:()=>X1,fetch:()=>Hkt,fingerPrint64:()=>Gkt,flatten:()=>Nh,getArrayFromDType:()=>d8,getTypedArrayFromDType:()=>Ioe,hasEncodingLoss:()=>vkt,hexToLong:()=>g3,indexToLoc:()=>Ckt,inferDtype:()=>O1,inferFromImplicitShape:()=>xkt,isBoolean:()=>VIe,isFunction:()=>Ag,isInt:()=>Tb,isNumber:()=>GIe,isPromise:()=>wS,isScalarShape:()=>hkt,isString:()=>Eh,isTypedArray:()=>Wi,isValidDtype:()=>Noe,locToIndex:()=>Skt,makeOnesTypedArray:()=>f3,makeZerosNestedTypedArray:()=>_kt,makeZerosTypedArray:()=>nI,nearestDivisor:()=>rI,nearestLargerEven:()=>ckt,now:()=>NC,parseAxisParam:()=>gs,randUniform:()=>dkt,repeatedTry:()=>bkt,rightPad:()=>vS,shuffle:()=>UIe,shuffleCombo:()=>ukt,sizeFromShape:()=>on,sizeToSquarishShape:()=>gkt,squeezeShape:()=>koe,sum:()=>fkt,swap:()=>f8,tanh:()=>mkt,toNestedArray:()=>xS,toTypedArray:()=>pI});function Wkt(t,r){return r==="string"?X1(t):pI([t],r)}function qkt(t,r){return t instanceof Float32Array&&r==="float32"||t instanceof Int32Array&&r==="int32"||t instanceof Uint8Array&&r==="bool"}function pI(t,r){if(r==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Nh(t)),Me().getBool("DEBUG")&&Doe(t,r),qkt(t,r))return t;if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool"){let n=new Uint8Array(t.length);for(let o=0;o<n.length;++o)Math.round(t[o])!==0&&(n[o]=1);return n}else throw new Error(`Unknown data type ${r}`)}function NC(){return Me().platform.now()}function Hkt(t,r){return Me().platform.fetch(t,r)}function X1(t,r="utf-8"){return r=r||"utf-8",Me().platform.encode(t,r)}function hI(t,r="utf-8"){return r=r||"utf-8",Me().platform.decode(t,r)}function Wi(t){return Me().platform.isTypedArray!=null?Me().platform.isTypedArray(t):y8(t)}function Nh(t,r=[],n=!1){if(r==null&&(r=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||wS(t)||t==null||Wi(t)&&n)r.push(t);else if(Array.isArray(t)||Wi(t))for(let o=0;o<t.length;++o)Nh(t[o],r,n);else{let o=-1;for(let i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(o=Math.max(o,Number(i)));for(let i=0;i<=o;i++)Nh(t[i],r,n)}return r}var Ze=N(()=>{"use strict";_a();Boe();Js();Js();uDe();});function Ykt(t,r,n){if(r!=="float32")return!1;for(let o=0;o<t.length;o++){let i=t[o];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}var v8,Goe,cDe=N(()=>{"use strict";_a();Ze();v8=class{constructor(r,n){this.backendTimer=r,this.logger=n,n==null&&(this.logger=new Goe)}profileKernel(r,n,o){let i,s=()=>{i=o()},a,l=NC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(let c of i)c.dataSync();a=Promise.resolve({kernelMs:NC()-l})}if(Me().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){let f=i[c];f.data().then(d=>{Ykt(d,f.dtype,r)})}return{kernelName:r,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(r){let{kernelName:n,outputs:o,timeMs:i,inputs:s,extraInfo:a}=r;o.forEach(l=>{Promise.all([l.data(),i,a]).then(u=>{this.logger.logKernelProfile(n,l,u[0],u[1],s,u[2])})})}};Goe=class{logKernelProfile(r,n,o,i,s,a){let l=typeof i=="number"?vS(`${i}ms`,9):i.error,u=vS(r,25),c=n.rank,f=n.size,d=vS(n.shape.toString(),14),p="";for(let h in s){let m=s[h];if(m!=null){let g=m.shape||n.shape,y=g.length;p+=`${h}: ${y}D ${y>0?g:""} `}}console.log(`%c${u}	%c${l}	%c${c}D ${d}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function fDe(t,r,n){let o={},i={};for(let u=0;u<r.length;u++)o[r[u].id]=!0;for(let u=0;u<t.length;u++){let c=t[u],f=c.inputs;for(let d in f){let p=f[d],h=!1;for(let m=0;m<r.length;m++)if(o[p.id]){c.outputs.forEach(g=>o[g.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}let s={};s[n.id]=!0;let a={};for(let u=t.length-1;u>=0;u--){let c=t[u],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(let p in f)s[f[p].id]=!0,a[c.id]=!0;break}}let l=[];for(let u=0;u<t.length;u++){let c=t[u];if(i[c.id]&&a[c.id]){let f={};for(let p in c.inputs){let h=c.inputs[p];o[h.id]&&(f[p]=h)}let d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,l.push(d)}}return l}function dDe(t,r,n,o){for(let i=r.length-1;i>=0;i--){let s=r[i],a=[];if(s.outputs.forEach(u=>{let c=t[u.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let l=s.gradient(a);for(let u in s.inputs){if(!(u in l))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(l)}.`);let c=n(()=>l[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let f=s.inputs[u];if(!au(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{let d=t[f.id];t[f.id]=o(d,c),d.dispose()}}}}var pDe=N(()=>{"use strict";Ze();});function mDe(t,r,n,o){let i=kg(r),s=Xkt(t,r,n,i),a=r.length,l=w8(t,r,n,i,s),u=["Tensor"];return o&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${a}`),u.push(`  shape: [${r}]`),u.push("  values:")),u.push(l.map(c=>"    "+c).join(`
`)),u.join(`
`)}function Xkt(t,r,n,o){let i=on(r),s=o[o.length-1],a=new Array(s).fill(0),l=r.length,u=n==="complex64"?x3(t):t;if(l>1)for(let c=0;c<i/s;c++){let f=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],b3(u[f+d],0,n).length)}return a}function b3(t,r,n){let o;return Array.isArray(t)?o=`${parseFloat(t[0].toFixed(Woe))} + ${parseFloat(t[1].toFixed(Woe))}j`:Eh(t)?o=`'${t}'`:n==="bool"?o=gDe(t):o=parseFloat(t.toFixed(Woe)).toString(),vS(o,r)}function gDe(t){return t===0?"false":"true"}function w8(t,r,n,o,i,s=!0){let a=n==="complex64"?2:1,l=r[0],u=r.length;if(u===0){if(n==="complex64"){let g=x3(t);return[b3(g[0],0,n)]}return n==="bool"?[gDe(t[0])]:[t[0].toString()]}if(u===1){if(l>hDe){let y=y3*a,b=Array.from(t.slice(0,y)),x=Array.from(t.slice((l-y3)*a,l*a));return n==="complex64"&&(b=x3(b),x=x3(x)),["["+b.map((v,w)=>b3(v,i[w],n)).join(", ")+", ..., "+x.map((v,w)=>b3(v,i[l-y3+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?x3(t):Array.from(t)).map((y,b)=>b3(y,i[b],n)).join(", ")+"]"]}let c=r.slice(1),f=o.slice(1),d=o[0]*a,p=[];if(l>hDe){for(let g=0;g<y3;g++){let y=g*d,b=y+d;p.push(...w8(t.slice(y,b),c,n,f,i,!1))}p.push("...");for(let g=l-y3;g<l;g++){let y=g*d,b=y+d;p.push(...w8(t.slice(y,b),c,n,f,i,g===l-1))}}else for(let g=0;g<l;g++){let y=g*d,b=y+d;p.push(...w8(t.slice(y,b),c,n,f,i,g===l-1))}let h=u===2?",":"";p[0]="["+(l>0?p[0]+h:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+h;let m=`,
`;for(let g=2;g<u;g++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":m),p}function x3(t){let r=[];for(let n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return r}var hDe,y3,Woe,yDe=N(()=>{"use strict";Ze();hDe=20,y3=3,Woe=7});function bDe(t){Mh=t}function xDe(t){mI=t}function vDe(t){Kkt=t}function Ce(){return d3("Tensor",()=>tn)}var Tn,Mh,mI,Kkt,tn,_0,Je=N(()=>{"use strict";h8();yDe();Ze();Ze();Tn=class{constructor(r,n,o){if(this.dtype=n,this.shape=r.slice(),this.size=on(r),o!=null){let i=o.length;pe(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=o||d8(n,this.size),this.strides=kg(r)}set(r,...n){n.length===0&&(n=[0]),pe(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let o=this.locToIndex(n);this.values[o]=r}get(...r){r.length===0&&(r=[0]);let n=0;for(let i of r){if(i<0||i>=this.shape[n]){let s=`Requested out of range element at ${r}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let o=r[r.length-1];for(let i=0;i<r.length-1;++i)o+=this.strides[i]*r[i];return this.values[o]}locToIndex(r){if(this.rank===0)return 0;if(this.rank===1)return r[0];let n=r[r.length-1];for(let o=0;o<r.length-1;++o)n+=this.strides[o]*r[o];return n}indexToLoc(r){if(this.rank===0)return[];if(this.rank===1)return[r];let n=new Array(this.shape.length);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(r/this.strides[o]),r-=n[o]*this.strides[o];return n[n.length-1]=r,n}get rank(){return this.shape.length}toTensor(){return Mh().makeTensor(this.values,this.shape,this.dtype)}},Mh=null,mI=null,Kkt=null;tn=class{constructor(r,n,o,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=r.slice(),this.dtype=n||"float32",this.size=on(r),this.strides=kg(r),this.dataId=o,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return je(this,null,function*(){let r=yield this.data();return mI.buffer(this.shape,this.dtype,r)})}bufferSync(){return mI.buffer(this.shape,this.dtype,this.dataSync())}array(){return je(this,null,function*(){let r=yield this.data();return xS(this.shape,r,this.dtype==="complex64")})}arraySync(){return xS(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return je(this,null,function*(){this.throwIfDisposed();let r=Mh().read(this.dataId);if(this.dtype==="string"){let n=yield r;try{return n.map(o=>hI(o))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return r})}dataToGPU(r){return this.throwIfDisposed(),Mh().readToGPU(this.dataId,r)}dataSync(){this.throwIfDisposed();let r=Mh().readSync(this.dataId);if(this.dtype==="string")try{return r.map(n=>hI(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return r}bytes(){return je(this,null,function*(){this.throwIfDisposed();let r=yield Mh().read(this.dataId);return this.dtype==="string"?r:new Uint8Array(r.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Mh().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(r=!1){return mI.print(this,r)}clone(){return this.throwIfDisposed(),mI.clone(this)}toString(r=!1){let n=this.dataSync();return mDe(n,this.shape,this.dtype,r)}cast(r){return this.throwIfDisposed(),mI.cast(this,r)}variable(r=!0,n,o){return this.throwIfDisposed(),Mh().makeVariable(this,r,n,o)}};Object.defineProperty(tn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});Ce();_0=class extends tn{constructor(r,n,o,i){super(r.shape,r.dtype,r.dataId,i),this.trainable=n,this.name=o}assign(r){if(r.dtype!==this.dtype)throw new Error(`dtype of the new value (${r.dtype}) and previous value (${this.dtype}) must match`);if(!au(r.shape,this.shape))throw new Error(`shape of the new value (${r.shape}) and previous value (${this.shape}) must match`);Mh().disposeTensor(this),this.dataId=r.dataId,Mh().incRef(this,null)}dispose(){Mh().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(_0,Symbol.hasInstance,{value:t=>t instanceof tn&&t.assign!=null&&t.assign instanceof Function})});function qi(t,r){if(t==="string"||r==="string"){if(t==="string"&&r==="string")return"string";throw new Error(`Can not upcast ${t} with ${r}`)}return Zkt[t][r]}function K1(t){return qi(t,"int32")}function _8(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function S8(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}var qoe,wDe,_De,SDe,CDe,Zkt,gI=N(()=>{"use strict";qoe=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(qoe||{}),wDe=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(wDe||{}),_De=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(_De||{}),SDe=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(SDe||{}),CDe=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(CDe||{}),Zkt={float32:SDe,int32:wDe,bool:_De,complex64:CDe}});var C8={};fn(C8,{assertTypesMatch:()=>Hoe,getTensorsInContainer:()=>v3,isTensorInList:()=>Qkt,makeTypesMatch:()=>sn});function sn(t,r){if(t.dtype===r.dtype)return[t,r];let n=qi(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function Hoe(t,r){pe(t.dtype===r.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${r.dtype}) input must match`)}function Qkt(t,r){return r.some(n=>n.id===t.id)}function v3(t){let r=[];return EDe(t,r,new Set),r}function EDe(t,r,n){if(t==null)return;if(t instanceof tn){r.push(t);return}if(!Jkt(t))return;let o=t;for(let i in o){let s=o[i];n.has(s)||(n.add(s),EDe(s,r,n))}}function Jkt(t){return Array.isArray(t)||typeof t=="object"}var oi=N(()=>{"use strict";Je();gI();Ze();});function Yoe(t){return t.kernelName!=null}function tIt(t){let r=f3(on(t),"float32");return ue.makeTensor(r,t,"float32")}function Xoe(){let t=Ooe();if(t._tfengine==null){let r=new oI(t);t._tfengine=new eIt(r)}return HIe(t._tfengine.ENV),bDe(()=>t._tfengine),t._tfengine}function rIt(t,r){let n={a:t,b:r};return ue.runKernel(lp,n)}var E8,eIt,ue,ze=N(()=>{"use strict";Toe();_a();h8();Ee();m3();m8();cDe();pDe();Je();oi();Ze();Ze();E8=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(r=>r.name)))}}}dispose(){for(let r in this.registeredVariables)this.registeredVariables[r].dispose()}},eIt=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new E8}ready(){return je(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o];if(yield this.initializeBackend(i).success){yield this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:o}=this.initializeBackendsAndReturnBest();if(o)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:o}=this.initializeBackend(n);if(o)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,o,i=1){return n in this.registryFactory?(w0(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:o,priority:i},!0)}setBackend(n){return je(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:o,asyncInit:i}=this.initializeBackend(n);if(!(i?yield o:o))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new v8(this.backendInstance),!0})}setupRegisteredKernels(){h3(this.backendName).forEach(o=>{o.setupFunc!=null&&o.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){h3(n).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[n])})}initializeBackend(n){let o=this.registryFactory[n];if(o==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let i=o.factory();if(i&&!(i instanceof Tg)&&typeof i.then=="function"){let s=++this.pendingBackendInitId,a=i.then(l=>s<this.pendingBackendInitId?!1:(this.registry[n]=l,this.pendingBackendInit=null,!0)).catch(l=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,w0(`Initialization of backend ${n} failed`),w0(l.stack||l.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(i){return w0(`Initialization of backend ${n} failed`),w0(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,o)=>this.registryFactory[o].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o],{success:s,asyncInit:a}=this.initializeBackend(i);if(a||s)return{name:i,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,o){let i=this.state.tensorInfo.get(o),s=i.backend,a=this.readSync(o),l=s.refCount(o);s.disposeData(o,!0),i.backend=n,n.move(o,a,i.shape,i.dtype,l),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,o){let i=null;if(o==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");o=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof o!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=n}let s;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(s),()=>(s=o(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(n,o,i){n();try{let s=i();return o(),s}catch(s){throw o(),s}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let o=ue.runKernel(Ah,{x:n}),i={x:n},s=l=>({x:()=>{let u="float32",c={x:l},f={dtype:u};return ue.runKernel(Th,c,f)}}),a=[];return this.addTapeNode(this.state.activeScope.name,i,[o],s,a,{}),o}runKernel(n,o,i){if(this.backendName==null&&this.backend,!(TC(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:o,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,o,i){let s=this.backend.numDataIds(),a=0;i.forEach(c=>{a+=c.dtype==="complex64"?3:1});let l=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=s-o-a-l;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let o,i=[],s=this.isTapeOn(),a=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,f=Yoe(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Yoe(n)){let{kernelName:g,inputs:y,attrs:b}=n;this.backendName==null&&this.backend;let x=TC(g,this.backendName);pe(x!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),u=()=>{let v=this.backend.numDataIds();c=x.kernelFunc({inputs:y,attrs:b,backend:this.backend});let w=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,v,w);let _=w.map(S=>S.rank!=null?S:this.makeTensorFromTensorInfo(S));if(s){let S=this.getTensorsForGradient(g,y,_);i=this.saveTensorsForBackwardMode(S)}return _}}else{let{forwardFunc:g}=n,y=b=>{s&&(i=b.map(x=>this.keep(this.clone(x))))};u=()=>{let b=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,y));let x=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,b,x),x}}let{inputs:d,attrs:p}=n,h=Yoe(n)?null:n.backwardsFunc,m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?o=u():(m=this.profiler.profileKernel(f,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),o=m.outputs)}),s&&this.addTapeNode(f,d,o,h,i,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:o.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(c)?o:o[0]}saveTensorsForBackwardMode(n){return n.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(n,o,i){let s=g8(n);if(s!=null){let a=s.inputsToSave||[],l=s.outputsToSave||[],u;s.saveAllInputs?(pe(Array.isArray(o),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(o).map(f=>o[f])):u=a.map(f=>o[f]);let c=i.filter((f,d)=>l[d]);return u.concat(c)}return[]}makeTensor(n,o,i,s){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",s=s||this.backend;let a=n;i==="string"&&Eh(n[0])&&(a=n.map(c=>X1(c)));let l=s.write(a,o,i),u=new tn(o,i,l,this.nextTensorId());if(this.trackTensor(u,s),i==="string"){let c=this.state.tensorInfo.get(l),f=Moe(a);this.state.numBytes+=f-c.bytes,c.bytes=f}return u}makeTensorFromDataId(n,o,i,s){i=i||"float32";let a={dataId:n,shape:o,dtype:i};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(n,o){let{dataId:i,shape:s,dtype:a}=n,l=new tn(s,a,i,this.nextTensorId());return this.trackTensor(l,o),l}makeVariable(n,o=!0,i,s){i=i||this.nextVariableId().toString(),s!=null&&s!==n.dtype&&(n=n.cast(s));let a=new _0(n,o,i,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(n,o){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*tI(n.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:o||this.backend,dtype:n.dtype,shape:n.shape,bytes:i})),n instanceof _0||this.track(n)}incRef(n,o){this.trackTensor(n,o),this.backend.incRef(n.dataId)}removeDataId(n,o){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===o&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let o=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=o.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let i=n.size*tI(n.dtype);this.state.numBytes-=i}o.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,o.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let o=this.state.registeredVariables[n];this.disposeVariable(o)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return je(this,null,function*(){this.state.profiling=!0;let o=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-o,this.state.activeProfile.newTensors=this.state.numTensors-i;for(let s of this.state.activeProfile.kernels)s.kernelTimeMs=yield s.kernelTimeMs,s.extraInfo=yield s.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,o,i,s,a,l){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:o,outputs:i,saved:a},c=g8(n);c!=null&&(s=c.gradFunc),s!=null&&(u.gradient=f=>(f=f.map((d,p)=>{if(d==null){let h=i[p],m=nI(h.size,h.dtype);return this.makeTensor(m,h.shape,h.dtype)}return d}),s(f.length>1?f:f[0],a,l))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let o={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(o.name=n),this.state.scopeStack.push(o),this.state.activeScope=o}endScope(n){let o=v3(n),i=new Set(o.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let l=this.state.activeScope.track[a];!l.kept&&!i.has(l.id)&&l.dispose()}let s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],o.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(n,o,i,s=!1){if(pe(o.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));pe(a instanceof tn,()=>"The result y returned by f() must be a tensor.");let l=fDe(this.state.activeTape,o,a);if(!s&&l.length===0&&o.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[a.id]=i??tIt(a.shape),dDe(u,l,f=>this.tidy(f),rIt);let c=o.map(f=>u[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(let d of f.saved)d.dispose()}),this.state.activeTape=null),{value:a,grads:c}})}customGrad(n){return pe(Ag(n),()=>"The f passed in customGrad(f) must be a function."),(...o)=>{pe(o.every(u=>u instanceof tn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i,s={};o.forEach((u,c)=>{s[c]=u});let a=(u,c)=>(i=n(...o,c),pe(i.value instanceof tn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),pe(Ag(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),l=(u,c)=>{let f=i.gradFunc(u,c),d=Array.isArray(f)?f:[f];pe(d.length===o.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),pe(d.every(h=>h instanceof tn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,m)=>{p[m]=()=>h}),p};return this.runKernelFunc({forwardFunc:a,backwardsFunc:l,inputs:s})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,o){return this.state.tensorInfo.get(n).backend.readToGPU(n,o)}time(n){return je(this,null,function*(){let o=NC(),i=yield this.backend.time(n);return i.wallMs=NC()-o,i})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new E8;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();ue=Xoe()});var vx={};fn(vx,{isBrowser:()=>Zoe,isMobile:()=>iIt,mockIsMobile:()=>oIt});function nIt(){return typeof navigator<"u"&&navigator!=null}function oIt(t){Koe=t}function iIt(t){if(Koe!==void 0)return Koe;if(t||nIt()){if(t||(t=navigator),t.product==="ReactNative")return!0;let r=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!r){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}return!1}function Zoe(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Koe,Qoe=N(()=>{"use strict";});var Ju,yI=N(()=>{"use strict";ze();Qoe();_a();Ju=Me();Ju.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ju.registerFlag("IS_BROWSER",()=>Zoe());Ju.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ju.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ju.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ju.registerFlag("PROD",()=>!1);Ju.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ju.getBool("DEBUG"));Ju.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ju.registerFlag("IS_TEST",()=>!1);Ju.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ju.getBool("DEBUG"));Ju.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ju.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ju.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function Wa(t,r){let n=t;if(Wi(t))return r==="string"?[]:[t.length];if(_8(t)){let i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(S8(t))return[t.buffer.size/(r==null?4:tI(r))];if(!Array.isArray(t))return[];let o=[];for(;Array.isArray(n)||Wi(n)&&r!=="string";)o.push(n.length),n=n[0];return Array.isArray(t)&&Me().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ADe(t,o,[]),o}function ADe(t,r,n){if(n=n||[],!Array.isArray(t)&&!Wi(t)){pe(r.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${r[0]} elements`);return}pe(r.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),pe(t.length===r[0],()=>`Element arr[${n.join("][")}] should have ${r[0]} elements, but has ${t.length} elements`);let o=r.slice(1);for(let i=0;i<t.length;++i)ADe(t[i],o,n.concat(i))}function TDe(t,r,n,o){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==r||t==="numeric"&&r==="string")throw new Error(`Argument '${n}' passed to '${o}' must be ${t} tensor, but got ${r} tensor`)}}function J(t,r,n,o="numeric"){if(t instanceof Ce())return TDe(o,t.dtype,r,n),t;let i=O1(t);if(i!=="string"&&["bool","int32","float32"].indexOf(o)>=0&&(i=o),TDe(o,i,r,n),t==null||!Wi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let u=t==null?"null":t.constructor.name;throw new Error(`Argument '${r}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let s=Wa(t,i);!Wi(t)&&!Array.isArray(t)&&(t=[t]);let l=i!=="string"?pI(t,i):Nh(t,[],!0);return ue.makeTensor(l,s,i)}function wx(t,r,n,o="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${r} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>J(s,`${r}[${a}]`,n,o))}var Le=N(()=>{"use strict";ze();_a();Je();gI();Ze();Js();});function se(t){let r=Object.keys(t);if(r.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${r.length} keys.`);let n=r[0],o=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Joe;let i=(...s)=>{ue.startScope(n);try{let a=o(...s);return wS(a)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(a),a}catch(a){throw ue.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var Joe,Ne=N(()=>{"use strict";ze();Ze();Joe="__op"});function sIt(t,r){let n=J(t,"real","complex"),o=J(r,"imag","complex");$o(n.shape,o.shape,`real and imag shapes, ${n.shape} and ${o.shape}, must match in call to tf.complex().`);let i={real:n,imag:o};return ue.runKernel(kS,i)}var ec,Z1=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();ec=se({complex_:sIt})});function uu(t,r,n,o){if(o==null)o=O1(t);else if(o==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(S8(t)||_8(t)){if(o!=="float32"&&o!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${o}.`);return ue.backend.createTensorFromGPUData(t,r||n,o)}if(!Wi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(r!=null){ri(r);let i=on(r),s=on(n);pe(i===s,()=>`Based on the provided shape, [${r}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1?l!==on(r.slice(a)):!0;pe(n[a]===r[a]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${r}). `)}}return!Wi(t)&&!Array.isArray(t)&&(t=[t]),r=r||n,t=o!=="string"?pI(t,o):Nh(t,[],!0),ue.makeTensor(t,r,o)}var _x=N(()=>{"use strict";ze();gI();Ze();});function ii(t,r,n){let o=Wa(t,n);return uu(t,r,o,n)}var w3=N(()=>{"use strict";Le();_x();});var Sx,eie=N(()=>{"use strict";Sx={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function aIt(t,r){let n=0,o=t.length;for(;n<=o;){let i=Math.floor((o-n)/2)+n,s=r(t[i]);if(s===0)return i;s<0?o=i:n=i+1}return-1}var qa,Q1=N(()=>{"use strict";Ze();qa=class t{static join(r){return new t(r).slice()}constructor(r){if(this.shards=[],this.previousShardIndex=0,r==null||(r instanceof Array||(r=[r]),r=r.map(o=>Wi(o)?o.buffer:o),r.length===0))return;this.bufferUniformSize=r[0].byteLength;let n=0;for(let o=0;o<r.length;o++){let i=r[o];o!==r.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(r=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(r=isNaN(Number(r))?0:r,n=isNaN(Number(n))?0:n,r=Math.max(0,r),n=Math.min(this.byteLength,n),n<=r)return new ArrayBuffer(0);let o=this.findShardForByte(r);if(o===-1)throw new Error(`Could not find start shard for byte ${r}`);let i=n-r,s=new ArrayBuffer(i),a=new Uint8Array(s),l=0;for(let u=o;u<this.shards.length;u++){let c=this.shards[u],d=r+l-c.start,p=l,m=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(a.set(g,p),l+=g.length,n<c.end)break}return s}findShardForByte(r){if(this.shards.length===0||r<0||r>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(r/this.bufferUniformSize),this.previousShardIndex;function n(i){return r<i.start?-1:r>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let o=aIt(this.shards,n);return o===-1?-1:(this.previousShardIndex=o,this.previousShardIndex)}}});function lIt(){Me().set("PROD",!0)}function uIt(){Me().set("DEBUG",!0)}function cIt(){Me().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function kDe(t){Me().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function fIt(){ue.disposeVariables()}function dd(){return ue}function bI(){return ue.memory()}function dIt(t){return ue.profile(t)}function Pe(t,r){return ue.tidy(t,r)}function Cr(t){v3(t).forEach(n=>n.dispose())}function Ms(t){return ue.keep(t)}function pIt(t){return ue.time(t)}function IDe(t){return ue.setBackend(t)}function tie(){return ue.ready()}function rie(){return ue.backendName}function hIt(t){ue.removeBackend(t)}function mIt(t){return ue.findBackend(t)}function gIt(t){return ue.findBackendFactory(t)}function _3(t,r,n=1){return ue.registerBackend(t,r,n)}function S3(){return ue.backend}function yIt(t,r){Me().setPlatform(t,r)}var Yc=N(()=>{"use strict";ze();_a();Je();oi();vDe(kDe)});function MDe(t,r){return je(this,null,function*(){let n=[],o=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){let l=i[a],u=Array.isArray(t)?t[a].tensor:t[l];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${u.dtype}`);let c={name:l,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let f=new Promise(d=>je(this,null,function*(){let p=yield u.bytes(),h=p.reduce((y,b)=>y+b.length,0)+J1*p.length,m=new Uint8Array(h),g=0;for(let y=0;y<p.length;y++){let b=p[y],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,g),g+=J1,m.set(b,g),g+=b.length}d(m)}));o.push(f)}else o.push(u.data());r!=null&&(c.group=r),n.push(c)}let s=yield Promise.all(o);return{data:vIt(s),specs:n}})}function T8(t,r){let n=new qa(t),o={},i=0;for(let s of r){let a=bIt(s,(l,u)=>n.slice(i+l,i+u));o[s.name]=FDe(s,n.slice(i,i+a)),i+=a}return o}function bIt(t,r){let n=on(t.shape),o;if("quantization"in t){let i=t.quantization;o=Sx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=J1+new Uint32Array(r(i,i+J1))[0];return i}else o=Sx[t.dtype];return n*o}function xIt(t,r){return je(this,null,function*(){let n=on(t.shape),o;if("quantization"in t){let i=t.quantization;o=Sx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=J1+new Uint32Array(yield r(i,i+J1))[0];return i}else o=Sx[t.dtype];return n*o})}function FDe(t,r){let n=t.name,o=t.dtype,i=t.shape,s=on(i),a,l=0;if("quantization"in t){let u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Sx[u.dtype],f=u.dtype==="uint8"?new Uint8Array(r):new Uint16Array(r);if(o==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){a=new Float32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=p*u.scale+u.min}}else if(u.dtype==="float16")a=CIt()(f);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(o==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);a=new Int32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=Math.round(p*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*c}else if(o==="string"){let u=on(t.shape);a=[];for(let c=0;c<u;c++){let f=new Uint32Array(r.slice(l,l+J1))[0];l+=J1;let d=new Uint8Array(r.slice(l,l+f));a.push(d),l+=f}}else{let u=Sx[o];if(o==="float32")a=new Float32Array(r);else if(o==="int32")a=new Int32Array(r);else if(o==="bool")a=new Uint8Array(r);else if(o==="complex64"){a=new Float32Array(r);let c=new Float32Array(a.length/2),f=new Float32Array(a.length/2);for(let m=0;m<c.length;m++)c[m]=a[m*2],f[m]=a[m*2+1];let d=ii(c,i,"float32"),p=ii(f,i,"float32"),h=ec(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*u}return ii(a,i,o)}function DDe(t,r,n){return je(this,null,function*(){let o=new Uint8Array(r);for(;o.byteLength<n;){let{done:i,value:s}=yield t.read();if(i&&s==null){let l=n-o.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}let a=new Uint8Array(o.length+s.byteLength);a.set(o,0),a.set(new Uint8Array(s),o.length),o=a}return o.buffer})}function nie(t,r){return je(this,null,function*(){let n={},o=t.getReader(),i=new ArrayBuffer(0);for(let s of r){let a=yield xIt(s,(c,f)=>je(this,null,function*(){return i=yield DDe(o,i,f),i.slice(c,f)}));i=yield DDe(o,i,a);let l=i.slice(0,a);i=i.slice(a);let u=FDe(s,l);if(n[s.name]=u,rie()==="webgpu"){let c=S3();"uploadToGPU"in c&&on(u.shape)>=Me().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function vIt(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let r=0,n=[];t.forEach(s=>{if(r+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});let o=new Uint8Array(r),i=0;return n.forEach(s=>{o.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),o.buffer}function NDe(t){return oie?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function ODe(t){if(oie)return Buffer.from(t).toString("base64");let r=new Uint8Array(t),n="";for(let o=0,i=r.length;o<i;o++)n+=String.fromCharCode(r[o]);return btoa(n)}function RDe(t){if(oie){let o=Buffer.from(t,"base64");return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}let r=atob(t),n=new Uint8Array(r.length);for(let o=0;o<r.length;++o)n.set([r.charCodeAt(o)],o);return n.buffer}function PDe(t){return qa.join(t)}function iie(t){let r="/";for(t=t.trim();t.endsWith(r);)t=t.slice(0,t.length-1);let n=t.split(r);return n[n.length-1]}function A8(t,r){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function sie(t,r,n){let o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(o.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!r)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");o.weightSpecs=r,o.weightData=n}return t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(o.initializerSignature=t.initializerSignature),o}function xI(t,r){return je(this,null,function*(){let n,o;return t.weightsManifest!=null&&([n,o]=yield r(t.weightsManifest)),sie(t,n,o)})}function S0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:NDe(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:NDe(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new qa(t.weightData).byteLength}}function C3(t){let r=[];for(let n of t)r.push(...n.weights);return r}function wIt(){let t=n=>{let o=n<<13,i=0;for(;!(o&8388608);)i-=8388608,o<<=1;return o&=-8388609,i+=947912704,o|i},r=new Uint32Array(2048);r[0]=0;for(let n=1;n<1024;n++)r[n]=t(n);for(let n=1024;n<2048;n++)r[n]=939524096+(n-1024<<13);return r}function _It(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let r=1;r<31;r++)t[r]=r<<23;for(let r=33;r<63;r++)t[r]=2147483648+(r-32<<23);return t}function SIt(){let t=new Uint32Array(64);for(let r=0;r<64;r++)t[r]=1024;return t[0]=t[32]=0,t}function CIt(){let t=wIt(),r=_It(),n=SIt();return o=>{let i=new ArrayBuffer(4*o.length),s=new Uint32Array(i);for(let a=0;a<o.length;a++){let l=o[a],u=t[n[l>>10]+(l&1023)]+r[l>>10];s[a]=u}return new Float32Array(i)}}var J1,oie,ew=N(()=>{"use strict";Z1();w3();Ze();eie();Q1();Yc();_a();Yc();J1=4;oie=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var ea,LDe,jDe,BDe,$De,MC=N(()=>{"use strict";ea=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(r){t.getInstance().saveRouters.push(r)}static registerLoadRouter(r){t.getInstance().loadRouters.push(r)}static getSaveHandlers(r){return t.getHandlers(r,"save")}static getLoadHandlers(r,n){return t.getHandlers(r,"load",n)}static getHandlers(r,n,o){let i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(a=>{let l=a(r,o);l!==null&&i.push(l)}),i}},LDe=t=>ea.registerSaveRouter(t),jDe=t=>ea.registerLoadRouter(t),BDe=t=>ea.getSaveHandlers(t),$De=(t,r)=>ea.getLoadHandlers(t,r)});function zDe(){if(!Me().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,r=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(r==null)throw new Error("The current browser does not appear to support IndexedDB.");return r}function uie(t){let r=t.result;r.createObjectStore(FC,{keyPath:"modelPath"}),r.createObjectStore(tw,{keyPath:"modelPath"})}function EIt(t){return new OC(t)}function TIt(t){return t.startsWith(OC.URL_SCHEME)?t.slice(OC.URL_SCHEME.length):t}var aie,lie,FC,tw,OC,UDe,k8,cie=N(()=>{"use strict";yI();_a();ew();MC();Q1();aie="tensorflowjs",lie=1,FC="models_store",tw="model_info_store";OC=(()=>{class t{constructor(n){if(this.indexedDB=zDe(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return je(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return je(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,o){return new Promise((i,s)=>{let a=this.indexedDB.open(aie,lie);a.onupgradeneeded=()=>uie(a),a.onsuccess=()=>{let l=a.result;if(o==null){let u=l.transaction(FC,"readonly"),f=u.objectStore(FC).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return l.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(f.result.modelArtifacts)},f.onerror=d=>(l.close(),s(f.error)),u.oncomplete=()=>l.close()}else{o.weightData=qa.join(o.weightData);let u=S0(o),c=l.transaction(tw,"readwrite"),f=c.objectStore(tw),d;try{d=f.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(h){return s(h)}let p;d.onsuccess=()=>{p=l.transaction(FC,"readwrite");let h=p.objectStore(FC),m;try{m=h.put({modelPath:this.modelPath,modelArtifacts:o,modelArtifactsInfo:u})}catch(g){return s(g)}m.onsuccess=()=>i({modelArtifactsInfo:u}),m.onerror=g=>{f=c.objectStore(tw);let y=f.delete(this.modelPath);y.onsuccess=()=>(l.close(),s(m.error)),y.onerror=b=>(l.close(),s(m.error))}},d.onerror=h=>(l.close(),s(d.error)),c.oncomplete=()=>{p==null?l.close():p.oncomplete=()=>l.close()}}},a.onerror=l=>s(a.error)})}}return t.URL_SCHEME="indexeddb://",t})(),UDe=t=>Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(OC.URL_SCHEME)?EIt(t.slice(OC.URL_SCHEME.length)):null;ea.registerSaveRouter(UDe);ea.registerLoadRouter(UDe);k8=class{constructor(){this.indexedDB=zDe()}listModels(){return je(this,null,function*(){return new Promise((r,n)=>{let o=this.indexedDB.open(aie,lie);o.onupgradeneeded=()=>uie(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(tw,"readonly"),l=s.objectStore(tw).getAll();l.onsuccess=()=>{let u={};for(let c of l.result)u[c.modelPath]=c.modelArtifactsInfo;r(u)},l.onerror=u=>(i.close(),n(l.error)),s.oncomplete=()=>i.close()},o.onerror=i=>n(o.error)})})}removeModel(r){return je(this,null,function*(){return r=TIt(r),new Promise((n,o)=>{let i=this.indexedDB.open(aie,lie);i.onupgradeneeded=()=>uie(i),i.onsuccess=()=>{let s=i.result,a=s.transaction(tw,"readwrite"),l=a.objectStore(tw),u=l.get(r),c;u.onsuccess=()=>{if(u.result==null)return s.close(),o(new Error(`Cannot find model with path '${r}' in IndexedDB.`));{let f=l.delete(r),d=()=>{c=s.transaction(FC,"readwrite");let h=c.objectStore(FC).delete(r);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=m=>o(u.error)};f.onsuccess=d,f.onerror=p=>(d(),s.close(),o(u.error))}},u.onerror=f=>(s.close(),o(u.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>o(i.error)})})}}});function GDe(t){return{info:[vI,t,VDe].join(Cx),topology:[vI,t,AIt].join(Cx),weightSpecs:[vI,t,kIt].join(Cx),weightData:[vI,t,IIt].join(Cx),modelMetadata:[vI,t,DIt].join(Cx)}}function WDe(t){for(let r of Object.values(t))window.localStorage.removeItem(r)}function NIt(t){let r=t.split(Cx);if(r.length<3)throw new Error(`Invalid key format: ${t}`);return r.slice(1,r.length-1).join(Cx)}function MIt(t){return t.startsWith(RC.URL_SCHEME)?t.slice(RC.URL_SCHEME.length):t}function FIt(t){return new RC(t)}var Cx,vI,VDe,AIt,kIt,IIt,DIt,RC,qDe,I8,fie=N(()=>{"use strict";yI();_a();Ze();ew();Q1();MC();Cx="/",vI="tensorflowjs_models",VDe="info",AIt="model_topology",kIt="weight_specs",IIt="weight_data",DIt="model_metadata";RC=(()=>{class t{constructor(n){if(!Me().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=GDe(this.modelPath)}save(n){return je(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let o=JSON.stringify(n.modelTopology),i=JSON.stringify(n.weightSpecs),s=S0(n),a=qa.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,o),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,ODe(a));let l={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(l)),{modelArtifactsInfo:s}}catch{throw WDe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}})}load(){return je(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let o={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);o.modelTopology=i;let s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);o.weightSpecs=s;let a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){let u=JSON.parse(a);o.format=u.format,o.generatedBy=u.generatedBy,o.convertedBy=u.convertedBy,u.signature!=null&&(o.signature=u.signature),u.userDefinedMetadata!=null&&(o.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(o.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(o.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(o.trainingConfig=u.trainingConfig)}let l=this.LS.getItem(this.keys.weightData);if(l==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return o.weightData=RDe(l),o})}}return t.URL_SCHEME="localstorage://",t})(),qDe=t=>Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(RC.URL_SCHEME)?FIt(t.slice(RC.URL_SCHEME.length)):null;ea.registerSaveRouter(qDe);ea.registerLoadRouter(qDe);I8=class{constructor(){pe(Me().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),pe(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return je(this,null,function*(){let r={},n=vI+Cx,o=Cx+VDe;for(let i=0;i<this.LS.length;++i){let s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(o)){let a=NIt(s);r[a]=JSON.parse(this.LS.getItem(s))}}return r})}removeModel(r){return je(this,null,function*(){r=MIt(r);let n=GDe(r);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${r}'`);let o=JSON.parse(this.LS.getItem(n.info));return WDe(n),o})}}});function D8(t){if(t.indexOf(wI)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Fh.getSchemes().join(",")}`);return{scheme:t.split(wI)[0],path:t.split(wI)[1]}}function HDe(t,r,n=!1){return je(this,null,function*(){pe(t!==r,()=>`Old path and new path are the same: '${t}'`);let o=ea.getLoadHandlers(t);pe(o.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),pe(o.length<2,()=>`Copying failed because more than one (${o.length}) load handlers for source URL ${t}.`);let i=o[0],s=ea.getSaveHandlers(r);pe(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${r}.`),pe(s.length<2,()=>`Copying failed because more than one (${o.length}) save handlers for destination URL ${r}.`);let a=s[0],l=D8(t).scheme,u=D8(t).path,c=l===D8(t).scheme,f=yield i.load();n&&c&&(yield Fh.getManager(l).removeModel(u));let d=yield a.save(f);return n&&!c&&(yield Fh.getManager(l).removeModel(u)),d.modelArtifactsInfo})}function YDe(){return je(this,null,function*(){let t=Fh.getSchemes(),r={};for(let n of t){let o=yield Fh.getManager(n).listModels();for(let i in o){let s=n+wI+i;r[s]=o[i]}}return r})}function XDe(t){return je(this,null,function*(){let r=D8(t);return Fh.getManager(r.scheme).removeModel(r.path)})}function KDe(t,r){return je(this,null,function*(){return HDe(t,r,!1)})}function ZDe(t,r){return je(this,null,function*(){return HDe(t,r,!0)})}var wI,Fh,die=N(()=>{"use strict";Ze();MC();wI="://",Fh=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(r,n){pe(r!=null,()=>"scheme must not be undefined or null."),r.endsWith(wI)&&(r=r.slice(0,r.indexOf(wI))),pe(r.length>0,()=>"scheme must not be an empty string.");let o=t.getInstance();pe(o.managers[r]==null,()=>`A model store manager is already registered for scheme '${r}'.`),o.managers[r]=n}static getManager(r){let n=t.getInstance().managers[r];if(n==null)throw new Error(`Cannot find model manager for scheme '${r}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}}});var pie,QDe=N(()=>{"use strict";yI();_a();cie();fie();die();Boe();pie=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(r,n){return fetch(r,n)}now(){return performance.now()}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(r)}decode(r,n){return new TextDecoder(n).decode(r)}setTimeoutCustom(r,n){if(typeof window>"u"||!Me().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(r,n);return}this.functionRefs.push(r),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",o=>{if(o.source===window&&o.data.name===this.messageName){o.stopPropagation();let i=this.functionRefs[o.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(r){return y8(r)}};if(Me().get("IS_BROWSER")){Me().setPlatform("browser",new pie);try{Fh.registerManager(RC.URL_SCHEME,new I8)}catch{}try{Fh.registerManager(OC.URL_SCHEME,new k8)}catch{}}});var eNe=mt((_I,JDe)=>{"use strict";var OIt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},PC=OIt();JDe.exports=_I=PC.fetch;PC.fetch&&(_I.default=PC.fetch.bind(PC));_I.Headers=PC.Headers;_I.Request=PC.Request;_I.Response=PC.Response});var tNe=mt(()=>{"use strict"});var RIt,hie,mie,rNe=N(()=>{"use strict";_a();RIt={importFetch:()=>eNe()},mie=class{constructor(){this.util=tNe(),this.textEncoder=new this.util.TextEncoder}fetch(r,n){return Me().global.fetch!=null?Me().global.fetch(r,n):(hie==null&&(hie=RIt.importFetch()),hie(r,n))}now(){let r=process.hrtime();return r[0]*1e3+r[1]/1e6}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(r)}decode(r,n){return r.length===0?"":new this.util.TextDecoder(n).decode(r)}isTypedArray(r){return this.util.types.isFloat32Array(r)||this.util.types.isInt32Array(r)||this.util.types.isUint8Array(r)||this.util.types.isUint8ClampedArray(r)}};Me().get("IS_NODE")&&!Me().get("IS_BROWSER")&&Me().setPlatform("node",new mie)});function er(t,r="float32",n){return r=r||"float32",ri(t),new Tn(t,r,n)}var Ex=N(()=>{"use strict";Je();Ze();});function PIt(t,r){let n=J(t,"x","cast");if(!Noe(r))throw new Error(`Failed to cast to unknown dtype ${r}`);if(r==="string"&&n.dtype!=="string"||r!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let o={x:n},i={dtype:r};return ue.runKernel(Th,o,i)}var rt,pn=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();rt=se({cast_:PIt})});function LIt(t){let n={x:J(t,"x","clone","string_or_numeric")};return ue.runKernel(Ah,n)}var tc,SI=N(()=>{"use strict";ze();Ee();Le();Ne();tc=se({clone_:LIt})});function N8(t,r=!1){console.log(t.toString(r))}var gie=N(()=>{"use strict";});var jIt,nNe=N(()=>{"use strict";ze();yI();QDe();rNe();Ex();pn();SI();gie();Je();Xoe();jIt={buffer:er,cast:rt,clone:tc,print:N8};xDe(jIt)});function BIt(t,r){let n=J(t,"a","add"),o=J(r,"b","add");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(lp,i)}var Ke,zo=N(()=>{"use strict";ze();Ee();oi();Le();Ne();Ke=se({add_:BIt})});function $It(t,r){let n=J(t,"a","floorDiv"),o=J(r,"b","floorDiv");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(qg,i)}var CI,M8=N(()=>{"use strict";ze();Ee();oi();Le();Ne();CI=se({floorDiv_:$It})});function zIt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");if([n,o]=sn(n,o),n.dtype==="int32"&&o.dtype==="int32")return CI(n,o);let i={a:n,b:o},s={};return ue.runKernel($g,i,s)}var Tt,Kn=N(()=>{"use strict";ze();Ee();oi();Le();M8();Ne();Tt=se({div_:zIt})});function UIt(t,r){let n=J(t,"a","mul"),o=J(r,"b","mul");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(r0,i)}var we,fr=N(()=>{"use strict";ze();Ee();oi();Le();Ne();we=se({mul_:UIt})});function VIt(t){let r=J(t,"x","abs");if(r.dtype==="complex64"){let n={x:r};return ue.runKernel(Rb,n)}else{let n={x:r};return ue.runKernel(Ab,n)}}var Ao,LC=N(()=>{"use strict";ze();Ee();Le();Ne();Ao=se({abs_:VIt})});function GIt(t){let n={x:J(t,"x","acos")};return ue.runKernel(Ig,n)}var F8,oNe=N(()=>{"use strict";ze();Ee();Le();Ne();F8=se({acos_:GIt})});function WIt(t){let n={x:J(t,"x","acosh")};return ue.runKernel(Dg,n)}var O8,iNe=N(()=>{"use strict";ze();Ee();Le();Ne();O8=se({acosh_:WIt})});function qIt(t){pe(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),pe(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let r=t.map((i,s)=>J(i,`tensors${s}`,"addN")),n=r[0];r.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),r.forEach(i=>{if(!au(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let o=r;return ue.runKernel(kb,o)}var sNe,aNe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();sNe=se({addN_:qIt})});function HIt(t,r=null,n=!1){let i={x:J(t,"x","all","bool")},s={axis:r,keepDims:n};return ue.runKernel(_S,i,s)}var EI,yie=N(()=>{"use strict";ze();Ee();Le();Ne();EI=se({all_:HIt})});function YIt(t,r=null,n=!1){let i={x:J(t,"x","any","bool")},s={axis:r,keepDims:n};return ue.runKernel(SS,i,s)}var jC,bie=N(()=>{"use strict";ze();Ee();Le();Ne();jC=se({any_:YIt})});function XIt(t,r=0){let o={x:J(t,"x","argMax")},i={axis:r};return ue.runKernel(Ib,o,i)}var cu,xie=N(()=>{"use strict";ze();Ee();Le();Ne();cu=se({argMax_:XIt})});function KIt(t,r=0){let o={x:J(t,"x","argMin")},i={axis:r};return ue.runKernel(Db,o,i)}var R8,vie=N(()=>{"use strict";ze();Ee();Le();Ne();R8=se({argMin_:KIt})});function ZIt(t){let n={x:J(t,"x","asin")};return ue.runKernel(Ng,n)}var P8,lNe=N(()=>{"use strict";ze();Ee();Le();Ne();P8=se({asin_:ZIt})});function QIt(t){let n={x:J(t,"x","asinh")};return ue.runKernel(Mg,n)}var L8,uNe=N(()=>{"use strict";ze();Ee();Le();Ne();L8=se({asinh_:QIt})});function JIt(t){let n={x:J(t,"x","atan")};return ue.runKernel(Fg,n)}var j8,cNe=N(()=>{"use strict";ze();Ee();Le();Ne();j8=se({atan_:JIt})});function eDt(t,r){let n=J(t,"a","atan2"),o=J(r,"b","atan2");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Rg,i)}var B8,wie=N(()=>{"use strict";ze();Ee();oi();Le();Ne();B8=se({atan2_:eDt})});function tDt(t){let n={x:J(t,"x","atanh")};return ue.runKernel(Og,n)}var $8,fNe=N(()=>{"use strict";ze();Ee();Le();Ne();$8=se({atanh_:tDt})});function rDt(t,r,n,o,i="NHWC",s){let a=t[3],l=[...r,a],u=pNe(i);return BC(t,l,n,s,o,null,null,u)}function Sie(t,r,n,o,i,s,a="channelsLast"){let[l,u]=E3(r),c;if(a==="channelsLast")c=[l,u,t[3],t[3]];else if(a==="channelsFirst")c=[l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return BC(t,c,n,o,i,s,!1,a)}function nDt(t,r,n,o,i,s,a="NDHWC"){let[l,u,c]=_ie(r),f,d;if(a==="NDHWC")d="channelsLast",f=[l,u,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",f=[l,u,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return dNe(t,f,n,o,i,!1,d,s)}function BC(t,r,n,o,i,s,a=!1,l="channelsLast"){let[u,c,f,d]=[-1,-1,-1,-1];if(l==="channelsLast")[u,c,f,d]=t;else if(l==="channelsFirst")[u,d,c,f]=t;else throw new Error(`Unknown dataFormat ${l}`);let[p,h,,m]=r,[g,y]=E3(n),[b,x]=E3(o),v=TI(p,b),w=TI(h,x),{padInfo:_,outHeight:S,outWidth:C}=sDt(i,c,f,g,y,v,w,s,l),E=a?m*d:m,T;return l==="channelsFirst"?T=[u,E,S,C]:l==="channelsLast"&&(T=[u,S,C,E]),{batchSize:u,dataFormat:l,inHeight:c,inWidth:f,inChannels:d,outHeight:S,outWidth:C,outChannels:E,padInfo:_,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:h,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:b,dilationWidth:x,inShape:t,outShape:T,filterShape:r}}function dNe(t,r,n,o,i,s=!1,a="channelsLast",l){let[u,c,f,d,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[u,c,f,d,p]=t;else if(a==="channelsFirst")[u,p,c,f,d]=t;else throw new Error(`Unknown dataFormat ${a}`);let[h,m,g,,y]=r,[b,x,v]=_ie(n),[w,_,S]=_ie(o),C=TI(h,w),E=TI(m,_),T=TI(g,S),{padInfo:I,outDepth:k,outHeight:F,outWidth:D}=aDt(i,c,f,d,b,x,v,C,E,T,l),L=s?y*p:y,P;return a==="channelsFirst"?P=[u,L,k,F,D]:a==="channelsLast"&&(P=[u,k,F,D,L]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:k,outHeight:F,outWidth:D,outChannels:L,padInfo:I,strideDepth:b,strideHeight:x,strideWidth:v,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationDepth:w,dilationHeight:_,dilationWidth:S,inShape:t,outShape:P,filterShape:r}}function oDt(t,r,n,o,i){o==null&&(o=Cie(t,r,n));let s=t[0],a=t[1],l=T3((s-r+2*o)/n+1,i),u=T3((a-r+2*o)/n+1,i);return[l,u]}function iDt(t,r,n,o,i,s){i==null&&(i=Cie(t,r[0],o[0]));let a=[0,0,0,n];for(let l=0;l<3;l++)t[l]+2*i>=r[l]&&(a[l]=T3((t[l]-r[l]+2*i)/o[l]+1,s));return a}function Cie(t,r,n,o=1){let i=TI(r,o);return Math.floor((t[0]*(n-1)-n+i)/2)}function E3(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function _ie(t){return typeof t=="number"?[t,t,t]:t}function TI(t,r){return r<=1?t:t+(t-1)*(r-1)}function sDt(t,r,n,o,i,s,a,l,u){let c,f,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=oDt([r,n],s,o,t,l);f=h[0],d=h[1]}else if(t==="same"){f=Math.ceil(r/o),d=Math.ceil(n/i);let p=Math.max(0,(f-1)*o+s-r),h=Math.max(0,(d-1)*i+a-n),m=Math.floor(p/2),g=p-m,y=Math.floor(h/2),b=h-y;c={top:m,bottom:g,left:y,right:b,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((r-s+1)/o),d=Math.ceil((n-a+1)/i);else if(typeof t=="object"){let p=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],m=u==="channelsLast"?t[2][0]:t[3][0],g=u==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:m,right:g,type:p===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},f=T3((r-s+p+h)/o+1,l),d=T3((n-a+m+g)/i+1,l)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:d}}function aDt(t,r,n,o,i,s,a,l,u,c,f){let d,p,h,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let y=iDt([r,n,o,1],[l,u,c],1,[i,s,a],t,f);p=y[0],h=y[1],m=y[2]}else if(t==="same"){p=Math.ceil(r/i),h=Math.ceil(n/s),m=Math.ceil(o/a);let g=(p-1)*i+l-r,y=(h-1)*s+u-n,b=(m-1)*a+c-o,x=Math.floor(g/2),v=g-x,w=Math.floor(y/2),_=y-w,S=Math.floor(b/2),C=b-S;d={top:w,bottom:_,left:S,right:C,front:x,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function T3(t,r){if(!r)return Math.trunc(t);switch(r){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${r}`)}}function pd(t){let[r,n,o]=E3(t);return r===1&&n===1&&o===1}function Ca(t,r){return pd(t)||pd(r)}function C0(t){return E3(t).every(r=>r>0)}function pNe(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function go(t,r,n){if(n!=null){if(typeof r=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);if(typeof r=="number")pe(Tb(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);else if(typeof r=="object")r.forEach(o=>{o.forEach(i=>{pe(Tb(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${r}`)}}var Fs=N(()=>{"use strict";Ze();});function lDt(t,r){let o={x:J(t,"x","reshape","string_or_numeric")},i={shape:r};return ue.runKernel(ax,o,i)}var Se,Yt=N(()=>{"use strict";ze();Ee();Le();Ne();Se=se({reshape_:lDt})});function uDt(t,r,n,o,i){let s=J(t,"x","avgPool","float32"),a=1;pe(Ca(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pe(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),go("avgPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(Nb,c,f);return d=rt(d,s.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var rw,z8=N(()=>{"use strict";ze();Ee();Le();Ze();pn();Fs();Ne();Yt();rw=se({avgPool_:uDt})});function cDt(t,r,n,o,i,s="NDHWC"){let a=J(t,"x","avgPool3d","float32"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),pe(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),pe(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),pe(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),go("avgPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Mb,c,f);return d=rt(d,l.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var U8,hNe=N(()=>{"use strict";ze();Ee();Le();Ze();pn();Fs();Ne();Yt();U8=se({avgPool3d_:cDt})});function fDt(t,r=0){pe(t.length>=1,()=>"Pass at least one tensor to concat");let n=wx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return tc(n[0]);let o=n,i={axis:r};return ue.runKernel(Pb,o,i)}var On,md=N(()=>{"use strict";ze();Ee();Le();Ze();SI();Ne();On=se({concat_:fDt})});function dDt(t,r,n=!1,o=!1){let i=J(t,"a","matMul"),s=J(r,"b","matMul");[i,s]=sn(i,s);let a={a:i,b:s},l={transposeA:n,transposeB:o};return ue.runKernel(Fb,a,l)}var Vr,Oh=N(()=>{"use strict";ze();Ee();oi();Le();Ne();Vr=se({matMul_:dDt})});function pDt(t){let n={x:J(t,"x","sigmoid","float32")};return ue.runKernel(p0,n)}var Il,AI=N(()=>{"use strict";ze();Ee();Le();Ne();Il=se({sigmoid_:pDt})});function hDt(t,r,n){let o=J(t,"x","slice","string_or_numeric");if(o.rank===0)throw new Error("Slicing scalar is not possible");let i={x:o},s={begin:r,size:n};return ue.runKernel(dx,i,s)}var zr,rc=N(()=>{"use strict";ze();Ee();Le();Ne();zr=se({slice_:hDt})});function mDt(t){let n={x:J(t,"x","tanh","float32")};return ue.runKernel(x0,n)}var Rh,Eie=N(()=>{"use strict";ze();Ee();Le();Ne();Rh=se({tanh_:mDt})});function gDt(t,r,n,o,i,s){let a=J(t,"forgetBias","basicLSTMCell"),l=J(r,"lstmKernel","basicLSTMCell"),u=J(n,"lstmBias","basicLSTMCell"),c=J(o,"data","basicLSTMCell"),f=J(i,"c","basicLSTMCell"),d=J(s,"h","basicLSTMCell"),p=On([c,d],1),h=Vr(p,l),m=Ke(h,u),g=m.shape[0],y=m.shape[1]/4,b=[g,y],x=zr(m,[0,0],b),v=zr(m,[0,y],b),w=zr(m,[0,y*2],b),_=zr(m,[0,y*3],b),S=Ke(we(Il(x),Rh(v)),we(f,Il(Ke(a,w)))),C=we(Rh(S),Il(_));return[S,C]}var mNe,gNe=N(()=>{"use strict";Le();zo();md();Oh();fr();Ne();AI();rc();Eie();mNe=se({basicLSTMCell_:gDt})});function yDt(t,r,n){let o=J(t,"x","batchToSpaceND"),i=r.reduce((l,u)=>l*u);pe(o.rank>=1+r.length,()=>`input rank is ${o.rank} but should be > than blockShape.length ${r.length}`),pe(n.length===r.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${r.length}`),pe(o.shape[0]%i===0,()=>`input tensor batch is ${o.shape[0]} but is not divisible by the product of the elements of blockShape ${r.join(" * ")} === ${i}`);let s={x:o},a={blockShape:r,crops:n};return ue.runKernel(Ob,s,a)}var nw,A3=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();nw=se({batchToSpaceND_:yDt})});function yNe(t){let r;return t.rank===0||t.rank===1?r=Se(t,[1,1,1,t.size]):t.rank===2?r=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?r=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):r=t,r}var bNe=N(()=>{"use strict";Yt()});function bDt(t,r,n,o,i,s){s==null&&(s=.001);let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;o!=null&&(f=J(o,"offset","batchNorm")),pe(l.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),pe(f==null||l.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),pe(c==null||l.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:yNe(a),scale:c,offset:f,mean:l,variance:u},h={varianceEpsilon:s},m=ue.runKernel(Gb,p,h);return Se(m,a.shape)}var E0,kI=N(()=>{"use strict";ze();Ee();Le();Ze();bNe();Ne();Yt();E0=se({batchNorm_:bDt})});function xDt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),pe(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),pe(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),pe(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&pe(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&pe(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),E0(a,l,u,f,c,s)}var V8,xNe=N(()=>{"use strict";Le();Ze();kI();Ne();V8=se({batchNorm2d_:xDt})});function vDt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),pe(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),pe(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),pe(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&pe(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&pe(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),E0(a,l,u,f,c,s)}var G8,vNe=N(()=>{"use strict";Le();Ze();kI();Ne();G8=se({batchNorm3d_:vDt})});function wDt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),pe(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),pe(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),pe(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&pe(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&pe(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),E0(a,l,u,f,c,s)}var W8,wNe=N(()=>{"use strict";Le();Ze();kI();Ne();W8=se({batchNorm4d_:wDt})});function _Dt(t,r,n){let o=J(t,"x","bincount"),i=J(r,"weights","bincount");pe(o.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${o.dtype}`),pe(n>=0,()=>`size must be non-negative, but got ${n}.`),pe(i.size===o.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n};return ue.runKernel(TS,s,a)}var q8,Tie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();q8=se({bincount_:_Dt})});function SDt(t,r){let n=J(t,"x","bitwiseAnd"),o=J(r,"y","bitwiseAnd");if(!au(n.shape,o.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${o.shape}`);if(n.dtype!=="int32"||o.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${o.dtype}`);let i={a:n,b:o};return ue.runKernel(R1,i)}var _Ne,SNe=N(()=>{"use strict";ze();Ee();Le();Js();Ne();_Ne=se({bitwiseAnd_:SDt})});function CDt(t,r){let n=J(t,"s0","broadcastArgs","int32"),o=J(r,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(o.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${o.rank}`);let i={s0:n,s1:o};return ue.runKernel(AS,i)}var CNe,ENe=N(()=>{"use strict";ze();Ee();Le();Ne();CNe=se({broadcastArgs_:CDt})});function EDt(t,r){let n=J(t,"broadcastTo","x"),o=n.shape;if(ri(r),r.length<n.rank)throw new Error(`broadcastTo(): shape.length=${r.length} < input.rank=${n.rank}.`);if(r.length>n.rank){let c=n.shape.slice();for(;c.length<r.length;)c.unshift(1);n=Se(n,c)}let i=n.shape,s=Array.from(r);for(let c=r.length-1;c>=0;c--)if(i[c]===r[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return tc(n);let l={x:n},u={reps:s};return ue.runKernel(kh,l,u)}var T0,H8=N(()=>{"use strict";ze();Ee();Le();Js();SI();Ne();Yt();T0=se({broadcastTo_:EDt})});function TDt(t){let n={x:J(t,"x","ceil","float32")};return ue.runKernel(Pg,n)}var Y8,TNe=N(()=>{"use strict";ze();Ee();Le();Ne();Y8=se({ceil_:TDt})});function dp(t,r,n){ri(t),n=n||O1(r);let o={shape:t,value:r,dtype:n};return ue.runKernel(US,{},o)}var II=N(()=>{"use strict";ze();Ee();Ze();Js();});function ADt(t,r,n){let o=J(t,"x","clipByValue");if(pe(r<=n,()=>`Error in clip: min (${r}) must be less than or equal to max (${n}).`),r===n)return dp(o.shape,r,o.dtype);let i={x:o},s={clipValueMin:r,clipValueMax:n};return ue.runKernel(Lg,i,s)}var ta,ANe=N(()=>{"use strict";ze();Ee();Le();Ze();II();Ne();ta=se({clipByValue_:ADt})});function kDt(t){return On(t,0)}var X8,kNe=N(()=>{"use strict";md();Ne();X8=se({concat1d_:kDt})});function IDt(t,r){return On(t,r)}var K8,INe=N(()=>{"use strict";md();Ne();K8=se({concat2d_:IDt})});function DDt(t,r){return On(t,r)}var Z8,DNe=N(()=>{"use strict";md();Ne();Z8=se({concat3d_:DDt})});function NDt(t,r){return On(t,r)}var Q8,NNe=N(()=>{"use strict";md();Ne();Q8=se({concat4d_:NDt})});function MDt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","conv2d","float32"),u=J(r,"filter","conv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),pe(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),pe(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),go("conv2d",o,a);let d=i==="NHWC"?c.shape[3]:c.shape[1];pe(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),pe(Ca(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),pe(C0(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),pe(C0(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:u},h={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},m=ue.runKernel(Lb,p,h);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var nc,$C=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();nc=se({conv2d_:MDt})});function FDt(t,r,n,o,i="NWC",s=1,a){let l=J(t,"x","conv1d"),u=J(r,"filter","conv1d"),c=l,f=!1;l.rank===2&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1]])),pe(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),pe(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),go("conv1d",o,a),pe(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),pe(Ca(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),pe(C0(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),pe(C0(n),()=>"Error in conv1D: Stride should be larger than 0."),pe(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=Se(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=nc(p,d,[1,n],o,"NHWC",[1,s],a);return f?Se(y,[y.shape[2],y.shape[3]]):Se(y,[y.shape[0],y.shape[2],y.shape[3]])}var DI,Aie=N(()=>{"use strict";Le();Ze();$C();Fs();Ne();Yt();DI=se({conv1d_:FDt})});function ODt(t,r,n,o,i,s="NHWC",a){pe(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let l=t,u=r,c=!1;r.rank===3&&(c=!0,u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]),l=[1,t[0],t[1],t[2]]),pe(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),pe(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),pe(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let f=s==="NHWC"?l[3]:l[1],d=s==="NHWC"?u.shape[3]:u.shape[1];pe(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),pe(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),go("conv2dDerInput",i,a);let p={dy:u,filter:n},h={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:l},m=ue.runKernel(jb,p,h);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var NI,J8=N(()=>{"use strict";ze();Ee();Ze();Fs();Ne();Yt();NI=se({conv2DBackpropInput_:ODt})});function RDt(t,r,n,o,i,s){let a=J(t,"x","conv2dTranspose"),l=J(r,"filter","conv2dTranspose");return NI(n,a,l,o,i,"NHWC",s)}var MI,kie=N(()=>{"use strict";Le();J8();Ne();MI=se({conv2dTranspose_:RDt})});function PDt(t,r,n,o,i="NDHWC",s=[1,1,1]){let a=J(t,"x","conv3d"),l=J(r,"filter","conv3d"),u=a,c=!1;a.rank===4&&(c=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),pe(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),pe(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),pe(u.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${l.shape[3]}.`),pe(Ca(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),pe(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),pe(C0(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),pe(C0(n),()=>"Error in conv3D: Strides should be larger than 0.");let f={x:u,filter:l},d={strides:n,pad:o,dataFormat:i,dilations:s},p=ue.runKernel(Bb,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var eU,MNe=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();eU=se({conv3d_:PDt})});function LDt(t,r,n,o,i){pe(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let s=t,a=r,l=!1;r.rank===4&&(l=!0,a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);let u=s[4],c=a.shape[4];pe(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),pe(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),pe(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),pe(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),pe(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let f={dy:a,filter:n},d={pad:i,strides:o,inputShape:s},p=ue.runKernel(NS,f,d);return l?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var tU,Iie=N(()=>{"use strict";ze();Ee();Ze();Ne();Yt();tU=se({conv3DBackpropInput_:LDt})});function jDt(t,r,n,o,i){let s=J(t,"x","conv3dTranspose"),a=J(r,"filter","conv3dTranspose");return tU(n,s,a,o,i)}var rU,FNe=N(()=>{"use strict";Le();Iie();Ne();rU=se({conv3dTranspose_:jDt})});function BDt(t){let n={x:J(t,"x","cos","float32")};return ue.runKernel(jg,n)}var ow,nU=N(()=>{"use strict";ze();Ee();Le();Ne();ow=se({cos_:BDt})});function $Dt(t){let n={x:J(t,"x","cosh","float32")};return ue.runKernel(Bg,n)}var FI,Die=N(()=>{"use strict";ze();Ee();Le();Ne();FI=se({cosh_:$Dt})});function zDt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumprod")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(MS,s,a)}var zC,oU=N(()=>{"use strict";ze();Ee();Le();Ne();zC=se({cumprod_:zDt})});function UDt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumsum")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel($b,s,a)}var OI,iU=N(()=>{"use strict";ze();Ee();Le();Ne();OI=se({cumsum_:UDt})});function VDt(t,r,n,o=!1){let i=J(t,"x","denseBincount"),s=J(r,"weights","denseBincount");pe(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),pe(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),pe(n>=0,()=>`size must be non-negative, but got ${n}.`),pe(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);let a={x:i,weights:s},l={size:n,binaryOutput:o};return ue.runKernel(OS,a,l)}var k3,ONe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();k3=se({denseBincount_:VDt})});function GDt(t,r,n="NHWC"){let o=J(t,"x","depthToSpace","float32"),i=n==="NHWC"?o.shape[1]:o.shape[2],s=n==="NHWC"?o.shape[2]:o.shape[3],a=n==="NHWC"?o.shape[3]:o.shape[1];pe(r>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${r}`),pe(i*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${r}  for depthToSpace with input shape
    ${o.shape}`),pe(s*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${r} for depthToSpace with input shape
        ${o.shape}`),pe(a%(r*r)===0,()=>`Dimension size must be evenly divisible by ${r*r} but is ${a} for depthToSpace with input shape ${o.shape}`);let l={x:o},u={blockSize:r,dataFormat:n};return ue.runKernel(RS,l,u)}var sU,Nie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();sU=se({depthToSpace_:GDt})});function WDt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","depthwiseConv2d","float32"),u=J(r,"filter","depthwiseConv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),pe(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),pe(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=i==="NHWC"?c.shape[3]:c.shape[1];pe(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),go("depthwiseConv2d",o,a);let p={x:c,filter:u},h={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},m=ue.runKernel(zb,p,h);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var A0,I3=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();A0=se({depthwiseConv2d_:WDt})});function qDt(t){let n={x:J(t,"x","diag")};return ue.runKernel(jS,n)}var RNe,PNe=N(()=>{"use strict";ze();Ee();Le();Ne();RNe=se({diag_:qDt})});function HDt(t,r,n,o,i=[1,1],s="NHWC"){let a=J(t,"x","dilation2d"),l=J(r,"filter","dilation2d");pe(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),pe(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),pe(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=a,c=!1;a.rank===3&&(u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),pe(u.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${l.shape[2]}`);let f={x:u,filter:l},d={strides:n,pad:o,dilations:i},p=ue.runKernel(Ub,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var aU,Mie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();aU=se({dilation2d_:HDt})});var oc={};fn(oc,{assertAndGetBroadcastShape:()=>jr,getBroadcastDims:()=>LNe,getReductionAxes:()=>oo});function LNe(t,r){let n=t.length,o=[];for(let i=0;i<n;i++){let s=n-1-i,a=t[s]||1;(r[r.length-1-i]||1)>1&&a===1&&o.unshift(s)}return o}function oo(t,r){let n=[];for(let o=0;o<r.length;o++){let i=t[t.length-o-1],s=r.length-o-1,a=r[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function jr(t,r){let n=Math.max(t.length,r.length),o=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=r[r.length-i-1];if(a==null&&(a=1),s===1)o[n-i-1]=a;else if(a===1)o[n-i-1]=s;else if(s!==a){let l=`Operands could not be broadcast together with shapes ${t} and ${r}.`;throw Error(l)}else o[n-i-1]=s}return o}var ko=N(()=>{"use strict";});function YDt(t,r){let n=J(t,"a","equal","string_or_numeric"),o=J(r,"b","equal","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(P1,i)}var Dl,D3=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();Dl=se({equal_:YDt})});function XDt(t,r,n){let o=J(r,"a","where"),i=J(n,"b","where"),s=J(t,"condition","where","bool"),a=jr(jr(s.shape,o.shape),i.shape),l=T0(s,a),u=T0(o,a),c=T0(i,a),f={condition:l,t:u,e:c};return ue.runKernel(fx,f)}var yo,gd=N(()=>{"use strict";ze();Ee();Le();H8();ko();Ne();yo=se({where_:XDt})});function KDt(t){let n={x:J(t,"x","zerosLike")};return ue.runKernel(xx,n)}var ar,Uo=N(()=>{"use strict";ze();Ee();Le();Ne();ar=se({zerosLike_:KDt})});function ZDt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");[n,o]=sn(n,o);let i=Tt(n,o),s=ar(i),a=Dl(o,s);return yo(a,s,i)}var lU,Fie=N(()=>{"use strict";oi();Le();Kn();D3();Ne();gd();Uo();lU=se({divNoNan_:ZDt})});function QDt(t,r){let n=J(t,"t1","dot"),o=J(r,"t2","dot");pe((n.rank===1||n.rank===2)&&(o.rank===1||o.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);let i=n.rank===1?n.size:n.shape[1],s=o.rank===1?o.size:o.shape[0];if(pe(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&o.rank===1){let a=Se(n,[1,-1]),l=Se(o,[-1,1]),u=Vr(a,l);return Se(u,[])}else if(n.rank===1&&o.rank===2){let a=Se(n,[1,-1]),l=Se(o,[o.shape[0],o.shape[1]]),u=Vr(a,l);return Se(u,[u.size])}else if(n.rank===2&&o.rank===1){let a=Se(o,[-1,1]),l=Vr(n,a);return Se(l,[l.size])}else{let a=Se(o,[o.shape[0],o.shape[1]]);return Vr(n,a)}}var uU,Oie=N(()=>{"use strict";Le();Ze();Oh();Ne();Yt();uU=se({dot_:QDt})});function JDt(t,...r){let n=r.map((i,s)=>J(i,`tensors${s}`,"einsum")),o={equation:t};return ue.runKernel(BS,n,o)}var iw,Rie=N(()=>{"use strict";ze();Ee();Le();Ne();iw=se({einsum_:JDt})});function eNt(t){let n={x:J(t,"x","elu","float32")};return ue.runKernel(zg,n)}var k0,cU=N(()=>{"use strict";ze();Ee();Le();Ne();k0=se({elu_:eNt})});function tNt(t,r){let n=J(t,"x","ensureShape","string_or_numeric");if(!Aoe(n.shape,r))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${r}`);return t}var jNe,BNe=N(()=>{"use strict";Le();Js();Ne();jNe=se({ensureShape_:tNt})});function rNt(t){let r=J(t,"x","erf");pe(r.dtype==="int32"||r.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),r.dtype==="int32"&&(r=rt(r,"float32"));let n={x:r};return ue.runKernel(Ug,n)}var RI,$Ne=N(()=>{"use strict";ze();Ee();Le();Ze();pn();Ne();RI=se({erf_:rNt})});function Pie(t,r){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==r-1-n)return!1;return!0}function zNe(t,r,n){let o=t.length+r.length,i=[],s=0,a=0;for(let l=0;l<o;l++)n.indexOf(l)===-1?i.push(t[s++]):i.push(r[a++]);return i}function Lie(t,r){let n=[],o=t.length;for(let s=0;s<o;s++)r.indexOf(s)===-1&&n.push(t[s]);let i=r.map(s=>t[s]);return[n,i]}function pp(t,r){let n=r.map(o=>1);return zNe(t,n,r)}function nNt(t,r,n){pe(Pie(r,n),()=>`${t} supports only inner-most axes for now. Got axes ${r} and rank-${n} input.`)}function jie(t,r){if(Pie(t,r))return null;let n=[];for(let o=0;o<r;++o)t.indexOf(o)===-1&&n.push(o);return t.forEach(o=>n.push(o)),n}function N3(t){return t.map((r,n)=>[n,r]).sort((r,n)=>r[1]-n[1]).map(r=>r[0])}function oNt(t,r){let n=[];for(let o=r-t;o<r;++o)n.push(o);return n}var Ph=N(()=>{"use strict";Ze();});function iNt(t,r=null,n=!1){let i={x:J(t,"x","max")},s={reductionIndices:r,keepDims:n};return ue.runKernel(Yb,i,s)}var ra,PI=N(()=>{"use strict";ze();Ee();Le();Ne();ra=se({max_:iNt})});function sNt(t,r=null,n=!1){let i={x:J(t,"x","min")},s={axis:r,keepDims:n};return ue.runKernel(Qb,i,s)}var Tx,fU=N(()=>{"use strict";ze();Ee();Le();Ne();Tx=se({min_:sNt})});function aNt(t,r){let n=J(t,"base","pow"),o=J(r,"exp","pow");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(n0,i)}var Ha,sw=N(()=>{"use strict";ze();Ee();oi();Le();Ne();Ha=se({pow_:aNt})});function Ot(t,r){if((Wi(t)&&r!=="string"||Array.isArray(t))&&r!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(r==="string"&&Wi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return uu(t,[],[],r)}var Vo=N(()=>{"use strict";Ze();_x();});function lNt(t){let n={x:J(t,"x","sqrt","float32")};return ue.runKernel(m0,n)}var Zn,Lh=N(()=>{"use strict";ze();Ee();Le();Ne();Zn=se({sqrt_:lNt})});function uNt(t){let r=J(t,"x","square"),n={};return ue.runKernel("Square",{x:r},n)}var qr,ys=N(()=>{"use strict";ze();Le();Ne();qr=se({square_:uNt})});function cNt(t,r=null,n=!1){let o=J(t,"x","sum");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(px,i,s)}var It,Di=N(()=>{"use strict";ze();Ee();Le();pn();Ne();It=se({sum_:cNt})});function fNt(t,r="euclidean",n=null,o=!1){t=J(t,"x","norm");let i=UNe(t,r,n),s=i.shape;if(o){let a=gs(n,t.shape);s=pp(i.shape,a)}return Se(i,s)}function UNe(t,r,n=null){if(t.rank===0)return Ao(t);if(t.rank!==1&&n===null)return UNe(Se(t,[-1]),r,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(r===1)return It(Ao(t),n);if(r===1/0)return ra(Ao(t),n);if(r===-1/0)return Tx(Ao(t),n);if(r==="euclidean"||r===2)return Zn(It(Ha(Ao(t),Ot(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}if(Array.isArray(n)&&n.length===2){if(r===1)return ra(It(Ao(t),n[0]),n[1]-1);if(r===1/0)return ra(It(Ao(t),n[1]),n[0]);if(r===-1/0)return Tx(It(Ao(t),n[1]),n[0]);if(r==="fro"||r==="euclidean")return Zn(It(qr(t),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var Ax,M3=N(()=>{"use strict";Le();Ze();LC();Ph();PI();fU();Ne();sw();Yt();Vo();Lh();ys();Di();Ax=se({norm_:fNt})});function dNt(t,r=null,n=!1){return Ax(t,"euclidean",r,n)}var dU,$ie=N(()=>{"use strict";M3();Ne();dU=se({euclideanNorm_:dNt})});function pNt(t){let n={x:J(t,"x","exp")};return ue.runKernel(Vg,n)}var _i,I0=N(()=>{"use strict";ze();Ee();Le();Ne();_i=se({exp_:pNt})});function hNt(t,r=0){let n=J(t,"x","expandDims","string_or_numeric");pe(r<=n.rank,()=>"Axis must be <= rank of the tensor");let o={input:n},i={dim:r};return ue.runKernel(Vb,o,i)}var Ni,LI=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Ni=se({expandDims_:hNt})});function mNt(t){let n={x:J(t,"x","expm1")};return ue.runKernel(Gg,n)}var pU,VNe=N(()=>{"use strict";ze();Ee();Le();Ne();pU=se({expm1_:mNt})});function gNt(t,r){let n=J(t,"x","tile","string_or_numeric");pe(n.rank===r.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${r}.`);let o={x:n},i={reps:r};return ue.runKernel(kh,o,i)}var Ea,jI=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Ea=se({tile_:gNt})});function yNt(t,r,n,o="float32"){r==null&&(r=t);let i=er([t,r],o),s=t<=r?t:r;for(let l=0;l<s;++l)i.set(1,l,l);let a=Se(i.toTensor(),[t,r]);if(n==null)return a;if(n.length===1)return Ea(Ni(a,0),[n[0],1,1]);if(n.length===2)return Ea(Ni(Ni(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ea(Ni(Ni(Ni(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var UC,zie=N(()=>{"use strict";Ex();LI();Ne();Yt();jI();UC=se({eye_:yNt})});function bNt(t){let n={x:J(t,"x","floor","float32")};return ue.runKernel(Wg,n)}var D0,hU=N(()=>{"use strict";ze();Ee();Le();Ne();D0=se({floor_:bNt})});function xNt(t,r,n=0,o=0){let i=J(t,"x","gather"),s=J(r,"indices","gather","int32"),a={x:i,indices:s},l={axis:n,batchDims:o};return ue.runKernel(Wb,a,l)}var N0,F3=N(()=>{"use strict";ze();Ee();Le();Ne();N0=se({gather_:xNt})});function vNt(t,r){let n=J(t,"a","greater","string_or_numeric"),o=J(r,"b","greater","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(L1,i)}var si,M0=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();si=se({greater_:vNt})});function wNt(t,r){let n=J(t,"a","greaterEqual","string_or_numeric"),o=J(r,"b","greaterEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Hg,i)}var fu,VC=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();fu=se({greaterEqual_:wNt})});function _Nt(t){let n={input:J(t,"input","imag")};return ue.runKernel(qS,n)}var aw,O3=N(()=>{"use strict";ze();Ee();Le();Ne();aw=se({imag_:_Nt})});function SNt(t){let n={x:J(t,"x","isFinite")};return ue.runKernel(Yg,n)}var mU,GNe=N(()=>{"use strict";ze();Ee();Le();Ne();mU=se({isFinite_:SNt})});function CNt(t){let n={x:J(t,"x","isInf")};return ue.runKernel(Xg,n)}var gU,WNe=N(()=>{"use strict";ze();Ee();Le();Ne();gU=se({isInf_:CNt})});function ENt(t){let n={x:J(t,"x","isNaN")};return ue.runKernel(Kg,n)}var yU,qNe=N(()=>{"use strict";ze();Ee();Le();Ne();yU=se({isNaN_:ENt})});function TNt(t,r=.2){let o={x:J(t,"x","leakyRelu")},i={alpha:r};return ue.runKernel(qb,o,i)}var lw,bU=N(()=>{"use strict";ze();Ee();Le();Ne();lw=se({leakyRelu_:TNt})});function ANt(t,r){let n=J(t,"a","less","string_or_numeric"),o=J(r,"b","less","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(j1,i)}var kx,R3=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();kx=se({less_:ANt})});function kNt(t,r){let n=J(t,"a","lessEqual","string_or_numeric"),o=J(r,"b","lessEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(B1,i)}var Xc,uw=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();Xc=se({lessEqual_:kNt})});function HNe(t,r,n){if(n<=0)throw new Error("The number of values should be positive.");let o={start:t,stop:r,num:n};return ue.runKernel(HS,{},o)}var YNe=N(()=>{"use strict";ze();Ee();});function INt(t,r=5,n=1,o=1,i=.5){let s=J(t,"x","localResponseNormalization");pe(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),pe(Tb(r),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${r}.`);let a=s,l=!1;s.rank===3&&(l=!0,a=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let u={x:a},c={depthRadius:r,bias:n,alpha:o,beta:i},f=ue.runKernel(Hb,u,c);return l?Se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var xU,Uie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();xU=se({localResponseNormalization_:INt})});function DNt(t){let n={x:J(t,"x","log","float32")};return ue.runKernel(Zg,n)}var na,BI=N(()=>{"use strict";ze();Ee();Le();Ne();na=se({log_:DNt})});function NNt(t){let n={x:J(t,"x","log1p")};return ue.runKernel(Qg,n)}var cw,Vie=N(()=>{"use strict";ze();Ee();Le();Ne();cw=se({log1p_:NNt})});function XNe(t){return pe(Ag(t),()=>"The f passed in grad(f) must be a function"),(r,n)=>{let o=J(r,"x","tf.grad","string_or_numeric"),i=n!=null?J(n,"dy","tf.grad"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(o),[o],i);return i!=null&&$o(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),vU(a),a[0]})}}function KNe(t){return pe(Ag(t),()=>"The f passed in grads(f) must be a function"),(r,n)=>{pe(Array.isArray(r),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let o=wx(r,"args","tf.grads","string_or_numeric"),i=n!=null?J(n,"dy","tf.grads"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(...o),o,i);return i!=null&&$o(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),vU(a),a})}}function ZNe(t){return pe(Ag(t),()=>"The f passed in valueAndGrad(f) must be a function"),(r,n)=>{pe(r instanceof tn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),pe(n==null||n instanceof tn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:o,value:i}=ue.gradients(()=>t(r),[r],n);return vU(o),{grad:o[0],value:i}}}function QNe(t){return pe(Ag(t),()=>"The f passed in valueAndGrads(f) must be a function"),(r,n)=>{pe(Array.isArray(r)&&r.every(i=>i instanceof tn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),pe(n==null||n instanceof tn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let o=ue.gradients(()=>t(...r),r,n);return n!=null&&$o(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),vU(o.grads),o}}function P3(t,r){pe(Ag(t),()=>"The f passed in variableGrads(f) must be a function"),pe(r==null||Array.isArray(r)&&r.every(c=>c instanceof _0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=r!=null;if(!n){r=[];for(let c in ue.registeredVariables)r.push(ue.registeredVariables[c])}let o=n?r.filter(c=>!c.trainable):null,i=r.length;r=r.filter(c=>c.trainable),pe(r.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let s=!0,{value:a,grads:l}=ue.gradients(t,r,null,s);pe(l.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),pe(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);let u={};return r.forEach((c,f)=>{l[f]!=null&&(u[c.name]=l[f])}),o?.forEach(c=>u[c.name]=null),{value:a,grads:u}}function Nl(t){return ue.customGrad(t)}function vU(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var Ix=N(()=>{"use strict";ze();Je();Le();Ze();});function MNt(t){let n={x:J(t,"x","neg")};return ue.runKernel(ex,n)}var Zr,oa=N(()=>{"use strict";ze();Ee();Le();Ne();Zr=se({neg_:MNt})});function FNt(t){let n={x:J(t,"x","softplus")};return ue.runKernel(h0,n)}var jh,Gie=N(()=>{"use strict";ze();Ee();Le();Ne();jh=se({softplus_:FNt})});function ONt(t){let r=J(t,"x","logSigmoid");return Nl(o=>({value:Zr(jh(Zr(o))),gradFunc:a=>we(a,Il(Zr(o)))}))(r)}var wU,JNe=N(()=>{"use strict";Ix();Le();fr();oa();Ne();AI();Gie();wU=se({logSigmoid_:ONt})});function RNt(t,r){let n=J(t,"a","sub"),o=J(r,"b","sub");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(y0,i)}var wt,io=N(()=>{"use strict";ze();Ee();oi();Le();Ne();wt=se({sub_:RNt})});function PNt(t,r=-1){let n=J(t,"logits","logSoftmax");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${r}`);return Nl((i,s)=>{let l=ra(i,r,!0),u=wt(i,l),c=wt(rt(u,"float32"),na(It(_i(u),r,!0)));return s([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,m=!0,g=_i(h);return wt(d,we(It(d,r,m),g))}}})(n)}var $I,eMe=N(()=>{"use strict";Ix();Le();pn();I0();BI();PI();fr();Ne();io();Di();$I=se({logSoftmax_:PNt})});function LNt(t,r=null,n=!1){let o=J(t,"x","logSumExp"),i=gs(r,o.shape),s=ra(o,i,!0),a=wt(o,s),l=_i(a),u=It(l,i),c=na(u),f=Ke(Se(s,c.shape),c);if(n){let d=pp(f.shape,i);return Se(f,d)}return f}var fw,_U=N(()=>{"use strict";Le();Ze();zo();Ph();I0();BI();PI();Ne();Yt();io();Di();fw=se({logSumExp_:LNt})});function jNt(t,r){let n=J(t,"a","logicalAnd","bool"),o=J(r,"b","logicalAnd","bool");jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel($1,i)}var Ya,GC=N(()=>{"use strict";ze();Ee();Le();ko();Ne();Ya=se({logicalAnd_:jNt})});function BNt(t){let n={x:J(t,"x","logicalNot","bool")};return ue.runKernel(z1,n)}var dw,L3=N(()=>{"use strict";ze();Ee();Le();Ne();dw=se({logicalNot_:BNt})});function $Nt(t,r){let n=J(t,"a","logicalOr","bool"),o=J(r,"b","logicalOr","bool");jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(U1,i)}var zI,SU=N(()=>{"use strict";ze();Ee();Le();ko();Ne();zI=se({logicalOr_:$Nt})});function zNt(t,r){let n=J(t,"a","logicalXor","bool"),o=J(r,"b","logicalXor","bool");return jr(n.shape,o.shape),Ya(zI(t,r),dw(Ya(t,r)))}var CU,Wie=N(()=>{"use strict";Le();ko();GC();L3();SU();Ne();CU=se({logicalXor_:zNt})});function UNt(t,r,n="left"){let o=J(t,"sortedSequence","searchSorted"),i=J(r,"values","searchSorted"),s=o.shape[o.shape.length-1],a=i.shape[i.shape.length-1],l=Se(o,[-1,s]),u=Se(i,[-1,a]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(on(u.shape)>=EU)throw new Error(`values tensor size must less than ${EU}`);if(l.shape[1]>=EU)throw new Error(`trailing dim_size must less than ${EU} for int32 output type, was ${l.shape[1]}`);let c={sortedSequence:l,values:u},f={side:n};return ue.runKernel(fC,c,f)}var EU,j3,TU=N(()=>{"use strict";ze();Ee();Le();Js();Ne();Yt();EU=2147483648;j3=se({searchSorted_:UNt})});function tMe(t,r){return j3(t,r,"left")}var rMe=N(()=>{"use strict";TU();});function VNt(t,r,n,o,i){let s=J(t,"x","maxPool"),a=1,l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pe(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),pe(Ca(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),go("maxPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(Xb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var pw,AU=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();pw=se({maxPool_:VNt})});function GNt(t,r=[1,1,1],n,o,i,s="NDHWC"){let a=J(t,"x","maxPool3d"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),pe(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),pe(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),go("maxPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Kb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var kU,nMe=N(()=>{"use strict";ze();Ee();Le();Ze();Fs();Ne();Yt();kU=se({maxPool3d_:GNt})});function WNt(t,r,n,o,i=!1){let a={x:J(t,"x","maxPoolWithArgmax")},l={filterSize:r,strides:n,pad:o,includeBatchInIndex:i},u=ue.runKernel(ZS,a,l);return{result:u[0],indexes:u[1]}}var oMe,iMe=N(()=>{"use strict";ze();Ee();Le();Ne();oMe=se({maxPoolWithArgmax_:WNt})});function qNt(t,r){let n=J(t,"a","maximum"),o=J(r,"b","maximum");[n,o]=sn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Jg,i)}var ic,B3=N(()=>{"use strict";ze();Ee();oi();Le();ko();pn();Ne();ic=se({maximum_:qNt})});function HNt(t,r=null,n=!1){let i={x:J(t,"x","mean")},s={axis:r,keepDims:n};return ue.runKernel(Zb,i,s)}var bo,$3=N(()=>{"use strict";ze();Ee();Le();Ne();bo=se({mean_:HNt})});function xo(t,r="float32"){if(ri(t),r==="complex64"){let o=xo(t,"float32"),i=xo(t,"float32");return ec(o,i)}let n=nI(on(t),r);return ue.makeTensor(n,t,r)}var UI=N(()=>{"use strict";ze();Ze();Z1();});function Hi(t,r="float32"){if(ri(t),r==="complex64"){let o=Hi(t,"float32"),i=xo(t,"float32");return ec(o,i)}let n=f3(on(t),r);return ue.makeTensor(n,t,r)}var WC=N(()=>{"use strict";ze();Ze();Js();Z1();UI();});function sMe(t,r,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let o=J(t,"x","meshgrid",t instanceof tn?t.dtype:"float32");if(r===void 0)return[o];let i=J(r,"y","meshgrid",r instanceof tn?r.dtype:"float32"),s=on(o.shape),a=on(i.shape);return n==="xy"?(o=Se(o,[1,-1]),i=Se(i,[-1,1]),[Vr(Hi([a,1],o.dtype),o),Vr(i,Hi([1,s],i.dtype))]):(o=Se(o,[-1,1]),i=Se(i,[1,-1]),[Vr(o,Hi([1,a],o.dtype)),Vr(Hi([s,1],i.dtype),i)])}var aMe=N(()=>{"use strict";Oh();WC();Yt();Je();Le();Js();});function YNt(t,r){let n=J(t,"a","minimum"),o=J(r,"b","minimum");[n,o]=sn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(e0,i)}var yd,z3=N(()=>{"use strict";ze();Ee();oi();Le();ko();pn();Ne();yd=se({minimum_:YNt})});function XNt(t,r,n){pe(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let o=J(t,"x","mirrorPad");if(o.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");pe(r.length===o.rank,()=>`Padding doesn't match input. Must be ${o.rank}. Got ${r.length}.`);let i=n==="reflect"?1:0;for(let l=0;l<o.rank;l++)pe(r[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pe(r[l][0]>=0&&r[l][0]<=o.shape[l]-i&&r[l][1]>=0&&r[l][1]<=o.shape[l]-i,()=>`Padding in dimension ${l} cannot be greater than or equal to ${o.shape[l]-i} or less than 0 for input of shape ${o.shape}`);let s={paddings:r,mode:n},a={x:o};return ue.runKernel(Jb,a,s)}var IU,qie=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();IU=se({mirrorPad_:XNt})});function KNt(t,r){let n=J(t,"a","mod"),o=J(r,"b","mod");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(t0,i)}var DU,Hie=N(()=>{"use strict";ze();Ee();oi();Le();Ne();DU=se({mod_:KNt})});function ZNt(t,r=null,n=!1){t=J(t,"x","moments");let o=gs(r,t.shape),i=bo(t,o,n),s=i.shape;n||(s=pp(i.shape,o));let a=qr(wt(rt(t,"float32"),Se(i,s))),l=bo(a,o,n);return{mean:i,variance:l}}var qC,lMe=N(()=>{"use strict";Le();Ze();Ph();pn();$3();Ne();Yt();ys();io();qC=se({moments_:ZNt})});function QNt(t,r,n,o){let i=J(r,"data","multiRNNCell"),s=wx(n,"c","multiRNNCell"),a=wx(o,"h","multiRNNCell"),l=i,u=[];for(let d=0;d<t.length;d++){let p=t[d](l,s[d],a[d]);u.push(p[0]),u.push(p[1]),l=p[1]}let c=[],f=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),f.push(u[d+1]);return[c,f]}var uMe,cMe=N(()=>{"use strict";Le();Ne();uMe=se({multiRNNCell_:QNt})});function JNt(t,r,n,o=!1){let i=J(t,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();let u={logits:a===1?Se(i,[1,-1]):i},c={numSamples:r,seed:n,normalized:o},f=ue.runKernel(QS,u,c);return a===1?Se(f,[f.size]):f}var fMe,dMe=N(()=>{"use strict";ze();Ee();Le();Ne();Yt();fMe=se({multinomial_:JNt})});function eMt(t,r){let n=J(t,"a","notEqual","string_or_numeric"),o=J(r,"b","notEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(V1,i)}var Bh,NU=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();Bh=se({notEqual_:eMt})});function tMt(t,r,n=1,o=0,i="int32"){if(r<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${r}`);let a={indices:J(t,"indices","oneHot","int32")},l={dtype:i,depth:r,onValue:n,offValue:o};return ue.runKernel(rx,a,l)}var F0,MU=N(()=>{"use strict";ze();Ee();Le();Ne();F0=se({oneHot_:tMt})});function rMt(t){let n={x:J(t,"x","onesLike")};return ue.runKernel(tx,n)}var Os,pMe=N(()=>{"use strict";ze();Ee();Le();Ne();Os=se({onesLike_:rMt})});function nMt(t,r){let n=J(t,"v1","outerProduct"),o=J(r,"v2","outerProduct");pe(n.rank===1&&o.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${o.rank}.`);let i=Se(n,[-1,1]),s=Se(o,[1,-1]);return Vr(i,s)}var hMe,mMe=N(()=>{"use strict";Le();Ze();Oh();Ne();Yt();hMe=se({outerProduct_:nMt})});function oMt(t,r,n=0){let o=J(t,"x","pad");if(o.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:r,constantValue:n},s={x:o};return ue.runKernel(ox,s,i)}var du,hw=N(()=>{"use strict";ze();Ee();Le();Ne();du=se({pad_:oMt})});function iMt(t,r,n=0){return pe(r.length===2,()=>"Invalid number of paddings. Must be length of 2."),du(t,[r],n)}var gMe,yMe=N(()=>{"use strict";Ze();Ne();hw();gMe=se({pad1d_:iMt})});function sMt(t,r,n=0){return pe(r.length===2&&r[0].length===2&&r[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),du(t,r,n)}var bMe,xMe=N(()=>{"use strict";Ze();Ne();hw();bMe=se({pad2d_:sMt})});function aMt(t,r,n=0){return pe(r.length===3&&r[0].length===2&&r[1].length===2&&r[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),du(t,r,n)}var vMe,wMe=N(()=>{"use strict";Ze();Ne();hw();vMe=se({pad3d_:aMt})});function lMt(t,r,n=0){return pe(r.length===4&&r[0].length===2&&r[1].length===2&&r[2].length===2&&r[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),du(t,r,n)}var _Me,SMe=N(()=>{"use strict";Ze();Ne();hw();_Me=se({pad4d_:lMt})});function uMt(t,r,n){let o=J(t,"x","spaceToBatchND");pe(o.rank>=1+r.length,()=>`input rank ${o.rank} should be > than [blockShape] ${r.length}`),pe(n.length===r.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${r.length}`),pe(o.shape.reduce((a,l,u)=>u>0&&u<=r.length?a&&(l+n[u-1][0]+n[u-1][1])%r[u-1]===0:a,!0),()=>`input spatial dimensions ${o.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${r.toString()}`);let i={x:o},s={blockShape:r,paddings:n};return ue.runKernel(hx,i,s)}var mw,U3=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();mw=se({spaceToBatchND_:uMt})});function cMt(t,r,n,o,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),o===0&&(o="valid");let l=J(t,"x","maxPool"),u=l,c=!1;l.rank===3&&(c=!0,u=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),pe(Ca(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);let f=Sie(u.shape,r,s,i,o),d=[f.dilationHeight,f.dilationWidth],p;o==="same"?p=dMt([f.filterHeight,f.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[m,g]=fMt([f.inHeight,f.inWidth],d,p),y=h?o:"valid",b=h?u:mw(u,d,m),v=(n==="avg"?()=>rw(b,r,s,y,a):()=>pw(b,r,s,y,a))(),w=h?v:nw(v,d,g);return c?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function fMt(t,r,n){let o=n.map(f=>f[0]),i=n.map(f=>f[1]),s=t.concat(o,i),a=r.map((f,d)=>(f-s[d]%f)%f),l=i.map((f,d)=>f+a[d]),u=r.map((f,d)=>[o[d],l[d]]),c=r.map((f,d)=>[0,a[d]]);return[u,c]}function dMt(t,r){let o=t.map((a,l)=>a+(a-1)*(r[l]-1)).map(a=>a-1),i=o.map(a=>Math.floor(a/2)),s=o.map((a,l)=>a-i[l]);return o.map((a,l)=>[i[l],s[l]])}var FU,Yie=N(()=>{"use strict";Le();Ze();z8();A3();Fs();AU();Ne();Yt();U3();FU=se({pool_:cMt})});function pMt(t,r){let n=J(t,"x","prelu"),o=J(r,"alpha","prelu"),i={x:n,alpha:o};return ue.runKernel(ix,i)}var gw,OU=N(()=>{"use strict";ze();Ee();Le();Ne();gw=se({prelu_:pMt})});function hMt(t,r=null,n=!1){let o=J(t,"x","prod");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(sx,i,s)}var RU,Xie=N(()=>{"use strict";ze();Ee();Le();pn();Ne();RU=se({prod_:hMt})});function mMt(t,r,n,o){let i=t.map((f,d)=>J(f,`tensors${d}`,"raggedGather","int32")),s=J(r,"paramsDenseValues","raggedGather"),a=J(n,"indices","raggedGather","int32"),l={paramsNestedSplits:i,paramsDenseValues:s,indices:a},u={outputRaggedRank:o},c=ue.runKernel(rC,l,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var CMe,EMe=N(()=>{"use strict";ze();Ee();Le();Ne();CMe=se({raggedGather_:mMt})});function gMt(t,r,n){let o=J(t,"starts","raggedRange"),i=J(r,"limits","raggedRange",o.dtype),s=J(n,"deltas","raggedRange",o.dtype),a={starts:o,limits:i,deltas:s},l=ue.runKernel(nC,a);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}var TMe,AMe=N(()=>{"use strict";ze();Ee();Le();Ne();TMe=se({raggedRange_:gMt})});function yMt(t,r,n,o,i){let s=J(t,"shape","raggedTensorToTensor","int32"),a=J(r,"values","raggedTensorToTensor"),l=J(n,"defaultValue","raggedTensorToTensor",a.dtype),u=o.map((d,p)=>J(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:s,values:a,defaultValue:l,rowPartitionTensors:u},f={rowPartitionTypes:i};return ue.runKernel(oC,c,f)}var kMe,IMe=N(()=>{"use strict";ze();Ee();Le();Ne();kMe=se({raggedTensorToTensor_:yMt})});function bMt(t,r,n){ri(t);let o=on(t),i=null;if(n==null||n==="float32")i=new Float32Array(o);else if(n==="int32")i=new Int32Array(o);else if(n==="bool")i=new Uint8Array(o);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<o;s++)i[s]=r();return ue.makeTensor(i,t,n)}var DMe,NMe=N(()=>{"use strict";ze();Ze();Js();Ne();DMe=se({rand_:bMt})});var FMe=mt((MMe,Kie)=>{"use strict";(function(t,r,n){function o(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new o(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(MMe,typeof Kie=="object"&&Kie,typeof define=="function"&&define)});var RMe=mt((OMe,Zie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(OMe,typeof Zie=="object"&&Zie,typeof define=="function"&&define)});var LMe=mt((PMe,Qie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(PMe,typeof Qie=="object"&&Qie,typeof define=="function"&&define)});var BMe=mt((jMe,Jie)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,p,h;return d=c[f],d^=d>>>7,p=d^d<<24,d=c[f+1&7],p^=d^d>>>10,d=c[f+3&7],p^=d^d>>>3,d=c[f+4&7],p^=d^d<<7,d=c[f+7&7],d=d^d<<13,p^=d^d<<9,c[f]=p,l.i=f+1&7,p};function u(c,f){var d,p,h=[];if(f===(f|0))p=h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(jMe,typeof Jie=="object"&&Jie,typeof define=="function"&&define)});var zMe=mt(($Me,ese)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,p,h;return l.w=c=c+1640531527|0,h=f[d+34&127],p=f[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=f[d]=h^p,l.i=d,h+(c^c>>>16)|0};function u(c,f){var d,p,h,m,g,y=[],b=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,b=Math.max(b,f.length)),h=0,m=-32;m<b;++m)f&&(p^=f.charCodeAt((m+32)%f.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=p+g,h=d==0?h+1:0);for(h>=128&&(y[(f&&f.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=y[h+34&127],d=y[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,y[h]=p^d;c.w=g,c.X=y,c.i=h}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})($Me,typeof ese=="object"&&ese,typeof define=="function"&&define)});var VMe=mt((UMe,tse)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,p=l.d,h=l.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-p|0,l.d=p<<16^d>>>16^h,l.a=h-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(UMe,typeof tse=="object"&&tse,typeof define=="function"&&define)});var GMe=mt(()=>{"use strict"});var qMe=mt((WMe,PU)=>{"use strict";(function(t,r,n){var o=256,i=6,s=52,a="random",l=n.pow(o,i),u=n.pow(2,s),c=u*2,f=o-1,d;function p(v,w,_){var S=[];w=w==!0?{entropy:!0}:w||{};var C=y(g(w.entropy?[v,x(r)]:v??b(),3),S),E=new h(S),T=function(){for(var I=E.g(i),k=l,F=0;I<u;)I=(I+F)*o,k*=o,F=E.g(1);for(;I>=c;)I/=2,k/=2,F>>>=1;return(I+F)/k};return T.int32=function(){return E.g(4)|0},T.quick=function(){return E.g(4)/4294967296},T.double=T,y(x(E.S),r),(w.pass||_||function(I,k,F,D){return D&&(D.S&&m(D,E),I.state=function(){return m(E,{})}),F?(n[a]=I,k):I})(T,C,"global"in w?w.global:this==n,w.state)}function h(v){var w,_=v.length,S=this,C=0,E=S.i=S.j=0,T=S.S=[];for(_||(v=[_++]);C<o;)T[C]=C++;for(C=0;C<o;C++)T[C]=T[E=f&E+v[C%_]+(w=T[C])],T[E]=w;(S.g=function(I){for(var k,F=0,D=S.i,L=S.j,P=S.S;I--;)k=P[D=f&D+1],F=F*o+P[f&(P[D]=P[L=f&L+k])+(P[L]=k)];return S.i=D,S.j=L,F})(o)}function m(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function g(v,w){var _=[],S=typeof v,C;if(w&&S=="object")for(C in v)try{_.push(g(v[C],w-1))}catch{}return _.length?_:S=="string"?v:v+"\0"}function y(v,w){for(var _=v+"",S,C=0;C<_.length;)w[f&C]=f&(S^=w[f&C]*19)+_.charCodeAt(C++);return x(w)}function b(){try{var v;return d&&(v=d.randomBytes)?v=v(o):(v=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(v)),x(v)}catch{var w=t.navigator,_=w&&w.plugins;return[+new Date,t,_,t.screen,x(r)]}}function x(v){return String.fromCharCode.apply(0,v)}if(y(n.random(),r),typeof PU=="object"&&PU.exports){PU.exports=p;try{d=GMe()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+a]=p})(typeof self<"u"?self:WMe,[],Math)});var V3=mt((UYr,HMe)=>{"use strict";var xMt=FMe(),vMt=RMe(),wMt=LMe(),_Mt=BMe(),SMt=zMe(),CMt=VMe(),HC=qMe();HC.alea=xMt;HC.xor128=vMt;HC.xorwow=wMt;HC.xorshift7=_Mt;HC.xor4096=SMt;HC.tychei=CMt;HMe.exports=HC});var ise={};fn(ise,{TEST_EPSILON_FLOAT16:()=>YMe,createVideoElement:()=>MMt,encodeStrings:()=>XMe,expectArrayBuffersEqual:()=>NMt,expectArraysClose:()=>TMt,expectArraysEqual:()=>kMt,expectNumbersClose:()=>IMt,expectPromiseToFail:()=>AMt,expectValuesInRange:()=>DMt,play:()=>FMt,testEpsilon:()=>nse});function TMt(t,r,n){return n==null&&(n=nse()),rse(t,r,(o,i)=>ose(o,i,n))}function nse(){return ue.backend.floatPrecision()===32?EMt:YMe}function rse(t,r,n){let o=!0;if((Wi(t)||Wi(r))&&(o=!1),Wi(t)&&Wi(r)&&(o=!0),o){let a=t.constructor.name,l=r.constructor.name;if(a!==l)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${l}`)}if(Array.isArray(t)&&Array.isArray(r)){let a=Wa(t),l=Wa(r);if(!au(a,l))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${l}]`)}let i=Wi(t)?t:Nh(t),s=Wi(r)?r:Nh(r);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){let l=i[a],u=s[a];if(!n(l,u))throw new Error(`Arrays differ: actual[${a}] = ${l}, expected[${a}] = ${u}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function AMt(t,r){t().then(()=>r.fail(),()=>r()),typeof expect<"u"&&expect().nothing()}function kMt(t,r){let n=typeof r=="string"||typeof r=="number"||typeof r=="boolean"?[r]:r;return Eh(t)||Eh(t[0])||Eh(r)||Eh(r[0])?rse(t,n,(o,i)=>o==i):rse(t,r,(o,i)=>ose(o,i,0))}function IMt(t,r,n){if(n==null&&(n=nse()),!ose(t,r,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${r}`);typeof expect<"u"&&expect().nothing()}function ose(t,r,n){return!isFinite(t)&&!isFinite(r)?!0:!(isNaN(t)||isNaN(r)||Math.abs(t-r)>n)}function DMt(t,r,n){for(let o=0;o<t.length;o++)if(t[o]<r||t[o]>n)throw new Error(`Value out of range:${t[o]} low: ${r}, high: ${n}`)}function NMt(t,r){let n=new Float32Array(t),o=new Float32Array(r);if(n.length!==o.length)throw new Error(`Expected ArrayBuffer to be of length ${o.length}, but it was ${n.length}`);for(let i=0;i<o.length;i++)if(n[i]!==o[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${o[i]} but got ${n[i]} instead`)}function XMe(t){for(let r=0;r<t.length;r++){let n=t[r];Array.isArray(n)?XMe(n):t[r]=X1(n)}return t}function MMt(t){let r=document.createElement("video");return"playsInline"in r&&(r.playsInline=!0),r.muted=!0,r.loop=!0,r.style.position="fixed",r.style.left="0px",r.style.top="0px",r.preload="auto",r.appendChild(t),new Promise(n=>{r.addEventListener("loadeddata",o=>n(r)),r.load()})}function FMt(t){return je(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(r=>{t.requestVideoFrameCallback(r)}))})}var EMt,YMe,KMe=N(()=>{"use strict";ze();Le();Ze();EMt=.001,YMe=.1});var BU,YC,LU,jU,G3=N(()=>{"use strict";BU=Al(V3());YC=class{constructor(r,n,o,i,s){this.mean=r,this.stdDev=n,this.dtype=o,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let a=s||Math.random();this.random=BU.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let i=this.nextVal;return this.nextVal=NaN,i}let r,n,o=!1;for(;!o;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);let l=Math.sqrt(-2*Math.log(a)/a);r=this.mean+this.stdDev*i*l,n=this.mean+this.stdDev*s*l,(!this.truncated||this.isValidTruncated(r))&&(o=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(r)}convertValue(r){return this.dtype==null||this.dtype==="float32"?r:Math.round(r)}isValidTruncated(r){return r<=this.upper&&r>=this.lower}},LU=class{constructor(r,n,o,i){this.alpha=r,this.beta=1/n,this.dtype=o;let s=i||Math.random();this.randu=BU.alea(s.toString()),this.randn=new YC(0,1,o,!1,this.randu()),r<1?this.d=r+2/3:this.d=r-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let r,n,o,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,r=i*i,n=1-.331*r*r,o=.5*r+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<o)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(r){return this.dtype==="float32"?r:Math.round(r)}},jU=class{constructor(r=0,n=1,o,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=r,this.range=n-r,this.dtype=o,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${r} - ${n} <= 1 and dtype is not float`);this.random=BU.alea(i)}convertValue(r){return this.canReturnFloat()?r:Math.round(r)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function OMt(t,r,n=1,o="float32",i){if(ri(t),n==null&&(n=1),o==null&&(o="float32"),o!=="float32"&&o!=="int32")throw new Error(`Unsupported data type ${o}`);let s=new LU(r,n,o,i),a=er(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var ZMe,QMe=N(()=>{"use strict";Js();Ex();Ne();G3();ZMe=se({randomGamma_:OMt})});function RMt(t,r=0,n=1,o,i){if(ri(t),o!=null&&o==="bool")throw new Error(`Unsupported data type ${o}`);let s=new YC(r,n,o,!1,i),a=er(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var XC,sse=N(()=>{"use strict";Js();Ex();Ne();G3();XC=se({randomNormal_:RMt})});function PMt(t,r,n){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);return XC(t,0,1,r,n)}var JMe,eFe=N(()=>{"use strict";Ne();sse();JMe=se({randomStandardNormal_:PMt})});function LMt(t,r=0,n=1,o="float32",i){ri(t);let s=er(t,o),a=new jU(r,n,null,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}var Kc,$U=N(()=>{"use strict";Js();Ex();Ne();G3();Kc=se({randomUniform_:LMt})});function jMt(t,r,n,o){return Kc(t,r,n,"int32",o)}var tFe,rFe=N(()=>{"use strict";Ne();$U();tFe=se({randomUniformInt_:jMt})});function O0(t,r,n=1,o="float32"){if(n===0)throw new Error("Cannot have a step of zero");let i={start:t,stop:r,step:n,dtype:o};return ue.runKernel(iC,{},i)}var zU=N(()=>{"use strict";ze();Ee();});function BMt(t){let n={input:J(t,"input","real")};return ue.runKernel(sC,n)}var Dx,W3=N(()=>{"use strict";ze();Ee();Le();Ne();Dx=se({real_:BMt})});function $Mt(t){let n={x:J(t,"x","reciprocal")};return ue.runKernel(o0,n)}var UU,nFe=N(()=>{"use strict";ze();Ee();Le();Ne();UU=se({reciprocal_:$Mt})});function zMt(t){let n={x:J(t,"x","relu")};return ue.runKernel(i0,n)}var Ta,VI=N(()=>{"use strict";ze();Ee();Le();Ne();Ta=se({relu_:zMt})});function UMt(t){let n={x:J(t,"x","relu6")};return ue.runKernel(s0,n)}var GI,VU=N(()=>{"use strict";ze();Ee();Le();Ne();GI=se({relu6_:UMt})});function VMt(t,r){let o={x:J(t,"x","reverse")},i={dims:r};return ue.runKernel(cx,o,i)}var bs,Nx=N(()=>{"use strict";ze();Ee();Le();Ne();bs=se({reverse_:VMt})});function GMt(t){let r=J(t,"x","reverse");return pe(r.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${r.rank}.`),bs(r,0)}var oFe,iFe=N(()=>{"use strict";Le();Ze();Ne();Nx();oFe=se({reverse1d_:GMt})});function WMt(t,r){let n=J(t,"x","reverse");return pe(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),bs(n,r)}var sFe,aFe=N(()=>{"use strict";Le();Ze();Ne();Nx();sFe=se({reverse2d_:WMt})});function qMt(t,r){let n=J(t,"x","reverse");return pe(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),bs(n,r)}var lFe,uFe=N(()=>{"use strict";Le();Ze();Ne();Nx();lFe=se({reverse3d_:qMt})});function HMt(t,r){let n=J(t,"x","reverse");return pe(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),bs(n,r)}var cFe,fFe=N(()=>{"use strict";Le();Ze();Ne();Nx();cFe=se({reverse4d_:HMt})});function YMt(t){let n={x:J(t,"x","round")};return ue.runKernel(a0,n)}var WI,ase=N(()=>{"use strict";ze();Ee();Le();Ne();WI=se({round_:YMt})});function XMt(t){let n={x:J(t,"x","rsqrt","float32")};return ue.runKernel(l0,n)}var qI,lse=N(()=>{"use strict";ze();Ee();Le();Ne();qI=se({rsqrt_:XMt})});function KMt(t){let n={x:J(t,"x","selu")};return ue.runKernel(u0,n)}var HI,use=N(()=>{"use strict";ze();Ee();Le();Ne();HI=se({selu_:KMt})});function ZMt(t,r,n,o,i,s=[1,1],a="NHWC"){let l=J(t,"x","separableConv2d"),u=J(r,"depthwiseFilter","separableConv2d"),c=J(n,"pointwiseFilter","separableConv2d"),f=l,d=!1;if(l.rank===3&&(d=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");pe(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),pe(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),pe(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),pe(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),pe(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],h=u.shape[3];pe(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let m=A0(f,u,o,i,a,s),y=nc(m,c,1,"valid",a);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var YI,cse=N(()=>{"use strict";Le();Ze();$C();I3();Ne();Yt();YI=se({separableConv2d_:ZMt})});function QMt(t,r){return je(this,null,function*(){let n=J(t,"x","setdiff1d"),o=J(r,"y","setdiff1d");pe(n.dtype===o.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${o.dtype}).`),pe(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),pe(o.rank===1,()=>`y should be 1D tensor, but got y (${o.shape}).`);let i=yield n.data(),s=yield o.data(),a=new Set(s),l=0;for(let f=0;f<i.length;f++)a.has(i[f])||l++;let u=new Tn([l],n.dtype),c=new Tn([l],"int32");for(let f=0,d=0;f<i.length;f++)a.has(i[f])||(u.values[d]=i[f],c.values[d]=f,d++);return[u.toTensor(),c.toTensor()]})}var dFe,pFe=N(()=>{"use strict";Je();Le();Ze();dFe=QMt});function JMt(t){let n={x:J(t,"x","sign")};return ue.runKernel(d0,n)}var GU,hFe=N(()=>{"use strict";ze();Ee();Le();Ne();GU=se({sign_:JMt})});function eFt(t){let n={x:J(t,"x","sin","float32")};return ue.runKernel(c0,n)}var XI,fse=N(()=>{"use strict";ze();Ee();Le();Ne();XI=se({sin_:eFt})});function tFt(t){let n={x:J(t,"x","sinh")};return ue.runKernel(f0,n)}var KI,dse=N(()=>{"use strict";ze();Ee();Le();Ne();KI=se({sinh_:tFt})});function rFt(t,r,n){let o=J(t,"x","slice1d");return pe(o.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${o.rank} tensor`),zr(o,[r],[n])}var ZI,mFe=N(()=>{"use strict";Le();Ze();Ne();rc();ZI=se({slice1d_:rFt})});function nFt(t,r,n){let o=J(t,"x","slice2d");return pe(o.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${o.rank} tensor`),zr(o,r,n)}var q3,gFe=N(()=>{"use strict";Le();Ze();Ne();rc();q3=se({slice2d_:nFt})});function oFt(t,r,n){let o=J(t,"x","slice3d");return pe(o.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${o.rank} tensor`),zr(o,r,n)}var QI,yFe=N(()=>{"use strict";Le();Ze();Ne();rc();QI=se({slice3d_:oFt})});function iFt(t,r,n){let o=J(t,"x","slice4d");return pe(o.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${o.rank} tensor`),zr(o,r,n)}var KC,bFe=N(()=>{"use strict";Le();Ze();Ne();rc();KC=se({slice4d_:iFt})});function sFt(t,r=-1){let n=J(t,"logits","softmax","float32");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${r}`);let o={logits:n},i={dim:r};return ue.runKernel(gx,o,i)}var yw,xFe=N(()=>{"use strict";ze();Ee();Le();Ne();yw=se({softmax_:sFt})});function aFt(t){pe(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(zS,r)}var bw,WU=N(()=>{"use strict";ze();Ee();Ze();Ne();bw=se({fft_:aFt})});function lFt(t){pe(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(WS,r)}var Mx,qU=N(()=>{"use strict";ze();Ee();Ze();Ne();Mx=se({ifft_:lFt})});function uFt(t){let r=t.shape[t.shape.length-1],n=t.size/r,o;if(r<=2){let i=Se(t,[n,r]);o=Mx(i)}else{let i=[n,2*(r-1)],s=Se(Dx(t),[n,r]),a=Se(aw(t),[n,r]),l=bs(zr(s,[0,1],[n,r-2]),1),u=we(bs(zr(a,[0,1],[n,r-2]),1),Ot(-1)),c=On([s,l],1),f=On([a,u],1),d=Se(ec(c,f),[i[0],i[1]]);o=Mx(d)}if(o=Dx(o),t.rank===3&&t.shape[0]!==0){let i=o,s=t.shape[0];o=Se(o,[s,o.shape[0]/s,o.shape[1]]),i.dispose()}return o}var JI,pse=N(()=>{"use strict";Z1();md();O3();fr();Ne();W3();Yt();Nx();Vo();rc();qU();JI=se({irfft_:uFt})});function cFt(t,r,n=0){let i={x:J(t,"x","split")},s={numOrSizeSplits:r,axis:n};return ue.runKernel(mx,i,s)}var xs,ZC=N(()=>{"use strict";ze();Ee();Le();Ne();xs=se({split_:cFt})});function fFt(t,r){pe(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],o=t.size/n,i;if(r!=null&&r<n){let m=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=r,i=zr(t,m,g),n=r}else if(r!=null&&r>n){let m=t.shape.map(g=>g);m[t.shape.length-1]=r-n,i=On([t,xo(m)],t.shape.length-1),n=r}else i=t;let s=ar(i),a=Se(ec(i,s),[o,n]),l=bw(a),u=Math.floor(n/2)+1,c=Dx(l),f=aw(l),d=xs(c,[u,n-u],c.shape.length-1),p=xs(f,[u,n-u],f.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=u,Se(ec(d[0],p[0]),h)}var xw,HU=N(()=>{"use strict";Ze();Z1();md();O3();Ne();W3();Yt();rc();ZC();UI();Uo();WU();xw=se({rfft_:fFt})});function dFt(t,r){let n=J(t,"a","squaredDifference"),o=J(r,"b","squaredDifference");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o},s={};return ue.runKernel(g0,i,s)}var eD,YU=N(()=>{"use strict";ze();Ee();oi();Le();ko();Ne();eD=se({squaredDifference_:dFt})});function pFt(t,r){let n=J(t,"x","squeeze","string_or_numeric");return Se(n,koe(n.shape,r).newShape)}var Zc,H3=N(()=>{"use strict";Le();Ze();Ne();Yt();Zc=se({squeeze_:pFt})});function hFt(t,r=0){let n=wx(t,"tensors","stack","string_or_numeric");pe(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&pe(r<=n[0].rank,()=>"Axis must be <= rank of the tensor");let o=n,i={axis:r};return ue.runKernel(nx,o,i)}var as,vw=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();as=se({stack_:hFt})});function mFt(t,r=0){let o={x:J(t,"x","step")},i={alpha:r};return ue.runKernel(v0,o,i)}var hp,tD=N(()=>{"use strict";ze();Ee();Le();Ne();hp=se({step_:mFt})});function gFt(t,r,n,o,i=0,s=0,a=0,l=0,u=0){let f={x:J(t,"x","stridedSlice","string_or_numeric")},d={begin:r,end:n,strides:o,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};return ue.runKernel(bC,f,d)}var XU,vFe=N(()=>{"use strict";ze();Ee();Le();Ne();XU=se({stridedSlice_:gFt})});function yFt(t){let n={x:J(t,"x","tan","float32")};return ue.runKernel(b0,n)}var KU,wFe=N(()=>{"use strict";ze();Ee();Le();Ne();KU=se({tan_:yFt})});function ai(t,r){fd(t);let n=Wa(t,r);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return uu(t,null,n,r)}var ww=N(()=>{"use strict";Le();Ze();_x();});function Fx(t,r,n){if(fd(t),r!=null&&r.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let o=Wa(t,n);if(o.length!==2&&o.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return uu(t,r,o,n)}var ZU=N(()=>{"use strict";Le();Ze();_x();});function QU(t,r,n){if(fd(t),r!=null&&r.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let o=Wa(t,n);if(o.length!==3&&o.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return uu(t,r,o,n)}var hse=N(()=>{"use strict";Le();Ze();_x();});function _Fe(t,r,n){if(fd(t),r!=null&&r.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let o=Wa(t,n);if(o.length!==4&&o.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return uu(t,r,o,n)}var SFe=N(()=>{"use strict";Le();Ze();_x();});function CFe(t,r,n){if(fd(t),r!=null&&r.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let o=Wa(t,n);if(o.length!==5&&o.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return uu(t,r,o,n)}var EFe=N(()=>{"use strict";Le();Ze();_x();});function TFe(t,r,n){if(fd(t),r!=null&&r.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let o=Wa(t,n);if(o.length!==6&&o.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return r=r||o,uu(t,r,o,n)}var AFe=N(()=>{"use strict";Le();Ze();_x();});var Y3={};fn(Y3,{calculateShapes:()=>kFe,validateInput:()=>rD,validateUpdateShape:()=>mse});function mse(t,r,n){let o=r.rank>1?r.shape[r.rank-1]:1,i=r.rank>1?r.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${r.shape}, shape: ${t}, sliceDim: ${o}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<o+(n.rank-i))throw new Error(s+` Output shape length < ${o+(n.rank-i)}`);if(n.rank!==i+t.length-o)throw new Error(s+` update.rank != ${i+t.length-o}`);for(let a=0;a<i;++a)if(n.shape[a]!==r.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${r.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+o])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function rD(t,r,n){if(r.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${r.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(r.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(r.size===0)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}mse(n,r,t)}function kFe(t,r,n){let o=r.shape.length,i=o>1?r.shape[o-1]:1,s=n.length,a=1;for(let d=i;d<s;++d)a*=n[d];let l=i<1?1:i,u=on(r.shape)/l,c=[...kg(n.slice(0,i)),1],f=on(n);return{sliceRank:i,numUpdates:u,sliceSize:a,strides:c,outputSize:f}}var X3=N(()=>{"use strict";Ze()});function bFt(t,r,n){let o=J(t,"tensor","tensorScatterupdate"),i=J(r,"indices","tensorScatterupdate","int32"),s=J(n,"updates","tensorScatterupdate");if(rD(s,i,o.shape),o.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${o.dtype} and ${s.dtype}.`);let a={tensor:o,indices:i,updates:s},l={};return ue.runKernel(cC,a,l)}var IFe,DFe=N(()=>{"use strict";ze();Ee();Le();Ne();X3();IFe=se({tensorScatterUpdate_:bFt})});function xFt(t,r=1,n=!0){let o=J(t,"x","topk");if(o.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let i=o.shape[o.shape.length-1];if(r<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${r}`);if(r>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${r}`);let s={x:o},a={k:r,sorted:n},[l,u]=ue.runKernel(_C,s,a);return{values:l,indices:u}}var JU,gse=N(()=>{"use strict";ze();Ee();Le();Ne();JU=se({topk_:xFt})});function vFt(t,r=0,n=1,o,i){if(ri(t),o!=null&&o==="bool")throw new Error("Unsupported data type $ { dtype }");let s=new YC(r,n,o,!0,i),a=er(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var nD,NFe=N(()=>{"use strict";Js();Ex();Ne();G3();nD=se({truncatedNormal_:vFt})});function wFt(t,r=0){let n=J(t,"x","unique","string_or_numeric");pe(n.rank>0,()=>"The input tensor must be at least 1D");let o={x:n},i={axis:r},[s,a]=ue.runKernel(CC,o,i);return{values:s,indices:a}}var e7,yse=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();e7=se({unique_:wFt})});function _Ft(t,r,n){let o=J(t,"x","unsortedSegmentSum"),i=J(r,"segmentIds","unsortedSegmentSum","int32");pe(Tb(n),()=>"numSegments must be of dtype int");let s={x:o,segmentIds:i},a={numSegments:n};return ue.runKernel(bx,s,a)}var oD,t7=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();oD=se({unsortedSegmentSum_:_Ft})});function SFt(t,r=0){let n=J(t,"x","unstack","string_or_numeric");pe(r>=-n.shape.length&&r<n.shape.length,()=>`Axis = ${r} is not in [-${n.shape.length}, ${n.shape.length})`);let o={value:n},i={axis:r};return ue.runKernel(yx,o,i)}var Xa,iD=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Xa=se({unstack_:SFt})});function MFe(t,r){return j3(t,r,"right")}var FFe=N(()=>{"use strict";TU();});function r7(t,r=!0,n,o){return ue.makeVariable(t,r,n,o)}var OFe=N(()=>{"use strict";ze();});function n7(t,r){let n=[];for(let s=0;s<r.length;s++)r[s]&&n.push(s);let o=er(t,"int32"),i=er([n.length,t.length],"int32");for(let s=0;s<n.length;s++){let a=o.indexToLoc(n[s]),l=s*t.length;i.values.set(a,l)}return i.toTensor()}var bse=N(()=>{"use strict";Ex();});function CFt(t){return je(this,null,function*(){let r=J(t,"condition","whereAsync","bool"),n=yield r.data(),o=n7(r.shape,n);return t!==r&&r.dispose(),o})}var o7,xse=N(()=>{"use strict";bse();Le();o7=CFt});function EFt(t,r,n){return je(this,null,function*(){let o=J(t,"tensor","boolMask"),i=J(r,"mask","boolMask","bool"),s=n??0,a=i.rank,l=o.shape;pe(a>0,()=>"mask cannot be scalar"),$o(l.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let g=s;g<s+a;g++)u*=l[g];let c=l.slice(0,s).concat([u],l.slice(s+a)),f=Se(o,c),d=Se(i,[-1]),p=yield o7(d),h=Zc(p,[1]),m=N0(f,h,s);return t!==o&&o.dispose(),r!==i&&i.dispose(),h.dispose(),f.dispose(),d.dispose(),p.dispose(),m})}var TFt,RFe=N(()=>{"use strict";Le();Ze();F3();Yt();H3();xse();TFt=EFt});function AFt(t,r,n){let o=J(t,"x","transpose");if(r==null&&(r=o.shape.map((a,l)=>l).reverse()),pe(o.rank===r.length,()=>`Error in transpose: rank of input ${o.rank} must match length of perm ${r}.`),r.forEach(a=>{pe(a>=0&&a<o.rank,()=>`All entries in 'perm' must be between 0 and ${o.rank-1} but got ${r}`)}),o.rank<=1)return o.clone();let i={x:o},s={perm:r};return o.dtype==="complex64"?Pe(()=>{let a=Dx(o),l=aw(o);return a=ue.runKernel(Ih,{x:a},s),l=ue.runKernel(Ih,{x:l},s),n&&(l=Zr(l)),ec(a,l)}):ue.runKernel(Ih,i,s)}var Gr,Ox=N(()=>{"use strict";ze();Yc();Ee();Le();Ze();Z1();O3();oa();Ne();W3();Gr=se({transpose_:AFt})});function kFt(t,r,n,o,i=!0){let s=J(t,"v","movingAverage"),a=J(r,"x","movingAverage"),l=J(n,"decay","movingAverage");Hoe(s,a),pe(au(s.shape,a.shape),()=>"Shape mismatch in v and x");let u=Ot(1),c=wt(u,l),f=we(wt(a,s),c);if(i){pe(o!=null,()=>"When using zeroDebias: true, step is required.");let d=J(o,"step","movingAverage");f=Tt(f,wt(u,Ha(l,d)))}return Ke(s,f)}var IFt,PFe=N(()=>{"use strict";oi();Le();Ze();zo();Kn();fr();Ne();sw();Vo();io();IFt=se({movingAverage_:kFt})});function DFt(t,r,n){ri(n);let o=J(t,"indices","scatterND","int32"),i=J(r,"updates","scatterND");rD(i,o,n);let s={indices:o,updates:i},a={shape:n};return ue.runKernel(uC,s,a)}var NFt,LFe=N(()=>{"use strict";ze();Ee();Le();Js();Ne();X3();NFt=se({scatterND_:DFt})});function jFe(t,r,n,o){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);let a=r.size;if(!(r.rank===0||r.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${r.shape}, should be [] or [${i}]`);if(r.dtype!==o.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var BFe=N(()=>{"use strict"});function FFt(t,r,n,o=0){ri(n);let i=J(t,"sparseIndices","sparseToDense","int32"),s=J(r,"sparseValues","sparseToDense","string_or_numeric"),a=J(o,"defaultValue","sparseToDense",s.dtype);jFe(i,s,n,a);let l={sparseIndices:i,sparseValues:s,defaultValue:a},u={outputShape:n};return ue.runKernel(gC,l,u)}var OFt,$Fe=N(()=>{"use strict";ze();Ee();BFe();Le();Js();Ne();OFt=se({sparseToDense_:FFt})});function RFt(t,r){let n=J(r,"indices","gatherND","int32"),i={params:J(t,"x","gatherND","string_or_numeric"),indices:n};return ue.runKernel(GS,i)}var PFt,zFe=N(()=>{"use strict";ze();Ee();Le();Ne();PFt=se({gatherND_:RFt})});function UFe(t,r){if(r==null)return t.shape.slice();if(au(t.shape,r))return r;if(t.shape.length===r.length){let n=[];for(let o=0;o<t.shape.length;o++)r[o]==null&&t.shape[o]!=null?n.push(t.shape[o]):n.push(r[o]);return n}return r}var VFe=N(()=>{"use strict";Ze();});function LFt(t,r,n,o){let i=J(t,"x","dropout");if(pe(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),pe(r>=0&&r<1,()=>`rate must be a float in the range [0, 1), but got ${r}.`),r===0)return t instanceof tn?i.clone():i;let s=UFe(i,n),a=1-r,l=Tt(D0(Ke(Kc(s,0,1,"float32",o),a)),a);return we(i,l)}var vse,GFe=N(()=>{"use strict";Je();Le();Ze();zo();Kn();VFe();hU();fr();Ne();$U();vse=se({dropout_:LFt})});function wse(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function K3(t,r,n){let o=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){let a=2*Math.PI*s/(t+o-1);i[s]=r-n*Math.cos(a)}return ai(i,"float32")}var Z3=N(()=>{"use strict";ww();});function jFt(t,r,n=1){return je(this,null,function*(){let o=J(t,"predictions","inTopK"),i=J(r,"targets","inTopK");pe(o.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${o.rank}`),pe(o.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${o.rank} and targets rank ${i.rank}`),$o(o.shape.slice(0,o.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=o.shape[o.shape.length-1];pe(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);let a=yield o.data(),l=yield i.data(),[u,c]=[a.length/s,s],f=Ioe("bool",u);for(let d=0;d<u;d++){let p=d*c,h=a.subarray(p,p+c),m=[];for(let g=0;g<h.length;g++)m.push({value:h[g],index:g});m.sort((g,y)=>y.value-g.value),f[d]=0;for(let g=0;g<n;g++)if(m[g].index===l[d]){f[d]=1;break}}return t!==o&&o.dispose(),r!==i&&i.dispose(),ii(f,i.shape,"bool")})}var BFt,WFe=N(()=>{"use strict";Le();Ze();w3();BFt=jFt});function $Ft(t,r,n,o,i,s="NHWC",a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),pe(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),pe(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),pe(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=s==="NHWC"?l.shape[3]:l.shape[1],f=s==="NHWC"?u.shape[3]:u.shape[1];pe(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),pe(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),go("conv2dDerFilter",i,a);let d={x:l,dy:u},p={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return ue.runKernel(IS,d,p)}var sD,i7=N(()=>{"use strict";ze();Ee();Ze();Fs();Ne();Yt();sD=se({conv2DBackpropFilter_:$Ft})});function QC(t,r,n){if(n==null||n==="linear")return t;if(n==="relu")return we(t,hp(r));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function JC(t,r){let n=r,o=oo(t.shape,r.shape);return o.length>0&&(n=It(n,o)),Se(n,t.shape)}function eE(t,r,n,o){if(r==="linear")return t;if(r==="relu")return Ta(t);if(r==="elu")return k0(t);if(r==="relu6")return GI(t);if(r==="prelu")return gw(t,n);if(r==="leakyrelu")return lw(t,o);if(r==="sigmoid")return Il(t);throw new Error(`Unknown fused activation ${r}.`)}var tE,aD=N(()=>{"use strict";ko();cU();bU();fr();OU();VI();VU();Yt();AI();tD();Di();tE=(t,r)=>!(t>0)||r==="linear"});function zFt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(u=u||"linear",tE(ue.state.gradientDepth,u)===!1){pe(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=nc(t,r,n,o,i,s,a);return l!=null&&(S=Ke(S,l)),eE(S,u,c,f)}let d=J(t,"x","conv2d","float32"),p=J(r,"filter","conv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),pe(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),pe(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),go("fused conv2d",o,a);let g=i==="NHWC"?h.shape[3]:h.shape[1];pe(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),pe(Ca(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let y=BC(h.shape,p.shape,n,s,o,a),b;l!=null&&(b=J(l,"bias","fused conv2d"),[b]=sn(b,d),i==="NHWC"?jr(y.outShape,b.shape):(pe(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),pe(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(c!=null){let S=c.shape;if(pe(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)pe(S[0]===1||S[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${y.outChannels}).`);else if(S.length===3)try{jr(S,y.outShape)}catch{let E=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(E)}x=J(c,"prelu weights","fused conv2d")}let v=(S,C)=>{pe(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[E,T,I,k]=C,F=QC(S,I,u);pe(pd(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let D=NI(T.shape,F,E,n,o),L=sD(T,F,E.shape,n,o),P=[D,L];if(k!=null){let R=JC(k,F);P.push(R)}return P},w={x:h,filter:p,bias:b,preluActivationWeights:x},_={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Nl((C,E,T)=>{let I=ue.runKernel(q1,w,_);return T([E,C,I]),m&&(I=Se(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:v}})(h,p):Nl((C,E,T,I)=>{let k=ue.runKernel(q1,w,_);return I([E,C,k,T]),m&&(k=Se(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(h,p,b)}var qFe,HFe=N(()=>{"use strict";ze();Ix();Ee();oi();Le();Ze();zo();ko();$C();i7();J8();Fs();aD();Ne();Yt();qFe=se({fusedConv2d_:zFt})});function UFt(t,r,n,o,i,s=[1,1],a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={x:l,dy:u},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return ue.runKernel(PS,c,f)}var s7,_se=N(()=>{"use strict";ze();Ee();Ne();Yt();s7=se({depthwiseConv2dNativeBackpropFilter_:UFt})});function VFt(t,r,n,o,i,s=[1,1],a){let l=r,u=!1;r.rank===3&&(u=!0,l=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={dy:l,filter:n},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},d=ue.runKernel(LS,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var a7,Sse=N(()=>{"use strict";ze();Ee();Ne();Yt();a7=se({depthwiseConv2dNativeBackpropInput_:VFt})});function GFt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(tE(ue.state.gradientDepth,u)===!1){let _=A0(t,r,n,o,i,s,a);return l!=null&&(_=Ke(_,l)),eE(_,u,c,f)}let d=J(t,"x","depthwiseConv2d","float32"),p=J(r,"filter","depthwiseConv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),pe(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),pe(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),pe(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),s==null&&(s=[1,1]),pe(Ca(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),go("fused depthwiseConv2d",o,a);let g=BC(h.shape,p.shape,n,s,o,a,!0),y;l!=null&&(y=J(l,"bias","fused conv2d"),[y]=sn(y,d),jr(g.outShape,y.shape));let b;c!=null&&(b=J(c,"prelu weights","fused depthwiseConv2d"));let x=(_,S)=>{pe(pd(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[C,E,T,I]=S,k=QC(_,T,u),F=a7(E.shape,k,C,n,o,s,a),D=s7(E,k,C.shape,n,o,s,a);if(I!=null){let L=JC(y,k);return[F,D,L]}return[F,D]},v={x:h,filter:p,bias:y,preluActivationWeights:b},w={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Nl((S,C,E)=>{let T=ue.runKernel(H1,v,w);return E([C,S,T]),m&&(T=Se(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:x}})(h,p):Nl((S,C,E,T)=>{let I=ue.runKernel(H1,v,w);return T([C,S,I,E]),m&&(I=Se(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(h,p,y)}var YFe,XFe=N(()=>{"use strict";ze();Ix();Ee();oi();Le();Ze();zo();ko();Fs();I3();_se();Sse();aD();Ne();Yt();YFe=se({fusedDepthwiseConv2d_:GFt})});function WFt({a:t,b:r,transposeA:n=!1,transposeB:o=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}){if(tE(ue.state.gradientDepth,s)===!1){let k=Vr(t,r,n,o);return i!=null&&(k=Ke(k,i)),eE(k,s,a,l)}let u=J(t,"a","fused matMul"),c=J(r,"b","fused matMul");[u,c]=sn(u,c);let f=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=o?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=o?c.shape[c.rank-2]:c.shape[c.rank-1],m=u.shape.slice(0,-2),g=c.shape.slice(0,-2),y=on(m),b=on(g);pe(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${o} must match.`);let v=jr(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),w=n?Se(u,[y,f,p]):Se(u,[y,p,f]),_=o?Se(c,[b,h,d]):Se(c,[b,d,h]),S;i!=null&&(S=J(i,"bias","fused matMul"),[S]=sn(S,u),jr(v,S.shape));let C;a!=null&&(C=J(a,"prelu weights","fused matMul"));let E=(k,F)=>{let[D,L,P,R]=F,V=QC(Se(k,P.shape),P,s),G,U;if(!n&&!o?(G=Vr(V,L,!1,!0),U=Vr(D,V,!0,!1)):!n&&o?(G=Vr(V,L,!1,!1),U=Vr(V,D,!0,!1)):n&&!o?(G=Vr(L,V,!1,!0),U=Vr(D,V,!1,!1)):(G=Vr(L,V,!0,!0),U=Vr(V,D,!0,!0)),i!=null){let H=JC(R,V);return[G,U,H]}else return[G,U]},T={a:w,b:_,bias:S,preluActivationWeights:C},I={transposeA:n,transposeB:o,activation:s,leakyreluAlpha:l};return i==null?Nl((F,D,L)=>{let P=ue.runKernel(W1,T,I);return L([F,D,P]),{value:Se(P,v),gradFunc:E}})(w,_):Nl((F,D,L,P)=>{let R=ue.runKernel(W1,T,I);return P([F,D,R,L]),{value:Se(R,v),gradFunc:E}})(w,_,S)}var KFe,ZFe=N(()=>{"use strict";ze();Ix();Ee();oi();Le();Ze();zo();ko();aD();Oh();Ne();Yt();KFe=se({fusedMatMul_:WFt})});var _w={};fn(_w,{conv2d:()=>qFe,depthwiseConv2d:()=>YFe,matMul:()=>KFe});var QFe=N(()=>{"use strict";HFe();XFe();ZFe();});function qFt(t){return K3(t,.54,.46)}var JFe,eOe=N(()=>{"use strict";Ne();Z3();JFe=se({hammingWindow_:qFt})});function HFt(t){return K3(t,.5,.5)}var l7,Cse=N(()=>{"use strict";Ne();Z3();l7=se({hannWindow_:HFt})});function YFt(t,r,n,o=!1,i=0){let s=0,a=[];for(;s+r<=t.size;)a.push(zr(t,s,r)),s+=n;if(o)for(;s<t.size;){let l=s+r-t.size,u=On([zr(t,s,r-l),dp([l],i)]);a.push(u),s+=n}return a.length===0?Fx([],[0,r]):Se(On(a),[a.length,r])}var u7,Ese=N(()=>{"use strict";md();II();Ne();Yt();rc();ZU();u7=se({frame_:YFt})});function XFt(t,r,n,o,i=l7){o==null&&(o=wse(r));let s=u7(t,r,n),a=we(s,i(r));return xw(a,o)}var tOe,rOe=N(()=>{"use strict";fr();Ne();Z3();HU();Ese();Cse();tOe=se({stft_:XFt})});function KFt(t,r,n,o,i="bilinear",s=0){let a=J(t,"image","cropAndResize"),l=J(r,"boxes","cropAndResize","float32"),u=J(n,"boxInd","cropAndResize","int32"),c=l.shape[0];pe(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),pe(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${l.shape}.`),pe(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${l.shape}.`),pe(o.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${o.length}.`),pe(o[0]>=1&&o[1]>=1,()=>`cropSize must be atleast [1,1], but was ${o}`),pe(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);let f={image:a,boxes:l,boxInd:u},d={method:i,extrapolationValue:s,cropSize:o};return ue.runKernel(FS,f,d)}var nOe,oOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();nOe=se({cropAndResize_:KFt})});function ZFt(t){let r=J(t,"image","flipLeftRight","float32");pe(r.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${r.rank}.`);let n={image:r};return ue.runKernel(VS,n,{})}var iOe,sOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();iOe=se({flipLeftRight_:ZFt})});function QFt(t){let r=J(t,"image","grayscaleToRGB"),n=r.rank-1,o=r.shape[n];pe(r.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${r.rank}.`),pe(o===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${o}.`);let i=new Array(r.rank);return i.fill(1,0,n),i[n]=3,Ea(r,i)}var aOe,lOe=N(()=>{"use strict";Le();Ze();Ne();jI();aOe=se({grayscaleToRGB_:QFt})});function JFt(t){let r=J(t,"image","RGBToGrayscale"),n=r.rank-1,o=r.shape[n];pe(r.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${r.rank}.`),pe(o===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${o}.`);let i=r.dtype,s=rt(r,"float32"),a=ai([.2989,.587,.114]),l;switch(r.rank){case 2:l=iw("ij,j->i",s,a);break;case 3:l=iw("ijk,k->ij",s,a);break;case 4:l=iw("ijkl,l->ijk",s,a);break;case 5:l=iw("ijklm,m->ijkl",s,a);break;case 6:l=iw("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return l=Ni(l,-1),rt(l,i)}var uOe,cOe=N(()=>{"use strict";Le();Ze();pn();Rie();LI();Ne();ww();uOe=se({rgbToGrayscale_:JFt})});function eOt(t,r,n=0,o=.5){let i=J(t,"image","rotateWithOffset","float32");pe(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let s={image:i},a={radians:r,fillValue:n,center:o};return ue.runKernel(EC,s,a)}var fOe,dOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();fOe=se({rotateWithOffset_:eOt})});function mp(t,r,n,o,i,s){o==null&&(o=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);let a=t.shape[0];return n=Math.min(n,a),pe(0<=o&&o<=1,()=>`iouThreshold must be in [0, 1], but was '${o}'`),pe(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),pe(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),pe(r.rank===1,()=>"scores must be a 1D tensor"),pe(r.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${r.shape[0]}`),pe(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s}}var rE=N(()=>{"use strict";Ze();});function tOt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let s=J(t,"boxes","nonMaxSuppression","float32"),a=J(r,"scores","nonMaxSuppression","float32"),l=mp(s,a,n,o,i);n=l.maxOutputSize,o=l.iouThreshold,i=l.scoreThreshold;let u={maxOutputSize:n,iouThreshold:o,scoreThreshold:i};return ue.runKernel(JS,{boxes:s,scores:a},u)}var pOe,hOe=N(()=>{"use strict";ze();Ee();Le();rE();Ne();pOe=se({nonMaxSuppression_:tOt})});function mOe(t,r,n){let o=rOt(t,r,n),i=o<0?-(o+1):o;t.splice(i,0,r)}function rOt(t,r,n){return oOt(t,r,n||nOt)}function nOt(t,r){return t>r?1:t<r?-1:0}function oOt(t,r,n){let o=0,i=t.length,s=0,a=!1;for(;o<i;){s=o+(i-o>>>1);let l=n(r,t[s]);l>0?o=s+1:(i=s,a=!l)}return a?o:-o-1}var gOe=N(()=>{"use strict";});function c7(t,r,n,o,i){return Tse(t,r,n,o,i,0)}function f7(t,r,n,o,i,s){return Tse(t,r,n,o,i,0,!1,s,!0)}function d7(t,r,n,o,i,s){return Tse(t,r,n,o,i,s,!0)}function Tse(t,r,n,o,i,s,a=!1,l=!1,u=!1){let c=[];for(let y=0;y<r.length;y++)r[y]>i&&c.push({score:r[y],boxIndex:y,suppressBeginIndex:0});c.sort(yOe);let f=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&c.length>0;){let y=c.pop(),{score:b,boxIndex:x,suppressBeginIndex:v}=y;if(b<i)break;let w=!1;for(let _=d.length-1;_>=v;--_){let S=iOt(t,x,d[_]);if(S>=o){w=!0;break}if(y.score=y.score*sOt(o,f,S),y.score<=i)break}y.suppressBeginIndex=d.length,w||(y.score===b?(d.push(x),p.push(y.score)):y.score>i&&mOe(c,y,yOe))}let h=d.length,m=n-h;l&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));let g={selectedIndices:d};return a&&(g.selectedScores=p),u&&(g.validOutputs=h),g}function iOt(t,r,n){let o=t.subarray(r*4,r*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(o[0],o[2]),a=Math.min(o[1],o[3]),l=Math.max(o[0],o[2]),u=Math.max(o[1],o[3]),c=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(l-s)*(u-a),m=(d-c)*(p-f);if(h<=0||m<=0)return 0;let g=Math.max(s,c),y=Math.max(a,f),b=Math.min(l,d),x=Math.min(u,p),v=Math.max(b-g,0)*Math.max(x-y,0);return v/(h+m-v)}function sOt(t,r,n){let o=Math.exp(r*n*n);return n<=t?o:0}function yOe(t,r){return t.score-r.score||t.score===r.score&&r.boxIndex-t.boxIndex}var Q3=N(()=>{"use strict";gOe();});function aOt(s,a,l){return je(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let u=J(t,"boxes","nonMaxSuppressionAsync"),c=J(r,"scores","nonMaxSuppressionAsync"),f=mp(u,c,n,o,i);n=f.maxOutputSize,o=f.iouThreshold,i=f.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:m}=c7(p,h,n,o,i);return u!==t&&u.dispose(),c!==r&&c.dispose(),ai(m,"int32")})}var bOe,xOe=N(()=>{"use strict";Q3();Le();rE();ww();bOe=aOt});function lOt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=mp(a,l,n,o,i,s);n=u.maxOutputSize,o=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;let c={boxes:a,scores:l},f={maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s},d=ue.runKernel(tC,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}var vOe,wOe=N(()=>{"use strict";ze();Ee();Le();rE();Ne();vOe=se({nonMaxSuppressionWithScore_:lOt})});function uOt(a,l,u){return je(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=mp(c,f,n,o,i,s);n=d.maxOutputSize,o=d.iouThreshold,i=d.scoreThreshold,s=d.softNmsSigma;let p=yield Promise.all([c.data(),f.data()]),h=p[0],m=p[1],{selectedIndices:g,selectedScores:y}=d7(h,m,n,o,i,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:ai(g,"int32"),selectedScores:ai(y)}})}var _Oe,SOe=N(()=>{"use strict";Q3();Le();rE();ww();_Oe=uOt});function cOt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=mp(a,l,n,o,i,null),c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p={boxes:a,scores:l},h={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:s},m=ue.runKernel(eC,p,h);return{selectedIndices:m[0],validOutputs:m[1]}}var COe,EOe=N(()=>{"use strict";ze();Ee();Le();rE();Ne();COe=se({nonMaxSuppressionPadded_:cOt})});function fOt(a,l,u){return je(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=mp(c,f,n,o,i,null),p=d.maxOutputSize,h=d.iouThreshold,m=d.scoreThreshold,[g,y]=yield Promise.all([c.data(),f.data()]),{selectedIndices:b,validOutputs:x}=f7(g,y,p,h,m,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:ai(b,"int32"),validOutputs:Ot(x,"int32")}})}var TOe,AOe=N(()=>{"use strict";Q3();Le();rE();Vo();ww();TOe=fOt});function dOt(t,r,n=!1,o=!1){let i=J(t,"images","resizeBilinear");pe(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),pe(r.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${r}.`),pe(o===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(ux,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var p7,Ase=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();p7=se({resizeBilinear_:dOt})});function pOt(t,r,n=!1,o=!1){let i=J(t,"images","resizeNearestNeighbor");pe(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),pe(r.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${r}.`),pe(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),pe(o===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(lx,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var h7,kse=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();Yt();h7=se({resizeNearestNeighbor_:pOt})});function hOt(t,r="binary",n=!1,o=.5){let i=J(t,"image","threshold"),s=.2989,a=.587,l=.114,u=i.shape[0]*i.shape[1],c=we(ai([o]),255),f,d,p,h;if(pe(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),pe(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),pe(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),pe(r==="otsu"||r==="binary",()=>`Method must be binary or otsu, but was ${r}`),i.shape[2]===3){[f,d,p]=xs(i,[1,1,1],-1);let y=we(f,s),b=we(d,a),x=we(p,l);h=Ke(Ke(y,b),x)}else h=t;if(r==="otsu"){let y=q8(rt(WI(h),"int32"),ii([]),256);c=mOt(y,u)}let m=n?Xc(h,c):si(h,c);return rt(we(m,255),"int32")}function mOt(t,r){let n=ai([-1]),o=ai([0]),i=ai([0]),s,a,l,u,c,f;for(let d=0;d<t.size-1;d++){s=zr(t,0,d+1),a=zr(t,d+1),c=Tt(It(s),r),f=Tt(It(a),r);let p=It(we(s,O0(0,s.size)));l=Tt(p,It(s));let h=dp(a.shape,s.size),m=Ke(O0(0,a.size),h),g=we(a,m);u=Tt(It(g),It(a));let y=wt(l,u),b=wt(l,u),x=we(c,f);i=we(we(x,y),b);let v=si(i,o);o=yo(v,i,o),n=yo(v,ai([d]),n)}return n}var kOe,IOe=N(()=>{"use strict";ww();Ne();pn();ZC();Tie();uw();M0();Di();zo();fr();Kn();io();ase();gd();II();rc();zU();w3();Ze();Le();kOe=se({threshold_:hOt})});function gOt(t,r,n="nearest",o="constant",i=0,s){let a=J(t,"image","transform","float32"),l=J(r,"transforms","transform","float32");pe(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),pe(l.rank===2&&(l.shape[0]===a.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),pe(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);let u={image:a,transforms:l},c={interpolation:n,fillMode:o,fillValue:i,outputShape:s};return ue.runKernel(SC,u,c)}var DOe,NOe=N(()=>{"use strict";ze();Ee();Le();Ze();Ne();DOe=se({transform_:gOt})});function yOt(t,r,n){let o=J(t,"a","bandPart");pe(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);let i=o.shape,[s,a]=o.shape.slice(-2),l,u;typeof r=="number"?(pe(r%1===0,()=>`bandPart(): numLower must be an integer, got ${r}.`),pe(r<=s,()=>`bandPart(): numLower (${r}) must not be greater than the number of rows (${s}).`),l=J(r<0?s:r,"numLower","bandPart")):(pe(r.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=yo(kx(r,0),s,yd(r,s))),typeof n=="number"?(pe(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),pe(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),u=J(n<0?a:n,"numUpper","bandPart")):(pe(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=yo(kx(n,0),a,yd(n,a)));let c=Se(O0(0,s,1,"int32"),[-1,1]),f=O0(0,a,1,"int32"),d=wt(c,f),p=Ya(Xc(d,l),fu(d,Zr(u))),h=xo([s,a],o.dtype);return Se(as(Xa(Se(o,[-1,s,a])).map(m=>yo(p,m,h))),i)}var MOe,FOe=N(()=>{"use strict";Le();Ze();VC();R3();uw();GC();z3();oa();Ne();zU();Yt();vw();io();iD();gd();UI();MOe=se({bandPart_:yOt})});function bOt(t){let r;if(Array.isArray(t)){r=!1,pe(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=t[0].shape[0];for(let s=1;s<t.length;++s)pe(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else r=!0,t=xs(t,t.shape[0],0).map(i=>Zc(i,[0]));pe(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],o=t;for(let i=0;i<t.length;++i)n.push(ue.tidy(()=>{let s=o[i];if(i>0)for(let a=0;a<i;++a){let l=we(It(we(n[a],s)),n[a]);s=wt(s,l)}return Tt(s,Ax(s,"euclidean"))}));return r?as(n,0):n}var OOe,ROe=N(()=>{"use strict";ze();Ze();Kn();fr();M3();Ne();ZC();H3();vw();io();Di();OOe=se({gramSchmidt_:bOt})});function xOt(t,r=!1){if(pe(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return POe(t,r);{let n=t.shape.slice(0,t.shape.length-2).reduce((u,c)=>u*c),o=Xa(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];o.forEach(u=>{let[c,f]=POe(u,r);i.push(c),s.push(f)});let a=Se(as(i,0),t.shape),l=Se(as(s,0),t.shape);return[a,l]}}function POe(t,r=!1){return ue.tidy(()=>{pe(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],o=t.shape[1],i=UC(n),s=tc(t),a=Fx([[1]],[1,1]),l=tc(a),u=n>=o?o:n;for(let c=0;c<u;++c){let f=s,d=l,p=i;[l,s,i]=ue.tidy(()=>{let h=zr(s,[c,c],[n-c,1]),m=Ax(h),g=zr(s,[c,c],[1,1]),y=yo(si(g,0),Fx([[-1]]),Fx([[1]])),b=wt(g,we(y,m)),x=Tt(h,b);x.shape[0]===1?l=tc(a):l=On([a,zr(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);let v=Zr(Tt(Vr(y,b),m)),w=zr(s,[c,0],[n-c,o]),_=we(v,l),S=Gr(l);if(c===0)s=wt(w,Vr(_,Vr(S,w)));else{let T=wt(w,Vr(_,Vr(S,w)));s=On([zr(s,[0,0],[c,o]),T],0)}let C=Gr(_),E=zr(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=wt(E,Vr(Vr(E,l),C));else{let T=wt(E,Vr(Vr(E,l),C));i=On([zr(i,[0,0],[n,c]),T],1)}return[l,s,i]}),Cr([f,d,p])}return!r&&n>o&&(i=zr(i,[0,0],[n,o]),s=zr(s,[0,0],[o,o])),[i,s]})}var LOe,jOe=N(()=>{"use strict";ze();Yc();Ze();SI();md();Kn();zie();M0();Oh();fr();oa();M3();Ne();Yt();rc();vw();io();ZU();Ox();iD();gd();LOe=se({qr_:xOt})});var Mi,$h=N(()=>{"use strict";Mi=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Mi||{})});function vOt(t,r,n=Mi.SUM_BY_NONZERO_WEIGHTS){let o=J(t,"losses","computeWeightedLoss"),i=null;r!=null&&(i=J(r,"weights","computeWeightedLoss"));let s=i==null?o:we(o,i);if(n===Mi.NONE)return s;if(n===Mi.SUM)return It(s);if(n===Mi.MEAN){if(i==null)return bo(s);{let a=o.size/i.size,l=Tt(It(s),It(i));return a>1?Tt(l,Ot(a)):l}}if(n===Mi.SUM_BY_NONZERO_WEIGHTS){if(i==null)return Tt(It(s),Ot(o.size));{let a=we(i,Hi(o.shape)),l=rt(It(Bh(a,Ot(0))),"float32");return Tt(It(s),l)}}throw Error(`Unknown reduction: ${n}`)}var Ka,R0=N(()=>{"use strict";Le();pn();Kn();$h();$3();fr();NU();WC();Ne();Vo();Di();Ka=se({computeWeightedLoss_:vOt})});function wOt(t,r,n,o=Mi.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","absoluteDifference"),s=J(r,"predictions","absoluteDifference"),a=null;n!=null&&(a=J(n,"weights","absoluteDifference")),$o(i.shape,s.shape,"Error in absoluteDifference: ");let l=Ao(wt(i,s));return Ka(l,a,o)}var BOe,$Oe=N(()=>{"use strict";Le();Ze();LC();$h();Ne();io();R0();BOe=se({absoluteDifference_:wOt})});function _Ot(t,r,n,o,i=Mi.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","cosineDistance"),a=J(r,"predictions","cosineDistance"),l=null;o!=null&&(l=J(o,"weights","cosineDistance")),$o(s.shape,a.shape,"Error in cosineDistance: ");let u=Ot(1),c=wt(u,It(we(s,a),n,!0));return Ka(c,l,i)}var zOe,UOe=N(()=>{"use strict";Le();Ze();$h();fr();Ne();Vo();io();Di();R0();zOe=se({cosineDistance_:_Ot})});function SOt(t,r,n,o=Mi.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","hingeLoss"),s=J(r,"predictions","hingeLoss"),a=null;n!=null&&(a=J(n,"weights","hingeLoss")),$o(i.shape,s.shape,"Error in hingeLoss: ");let l=Ot(1);i=wt(we(Ot(2),i),l);let u=Ta(wt(l,we(i,s)));return Ka(u,a,o)}var VOe,GOe=N(()=>{"use strict";Le();Ze();$h();fr();Ne();VI();Vo();io();R0();VOe=se({hingeLoss_:SOt})});function COt(t,r,n,o=1,i=Mi.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","huberLoss"),a=J(r,"predictions","huberLoss"),l=null;n!=null&&(l=J(n,"weights","huberLoss")),$o(s.shape,a.shape,"Error in huberLoss: ");let u=Ot(o),c=Ao(wt(a,s)),f=yd(c,u),d=wt(c,f),p=Ke(we(Ot(.5),qr(f)),we(u,d));return Ka(p,l,i)}var WOe,qOe=N(()=>{"use strict";Le();Ze();LC();zo();$h();z3();fr();Ne();Vo();ys();io();R0();WOe=se({huberLoss_:COt})});function EOt(t,r,n,o=1e-7,i=Mi.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","logLoss"),a=J(r,"predictions","logLoss"),l=null;n!=null&&(l=J(n,"weights","logLoss")),$o(s.shape,a.shape,"Error in logLoss: ");let u=Ot(1),c=Ot(o),f=Zr(we(s,na(Ke(a,c)))),d=we(wt(u,s),na(Ke(wt(u,a),c))),p=wt(f,d);return Ka(p,l,i)}var HOe,YOe=N(()=>{"use strict";Le();Ze();zo();BI();$h();fr();oa();Ne();Vo();io();R0();HOe=se({logLoss_:EOt})});function TOt(t,r,n,o=Mi.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","meanSquaredError"),s=J(r,"predictions","meanSquaredError"),a=null;n!=null&&(a=J(n,"weights","meanSquaredError")),$o(i.shape,s.shape,"Error in meanSquaredError: ");let l=eD(i,s);return Ka(l,a,o)}var XOe,KOe=N(()=>{"use strict";Le();Ze();$h();Ne();YU();R0();XOe=se({meanSquaredError_:TOt})});function AOt(t,r){let n=J(t,"labels","sigmoidCrossEntropyWithLogits"),o=J(r,"logits","sigmoidCrossEntropyWithLogits");$o(n.shape,o.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=Ta(o),s=we(o,n),a=cw(_i(Zr(Ao(o))));return Ke(wt(i,s),a)}function kOt(t,r,n,o=0,i=Mi.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"multiClassLabels","sigmoidCrossEntropy"),a=J(r,"logits","sigmoidCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","sigmoidCrossEntropy")),$o(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),o>0){let c=Ot(o),f=Ot(1),d=Ot(.5);s=Ke(we(s,wt(f,c)),we(d,c))}let u=AOt(s,a);return Ka(u,l,i)}var ZOe,QOe=N(()=>{"use strict";Le();Ze();LC();zo();I0();Vie();$h();fr();oa();Ne();VI();Vo();io();R0();ZOe=se({sigmoidCrossEntropy_:kOt})});function IOt(t,r,n=-1){if(n===-1&&(n=r.rank-1),n!==r.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${r.rank} and dim was ${n}`);return Nl((i,s,a)=>{let u=fw(s,[n],!0),c=wt(rt(s,"float32"),u);a([i,c]);let f=Zr(we(c,i));return{value:It(f,[n]),gradFunc:(h,m)=>{let[g,y]=m,b=pp(h.shape,[n]);return[we(Se(h,b),wt(rt(g,"float32"),_i(y))),we(Se(h,b),wt(_i(y),rt(g,"float32")))]}}})(t,r)}function DOt(t,r,n,o=0,i=Mi.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"onehotLabels","softmaxCrossEntropy"),a=J(r,"logits","softmaxCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","softmaxCrossEntropy")),$o(s.shape,a.shape,"Error in softmaxCrossEntropy: "),o>0){let c=Ot(o),f=Ot(1),d=Ot(s.shape[1]);s=Ke(we(s,wt(f,c)),Tt(c,d))}let u=IOt(s,a);return Ka(u,l,i)}var JOe,eRe=N(()=>{"use strict";Ix();Le();Ze();zo();Ph();pn();Kn();I0();_U();$h();fr();oa();Ne();Yt();Vo();io();Di();R0();JOe=se({softmaxCrossEntropy_:DOt})});function NOt(t,r,n,o){let i=J(t,"indices","sparseFillEmptyRows","int32"),s=J(r,"values","sparseFillEmptyRows"),a=J(n,"denseShape","sparseFillEmptyRows","int32"),l=J(o,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);let u={indices:i,values:s,denseShape:a,defaultValue:l},c=ue.runKernel(dC,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var tRe,rRe=N(()=>{"use strict";ze();Ee();Le();Ne();tRe=se({sparseFillEmptyRows_:NOt})});function MOt(t,r,n){let o=J(t,"inputIndices","sparseReshape","int32"),i=J(r,"inputShape","sparseReshape","int32"),s=J(n,"newShape","sparseReshape","int32");if(o.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);let a={inputIndices:o,inputShape:i,newShape:s},l=ue.runKernel(pC,a);return{outputIndices:l[0],outputShape:l[1]}}var nRe,oRe=N(()=>{"use strict";ze();Ee();Le();Ne();nRe=se({sparseReshape_:MOt})});function FOt(t,r,n){let o=J(t,"data","sparseSegmentMean"),i=J(r,"indices","sparseSegmentMean","int32"),s=J(n,"segmentIds","sparseSegmentMean","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(hC,a)}var iRe,sRe=N(()=>{"use strict";ze();Ee();Le();Ne();iRe=se({sparseSegmentMean_:FOt})});function OOt(t,r,n){let o=J(t,"data","sparseSegmentSum"),i=J(r,"indices","sparseSegmentSum","int32"),s=J(n,"segmentIds","sparseSegmentSum","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(mC,a)}var aRe,lRe=N(()=>{"use strict";ze();Ee();Le();Ne();aRe=se({sparseSegmentSum_:OOt})});function ROt(t,r,n,o,i,s,a,l){let u=J(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=J(r,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let f={separator:n,nGramWidths:o,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:l},d={data:u,dataSplits:c},p=ue.runKernel(xC,d,f);return{nGrams:p[0],nGramsSplits:p[1]}}var uRe,cRe=N(()=>{"use strict";ze();Ee();Le();Ne();uRe=se({stringNGrams_:ROt})});function POt(t,r,n=!0){let o=J(t,"input","stringSplit","string"),i=J(r,"delimiter","stringSplit","string");if(o.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${o.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);let s={skipEmpty:n},a={input:o,delimiter:i},l=ue.runKernel(vC,a,s);return{indices:l[0],values:l[1],shape:l[2]}}var fRe,dRe=N(()=>{"use strict";ze();Ee();Le();Ne();fRe=se({stringSplit_:POt})});function LOt(t,r){let n=J(t,"input","stringToHashBucketFast","string"),o={numBuckets:r};if(r<=0)throw new Error("Number of buckets must be at least 1");let i={input:n};return ue.runKernel(wC,i,o)}var pRe,hRe=N(()=>{"use strict";ze();Ee();Le();Ne();pRe=se({stringToHashBucketFast_:LOt})});function jOt(t,r,n,o=!0){let i=J(t,"input","staticRegexReplace","string"),s={pattern:r,rewrite:n,replaceGlobal:o};return ue.runKernel(G1,{x:i},s)}var mRe,gRe=N(()=>{"use strict";ze();Ee();Le();Ne();mRe=se({staticRegexReplace_:jOt})});var BOt,$Ot,sc,Ise,zOt,UOt,VOt,Fr=N(()=>{"use strict";LC();oNe();iNe();zo();aNe();yie();bie();xie();vie();lNe();uNe();cNe();wie();fNe();z8();hNe();gNe();A3();kI();xNe();vNe();wNe();Tie();SNe();ENe();H8();Ex();pn();TNe();ANe();SI();Z1();md();kNe();INe();DNe();NNe();Aie();$C();kie();MNe();FNe();nU();Die();oU();iU();ONe();Nie();I3();PNe();Mie();Kn();Fie();Oie();Rie();cU();BNe();D3();$Ne();$ie();I0();LI();VNe();zie();II();hU();M8();F3();M0();VC();O3();GNe();WNe();qNe();bU();R3();uw();YNe();Uie();BI();Vie();JNe();eMe();_U();GC();L3();SU();Wie();rMe();Oh();PI();AU();nMe();iMe();B3();$3();aMe();fU();z3();qie();Hie();lMe();fr();cMe();dMe();oa();NU();MU();WC();pMe();mMe();hw();yMe();xMe();wMe();SMe();Yie();sw();OU();gie();Xie();EMe();AMe();IMe();NMe();QMe();sse();eFe();$U();rFe();zU();W3();nFe();VI();VU();Yt();Nx();iFe();aFe();uFe();fFe();ase();lse();Vo();use();cse();pFe();AI();hFe();fse();dse();rc();mFe();gFe();yFe();bFe();xFe();Gie();U3();WU();qU();pse();HU();ZC();Lh();ys();YU();H3();vw();tD();vFe();io();Di();wFe();Eie();w3();ww();ZU();hse();SFe();EFe();AFe();DFe();jI();gse();NFe();yse();t7();iD();FFe();OFe();gd();xse();UI();Uo();RFe();Ox();M3();PFe();LFe();TU();$Fe();zFe();GFe();Z3();WFe();Ne();HU();WU();qU();pse();QFe();eOe();Cse();Ese();rOe();oOe();sOe();lOe();cOe();dOe();hOe();xOe();wOe();SOe();EOe();AOe();Ase();kse();IOe();NOe();FOe();ROe();jOe();$Oe();R0();UOe();GOe();qOe();YOe();KOe();QOe();eRe();rRe();oRe();sRe();lRe();cRe();dRe();hRe();gRe();BOt={fft:bw,ifft:Mx,rfft:xw,irfft:JI},$Ot={hammingWindow:JFe,hannWindow:l7,frame:u7,stft:tOe},sc={flipLeftRight:iOe,grayscaleToRGB:aOe,resizeNearestNeighbor:h7,resizeBilinear:p7,rgbToGrayscale:uOe,rotateWithOffset:fOe,cropAndResize:nOe,nonMaxSuppression:pOe,nonMaxSuppressionAsync:bOe,nonMaxSuppressionWithScore:vOe,nonMaxSuppressionWithScoreAsync:_Oe,nonMaxSuppressionPadded:COe,nonMaxSuppressionPaddedAsync:TOe,threshold:kOe,transform:DOe},Ise={bandPart:MOe,gramSchmidt:OOe,qr:LOe},zOt={absoluteDifference:BOe,computeWeightedLoss:Ka,cosineDistance:zOe,hingeLoss:VOe,huberLoss:WOe,logLoss:HOe,meanSquaredError:XOe,sigmoidCrossEntropy:ZOe,softmaxCrossEntropy:JOe},UOt={sparseFillEmptyRows:tRe,sparseReshape:nRe,sparseSegmentMean:iRe,sparseSegmentSum:aRe},VOt={stringNGrams:uRe,stringSplit:fRe,stringToHashBucketFast:pRe,staticRegexReplace:mRe}});var tt={};fn(tt,{Serializable:()=>J3,SerializationMap:()=>m7,getRegisteredName:()=>WOt,registerClass:()=>Nse});function Nse(t,r,n){pe(t.className!=null,()=>"Class being registered does not have the static className property defined."),pe(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),pe(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof r>"u"&&(r="Custom"),typeof n>"u"&&(n=t.className);let o=n,i=r+">"+o;return m7.register(t),GOt.set(i,t),Dse.set(t,i),t}function WOt(t){return Dse.has(t)?Dse.get(t):t.className}var GOt,Dse,J3,m7,g7=N(()=>{"use strict";Ze();GOt=new Map,Dse=new Map,J3=class{getClassName(){return this.constructor.className}static fromConfig(r,n){return new r(n)}},m7=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(r){t.getMap().classNameMap[r.className]=[r,r.fromConfig]}}});var Aa,Sw=N(()=>{"use strict";Yc();Ix();Fr();g7();Aa=class extends J3{minimize(r,n=!1,o){let{value:i,grads:s}=this.computeGradients(r,o);if(o!=null){let a=o.map(l=>({name:l.name,tensor:s[l.name]}));this.applyGradients(a)}else this.applyGradients(s);return Cr(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(r,n){return P3(r,n)}dispose(){this.iterations_!=null&&Cr(this.iterations_)}saveIterations(){return je(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ot(this.iterations_,"int32")}})}getWeights(){return je(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(r){return je(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(r){return je(this,null,function*(){return this.iterations_=(yield r[0].tensor.data())[0],r.slice(1)})}};Object.defineProperty(Aa,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null})});var Cw,y7=N(()=>{"use strict";ze();Yc();zo();Kn();fr();Fr();ys();Uo();Sw();Cw=class extends Aa{static get className(){return"Adadelta"}constructor(r,n,o=null){super(),this.learningRate=r,this.rho=n,this.epsilon=o,this.accumulatedGrads=[],this.accumulatedUpdates=[],o==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accum_grad`,variable:Pe(()=>ar(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${o}/accum_var`,variable:Pe(()=>ar(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Pe(()=>{let f=Ke(we(u,this.rho),we(qr(l),1-this.rho)),d=we(Tt(Zn(Ke(c,this.epsilon)),Zn(Ke(u,this.epsilon))),l),p=Ke(we(c,this.rho),we(qr(d),1-this.rho));u.assign(f),c.assign(p);let h=Ke(we(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Cr(this.accumulatedGrads.map(r=>r.variable)),Cr(this.accumulatedUpdates.map(r=>r.variable)))}getWeights(){return je(this,null,function*(){let r=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=r.length/2,o=!1;this.accumulatedGrads=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedUpdates=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.rho,n.epsilon)}}});var Ew,b7=N(()=>{"use strict";ze();Yc();zo();Kn();II();fr();Lh();ys();Sw();Ew=class extends Aa{static get className(){return"Adagrad"}constructor(r,n=.1){super(),this.learningRate=r,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accumulator`,variable:Pe(()=>dp(s.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(r)?r[i].tensor:r[o];if(a==null)return;let l=this.accumulatedGrads[i].variable;Pe(()=>{let u=Ke(l,qr(a));l.assign(u);let c=Ke(we(Tt(a,Zn(Ke(u,ue.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Cr(this.accumulatedGrads.map(r=>r.variable))}getWeights(){return je(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulatedGrads=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(r,n){return new r(n.learningRate,n.initialAccumulatorValue)}}});var Tw,x7=N(()=>{"use strict";ze();Yc();zo();Kn();fr();sw();Vo();Lh();ys();io();Uo();Sw();Tw=class extends Aa{static get className(){return"Adam"}constructor(r,n,o,i=null){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Pe(()=>{this.accBeta1=Ot(n).variable(),this.accBeta2=Ot(o).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);Pe(()=>{let o=wt(1,this.accBeta1),i=wt(1,this.accBeta2);n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:Pe(()=>ar(l).variable(u))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:Pe(()=>ar(l).variable(u))});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),h=Ke(we(d,this.beta2),we(qr(c),1-this.beta2)),m=Tt(p,o),g=Tt(h,i);f.assign(p),d.assign(h);let y=Ke(we(Tt(m,Ke(Zn(g),this.epsilon)),-this.learningRate),l);l.assign(y)}),this.accBeta1.assign(we(this.accBeta1,this.beta1)),this.accBeta2.assign(we(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedSecondMoment!=null&&Cr(this.accumulatedSecondMoment.map(r=>r.variable))}getWeights(){return je(this,null,function*(){let r=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r),Pe(()=>{this.accBeta1.assign(Ha(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ha(this.beta2,this.iterations_+1))});let n=r.length/2,o=!1;this.accumulatedFirstMoment=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedSecondMoment=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)}}});var Aw,v7=N(()=>{"use strict";ze();Yc();LC();zo();Kn();B3();fr();Vo();io();Uo();Sw();Aw=class extends Aa{static get className(){return"Adamax"}constructor(r,n,o,i=null,s=0){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Pe(()=>{this.iteration=Ot(0).variable(),this.accBeta1=Ot(n).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);Pe(()=>{let o=wt(1,this.accBeta1),i=Tt(-this.learningRate,Ke(we(this.iteration,this.decay),1));n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:ar(l).variable(u)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:ar(l).variable(u)});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),h=we(d,this.beta2),m=Ao(c),g=ic(h,m);f.assign(p),d.assign(g);let y=Ke(we(Tt(i,o),Tt(p,Ke(g,this.epsilon))),l);l.assign(y)}),this.iteration.assign(Ke(this.iteration,1)),this.accBeta1.assign(we(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Cr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedWeightedInfNorm!=null&&Cr(this.accumulatedWeightedInfNorm.map(r=>r.variable))}getWeights(){return je(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(r){return je(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}});var P0,eP=N(()=>{"use strict";ze();Yc();zo();fr();Vo();Sw();P0=class extends Aa{static get className(){return"SGD"}constructor(r){super(),this.learningRate=r,this.setLearningRate(r)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=Array.isArray(r)?r[i].tensor:r[o];if(s==null)return;let a=ue.registeredVariables[o];Pe(()=>{let l=Ke(we(this.c,s),a);a.assign(l)})}),this.incrementIterations()}setLearningRate(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=Ms(Ot(-r))}dispose(){this.c.dispose()}getWeights(){return je(this,null,function*(){return[yield this.saveIterations()]})}setWeights(r){return je(this,null,function*(){if(r=yield this.extractIterations(r),r.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(r,n){return new r(n.learningRate)}}});var kw,w7=N(()=>{"use strict";ze();Yc();zo();fr();Vo();Uo();eP();kw=class extends P0{static get className(){return"Momentum"}constructor(r,n,o=!1){super(r),this.learningRate=r,this.momentum=n,this.useNesterov=o,this.accumulations=[],this.m=Ot(this.momentum)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${o}/momentum`,variable:Pe(()=>ar(s).variable(!1))});let a=this.accumulations[i].variable,l=Array.isArray(r)?r[i].tensor:r[o];l!=null&&Pe(()=>{let u,c=Ke(we(this.m,a),l);this.useNesterov?u=Ke(we(this.c,Ke(l,we(c,this.m))),s):u=Ke(we(this.c,c),s),a.assign(c),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Cr(this.accumulations.map(r=>r.variable))}setMomentum(r){this.momentum=r}getWeights(){return je(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulations=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)}}});var Iw,_7=N(()=>{"use strict";ze();Yc();zo();Kn();fr();Lh();ys();io();Uo();Sw();Iw=class extends Aa{static get className(){return"RMSProp"}constructor(r,n=.9,o=0,i=null,s=!1){if(super(),this.learningRate=r,this.decay=n,this.momentum=o,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=ue.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${o}/rms`,variable:Pe(()=>ar(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${o}/momentum`,variable:Pe(()=>ar(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${o}/mg`,variable:Pe(()=>ar(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Pe(()=>{let f=Ke(we(u,this.decay),we(qr(l),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[i].variable,p=Ke(we(d,this.decay),we(l,1-this.decay)),h=Tt(we(l,this.learningRate),Zn(wt(f,Ke(qr(p),this.epsilon)))),m=Ke(we(c,this.momentum),h);u.assign(f),d.assign(p),c.assign(m);let g=wt(s,m);s.assign(g)}else{let d=Ke(we(u,this.decay),we(qr(l),1-this.decay)),p=Ke(we(c,this.momentum),Tt(we(l,this.learningRate),Zn(Ke(d,this.epsilon))));u.assign(d),c.assign(p);let h=wt(s,p);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Cr(this.accumulatedMeanSquares.map(r=>r.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Cr(this.accumulatedMeanGrads.map(r=>r.variable)),this.accumulatedMoments!=null&&Cr(this.accumulatedMoments.map(r=>r.variable))}getWeights(){return je(this,null,function*(){let r=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&r.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return je(this,null,function*(){r=yield this.extractIterations(r);let n=this.centered?r.length/3:r.length/2,o=!1;this.accumulatedMeanSquares=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedMoments=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.centered&&(this.accumulatedMeanGrads=r.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}});function yRe(){for(let t of qOt)Nse(t)}var qOt,bRe=N(()=>{"use strict";y7();b7();x7();v7();w7();_7();eP();g7();qOt=[Cw,Ew,Tw,Aw,kw,Iw,P0]});function xRe(t){return new Promise(r=>setTimeout(r)).then(t)}function ZOt(t="model"){return new Mse(t)}function vRe(t){return new Fse(t)}var HOt,YOt,XOt,Mse,Fse,KOt,wRe=N(()=>{"use strict";yI();_a();ew();MC();Q1();HOt="model",YOt=".json",XOt=".weights.bin";Mse=(()=>{class t{constructor(n){if(!Me().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=HOt),this.modelJsonFileName=n+YOt,this.weightDataFileName=n+XOt}save(n){return je(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let o=qa.join(n.weightData),i=window.URL.createObjectURL(new Blob([o],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a=A8(n,s),l=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=l,yield xRe(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=i,yield xRe(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:S0(n)}}})}}return t.URL_SCHEME="downloads://",t})(),Fse=class{constructor(r){if(r==null||r.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${r}`);this.jsonFile=r[0],this.weightsFiles=r.slice(1)}load(){return je(this,null,function*(){return new Promise((r,n)=>{let o=new FileReader;o.onload=i=>{let s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){r({modelTopology:a});return}let u=xI(s,c=>this.loadWeights(c));r(u)},o.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),o.readAsText(this.jsonFile)})})}loadWeights(r){let n=[],o=[];for(let a of r)n.push(...a.weights),o.push(...a.paths);let i=this.checkManifestAndWeightFiles(r),s=o.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[n,a])}loadWeightsFile(r,n){return new Promise((o,i)=>{let s=new FileReader;s.onload=a=>{let l=a.target.result;o(l)},s.onerror=a=>i(`Failed to weights data from file of path '${r}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(r){let n=[],o=this.weightsFiles.map(s=>iie(s.name)),i={};for(let s of r)s.paths.forEach(a=>{let l=iie(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),o.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);i[a]=this.weightsFiles[o.indexOf(l)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}},KOt=t=>Me().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Mse.URL_SCHEME)?ZOt(t.slice(Mse.URL_SCHEME.length)):null;ea.registerSaveRouter(KOt)});function Ose(t,r,n,o){a(t),n=n??0,o=o??1,l(n,o);let i=0,s=u=>(u.then(c=>{let f=n+ ++i/t.length*(o-n);return r(f),c}),u);function a(u){pe(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function l(u,c){pe(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),pe(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),pe(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(t.map(s))}var _Re=N(()=>{"use strict";Ze();});function Rse(t,r){return je(this,null,function*(){r==null&&(r={});let n=r.fetchFunc==null?Me().platform.fetch:r.fetchFunc,o=t.map(d=>n(d,r.requestInit,{isBinary:!0})),l=(r.onProgress==null?yield Promise.all(o):yield Ose(o,r.onProgress,0,.5)).map(d=>d.arrayBuffer());return r.onProgress==null?yield Promise.all(l):yield Ose(l,r.onProgress,.5,1)})}function SRe(t,r){var n;let o=r.fetchFunc==null?Me().platform.fetch:r.fetchFunc,i=0,s;return(n=r.onProgress)===null||n===void 0||n.call(r,0),new ReadableStream({pull:a=>je(this,null,function*(){for(var l;i<t.length;){s||(s=(yield o(t[i],r.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield s.read();if(u){i++,s=void 0,(l=r.onProgress)===null||l===void 0||l.call(r,i/t.length);continue}a.enqueue(c);return}a.close()})})}function CRe(t,r="",n,o){return je(this,null,function*(){return Pse(a=>Rse(a,{requestInit:o}))(t,r,n)})}function Pse(t){return(r,n="",o)=>je(this,null,function*(){let i=r.map(()=>!1),s={},a=o!=null?o.map(()=>!1):[],l=[];if(r.forEach((h,m)=>{let g=0;h.weights.forEach(y=>{let b="quantization"in y?y.quantization.dtype:y.dtype,x=Sx[b]*on(y.shape),v=()=>{i[m]=!0,s[m]==null&&(s[m]=[]),s[m].push({manifestEntry:y,groupOffset:g,sizeBytes:x})};o!=null?o.forEach((w,_)=>{w===y.name&&(v(),a[_]=!0)}):v(),l.push(y.name),g+=x})}),!a.every(h=>h)){let h=o.filter((m,g)=>!a[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}let u=i.reduce((h,m,g)=>(m&&h.push(g),h),[]),c=[];u.forEach(h=>{r[h].paths.forEach(m=>{let g=n+(n.endsWith("/")?"":"/")+m;c.push(g)})});let f=yield t(c),d={},p=0;return u.forEach(h=>{let m=r[h].paths.length,g=new qa(f.slice(p,p+m));s[h].forEach(b=>{let x=g.slice(b.groupOffset,b.groupOffset+b.sizeBytes),v=T8(x,[b.manifestEntry]);for(let w in v)d[w]=v[w]}),p+=m}),d})}var Lse=N(()=>{"use strict";_a();Ze();Q1();ew();_Re();eie();});function eRt(t){let r=t.lastIndexOf("/"),n=t.lastIndexOf("?"),o=t.substring(0,r),i=n>r?t.substring(n):"";return[o+"/",i]}function S7(t){return t.match(ERe.URL_SCHEME_REGEX)!=null}function C7(t,r){return new ERe(t,r)}function ARe(t,r){return C7(t,r)}var QOt,JOt,ERe,TRe,kRe=N(()=>{"use strict";_a();Ze();ew();Q1();MC();Lse();QOt="application/octet-stream",JOt="application/json",ERe=(()=>{class t{constructor(n,o){if(this.DEFAULT_METHOD="POST",o==null&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.weightUrlConverter=o.weightUrlConverter,o.fetchFunc!=null?(pe(typeof o.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=Me().platform.fetch,pe(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&pe(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,o.requestInit!=null&&o.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{},this.loadOptions=o}save(n){return je(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let o=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);o.body=new FormData;let i=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],s=A8(n,i);if(o.body.append("model.json",new Blob([JSON.stringify(s)],{type:JOt}),"model.json"),n.weightData!=null){let l=qa.join(n.weightData);o.body.append("model.weights.bin",new Blob([l],{type:QOt}),"model.weights.bin")}let a=yield this.fetch(this.path,o);if(a.ok)return{modelArtifactsInfo:S0(n),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})}loadModelJSON(){return je(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let o;try{o=yield n.json()}catch{let l=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?l+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":l+=" Please make sure the server is serving valid JSON for this request.",new Error(l)}let i=o.modelTopology,s=o.weightsManifest;if(i==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return o})}load(){return je(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return xI(n,o=>this.loadWeights(o))})}loadStream(){return je(this,null,function*(){let n=yield this.loadModelJSON(),o=yield this.getWeightUrls(n.weightsManifest),i=C3(n.weightsManifest),s=()=>SRe(o,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:i,getWeightStream:s})})}getWeightUrls(n){return je(this,null,function*(){let o=Array.isArray(this.path)?this.path[1]:this.path,[i,s]=eRt(o),a=this.weightPathPrefix||i,l=[],u=[];for(let c of n)for(let f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):l.push(a+f+s);return this.weightUrlConverter&&l.push(...yield Promise.all(u)),l})}loadWeights(n){return je(this,null,function*(){let o=yield this.getWeightUrls(n),i=C3(n),s=yield Rse(o,this.loadOptions);return[i,s]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();TRe=(t,r)=>{if(typeof fetch>"u"&&(r==null||r.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(o=>S7(o)):n=S7(t),n)return C7(t,r)}return null};ea.registerSaveRouter(TRe);ea.registerLoadRouter(TRe)});function IRe(t,r,n,o){let i=arguments;return new jse(Bse(...i))}function Bse(t,r,n,o){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new tP(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new tP({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new tP({modelTopology:t,weightSpecs:r,weightData:n,trainingConfig:o}))}function DRe(t){return new E7(t)}function NRe(t){return new E7(t)}var tP,E7,jse,MRe=N(()=>{"use strict";tP=class{constructor(r){this.modelArtifacts=r}load(){return this.modelArtifacts}},E7=class{constructor(r){this.saveHandler=r}save(r){return this.saveHandler(r)}},jse=class{constructor(r){r.load&&(this.load=()=>Promise.resolve(r.load())),r.save&&(this.save=n=>Promise.resolve(r.save(n)))}}});var bd={};fn(bd,{CompositeArrayBuffer:()=>qa,browserFiles:()=>vRe,browserHTTPRequest:()=>ARe,concatenateArrayBuffers:()=>PDe,copyModel:()=>KDe,decodeWeights:()=>T8,decodeWeightsStream:()=>nie,encodeWeights:()=>MDe,fromMemory:()=>IRe,fromMemorySync:()=>Bse,getLoadHandlers:()=>$De,getModelArtifactsForJSON:()=>xI,getModelArtifactsForJSONSync:()=>sie,getModelArtifactsInfoForJSON:()=>S0,getSaveHandlers:()=>BDe,getWeightSpecs:()=>C3,http:()=>C7,isHTTPScheme:()=>S7,listModels:()=>YDe,loadWeights:()=>CRe,moveModel:()=>ZDe,registerLoadRouter:()=>jDe,registerSaveRouter:()=>LDe,removeModel:()=>XDe,weightsLoaderFactory:()=>Pse,withSaveHandler:()=>DRe,withSaveHandlerSync:()=>NRe});var FRe=N(()=>{"use strict";cie();fie();wRe();kRe();ew();MRe();MC();Lse();Q1();die();});function tRt(t,r,n){let o=J(t,"labels","confusionMatrix"),i=J(r,"predictions","confusionMatrix");pe(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),pe(o.rank===1,()=>`Expected the rank of labels to be 1, but got ${o.rank}`),pe(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),pe(o.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${o.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),pe(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let s=F0(rt(o,"int32"),n),a=F0(rt(i,"int32"),n),l=Gr(s),u=Vr(l,a);return rt(u,"int32")}var ORe,RRe=N(()=>{"use strict";Le();Ze();pn();Oh();MU();Ne();Ox();ORe=se({confusionMatrix_:tRt})});var $se={};fn($se,{confusionMatrix:()=>ORe});var PRe=N(()=>{"use strict";RRe();});var T7={};fn(T7,{draw:()=>uRt,fromPixels:()=>cRt,fromPixelsAsync:()=>sRt,toPixels:()=>lRt});function jRe(t,r=3){if(r>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,o=!1,i=!1,s=!1,a=!1,l=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)o=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(TC(lI,ue.backendName)!=null){let m={pixels:t},g={numChannels:r};return ue.runKernel(lI,m,g)}let[c,f]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(a)d=t.getContext("2d").getImageData(0,0,c,f).data;else if(o||n)d=t.data;else if(s||i||l){if(nE==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")nE=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else nE=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});nE.canvas.width=c,nE.canvas.height=f,nE.drawImage(t,0,0,c,f),d=nE.getImageData(0,0,c,f).data}let p;if(r===4)p=new Int32Array(d);else{let m=c*f;p=new Int32Array(m*r);for(let g=0;g<m;g++)for(let y=0;y<r;++y)p[g*r+y]=d[g*4+y]}return QU(p,[f,c,r],"int32")}function rRt(t){return t!=null&&t.data instanceof Uint8Array}function nRt(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function oRt(t){return t!=null&&t.width!==0&&t.height!==0}function iRt(t){return nRt()&&!(t instanceof ImageBitmap)&&oRt(t)&&!rRt(t)}function sRt(t,r=3){return je(this,null,function*(){let n=null;if(Me().getBool("WRAP_TO_IMAGEBITMAP")&&iRt(t)){let o;try{o=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{o=null}o!=null&&o.width===t.width&&o.height===t.height?n=o:n=t}else n=t;return jRe(n,r)})}function BRe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let r=t.rank===2?1:t.shape[2];if(r>4||r===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${r}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function aRt(t){let r=t?.alpha||1;if(r>1||r<0)throw new Error(`Alpha value ${r} is suppoed to be in range [0 - 1].`)}function lRt(t,r){return je(this,null,function*(){let n=J(t,"img","toPixels");if(!(t instanceof tn)){let c=n;n=rt(c,"int32"),c.dispose()}BRe(n);let[o,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],a=yield n.data(),l=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*o*4);for(let c=0;c<o*i;++c){let f=[0,0,0,255];for(let p=0;p<s;p++){let h=a[c*s+p];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(f[0]=h*l,f[1]=h*l,f[2]=h*l):f[p]=h*l}let d=c*4;u[d+0]=Math.round(f[0]),u[d+1]=Math.round(f[1]),u[d+2]=Math.round(f[2]),u[d+3]=Math.round(f[3])}if(r!=null){LRe||TC(aI,ue.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),LRe=!0),r.width=i,r.height=o;let c=r.getContext("2d"),f=new ImageData(u,i,o);c.putImageData(f,0,0)}return n!==t&&n.dispose(),u})}function uRt(t,r,n){let o=J(t,"img","draw");if(!(t instanceof tn)){let a=o;o=rt(a,"int32"),a.dispose()}BRe(o),aRt(n?.imageOptions);let i={image:o},s={canvas:r,options:n};ue.runKernel(aI,i,s)}var nE,LRe,cRt,$Re=N(()=>{"use strict";ze();_a();Ee();m3();Je();Le();pn();Ne();hse();LRe=!1;cRt=se({fromPixels_:jRe})});var zse={};fn(zse,{prepareAndValidate:()=>zRe});function zRe(t,r){let n=t.shape.length,o=r.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(o<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${o}.`);if(r.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${r.dtype}.`);if(r.shape[o-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${r.shape[o-1]} vs. ${n}`);if(on(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let i=r.shape,s=i[i.length-1],a=1;for(let d=0;d<i.length-1;++d)a*=i[d];let l=t.shape,u=i.slice();u.pop();let c=1;for(let d=s;d<n;++d)c*=l[d],u.push(l[d]);let f=[...kg(t.shape).map(d=>d/c),1].slice(0,s);return[u,a,c,f]}var Use=N(()=>{"use strict";Ze()});var Rs={};fn(Rs,{assertParamsValid:()=>dRt,computeFlatOffset:()=>yRt,computeOutShape:()=>hRt,getNormalizedAxes:()=>mRt,isSliceContinous:()=>gRt,maskToAxes:()=>pRt,parseSliceParams:()=>Gse,sliceInfo:()=>bRt,startForAxis:()=>XRe,startIndicesWithElidedDims:()=>qRe,stopForAxis:()=>KRe,stopIndicesWithElidedDims:()=>HRe,stridesForAxis:()=>YRe,stridesWithElidedDims:()=>VRe});function dRt(t,r,n){let o=t.shape.length;pe(o===r.length,()=>`Error in slice${o}D: Length of begin ${r} must match the rank of the array (${o}).`),pe(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must match the rank of the array (${o}).`);for(let i=0;i<o;++i)pe(r[i]+n[i]<=t.shape[i],()=>`Error in slice${o}D: begin[${i}] + size[${i}] (${r[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function pRt(t){let r=[],n=0;for(;t>0;)t&1&&r.push(n),t/=2,n++;return r}function hRt(t,r,n){let o=[];for(let i=0;i<t.length;i++)o[i]=Math.ceil((r[i]-t[i])/n[i]);return o}function VRe(t,r,n,o){let i=[...t];for(let s=i.length;s<o.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[r]=1:(i.splice(r,0,1),i.pop());return i}function GRe(t,r,n){return n<=t?n:n-(r-1)}function WRe(t,r){let n=[];for(let o=0;o<t;o++)n.push(r+o);return n}function mRt(t,r,n,o,i,s,a,l,u){let c=t.length,f=new Array(c),d=new Array(c),p=new Array(c);if(r.length&&n>0){let h=r[0],m=n+1;f=qRe(a,h,m,o,t),d=HRe(l,h,m,i,t),p=VRe(s,h,m,t)}else for(let h=0;h<c;h++)f[h]=XRe(a,o,s,t,h,u),d[h]=KRe(l,i,s,t,h,u),p[h]=YRe(s,h,u);return{begin:f,end:d,strides:p}}function qRe(t,r,n,o,i){let s=[...i],a=WRe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=0;else{let u=GRe(r,n,l),c=o[u];t&1<<u&&(c=0),s[l]=c}return s}function HRe(t,r,n,o,i){let s=[...i],a=WRe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=Number.MAX_SAFE_INTEGER;else{let u=GRe(r,n,l),c=o[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),s[l]=c}for(let l=0;l<s.length;l++){let u=i[l];s[l]<0&&(s[l]+=u),s[l]=eI(0,s[l],i[l])}return s}function YRe(t,r,n){let o=t[r];return(n&1<<r||o==null)&&(o=1),o}function XRe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),a=eI(0,a,u-1),a}function KRe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),l>0?a=eI(0,a,u):a=eI(-1,a,u-1),a}function gRt(t,r,n){let o=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){o=i;break}for(let i=o+1;i<n.length;i++)if(r[i]>0||n[i]!==t[i])return!1;return!0}function yRt(t,r){let n=t.length>0?t[t.length-1]:1;for(let o=0;o<t.length-1;o++)n+=t[o]*r[o];return n}function Gse(t,r,n){let o,i=t.shape.length;typeof r=="number"?o=[r,...new Array(i-1).fill(0)]:r.length<i?o=r.concat(new Array(i-r.length).fill(0)):o=r.slice(),o.forEach(a=>{pe(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,l)=>a>=0?a:(pe(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${l}.`),t.shape[l]-o[l])),[o,s]}function bRt(t,r,n,o,i,s,a,l,u){let c;if(o==null?(c=new Array(r.length),c.fill(1)):c=o,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:r.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};for(let v=0;v<d.dims;v++)f&&1<<v&l&&d.numAddAxisAfterEllipsis++,1<<v&a&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};xRt(d,p);let h=!0,m=!0,g=!0,y=[],b=[];for(let v=0;v<t.length;++v){if(p.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);let w=!!(p.shrinkAxisMask&1<<v),_=t[v];if(_===-1){y.push(w?1:-1);continue}let S=[p.beginMask&1<<v,p.endMask&1<<v],C=[p.strides[v]>0?0:-1,p.strides[v]>0?_:_-1];if(w&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[v]===1;let E=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(w){let F=p.begin[v]<0?_+p.begin[v]:p.begin[v];if(p.begin[v]=F,p.end[v]=p.begin[v]+1,F<0||F>=_)throw Error(`slice index ${p.begin[v]} of dimension ${v} out of bounds.`)}else p.begin[v]=URe(p.begin[v],0,p.strides[v],_,S,C),p.end[v]=URe(p.end[v],1,p.strides[v],_,S,C);let k=p.strides[v]===1&&p.begin[v]===0&&p.end[v]===_;h=h&&k,m=m&&(v===0&&p.strides[v]===1||k)}else h=h&&p.strides[v]===1&&E,m=m&&(v===0&&p.strides[v]===1||E);let T,I=!1;if(p.beginValid&&p.endValid?(T=p.end[v]-p.begin[v],I=!0):w?(T=1,I=!0):E&&_>=0&&(p.strides[v]<0?T=-_:T=_,I=!0),I){let k;T===0||T<0!=p.strides[v]<0?k=0:k=Math.trunc(T/p.strides[v])+(T%p.strides[v]!==0?1:0),y.push(k)}else y.push(-1)}for(let v=0;v<p.finalShapeGatherIndices.length;++v){let w=p.finalShapeGatherIndices[v];w>=0?b.push(y[w]):w===Vse&&b.push(1)}return{finalShapeSparse:b.filter((v,w)=>p.finalShapeGatherIndices[w]!==Vse),finalShape:b,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function xRt(t,r){r.beginMask=0,r.endMask=0,r.shrinkAxisMask=0;let n=0;r.beginValid=t.begin!=null,r.endValid=t.end!=null,r.begin=new Array(r.dims),r.end=new Array(r.dims),r.strides=new Array(r.dims),r.finalShapeGatherIndices=[],r.finalShapeGatherIndicesSparse=[],r.inputShapeGatherIndicesSparse=new Array(r.dims);for(let o=0;o<t.dims;o++)if(1<<o&t.ellipsisMask){let i=Math.min(r.dims-(t.dims-o)+1+t.numAddAxisAfterEllipsis,r.dims);for(;n<i;n++)r.begin[n]=0,r.end[n]=0,r.strides[n]=1,r.beginMask|=1<<n,r.endMask|=1<<n,r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(-1),r.inputShapeGatherIndicesSparse[n]=o}else if(1<<o&t.newAxisMask)r.finalShapeGatherIndices.push(Vse),r.finalShapeGatherIndicesSparse.push(-1);else{if(n===r.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${r.dims} dims, ${r.begin.length}.`);t.begin!=null&&(r.begin[n]=t.begin[o]),t.end!=null&&(r.end[n]=t.end[o]),r.strides[n]=t.strides[o],t.beginMask&1<<o&&(r.beginMask|=1<<n),t.endMask&1<<o&&(r.endMask|=1<<n),t.shrinkAxisMask&1<<o?(r.finalShapeGatherIndices.push(fRt),r.finalShapeGatherIndicesSparse.push(-1),r.shrinkAxisMask|=1<<n):(r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(o)),r.inputShapeGatherIndicesSparse[n]=o,n++}}function URe(t,r,n,o,i,s){if(i[r])return n>0?s[r]:s[r+1&1];{let a=t<0?o+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}var Vse,fRt,A7=N(()=>{"use strict";Ze();Vse=-2,fRt=-1});var Wse,ZRe=N(()=>{"use strict";Wse="4.19.0"});var lD,qse=N(()=>{"use strict";y7();b7();x7();v7();w7();_7();eP();lD=class{static sgd(r){return new P0(r)}static momentum(r,n,o=!1){return new kw(r,n,o)}static rmsprop(r,n=.9,o=0,i=null,s=!1){return new Iw(r,n,o,i,s)}static adam(r=.001,n=.9,o=.999,i=null){return new Tw(r,n,o,i)}static adadelta(r=.001,n=.95,o=null){return new Cw(r,n,o)}static adamax(r=.002,n=.9,o=.999,i=null,s=0){return new Aw(r,n,o,i,s)}static adagrad(r,n=.1){return new Ew(r,n)}}});var Qc,QRe=N(()=>{"use strict";qse();Qc=lD});function uD(){return new Promise(t=>vRt(()=>t()))}var vRt,JRe=N(()=>{"use strict";vRt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t()});function wRt(t,r){let n=t[0].length;t.forEach((i,s)=>{pe(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),pe(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let o=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)pe(a===r||i[a]===o[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${o}) along the non-concatenated axis ${s}.`)})}function _Rt(t,r){let n=t[0].slice();for(let o=1;o<t.length;o++)n[r]+=t[o][r];return n}var e3e=N(()=>{"use strict";Ze();});var t3e=N(()=>{"use strict";});function SRt(t,r,n){let o=new Array;if(n==null&&r==null)return o;if(r==null)for(;o.length<t+n.length;)o.push(-1);else o=r.slice();if(n==null)return o;if(t+n.length!==o.length)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${o.length}`);for(let i=1;i<n.length;++i){let s=n[i],a=o[o.length-n.length+i],l=o[a];if(s>=0)if(l>=0){if(l!==s)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${l}`)}else o[a]=s}return o}function CRt(t){let r={FIRST_DIM_SIZE:Rx.FIRST_DIM_SIZE,VALUE_ROWIDS:Rx.VALUE_ROWIDS,ROW_LENGTHS:Rx.ROW_LENGTHS,ROW_SPLITS:Rx.ROW_SPLITS,ROW_LIMITS:Rx.ROW_LIMITS,ROW_STARTS:Rx.ROW_STARTS},n=[];for(let o of t)if(o in r)n.push(r[o]);else break;return n}function ERt(t){return t.length===0?0:t[0]===Rx.FIRST_DIM_SIZE?t.length-1:t.length}function TRt(t,r){if(t==null||r==null)return;let n=t.length,o=r.length;if(n>=o)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${r}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${o})`);for(let i=0;i<Math.min(n,o-1);++i){let s=t[i],a=r[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${r} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}var Rx,r3e=N(()=>{"use strict";Rx=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(Rx||{})});function ARt(t){return t<=k7?t:rI(t,Math.floor(Math.sqrt(t)))}var k7,Hse=N(()=>{"use strict";Ze();k7=30});function kRt(t,r,n){let o=n*(typeof t=="number"?t:t[0]),i=r*(typeof t=="number"?t:t[1]);return[o,i]}var n3e=N(()=>{"use strict";});function IRt(t,r,n,o=!0){let i=[];if(o)i=i.concat(r.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);let s=r.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/r[a],r[a]]);i=i.concat(t.slice(s+1))}return i}function DRt(t,r,n=!0){let o=[];if(n){o.push(r);for(let i=r+1;i<t;++i)i<=2*r?(o.push(i),o.push(i-(r+1))):o.push(i)}else{let i=[],s=[];for(let a=1;a<t;++a)a>=r*2+1||a%2===1?s.push(a):i.push(a);o.push(...i),o.push(0),o.push(...s)}return o}function NRt(t,r,n,o=!0){let i=[];o?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=r.length?o?i.push(r[s-1]*t[s]):i.push(t[s]/r[s-1]):i.push(t[s]);return i}function MRt(t,r){let n=[0];for(let o=0;o<r;++o)n.push(t[o][0]);return n}function FRt(t,r,n){let o=t.slice(0,1);for(let i=0;i<n;++i)o.push(t[i+1]-r[i][0]-r[i][1]);return o}var o3e=N(()=>{"use strict";});var Yse,Xse,Kse=N(()=>{"use strict";Yse=1.7580993408473768,Xse=1.0507009873554805});var ORt,RRt,PRt,LRt,jRt,BRt,i3e=N(()=>{"use strict";ORt=.3275911,RRt=.254829592,PRt=-.284496736,LRt=1.421413741,jRt=-1.453152027,BRt=1.061405429});function $Rt(t,r){if(t.length!==r.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${r.length}.`);let n=new Float32Array(t.length*2);for(let o=0;o<n.length;o+=2)n[o]=t[o/2],n[o+1]=r[o/2];return n}function zRt(t){let r=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=t[o],n[o/2]=t[o+1];return{real:r,imag:n}}function URt(t){let r=Math.ceil(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function VRt(t){let r=Math.floor(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function GRt(t,r){let n=t[r*2],o=t[r*2+1];return{real:n,imag:o}}function WRt(t,r,n,o){t[o*2]=r,t[o*2+1]=n}function qRt(t,r){let n=new Float32Array(t/2),o=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){let s=(r?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),o[i]=Math.sin(s)}return{real:n,imag:o}}function HRt(t,r,n){let o=(n?2:-2)*Math.PI*(t/r),i=Math.cos(o),s=Math.sin(o);return{real:i,imag:s}}var s3e=N(()=>{"use strict";});function XRt(t,r){t=t.replace(/\s/g,"");let n=(t.length-t.replace(YRt,"").length)/Zse.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Zse}").`);let[o,i]=t.split(Zse);pe(o.indexOf(l3e)===-1,()=>`The ellipsis notation ("${l3e}") is not supported yet.`);let s=o.split(a3e),a=s.length;if(r!==a)throw new Error(`Expected ${a} input tensors, received ${r}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let l=[];for(let p=0;p<i.length;++p){let h=i[p];if(!s.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);l.indexOf(h)===-1&&l.push(h)}for(let p=0;p<o.length;++p){let h=o[p];l.indexOf(h)===-1&&h!==a3e&&l.push(h)}let u=new Array(s.length);for(let p=0;p<a;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let h=0;h<s[p].length;++h)u[p].push(l.indexOf(s[p][h]))}let c=l.length,f=i.length,d=[];for(let p=f;p<c;++p)d.push(p);return{allDims:l,summedDims:d,idDims:u}}function KRt(t,r){let n=new Array(t);n.fill(-1);for(let i=0;i<r.length;++i)n[r[i]]=i;let o=[];for(let i=0;i<t;++i)n[i]===-1&&o.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:o}}function ZRt(t,r,n){let o=new Array(t);for(let i=0;i<n.length;++i){let s=n[i].shape;for(let a=0;a<r[i].length;++a)o[r[i][a]]===void 0?o[r[i][a]]=s[a]:pe(o[r[i][a]]===s[a],()=>`Expected dimension ${o[r[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function QRt(t,r){let n=t,o=[],i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)o.push([]);let s=[];for(let a=0;a<n.length;++a){let l=n[a],u=e3t(r,l);for(let c of u)s.indexOf(c)===-1&&(o[a].push(c),s.push(c))}return{path:n,steps:o}}function JRt(t){return t.every((r,n)=>r===n)}function e3t(t,r){let n=[];for(let o=0;o<t.length;++o)(t[o].length===0||t[o].indexOf(r)!==-1||r===-1)&&n.push(o);return n}var Zse,YRt,a3e,l3e,u3e=N(()=>{"use strict";Js();Zse="->",YRt=/->/g,a3e=",",l3e="..."});function t3t(t,r,n=0){let o=[];if(typeof r=="number")pe(t.shape[n]%r===0,()=>"Number of splits must evenly divide the axis."),o=new Array(r).fill(t.shape[n]/r);else{let i=r.reduce((a,l)=>(l===-1&&(a+=1),a),0);pe(i<=1,()=>"There should be only one negative value in split array.");let s=r.indexOf(-1);if(s!==-1){let a=r.reduce((l,u)=>u>0?l+u:l);r[s]=t.shape[n]-a}pe(t.shape[n]===r.reduce((a,l)=>a+l),()=>"The sum of sizes must match the size of the axis dimension."),o=r}return o}var c3e=N(()=>{"use strict";Ze()});function r3t(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function n3t(t,r){return`indices(${t}, 0) is invalid: ${r} < 0`}function o3t(t,r,n){return`indices(${t}, 0) is invalid: ${r} >= ${n}`}var f3e=N(()=>{"use strict";});function i3t(t,r){return`only one output dimension may be -1, not both ${t} and ${r}`}function s3t(t,r){return`size ${t} must be non-negative, not ${r}`}function a3t(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function l3t(t,r){let n=on(t),o=on(r);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${o}. inputShape=${t} outputShape= ${r}`}function u3t(t,r){let n=on(t),o=on(r);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${o}. inputShape=${t} outputShape=${r}`}var d3e=N(()=>{"use strict";Ze();});function c3t(){return"segment ids must be >= 0"}function f3t(){return"segment ids are not increasing"}function d3t(t,r){return`Segment id ${t} out of range [0, ${r}), possibly because segmentIds input is not sorted.`}function p3t(t,r,n){return`Bad: indices[${t}] == ${r} out of range [0, ${n})`}var p3e=N(()=>{"use strict";});var Qse={};fn(Qse,{collectGatherOpShapeInfo:()=>g3t,computeOutShape:()=>m3t,segOpComputeOptimalWindowSize:()=>h3t});function h3t(t,r){let n=!1,o;for(t<=k7?(o=t,n=!0):o=rI(t,Math.floor(Math.sqrt(t)));!n;)o>r||o===t?n=!0:o=rI(t,o+1);return o}function m3t(t,r,n){let o=[],i=t.length;for(let s=0;s<i;s++)s!==r?o.push(t[s]):o.push(n);return o}function g3t(t,r,n,o){let i=r.shape.length,s=t.shape.length;if(o!==0&&(o<-i||o>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${o}`);if(o<0&&(o+=i),o>s)throw new Error(`batchDims (${o}) must be less than rank(x) (
    ${s}).`);if(n<o)throw new Error(`batchDims (${o}) must be less than or equal to axis (${n}).`);for(let d=0;d<o;++d)if(t.shape[d]!==r.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${r.shape[d]}.`);let a=t.shape[n],l=[],u=1,c=1,f=1;for(let d=0;d<o;++d)l.push(t.shape[d]),u*=t.shape[d];for(let d=o;d<n;d++)l.push(t.shape[d]),c*=t.shape[d];for(let d=o;d<i;d++)l.push(r.shape[d]);for(let d=n+1;d<s;d++)l.push(t.shape[d]),f*=t.shape[d];return{batchSize:u,sliceSize:f,outerSize:c,dimSize:a,outputShape:l}}var h3e=N(()=>{"use strict";Ze();Hse();});var ce={};fn(ce,{ERF_A1:()=>RRt,ERF_A2:()=>PRt,ERF_A3:()=>LRt,ERF_A4:()=>jRt,ERF_A5:()=>BRt,ERF_P:()=>ORt,PARALLELIZE_THRESHOLD:()=>k7,RowPartitionType:()=>Rx,SELU_SCALE:()=>Xse,SELU_SCALEALPHA:()=>Yse,applyActivation:()=>eE,assertAndGetBroadcastShape:()=>jr,assertAxesAreInnerMostDims:()=>nNt,assertParamsConsistent:()=>wRt,assignToTypedArray:()=>WRt,axesAreInnerMostDims:()=>Pie,calculateShapes:()=>kFe,checkEinsumDimSizes:()=>ZRt,checkPadOnDimRoundingMode:()=>go,combineLocations:()=>zNe,combineRaggedTensorToTensorShapes:()=>SRt,complexWithEvenIndex:()=>URt,complexWithOddIndex:()=>VRt,computeConv2DInfo:()=>BC,computeConv3DInfo:()=>dNe,computeDefaultPad:()=>Cie,computeDilation2DInfo:()=>rDt,computeOptimalWindowSize:()=>ARt,computeOutAndReduceShapes:()=>Lie,computeOutShape:()=>_Rt,computePool2DInfo:()=>Sie,computePool3DInfo:()=>nDt,convertConv2DDataFormat:()=>pNe,decodeEinsumEquation:()=>XRt,eitherStridesOrDilationsAreOne:()=>Ca,expandShapeToKeepDim:()=>pp,exponent:()=>HRt,exponents:()=>qRt,fromStringArrayToUint8:()=>b3t,fromUint8ToStringArray:()=>y3t,getAxesPermutation:()=>jie,getBroadcastDims:()=>LNe,getComplexWithIndex:()=>GRt,getEinsumComputePath:()=>QRt,getEinsumPermutation:()=>KRt,getFusedBiasGradient:()=>JC,getFusedDyActivation:()=>QC,getImageCenter:()=>kRt,getInnerMostAxes:()=>oNt,getPermuted:()=>DRt,getRaggedRank:()=>ERt,getReductionAxes:()=>oo,getReshaped:()=>IRt,getReshapedPermuted:()=>NRt,getRowPartitionTypesHelper:()=>CRt,getSliceBeginCoords:()=>MRt,getSliceSize:()=>FRt,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>r3t,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>n3t,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>o3t,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>a3t,getSparseReshapeInputOutputMismatchErrorMessage:()=>u3t,getSparseReshapeInputOutputMultipleErrorMessage:()=>l3t,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>i3t,getSparseReshapeNegativeOutputDimErrorMessage:()=>s3t,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>p3t,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>c3t,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>f3t,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>d3t,getUndoAxesPermutation:()=>N3,isIdentityPermutation:()=>JRt,log:()=>Rkt,mergeRealAndImagArrays:()=>$Rt,prepareAndValidate:()=>zRe,prepareSplitSize:()=>t3t,segment_util:()=>Qse,shouldFuse:()=>tE,slice_util:()=>Rs,splitRealAndImagArrays:()=>zRt,stridesOrDilationsArePositive:()=>C0,tupleValuesAreOne:()=>pd,upcastType:()=>qi,validateDefaultValueShape:()=>TRt,validateInput:()=>rD,validateUpdateShape:()=>mse,warn:()=>w0});function y3t(t){try{return t.map(r=>hI(r))}catch(r){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${r}`)}}function b3t(t){return t.map(r=>X1(r))}var m3e=N(()=>{"use strict";Ze();Ph();ko();e3e();Fs();aD();t3e();r3e();Hse();A7();gI();n3e();o3e();Use();X3();Kse();aD();i3e();m8();s3e();u3e();c3e();f3e();d3e();p3e();h3e();});var ka={};fn(ka,{nonMaxSuppressionV3Impl:()=>c7,nonMaxSuppressionV4Impl:()=>f7,nonMaxSuppressionV5Impl:()=>d7,whereImpl:()=>n7});var g3e=N(()=>{"use strict";Q3();bse();});var Jse=N(()=>{"use strict";FRe();PRe();ko();$Re();Use();X3();A7();g7();oi();KMe();Ze();ZRe();y7();b7();x7();v7();w7();Sw();qse();_7();eP();Je();gI();Fr();$h();QRe();Yc();m3();Ix();_a();JRe();m3e();Qoe();g3e();Toe();Ee();});var Mo={};fn(Mo,{Abs:()=>Ab,Acos:()=>Ig,Acosh:()=>Dg,AdadeltaOptimizer:()=>Cw,AdagradOptimizer:()=>Ew,AdamOptimizer:()=>Tw,AdamaxOptimizer:()=>Aw,Add:()=>lp,AddN:()=>kb,All:()=>_S,Any:()=>SS,ArgMax:()=>Ib,ArgMin:()=>Db,Asin:()=>Ng,Asinh:()=>Mg,Atan:()=>Fg,Atan2:()=>Rg,Atanh:()=>Og,AvgPool:()=>Nb,AvgPool3D:()=>Mb,AvgPool3DGrad:()=>ES,AvgPoolGrad:()=>CS,BatchMatMul:()=>Fb,BatchToSpaceND:()=>Ob,Bincount:()=>TS,BitwiseAnd:()=>R1,BroadcastArgs:()=>AS,BroadcastTo:()=>Roe,Cast:()=>Th,Ceil:()=>Pg,ClipByValue:()=>Lg,Complex:()=>kS,ComplexAbs:()=>Rb,Concat:()=>Pb,Conv2D:()=>Lb,Conv2DBackpropFilter:()=>IS,Conv2DBackpropInput:()=>jb,Conv3D:()=>Bb,Conv3DBackpropFilterV2:()=>DS,Conv3DBackpropInputV2:()=>NS,Cos:()=>jg,Cosh:()=>Bg,CropAndResize:()=>FS,Cumprod:()=>MS,Cumsum:()=>$b,DataStorage:()=>F1,DenseBincount:()=>OS,DepthToSpace:()=>RS,DepthwiseConv2dNative:()=>zb,DepthwiseConv2dNativeBackpropFilter:()=>PS,DepthwiseConv2dNativeBackpropInput:()=>LS,Diag:()=>jS,Dilation2D:()=>Ub,Dilation2DBackpropFilter:()=>sI,Dilation2DBackpropInput:()=>iI,Draw:()=>aI,ENV:()=>p8,Einsum:()=>BS,Elu:()=>zg,EluGrad:()=>$S,Environment:()=>oI,Equal:()=>P1,Erf:()=>Ug,Exp:()=>Vg,ExpandDims:()=>Vb,Expm1:()=>Gg,FFT:()=>zS,Fill:()=>US,FlipLeftRight:()=>VS,Floor:()=>Wg,FloorDiv:()=>qg,FromPixels:()=>lI,FusedBatchNorm:()=>Gb,FusedConv2D:()=>q1,FusedDepthwiseConv2D:()=>H1,GatherNd:()=>GS,GatherV2:()=>Wb,Greater:()=>L1,GreaterEqual:()=>Hg,IFFT:()=>WS,Identity:()=>Ah,Imag:()=>qS,IsFinite:()=>Yg,IsInf:()=>Xg,IsNan:()=>Kg,KernelBackend:()=>Tg,LRN:()=>Hb,LRNGrad:()=>YS,LeakyRelu:()=>qb,Less:()=>j1,LessEqual:()=>B1,LinSpace:()=>HS,Log:()=>Zg,Log1p:()=>Qg,LogSoftmax:()=>Poe,LogicalAnd:()=>$1,LogicalNot:()=>z1,LogicalOr:()=>U1,LogicalXor:()=>Dkt,LowerBound:()=>Nkt,MatrixBandPart:()=>Mkt,Max:()=>Yb,MaxPool:()=>Xb,MaxPool3D:()=>Kb,MaxPool3DGrad:()=>KS,MaxPoolGrad:()=>XS,MaxPoolWithArgmax:()=>ZS,Maximum:()=>Jg,Mean:()=>Zb,Min:()=>Qb,Minimum:()=>e0,MirrorPad:()=>Jb,Mod:()=>t0,MomentumOptimizer:()=>kw,Multinomial:()=>QS,Multiply:()=>r0,Neg:()=>ex,NonMaxSuppressionV3:()=>JS,NonMaxSuppressionV4:()=>eC,NonMaxSuppressionV5:()=>tC,NotEqual:()=>V1,OP_SCOPE_SUFFIX:()=>Joe,OneHot:()=>rx,OnesLike:()=>tx,Optimizer:()=>Aa,OptimizerConstructors:()=>lD,Pack:()=>nx,PadV2:()=>ox,Pool:()=>Fkt,Pow:()=>n0,Prelu:()=>ix,Prod:()=>sx,RMSPropOptimizer:()=>Iw,RaggedGather:()=>rC,RaggedRange:()=>nC,RaggedTensorToTensor:()=>oC,Range:()=>iC,Rank:()=>qoe,Real:()=>sC,RealDiv:()=>$g,Reciprocal:()=>o0,Reduction:()=>Mi,Relu:()=>i0,Relu6:()=>s0,Reshape:()=>ax,ResizeBilinear:()=>ux,ResizeBilinearGrad:()=>lC,ResizeNearestNeighbor:()=>lx,ResizeNearestNeighborGrad:()=>aC,Reverse:()=>cx,RotateWithOffset:()=>EC,Round:()=>a0,Rsqrt:()=>l0,SGDOptimizer:()=>P0,ScatterNd:()=>uC,SearchSorted:()=>fC,Select:()=>fx,Selu:()=>u0,Sigmoid:()=>p0,Sign:()=>d0,Sin:()=>c0,Sinh:()=>f0,Slice:()=>dx,Softmax:()=>gx,Softplus:()=>h0,SpaceToBatchND:()=>hx,SparseFillEmptyRows:()=>dC,SparseReshape:()=>pC,SparseSegmentMean:()=>hC,SparseSegmentSum:()=>mC,SparseToDense:()=>gC,SplitV:()=>mx,Sqrt:()=>m0,Square:()=>yC,SquaredDifference:()=>g0,StaticRegexReplace:()=>G1,Step:()=>v0,StridedSlice:()=>bC,StringNGrams:()=>xC,StringSplit:()=>vC,StringToHashBucketFast:()=>wC,Sub:()=>y0,Sum:()=>px,Tan:()=>b0,Tanh:()=>x0,Tensor:()=>tn,TensorBuffer:()=>Tn,TensorScatterUpdate:()=>cC,Tile:()=>kh,TopK:()=>_C,Transform:()=>SC,Transpose:()=>Ih,Unique:()=>CC,Unpack:()=>yx,UnsortedSegmentSum:()=>bx,UpperBound:()=>Okt,Variable:()=>_0,ZerosLike:()=>xx,_FusedMatMul:()=>W1,abs:()=>Ao,acos:()=>F8,acosh:()=>O8,add:()=>Ke,addN:()=>sNe,all:()=>EI,any:()=>jC,argMax:()=>cu,argMin:()=>R8,asin:()=>P8,asinh:()=>L8,atan:()=>j8,atan2:()=>B8,atanh:()=>$8,avgPool:()=>rw,avgPool3d:()=>U8,backend:()=>S3,backend_util:()=>ce,basicLSTMCell:()=>mNe,batchNorm:()=>E0,batchNorm2d:()=>V8,batchNorm3d:()=>G8,batchNorm4d:()=>W8,batchToSpaceND:()=>nw,bincount:()=>q8,bitwiseAnd:()=>_Ne,booleanMaskAsync:()=>TFt,broadcastArgs:()=>CNe,broadcastTo:()=>T0,broadcast_util:()=>oc,browser:()=>T7,buffer:()=>er,cast:()=>rt,ceil:()=>Y8,clipByValue:()=>ta,clone:()=>tc,complex:()=>ec,concat:()=>On,concat1d:()=>X8,concat2d:()=>K8,concat3d:()=>Z8,concat4d:()=>Q8,conv1d:()=>DI,conv2d:()=>nc,conv2dTranspose:()=>MI,conv3d:()=>eU,conv3dTranspose:()=>rU,copyRegisteredKernels:()=>jkt,cos:()=>ow,cosh:()=>FI,cosineWindow:()=>K3,cumprod:()=>zC,cumsum:()=>OI,customGrad:()=>Nl,denseBincount:()=>k3,deprecationWarn:()=>kDe,depthToSpace:()=>sU,depthwiseConv2d:()=>A0,device_util:()=>vx,diag:()=>RNe,dilation2d:()=>aU,disableDeprecationWarnings:()=>cIt,dispose:()=>Cr,disposeVariables:()=>fIt,div:()=>Tt,divNoNan:()=>lU,dot:()=>uU,dropout:()=>vse,einsum:()=>iw,elu:()=>k0,enableDebugMode:()=>uIt,enableProdMode:()=>lIt,enclosingPowerOfTwo:()=>wse,engine:()=>dd,ensureShape:()=>jNe,env:()=>Me,equal:()=>Dl,erf:()=>RI,euclideanNorm:()=>dU,exp:()=>_i,expandDims:()=>Ni,expm1:()=>pU,eye:()=>UC,fft:()=>bw,fill:()=>dp,findBackend:()=>mIt,findBackendFactory:()=>gIt,floor:()=>D0,floorDiv:()=>CI,fused:()=>_w,gather:()=>N0,gatherND:()=>PFt,gather_util:()=>zse,getBackend:()=>rie,getGradient:()=>g8,getKernel:()=>TC,getKernelsForBackend:()=>h3,grad:()=>XNe,grads:()=>KNe,greater:()=>si,greaterEqual:()=>fu,ifft:()=>Mx,imag:()=>aw,image:()=>sc,inTopKAsync:()=>BFt,io:()=>bd,irfft:()=>JI,isFinite:()=>mU,isInf:()=>gU,isNaN:()=>yU,keep:()=>Ms,kernel_impls:()=>ka,leakyRelu:()=>lw,less:()=>kx,lessEqual:()=>Xc,linalg:()=>Ise,linspace:()=>HNe,localResponseNormalization:()=>xU,log:()=>na,log1p:()=>cw,logSigmoid:()=>wU,logSoftmax:()=>$I,logSumExp:()=>fw,logicalAnd:()=>Ya,logicalNot:()=>dw,logicalOr:()=>zI,logicalXor:()=>CU,losses:()=>zOt,lowerBound:()=>tMe,matMul:()=>Vr,math:()=>$se,max:()=>ra,maxPool:()=>pw,maxPool3d:()=>kU,maxPoolWithArgmax:()=>oMe,maximum:()=>ic,mean:()=>bo,memory:()=>bI,meshgrid:()=>sMe,min:()=>Tx,minimum:()=>yd,mirrorPad:()=>IU,mod:()=>DU,moments:()=>qC,movingAverage:()=>IFt,mul:()=>we,multiRNNCell:()=>uMe,multinomial:()=>fMe,neg:()=>Zr,nextFrame:()=>uD,norm:()=>Ax,notEqual:()=>Bh,oneHot:()=>F0,ones:()=>Hi,onesLike:()=>Os,op:()=>se,outerProduct:()=>hMe,pad:()=>du,pad1d:()=>gMe,pad2d:()=>bMe,pad3d:()=>vMe,pad4d:()=>_Me,pool:()=>FU,pow:()=>Ha,prelu:()=>gw,print:()=>N8,prod:()=>RU,profile:()=>dIt,raggedGather:()=>CMe,raggedRange:()=>TMe,raggedTensorToTensor:()=>kMe,rand:()=>DMe,randomGamma:()=>ZMe,randomNormal:()=>XC,randomStandardNormal:()=>JMe,randomUniform:()=>Kc,randomUniformInt:()=>tFe,range:()=>O0,ready:()=>tie,real:()=>Dx,reciprocal:()=>UU,registerBackend:()=>_3,registerGradient:()=>Loe,registerKernel:()=>cI,relu:()=>Ta,relu6:()=>GI,removeBackend:()=>hIt,reshape:()=>Se,reverse:()=>bs,reverse1d:()=>oFe,reverse2d:()=>sFe,reverse3d:()=>lFe,reverse4d:()=>cFe,rfft:()=>xw,round:()=>WI,rsqrt:()=>qI,scalar:()=>Ot,scatterND:()=>NFt,scatter_util:()=>Y3,searchSorted:()=>j3,selu:()=>HI,separableConv2d:()=>YI,serialization:()=>tt,setBackend:()=>IDe,setPlatform:()=>yIt,setdiff1dAsync:()=>dFe,sigmoid:()=>Il,sign:()=>GU,signal:()=>$Ot,sin:()=>XI,sinh:()=>KI,slice:()=>zr,slice1d:()=>ZI,slice2d:()=>q3,slice3d:()=>QI,slice4d:()=>KC,slice_util:()=>Rs,softmax:()=>yw,softplus:()=>jh,spaceToBatchND:()=>mw,sparse:()=>UOt,sparseToDense:()=>OFt,spectral:()=>BOt,split:()=>xs,sqrt:()=>Zn,square:()=>qr,squaredDifference:()=>eD,squeeze:()=>Zc,stack:()=>as,step:()=>hp,stridedSlice:()=>XU,string:()=>VOt,sub:()=>wt,sum:()=>It,sumOutType:()=>K1,tan:()=>KU,tanh:()=>Rh,tensor:()=>ii,tensor1d:()=>ai,tensor2d:()=>Fx,tensor3d:()=>QU,tensor4d:()=>_Fe,tensor5d:()=>CFe,tensor6d:()=>TFe,tensorScatterUpdate:()=>IFe,tensor_util:()=>C8,test_util:()=>ise,tidy:()=>Pe,tile:()=>Ea,time:()=>pIt,topk:()=>JU,train:()=>Qc,transpose:()=>Gr,truncatedNormal:()=>nD,unique:()=>e7,unregisterGradient:()=>Lkt,unregisterKernel:()=>Pkt,unsortedSegmentSum:()=>oD,unstack:()=>Xa,upcastType:()=>qi,upperBound:()=>MFe,util:()=>Y,valueAndGrad:()=>ZNe,valueAndGrads:()=>QNe,variable:()=>r7,variableGrads:()=>P3,version_core:()=>Wse,where:()=>yo,whereAsync:()=>o7,zeros:()=>xo,zerosLike:()=>ar});var re=N(()=>{"use strict";nNe();bRe();Jse();yRe()});var pLe=N(()=>{"use strict";Fr();Je();Ce().prototype.abs=function(){return this.throwIfDisposed(),Ao(this)}});var hLe=N(()=>{"use strict";Fr();Je();Ce().prototype.acos=function(){return this.throwIfDisposed(),F8(this)}});var mLe=N(()=>{"use strict";Fr();Je();Ce().prototype.acosh=function(){return this.throwIfDisposed(),O8(this)}});var gLe=N(()=>{"use strict";zo();Je();Ce().prototype.add=function(t){return this.throwIfDisposed(),Ke(this,t)}});var yLe=N(()=>{"use strict";yie();Je();Ce().prototype.all=function(t,r){return this.throwIfDisposed(),EI(this,t,r)}});var bLe=N(()=>{"use strict";bie();Je();Ce().prototype.any=function(t,r){return this.throwIfDisposed(),jC(this,t,r)}});var xLe=N(()=>{"use strict";xie();Je();Ce().prototype.argMax=function(t){return this.throwIfDisposed(),cu(this,t)}});var vLe=N(()=>{"use strict";vie();Je();Ce().prototype.argMin=function(t){return this.throwIfDisposed(),R8(this,t)}});var wLe=N(()=>{"use strict";Yt();Je();Ze();Ce().prototype.asScalar=function(){return this.throwIfDisposed(),pe(this.size===1,()=>"The array must have only 1 element."),Se(this,[])}});var _Le=N(()=>{"use strict";Fr();Je();Ce().prototype.asType=function(t){return this.throwIfDisposed(),rt(this,t)}});var SLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as1D=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var CLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as2D=function(t,r){return this.throwIfDisposed(),Se(this,[t,r])}});var ELe=N(()=>{"use strict";Yt();Je();Ce().prototype.as3D=function(t,r,n){return this.throwIfDisposed(),Se(this,[t,r,n])}});var TLe=N(()=>{"use strict";Yt();Je();Ce().prototype.as4D=function(t,r,n,o){return this.throwIfDisposed(),Se(this,[t,r,n,o])}});var ALe=N(()=>{"use strict";Yt();Je();Ce().prototype.as5D=function(t,r,n,o,i){return this.throwIfDisposed(),Se(this,[t,r,n,o,i])}});var kLe=N(()=>{"use strict";Fr();Je();Ce().prototype.asin=function(){return this.throwIfDisposed(),P8(this)}});var ILe=N(()=>{"use strict";Fr();Je();Ce().prototype.asinh=function(){return this.throwIfDisposed(),L8(this)}});var DLe=N(()=>{"use strict";Fr();Je();Ce().prototype.atan=function(){return this.throwIfDisposed(),j8(this)}});var NLe=N(()=>{"use strict";wie();Je();Ce().prototype.atan2=function(t){return this.throwIfDisposed(),B8(this,t)}});var MLe=N(()=>{"use strict";Fr();Je();Ce().prototype.atanh=function(){return this.throwIfDisposed(),$8(this)}});var FLe=N(()=>{"use strict";z8();Je();Ce().prototype.avgPool=function(t,r,n,o){return this.throwIfDisposed(),rw(this,t,r,n,o)}});var OLe=N(()=>{"use strict";A3();Je();Ce().prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),nw(this,t,r)}});var RLe=N(()=>{"use strict";kI();Je();Ce().prototype.batchNorm=function(t,r,n,o,i){return this.throwIfDisposed(),E0(this,t,r,n,o,i)}});var PLe=N(()=>{"use strict";H8();Je();Ce().prototype.broadcastTo=function(t){return this.throwIfDisposed(),T0(this,t)}});var LLe=N(()=>{"use strict";Fr();Je();Ce().prototype.cast=function(t){return this.throwIfDisposed(),rt(this,t)}});var jLe=N(()=>{"use strict";Fr();Je();Ce().prototype.ceil=function(){return this.throwIfDisposed(),Y8(this)}});var BLe=N(()=>{"use strict";Fr();Je();Ce().prototype.clipByValue=function(t,r){return this.throwIfDisposed(),ta(this,t,r)}});var $Le=N(()=>{"use strict";md();Je();Ce().prototype.concat=function(t,r){return this.throwIfDisposed(),t instanceof tn&&(t=[t]),On([this,...t],r)}});var zLe=N(()=>{"use strict";Aie();Je();Ce().prototype.conv1d=function(t,r,n,o,i,s){return this.throwIfDisposed(),DI(this,t,r,n,o,i,s)}});var ULe=N(()=>{"use strict";kie();Je();Ce().prototype.conv2dTranspose=function(t,r,n,o,i){return this.throwIfDisposed(),MI(this,t,r,n,o,i)}});var VLe=N(()=>{"use strict";$C();Je();Ce().prototype.conv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),nc(this,t,r,n,o,i,s)}});var GLe=N(()=>{"use strict";Fr();Je();Ce().prototype.cos=function(){return this.throwIfDisposed(),ow(this)}});var WLe=N(()=>{"use strict";Fr();Je();Ce().prototype.cosh=function(){return this.throwIfDisposed(),FI(this)}});var qLe=N(()=>{"use strict";oU();Je();Ce().prototype.cumprod=function(t,r,n){return this.throwIfDisposed(),zC(this,t,r,n)}});var HLe=N(()=>{"use strict";iU();Je();Ce().prototype.cumsum=function(t,r,n){return this.throwIfDisposed(),OI(this,t,r,n)}});var YLe=N(()=>{"use strict";Nie();Je();Ce().prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),sU(this,t,r)}});var XLe=N(()=>{"use strict";I3();Je();Ce().prototype.depthwiseConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),A0(this,t,r,n,o,i,s)}});var KLe=N(()=>{"use strict";Mie();Je();Ce().prototype.dilation2d=function(t,r,n,o,i){return this.throwIfDisposed(),aU(this,t,r,n,o,i)}});var ZLe=N(()=>{"use strict";Fie();Je();Ce().prototype.divNoNan=function(t){return this.throwIfDisposed(),lU(this,t)}});var QLe=N(()=>{"use strict";Kn();Je();Ce().prototype.div=function(t){return this.throwIfDisposed(),Tt(this,t)}});var JLe=N(()=>{"use strict";Oie();Je();Ce().prototype.dot=function(t){return this.throwIfDisposed(),uU(this,t)}});var eje=N(()=>{"use strict";cU();Je();Ce().prototype.elu=function(){return this.throwIfDisposed(),k0(this)}});var tje=N(()=>{"use strict";D3();Je();Ce().prototype.equal=function(t){return this.throwIfDisposed(),Dl(this,t)}});var rje=N(()=>{"use strict";Fr();Je();Ce().prototype.erf=function(){return this.throwIfDisposed(),RI(this)}});var nje=N(()=>{"use strict";$ie();Je();Ce().prototype.euclideanNorm=function(t,r){return this.throwIfDisposed(),dU(this,t,r)}});var oje=N(()=>{"use strict";Fr();Je();Ce().prototype.exp=function(){return this.throwIfDisposed(),_i(this)}});var ije=N(()=>{"use strict";LI();Je();Ce().prototype.expandDims=function(t){return this.throwIfDisposed(),Ni(this,t)}});var sje=N(()=>{"use strict";Fr();Je();Ce().prototype.expm1=function(){return this.throwIfDisposed(),pU(this)}});var aje=N(()=>{"use strict";Fr();Je();Ce().prototype.fft=function(){return this.throwIfDisposed(),bw(this)}});var lje=N(()=>{"use strict";Yt();Je();Ce().prototype.flatten=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var uje=N(()=>{"use strict";Fr();Je();Ce().prototype.floor=function(){return this.throwIfDisposed(),D0(this)}});var cje=N(()=>{"use strict";M8();Je();Ce().prototype.floorDiv=function(t){return this.throwIfDisposed(),CI(this,t)}});var fje=N(()=>{"use strict";F3();Je();Ce().prototype.gather=function(t,r,n){return this.throwIfDisposed(),N0(this,t,r,n)}});var dje=N(()=>{"use strict";VC();Je();Ce().prototype.greaterEqual=function(t){return this.throwIfDisposed(),fu(this,t)}});var pje=N(()=>{"use strict";M0();Je();Ce().prototype.greater=function(t){return this.throwIfDisposed(),si(this,t)}});var hje=N(()=>{"use strict";Fr();Je();Ce().prototype.ifft=function(){return this.throwIfDisposed(),Mx(this)}});var mje=N(()=>{"use strict";Fr();Je();Ce().prototype.irfft=function(){return this.throwIfDisposed(),JI(this)}});var gje=N(()=>{"use strict";Fr();Je();Ce().prototype.isFinite=function(){return this.throwIfDisposed(),mU(this)}});var yje=N(()=>{"use strict";Fr();Je();Ce().prototype.isInf=function(){return this.throwIfDisposed(),gU(this)}});var bje=N(()=>{"use strict";Fr();Je();Ce().prototype.isNaN=function(){return this.throwIfDisposed(),yU(this)}});var xje=N(()=>{"use strict";bU();Je();Ce().prototype.leakyRelu=function(t){return this.throwIfDisposed(),lw(this,t)}});var vje=N(()=>{"use strict";uw();Je();Ce().prototype.lessEqual=function(t){return this.throwIfDisposed(),Xc(this,t)}});var wje=N(()=>{"use strict";R3();Je();Ce().prototype.less=function(t){return this.throwIfDisposed(),kx(this,t)}});var _je=N(()=>{"use strict";Uie();Je();Ce().prototype.localResponseNormalization=function(t,r,n,o){return this.throwIfDisposed(),xU(this,t,r,n,o)}});var Sje=N(()=>{"use strict";Fr();Je();Ce().prototype.logSigmoid=function(){return this.throwIfDisposed(),wU(this)}});var Cje=N(()=>{"use strict";Fr();Je();Ce().prototype.logSoftmax=function(t){return this.throwIfDisposed(),$I(this,t)}});var Eje=N(()=>{"use strict";_U();Je();Ce().prototype.logSumExp=function(t,r){return this.throwIfDisposed(),fw(this,t,r)}});var Tje=N(()=>{"use strict";Fr();Je();Ce().prototype.log=function(){return this.throwIfDisposed(),na(this)}});var Aje=N(()=>{"use strict";Fr();Je();Ce().prototype.log1p=function(){return this.throwIfDisposed(),cw(this)}});var kje=N(()=>{"use strict";GC();Je();Ce().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ya(this,t)}});var Ije=N(()=>{"use strict";L3();Je();Ce().prototype.logicalNot=function(){return this.throwIfDisposed(),dw(this)}});var Dje=N(()=>{"use strict";SU();Je();Ce().prototype.logicalOr=function(t){return this.throwIfDisposed(),zI(this,t)}});var Nje=N(()=>{"use strict";Wie();Je();Ce().prototype.logicalXor=function(t){return this.throwIfDisposed(),CU(this,t)}});var Mje=N(()=>{"use strict";Oh();Je();Ce().prototype.matMul=function(t,r,n){return this.throwIfDisposed(),Vr(this,t,r,n)}});var Fje=N(()=>{"use strict";AU();Je();Ce().prototype.maxPool=function(t,r,n,o){return this.throwIfDisposed(),pw(this,t,r,n,o)}});var Oje=N(()=>{"use strict";PI();Je();Ce().prototype.max=function(t,r){return this.throwIfDisposed(),ra(this,t,r)}});var Rje=N(()=>{"use strict";B3();Je();Ce().prototype.maximum=function(t){return this.throwIfDisposed(),ic(this,t)}});var Pje=N(()=>{"use strict";$3();Je();Ce().prototype.mean=function(t,r){return this.throwIfDisposed(),bo(this,t,r)}});var Lje=N(()=>{"use strict";fU();Je();Ce().prototype.min=function(t,r){return this.throwIfDisposed(),Tx(this,t,r)}});var jje=N(()=>{"use strict";z3();Je();Ce().prototype.minimum=function(t){return this.throwIfDisposed(),yd(this,t)}});var Bje=N(()=>{"use strict";qie();Je();Ce().prototype.mirrorPad=function(t,r){return this.throwIfDisposed(),IU(this,t,r)}});var $je=N(()=>{"use strict";Hie();Je();Ce().prototype.mod=function(t){return this.throwIfDisposed(),DU(this,t)}});var zje=N(()=>{"use strict";fr();Je();Ce().prototype.mul=function(t){return this.throwIfDisposed(),we(this,t)}});var Uje=N(()=>{"use strict";Fr();Je();Ce().prototype.neg=function(){return this.throwIfDisposed(),Zr(this)}});var Vje=N(()=>{"use strict";Fr();Je();Ce().prototype.norm=function(t,r,n){return this.throwIfDisposed(),Ax(this,t,r,n)}});var Gje=N(()=>{"use strict";NU();Je();Ce().prototype.notEqual=function(t){return this.throwIfDisposed(),Bh(this,t)}});var Wje=N(()=>{"use strict";MU();Je();Ce().prototype.oneHot=function(t,r=1,n=0){return this.throwIfDisposed(),F0(this,t,r,n)}});var qje=N(()=>{"use strict";Fr();Je();Ce().prototype.onesLike=function(){return this.throwIfDisposed(),Os(this)}});var Hje=N(()=>{"use strict";hw();Je();Ce().prototype.pad=function(t,r){return this.throwIfDisposed(),du(this,t,r)}});var Yje=N(()=>{"use strict";Yie();Je();Ce().prototype.pool=function(t,r,n,o,i,s){return this.throwIfDisposed(),FU(this,t,r,n,o,i,s)}});var Xje=N(()=>{"use strict";sw();Je();Ce().prototype.pow=function(t){return this.throwIfDisposed(),Ha(this,t)}});var Kje=N(()=>{"use strict";OU();Je();Ce().prototype.prelu=function(t){return this.throwIfDisposed(),gw(this,t)}});var Zje=N(()=>{"use strict";Xie();Je();Ce().prototype.prod=function(t,r){return this.throwIfDisposed(),RU(this,t,r)}});var Qje=N(()=>{"use strict";Fr();Je();Ce().prototype.reciprocal=function(){return this.throwIfDisposed(),UU(this)}});var Jje=N(()=>{"use strict";VI();Je();Ce().prototype.relu=function(){return this.throwIfDisposed(),Ta(this)}});var e4e=N(()=>{"use strict";VU();Je();Ce().prototype.relu6=function(){return this.throwIfDisposed(),GI(this)}});var t4e=N(()=>{"use strict";Yt();Je();Ce().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Se(this,t.shape)}});var r4e=N(()=>{"use strict";Yt();Je();Ce().prototype.reshape=function(t){return this.throwIfDisposed(),Se(this,t)}});var n4e=N(()=>{"use strict";Ase();Je();Ce().prototype.resizeBilinear=function(t,r,n){return this.throwIfDisposed(),p7(this,t,r,n)}});var o4e=N(()=>{"use strict";kse();Je();Ce().prototype.resizeNearestNeighbor=function(t,r,n){return this.throwIfDisposed(),h7(this,t,r,n)}});var i4e=N(()=>{"use strict";Nx();Je();Ce().prototype.reverse=function(t){return this.throwIfDisposed(),bs(this,t)}});var s4e=N(()=>{"use strict";Fr();Je();Ce().prototype.rfft=function(){return this.throwIfDisposed(),xw(this)}});var a4e=N(()=>{"use strict";Fr();Je();Ce().prototype.round=function(){return this.throwIfDisposed(),WI(this)}});var l4e=N(()=>{"use strict";Fr();Je();Ce().prototype.rsqrt=function(){return this.throwIfDisposed(),qI(this)}});var u4e=N(()=>{"use strict";use();Je();Ce().prototype.selu=function(){return this.throwIfDisposed(),HI(this)}});var c4e=N(()=>{"use strict";cse();Je();Ce().prototype.separableConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),YI(this,t,r,n,o,i,s)}});var f4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sigmoid=function(){return this.throwIfDisposed(),Il(this)}});var d4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sign=function(){return this.throwIfDisposed(),GU(this)}});var p4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sin=function(){return this.throwIfDisposed(),XI(this)}});var h4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sinh=function(){return this.throwIfDisposed(),KI(this)}});var m4e=N(()=>{"use strict";Fr();Je();Ce().prototype.slice=function(t,r){return this.throwIfDisposed(),zr(this,t,r)}});var g4e=N(()=>{"use strict";Fr();Je();Ce().prototype.softmax=function(t){return this.throwIfDisposed(),yw(this,t)}});var y4e=N(()=>{"use strict";Fr();Je();Ce().prototype.softplus=function(){return this.throwIfDisposed(),jh(this)}});var b4e=N(()=>{"use strict";U3();Je();Ce().prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),mw(this,t,r)}});var x4e=N(()=>{"use strict";ZC();Je();Ce().prototype.split=function(t,r){return this.throwIfDisposed(),xs(this,t,r)}});var v4e=N(()=>{"use strict";Fr();Je();Ce().prototype.sqrt=function(){return this.throwIfDisposed(),Zn(this)}});var w4e=N(()=>{"use strict";Fr();Je();Ce().prototype.square=function(){return this.throwIfDisposed(),qr(this)}});var _4e=N(()=>{"use strict";YU();Je();Ce().prototype.squaredDifference=function(t){return this.throwIfDisposed(),eD(this,t)}});var S4e=N(()=>{"use strict";H3();Je();Ce().prototype.squeeze=function(t){return this.throwIfDisposed(),Zc(this,t)}});var C4e=N(()=>{"use strict";vw();Je();Ce().prototype.stack=function(t,r){this.throwIfDisposed();let n=t instanceof tn?[this,t]:[this,...t];return as(n,r)}});var E4e=N(()=>{"use strict";Fr();Je();Ce().prototype.step=function(t){return this.throwIfDisposed(),hp(this,t)}});var T4e=N(()=>{"use strict";Fr();Je();Ce().prototype.stridedSlice=function(t,r,n,o,i,s,a,l){return this.throwIfDisposed(),XU(this,t,r,n,o,i,s,a,l)}});var A4e=N(()=>{"use strict";io();Je();Ce().prototype.sub=function(t){return this.throwIfDisposed(),wt(this,t)}});var k4e=N(()=>{"use strict";Di();Je();Ce().prototype.sum=function(t,r){return this.throwIfDisposed(),It(this,t,r)}});var I4e=N(()=>{"use strict";Fr();Je();Ce().prototype.tan=function(){return this.throwIfDisposed(),KU(this)}});var D4e=N(()=>{"use strict";Fr();Je();Ce().prototype.tanh=function(){return this.throwIfDisposed(),Rh(this)}});var N4e=N(()=>{"use strict";jI();Je();Ce().prototype.tile=function(t){return this.throwIfDisposed(),Ea(this,t)}});var M4e=N(()=>{"use strict";Fr();Je();Ce().prototype.toBool=function(){return this.throwIfDisposed(),rt(this,"bool")}});var F4e=N(()=>{"use strict";Fr();Je();Ce().prototype.toFloat=function(){return this.throwIfDisposed(),rt(this,"float32")}});var O4e=N(()=>{"use strict";Fr();Je();Ce().prototype.toInt=function(){return this.throwIfDisposed(),rt(this,"int32")}});var R4e=N(()=>{"use strict";gse();Je();Ce().prototype.topk=function(t,r){return this.throwIfDisposed(),JU(this,t,r)}});var P4e=N(()=>{"use strict";Ox();Je();Ce().prototype.transpose=function(t){return this.throwIfDisposed(),Gr(this,t)}});var L4e=N(()=>{"use strict";yse();Je();Ce().prototype.unique=function(t){return this.throwIfDisposed(),e7(this,t)}});var j4e=N(()=>{"use strict";t7();Je();Ce().prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),oD(this,t,r)}});var B4e=N(()=>{"use strict";iD();Je();Ce().prototype.unstack=function(t){return this.throwIfDisposed(),Xa(this,t)}});var $4e=N(()=>{"use strict";gd();Je();Ce().prototype.where=function(t,r){return this.throwIfDisposed(),yo(t,this,r)}});var z4e=N(()=>{"use strict";Fr();Je();Ce().prototype.zerosLike=function(){return this.throwIfDisposed(),ar(this)}});var I3t={};var oae=N(()=>{"use strict";pLe();hLe();mLe();gLe();yLe();bLe();xLe();vLe();wLe();_Le();SLe();CLe();ELe();TLe();ALe();kLe();ILe();DLe();NLe();MLe();FLe();OLe();RLe();PLe();LLe();jLe();BLe();$Le();zLe();ULe();VLe();GLe();WLe();qLe();HLe();YLe();XLe();KLe();ZLe();QLe();JLe();eje();tje();rje();nje();oje();ije();sje();aje();lje();uje();cje();fje();dje();pje();hje();mje();gje();yje();bje();xje();vje();wje();_je();Sje();Cje();Eje();Tje();Aje();kje();Ije();Dje();Nje();Mje();Fje();Oje();Rje();Pje();Lje();jje();Bje();$je();zje();Uje();Vje();Gje();Wje();qje();Hje();Yje();Xje();Kje();Zje();Qje();Jje();e4e();t4e();r4e();n4e();o4e();i4e();s4e();a4e();l4e();u4e();c4e();f4e();d4e();p4e();h4e();m4e();g4e();y4e();b4e();x4e();v4e();w4e();_4e();S4e();C4e();E4e();T4e();A4e();k4e();I4e();D4e();N4e();M4e();F4e();O4e();R4e();P4e();L4e();j4e();B4e();$4e();z4e();});var aGe=mt((sGe,dce)=>{"use strict";(function(t){typeof sGe=="object"&&typeof dce<"u"?dce.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).p5=t()})(function(){var t,r,n;return function o(i,s,a){function l(f,d){if(!s[f]){if(!i[f]){var p=typeof TR=="function"&&TR;if(!d&&p)return p(f,!0);if(u)return u(f,!0);throw(d=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",d}p=s[f]={exports:{}},i[f][0].call(p.exports,function(h){return l(i[f][1][h]||h)},p,p.exports,o,i,s,a)}return s[f].exports}for(var u=typeof TR=="function"&&TR,c=0;c<a.length;c++)l(a[c]);return l}({1:[function(o,i,s){"use strict";s.byteLength=function(g){var g=p(g),m=g[0],g=g[1];return 3*(m+g)/4-g},s.toByteArray=function(h){var m,g,b=p(h),y=b[0],b=b[1],x=new u(function(_,S){return 3*(_+S)/4-S}(y,b)),v=0,w=0<b?y-4:y;for(g=0;g<w;g+=4)m=l[h.charCodeAt(g)]<<18|l[h.charCodeAt(g+1)]<<12|l[h.charCodeAt(g+2)]<<6|l[h.charCodeAt(g+3)],x[v++]=m>>16&255,x[v++]=m>>8&255,x[v++]=255&m;return b===2&&(m=l[h.charCodeAt(g)]<<2|l[h.charCodeAt(g+1)]>>4,x[v++]=255&m),b===1&&(m=l[h.charCodeAt(g)]<<10|l[h.charCodeAt(g+1)]<<4|l[h.charCodeAt(g+2)]>>2,x[v++]=m>>8&255,x[v++]=255&m),x},s.fromByteArray=function(h){for(var m,g=h.length,y=g%3,b=[],x=0,v=g-y;x<v;x+=16383)b.push(function(w,_,S){for(var C,E=[],T=_;T<S;T+=3)C=(w[T]<<16&16711680)+(w[T+1]<<8&65280)+(255&w[T+2]),E.push(function(I){return a[I>>18&63]+a[I>>12&63]+a[I>>6&63]+a[63&I]}(C));return E.join("")}(h,x,v<x+16383?v:x+16383));return y==1?(m=h[g-1],b.push(a[m>>2]+a[m<<4&63]+"==")):y==2&&(m=(h[g-2]<<8)+h[g-1],b.push(a[m>>10]+a[m>>4&63]+a[m<<2&63]+"=")),b.join("")};for(var a=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=c.length;f<d;++f)a[f]=c[f],l[c.charCodeAt(f)]=f;function p(h){var m=h.length;if(0<m%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=h.indexOf("="),m=(h=h===-1?m:h)===m?0:4-h%4,[h,m]}l[45]=62,l[95]=63},{}],2:[function(o,i,s){},{}],3:[function(o,i,s){},{}],4:[function(o,i,s){(function(p){"use strict";var l=o("base64-js"),u=o("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(s.Buffer=p,s.SlowBuffer=function($){return+$!=$&&($=0),p.alloc(+$)},s.INSPECT_MAX_BYTES=50,2147483647);function d($){if(f<$)throw new RangeError('The value "'+$+'" is invalid for option "size"');return $=new Uint8Array($),Object.setPrototypeOf($,p.prototype),$}function p($,M,z){if(typeof $!="number")return h($,M,z);if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g($)}function h($,M,z){if(typeof $=="string"){var q=$,ee=M;if(p.isEncoding(ee=typeof ee=="string"&&ee!==""?ee:"utf8"))return ae=0|x(q,ee),Q=d(ae),Q=(q=Q.write(q,ee))!==ae?Q.slice(0,q):Q;throw new TypeError("Unknown encoding: "+ee)}if(ArrayBuffer.isView($))return y($);if($!=null){if(H($,ArrayBuffer)||$&&H($.buffer,ArrayBuffer)){var ae=$,q=M,Q=z;if(q<0||ae.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<q+(Q||0))throw new RangeError('"length" is outside of buffer bounds');return ae=q===void 0&&Q===void 0?new Uint8Array(ae):Q===void 0?new Uint8Array(ae,q):new Uint8Array(ae,q,Q),Object.setPrototypeOf(ae,p.prototype),ae}if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ee=$.valueOf&&$.valueOf(),ee!=null&&ee!==$)return p.from(ee,M,z);var le=function(ie){{var K,ge;if(p.isBuffer(ie))return K=0|b(ie.length),(ge=d(K)).length!==0&&ie.copy(ge,0,0,K),ge}if(ie.length!==void 0)return typeof ie.length!="number"||X(ie.length)?d(0):y(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return y(ie.data)}($);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return p.from($[Symbol.toPrimitive]("string"),M,z)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function m($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function g($){return m($),d($<0?0:0|b($))}function y($){for(var M=$.length<0?0:0|b($.length),z=d(M),q=0;q<M;q+=1)z[q]=255&$[q];return z}function b($){if(f<=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|$}function x($,M){if(p.isBuffer($))return $.length;if(ArrayBuffer.isView($)||H($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var z=$.length,q=2<arguments.length&&arguments[2]===!0;if(!q&&z===0)return 0;for(var ee=!1;;)switch(M){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return V($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return G($).length;default:if(ee)return q?-1:V($).length;M=(""+M).toLowerCase(),ee=!0}}function v($,M,z){var q,ee=!1;if((M=M===void 0||M<0?0:M)>this.length||(z=z===void 0||z>this.length?this.length:z)<=0||(z>>>=0)<=(M>>>=0))return"";for($=$||"utf8";;)switch($){case"hex":var ae=this,Te=M,Q=z,ge=ae.length;(!Q||Q<0||ge<Q)&&(Q=ge);for(var le="",ie=Te=!Te||Te<0?0:Te;ie<Q;++ie)le+=fe[ae[ie]];return le;case"utf8":case"utf-8":return T(this,M,z);case"ascii":var K=this,ge=M,ne=z,ye="";ne=Math.min(K.length,ne);for(var xe=ge;xe<ne;++xe)ye+=String.fromCharCode(127&K[xe]);return ye;case"latin1":case"binary":var De=this,Te=M,Fe=z,$e="";Fe=Math.min(De.length,Fe);for(var at=Te;at<Fe;++at)$e+=String.fromCharCode(De[at]);return $e;case"base64":return We=this,q=z,(jt=M)===0&&q===We.length?l.fromByteArray(We):l.fromByteArray(We.slice(jt,q));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var We=M,jt=z,_t=this.slice(We,jt),kt="",Rt=0;Rt<_t.length;Rt+=2)kt+=String.fromCharCode(_t[Rt]+256*_t[Rt+1]);return kt;default:if(ee)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),ee=!0}}function w($,M,z){var q=$[M];$[M]=$[z],$[z]=q}function _($,M,z,q,ee){if($.length===0)return-1;if(typeof z=="string"?(q=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),(z=(z=X(z=+z)?ee?0:$.length-1:z)<0?$.length+z:z)>=$.length){if(ee)return-1;z=$.length-1}else if(z<0){if(!ee)return-1;z=0}if(typeof M=="string"&&(M=p.from(M,q)),p.isBuffer(M))return M.length===0?-1:S($,M,z,q,ee);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?(ee?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call($,M,z):S($,[M],z,q,ee);throw new TypeError("val must be string, number or Buffer")}function S($,M,z,q,ee){var ae=1,Q=$.length,le=M.length;if(q!==void 0&&((q=String(q).toLowerCase())==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if($.length<2||M.length<2)return-1;Q/=ae=2,le/=2,z/=2}function ie(xe,De){return ae===1?xe[De]:xe.readUInt16BE(De*ae)}if(ee)for(var K=-1,ge=z;ge<Q;ge++)if(ie($,ge)===ie(M,K===-1?0:ge-K)){if(ge-(K=K===-1?ge:K)+1===le)return K*ae}else K!==-1&&(ge-=ge-K),K=-1;else for(ge=z=Q<z+le?Q-le:z;0<=ge;ge--){for(var ne=!0,ye=0;ye<le;ye++)if(ie($,ge+ye)!==ie(M,ye)){ne=!1;break}if(ne)return ge}return-1}function C($,M,z,q){return U(function(ee){for(var ae=[],Q=0;Q<ee.length;++Q)ae.push(255&ee.charCodeAt(Q));return ae}(M),$,z,q)}function E($,M,z,q){return U(function(ee,ae){for(var Q,le,ie=[],K=0;K<ee.length&&!((ae-=2)<0);++K)le=ee.charCodeAt(K),Q=le>>8,le=le%256,ie.push(le),ie.push(Q);return ie}(M,$.length-z),$,z,q)}function T($,M,z){z=Math.min($.length,z);for(var q=[],ee=M;ee<z;){var ae,Q,le,ie,K=$[ee],ge=null,ne=239<K?4:223<K?3:191<K?2:1;if(ee+ne<=z)switch(ne){case 1:K<128&&(ge=K);break;case 2:(192&(ae=$[ee+1]))==128&&127<(ie=(31&K)<<6|63&ae)&&(ge=ie);break;case 3:ae=$[ee+1],Q=$[ee+2],(192&ae)==128&&(192&Q)==128&&2047<(ie=(15&K)<<12|(63&ae)<<6|63&Q)&&(ie<55296||57343<ie)&&(ge=ie);break;case 4:ae=$[ee+1],Q=$[ee+2],le=$[ee+3],(192&ae)==128&&(192&Q)==128&&(192&le)==128&&65535<(ie=(15&K)<<18|(63&ae)<<12|(63&Q)<<6|63&le)&&ie<1114112&&(ge=ie)}ge===null?(ge=65533,ne=1):65535<ge&&(ge-=65536,q.push(ge>>>10&1023|55296),ge=56320|1023&ge),q.push(ge),ee+=ne}var ye=q,xe=ye.length;if(xe<=I)return String.fromCharCode.apply(String,ye);for(var De="",Te=0;Te<xe;)De+=String.fromCharCode.apply(String,ye.slice(Te,Te+=I));return De}s.kMaxLength=f,(p.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf($,M),$.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=h,Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function($,M,z){return M=M,z=z,m($=$),!($<=0)&&M!==void 0?typeof z=="string"?d($).fill(M,z):d($).fill(M):d($)},p.allocUnsafe=g,p.allocUnsafeSlow=g,p.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==p.prototype},p.compare=function($,M){if(H($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),H(M,Uint8Array)&&(M=p.from(M,M.offset,M.byteLength)),!p.isBuffer($)||!p.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===M)return 0;for(var z=$.length,q=M.length,ee=0,ae=Math.min(z,q);ee<ae;++ee)if($[ee]!==M[ee]){z=$[ee],q=M[ee];break}return z<q?-1:q<z?1:0},p.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function($,M){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return p.alloc(0);if(M===void 0)for(ee=M=0;ee<$.length;++ee)M+=$[ee].length;for(var z=p.allocUnsafe(M),q=0,ee=0;ee<$.length;++ee){var ae=$[ee];if(H(ae,Uint8Array)&&(ae=p.from(ae)),!p.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(z,q),q+=ae.length}return z},p.byteLength=x,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<$;M+=2)w(this,M,M+1);return this},p.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<$;M+=4)w(this,M,M+3),w(this,M+1,M+2);return this},p.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<$;M+=8)w(this,M,M+7),w(this,M+1,M+6),w(this,M+2,M+5),w(this,M+3,M+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?T(this,0,$):v.apply(this,arguments)},p.prototype.equals=function($){if(p.isBuffer($))return this===$||p.compare(this,$)===0;throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var M="",$=s.INSPECT_MAX_BYTES,M=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim();return this.length>$&&(M+=" ... "),"<Buffer "+M+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function($,M,z,q,ee){if(H($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),!p.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(z===void 0&&(z=$?$.length:0),q===void 0&&(q=0),ee===void 0&&(ee=this.length),(M=M===void 0?0:M)<0||z>$.length||q<0||ee>this.length)throw new RangeError("out of range index");if(ee<=q&&z<=M)return 0;if(ee<=q)return-1;if(z<=M)return 1;if(this===$)return 0;for(var ae=(ee>>>=0)-(q>>>=0),Q=(z>>>=0)-(M>>>=0),le=Math.min(ae,Q),ie=this.slice(q,ee),K=$.slice(M,z),ge=0;ge<le;++ge)if(ie[ge]!==K[ge]){ae=ie[ge],Q=K[ge];break}return ae<Q?-1:Q<ae?1:0},p.prototype.includes=function($,M,z){return this.indexOf($,M,z)!==-1},p.prototype.indexOf=function($,M,z){return _(this,$,M,z,!0)},p.prototype.lastIndexOf=function($,M,z){return _(this,$,M,z,!1)},p.prototype.write=function($,M,z,q){if(M===void 0)q="utf8",z=this.length,M=0;else if(z===void 0&&typeof M=="string")q=M,z=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(z)?(z>>>=0,q===void 0&&(q="utf8")):(q=z,z=void 0)}var ee=this.length-M;if((z===void 0||ee<z)&&(z=ee),0<$.length&&(z<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");q=q||"utf8";for(var ae,Q,le,ie=!1;;)switch(q){case"hex":var K=this,ge=$,ne=M,ye=z,xe=(ne=Number(ne)||0,K.length-ne);(!ye||xe<(ye=Number(ye)))&&(ye=xe),(xe=ge.length)/2<ye&&(ye=xe/2);for(var De=0;De<ye;++De){var Te=parseInt(ge.substr(2*De,2),16);if(X(Te))return De;K[ne+De]=Te}return De;case"utf8":case"utf-8":return xe=M,le=z,U(V($,(Q=this).length-xe),Q,xe,le);case"ascii":return C(this,$,M,z);case"latin1":case"binary":return C(this,$,M,z);case"base64":return Q=this,le=M,ae=z,U(G($),Q,le,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,$,M,z);default:if(ie)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),ie=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function k($,M,z){if($%1!=0||$<0)throw new RangeError("offset is not uint");if(z<$+M)throw new RangeError("Trying to access beyond buffer length")}function F($,M,z,q,ee,ae){if(!p.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee<M||M<ae)throw new RangeError('"value" argument is out of bounds');if(z+q>$.length)throw new RangeError("Index out of range")}function D($,M,z,q){if(z+q>$.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function L($,M,z,q,ee){return M=+M,z>>>=0,ee||D($,0,z,4),u.write($,M,z,q,23,4),z+4}function P($,M,z,q,ee){return M=+M,z>>>=0,ee||D($,0,z,8),u.write($,M,z,q,52,8),z+8}p.prototype.slice=function($,M){var z=this.length,z=(($=~~$)<0?($+=z)<0&&($=0):z<$&&($=z),(M=M===void 0?z:~~M)<0?(M+=z)<0&&(M=0):z<M&&(M=z),M<$&&(M=$),this.subarray($,M));return Object.setPrototypeOf(z,p.prototype),z},p.prototype.readUIntLE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=this[$],ee=1,ae=0;++ae<M&&(ee*=256);)q+=this[$+ae]*ee;return q},p.prototype.readUIntBE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=this[$+--M],ee=1;0<M&&(ee*=256);)q+=this[$+--M]*ee;return q},p.prototype.readUInt8=function($,M){return $>>>=0,M||k($,1,this.length),this[$]},p.prototype.readUInt16LE=function($,M){return $>>>=0,M||k($,2,this.length),this[$]|this[$+1]<<8},p.prototype.readUInt16BE=function($,M){return $>>>=0,M||k($,2,this.length),this[$]<<8|this[$+1]},p.prototype.readUInt32LE=function($,M){return $>>>=0,M||k($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},p.prototype.readUInt32BE=function($,M){return $>>>=0,M||k($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},p.prototype.readIntLE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=this[$],ee=1,ae=0;++ae<M&&(ee*=256);)q+=this[$+ae]*ee;return(ee*=128)<=q&&(q-=Math.pow(2,8*M)),q},p.prototype.readIntBE=function($,M,z){$>>>=0,M>>>=0,z||k($,M,this.length);for(var q=M,ee=1,ae=this[$+--q];0<q&&(ee*=256);)ae+=this[$+--q]*ee;return(ee*=128)<=ae&&(ae-=Math.pow(2,8*M)),ae},p.prototype.readInt8=function($,M){return $>>>=0,M||k($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},p.prototype.readInt16LE=function($,M){return $>>>=0,M||k($,2,this.length),M=this[$]|this[$+1]<<8,32768&M?4294901760|M:M},p.prototype.readInt16BE=function($,M){return $>>>=0,M||k($,2,this.length),M=this[$+1]|this[$]<<8,32768&M?4294901760|M:M},p.prototype.readInt32LE=function($,M){return $>>>=0,M||k($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},p.prototype.readInt32BE=function($,M){return $>>>=0,M||k($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},p.prototype.readFloatLE=function($,M){return $>>>=0,M||k($,4,this.length),u.read(this,$,!0,23,4)},p.prototype.readFloatBE=function($,M){return $>>>=0,M||k($,4,this.length),u.read(this,$,!1,23,4)},p.prototype.readDoubleLE=function($,M){return $>>>=0,M||k($,8,this.length),u.read(this,$,!0,52,8)},p.prototype.readDoubleBE=function($,M){return $>>>=0,M||k($,8,this.length),u.read(this,$,!1,52,8)},p.prototype.writeUIntLE=function($,M,z,q){$=+$,M>>>=0,z>>>=0,q||F(this,$,M,z,Math.pow(2,8*z)-1,0);var ee=1,ae=0;for(this[M]=255&$;++ae<z&&(ee*=256);)this[M+ae]=$/ee&255;return M+z},p.prototype.writeUIntBE=function($,M,z,q){$=+$,M>>>=0,z>>>=0,q||F(this,$,M,z,Math.pow(2,8*z)-1,0);var ee=z-1,ae=1;for(this[M+ee]=255&$;0<=--ee&&(ae*=256);)this[M+ee]=$/ae&255;return M+z},p.prototype.writeUInt8=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,1,255,0),this[M]=255&$,M+1},p.prototype.writeUInt16LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,65535,0),this[M]=255&$,this[M+1]=$>>>8,M+2},p.prototype.writeUInt16BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,65535,0),this[M]=$>>>8,this[M+1]=255&$,M+2},p.prototype.writeUInt32LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,4294967295,0),this[M+3]=$>>>24,this[M+2]=$>>>16,this[M+1]=$>>>8,this[M]=255&$,M+4},p.prototype.writeUInt32BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,4294967295,0),this[M]=$>>>24,this[M+1]=$>>>16,this[M+2]=$>>>8,this[M+3]=255&$,M+4},p.prototype.writeIntLE=function($,M,z,q){$=+$,M>>>=0,q||F(this,$,M,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=0,ae=1,Q=0;for(this[M]=255&$;++ee<z&&(ae*=256);)$<0&&Q===0&&this[M+ee-1]!==0&&(Q=1),this[M+ee]=($/ae>>0)-Q&255;return M+z},p.prototype.writeIntBE=function($,M,z,q){$=+$,M>>>=0,q||F(this,$,M,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=z-1,ae=1,Q=0;for(this[M+ee]=255&$;0<=--ee&&(ae*=256);)$<0&&Q===0&&this[M+ee+1]!==0&&(Q=1),this[M+ee]=($/ae>>0)-Q&255;return M+z},p.prototype.writeInt8=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,1,127,-128),this[M]=255&($=$<0?255+$+1:$),M+1},p.prototype.writeInt16LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,32767,-32768),this[M]=255&$,this[M+1]=$>>>8,M+2},p.prototype.writeInt16BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,2,32767,-32768),this[M]=$>>>8,this[M+1]=255&$,M+2},p.prototype.writeInt32LE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,2147483647,-2147483648),this[M]=255&$,this[M+1]=$>>>8,this[M+2]=$>>>16,this[M+3]=$>>>24,M+4},p.prototype.writeInt32BE=function($,M,z){return $=+$,M>>>=0,z||F(this,$,M,4,2147483647,-2147483648),this[M]=($=$<0?4294967295+$+1:$)>>>24,this[M+1]=$>>>16,this[M+2]=$>>>8,this[M+3]=255&$,M+4},p.prototype.writeFloatLE=function($,M,z){return L(this,$,M,!0,z)},p.prototype.writeFloatBE=function($,M,z){return L(this,$,M,!1,z)},p.prototype.writeDoubleLE=function($,M,z){return P(this,$,M,!0,z)},p.prototype.writeDoubleBE=function($,M,z){return P(this,$,M,!1,z)},p.prototype.copy=function($,M,z,q){if(!p.isBuffer($))throw new TypeError("argument should be a Buffer");if(z=z||0,q||q===0||(q=this.length),M>=$.length&&(M=$.length),(q=0<q&&q<z?z:q)===z||$.length===0||this.length===0)return 0;if((M=M||0)<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length);var ee=(q=$.length-M<q-z?$.length-M+z:q)-z;if(this===$&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(M,z,q);else if(this===$&&z<M&&M<q)for(var ae=ee-1;0<=ae;--ae)$[ae+M]=this[ae+z];else Uint8Array.prototype.set.call($,this.subarray(z,q),M);return ee},p.prototype.fill=function($,M,z,q){if(typeof $=="string"){if(typeof M=="string"?(q=M,M=0,z=this.length):typeof z=="string"&&(q=z,z=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!p.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var ee;$.length===1&&(ee=$.charCodeAt(0),(q==="utf8"&&ee<128||q==="latin1")&&($=ee))}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(M<0||this.length<M||this.length<z)throw new RangeError("Out of range index");var ae;if(!(z<=M))if(M>>>=0,z=z===void 0?this.length:z>>>0,typeof($=$||0)=="number")for(ae=M;ae<z;++ae)this[ae]=$;else{var Q=p.isBuffer($)?$:p.from($,q),le=Q.length;if(le===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ae=0;ae<z-M;++ae)this[ae+M]=Q[ae%le]}return this};var R=/[^+/0-9A-Za-z-_]/g;function V($,M){M=M||1/0;for(var z,q=$.length,ee=null,ae=[],Q=0;Q<q;++Q){if(55295<(z=$.charCodeAt(Q))&&z<57344){if(!ee){if(56319<z){-1<(M-=3)&&ae.push(239,191,189);continue}if(Q+1===q){-1<(M-=3)&&ae.push(239,191,189);continue}ee=z;continue}if(z<56320){-1<(M-=3)&&ae.push(239,191,189),ee=z;continue}z=65536+(ee-55296<<10|z-56320)}else ee&&-1<(M-=3)&&ae.push(239,191,189);if(ee=null,z<128){if(--M<0)break;ae.push(z)}else if(z<2048){if((M-=2)<0)break;ae.push(z>>6|192,63&z|128)}else if(z<65536){if((M-=3)<0)break;ae.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;ae.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ae}function G($){return l.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}($))}function U($,M,z,q){for(var ee=0;ee<q&&!(ee+z>=M.length||ee>=$.length);++ee)M[ee+z]=$[ee];return ee}function H($,M){return $ instanceof M||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===M.name}function X($){return $!=$}var fe=function(){for(var $="0123456789abcdef",M=new Array(256),z=0;z<16;++z)for(var q=16*z,ee=0;ee<16;++ee)M[q+ee]=$[z]+$[ee];return M}()}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(o,i,s){i.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l)||l===null)return l;throw TypeError("Can't set "+String(l)+" as a prototype")}},{"../internals/is-object":75}],7:[function(u,i,s){var a=u("../internals/well-known-symbol"),l=u("../internals/object-create"),u=u("../internals/object-define-property"),c=a("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),i.exports=function(d){f[c][d]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(o,i,s){"use strict";var a=o("../internals/string-multibyte").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},{"../internals/string-multibyte":124}],9:[function(o,i,s){i.exports=function(a,l,u){if(a instanceof l)return a;throw TypeError("Incorrect "+(u?u+" ":"")+"invocation")}},{}],10:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l))return l;throw TypeError(String(l)+" is not an object")}},{"../internals/is-object":75}],11:[function(o,i,s){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(D,i,s){"use strict";function a(P){return d(P)&&p(L,h(P))}var l,u=D("../internals/array-buffer-native"),c=D("../internals/descriptors"),f=D("../internals/global"),d=D("../internals/is-object"),p=D("../internals/has"),h=D("../internals/classof"),m=D("../internals/create-non-enumerable-property"),g=D("../internals/redefine"),y=D("../internals/object-define-property").f,b=D("../internals/object-get-prototype-of"),x=D("../internals/object-set-prototype-of"),I=D("../internals/well-known-symbol"),D=D("../internals/uid"),v=f.Int8Array,w=v&&v.prototype,_=f.Uint8ClampedArray,_=_&&_.prototype,S=v&&b(v),C=w&&b(w),E=Object.prototype,T=E.isPrototypeOf,I=I("toStringTag"),k=D("TYPED_ARRAY_TAG"),F=u&&!!x&&h(f.opera)!=="Opera",D=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(l in L)f[l]||(F=!1);if((!F||typeof S!="function"||S===Function.prototype)&&(S=function(){throw TypeError("Incorrect invocation")},F))for(l in L)f[l]&&x(f[l],S);if((!F||!C||C===E)&&(C=S.prototype,F))for(l in L)f[l]&&x(f[l].prototype,C);if(F&&b(_)!==C&&x(_,C),c&&!p(C,I))for(l in D=!0,y(C,I,{get:function(){return d(this)?this[k]:void 0}}),L)f[l]&&m(f[l],k,l);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:D&&k,aTypedArray:function(P){if(a(P))return P;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(P){if(x){if(T.call(S,P))return P}else for(var R in L)if(p(L,l)&&(R=f[R],R&&(P===R||T.call(R,P))))return P;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(P,R,V){if(c){if(V)for(var G in L)G=f[G],G&&p(G.prototype,P)&&delete G.prototype[P];C[P]&&!V||g(C,P,!V&&F&&w[P]||R)}},exportTypedArrayStaticMethod:function(P,R,V){var G,U;if(c){if(x){if(V)for(G in L)(U=f[G])&&p(U,P)&&delete U[P];if(S[P]&&!V)return;try{return g(S,P,!V&&F&&v[P]||R)}catch{}}for(G in L)!(U=f[G])||U[P]&&!V||g(U,P,R)}},isView:function(P){return P=h(P),P==="DataView"||p(L,P)},isTypedArray:a,TypedArray:S,TypedArrayPrototype:C}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(z,i,s){"use strict";function a(ne){return[255&ne]}function l(ne){return[255&ne,ne>>8&255]}function u(ne){return[255&ne,ne>>8&255,ne>>16&255,ne>>24&255]}function c(ne){return ne[3]<<24|ne[2]<<16|ne[1]<<8|ne[0]}function f(ne){return ae(ne,23,4)}function d(ne){return ae(ne,52,8)}function p(ne,ye){D(ne[H],ye,{get:function(){return R(this)[ye]}})}function h($e,ye,Fe,De){if(Fe=E(Fe),$e=R($e),Fe+ye>$e.byteLength)throw ee(X);var Te=R($e.buffer).bytes,Fe=Fe+$e.byteOffset,$e=Te.slice(Fe,Fe+ye);return De?$e:$e.reverse()}function m(ne,ye,xe,De,Te,Fe){if(xe=E(xe),ne=R(ne),xe+ye>ne.byteLength)throw ee(X);for(var $e=R(ne.buffer).bytes,at=xe+ne.byteOffset,We=De(+Te),jt=0;jt<ye;jt++)$e[at+jt]=We[Fe?jt:ye-jt-1]}var g=z("../internals/global"),y=z("../internals/descriptors"),b=z("../internals/array-buffer-native"),x=z("../internals/create-non-enumerable-property"),v=z("../internals/redefine-all"),w=z("../internals/fails"),_=z("../internals/an-instance"),S=z("../internals/to-integer"),C=z("../internals/to-length"),E=z("../internals/to-index"),T=z("../internals/ieee754"),I=z("../internals/object-get-prototype-of"),k=z("../internals/object-set-prototype-of"),F=z("../internals/object-get-own-property-names").f,D=z("../internals/object-define-property").f,L=z("../internals/array-fill"),P=z("../internals/set-to-string-tag"),z=z("../internals/internal-state"),R=z.get,V=z.set,G="ArrayBuffer",U="DataView",H="prototype",X="Wrong index",fe=g[G],$=fe,M=g[U],z=M&&M[H],q=Object.prototype,ee=g.RangeError,ae=T.pack,Q=T.unpack;if(b){if(!w(function(){fe(1)})||!w(function(){new fe(-1)})||w(function(){return new fe,new fe(1.5),new fe(NaN),fe.name!=G})){for(var le,g=($=function(xe){return _(this,$),new fe(E(xe))})[H]=fe[H],ie=F(fe),K=0;ie.length>K;)(le=ie[K++])in $||x($,le,fe[le]);g.constructor=$}k&&I(z)!==q&&k(z,q);var T=new M(new $(2)),ge=z.setInt8;T.setInt8(0,2147483648),T.setInt8(1,2147483649),!T.getInt8(0)&&T.getInt8(1)||v(z,{setInt8:function(ye,xe){ge.call(this,ye,xe<<24>>24)},setUint8:function(ye,xe){ge.call(this,ye,xe<<24>>24)}},{unsafe:!0})}else $=function(ne){_(this,$,G),ne=E(ne),V(this,{bytes:L.call(new Array(ne),0),byteLength:ne}),y||(this.byteLength=ne)},M=function(ne,Te,xe){_(this,M,U),_(ne,$,U);var De=R(ne).byteLength,Te=S(Te);if(Te<0||De<Te)throw ee("Wrong offset");if(De<Te+(xe=xe===void 0?De-Te:C(xe)))throw ee("Wrong length");V(this,{buffer:ne,byteLength:xe,byteOffset:Te}),y||(this.buffer=ne,this.byteLength=xe,this.byteOffset=Te)},y&&(p($,"byteLength"),p(M,"buffer"),p(M,"byteLength"),p(M,"byteOffset")),v(M[H],{getInt8:function(ne){return h(this,1,ne)[0]<<24>>24},getUint8:function(ne){return h(this,1,ne)[0]},getInt16:function(ne){return ne=h(this,2,ne,1<arguments.length?arguments[1]:void 0),(ne[1]<<8|ne[0])<<16>>16},getUint16:function(ne){return ne=h(this,2,ne,1<arguments.length?arguments[1]:void 0),ne[1]<<8|ne[0]},getInt32:function(ne){return c(h(this,4,ne,1<arguments.length?arguments[1]:void 0))},getUint32:function(ne){return c(h(this,4,ne,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ne){return Q(h(this,4,ne,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ne){return Q(h(this,8,ne,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ne,ye){m(this,1,ne,a,ye)},setUint8:function(ne,ye){m(this,1,ne,a,ye)},setInt16:function(ne,ye){m(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setUint16:function(ne,ye){m(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setInt32:function(ne,ye){m(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setUint32:function(ne,ye){m(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ne,ye){m(this,4,ne,f,ye,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ne,ye){m(this,8,ne,d,ye,2<arguments.length?arguments[2]:void 0)}});P($,G),P(M,U),i.exports={ArrayBuffer:$,DataView:M}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length"),c=Math.min;i.exports=[].copyWithin||function(y,d){var p=a(this),h=u(p.length),m=l(y,h),g=l(d,h),y=2<arguments.length?arguments[2]:void 0,b=c((y===void 0?h:l(y,h))-g,h-m),x=1;for(g<m&&m<g+b&&(x=-1,g+=b-1,m+=b-1);0<b--;)g in p?p[m]=p[g]:delete p[m],m+=x,g+=x;return p}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length");i.exports=function(c){for(var f=a(this),d=u(f.length),h=arguments.length,p=l(1<h?arguments[1]:void 0,d),h=2<h?arguments[2]:void 0,m=h===void 0?d:l(h,d);p<m;)f[p++]=c;return f}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(u,i,s){"use strict";var a=u("../internals/array-iteration").forEach,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("forEach"),u=u("forEach");i.exports=l&&u?[].forEach:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(o,i,s){"use strict";var a=o("../internals/function-bind-context"),l=o("../internals/to-object"),u=o("../internals/call-with-safe-iteration-closing"),c=o("../internals/is-array-iterator-method"),f=o("../internals/to-length"),d=o("../internals/create-property"),p=o("../internals/get-iterator-method");i.exports=function(_){var m,g,y,b,x,v,w=l(_),_=typeof this=="function"?this:Array,S=arguments.length,C=1<S?arguments[1]:void 0,E=C!==void 0,T=p(w),I=0;if(E&&(C=a(C,2<S?arguments[2]:void 0,2)),T==null||_==Array&&c(T))for(g=new _(m=f(w.length));I<m;I++)v=E?C(w[I],I):w[I],d(g,I,v);else for(x=(b=T.call(w)).next,g=new _;!(y=x.call(b)).done;I++)v=E?u(b,C,[y.value,I],!0):y.value,d(g,I,v);return g.length=I,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(o,i,s){function a(f){return function(d,p,h){var m,g=l(d),y=u(g.length),b=c(h,y);if(f&&p!=p){for(;b<y;)if((m=g[b++])!=m)return!0}else for(;b<y;b++)if((f||b in g)&&g[b]===p)return f||b||0;return!f&&-1}}var l=o("../internals/to-indexed-object"),u=o("../internals/to-length"),c=o("../internals/to-absolute-index");i.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(o,i,s){function a(h){var m=h==1,g=h==2,y=h==3,b=h==4,x=h==6,v=h==5||x;return function(w,_,S,C){for(var E,T,I=c(w),k=u(I),F=l(_,S,3),D=f(k.length),L=0,_=C||d,P=m?_(w,D):g?_(w,0):void 0;L<D;L++)if((v||L in k)&&(T=F(E=k[L],L,I),h)){if(m)P[L]=T;else if(T)switch(h){case 3:return!0;case 5:return E;case 6:return L;case 2:p.call(P,E)}else if(b)return!1}return x?-1:y||b?b:P}}var l=o("../internals/function-bind-context"),u=o("../internals/indexed-object"),c=o("../internals/to-object"),f=o("../internals/to-length"),d=o("../internals/array-species-create"),p=[].push;i.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(h,i,s){"use strict";var a=h("../internals/to-indexed-object"),l=h("../internals/to-integer"),u=h("../internals/to-length"),p=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),c=Math.min,f=[].lastIndexOf,d=!!f&&1/[1].lastIndexOf(1,-0)<0,p=p("lastIndexOf"),h=h("indexOf",{ACCESSORS:!0,1:0});i.exports=d||!p||!h?function(m){if(d)return f.apply(this,arguments)||0;var g=a(this),y=u(g.length),b=y-1;for((b=1<arguments.length?c(b,l(arguments[1])):b)<0&&(b=y+b);0<=b;b--)if(b in g&&g[b]===m)return b||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/engine-v8-version"),c=l("species");i.exports=function(f){return 51<=u||!a(function(){var d=[];return(d.constructor={})[c]=function(){return{foo:1}},d[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(o,i,s){"use strict";var a=o("../internals/fails");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(o,i,s){function a(p){throw p}var l=o("../internals/descriptors"),u=o("../internals/fails"),c=o("../internals/has"),f=Object.defineProperty,d={};i.exports=function(p,h){var m,g,y,b;return c(d,p)?d[p]:(m=[][p],g=!!c(h=h||{},"ACCESSORS")&&h.ACCESSORS,y=c(h,0)?h[0]:a,b=c(h,1)?h[1]:void 0,d[p]=!!m&&!u(function(){if(g&&!l)return!0;var x={length:-1};g?f(x,1,{enumerable:!0,get:a}):x[1]=1,m.call(x,y,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(o,i,s){function a(d){return function(p,h,m,g){l(h);var y=u(p),b=c(y),x=f(y.length),v=d?x-1:0,w=d?-1:1;if(m<2)for(;;){if(v in b){g=b[v],v+=w;break}if(v+=w,d?v<0:x<=v)throw TypeError("Reduce of empty array with no initial value")}for(;d?0<=v:v<x;v+=w)v in b&&(g=h(g,b[v],v,y));return g}}var l=o("../internals/a-function"),u=o("../internals/to-object"),c=o("../internals/indexed-object"),f=o("../internals/to-length");i.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/is-array"),u=o("../internals/well-known-symbol")("species");i.exports=function(c,f){var d;return new((d=l(c)&&(typeof(d=c.constructor)=="function"&&(d===Array||l(d.prototype))||a(d)&&(d=d[u])===null)?void 0:d)===void 0?Array:d)(f===0?0:f)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(o,i,s){var a=o("../internals/an-object");i.exports=function(l,u,c,f){try{return f?u(a(c)[0],c[1]):u(c)}catch(d){throw f=l.return,f!==void 0&&a(f.call(l)),d}}},{"../internals/an-object":10}],27:[function(o,i,s){var a=o("../internals/well-known-symbol")("iterator"),l=!1;try{var u=0,c={next:function(){return{done:!!u++}},return:function(){l=!0}};c[a]=function(){return this},Array.from(c,function(){throw 2})}catch{}i.exports=function(f,d){if(!d&&!l)return!1;var p=!1;try{var h={};h[a]=function(){return{next:function(){return{done:p=!0}}}},f(h)}catch{}return p}},{"../internals/well-known-symbol":149}],28:[function(o,i,s){var a={}.toString;i.exports=function(l){return a.call(l).slice(8,-1)}},{}],29:[function(o,i,s){var a=o("../internals/to-string-tag-support"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("toStringTag"),c=l(function(){return arguments}())=="Arguments";i.exports=a?l:function(f){var d;return f===void 0?"Undefined":f===null?"Null":typeof(d=function(p,h){try{return p[h]}catch{}}(f=Object(f),u))=="string"?d:c?l(f):(d=l(f))=="Object"&&typeof f.callee=="function"?"Arguments":d}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(y,i,s){"use strict";var a=y("../internals/object-define-property").f,l=y("../internals/object-create"),u=y("../internals/redefine-all"),c=y("../internals/function-bind-context"),f=y("../internals/an-instance"),d=y("../internals/iterate"),p=y("../internals/define-iterator"),h=y("../internals/set-species"),m=y("../internals/descriptors"),g=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),b=y.set,x=y.getterFor;i.exports={getConstructor:function(v,w,_,S){function C(k,F,D){var L,P=I(k),R=E(k,F);return R?R.value=D:(P.last=R={index:L=g(F,!0),key:F,value:D,previous:F=P.last,next:void 0,removed:!1},P.first||(P.first=R),F&&(F.next=R),m?P.size++:k.size++,L!=="F"&&(P.index[L]=R)),k}function E(L,F){var D,L=I(L),P=g(F);if(P!=="F")return L.index[P];for(D=L.first;D;D=D.next)if(D.key==F)return D}var T=v(function(k,F){f(k,T,w),b(k,{type:w,index:l(null),first:void 0,last:void 0,size:0}),m||(k.size=0),F!=null&&d(F,k[S],k,_)}),I=x(w);return u(T.prototype,{clear:function(){for(var k=I(this),F=k.index,D=k.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=void 0),delete F[D.index],D=D.next;k.first=k.last=void 0,m?k.size=0:this.size=0},delete:function(P){var F,D,L=I(this),P=E(this,P);return P&&(F=P.next,D=P.previous,delete L.index[P.index],P.removed=!0,D&&(D.next=F),F&&(F.previous=D),L.first==P&&(L.first=F),L.last==P&&(L.last=D),m?L.size--:this.size--),!!P},forEach:function(k){for(var F,D=I(this),L=c(k,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:D.first;)for(L(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(k){return!!E(this,k)}}),u(T.prototype,_?{get:function(k){return k=E(this,k),k&&k.value},set:function(k,F){return C(this,k===0?0:k,F)}}:{add:function(k){return C(this,k=k===0?0:k,k)}}),m&&a(T.prototype,"size",{get:function(){return I(this).size}}),T},setStrong:function(v,w,_){var S=w+" Iterator",C=x(w),E=x(S);p(v,w,function(T,I){b(this,{type:S,target:T,state:C(T),kind:I,last:void 0})},function(){for(var T=E(this),I=T.kind,k=T.last;k&&k.removed;)k=k.previous;return T.target&&(T.last=k=k?k.next:T.state.first)?I=="keys"?{value:k.key,done:!1}:I=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:T.target=void 0,done:!0}},_?"entries":"values",!_,!0),h(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(b,i,s){"use strict";function a(C){return C.frozen||(C.frozen=new l)}function l(){this.entries=[]}function u(C,E){return w(C.entries,function(T){return T[0]===E})}var c=b("../internals/redefine-all"),f=b("../internals/internal-metadata").getWeakData,d=b("../internals/an-object"),p=b("../internals/is-object"),h=b("../internals/an-instance"),m=b("../internals/iterate"),g=b("../internals/array-iteration"),y=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,v=b.getterFor,w=g.find,_=g.findIndex,S=0;l.prototype={get:function(C){if(C=u(this,C),C)return C[1]},has:function(C){return!!u(this,C)},set:function(C,E){var T=u(this,C);T?T[1]=E:this.entries.push([C,E])},delete:function(C){var E=_(this.entries,function(T){return T[0]===C});return~E&&this.entries.splice(E,1),!!~E}},i.exports={getConstructor:function(C,E,T,I){function k(L,P,R){var V=D(L),G=f(d(P),!0);return G===!0?a(V).set(P,R):G[V.id]=R,L}var F=C(function(L,P){h(L,F,E),x(L,{type:E,id:S++,frozen:void 0}),P!=null&&m(P,L[I],L,T)}),D=v(E);return c(F.prototype,{delete:function(L){var P,R=D(this);return!!p(L)&&((P=f(L))===!0?a(R).delete(L):P&&y(P,R.id)&&delete P[R.id])},has:function(L){var P,R=D(this);return!!p(L)&&((P=f(L))===!0?a(R).has(L):P&&y(P,R.id))}}),c(F.prototype,T?{get:function(L){var P,R=D(this);if(p(L))return(P=f(L))===!0?a(R).get(L):P?P[R.id]:void 0},set:function(L,P){return k(this,L,P)}}:{add:function(L){return k(this,L,!0)}}),F}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/redefine"),f=o("../internals/internal-metadata"),d=o("../internals/iterate"),p=o("../internals/an-instance"),h=o("../internals/is-object"),m=o("../internals/fails"),g=o("../internals/check-correctness-of-iteration"),y=o("../internals/set-to-string-tag"),b=o("../internals/inherit-if-required");i.exports=function(x,v,w){function _(G){var U=P[G];c(P,G,G=="add"?function(H){return U.call(this,H===0?0:H),this}:G=="delete"?function(H){return!(F&&!h(H))&&U.call(this,H===0?0:H)}:G=="get"?function(H){return F&&!h(H)?void 0:U.call(this,H===0?0:H)}:G=="has"?function(H){return!(F&&!h(H))&&U.call(this,H===0?0:H)}:function(H,X){return U.call(this,H===0?0:H,X),this})}var S,C,E,T,I,k=x.indexOf("Map")!==-1,F=x.indexOf("Weak")!==-1,D=k?"set":"add",L=l[x],P=L&&L.prototype,R=L,V={};return u(x,typeof L!="function"||!(F||P.forEach&&!m(function(){new L().entries().next()})))?(R=w.getConstructor(v,x,k,D),f.REQUIRED=!0):u(x,!0)&&(C=(S=new R)[D](F?{}:-0,1)!=S,E=m(function(){S.has(1)}),T=g(function(G){new L(G)}),I=!F&&m(function(){for(var G=new L,U=5;U--;)G[D](U,U);return!G.has(-0)}),T||(((R=v(function(G,U){return p(G,R,x),G=b(new L,G,R),U!=null&&d(U,G[D],G,k),G})).prototype=P).constructor=R),(E||I)&&(_("delete"),_("has"),k&&_("get")),(I||C)&&_(D),F&&P.clear&&delete P.clear),V[x]=R,a({global:!0,forced:R!=L},V),y(R,x),F||w.setStrong(R,x,k),R}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/own-keys"),u=o("../internals/object-get-own-property-descriptor"),c=o("../internals/object-define-property");i.exports=function(f,d){for(var p=l(d),h=c.f,m=u.f,g=0;g<p.length;g++){var y=p[g];a(f,y)||h(f,y,m(d,y))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(o,i,s){var a=o("../internals/well-known-symbol")("match");i.exports=function(l){var u=/./;try{"/./"[l](u)}catch{try{return u[a]=!1,"/./"[l](u)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(o,i,s){var a=o("../internals/require-object-coercible"),l=/"/g;i.exports=function(p,c,f,d){var p=String(a(p)),h="<"+c;return f!==""&&(h+=" "+f+'="'+String(d).replace(l,"&quot;")+'"'),h+">"+p+"</"+c+">"}},{"../internals/require-object-coercible":114}],37:[function(o,i,s){"use strict";function a(){return this}var l=o("../internals/iterators-core").IteratorPrototype,u=o("../internals/object-create"),c=o("../internals/create-property-descriptor"),f=o("../internals/set-to-string-tag"),d=o("../internals/iterators");i.exports=function(p,h,m){return h+=" Iterator",p.prototype=u(l,{next:c(1,m)}),f(p,h,!1,!0),d[h]=a,p}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=a?function(c,f,d){return l.f(c,f,u(1,d))}:function(c,f,d){return c[f]=d,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(o,i,s){i.exports=function(a,l){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:l}}},{}],40:[function(o,i,s){"use strict";var a=o("../internals/to-primitive"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=function(c,f,d){f=a(f),f in c?l.f(c,f,u(0,d)):c[f]=d}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(b,i,s){"use strict";function a(){return this}var l=b("../internals/export"),u=b("../internals/create-iterator-constructor"),c=b("../internals/object-get-prototype-of"),f=b("../internals/object-set-prototype-of"),d=b("../internals/set-to-string-tag"),p=b("../internals/create-non-enumerable-property"),h=b("../internals/redefine"),m=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),y=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,v=b.BUGGY_SAFARI_ITERATORS,w=m("iterator"),_="values",S="entries";i.exports=function(C,E,T,V,k,F,D){u(T,E,V);function L($){if($===k&&X)return X;if(!v&&$ in U)return U[$];switch($){case"keys":case _:case S:return function(){return new T(this,$)}}return function(){return new T(this)}}var P,R,V=E+" Iterator",G=!1,U=C.prototype,H=U[w]||U["@@iterator"]||k&&U[k],X=!v&&H||L(k),fe=E=="Array"&&U.entries||H;if(fe&&(fe=c(fe.call(new C)),x!==Object.prototype&&fe.next&&(g||c(fe)===x||(f?f(fe,x):typeof fe[w]!="function"&&p(fe,w,a)),d(fe,V,!0,!0),g&&(y[V]=a))),k==_&&H&&H.name!==_&&(G=!0,X=function(){return H.call(this)}),g&&!D||U[w]===X||p(U,w,X),y[E]=X,k)if(P={values:L(_),keys:F?X:L("keys"),entries:L(S)},D)for(R in P)!v&&!G&&R in U||h(U,R,P[R]);else l({target:E,proto:!0,forced:v||G},P);return P}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(o,i,s){var a=o("../internals/path"),l=o("../internals/has"),u=o("../internals/well-known-symbol-wrapped"),c=o("../internals/object-define-property").f;i.exports=function(f){var d=a.Symbol||(a.Symbol={});l(d,f)||c(d,f,{value:u.f(f)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(l,i,s){var a=l("../internals/global"),l=l("../internals/is-object"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(f){return c?u.createElement(f):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(o,i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(o)},{"../internals/engine-user-agent":47}],47:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(u,i,s){var a,l,c=u("../internals/global"),u=u("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?l=(a=c.split("."))[0]+a[1]:u&&(!(a=u.match(/Edge\/(\d+)/))||74<=a[1])&&(a=u.match(/Chrome\/(\d+)/))&&(l=a[1]),i.exports=l&&+l},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(o,i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/object-get-own-property-descriptor").f,u=o("../internals/create-non-enumerable-property"),c=o("../internals/redefine"),f=o("../internals/set-global"),d=o("../internals/copy-constructor-properties"),p=o("../internals/is-forced");i.exports=function(h,m){var g,y,b,x=h.target,v=h.global,w=h.stat,_=v?a:w?a[x]||f(x,{}):(a[x]||{}).prototype;if(_)for(g in m){if(y=m[g],b=h.noTargetGet?(b=l(_,g))&&b.value:_[g],!p(v?g:x+(w?".":"#")+g,h.forced)&&b!==void 0){if(typeof y==typeof b)continue;d(y,b)}(h.sham||b&&b.sham)&&u(y,"sham",!0),c(_,g,y,h)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(o,i,s){i.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(m,i,s){"use strict";m("../modules/es.regexp.exec");var a=m("../internals/redefine"),l=m("../internals/fails"),u=m("../internals/well-known-symbol"),c=m("../internals/regexp-exec"),f=m("../internals/create-non-enumerable-property"),d=u("species"),p=!l(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),h="a".replace(/./,"$0")==="$0",m=u("replace"),g=!!/./[m]&&/./[m]("a","$0")==="",y=!l(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});i.exports=function(b,x,v,w){var _,S,C=u(b),E=!l(function(){var I={};return I[C]=function(){return 7},""[b](I)!=7}),T=E&&!l(function(){var I=!1,k=/a/;return b==="split"&&((k={constructor:{}}).constructor[d]=function(){return k},k.flags="",k[C]=/./[C]),k.exec=function(){return I=!0,null},k[C](""),!I});E&&T&&(b!=="replace"||p&&h&&!g)&&(b!=="split"||y)||(_=/./[C],v=(T=v(C,""[b],function(I,k,F,D,L){return k.exec===c?E&&!L?{done:!0,value:_.call(k,F,D)}:{done:!0,value:I.call(F,k,D)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],S=T[1],a(String.prototype,b,v),a(RegExp.prototype,C,x==2?function(I,k){return S.call(I,this,k)}:function(I){return S.call(I,this)})),w&&f(RegExp.prototype[C],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(o,i,s){"use strict";function a(f,d,p,h,m,g,y,b){for(var x,v=m,w=0,_=!!y&&c(y,b,3);w<h;){if(w in p){if(x=_?_(p[w],w,d):p[w],0<g&&l(x))v=a(f,d,x,u(x.length),v,g-1)-1;else{if(9007199254740991<=v)throw TypeError("Exceed the acceptable array length");f[v]=x}v++}w++}return v}var l=o("../internals/is-array"),u=o("../internals/to-length"),c=o("../internals/function-bind-context");i.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(o,i,s){var a=o("../internals/a-function");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,d){return l.call(u,f,d)};case 3:return function(f,d,p){return l.call(u,f,d,p)}}return function(){return l.apply(u,arguments)}}},{"../internals/a-function":5}],56:[function(o,i,s){"use strict";var a=o("../internals/a-function"),l=o("../internals/is-object"),u=[].slice,c={};i.exports=Function.bind||function(f){var d=a(this),p=u.call(arguments,1),h=function(){var m=p.concat(u.call(arguments));if(this instanceof h){var g=d,y=m.length,b=m;if(!(y in c)){for(var x=[],v=0;v<y;v++)x[v]="a["+v+"]";c[y]=Function("C,a","return new C("+x.join(",")+")")}return c[y](g,b)}return d.apply(f,m)};return l(d.prototype)&&(h.prototype=d.prototype),h}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(o,i,s){function a(c){return typeof c=="function"?c:void 0}var l=o("../internals/path"),u=o("../internals/global");i.exports=function(c,f){return arguments.length<2?a(l[c])||a(u[c]):l[c]&&l[c][f]||u[c]&&u[c][f]}},{"../internals/global":60,"../internals/path":105}],58:[function(o,i,s){var a=o("../internals/classof"),l=o("../internals/iterators"),u=o("../internals/well-known-symbol")("iterator");i.exports=function(c){if(c!=null)return c[u]||c["@@iterator"]||l[a(c)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/get-iterator-method");i.exports=function(u){var c=l(u);if(typeof c!="function")throw TypeError(String(u)+" is not iterable");return a(c.call(u))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(o,i,s){(function(a){function l(u){return u&&u.Math==Math&&u}i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(o,i,s){var a={}.hasOwnProperty;i.exports=function(l,u){return a.call(l,u)}},{}],62:[function(o,i,s){i.exports={}},{}],63:[function(o,i,s){var a=o("../internals/global");i.exports=function(l,u){var c=a.console;c&&c.error&&(arguments.length===1?c.error(l):c.error(l,u))}},{"../internals/global":60}],64:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("document","documentElement")},{"../internals/get-built-in":57}],65:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/document-create-element");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(o,i,s){var a=Math.abs,l=Math.pow,u=Math.floor,c=Math.log,f=Math.LN2;i.exports={pack:function(d,p,v){var m,g,y,b=new Array(v),x=8*v-p-1,v=(1<<x)-1,w=v>>1,_=p===23?l(2,-24)-l(2,-77):0,S=d<0||d===0&&1/d<0?1:0,C=0;for((d=a(d))!=d||d===1/0?(g=d!=d?1:0,m=v):(m=u(c(d)/f),d*(y=l(2,-m))<1&&(m--,y*=2),2<=(d+=1<=m+w?_/y:_*l(2,1-w))*y&&(m++,y/=2),v<=m+w?(g=0,m=v):1<=m+w?(g=(d*y-1)*l(2,p),m+=w):(g=d*l(2,w-1)*l(2,p),m=0));8<=p;b[C++]=255&g,g/=256,p-=8);for(m=m<<p|g,x+=p;0<x;b[C++]=255&m,m/=256,x-=8);return b[--C]|=128*S,b},unpack:function(d,p){var h,m=d.length,v=8*m-p-1,g=(1<<v)-1,y=g>>1,b=v-7,x=m-1,v=d[x--],w=127&v;for(v>>=7;0<b;w=256*w+d[x],x--,b-=8);for(h=w&(1<<-b)-1,w>>=-b,b+=p;0<b;h=256*h+d[x],x--,b-=8);if(w===0)w=1-y;else{if(w===g)return h?NaN:v?-1/0:1/0;h+=l(2,p),w-=y}return(v?-1:1)*h*l(2,w-p)}}},{}],67:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/classof-raw"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/object-set-prototype-of");i.exports=function(u,c,f){return l&&typeof(c=c.constructor)=="function"&&c!==f&&a(c=c.prototype)&&c!==f.prototype&&l(u,c),u}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,i,s){var a=a("../internals/shared-store"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},{"../internals/shared-store":120}],70:[function(o,i,s){function a(b){f(b,h,{value:{objectID:"O"+ ++m,weakData:{}}})}var l=o("../internals/hidden-keys"),u=o("../internals/is-object"),c=o("../internals/has"),f=o("../internals/object-define-property").f,d=o("../internals/uid"),p=o("../internals/freezing"),h=d("meta"),m=0,g=Object.isExtensible||function(){return!0},y=i.exports={REQUIRED:!1,fastKey:function(b,x){if(!u(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!c(b,h)){if(!g(b))return"F";if(!x)return"E";a(b)}return b[h].objectID},getWeakData:function(b,x){if(!c(b,h)){if(!g(b))return!0;if(!x)return!1;a(b)}return b[h].weakData},onFreeze:function(b){return p&&y.REQUIRED&&g(b)&&!c(b,h)&&a(b),b}};l[h]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(v,i,s){var a,l,u,c,f,d,p,h,m=v("../internals/native-weak-map"),w=v("../internals/global"),g=v("../internals/is-object"),y=v("../internals/create-non-enumerable-property"),b=v("../internals/has"),x=v("../internals/shared-key"),v=v("../internals/hidden-keys"),w=w.WeakMap;p=m?(a=new w,l=a.get,u=a.has,c=a.set,f=function(_,S){return c.call(a,_,S),S},d=function(_){return l.call(a,_)||{}},function(_){return u.call(a,_)}):(v[h=x("state")]=!0,f=function(_,S){return y(_,h,S),S},d=function(_){return b(_,h)?_[h]:{}},function(_){return b(_,h)}),i.exports={set:f,get:d,has:p,enforce:function(_){return p(_)?d(_):f(_,{})},getterFor:function(_){return function(S){if(g(S)&&(S=d(S)).type===_)return S;throw TypeError("Incompatible receiver, "+_+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(o,i,s){var a=o("../internals/well-known-symbol"),l=o("../internals/iterators"),u=a("iterator"),c=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=Array.isArray||function(l){return a(l)=="Array"}},{"../internals/classof-raw":28}],74:[function(o,i,s){function a(h,m){return(h=f[c(h)])==p||h!=d&&(typeof m=="function"?l(m):!!m)}var l=o("../internals/fails"),u=/#|\.prototype\./,c=a.normalize=function(h){return String(h).replace(u,".").toLowerCase()},f=a.data={},d=a.NATIVE="N",p=a.POLYFILL="P";i.exports=a},{"../internals/fails":51}],75:[function(o,i,s){i.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(o,i,s){i.exports=!1},{}],77:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("match");i.exports=function(c){var f;return a(c)&&((f=c[u])!==void 0?!!f:l(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(o,i,s){function a(h,m){this.stopped=h,this.result=m}var l=o("../internals/an-object"),u=o("../internals/is-array-iterator-method"),c=o("../internals/to-length"),f=o("../internals/function-bind-context"),d=o("../internals/get-iterator-method"),p=o("../internals/call-with-safe-iteration-closing");(i.exports=function(h,m,g,y,b){var x,v,w,_,S,C,E=f(m,g,y?2:1);if(b)x=h;else{if(typeof(m=d(h))!="function")throw TypeError("Target is not iterable");if(u(m)){for(v=0,w=c(h.length);v<w;v++)if((_=y?E(l(C=h[v])[0],C[1]):E(h[v]))&&_ instanceof a)return _;return new a(!1)}x=m.call(h)}for(S=x.next;!(C=S.call(x)).done;)if(typeof(_=p(x,E,C.value,y))=="object"&&_&&_ instanceof a)return _;return new a(!1)}).stop=function(h){return new a(!0,h)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(d,i,s){"use strict";var a,l,u=d("../internals/object-get-prototype-of"),c=d("../internals/create-non-enumerable-property"),f=d("../internals/has"),p=d("../internals/well-known-symbol"),d=d("../internals/is-pure"),p=p("iterator"),h=!1;[].keys&&("next"in(l=[].keys())?(u=u(u(l)))!==Object.prototype&&(a=u):h=!0),a==null&&(a={}),d||f(a,p)||c(a,p,function(){return this}),i.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(o,i,s){i.exports={}},{}],81:[function(o,i,s){i.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(y,i,s){var a,l,u,c,f,d,p,h,m=y("../internals/global"),S=y("../internals/object-get-own-property-descriptor").f,_=y("../internals/classof-raw"),g=y("../internals/task").set,y=y("../internals/engine-is-ios"),b=m.MutationObserver||m.WebKitMutationObserver,x=m.process,v=m.Promise,w=_(x)=="process",_=S(m,"queueMicrotask"),S=_&&_.value;S||(a=function(){var C,E;for(w&&(C=x.domain)&&C.exit();l;){E=l.fn,l=l.next;try{E()}catch(T){throw l?c():u=void 0,T}}u=void 0,C&&C.enter()},c=w?function(){x.nextTick(a)}:b&&!y?(f=!0,d=document.createTextNode(""),new b(a).observe(d,{characterData:!0}),function(){d.data=f=!f}):v&&v.resolve?(p=v.resolve(void 0),h=p.then,function(){h.call(p,a)}):function(){g.call(m,a)}),i.exports=S||function(C){C={fn:C,next:void 0},u&&(u.next=C),l||(l=C,c()),u=C}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(o,i,s){o=o("../internals/global"),i.exports=o.Promise},{"../internals/global":60}],84:[function(o,i,s){o=o("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/is-pure"),c=l("iterator");i.exports=!a(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),d=f.searchParams,p="";return f.pathname="c%20d",d.forEach(function(h,m){d.delete("b"),p+=m+h}),u&&!f.toJSON||!d.sort||f.href!=="http://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||p!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(a,i,s){var l=a("../internals/global"),a=a("../internals/inspect-source"),l=l.WeakMap;i.exports=typeof l=="function"&&/native code/.test(a(l))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(o,i,s){"use strict";function a(u){var c,f;this.promise=new u(function(d,p){if(c!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");c=d,f=p}),this.resolve=l(c),this.reject=l(f)}var l=o("../internals/a-function");i.exports.f=function(u){return new a(u)}},{"../internals/a-function":5}],88:[function(o,i,s){var a=o("../internals/is-regexp");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":77}],89:[function(o,i,s){var a=o("../internals/global").isFinite;i.exports=Number.isFinite||function(l){return typeof l=="number"&&a(l)}},{"../internals/global":60}],90:[function(o,i,s){"use strict";var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/object-keys"),c=o("../internals/object-get-own-property-symbols"),f=o("../internals/object-property-is-enumerable"),d=o("../internals/to-object"),p=o("../internals/indexed-object"),h=Object.assign,m=Object.defineProperty;i.exports=!h||l(function(){var g,y,b,x;return!(!a||h({b:1},h(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},x="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,x.split("").forEach(function(v){y[v]=v}),h({},g)[b]!=7||u(h({},y)).join("")!=x)})?function(g,y){for(var b=d(g),x=arguments.length,v=1,w=c.f,_=f.f;v<x;)for(var S,C=p(arguments[v++]),E=w?u(C).concat(w(C)):u(C),T=E.length,I=0;I<T;)S=E[I++],a&&!_.call(C,S)||(b[S]=C[S]);return b}:h},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(m,i,s){function a(){}var l,u=m("../internals/an-object"),c=m("../internals/object-define-properties"),f=m("../internals/enum-bug-keys"),d=m("../internals/hidden-keys"),p=m("../internals/html"),h=m("../internals/document-create-element"),m=m("../internals/shared-key"),g="prototype",y="script",b=m("IE_PROTO"),x=function(w){return"<"+y+">"+w+"</"+y+">"},v=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch{}v=l?((w=l).write(x("")),w.close(),_=w.parentWindow.Object,w=null,_):(w=h("iframe"),_="java"+y+":",w.style.display="none",p.appendChild(w),w.src=String(_),(_=w.contentWindow.document).open(),_.write(x("document.F=Object")),_.close(),_.F);for(var w,_,S=f.length;S--;)delete v[g][f[S]];return v()};d[b]=!0,i.exports=Object.create||function(w,_){var S;return w!==null?(a[g]=u(w),S=new a,a[g]=null,S[b]=w):S=v(),_===void 0?S:c(S,_)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/an-object"),c=o("../internals/object-keys");i.exports=a?Object.defineProperties:function(f,d){u(f);for(var p,h=c(d),m=h.length,g=0;g<m;)l.f(f,p=h[g++],d[p]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/ie8-dom-define"),u=o("../internals/an-object"),c=o("../internals/to-primitive"),f=Object.defineProperty;s.f=a?f:function(d,p,h){if(u(d),p=c(p,!0),u(h),l)try{return f(d,p,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(d[p]=h.value),d}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-property-is-enumerable"),u=o("../internals/create-property-descriptor"),c=o("../internals/to-indexed-object"),f=o("../internals/to-primitive"),d=o("../internals/has"),p=o("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;s.f=a?h:function(m,g){if(m=c(m),g=f(g,!0),p)try{return h(m,g)}catch{}if(d(m,g))return u(!l.f.call(m,g),m[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(o,i,s){var a=o("../internals/to-indexed-object"),l=o("../internals/object-get-own-property-names").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(f){if(!c||u.call(f)!="[object Window]")return l(a(f));try{return l(f)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(o,i,s){s.f=Object.getOwnPropertySymbols},{}],98:[function(c,i,s){var a=c("../internals/has"),l=c("../internals/to-object"),u=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),f=u("IE_PROTO"),d=Object.prototype;i.exports=c?Object.getPrototypeOf:function(p){return p=l(p),a(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?d:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/to-indexed-object"),u=o("../internals/array-includes").indexOf,c=o("../internals/hidden-keys");i.exports=function(f,d){var p,h=l(f),m=0,g=[];for(p in h)!a(c,p)&&a(h,p)&&g.push(p);for(;d.length>m;)!a(h,p=d[m++])||~u(g,p)||g.push(p);return g}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys");i.exports=Object.keys||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(o,i,s){"use strict";var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(c){return c=l(this,c),!!c&&c.enumerable}:a},{}],102:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,c=!1,f={};try{(u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),c=f instanceof Array}catch{}return function(d,p){return a(d),l(p),c?u.call(d,p):d.__proto__=p,d}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(o,i,s){"use strict";var a=o("../internals/to-string-tag-support"),l=o("../internals/classof");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(o,i,s){var a=o("../internals/get-built-in"),l=o("../internals/object-get-own-property-names"),u=o("../internals/object-get-own-property-symbols"),c=o("../internals/an-object");i.exports=a("Reflect","ownKeys")||function(f){var d=l.f(c(f)),p=u.f;return p?d.concat(p(f)):d}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(o,i,s){o=o("../internals/global"),i.exports=o},{"../internals/global":60}],106:[function(o,i,s){i.exports=function(a){try{return{error:!1,value:a()}}catch(l){return{error:!0,value:l}}}},{}],107:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/is-object"),u=o("../internals/new-promise-capability");i.exports=function(c,f){return a(c),l(f)&&f.constructor===c?f:((0,(c=u.f(c)).resolve)(f),c.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(o,i,s){var a=o("../internals/redefine");i.exports=function(l,u,c){for(var f in u)a(l,f,u[f],c);return l}},{"../internals/redefine":109}],109:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/create-non-enumerable-property"),u=d("../internals/has"),c=d("../internals/set-global"),f=d("../internals/inspect-source"),d=d("../internals/internal-state"),p=d.get,h=d.enforce,m=String(String).split("String");(i.exports=function(g,y,b,_){var v=!!_&&!!_.unsafe,w=!!_&&!!_.enumerable,_=!!_&&!!_.noTargetGet;typeof b=="function"&&(typeof y!="string"||u(b,"name")||l(b,"name",y),h(b).source=m.join(typeof y=="string"?y:"")),g===a?w?g[y]=b:c(y,b):(v?!_&&g[y]&&(w=!0):delete g[y],w?g[y]=b:l(g,y,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(o,i,s){var a=o("./classof-raw"),l=o("./regexp-exec");i.exports=function(u,c){var f=u.exec;if(typeof f=="function"){if(f=f.call(u,c),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(c,i,s){"use strict";var a,l,u=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),f=RegExp.prototype.exec,d=String.prototype.replace,p=f,h=(a=/a/,l=/b*/g,f.call(a,"a"),f.call(l,"a"),a.lastIndex!==0||l.lastIndex!==0),m=c.UNSUPPORTED_Y||c.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;i.exports=p=h||g||m?function(y){var b,x,v,w,_=this,S=m&&_.sticky,C=u.call(_),E=_.source,T=0,I=y;return S&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),I=String(y).slice(_.lastIndex),0<_.lastIndex&&(!_.multiline||_.multiline&&y[_.lastIndex-1]!==`
`)&&(E="(?: "+E+")",I=" "+I,T++),x=new RegExp("^(?:"+E+")",C)),g&&(x=new RegExp("^"+E+"$(?!\\s)",C)),h&&(b=_.lastIndex),v=f.call(S?x:_,I),S?v?(v.input=v.input.slice(T),v[0]=v[0].slice(T),v.index=_.lastIndex,_.lastIndex+=v[0].length):_.lastIndex=0:h&&v&&(_.lastIndex=_.global?v.index+v[0].length:b),g&&v&&1<v.length&&d.call(v[0],x,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(v[w]=void 0)}),v}:p},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(o,i,s){"use strict";var a=o("../internals/an-object");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},{"../internals/an-object":10}],113:[function(o,i,s){"use strict";o=o("./fails");function a(l,u){return RegExp(l,u)}s.UNSUPPORTED_Y=o(function(){var l=a("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),s.BROKEN_CARET=o(function(){var l=a("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},{"./fails":51}],114:[function(o,i,s){i.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],115:[function(o,i,s){i.exports=Object.is||function(a,l){return a===l?a!==0||1/a==1/l:a!=a&&l!=l}},{}],116:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/create-non-enumerable-property");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(o,i,s){"use strict";var a=o("../internals/get-built-in"),l=o("../internals/object-define-property"),u=o("../internals/well-known-symbol"),c=o("../internals/descriptors"),f=u("species");i.exports=function(p){var p=a(p),h=l.f;c&&p&&!p[f]&&h(p,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(o,i,s){var a=o("../internals/object-define-property").f,l=o("../internals/has"),u=o("../internals/well-known-symbol")("toStringTag");i.exports=function(c,f,d){c&&!l(c=d?c:c.prototype,u)&&a(c,u,{configurable:!0,value:f})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(o,i,s){var a=o("../internals/shared"),l=o("../internals/uid"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(a,i,s){var u=a("../internals/global"),a=a("../internals/set-global"),l="__core-js_shared__",u=u[l]||a(l,{});i.exports=u},{"../internals/global":60,"../internals/set-global":116}],121:[function(o,i,s){var a=o("../internals/is-pure"),l=o("../internals/shared-store");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-function"),u=o("../internals/well-known-symbol")("species");i.exports=function(d,f){var d=a(d).constructor;return d===void 0||(d=a(d)[u])==null?f:l(d)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(o,i,s){var a=o("../internals/fails");i.exports=function(l){return a(function(){var u=""[l]('"');return u!==u.toLowerCase()||3<u.split('"').length})}},{"../internals/fails":51}],124:[function(o,i,s){function a(c){return function(h,m){var p,h=String(u(h)),m=l(m),g=h.length;return m<0||g<=m?c?"":void 0:(p=h.charCodeAt(m))<55296||56319<p||m+1===g||(g=h.charCodeAt(m+1))<56320||57343<g?c?h.charAt(m):p:c?h.slice(m,m+2):g-56320+(p-55296<<10)+65536}}var l=o("../internals/to-integer"),u=o("../internals/require-object-coercible");i.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},{"../internals/engine-user-agent":47}],126:[function(o,i,s){function a(d){return function(g,x,b){var g=String(c(g)),y=g.length,b=b===void 0?" ":String(b),x=l(x);return x<=y||b==""?g:((y=u.call(b,f((x=x-y)/b.length))).length>x&&(y=y.slice(0,x)),d?g+y:y+g)}}var l=o("../internals/to-length"),u=o("../internals/string-repeat"),c=o("../internals/require-object-coercible"),f=Math.ceil;i.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(o,i,s){"use strict";function a(v){return v+22+75*(v<26)}function l(v){var w,_=[],S=(v=function(H){for(var X=[],fe=0,$=H.length;fe<$;){var M,z=H.charCodeAt(fe++);55296<=z&&z<=56319&&fe<$?(64512&(M=H.charCodeAt(fe++)))==56320?X.push(((1023&z)<<10)+(1023&M)+65536):(X.push(z),fe--):X.push(z)}return X}(v)).length,C=128,E=0,T=72;for(D=0;D<v.length;D++)(w=v[D])<128&&_.push(x(w));var I=_.length,k=I;for(I&&_.push("-");k<S;){for(var F=u,D=0;D<v.length;D++)C<=(w=v[D])&&w<F&&(F=w);var L=k+1;if(F-C>b((u-E)/L))throw RangeError(g);for(E+=(F-C)*L,C=F,D=0;D<v.length;D++){if((w=v[D])<C&&++E>u)throw RangeError(g);if(w==C){for(var P=E,R=c;;R+=c){var V=R<=T?1:T+f<=R?f:R-T;if(P<V)break;var G=P-V,U=c-V;_.push(x(a(V+G%U))),P=b(G/U)}_.push(x(a(P))),T=function(H,X,fe){var $=0;for(H=fe?b(H/p):H>>1,H+=b(H/X);y*f>>1<H;$+=c)H=b(H/y);return b($+(y+1)*H/(H+d))}(E,L,k==I),E=0,++k}}++E,++C}return _.join("")}var u=2147483647,c=36,f=26,d=38,p=700,h=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",y=c-1,b=Math.floor,x=String.fromCharCode;i.exports=function(v){for(var w,_=[],S=v.toLowerCase().replace(m,".").split("."),C=0;C<S.length;C++)w=S[C],_.push(h.test(w)?"xn--"+l(w):w);return _.join(".")}},{}],128:[function(o,i,s){"use strict";var a=o("../internals/to-integer"),l=o("../internals/require-object-coercible");i.exports="".repeat||function(u){var c=String(l(this)),f="",d=a(u);if(d<0||d==1/0)throw RangeError("Wrong number of repetitions");for(;0<d;(d>>>=1)&&(c+=c))1&d&&(f+=c);return f}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/whitespaces");i.exports=function(u){return a(function(){return!!l[u]()||"\u200B\x85\u180E"[u]()!="\u200B\x85\u180E"||l[u].name!==u})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(u,i,s){function a(d){return function(p){return p=String(l(p)),1&d&&(p=p.replace(c,"")),p=2&d?p.replace(f,""):p}}var l=u("../internals/require-object-coercible"),u="["+u("../internals/whitespaces")+"]",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$");i.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(y,i,s){function a(k){return function(){I(k)}}function l(k){I(k.data)}function u(k){f.postMessage(k+"",b.protocol+"//"+b.host)}var c,f=y("../internals/global"),d=y("../internals/fails"),p=y("../internals/classof-raw"),h=y("../internals/function-bind-context"),m=y("../internals/html"),g=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),b=f.location,x=f.setImmediate,v=f.clearImmediate,w=f.process,_=f.MessageChannel,S=f.Dispatch,C=0,E={},T="onreadystatechange",I=function(k){var F;E.hasOwnProperty(k)&&(F=E[k],delete E[k],F())};x&&v||(x=function(k){for(var F=[],D=1;D<arguments.length;)F.push(arguments[D++]);return E[++C]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,F)},c(C),C},v=function(k){delete E[k]},p(w)=="process"?c=function(k){w.nextTick(a(k))}:S&&S.now?c=function(k){S.now(a(k))}:_&&!y?(y=(p=new _).port2,p.port1.onmessage=l,c=h(y.postMessage,y,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||d(u)||b.protocol==="file:"?c=T in g("script")?function(k){m.appendChild(g("script"))[T]=function(){m.removeChild(this),I(k)}}:function(k){setTimeout(a(k),0)}:(c=u,f.addEventListener("message",l,!1))),i.exports={set:x,clear:v}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=function(l){if(typeof l!="number"&&a(l)!="Number")throw TypeError("Incorrect invocation");return+l}},{"../internals/classof-raw":28}],133:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.max,u=Math.min;i.exports=function(c,f){return c=a(c),c<0?l(c+f,0):u(c,f)}},{"../internals/to-integer":136}],134:[function(o,i,s){var a=o("../internals/to-integer"),l=o("../internals/to-length");i.exports=function(c){if(c===void 0)return 0;var c=a(c),f=l(c);if(c!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(o,i,s){var a=o("../internals/indexed-object"),l=o("../internals/require-object-coercible");i.exports=function(u){return a(l(u))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(o,i,s){var a=Math.ceil,l=Math.floor;i.exports=function(u){return isNaN(u=+u)?0:(0<u?l:a)(u)}},{}],137:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.min;i.exports=function(u){return 0<u?l(a(u),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(o,i,s){var a=o("../internals/require-object-coercible");i.exports=function(l){return Object(a(l))}},{"../internals/require-object-coercible":114}],139:[function(o,i,s){var a=o("../internals/to-positive-integer");i.exports=function(l,u){if(l=a(l),l%u)throw RangeError("Wrong offset");return l}},{"../internals/to-positive-integer":140}],140:[function(o,i,s){var a=o("../internals/to-integer");i.exports=function(l){if(l=a(l),l<0)throw RangeError("The argument can't be less than 0");return l}},{"../internals/to-integer":136}],141:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l,u){if(!a(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(o,i,s){var a={};a[o("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(o,i,s){"use strict";function a(Te,Fe){for(var $e=0,at=Fe.length,We=new(ne(Te))(at);$e<at;)We[$e]=Fe[$e++];return We}function l(Te,Fe){M(Te,Fe,{get:function(){return fe(this)[Fe]}})}function u(Te){return Te instanceof ae||(Te=I(Te))=="ArrayBuffer"||Te=="SharedArrayBuffer"}function c(Te,Fe){return ye(Te)&&typeof Fe!="symbol"&&Fe in Te&&String(+Fe)==String(Fe)}function f(Te,Fe){return c(Te,Fe=E(Fe,!0))?v(2,Te[Fe]):z(Te,Fe)}function d(Te,Fe,$e){return!(c(Te,Fe=E(Fe,!0))&&k($e)&&T($e,"value"))||T($e,"get")||T($e,"set")||$e.configurable||T($e,"writable")&&!$e.writable||T($e,"enumerable")&&!$e.enumerable?M(Te,Fe,$e):(Te[Fe]=$e.value,Te)}var p=o("../internals/export"),h=o("../internals/global"),m=o("../internals/descriptors"),g=o("../internals/typed-array-constructors-require-wrappers"),y=o("../internals/array-buffer-view-core"),b=o("../internals/array-buffer"),x=o("../internals/an-instance"),v=o("../internals/create-property-descriptor"),w=o("../internals/create-non-enumerable-property"),_=o("../internals/to-length"),S=o("../internals/to-index"),C=o("../internals/to-offset"),E=o("../internals/to-primitive"),T=o("../internals/has"),I=o("../internals/classof"),k=o("../internals/is-object"),F=o("../internals/object-create"),D=o("../internals/object-set-prototype-of"),L=o("../internals/object-get-own-property-names").f,P=o("../internals/typed-array-from"),R=o("../internals/array-iteration").forEach,V=o("../internals/set-species"),G=o("../internals/object-define-property"),U=o("../internals/object-get-own-property-descriptor"),H=o("../internals/internal-state"),X=o("../internals/inherit-if-required"),fe=H.get,$=H.set,M=G.f,z=U.f,q=Math.round,ee=h.RangeError,ae=b.ArrayBuffer,Q=b.DataView,le=y.NATIVE_ARRAY_BUFFER_VIEWS,ie=y.TYPED_ARRAY_TAG,K=y.TypedArray,ge=y.TypedArrayPrototype,ne=y.aTypedArrayConstructor,ye=y.isTypedArray,xe="BYTES_PER_ELEMENT",De="Wrong length";m?(le||(U.f=f,G.f=d,l(ge,"buffer"),l(ge,"byteOffset"),l(ge,"byteLength"),l(ge,"length")),p({target:"Object",stat:!0,forced:!le},{getOwnPropertyDescriptor:f,defineProperty:d}),i.exports=function(Be,Fe,$e){function at(Ge,de){M(Ge,de,{get:function(){var me=this,oe=de;return(me=fe(me)).view[_t](oe*We+me.byteOffset,!0)},set:function(me){var oe=this,be=de;oe=fe(oe),$e&&(me=(me=q(me))<0?0:255<me?255:255&me),oe.view[kt](be*We+oe.byteOffset,me,!0)},enumerable:!0})}var We=Be.match(/\d+$/)[0]/8,jt=Be+($e?"Clamped":"")+"Array",_t="get"+Be,kt="set"+Be,Rt=h[jt],Mt=Rt,Be=Mt&&Mt.prototype,ut={};le?g&&(Mt=Fe(function(Ge,de,me,oe){return x(Ge,Mt,jt),X(k(de)?u(de)?oe!==void 0?new Rt(de,C(me,We),oe):me!==void 0?new Rt(de,C(me,We)):new Rt(de):ye(de)?a(Mt,de):P.call(Mt,de):new Rt(S(de)),Ge,Mt)}),D&&D(Mt,K),R(L(Rt),function(Ge){Ge in Mt||w(Mt,Ge,Rt[Ge])}),Mt.prototype=Be):(Mt=Fe(function(Ge,de,me,oe){x(Ge,Mt,jt);var be,Oe,Ve=0,Qe=0;if(k(de)){if(!u(de))return ye(de)?a(Mt,de):P.call(Mt,de);var St=de,Qe=C(me,We),me=de.byteLength;if(oe===void 0){if(me%We||(be=me-Qe)<0)throw ee(De)}else if(me<(be=_(oe)*We)+Qe)throw ee(De);Oe=be/We}else Oe=S(de),St=new ae(be=Oe*We);for($(Ge,{buffer:St,byteOffset:Qe,byteLength:be,length:Oe,view:new Q(St)});Ve<Oe;)at(Ge,Ve++)}),D&&D(Mt,K),Be=Mt.prototype=F(ge)),Be.constructor!==Mt&&w(Be,"constructor",Mt),ie&&w(Be,ie,jt),ut[jt]=Mt,p({global:!0,forced:Mt!=Rt,sham:!le},ut),xe in Mt||w(Mt,xe,We),xe in Be||w(Be,xe,We),V(jt)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(c,i,s){var a=c("../internals/global"),l=c("../internals/fails"),u=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=a.ArrayBuffer,d=a.Int8Array;i.exports=!c||!l(function(){d(1)})||!l(function(){new d(-1)})||!u(function(p){new d,new d(null),new d(1.5),new d(p)},!0)||l(function(){return new d(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(o,i,s){var a=o("../internals/to-object"),l=o("../internals/to-length"),u=o("../internals/get-iterator-method"),c=o("../internals/is-array-iterator-method"),f=o("../internals/function-bind-context"),d=o("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(p){var h,m,g,y,b,x,v=a(p),w=arguments.length,_=1<w?arguments[1]:void 0,S=_!==void 0,C=u(v);if(C!=null&&!c(C))for(x=(b=C.call(v)).next,v=[];!(y=x.call(b)).done;)v.push(y.value);for(S&&2<w&&(_=f(_,arguments[2],2)),m=l(v.length),g=new(d(this))(m),h=0;h<m;h++)g[h]=S?_(v[h],h):v[h];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(o,i,s){var a=0,l=Math.random();i.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++a+l).toString(36)}},{}],147:[function(o,i,s){o=o("../internals/native-symbol"),i.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(o,i,s){o=o("../internals/well-known-symbol"),s.f=o},{"../internals/well-known-symbol":149}],149:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/shared"),u=d("../internals/has"),c=d("../internals/uid"),f=d("../internals/native-symbol"),d=d("../internals/use-symbol-as-uid"),p=l("wks"),h=a.Symbol,m=d?h:h&&h.withoutSetter||c;i.exports=function(g){return u(p,g)||(f&&u(h,g)?p[g]=h[g]:p[g]=m("Symbol."+g)),p[g]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(o,i,s){i.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],151:[function(u,i,s){"use strict";var a=u("../internals/export"),l=u("../internals/global"),f=u("../internals/array-buffer"),u=u("../internals/set-species"),c="ArrayBuffer",f=f[c];a({global:!0,forced:l[c]!==f},{ArrayBuffer:f}),u(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(v,i,s){"use strict";var a=v("../internals/export"),l=v("../internals/fails"),u=v("../internals/is-array"),c=v("../internals/is-object"),f=v("../internals/to-object"),d=v("../internals/to-length"),p=v("../internals/create-property"),h=v("../internals/array-species-create"),m=v("../internals/array-method-has-species-support"),x=v("../internals/well-known-symbol"),v=v("../internals/engine-v8-version"),g=x("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",x=51<=v||!l(function(){var w=[];return w[g]=!1,w.concat()[0]!==w}),v=m("concat");a({target:"Array",proto:!0,forced:!x||!v},{concat:function(w){for(var _,S,C,E,T,I=f(this),k=h(I,0),F=0,D=-1,L=arguments.length;D<L;D++)if(T=void 0,!c(E=C=D===-1?I:arguments[D])||((T=E[g])!==void 0?!T:!u(E))){if(y<=F)throw TypeError(b);p(k,F++,C)}else{if(S=d(C.length),y<F+S)throw TypeError(b);for(_=0;_<S;_++,F++)_ in C&&p(k,F,C[_])}return k.length=F,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-copy-within"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:l}),u("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").every,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("every"),c=c("every");a({target:"Array",proto:!0,forced:!u||!c},{every:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-fill"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:l}),u("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").filter,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("filter"),c=c("filter");a({target:"Array",proto:!0,forced:!u||!c},{filter:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-iteration").findIndex,u=d("../internals/add-to-unscopables"),d=d("../internals/array-method-uses-to-length"),c="findIndex",f=!0,d=d(c);c in[]&&Array(1)[c](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!d},{findIndex:function(p){return l(this,p,1<arguments.length?arguments[1]:void 0)}}),u(c)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/a-function"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(p){var h,m=u(this),g=c(m.length);return f(p),(h=d(m,0)).length=l(h,m,m,g,0,1,p,1<arguments.length?arguments[1]:void 0),h}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var p=arguments.length?arguments[0]:void 0,h=u(this),m=c(h.length),g=d(h,0);return g.length=l(g,h,h,m,0,p===void 0?1:f(p)),g}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/array-from");a({target:"Array",stat:!0,forced:!o("../internals/check-correctness-of-iteration")(function(u){Array.from(u)})},{from:l})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/array-includes").includes,u=o("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!o("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return l(this,c,1<arguments.length?arguments[1]:void 0)}}),u("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-includes").indexOf,f=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),u=[].indexOf,c=!!u&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!f||!d},{indexOf:function(p){return c?u.apply(this,arguments)||0:l(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(f,i,s){"use strict";var a=f("../internals/to-indexed-object"),l=f("../internals/add-to-unscopables"),u=f("../internals/iterators"),c=f("../internals/internal-state"),f=f("../internals/define-iterator"),d="Array Iterator",p=c.set,h=c.getterFor(d);i.exports=f(Array,"Array",function(m,g){p(this,{type:d,target:a(m),index:0,kind:g})},function(){var m=h(this),g=m.target,y=m.kind,b=m.index++;return!g||b>=g.length?{value:m.target=void 0,done:!0}:y=="keys"?{value:b,done:!1}:y=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(f,i,s){"use strict";var a=f("../internals/export"),c=f("../internals/indexed-object"),l=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),u=[].join,c=c!=Object,f=f("join",",");a({target:"Array",proto:!0,forced:c||!f},{join:function(d){return u.call(l(this),d===void 0?",":d)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").map,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("map"),c=c("map");a({target:"Array",proto:!0,forced:!u||!c},{map:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(g,i,s){"use strict";var a=g("../internals/export"),l=g("../internals/is-object"),u=g("../internals/is-array"),c=g("../internals/to-absolute-index"),f=g("../internals/to-length"),d=g("../internals/to-indexed-object"),p=g("../internals/create-property"),h=g("../internals/well-known-symbol"),m=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),m=m("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),y=h("species"),b=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!m||!g},{slice:function(v,w){var _,S,C,E=d(this),T=f(E.length),I=c(v,T),k=c(w===void 0?T:w,T);if(u(E)&&((_=typeof(_=E.constructor)=="function"&&(_===Array||u(_.prototype))||l(_)&&(_=_[y])===null?void 0:_)===Array||_===void 0))return b.call(E,I,k);for(S=new(_===void 0?Array:_)(x(k-I,0)),C=0;I<k;I++,C++)I in E&&p(S,C,E[I]);return S.length=C,S}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").some,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("some"),c=c("some");a({target:"Array",proto:!0,forced:!u||!c},{some:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(m,i,s){"use strict";var a=m("../internals/export"),l=m("../internals/to-absolute-index"),u=m("../internals/to-integer"),c=m("../internals/to-length"),f=m("../internals/to-object"),d=m("../internals/array-species-create"),p=m("../internals/create-property"),h=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),h=h("splice"),m=m("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,y=Math.min;a({target:"Array",proto:!0,forced:!h||!m},{splice:function(F,x){var v,w,_,S,C,E,T=f(this),I=c(T.length),k=l(F,I),F=arguments.length;if(F===0?v=w=0:w=F===1?(v=0,I-k):(v=F-2,y(g(u(x),0),I-k)),9007199254740991<I+v-w)throw TypeError("Maximum allowed length exceeded");for(_=d(T,w),S=0;S<w;S++)(C=k+S)in T&&p(_,S,T[C]);if(v<(_.length=w)){for(S=k;S<I-w;S++)E=S+v,(C=S+w)in T?T[E]=T[C]:delete T[E];for(S=I;I-w+v<S;S--)delete T[S-1]}else if(w<v)for(S=I-w;k<S;S--)E=S+v-1,(C=S+w-1)in T?T[E]=T[C]:delete T[E];for(S=0;S<v;S++)T[S+k]=arguments[S+2];return T.length=I-w+v,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(o,i,s){o("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(o,i,s){o("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(l,i,s){var a=l("../internals/descriptors"),l=l("../internals/object-define-property").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/;!a||"name"in u||l(u,"name",{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(a,i,s){var a=a("../internals/export"),l=Math.hypot,u=Math.abs,c=Math.sqrt;a({target:"Math",stat:!0,forced:!!l&&l(1/0,NaN)!==1/0},{hypot:function(f,d){for(var p,h,m=0,g=0,y=arguments.length,b=0;g<y;)b<(p=u(arguments[g++]))?(m=m*(h=b/p)*h+1,b=p):m+=0<p?(h=p/b)*h:p;return b===1/0?1/0:b*c(m)}})},{"../internals/export":50}],176:[function(a,i,s){var a=a("../internals/export"),l=Math.log,u=Math.LN2;a({target:"Math",stat:!0},{log2:function(c){return l(c)/u}})},{"../internals/export":50}],177:[function(o,i,s){o("../internals/export")({target:"Math",stat:!0},{sign:o("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(o,i,s){"use strict";function a(D){var L,P,R,V,G,U,H,X=m(D,!1);if(typeof X=="string"&&2<X.length){if((D=(X=w(X)).charCodeAt(0))===43||D===45){if((L=X.charCodeAt(2))===88||L===120)return NaN}else if(D===48){switch(X.charCodeAt(1)){case 66:case 98:P=2,R=49;break;case 79:case 111:P=8,R=55;break;default:return+X}for(G=(V=X.slice(2)).length,U=0;U<G;U++)if((H=V.charCodeAt(U))<48||R<H)return NaN;return parseInt(V,P)}}return+X}var l=o("../internals/descriptors"),u=o("../internals/global"),c=o("../internals/is-forced"),f=o("../internals/redefine"),d=o("../internals/has"),p=o("../internals/classof-raw"),h=o("../internals/inherit-if-required"),m=o("../internals/to-primitive"),g=o("../internals/fails"),y=o("../internals/object-create"),b=o("../internals/object-get-own-property-names").f,x=o("../internals/object-get-own-property-descriptor").f,v=o("../internals/object-define-property").f,w=o("../internals/string-trim").trim,_="Number",S=u[_],C=S.prototype,E=p(y(C))==_;if(c(_,!S(" 0o1")||!S("0b1")||S("+0x1"))){for(var T,I=function(L){var L=arguments.length<1?0:L,P=this;return P instanceof I&&(E?g(function(){C.valueOf.call(P)}):p(P)!=_)?h(new S(a(L)),P,I):a(L)},k=l?b(S):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;k.length>F;F++)d(S,T=k[F])&&!d(I,T)&&v(I,T,x(S,T));(I.prototype=C).constructor=I,f(u,_,I)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(o,i,s){o("../internals/export")({target:"Number",stat:!0},{isFinite:o("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(d,i,s){"use strict";function a(m,g,y){return g===0?y:g%2==1?a(m,g-1,y*m):a(m*m,g/2,y)}var l=d("../internals/export"),u=d("../internals/to-integer"),c=d("../internals/this-number-value"),f=d("../internals/string-repeat"),d=d("../internals/fails"),p=1 .toFixed,h=Math.floor;l({target:"Number",proto:!0,forced:p&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!d(function(){p.call({})})},{toFixed:function(_){function g(T,I){for(var k=-1,F=I;++k<6;)F+=T*S[k],S[k]=F%1e7,F=h(F/1e7)}function y(T){for(var I=6,k=0;0<=--I;)k+=S[I],S[I]=h(k/T),k=k%T*1e7}function b(){for(var T,I=6,k="";0<=--I;)k===""&&I!==0&&S[I]===0||(T=String(S[I]),k=k===""?T:k+f.call("0",7-T.length)+T);return k}var x,v,w=c(this),_=u(_),S=[0,0,0,0,0,0],C="",E="0";if(_<0||20<_)throw RangeError("Incorrect fraction digits");if(w!=w)return"NaN";if(w<=-1e21||1e21<=w)return String(w);if(w<0&&(C="-",w=-w),1e-21<w)if(w=(x=function(T){for(var I=0,k=T;4096<=k;)I+=12,k/=4096;for(;2<=k;)I+=1,k/=2;return I}(w*a(2,69,1))-69)<0?w*a(2,-x,1):w/a(2,x,1),w*=4503599627370496,0<(x=52-x)){for(g(0,w),v=_;7<=v;)g(1e7,0),v-=7;for(g(a(10,v,1),0),v=x-1;23<=v;)y(1<<23),v-=23;y(1<<v),g(1,1),y(2),E=b()}else g(0,w),g(1<<-x,0),E=b()+f.call("0",_);return E=0<_?C+((w=E.length)<=_?"0."+f.call("0",_-w)+E:E.slice(0,w-_)+"."+E.slice(w-_)):C+E}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==l},{assign:l})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/iterate"),u=o("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(c){var f={};return l(c,function(d,p){u(f,d,p)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(c,i,s){var a=c("../internals/export"),f=c("../internals/fails"),l=c("../internals/to-indexed-object"),u=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),f=f(function(){u(1)});a({target:"Object",stat:!0,forced:!c||f,sham:!c},{getOwnPropertyDescriptor:function(d,p){return u(l(d),p)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/fails"),u=u("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:l(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:u})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(f,i,s){var a=f("../internals/export"),l=f("../internals/fails"),u=f("../internals/to-object"),c=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:l(function(){c(1)}),sham:!f},{getPrototypeOf:function(d){return c(u(d))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/to-object"),u=o("../internals/object-keys");a({target:"Object",stat:!0,forced:o("../internals/fails")(function(){u(1)})},{keys:function(c){return u(l(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(u,i,s){var a=u("../internals/to-string-tag-support"),l=u("../internals/redefine"),u=u("../internals/object-to-string");a||l(Object.prototype,"toString",u,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function($e,i,s){"use strict";var a,l,u,c,f=$e("../internals/export"),d=$e("../internals/is-pure"),p=$e("../internals/global"),h=$e("../internals/get-built-in"),m=$e("../internals/native-promise-constructor"),g=$e("../internals/redefine"),y=$e("../internals/redefine-all"),b=$e("../internals/set-to-string-tag"),x=$e("../internals/set-species"),v=$e("../internals/is-object"),w=$e("../internals/a-function"),_=$e("../internals/an-instance"),S=$e("../internals/classof-raw"),C=$e("../internals/inspect-source"),E=$e("../internals/iterate"),T=$e("../internals/check-correctness-of-iteration"),I=$e("../internals/species-constructor"),k=$e("../internals/task").set,F=$e("../internals/microtask"),D=$e("../internals/promise-resolve"),L=$e("../internals/host-report-errors"),P=$e("../internals/new-promise-capability"),R=$e("../internals/perform"),V=$e("../internals/internal-state"),G=$e("../internals/is-forced"),at=$e("../internals/well-known-symbol"),U=$e("../internals/engine-v8-version"),H=at("species"),X="Promise",fe=V.get,$=V.set,M=V.getterFor(X),z=m,q=p.TypeError,ee=p.document,ae=p.process,Q=h("fetch"),le=P.f,ie=le,K=S(ae)=="process",ge=!!(ee&&ee.createEvent&&p.dispatchEvent),ne="unhandledrejection",ye="rejectionhandled",xe=1,De=2,Te=1,Fe=2,$e=G(X,function(){var ut,Ge;return C(z)===String(z)&&(U===66||!K&&typeof PromiseRejectionEvent!="function")?!0:!(!d||z.prototype.finally)||!(51<=U&&/native code/.test(z))&&(Ge=function(de){de(function(){},function(){})},((ut=z.resolve(1)).constructor={})[H]=Ge,!(ut.then(function(){})instanceof Ge))}),at=$e||!T(function(ut){z.all(ut).catch(function(){})}),We=function(ut){var Ge;return!(!v(ut)||typeof(Ge=ut.then)!="function")&&Ge},jt=function(ut,Ge,de){var me;Ge.notified||(Ge.notified=!0,me=Ge.reactions,F(function(){for(var oe,be,Oe=Ge.value,Ve=Ge.state==xe,Qe=0;me.length>Qe;){var St,Nt,Ft,Ut=me[Qe++],en=Ve?Ut.ok:Ut.fail,Lr=Ut.resolve,ur=Ut.reject,Yr=Ut.domain;try{en?(Ve||(Ge.rejection===Fe&&function(Rr,yi){k.call(p,function(){K?ae.emit("rejectionHandled",Rr):_t(ye,Rr,yi.value)})}(ut,Ge),Ge.rejection=Te),en===!0?St=Oe:(Yr&&Yr.enter(),St=en(Oe),Yr&&(Yr.exit(),Ft=!0)),St===Ut.promise?ur(q("Promise-chain cycle")):(Nt=We(St))?Nt.call(St,Lr,ur):Lr(St)):ur(Oe)}catch(Rr){Yr&&!Ft&&Yr.exit(),ur(Rr)}}Ge.reactions=[],Ge.notified=!1,de&&!Ge.rejection&&(oe=ut,be=Ge,k.call(p,function(){var Rr=be.value,yi=kt(be);if(yi&&(yi=R(function(){K?ae.emit("unhandledRejection",Rr,oe):_t(ne,oe,Rr)}),be.rejection=K||kt(be)?Fe:Te,yi.error))throw yi.value}))}))},_t=function(ut,Ge,de){var me;ge?((me=ee.createEvent("Event")).promise=Ge,me.reason=de,me.initEvent(ut,!1,!0),p.dispatchEvent(me)):me={promise:Ge,reason:de},(Ge=p["on"+ut])?Ge(me):ut===ne&&L("Unhandled promise rejection",de)},kt=function(ut){return ut.rejection!==Te&&!ut.parent},Rt=function(ut,Ge,de,me){return function(oe){ut(Ge,de,oe,me)}},Mt=function(ut,Ge,de,me){Ge.done||(Ge.done=!0,(Ge=me||Ge).value=de,Ge.state=De,jt(ut,Ge,!0))},Be=function(ut,Ge,de,me){if(!Ge.done){Ge.done=!0,me&&(Ge=me);try{if(ut===de)throw q("Promise can't be resolved itself");var oe=We(de);oe?F(function(){var be={done:!1};try{oe.call(de,Rt(Be,ut,be,Ge),Rt(Mt,ut,be,Ge))}catch(Oe){Mt(ut,be,Oe,Ge)}}):(Ge.value=de,Ge.state=xe,jt(ut,Ge,!1))}catch(be){Mt(ut,{done:!1},be,Ge)}}};$e&&(z=function(ut){_(this,z,X),w(ut),a.call(this);var Ge=fe(this);try{ut(Rt(Be,this,Ge),Rt(Mt,this,Ge))}catch(de){Mt(this,Ge,de)}},(a=function(ut){$(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(z.prototype,{then:function(ut,Ge){var de=M(this),me=le(I(this,z));return me.ok=typeof ut!="function"||ut,me.fail=typeof Ge=="function"&&Ge,me.domain=K?ae.domain:void 0,de.parent=!0,de.reactions.push(me),de.state!=0&&jt(this,de,!1),me.promise},catch:function(ut){return this.then(void 0,ut)}}),l=function(){var ut=new a,Ge=fe(ut);this.promise=ut,this.resolve=Rt(Be,ut,Ge),this.reject=Rt(Mt,ut,Ge)},P.f=le=function(ut){return ut===z||ut===u?new l:ie(ut)},d||typeof m!="function"||(c=m.prototype.then,g(m.prototype,"then",function(ut,Ge){var de=this;return new z(function(me,oe){c.call(de,me,oe)}).then(ut,Ge)},{unsafe:!0}),typeof Q=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ut){return D(z,Q.apply(p,arguments))}}))),f({global:!0,wrap:!0,forced:$e},{Promise:z}),b(z,X,!1,!0),x(X),u=h(X),f({target:X,stat:!0,forced:$e},{reject:function(ut){var Ge=le(this);return Ge.reject.call(void 0,ut),Ge.promise}}),f({target:X,stat:!0,forced:d||$e},{resolve:function(ut){return D(d&&this===u?z:this,ut)}}),f({target:X,stat:!0,forced:at},{all:function(ut){var Ge=this,de=le(Ge),me=de.resolve,oe=de.reject,be=R(function(){var Oe=w(Ge.resolve),Ve=[],Qe=0,St=1;E(ut,function(Nt){var Ft=Qe++,Ut=!1;Ve.push(void 0),St++,Oe.call(Ge,Nt).then(function(en){Ut||(Ut=!0,Ve[Ft]=en,--St||me(Ve))},oe)}),--St||me(Ve)});return be.error&&oe(be.value),de.promise},race:function(ut){var Ge=this,de=le(Ge),me=de.reject,oe=R(function(){var be=w(Ge.resolve);E(ut,function(Oe){be.call(Ge,Oe).then(de.resolve,me)})});return oe.error&&me(oe.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(p,i,s){var a=p("../internals/export"),y=p("../internals/get-built-in"),l=p("../internals/a-function"),u=p("../internals/an-object"),c=p("../internals/is-object"),f=p("../internals/object-create"),d=p("../internals/function-bind"),p=p("../internals/fails"),h=y("Reflect","construct"),m=p(function(){function b(){}return!(h(function(){},[],b)instanceof b)}),g=!p(function(){h(function(){})}),y=m||g;a({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(b,x){l(b),u(x);var v=arguments.length<3?b:l(arguments[2]);if(g&&!m)return h(b,x,v);if(b==v){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var w=[null];return w.push.apply(w,x),new(d.apply(b,w))}return w=v.prototype,v=f(c(w)?w:Object.prototype),w=Function.apply.call(b,v,x),c(w)?w:v}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/is-object"),u=o("../internals/an-object"),c=o("../internals/has"),f=o("../internals/object-get-own-property-descriptor"),d=o("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function p(h,m){var g,y=arguments.length<3?h:arguments[2];return u(h)===y?h[m]:(g=f.f(h,m))?c(g,"value")?g.value:g.get===void 0?void 0:g.get.call(y):l(g=d(h))?p(g,m,y):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/inherit-if-required"),f=o("../internals/object-define-property").f,d=o("../internals/object-get-own-property-names").f,p=o("../internals/is-regexp"),h=o("../internals/regexp-flags"),m=o("../internals/regexp-sticky-helpers"),g=o("../internals/redefine"),y=o("../internals/fails"),b=o("../internals/internal-state").set,x=o("../internals/set-species"),v=o("../internals/well-known-symbol")("match"),w=l.RegExp,_=w.prototype,S=/a/g,C=/a/g,E=new w(S)!==S,T=m.UNSUPPORTED_Y;if(a&&u("RegExp",!E||T||y(function(){return C[v]=!1,w(S)!=S||w(C)==C||w(S,"i")!="/a/i"}))){for(var I=function(D,L){var P,R=this instanceof I,V=p(D),G=L===void 0;return!R&&V&&D.constructor===I&&G?D:(E?V&&!G&&(D=D.source):D instanceof I&&(G&&(L=h.call(D)),D=D.source),T&&(P=!!L&&-1<L.indexOf("y"))&&(L=L.replace(/y/g,"")),V=c(E?new w(D,L):w(D,L),R?this:_,I),T&&P&&b(V,{sticky:P}),V)},k=d(w),F=0;k.length>F;)(function(D){D in I||f(I,D,{configurable:!0,get:function(){return w[D]},set:function(L){w[D]=L}})})(k[F++]);(_.constructor=I).prototype=_,g(l,"RegExp",I)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(c,i,s){"use strict";var a=c("../internals/redefine"),l=c("../internals/an-object"),p=c("../internals/fails"),u=c("../internals/regexp-flags"),c="toString",f=RegExp.prototype,d=f[c],p=p(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),h=d.name!=c;(p||h)&&a(RegExp.prototype,c,function(){var m=l(this),g=String(m.source),y=m.flags;return"/"+g+"/"+String(y===void 0&&m instanceof RegExp&&!("flags"in f)?u.call(m):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Set",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),m=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".endsWith,h=Math.min,m=m("endsWith");a({target:"String",proto:!0,forced:!!(d||m||!(a=l(String.prototype,"endsWith"))||a.writable)&&!m},{endsWith:function(g){var y=String(f(this)),b=(c(g),1<arguments.length?arguments[1]:void 0),x=u(y.length),b=b===void 0?x:h(u(b),x),x=String(g);return p?p.call(y,x,b):y.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/not-a-regexp"),u=o("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!o("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(u(this)).indexOf(l(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(u,i,s){"use strict";var a=u("../internals/string-multibyte").charAt,l=u("../internals/internal-state"),u=u("../internals/define-iterator"),c="String Iterator",f=l.set,d=l.getterFor(c);u(String,"String",function(p){f(this,{type:c,string:String(p),index:0})},function(){var p=d(this),h=p.string,m=p.index;return m>=h.length?{value:void 0,done:!0}:(h=a(h,m),p.index+=h.length,{value:h,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-length"),c=o("../internals/require-object-coercible"),f=o("../internals/advance-string-index"),d=o("../internals/regexp-exec-abstract");a("match",1,function(p,h,m){return[function(g){var y=c(this),b=g?.[p];return b!==void 0?b.call(g,y):new RegExp(g)[p](String(y))},function(g){var y=m(h,g,this);if(y.done)return y.value;var b=l(g),x=String(this);if(!b.global)return d(b,x);for(var v=b.unicode,w=[],_=b.lastIndex=0;(S=d(b,x))!==null;){var S=String(S[0]);(w[_]=S)===""&&(b.lastIndex=f(x,u(b.lastIndex),v)),_++}return _===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-pad").start;a({target:"String",proto:!0,forced:o("../internals/string-pad-webkit-bug")},{padStart:function(u){return l(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(o,i,s){o("../internals/export")({target:"String",proto:!0},{repeat:o("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/require-object-coercible"),p=o("../internals/advance-string-index"),h=o("../internals/regexp-exec-abstract"),m=Math.max,g=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;a("replace",2,function(v,w,_,S){var C=S.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=S.REPLACE_KEEPS_$0,T=C?"$":"$0";return[function(I,k){var F=d(this),D=I?.[v];return D!==void 0?D.call(I,F,k):w.call(String(F),I,k)},function(I,k){if(!C&&E||typeof k=="string"&&k.indexOf(T)===-1){var F=_(w,I,this,k);if(F.done)return F.value}for(var D,L=l(I),P=String(this),R=typeof k=="function",V=(R||(k=String(k)),L.global),G=(V&&(D=L.unicode,L.lastIndex=0),[]);($=h(L,P))!==null&&(G.push($),V);)String($[0])===""&&(L.lastIndex=p(P,c(L.lastIndex),D));for(var U,H="",X=0,fe=0;fe<G.length;fe++){for(var $=G[fe],M=String($[0]),z=m(g(f($.index),P.length),0),q=[],ee=1;ee<$.length;ee++)q.push((U=$[ee])===void 0?U:String(U));var ae=$.groups,Q=R?(Q=[M].concat(q,z,P),ae!==void 0&&Q.push(ae),String(k.apply(void 0,Q))):function(le,ie,K,ge,ne,ye){var xe=K+le.length,De=ge.length,Te=x;return ne!==void 0&&(ne=u(ne),Te=b),w.call(ye,Te,function(Fe,$e){var at;switch($e.charAt(0)){case"$":return"$";case"&":return le;case"`":return ie.slice(0,K);case"'":return ie.slice(xe);case"<":at=ne[$e.slice(1,-1)];break;default:var We,jt=+$e;if(jt==0)return Fe;if(De<jt)return(We=y(jt/10))!==0&&We<=De?ge[We-1]===void 0?$e.charAt(1):ge[We-1]+$e.charAt(1):Fe;at=ge[jt-1]}return at===void 0?"":at})}(M,P,z,q,ae,k);X<=z&&(H+=P.slice(X,z)+Q,X=z+M.length)}return H+P.slice(X)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/require-object-coercible"),c=o("../internals/same-value"),f=o("../internals/regexp-exec-abstract");a("search",1,function(d,p,h){return[function(m){var g=u(this),y=m?.[d];return y!==void 0?y.call(m,g):new RegExp(m)[d](String(g))},function(m){var g,y=h(p,m,this);return y.done?y.value:(y=l(m),m=String(this),g=y.lastIndex,c(g,0)||(y.lastIndex=0),m=f(y,m),c(y.lastIndex,g)||(y.lastIndex=g),m===null?-1:m.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(g,i,s){"use strict";var a=g("../internals/fix-regexp-well-known-symbol-logic"),l=g("../internals/is-regexp"),u=g("../internals/an-object"),c=g("../internals/require-object-coercible"),f=g("../internals/species-constructor"),d=g("../internals/advance-string-index"),p=g("../internals/to-length"),h=g("../internals/regexp-exec-abstract"),m=g("../internals/regexp-exec"),g=g("../internals/fails"),y=[].push,b=Math.min,x=4294967295,v=!g(function(){return!RegExp(x,"y")});a("split",2,function(w,_,S){var C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(E,T){var I=String(c(this)),k=T===void 0?x:T>>>0;if(k==0)return[];if(E===void 0)return[I];if(!l(E))return _.call(I,E,k);for(var F,D,L,P=[],T=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),R=0,V=new RegExp(E.source,T+"g");(F=m.call(V,I))&&!(R<(D=V.lastIndex)&&(P.push(I.slice(R,F.index)),1<F.length&&F.index<I.length&&y.apply(P,F.slice(1)),L=F[0].length,R=D,P.length>=k));)V.lastIndex===F.index&&V.lastIndex++;return R===I.length?!L&&V.test("")||P.push(""):P.push(I.slice(R)),P.length>k?P.slice(0,k):P}:"0".split(void 0,0).length?function(E,T){return E===void 0&&T===0?[]:_.call(this,E,T)}:_;return[function(E,T){var I=c(this),k=E?.[w];return k!==void 0?k.call(E,I,T):C.call(String(I),E,T)},function(F,T){var I=S(C,F,this,T,C!==_);if(I.done)return I.value;var I=u(F),k=String(this),F=f(I,RegExp),D=I.unicode,L=(I.ignoreCase?"i":"")+(I.multiline?"m":"")+(I.unicode?"u":"")+(v?"y":"g"),P=new F(v?I:"^(?:"+I.source+")",L),R=T===void 0?x:T>>>0;if(R==0)return[];if(k.length===0)return h(P,k)===null?[k]:[];for(var V=0,G=0,U=[];G<k.length;){P.lastIndex=v?G:0;var H,X=h(P,v?k:k.slice(G));if(X===null||(H=b(p(P.lastIndex+(v?0:G)),k.length))===V)G=d(k,G,D);else{if(U.push(k.slice(V,G)),U.length===R)return U;for(var fe=1;fe<=X.length-1;fe++)if(U.push(X[fe]),U.length===R)return U;G=V=H}}return U.push(k.slice(V)),U}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),m=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".startsWith,h=Math.min,m=m("startsWith");a({target:"String",proto:!0,forced:!!(d||m||!(a=l(String.prototype,"startsWith"))||a.writable)&&!m},{startsWith:function(x){var y=String(f(this)),b=(c(x),u(h(1<arguments.length?arguments[1]:void 0,y.length))),x=String(x);return p?p.call(y,x,b):y.slice(b,b+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/create-html");a({target:"String",proto:!0,forced:o("../internals/string-html-forced")("sub")},{sub:function(){return l(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-trim").trim;a({target:"String",proto:!0,forced:o("../internals/string-trim-forced")("trim")},{trim:function(){return l(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(b,i,s){"use strict";var a,l,u,c,f,d=b("../internals/export"),p=b("../internals/descriptors"),h=b("../internals/global"),m=b("../internals/has"),g=b("../internals/is-object"),y=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=h.Symbol;!p||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(a={},b(l=function(){var v=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof l?new x(v):v===void 0?x():x(v);return v===""&&(a[w]=!0),w},x),(h=l.prototype=x.prototype).constructor=l,u=h.toString,c=String(x("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,y(h,"description",{configurable:!0,get:function(){var v=g(this)?this.valueOf():this,w=u.call(v);return m(a,v)?"":(v=c?w.slice(7,-1):w.replace(f,"$1"))===""?void 0:v}}),d({global:!0,forced:!0},{Symbol:l}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(o,i,s){o("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(ie,i,s){"use strict";function a(oe,be){var Oe=at[oe]=I(ye[le]);return K(Oe,{type:Q,tag:oe,description:be}),m||(Oe.description=be),Oe}function l(oe,Ve){_(oe);var Oe=C(Ve),Ve=k(Oe).concat(me(Oe));return ee(Ve,function(Qe){m&&!de.call(Oe,Qe)||Ge(oe,Qe,Oe[Qe])}),oe}function u(Ve,Qe){var Oe,Ve=C(Ve),Qe=E(Qe,!0);if(Ve!==ne||!x(at,Qe)||x(We,Qe))return!(Oe=De(Ve,Qe))||!x(at,Qe)||x(Ve,ae)&&Ve[ae][Qe]||(Oe.enumerable=!0),Oe}function c(be){var be=Fe(C(be)),Oe=[];return ee(be,function(Ve){x(at,Ve)||x(X,Ve)||Oe.push(Ve)}),Oe}var f=ie("../internals/export"),d=ie("../internals/global"),p=ie("../internals/get-built-in"),h=ie("../internals/is-pure"),m=ie("../internals/descriptors"),g=ie("../internals/native-symbol"),y=ie("../internals/use-symbol-as-uid"),b=ie("../internals/fails"),x=ie("../internals/has"),v=ie("../internals/is-array"),w=ie("../internals/is-object"),_=ie("../internals/an-object"),S=ie("../internals/to-object"),C=ie("../internals/to-indexed-object"),E=ie("../internals/to-primitive"),T=ie("../internals/create-property-descriptor"),I=ie("../internals/object-create"),k=ie("../internals/object-keys"),F=ie("../internals/object-get-own-property-names"),D=ie("../internals/object-get-own-property-names-external"),L=ie("../internals/object-get-own-property-symbols"),P=ie("../internals/object-get-own-property-descriptor"),R=ie("../internals/object-define-property"),V=ie("../internals/object-property-is-enumerable"),G=ie("../internals/create-non-enumerable-property"),U=ie("../internals/redefine"),H=ie("../internals/shared"),kt=ie("../internals/shared-key"),X=ie("../internals/hidden-keys"),fe=ie("../internals/uid"),$=ie("../internals/well-known-symbol"),M=ie("../internals/well-known-symbol-wrapped"),z=ie("../internals/define-well-known-symbol"),q=ie("../internals/set-to-string-tag"),Rt=ie("../internals/internal-state"),ee=ie("../internals/array-iteration").forEach,ae=kt("hidden"),Q="Symbol",le="prototype",ie=$("toPrimitive"),K=Rt.set,ge=Rt.getterFor(Q),ne=Object[le],ye=d.Symbol,xe=p("JSON","stringify"),De=P.f,Te=R.f,Fe=D.f,$e=V.f,at=H("symbols"),We=H("op-symbols"),jt=H("string-to-symbol-registry"),_t=H("symbol-to-string-registry"),kt=H("wks"),Rt=d.QObject,Mt=!Rt||!Rt[le]||!Rt[le].findChild,Be=m&&b(function(){return I(Te({},"a",{get:function(){return Te(this,"a",{value:7}).a}})).a!=7})?function(oe,be,Oe){var Ve=De(ne,be);Ve&&delete ne[be],Te(oe,be,Oe),Ve&&oe!==ne&&Te(ne,be,Ve)}:Te,ut=y?function(oe){return typeof oe=="symbol"}:function(oe){return Object(oe)instanceof ye},Ge=function(oe,be,Oe){return oe===ne&&Ge(We,be,Oe),_(oe),be=E(be,!0),_(Oe),(x(at,be)?(Oe.enumerable?(x(oe,ae)&&oe[ae][be]&&(oe[ae][be]=!1),Oe=I(Oe,{enumerable:T(0,!1)})):(x(oe,ae)||Te(oe,ae,T(1,{})),oe[ae][be]=!0),Be):Te)(oe,be,Oe)},de=function(be){var be=E(be,!0),Oe=$e.call(this,be);return!(this===ne&&x(at,be)&&!x(We,be))&&(!(Oe||!x(this,be)||!x(at,be)||x(this,ae)&&this[ae][be])||Oe)},me=function(Oe){var be=Oe===ne,Oe=Fe(be?We:C(Oe)),Ve=[];return ee(Oe,function(Qe){!x(at,Qe)||be&&!x(ne,Qe)||Ve.push(at[Qe])}),Ve};g||(U((ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor");var oe=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,be=fe(oe),Oe=function(Ve){this===ne&&Oe.call(We,Ve),x(this,ae)&&x(this[ae],be)&&(this[ae][be]=!1),Be(this,be,T(1,Ve))};return m&&Mt&&Be(ne,be,{configurable:!0,set:Oe}),a(be,oe)})[le],"toString",function(){return ge(this).tag}),U(ye,"withoutSetter",function(oe){return a(fe(oe),oe)}),V.f=de,R.f=Ge,P.f=u,F.f=D.f=c,L.f=me,M.f=function(oe){return a($(oe),oe)},m&&(Te(ye[le],"description",{configurable:!0,get:function(){return ge(this).description}}),h||U(ne,"propertyIsEnumerable",de,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:ye}),ee(k(kt),function(oe){z(oe)}),f({target:Q,stat:!0,forced:!g},{for:function(Oe){var be,Oe=String(Oe);return x(jt,Oe)?jt[Oe]:(be=ye(Oe),jt[Oe]=be,_t[be]=Oe,be)},keyFor:function(oe){if(!ut(oe))throw TypeError(oe+" is not a symbol");if(x(_t,oe))return _t[oe]},useSetter:function(){Mt=!0},useSimple:function(){Mt=!1}}),f({target:"Object",stat:!0,forced:!g,sham:!m},{create:function(oe,be){return be===void 0?I(oe):l(I(oe),be)},defineProperty:Ge,defineProperties:l,getOwnPropertyDescriptor:u}),f({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:c,getOwnPropertySymbols:me}),f({target:"Object",stat:!0,forced:b(function(){L.f(1)})},{getOwnPropertySymbols:function(oe){return L.f(S(oe))}}),xe&&f({target:"JSON",stat:!0,forced:!g||b(function(){var oe=ye();return xe([oe])!="[null]"||xe({a:oe})!="{}"||xe(Object(oe))!="{}"})},{stringify:function(oe,be,Oe){for(var Ve,Qe=[oe],St=1;St<arguments.length;)Qe.push(arguments[St++]);if((w(Ve=be)||oe!==void 0)&&!ut(oe))return v(be)||(be=function(Nt,Ft){if(typeof Ve=="function"&&(Ft=Ve.call(this,Nt,Ft)),!ut(Ft))return Ft}),Qe[1]=be,xe.apply(null,Qe)}}),ye[le][ie]||G(ye[le],ie,ye[le].valueOf),q(ye,Q),X[ae]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-copy-within"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(c,f){return l.call(u(this),c,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").every,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-fill"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").filter,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(d){for(var p=l(c(this),d,1<arguments.length?arguments[1]:void 0),d=u(this,this.constructor),h=0,m=p.length,g=new(f(d))(m);h<m;)g[h]=p[h++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").findIndex,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").find,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(o,i,s){o("../internals/typed-array-constructor")("Float32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],217:[function(o,i,s){o("../internals/typed-array-constructor")("Float64",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],218:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").forEach,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(c){l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").includes,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").indexOf,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(o,i,s){o("../internals/typed-array-constructor")("Int16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],222:[function(o,i,s){o("../internals/typed-array-constructor")("Int32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],223:[function(l,i,s){"use strict";function a(){return u.call(d(this))}var m=l("../internals/global"),h=l("../internals/array-buffer-view-core"),p=l("../modules/es.array.iterator"),l=l("../internals/well-known-symbol")("iterator"),m=m.Uint8Array,u=p.values,c=p.keys,f=p.entries,d=h.aTypedArray,p=h.exportTypedArrayMethod,h=m&&m.prototype[l],m=!!h&&(h.name=="values"||h.name==null);p("entries",function(){return f.call(d(this))}),p("keys",function(){return c.call(d(this))}),p("values",a,!m),p(l,a,!m)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].join;l("join",function(c){return u.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-last-index-of"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").map,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(d){return l(c(this),d,1<arguments.length?arguments[1]:void 0,function(p,h){return new(f(u(p,p.constructor)))(h)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").right,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").left,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=Math.floor;l("reverse",function(){for(var c,f=a(this).length,d=u(f/2),p=0;p<d;)c=this[p],this[p++]=this[--f],this[f]=c;return this})},{"../internals/array-buffer-view-core":12}],230:[function(f,i,s){"use strict";var a=f("../internals/array-buffer-view-core"),l=f("../internals/to-length"),u=f("../internals/to-offset"),c=f("../internals/to-object"),f=f("../internals/fails"),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(p){d(this);var h=u(1<arguments.length?arguments[1]:void 0,1),m=this.length,g=c(p),y=l(g.length),b=0;if(m<y+h)throw RangeError("Wrong length");for(;b<y;)this[h+b]=g[b++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(l,i,s){"use strict";var f=l("../internals/array-buffer-view-core"),a=l("../internals/species-constructor"),l=l("../internals/fails"),u=f.aTypedArray,c=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,d=[].slice;f("slice",function(p,h){for(var m=d.call(u(this),p,h),p=a(this,this.constructor),g=0,y=m.length,b=new(c(p))(y);g<y;)b[g]=m[g++];return b},l(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").some,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].sort;l("sort",function(c){return u.call(a(this),c)})},{"../internals/array-buffer-view-core":12}],234:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/to-length"),u=o("../internals/to-absolute-index"),c=o("../internals/species-constructor"),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(g,p){var h=f(this),m=h.length,g=u(g,m);return new(c(h,h.constructor))(h.buffer,h.byteOffset+g*h.BYTES_PER_ELEMENT,l((p===void 0?m:u(p,m))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(l,i,s){"use strict";var f=l("../internals/global"),a=l("../internals/array-buffer-view-core"),l=l("../internals/fails"),u=f.Int8Array,c=a.aTypedArray,f=a.exportTypedArrayMethod,d=[].toLocaleString,p=[].slice,h=!!u&&l(function(){d.call(new u(1))});f("toLocaleString",function(){return d.apply(h?p.call(c(this)):c(this),arguments)},l(function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()})||!l(function(){u.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(l,i,s){"use strict";var a=l("../internals/array-buffer-view-core").exportTypedArrayMethod,f=l("../internals/fails"),l=l("../internals/global").Uint8Array,l=l&&l.prototype||{},u=[].toString,c=[].join,f=(f(function(){u.call({})})&&(u=function(){return c.call(this)}),l.toString!=u);a("toString",u,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(o,i,s){o("../internals/typed-array-constructor")("Uint16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],238:[function(o,i,s){o("../internals/typed-array-constructor")("Uint32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],239:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],240:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(x,_,s){"use strict";function a(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}}var l,u,c,f,d,v=x("../internals/global"),p=x("../internals/redefine-all"),h=x("../internals/internal-metadata"),m=x("../internals/collection"),g=x("../internals/collection-weak"),y=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),v=!v.ActiveXObject&&"ActiveXObject"in v,w=Object.isExtensible,_=_.exports=m("WeakMap",a,g);x&&v&&(l=g.getConstructor(a,"WeakMap",!0),h.REQUIRED=!0,m=_.prototype,u=m.delete,c=m.has,f=m.get,d=m.set,p(m,{delete:function(S){var C;return y(S)&&!w(S)?((C=b(this)).frozen||(C.frozen=new l),u.call(this,S)||C.frozen.delete(S)):u.call(this,S)},has:function(S){var C;return y(S)&&!w(S)?((C=b(this)).frozen||(C.frozen=new l),c.call(this,S)||C.frozen.has(S)):c.call(this,S)},get:function(S){var C;return!y(S)||w(S)||((C=b(this)).frozen||(C.frozen=new l),c.call(this,S))?f.call(this,S):C.frozen.get(S)},set:function(S,C){var E;return!y(S)||w(S)||((E=b(this)).frozen||(E.frozen=new l),c.call(this,S))?d.call(this,S,C):E.frozen.set(S,C),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(o,i,s){var a,l=o("../internals/global"),u=o("../internals/dom-iterables"),c=o("../internals/array-for-each"),f=o("../internals/create-non-enumerable-property");for(a in u){var d=l[a],d=d&&d.prototype;if(d&&d.forEach!==c)try{f(d,"forEach",c)}catch{d.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(d,i,s){var a,l=d("../internals/global"),u=d("../internals/dom-iterables"),c=d("../modules/es.array.iterator"),f=d("../internals/create-non-enumerable-property"),d=d("../internals/well-known-symbol"),p=d("iterator"),h=d("toStringTag"),m=c.values;for(a in u){var g=l[a],y=g&&g.prototype;if(y){if(y[p]!==m)try{f(y,p,m)}catch{y[p]=m}if(y[h]||f(y,h,a),u[a]){for(var b in c)if(y[b]!==c[b])try{f(y,b,c[b])}catch{y[b]=c[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(ae,i,s){"use strict";ae("../modules/es.array.iterator");function a(Q){try{return decodeURIComponent(Q)}catch{return Q}}function l(Q){return z[Q]}function u(Q){return encodeURIComponent(Q).replace(M,l)}function c(Q){this.entries.length=0,q(this.entries,Q)}function f(Q,le){if(Q<le)throw TypeError("Not enough arguments")}function d(){v(this,d,R);var Q,le,ie,K,ge,ne,ye,xe,De=0<arguments.length?arguments[0]:void 0,Te=[];if(G(this,{type:R,entries:Te,updateURL:function(){},updateSearchParams:c}),De!==void 0)if(E(De))if(typeof(Q=F(De))=="function")for(ie=(le=Q.call(De)).next;!(K=ie.call(le)).done;){if((ne=(ge=(K=k(C(K.value))).next).call(K)).done||(ye=ge.call(K)).done||!ge.call(K).done)throw TypeError("Expected sequence with length 2");Te.push({key:ne.value+"",value:ye.value+""})}else for(xe in De)w(De,xe)&&Te.push({key:xe,value:De[xe]+""});else q(Te,typeof De=="string"?De.charAt(0)==="?"?De.slice(1):De:De+"")}var p=ae("../internals/export"),P=ae("../internals/get-built-in"),h=ae("../internals/native-url"),m=ae("../internals/redefine"),g=ae("../internals/redefine-all"),y=ae("../internals/set-to-string-tag"),b=ae("../internals/create-iterator-constructor"),x=ae("../internals/internal-state"),v=ae("../internals/an-instance"),w=ae("../internals/has"),_=ae("../internals/function-bind-context"),S=ae("../internals/classof"),C=ae("../internals/an-object"),E=ae("../internals/is-object"),T=ae("../internals/object-create"),I=ae("../internals/create-property-descriptor"),k=ae("../internals/get-iterator"),F=ae("../internals/get-iterator-method"),ae=ae("../internals/well-known-symbol"),D=P("fetch"),L=P("Headers"),P=ae("iterator"),R="URLSearchParams",V=R+"Iterator",G=x.set,U=x.getterFor(R),H=x.getterFor(V),X=/\+/g,fe=Array(4),$=function(Q){var le,ie=Q.replace(X," "),K=4;try{return decodeURIComponent(ie)}catch{for(;K;)ie=ie.replace((le=K--,fe[le-1]||(fe[le-1]=RegExp("((?:%[\\da-f]{2}){"+le+"})","gi"))),a);return ie}},M=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},q=function(Q,le){if(le)for(var ie,K=le.split("&"),ge=0;ge<K.length;)(ie=K[ge++]).length&&(ie=ie.split("="),Q.push({key:$(ie.shift()),value:$(ie.join("="))}))},ee=b(function(Q,le){G(this,{type:V,iterator:k(U(Q).entries),kind:le})},"Iterator",function(){var le=H(this),Q=le.kind,le=le.iterator.next(),ie=le.value;return le.done||(le.value=Q==="keys"?ie.key:Q==="values"?ie.value:[ie.key,ie.value]),le}),ae=d.prototype;g(ae,{append:function(Q,le){f(arguments.length,2);var ie=U(this);ie.entries.push({key:Q+"",value:le+""}),ie.updateURL()},delete:function(Q){f(arguments.length,1);for(var le=U(this),ie=le.entries,K=Q+"",ge=0;ge<ie.length;)ie[ge].key===K?ie.splice(ge,1):ge++;le.updateURL()},get:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",K=0;K<le.length;K++)if(le[K].key===ie)return le[K].value;return null},getAll:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",K=[],ge=0;ge<le.length;ge++)le[ge].key===ie&&K.push(le[ge].value);return K},has:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",K=0;K<le.length;)if(le[K++].key===ie)return!0;return!1},set:function(Q,le){f(arguments.length,1);for(var ie,K=U(this),ge=K.entries,ne=!1,ye=Q+"",xe=le+"",De=0;De<ge.length;De++)(ie=ge[De]).key===ye&&(ne?ge.splice(De--,1):(ne=!0,ie.value=xe));ne||ge.push({key:ye,value:xe}),K.updateURL()},sort:function(){for(var Q,le,ie=U(this),K=ie.entries,ge=K.slice(),ne=K.length=0;ne<ge.length;ne++){for(Q=ge[ne],le=0;le<ne;le++)if(K[le].key>Q.key){K.splice(le,0,Q);break}le===ne&&K.push(Q)}ie.updateURL()},forEach:function(Q){for(var le,ie=U(this).entries,K=_(Q,1<arguments.length?arguments[1]:void 0,3),ge=0;ge<ie.length;)K((le=ie[ge++]).value,le.key,this)},keys:function(){return new ee(this,"keys")},values:function(){return new ee(this,"values")},entries:function(){return new ee(this,"entries")}},{enumerable:!0}),m(ae,P,ae.entries),m(ae,"toString",function(){for(var Q,le=U(this).entries,ie=[],K=0;K<le.length;)Q=le[K++],ie.push(u(Q.key)+"="+u(Q.value));return ie.join("&")},{enumerable:!0}),y(d,R),p({global:!0,forced:!h},{URLSearchParams:d}),h||typeof D!="function"||typeof L!="function"||p({global:!0,enumerable:!0,forced:!0},{fetch:function(ge){var le,ie,K,ge=[ge];return 1<arguments.length&&(E(le=arguments[1])&&(ie=le.body,S(ie)===R&&((K=le.headers?new L(le.headers):new L).has("content-type")||K.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),le=T(le,{body:I(0,String(ie)),headers:I(0,K)}))),ge.push(le)),D.apply(this,ge)}}),i.exports={URLSearchParams:d,getState:U}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,i,s){"use strict";k("../modules/es.string.iterator");function a(ke){var Ct,Ht,xt,In;if(typeof ke=="number"){for(Ct=[],Ht=0;Ht<4;Ht++)Ct.unshift(ke%256),ke=V(ke/256);return Ct.join(".")}if(typeof ke!="object")return ke;for(Ct="",xt=ye(ke),Ht=0;Ht<8;Ht++)In&&ke[Ht]===0||(In=In&&!1,xt===Ht?(Ct+=Ht?":":"::",In=!0):(Ct+=ke[Ht].toString(16),Ht<7&&(Ct+=":")));return"["+Ct+"]"}function l(ke){return!ke.host||ke.cannotBeABaseURL||ke.scheme=="file"}function u(ke,Ct,Ht,xt){var In,gt,Yn,zt=Ht||ut,Ln=0,Vt="",ks=!1,wa=!1,hs=!1;for(Ht||(ke.scheme="",ke.username="",ke.password="",ke.host=null,ke.port=null,ke.path=[],ke.query=null,ke.fragment=null,ke.cannotBeABaseURL=!1,Ct=Ct.replace(K,"")),Ct=Ct.replace(ge,""),In=S(Ct);Ln<=In.length;){switch(gt=In[Ln],zt){case ut:if(!gt||!$.test(gt)){if(Ht)return H;zt=de;continue}Vt+=gt.toLowerCase(),zt=Ge;break;case Ge:if(gt&&(M.test(gt)||gt=="+"||gt=="-"||gt=="."))Vt+=gt.toLowerCase();else{if(gt!=":"){if(Ht)return H;Vt="",zt=de,Ln=0;continue}if(Ht&&(We(ke)!=w(at,Vt)||Vt=="file"&&(jt(ke)||ke.port!==null)||ke.scheme=="file"&&!ke.host))return;if(ke.scheme=Vt,Ht)return void(We(ke)&&at[ke.scheme]==ke.port&&(ke.port=null));Vt="",ke.scheme=="file"?zt=en:We(ke)&&xt&&xt.scheme==ke.scheme?zt=me:We(ke)?zt=Ve:In[Ln+1]=="/"?(zt=oe,Ln++):(ke.cannotBeABaseURL=!0,ke.path.push(""),zt=yi)}break;case de:if(!xt||xt.cannotBeABaseURL&&gt!="#")return H;if(xt.cannotBeABaseURL&&gt=="#"){ke.scheme=xt.scheme,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",ke.cannotBeABaseURL=!0,zt=Gs;break}zt=xt.scheme=="file"?en:be;continue;case me:if(gt!="/"||In[Ln+1]!="/"){zt=be;continue}zt=Qe,Ln++;break;case oe:if(gt=="/"){zt=St;break}zt=Rr;continue;case be:if(ke.scheme=xt.scheme,gt==d)ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query;else if(gt=="/"||gt=="\\"&&We(ke))zt=Oe;else if(gt=="?")ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query="",zt=Jl;else{if(gt!="#"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.path.pop(),zt=Rr;continue}ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=Gs}break;case Oe:if(!We(ke)||gt!="/"&&gt!="\\"){if(gt!="/"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,zt=Rr;continue}zt=St}else zt=Qe;break;case Ve:if(zt=Qe,gt!="/"||Vt.charAt(Ln+1)!="/")continue;Ln++;break;case Qe:if(gt=="/"||gt=="\\")break;zt=St;continue;case St:if(gt=="@"){ks&&(Vt="%40"+Vt);for(var ks=!0,Ba=S(Vt),bg=0;bg<Ba.length;bg++){var Qf=Ba[bg];Qf!=":"||hs?(Qf=$e(Qf,Fe),hs?ke.password+=Qf:ke.username+=Qf):hs=!0}Vt=""}else if(gt==d||gt=="/"||gt=="?"||gt=="#"||gt=="\\"&&We(ke)){if(ks&&Vt=="")return U;Ln-=S(Vt).length+1,Vt="",zt=Nt}else Vt+=gt;break;case Nt:case Ft:if(Ht&&ke.scheme=="file"){zt=ur;continue}if(gt!=":"||wa){if(gt==d||gt=="/"||gt=="?"||gt=="#"||gt=="\\"&&We(ke)){if(We(ke)&&Vt=="")return X;if(Ht&&Vt==""&&(jt(ke)||ke.port!==null))return;if(Yn=ne(ke,Vt))return Yn;if(Vt="",zt=Yr,Ht)return;continue}gt=="["?wa=!0:gt=="]"&&(wa=!1),Vt+=gt}else{if(Vt=="")return X;if(Yn=ne(ke,Vt))return Yn;if(Vt="",zt=Ut,Ht==Ft)return}break;case Ut:if(!z.test(gt)){if(gt==d||gt=="/"||gt=="?"||gt=="#"||gt=="\\"&&We(ke)||Ht){if(Vt!=""){var xg=parseInt(Vt,10);if(65535<xg)return fe;ke.port=We(ke)&&xg===at[ke.scheme]?null:xg,Vt=""}if(Ht)return;zt=Yr;continue}return fe}Vt+=gt;break;case en:if(ke.scheme="file",gt=="/"||gt=="\\")zt=Lr;else{if(!xt||xt.scheme!="file"){zt=Rr;continue}if(gt==d)ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query;else if(gt=="?")ke.host=xt.host,ke.path=xt.path.slice(),ke.query="",zt=Jl;else{if(gt!="#"){kt(In.slice(Ln).join(""))||(ke.host=xt.host,ke.path=xt.path.slice(),Rt(ke)),zt=Rr;continue}ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=Gs}}break;case Lr:if(gt=="/"||gt=="\\"){zt=ur;break}xt&&xt.scheme=="file"&&!kt(In.slice(Ln).join(""))&&(_t(xt.path[0],!0)?ke.path.push(xt.path[0]):ke.host=xt.host),zt=Rr;continue;case ur:if(gt==d||gt=="/"||gt=="\\"||gt=="?"||gt=="#"){if(!Ht&&_t(Vt))zt=Rr;else{if(Vt==""){if(ke.host="",Ht)return}else{if(Yn=ne(ke,Vt))return Yn;if(ke.host=="localhost"&&(ke.host=""),Ht)return;Vt=""}zt=Yr}continue}Vt+=gt;break;case Yr:if(We(ke)){if(zt=Rr,gt!="/"&&gt!="\\")continue}else if(Ht||gt!="?")if(Ht||gt!="#"){if(gt!=d&&(zt=Rr,gt!="/"))continue}else ke.fragment="",zt=Gs;else ke.query="",zt=Jl;break;case Rr:if(gt==d||gt=="/"||gt=="\\"&&We(ke)||!Ht&&(gt=="?"||gt=="#")){if(Be(Vt)?(Rt(ke),gt=="/"||gt=="\\"&&We(ke)||ke.path.push("")):Mt(Vt)?gt=="/"||gt=="\\"&&We(ke)||ke.path.push(""):(ke.scheme=="file"&&!ke.path.length&&_t(Vt)&&(ke.host&&(ke.host=""),Vt=Vt.charAt(0)+":"),ke.path.push(Vt)),Vt="",ke.scheme=="file"&&(gt==d||gt=="?"||gt=="#"))for(;1<ke.path.length&&ke.path[0]==="";)ke.path.shift();gt=="?"?(ke.query="",zt=Jl):gt=="#"&&(ke.fragment="",zt=Gs)}else Vt+=$e(gt,Te);break;case yi:gt=="?"?(ke.query="",zt=Jl):gt=="#"?(ke.fragment="",zt=Gs):gt!=d&&(ke.path[0]+=$e(gt,xe));break;case Jl:Ht||gt!="#"?gt!=d&&(gt=="'"&&We(ke)?ke.query+="%27":ke.query+=gt=="#"?"%23":$e(gt,xe)):(ke.fragment="",zt=Gs);break;case Gs:gt!=d&&(ke.fragment+=$e(gt,De))}Ln++}}function c(gt){var Ct,Ht,xt=v(this,c,"URL"),In=1<arguments.length?arguments[1]:void 0,gt=String(gt),Yn=P(xt,{type:"URL"});if(In!==void 0){if(In instanceof c)Ct=R(In);else if(Ht=u(Ct={},String(In)))throw TypeError(Ht)}if(Ht=u(Yn,gt,null,Ct))throw TypeError(Ht);var zt=Yn.searchParams=new D;(In=L(zt)).updateSearchParams(Yn.query),In.updateURL=function(){Yn.query=String(zt)||null},g||(xt.href=Ei.call(xt),xt.origin=Hn.call(xt),xt.protocol=Cl.call(xt),xt.username=ja.call(xt),xt.password=jo.call(xt),xt.host=El.call(xt),xt.hostname=yR.call(xt),xt.port=bR.call(xt),xt.pathname=xR.call(xt),xt.search=Cz.call(xt),xt.searchParams=vR.call(xt),xt.hash=wR.call(xt))}function f(ke,Ct){return{get:ke,set:Ct,configurable:!0,enumerable:!0}}var d,p,h,m=k("../internals/export"),g=k("../internals/descriptors"),y=k("../internals/native-url"),Eo=k("../internals/global"),b=k("../internals/object-define-properties"),x=k("../internals/redefine"),v=k("../internals/an-instance"),w=k("../internals/has"),_=k("../internals/object-assign"),S=k("../internals/array-from"),C=k("../internals/string-multibyte").codeAt,E=k("../internals/string-punycode-to-ascii"),T=k("../internals/set-to-string-tag"),I=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),F=Eo.URL,D=I.URLSearchParams,L=I.getState,P=k.set,R=k.getterFor("URL"),V=Math.floor,G=Math.pow,U="Invalid authority",H="Invalid scheme",X="Invalid host",fe="Invalid port",$=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,z=/\d/,q=/^(0x|0X)/,ee=/^[0-7]+$/,ae=/^\d+$/,Q=/^[\dA-Fa-f]+$/,le=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ie=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,K=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ge=/[\u0009\u000A\u000D]/g,ne=function(ke,Ct){var Ht,xt,In;if(Ct.charAt(0)=="[")return Ct.charAt(Ct.length-1)=="]"&&(Ht=function(gt){var Yn=[0,0,0,0,0,0,0,0],zt=0,Ln=null,Vt=0,ks,wa,hs,Ba,bg,Qf,xg,$a=function(){return gt.charAt(Vt)};if($a()==":"){if(gt.charAt(1)!=":")return;Vt+=2,zt++,Ln=zt}for(;$a();){if(zt==8)return;if($a()==":"){if(Ln!==null)return;Vt++,zt++,Ln=zt;continue}for(ks=wa=0;wa<4&&Q.test($a());)ks=ks*16+parseInt($a(),16),Vt++,wa++;if($a()=="."){if(wa==0||(Vt-=wa,zt>6))return;for(hs=0;$a();){if(Ba=null,hs>0)if($a()=="."&&hs<4)Vt++;else return;if(!z.test($a()))return;for(;z.test($a());){if(bg=parseInt($a(),10),Ba===null)Ba=bg;else{if(Ba==0)return;Ba=Ba*10+bg}if(Ba>255)return;Vt++}Yn[zt]=Yn[zt]*256+Ba,hs++,(hs==2||hs==4)&&zt++}if(hs!=4)return;break}else if($a()==":"){if(Vt++,!$a())return}else if($a())return;Yn[zt++]=ks}if(Ln!==null)for(Qf=zt-Ln,zt=7;zt!=0&&Qf>0;)xg=Yn[zt],Yn[zt--]=Yn[Ln+Qf-1],Yn[Ln+--Qf]=xg;else if(zt!=8)return;return Yn}(Ct.slice(1,-1)))?void(ke.host=Ht):X;if(We(ke))return Ct=E(Ct),le.test(Ct)||(Ht=function(gt){var Yn=gt.split("."),zt,Ln,Vt,ks,wa,hs,Ba;if(Yn.length&&Yn[Yn.length-1]==""&&Yn.pop(),(zt=Yn.length)>4)return gt;for(Ln=[],Vt=0;Vt<zt;Vt++){if(ks=Yn[Vt],ks=="")return gt;if(wa=10,ks.length>1&&ks.charAt(0)=="0"&&(wa=q.test(ks)?16:8,ks=ks.slice(wa==8?1:2)),ks==="")hs=0;else{if(!(wa==10?ae:wa==8?ee:Q).test(ks))return gt;hs=parseInt(ks,wa)}Ln.push(hs)}for(Vt=0;Vt<zt;Vt++)if(hs=Ln[Vt],Vt==zt-1){if(hs>=G(256,5-zt))return null}else if(hs>255)return null;for(Ba=Ln.pop(),Vt=0;Vt<Ln.length;Vt++)Ba+=Ln[Vt]*G(256,3-Vt);return Ba}(Ct))===null?X:void(ke.host=Ht);if(ie.test(Ct))return X;for(Ht="",xt=S(Ct),In=0;In<xt.length;In++)Ht+=$e(xt[In],xe);ke.host=Ht},ye=function(ke){for(var Ct=null,Ht=1,xt=null,In=0,gt=0;gt<8;gt++)ke[gt]!==0?(Ht<In&&(Ct=xt,Ht=In),xt=null,In=0):(xt===null&&(xt=gt),++In);return Ht<In&&(Ct=xt,Ht=In),Ct},xe={},De=_({},xe,{" ":1,'"':1,"<":1,">":1,"`":1}),Te=_({},De,{"#":1,"?":1,"{":1,"}":1}),Fe=_({},Te,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$e=function(ke,Ct){var Ht=C(ke,0);return 32<Ht&&Ht<127&&!w(Ct,ke)?ke:encodeURIComponent(ke)},at={ftp:21,file:null,http:80,https:443,ws:80,wss:443},We=function(ke){return w(at,ke.scheme)},jt=function(ke){return ke.username!=""||ke.password!=""},_t=function(ke,Ct){return ke.length==2&&$.test(ke.charAt(0))&&((ke=ke.charAt(1))==":"||!Ct&&ke=="|")},kt=function(ke){return 1<ke.length&&_t(ke.slice(0,2))&&(ke.length==2||(ke=ke.charAt(2))==="/"||ke==="\\"||ke==="?"||ke==="#")},Rt=function(ke){var Ct=ke.path,Ht=Ct.length;!Ht||ke.scheme=="file"&&Ht==1&&_t(Ct[0],!0)||Ct.pop()},Mt=function(ke){return ke==="."||ke.toLowerCase()==="%2e"},Be=function(ke){return(ke=ke.toLowerCase())===".."||ke==="%2e."||ke===".%2e"||ke==="%2e%2e"},ut={},Ge={},de={},me={},oe={},be={},Oe={},Ve={},Qe={},St={},Nt={},Ft={},Ut={},en={},Lr={},ur={},Yr={},Rr={},yi={},Jl={},Gs={},Eo=c.prototype,Ei=function(){var ke=R(this),Ct=ke.scheme,Ht=ke.username,xt=ke.password,In=ke.host,gt=ke.port,Yn=ke.path,zt=ke.query,Ln=ke.fragment,Vt=Ct+":";return In!==null?(Vt+="//",jt(ke)&&(Vt+=Ht+(xt?":"+xt:"")+"@"),Vt+=a(In),gt!==null&&(Vt+=":"+gt)):Ct=="file"&&(Vt+="//"),Vt+=ke.cannotBeABaseURL?Yn[0]:Yn.length?"/"+Yn.join("/"):"",zt!==null&&(Vt+="?"+zt),Ln!==null&&(Vt+="#"+Ln),Vt},Hn=function(){var ke=R(this),Ct=ke.scheme,Ht=ke.port;if(Ct=="blob")try{return new URL(Ct.path[0]).origin}catch{return"null"}return Ct!="file"&&We(ke)?Ct+"://"+a(ke.host)+(Ht!==null?":"+Ht:""):"null"},Cl=function(){return R(this).scheme+":"},ja=function(){return R(this).username},jo=function(){return R(this).password},El=function(){var Ct=R(this),ke=Ct.host,Ct=Ct.port;return ke===null?"":Ct===null?a(ke):a(ke)+":"+Ct},yR=function(){var ke=R(this).host;return ke===null?"":a(ke)},bR=function(){var ke=R(this).port;return ke===null?"":String(ke)},xR=function(){var ke=R(this),Ct=ke.path;return ke.cannotBeABaseURL?Ct[0]:Ct.length?"/"+Ct.join("/"):""},Cz=function(){var ke=R(this).query;return ke?"?"+ke:""},vR=function(){return R(this).searchParams},wR=function(){var ke=R(this).fragment;return ke?"#"+ke:""};g&&b(Eo,{href:f(Ei,function(Ht){var Ct=R(this),Ht=String(Ht),Ht=u(Ct,Ht);if(Ht)throw TypeError(Ht);L(Ct.searchParams).updateSearchParams(Ct.query)}),origin:f(Hn),protocol:f(Cl,function(ke){var Ct=R(this);u(Ct,String(ke)+":",ut)}),username:f(ja,function(ke){var Ct=R(this),Ht=S(String(ke));if(!l(Ct)){Ct.username="";for(var xt=0;xt<Ht.length;xt++)Ct.username+=$e(Ht[xt],Fe)}}),password:f(jo,function(ke){var Ct=R(this),Ht=S(String(ke));if(!l(Ct)){Ct.password="";for(var xt=0;xt<Ht.length;xt++)Ct.password+=$e(Ht[xt],Fe)}}),host:f(El,function(ke){var Ct=R(this);Ct.cannotBeABaseURL||u(Ct,String(ke),Nt)}),hostname:f(yR,function(ke){var Ct=R(this);Ct.cannotBeABaseURL||u(Ct,String(ke),Ft)}),port:f(bR,function(ke){var Ct=R(this);l(Ct)||((ke=String(ke))==""?Ct.port=null:u(Ct,ke,Ut))}),pathname:f(xR,function(ke){var Ct=R(this);Ct.cannotBeABaseURL||(Ct.path=[],u(Ct,ke+"",Yr))}),search:f(Cz,function(ke){var Ct=R(this);(ke=String(ke))==""?Ct.query=null:(ke.charAt(0)=="?"&&(ke=ke.slice(1)),Ct.query="",u(Ct,ke,Jl)),L(Ct.searchParams).updateSearchParams(Ct.query)}),searchParams:f(vR),hash:f(wR,function(ke){var Ct=R(this);(ke=String(ke))==""?Ct.fragment=null:(ke.charAt(0)=="#"&&(ke=ke.slice(1)),Ct.fragment="",u(Ct,ke,Gs))})}),x(Eo,"toJSON",function(){return Ei.call(this)},{enumerable:!0}),x(Eo,"toString",function(){return Ei.call(this)},{enumerable:!0}),F&&(p=F.createObjectURL,h=F.revokeObjectURL,p&&x(c,"createObjectURL",function(ke){return p.apply(F,arguments)}),h&&x(c,"revokeObjectURL",function(ke){return h.apply(F,arguments)})),T(c,"URL"),m({global:!0,forced:!y,sham:!g},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(o,i,s){"use strict";i.exports=o("./").polyfill()},{"./":247}],247:[function(o,i,s){(function(a,l){var u,c;u=this,c=function(){"use strict";function f(ne){return typeof ne=="function"}var d=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},p=0,h=void 0,m=void 0,g=function(ne,ye){_[p]=ne,_[p+1]=ye,(p+=2)===2&&(m?m(S):D())},y=typeof window<"u"?window:void 0,b=y||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var ne=setTimeout;return function(){return ne(S,1)}}var _=new Array(1e3);function S(){for(var ne=0;ne<p;ne+=2)(0,_[ne])(_[ne+1]),_[ne]=void 0,_[ne+1]=void 0;p=0}function C(){try{var ne=Function("return this")().require("vertx");return(h=ne.runOnLoop||ne.runOnContext)!==void 0?function(){h(S)}:w()}catch{return w()}}var E,T,I,D=void 0;function k(ne,ye){var xe,De=this,Te=new this.constructor(P),Fe=(Te[L]===void 0&&Q(Te),De._state);return Fe?(xe=arguments[Fe-1],g(function(){return ee(Fe,Te,xe,De._result)})):z(De,Te,ne,ye),Te}function F(ne){var ye;return ne&&typeof ne=="object"&&ne.constructor===this?ne:(X(ye=new this(P),ne),ye)}var D=x?function(){return a.nextTick(S)}:b?(T=0,x=new b(S),I=document.createTextNode(""),x.observe(I,{characterData:!0}),function(){I.data=T=++T%2}):v?((E=new MessageChannel).port1.onmessage=S,function(){return E.port2.postMessage(0)}):(y===void 0&&typeof o=="function"?C:w)(),L=Math.random().toString(36).substring(2);function P(){}var R=void 0,V=1,G=2;function U(ne,ye,xe){g(function(De){var Te=!1,Fe=function($e,at,We,jt){try{$e.call(at,We,jt)}catch(_t){return _t}}(xe,ye,function($e){Te||(Te=!0,(ye!==$e?X:$)(De,$e))},function($e){Te||(Te=!0,M(De,$e))},De._label);!Te&&Fe&&(Te=!0,M(De,Fe))},ne)}function H(ne,ye,xe){var De,Te;ye.constructor===ne.constructor&&xe===k&&ye.constructor.resolve===F?(De=ne,(Te=ye)._state===V?$(De,Te._result):Te._state===G?M(De,Te._result):z(Te,void 0,function(Fe){return X(De,Fe)},function(Fe){return M(De,Fe)})):xe!==void 0&&f(xe)?U(ne,ye,xe):$(ne,ye)}function X(ne,ye){if(ne===ye)M(ne,new TypeError("You cannot resolve a promise with itself"));else if(xe=typeof ye,ye===null||xe!="object"&&xe!="function")$(ne,ye);else{xe=void 0;try{xe=ye.then}catch(De){return void M(ne,De)}H(ne,ye,xe)}var xe}function fe(ne){ne._onerror&&ne._onerror(ne._result),q(ne)}function $(ne,ye){ne._state===R&&(ne._result=ye,ne._state=V,ne._subscribers.length!==0&&g(q,ne))}function M(ne,ye){ne._state===R&&(ne._state=G,ne._result=ye,g(fe,ne))}function z(ne,ye,xe,De){var Te=ne._subscribers,Fe=Te.length;ne._onerror=null,Te[Fe]=ye,Te[Fe+V]=xe,Te[Fe+G]=De,Fe===0&&ne._state&&g(q,ne)}function q(ne){var ye=ne._subscribers,xe=ne._state;if(ye.length!==0){for(var De,Te=void 0,Fe=ne._result,$e=0;$e<ye.length;$e+=3)De=ye[$e],Te=ye[$e+xe],De?ee(xe,De,Te,Fe):Te(Fe);ne._subscribers.length=0}}function ee(ne,ye,xe,De){var Te=f(xe),Fe=void 0,$e=void 0,at=!0;if(Te){try{Fe=xe(De)}catch(We){at=!1,$e=We}if(ye===Fe)return void M(ye,new TypeError("A promises callback cannot return that same promise."))}else Fe=De;ye._state===R&&(Te&&at?X(ye,Fe):at===!1?M(ye,$e):ne===V?$(ye,Fe):ne===G&&M(ye,Fe))}var ae=0;function Q(ne){ne[L]=ae++,ne._state=void 0,ne._result=void 0,ne._subscribers=[]}ie.prototype._enumerate=function(ne){for(var ye=0;this._state===R&&ye<ne.length;ye++)this._eachEntry(ne[ye],ye)},ie.prototype._eachEntry=function(ne,ye){var xe=this._instanceConstructor,De=xe.resolve;if(De===F){var Te,Fe=void 0,$e=void 0,at=!1;try{Fe=ne.then}catch(We){at=!0,$e=We}Fe===k&&ne._state!==R?this._settledAt(ne._state,ye,ne._result):typeof Fe!="function"?(this._remaining--,this._result[ye]=ne):xe===K?(Te=new xe(P),at?M(Te,$e):H(Te,ne,Fe),this._willSettleAt(Te,ye)):this._willSettleAt(new xe(function(We){return We(ne)}),ye)}else this._willSettleAt(De(ne),ye)},ie.prototype._settledAt=function(ne,ye,xe){var De=this.promise;De._state===R&&(this._remaining--,ne===G?M(De,xe):this._result[ye]=xe),this._remaining===0&&$(De,this._result)},ie.prototype._willSettleAt=function(ne,ye){var xe=this;z(ne,void 0,function(De){return xe._settledAt(V,ye,De)},function(De){return xe._settledAt(G,ye,De)})};var le=ie;function ie(ne,ye){this._instanceConstructor=ne,this.promise=new ne(P),this.promise[L]||Q(this.promise),d(ye)?(this.length=ye.length,this._remaining=ye.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ye),this._remaining!==0)||$(this.promise,this._result)):M(this.promise,new Error("Array Methods must be provided an Array"))}ge.prototype.catch=function(ne){return this.then(null,ne)},ge.prototype.finally=function(ne){var ye=this.constructor;return f(ne)?this.then(function(xe){return ye.resolve(ne()).then(function(){return xe})},function(xe){return ye.resolve(ne()).then(function(){throw xe})}):this.then(ne,ne)};var K=ge;function ge(ne){if(this[L]=ae++,this._result=this._state=void 0,this._subscribers=[],P!==ne){if(typeof ne!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ge))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ye=this;try{ne(function(xe){X(ye,xe)},function(xe){M(ye,xe)})}catch(xe){M(ye,xe)}}}return K.prototype.then=k,K.all=function(ne){return new le(this,ne).promise},K.race=function(ne){var ye=this;return d(ne)?new ye(function(xe,De){for(var Te=ne.length,Fe=0;Fe<Te;Fe++)ye.resolve(ne[Fe]).then(xe,De)}):new ye(function(xe,De){return De(new TypeError("You must pass an array to race."))})},K.resolve=F,K.reject=function(ne){var ye=new this(P);return M(ye,ne),ye},K._setScheduler=function(ne){m=ne},K._setAsap=function(ne){g=ne},K._asap=g,K.polyfill=function(){var ne=void 0;if(l!==void 0)ne=l;else if(typeof self<"u")ne=self;else try{ne=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ye=ne.Promise;if(ye){var xe=null;try{xe=Object.prototype.toString.call(ye.resolve())}catch{}if(xe==="[object Promise]"&&!ye.cast)return}ne.Promise=K},K.Promise=K},typeof s=="object"&&i!==void 0?i.exports=c():typeof t=="function"&&t.amd?t(c):u.ES6Promise=c()}).call(this,o("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(o,i,s){var a,l;a=this,l=function(u,c){"use strict";var f=5e3,d="callback";function p(m){try{delete window[m]}catch{window[m]=void 0}}function h(m){m=document.getElementById(m),m&&document.getElementsByTagName("head")[0].removeChild(m)}c.exports=function(m){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=m,b=g.timeout||f,x=g.jsonpCallback||d,v=void 0;return new Promise(function(w,_){var S=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),C=x+"_"+S,E=(window[S]=function(T){w({ok:!0,json:function(){return Promise.resolve(T)}}),v&&clearTimeout(v),h(C),p(S)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));E.setAttribute("src",""+y+x+"="+S),g.charset&&E.setAttribute("charset",g.charset),E.id=C,document.getElementsByTagName("head")[0].appendChild(E),v=setTimeout(function(){_(new Error("JSONP request to "+m+" timed out")),p(S),h(C),window[S]=function(){p(S)}},b),E.onerror=function(){_(new Error("JSONP request to "+m+" failed")),p(S),h(C),v&&clearTimeout(v)}})}},typeof t=="function"&&t.amd?t(["exports","module"],l):s!==void 0&&i!==void 0?l(0,i):(l(l={exports:{}},l),a.fetchJsonp=l.exports)},{}],249:[function(o,i,s){var a=function(l){"use strict";var u,c,f,d,p,h,m,g,y,b,x;if(!(l===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=l.document,u=function(){return l.URL||l.webkitURL||l},c=x.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in c,d=/constructor/i.test(l.HTMLElement)||l.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(v){(l.setImmediate||l.setTimeout)(function(){throw v},0)},m=4e4,g=function(v){setTimeout(function(){typeof v=="string"?u().revokeObjectURL(v):v.remove()},m)},y=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v},x=(b=function(v,w,T){T||(v=y(v));var S,C,E=this,T=v.type==="application/octet-stream",I=function(){for(var k=E,F="writestart progress write writeend".split(" "),D=void 0,L=(F=[].concat(F)).length;L--;){var P=k["on"+F[L]];if(typeof P=="function")try{P.call(k,D||k)}catch(R){h(R)}}};E.readyState=E.INIT,f?(S=u().createObjectURL(v),setTimeout(function(){var k,F;c.href=S,c.download=w,k=c,F=new MouseEvent("click"),k.dispatchEvent(F),I(),g(S),E.readyState=E.DONE})):(p||T&&d)&&l.FileReader?((C=new FileReader).onloadend=function(){var k=p?C.result:C.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(k,"_blank")||(l.location.href=k),k=void 0,E.readyState=E.DONE,I()},C.readAsDataURL(v),E.readyState=E.INIT):(S=S||u().createObjectURL(v),!T&&l.open(S,"_blank")||(l.location.href=S),E.readyState=E.DONE,I(),g(S))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(v,w,_){return w=w||v.name||"download",_||(v=y(v)),navigator.msSaveOrOpenBlob(v,w)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(v,w,_){return new b(v,w||v.name||"download",_)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=a:t!=null&&t.amd!==null&&t("FileSaver.js",function(){return a})},{}],250:[function(o,i,s){var a,l=Object.defineProperty,u=(l(s,"__esModule",{value:!0}),s),c={GIFEncoder:()=>I,applyPalette:()=>function(R,V,G="rgb565"){if(!R||!R.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(R instanceof Uint8Array||R instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<V.length)throw new Error("applyPalette() only works with 256 colors or less");let U=new Uint32Array(R.buffer),H=U.length,X=G==="rgb444"?4096:65536,fe=new Uint8Array(H),$=new Array(X);if(G==="rgba4444")for(let ge=0;ge<H;ge++){var ee=U[ge],M=ee>>24&255,z=ee>>16&255,q=ee>>8&255,ee=255&ee,ae=g(ee,q,z,M),ae=ae in $?$[ae]:$[ae]=function(ne,ye,xe,De,Te){let Fe=0,$e=1e100;for(let _t=0;_t<Te.length;_t++){var at,We=Te[_t],jt=C(We[3]-De);jt>$e||(at=We[0],(jt+=C(at-ne))>$e||(at=We[1],(jt+=C(at-ye))>$e||(at=We[2],(jt+=C(at-xe))>$e||($e=jt,Fe=_t))))}return Fe}(ee,q,z,M,V);fe[ge]=ae}else{let ge=G==="rgb444"?y:m;for(let ne=0;ne<H;ne++){var ie=U[ne],Q=ie>>16&255,le=ie>>8&255,ie=255&ie,K=ge(ie,le,Q),K=K in $?$[K]:$[K]=function(ye,xe,De,Te){let Fe=0,$e=1e100;for(let _t=0;_t<Te.length;_t++){var at,We=Te[_t],jt=C(We[0]-ye);jt>$e||(at=We[1],(jt+=C(at-xe))>$e||(at=We[2],(jt+=C(at-De))>$e||($e=jt,Fe=_t)))}return Fe}(ie,le,Q,V);fe[ne]=K}}return fe},default:()=>P,nearestColor:()=>function(R,V,G=_){return R[E(R,V,G)]},nearestColorIndex:()=>E,nearestColorIndexWithDistance:()=>T,prequantize:()=>function(R,{roundRGB:V=5,roundAlpha:G=10,oneBitAlpha:U=null}={}){let H=new Uint32Array(R.buffer);for(let z=0;z<H.length;z++){var M=H[z];let q=M>>24&255;var X,fe=M>>16&255,$=M>>8&255,M=255&M;q=S(q,G),U&&(X=typeof U=="number"?U:127,q=q<=X?0:255),M=S(M,V),$=S($,V),fe=S(fe,V),H[z]=q<<24|fe<<16|$<<8|M<<0}},quantize:()=>function(R,V,G={}){var{format:U="rgb565",clearAlpha:H=!0,clearAlphaColor:X=0,clearAlphaThreshold:fe=0,oneBitAlpha:$=!1}=G;if(!R||!R.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(R instanceof Uint8Array||R instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");R=new Uint32Array(R.buffer);let M=G.useSqrt!==!1,z=U==="rgba4444",q=function(kt,Rt){let Mt=Rt==="rgb444"?4096:65536,Be=new Array(Mt),ut=kt.length;if(Rt==="rgba4444")for(let Lr=0;Lr<ut;++Lr){var oe=kt[Lr],Ge=oe>>24&255,de=oe>>16&255,me=oe>>8&255,oe=255&oe,be=g(oe,me,de,Ge);let ur=be in Be?Be[be]:Be[be]=w();ur.rc+=oe,ur.gc+=me,ur.bc+=de,ur.ac+=Ge,ur.cnt++}else if(Rt==="rgb444")for(let Lr=0;Lr<ut;++Lr){var Qe=kt[Lr],Oe=Qe>>16&255,Ve=Qe>>8&255,Qe=255&Qe,St=y(Qe,Ve,Oe);let ur=St in Be?Be[St]:Be[St]=w();ur.rc+=Qe,ur.gc+=Ve,ur.bc+=Oe,ur.cnt++}else for(let Lr=0;Lr<ut;++Lr){var Ut=kt[Lr],Nt=Ut>>16&255,Ft=Ut>>8&255,Ut=255&Ut,en=m(Ut,Ft,Nt);let ur=en in Be?Be[en]:Be[en]=w();ur.rc+=Ut,ur.gc+=Ft,ur.bc+=Nt,ur.cnt++}return Be}(R,U),ee=q.length,ae=ee-1,Q=new Uint32Array(ee+1);for(var le=0,ie=0;ie<ee;++ie){let kt=q[ie];kt!=null&&(We=1/kt.cnt,z&&(kt.ac*=We),kt.rc*=We,kt.gc*=We,kt.bc*=We,q[le++]=kt)}x(V)/le<.022&&(M=!1);for(var K,ge,ne,ie=0;ie<le-1;++ie)q[ie].fw=ie+1,q[ie+1].bk=ie,M&&(q[ie].cnt=Math.sqrt(q[ie].cnt));for(M&&(q[ie].cnt=Math.sqrt(q[ie].cnt)),ie=0;ie<le;++ie){v(q,ie,!1);var ye=q[ie].err;for(ge=++Q[0];1<ge&&(ne=ge>>1,!(q[K=Q[ne]].err<=ye));ge=ne)Q[ge]=K;Q[ge]=ie}var xe,De=le-V;for(ie=0;ie<De;){for(;;){var Te=Q[1];if((xe=q[Te]).tm>=xe.mtm&&q[xe.nn].mtm<=xe.tm)break;for(xe.mtm==ae?Te=Q[1]=Q[Q[0]--]:(v(q,Te,!1),xe.tm=ie),ye=q[Te].err,ge=1;(ne=ge+ge)<=Q[0]&&(ne<Q[0]&&q[Q[ne]].err>q[Q[ne+1]].err&&ne++,!(ye<=q[K=Q[ne]].err));ge=ne)Q[ge]=K;Q[ge]=Te}var Fe=q[xe.nn],$e=xe.cnt,at=Fe.cnt,We=1/($e+at);z&&(xe.ac=We*($e*xe.ac+at*Fe.ac)),xe.rc=We*($e*xe.rc+at*Fe.rc),xe.gc=We*($e*xe.gc+at*Fe.gc),xe.bc=We*($e*xe.bc+at*Fe.bc),xe.cnt+=Fe.cnt,xe.mtm=++ie,q[Fe.bk].fw=Fe.fw,q[Fe.fw].bk=Fe.bk,Fe.mtm=ae}let jt=[];for(ie=0;;0){let kt=b(Math.round(q[ie].rc),0,255),Rt=b(Math.round(q[ie].gc),0,255),Mt=b(Math.round(q[ie].bc),0,255),Be=255;z&&(Be=b(Math.round(q[ie].ac),0,255),$&&(_t=typeof $=="number"?$:127,Be=Be<=_t?0:255),H&&Be<=fe&&(kt=Rt=Mt=X,Be=0));var _t=z?[kt,Rt,Mt,Be]:[kt,Rt,Mt];if(function(ut,Ge){for(let oe=0;oe<ut.length;oe++){var me=ut[oe],de=me[0]===Ge[0]&&me[1]===Ge[1]&&me[2]===Ge[2],me=!(4<=me.length&&4<=Ge.length)||me[3]===Ge[3];if(de&&me)return!0}return!1}(jt,_t)||jt.push(_t),(ie=q[ie].fw)==0)break}return jt},snapColorsToPalette:()=>function(R,V,G=5){if(R.length&&V.length){var U=R.map(M=>M.slice(0,3)),H=G*G,X=R[0].length;for(let M=0;M<V.length;M++){let z=V[M];z=z.length<X?[z[0],z[1],z[2],255]:z.length>X?z.slice(0,3):z.slice();var $=T(U,z.slice(0,3),_),fe=$[0],$=$[1];0<$&&$<=H&&(R[fe]=z)}}}};for(a in c)l(u,a,{get:c[a],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function d(R=256){let V=0,G=new Uint8Array(R);return{get buffer(){return G.buffer},reset(){V=0},bytesView(){return G.subarray(0,V)},bytes(){return G.slice(0,V)},writeByte(H){U(V+1),G[V]=H,V++},writeBytes(H,X=0,fe=H.length){U(V+fe);for(let $=0;$<fe;$++)G[V++]=H[$+X]},writeBytesView(H,X=0,fe=H.byteLength){U(V+fe),G.set(H.subarray(X,X+fe),V),V+=fe}};function U(H){var X=G.length;if(!(H<=X)){H=Math.max(H,X*(X<1048576?2:1.125)>>>0),X!=0&&(H=Math.max(H,256));let fe=G;G=new Uint8Array(H),0<V&&G.set(fe.subarray(0,V),0)}}}var p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],h=function(R,V,G,z,H=d(512),X=new Uint8Array(256),fe=new Int32Array(5003),$=new Int32Array(5003)){var M=fe.length,z=Math.max(2,z);X.fill(0),$.fill(0),fe.fill(-1);let q=0,ee=0;var ae=z+1;let Q=ae,le=!1,ie=Q,K=(1<<ie)-1;var ge=1<<ae-1;let ne=1+ge,ye=2+ge,xe=0,De=G[0],Te=0;for(let _t=M;_t<65536;_t*=2)++Te;Te=8-Te,H.writeByte(z),jt(ge);var Fe=G.length;for(let _t=1;_t<Fe;_t++)e:{var $e=G[_t],at=($e<<12)+De;let kt=$e<<Te^De;if(fe[kt]===at)De=$[kt];else{for(var We=kt===0?1:M-kt;0<=fe[kt];)if((kt-=We)<0&&(kt+=M),fe[kt]===at){De=$[kt];break e}jt(De),De=$e,ye<4096?($[kt]=ye++,fe[kt]=at):(fe.fill(-1),ye=2+ge,le=!0,jt(ge))}}return jt(De),jt(ne),H.writeByte(0),H.bytesView();function jt(_t){for(q&=p[ee],0<ee?q|=_t<<ee:q=_t,ee+=ie;8<=ee;)X[xe++]=255&q,254<=xe&&(H.writeByte(xe),H.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;if((ye>K||le)&&(le?(ie=Q,K=(1<<ie)-1,le=!1):(++ie,K=ie===12?1<<ie:(1<<ie)-1)),_t==ne){for(;0<ee;)X[xe++]=255&q,254<=xe&&(H.writeByte(xe),H.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;0<xe&&(H.writeByte(xe),H.writeBytesView(X,0,xe),xe=0)}}};function m(R,V,G){return R<<8&63488|V<<2&992|G>>3}function g(R,V,G,U){return R>>4|240&V|(240&G)<<4|(240&U)<<8}function y(R,V,G){return R>>4<<8|240&V|G>>4}function b(R,V,G){return R<V?V:G<R?G:R}function x(R){return R*R}function v(R,V,G){var U=0,H=1e100;let X=R[V];for(var fe=X.cnt,$=X.ac,M=X.rc,z=X.gc,q=X.bc,ee=X.fw;ee!=0;ee=R[ee].fw){var ae,Q=R[ee],le=Q.cnt,le=fe*le/(fe+le);H<=le||(ae=0,G&&H<=(ae+=le*x(Q.ac-$))||H<=(ae+=le*x(Q.rc-M))||H<=(ae+=le*x(Q.gc-z))||H<=(ae+=le*x(Q.bc-q))||(H=ae,U=ee))}X.err=H,X.nn=U}function w(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function _(R,V){for(var G=0,U=0;U<R.length;U++){var H=R[U]-V[U];G+=H*H}return G}function S(R,V){return 1<V?Math.round(R/V)*V:R}function C(R){return R*R}function E(R,V,G=_){let U=1/0,H=-1;for(let fe=0;fe<R.length;fe++){var X=G(V,R[fe]);X<U&&(U=X,H=fe)}return H}function T(R,V,G=_){let U=1/0,H=-1;for(let fe=0;fe<R.length;fe++){var X=G(V,R[fe]);X<U&&(U=X,H=fe)}return[H,U]}function I(R={}){let{initialCapacity:V=4096,auto:G=!0}=R,U=d(V),H=new Uint8Array(256),X=new Int32Array(5003),fe=new Int32Array(5003),$=!1;return{reset(){U.reset(),$=!1},finish(){U.writeByte(f.trailer)},bytes(){return U.bytes()},bytesView(){return U.bytesView()},get buffer(){return U.buffer},get stream(){return U},writeHeader:M,writeFrame(z,q,ee,De={}){var{transparent:Q=!1,transparentIndex:le=0,delay:We=0,palette:ie=null,repeat:Fe=0,colorDepth:K=8,dispose:ge=-1}=De;let ne=!1;if(G?$||(ne=!0,M(),$=!0):ne=!!De.first,q=Math.max(0,Math.floor(q)),ee=Math.max(0,Math.floor(ee)),ne){if(!ie)throw new Error("First frame must include a { palette } option");var[De,$e,xe,at,Te=8]=[U,q,ee,ie,K];at=L(at.length)-1,Te=128|Te-1<<4|at,F(De,$e),F(De,xe),De.writeBytes([Te,0,0]),k(U,ie),0<=Fe&&(at=U,$e=Fe,at.writeByte(33),at.writeByte(255),at.writeByte(11),D(at,"NETSCAPE2.0"),at.writeByte(3),at.writeByte(1),F(at,$e),at.writeByte(0))}var ye,xe=Math.round(We/10),De=U,Te=ge,Fe=xe,$e=Q,at=le,We=(De.writeByte(33),De.writeByte(249),De.writeByte(4),at<0&&(at=0,$e=!1),$e=$e?(ye=1,2):ye=0,0<=Te&&($e=7&Te),$e<<=2,De.writeByte(0|$e|ye),F(De,Fe),De.writeByte(at||0),De.writeByte(0),!!ie&&!ne);ge=U,Q=q,le=ee,ye=We?ie:null,ge.writeByte(44),F(ge,0),F(ge,0),F(ge,Q),F(ge,le),ye?(Q=L(ye.length)-1,ge.writeByte(128|Q)):ge.writeByte(0),We&&k(U,ie),[Fe,De,le,Q,ge=8,We,ie,z]=[U,z,q,ee,K,H,X,fe],h(le,Q,De,ge,Fe,We,ie,z)}};function M(){D(U,"GIF89a")}}function k(R,V){var G=1<<L(V.length);for(let U=0;U<G;U++){let H=[0,0,0];U<V.length&&(H=V[U]),R.writeByte(H[0]),R.writeByte(H[1]),R.writeByte(H[2])}}function F(R,V){R.writeByte(255&V),R.writeByte(V>>8&255)}function D(R,V){for(var G=0;G<V.length;G++)R.writeByte(V.charCodeAt(G))}function L(R){return Math.max(Math.ceil(Math.log2(R)),1)}var P=I},{}],251:[function(o,i,s){s.read=function(a,l,u,c,v){var d,p,h=8*v-c-1,m=(1<<h)-1,g=m>>1,y=-7,b=u?v-1:0,x=u?-1:1,v=a[l+b];for(b+=x,d=v&(1<<-y)-1,v>>=-y,y+=h;0<y;d=256*d+a[l+b],b+=x,y-=8);for(p=d&(1<<-y)-1,d>>=-y,y+=c;0<y;p=256*p+a[l+b],b+=x,y-=8);if(d===0)d=1-g;else{if(d===m)return p?NaN:1/0*(v?-1:1);p+=Math.pow(2,c),d-=g}return(v?-1:1)*p*Math.pow(2,d-c)},s.write=function(a,l,u,c,f,w){var p,h,m=8*w-f-1,g=(1<<m)-1,y=g>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:w-1,v=c?1:-1,w=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(h=isNaN(l)?1:0,p=g):(p=Math.floor(Math.log(l)/Math.LN2),l*(c=Math.pow(2,-p))<1&&(p--,c*=2),2<=(l+=1<=p+y?b/c:b*Math.pow(2,1-y))*c&&(p++,c/=2),g<=p+y?(h=0,p=g):1<=p+y?(h=(l*c-1)*Math.pow(2,f),p+=y):(h=l*Math.pow(2,y-1)*Math.pow(2,f),p=0));8<=f;a[u+x]=255&h,x+=v,h/=256,f-=8);for(p=p<<f|h,m+=f;0<m;a[u+x]=255&p,x+=v,p/=256,m-=8);a[u+x-v]|=128*w}},{}],252:[function(o,i,s){"use strict";var a;function l(de,me){return de.b===me.b&&de.a===me.a}function u(de,me){return de.b<me.b||de.b===me.b&&de.a<=me.a}function c(de,me,oe){var be=me.b-de.b,Oe=oe.b-me.b;return 0<be+Oe?be<Oe?me.a-de.a+be/(be+Oe)*(de.a-oe.a):me.a-oe.a+Oe/(be+Oe)*(oe.a-de.a):0}function f(de,me,oe){var be=me.b-de.b,Oe=oe.b-me.b;return 0<be+Oe?(me.a-oe.a)*be+(me.a-de.a)*Oe:0}function d(de,me){return de.a<me.a||de.a===me.a&&de.b<=me.b}function p(de,me,oe){var be=me.a-de.a,Oe=oe.a-me.a;return 0<be+Oe?be<Oe?me.b-de.b+be/(be+Oe)*(de.b-oe.b):me.b-oe.b+Oe/(be+Oe)*(oe.b-de.b):0}function h(de,me,oe){var be=me.a-de.a,Oe=oe.a-me.a;return 0<be+Oe?(me.b-oe.b)*be+(me.b-de.b)*Oe:0}function m(de,me,oe,be){return(de=de<0?0:de)<=(oe=oe<0?0:oe)?oe===0?(me+be)/2:me+de/(de+oe)*(be-me):be+oe/(de+oe)*(me-be)}function g(de){var me=w(de.b);return S(me,de.c),S(me.b,de.c),C(me,de.a),me}function y(de,me){var oe=!1,be=!1;de!==me&&(me.a!==de.a&&(be=!0,T(me.a,de.a)),me.d!==de.d&&(oe=!0,I(me.d,de.d)),_(me,de),be||(S(me,de.a),de.a.c=de),oe||(C(me,de.d),de.d.a=de))}function b(de){var me=de.b,oe=!1;de.d!==de.b.d&&(oe=!0,I(de.d,de.b.d)),de.c===de?T(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,_(de,de.b.e),oe||C(de,de.d)),me.c===me?(T(me.a,null),I(me.d,null)):(de.d.a=me.b.e,me.a.c=me.c,_(me,me.b.e)),E(de)}function x(de){var me=w(de),oe=me.b;return _(me,de.e),me.a=de.b.a,S(oe,me.a),me.d=oe.d=de.d,me=me.b,_(de.b,de.b.b.e),_(de.b,me),de.b.a=me.a,me.b.a.c=me.b,me.b.d=de.b.d,me.f=de.f,me.b.f=de.b.f,me}function v(de,me){var oe=!1,be=w(de),Oe=be.b;return me.d!==de.d&&(oe=!0,I(me.d,de.d)),_(be,de.e),_(Oe,me),be.a=de.b.a,Oe.a=me.a,be.d=Oe.d=de.d,de.d.a=Oe,oe||C(be,de.d),be}function w(de){var me=new xe,oe=new xe,be=de.b.h;return(((oe.h=be).b.h=me).h=de).b.h=oe,me.b=oe,((me.c=me).e=oe).b=me,(oe.c=oe).e=me}function _(de,me){var oe=de.c,be=me.c;oe.b.e=me,(be.b.e=de).c=be,me.c=oe}function S(de,me){var oe=me.f,be=new Te(me,oe);for(oe.e=be,oe=(me.f=be).c=de;oe.a=be,(oe=oe.c)!==de;);}function C(de,me){var oe=me.d,be=new ye(me,oe);for(oe.b=be,(me.d=be).a=de,be.c=me.c,oe=de;oe.d=be,(oe=oe.e)!==de;);}function E(de){var me=de.h;de=de.b.h,(me.b.h=de).b.h=me}function T(de,me){for(var oe=de.c,be=oe;be.a=me,(be=be.c)!==oe;);oe=de.f,((be=de.e).f=oe).e=be}function I(de,me){for(var oe=de.a,be=oe;be.d=me,(be=be.e)!==oe;);oe=de.d,((be=de.b).d=oe).b=be}function k(de){var me=0;return Math.abs(de[1])>Math.abs(de[0])&&(me=1),me=Math.abs(de[2])>Math.abs(de[me])?2:me}function F(de,me){de.f+=me.f,de.b.f+=me.b.f}function D(de,me,oe){return de=de.a,me=me.a,oe=oe.a,me.b.a===de?oe.b.a===de?u(me.a,oe.a)?f(oe.b.a,me.a,oe.a)<=0:0<=f(me.b.a,oe.a,me.a):f(oe.b.a,de,oe.a)<=0:oe.b.a===de?0<=f(me.b.a,de,me.a):(me=c(me.b.a,de,me.a),(de=c(oe.b.a,de,oe.a))<=me)}function L(de){de.a.i=null;var me=de.e;me.a.c=me.c,me.c.a=me.a,de.e=null}function P(de,me){b(de.a),de.c=!1,(de.a=me).i=de}function R(de){for(var me=de.a.a;(de=Ge(de)).a.a===me;);return de.c&&(P(de,me=v(ut(de).a.b,de.a.e)),de=Ge(de)),de}function V(de,me,oe){var be=new Be;return be.a=oe,be.e=le(de.f,me.e,be),oe.i=be}function G(de,me){switch(de.s){case 100130:return(1&me)!=0;case 100131:return me!==0;case 100132:return 0<me;case 100133:return me<0;case 100134:return 2<=me||me<=-2}return!1}function U(de){var me=de.a,oe=me.d;oe.c=de.d,oe.a=me,L(de)}function H(de,me,oe){for(me=(de=me).a;de!==oe;){de.c=!1;var be=ut(de),Oe=be.a;if(Oe.a!==me.a){if(!be.c){U(de);break}P(be,Oe=v(me.c.b,Oe.b))}me.c!==Oe&&(y(Oe.b.e,Oe),y(me,Oe)),U(de),me=be.a,de=be}return me}function X(de,me,oe,be,Oe,Ve){for(var Qe=!0;V(de,me,oe.b),(oe=oe.c)!==be;);for(Oe===null&&(Oe=ut(me).a.b.c);(oe=(be=ut(me)).a.b).a===Oe.a;)oe.c!==Oe&&(y(oe.b.e,oe),y(Oe.b.e,oe)),be.f=me.f-oe.f,be.d=G(de,be.f),me.b=!0,!Qe&&z(de,me)&&(F(oe,Oe),L(me),b(Oe)),Qe=!1,me=be,Oe=oe;me.b=!0,Ve&&ee(de,me)}function fe(de,me,oe,be,Oe){var Ve=[me.g[0],me.g[1],me.g[2]];me.d=null,me.d=de.o&&de.o(Ve,oe,be,de.c)||null,me.d===null&&(Oe?de.n||(ne(de,100156),de.n=!0):me.d=oe[0])}function $(de,me,oe){var be=[null,null,null,null];be[0]=me.a.d,be[1]=oe.a.d,fe(de,me.a,be,[.5,.5,0,0],!1),y(me,oe)}function M(de,me,oe,be,Oe){var Ve=Math.abs(me.b-de.b)+Math.abs(me.a-de.a),Qe=Math.abs(oe.b-de.b)+Math.abs(oe.a-de.a),St=Oe+1;be[Oe]=.5*Qe/(Ve+Qe),be[St]=.5*Ve/(Ve+Qe),de.g[0]+=be[Oe]*me.g[0]+be[St]*oe.g[0],de.g[1]+=be[Oe]*me.g[1]+be[St]*oe.g[1],de.g[2]+=be[Oe]*me.g[2]+be[St]*oe.g[2]}function z(de,me){var oe=ut(me),be=me.a,Oe=oe.a;if(u(be.a,Oe.a)){if(0<f(Oe.b.a,be.a,Oe.a))return;if(l(be.a,Oe.a)){if(be.a!==Oe.a){var oe=de.e,Ve=be.a.h;if(0<=Ve){var Qe=(oe=oe.b).d,St=oe.e,Nt=oe.c,Ft=Nt[Ve];Qe[Ft]=Qe[oe.a],(Nt[Qe[Ft]]=Ft)<=--oe.a&&(Ft<=1||u(St[Qe[Ft>>1]],St[Qe[Ft]])?Rt:Mt)(oe,Ft),St[Ve]=null,Nt[Ve]=oe.b,oe.b=Ve}else for(oe.c[-(Ve+1)]=null;0<oe.a&&oe.c[oe.d[oe.a-1]]===null;)--oe.a;$(de,Oe.b.e,be)}}else x(Oe.b),y(be,Oe.b.e),me.b=oe.b=!0}else{if(f(be.b.a,Oe.a,be.a)<0)return;Ge(me).b=me.b=!0,x(be.b),y(Oe.b.e,be)}return 1}function q(de,me){var oe=ut(me),be=me.a,Oe=oe.a,Ve=be.a,Qe=Oe.a,St=be.b.a,Nt=Oe.b.a,Ft=new Te;if(f(St,de.a,Ve),f(Nt,de.a,Qe),!(Ve===Qe||Math.min(Ve.a,St.a)>Math.max(Qe.a,Nt.a))){if(u(Ve,Qe)){if(0<f(Nt,Ve,Qe))return}else if(f(St,Qe,Ve)<0)return;var Ut,en,Lr=St,ur=Ve,Yr=Nt,Rr=Qe;if(u(Lr,ur)||(Ut=Lr,Lr=ur,ur=Ut),u(Yr,Rr)||(Ut=Yr,Yr=Rr,Rr=Ut),u(Lr,Yr)||(Ut=Lr,Lr=Yr,Yr=Ut,Ut=ur,ur=Rr,Rr=Ut),u(Yr,ur)?u(ur,Rr)?((Ut=c(Lr,Yr,ur))+(en=c(Yr,ur,Rr))<0&&(Ut=-Ut,en=-en),Ft.b=m(Ut,Yr.b,en,ur.b)):((Ut=f(Lr,Yr,ur))+(en=-f(Lr,Rr,ur))<0&&(Ut=-Ut,en=-en),Ft.b=m(Ut,Yr.b,en,Rr.b)):Ft.b=(Yr.b+ur.b)/2,d(Lr,ur)||(Ut=Lr,Lr=ur,ur=Ut),d(Yr,Rr)||(Ut=Yr,Yr=Rr,Rr=Ut),d(Lr,Yr)||(Ut=Lr,Lr=Yr,Yr=Ut,Ut=ur,ur=Rr,Rr=Ut),d(Yr,ur)?d(ur,Rr)?((Ut=p(Lr,Yr,ur))+(en=p(Yr,ur,Rr))<0&&(Ut=-Ut,en=-en),Ft.a=m(Ut,Yr.a,en,ur.a)):((Ut=h(Lr,Yr,ur))+(en=-h(Lr,Rr,ur))<0&&(Ut=-Ut,en=-en),Ft.a=m(Ut,Yr.a,en,Rr.a)):Ft.a=(Yr.a+ur.a)/2,u(Ft,de.a)&&(Ft.b=de.a.b,Ft.a=de.a.a),Lr=u(Ve,Qe)?Ve:Qe,u(Lr,Ft)&&(Ft.b=Lr.b,Ft.a=Lr.a),l(Ft,Ve)||l(Ft,Qe))return z(de,me),0;if(!l(St,de.a)&&0<=f(St,de.a,Ft)||!l(Nt,de.a)&&f(Nt,de.a,Ft)<=0){if(Nt===de.a)x(be.b),y(Oe.b,be),be=ut(me=R(me)).a,H(de,ut(me),oe),X(de,me,be.b.e,be,be,!0);else{if(St!==de.a)return 0<=f(St,de.a,Ft)&&(Ge(me).b=me.b=!0,x(be.b),be.a.b=de.a.b,be.a.a=de.a.a),void(f(Nt,de.a,Ft)<=0&&(me.b=oe.b=!0,x(Oe.b),Oe.a.b=de.a.b,Oe.a.a=de.a.a));for(x(Oe.b),y(be.e,Oe.b.e),Qe=(Ve=oe=me).a.b.a;(Ve=Ge(Ve)).a.b.a===Qe;);Ve=ut(me=Ve).a.b.c,oe.a=Oe.b.e,X(de,me,(Oe=H(de,oe,null)).c,be.b.c,Ve,!0)}return 1}x(be.b),x(Oe.b),y(Oe.b.e,be),be.a.b=Ft.b,be.a.a=Ft.a,be.a.h=$e(de.e,be.a),be=be.a,Oe=[0,0,0,0],Ft=[Ve.d,St.d,Qe.d,Nt.d],be.g[0]=be.g[1]=be.g[2]=0,M(be,Ve,St,Oe,0),M(be,Qe,Nt,Oe,2),fe(de,be,Ft,Oe,!0),Ge(me).b=me.b=oe.b=!0}}function ee(de,me){for(var oe=ut(me);;){for(;oe.b;)oe=ut(me=oe);if(!me.b&&((me=Ge(oe=me))===null||!me.b))break;me.b=!1;var be=me.a,Oe=oe.a;if(Ve=be.b.a!==Oe.b.a)e:{var Ve,Qe=ut(Ve=me),St=Ve.a,Nt=Qe.a,Ft=void 0;if(u(St.b.a,Nt.b.a)){if(f(St.b.a,Nt.b.a,St.a)<0){Ve=!1;break e}Ge(Ve).b=Ve.b=!0,Ft=x(St),y(Nt.b,Ft),Ft.d.c=Ve.d}else{if(0<f(Nt.b.a,St.b.a,Nt.a)){Ve=!1;break e}Ve.b=Qe.b=!0,Ft=x(Nt),y(St.e,Nt.b),Ft.b.d.c=Ve.d}Ve=!0}if(Ve&&(oe.c?(L(oe),b(Oe),Oe=(oe=ut(me)).a):me.c&&(L(me),b(be),be=(me=Ge(oe)).a)),be.a!==Oe.a){if(be.b.a===Oe.b.a||me.c||oe.c||be.b.a!==de.a&&Oe.b.a!==de.a)z(de,me);else if(q(de,me))break}be.a===Oe.a&&be.b.a===Oe.b.a&&(F(Oe,be),L(me),b(be),me=Ge(oe))}}function ae(de,me){var oe=new Be,be=g(de.b);be.a.b=4e150,be.a.a=me,be.b.a.b=-4e150,be.b.a.a=me,de.a=be.b.a,oe.a=be,oe.f=0,oe.d=!1,oe.c=!1,oe.h=!0,oe.b=!1,be=le(be=de.f,be.a,oe),oe.e=be}function Q(de){this.a=new ie,this.b=de,this.c=D}function le(de,me,oe){for(;(me=me.c).b!==null&&!de.c(de.b,me.b,oe););return de=new ie(oe,me.a,me),me.a.c=de,me.a=de}function ie(de,me,oe){this.b=de||null,this.a=me||this,this.c=oe||this}function K(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ge(de,me){if(de.d!==me)for(;de.d!==me;)if(de.d<me)switch(de.d){case 0:ne(de,100151),de.u(null);break;case 1:ne(de,100152),de.t()}else switch(de.d){case 2:ne(de,100154),de.v();break;case 1:ne(de,100153),de.w()}}function ne(de,me){de.p&&de.p(me,de.c)}function ye(de,me){this.b=de||this,this.d=me||this,this.a=null,this.c=!1}function xe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function De(){this.c=new Te,this.a=new ye,this.b=new xe,this.d=new xe,this.b.b=this.d,this.d.b=this.b}function Te(de,me){this.e=de||this,this.f=me||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Fe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new We}function $e(de,me){var oe,be,Oe;return de.e?(2*(be=++(oe=de.b).a)>oe.f&&(oe.f*=2,oe.c=jt(oe.c,oe.f+1)),oe.b===0?Oe=be:(Oe=oe.b,oe.b=oe.c[oe.b]),oe.e[Oe]=me,oe.c[Oe]=be,oe.d[be]=Oe,oe.h&&Mt(oe,be),Oe):(oe=de.a++,de.c[oe]=me,-(oe+1))}function at(de){if(de.a===0)return kt(de.b);var me=de.c[de.d[de.a-1]];if(de.b.a!==0&&u(_t(de.b),me))return kt(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return me}function We(){this.d=jt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function jt(de,me){for(var oe=Array(me),be=0;be<de.length;be++)oe[be]=de[be];for(;be<me;be++)oe[be]=0;return oe}function _t(de){return de.e[de.d[1]]}function kt(de){var me=de.d,oe=de.e,be=de.c,Oe=me[1],Ve=oe[Oe];return 0<de.a&&(me[1]=me[de.a],be[me[1]]=1,oe[Oe]=null,be[Oe]=de.b,de.b=Oe,0<--de.a&&Rt(de,1)),Ve}function Rt(de,me){for(var oe=de.d,be=de.e,Oe=de.c,Ve=me,Qe=oe[Ve];;){var St=Ve<<1,Nt=(St<de.a&&u(be[oe[St+1]],be[oe[St]])&&(St+=1),oe[St]);if(St>de.a||u(be[Qe],be[Nt])){Oe[oe[Ve]=Qe]=Ve;break}Oe[oe[Ve]=Nt]=Ve,Ve=St}}function Mt(de,me){for(var oe=de.d,be=de.e,Oe=de.c,Ve=me,Qe=oe[Ve];;){var St=Ve>>1,Nt=oe[St];if(St==0||u(be[Nt],be[Qe])){Oe[oe[Ve]=Qe]=Ve;break}Oe[oe[Ve]=Nt]=Ve,Ve=St}}function Be(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ut(de){return de.e.c.b}function Ge(de){return de.e.a.b}(a=K.prototype).x=function(){ge(this,0)},a.B=function(de,me){switch(de){case 100142:return;case 100140:switch(me){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=me)}break;case 100141:return void(this.m=!!me);default:return void ne(this,100900)}ne(this,100901)},a.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ne(this,100900)}return!1},a.A=function(de,me,oe){this.j[0]=de,this.j[1]=me,this.j[2]=oe},a.z=function(de,me){var oe=me||null;switch(de){case 100100:case 100106:this.h=oe;break;case 100104:case 100110:this.l=oe;break;case 100101:case 100107:this.k=oe;break;case 100102:case 100108:this.i=oe;break;case 100103:case 100109:this.p=oe;break;case 100105:case 100111:this.o=oe;break;case 100112:this.r=oe;break;default:ne(this,100900)}},a.C=function(de,me){var oe=!1,be=[0,0,0];ge(this,2);for(var Oe=0;Oe<3;++Oe){var Ve=de[Oe];Ve<-1e150&&(Ve=-1e150,oe=!0),1e150<Ve&&(Ve=1e150,oe=!0),be[Oe]=Ve}oe&&ne(this,100155),(oe=this.q)===null?y(oe=g(this.b),oe.b):(x(oe),oe=oe.e),oe.a.d=me,oe.a.g[0]=be[0],oe.a.g[1]=be[1],oe.a.g[2]=be[2],oe.f=1,oe.b.f=-1,this.q=oe},a.u=function(de){ge(this,0),this.d=1,this.b=new De,this.c=de},a.t=function(){ge(this,1),this.d=2,this.q=null},a.v=function(){ge(this,2),this.d=1},a.w=function(){ge(this,1),this.d=0;var de,me,oe=this.j[0],be=this.j[1],Oe=this.j[2],Ve=!1,Qe=[oe,be,Oe];if(oe===0&&be===0&&Oe===0){for(var be=[-2e150,-2e150,-2e150],St=[2e150,2e150,2e150],Oe=[],Nt=[],oe=(Ve=this.b.c).e;oe!==Ve;oe=oe.e)for(var Ft=0;Ft<3;++Ft){var Ut=oe.g[Ft];Ut<St[Ft]&&(St[Ft]=Ut,Nt[Ft]=oe),Ut>be[Ft]&&(be[Ft]=Ut,Oe[Ft]=oe)}if(be[1]-St[1]>be[oe=0]-St[0]&&(oe=1),St[oe=be[2]-St[2]>be[oe]-St[oe]?2:oe]>=be[oe])Qe[0]=0,Qe[1]=0,Qe[2]=1;else{for(St=Nt[oe],Oe=Oe[oe],Nt=[be=0,0,0],St=[St.g[0]-Oe.g[0],St.g[1]-Oe.g[1],St.g[2]-Oe.g[2]],Ft=[0,0,0],oe=Ve.e;oe!==Ve;oe=oe.e)Ft[0]=oe.g[0]-Oe.g[0],Ft[1]=oe.g[1]-Oe.g[1],Ft[2]=oe.g[2]-Oe.g[2],Nt[0]=St[1]*Ft[2]-St[2]*Ft[1],Nt[1]=St[2]*Ft[0]-St[0]*Ft[2],Nt[2]=St[0]*Ft[1]-St[1]*Ft[0],be<(Ut=Nt[0]*Nt[0]+Nt[1]*Nt[1]+Nt[2]*Nt[2])&&(be=Ut,Qe[0]=Nt[0],Qe[1]=Nt[1],Qe[2]=Nt[2]);be<=0&&(Qe[0]=Qe[1]=Qe[2]=0,Qe[k(St)]=1)}Ve=!0}for(Nt=k(Qe),oe=this.b.c,be=(Nt+1)%3,Oe=(Nt+2)%3,Nt=0<Qe[Nt]?1:-1,Qe=oe.e;Qe!==oe;Qe=Qe.e)Qe.b=Qe.g[be],Qe.a=Nt*Qe.g[Oe];if(Ve){for(Qe=0,oe=(Ve=this.b.a).b;oe!==Ve;oe=oe.b)if(!((be=oe.a).f<=0))for(;Qe+=(be.a.b-be.b.a.b)*(be.a.a+be.b.a.a),(be=be.e)!==oe.a;);if(Qe<0)for(Ve=(Qe=this.b.c).e;Ve!==Qe;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,Qe=this.b.b,oe=Qe.h;oe!==Qe;oe=Ve)Ve=oe.h,be=oe.e,l(oe.a,oe.b.a)&&oe.e.e!==oe&&($(this,be,oe),b(oe),be=(oe=be).e),be.e===oe&&(be!==oe&&(be!==Ve&&be!==Ve.b||(Ve=Ve.h),b(be)),oe!==Ve&&oe!==Ve.b||(Ve=Ve.h),b(oe));for(this.e=Qe=new Fe,Ve=this.b.c,oe=Ve.e;oe!==Ve;oe=oe.e)oe.h=$e(Qe,oe);var en=Qe;en.d=[];for(var Lr=0;Lr<en.a;Lr++)en.d[Lr]=Lr;en.d.sort(function(Rr){return function(yi,Jl){return u(Rr[yi],Rr[Jl])?1:-1}}(en.c)),en.e=!0;for(var ur=en.b,Yr=ur.a;1<=Yr;--Yr)Rt(ur,Yr);for(ur.h=!0,this.f=new Q(this),ae(this,-4e150),ae(this,4e150);(Qe=at(this.e))!==null;){for(;;){e:if((oe=this.e).a===0)Ve=_t(oe.b);else if(Ve=oe.c[oe.d[oe.a-1]],oe.b.a!==0&&u(oe=_t(oe.b),Ve)){Ve=oe;break e}if(Ve===null||!l(Ve,Qe))break;Ve=at(this.e),$(this,Qe.c,Ve.c)}(function Rr(yi,Jl){for(var Gs,Eo=(yi.a=Jl).c;Eo.i===null;)if((Eo=Eo.c)===Jl.c){var Eo=yi,Ei=Jl;(jo=new Be).a=Ei.c.b;for(var El=(Hn=Eo.f).a;(El=El.a).b!==null&&!Hn.c(Hn.b,jo,El.b););var Hn,Cl,ja=ut(Hn=El.b),jo=Hn.a,El=ja.a;return void(f(jo.b.a,Ei,jo.a)===0?l((jo=Hn.a).a,Ei)||l(jo.b.a,Ei)||(x(jo.b),Hn.c&&(b(jo.c),Hn.c=!1),y(Ei.c,jo),Rr(Eo,Ei)):(Cl=u(El.b.a,jo.b.a)?Hn:ja,ja=void 0,Hn.d||Cl.c?(ja=Cl===Hn?v(Ei.c.b,jo.e):v(El.b.c.b,Ei.c).b,Cl.c?P(Cl,ja):((Hn=V(jo=Eo,Hn,ja)).f=Ge(Hn).f+Hn.a.f,Hn.d=G(jo,Hn.f)),Rr(Eo,Ei)):X(Eo,Hn,Ei.c,Ei.c,null,!0)))}Hn=(jo=ut(Eo=R(Eo.i))).a,(jo=H(yi,jo,null)).c===Hn?(jo=(Hn=jo).c,El=ut(Eo),ja=Eo.a,Cl=El.a,Gs=!1,ja.b.a!==Cl.b.a&&q(yi,Eo),l(ja.a,yi.a)&&(y(jo.b.e,ja),jo=ut(Eo=R(Eo)).a,H(yi,ut(Eo),El),Gs=!0),l(Cl.a,yi.a)&&(y(Hn,Cl.b.e),Hn=H(yi,El,null),Gs=!0),Gs?X(yi,Eo,Hn.c,jo,jo,!0):(Ei=u(Cl.a,ja.a)?Cl.b.e:ja,X(yi,Eo,Ei=v(Hn.c.b,Ei),Ei.c,Ei.c,!1),Ei.b.i.c=!0,ee(yi,Eo))):X(yi,Eo,jo.c,Hn,Hn,!0)})(this,Qe)}for(this.a=this.f.a.a.b.a.a,Qe=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++Qe,L(Ve);for(this.f=null,(Qe=this.e).b=null,Qe.d=null,this.e=Qe.c=null,Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)Ve=oe.b,(oe=oe.a).e.e===oe&&(F(oe.c,oe),b(oe));if(!this.n){if(Qe=this.b,this.m)for(oe=Qe.b.h;oe!==Qe.b;oe=Ve)Ve=oe.h,oe.b.d.c!==oe.d.c?oe.f=oe.d.c?1:-1:b(oe);else for(oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,oe.c){for(oe=oe.a;u(oe.b.a,oe.a);oe=oe.c.b);for(;u(oe.a,oe.b.a);oe=oe.e);for(be=oe.c.b,Oe=void 0;oe.e!==be;)if(u(oe.b.a,be.a)){for(;be.e!==oe&&(u((me=be.e).b.a,me.a)||f(be.a,be.b.a,be.e.b.a)<=0);)be=(Oe=v(be.e,be)).b;be=be.c.b}else{for(;be.e!==oe&&(u((de=oe.c.b).a,de.b.a)||0<=f(oe.b.a,oe.a,oe.c.b.a));)oe=(Oe=v(oe,oe.c.b)).b;oe=oe.e}for(;be.e.e!==oe;)Oe=v(be.e,be),be=Oe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=(Qe=this.b).a.b;Ve!==Qe.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),oe=Ve.a;this.k&&this.k(oe.a.d,this.c),(oe=oe.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for(Qe=this.b,Ve=!!this.l,oe=!1,be=-1,Oe=Qe.a.d;Oe!==Qe.a;Oe=Oe.d)if(Oe.c)for(oe||(this.h&&this.h(4,this.c),oe=!0),Nt=Oe.a;Ve&&(St=Nt.b.d.c?0:1,be!==St&&(be=St,this.l&&this.l(!!be,this.c))),this.k&&this.k(Nt.a.d,this.c),(Nt=Nt.e)!==Oe.a;);oe&&this.i&&this.i(this.c)}if(this.r){for(Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,!oe.c){for(Oe=(be=oe.a).e,Nt=void 0;Oe=(Nt=Oe).e,(Nt.d=null)===Nt.b.d&&(Nt.c===Nt?T(Nt.a,null):(Nt.a.c=Nt.c,_(Nt,Nt.b.e)),(St=Nt.b).c===St?T(St.a,null):(St.a.c=St.c,_(St,St.b.e)),E(Nt)),Nt!==be;);be=oe.d,((oe=oe.b).d=be).b=oe}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:K,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},K.prototype.gluDeleteTess=K.prototype.x,K.prototype.gluTessProperty=K.prototype.B,K.prototype.gluGetTessProperty=K.prototype.y,K.prototype.gluTessNormal=K.prototype.A,K.prototype.gluTessCallback=K.prototype.z,K.prototype.gluTessVertex=K.prototype.C,K.prototype.gluTessBeginPolygon=K.prototype.u,K.prototype.gluTessBeginContour=K.prototype.t,K.prototype.gluTessEndContour=K.prototype.v,K.prototype.gluTessEndPolygon=K.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(o,i,s){"use strict";function a(u,c,f,d){var p=0,h=(d=d===void 0?{}:d).loop===void 0?null:d.loop,m=d.palette===void 0?null:d.palette;if(c<=0||f<=0||65535<c||65535<f)throw new Error("Width/Height invalid.");function g(C){if(C=C.length,C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}u[p++]=71,u[p++]=73,u[p++]=70,u[p++]=56,u[p++]=57,u[p++]=97;var y=0,b=0;if(m!==null){for(var x=g(m);x>>=1;)++y;if(x=1<<y,--y,d.background!==void 0){if(x<=(b=d.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(u[p++]=255&c,u[p++]=c>>8&255,u[p++]=255&f,u[p++]=f>>8&255,u[p++]=(m!==null?128:0)|y,u[p++]=b,u[p++]=0,m!==null)for(var v=0,w=m.length;v<w;++v){var _=m[v];u[p++]=_>>16&255,u[p++]=_>>8&255,u[p++]=255&_}if(h!==null){if(h<0||65535<h)throw new Error("Loop count invalid.");u[p++]=33,u[p++]=255,u[p++]=11,u[p++]=78,u[p++]=69,u[p++]=84,u[p++]=83,u[p++]=67,u[p++]=65,u[p++]=80,u[p++]=69,u[p++]=50,u[p++]=46,u[p++]=48,u[p++]=3,u[p++]=1,u[p++]=255&h,u[p++]=h>>8&255,u[p++]=0}var S=!1;this.addFrame=function(C,E,T,I,k,F){if(S===!0&&(--p,S=!1),F=F===void 0?{}:F,C<0||E<0||65535<C||65535<E)throw new Error("x/y invalid.");if(T<=0||I<=0||65535<T||65535<I)throw new Error("Width/Height invalid.");if(k.length<T*I)throw new Error("Not enough pixels for the frame size.");var D=!0,L=F.palette;if(L==null&&(D=!1,L=m),L==null)throw new Error("Must supply either a local or global palette.");for(var R=g(L),P=0;R>>=1;)++P;var R=1<<P,V=F.delay===void 0?0:F.delay,G=F.disposal===void 0?0:F.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var U=!1,H=0;if(F.transparent!==void 0&&F.transparent!==null&&(U=!0,(H=F.transparent)<0||R<=H))throw new Error("Transparent color index.");if(G===0&&!U&&V===0||(u[p++]=33,u[p++]=249,u[p++]=4,u[p++]=G<<2|(U===!0?1:0),u[p++]=255&V,u[p++]=V>>8&255,u[p++]=H,u[p++]=0),u[p++]=44,u[p++]=255&C,u[p++]=C>>8&255,u[p++]=255&E,u[p++]=E>>8&255,u[p++]=255&T,u[p++]=T>>8&255,u[p++]=255&I,u[p++]=I>>8&255,u[p++]=D===!0?128|P-1:0,D===!0)for(var X=0,fe=L.length;X<fe;++X){var $=L[X];u[p++]=$>>16&255,u[p++]=$>>8&255,u[p++]=255&$}return p=function(M,z,q,ee){M[z++]=q;var ae=z++,Q=1<<q,le=Q-1,ie=1+Q,K=1+ie,ge=q+1,ne=0,ye=0;function xe(kt){for(;kt<=ne;)M[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(M[ae]=255,ae=z++)}function De(kt){ye|=kt<<ne,ne+=ge,xe(8)}var Te=ee[0]&le,Fe={};De(Q);for(var $e=1,at=ee.length;$e<at;++$e){var We=ee[$e]&le,jt=Te<<8|We,_t=Fe[jt];if(_t===void 0){for(ye|=Te<<ne,ne+=ge;8<=ne;)M[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(M[ae]=255,ae=z++);K===4096?(De(Q),K=1+ie,ge=q+1,Fe={}):(1<<ge<=K&&++ge,Fe[jt]=K++),Te=We}else Te=_t}return De(Te),De(ie),xe(1),ae+1===z?M[ae]=0:(M[ae]=z-ae-1,M[z++]=0),z}(u,p,P<2?2:P,k)},this.end=function(){return S===!1&&(u[p++]=59,S=!0),p},this.getOutputBuffer=function(){return u},this.setOutputBuffer=function(C){u=C},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(C){p=C}}function l(u,c,f,d){for(var p=u[c++],h=1<<p,m=1+h,g=1+m,y=p+1,b=(1<<y)-1,x=0,v=0,w=0,_=u[c++],S=new Int32Array(4096),C=null;;){for(;x<16&&_!==0;)v|=u[c++]<<x,x+=8,_===1?_=u[c++]:--_;if(x<y)break;var E=v&b;if(v>>=y,x-=y,E==h)g=1+m,b=(1<<(y=p+1))-1,C=null;else{if(E==m)break;for(var T=E<g?E:C,I=0,k=T;h<k;)k=S[k]>>8,++I;var F=k;if(d<w+I+(T!==E?1:0))return void console.log("Warning, gif stream longer than expected.");f[w++]=F;var D=w+=I;for(T!==E&&(f[w++]=F),k=T;I--;)k=S[k],f[--D]=255&k,k>>=8;C!==null&&g<4096&&(S[g++]=C<<8|F,b+1<=g&&y<12&&(++y,b=b<<1|1)),C=E}}w!==d&&console.log("Warning, gif stream shorter than expected.")}try{s.GifWriter=a,s.GifReader=function(u){var c=0;if(u[c++]!==71||u[c++]!==73||u[c++]!==70||u[c++]!==56||(u[c++]+1&253)!=56||u[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=u[c++]|u[c++]<<8,d=u[c++]|u[c++]<<8,p=u[c++],h=1<<1+(7&p),m=(u[c++],u[c++],null),g=null,y=(p>>7&&(m=c,c+=3*(g=h)),!0),b=[],x=0,v=null,w=0,_=null;for(this.width=f,this.height=d;y&&c<u.length;)switch(u[c++]){case 33:switch(u[c++]){case 255:if(u[c]!==11||u[c+1]==78&&u[c+2]==69&&u[c+3]==84&&u[c+4]==83&&u[c+5]==67&&u[c+6]==65&&u[c+7]==80&&u[c+8]==69&&u[c+9]==50&&u[c+10]==46&&u[c+11]==48&&u[c+12]==3&&u[c+13]==1&&u[c+16]==0)c+=14,_=u[c++]|u[c++]<<8,c++;else for(c+=12;;){if(!(0<=(C=u[c++])))throw Error("Invalid block size");if(C===0)break;c+=C}break;case 249:if(u[c++]!==4||u[c+4]!==0)throw new Error("Invalid graphics extension block.");var S=u[c++],x=u[c++]|u[c++]<<8,v=u[c++];!(1&S)&&(v=null),w=S>>2&7,c++;break;case 254:for(;;){if(!(0<=(C=u[c++])))throw Error("Invalid block size");if(C===0)break;c+=C}break;default:throw new Error("Unknown graphic control label: 0x"+u[c-1].toString(16))}break;case 44:var C,E=u[c++]|u[c++]<<8,T=u[c++]|u[c++]<<8,I=u[c++]|u[c++]<<8,k=u[c++]|u[c++]<<8,V=u[c++],F=V>>6&1,D=1<<1+(7&V),L=m,P=g,R=!1,V=(V>>7&&(R=!0,L=c,c+=3*(P=D)),c);for(c++;;){if(!(0<=(C=u[c++])))throw Error("Invalid block size");if(C===0)break;c+=C}b.push({x:E,y:T,width:I,height:k,has_local_palette:R,palette_offset:L,palette_size:P,data_offset:V,data_length:c-V,transparent_index:v,interlaced:!!F,delay:x,disposal:w});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+u[c-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return _},this.frameInfo=function(G){if(G<0||G>=b.length)throw new Error("Frame index out of range.");return b[G]},this.decodeAndBlitFrameBGRA=function(G,U){for(var G=this.frameInfo(G),H=G.width*G.height,X=new Uint8Array(H),fe=(l(u,G.data_offset,X,H),G.palette_offset),$=G.transparent_index,M=($===null&&($=256),G.width),z=f-M,q=M,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),K=0,ge=X.length;K<ge;++K){var ne,ye,xe=X[K];q===0&&(q=M,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(M+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[fe+3*xe],ye=u[fe+3*xe+1],xe=u[fe+3*xe+2],U[Q++]=xe,U[Q++]=ye,U[Q++]=ne,U[Q++]=255),--q}},this.decodeAndBlitFrameRGBA=function(G,U){for(var G=this.frameInfo(G),H=G.width*G.height,X=new Uint8Array(H),fe=(l(u,G.data_offset,X,H),G.palette_offset),$=G.transparent_index,M=($===null&&($=256),G.width),z=f-M,q=M,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),K=0,ge=X.length;K<ge;++K){var ne,ye,xe=X[K];q===0&&(q=M,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(M+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[fe+3*xe],ye=u[fe+3*xe+1],xe=u[fe+3*xe+2],U[Q++]=ne,U[Q++]=ye,U[Q++]=xe,U[Q++]=255),--q}}}}catch{}},{}],254:[function(o,i,s){(function(a){var l,u;l=this,u=function(c){"use strict";function f(W){if(this==null)throw TypeError();var O,j=String(this),B=j.length,W=W?Number(W):0;if(!((W=W!=W?0:W)<0||B<=W))return 55296<=(O=j.charCodeAt(W))&&O<=56319&&W+1<B&&56320<=(B=j.charCodeAt(W+1))&&B<=57343?1024*(O-55296)+B-56320+65536:O}String.prototype.codePointAt||((d=function(){try{var A={},O=Object.defineProperty,j=O(A,A,A)&&O}catch{}return j}())?d(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var d,p=0,h=-3;function m(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(A,O){this.source=A,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=O,this.destLen=0,this.ltree=new m,this.dtree=new m}var y=new m,b=new m,x=new Uint8Array(30),v=new Uint16Array(30),w=new Uint8Array(30),_=new Uint16Array(30),S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new m,E=new Uint8Array(320);function T(A,O,j,B){for(var W,Z=0;Z<j;++Z)A[Z]=0;for(Z=0;Z<30-j;++Z)A[Z+j]=Z/j|0;for(W=B,Z=0;Z<30;++Z)O[Z]=W,W+=1<<A[Z]}var I=new Uint16Array(16);function k(A,O,j,B){for(var W,Z=0;Z<16;++Z)A.table[Z]=0;for(Z=0;Z<B;++Z)A.table[O[j+Z]]++;for(Z=W=A.table[0]=0;Z<16;++Z)I[Z]=W,W+=A.table[Z];for(Z=0;Z<B;++Z)O[j+Z]&&(A.trans[I[O[j+Z]]++]=Z)}function F(A,O,j){if(!O)return j;for(;A.bitcount<24;)A.tag|=A.source[A.sourceIndex++]<<A.bitcount,A.bitcount+=8;var B=A.tag&65535>>>16-O;return A.tag>>>=O,A.bitcount-=O,B+j}function D(A,O){for(;A.bitcount<24;)A.tag|=A.source[A.sourceIndex++]<<A.bitcount,A.bitcount+=8;for(var j=0,B=0,W=0,Z=A.tag;B=2*B+(1&Z),Z>>>=1,j+=O.table[++W],0<=(B-=O.table[W]););return A.tag=Z,A.bitcount-=W,O.trans[j+B]}function L(A,O,j){for(;;){var B=D(A,O);if(B===256)return p;if(B<256)A.dest[A.destLen++]=B;else for(var W,Z=F(A,x[B-=257],v[B]),B=D(A,j),te=W=A.destLen-F(A,w[B],_[B]);te<W+Z;++te)A.dest[A.destLen++]=A.dest[te]}}for(var P=y,R=b,V=0;V<7;++V)P.table[V]=0;for(P.table[7]=24,P.table[8]=152,P.table[9]=112,V=0;V<24;++V)P.trans[V]=256+V;for(V=0;V<144;++V)P.trans[24+V]=V;for(V=0;V<8;++V)P.trans[168+V]=280+V;for(V=0;V<112;++V)P.trans[176+V]=144+V;for(V=0;V<5;++V)R.table[V]=0;for(R.table[5]=32,V=0;V<32;++V)R.trans[V]=V;T(x,v,4,3),T(w,_,2,1),x[28]=0,v[28]=258;var G=function(A,O){var j,B,W,Z=new g(A,O);do{switch(W=void 0,(B=Z).bitcount--||(B.tag=B.source[B.sourceIndex++],B.bitcount=7),W=1&B.tag,B.tag>>>=1,B=W,F(Z,2,0)){case 0:j=function(Ye){for(var br,nn;8<Ye.bitcount;)Ye.sourceIndex--,Ye.bitcount-=8;if((br=256*Ye.source[Ye.sourceIndex+1]+Ye.source[Ye.sourceIndex])!==(65535&~(256*Ye.source[Ye.sourceIndex+3]+Ye.source[Ye.sourceIndex+2])))return h;for(Ye.sourceIndex+=4,nn=br;nn;--nn)Ye.dest[Ye.destLen++]=Ye.source[Ye.sourceIndex++];return Ye.bitcount=0,p}(Z);break;case 1:j=L(Z,y,b);break;case 2:ot=Xe=ht=He=te=Ae=Ue=qe=Re=ve=_e=he=void 0;for(var te,he=Z,_e=Z.ltree,ve=Z.dtree,Re=F(he,5,257),qe=F(he,5,1),Ue=F(he,4,4),Ae=0;Ae<19;++Ae)E[Ae]=0;for(Ae=0;Ae<Ue;++Ae){var ht=F(he,3,0);E[S[Ae]]=ht}for(k(C,E,0,19),te=0;te<Re+qe;){var Xe=D(he,C);switch(Xe){case 16:for(var ot=E[te-1],He=F(he,2,3);He;--He)E[te++]=ot;break;case 17:for(He=F(he,3,3);He;--He)E[te++]=0;break;case 18:for(He=F(he,7,11);He;--He)E[te++]=0;break;default:E[te++]=Xe}}k(_e,E,0,Re),k(ve,E,Re,qe),j=L(Z,Z.ltree,Z.dtree);break;default:j=h}if(j!==p)throw new Error("Data error")}while(!B);return Z.destLen<Z.dest.length?typeof Z.dest.slice=="function"?Z.dest.slice(0,Z.destLen):Z.dest.subarray(0,Z.destLen):Z.dest};function U(A,O,j,B,W){return Math.pow(1-W,3)*A+3*Math.pow(1-W,2)*W*O+3*(1-W)*Math.pow(W,2)*j+Math.pow(W,3)*B}function H(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function X(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function fe(A){throw new Error(A)}function $(A,O){A||fe(O)}H.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},H.prototype.addPoint=function(A,O){typeof A=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=A,this.x2=A),A<this.x1&&(this.x1=A),A>this.x2&&(this.x2=A)),typeof O=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=O,this.y2=O),O<this.y1&&(this.y1=O),O>this.y2&&(this.y2=O))},H.prototype.addX=function(A){this.addPoint(A,null)},H.prototype.addY=function(A){this.addPoint(null,A)},H.prototype.addBezier=function(A,O,j,B,W,Z,te,he){var _e=[A,O],ve=[j,B],Re=[W,Z],qe=[te,he];this.addPoint(A,O),this.addPoint(te,he);for(var Ue=0;Ue<=1;Ue++){var Ae,ht=6*_e[Ue]-12*ve[Ue]+6*Re[Ue],Xe=-3*_e[Ue]+9*ve[Ue]-9*Re[Ue]+3*qe[Ue],ot=3*ve[Ue]-3*_e[Ue];Xe==0?ht==0||0<(Ae=-ot/ht)&&Ae<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],Ae)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],Ae))):(Ae=Math.pow(ht,2)-4*ot*Xe)<0||(0<(ot=(-ht+Math.sqrt(Ae))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot))),0<(ot=(-ht-Math.sqrt(Ae))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Re[Ue],qe[Ue],ot))))}},H.prototype.addQuad=function(A,O,j,B,W,Z){j=A+2/3*(j-A),B=O+2/3*(B-O),this.addBezier(A,O,j,B,j+1/3*(W-A),B+1/3*(Z-O),W,Z)},X.prototype.moveTo=function(A,O){this.commands.push({type:"M",x:A,y:O})},X.prototype.lineTo=function(A,O){this.commands.push({type:"L",x:A,y:O})},X.prototype.curveTo=X.prototype.bezierCurveTo=function(A,O,j,B,W,Z){this.commands.push({type:"C",x1:A,y1:O,x2:j,y2:B,x:W,y:Z})},X.prototype.quadTo=X.prototype.quadraticCurveTo=function(A,O,j,B){this.commands.push({type:"Q",x1:A,y1:O,x:j,y:B})},X.prototype.close=X.prototype.closePath=function(){this.commands.push({type:"Z"})},X.prototype.extend=function(A){var O;if(A.commands)A=A.commands;else if(A instanceof H)return O=A,this.moveTo(O.x1,O.y1),this.lineTo(O.x2,O.y1),this.lineTo(O.x2,O.y2),this.lineTo(O.x1,O.y2),void this.close();Array.prototype.push.apply(this.commands,A)},X.prototype.getBoundingBox=function(){for(var A=new H,O=0,j=0,B=0,W=0,Z=0;Z<this.commands.length;Z++){var te=this.commands[Z];switch(te.type){case"M":A.addPoint(te.x,te.y),O=B=te.x,j=W=te.y;break;case"L":A.addPoint(te.x,te.y),B=te.x,W=te.y;break;case"Q":A.addQuad(B,W,te.x1,te.y1,te.x,te.y),B=te.x,W=te.y;break;case"C":A.addBezier(B,W,te.x1,te.y1,te.x2,te.y2,te.x,te.y),B=te.x,W=te.y;break;case"Z":B=O,W=j;break;default:throw new Error("Unexpected path command "+te.type)}}return A.isEmpty()&&A.addPoint(0,0),A},X.prototype.draw=function(A){A.beginPath();for(var O=0;O<this.commands.length;O+=1){var j=this.commands[O];j.type==="M"?A.moveTo(j.x,j.y):j.type==="L"?A.lineTo(j.x,j.y):j.type==="C"?A.bezierCurveTo(j.x1,j.y1,j.x2,j.y2,j.x,j.y):j.type==="Q"?A.quadraticCurveTo(j.x1,j.y1,j.x,j.y):j.type==="Z"&&A.closePath()}this.fill&&(A.fillStyle=this.fill,A.fill()),this.stroke&&(A.strokeStyle=this.stroke,A.lineWidth=this.strokeWidth,A.stroke())},X.prototype.toPathData=function(A){function O(){for(var Z=arguments,te="",he=0;he<arguments.length;he+=1){var _e=Z[he];0<=_e&&0<he&&(te+=" "),te+=(_e=_e,Math.round(_e)===_e?""+Math.round(_e):_e.toFixed(A))}return te}A=A!==void 0?A:2;for(var j="",B=0;B<this.commands.length;B+=1){var W=this.commands[B];W.type==="M"?j+="M"+O(W.x,W.y):W.type==="L"?j+="L"+O(W.x,W.y):W.type==="C"?j+="C"+O(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"?j+="Q"+O(W.x1,W.y1,W.x,W.y):W.type==="Z"&&(j+="Z")}return j},X.prototype.toSVG=function(A){var O=(O='<path d="')+this.toPathData(A)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?O+=' fill="none"':O+=' fill="'+this.fill+'"'),this.stroke&&(O+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),O+="/>"},X.prototype.toDOMElement=function(O){var O=this.toPathData(O),j=document.createElementNS("http://www.w3.org/2000/svg","path");return j.setAttribute("d",O),j};var M={fail:fe,argument:$,assert:$},z={},q={},ee={};function ae(A){return function(){return A}}q.BYTE=function(A){return M.argument(0<=A&&A<=255,"Byte value should be between 0 and 255."),[A]},ee.BYTE=ae(1),q.CHAR=function(A){return[A.charCodeAt(0)]},ee.CHAR=ae(1),q.CHARARRAY=function(A){for(var O=[],j=0;j<A.length;j+=1)O[j]=A.charCodeAt(j);return O},ee.CHARARRAY=function(A){return A.length},q.USHORT=function(A){return[A>>8&255,255&A]},ee.USHORT=ae(2),q.SHORT=function(A){return[(A=32768<=A?-(65536-A):A)>>8&255,255&A]},ee.SHORT=ae(2),q.UINT24=function(A){return[A>>16&255,A>>8&255,255&A]},ee.UINT24=ae(3),q.ULONG=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]},ee.ULONG=ae(4),q.LONG=function(A){return[(A=2147483648<=A?-(4294967296-A):A)>>24&255,A>>16&255,A>>8&255,255&A]},ee.LONG=ae(4),q.FIXED=q.ULONG,ee.FIXED=ee.ULONG,q.FWORD=q.SHORT,ee.FWORD=ee.SHORT,q.UFWORD=q.USHORT,ee.UFWORD=ee.USHORT,q.LONGDATETIME=function(A){return[0,0,0,0,A>>24&255,A>>16&255,A>>8&255,255&A]},ee.LONGDATETIME=ae(8),q.TAG=function(A){return M.argument(A.length===4,"Tag should be exactly 4 ASCII characters."),[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)]},ee.TAG=ae(4),q.Card8=q.BYTE,ee.Card8=ee.BYTE,q.Card16=q.USHORT,ee.Card16=ee.USHORT,q.OffSize=q.BYTE,ee.OffSize=ee.BYTE,q.SID=q.USHORT,ee.SID=ee.USHORT,q.NUMBER=function(A){return-107<=A&&A<=107?[A+139]:108<=A&&A<=1131?[247+((A-=108)>>8),255&A]:-1131<=A&&A<=-108?[251+((A=-A-108)>>8),255&A]:-32768<=A&&A<=32767?q.NUMBER16(A):q.NUMBER32(A)},ee.NUMBER=function(A){return q.NUMBER(A).length},q.NUMBER16=function(A){return[28,A>>8&255,255&A]},ee.NUMBER16=ae(3),q.NUMBER32=function(A){return[29,A>>24&255,A>>16&255,A>>8&255,255&A]},ee.NUMBER32=ae(5),q.REAL=function(A){for(var O=A.toString(),j=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(O),B=(j&&(j=parseFloat("1e"+((j[2]?+j[2]:0)+j[1].length)),O=(Math.round(A*j)/j).toString()),""),W=0,Z=O.length;W<Z;W+=1){var te=O[W];B+=te==="e"?O[++W]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var he=[30],_e=0,ve=(B+=1&B.length?"f":"ff").length;_e<ve;_e+=2)he.push(parseInt(B.substr(_e,2),16));return he},ee.REAL=function(A){return q.REAL(A).length},q.NAME=q.CHARARRAY,ee.NAME=ee.CHARARRAY,q.STRING=q.CHARARRAY,ee.STRING=ee.CHARARRAY,z.UTF8=function(A,O,j){for(var B=[],W=j,Z=0;Z<W;Z++,O+=1)B[Z]=A.getUint8(O);return String.fromCharCode.apply(null,B)},z.UTF16=function(A,O,j){for(var B=[],W=j/2,Z=0;Z<W;Z++,O+=2)B[Z]=A.getUint16(O);return String.fromCharCode.apply(null,B)},q.UTF16=function(A){for(var O=[],j=0;j<A.length;j+=1){var B=A.charCodeAt(j);O[O.length]=B>>8&255,O[O.length]=255&B}return O},ee.UTF16=function(A){return 2*A.length};var Q,le={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"},ie=(z.MACSTRING=function(A,O,j,B){var W=le[B];if(W!==void 0){for(var Z="",te=0;te<j;te++){var he=A.getUint8(O+te);Z+=he<=127?String.fromCharCode(he):W[127&he]}return Z}},typeof WeakMap=="function"&&new WeakMap);function K(A){return-128<=A&&A<=127}q.MACSTRING=function(A,O){var j=function(te){if(!Q)for(var he in Q={},le)Q[he]=new String(he);var _e=Q[te];if(_e!==void 0){if(ie){var ve=ie.get(_e);if(ve!==void 0)return ve}var Re=le[te];if(Re!==void 0){for(var qe={},Ue=0;Ue<Re.length;Ue++)qe[Re.charCodeAt(Ue)]=Ue+128;return ie&&ie.set(_e,qe),qe}}}(O);if(j!==void 0){for(var B=[],W=0;W<A.length;W++){var Z=A.charCodeAt(W);if(128<=Z&&(Z=j[Z])===void 0)return;B[W]=Z}return B}},ee.MACSTRING=function(A,O){return A=q.MACSTRING(A,O),A!==void 0?A.length:0},q.VARDELTAS=function(A){for(var B=0,O=[];B<A.length;)var j=A[B],B=(j===0?function(W,Z,te){for(var he=0,_e=W.length;Z<_e&&he<64&&W[Z]===0;)++Z,++he;return te.push(128|he-1),Z}:-128<=j&&j<=127?function(W,Z,te){for(var he=0,_e=W.length,ve=Z;ve<_e&&he<64;){var Re=W[ve];if(!K(Re)||Re===0&&ve+1<_e&&W[ve+1]===0)break;++ve,++he}te.push(he-1);for(var qe=Z;qe<ve;++qe)te.push(W[qe]+256&255);return ve}:function(W,Z,te){for(var he=0,_e=W.length,ve=Z;ve<_e&&he<64;){var Re=W[ve];if(Re===0||K(Re)&&ve+1<_e&&K(W[ve+1]))break;++ve,++he}te.push(64|he-1);for(var qe=Z;qe<ve;++qe){var Ue=W[qe];te.push(Ue+65536>>8&255,Ue+256&255)}return ve})(A,B,O);return O},q.INDEX=function(A){for(var O=1,j=[O],B=[],W=0;W<A.length;W+=1){var Z=q.OBJECT(A[W]);Array.prototype.push.apply(B,Z),O+=Z.length,j.push(O)}if(B.length===0)return[0,0];for(var te=[],he=1+Math.floor(Math.log(O)/Math.log(2))/8|0,_e=[void 0,q.BYTE,q.USHORT,q.UINT24,q.ULONG][he],ve=0;ve<j.length;ve+=1){var Re=_e(j[ve]);Array.prototype.push.apply(te,Re)}return Array.prototype.concat(q.Card16(A.length),q.OffSize(he),te,B)},ee.INDEX=function(A){return q.INDEX(A).length},q.DICT=function(A){for(var O=[],j=Object.keys(A),B=j.length,W=0;W<B;W+=1){var Z=parseInt(j[W],0),te=A[Z];O=(O=O.concat(q.OPERAND(te.value,te.type))).concat(q.OPERATOR(Z))}return O},ee.DICT=function(A){return q.DICT(A).length},q.OPERATOR=function(A){return A<1200?[A]:[12,A-1200]},q.OPERAND=function(A,O){var j=[];if(Array.isArray(O))for(var B=0;B<O.length;B+=1)M.argument(A.length===O.length,"Not enough arguments given for type"+O),j=j.concat(q.OPERAND(A[B],O[B]));else if(O==="SID")j=j.concat(q.NUMBER(A));else if(O==="offset")j=j.concat(q.NUMBER32(A));else if(O==="number")j=j.concat(q.NUMBER(A));else{if(O!=="real")throw new Error("Unknown operand type "+O);j=j.concat(q.REAL(A))}return j},q.OP=q.BYTE,ee.OP=ee.BYTE;var ge=typeof WeakMap=="function"&&new WeakMap;function ne(A,O,j){for(var B=0;B<O.length;B+=1){var W=O[B];this[W.name]=W.value}if(this.tableName=A,this.fields=O,j)for(var Z=Object.keys(j),te=0;te<Z.length;te+=1){var he=Z[te],_e=j[he];this[he]!==void 0&&(this[he]=_e)}}function ye(A,O,j){j===void 0&&(j=O.length);var B=new Array(O.length+1);B[0]={name:A+"Count",type:"USHORT",value:j};for(var W=0;W<O.length;W++)B[W+1]={name:A+W,type:"USHORT",value:O[W]};return B}function xe(A,O,j){var B=O.length,W=new Array(B+1);W[0]={name:A+"Count",type:"USHORT",value:B};for(var Z=0;Z<B;Z++)W[Z+1]={name:A+Z,type:"TABLE",value:j(O[Z],Z)};return W}function De(A,O,j){var B=O.length,W=[];W[0]={name:A+"Count",type:"USHORT",value:B};for(var Z=0;Z<B;Z++)W=W.concat(j(O[Z],Z));return W}function Te(A){A.format===1?ne.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ye("glyph",A.glyphs))):M.assert(!1,"Can't create coverage table format 2 yet.")}function Fe(A){ne.call(this,"scriptListTable",De("scriptRecord",A,function(O,j){var B=O.script,W=B.defaultLangSys;return M.assert(!!W,"Unable to write GSUB: script "+O.tag+" has no default language system."),[{name:"scriptTag"+j,type:"TAG",value:O.tag},{name:"script"+j,type:"TABLE",value:new ne("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ne("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:W.reqFeatureIndex}].concat(ye("featureIndex",W.featureIndexes)))}].concat(De("langSys",B.langSysRecords,function(Z,te){var he=Z.langSys;return[{name:"langSysTag"+te,type:"TAG",value:Z.tag},{name:"langSys"+te,type:"TABLE",value:new ne("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:he.reqFeatureIndex}].concat(ye("featureIndex",he.featureIndexes)))}]})))}]}))}function $e(A){ne.call(this,"featureListTable",De("featureRecord",A,function(O,j){var B=O.feature;return[{name:"featureTag"+j,type:"TAG",value:O.tag},{name:"feature"+j,type:"TABLE",value:new ne("featureTable",[{name:"featureParams",type:"USHORT",value:B.featureParams}].concat(ye("lookupListIndex",B.lookupListIndexes)))}]}))}function at(A,O){ne.call(this,"lookupListTable",xe("lookup",A,function(j){var B=O[j.lookupType];return M.assert(!!B,"Unable to write GSUB lookup type "+j.lookupType+" tables."),new ne("lookupTable",[{name:"lookupType",type:"USHORT",value:j.lookupType},{name:"lookupFlag",type:"USHORT",value:j.lookupFlag}].concat(xe("subtable",j.subtables,B)))}))}q.CHARSTRING=function(A){if(ge){var O=ge.get(A);if(O!==void 0)return O}for(var Z=[],j=A.length,B=0;B<j;B+=1)var W=A[B],Z=Z.concat(q[W.type](W.value));return ge&&ge.set(A,Z),Z},ee.CHARSTRING=function(A){return q.CHARSTRING(A).length},q.OBJECT=function(A){var O=q[A.type];return M.argument(O!==void 0,"No encoding function for type "+A.type),O(A.value)},ee.OBJECT=function(A){var O=ee[A.type];return M.argument(O!==void 0,"No sizeOf function for type "+A.type),O(A.value)},q.TABLE=function(A){for(var O=[],j=A.fields.length,B=[],W=[],Z=0;Z<j;Z+=1){var te=A.fields[Z],_e=q[te.type],he=(M.argument(_e!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),A[te.name]),_e=_e(he=he===void 0?te.value:he);te.type==="TABLE"?(W.push(O.length),O=O.concat([0,0]),B.push(_e)):O=O.concat(_e)}for(var ve=0;ve<B.length;ve+=1){var Re=W[ve],qe=O.length;M.argument(qe<65536,"Table "+A.tableName+" too big."),O[Re]=qe>>8,O[Re+1]=255&qe,O=O.concat(B[ve])}return O},ee.TABLE=function(A){for(var O=0,j=A.fields.length,B=0;B<j;B+=1){var W=A.fields[B],Z=ee[W.type],te=(M.argument(Z!==void 0,"No sizeOf function for field type "+W.type+" ("+W.name+")"),A[W.name]);O+=Z(te=te===void 0?W.value:te),W.type==="TABLE"&&(O+=2)}return O},q.RECORD=q.TABLE,ee.RECORD=ee.TABLE,q.LITERAL=function(A){return A},ee.LITERAL=function(A){return A.length},ne.prototype.encode=function(){return q.TABLE(this)},ne.prototype.sizeOf=function(){return ee.TABLE(this)};var We={Table:ne,Record:ne,Coverage:(Te.prototype=Object.create(ne.prototype)).constructor=Te,ScriptList:(Fe.prototype=Object.create(ne.prototype)).constructor=Fe,FeatureList:($e.prototype=Object.create(ne.prototype)).constructor=$e,LookupList:(at.prototype=Object.create(ne.prototype)).constructor=at,ushortList:ye,tableList:xe,recordList:De};function jt(A,O){return A.getUint8(O)}function _t(A,O){return A.getUint16(O,!1)}function kt(A,O){return A.getUint32(O,!1)}function Rt(A,O){return A.getInt16(O,!1)+A.getUint16(O+2,!1)/65535}var Mt={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Be(A,O){this.data=A,this.offset=O,this.relativeOffset=0}Be.prototype.parseByte=function(){var A=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,A},Be.prototype.parseChar=function(){var A=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,A},Be.prototype.parseCard8=Be.prototype.parseByte,Be.prototype.parseCard16=Be.prototype.parseUShort=function(){var A=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,A},Be.prototype.parseSID=Be.prototype.parseUShort,Be.prototype.parseOffset16=Be.prototype.parseUShort,Be.prototype.parseShort=function(){var A=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,A},Be.prototype.parseF2Dot14=function(){var A=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,A},Be.prototype.parseOffset32=Be.prototype.parseULong=function(){var A=kt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,A},Be.prototype.parseFixed=function(){var A=Rt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,A},Be.prototype.parseString=function(A){var O=this.data,j=this.offset+this.relativeOffset,B="";this.relativeOffset+=A;for(var W=0;W<A;W++)B+=String.fromCharCode(O.getUint8(j+W));return B},Be.prototype.parseTag=function(){return this.parseString(4)},Be.prototype.parseLongDateTime=function(){var A=kt(this.data,this.offset+this.relativeOffset+4);return A-=2082844800,this.relativeOffset+=8,A},Be.prototype.parseVersion=function(A){var O=_t(this.data,this.offset+this.relativeOffset),j=_t(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,O+j/(A=A===void 0?4096:A)/10},Be.prototype.skip=function(A,O){this.relativeOffset+=Mt[A]*(O=O===void 0?1:O)},Be.prototype.parseULongList=function(A){A===void 0&&(A=this.parseULong());for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getUint32(B),B+=4;return this.relativeOffset+=4*A,O},Be.prototype.parseOffset16List=Be.prototype.parseUShortList=function(A){A===void 0&&(A=this.parseUShort());for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getUint16(B),B+=2;return this.relativeOffset+=2*A,O},Be.prototype.parseShortList=function(A){for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getInt16(B),B+=2;return this.relativeOffset+=2*A,O},Be.prototype.parseByteList=function(A){for(var O=new Array(A),j=this.data,B=this.offset+this.relativeOffset,W=0;W<A;W++)O[W]=j.getUint8(B++);return this.relativeOffset+=A,O},Be.prototype.parseList=function(A,O){O||(O=A,A=this.parseUShort());for(var j=new Array(A),B=0;B<A;B++)j[B]=O.call(this);return j},Be.prototype.parseList32=function(A,O){O||(O=A,A=this.parseULong());for(var j=new Array(A),B=0;B<A;B++)j[B]=O.call(this);return j},Be.prototype.parseRecordList=function(A,O){O||(O=A,A=this.parseUShort());for(var j=new Array(A),B=Object.keys(O),W=0;W<A;W++){for(var Z={},te=0;te<B.length;te++){var he=B[te],_e=O[he];Z[he]=_e.call(this)}j[W]=Z}return j},Be.prototype.parseRecordList32=function(A,O){O||(O=A,A=this.parseULong());for(var j=new Array(A),B=Object.keys(O),W=0;W<A;W++){for(var Z={},te=0;te<B.length;te++){var he=B[te],_e=O[he];Z[he]=_e.call(this)}j[W]=Z}return j},Be.prototype.parseStruct=function(A){if(typeof A=="function")return A.call(this);for(var O=Object.keys(A),j={},B=0;B<O.length;B++){var W=O[B],Z=A[W];j[W]=Z.call(this)}return j},Be.prototype.parseValueRecord=function(A){var O;if((A=A===void 0?this.parseUShort():A)!==0)return O={},1&A&&(O.xPlacement=this.parseShort()),2&A&&(O.yPlacement=this.parseShort()),4&A&&(O.xAdvance=this.parseShort()),8&A&&(O.yAdvance=this.parseShort()),16&A&&(O.xPlaDevice=void 0,this.parseShort()),32&A&&(O.yPlaDevice=void 0,this.parseShort()),64&A&&(O.xAdvDevice=void 0,this.parseShort()),128&A&&(O.yAdvDevice=void 0,this.parseShort()),O},Be.prototype.parseValueRecordList=function(){for(var A=this.parseUShort(),O=this.parseUShort(),j=new Array(O),B=0;B<O;B++)j[B]=this.parseValueRecord(A);return j},Be.prototype.parsePointer=function(A){var O=this.parseOffset16();if(0<O)return new Be(this.data,this.offset+O).parseStruct(A)},Be.prototype.parsePointer32=function(A){var O=this.parseOffset32();if(0<O)return new Be(this.data,this.offset+O).parseStruct(A)},Be.prototype.parseListOfLists=function(A){for(var O=this.parseOffset16List(),j=O.length,B=this.relativeOffset,W=new Array(j),Z=0;Z<j;Z++){var te=O[Z];if(te===0)W[Z]=void 0;else if(this.relativeOffset=te,A){for(var he=this.parseOffset16List(),_e=new Array(he.length),ve=0;ve<he.length;ve++)this.relativeOffset=te+he[ve],_e[ve]=A.call(this);W[Z]=_e}else W[Z]=this.parseUShortList()}return this.relativeOffset=B,W},Be.prototype.parseCoverage=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort(),j=this.parseUShort();if(O===1)return{format:1,glyphs:this.parseUShortList(j)};if(O!==2)throw new Error("0x"+A.toString(16)+": Coverage format must be 1 or 2.");for(var B=new Array(j),W=0;W<j;W++)B[W]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:B}},Be.prototype.parseClassDef=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();if(O===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(O===2)return{format:2,ranges:this.parseRecordList({start:Be.uShort,end:Be.uShort,classId:Be.uShort})};throw new Error("0x"+A.toString(16)+": ClassDef format must be 1 or 2.")},Be.list=function(A,O){return function(){return this.parseList(A,O)}},Be.list32=function(A,O){return function(){return this.parseList32(A,O)}},Be.recordList=function(A,O){return function(){return this.parseRecordList(A,O)}},Be.recordList32=function(A,O){return function(){return this.parseRecordList32(A,O)}},Be.pointer=function(A){return function(){return this.parsePointer(A)}},Be.pointer32=function(A){return function(){return this.parsePointer32(A)}},Be.tag=Be.prototype.parseTag,Be.byte=Be.prototype.parseByte,Be.uShort=Be.offset16=Be.prototype.parseUShort,Be.uShortList=Be.prototype.parseUShortList,Be.uLong=Be.offset32=Be.prototype.parseULong,Be.uLongList=Be.prototype.parseULongList,Be.struct=Be.prototype.parseStruct,Be.coverage=Be.prototype.parseCoverage,Be.classDef=Be.prototype.parseClassDef;var ut={reserved:Be.uShort,reqFeatureIndex:Be.uShort,featureIndexes:Be.uShortList},Ge=(Be.prototype.parseScriptList=function(){return this.parsePointer(Be.recordList({tag:Be.tag,script:Be.pointer({defaultLangSys:Be.pointer(ut),langSysRecords:Be.recordList({tag:Be.tag,langSys:Be.pointer(ut)})})}))||[]},Be.prototype.parseFeatureList=function(){return this.parsePointer(Be.recordList({tag:Be.tag,feature:Be.pointer({featureParams:Be.offset16,lookupListIndexes:Be.uShortList})}))||[]},Be.prototype.parseLookupList=function(A){return this.parsePointer(Be.list(Be.pointer(function(){var O=this.parseUShort(),j=(M.argument(1<=O&&O<=9,"GPOS/GSUB lookup type "+O+" unknown."),this.parseUShort()),B=16&j;return{lookupType:O,lookupFlag:j,subtables:this.parseList(Be.pointer(A[O])),markFilteringSet:B?this.parseUShort():void 0}})))||[]},Be.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var A=this.parseUShort(),O=this.parseUShort();return M.argument(A===1&&O<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Be.offset32,featureTableSubstitutionOffset:Be.offset32})})||[]},{getByte:jt,getCard8:jt,getUShort:_t,getCard16:_t,getShort:function(A,O){return A.getInt16(O,!1)},getULong:kt,getFixed:Rt,getTag:function(A,O){for(var j="",B=O;B<O+4;B+=1)j+=String.fromCharCode(A.getInt8(B));return j},getOffset:function(A,O,j){for(var B=0,W=0;W<j;W+=1)B=(B<<=8)+A.getUint8(O+W);return B},getBytes:function(A,O,j){for(var B=[],W=O;W<j;W+=1)B.push(A.getUint8(W));return B},bytesToString:function(A){for(var O="",j=0;j<A.length;j+=1)O+=String.fromCharCode(A[j]);return O},Parser:Be}),de={parse:function(A,O){for(var j={},B=(j.version=Ge.getUShort(A,O),M.argument(j.version===0,"cmap table version should be 0."),j.numTables=Ge.getUShort(A,O+2),-1),W=j.numTables-1;0<=W;--W){var Z=Ge.getUShort(A,O+4+8*W),te=Ge.getUShort(A,O+4+8*W+2);if(Z===3&&(te===0||te===1||te===10)||Z===0&&(te===0||te===1||te===2||te===3||te===4)){B=Ge.getULong(A,O+4+8*W+4);break}}if(B===-1)throw new Error("No valid cmap sub-tables found.");var he=new Ge.Parser(A,O+B);if(j.format=he.parseUShort(),j.format===12){var _e,ve=j,Re=he;Re.parseUShort(),ve.length=Re.parseULong(),ve.language=Re.parseULong(),ve.groupCount=_e=Re.parseULong(),ve.glyphIndexMap={};for(var qe=0;qe<_e;qe+=1)for(var Ue=Re.parseULong(),Ae=Re.parseULong(),ht=Re.parseULong(),Xe=Ue;Xe<=Ae;Xe+=1)ve.glyphIndexMap[Xe]=ht,ht++}else{if(j.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+j.format+").");var ot=j,He=A,Ye=O,br=B;ot.length=he.parseUShort(),ot.language=he.parseUShort(),ot.segCount=nn=he.parseUShort()>>1,he.skip("uShort",3),ot.glyphIndexMap={};for(var nn,Sr=new Ge.Parser(He,Ye+br+14),Ar=new Ge.Parser(He,Ye+br+16+2*nn),wn=new Ge.Parser(He,Ye+br+16+4*nn),bi=new Ge.Parser(He,Ye+br+16+6*nn),ms=Ye+br+16+8*nn,qs=0;qs<nn-1;qs+=1)for(var eu=void 0,tu=Sr.parseUShort(),vh=Ar.parseUShort(),ei=wn.parseShort(),Ti=bi.parseUShort(),Do=vh;Do<=tu;Do+=1)Ti!==0?(ms=(ms=bi.offset+bi.relativeOffset-2)+Ti+2*(Do-vh),(eu=Ge.getUShort(He,ms))!==0&&(eu=eu+ei&65535)):eu=Do+ei&65535,ot.glyphIndexMap[Do]=eu}return j},make:function(A){for(var O=!0,j=A.length-1;0<j;--j)if(65535<A.get(j).unicode){console.log("Adding CMAP format 12 (needed!)"),O=!1;break}var B,W,Z=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:O?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:O?12:20}],te=(Z=(Z=O?Z:Z.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new We.Table("cmap",Z));for(te.segments=[],j=0;j<A.length;j+=1){for(var he=A.get(j),_e=0;_e<he.unicodes.length;_e+=1)B=he.unicodes[_e],W=j,te.segments.push({end:B,start:B,delta:-(B-W),offset:0,glyphIndex:W});te.segments=te.segments.sort(function(Ye,br){return Ye.start-br.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var ve=te.segments.length,Re=0,qe=[],Ue=[],Ae=[],ht=[],Xe=[],ot=[];for(j=0;j<ve;j+=1){var He=te.segments[j];He.end<=65535&&He.start<=65535?(qe=qe.concat({name:"end_"+j,type:"USHORT",value:He.end}),Ue=Ue.concat({name:"start_"+j,type:"USHORT",value:He.start}),Ae=Ae.concat({name:"idDelta_"+j,type:"SHORT",value:He.delta}),ht=ht.concat({name:"idRangeOffset_"+j,type:"USHORT",value:He.offset}),He.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+j,type:"USHORT",value:He.glyphId}))):Re+=1,O||He.glyphIndex===void 0||(ot=(ot=(ot=ot.concat({name:"cmap12Start_"+j,type:"ULONG",value:He.start})).concat({name:"cmap12End_"+j,type:"ULONG",value:He.end})).concat({name:"cmap12Glyph_"+j,type:"ULONG",value:He.glyphIndex}))}return te.segCountX2=2*(ve-Re),te.searchRange=2*Math.pow(2,Math.floor(Math.log(ve-Re)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(qe),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Ue),te.fields=te.fields.concat(Ae),te.fields=te.fields.concat(ht),te.fields=te.fields.concat(Xe),te.cmap4Length=14+2*qe.length+2+2*Ue.length+2*Ae.length+2*ht.length+2*Xe.length,O||(Z=16+4*ot.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Z},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ot.length/3}]),te.fields=te.fields.concat(ot)),te}},me=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],be=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Oe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(A){this.font=A}function Qe(A){this.cmap=A}function St(A,O){this.encoding=A,this.charset=O}function Nt(A){switch(A.version){case 1:this.names=Oe.slice();break;case 2:this.names=new Array(A.numberOfGlyphs);for(var O=0;O<A.numberOfGlyphs;O++)A.glyphNameIndex[O]<Oe.length?this.names[O]=Oe[A.glyphNameIndex[O]]:this.names[O]=A.names[A.glyphNameIndex[O]-Oe.length];break;case 2.5:this.names=new Array(A.numberOfGlyphs);for(var j=0;j<A.numberOfGlyphs;j++)this.names[j]=Oe[j+A.glyphNameIndex[j]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(A){var O=A.codePointAt(0),j=this.font.glyphs;if(j){for(var B=0;B<j.length;B+=1)for(var W=j.get(B),Z=0;Z<W.unicodes.length;Z+=1)if(W.unicodes[Z]===O)return B}return null},Qe.prototype.charToGlyphIndex=function(A){return this.cmap.glyphIndexMap[A.codePointAt(0)]||0},St.prototype.charToGlyphIndex=function(A){return A=A.codePointAt(0),A=this.encoding[A],this.charset.indexOf(A)},Nt.prototype.nameToGlyphIndex=function(A){return this.names.indexOf(A)},Nt.prototype.glyphIndexToName=function(A){return this.names[A]};var Ft={line:function(A,O,j,B,W){A.beginPath(),A.moveTo(O,j),A.lineTo(B,W),A.stroke()}};function Ut(A){this.bindConstructorValues(A)}function en(A,O,j){Object.defineProperty(A,O,{get:function(){return A.path,A[j]},set:function(B){A[j]=B},enumerable:!0,configurable:!0})}function Lr(A,O){if(this.font=A,this.glyphs={},Array.isArray(O))for(var j=0;j<O.length;j++)this.glyphs[j]=O[j];this.length=O&&O.length||0}Ut.prototype.bindConstructorValues=function(A){var O;this.index=A.index||0,this.name=A.name||null,this.unicode=A.unicode||void 0,this.unicodes=A.unicodes||A.unicode!==void 0?[A.unicode]:[],A.xMin&&(this.xMin=A.xMin),A.yMin&&(this.yMin=A.yMin),A.xMax&&(this.xMax=A.xMax),A.yMax&&(this.yMax=A.yMax),A.advanceWidth&&(this.advanceWidth=A.advanceWidth),Object.defineProperty(this,"path",(A=A.path,O=A||new X,{configurable:!0,get:function(){return O=typeof O=="function"?O():O},set:function(j){O=j}}))},Ut.prototype.addUnicode=function(A){this.unicodes.length===0&&(this.unicode=A),this.unicodes.push(A)},Ut.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ut.prototype.getPath=function(A,O,j,B,W){A=A!==void 0?A:0,O=O!==void 0?O:0,j=j!==void 0?j:72;for(var Z,te,he=(B=B||{}).xScale,_e=B.yScale,ve=((Z=B.hinting&&W&&W.hinting?this.path&&W.hinting.exec(this,j):Z)?(te=W.hinting.getCommands(Z),A=Math.round(A),O=Math.round(O),he=_e=1):(te=this.path.commands,B=1/this.path.unitsPerEm*j,he===void 0&&(he=B),_e===void 0&&(_e=B)),new X),Re=0;Re<te.length;Re+=1){var qe=te[Re];qe.type==="M"?ve.moveTo(A+qe.x*he,O+-qe.y*_e):qe.type==="L"?ve.lineTo(A+qe.x*he,O+-qe.y*_e):qe.type==="Q"?ve.quadraticCurveTo(A+qe.x1*he,O+-qe.y1*_e,A+qe.x*he,O+-qe.y*_e):qe.type==="C"?ve.curveTo(A+qe.x1*he,O+-qe.y1*_e,A+qe.x2*he,O+-qe.y2*_e,A+qe.x*he,O+-qe.y*_e):qe.type==="Z"&&ve.closePath()}return ve},Ut.prototype.getContours=function(){if(this.points===void 0)return[];for(var A=[],O=[],j=0;j<this.points.length;j+=1){var B=this.points[j];O.push(B),B.lastPointOfContour&&(A.push(O),O=[])}return M.argument(O.length===0,"There are still points left in the current contour."),A},Ut.prototype.getMetrics=function(){for(var A=this.path.commands,O=[],j=[],B=0;B<A.length;B+=1){var W=A[B];W.type!=="Z"&&(O.push(W.x),j.push(W.y)),W.type!=="Q"&&W.type!=="C"||(O.push(W.x1),j.push(W.y1)),W.type==="C"&&(O.push(W.x2),j.push(W.y2))}var Z={xMin:Math.min.apply(null,O),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,O),yMax:Math.max.apply(null,j),leftSideBearing:this.leftSideBearing};return isFinite(Z.xMin)||(Z.xMin=0),isFinite(Z.xMax)||(Z.xMax=this.advanceWidth),isFinite(Z.yMin)||(Z.yMin=0),isFinite(Z.yMax)||(Z.yMax=0),Z.rightSideBearing=this.advanceWidth-Z.leftSideBearing-(Z.xMax-Z.xMin),Z},Ut.prototype.draw=function(A,O,j,B,W){this.getPath(O,j,B,W).draw(A)},Ut.prototype.drawPoints=function(A,O,j,B){function W(Re,qe,Ue,Ae){var ht=2*Math.PI;A.beginPath();for(var Xe=0;Xe<Re.length;Xe+=1)A.moveTo(qe+Re[Xe].x*Ae,Ue+Re[Xe].y*Ae),A.arc(qe+Re[Xe].x*Ae,Ue+Re[Xe].y*Ae,2,0,ht,!1);A.closePath(),A.fill()}O=O!==void 0?O:0,j=j!==void 0?j:0;for(var B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),Z=[],te=[],he=this.path,_e=0;_e<he.commands.length;_e+=1){var ve=he.commands[_e];ve.x!==void 0&&Z.push({x:ve.x,y:-ve.y}),ve.x1!==void 0&&te.push({x:ve.x1,y:-ve.y1}),ve.x2!==void 0&&te.push({x:ve.x2,y:-ve.y2})}A.fillStyle="blue",W(Z,O,j,B),A.fillStyle="red",W(te,O,j,B)},Ut.prototype.drawMetrics=function(A,O,j,B){O=O!==void 0?O:0,j=j!==void 0?j:0,B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),A.lineWidth=1,A.strokeStyle="black",Ft.line(A,O,-1e4,O,1e4),Ft.line(A,-1e4,j,1e4,j);var W=this.xMin||0,Z=this.yMin||0,te=this.xMax||0,he=this.yMax||0,_e=this.advanceWidth||0;A.strokeStyle="blue",Ft.line(A,O+W*B,-1e4,O+W*B,1e4),Ft.line(A,O+te*B,-1e4,O+te*B,1e4),Ft.line(A,-1e4,j+-Z*B,1e4,j+-Z*B),Ft.line(A,-1e4,j+-he*B,1e4,j+-he*B),A.strokeStyle="green",Ft.line(A,O+_e*B,-1e4,O+_e*B,1e4)},Lr.prototype.get=function(A){return typeof this.glyphs[A]=="function"&&(this.glyphs[A]=this.glyphs[A]()),this.glyphs[A]},Lr.prototype.push=function(A,O){this.glyphs[A]=O,this.length++};var ur={GlyphSet:Lr,glyphLoader:function(A,O){return new Ut({index:O,font:A})},ttfGlyphLoader:function(A,O,j,B,W,Z){return function(){var te=new Ut({index:O,font:A});return te.path=function(){j(te,B,W);var he=Z(A.glyphs,te);return he.unitsPerEm=A.unitsPerEm,he},en(te,"xMin","_xMin"),en(te,"xMax","_xMax"),en(te,"yMin","_yMin"),en(te,"yMax","_yMax"),te}},cffGlyphLoader:function(A,O,j,B){return function(){var W=new Ut({index:O,font:A});return W.path=function(){var Z=j(A,W,B);return Z.unitsPerEm=A.unitsPerEm,Z},W}}};function Yr(A){return A=A.length<1240?107:A.length<33900?1131:32768,A}function Rr(A,O,j){var B,W=[],Z=[],te=Ge.getCard16(A,O);if(te!==0){for(var he=Ge.getByte(A,O+2),_e=O+(te+1)*he+2,ve=O+3,Re=0;Re<te+1;Re+=1)W.push(Ge.getOffset(A,ve,he)),ve+=he;B=_e+W[te]}else B=O+2;for(var qe=0;qe<W.length-1;qe+=1){var Ue=Ge.getBytes(A,_e+W[qe],_e+W[qe+1]);j&&(Ue=j(Ue)),Z.push(Ue)}return{objects:Z,startOffset:O,endOffset:B}}function yi(A,O){if(O===28)return A.parseByte()<<8|A.parseByte();if(O===29)return A.parseByte()<<24|A.parseByte()<<16|A.parseByte()<<8|A.parseByte();if(O===30){for(var j=A,B="",W=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var te=j.parseByte(),Z=te>>4,te=15&te;if(Z==15||(B+=W[Z],te==15))break;B+=W[te]}return parseFloat(B)}if(32<=O&&O<=246)return O-139;if(247<=O&&O<=250)return 256*(O-247)+A.parseByte()+108;if(251<=O&&O<=254)return 256*-(O-251)-A.parseByte()-108;throw new Error("Invalid b0 "+O)}function Jl(A,O,j){var B=new Ge.Parser(A,O=O!==void 0?O:0),W=[],Z=[];for(j=j!==void 0?j:A.length;B.relativeOffset<j;){var te=B.parseByte();te<=21?(te===12&&(te=1200+B.parseByte()),W.push([te,Z]),Z=[]):Z.push(yi(B,te))}for(var he=W,_e={},ve=0;ve<he.length;ve+=1){var Re=he[ve][0],qe=he[ve][1],Ue=void 0,Ue=qe.length===1?qe[0]:qe;if(_e.hasOwnProperty(Re)&&!isNaN(_e[Re]))throw new Error("Object "+_e+" already has key "+Re);_e[Re]=Ue}return _e}function Gs(A,O){return O=O<=390?me[O]:A[O-391]}function Eo(A,O,j){for(var B,W={},Z=0;Z<O.length;Z+=1){var te=O[Z];if(Array.isArray(te.type)){var he=[];he.length=te.type.length;for(var _e=0;_e<te.type.length;_e++)(B=A[te.op]!==void 0?A[te.op][_e]:void 0)===void 0&&(B=te.value!==void 0&&te.value[_e]!==void 0?te.value[_e]:null),te.type[_e]==="SID"&&(B=Gs(j,B)),he[_e]=B;W[te.name]=he}else(B=A[te.op])===void 0&&(B=te.value!==void 0?te.value:null),te.type==="SID"&&(B=Gs(j,B)),W[te.name]=B}return W}var Ei=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Hn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Cl(A,O,j,B){return Eo(Jl(A,O,j),Hn,B)}function ja(A,O,j,B){for(var W=[],Z=0;Z<j.length;Z+=1){var te=new DataView(new Uint8Array(j[Z]).buffer),te=(he=B,Eo(Jl(te,0,te.byteLength),Ei,he)),he=(te._subrs=[],te._subrsBias=0,te.private[0]),_e=te.private[1];he!==0&&_e!==0&&(he=Cl(A,_e+O,he,B),te._defaultWidthX=he.defaultWidthX,te._nominalWidthX=he.nominalWidthX,he.subrs!==0&&(_e=Rr(A,_e+he.subrs+O),te._subrs=_e.objects,te._subrsBias=Yr(te._subrs)),te._privateDict=he),W.push(te)}return W}function jo(A,O,j){var B,W,Z,te,he,_e,ve,Re,qe,Ue=new X,Ae=[],ht=0,Xe=!1,ot=!1,He=0,Ye=0,br=(qe=(A.isCIDFont?(he=A.tables.cff.topDict._fdSelect[O.index],he=A.tables.cff.topDict._fdArray[he],_e=he._subrs,ve=he._subrsBias,Re=he._defaultWidthX,he):(_e=A.tables.cff.topDict._subrs,ve=A.tables.cff.topDict._subrsBias,Re=A.tables.cff.topDict._defaultWidthX,A.tables.cff.topDict))._nominalWidthX,Re);function nn(Ar,wn){ot&&Ue.closePath(),Ue.moveTo(Ar,wn),ot=!0}function Sr(){Ae.length%2==0||Xe||(br=Ae.shift()+qe),ht+=Ae.length>>1,Ae.length=0,Xe=!0}return function Ar(wn){for(var bi,ms,qs,eu,tu,vh,ei,Ti,Do,ru,os,Tl,Ai=0;Ai<wn.length;){var za=wn[Ai];switch(Ai+=1,za){case 1:case 3:Sr();break;case 4:1<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),Ye+=Ae.pop(),nn(He,Ye);break;case 5:for(;0<Ae.length;)He+=Ae.shift(),Ye+=Ae.shift(),Ue.lineTo(He,Ye);break;case 6:for(;0<Ae.length&&(He+=Ae.shift(),Ue.lineTo(He,Ye),Ae.length!==0);)Ye+=Ae.shift(),Ue.lineTo(He,Ye);break;case 7:for(;0<Ae.length&&(Ye+=Ae.shift(),Ue.lineTo(He,Ye),Ae.length!==0);)He+=Ae.shift(),Ue.lineTo(He,Ye);break;case 8:for(;0<Ae.length;)B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);break;case 10:tu=Ae.pop()+ve,(vh=_e[tu])&&Ar(vh);break;case 11:return;case 12:switch(za=wn[Ai],Ai+=1,za){case 35:B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),ei=Z+Ae.shift(),Ti=te+Ae.shift(),Do=ei+Ae.shift(),ru=Ti+Ae.shift(),os=Do+Ae.shift(),Tl=ru+Ae.shift(),He=os+Ae.shift(),Ye=Tl+Ae.shift(),Ae.shift(),Ue.curveTo(B,W,Z,te,ei,Ti),Ue.curveTo(Do,ru,os,Tl,He,Ye);break;case 34:B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),ei=Z+Ae.shift(),Ti=te,Do=ei+Ae.shift(),ru=te,os=Do+Ae.shift(),Tl=Ye,He=os+Ae.shift(),Ue.curveTo(B,W,Z,te,ei,Ti),Ue.curveTo(Do,ru,os,Tl,He,Ye);break;case 36:B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),ei=Z+Ae.shift(),Ti=te,Do=ei+Ae.shift(),ru=te,os=Do+Ae.shift(),Tl=ru+Ae.shift(),He=os+Ae.shift(),Ue.curveTo(B,W,Z,te,ei,Ti),Ue.curveTo(Do,ru,os,Tl,He,Ye);break;case 37:B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),ei=Z+Ae.shift(),Ti=te+Ae.shift(),Do=ei+Ae.shift(),ru=Ti+Ae.shift(),os=Do+Ae.shift(),Tl=ru+Ae.shift(),Math.abs(os-He)>Math.abs(Tl-Ye)?He=os+Ae.shift():Ye=Tl+Ae.shift(),Ue.curveTo(B,W,Z,te,ei,Ti),Ue.curveTo(Do,ru,os,Tl,He,Ye);break;default:console.log("Glyph "+O.index+": unknown operator 1200"+za),Ae.length=0}break;case 14:0<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),ot&&(Ue.closePath(),ot=!1);break;case 18:Sr();break;case 19:case 20:Sr(),Ai+=ht+7>>3;break;case 21:2<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),Ye+=Ae.pop(),nn(He+=Ae.pop(),Ye);break;case 22:1<Ae.length&&!Xe&&(br=Ae.shift()+qe,Xe=!0),nn(He+=Ae.pop(),Ye);break;case 23:Sr();break;case 24:for(;2<Ae.length;)B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);He+=Ae.shift(),Ye+=Ae.shift(),Ue.lineTo(He,Ye);break;case 25:for(;6<Ae.length;)He+=Ae.shift(),Ye+=Ae.shift(),Ue.lineTo(He,Ye);B=He+Ae.shift(),W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);break;case 26:for(Ae.length%2&&(He+=Ae.shift());0<Ae.length;)B=He,W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z,Ye=te+Ae.shift(),Ue.curveTo(B,W,Z,te,He,Ye);break;case 27:for(Ae.length%2&&(Ye+=Ae.shift());0<Ae.length;)B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te,Ue.curveTo(B,W,Z,te,He,Ye);break;case 28:bi=wn[Ai],ms=wn[Ai+1],Ae.push((bi<<24|ms<<16)>>16),Ai+=2;break;case 29:tu=Ae.pop()+A.gsubrsBias,(vh=A.gsubrs[tu])&&Ar(vh);break;case 30:for(;0<Ae.length&&(B=He,W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye),Ae.length!==0);)B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),Ye=te+Ae.shift(),He=Z+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye);break;case 31:for(;0<Ae.length&&(B=He+Ae.shift(),W=Ye,Z=B+Ae.shift(),te=W+Ae.shift(),Ye=te+Ae.shift(),He=Z+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye),Ae.length!==0);)B=He,W=Ye+Ae.shift(),Z=B+Ae.shift(),te=W+Ae.shift(),He=Z+Ae.shift(),Ye=te+(Ae.length===1?Ae.shift():0),Ue.curveTo(B,W,Z,te,He,Ye);break;default:za<32?console.log("Glyph "+O.index+": unknown operator "+za):za<247?Ae.push(za-139):za<251?(bi=wn[Ai],Ai+=1,Ae.push(256*(za-247)+bi+108)):za<255?(bi=wn[Ai],Ai+=1,Ae.push(256*-(za-251)-bi-108)):(bi=wn[Ai],ms=wn[Ai+1],qs=wn[Ai+2],eu=wn[Ai+3],Ai+=4,Ae.push((bi<<24|ms<<16|qs<<8|eu)/65536))}}}(j),O.advanceWidth=br,Ue}function El(A,O){var j,B=me.indexOf(A);return 0<=B&&(j=B),0<=(B=O.indexOf(A))?j=B+me.length:(j=me.length+O.length,O.push(A)),j}function yR(A,O,j){for(var B={},W=0;W<A.length;W+=1){var Z=A[W],te=O[Z.name];te===void 0||function he(_e,ve){if(_e===ve)return 1;if(Array.isArray(_e)&&Array.isArray(ve)&&_e.length===ve.length){for(var Re=0;Re<_e.length;Re+=1)if(!he(_e[Re],ve[Re]))return;return 1}}(te,Z.value)||(Z.type==="SID"&&(te=El(te,j)),B[Z.op]={name:Z.name,type:Z.type,value:te})}return B}function bR(A,O){var j=new We.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return j.dict=yR(Ei,A,O),j}function xR(A){var O=new We.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return O.topDicts=[{name:"topDict_0",type:"TABLE",value:A}],O}function Cz(A){for(var O=new We.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),j=0;j<A.length;j+=1){var B=A.get(j),W=function(Z){for(var te=[],he=Z.path,_e=(te.push({name:"width",type:"NUMBER",value:Z.advanceWidth}),0),ve=0,Re=0;Re<he.commands.length;Re+=1){var qe,Ue,Ae,ht,Xe=void 0,ot=void 0,He=he.commands[Re];(He=He.type==="Q"?{type:"C",x:He.x,y:He.y,x1:1/3*_e+2/3*He.x1,y1:1/3*ve+2/3*He.y1,x2:1/3*He.x+2/3*He.x1,y2:1/3*He.y+2/3*He.y1}:He).type==="M"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rmoveto",type:"OP",value:21}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="L"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rlineto",type:"OP",value:5}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="C"&&(qe=Math.round(He.x1-_e),Ue=Math.round(He.y1-ve),Ae=Math.round(He.x2-He.x1),ht=Math.round(He.y2-He.y1),Xe=Math.round(He.x-He.x2),ot=Math.round(He.y-He.y2),te.push({name:"dx1",type:"NUMBER",value:qe}),te.push({name:"dy1",type:"NUMBER",value:Ue}),te.push({name:"dx2",type:"NUMBER",value:Ae}),te.push({name:"dy2",type:"NUMBER",value:ht}),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rrcurveto",type:"OP",value:8}),_e=Math.round(He.x),ve=Math.round(He.y))}return te.push({name:"endchar",type:"OP",value:14}),te}(B);O.charStrings.push({name:B.name,type:"CHARSTRING",value:W})}return O}var vR={parse:function(A,O,j){j.tables.cff={},he=A,B=O,(W={}).formatMajor=Ge.getCard8(he,B),W.formatMinor=Ge.getCard8(he,B+1),W.size=Ge.getCard8(he,B+2),W.offsetSize=Ge.getCard8(he,B+3),W.startOffset=B,W.endOffset=B+4;var he=Rr(A,W.endOffset,Ge.bytesToString),B=Rr(A,he.endOffset),W=Rr(A,B.endOffset,Ge.bytesToString),he=Rr(A,W.endOffset);if(j.gsubrs=he.objects,j.gsubrsBias=Yr(j.gsubrs),(he=ja(A,O,B.objects,W.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+he.length);if(B=he[0],(j.tables.cff.topDict=B)._privateDict&&(j.defaultWidthX=B._privateDict.defaultWidthX,j.nominalWidthX=B._privateDict.nominalWidthX),B.ros[0]!==void 0&&B.ros[1]!==void 0&&(j.isCIDFont=!0),j.isCIDFont){var he=B.fdArray,Z=B.fdSelect;if(he===0||Z===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");he=ja(A,O,Rr(A,he+=O).objects,W.objects),B._fdArray=he,B._fdSelect=function(Ue,Ae,ht,Xe){var ot,He=[],Ye=new Ge.Parser(Ue,Ae);if((Ue=Ye.parseCard8())===0)for(var br=0;br<ht;br++){if(Xe<=(ot=Ye.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");He.push(ot)}else{if(Ue!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ue);var nn,Sr=Ye.parseCard16(),Ar=Ye.parseCard16();if(Ar!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ar);for(var wn=0;wn<Sr;wn++){if(ot=Ye.parseCard8(),nn=Ye.parseCard16(),Xe<=ot)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");if(ht<nn)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+nn);for(;Ar<nn;Ar++)He.push(ot);Ar=nn}if(nn!==ht)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+nn)}return He}(A,Z+=O,j.numGlyphs,he.length)}var Z=O+B.private[1],he=Cl(A,Z,B.private[0],W.objects),te=(j.defaultWidthX=he.defaultWidthX,j.nominalWidthX=he.nominalWidthX,he.subrs!==0?(Z=Rr(A,Z+he.subrs),j.subrs=Z.objects,j.subrsBias=Yr(j.subrs)):(j.subrs=[],j.subrsBias=0),Rr(A,O+B.charStrings)),he=(j.nGlyphs=te.objects.length,function(Re,qe,Ue,Ae){var ht=new Ge.Parser(Re,qe),Xe=(--Ue,[".notdef"]);if((Re=ht.parseCard8())===0)for(var ot=0;ot<Ue;ot+=1)He=ht.parseSID(),Xe.push(Gs(Ae,He));else if(Re===1)for(;Xe.length<=Ue;)for(var He=ht.parseSID(),Ye=ht.parseCard8(),br=0;br<=Ye;br+=1)Xe.push(Gs(Ae,He)),He+=1;else{if(Re!==2)throw new Error("Unknown charset format "+Re);for(;Xe.length<=Ue;){He=ht.parseSID(),Ye=ht.parseCard16();for(var nn=0;nn<=Ye;nn+=1)Xe.push(Gs(Ae,He)),He+=1}}return Xe}(A,O+B.charset,j.nGlyphs,W.objects));B.encoding===0?j.cffEncoding=new St(oe,he):B.encoding===1?j.cffEncoding=new St(be,he):j.cffEncoding=function(Re,qe,Ue){var Ae={},ht=new Ge.Parser(Re,qe);if((Re=ht.parseCard8())===0)for(var Xe=ht.parseCard8(),ot=0;ot<Xe;ot+=1)Ae[Ye=ht.parseCard8()]=ot;else{if(Re!==1)throw new Error("Unknown encoding format "+Re);for(var He=ht.parseCard8(),Ye=1,br=0;br<He;br+=1)for(var nn=ht.parseCard8(),Sr=ht.parseCard8(),Ar=nn;Ar<=nn+Sr;Ar+=1)Ae[Ar]=Ye,Ye+=1}return new St(Ae,Ue)}(A,O+B.encoding,he),j.encoding=j.encoding||j.cffEncoding,j.glyphs=new ur.GlyphSet(j);for(var _e=0;_e<j.nGlyphs;_e+=1){var ve=te.objects[_e];j.glyphs.push(_e,ur.cffGlyphLoader(j,_e,jo,ve))}},make:function(A,Re){for(var j,B=new We.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),W=1/Re.unitsPerEm,W={version:Re.version,fullName:Re.fullName,familyName:Re.familyName,weight:Re.weightName,fontBBox:Re.fontBBox||[0,0,0,0],fontMatrix:[W,0,0,W,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Z=[],te=1;te<A.length;te+=1)j=A.get(te),Z.push(j.name);var he,_e,ve=[],Re=(B.header=new We.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),B.nameIndex=function(Ue){var Ae=new We.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ae.names=[];for(var ht=0;ht<Ue.length;ht+=1)Ae.names.push({name:"name_"+ht,type:"NAME",value:Ue[ht]});return Ae}([Re.postScriptName]),bR(W,ve)),qe=(B.topDictIndex=xR(Re),B.globalSubrIndex=new We.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),B.charsets=function(Ue,Ae){for(var ht=new We.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Ue.length;Xe+=1){var ot=El(Ue[Xe],Ae);ht.fields.push({name:"glyph_"+Xe,type:"SID",value:ot})}return ht}(Z,ve),B.charStringsIndex=Cz(A),B.privateDict=(qe={},he=ve,(_e=new We.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=yR(Hn,qe,he),_e),B.stringIndex=function(Ue){var Ae=new We.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ae.strings=[];for(var ht=0;ht<Ue.length;ht+=1)Ae.strings.push({name:"string_"+ht,type:"STRING",value:Ue[ht]});return Ae}(ve),B.header.sizeOf()+B.nameIndex.sizeOf()+B.topDictIndex.sizeOf()+B.stringIndex.sizeOf()+B.globalSubrIndex.sizeOf());return W.charset=qe,W.encoding=0,W.charStrings=W.charset+B.charsets.sizeOf(),W.private[1]=W.charStrings+B.charStringsIndex.sizeOf(),Re=bR(W,ve),B.topDictIndex=xR(Re),B}},wR={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.fontRevision=Math.round(1e3*B.parseFixed())/1e3,j.checkSumAdjustment=B.parseULong(),j.magicNumber=B.parseULong(),M.argument(j.magicNumber===1594834165,"Font header has wrong magic number."),j.flags=B.parseUShort(),j.unitsPerEm=B.parseUShort(),j.created=B.parseLongDateTime(),j.modified=B.parseLongDateTime(),j.xMin=B.parseShort(),j.yMin=B.parseShort(),j.xMax=B.parseShort(),j.yMax=B.parseShort(),j.macStyle=B.parseUShort(),j.lowestRecPPEM=B.parseUShort(),j.fontDirectionHint=B.parseShort(),j.indexToLocFormat=B.parseShort(),j.glyphDataFormat=B.parseShort(),j},make:function(A){var O=Math.round(new Date().getTime()/1e3)+2082844800,j=O;return A.createdTimestamp&&(j=A.createdTimestamp+2082844800),new We.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:j},{name:"modified",type:"LONGDATETIME",value:O},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],A)}},ke={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.ascender=B.parseShort(),j.descender=B.parseShort(),j.lineGap=B.parseShort(),j.advanceWidthMax=B.parseUShort(),j.minLeftSideBearing=B.parseShort(),j.minRightSideBearing=B.parseShort(),j.xMaxExtent=B.parseShort(),j.caretSlopeRise=B.parseShort(),j.caretSlopeRun=B.parseShort(),j.caretOffset=B.parseShort(),B.relativeOffset+=8,j.metricDataFormat=B.parseShort(),j.numberOfHMetrics=B.parseUShort(),j},make:function(A){return new We.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],A)}},Ct={parse:function(A,O,j,B,W){for(var Z,te,he=new Ge.Parser(A,O),_e=0;_e<B;_e+=1){_e<j&&(Z=he.parseUShort(),te=he.parseShort());var ve=W.get(_e);ve.advanceWidth=Z,ve.leftSideBearing=te}},make:function(A){for(var O=new We.Table("hmtx",[]),j=0;j<A.length;j+=1){var W=A.get(j),B=W.advanceWidth||0,W=W.leftSideBearing||0;O.fields.push({name:"advanceWidth_"+j,type:"USHORT",value:B}),O.fields.push({name:"leftSideBearing_"+j,type:"SHORT",value:W})}return O}},Ht={make:function(A){for(var O=new We.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:A.length}]),j="",B=12+4*A.length,W=0;W<A.length;++W){var Z=j.indexOf(A[W]);Z<0&&(Z=j.length,j+=A[W]),O.fields.push({name:"offset "+W,type:"USHORT",value:B+Z}),O.fields.push({name:"length "+W,type:"USHORT",value:A[W].length})}return O.fields.push({name:"stringPool",type:"CHARARRAY",value:j}),O},parse:function(A,O){for(var j=new Ge.Parser(A,O),B=j.parseULong(),W=(M.argument(B===1,"Unsupported ltag table version."),j.skip("uLong",1),j.parseULong()),Z=[],te=0;te<W;te++){for(var he="",_e=O+j.parseUShort(),ve=j.parseUShort(),Re=_e;Re<_e+ve;++Re)he+=String.fromCharCode(A.getInt8(Re));Z.push(he)}return Z}},xt={parse:function(B,O){var j={},B=new Ge.Parser(B,O);return j.version=B.parseVersion(),j.numGlyphs=B.parseUShort(),j.version===1&&(j.maxPoints=B.parseUShort(),j.maxContours=B.parseUShort(),j.maxCompositePoints=B.parseUShort(),j.maxCompositeContours=B.parseUShort(),j.maxZones=B.parseUShort(),j.maxTwilightPoints=B.parseUShort(),j.maxStorage=B.parseUShort(),j.maxFunctionDefs=B.parseUShort(),j.maxInstructionDefs=B.parseUShort(),j.maxStackElements=B.parseUShort(),j.maxSizeOfInstructions=B.parseUShort(),j.maxComponentElements=B.parseUShort(),j.maxComponentDepth=B.parseUShort()),j},make:function(A){return new We.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:A}])}},In=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],gt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Yn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},zt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Ln="utf-16",Vt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},ks={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function wa(A,O,j){switch(A){case 0:return Ln;case 1:return ks[j]||Vt[O];case 3:if(O===1||O===10)return Ln}}function hs(A){var O,j={};for(O in A)j[A[O]]=parseInt(O);return j}function Ba(A,O,j,B,W,Z){return new We.Record("NameRecord",[{name:"platformID",type:"USHORT",value:A},{name:"encodingID",type:"USHORT",value:O},{name:"languageID",type:"USHORT",value:j},{name:"nameID",type:"USHORT",value:B},{name:"length",type:"USHORT",value:W},{name:"offset",type:"USHORT",value:Z}])}function bg(A,O){if((j=function(Z,te){var he=Z.length,_e=te.length-he+1;e:for(var ve=0;ve<_e;ve++)for(;ve<_e;ve++){for(var Re=0;Re<he;Re++)if(te[ve+Re]!==Z[Re])continue e;return ve}return-1}(A,O))<0)for(var j=O.length,B=0,W=A.length;B<W;++B)O.push(A[B]);return j}var Qf={parse:function(A,O,j){for(var B={},W=new Ge.Parser(A,O),O=W.parseUShort(),Z=W.parseUShort(),te=W.offset+W.parseUShort(),he=0;he<Z;he++){var ht=W.parseUShort(),_e=W.parseUShort(),ve=W.parseUShort(),Re=W.parseUShort(),Re=In[Re]||Re,qe=W.parseUShort(),Ue=W.parseUShort(),Ae=function(ot,He,Ye){switch(ot){case 0:if(He===65535)return"und";if(Ye)return Ye[He];break;case 1:return gt[He];case 3:return zt[He]}}(ht,ve,j),ht=wa(ht,_e,ve);ht!==void 0&&Ae!==void 0&&(_e=void 0,(_e=ht===Ln?z.UTF16(A,te+Ue,qe):z.MACSTRING(A,te+Ue,qe,ht))&&((ve=(ve=B[Re])===void 0?B[Re]={}:ve)[Ae]=_e))}return O===1&&W.parseUShort(),B},make:function(A,O){var j,B=[],W={},Z=hs(In);for(j in A){var te=Z[j];if(te===void 0&&(te=j),Ue=parseInt(te),isNaN(Ue))throw new Error('Name table entry "'+j+'" does not exist, see nameTableNames for complete list.');W[Ue]=A[j],B.push(Ue)}for(var he=hs(gt),_e=hs(zt),ve=[],Re=[],qe=0;qe<B.length;qe++){var Ue,Ae,ht=W[Ue=B[qe]];for(Ae in ht){var Xe=ht[Ae],nn=1,ot=he[Ae],He=Yn[ot],Ye=wa(nn,He,ot),Ye=q.MACSTRING(Xe,Ye),br=(Ye===void 0&&(nn=0,(ot=O.indexOf(Ae))<0&&(ot=O.length,O.push(Ae)),He=4,Ye=q.UTF16(Xe)),bg(Ye,Re)),nn=(ve.push(Ba(nn,He,ot,Ue,Ye.length,br)),_e[Ae]);nn!==void 0&&(ot=bg(He=q.UTF16(Xe),Re),ve.push(Ba(3,1,nn,Ue,He.length,ot)))}}ve.sort(function(wn,bi){return wn.platformID-bi.platformID||wn.encodingID-bi.encodingID||wn.languageID-bi.languageID||wn.nameID-bi.nameID});for(var Sr=new We.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ve.length},{name:"stringOffset",type:"USHORT",value:6+12*ve.length}]),Ar=0;Ar<ve.length;Ar++)Sr.fields.push({name:"record_"+Ar,type:"RECORD",value:ve[Ar]});return Sr.fields.push({name:"strings",type:"LITERAL",value:Re}),Sr}},xg=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],$a={parse:function(A,O){var j={},B=new Ge.Parser(A,O);j.version=B.parseUShort(),j.xAvgCharWidth=B.parseShort(),j.usWeightClass=B.parseUShort(),j.usWidthClass=B.parseUShort(),j.fsType=B.parseUShort(),j.ySubscriptXSize=B.parseShort(),j.ySubscriptYSize=B.parseShort(),j.ySubscriptXOffset=B.parseShort(),j.ySubscriptYOffset=B.parseShort(),j.ySuperscriptXSize=B.parseShort(),j.ySuperscriptYSize=B.parseShort(),j.ySuperscriptXOffset=B.parseShort(),j.ySuperscriptYOffset=B.parseShort(),j.yStrikeoutSize=B.parseShort(),j.yStrikeoutPosition=B.parseShort(),j.sFamilyClass=B.parseShort(),j.panose=[];for(var W=0;W<10;W++)j.panose[W]=B.parseByte();return j.ulUnicodeRange1=B.parseULong(),j.ulUnicodeRange2=B.parseULong(),j.ulUnicodeRange3=B.parseULong(),j.ulUnicodeRange4=B.parseULong(),j.achVendID=String.fromCharCode(B.parseByte(),B.parseByte(),B.parseByte(),B.parseByte()),j.fsSelection=B.parseUShort(),j.usFirstCharIndex=B.parseUShort(),j.usLastCharIndex=B.parseUShort(),j.sTypoAscender=B.parseShort(),j.sTypoDescender=B.parseShort(),j.sTypoLineGap=B.parseShort(),j.usWinAscent=B.parseUShort(),j.usWinDescent=B.parseUShort(),1<=j.version&&(j.ulCodePageRange1=B.parseULong(),j.ulCodePageRange2=B.parseULong()),2<=j.version&&(j.sxHeight=B.parseShort(),j.sCapHeight=B.parseShort(),j.usDefaultChar=B.parseUShort(),j.usBreakChar=B.parseUShort(),j.usMaxContent=B.parseUShort()),j},make:function(A){return new We.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],A)},unicodeRanges:xg,getUnicodeRange:function(A){for(var O=0;O<xg.length;O+=1){var j=xg[O];if(A>=j.begin&&A<j.end)return O}return-1}},iAe={parse:function(A,O){var j={},B=new Ge.Parser(A,O);switch(j.version=B.parseVersion(),j.italicAngle=B.parseFixed(),j.underlinePosition=B.parseShort(),j.underlineThickness=B.parseShort(),j.isFixedPitch=B.parseULong(),j.minMemType42=B.parseULong(),j.maxMemType42=B.parseULong(),j.minMemType1=B.parseULong(),j.maxMemType1=B.parseULong(),j.version){case 1:j.names=Oe.slice();break;case 2:j.numberOfGlyphs=B.parseUShort(),j.glyphNameIndex=new Array(j.numberOfGlyphs);for(var W=0;W<j.numberOfGlyphs;W++)j.glyphNameIndex[W]=B.parseUShort();j.names=[];for(var Z,te=0;te<j.numberOfGlyphs;te++)j.glyphNameIndex[te]>=Oe.length&&(Z=B.parseChar(),j.names.push(B.parseString(Z)));break;case 2.5:j.numberOfGlyphs=B.parseUShort(),j.offset=new Array(j.numberOfGlyphs);for(var he=0;he<j.numberOfGlyphs;he++)j.offset[he]=B.parseChar()}return j},make:function(){return new We.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},bh=new Array(9),kk=(bh[1]=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:1,coverage:this.parsePointer(Be.coverage),deltaGlyphId:this.parseUShort()}:O===2?{substFormat:2,coverage:this.parsePointer(Be.coverage),substitute:this.parseOffset16List()}:void M.assert(!1,"0x"+A.toString(16)+": lookup type 1 format must be 1 or 2.")},bh[2]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),sequences:this.parseListOfLists()}},bh[3]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),alternateSets:this.parseListOfLists()}},bh[4]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB ligature table identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Be.uShort,lookupListIndex:Be.uShort});bh[5]=function(){var A,O,j=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:B,coverage:this.parsePointer(Be.coverage),ruleSets:this.parseListOfLists(function(){var W=this.parseUShort(),Z=this.parseUShort();return{input:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(Z,kk)}})}:B===2?{substFormat:B,coverage:this.parsePointer(Be.coverage),classDef:this.parsePointer(Be.classDef),classSets:this.parseListOfLists(function(){var W=this.parseUShort(),Z=this.parseUShort();return{classes:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(Z,kk)}})}:B===3?(A=this.parseUShort(),O=this.parseUShort(),{substFormat:B,coverages:this.parseList(A,Be.pointer(Be.coverage)),lookupRecords:this.parseRecordList(O,kk)}):void M.assert(!1,"0x"+j.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},bh[6]=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{substFormat:1,coverage:this.parsePointer(Be.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(kk)}})}:O===2?{substFormat:2,coverage:this.parsePointer(Be.coverage),backtrackClassDef:this.parsePointer(Be.classDef),inputClassDef:this.parsePointer(Be.classDef),lookaheadClassDef:this.parsePointer(Be.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(kk)}})}:O===3?{substFormat:3,backtrackCoverage:this.parseList(Be.pointer(Be.coverage)),inputCoverage:this.parseList(Be.pointer(Be.coverage)),lookaheadCoverage:this.parseList(Be.pointer(Be.coverage)),lookupRecords:this.parseRecordList(kk)}:void M.assert(!1,"0x"+A.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},bh[7]=function(){var A=this.parseUShort(),A=(M.argument(A===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),O=new Be(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:A,extension:bh[A].call(O)}},bh[8]=function(){var A=this.parseUShort();return M.argument(A===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:A,coverage:this.parsePointer(Be.coverage),backtrackCoverage:this.parseList(Be.pointer(Be.coverage)),lookaheadCoverage:this.parseList(Be.pointer(Be.coverage)),substitutes:this.parseUShortList()}};var Ez=new Array(9);Ez[1]=function(A){return A.substFormat===1?new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)},{name:"deltaGlyphID",type:"USHORT",value:A.deltaGlyphId}]):new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)}].concat(We.ushortList("substitute",A.substitute)))},Ez[3]=function(A){return M.assert(A.substFormat===1,"Lookup type 3 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)}].concat(We.tableList("altSet",A.alternateSets,function(O){return new We.Table("alternateSetTable",We.ushortList("alternate",O))})))},Ez[4]=function(A){return M.assert(A.substFormat===1,"Lookup type 4 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(A.coverage)}].concat(We.tableList("ligSet",A.ligatureSets,function(O){return new We.Table("ligatureSetTable",We.tableList("ligature",O,function(j){return new We.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:j.ligGlyph}].concat(We.ushortList("component",j.components,j.components.length+1)))}))})))};var sAe={parse:function(A,O){return O=(A=new Be(A,O=O||0)).parseVersion(1),M.argument(O===1||O===1.1,"Unsupported GSUB table version."),O===1?{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(bh)}:{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(bh),variations:A.parseFeatureVariationsList()}},make:function(A){return new We.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(A.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(A.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(A.lookups,Ez)}])}},aAe={parse:function(A,O){for(var j=new Ge.Parser(A,O),B=j.parseULong(),W=(M.argument(B===1,"Unsupported META table version."),j.parseULong(),j.parseULong(),j.parseULong()),Z={},te=0;te<W;te++){var he=j.parseTag(),ve=j.parseULong(),_e=j.parseULong(),ve=z.UTF8(A,O+ve,_e);Z[he]=ve}return Z},make:function(A){var O,j=Object.keys(A).length,B="",W=16+12*j,Z=new We.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:W},{name:"numTags",type:"ULONG",value:j}]);for(O in A){var te=B.length;B+=A[O],Z.fields.push({name:"tag "+O,type:"TAG",value:O}),Z.fields.push({name:"offset "+O,type:"ULONG",value:W+te}),Z.fields.push({name:"length "+O,type:"ULONG",value:A[O].length})}return Z.fields.push({name:"stringPool",type:"CHARARRAY",value:B}),Z}};function lAe(A){return Math.log(A)/Math.log(2)|0}function nne(A){for(;A.length%4!=0;)A.push(0);for(var O=0,j=0;j<A.length;j+=4)O+=(A[j]<<24)+(A[j+1]<<16)+(A[j+2]<<8)+A[j+3];return O%=Math.pow(2,32)}function uAe(A,O,j,B){return new We.Record("Table Record",[{name:"tag",type:"TAG",value:A!==void 0?A:""},{name:"checkSum",type:"ULONG",value:O!==void 0?O:0},{name:"offset",type:"ULONG",value:j!==void 0?j:0},{name:"length",type:"ULONG",value:B!==void 0?B:0}])}function cAe(A){for(var O=new We.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),j=(O.tables=A,O.numTables=A.length,Math.pow(2,lAe(O.numTables))),B=(O.searchRange=16*j,O.entrySelector=lAe(j),O.rangeShift=16*O.numTables-O.searchRange,[]),W=[],Z=O.sizeOf()+uAe().sizeOf()*O.numTables;Z%4!=0;)Z+=1,W.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<A.length;te+=1){var he=A[te],_e=(M.argument(he.tableName.length===4,"Table name"+he.tableName+" is invalid."),he.sizeOf()),ve=uAe(he.tableName,nne(he.encode()),Z,_e);for(B.push({name:ve.tag+" Table Record",type:"RECORD",value:ve}),W.push({name:he.tableName+" table",type:"RECORD",value:he}),Z+=_e,M.argument(!isNaN(Z),"Something went wrong calculating the offset.");Z%4!=0;)Z+=1,W.push({name:"padding",type:"BYTE",value:0})}return B.sort(function(Re,qe){return Re.value.tag>qe.value.tag?1:-1}),O.fields=O.fields.concat(B),O.fields=O.fields.concat(W),O}function fAe(A,O,j){for(var B=0;B<O.length;B+=1){var W=A.charToGlyphIndex(O[B]);if(0<W)return A.glyphs.get(W).getMetrics()}return j}var bEt={make:cAe,fontToTable:function(A){for(var O,j=[],B=[],W=[],Z=[],te=[],he=[],_e=[],ve=0,Re=0,qe=0,Ue=0,Ae=0,ht=0;ht<A.glyphs.length;ht+=1){var Xe=A.glyphs.get(ht),ot=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+ht+"): advanceWidth is not a number.");(ot<O||O===void 0)&&0<ot&&(O=ot),ve<ot&&(ve=ot);var ot=$a.getUnicodeRange(ot);if(ot<32)Re|=1<<ot;else if(ot<64)qe|=1<<ot-32;else if(ot<96)Ue|=1<<ot-64;else{if(!(ot<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ae|=1<<ot-96}Xe.name!==".notdef"&&(ot=Xe.getMetrics(),j.push(ot.xMin),B.push(ot.yMin),W.push(ot.xMax),Z.push(ot.yMax),he.push(ot.leftSideBearing),_e.push(ot.rightSideBearing),te.push(Xe.advanceWidth))}var He,Ye={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,B),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,Z),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(za){for(var ER=0,Nk=0;Nk<za.length;Nk+=1)ER+=za[Nk];return ER/za.length}(te),minLeftSideBearing:Math.min.apply(null,he),maxLeftSideBearing:Math.max.apply(null,he),minRightSideBearing:Math.min.apply(null,_e)},br=(Ye.ascender=A.ascender,Ye.descender=A.descender,wR.make({flags:3,unitsPerEm:A.unitsPerEm,xMin:Ye.xMin,yMin:Ye.yMin,xMax:Ye.xMax,yMax:Ye.yMax,lowestRecPPEM:3,createdTimestamp:A.createdTimestamp})),nn=ke.make({ascender:Ye.ascender,descender:Ye.descender,advanceWidthMax:Ye.advanceWidthMax,minLeftSideBearing:Ye.minLeftSideBearing,minRightSideBearing:Ye.minRightSideBearing,xMaxExtent:Ye.maxLeftSideBearing+(Ye.xMax-Ye.xMin),numberOfHMetrics:A.glyphs.length}),Sr=xt.make(A.glyphs.length),Ar=$a.make({xAvgCharWidth:Math.round(Ye.advanceWidthAvg),usWeightClass:A.tables.os2.usWeightClass,usWidthClass:A.tables.os2.usWidthClass,usFirstCharIndex:O,usLastCharIndex:ve,ulUnicodeRange1:Re,ulUnicodeRange2:qe,ulUnicodeRange3:Ue,ulUnicodeRange4:Ae,fsSelection:A.tables.os2.fsSelection,sTypoAscender:Ye.ascender,sTypoDescender:Ye.descender,sTypoLineGap:0,usWinAscent:Ye.yMax,usWinDescent:Math.abs(Ye.yMin),ulCodePageRange1:1,sxHeight:fAe(A,"xyvw",{yMax:Math.round(Ye.ascender/2)}).yMax,sCapHeight:fAe(A,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ye).yMax,usDefaultChar:A.hasChar(" ")?32:0,usBreakChar:A.hasChar(" ")?32:0}),wn=Ct.make(A.glyphs),bi=de.make(A.glyphs),Ti=A.getEnglishName("fontFamily"),Do=A.getEnglishName("fontSubfamily"),ei=Ti+" "+Do,ms=(ms=A.getEnglishName("postScriptName"))||Ti.replace(/\s/g,"")+"-"+Do,qs={};for(He in A.names)qs[He]=A.names[He];qs.uniqueID||(qs.uniqueID={en:A.getEnglishName("manufacturer")+":"+ei}),qs.postScriptName||(qs.postScriptName={en:ms}),qs.preferredFamily||(qs.preferredFamily=A.names.fontFamily),qs.preferredSubfamily||(qs.preferredSubfamily=A.names.fontSubfamily);var tu=[],eu=Qf.make(qs,tu),tu=0<tu.length?Ht.make(tu):void 0,vh=iAe.make(),ei=vR.make(A.glyphs,{version:A.getEnglishName("version"),fullName:ei,familyName:Ti,weightName:Do,postScriptName:ms,unitsPerEm:A.unitsPerEm,fontBBox:[0,Ye.yMin,Ye.ascender,Ye.advanceWidthMax]}),Ti=A.metas&&0<Object.keys(A.metas).length?aAe.make(A.metas):void 0,Do=[br,nn,Sr,Ar,eu,bi,vh,ei,wn];tu&&Do.push(tu),A.tables.gsub&&Do.push(sAe.make(A.tables.gsub)),Ti&&Do.push(Ti);for(var ru=nne((ms=cAe(Do)).encode()),os=ms.fields,Tl=!1,Ai=0;Ai<os.length;Ai+=1)if(os[Ai].name==="head table"){os[Ai].value.checkSumAdjustment=2981146554-ru,Tl=!0;break}if(Tl)return ms;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:nne};function one(A,O){for(var j=0,B=A.length-1;j<=B;){var W=j+B>>>1,Z=A[W].tag;if(Z===O)return W;Z<O?j=1+W:B=W-1}return-j-1}function dAe(A,O){for(var j=0,B=A.length-1;j<=B;){var W=j+B>>>1,Z=A[W];if(Z===O)return W;Z<O?j=1+W:B=W-1}return-j-1}function pAe(A,O){for(var j=0,B=A.length-1;j<=B;){var W,Z=j+B>>>1,te=(W=A[Z]).start;if(te===O)return W;te<O?j=1+Z:B=Z-1}if(0<j)return O>(W=A[j-1]).end?0:W}function Tz(A,O){this.font=A,this.tableName=O}function Az(A){Tz.call(this,A,"gpos")}function vg(A){Tz.call(this,A,"gsub")}function hAe(A,O,j){for(var B=A.subtables,W=0;W<B.length;W++){var Z=B[W];if(Z.substFormat===O)return Z}if(j)return B.push(j),j}function mAe(A){for(var O=new ArrayBuffer(A.length),j=new Uint8Array(O),B=0;B<A.length;++B)j[B]=A[B];return O}function Ik(A,O){if(!A)throw O}function gAe(A,O,j,B,W){var Z=0<(O&B)?(Z=A.parseByte(),j+(Z=O&W?Z:-Z)):0<(O&W)?j:j+A.parseShort();return Z}function xEt(A,O,j){var B,W=new Ge.Parser(O,j);if(A.numberOfContours=W.parseShort(),A._xMin=W.parseShort(),A._yMin=W.parseShort(),A._xMax=W.parseShort(),A._yMax=W.parseShort(),0<A.numberOfContours){for(var Z=A.endPointIndices=[],te=0;te<A.numberOfContours;te+=1)Z.push(W.parseUShort());A.instructionLength=W.parseUShort(),A.instructions=[];for(var he=0;he<A.instructionLength;he+=1)A.instructions.push(W.parseByte());for(var _e=Z[Z.length-1]+1,ve=[],Re=0;Re<_e;Re+=1)if(B=W.parseByte(),ve.push(B),0<(8&B))for(var qe=W.parseByte(),Ue=0;Ue<qe;Ue+=1)ve.push(B),Re+=1;if(M.argument(ve.length===_e,"Bad flags."),0<Z.length){var Ae,ht=[];if(0<_e){for(var Xe=0;Xe<_e;Xe+=1)B=ve[Xe],(Ae={}).onCurve=!!(1&B),Ae.lastPointOfContour=0<=Z.indexOf(Xe),ht.push(Ae);for(var ot=0,He=0;He<_e;He+=1)B=ve[He],(Ae=ht[He]).x=gAe(W,B,ot,2,16),ot=Ae.x;for(var Ye=0,br=0;br<_e;br+=1)B=ve[br],(Ae=ht[br]).y=gAe(W,B,Ye,4,32),Ye=Ae.y}A.points=ht}else A.points=[]}else if(A.numberOfContours===0)A.points=[];else{A.isComposite=!0,A.points=[],A.components=[];for(var nn=!0;nn;){ve=W.parseUShort();var Sr={glyphIndex:W.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ve)?0<(2&ve)?(Sr.dx=W.parseShort(),Sr.dy=W.parseShort()):Sr.matchedPoints=[W.parseUShort(),W.parseUShort()]:0<(2&ve)?(Sr.dx=W.parseChar(),Sr.dy=W.parseChar()):Sr.matchedPoints=[W.parseByte(),W.parseByte()],0<(8&ve)?Sr.xScale=Sr.yScale=W.parseF2Dot14():0<(64&ve)?(Sr.xScale=W.parseF2Dot14(),Sr.yScale=W.parseF2Dot14()):0<(128&ve)&&(Sr.xScale=W.parseF2Dot14(),Sr.scale01=W.parseF2Dot14(),Sr.scale10=W.parseF2Dot14(),Sr.yScale=W.parseF2Dot14()),A.components.push(Sr),nn=!!(32&ve)}if(256&ve){A.instructionLength=W.parseUShort(),A.instructions=[];for(var Ar=0;Ar<A.instructionLength;Ar+=1)A.instructions.push(W.parseByte())}}}function ine(A,O){for(var j=[],B=0;B<A.length;B+=1){var W=A[B],W={x:O.xScale*W.x+O.scale01*W.y+O.dx,y:O.scale10*W.x+O.yScale*W.y+O.dy,onCurve:W.onCurve,lastPointOfContour:W.lastPointOfContour};j.push(W)}return j}function yAe(A){var O=new X;if(A)for(var j=function(qe){for(var Ue=[],Ae=[],ht=0;ht<qe.length;ht+=1){var Xe=qe[ht];Ae.push(Xe),Xe.lastPointOfContour&&(Ue.push(Ae),Ae=[])}return M.argument(Ae.length===0,"There are still points left in the current contour."),Ue}(A),B=0;B<j.length;++B){var W,Z=j[B],te=Z[Z.length-1],he=Z[0];te.onCurve?O.moveTo(te.x,te.y):he.onCurve?O.moveTo(he.x,he.y):(W={x:.5*(te.x+he.x),y:.5*(te.y+he.y)},O.moveTo(W.x,W.y));for(var _e=0;_e<Z.length;++_e){var ve,Re=te,te=he,he=Z[(_e+1)%Z.length];te.onCurve?O.lineTo(te.x,te.y):(ve=he,Re.onCurve||(te.x,Re.x,te.y,Re.y),he.onCurve||(ve={x:.5*(te.x+he.x),y:.5*(te.y+he.y)}),O.quadraticCurveTo(te.x,te.y,ve.x,ve.y))}O.closePath()}return O}function vEt(A,O){if(O.isComposite)for(var j=0;j<O.components.length;j+=1){var B=O.components[j],W=A.get(B.glyphIndex);if(W.getPath(),W.points){var Z=void 0;if(B.matchedPoints===void 0)Z=ine(W.points,B);else{if(B.matchedPoints[0]>O.points.length-1||B.matchedPoints[1]>W.points.length-1)throw Error("Matched points out of range in "+O.name);var te=O.points[B.matchedPoints[0]],he=W.points[B.matchedPoints[1]],B={xScale:B.xScale,scale01:B.scale01,scale10:B.scale10,yScale:B.yScale,dx:0,dy:0},he=ine([he],B)[0];B.dx=te.x-he.x,B.dy=te.y-he.y,Z=ine(W.points,B)}O.points=O.points.concat(Z)}}return yAe(O.points)}(Az.prototype=Tz.prototype={searchTag:one,binSearch:dAe,getTable:function(A){var O=this.font.tables[this.tableName];return O=!O&&A?this.font.tables[this.tableName]=this.createDefaultTable():O},getScriptNames:function(){var A=this.getTable();return A?A.scripts.map(function(O){return O.tag}):[]},getDefaultScriptName:function(){var A=this.getTable();if(A){for(var O=!1,j=0;j<A.scripts.length;j++){var B=A.scripts[j].tag;if(B==="DFLT")return B;B==="latn"&&(O=!0)}return O?"latn":void 0}},getScriptTable:function(A,O){var j,B=this.getTable(O);if(B)return j=B.scripts,0<=(B=one(B.scripts,A=A||"DFLT"))?j[B].script:O?(j.splice(-1-B,0,O={tag:A,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),O.script):void 0},getLangSysTable:function(W,O,j){var B,W=this.getScriptTable(W,j);if(W)return O&&O!=="dflt"&&O!=="DFLT"?0<=(B=one(W.langSysRecords,O))?W.langSysRecords[B].langSys:j?(W.langSysRecords.splice(-1-B,0,j={tag:O,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),j.langSys):void 0:W.defaultLangSys},getFeatureTable:function(A,O,j,B){if(A=this.getLangSysTable(A,O,B),A){for(var W,Z=A.featureIndexes,te=this.font.tables[this.tableName].features,he=0;he<Z.length;he++)if((W=te[Z[he]]).tag===j)return W.feature;if(B)return O=te.length,M.assert(O===0||j>=te[O-1].tag,"Features must be added in alphabetical order."),te.push(W={tag:j,feature:{params:0,lookupListIndexes:[]}}),Z.push(O),W.feature}},getLookupTables:function(Z,O,j,B,W){var Z=this.getFeatureTable(Z,O,j,W),te=[];if(Z){for(var he,_e=Z.lookupListIndexes,ve=this.font.tables[this.tableName].lookups,Re=0;Re<_e.length;Re++)(he=ve[_e[Re]]).lookupType===B&&te.push(he);if(te.length===0&&W)return O=ve.length,ve.push(he={lookupType:B,lookupFlag:0,subtables:[],markFilteringSet:void 0}),_e.push(O),[he]}return te},getGlyphClass:function(A,O){switch(A.format){case 1:return A.startGlyph<=O&&O<A.startGlyph+A.classes.length?A.classes[O-A.startGlyph]:0;case 2:var j=pAe(A.ranges,O);return j?j.classId:0}},getCoverageIndex:function(A,O){switch(A.format){case 1:var j=dAe(A.glyphs,O);return 0<=j?j:-1;case 2:return j=pAe(A.ranges,O),j?j.index+O-j.start:-1}},expandCoverage:function(A){if(A.format===1)return A.glyphs;for(var O=[],j=A.ranges,B=0;B<j.length;B++)for(var W=j[B],Z=W.start,te=W.end,he=Z;he<=te;he++)O.push(he);return O}}).init=function(){var A=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(A)},Az.prototype.getKerningValue=function(A,O,j){for(var B=0;B<A.length;B++)for(var W=A[B].subtables,Z=0;Z<W.length;Z++){var te=W[Z],he=this.getCoverageIndex(te.coverage,O);if(!(he<0))switch(te.posFormat){case 1:for(var _e=te.pairSets[he],ve=0;ve<_e.length;ve++){var Re=_e[ve];if(Re.secondGlyph===j)return Re.value1&&Re.value1.xAdvance||0}break;case 2:var Ue=this.getGlyphClass(te.classDef1,O),qe=this.getGlyphClass(te.classDef2,j),Ue=te.classRecords[Ue][qe];return Ue.value1&&Ue.value1.xAdvance||0}}return 0},Az.prototype.getKerningTables=function(A,O){if(this.font.tables.gpos)return this.getLookupTables(A,O,"kern",2)},(vg.prototype=Tz.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},vg.prototype.getSingle=function(A,O,j){for(var B=[],W=this.getLookupTables(O,j,A,1),Z=0;Z<W.length;Z++)for(var te=W[Z].subtables,he=0;he<te.length;he++){var _e=te[he],ve=this.expandCoverage(_e.coverage),Re=void 0;if(_e.substFormat===1)for(var qe=_e.deltaGlyphId,Re=0;Re<ve.length;Re++){var Ue=ve[Re];B.push({sub:Ue,by:Ue+qe})}else{var Ae=_e.substitute;for(Re=0;Re<ve.length;Re++)B.push({sub:ve[Re],by:Ae[Re]})}}return B},vg.prototype.getAlternates=function(A,O,j){for(var B=[],W=this.getLookupTables(O,j,A,3),Z=0;Z<W.length;Z++)for(var te=W[Z].subtables,he=0;he<te.length;he++)for(var _e=te[he],ve=this.expandCoverage(_e.coverage),Re=_e.alternateSets,qe=0;qe<ve.length;qe++)B.push({sub:ve[qe],by:Re[qe]});return B},vg.prototype.getLigatures=function(A,O,j){for(var B=[],W=this.getLookupTables(O,j,A,4),Z=0;Z<W.length;Z++)for(var te=W[Z].subtables,he=0;he<te.length;he++)for(var _e=te[he],ve=this.expandCoverage(_e.coverage),Re=_e.ligatureSets,qe=0;qe<ve.length;qe++)for(var Ue=ve[qe],Ae=Re[qe],ht=0;ht<Ae.length;ht++){var Xe=Ae[ht];B.push({sub:[Ue].concat(Xe.components),by:Xe.ligGlyph})}return B},vg.prototype.addSingle=function(A,O,j,B){j=hAe(this.getLookupTables(j,B,A,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),M.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format),B=O.sub,A=this.binSearch(j.coverage.glyphs,B),A<0&&(j.coverage.glyphs.splice(A=-1-A,0,B),j.substitute.splice(A,0,0)),j.substitute[A]=O.by},vg.prototype.addAlternate=function(A,O,j,B){j=hAe(this.getLookupTables(j,B,A,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),M.assert(j.coverage.format===1,"Ligature: unable to modify coverage table format "+j.coverage.format),B=O.sub,A=this.binSearch(j.coverage.glyphs,B),A<0&&(j.coverage.glyphs.splice(A=-1-A,0,B),j.alternateSets.splice(A,0,0)),j.alternateSets[A]=O.by},vg.prototype.addLigature=function(Z,_e,he,W){var he=this.getLookupTables(he,W,Z,4,!0)[0],W=he.subtables[0],Z=(W||(he.subtables[0]=W={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),M.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),_e.sub[0]),te=_e.sub.slice(1),he={ligGlyph:_e.by,components:te},_e=this.binSearch(W.coverage.glyphs,Z);if(0<=_e){for(var ve=W.ligatureSets[_e],Re=0;Re<ve.length;Re++)if(function(qe,Ue){var Ae=qe.length;if(Ae===Ue.length){for(var ht=0;ht<Ae;ht++)if(qe[ht]!==Ue[ht])return;return 1}}(ve[Re].components,te))return;ve.push(he)}else W.coverage.glyphs.splice(_e=-1-_e,0,Z),W.ligatureSets.splice(_e,0,[he])},vg.prototype.getFeature=function(A,O,j){if(/ss\d\d/.test(A))return this.getSingle(A,O,j);switch(A){case"aalt":case"salt":return this.getSingle(A,O,j).concat(this.getAlternates(A,O,j));case"dlig":case"liga":case"rlig":return this.getLigatures(A,O,j)}},vg.prototype.add=function(A,O,j,B){if(/ss\d\d/.test(A))return this.addSingle(A,O,j,B);switch(A){case"aalt":case"salt":return typeof O.by=="number"?this.addSingle(A,O,j,B):this.addAlternate(A,O,j,B);case"dlig":case"liga":case"rlig":return this.addLigature(A,O,j,B)}};var bAe={getPath:yAe,parse:function(A,O,j,B){for(var W=new ur.GlyphSet(B),Z=0;Z<j.length-1;Z+=1){var te=j[Z];te!==j[Z+1]?W.push(Z,ur.ttfGlyphLoader(B,Z,xEt,A,O+te,vEt)):W.push(Z,ur.glyphLoader(B,Z))}return W}};function xAe(A){this.font=A,this.getCommands=function(O){return bAe.getPath(O).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function wEt(A){return A}function vAe(A){return Math.sign(A)*Math.round(Math.abs(A))}function _Et(A){return Math.sign(A)*Math.round(Math.abs(2*A))/2}function SEt(A){return Math.sign(A)*(Math.round(Math.abs(A)+.5)-.5)}function CEt(A){return Math.sign(A)*Math.ceil(Math.abs(A))}function EEt(A){return Math.sign(A)*Math.floor(Math.abs(A))}function wAe(A){var O=this.srPeriod,j=this.srPhase,B=1;return A<0&&(A=-A,B=-1),A+=this.srThreshold-j,A=Math.trunc(A/O)*O,(A+=j)<0?j*B:A*B}var wg={x:1,y:0,axis:"x",distance:function(A,O,j,B){return(j?A.xo:A.x)-(B?O.xo:O.x)},interpolate:function(A,O,j,B){var W,Z,te,he,_e,ve,Re;if(!B||B===this)return W=A.xo-O.xo,Z=A.xo-j.xo,_e=O.x-O.xo,ve=j.x-j.xo,(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?void(A.x=A.xo+(_e+ve)/2):void(A.x=A.xo+(_e*he+ve*te)/Re);W=B.distance(A,O,!0,!0),Z=B.distance(A,j,!0,!0),_e=B.distance(O,O,!1,!0),ve=B.distance(j,j,!1,!0),(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?wg.setRelative(A,A,(_e+ve)/2,B,!0):wg.setRelative(A,A,(_e*he+ve*te)/Re,B,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(A,O,j,B,W){var Z,te;B&&B!==this?(Z=W?O.xo:O.x,te=W?O.yo:O.y,Z+=j*B.x,te+=j*B.y,A.x=Z+(A.y-te)/B.normalSlope):A.x=(W?O.xo:O.x)+j},slope:0,touch:function(A){A.xTouched=!0},touched:function(A){return A.xTouched},untouch:function(A){A.xTouched=!1}},vb={x:0,y:1,axis:"y",distance:function(A,O,j,B){return(j?A.yo:A.y)-(B?O.yo:O.y)},interpolate:function(A,O,j,B){var W,Z,te,he,_e,ve,Re;if(!B||B===this)return W=A.yo-O.yo,Z=A.yo-j.yo,_e=O.y-O.yo,ve=j.y-j.yo,(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?void(A.y=A.yo+(_e+ve)/2):void(A.y=A.yo+(_e*he+ve*te)/Re);W=B.distance(A,O,!0,!0),Z=B.distance(A,j,!0,!0),_e=B.distance(O,O,!1,!0),ve=B.distance(j,j,!1,!0),(Re=(te=Math.abs(W))+(he=Math.abs(Z)))===0?vb.setRelative(A,A,(_e+ve)/2,B,!0):vb.setRelative(A,A,(_e*he+ve*te)/Re,B,!0)},normalSlope:0,setRelative:function(A,O,j,B,W){var Z,te;B&&B!==this?(Z=W?O.xo:O.x,te=W?O.yo:O.y,Z+=j*B.x,te+=j*B.y,A.y=te+B.normalSlope*(A.x-Z)):A.y=(W?O.yo:O.y)+j},slope:Number.POSITIVE_INFINITY,touch:function(A){A.yTouched=!0},touched:function(A){return A.yTouched},untouch:function(A){A.yTouched=!1}};function _R(A,O){this.x=A,this.y=O,this.axis=void 0,this.slope=O/A,this.normalSlope=-A/O,Object.freeze(this)}function SR(A,O){var j=Math.sqrt(A*A+O*O);return O/=j,(A/=j)===1&&O===0?wg:A===0&&O===1?vb:new _R(A,O)}function wb(A,O,j,B){this.x=this.xo=Math.round(64*A)/64,this.y=this.yo=Math.round(64*O)/64,this.lastPointOfContour=j,this.onCurve=B,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(wg),Object.freeze(vb),_R.prototype.distance=function(A,O,j,B){return this.x*wg.distance(A,O,j,B)+this.y*vb.distance(A,O,j,B)},_R.prototype.interpolate=function(A,W,Z,B){var te=B.distance(A,W,!0,!0),he=B.distance(A,Z,!0,!0),W=B.distance(W,W,!1,!0),Z=B.distance(Z,Z,!1,!0),te=Math.abs(te),he=Math.abs(he),_e=te+he;_e===0?this.setRelative(A,A,(W+Z)/2,B,!0):this.setRelative(A,A,(W*he+Z*te)/_e,B,!0)},_R.prototype.setRelative=function(A,Z,_e,ve,he){var te=he?Z.xo:Z.x,he=he?Z.yo:Z.y,Z=te+_e*(ve=ve||this).x,te=he+_e*ve.y,he=ve.normalSlope,_e=this.slope,ve=A.x,Re=A.y;A.x=(_e*ve-he*Z+te-Re)/(_e-he),A.y=_e*(A.x-ve)+Re},_R.prototype.touch=function(A){A.xTouched=!0,A.yTouched=!0},wb.prototype.nextTouched=function(A){for(var O=this.nextPointOnContour;!A.touched(O)&&O!==this;)O=O.nextPointOnContour;return O},wb.prototype.prevTouched=function(A){for(var O=this.prevPointOnContour;!A.touched(O)&&O!==this;)O=O.prevPointOnContour;return O};var CR=Object.freeze(new wb(0,0)),TEt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function b1(A,O){switch(this.env=A,this.stack=[],this.prog=O,A){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=wg,this.round=vAe}}function kz(A){for(var O=A.tZone=new Array(A.gZone.length),j=0;j<O.length;j++)O[j]=new wb(0,0)}function _Ae(A,O){var j,B=A.prog,W=A.ip,Z=1;do if((j=B[++W])===88)Z++;else if(j===89)Z--;else if(j===64)W+=B[W+1]+1;else if(j===65)W+=2*B[W+1]+1;else if(176<=j&&j<=183)W+=j-176+1;else if(184<=j&&j<=191)W+=2*(j-184+1);else if(O&&Z===1&&j===27)break;while(0<Z);A.ip=W}function SAe(A,O){c.DEBUG&&console.log(O.step,"SVTCA["+A.axis+"]"),O.fv=O.pv=O.dpv=A}function CAe(A,O){c.DEBUG&&console.log(O.step,"SPVTCA["+A.axis+"]"),O.pv=O.dpv=A}function EAe(A,O){c.DEBUG&&console.log(O.step,"SFVTCA["+A.axis+"]"),O.fv=A}function TAe(A,O){var j,W=O.stack,B=W.pop(),W=W.pop(),Z=O.z2[B],te=O.z1[W];c.DEBUG&&console.log("SPVTL["+A+"]",B,W),B=A?(j=Z.y-te.y,te.x-Z.x):(j=te.x-Z.x,te.y-Z.y),O.pv=O.dpv=SR(j,B)}function AAe(A,O){var j,W=O.stack,B=W.pop(),W=W.pop(),Z=O.z2[B],te=O.z1[W];c.DEBUG&&console.log("SFVTL["+A+"]",B,W),B=A?(j=Z.y-te.y,te.x-Z.x):(j=te.x-Z.x,te.y-Z.y),O.fv=SR(j,B)}function sne(A){c.DEBUG&&console.log(A.step,"POP[]"),A.stack.pop()}function kAe(A,O){var j=O.stack.pop(),B=O.z0[j],W=O.fv,Z=O.pv,te=(c.DEBUG&&console.log(O.step,"MDAP["+A+"]",j),Z.distance(B,CR));A&&(te=O.round(te)),W.setRelative(B,CR,te,Z),W.touch(B),O.rp0=O.rp1=j}function IAe(A,O){var j,B,W,Z=O.z2,te=Z.length-2;c.DEBUG&&console.log(O.step,"IUP["+A.axis+"]");for(var he=0;he<te;he++)j=Z[he],A.touched(j)||(B=j.prevTouched(A))!==j&&(B===(W=j.nextTouched(A))&&A.setRelative(j,j,A.distance(B,B,!1,!0),A,!0),A.interpolate(j,B,W,A))}function DAe(A,O){for(var j=O.stack,B=A?O.rp1:O.rp2,W=(A?O.z0:O.z1)[B],Z=O.fv,te=O.pv,he=O.loop,_e=O.z2;he--;){var ve=j.pop(),Re=_e[ve],qe=te.distance(W,W,!1,!0);Z.setRelative(Re,Re,qe,te),Z.touch(Re),c.DEBUG&&console.log(O.step,(1<O.loop?"loop "+(O.loop-he)+": ":"")+"SHP["+(A?"rp1":"rp2")+"]",ve)}O.loop=1}function NAe(A,O){for(var j=O.stack,te=A?O.rp1:O.rp2,B=(A?O.z0:O.z1)[te],W=O.fv,Z=O.pv,te=j.pop(),he=O.z2[O.contours[te]],_e=he,ve=(c.DEBUG&&console.log(O.step,"SHC["+A+"]",te),Z.distance(B,B,!1,!0));_e!==B&&W.setRelative(_e,_e,ve,Z),(_e=_e.nextPointOnContour)!==he;);}function MAe(A,O){var j,B,he=O.stack,W=A?O.rp1:O.rp2,W=(A?O.z0:O.z1)[W],Z=O.fv,te=O.pv,he=he.pop();switch(c.DEBUG&&console.log(O.step,"SHZ["+A+"]",he),he){case 0:j=O.tZone;break;case 1:j=O.gZone;break;default:throw new Error("Invalid zone")}for(var _e=te.distance(W,W,!1,!0),ve=j.length-2,Re=0;Re<ve;Re++)B=j[Re],Z.setRelative(B,B,_e,te)}function FAe(A,O){var B=O.stack,j=B.pop()/64,B=B.pop(),W=O.z1[B],Z=O.z0[O.rp0],te=O.fv,he=O.pv;te.setRelative(W,Z,j,he),te.touch(W),c.DEBUG&&console.log(O.step,"MSIRP["+A+"]",j,B),O.rp1=O.rp0,O.rp2=B,A&&(O.rp0=B)}function OAe(A,O){var j=O.stack,he=j.pop(),j=j.pop(),B=O.z0[j],W=O.fv,Z=O.pv,te=O.cvt[he],he=(c.DEBUG&&console.log(O.step,"MIAP["+A+"]",he,"(",te,")",j),Z.distance(B,CR));A&&(Math.abs(he-te)<O.cvCutIn&&(he=te),he=O.round(he)),W.setRelative(B,CR,he,Z),O.zp0===0&&(B.xo=B.x,B.yo=B.y),W.touch(B),O.rp0=O.rp1=j}function RAe(A,O){var j=O.stack,B=j.pop(),W=O.z2[B];c.DEBUG&&console.log(O.step,"GC["+A+"]",B),j.push(64*O.dpv.distance(W,CR,A,!1))}function PAe(A,O){var B=O.stack,j=B.pop(),B=B.pop(),W=O.z1[j],Z=O.z0[B],Z=O.dpv.distance(Z,W,A,A);c.DEBUG&&console.log(O.step,"MD["+A+"]",j,B,"->",Z),O.stack.push(Math.round(64*Z))}function ane(A,O){var j=O.stack,B=j.pop(),W=O.fv,Z=O.pv,te=O.ppem,he=O.deltaBase+16*(A-1),_e=O.deltaShift,ve=O.z0;c.DEBUG&&console.log(O.step,"DELTAP["+A+"]",B,j);for(var Re=0;Re<B;Re++){var qe=j.pop(),Ue=j.pop();he+((240&Ue)>>4)===te&&(0<=(Ue=(15&Ue)-8)&&Ue++,c.DEBUG&&console.log(O.step,"DELTAPFIX",qe,"by",Ue*_e),qe=ve[qe],W.setRelative(qe,qe,Ue*_e,Z))}}function Iz(A,O){var j=O.stack,B=j.pop();c.DEBUG&&console.log(O.step,"ROUND[]"),j.push(64*O.round(B/64))}function lne(A,O){var j=O.stack,B=j.pop(),W=O.ppem,Z=O.deltaBase+16*(A-1),te=O.deltaShift;c.DEBUG&&console.log(O.step,"DELTAC["+A+"]",B,j);for(var he=0;he<B;he++){var _e=j.pop(),ve=j.pop();Z+((240&ve)>>4)===W&&(0<=(ve=(15&ve)-8)&&ve++,ve=ve*te,c.DEBUG&&console.log(O.step,"DELTACFIX",_e,"by",ve),O.cvt[_e]+=ve)}}function LAe(A,O){var j,W=O.stack,B=W.pop(),W=W.pop(),Z=O.z2[B],te=O.z1[W];c.DEBUG&&console.log(O.step,"SDPVTL["+A+"]",B,W),B=A?(j=Z.y-te.y,te.x-Z.x):(j=te.x-Z.x,te.y-Z.y),O.dpv=SR(j,B)}function x1(A,O){var j=O.stack,B=O.prog,W=O.ip;c.DEBUG&&console.log(O.step,"PUSHB["+A+"]");for(var Z=0;Z<A;Z++)j.push(B[++W]);O.ip=W}function v1(A,O){var j=O.ip,B=O.prog,W=O.stack;c.DEBUG&&console.log(O.ip,"PUSHW["+A+"]");for(var Z=0;Z<A;Z++){var te=B[++j]<<8|B[++j];32768&te&&(te=-(1+(65535^te))),W.push(te)}O.ip=j}function cr(A,O,j,B,W,Z){var te,he,ve=Z.stack,_e=A&&ve.pop(),ve=ve.pop(),Re=Z.rp0,Re=Z.z0[Re],qe=Z.z1[ve],Ue=Z.minDis,Ae=Z.fv,ht=Z.dpv,Xe=te=ht.distance(qe,Re,!0,!0),ot=0<=Xe?1:-1;Xe=Math.abs(Xe),A&&(he=Z.cvt[_e],B&&Math.abs(Xe-he)<Z.cvCutIn&&(Xe=he)),j&&Xe<Ue&&(Xe=Ue),B&&(Xe=Z.round(Xe)),Ae.setRelative(qe,Re,ot*Xe,ht),Ae.touch(qe),c.DEBUG&&console.log(Z.step,(A?"MIRP[":"MDRP[")+(O?"M":"m")+(j?">":"_")+(B?"R":"_")+(W===0?"Gr":W===1?"Bl":W===2?"Wh":"")+"]",A?_e+"("+Z.cvt[_e]+","+he+")":"",ve,"(d =",te,"->",ot*Xe,")"),Z.rp1=Z.rp0,Z.rp2=ve,O&&(Z.rp0=ve)}xAe.prototype.exec=function(A,O){if(typeof O!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var j=this.font,B=this._prepState;if(!B||B.ppem!==O){var W=this._fpgmState;if(!W){b1.prototype=TEt,(W=this._fpgmState=new b1("fpgm",j.tables.fpgm)).funcs=[],W.font=j,c.DEBUG&&(console.log("---EXEC FPGM---"),W.step=-1);try{Dk(W)}catch(ve){return console.log("Hinting error in FPGM:"+ve),void(this._errorState=3)}}b1.prototype=W,(B=this._prepState=new b1("prep",j.tables.prep)).ppem=O;var Z=j.tables.cvt;if(Z)for(var te=B.cvt=new Array(Z.length),he=O/j.unitsPerEm,_e=0;_e<Z.length;_e++)te[_e]=Z[_e]*he;else B.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),B.step=-1);try{Dk(B)}catch(ve){this._errorState<2&&console.log("Hinting error in PREP:"+ve),this._errorState=2}}if(!(1<this._errorState))try{return AEt(A,B)}catch(ve){this._errorState<1&&(console.log("Hinting error:"+ve),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var AEt=function(A,O){var j=O.ppem/O.font.unitsPerEm,B=j,W=A.components;if(b1.prototype=O,W){for(var Z=O.font,te=[],he=[],_e=0;_e<W.length;_e++){var ve=W[_e],Re=Z.glyphs.get(ve.glyphIndex),qe=new b1("glyf",Re.instructions);c.DEBUG&&(console.log("---EXEC COMP "+_e+"---"),qe.step=-1),jAe(Re,qe,j,B);for(var Ue=Math.round(ve.dx*j),Ae=Math.round(ve.dy*B),ht=qe.gZone,Xe=qe.contours,ot=0;ot<ht.length;ot++){var He=ht[ot];He.xTouched=He.yTouched=!1,He.xo=He.x=He.x+Ue,He.yo=He.y=He.y+Ae}var Ye=te.length;te.push.apply(te,ht);for(var br=0;br<Xe.length;br++)he.push(Xe[br]+Ye)}A.instructions&&!qe.inhibitGridFit&&((qe=new b1("glyf",A.instructions)).gZone=qe.z0=qe.z1=qe.z2=te,qe.contours=he,te.push(new wb(0,0),new wb(Math.round(A.advanceWidth*j),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),qe.step=-1),Dk(qe),te.length-=2)}else qe=new b1("glyf",A.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),qe.step=-1),jAe(A,qe,j,B),te=qe.gZone;return te},jAe=function(A,O,j,B){for(var W,Z,te,he=A.points||[],_e=he.length,ve=O.gZone=O.z0=O.z1=O.z2=[],Re=O.contours=[],qe=0;qe<_e;qe++)W=he[qe],ve[qe]=new wb(W.x*j,W.y*B,W.lastPointOfContour,W.onCurve);for(var Ue=0;Ue<_e;Ue++)W=ve[Ue],Z||(Z=W,Re.push(Ue)),W.lastPointOfContour?((W.nextPointOnContour=Z).prevPointOnContour=W,Z=void 0):(te=ve[Ue+1],(W.nextPointOnContour=te).prevPointOnContour=W);if(!O.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",O.stack);for(var Ae=0;Ae<_e;Ae++)console.log(Ae,ve[Ae].x,ve[Ae].y)}if(ve.push(new wb(0,0),new wb(Math.round(A.advanceWidth*j),0)),Dk(O),ve.length-=2,c.DEBUG){console.log("FINISHED GLYPH",O.stack);for(var ht=0;ht<_e;ht++)console.log(ht,ve[ht].x,ve[ht].y)}}},Dk=function(A){var O=A.prog;if(O){var j,B=O.length;for(A.ip=0;A.ip<B;A.ip++){if(c.DEBUG&&A.step++,!(j=kEt[O[A.ip]]))throw new Error("unknown instruction: 0x"+Number(O[A.ip]).toString(16));j(A)}}},kEt=[SAe.bind(void 0,vb),SAe.bind(void 0,wg),CAe.bind(void 0,vb),CAe.bind(void 0,wg),EAe.bind(void 0,vb),EAe.bind(void 0,wg),TAe.bind(void 0,0),TAe.bind(void 0,1),AAe.bind(void 0,0),AAe.bind(void 0,1),function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"SPVFS[]",O,j),A.pv=A.dpv=SR(j,O)},function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"SPVFS[]",O,j),A.fv=SR(j,O)},function(A){var O=A.stack,j=A.pv;c.DEBUG&&console.log(A.step,"GPV[]"),O.push(16384*j.x),O.push(16384*j.y)},function(A){var O=A.stack,j=A.fv;c.DEBUG&&console.log(A.step,"GFV[]"),O.push(16384*j.x),O.push(16384*j.y)},function(A){A.fv=A.pv,c.DEBUG&&console.log(A.step,"SFVTPV[]")},function(O){var j=(te=O.stack).pop(),B=te.pop(),W=te.pop(),Z=te.pop(),te=te.pop(),_e=O.z0,Re=O.z1,he=_e[j],_e=_e[B],ve=Re[W],Re=Re[Z],O=O.z2[te],j=(c.DEBUG&&console.log("ISECT[], ",j,B,W,Z,te),he.x),B=he.y,W=_e.x,Z=_e.y,te=ve.x,he=ve.y,_e=Re.x,ve=Re.y,Re=(j-W)*(he-ve)-(B-Z)*(te-_e),qe=j*Z-B*W,Ue=te*ve-he*_e;O.x=(qe*(te-_e)-Ue*(j-W))/Re,O.y=(qe*(he-ve)-Ue*(B-Z))/Re},function(A){A.rp0=A.stack.pop(),c.DEBUG&&console.log(A.step,"SRP0[]",A.rp0)},function(A){A.rp1=A.stack.pop(),c.DEBUG&&console.log(A.step,"SRP1[]",A.rp1)},function(A){A.rp2=A.stack.pop(),c.DEBUG&&console.log(A.step,"SRP2[]",A.rp2)},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZP0[]",O),A.zp0=O){case 0:A.tZone||kz(A),A.z0=A.tZone;break;case 1:A.z0=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZP1[]",O),A.zp1=O){case 0:A.tZone||kz(A),A.z1=A.tZone;break;case 1:A.z1=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZP2[]",O),A.zp2=O){case 0:A.tZone||kz(A),A.z2=A.tZone;break;case 1:A.z2=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){var O=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SZPS[]",O),A.zp0=A.zp1=A.zp2=O){case 0:A.tZone||kz(A),A.z0=A.z1=A.z2=A.tZone;break;case 1:A.z0=A.z1=A.z2=A.gZone;break;default:throw new Error("Invalid zone pointer")}},function(A){A.loop=A.stack.pop(),c.DEBUG&&console.log(A.step,"SLOOP[]",A.loop)},function(A){c.DEBUG&&console.log(A.step,"RTG[]"),A.round=vAe},function(A){c.DEBUG&&console.log(A.step,"RTHG[]"),A.round=SEt},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SMD[]",O),A.minDis=O/64},function(A){c.DEBUG&&console.log(A.step,"ELSE[]"),_Ae(A,!1)},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"JMPR[]",O),A.ip+=O-1},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SCVTCI[]",O),A.cvCutIn=O/64},void 0,void 0,function(A){var O=A.stack;c.DEBUG&&console.log(A.step,"DUP[]"),O.push(O[O.length-1])},sne,function(A){c.DEBUG&&console.log(A.step,"CLEAR[]"),A.stack.length=0},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"SWAP[]"),O.push(j),O.push(B)},function(A){var O=A.stack;c.DEBUG&&console.log(A.step,"DEPTH[]"),O.push(O.length)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"CINDEX[]",j),O.push(O[O.length-j])},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"MINDEX[]",j),O.push(O.splice(O.length-j,1)[0])},void 0,void 0,void 0,function(A){var O=(B=A.stack).pop(),j=B.pop(),B=(c.DEBUG&&console.log(A.step,"LOOPCALL[]",O,j),A.ip),W=A.prog;A.prog=A.funcs[O];for(var Z=0;Z<j;Z++)Dk(A),c.DEBUG&&console.log(++A.step,Z+1<j?"next loopcall":"done loopcall",Z);A.ip=B,A.prog=W},function(A){var O=A.stack.pop(),j=(c.DEBUG&&console.log(A.step,"CALL[]",O),A.ip),B=A.prog;A.prog=A.funcs[O],Dk(A),A.ip=j,A.prog=B,c.DEBUG&&console.log(++A.step,"returning from",O)},function(A){if(A.env!=="fpgm")throw new Error("FDEF not allowed here");var B=A.stack,O=A.prog,j=A.ip,B=B.pop(),W=j;for(c.DEBUG&&console.log(A.step,"FDEF[]",B);O[++j]!==45;);A.ip=j,A.funcs[B]=O.slice(W+1,j)},void 0,kAe.bind(void 0,0),kAe.bind(void 0,1),IAe.bind(void 0,vb),IAe.bind(void 0,wg),DAe.bind(void 0,0),DAe.bind(void 0,1),NAe.bind(void 0,0),NAe.bind(void 0,1),MAe.bind(void 0,0),MAe.bind(void 0,1),function(A){for(var O=A.stack,j=A.loop,B=A.fv,W=O.pop()/64,Z=A.z2;j--;){var te=O.pop(),he=Z[te];c.DEBUG&&console.log(A.step,(1<A.loop?"loop "+(A.loop-j)+": ":"")+"SHPIX[]",te,W),B.setRelative(he,he,W),B.touch(he)}A.loop=1},function(A){for(var O=A.stack,j=A.rp1,B=A.rp2,W=A.loop,Z=A.z0[j],te=A.z1[B],he=A.fv,_e=A.dpv,ve=A.z2;W--;){var Re=O.pop(),qe=ve[Re];c.DEBUG&&console.log(A.step,(1<A.loop?"loop "+(A.loop-W)+": ":"")+"IP[]",Re,j,"<->",B),he.interpolate(qe,Z,te,_e),he.touch(qe)}A.loop=1},FAe.bind(void 0,0),FAe.bind(void 0,1),function(A){for(var O=A.stack,j=A.rp0,B=A.z0[j],W=A.loop,Z=A.fv,te=A.pv,he=A.z1;W--;){var _e=O.pop(),ve=he[_e];c.DEBUG&&console.log(A.step,(1<A.loop?"loop "+(A.loop-W)+": ":"")+"ALIGNRP[]",_e),Z.setRelative(ve,B,0,te),Z.touch(ve)}A.loop=1},function(A){c.DEBUG&&console.log(A.step,"RTDG[]"),A.round=_Et},OAe.bind(void 0,0),OAe.bind(void 0,1),function(A){var O=A.prog,j=A.ip,B=A.stack,W=O[++j];c.DEBUG&&console.log(A.step,"NPUSHB[]",W);for(var Z=0;Z<W;Z++)B.push(O[++j]);A.ip=j},function(A){var O=A.ip,j=A.prog,B=A.stack,W=j[++O];c.DEBUG&&console.log(A.step,"NPUSHW[]",W);for(var Z=0;Z<W;Z++){var te=j[++O]<<8|j[++O];32768&te&&(te=-(1+(65535^te))),B.push(te)}A.ip=O},function(A){var B=A.stack,O=(O=A.store)||(A.store=[]),j=B.pop(),B=B.pop();c.DEBUG&&console.log(A.step,"WS",j,B),O[B]=j},function(W){var O=W.stack,j=W.store,B=O.pop(),W=(c.DEBUG&&console.log(W.step,"RS",B),j&&j[B]||0);O.push(W)},function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"WCVTP",O,j),A.cvt[j]=O/64},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"RCVT",j),O.push(64*A.cvt[j])},RAe.bind(void 0,0),RAe.bind(void 0,1),void 0,PAe.bind(void 0,0),PAe.bind(void 0,1),function(A){c.DEBUG&&console.log(A.step,"MPPEM[]"),A.stack.push(A.ppem)},void 0,function(A){c.DEBUG&&console.log(A.step,"FLIPON[]"),A.autoFlip=!0},void 0,void 0,function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"LT[]",j,B),O.push(B<j?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"LTEQ[]",j,B),O.push(B<=j?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"GT[]",j,B),O.push(j<B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"GTEQ[]",j,B),O.push(j<=B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"EQ[]",j,B),O.push(j===B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"NEQ[]",j,B),O.push(j!==B?1:0)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"ODD[]",j),O.push(Math.trunc(j)%2?1:0)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"EVEN[]",j),O.push(Math.trunc(j)%2?0:1)},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"IF[]",O),O||(_Ae(A,!0),c.DEBUG&&console.log(A.step,"EIF[]"))},function(A){c.DEBUG&&console.log(A.step,"EIF[]")},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"AND[]",j,B),O.push(j&&B?1:0)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"OR[]",j,B),O.push(j||B?1:0)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"NOT[]",j),O.push(j?0:1)},ane.bind(void 0,1),function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SDB[]",O),A.deltaBase=O},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SDS[]",O),A.deltaShift=Math.pow(.5,O)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"ADD[]",j,B),O.push(B+j)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"SUB[]",j,B),O.push(B-j)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"DIV[]",j,B),O.push(64*B/j)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"MUL[]",j,B),O.push(B*j/64)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"ABS[]",j),O.push(Math.abs(j))},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"NEG[]",j),O.push(-j)},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"FLOOR[]",j),O.push(64*Math.floor(j/64))},function(A){var O=A.stack,j=O.pop();c.DEBUG&&console.log(A.step,"CEILING[]",j),O.push(64*Math.ceil(j/64))},Iz.bind(void 0,0),Iz.bind(void 0,1),Iz.bind(void 0,2),Iz.bind(void 0,3),void 0,void 0,void 0,void 0,function(A){var O=(j=A.stack).pop(),j=j.pop();c.DEBUG&&console.log(A.step,"WCVTF[]",O,j),A.cvt[j]=O*A.ppem/A.font.unitsPerEm},ane.bind(void 0,2),ane.bind(void 0,3),lne.bind(void 0,1),lne.bind(void 0,2),lne.bind(void 0,3),function(A){var O,j=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"SROUND[]",j),A.round=wAe,192&j){case 0:O=.5;break;case 64:O=1;break;case 128:O=2;break;default:throw new Error("invalid SROUND value")}switch(A.srPeriod=O,48&j){case 0:A.srPhase=0;break;case 16:A.srPhase=.25*O;break;case 32:A.srPhase=.5*O;break;case 48:A.srPhase=.75*O;break;default:throw new Error("invalid SROUND value")}A.srThreshold=(j&=15)===0?0:(j/8-.5)*O},function(A){var O,j=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"S45ROUND[]",j),A.round=wAe,192&j){case 0:O=Math.sqrt(2)/2;break;case 64:O=Math.sqrt(2);break;case 128:O=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(A.srPeriod=O,48&j){case 0:A.srPhase=0;break;case 16:A.srPhase=.25*O;break;case 32:A.srPhase=.5*O;break;case 48:A.srPhase=.75*O;break;default:throw new Error("invalid S45ROUND value")}A.srThreshold=(j&=15)===0?0:(j/8-.5)*O},void 0,void 0,function(A){c.DEBUG&&console.log(A.step,"ROFF[]"),A.round=wEt},void 0,function(A){c.DEBUG&&console.log(A.step,"RUTG[]"),A.round=CEt},function(A){c.DEBUG&&console.log(A.step,"RDTG[]"),A.round=EEt},sne,sne,void 0,void 0,void 0,void 0,void 0,function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SCANCTRL[]",O)},LAe.bind(void 0,0),LAe.bind(void 0,1),function(A){var O=A.stack,j=O.pop(),B=0;c.DEBUG&&console.log(A.step,"GETINFO[]",j),1&j&&(B=35),32&j&&(B|=4096),O.push(B)},void 0,function(A){var O=A.stack,j=O.pop(),B=O.pop(),W=O.pop();c.DEBUG&&console.log(A.step,"ROLL[]"),O.push(B),O.push(j),O.push(W)},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"MAX[]",j,B),O.push(Math.max(B,j))},function(A){var O=A.stack,j=O.pop(),B=O.pop();c.DEBUG&&console.log(A.step,"MIN[]",j,B),O.push(Math.min(B,j))},function(A){var O=A.stack.pop();c.DEBUG&&console.log(A.step,"SCANTYPE[]",O)},function(A){var O=A.stack.pop(),j=A.stack.pop();switch(c.DEBUG&&console.log(A.step,"INSTCTRL[]",O,j),O){case 1:return void(A.inhibitGridFit=!!j);case 2:return void(A.ignoreCvt=!!j);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,x1.bind(void 0,1),x1.bind(void 0,2),x1.bind(void 0,3),x1.bind(void 0,4),x1.bind(void 0,5),x1.bind(void 0,6),x1.bind(void 0,7),x1.bind(void 0,8),v1.bind(void 0,1),v1.bind(void 0,2),v1.bind(void 0,3),v1.bind(void 0,4),v1.bind(void 0,5),v1.bind(void 0,6),v1.bind(void 0,7),v1.bind(void 0,8),cr.bind(void 0,0,0,0,0,0),cr.bind(void 0,0,0,0,0,1),cr.bind(void 0,0,0,0,0,2),cr.bind(void 0,0,0,0,0,3),cr.bind(void 0,0,0,0,1,0),cr.bind(void 0,0,0,0,1,1),cr.bind(void 0,0,0,0,1,2),cr.bind(void 0,0,0,0,1,3),cr.bind(void 0,0,0,1,0,0),cr.bind(void 0,0,0,1,0,1),cr.bind(void 0,0,0,1,0,2),cr.bind(void 0,0,0,1,0,3),cr.bind(void 0,0,0,1,1,0),cr.bind(void 0,0,0,1,1,1),cr.bind(void 0,0,0,1,1,2),cr.bind(void 0,0,0,1,1,3),cr.bind(void 0,0,1,0,0,0),cr.bind(void 0,0,1,0,0,1),cr.bind(void 0,0,1,0,0,2),cr.bind(void 0,0,1,0,0,3),cr.bind(void 0,0,1,0,1,0),cr.bind(void 0,0,1,0,1,1),cr.bind(void 0,0,1,0,1,2),cr.bind(void 0,0,1,0,1,3),cr.bind(void 0,0,1,1,0,0),cr.bind(void 0,0,1,1,0,1),cr.bind(void 0,0,1,1,0,2),cr.bind(void 0,0,1,1,0,3),cr.bind(void 0,0,1,1,1,0),cr.bind(void 0,0,1,1,1,1),cr.bind(void 0,0,1,1,1,2),cr.bind(void 0,0,1,1,1,3),cr.bind(void 0,1,0,0,0,0),cr.bind(void 0,1,0,0,0,1),cr.bind(void 0,1,0,0,0,2),cr.bind(void 0,1,0,0,0,3),cr.bind(void 0,1,0,0,1,0),cr.bind(void 0,1,0,0,1,1),cr.bind(void 0,1,0,0,1,2),cr.bind(void 0,1,0,0,1,3),cr.bind(void 0,1,0,1,0,0),cr.bind(void 0,1,0,1,0,1),cr.bind(void 0,1,0,1,0,2),cr.bind(void 0,1,0,1,0,3),cr.bind(void 0,1,0,1,1,0),cr.bind(void 0,1,0,1,1,1),cr.bind(void 0,1,0,1,1,2),cr.bind(void 0,1,0,1,1,3),cr.bind(void 0,1,1,0,0,0),cr.bind(void 0,1,1,0,0,1),cr.bind(void 0,1,1,0,0,2),cr.bind(void 0,1,1,0,0,3),cr.bind(void 0,1,1,0,1,0),cr.bind(void 0,1,1,0,1,1),cr.bind(void 0,1,1,0,1,2),cr.bind(void 0,1,1,0,1,3),cr.bind(void 0,1,1,1,0,0),cr.bind(void 0,1,1,1,0,1),cr.bind(void 0,1,1,1,0,2),cr.bind(void 0,1,1,1,0,3),cr.bind(void 0,1,1,1,1,0),cr.bind(void 0,1,1,1,1,1),cr.bind(void 0,1,1,1,1,2),cr.bind(void 0,1,1,1,1,3)],IEt=Array.from||function(A){return A.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Jo(A){(A=A||{}).empty||(Ik(A.familyName,"When creating a new Font object, familyName is required."),Ik(A.styleName,"When creating a new Font object, styleName is required."),Ik(A.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ik(A.ascender,"When creating a new Font object, ascender is required."),Ik(A.descender,"When creating a new Font object, descender is required."),Ik(A.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:A.familyName||" "},fontSubfamily:{en:A.styleName||" "},fullName:{en:A.fullName||A.familyName+" "+A.styleName},postScriptName:{en:A.postScriptName||(A.familyName+A.styleName).replace(/\s/g,"")},designer:{en:A.designer||" "},designerURL:{en:A.designerURL||" "},manufacturer:{en:A.manufacturer||" "},manufacturerURL:{en:A.manufacturerURL||" "},license:{en:A.license||" "},licenseURL:{en:A.licenseURL||" "},version:{en:A.version||"Version 0.1"},description:{en:A.description||" "},copyright:{en:A.copyright||" "},trademark:{en:A.trademark||" "}},this.unitsPerEm=A.unitsPerEm||1e3,this.ascender=A.ascender,this.descender=A.descender,this.createdTimestamp=A.createdTimestamp,this.tables={os2:{usWeightClass:A.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:A.widthClass||this.usWidthClasses.MEDIUM,fsSelection:A.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ur.GlyphSet(this,A.glyphs||[]),this.encoding=new Ve(this),this.position=new Az(this),this.substitution=new vg(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new xAe(this):void 0)}})}function BAe(A,O){var j,B=JSON.stringify(A),W=256;for(j in O){var Z=parseInt(j);if(Z&&!(Z<256)){if(JSON.stringify(O[j])===B)return Z;W<=Z&&(W=Z+1)}}return O[W]=A,W}Jo.prototype.hasChar=function(A){return this.encoding.charToGlyphIndex(A)!==null},Jo.prototype.charToGlyphIndex=function(A){return this.encoding.charToGlyphIndex(A)},Jo.prototype.charToGlyph=function(A){return A=this.charToGlyphIndex(A),this.glyphs.get(A)||this.glyphs.get(0)},Jo.prototype.stringToGlyphs=function(A,O){O=O||this.defaultRenderOptions;for(var j=IEt(A),B=[],W=0;W<j.length;W+=1){var Z=j[W];B.push(this.charToGlyphIndex(Z))}var te=B.length;if(O.features){var A=O.script||this.substitution.getDefaultScriptName(),he=[];O.features.liga&&(he=he.concat(this.substitution.getFeature("liga",A,O.language))),O.features.rlig&&(he=he.concat(this.substitution.getFeature("rlig",A,O.language)));for(var _e=0;_e<te;_e+=1)for(var ve=0;ve<he.length;ve++){for(var Re=he[ve],qe=Re.sub,Ue=qe.length,Ae=0;Ae<Ue&&qe[Ae]===B[_e+Ae];)Ae++;Ae===Ue&&(B.splice(_e,Ue,Re.by),te=te-Ue+1)}}for(var ht=new Array(te),Xe=this.glyphs.get(0),ot=0;ot<te;ot+=1)ht[ot]=this.glyphs.get(B[ot])||Xe;return ht},Jo.prototype.nameToGlyphIndex=function(A){return this.glyphNames.nameToGlyphIndex(A)},Jo.prototype.nameToGlyph=function(A){return A=this.nameToGlyphIndex(A),this.glyphs.get(A)||this.glyphs.get(0)},Jo.prototype.glyphIndexToName=function(A){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(A):""},Jo.prototype.getKerningValue=function(A,O){A=A.index||A,O=O.index||O;var j=this.position.defaultKerningTables;return j?this.position.getKerningValue(j,A,O):this.kerningPairs[A+","+O]||0},Jo.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Jo.prototype.forEachGlyph=function(A,O,j,B,W,Z){O=O!==void 0?O:0,j=j!==void 0?j:0,W=W||this.defaultRenderOptions;var te,he=1/this.unitsPerEm*(B=B!==void 0?B:72),_e=this.stringToGlyphs(A,W);W.kerning&&(A=W.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(A,W.language));for(var ve=0;ve<_e.length;ve+=1){var Re=_e[ve];Z.call(this,Re,O,j,B,W),Re.advanceWidth&&(O+=Re.advanceWidth*he),W.kerning&&ve<_e.length-1&&(O+=(te?this.position.getKerningValue(te,Re.index,_e[ve+1].index):this.getKerningValue(Re,_e[ve+1]))*he),W.letterSpacing?O+=W.letterSpacing*B:W.tracking&&(O+=W.tracking/1e3*B)}return O},Jo.prototype.getPath=function(A,O,j,B,W){var Z=new X;return this.forEachGlyph(A,O,j,B,W,function(te,he,_e,ve){te=te.getPath(he,_e,ve,W,this),Z.extend(te)}),Z},Jo.prototype.getPaths=function(A,O,j,B,W){var Z=[];return this.forEachGlyph(A,O,j,B,W,function(te,he,_e,ve){te=te.getPath(he,_e,ve,W,this),Z.push(te)}),Z},Jo.prototype.getAdvanceWidth=function(A,O,j){return this.forEachGlyph(A,0,0,O,j,function(){})},Jo.prototype.draw=function(A,O,j,B,W,Z){this.getPath(O,j,B,W,Z).draw(A)},Jo.prototype.drawPoints=function(A,O,j,B,W,Z){this.forEachGlyph(O,j,B,W,Z,function(te,he,_e,ve){te.drawPoints(A,he,_e,ve)})},Jo.prototype.drawMetrics=function(A,O,j,B,W,Z){this.forEachGlyph(O,j,B,W,Z,function(te,he,_e,ve){te.drawMetrics(A,he,_e,ve)})},Jo.prototype.getEnglishName=function(A){if(A=this.names[A],A)return A.en},Jo.prototype.validate=function(){var A=this;function O(j){j=A.getEnglishName(j),j&&j.trim().length}O("fontFamily"),O("weightName"),O("manufacturer"),O("copyright"),O("version"),this.unitsPerEm},Jo.prototype.toTables=function(){return bEt.fontToTable(this)},Jo.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Jo.prototype.toArrayBuffer=function(){for(var A=this.toTables().encode(),O=new ArrayBuffer(A.length),j=new Uint8Array(O),B=0;B<A.length;B++)j[B]=A[B];return O},Jo.prototype.download=function(A){var O=this.getEnglishName("fontFamily"),j=this.getEnglishName("fontSubfamily"),B=(A=A||O.replace(/\s/g,"")+"-"+j+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,B.byteLength,function(W){W.root.getFile(A,{create:!0},function(Z){Z.createWriter(function(te){var he=new DataView(B),he=new Blob([he],{type:"font/opentype"});te.write(he),te.addEventListener("writeend",function(){location.href=Z.toURL()},!1)})})},function(W){throw new Error(W.name+": "+W.message)})):(O=o("fs"),j=function(W){for(var Z=new a(W.byteLength),te=new Uint8Array(W),he=0;he<Z.length;++he)Z[he]=te[he];return Z}(B),O.writeFileSync(A,j))},Jo.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Jo.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Jo.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var DEt={make:function(A,O){var j=new We.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:A.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:A.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*A.axes.length}]);j.offsetToData=j.sizeOf();for(var B,W,Z,te=0;te<A.axes.length;te++)j.fields=j.fields.concat((B=te,W=A.axes[te],Z=O,Z=BAe(W.name,O),[{name:"tag_"+B,type:"TAG",value:W.tag},{name:"minValue_"+B,type:"FIXED",value:W.minValue<<16},{name:"defaultValue_"+B,type:"FIXED",value:W.defaultValue<<16},{name:"maxValue_"+B,type:"FIXED",value:W.maxValue<<16},{name:"flags_"+B,type:"USHORT",value:0},{name:"nameID_"+B,type:"USHORT",value:Z}]));for(var he=0;he<A.instances.length;he++)j.fields=j.fields.concat(function(_e,ve,Re,qe){for(var Ue=[{name:"nameID_"+_e,type:"USHORT",value:BAe(ve.name,qe)},{name:"flags_"+_e,type:"USHORT",value:0}],Ae=0;Ae<Re.length;++Ae){var ht=Re[Ae].tag;Ue.push({name:"axis_"+_e+" "+ht,type:"FIXED",value:ve.coordinates[ht]<<16})}return Ue}(he,A.instances[he],A.axes,O));return j},parse:function(A,O,j){for(var B,W,Z,te,he=new Ge.Parser(A,O),_e=he.parseULong(),ve=(M.argument(_e===65536,"Unsupported fvar table version."),he.parseOffset16()),Re=(he.skip("uShort",1),he.parseUShort()),qe=he.parseUShort(),Ue=he.parseUShort(),Ae=he.parseUShort(),ht=[],Xe=0;Xe<Re;Xe++)ht.push((B=A,W=O+ve+Xe*qe,Z=j,te={},B=new Ge.Parser(B,W),te.tag=B.parseTag(),te.minValue=B.parseFixed(),te.defaultValue=B.parseFixed(),te.maxValue=B.parseFixed(),B.skip("uShort",1),te.name=Z[B.parseUShort()]||{},te));for(var ot=[],He=O+ve+Re*qe,Ye=0;Ye<Ue;Ye++)ot.push(function(br,nn,Sr,Ar){var wn={},bi=new Ge.Parser(br,nn);wn.name=Ar[bi.parseUShort()]||{},bi.skip("uShort",1),wn.coordinates={};for(var ms=0;ms<Sr.length;++ms)wn.coordinates[Sr[ms].tag]=bi.parseFixed();return wn}(A,He+Ye*Ae,ht,j));return{axes:ht,instances:ot}}},xh=new Array(10);xh[1]=function(){var A=this.offset+this.relativeOffset,O=this.parseUShort();return O===1?{posFormat:1,coverage:this.parsePointer(Be.coverage),value:this.parseValueRecord()}:O===2?{posFormat:2,coverage:this.parsePointer(Be.coverage),values:this.parseValueRecordList()}:void M.assert(!1,"0x"+A.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},xh[2]=function(){var A,O,j,B,Z=this.offset+this.relativeOffset,W=this.parseUShort(),Z=(M.assert(W===1||W===2,"0x"+Z.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Be.coverage)),te=this.parseUShort(),he=this.parseUShort();return W===1?{posFormat:W,coverage:Z,valueFormat1:te,valueFormat2:he,pairSets:this.parseList(Be.pointer(Be.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(he)}})))}:W===2?(A=this.parsePointer(Be.classDef),O=this.parsePointer(Be.classDef),j=this.parseUShort(),B=this.parseUShort(),{posFormat:W,coverage:Z,valueFormat1:te,valueFormat2:he,classDef1:A,classDef2:O,class1Count:j,class2Count:B,classRecords:this.parseList(j,Be.list(B,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(he)}}))}):void 0},xh[3]=function(){return{error:"GPOS Lookup 3 not supported"}},xh[4]=function(){return{error:"GPOS Lookup 4 not supported"}},xh[5]=function(){return{error:"GPOS Lookup 5 not supported"}},xh[6]=function(){return{error:"GPOS Lookup 6 not supported"}},xh[7]=function(){return{error:"GPOS Lookup 7 not supported"}},xh[8]=function(){return{error:"GPOS Lookup 8 not supported"}},xh[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var NEt=new Array(10),MEt={parse:function(A,O){return O=(A=new Be(A,O=O||0)).parseVersion(1),M.argument(O===1||O===1.1,"Unsupported GPOS table version "+O),O===1?{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(xh)}:{version:O,scripts:A.parseScriptList(),features:A.parseFeatureList(),lookups:A.parseLookupList(xh),variations:A.parseFeatureVariationsList()}},make:function(A){return new We.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(A.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(A.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(A.lookups,NEt)}])}},FEt={parse:function(A,O){if(A=new Ge.Parser(A,O),(O=A.parseUShort())===0){var j=A,B={},qe=(j.skip("uShort"),j.parseUShort()),W=(M.argument(qe===0,"Unsupported kern sub-table version."),j.skip("uShort",2),j.parseUShort());j.skip("uShort",3);for(var Z=0;Z<W;Z+=1){var te=j.parseUShort(),he=j.parseUShort(),_e=j.parseShort();B[te+","+he]=_e}return B}if(O!==1)throw new Error("Unsupported kern table version ("+O+").");var ve=A,Re={},qe=(ve.skip("uShort"),1<ve.parseULong()&&console.warn("Only the first kern subtable is supported."),ve.skip("uLong"),255&ve.parseUShort());if(ve.skip("uShort"),qe==0){var Ue=ve.parseUShort();ve.skip("uShort",3);for(var Ae=0;Ae<Ue;Ae+=1){var ht=ve.parseUShort(),Xe=ve.parseUShort(),ot=ve.parseShort();Re[ht+","+Xe]=ot}}return Re}},OEt={parse:function(A,O,j,B){for(var W=new Ge.Parser(A,O),Z=B?W.parseUShort:W.parseULong,te=[],he=0;he<j+1;he+=1){var _e=Z.call(W);B&&(_e*=2),te.push(_e)}return te}};function REt(A,O){o("fs").readFile(A,function(j,B){if(j)return O(j.message);O(null,mAe(B))})}function PEt(A,O){var j=new XMLHttpRequest;j.open("get",A,!0),j.responseType="arraybuffer",j.onload=function(){return j.response?O(null,j.response):O("Font could not be loaded: "+j.statusText)},j.onerror=function(){O("Font could not be loaded")},j.send()}function $Ae(A,O){for(var j=[],B=12,W=0;W<O;W+=1){var Z=Ge.getTag(A,B),te=Ge.getULong(A,B+4),he=Ge.getULong(A,B+8),_e=Ge.getULong(A,B+12);j.push({tag:Z,checksum:te,offset:he,length:_e,compression:!1}),B+=16}return j}function Ws(j,O){if(O.compression!=="WOFF")return{data:j,offset:O.offset};var j=new Uint8Array(j.buffer,O.offset+2,O.compressedLength-2),B=new Uint8Array(O.length);if(G(j,B),B.byteLength!==O.length)throw new Error("Decompression error: "+O.tag+" decompressed length doesn't match recorded length");return{data:new DataView(B.buffer,0),offset:0}}function une(Ye){var O,j,B,W,Z,te,he,_e,ve,Re,qe,Ue,Ae,ht,Xe=new Jo({empty:!0}),ot=new DataView(Ye,0),He=[],Ye=Ge.getTag(ot,0);if(Ye==="\0\0\0"||Ye==="true"||Ye==="typ1")Xe.outlinesFormat="truetype",He=$Ae(ot,B=Ge.getUShort(ot,4));else if(Ye==="OTTO")Xe.outlinesFormat="cff",He=$Ae(ot,B=Ge.getUShort(ot,4));else{if(Ye!=="wOFF")throw new Error("Unsupported OpenType signature "+Ye);var br=Ge.getTag(ot,4);if(br==="\0\0\0")Xe.outlinesFormat="truetype";else{if(br!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ye);Xe.outlinesFormat="cff"}He=function(Ti,Do){for(var ru=[],os=44,Tl=0;Tl<Do;Tl+=1){var Ai=Ge.getTag(Ti,os),za=Ge.getULong(Ti,os+4),ER=Ge.getULong(Ti,os+8),Nk=Ge.getULong(Ti,os+12),zAe=void 0,zAe=ER<Nk&&"WOFF";ru.push({tag:Ai,offset:za,compression:zAe,compressedLength:ER,length:Nk}),os+=20}return ru}(ot,B=Ge.getUShort(ot,12))}for(var nn=0;nn<B;nn+=1){var Sr=He[nn],Ar=void 0;switch(Sr.tag){case"cmap":Ar=Ws(ot,Sr),Xe.tables.cmap=de.parse(Ar.data,Ar.offset),Xe.encoding=new Qe(Xe.tables.cmap);break;case"cvt ":Ar=Ws(ot,Sr),ht=new Ge.Parser(Ar.data,Ar.offset),Xe.tables.cvt=ht.parseShortList(Sr.length/2);break;case"fvar":Z=Sr;break;case"fpgm":Ar=Ws(ot,Sr),ht=new Ge.Parser(Ar.data,Ar.offset),Xe.tables.fpgm=ht.parseByteList(Sr.length);break;case"head":Ar=Ws(ot,Sr),Xe.tables.head=wR.parse(Ar.data,Ar.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,O=Xe.tables.head.indexToLocFormat;break;case"hhea":Ar=Ws(ot,Sr),Xe.tables.hhea=ke.parse(Ar.data,Ar.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":ve=Sr;break;case"ltag":Ar=Ws(ot,Sr),j=Ht.parse(Ar.data,Ar.offset);break;case"maxp":Ar=Ws(ot,Sr),Xe.tables.maxp=xt.parse(Ar.data,Ar.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Ue=Sr;break;case"OS/2":Ar=Ws(ot,Sr),Xe.tables.os2=$a.parse(Ar.data,Ar.offset);break;case"post":Ar=Ws(ot,Sr),Xe.tables.post=iAe.parse(Ar.data,Ar.offset),Xe.glyphNames=new Nt(Xe.tables.post);break;case"prep":Ar=Ws(ot,Sr),ht=new Ge.Parser(Ar.data,Ar.offset),Xe.tables.prep=ht.parseByteList(Sr.length);break;case"glyf":te=Sr;break;case"loca":qe=Sr;break;case"CFF ":W=Sr;break;case"kern":Re=Sr;break;case"GPOS":he=Sr;break;case"GSUB":_e=Sr;break;case"meta":Ae=Sr}}if(br=Ws(ot,Ue),Xe.tables.name=Qf.parse(br.data,br.offset,j),Xe.names=Xe.tables.name,te&&qe)Ye=O===0,br=Ws(ot,qe),br=OEt.parse(br.data,br.offset,Xe.numGlyphs,Ye),Ye=Ws(ot,te),Xe.glyphs=bAe.parse(Ye.data,Ye.offset,br,Xe);else{if(!W)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ye=Ws(ot,W),vR.parse(Ye.data,Ye.offset,Xe)}for(var br=Ws(ot,ve),wn=(Ct.parse(br.data,br.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),bi=wn.tables.cmap.glyphIndexMap,ms=Object.keys(bi),qs=0;qs<ms.length;qs+=1){var eu,tu=ms[qs],vh=bi[tu];(eu=wn.glyphs.get(vh)).addUnicode(parseInt(tu))}for(var ei=0;ei<wn.glyphs.length;ei+=1)eu=wn.glyphs.get(ei),wn.cffEncoding?wn.isCIDFont?eu.name="gid"+ei:eu.name=wn.cffEncoding.charset[ei]:wn.glyphNames.names&&(eu.name=wn.glyphNames.glyphIndexToName(ei));return Re?(Ye=Ws(ot,Re),Xe.kerningPairs=FEt.parse(Ye.data,Ye.offset)):Xe.kerningPairs={},he&&(br=Ws(ot,he),Xe.tables.gpos=MEt.parse(br.data,br.offset),Xe.position.init()),_e&&(Ye=Ws(ot,_e),Xe.tables.gsub=sAe.parse(Ye.data,Ye.offset)),Z&&(br=Ws(ot,Z),Xe.tables.fvar=DEt.parse(br.data,br.offset,Xe.names)),Ae&&(Ye=Ws(ot,Ae),Xe.tables.meta=aAe.parse(Ye.data,Ye.offset),Xe.metas=Xe.tables.meta),Xe}c.Font=Jo,c.Glyph=Ut,c.Path=X,c.BoundingBox=H,c._parse=Ge,c.parse=une,c.load=function(A,O){(typeof window>"u"?REt:PEt)(A,function(j,B){if(j)return O(j);var W;try{W=une(B)}catch(Z){return O(Z,null)}return O(null,W)})},c.loadSync=function(A){return une(mAe(o("fs").readFileSync(A)))},Object.defineProperty(c,"__esModule",{value:!0})},typeof s=="object"&&i!==void 0?u(s):typeof t=="function"&&t.amd?t(["exports"],u):u(l.opentype={})}).call(this,o("buffer").Buffer)},{buffer:4,fs:2}],255:[function(o,i,s){(function(a){function l(f,d){for(var p=0,h=f.length-1;0<=h;h--){var m=f[h];m==="."?f.splice(h,1):m===".."?(f.splice(h,1),p++):p&&(f.splice(h,1),p--)}if(d)for(;p--;)f.unshift("..");return f}function u(f,d){if(f.filter)return f.filter(d);for(var p=[],h=0;h<f.length;h++)d(f[h],h,f)&&p.push(f[h]);return p}s.resolve=function(){for(var f="",d=!1,p=arguments.length-1;-1<=p&&!d;p--){var h=0<=p?arguments[p]:a.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");h&&(f=h+"/"+f,d=h.charAt(0)==="/")}return(d?"/":"")+(f=l(u(f.split("/"),function(m){return!!m}),!d).join("/"))||"."},s.normalize=function(f){var d=s.isAbsolute(f),p=c(f,-1)==="/";return(f=(f=l(u(f.split("/"),function(h){return!!h}),!d).join("/"))||d?f:".")&&p&&(f+="/"),(d?"/":"")+f},s.isAbsolute=function(f){return f.charAt(0)==="/"},s.join=function(){var f=Array.prototype.slice.call(arguments,0);return s.normalize(u(f,function(d,p){if(typeof d!="string")throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))},s.relative=function(f,d){function p(v){for(var w=0;w<v.length&&v[w]==="";w++);for(var _=v.length-1;0<=_&&v[_]==="";_--);return _<w?[]:v.slice(w,_-w+1)}f=s.resolve(f).substr(1),d=s.resolve(d).substr(1);for(var h=p(f.split("/")),m=p(d.split("/")),g=Math.min(h.length,m.length),y=g,b=0;b<g;b++)if(h[b]!==m[b]){y=b;break}for(var x=[],b=y;b<h.length;b++)x.push("..");return(x=x.concat(m.slice(y))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var d=f.charCodeAt(0)===47,p=-1,h=!0,m=f.length-1;1<=m;--m)if(f.charCodeAt(m)===47){if(!h){p=m;break}}else h=!1;return p===-1?d?"/":".":d&&p===1?"/":f.slice(0,p)},s.basename=function(f,d){return f=function(p){typeof p!="string"&&(p+="");for(var h=0,m=-1,g=!0,y=p.length-1;0<=y;--y)if(p.charCodeAt(y)===47){if(!g){h=y+1;break}}else m===-1&&(g=!1,m=y+1);return m===-1?"":p.slice(h,m)}(f),f=d&&f.substr(-1*d.length)===d?f.substr(0,f.length-d.length):f},s.extname=function(f){typeof f!="string"&&(f+="");for(var d=-1,p=0,h=-1,m=!0,g=0,y=f.length-1;0<=y;--y){var b=f.charCodeAt(y);if(b===47){if(m)continue;p=y+1;break}h===-1&&(m=!1,h=y+1),b===46?d===-1?d=y:g!==1&&(g=1):d!==-1&&(g=-1)}return d===-1||h===-1||g===0||g===1&&d===h-1&&d===p+1?"":f.slice(d,h)};var c="ab".substr(-1)==="b"?function(f,d,p){return f.substr(d,p)}:function(f,d,p){return d<0&&(d=f.length+d),f.substr(d,p)}}).call(this,o("_process"))},{_process:256}],256:[function(o,u,s){var a,l,u=u.exports={};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:c}catch{a=c}try{l=typeof clearTimeout=="function"?clearTimeout:f}catch{l=f}function d(w){if(a===setTimeout)return setTimeout(w,0);if((a===c||!a)&&setTimeout)return(a=setTimeout)(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this,w,0)}}}var p,h=[],m=!1,g=-1;function y(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&b())}function b(){if(!m){for(var w=d(y),_=(m=!0,h.length);_;){for(p=h,h=[];++g<_;)p&&p[g].run();g=-1,_=h.length}p=null,m=!1,function(S){if(l===clearTimeout)return clearTimeout(S);if((l===f||!l)&&clearTimeout)return(l=clearTimeout)(S);try{l(S)}catch{try{return l.call(null,S)}catch{return l.call(this,S)}}}(w)}}function x(w,_){this.fun=w,this.array=_}function v(){}u.nextTick=function(w){var _=new Array(arguments.length-1);if(1<arguments.length)for(var S=1;S<arguments.length;S++)_[S-1]=arguments[S];h.push(new x(w,_)),h.length!==1||m||d(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=v,u.addListener=v,u.once=v,u.off=v,u.removeListener=v,u.removeAllListeners=v,u.emit=v,u.prependListener=v,u.prependOnceListener=v,u.listeners=function(w){return[]},u.binding=function(w){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(w){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],257:[function(o,i,s){i=function(a){"use strict";var l,u=Object.prototype,c=u.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},f=C.iterator||"@@iterator",d=C.asyncIterator||"@@asyncIterator",p=C.toStringTag||"@@toStringTag";function h(V,z,U,q){var X,fe,$,M,z=z&&z.prototype instanceof w?z:w,z=Object.create(z.prototype),q=new L(q||[]);return z._invoke=(X=V,fe=U,$=q,M=g,function(ee,ae){if(M===b)throw new Error("Generator is already running");if(M===x){if(ee==="throw")throw ae;return R()}for($.method=ee,$.arg=ae;;){var Q=$.delegate;if(Q&&(Q=function le(ie,K){var ge=ie.iterator[K.method];if(ge===l){if(K.delegate=null,K.method==="throw"){if(ie.iterator.return&&(K.method="return",K.arg=l,le(ie,K),K.method==="throw"))return v;K.method="throw",K.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}if(ge=m(ge,ie.iterator,K.arg),ge.type==="throw")return K.method="throw",K.arg=ge.arg,K.delegate=null,v;if(ge=ge.arg,!ge)return K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,v;{if(!ge.done)return ge;K[ie.resultName]=ge.value,K.next=ie.nextLoc,K.method!=="return"&&(K.method="next",K.arg=l)}return K.delegate=null,v}(Q,$),Q)){if(Q===v)continue;return Q}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(M===g)throw M=x,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);if(M=b,Q=m(X,fe,$),Q.type==="normal"){if(M=$.done?x:y,Q.arg!==v)return{value:Q.arg,done:$.done}}else Q.type==="throw"&&(M=x,$.method="throw",$.arg=Q.arg)}}),z}function m(V,G,U){try{return{type:"normal",arg:V.call(G,U)}}catch(H){return{type:"throw",arg:H}}}a.wrap=h;var g="suspendedStart",y="suspendedYield",b="executing",x="completed",v={};function w(){}function _(){}function S(){}var C={},E=(C[f]=function(){return this},Object.getPrototypeOf),E=E&&E(E(P([]))),T=(E&&E!==u&&c.call(E,f)&&(C=E),S.prototype=w.prototype=Object.create(C));function I(V){["next","throw","return"].forEach(function(G){V[G]=function(U){return this._invoke(G,U)}})}function k(V){var G;this._invoke=function(U,H){function X(){return new Promise(function(fe,$){(function M(le,q,ee,ae){var Q,le=m(V[le],V,q);if(le.type!=="throw")return(q=(Q=le.arg).value)&&typeof q=="object"&&c.call(q,"__await")?Promise.resolve(q.__await).then(function(ie){M("next",ie,ee,ae)},function(ie){M("throw",ie,ee,ae)}):Promise.resolve(q).then(function(ie){Q.value=ie,ee(Q)},function(ie){return M("throw",ie,ee,ae)});ae(le.arg)})(U,H,fe,$)})}return G=G?G.then(X,X):X()}}function F(V){var G={tryLoc:V[0]};1 in V&&(G.catchLoc=V[1]),2 in V&&(G.finallyLoc=V[2],G.afterLoc=V[3]),this.tryEntries.push(G)}function D(V){var G=V.completion||{};G.type="normal",delete G.arg,V.completion=G}function L(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(F,this),this.reset(!0)}function P(V){if(V){var G,U=V[f];if(U)return U.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length))return G=-1,(U=function H(){for(;++G<V.length;)if(c.call(V,G))return H.value=V[G],H.done=!1,H;return H.value=l,H.done=!0,H}).next=U}return{next:R}}function R(){return{value:l,done:!0}}return(_.prototype=T.constructor=S).constructor=_,S[p]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(V){return V=typeof V=="function"&&V.constructor,!!V&&(V===_||(V.displayName||V.name)==="GeneratorFunction")},a.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,S):(V.__proto__=S,p in V||(V[p]="GeneratorFunction")),V.prototype=Object.create(T),V},a.awrap=function(V){return{__await:V}},I(k.prototype),k.prototype[d]=function(){return this},a.AsyncIterator=k,a.async=function(V,G,U,H){var X=new k(h(V,G,U,H));return a.isGeneratorFunction(G)?X:X.next().then(function(fe){return fe.done?fe.value:X.next()})},I(T),T[p]="Generator",T[f]=function(){return this},T.toString=function(){return"[object Generator]"},a.keys=function(V){var G,U=[];for(G in V)U.push(G);return U.reverse(),function H(){for(;U.length;){var X=U.pop();if(X in V)return H.value=X,H.done=!1,H}return H.done=!0,H}},a.values=P,L.prototype={constructor:L,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(D),!V)for(var G in this)G.charAt(0)==="t"&&c.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=l)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var G=this;function U(z,q){return fe.type="throw",fe.arg=V,G.next=z,q&&(G.method="next",G.arg=l),!!q}for(var H=this.tryEntries.length-1;0<=H;--H){var X=this.tryEntries[H],fe=X.completion;if(X.tryLoc==="root")return U("end");if(X.tryLoc<=this.prev){var $=c.call(X,"catchLoc"),M=c.call(X,"finallyLoc");if($&&M){if(this.prev<X.catchLoc)return U(X.catchLoc,!0);if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else if($){if(this.prev<X.catchLoc)return U(X.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return U(X.finallyLoc)}}}},abrupt:function(V,G){for(var U=this.tryEntries.length-1;0<=U;--U){var H=this.tryEntries[U];if(H.tryLoc<=this.prev&&c.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var X=H;break}}var fe=(X=X&&(V==="break"||V==="continue")&&X.tryLoc<=G&&G<=X.finallyLoc?null:X)?X.completion:{};return fe.type=V,fe.arg=G,X?(this.method="next",this.next=X.finallyLoc,v):this.complete(fe)},complete:function(V,G){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&G&&(this.next=G),v},finish:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U=this.tryEntries[G];if(U.finallyLoc===V)return this.complete(U.completion,U.afterLoc),D(U),v}},catch:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U,H,X=this.tryEntries[G];if(X.tryLoc===V)return(U=X.completion).type==="throw"&&(H=U.arg,D(X)),H}throw new Error("illegal catch attempt")},delegateYield:function(V,G,U){return this.delegate={iterator:P(V),resultName:G,nextLoc:U},this.method==="next"&&(this.arg=l),v}},a}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(o,i,s){(function(a){"use strict";var l,u,c,f,d,p,h,m,g,y;function b(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function x(D){return D=typeof D!="string"?String(D):D}function v(D){var L={next:function(){var P=D.shift();return{done:P===void 0,value:P}}};return u&&(L[Symbol.iterator]=function(){return L}),L}function w(D){this.map={},D instanceof w?D.forEach(function(L,P){this.append(P,L)},this):Array.isArray(D)?D.forEach(function(L){this.append(L[0],L[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(L){this.append(L,D[L])},this)}function _(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function S(D){return new Promise(function(L,P){D.onload=function(){L(D.result)},D.onerror=function(){P(D.error)}})}function C(D){var L=new FileReader,P=S(L);return L.readAsArrayBuffer(D),P}function E(D){var L;return D.slice?D.slice(0):((L=new Uint8Array(D.byteLength)).set(new Uint8Array(D)),L.buffer)}function T(){return this.bodyUsed=!1,this._initBody=function(D){if(this._bodyInit=D)if(typeof D=="string")this._bodyText=D;else if(c&&Blob.prototype.isPrototypeOf(D))this._bodyBlob=D;else if(f&&FormData.prototype.isPrototypeOf(D))this._bodyFormData=D;else if(l&&URLSearchParams.prototype.isPrototypeOf(D))this._bodyText=D.toString();else if(d&&c&&h(D))this._bodyArrayBuffer=E(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d||!ArrayBuffer.prototype.isPrototypeOf(D)&&!m(D))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=E(D)}else this._bodyText="";this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var D=_(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var D,L,P=_(this);if(P)return P;if(this._bodyBlob)return P=this._bodyBlob,D=new FileReader,L=S(D),D.readAsText(P),L;if(this._bodyArrayBuffer)return Promise.resolve(function(R){for(var V=new Uint8Array(R),G=new Array(V.length),U=0;U<V.length;U++)G[U]=String.fromCharCode(V[U]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function I(D,L){var P,R=(L=L||{}).body;if(D instanceof I){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,L.headers||(this.headers=new w(D.headers)),this.method=D.method,this.mode=D.mode,R||D._bodyInit==null||(R=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=L.credentials||this.credentials||"omit",!L.headers&&this.headers||(this.headers=new w(L.headers)),this.method=(D=L.method||this.method||"GET",P=D.toUpperCase(),-1<g.indexOf(P)?P:D),this.mode=L.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(R)}function k(D){var L=new FormData;return D.trim().split("&").forEach(function(P){var R;P&&(R=(P=P.split("=")).shift().replace(/\+/g," "),P=P.join("=").replace(/\+/g," "),L.append(decodeURIComponent(R),decodeURIComponent(P)))}),L}function F(D,L){L=L||{},this.type="default",this.status=L.status===void 0?200:L.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in L?L.statusText:"OK",this.headers=new w(L.headers),this.url=L.url||"",this._initBody(D)}a.fetch||(l="URLSearchParams"in a,u="Symbol"in a&&"iterator"in Symbol,c="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in a,(d="ArrayBuffer"in a)&&(p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=function(D){return D&&DataView.prototype.isPrototypeOf(D)},m=ArrayBuffer.isView||function(D){return D&&-1<p.indexOf(Object.prototype.toString.call(D))}),w.prototype.append=function(D,L){D=b(D),L=x(L);var P=this.map[D];this.map[D]=P?P+","+L:L},w.prototype.delete=function(D){delete this.map[b(D)]},w.prototype.get=function(D){return D=b(D),this.has(D)?this.map[D]:null},w.prototype.has=function(D){return this.map.hasOwnProperty(b(D))},w.prototype.set=function(D,L){this.map[b(D)]=x(L)},w.prototype.forEach=function(D,L){for(var P in this.map)this.map.hasOwnProperty(P)&&D.call(L,this.map[P],P,this)},w.prototype.keys=function(){var D=[];return this.forEach(function(L,P){D.push(P)}),v(D)},w.prototype.values=function(){var D=[];return this.forEach(function(L){D.push(L)}),v(D)},w.prototype.entries=function(){var D=[];return this.forEach(function(L,P){D.push([P,L])}),v(D)},u&&(w.prototype[Symbol.iterator]=w.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},T.call(I.prototype),T.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},F.error=function(){var D=new F(null,{status:0,statusText:""});return D.type="error",D},y=[301,302,303,307,308],F.redirect=function(D,L){if(y.indexOf(L)===-1)throw new RangeError("Invalid status code");return new F(null,{status:L,headers:{location:D}})},a.Headers=w,a.Request=I,a.Response=F,a.fetch=function(D,L){return new Promise(function(P,R){var V=new I(D,L),G=new XMLHttpRequest;G.onload=function(){var U,H={status:G.status,statusText:G.statusText,headers:(H=G.getAllResponseHeaders()||"",U=new w,H.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function($){var $=$.split(":"),M=$.shift().trim();M&&($=$.join(":").trim(),U.append(M,$))}),U)},X=(H.url="responseURL"in G?G.responseURL:H.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);P(new F(X,H))},G.onerror=function(){R(new TypeError("Network request failed"))},G.ontimeout=function(){R(new TypeError("Network request failed"))},G.open(V.method,V.url,!0),V.credentials==="include"?G.withCredentials=!0:V.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&c&&(G.responseType="blob"),V.headers.forEach(function(U,H){G.setRequestHeader(H,U)}),G.send(V._bodyInit===void 0?null:V._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(o,i,s){"use strict";o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l=c(o("../core/main")),u=c(o("../color/color_conversion"));function c(p){return p&&p.__esModule?p:{default:p}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],d=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];l.default.prototype._rgbColorName=function(g){var h,m,g=u.default._rgbaToHSBA(g),y=[(a=g)[0],g[1],g[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(g=y[0].toString().split(""))[m=g.length-1]=parseInt(g[m]),g[m]<2.5?g[m]=0:2.5<=g[m]&&g[m]<7.5&&(g[m]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[m]&&(g[m]=0,g[0]=g[0]+1),y[0]=10*g[0]+g[1]):7.5<=g[m]?y[0]=10:y[0]=g[m]),y[2]=y[2]/255;for(var b=y.length-1;1<=b;b--)y[b]<=.25?y[b]=0:.25<y[b]&&y[b]<.75?y[b]=.5:y[b]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var v=0;v<f.length;v++){if(f[v].h===a[0]&&f[v].s===a[1]&&f[v].b===a[2]){h=f[v].name;break}h="white"}}else for(var w=0;w<d.length;w++)if(d[w].h===y[0]&&d[w].s===y[1]&&d[w].b===y[2]){h=d[w].name;break}return h},o=l.default,s.default=o},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o},l="_Description",u="_fallbackDesc",c="_fallbackTable",f="_Label",d="_labelDesc",p="_labelTable";function h(m){if(m==="label"||m==="fallback")throw new Error("description should not be LABEL or FALLBACK");return m.endsWith(".")||m.endsWith(";")||m.endsWith(",")||m.endsWith("?")||m.endsWith("!")||(m+="."),m}a.default.prototype.describe=function(m,g){var y;a.default._validateParameters("describe",arguments),typeof m=="string"&&(y=this.canvas.id,m=h(m),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==m&&(this.descriptions.fallback.innerHTML=m):this._describeHTML("fallback",m),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==m&&(this.descriptions.label.innerHTML=m):this._describeHTML("label",m)))},a.default.prototype.describeElement=function(m,g,y){var b,x;a.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof m=="string"&&(b=this.canvas.id,g=h(g),x=function(v){if(v==="label"||v==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return v.endsWith(".")||v.endsWith(";")||v.endsWith(",")?v=v.replace(/.$/,":"):v.endsWith(":")||(v+=":"),v}(m),m=m.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[m]?this.descriptions.fallbackElements[m].innerHTML!==x&&(this.descriptions.fallbackElements[m].innerHTML=x):this._describeElementHTML("fallback",m,x),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[m]?this.descriptions.labelElements[m].innerHTML!==x&&(this.descriptions.labelElements[m].innerHTML=x):this._describeElementHTML("label",m,x)))},a.default.prototype._describeHTML=function(m,g){var y,b=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(b+l))?this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+u,'"></p>')):(y='<div id="'.concat(b).concat(l,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(u,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(b)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(u)),this.descriptions.fallback.innerHTML=g):m==="label"&&(this.dummyDOM.querySelector("#".concat(b+f))?this.dummyDOM.querySelector("#".concat(b+p))&&this.dummyDOM.querySelector("#".concat(b+p)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(d,'"></p>')):(y='<div id="'.concat(b).concat(f,'" class="p5Label"><p id="').concat(b).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+d),this.descriptions.label.innerHTML=g)},a.default.prototype._describeElementHTML=function(m,g,y){var b,x=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(x+l))?this.dummyDOM.querySelector("#"+x+c)||this.dummyDOM.querySelector("#"+x+u).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(l,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+g,this.dummyDOM.querySelector("#"+x+c).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=y):m==="label"&&(this.dummyDOM.querySelector("#".concat(x+f))?this.dummyDOM.querySelector("#".concat(x+p))||this.dummyDOM.querySelector("#"+x+d).insertAdjacentHTML("afterend",'<table id="'.concat(x+p,'"></table>')):(b='<div id="'.concat(x).concat(f,'" class="p5Label"><table id="').concat(x).concat(p,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(m=document.createElement("tr")).id=x+"_lte_"+g,this.dummyDOM.querySelector("#"+x+p).appendChild(m),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=y)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateGridOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,h,m){return p="".concat(p," canvas, ").concat(h," by ").concat(m," pixels, contains ").concat(d[0]),p=(d[0]===1?"".concat(p," shape: "):"".concat(p," shapes: ")).concat(d[1]),p}((u=function(d,p){var h,m="",g="",y=0;for(h in p){var b,x=0;for(b in p[h]){var v='<li id="'.concat(d,"shape").concat(y,'">').concat(p[h][b].color," ").concat(h,",");h==="line"?v+=" location = ".concat(p[h][b].pos,", length = ").concat(p[h][b].length," pixels"):(v+=" location = ".concat(p[h][b].pos),h!=="point"&&(v+=", area = ".concat(p[h][b].area," %")),v+="</li>"),m+=v,x++,y++}g=1<x?"".concat(g," ").concat(x," ").concat(h,"s"):"".concat(g," ").concat(x," ").concat(h)}return{numShapes:[y,g],details:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var h,m,g=0,y="",b=Array.from(Array(10),function(){return Array(10)});for(h in p)for(var x in p[h]){var v=void 0;v=h!=="line"?'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][x].color," ").concat(h,"</a>"):'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][x].color," ").concat(h," midpoint</a>"),b[p[h][x].loc.locY][p[h][x].loc.locX]?b[p[h][x].loc.locY][p[h][x].loc.locX]=b[p[h][x].loc.locY][p[h][x].loc.locX]+"  "+v:b[p[h][x].loc.locY][p[h][x].loc.locX]=v,g++}for(m in b){var w,_="<tr>";for(w in b[m])_+="<td>",b[m][w]!==void 0&&(_+=b[m][w]),_+="</td>";y=y+_+"</tr>"}return y}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),f!==l.map.innerHTML&&(l.map.innerHTML=f),u.details!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=u.details),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c){return function(f){if(Array.isArray(f)){for(var d=0,p=new Array(f.length);d<f.length;d++)p[d]=f[d];return p}}(c)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(c,f,d){return f=Math.floor(c[0]/f*10),c=Math.floor(c[1]/d*10),f===10&&(f-=1),c===10&&(c-=1),{locX:f,locY:c}}a.default.prototype.textOutput=function(c){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(c){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(c,f){var d,p,h,m=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),"");f==="Fallback"?(d=m+c,this.dummyDOM.querySelector("#".concat(p=m+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(m,"_Description"))?this.dummyDOM.querySelector("#".concat(m,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(m)).innerHTML='<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(d=m+c+(g=f),this.dummyDOM.querySelector("#".concat(p=m+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(m,"_Label"))?this.dummyDOM.querySelector("#".concat(m,"_Label")):this.dummyDOM.querySelector("#".concat(m))).insertAdjacentHTML("afterend",'<div id="'.concat(p,'"></div>'))),this._accessibleOutputs[d]={},c==="textOutput"?(g="#".concat(m,"gridOutput").concat(g),h='<div id="'.concat(d,'">Text Output<div id="').concat(d,'Summary" aria-label="text output summary"><p id="').concat(d,'_summary"></p><ul id="').concat(d,'_list"></ul></div><table id="').concat(d,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h,this._accessibleOutputs[d].list=this.dummyDOM.querySelector("#".concat(d,"_list"))):c==="gridOutput"&&(g="#".concat(m,"textOutput").concat(g),h='<div id="'.concat(d,'">Grid Output<p id="').concat(d,'_summary" aria-label="grid output summary"><table id="').concat(d,'_map" summary="grid output content"></table><ul id="').concat(d,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h,this._accessibleOutputs[d].map=this.dummyDOM.querySelector("#".concat(d,"_map"))),this._accessibleOutputs[d].shapeDetails=this.dummyDOM.querySelector("#".concat(d,"_shapeDetails")),this._accessibleOutputs[d].summary=this.dummyDOM.querySelector("#".concat(d,"_summary"))},a.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},a.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},a.default.prototype._accsCanvasColors=function(c,f){c==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},a.default.prototype._accsOutput=function(c,f){c==="ellipse"&&f[2]===f[3]?c="circle":c==="rectangle"&&f[2]===f[3]&&(c="square");var d,p,h={},m=!0,g=function(b,x){var v;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(v=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(v=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(v=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(v=(x[0]+x[2])/2,(x[1]+x[3])/2):(v=x[0],x[1]),[v,b]}(c,f);if(c==="line"?(h.color=this.ingredients.colors.stroke,h.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),d=this._getPos(f[0],[1]),p=this._getPos(f[2],[3]),h.loc=u(g,this.width,this.height),h.pos=d===p?"at ".concat(d):"from ".concat(d," to ").concat(p)):(c==="point"?h.color=this.ingredients.colors.stroke:(h.color=this.ingredients.colors.fill,h.area=this._getArea(c,f)),h.pos=this._getPos.apply(this,l(g)),h.loc=u(g,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[h]){for(var y in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][y])===JSON.stringify(h)&&(m=!1);m===!0&&this.ingredients.shapes[c].push(h)}}else this.ingredients.shapes[c]=[h]},a.default.prototype._getPos=function(p,d){var p=new DOMPointReadOnly(p,d),d=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),p=p.matrixTransform(d),d=p.x,p=p.y,h=this.width*this._pixelDensity,m=this.height*this._pixelDensity;return d<.4*h?p<.4*m?"top left":.6*m<p?"bottom left":"mid left":.6*h<d?p<.4*m?"top right":.6*m<p?"bottom right":"mid right":p<.4*m?"top middle":.6*m<p?"bottom middle":"middle"},a.default.prototype._getArea=function(c,f){var d,p,h=0,m=(c==="arc"?(h=(d=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(p=f[0],x=f[1],m=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),v=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),y=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),g=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),p=Math.abs(p*(v-g)+m*(g-x)+y*(x-v))/2,d>Math.PI?h+=p:h-=p)):c==="ellipse"||c==="circle"?h=3.14*f[2]/2*f[3]/2:c==="line"||c==="point"?h=0:c==="quadrilateral"?h=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:c==="rectangle"||c==="square"?h=f[2]*f[3]:c==="triangle"&&(h=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),g=this.height*this._pixelDensity,y=[new DOMPoint(0,0),new DOMPoint(m,0),new DOMPoint(m,g),new DOMPoint(0,g)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=y.map(function(w){return w.matrixTransform(b)}),v=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*h/v)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.concat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateTextOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,h,m){return h="Your output is a, ".concat(h," by ").concat(m," pixels, ").concat(p," canvas containing the following"),h=d===1?"".concat(h," shape:"):"".concat(h," ").concat(d," shapes:"),h}((u=function(d,p){var h,m="",g=0;for(h in p)for(var y in p[h]){var b='<li><a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][y].color," ").concat(h,"</a>");h==="line"?b+=", ".concat(p[h][y].pos,", ").concat(p[h][y].length," pixels long.</li>"):(b+=", at ".concat(p[h][y].pos),h!=="point"&&(b+=", covering ".concat(p[h][y].area,"% of the canvas")),b+=".</li>"),m+=b,g++}return{numShapes:g,listShapes:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var h,m="",g=0;for(h in p)for(var y in p[h]){var b='<tr id="'.concat(d,"shape").concat(g,'"><th>').concat(p[h][y].color," ").concat(h,"</th>");h==="line"?b+="<td>location = ".concat(p[h][y].pos,"</td><td>length = ").concat(p[h][y].length," pixels</td></tr>"):(b+="<td>location = ".concat(p[h][y].pos,"</td>"),h!=="point"&&(b+="<td> area = ".concat(p[h][y].area,"%</td>")),b+="</tr>"),m+=b,g++}return m}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),u.listShapes!==l.list.innerHTML&&(l.list.innerHTML=u.listShapes),f!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=f),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(o,i,s){"use strict";var a=(a=o("./core/main"))&&a.__esModule?a:{default:a};o("./core/constants"),o("./core/environment"),o("./core/friendly_errors/stacktrace"),o("./core/friendly_errors/validate_params"),o("./core/friendly_errors/file_errors"),o("./core/friendly_errors/fes_core"),o("./core/friendly_errors/sketch_reader"),o("./core/helpers"),o("./core/legacy"),o("./core/preload"),o("./core/p5.Element"),o("./core/p5.Graphics"),o("./core/p5.Renderer"),o("./core/p5.Renderer2D"),o("./core/rendering"),o("./core/shim"),o("./core/structure"),o("./core/transform"),o("./core/shape/2d_primitives"),o("./core/shape/attributes"),o("./core/shape/curves"),o("./core/shape/vertex"),o("./accessibility/outputs"),o("./accessibility/textOutput"),o("./accessibility/gridOutput"),o("./accessibility/color_namer"),o("./color/color_conversion"),o("./color/creating_reading"),o("./color/p5.Color"),o("./color/setting"),o("./data/p5.TypedDict"),o("./data/local_storage.js"),o("./dom/dom"),o("./accessibility/describe"),o("./events/acceleration"),o("./events/keyboard"),o("./events/mouse"),o("./events/touch"),o("./image/filters"),o("./image/image"),o("./image/loading_displaying"),o("./image/p5.Image"),o("./image/pixels"),o("./io/files"),o("./io/p5.Table"),o("./io/p5.TableRow"),o("./io/p5.XML"),o("./math/calculation"),o("./math/math"),o("./math/noise"),o("./math/p5.Vector"),o("./math/random"),o("./math/trigonometry"),o("./typography/attributes"),o("./typography/loading_displaying"),o("./typography/p5.Font"),o("./utilities/array_functions"),o("./utilities/conversion"),o("./utilities/string_functions"),o("./utilities/time_date"),o("./webgl/3d_primitives"),o("./webgl/interaction"),o("./webgl/light"),o("./webgl/loading"),o("./webgl/material"),o("./webgl/p5.Camera"),o("./webgl/p5.DataArray"),o("./webgl/p5.Geometry"),o("./webgl/p5.Matrix"),o("./webgl/p5.RendererGL.Immediate"),o("./webgl/p5.RendererGL"),o("./webgl/p5.RendererGL.Retained"),o("./webgl/p5.Framebuffer"),o("./webgl/p5.Shader"),o("./webgl/p5.RenderBuffer"),o("./webgl/p5.Texture"),o("./webgl/text"),o("./core/init"),i.exports=a.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.ColorConversion={_hsbaToHSLA:function(a){var l=a[0],u=a[1],c=a[2],f=(2-u)*c/2;return f!=0&&(f==1?u=0:f<.5?u/=2-u:u=u*c/(2-2*f)),[l,u,f,a[3]]},_hsbaToRGBA:function(a){var l,u,c,f,d,p=6*a[0],h=a[1],m=a[2];return h===0?[m,m,m,a[3]]:(u=m*(1-h),c=m*(1-h*(p-(l=Math.floor(p)))),h=m*(1-h*(1+l-p)),p=l===1?(f=c,d=m,u):l===2?(f=u,d=m,h):l===3?(f=u,d=c,m):l===4?(f=h,d=u,m):l===5?(f=m,d=u,c):(f=m,d=h,u),[f,d,p,a[3]])},_hslaToHSBA:function(a){var l=a[0],u=a[1],c=a[2],f=c<.5?(1+u)*c:c+u-c*u;return[l,u=2*(f-c)/f,f,a[3]]},_hslaToRGBA:function(a){var l,u=6*a[0],c=a[1],f=a[2];return c===0?[f,f,f,a[3]]:[(l=function(d,p,h){return d<0?d+=6:6<=d&&(d-=6),d<1?p+(h-p)*d:d<3?h:d<4?p+(h-p)*(4-d):p})(2+u,c=2*f-(f=f<.5?(1+c)*f:f+c-f*c),f),l(u,c,f),l(u-2,c,f),a[3]]},_rgbaToHSBA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),h=p-Math.min(c,f,d);return h==0?u=l=0:(u=h/p,c===p?l=(f-d)/h:f===p?l=2+(d-c)/h:d===p&&(l=4+(c-f)/h),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,p,a[3]]},_rgbaToHSLA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),m=Math.min(c,f,d),h=p+m,m=p-m;return m==0?u=l=0:(u=h<1?m/h:m/(2-h),c===p?l=(f-d)/m:f===p?l=2+(d-c)/m:d===p&&(l=4+(c-f)/m),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,h/2,a[3]]}},o=o.default.ColorConversion,s.default=o},{"../core/main":280}],266:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.alpha=function(p){return u.default._validateParameters("alpha",arguments),this.color(p)._getAlpha()},u.default.prototype.blue=function(p){return u.default._validateParameters("blue",arguments),this.color(p)._getBlue()},u.default.prototype.brightness=function(p){return u.default._validateParameters("brightness",arguments),this.color(p)._getBrightness()},u.default.prototype.color=function(){for(var p,h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return u.default._validateParameters("color",m),m[0]instanceof u.default.Color?m[0]:(p=Array.isArray(m[0])?m[0]:m,new u.default.Color(this,p))},u.default.prototype.green=function(p){return u.default._validateParameters("green",arguments),this.color(p)._getGreen()},u.default.prototype.hue=function(p){return u.default._validateParameters("hue",arguments),this.color(p)._getHue()},u.default.prototype.lerpColor=function(p,h,m){u.default._validateParameters("lerpColor",arguments);var g,y,b,x=this._colorMode,v=this._colorMaxes;if(x===c.RGB)y=p.levels.map(function(w){return w/255}),b=h.levels.map(function(w){return w/255});else if(x===c.HSB)p._getBrightness(),h._getBrightness(),y=p.hsba,b=h.hsba;else{if(x!==c.HSL)throw new Error("".concat(x," cannot be used for interpolation."));p._getLightness(),h._getLightness(),y=p.hsla,b=h.hsla}return m=Math.max(Math.min(m,1),0),this.lerp===void 0&&(this.lerp=function(w,_,S){return S*(_-w)+w}),x===c.RGB?g=this.lerp(y[0],b[0],m):(.5<Math.abs(y[0]-b[0])&&(y[0]>b[0]?b[0]+=1:y[0]+=1),1<=(g=this.lerp(y[0],b[0],m))&&--g),p=this.lerp(y[1],b[1],m),h=this.lerp(y[2],b[2],m),y=this.lerp(y[3],b[3],m),g*=v[x][0],p*=v[x][1],h*=v[x][2],y*=v[x][3],this.color(g,p,h,y)},u.default.prototype.lightness=function(p){return u.default._validateParameters("lightness",arguments),this.color(p)._getLightness()},u.default.prototype.red=function(p){return u.default._validateParameters("red",arguments),this.color(p)._getRed()},u.default.prototype.saturation=function(p){return u.default._validateParameters("saturation",arguments),this.color(p)._getSaturation()};var d=u.default;s.default=d},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(g,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}g("core-js/modules/es.symbol"),g("core-js/modules/es.symbol.description"),g("core-js/modules/es.symbol.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.iterator"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.get-own-property-descriptor"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.iterator"),g("core-js/modules/es.string.trim"),g("core-js/modules/es.weak-map"),g("core-js/modules/web.dom-collections.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(g("../core/main")),c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=d();if(_&&_.has(w))return _.get(w);var S,C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(C,S,T):C[S]=w[S])}return C.default=w,_&&_.set(w,C),C}(g("../core/constants")),f=p(g("./color_conversion"));function d(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,d=function(){return w},w)}function p(w){return w&&w.__esModule?w:{default:w}}function h(w,_){for(var S=0;S<_.length;S++){var C=_[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=/\s*/,v=/(\d{1,3})/,y=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(y.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(g.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),RGBA:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",y.source,"\\)$"].join(g.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSL:new RegExp(["^hsl\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSLA:new RegExp(["^hsla\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSB:new RegExp(["^hsb\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSBA:new RegExp(["^hsba\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i")},v=(u.default.Color=function(){function w(E,T){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(E._colorMode,E._colorMaxes),![c.RGB,c.HSL,c.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=w._parseInputs.apply(this,T),this._calculateLevels()}var _,S,C;return _=w,C=[{key:"_parseInputs",value:function(E,T,I,k){var F,D=arguments.length,L=this.mode,P=this.maxes[L],R=[];if(3<=D){for(R[0]=E/P[0],R[1]=T/P[1],R[2]=I/P[2],R[3]=typeof k=="number"?k/P[3]:1,F=R.length-1;0<=F;--F){var V=R[F];V<0?R[F]=0:1<V&&(R[F]=1)}return L===c.HSL?f.default._hslaToRGBA(R):L===c.HSB?f.default._hsbaToRGBA(R):R}if(D===1&&typeof E=="string"){if(I=E.trim().toLowerCase(),m[I])return w._parseInputs.call(this,m[I]);if(x.HEX3.test(I))return(R=x.HEX3.exec(I).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,R;if(x.HEX6.test(I))return(R=x.HEX6.exec(I).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,R;if(x.HEX4.test(I))return R=x.HEX4.exec(I).slice(1).map(function(G){return parseInt(G+G,16)/255});if(x.HEX8.test(I))return R=x.HEX8.exec(I).slice(1).map(function(G){return parseInt(G,16)/255});if(x.RGB.test(I))return(R=x.RGB.exec(I).slice(1).map(function(G){return G/255}))[3]=1,R;if(x.RGB_PERCENT.test(I))return(R=x.RGB_PERCENT.exec(I).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,R;if(x.RGBA.test(I))return R=x.RGBA.exec(I).slice(1).map(function(G,U){return U===3?parseFloat(G):G/255});if(x.RGBA_PERCENT.test(I))return R=x.RGBA_PERCENT.exec(I).slice(1).map(function(G,U){return U===3?parseFloat(G):parseFloat(G)/100});if(x.HSL.test(I)?(R=x.HSL.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSLA.test(I)&&(R=x.HSLA.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),(R=R.map(function(G){return Math.max(Math.min(G,1),0)})).length)return f.default._hslaToRGBA(R);if(x.HSB.test(I)?(R=x.HSB.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSBA.test(I)&&(R=x.HSBA.exec(I).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),R.length){for(F=R.length-1;0<=F;--F)R[F]=Math.max(Math.min(R[F],1),0);return f.default._hsbaToRGBA(R)}R=[1,1,1,1]}else{if(D!==1&&D!==2||typeof E!="number")throw new Error("".concat(arguments,"is not a valid color representation."));R[0]=E/P[2],R[1]=E/P[2],R[2]=E/P[2],R[3]=typeof T=="number"?T/P[3]:1,R=R.map(function(G){return Math.max(Math.min(G,1),0)})}return R}}],(S=[{key:"toString",value:function(E){var T=this.levels,I=this._array,k=I[3];switch(E){case"#rrggbb":return"#".concat(T[0]<16?"0".concat(T[0].toString(16)):T[0].toString(16),T[1]<16?"0".concat(T[1].toString(16)):T[1].toString(16),T[2]<16?"0".concat(T[2].toString(16)):T[2].toString(16));case"#rrggbbaa":return"#".concat(T[0]<16?"0".concat(T[0].toString(16)):T[0].toString(16),T[1]<16?"0".concat(T[1].toString(16)):T[1].toString(16),T[2]<16?"0".concat(T[2].toString(16)):T[2].toString(16),T[3]<16?"0".concat(T[3].toString(16)):T[3].toString(16));case"#rgb":return"#".concat(Math.round(15*I[0]).toString(16),Math.round(15*I[1]).toString(16),Math.round(15*I[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*I[0]).toString(16),Math.round(15*I[1]).toString(16),Math.round(15*I[2]).toString(16),Math.round(15*I[3]).toString(16));case"rgb":return"rgb(".concat(T[0],", ",T[1],", ",T[2],")");case"rgb%":return"rgb(".concat((100*I[0]).toPrecision(3),"%, ",(100*I[1]).toPrecision(3),"%, ",(100*I[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*I[0]).toPrecision(3),"%, ",(100*I[1]).toPrecision(3),"%, ",(100*I[2]).toPrecision(3),"%, ",(100*I[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(T[0],",",T[1],",",T[2],",",k,")")}}},{key:"setRed",value:function(E){this._array[0]=E/this.maxes[c.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(E){this._array[1]=E/this.maxes[c.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(E){this._array[2]=E/this.maxes[c.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(E){this._array[3]=E/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var E=this._array,T=this.levels=new Array(E.length),I=E.length-1;0<=I;--I)T[I]=Math.round(255*E[I]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(E,T){this.mode=E,this.maxes=T}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[c.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[c.RGB][1]}},{key:"_getHue",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[c.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])}}])&&h(_.prototype,S),C&&h(_,C),w}(),u.default.Color);s.default=v},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.fill"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),u.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},u.default.prototype.endClip=function(){this._renderer.endClip()},u.default.prototype.clip=function(p,h){this._renderer.beginClip(h),p(),this._renderer.endClip(h)},u.default.prototype.background=function(){var p;return(p=this._renderer).background.apply(p,arguments),this},u.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},u.default.prototype.colorMode=function(p,h,m,g,y){return u.default._validateParameters("colorMode",arguments),p!==c.RGB&&p!==c.HSB&&p!==c.HSL||(this._colorMode=p,p=this._colorMaxes[p],arguments.length===2?(p[0]=h,p[1]=h,p[2]=h,p[3]=h):arguments.length===4?(p[0]=h,p[1]=m,p[2]=g):arguments.length===5&&(p[0]=h,p[1]=m,p[2]=g,p[3]=y)),this},u.default.prototype.fill=function(){var p;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(p=this._renderer).fill.apply(p,arguments),this},u.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},u.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},u.default.prototype.stroke=function(){var p;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(p=this._renderer).stroke.apply(p,arguments),this},u.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},u.default.prototype.noErase=function(){return this._renderer.noErase(),this};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QUADRATIC=s.LINEAR=s._CTX_MIDDLE=s._DEFAULT_LEADMULT=s._DEFAULT_TEXT_FILL=s.WORD=s.CHAR=s.BOLDITALIC=s.BOLD=s.ITALIC=s.NORMAL=s.BLUR=s.ERODE=s.DILATE=s.POSTERIZE=s.INVERT=s.OPAQUE=s.GRAY=s.THRESHOLD=s.BURN=s.DODGE=s.SOFT_LIGHT=s.HARD_LIGHT=s.OVERLAY=s.REPLACE=s.SCREEN=s.MULTIPLY=s.EXCLUSION=s.SUBTRACT=s.DIFFERENCE=s.LIGHTEST=s.DARKEST=s.ADD=s.REMOVE=s.BLEND=s.UP_ARROW=s.TAB=s.SHIFT=s.RIGHT_ARROW=s.RETURN=s.OPTION=s.LEFT_ARROW=s.ESCAPE=s.ENTER=s.DOWN_ARROW=s.DELETE=s.CONTROL=s.BACKSPACE=s.ALT=s.AUTO=s.HSL=s.HSB=s.RGB=s.MITER=s.BEVEL=s.ROUND=s.SQUARE=s.PROJECT=s.PIE=s.CHORD=s.OPEN=s.CLOSE=s.TESS=s.QUAD_STRIP=s.QUADS=s.TRIANGLE_STRIP=s.TRIANGLE_FAN=s.TRIANGLES=s.LINE_LOOP=s.LINE_STRIP=s.LINES=s.POINTS=s.BASELINE=s.BOTTOM=s.TOP=s.CENTER=s.LEFT=s.RIGHT=s.RADIUS=s.CORNERS=s.CORNER=s.RAD_TO_DEG=s.DEG_TO_RAD=s.RADIANS=s.DEGREES=s.TWO_PI=s.TAU=s.QUARTER_PI=s.PI=s.HALF_PI=s.WAIT=s.TEXT=s.MOVE=s.HAND=s.CROSS=s.ARROW=s.WEBGL2=s.WEBGL=s.P2D=s.VERSION=void 0,s.RGBA=s.HALF_FLOAT=s.FLOAT=s.UNSIGNED_INT=s.UNSIGNED_BYTE=s.COVER=s.CONTAIN=s.FALLBACK=s.LABEL=s.AXES=s.GRID=s._DEFAULT_FILL=s._DEFAULT_STROKE=s.PORTRAIT=s.LANDSCAPE=s.SMOOTH=s.FLAT=s.MIRROR=s.CLAMP=s.REPEAT=s.NEAREST=s.IMAGE=s.IMMEDIATE=s.TEXTURE=s.FILL=s.STROKE=s.CURVE=s.BEZIER=void 0;var a=Math.PI,l=(s.VERSION="1.9.4",s.P2D="p2d",s.WEBGL="webgl",s.WEBGL2="webgl2",s.ARROW="default",s.CROSS="crosshair",s.HAND="pointer",s.MOVE="move",s.TEXT="text",s.WAIT="wait",a/2),l=(s.HALF_PI=l,a),l=(s.PI=l,a/4),l=(s.QUARTER_PI=l,2*a),l=(s.TAU=l,2*a),l=(s.TWO_PI=l,s.DEGREES="degrees",s.RADIANS="radians",a/180),l=(s.DEG_TO_RAD=l,180/a);s.RAD_TO_DEG=l,s.CORNER="corner",s.CORNERS="corners",s.RADIUS="radius",s.RIGHT="right",s.LEFT="left",s.CENTER="center",s.TOP="top",s.BOTTOM="bottom",s.BASELINE="alphabetic",s.POINTS=0,s.LINES=1,s.LINE_STRIP=3,s.LINE_LOOP=2,s.TRIANGLES=4,s.TRIANGLE_FAN=6,s.TRIANGLE_STRIP=5,s.QUADS="quads",s.QUAD_STRIP="quad_strip",s.TESS="tess",s.CLOSE="close",s.OPEN="open",s.CHORD="chord",s.PIE="pie",s.PROJECT="square",s.SQUARE="butt",s.ROUND="round",s.BEVEL="bevel",s.MITER="miter",s.RGB="rgb",s.HSB="hsb",s.HSL="hsl",s.AUTO="auto",s.ALT=18,s.BACKSPACE=8,s.CONTROL=17,s.DELETE=46,s.DOWN_ARROW=40,s.ENTER=13,s.ESCAPE=27,s.LEFT_ARROW=37,s.OPTION=18,s.RETURN=13,s.RIGHT_ARROW=39,s.SHIFT=16,s.TAB=9,s.UP_ARROW=38,s.BLEND="source-over",s.REMOVE="destination-out",s.ADD="lighter",s.DARKEST="darken",s.LIGHTEST="lighten",s.DIFFERENCE="difference",s.SUBTRACT="subtract",s.EXCLUSION="exclusion",s.MULTIPLY="multiply",s.SCREEN="screen",s.REPLACE="copy",s.OVERLAY="overlay",s.HARD_LIGHT="hard-light",s.SOFT_LIGHT="soft-light",s.DODGE="color-dodge",s.BURN="color-burn",s.THRESHOLD="threshold",s.GRAY="gray",s.OPAQUE="opaque",s.INVERT="invert",s.POSTERIZE="posterize",s.DILATE="dilate",s.ERODE="erode",s.BLUR="blur",s.NORMAL="normal",s.ITALIC="italic",s.BOLD="bold",s.BOLDITALIC="bold italic",s.CHAR="CHAR",s.WORD="WORD",s._DEFAULT_TEXT_FILL="#000000",s._DEFAULT_LEADMULT=1.25,s._CTX_MIDDLE="middle",s.LINEAR="linear",s.QUADRATIC="quadratic",s.BEZIER="bezier",s.CURVE="curve",s.STROKE="stroke",s.FILL="fill",s.TEXTURE="texture",s.IMMEDIATE="immediate",s.IMAGE="image",s.NEAREST="nearest",s.REPEAT="repeat",s.CLAMP="clamp",s.MIRROR="mirror",s.FLAT="flat",s.SMOOTH="smooth",s.LANDSCAPE="landscape",s.PORTRAIT="portrait",s._DEFAULT_STROKE="#000000",s._DEFAULT_FILL="#FFFFFF",s.GRID="grid",s.AXES="axes",s.LABEL="label",s.FALLBACK="fallback",s.CONTAIN="contain",s.COVER="cover",s.UNSIGNED_BYTE="unsigned-byte",s.UNSIGNED_INT="unsigned-int",s.FLOAT="float",s.HALF_FLOAT="half-float",s.RGBA="rgba"},{}],270:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(c=o("./main"))&&c.__esModule?c:{default:c},c=function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=f();if(b&&b.has(y))return b.get(y);var x,v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var _;Object.prototype.hasOwnProperty.call(y,x)&&((_=w?Object.getOwnPropertyDescriptor(y,x):null)&&(_.get||_.set)?Object.defineProperty(v,x,_):v[x]=y[x])}return v.default=y,b&&b.set(y,v),v}(o("./constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}var d=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],p=(u.default.prototype._frameRate=0,u.default.prototype._lastFrameTime=window.performance.now(),u.default.prototype._targetFrameRate=60,window.print),h=!1;function m(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}u.default.prototype.print=function(){var y;arguments.length?(y=console).log.apply(y,arguments):h||(p(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(h=!0))},u.default.prototype.frameCount=0,u.default.prototype.deltaTime=0,u.default.prototype.focused=document.hasFocus(),u.default.prototype.cursor=function(y,b,x){var v,w="auto",_=this._curElement.elt;d.includes(y)?w=y:typeof y=="string"&&(v="",b&&x&&typeof b=="number"&&typeof x=="number"&&(v="".concat(b," ").concat(x)),w=y.substring(0,7)==="http://"||y.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(y)?"url(".concat(y,") ").concat(v,", auto"):y),_.style.cursor=w},u.default.prototype.frameRate=function(y){return u.default._validateParameters("frameRate",arguments),typeof y!="number"||y<0?this._frameRate:(this._setProperty("_targetFrameRate",y),y===0&&this._setProperty("_frameRate",y),this)},u.default.prototype.getFrameRate=function(){return this.frameRate()},u.default.prototype.setFrameRate=function(y){return this.frameRate(y)},u.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},u.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},u.default.prototype.webglVersion=c.P2D,u.default.prototype.displayWidth=screen.width,u.default.prototype.displayHeight=screen.height,u.default.prototype.windowWidth=m(),u.default.prototype.windowHeight=g(),u.default.prototype._onresize=function(y){this._setProperty("windowWidth",m()),this._setProperty("windowHeight",g());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(y))===void 0||b||y.preventDefault()},u.default.prototype.width=0,u.default.prototype.height=0,u.default.prototype.fullscreen=function(y){if(u.default._validateParameters("fullscreen",arguments),y===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(y){if(y=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},u.default.prototype.pixelDensity=function(y){var b;return u.default._validateParameters("pixelDensity",arguments),typeof y=="number"?(y!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=y),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},u.default.prototype.displayDensity=function(){return window.devicePixelRatio},u.default.prototype.getURL=function(){return location.href},u.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(y){return y!==""})},u.default.prototype.getURLParams=function(){for(var y,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(y=b.exec(location.search))!=null;)y.index===b.lastIndex&&b.lastIndex++,x[y[1]]=y[2];return x},o=u.default,s.default=o},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(d=o("../main"))&&d.__esModule?d:{default:d};o("../internationalization");function l(p,h){h=h||console.log.bind(console),u||f(),u.some(function(m){var g;if(p.message&&p.message.match("\\W?".concat(m.name,"\\W"))!==null)return g=m.type==="function"?"".concat(m.name,"()"):m.name,h("Did you just try to use p5.js's ".concat(g," ").concat(m.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var u=null,f=null,c=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},u=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function p(m){return Object.getOwnPropertyNames(m).filter(function(g){return g[0]!=="_"&&!(g in h)&&(h[g]=!0)}).map(function(g){var y=typeof m[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:y}})}var h={};(u=[].concat(p(a.default.prototype),p(o("../constants")))).sort(function(m,g){return g.name.length-m.name.length})},d=(a.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)})),a.default);s.default=d},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(a=o("../main"))&&a.__esModule?a:{default:a};o("../internationalization"),a.default._friendlyFileLoadError=function(){},o=a.default,s.default=o},{"../internationalization":278,"../main":280}],273:[function(o,i,s){"use strict";function a(M){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(M)}function l(M){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(z){return a(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":a(z)})(M)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=G(o("../main")),c=o("../internationalization"),f=V(o("../constants")),d,p,h,m,g,y,b,x,v,w,_,S,C,E,T,I,k,F,D,L,P;function R(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,R=function(){return M},M)}function V(M){if(M&&M.__esModule)return M;if(M===null||l(M)!=="object"&&typeof M!="function")return{default:M};var z=R();if(z&&z.has(M))return z.get(M);var q,ee,ae={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in M)Object.prototype.hasOwnProperty.call(M,q)&&((ee=Q?Object.getOwnPropertyDescriptor(M,q):null)&&(ee.get||ee.set)?Object.defineProperty(ae,q,ee):ae[q]=M[q]);return ae.default=M,z&&z.set(M,ae),ae}function G(M){return M&&M.__esModule?M:{default:M}}function U(M){return fe(M)||X(M)||H()}function H(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function X(M){if(Symbol.iterator in Object(M)||Object.prototype.toString.call(M)==="[object Arguments]")return Array.from(M)}function fe(M){if(Array.isArray(M)){for(var z=0,q=new Array(M.length);z<M.length;z++)q[z]=M[z];return q}}u.default._fesCodeReader=function(){};var $=u.default;s.default=$},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../main"))&&o.__esModule?o:{default:o};function a(){var l=/(^|@)\S+:\d+/,u=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(u)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(u)},this).map(function(d){var p=(d=-1<d.indexOf("(eval ")?d.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):d).replace(/^\s+/,"").replace(/\(eval code/g,"("),h=p.match(/ (\((.+):(\d+):(\d+)\)$)/),p=(p=h?p.replace(h[0],""):p).split(/\s+/).slice(1),h=this.extractLocation(h?h[1]:p.pop());return{functionName:p.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(h[0])?void 0:h[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(d){return!d.match(c)},this).map(function(d){var p,h;return(d=-1<d.indexOf(" > eval")?d.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):d).indexOf("@")===-1&&d.indexOf(":")===-1?{functionName:d}:{functionName:(h=d.match(p=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&h[1]?h[1]:void 0,fileName:(h=this.extractLocation(d.replace(p,"")))[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)/i,p=f.message.split(`
`),h=[],m=2,g=p.length;m<g;m+=2){var y=d.exec(p[m]);y&&h.push({fileName:y[2],lineNumber:y[1],source:p[m]})}return h},parseOpera10:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,p=f.stacktrace.split(`
`),h=[],m=0,g=p.length;m<g;m+=2){var y=d.exec(p[m]);y&&h.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:p[m]})}return h},parseOpera11:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(l)&&!d.match(/^Error created at/)},this).map(function(d){var p,m=d.split("@"),h=this.extractLocation(m.pop()),m=m.shift()||"";return{functionName:m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(p=m.match(/\(([^)]*)\)/)?m.replace(/^[^(]+\(([^)]*)\)$/,"$1"):p)===void 0||p==="[arguments not available]"?void 0:p.split(","),fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)}}}o.default._getErrorStackParser=function(){return new a},o=o.default,s.default=o},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../main"))&&l.__esModule?l:{default:l};(function(f){if(!(f&&f.__esModule)&&!(f===null||c(f)!=="object"&&typeof f!="function")){var d=u();if(d&&d.has(f))return d.get(f);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=m?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=f[p])}h.default=f,d&&d.set(f,h)}})(o("../constants")),o("../internationalization");function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default._validateParameters=l.default._clearValidateParamsCache=function(){},o=l.default,s.default=o},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function l(f){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=m?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=f[p])}return h.default=f,d&&d.set(f,h),h}(o("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}s.default={modeAdjust:function(f,d,p,h,m){return m===u.CORNER?{x:f,y:d,w:p,h}:m===u.CORNERS?{x:f,y:d,w:p-f,h:h-d}:m===u.RADIUS?{x:f-p,y:d-h,w:2*p,h:2*h}:m===u.CENTER?{x:f-.5*p,y:d-.5*h,w:p,h}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(l=o("../core/main"))&&l.__esModule?l:{default:l};o("./internationalization");var l=Promise.resolve();Promise.all([new Promise(function(u,c){document.readyState==="complete"?u():window.addEventListener("load",u,!1)}),l]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(o,i,s){"use strict";o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.setTranslatorLanguage=s.currentTranslatorLanguage=s.availableTranslatorLanguages=s.initialize=s.translator=void 0;var a,l,u=f(o("i18next")),c=f(o("i18next-browser-languagedetector"));function f(h){return h&&h.__esModule?h:{default:h}}function d(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var p=function(){function h(b,x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.init(b,x)}var m,g,y;return m=h,(g=[{key:"fetchWithTimeout",value:function(b,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(b,x),new Promise(function(w,_){return setTimeout(function(){return _(new Error("timeout"))},v)})])}},{key:"init",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=b,this.options=x}},{key:"read",value:function(b,x,v){var w=this.options.loadPath;b===this.options.fallback?v(null,a[b][x]):l.includes(b)?(w=this.services.interpolator.interpolate(w,{lng:b,ns:x}),this.loadUrl(w,v)):v("Not found",!1)}},{key:"loadUrl",value:function(b,x){this.fetchWithTimeout(b).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(b))},function(){throw new Error("failed loading ".concat(b))}).then(function(v){return x(null,v)}).catch(x)}}])&&d(m.prototype,g),y&&d(m,y),h}();p.type="backend",s.translator=function(h,m){console.debug("p5.js translator called before translations were loaded"),u.default.t(h,m)},s.initialize=function(){return u.default.use(c.default).use(p).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(h){s.translator=h},function(h){return console.debug("Translations failed to load (".concat(h,")"))})},s.availableTranslatorLanguages=function(){return u.default.languages},s.currentTranslatorLanguage=function(h){return u.default.language},s.setTranslatorLanguage=function(h){return u.default.changeLanguage(h||void 0,function(m){return console.debug("Translations failed to load (".concat(m,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},o.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},o.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},o.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},o=o.default,s.default=o},{"./main":280}],280:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("./shim");var u=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function f(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var d,p=function(){function h(b,w){var v=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(h.prototype._registeredMethods),_=!0,S=!1,C=void 0;try{for(var E,T=w[Symbol.iterator]();!(_=(E=T.next()).done);_=!0){var I=E.value;this._registeredMethods[I]=h.prototype._registeredMethods[I].slice()}}catch(U){S=!0,C=U}finally{try{_||T.return==null||T.return()}finally{if(S)throw C}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),h.prototype.callRegisteredHooksFor=function(U){var H=this||h.prototype,X=this._isGlobal?window:this;if(H._registeredMethods.hasOwnProperty(U)){var H=H._registeredMethods[U],fe=!0,U=!1,$=void 0;try{for(var M,z=H[Symbol.iterator]();!(fe=(M=z.next()).done);fe=!0){var q=M.value;typeof q=="function"&&q.call(X)}}catch(Q){U=!0,$=Q}finally{try{fe||z.return==null||z.return()}finally{if(U)throw $}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var U=v._isGlobal?window:v;if(U.preload){v.callRegisteredHooksFor("beforePreload");var H,X=document.getElementById(v._loadingScreenId),fe=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=v._loadingScreenId,(v._userNode||document.body).appendChild(X)),v._preloadMethods);for(H in fe){fe[H]=fe[H]||h;var $=fe[H];$!==h.prototype&&$!==h||(v._isGlobal&&(window[H]=v._wrapPreload(v,H)),$=v),v._registeredPreloadMethods[H]=$[H],$[H]=v._wrapPreload($,H)}U.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var U,H=this._isGlobal?window:this;H._preloadCount===0&&((U=document.getElementById(H._loadingScreenId))&&U.parentNode.removeChild(U),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),H._setup(),this._recording||H._draw()))},this._decrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||typeof U.preload!="function"||(U._setProperty("_preloadCount",U._preloadCount-1),U._runIfPreloadsAreDone())},this._wrapPreload=function(U,H){var X=this;return function(){X._incrementPreload();for(var fe=arguments.length,$=new Array(fe),M=0;M<fe;M++)$[M]=arguments[M];return X._registeredPreloadMethods[H].apply(U,$)}},this._incrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||U._setProperty("_preloadCount",U._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var U=v._isGlobal?window:v;if(typeof U.preload=="function")for(var H in v._preloadMethods)U[H]=v._preloadMethods[H][H],U[H]&&v&&(U[H]=U[H].bind(v));v._millisStart=window.performance.now(),U._preloadDone=!0,typeof U.setup=="function"&&U.setup();var X=document.getElementsByTagName("canvas"),fe=!0,$=!1,M=void 0;try{for(var z,q=X[Symbol.iterator]();!(fe=(z=q.next()).done);fe=!0){var ee=z.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(ae){$=!0,M=ae}finally{try{fe||q.return==null||q.return()}finally{if($)throw M}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(){var U=window.performance.now(),H=U-v._lastTargetFrameTime,X=1e3/v._targetFrameRate;(!v._loop||X-5<=H)&&(v.deltaTime=U-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+X,U),v._lastRealFrameTime=U,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(U,H){v[U]=H,v._isGlobal&&(window[U]=H)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var U=document.getElementById(v._loadingScreenId);if(U&&(U.parentNode.removeChild(U),v._incrementPreload()),v._curElement){for(var H in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(H,v._events[H]);var X=!0,U=!1,fe=void 0;try{for(var $,M=v._elements[Symbol.iterator]();!(X=($=M.next()).done);X=!0){var z,q=$.value;for(z in q.elt&&q.elt.parentNode&&q.elt.parentNode.removeChild(q.elt),q._events)q.elt.removeEventListener(z,q._events[z])}}catch(ie){U=!0,fe=ie}finally{try{X||M.return==null||M.return()}finally{if(U)throw fe}}var ee=v;v._registeredMethods.remove.forEach(function(ie){ie!==void 0&&ie.call(ee)})}if(v._isGlobal){for(var ae in h.prototype)try{delete window[ae]}catch{window[ae]=void 0}for(var Q in v)if(v.hasOwnProperty(Q))try{delete window[Q]}catch{window[Q]=void 0}h.instance=null}},this._registeredMethods.init.forEach(function(U){U!==void 0&&U.call(this)},this),this._setupPromisePreloads();var k,F,D=this._createFriendlyGlobalFunctionBinder();if(b)b(this),h._checkForUserDefinedFunctions(this);else{for(var L in this._isGlobal=!0,h.instance=this,h.prototype)typeof h.prototype[L]=="function"?(k=L.substring(2),this._events.hasOwnProperty(k)||(Math.hasOwnProperty(L)&&Math[L]===h.prototype[L]?D(L,h.prototype[L]):D(L,h.prototype[L].bind(this)))):D(L,h.prototype[L]);for(var P in this)this.hasOwnProperty(P)&&D(P,this[P])}for(F in this._events){var R=this["_on".concat(F)];R&&(R=R.bind(this),window.addEventListener(F,R,{passive:!1}),this._events[F]=R)}function V(){v._setProperty("focused",!0)}function G(){v._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",G),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",G)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var m,g,y;return m=h,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=u.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(b,x){h.prototype._preloadMethods.hasOwnProperty(b)||(h.prototype._preloadMethods[b]=x)}},{key:"registerMethod",value:function(b,x){var v=this||h.prototype;v._registeredMethods.hasOwnProperty(b)||(v._registeredMethods[b]=[]),v._registeredMethods[b].push(x)}},{key:"unregisterMethod",value:function(b,x){var v=this||h.prototype;if(v._registeredMethods.hasOwnProperty(b)){for(var w=v._registeredMethods[b],_=[],S=0;S<w.length;S++)w[S]===x&&_.push(S);for(var C=_.length-1;0<=C;C--)w.splice(_[C],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=b.globalObject||window;return b.log||console.log.bind(console),function(v,w){h.disableFriendlyErrors,x[v]=w}}}])&&f(m.prototype,g),y&&f(m,y),h}();for(d in p.instance=null,p.disableFriendlyErrors=!1,u)p.prototype[d]=u[d];p.VERSION=u.VERSION,p.prototype._preloadMethods={loadJSON:p.prototype,loadImage:p.prototype,loadStrings:p.prototype,loadXML:p.prototype,loadBytes:p.prototype,loadTable:p.prototype,loadFont:p.prototype,loadModel:p.prototype,loadShader:p.prototype},p.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},p.prototype._registeredPreloadMethods={},s.default=p},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Element=function(){function u(p,h){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.elt=p,this._pInst=this._pixelsState=h,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var c,f,d;return c=u,d=[{key:"_adjustListener",value:function(p,h,m){return h===!1?a.default.Element._detachListener(p,m):a.default.Element._attachListener(p,h,m),this}},{key:"_attachListener",value:function(p,h,m){m._events[p]&&a.default.Element._detachListener(p,m),h=h.bind(m),m.elt.addEventListener(p,h,!1),m._events[p]=h}},{key:"_detachListener",value:function(p,h){var m=h._events[p];h.elt.removeEventListener(p,m,!1),h._events[p]=null}}],(f=[{key:"parent",value:function(p){return p===void 0?this.elt.parentNode:(typeof p=="string"?(p[0]==="#"&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof a.default.Element&&(p=p.elt),p.appendChild(this.elt),this)}},{key:"id",value:function(p){return p===void 0?this.elt.id:(this.elt.id=p,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(p){return p===void 0?this.elt.className:(this.elt.className=p,this)}},{key:"mousePressed",value:function(p){return a.default.Element._adjustListener("mousedown",function(h){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(h),p.call(this,h)},this),this}},{key:"doubleClicked",value:function(p){return a.default.Element._adjustListener("dblclick",p,this),this}},{key:"mouseWheel",value:function(p){return a.default.Element._adjustListener("wheel",p,this),this}},{key:"mouseReleased",value:function(p){return a.default.Element._adjustListener("mouseup",p,this),this}},{key:"mouseClicked",value:function(p){return a.default.Element._adjustListener("click",p,this),this}},{key:"mouseMoved",value:function(p){return a.default.Element._adjustListener("mousemove",p,this),this}},{key:"mouseOver",value:function(p){return a.default.Element._adjustListener("mouseover",p,this),this}},{key:"mouseOut",value:function(p){return a.default.Element._adjustListener("mouseout",p,this),this}},{key:"touchStarted",value:function(p){return a.default.Element._adjustListener("touchstart",p,this),this}},{key:"touchMoved",value:function(p){return a.default.Element._adjustListener("touchmove",p,this),this}},{key:"touchEnded",value:function(p){return a.default.Element._adjustListener("touchend",p,this),this}},{key:"dragOver",value:function(p){return a.default.Element._adjustListener("dragover",p,this),this}},{key:"dragLeave",value:function(p){return a.default.Element._adjustListener("dragleave",p,this),this}},{key:"_setProperty",value:function(p,h){this[p]=h}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Element,s.default=o},{"./main":280}],282:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=o("./main"))&&b.__esModule?b:{default:b},c=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=f();if(v&&v.has(x))return v.get(x);var w,_={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=S?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(_,w,C):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("./constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function h(x){return function(){var v,w=y(x);return m(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=y(this).constructor,Reflect.construct(w,arguments,v)):w.apply(this,arguments))}}function m(x,v){return!v||l(v)!=="object"&&typeof v!="function"?g(x):v}function g(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}u.default.Graphics=function(x){var v=S;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=h(S);function S(C,E,P,I,k){var F;if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");L=k||document.createElement("canvas"),(F=_.call(this,L,I)).canvas=L;var D,L=P||c.P2D,P=I._userNode||document.body;for(D in k||P.appendChild(F.canvas),u.default.prototype)F[D]||(typeof u.default.prototype[D]=="function"?F[D]=u.default.prototype[D].bind(g(F)):F[D]=u.default.prototype[D]);return u.default.prototype._initializeInstanceVariables.apply(g(F)),F.width=C,F.height=E,F._pixelDensity=I._pixelDensity,L===c.WEBGL?(F._renderer=new u.default.RendererGL(F.canvas,g(F),!1),C=(k=F._renderer._adjustDimensions(C,E)).adjustedWidth,E=k.adjustedHeight):F._renderer=new u.default.Renderer2D(F.canvas,g(F),!1),I._elements.push(g(F)),Object.defineProperty(g(F),"deltaTime",{get:function(){return this._pInst.deltaTime}}),F._renderer.resize(C,E),F._renderer._applyDefaults(),m(F,g(F))}return v=S,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var C,E=this._pInst._elements.indexOf(this);for(C in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(C,this._events[C])}},{key:"createFramebuffer",value:function(C){return new u.default.Framebuffer(this,C)}}])&&d(v.prototype,x),w&&d(v,w),S}(u.default.Element);var b=u.default.Graphics;s.default=b},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(y=o("./main"))&&y.__esModule?y:{default:y},u=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var v=c();if(v&&v.has(x))return v.get(x);var w,_={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=S?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(_,w,C):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants"));function c(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,c=function(){return x},x)}function f(x){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function h(x){return function(){var v,w,_=g(x);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=g(this).constructor,Reflect.construct(_,arguments,v)):_.apply(this,arguments),_=this,!(w=v)||f(w)!=="object"&&typeof w!="function"?m(_):w}}function m(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function g(x){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}var y=function(x){var v=S;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=h(S);function S(C,E,T){var I;if(this instanceof S)return(I=_.call(this,C,E)).canvas=C,I._pixelsState=E,T?(I._isMainCanvas=!0,I._pInst._setProperty("_curElement",m(I)),I._pInst._setProperty("canvas",I.canvas),I._pInst._setProperty("width",I.width),I._pInst._setProperty("height",I.height)):(I.canvas.style.display="none",I._styles=[]),I._clipping=!1,I._clipInvert=!1,I._textSize=12,I._textLeading=15,I._textFont="sans-serif",I._textStyle=u.NORMAL,I._textAscent=null,I._textDescent=null,I._textAlign=u.LEFT,I._textBaseline=u.BASELINE,I._textWrap=u.WORD,I._rectMode=u.CORNER,I._ellipseMode=u.CENTER,I._curveTightness=0,I._imageMode=u.CORNER,I._tint=null,I._doStroke=!0,I._doFill=!0,I._strokeSet=!1,I._fillSet=!1,I._leadingSet=!1,I._pushPopDepth=0,I;throw new TypeError("Cannot call a class as a function")}return v=S,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(C){this._pushPopDepth--,C.properties&&Object.assign(this,C.properties)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=C.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(C,E){this.width=C,this.height=E,this.elt.width=C*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(C,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(C,E,T,I){var k=this._pixelsState,F=k._pixelDensity,D=this.canvas;if(C===void 0&&E===void 0)C=E=0,T=k.width,I=k.height;else if(C*=F,E*=F,T===void 0&&I===void 0)return C<0||E<0||C>=D.width||E>=D.height?[0,0,0,0]:this._getPixel(C,E);return k=new l.default.Image(T*F,I*F),k.pixelDensity(F),k.canvas.getContext("2d").drawImage(D,C,E,T*F,I*F,0,0,T*F,I*F),k}},{key:"textLeading",value:function(C){return typeof C=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",C),this._pInst):this._textLeading}},{key:"textStyle",value:function(C){return C?(C!==u.NORMAL&&C!==u.ITALIC&&C!==u.BOLD&&C!==u.BOLDITALIC||this._setProperty("_textStyle",C),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(C,E){return C!==void 0?(this._setProperty("_textAlign",C),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(C){return this._setProperty("_textWrap",C),this._textWrap}},{key:"text",value:function(C,E,T,I,k){var F,D,L,P,R=this._pInst,V=this._textWrap,G=Number.MAX_VALUE,U=T;if((this._doFill||this._doStroke)&&C!==void 0){if(F=(C=(C=typeof C!="string"?C.toString():C).replace(/(\t)/g,"  ")).split(`
`),I!==void 0){switch(this._rectMode===u.CENTER&&(E-=I/2),this._textAlign){case u.CENTER:E+=I/2;break;case u.RIGHT:E+=I}if(k!==void 0){this._rectMode===u.CENTER&&(T-=k/2,U-=k/2);var C=T,H=R.textAscent();switch(this._textBaseline){case u.BOTTOM:P=T+k,T=Math.max(P,T),U+=H;break;case u.CENTER:P=T+k/2,T=Math.max(P,T),U+=H/2}G=T+k-H,this._textBaseline===u.CENTER&&(G=C+k-H/2)}else this._textBaseline!==u.BOTTOM&&this._textBaseline!==u.CENTER||(U=T-(C=R.textSize()*this._textLeading)/2,G=T+C/2);if(V===u.WORD){for(var X=[],fe=0;fe<F.length;fe++){for(var $="",M=F[fe].split(" "),z=0;z<M.length;z++)D="".concat($+M[z])+" ",$=I<(L=this.textWidth(D))&&0<$.length?(X.push($),"".concat(M[z])+" "):D;X.push($)}var q=0;this._textBaseline===u.CENTER?q=(X.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(q=(X.length-1)*R.textLeading());for(var ee=0;ee<F.length;ee++){$="",M=F[ee].split(" ");for(var ae=0;ae<M.length;ae++)D="".concat($+M[ae])+" ",I<(L=this.textWidth(D))&&0<$.length?(this._renderText(R,$.trim(),E,T-q,G,U),$="".concat(M[ae])+" ",T+=R.textLeading()):$=D;this._renderText(R,$.trim(),E,T-q,G,U),T+=R.textLeading()}}else{for(var Q=[],le=0;le<F.length;le++)for(var ie=F[le].split($=""),K=0;K<ie.length;K++)D="".concat($+ie[K]),(L=this.textWidth(D))<=I?$+=ie[K]:I<L&&0<$.length&&(Q.push($),$="".concat(ie[K]));Q.push($);var ge=0;this._textBaseline===u.CENTER?ge=(Q.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(ge=(Q.length-1)*R.textLeading());for(var ne=0;ne<F.length;ne++){ie=F[ne].split($="");for(var ye=0;ye<ie.length;ye++)D="".concat($+ie[ye]),(L=this.textWidth(D))<=I?$+=ie[ye]:I<L&&0<$.length&&(this._renderText(R,$.trim(),E,T-ge,G,U),T+=R.textLeading(),$="".concat(ie[ye]))}this._renderText(R,$.trim(),E,T-ge,G,U),T+=R.textLeading()}}else{var xe=0;this._textBaseline===u.CENTER?xe=(F.length-1)*R.textLeading()/2:this._textBaseline===u.BOTTOM&&(xe=(F.length-1)*R.textLeading());for(var De=0;De<F.length;De++)this._renderText(R,F[De],E,T-xe,G,U-xe),T+=R.textLeading()}return R}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(C)==="object"&&C.font&&C.font.supported}},{key:"_updateTextMetrics",value:function(){var C,E,T,I,k,F;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((C=document.createElement("span")).style.fontFamily=this._textFont,C.style.fontSize="".concat(this._textSize,"px"),C.innerHTML="ABCjgq|",(F=document.createElement("div")).style.display="inline-block",F.style.width="1px",F.style.height="0px",I=((E=document.createElement("div")).appendChild(C),E.appendChild(F),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),F.style.verticalAlign="baseline",b(F)),k=b(C),T=I[1]-k[1],I=(F.style.verticalAlign="bottom",b(F)),k=b(C),F=I[1]-k[1]-T,document.body.removeChild(E),this._setProperty("_textAscent",T),this._setProperty("_textDescent",F)),this}}])&&d(v.prototype,x),w&&d(v,w),S}(l.default.Element);function b(x){var v=0,w=0;if(x.offsetParent)for(;v+=x.offsetLeft,w+=x.offsetTop,x=x.offsetParent;);else v+=x.offsetLeft,w+=x.offsetTop;return[v,w]}y.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*u._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer=y,o=l.default.Renderer,s.default=o},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(x,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=x("./main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=C?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(S,_,E):S[_]=v[_])}return S.default=v,w&&w.set(v,S),S}(x("./constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function p(v,w,_){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(T,C,E){var T=function(I,k){for(;!Object.prototype.hasOwnProperty.call(I,k)&&(I=g(I))!==null;);return I}(T,C);if(T)return(T=Object.getOwnPropertyDescriptor(T,C)).get?T.get.call(E):T.value})(v,w,_||v)}function h(v,w){return(h=Object.setPrototypeOf||function(_,S){return _.__proto__=S,_})(v,w)}function m(v){return function(){var w,_=g(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=g(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function g(v){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}x("./p5.Renderer");var y="rgba(0,0,0,0)",b=function(v){var w=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&h(w,v);var _,S=m(C);function C(E,T,I){if(this instanceof C)return(E=S.call(this,E,T,I)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return w=C,(v=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof u.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new u.default.Graphics(this.width,this.height,c.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,T){p(g(C.prototype),"resize",this).call(this,E,T),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,T;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof u.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),T=(T=this._pInst).color.apply(T,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(T.levels),T=T.toString(),this._setFill(T),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,T){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,T).toString(),this.drawingContext.strokeStyle=E,T=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=T,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(p(g(C.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(c.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),p(g(C.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,T,I,k,F,D,L,P,R){E.gifProperties&&E._animateGif(this._pInst);try{u.default.MediaElement&&E instanceof u.default.MediaElement&&E._ensureCanvas();var V=(V=this._tint&&E.canvas?this._getTintedImageCanvas(E):V)||E.canvas||E.elt,G=1;E.width&&0<E.width&&(G=V.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(V,G*T,G*I,G*k,G*F,D,L,P,R),this._isErasing&&this._pInst.erase()}catch(U){if(U.name!=="NS_ERROR_NOT_AVAILABLE")throw U}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var T=E.tintCanvas.getContext("2d");return T.save(),T.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(T.drawImage(E.canvas,0,0),T.globalCompositeOperation="luminosity",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="color",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="multiply",T.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),T.fillRect(0,0,E.canvas.width,E.canvas.height),T.globalCompositeOperation="destination-in"),T.globalAlpha=this._tint[3]/255,T.drawImage(E.canvas,0,0),T.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==c.BLEND&&E!==c.REMOVE&&E!==c.DARKEST&&E!==c.LIGHTEST&&E!==c.DIFFERENCE&&E!==c.MULTIPLY&&E!==c.EXCLUSION&&E!==c.SCREEN&&E!==c.REPLACE&&E!==c.OVERLAY&&E!==c.HARD_LIGHT&&E!==c.SOFT_LIGHT&&E!==c.DODGE&&E!==c.BURN&&E!==c.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,T=arguments.length,I=new Array(T),k=0;k<T;k++)I[k]=arguments[k];var F=I[I.length-1],D=Array.prototype.slice.call(I,0,I.length-1);this.drawingContext.globalCompositeOperation=F,u.default.prototype.copy.apply(this,D),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,T){return E=this.drawingContext.getImageData(E,T,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,T=E._pixelDensity,I=this.width*T,T=this.height*T,I=this.drawingContext.getImageData(0,0,I,T);E._setProperty("imageData",I),E._setProperty("pixels",I.data)}},{key:"set",value:function(E,T,I){E=Math.floor(E),T=Math.floor(T);var k=this._pixelsState;if(I instanceof u.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(k._pixelDensity,k._pixelDensity),this.drawingContext.clearRect(E,T,I.width,I.height),this.drawingContext.drawImage(I.canvas,E,T),this.drawingContext.restore();else{var F=0,D=0,L=0,P=0,R=4*(T*k._pixelDensity*(this.width*k._pixelDensity)+E*k._pixelDensity);if(k.imageData||k.loadPixels(),typeof I=="number")R<k.pixels.length&&(L=D=F=I,P=255);else if(Array.isArray(I)){if(I.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");R<k.pixels.length&&(F=I[0],D=I[1],L=I[2],P=I[3])}else I instanceof u.default.Color&&R<k.pixels.length&&(F=I.levels[0],D=I.levels[1],L=I.levels[2],P=I.levels[3]);for(var V=0;V<k._pixelDensity;V++)for(var G=0;G<k._pixelDensity;G++)R=4*((T*k._pixelDensity+G)*this.width*k._pixelDensity+(E*k._pixelDensity+V)),k.pixels[R]=F,k.pixels[R+1]=D,k.pixels[R+2]=L,k.pixels[R+3]=P}}},{key:"updatePixels",value:function(E,T,I,k){var F=this._pixelsState,D=F._pixelDensity;E===void 0&&T===void 0&&I===void 0&&k===void 0&&(T=E=0,I=this.width,k=this.height),E*=D,T*=D,I*=D,k*=D,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=F.imageData),this.drawingContext.putImageData(F.imageData,E,T,0,0,I,k)}},{key:"_acuteArcToBezier",value:function(E,T){var D=T/2,I=Math.cos(D),P=Math.sin(D),k=1/Math.tan(D),D=E+D,F=Math.cos(D),D=Math.sin(D),L=(4-I)/3,P=P+(I-L)*k;return{ax:Math.cos(E).toFixed(7),ay:Math.sin(E).toFixed(7),bx:(L*F+P*D).toFixed(7),by:(L*D-P*F).toFixed(7),cx:(L*F-P*D).toFixed(7),cy:(L*D+P*F).toFixed(7),dx:Math.cos(E+T).toFixed(7),dy:Math.sin(E+T).toFixed(7)}}},{key:"arc",value:function(E,T,I,k,F,D,L){var P,R=this.drawingContext,V=I/2,G=k/2,U=[];for(E+=V,T+=G;1e-5<=D-F;)P=Math.min(D-F,c.HALF_PI),U.push(this._acuteArcToBezier(F,P)),F+=P;return this._doFill&&(this._clipping||R.beginPath(),U.forEach(function(H,X){X===0&&R.moveTo(E+H.ax*V,T+H.ay*G),R.bezierCurveTo(E+H.bx*V,T+H.by*G,E+H.cx*V,T+H.cy*G,E+H.dx*V,T+H.dy*G)}),L!==c.PIE&&L!=null||R.lineTo(E,T),R.closePath(),this._clipping||R.fill()),this._doStroke&&(this._clipping||R.beginPath(),U.forEach(function(H,X){X===0&&R.moveTo(E+H.ax*V,T+H.ay*G),R.bezierCurveTo(E+H.bx*V,T+H.by*G,E+H.cx*V,T+H.cy*G,E+H.dx*V,T+H.dy*G)}),L===c.PIE?(R.lineTo(E,T),R.closePath()):L===c.CHORD&&R.closePath(),this._clipping||R.stroke()),this}},{key:"ellipse",value:function(P){var T=this.drawingContext,I=this._doFill,k=this._doStroke,F=parseFloat(P[0]),D=parseFloat(P[1]),L=parseFloat(P[2]),P=parseFloat(P[3]);if(I&&!k){if(this._getFill()===y)return this}else if(!I&&k&&this._getStroke()===y)return this;F+=L/2,D+=P/2,L/=2,P/=2,this._clipping||T.beginPath(),T.ellipse(F,D,L,P,0,0,2*Math.PI),!this._clipping&&I&&T.fill(),!this._clipping&&k&&T.stroke()}},{key:"line",value:function(E,T,I,k){var F=this.drawingContext;return this._doStroke&&this._getStroke()!==y&&(this._clipping||F.beginPath(),F.moveTo(E,T),F.lineTo(I,k),F.stroke()),this}},{key:"point",value:function(E,T){var I,k,F=this.drawingContext;return!this._doStroke||this._getStroke()===y?this:(I=this._getStroke(),k=this._getFill(),this._clipping||this._setFill(I),this._clipping||F.beginPath(),F.arc(E,T,F.lineWidth/2,0,c.TWO_PI,!1),void(this._clipping||(F.fill(),this._setFill(k))))}},{key:"quad",value:function(E,T,I,k,F,D,L,P){var R=this.drawingContext,V=this._doFill,G=this._doStroke;if(V&&!G){if(this._getFill()===y)return this}else if(!V&&G&&this._getStroke()===y)return this;return this._clipping||R.beginPath(),R.moveTo(E,T),R.lineTo(I,k),R.lineTo(F,D),R.lineTo(L,P),R.closePath(),!this._clipping&&V&&R.fill(),!this._clipping&&G&&R.stroke(),this}},{key:"rect",value:function(G){var T,I,k=G[0],F=G[1],D=G[2],L=G[3],P=G[4],R=G[5],V=G[6],G=G[7],U=this.drawingContext,H=this._doFill,X=this._doStroke;if(H&&!X){if(this._getFill()===y)return this}else if(!H&&X&&this._getStroke()===y)return this;return this._clipping||U.beginPath(),P===void 0?U.rect(k,F,D,L):(R===void 0&&(R=P),V===void 0&&(V=R),G===void 0&&(G=V),X=(H=Math.abs(D))/2,I=(T=Math.abs(L))/2,T<2*(P=H<2*P?X:P)&&(P=I),T<2*(R=H<2*R?X:R)&&(R=I),T<2*(V=H<2*V?X:V)&&(V=I),T<2*(G=H<2*G?X:G)&&(G=I),this._clipping||U.beginPath(),U.moveTo(k+P,F),U.arcTo(k+D,F,k+D,F+L,R),U.arcTo(k+D,F+L,k,F+L,V),U.arcTo(k,F+L,k,F,G),U.arcTo(k,F,k+D,F,P),U.closePath()),!this._clipping&&this._doFill&&U.fill(),!this._clipping&&this._doStroke&&U.stroke(),this}},{key:"triangle",value:function(V){var T=this.drawingContext,I=this._doFill,k=this._doStroke,F=V[0],D=V[1],L=V[2],P=V[3],R=V[4],V=V[5];if(I&&!k){if(this._getFill()===y)return this}else if(!I&&k&&this._getStroke()===y)return this;this._clipping||T.beginPath(),T.moveTo(F,D),T.lineTo(L,P),T.lineTo(R,V),T.closePath(),!this._clipping&&I&&T.fill(),!this._clipping&&k&&T.stroke()}},{key:"endShape",value:function(E,T,I,k,F,D,L){if(T.length!==0&&(this._doStroke||this._doFill)){var P,R,V,G=E===c.CLOSE,U=(G&&!D&&T.push(T[0]),T.length);if(I&&L===null){if(3<U){var H=[],X=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[1][0],T[1][1]),R=1;R+2<U;R++)P=T[R],H[0]=[P[0],P[1]],H[1]=[P[0]+(X*T[R+1][0]-X*T[R-1][0])/6,P[1]+(X*T[R+1][1]-X*T[R-1][1])/6],H[2]=[T[R+1][0]+(X*T[R][0]-X*T[R+2][0])/6,T[R+1][1]+(X*T[R][1]-X*T[R+2][1])/6],H[3]=[T[R+1][0],T[R+1][1]],this.drawingContext.bezierCurveTo(H[1][0],H[1][1],H[2][0],H[2][1],H[3][0],H[3][1]);G&&this.drawingContext.lineTo(T[R+1][0],T[R+1][1]),this._doFillStrokeClose(G)}}else if(k&&L===null){for(this._clipping||this.drawingContext.beginPath(),R=0;R<U;R++)T[R].isVert?T[R].moveTo?this.drawingContext.moveTo(T[R][0],T[R][1]):this.drawingContext.lineTo(T[R][0],T[R][1]):this.drawingContext.bezierCurveTo(T[R][0],T[R][1],T[R][2],T[R][3],T[R][4],T[R][5]);this._doFillStrokeClose(G)}else if(F&&L===null){for(this._clipping||this.drawingContext.beginPath(),R=0;R<U;R++)T[R].isVert?T[R].moveTo?this.drawingContext.moveTo(T[R][0],T[R][1]):this.drawingContext.lineTo(T[R][0],T[R][1]):this.drawingContext.quadraticCurveTo(T[R][0],T[R][1],T[R][2],T[R][3]);this._doFillStrokeClose(G)}else if(L===c.POINTS)for(R=0;R<U;R++)P=T[R],this._doStroke&&this._pInst.stroke(P[6]),this._pInst.point(P[0],P[1]);else if(L===c.LINES)for(R=0;R+1<U;R+=2)P=T[R],this._doStroke&&this._pInst.stroke(T[R+1][6]),this._pInst.line(P[0],P[1],T[R+1][0],T[R+1][1]);else if(L===c.TRIANGLES)for(R=0;R+2<U;R+=3)P=T[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0],P[1]),this.drawingContext.lineTo(T[R+1][0],T[R+1][1]),this.drawingContext.lineTo(T[R+2][0],T[R+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(T[R+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(T[R+2][6]),this.drawingContext.stroke());else if(L===c.TRIANGLE_STRIP)for(R=0;R+1<U;R++)P=T[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[R+1][0],T[R+1][1]),this.drawingContext.lineTo(P[0],P[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+1][5]),R+2<U&&(this.drawingContext.lineTo(T[R+2][0],T[R+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+2][5])),this._doFillStrokeClose(G);else if(L===c.TRIANGLE_FAN){if(2<U){for(this._clipping||this.drawingContext.beginPath(),R=2;R<U;R++)P=T[R],this.drawingContext.moveTo(T[0][0],T[0][1]),this.drawingContext.lineTo(T[R-1][0],T[R-1][1]),this.drawingContext.lineTo(P[0],P[1]),this.drawingContext.lineTo(T[0][0],T[0][1]),R<U-1&&(this._doFill&&P[5]!==T[R+1][5]||this._doStroke&&P[6]!==T[R+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(P[5]),this.drawingContext.fill(),this._pInst.fill(T[R+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(P[6]),this.drawingContext.stroke(),this._pInst.stroke(T[R+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(G)}}else if(L===c.QUADS)for(R=0;R+3<U;R+=4){for(P=T[R],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0],P[1]),V=1;V<4;V++)this.drawingContext.lineTo(T[R+V][0],T[R+V][1]);this.drawingContext.lineTo(P[0],P[1]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+3][6]),this._doFillStrokeClose(G)}else if(L===c.QUAD_STRIP){if(3<U)for(R=0;R+1<U;R+=2)P=T[R],this._clipping||this.drawingContext.beginPath(),R+3<U?(this.drawingContext.moveTo(T[R+2][0],T[R+2][1]),this.drawingContext.lineTo(P[0],P[1]),this.drawingContext.lineTo(T[R+1][0],T[R+1][1]),this.drawingContext.lineTo(T[R+3][0],T[R+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(T[R+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[R+3][6])):(this.drawingContext.moveTo(P[0],P[1]),this.drawingContext.lineTo(T[R+1][0],T[R+1][1])),this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[0][0],T[0][1]),R=1;R<U;R++)(P=T[R]).isVert&&(P.moveTo?(G&&this.drawingContext.closePath(),this.drawingContext.moveTo(P[0],P[1])):this.drawingContext.lineTo(P[0],P[1]));this._doFillStrokeClose(G)}D=F=k=I=!1,G&&T.pop()}return this}},{key:"strokeCap",value:function(E){return E!==c.ROUND&&E!==c.SQUARE&&E!==c.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==c.ROUND&&E!==c.BEVEL&&E!==c.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,T,I,k,F,D,L,P){return this._pInst.beginShape(),this._pInst.vertex(E,T),this._pInst.bezierVertex(I,k,F,D,L,P),this._pInst.endShape(),this}},{key:"curve",value:function(E,T,I,k,F,D,L,P){return this._pInst.beginShape(),this._pInst.curveVertex(E,T),this._pInst.curveVertex(I,k),this._pInst.curveVertex(F,D),this._pInst.curveVertex(L,P),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,T,I,k,F,D){this.drawingContext.transform(E,T,I,k,F,D)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,T){return this.drawingContext.scale(E,T),this}},{key:"translate",value:function(E,T){return E instanceof u.default.Vector&&(T=E.y,E=E.x),this.drawingContext.translate(E,T),this}},{key:"_renderText",value:function(E,T,I,k,F,D){if(!(k<D||F<=k))return E.push(),this._isOpenType()?this._textFont._renderPath(T,I,k,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(T,I,k),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(T,I,k))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E=this._pInst,T=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),T=this._textFont,this._isOpenType()&&(T=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),T||"sans-serif");return/\s/.exec(T)&&(T='"'.concat(T,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(T),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,E}},{key:"push",value:function(){return this.drawingContext.save(),p(g(C.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,p(g(C.prototype),"pop",this).call(this,E)}}])&&d(w.prototype,v),_&&d(w,_),C}(u.default.Renderer),x=(b.prototype.text=function(v,w,_,T,C){T!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(E=!0,this.drawingContext.textBaseline=c.TOP);var E,T=u.default.Renderer.prototype.text.apply(this,arguments);return E&&(this.drawingContext.textBaseline=c.BASELINE),T},u.default.Renderer2D=b,u.default.Renderer2D);s.default=x},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(o=o("./main"))&&o.__esModule?o:{default:o};a.default.prototype._promisePreloads=[];function l(){return{}}var u=!(a.default.prototype.registerPromisePreload=function(c){a.default.prototype._promisePreloads.push(c)});a.default.prototype._setupPromisePreloads=function(){var c=!0,f=!1,d=void 0;try{for(var p,h=this._promisePreloads[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value,g=this,y=m.method,b=m.addCallbacks,x=m.legacyPreloadSetup,v=m.target||this,w=v[y].bind(v);if(v===a.default.prototype){if(u)continue;g=null,w=v[y]}v[y]=this._wrapPromisePreload(g,w,b),x&&(v[x.method]=this._legacyPreloadGenerator(g,x,v[y]))}}catch(_){f=!0,d=_}finally{try{c||h.return==null||h.return()}finally{if(f)throw d}}u=!0},a.default.prototype._wrapPromisePreload=function(c,f,d){var p=function(){for(var h=this,m=(this._incrementPreload(),null),g=null,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(d)for(var v=b.length-1;0<=v&&!g&&typeof b[v]=="function";v--)g=m,m=b.pop();var w=Promise.resolve(f.apply(this,b));return m&&w.then(m),g&&w.catch(g),w.then(function(){return h._decrementPreload()}),w};return p=c?p.bind(c):p},a.default.prototype._legacyPreloadGenerator=function(c,h,d){var p=h.createBaseObject||l,h=function(){var m=this;this._incrementPreload();for(var g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];var x=p.apply(this,y);return d.apply(this,y).then(function(v){Object.assign(x,v),m._decrementPreload()}),x};return h=c?h.bind(c):h}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=o("./main"))&&p.__esModule?p:{default:p},u=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function f(h){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("./p5.Graphics"),o("./p5.Renderer2D"),o("../webgl/p5.RendererGL");var d="defaultCanvas0",p=(l.default.prototype.createCanvas=function(h,m,g,y){var b,x,v;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(g=u.P2D,y=arguments[2]):b=g||u.P2D,y)(v=document.getElementById(d))&&v.parentNode.removeChild(v),v=y,this._defaultGraphicsCreated=!1;else{if(b===u.WEBGL)(v=document.getElementById(d))&&(v.parentNode.removeChild(v),x=this._renderer,this._elements=this._elements.filter(function(_){return _!==x})),(v=document.createElement("canvas")).id=d,v.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)v=this.canvas;else{v=y||document.createElement("canvas");for(var w=0;document.getElementById("defaultCanvas".concat(w));)w++;d="defaultCanvas".concat(w),v.id=d,v.classList.add("p5Canvas")}this._setupDone||(v.dataset.hidden=!0,v.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(g=document.createElement("main"),document.body.appendChild(g)),document.getElementsByTagName("main")[0])).appendChild(v)}return b===u.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(v,this,!0)),this._elements.push(this._renderer),h=(y=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=y.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(v,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(h,m),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(h,m,g){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,b,x,v={};for(y in this.drawingContext){var w=this.drawingContext[y];f(w)!=="object"&&typeof w!="function"&&(v[y]=w)}for(x in this._renderer instanceof l.default.RendererGL&&(h=(b=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=b.adjustedHeight),this.width=h,this.height=m,this._renderer.resize(h,m),v)try{this.drawingContext[x]=v[x]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},l.default.prototype.createGraphics=function(h,m){for(var g=arguments.length,y=new Array(2<g?g-2:0),b=2;b<g;b++)y[b-2]=arguments[b];return y[0]instanceof HTMLCanvasElement&&(y[1]=y[0],y[0]=u.P2D),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(h,m,y[0],this,y[1])},l.default.prototype.createFramebuffer=function(h){return new l.default.Framebuffer(this,h)},l.default.prototype.clearDepth=function(h){this._assert3d("clearDepth"),this._renderer.clearDepth(h)},l.default.prototype.blendMode=function(h){l.default._validateParameters("blendMode",arguments),h===u.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),h=u.BLEND),this._renderer.blendMode(h)},l.default);s.default=p},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(o("../main")),c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=d();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../constants")),f=p(o("../helpers"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){return m&&m.__esModule?m:{default:m}}function h(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),u.default.prototype._normalizeArcAngles=function(m,g,y,b,x){var v;return m-=c.TWO_PI*Math.floor(m/c.TWO_PI),g-=c.TWO_PI*Math.floor(g/c.TWO_PI),v=Math.min(Math.abs(m-g),c.TWO_PI-Math.abs(m-g)),x&&(m=m<=c.HALF_PI?Math.atan(y/b*Math.tan(m)):m>c.HALF_PI&&m<=3*c.HALF_PI?Math.atan(y/b*Math.tan(m))+c.PI:Math.atan(y/b*Math.tan(m))+c.TWO_PI,g=g<=c.HALF_PI?Math.atan(y/b*Math.tan(g)):g>c.HALF_PI&&g<=3*c.HALF_PI?Math.atan(y/b*Math.tan(g))+c.PI:Math.atan(y/b*Math.tan(g))+c.TWO_PI),g<m&&(g+=c.TWO_PI),{start:m,stop:g,correspondToSamePoint:v<1e-5}},u.default.prototype.arc=function(m,g,y,b,x,v,w,_){return u.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==v&&(x=this._toRadians(x),v=this._toRadians(v),y=Math.abs(y),b=Math.abs(b),m=f.default.modeAdjust(m,g,y,b,this._renderer._ellipseMode),(g=this._normalizeArcAngles(x,v,m.w,m.h,!0)).correspondToSamePoint?this._renderer.ellipse([m.x,m.y,m.w,m.h,_]):(this._renderer.arc(m.x,m.y,m.w,m.h,g.start,g.stop,w,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[m.x,m.y,m.w,m.h,g.start,g.stop,w]))),this},u.default.prototype.ellipse=function(m,g,y,b,x){return u.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},u.default.prototype.circle=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.default._validateParameters("circle",g);var b=g.slice(0,2);return b.push(g[2],g[2]),this._renderEllipse.apply(this,h(b))},u.default.prototype._renderEllipse=function(m,g,y,b,x){return(this._renderer._doStroke||this._renderer._doFill)&&(y<0&&(y=Math.abs(y)),b===void 0?b=y:b<0&&(b=Math.abs(b)),m=f.default.modeAdjust(m,g,y,b,this._renderer._ellipseMode),this._renderer.ellipse([m.x,m.y,m.w,m.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[m.x,m.y,m.w,m.h])),this},u.default.prototype.line=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("line",y),this._renderer._doStroke&&(m=this._renderer).line.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",y),this},u.default.prototype.point=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("point",y),this._renderer._doStroke&&(y.length===1&&y[0]instanceof u.default.Vector?this._renderer.point.call(this._renderer,y[0].x,y[0].y,y[0].z):((m=this._renderer).point.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",y))),this},u.default.prototype.quad=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("quad",y),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&y.length<12?this._renderer.quad.call(this._renderer,y[0],y[1],0,y[2],y[3],0,y[4],y[5],0,y[6],y[7],0,y[8],y[9]):((m=this._renderer).quad.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",y))),this},u.default.prototype.rect=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return u.default._validateParameters("rect",g),this._renderRect.apply(this,g)},u.default.prototype.square=function(m,g,y,b,x,v,w){return u.default._validateParameters("square",arguments),this._renderRect.call(this,m,g,y,y,b,x,v,w)},u.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var m=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),g=[m.x,m.y,m.w,m.h],y=4;y<arguments.length;y++)g[y]=arguments[y];this._renderer.rect(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[m.x,m.y,m.w,m.h])}return this},u.default.prototype.triangle=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return u.default._validateParameters("triangle",g),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",g),this},o=u.default,s.default=o},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype.ellipseMode=function(p){return u.default._validateParameters("ellipseMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._ellipseMode=p),this},u.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},u.default.prototype.rectMode=function(p){return u.default._validateParameters("rectMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._rectMode=p),this},u.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},u.default.prototype.strokeCap=function(p){return u.default._validateParameters("strokeCap",arguments),p!==c.ROUND&&p!==c.SQUARE&&p!==c.PROJECT||this._renderer.strokeCap(p),this},u.default.prototype.strokeJoin=function(p){return u.default._validateParameters("strokeJoin",arguments),p!==c.ROUND&&p!==c.BEVEL&&p!==c.MITER||this._renderer.strokeJoin(p),this},u.default.prototype.strokeWeight=function(p){return u.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(p),this};var d=u.default;s.default=d},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(l=o("../main"))&&l.__esModule?l:{default:l};o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(u=this._renderer).bezier.apply(u,f),this},a.default.prototype.bezierDetail=function(u){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=u,this},a.default.prototype.bezierPoint=function(u,c,f,d,p){a.default._validateParameters("bezierPoint",arguments);var h=1-p;return Math.pow(h,3)*u+3*Math.pow(h,2)*p*c+3*h*Math.pow(p,2)*f+Math.pow(p,3)*d},a.default.prototype.bezierTangent=function(u,c,f,d,p){a.default._validateParameters("bezierTangent",arguments);var h=1-p;return 3*d*Math.pow(p,2)-3*f*Math.pow(p,2)+6*f*h*p-6*c*h*p+3*c*Math.pow(h,2)-3*u*Math.pow(h,2)},a.default.prototype.curve=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("curve",f),this._renderer._doStroke&&(u=this._renderer).curve.apply(u,f),this},a.default.prototype.curveDetail=function(u){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=u<3?3:u,this},a.default.prototype.curveTightness=function(u){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=u,this},a.default.prototype.curvePoint=function(u,c,f,d,p){a.default._validateParameters("curvePoint",arguments);var h=this._renderer._curveTightness,m=p*p*p,g=p*p;return u*((h-1)/2*m+(1-h)*g+(h-1)/2*p)+c*((h+3)/2*m+(-5-h)/2*g+1)+f*((-3-h)/2*m+(h+2)*g+(1-h)/2*p)+d*((1-h)/2*m+(h-1)/2*g)},a.default.prototype.curveTangent=function(u,c,f,d,g){a.default._validateParameters("curveTangent",arguments);var h=this._renderer._curveTightness,m=g*g*3,g=2*g;return u*((h-1)/2*m+(1-h)*g+(h-1)/2)+c*((h+3)/2*m+(-5-h)/2*g)+f*((-3-h)/2*m+(h+2)*g+(1-h)/2)+d*((1-h)/2*m+(h-1)/2*g)};var l=a.default;s.default=l},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(o,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(v=o("../main"))&&v.__esModule?v:{default:v},c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=f();if(_&&_.has(w))return _.get(w);var S,C={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(C,S,T):C[S]=w[S])}return C.default=w,_&&_.set(w,C),C}(o("../constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}var d=null,p=[],h=[],m=!1,g=!1,y=!1,b=!1,x=!0,v=(u.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(h=[],b=!0),this},u.default.prototype.beginShape=function(w){var _;return u.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(_=this._renderer).beginShape.apply(_,arguments):(d=w===c.POINTS||w===c.LINES||w===c.TRIANGLES||w===c.TRIANGLE_FAN||w===c.TRIANGLE_STRIP||w===c.QUADS||w===c.QUAD_STRIP?w:null,p=[],h=[]),this},u.default.prototype.bezierVertex=function(){for(var w,_=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];if(u.default._validateParameters("bezierVertex",S),this._renderer.isP3D)(w=this._renderer).bezierVertex.apply(w,S);else if(p.length===0)u.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{m=!0;for(var E=[],T=0;T<S.length;T++)E[T]=S[T];E.isVert=!1,(b?h:p).push(E)}return this},u.default.prototype.curveVertex=function(){for(var w,_=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];return u.default._validateParameters("curveVertex",S),this._renderer.isP3D?(w=this._renderer).curveVertex.apply(w,S):(g=!0,this.vertex(S[0],S[1])),this},u.default.prototype.endContour=function(){if(!this._renderer.isP3D){var w=h[0].slice();w.isVert=h[0].isVert,w.moveTo=!1,h.push(w),x&&(p.push(p[0]),x=!1);for(var _=0;_<h.length;_++)p.push(h[_])}return this},u.default.prototype.endShape=function(w){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(u.default._validateParameters("endShape",arguments),_<1&&(console.log("\u{1F338} p5.js says: You can not have less than one instance"),_=1),this._renderer.isP3D)this._renderer.endShape(w,g,m,y,b,d,_);else{if(_!==1&&console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode"),p.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;_=w===c.CLOSE,_&&!b&&p.push(p[0]),this._renderer.endShape(w,p,g,m,y,b,d),x=!(b=y=m=g=!1),_&&p.pop()}return this},u.default.prototype.quadraticVertex=function(){for(var w,_=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];if(u.default._validateParameters("quadraticVertex",S),this._renderer.isP3D)(w=this._renderer).quadraticVertex.apply(w,S);else{if(this._contourInited)return(w={}).x=S[0],w.y=S[1],w.x3=S[2],w.y3=S[3],w.type=c.QUADRATIC,this._contourVertices.push(w),this;if(0<p.length){y=!0;for(var E=[],T=0;T<S.length;T++)E[T]=S[T];E.isVert=!1,(b?h:p).push(E)}else u.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},u.default.prototype.vertex=function(w,_,S,C,E){var T;return this._renderer.isP3D?(T=this._renderer).vertex.apply(T,arguments):((T=[]).isVert=!0,T[0]=w,T[1]=_,T[2]=0,T[3]=0,T[4]=0,T[5]=this._renderer._getFill(),T[6]=this._renderer._getStroke(),S&&(T.moveTo=S),(b?(h.length===0&&(T.moveTo=!0),h):p).push(T)),this},u.default.prototype.normal=function(w,_,S){var C;return this._assert3d("normal"),u.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this},u.default);s.default=v},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(o,i,s){},{}],292:[function(o,i,s){"use strict";o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.noLoop=function(){this._loop=!1},o.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},o.default.prototype.isLooping=function(){return this._loop},o.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},o.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},o.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var l=parseInt(a),u=((isNaN(l)||l<1)&&(l=1),this._isGlobal?window:this);if(typeof u.draw=="function"){u.setup===void 0&&u.scale(u._pixelDensity,u._pixelDensity);for(var c=0;c<l;c++){u.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),u._renderer.isP3D&&u._renderer._update(),u._setProperty("frameCount",u.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{u.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},o=o.default,s.default=o},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var u=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||u?(u=this._renderer).applyMatrix.apply(u,l(arguments.length<=0?void 0:arguments[0])):(u=this._renderer).applyMatrix.apply(u,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(u,c){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(u),c),this},a.default.prototype.rotateX=function(u){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(u)),this},a.default.prototype.rotateY=function(u){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(u)),this},a.default.prototype.rotateZ=function(u){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(u)),this},a.default.prototype.scale=function(u,c,f){var d;return a.default._validateParameters("scale",arguments),u instanceof a.default.Vector?(u=(d=u).x,c=d.y,f=d.z):Array.isArray(u)&&(u=(d=u)[0],c=d[1],f=d[2]||1),isNaN(c)?c=f=u:isNaN(f)&&(f=1),this._renderer.scale(u,c,f),this},a.default.prototype.shearX=function(u){return a.default._validateParameters("shearX",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,0,Math.tan(u),1,0,0),this},a.default.prototype.shearY=function(u){return a.default._validateParameters("shearY",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,Math.tan(u),0,1,0,0),this},a.default.prototype.translate=function(u,c,f){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(u,c,f):this._renderer.translate(u,c),this},o=a.default,s.default=o},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator");var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(f){return function(d){if(Array.isArray(d)){for(var p=0,h=new Array(d.length);p<d.length;p++)h[p]=d[p];return h}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default.prototype.storeItem=function(f,d){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),d===void 0&&console.log("You cannot store undefined variables using storeItem().");var p=c(d);switch(p){case"number":case"boolean":d=d.toString();break;case"object":d instanceof l.default.Color?p="p5.Color":d instanceof l.default.Vector&&(p="p5.Vector",d=[d.x,d.y,d.z]),d=JSON.stringify(d)}localStorage.setItem(f,d),f="".concat(f,"p5TypeID"),localStorage.setItem(f,p)},l.default.prototype.getItem=function(f){var d=localStorage.getItem(f),p=localStorage.getItem("".concat(f,"p5TypeID"));if(p===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(d!==null)switch(p){case"number":d=parseFloat(d);break;case"boolean":d=d==="true";break;case"object":d=JSON.parse(d);break;case"p5.Color":d=JSON.parse(d),d=this.color.apply(this,u(d.levels));break;case"p5.Vector":d=JSON.parse(d),d=this.createVector.apply(this,u(d))}return d},l.default.prototype.clearStorage=function(){var f=this;Object.keys(localStorage).forEach(function(d){d.endsWith("p5TypeID")&&f.removeItem(d.replace("p5TypeID",""))})},l.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.object.keys"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(o=o("../core/main"))&&o.__esModule?o:{default:o};function c(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&f(y,b)}function f(y,b){return(f=Object.setPrototypeOf||function(x,v){return x.__proto__=v,x})(y,b)}function d(y){return function(){var b,x=p(y),x=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=p(this).constructor,Reflect.construct(x,arguments,b)):x.apply(this,arguments),this);if(!b||l(b)!=="object"&&typeof b!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function p(y){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(y)}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function m(y,b){for(var x=0;x<b.length;x++){var v=b[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}function g(y,b,x){b&&m(y.prototype,b),x&&m(y,x)}u.default.prototype.createStringDict=function(y,b){return u.default._validateParameters("createStringDict",arguments),new u.default.StringDict(y,b)},u.default.prototype.createNumberDict=function(y,b){return u.default._validateParameters("createNumberDict",arguments),new u.default.NumberDict(y,b)},u.default.TypedDict=function(){function y(b,x){return h(this,y),b instanceof Object?this.data=b:(this.data={},this.data[b]=x),this}return g(y,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,x){this._validate(x)?this.data[b]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var x in b)this.set(x,b[x])}},{key:"create",value:function(b,x){b instanceof Object&&x===void 0?this._addObj(b):b!==void 0?this.set(b,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var x,v="";for(x in this.data)v+="".concat(x,",").concat(this.data[x],`
`);var w=new Blob([v],{type:"text/csv"});u.default.prototype.downloadFile(w,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,x){u.default.prototype.saveJSON(this.data,b,x)}},{key:"_validate",value:function(b){return!0}}]),y}(),u.default.StringDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){h(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="string"}}]),b}(),u.default.NumberDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){h(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]+=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,v){this.add(x,-v)}},{key:"mult",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]*=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]/=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var v,w=this.data[Object.keys(this.data)[0]];for(v in this.data)this.data[v]*x<w*x&&(w=this.data[v]);return w}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var v=Object.keys(this.data)[0],w=1;w<Object.keys(this.data).length;w++)Object.keys(this.data)[w]*x<v*x&&(v=Object.keys(this.data)[w]);return v}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),o=u.default.TypedDict,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function c(v,w,_){w&&u(v.prototype,w),_&&u(v,_)}function f(v,w){return(f=Object.setPrototypeOf||function(_,S){return _.__proto__=S,_})(v,w)}function d(v){return function(){var w,_,S=h(v);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(S,arguments,w)):S.apply(this,arguments),S=this,!(_=w)||g(_)!=="object"&&typeof _!="function"?p(S):_}}function p(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}function y(v,w,_){return(w._userNode||document.body).appendChild(v),_=new(_?l.default.MediaElement:l.default.Element)(v,w),w._elements.push(_),_}function b(v,T,_,S){var C=document.createElement(T),E=(typeof(_=_||"")=="string"&&(_=[_]),!0),T=!1,I=void 0;try{for(var k,F=_[Symbol.iterator]();!(E=(k=F.next()).done);E=!0){var D=k.value,L=document.createElement("source");L.setAttribute("src",D),C.appendChild(L)}}catch(R){T=!0,I=R}finally{try{E||F.return==null||F.return()}finally{if(T)throw I}}typeof S=="function"&&C.addEventListener("canplaythrough",function R(){S(),C.removeEventListener("canplaythrough",R)});var P=y(C,v,!0);return P.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){P.width=C.videoWidth,P.height=C.videoHeight,P.elt.width===0&&(P.elt.width=C.videoWidth),P.elt.height===0&&(P.elt.height=C.videoHeight),P.presetPlaybackRate&&(P.elt.playbackRate=P.presetPlaybackRate,delete P.presetPlaybackRate),P.loadedmetadata=!0}),P}l.default.prototype.select=function(v,w){return l.default._validateParameters("select",arguments),w=this._getContainer(w).querySelector(v),w?this._wrapElement(w):null},l.default.prototype.selectAll=function(v,w){l.default._validateParameters("selectAll",arguments);var _=[],S=this._getContainer(w).querySelectorAll(v);if(S)for(var C=0;C<S.length;C++){var E=this._wrapElement(S[C]);_.push(E)}return _},l.default.prototype._getContainer=function(v){var w=document;return typeof v=="string"?w=document.querySelector(v)||document:v instanceof l.default.Element?w=v.elt:v instanceof HTMLElement&&(w=v),w},l.default.prototype._wrapElement=function(v){var w,_=Array.prototype.slice.call(v.children);return v.tagName==="INPUT"&&v.type==="checkbox"?((w=new l.default.Element(v,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},w):v.tagName==="VIDEO"||v.tagName==="AUDIO"?new l.default.MediaElement(v,this):v.tagName==="SELECT"?this.createSelect(new l.default.Element(v,this)):0<_.length&&_.every(function(S){return S.tagName==="INPUT"||S.tagName==="LABEL"})?this.createRadio(new l.default.Element(v,this)):new l.default.Element(v,this)},l.default.prototype.removeElements=function(v){l.default._validateParameters("removeElements",arguments),this._elements.filter(function(w){return!(w.elt instanceof HTMLCanvasElement)}).map(function(w){return w.remove()})},l.default.Element.prototype.changed=function(v){return l.default.Element._adjustListener("change",v,this),this},l.default.Element.prototype.input=function(v){return l.default.Element._adjustListener("input",v,this),this},l.default.prototype.createDiv=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("div");return w.innerHTML=v,y(w,this)},l.default.prototype.createP=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("p");return w.innerHTML=v,y(w,this)},l.default.prototype.createSpan=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("span");return w.innerHTML=v,y(w,this)},l.default.prototype.createImg=function(){l.default._validateParameters("createImg",arguments);var v,w=document.createElement("img"),_=arguments;return 1<_.length&&typeof _[1]=="string"&&(w.alt=_[1]),2<_.length&&typeof _[2]=="string"&&(w.crossOrigin=_[2]),w.src=_[0],v=y(w,this),w.addEventListener("load",function(){v.width=w.offsetWidth||w.width,v.height=w.offsetHeight||w.height;var S=_[_.length-1];typeof S=="function"&&S(v)}),v},l.default.prototype.createA=function(v,w,_){l.default._validateParameters("createA",arguments);var S=document.createElement("a");return S.href=v,S.innerHTML=w,_&&(S.target=_),y(S,this)},l.default.prototype.createSlider=function(v,w,_,S){l.default._validateParameters("createSlider",arguments);var C=document.createElement("input");return C.type="range",C.min=v,C.max=w,S===0?C.step=1e-18:S&&(C.step=S),typeof _=="number"&&(C.value=_),y(C,this)},l.default.prototype.createButton=function(v,w){l.default._validateParameters("createButton",arguments);var _=document.createElement("button");return _.innerHTML=v,w&&(_.value=w),y(_,this)},l.default.prototype.createCheckbox=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];l.default._validateParameters("createCheckbox",w);var S=document.createElement("div"),C=document.createElement("input"),E=(C.type="checkbox",document.createElement("label")),T=(E.appendChild(C),S.appendChild(E),y(S,this));return T.checked=function(){var I=T.elt.firstElementChild.getElementsByTagName("input")[0];if(I){if(arguments.length===0)return I.checked;I.checked=!(arguments.length<=0||!arguments[0])}return T},this.value=function(I){return T.value=I,this},w[0]&&(T.value(w[0]),(S=document.createElement("span")).innerHTML=w[0],E.appendChild(S)),w[1]&&(C.checked=!0),T},l.default.prototype.createSelect=function(){for(var v,w=arguments.length,_=new Array(w),S=0;S<w;S++)_[S]=arguments[S];l.default._validateParameters("createSelect",_);var C,E=_[0];return E instanceof l.default.Element&&E.elt instanceof HTMLSelectElement?this.elt=(v=E).elt:E instanceof HTMLSelectElement?(v=y(E,this),this.elt=E):(C=document.createElement("select"),E&&typeof E=="boolean"&&C.setAttribute("multiple","true"),v=y(C,this),this.elt=C),v.option=function(T,I){var k;if(T!==void 0){for(var F,D=0;D<this.elt.length;D+=1)if(this.elt[D].textContent===T){k=D;break}k!==void 0?I===!1?this.elt.remove(k):this.elt[k].value=I:((F=document.createElement("option")).textContent=T,F.value=I===void 0?T:I,this.elt.appendChild(F),this._pInst._elements.push(F))}},v.selected=function(T){if(T!==void 0){for(var I=0;I<this.elt.length;I+=1)this.elt[I].value.toString()===T.toString()&&(this.elt.selectedIndex=I);return this}if(this.elt.getAttribute("multiple")){var k=[],F=!0,D=!1,L=void 0;try{for(var P,R=this.elt.selectedOptions[Symbol.iterator]();!(F=(P=R.next()).done);F=!0){var V=P.value;k.push(V.value)}}catch(G){D=!0,L=G}finally{try{F||R.return==null||R.return()}finally{if(D)throw L}}return k}return this.elt.value},v.disable=function(T){if(typeof T=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===T&&(this.elt[I].disabled=!0,this.elt[I].selected=!1);else this.elt.disabled=!0;return this},v.enable=function(T){if(typeof T=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===T&&(this.elt[I].disabled=!1,this.elt[I].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},v},l.default.prototype.createRadio=function(){function v(T){return T instanceof HTMLInputElement&&T.type==="radio"}function w(T){return T instanceof HTMLLabelElement}var _,S,C,E=arguments.length<=0?void 0:arguments[0];return E instanceof l.default.Element&&(E.elt instanceof HTMLDivElement||E.elt instanceof HTMLSpanElement)?(_=E,this.elt=E.elt):E instanceof HTMLDivElement||E instanceof HTMLSpanElement?(_=y(E,this),S=this.elt=E,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(C=arguments.length<=1?void 0:arguments[1])):(typeof E=="string"&&(C=E),S=document.createElement("div"),_=y(S,this),this.elt=S),_._name=C||"radioOption",_._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(T){return v(T)||w(T)&&v(T.firstElementChild)}).map(function(T){return v(T)?T:T.firstElementChild})},_.option=function(T,I){var k,F,D,L=!0,P=!1,R=void 0;try{for(var V,G=_._getOptionsArray()[Symbol.iterator]();!(L=(V=G.next()).done);L=!0){var U=V.value;if(U.value===T){k=U;break}}}catch(H){P=!0,R=H}finally{try{L||G.return==null||G.return()}finally{if(P)throw R}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",T)),k.setAttribute("name",_._name),w(k.parentElement)?F=k.parentElement:(F=document.createElement("label")).insertAdjacentElement("afterbegin",k),F.lastElementChild instanceof HTMLSpanElement?D=F.lastElementChild:(D=document.createElement("span"),k.insertAdjacentElement("afterend",D)),D.innerHTML=I===void 0?T:I,this.elt.appendChild(F),k},_.remove=function(T){var I=!0,k=!1,F=void 0;try{for(var D,L=_._getOptionsArray()[Symbol.iterator]();!(I=(D=L.next()).done);I=!0){var P=D.value;if(P.value===T)return void(w(P.parentElement)?P.parentElement:P).remove()}}catch(R){k=!0,F=R}finally{try{I||L.return==null||L.return()}finally{if(k)throw F}}},_.value=function(){var T="",I=!0,k=!1,F=void 0;try{for(var D,L=_._getOptionsArray()[Symbol.iterator]();!(I=(D=L.next()).done);I=!0){var P=D.value;if(P.checked){T=P.value;break}}}catch(R){k=!0,F=R}finally{try{I||L.return==null||L.return()}finally{if(k)throw F}}return T},_.selected=function(T){var I=null;if(T===void 0){var k=!0,F=!1,D=void 0;try{for(var L,P=_._getOptionsArray()[Symbol.iterator]();!(k=(L=P.next()).done);k=!0){var R=L.value;if(R.checked){I=R;break}}}catch(X){F=!0,D=X}finally{try{k||P.return==null||P.return()}finally{if(F)throw D}}}else{_._getOptionsArray().forEach(function($){$.checked=!1,$.removeAttribute("checked")});var V=!0,F=!1,D=void 0;try{for(var G,U=_._getOptionsArray()[Symbol.iterator]();!(V=(G=U.next()).done);V=!0){var H=G.value;H.value===T&&(H.setAttribute("checked",!0),H.checked=!0,I=H)}}catch($){F=!0,D=$}finally{try{V||U.return==null||U.return()}finally{if(F)throw D}}}return I},_.disable=function(){var T=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],I=!0,k=!1,F=void 0;try{for(var D,L=_._getOptionsArray()[Symbol.iterator]();!(I=(D=L.next()).done);I=!0)D.value.setAttribute("disabled",T)}catch(P){k=!0,F=P}finally{try{I||L.return==null||L.return()}finally{if(k)throw F}}},_},l.default.prototype.createColorPicker=function(v){l.default._validateParameters("createColorPicker",arguments);var w=document.createElement("input");return w.type="color",v?v instanceof l.default.Color?w.value=v.toString("#rrggbb"):(l.default.prototype._colorMode="rgb",l.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},w.value=l.default.prototype.color(v).toString("#rrggbb")):w.value="#000000",(w=y(w,this)).color=function(){return v&&(v.mode&&(l.default.prototype._colorMode=v.mode),v.maxes&&(l.default.prototype._colorMaxes=v.maxes)),l.default.prototype.color(this.elt.value)},w},l.default.prototype.createInput=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",_=(l.default._validateParameters("createInput",arguments),document.createElement("input"));return _.setAttribute("value",v),_.setAttribute("type",w),y(_,this)},l.default.prototype.createFileInput=function(v){var w,_=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(l.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(w=document.createElement("input")).setAttribute("type","file"),_&&w.setAttribute("multiple",!0),w.addEventListener("change",function(S){var C=!0,E=!1,T=void 0;try{for(var I,k=S.target.files[Symbol.iterator]();!(C=(I=k.next()).done);C=!0){var F=I.value;l.default.File._load(F,v)}}catch(D){E=!0,T=D}finally{try{C||k.return==null||k.return()}finally{if(E)throw T}}},!1),y(w,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},l.default.prototype.createVideo=function(v,w){return l.default._validateParameters("createVideo",arguments),b(this,"video",v,w)},l.default.prototype.createAudio=function(v,w){return l.default._validateParameters("createAudio",arguments),b(this,"audio",v,w)},l.default.prototype.VIDEO="video",l.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(v){var w=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return w?new Promise(function(_,S){w.call(navigator,v,_,S)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),l.default.prototype.createCapture=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];if(l.default._validateParameters("createCapture",w),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var S,C=!0,E=!0,T=!1,I=0,k=w;I<k.length;I++){var F=k[I];F===l.default.prototype.VIDEO?E=!1:F===l.default.prototype.AUDIO?C=!1:g(F)==="object"?(F.flipped!==void 0&&(T=F.flipped,delete F.flipped),D=Object.assign({},D,F)):typeof F=="function"&&(S=F)}var D=Object.assign({},{video:C,audio:E},D),L=document.createElement("video"),P=(L.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(D).then(function(R){try{"srcObject"in L?L.srcObject=R:L.src=window.URL.createObjectURL(R)}catch{L.src=R}}).catch(function(R){R.name==="NotFoundError"&&l.default._friendlyError("No webcam found on this device","createCapture"),R.name==="NotAllowedError"&&l.default._friendlyError("Access to the camera was denied","createCapture"),console.error(R)}),y(L,this,!0));return P.loadedmetadata=!1,L.addEventListener("loadedmetadata",function(){L.play(),L.width?(P.width=L.width,P.height=L.height,T&&(P.elt.style.transform="scaleX(-1)")):(P.width=P.elt.width=L.videoWidth,P.height=P.elt.height=L.videoHeight),P.loadedmetadata=!0,S&&S(L.srcObject)}),P.flipped=T,P},l.default.prototype.createElement=function(v,w){return l.default._validateParameters("createElement",arguments),v=document.createElement(v),w!==void 0&&(v.innerHTML=w),y(v,this)},l.default.Element.prototype.addClass=function(v){return this.elt.className?this.hasClass(v)||(this.elt.className=this.elt.className+" "+v):this.elt.className=v,this},l.default.Element.prototype.removeClass=function(v){return this.elt.classList.remove(v),this},l.default.Element.prototype.hasClass=function(v){return this.elt.classList.contains(v)},l.default.Element.prototype.toggleClass=function(v){return this.elt.classList.contains(v)?this.elt.classList.remove(v):this.elt.classList.add(v),this},l.default.Element.prototype.child=function(v){return v===void 0?this.elt.childNodes:(typeof v=="string"?(v[0]==="#"&&(v=v.substring(1)),v=document.getElementById(v)):v instanceof l.default.Element&&(v=v.elt),v instanceof HTMLElement&&this.elt.appendChild(v),this)},l.default.Element.prototype.center=function(v){var w=this.elt.style.display,_=this.elt.style.display==="none",S=this.parent().style.display==="none",C={x:this.elt.offsetLeft,y:this.elt.offsetTop},E=(_&&this.show(),S&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),T=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return v==="both"||v===void 0?this.position(E/2+this.parent().offsetLeft,T/2+this.parent().offsetTop):v==="horizontal"?this.position(E/2+this.parent().offsetLeft,C.y):v==="vertical"&&this.position(C.x,T/2+this.parent().offsetTop),this.style("display",w),_&&this.hide(),S&&this.parent().hide(),this},l.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},l.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},l.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=v,this},l.default.Element.prototype._rotate=function(){var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=v,this},l.default.Element.prototype.style=function(v,w){if((w=w instanceof l.default.Color?"rgba("+w.levels[0]+","+w.levels[1]+","+w.levels[2]+","+w.levels[3]/255+")":w)===void 0){if(v.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(v);for(var _=v.split(";"),S=0;S<_.length;S++){var C=_[S].split(":");C[0]&&C[1]&&(this.elt.style[C[0].trim()]=C[1].trim())}}else this.elt.style[v]=w,v!=="width"&&v!=="height"&&v!=="left"&&v!=="top"||(w=window.getComputedStyle(this.elt).getPropertyValue(v).replace(/[^\d.]/g,""),this[v]=Math.round(parseFloat(w,10)));return this},l.default.Element.prototype.attribute=function(v,w){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return w===void 0?this.elt.getAttribute(v):(this.elt.setAttribute(v,w),this);if(w===void 0)return this.elt.firstChild.getAttribute(v);for(var _=0;_<this.elt.childNodes.length;_++)this.elt.childNodes[_].setAttribute(v,w)},l.default.Element.prototype.removeAttribute=function(v){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var w=0;w<this.elt.childNodes.length;w++)this.elt.childNodes[w].removeAttribute(v);return this.elt.removeAttribute(v),this},l.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},l.default.Element.prototype.show=function(){return this.elt.style.display="block",this},l.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},l.default.Element.prototype.size=function(v,w){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var _=v,S=w,C=l.default.prototype.AUTO;if(_!==C||S!==C){if(_===C?_=w*this.width/this.height:S===C&&(S=v*this.height/this.width),this.elt instanceof HTMLCanvasElement){var E,T={},I=this.elt.getContext("2d");for(E in I)T[E]=I[E];for(E in this.elt.setAttribute("width",_*this._pInst._pixelDensity),this.elt.setAttribute("height",S*this._pInst._pixelDensity),this.elt.style.width=_+"px",this.elt.style.height=S+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),T)this.elt.getContext("2d")[E]=T[E]}else this.elt.style.width=_+"px",this.elt.style.height=S+"px",this.elt.width=_,this.elt.height=S;this.width=_,this.height=S,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",_),this._pInst._setProperty("height",S))}return this},l.default.Element.prototype.remove=function(){this instanceof l.default.MediaElement&&(this.stop(),(w=this.elt.srcObject)!==null&&w.getTracks().forEach(function(_){_.stop()}));var v,w=this._pInst._elements.indexOf(this);for(v in w!==-1&&this._pInst._elements.splice(w,1),this._events)this.elt.removeEventListener(v,this._events[v]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},l.default.Element.prototype.drop=function(v,w){var _;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",_=function(S){S.preventDefault()}),this.elt.addEventListener("dragleave",_)),l.default.Element._attachListener("drop",function(C){C.preventDefault(),typeof w=="function"&&w.call(this,C);var C=C.dataTransfer.files,E=!0,T=!1,I=void 0;try{for(var k,F=C[Symbol.iterator]();!(E=(k=F.next()).done);E=!0){var D=k.value;l.default.File._load(D,v)}}catch(L){T=!0,I=L}finally{try{E||F.return==null||F.return()}finally{if(T)throw I}}},this)):console.log("The File APIs are not fully supported in this browser."),this},l.default.Element.prototype.draggable=function(v){var w,_="ontouchstart"in window,S=0,C=0,E=0,T=0,I=_?"touchend":"mouseup",k=_?"touchmove":"mousemove";function F(L){var P;L=L||window.event,T=_?(P=L.changedTouches,S=E-parseInt(P[0].clientX),C=T-parseInt(P[0].clientY),E=parseInt(P[0].clientX),parseInt(P[0].clientY)):(S=E-parseInt(L.clientX),C=T-parseInt(L.clientY),E=parseInt(L.clientX),parseInt(L.clientY)),v.style.left=v.offsetLeft-S+"px",v.style.top=v.offsetTop-C+"px"}function D(){document.removeEventListener(I,D,!1),document.removeEventListener(k,F,!1)}return v===void 0?w=v=this.elt:v!==this.elt&&v.elt!==this.elt&&(v=v.elt,w=this.elt),w.addEventListener(_?"touchstart":"mousedown",function(L){{var P;L=L||window.event,T=_?(P=L.changedTouches,E=parseInt(P[0].clientX),parseInt(P[0].clientY)):(E=parseInt(L.clientX),parseInt(L.clientY))}return document.addEventListener(I,D,!1),document.addEventListener(k,F,!1),!1},!1),w.style.cursor="move",this};function x(v,w,_,S){m(this,x),this.callback=v,this.time=w,this.id=_,this.val=S}o=function(v){var w=S;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&f(w,v);var _=d(S);function S(C,E){m(this,S);var T=p(E=_.call(this,C,E));return E.elt.crossOrigin="anonymous",E._prevTime=0,E._cueIDCounter=0,E._cues=[],E.pixels=[],E._pixelsState=p(E),E._pixelDensity=1,E._modified=!1,E._frameOnCanvas=-1,Object.defineProperty(T,"src",{get:function(){var I=T.elt.children[0].src,k=T.elt.src===window.location.href?"":T.elt.src;return I===window.location.href?k:I},set:function(I){for(var k=0;k<T.elt.children.length;k++)T.elt.removeChild(T.elt.children[k]);var F=document.createElement("source");F.src=I,C.appendChild(F),T.elt.src=I,T.modified=!0}}),T._onended=function(){},T.elt.onended=function(){T._onended(T)},E}return c(S,[{key:"play",value:function(){var C;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(C=this.elt.play())&&C.catch&&C.catch(function(E){E.name==="NotAllowedError"?console.error(E):console.error("Media play method encountered an unexpected error",E)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var C=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(C)},{passive:!0,once:!0})}},{key:"autoplay",value:function(C){var E=this,T=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",C),C&&!T&&(C=function(){return E._setupAutoplayFailDetection()},this.elt.readyState===4?C():this.elt.addEventListener("canplay",C,{passive:!0,once:!0})),this}},{key:"volume",value:function(C){if(C===void 0)return this.elt.volume;this.elt.volume=C}},{key:"speed",value:function(C){if(C===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=C:this.presetPlaybackRate=C}},{key:"time",value:function(C){return C===void 0?this.elt.currentTime:(this.elt.currentTime=C,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var C=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&C&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];return l.default.Renderer2D.prototype.loadPixels.apply(this,E)}},{key:"updatePixels",value:function(C,E,T,I){return this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.updatePixels.call(this,C,E,T,I)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];return l.default.Renderer2D.prototype.get.apply(this,E)}},{key:"_getPixel",value:function(){this.loadPixels();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];return l.default.Renderer2D.prototype._getPixel.apply(this,E)}},{key:"set",value:function(C,E,T){this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.set.call(this,C,E,T),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];l.default.prototype.copy.apply(this,E)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var C=arguments.length,E=new Array(C),T=0;T<C;T++)E[T]=arguments[T];l.default.Image.prototype.mask.apply(this,E)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(C){this._modified=C}},{key:"onended",value:function(C){return this._onended=C,this}},{key:"connect",value:function(C){var E,T;if(typeof l.default.prototype.getAudioContext=="function")E=l.default.prototype.getAudioContext(),T=l.default.soundOut.input;else try{T=(E=C.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=E.createMediaElementSource(this.elt),this.audioSourceNode.connect(T)),C?C.input?this.audioSourceNode.connect(C.input):this.audioSourceNode.connect(C):this.audioSourceNode.connect(T)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(C,k,T){var I=this._cueIDCounter++,k=new x(k,C,I,T);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),I}},{key:"removeCue",value:function(C){for(var E=0;E<this._cues.length;E++)this._cues[E].id===C&&(console.log(C),this._cues.splice(E,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var C=this.time(),E=0;E<this._cues.length;E++){var T=this._cues[E].time,I=this._cues[E].val;this._prevTime<T&&T<=C&&this._cues[E].callback(I)}this._prevTime=C}}]),S}(l.default.Element),l.default.MediaElement=o,o=function(){function v(w,_){m(this,v),this.file=w,this._pInst=_,_=w.type.split("/"),this.type=_[0],this.subtype=_[1],this.name=w.name,this.size=w.size,this.data=void 0}return c(v,null,[{key:"_createLoader",value:function(w,_){var S=new FileReader;return S.onload=function(C){var E,T=new l.default.File(w);T.file.type==="application/json"?T.data=JSON.parse(C.target.result):T.file.type==="text/xml"?(E=new DOMParser().parseFromString(C.target.result,"text/xml"),T.data=new l.default.XML(E.documentElement)):T.data=C.target.result,_(T)},S}},{key:"_load",value:function(w,_){var S;/^text\//.test(w.type)||w.type==="application/json"?l.default.File._createLoader(w,_).readAsText(w):/^(video|audio)\//.test(w.type)?((S=new l.default.File(w)).data=URL.createObjectURL(w),_(S)):l.default.File._createLoader(w,_).readAsDataURL(w)}}]),v}(),l.default.File=o,o=l.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(g,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(g=g("../core/main"))&&g.__esModule?g:{default:g};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var l=a.default.prototype.pRotationZ=0,u=0,c=0,f="clockwise",d="clockwise",p="clockwise",h=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),m=30,g=(a.default.prototype.setMoveThreshold=function(y){a.default._validateParameters("setMoveThreshold",arguments),h=y},a.default.prototype.setShakeThreshold=function(y){a.default._validateParameters("setShakeThreshold",arguments),m=y},a.default.prototype._ondeviceorientation=function(y){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(y.beta)),this._setProperty("rotationY",this._fromDegrees(y.gamma)),this._setProperty("rotationZ",this._fromDegrees(y.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(y){this._updatePAccelerations(),this._setProperty("accelerationX",2*y.acceleration.x),this._setProperty("accelerationY",2*y.acceleration.y),this._setProperty("accelerationZ",2*y.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var y,b,x,v,w,_=this._isGlobal?window:this;typeof _.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&_.deviceMoved(),typeof _.deviceTurned=="function"&&(b=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,y=l+180,0<b-x&&b-x<270||b-x<-270?f="clockwise":(b-x<0||270<b-x)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(y=b),90<Math.abs(b-y)&&Math.abs(b-y)<270&&(y=b,this._setProperty("turnAxis","X"),_.deviceTurned()),this.pRotateDirectionX=f,l=y-180,x=this._toDegrees(this.rotationY)+180,b=this._toDegrees(this.pRotationY)+180,y=u+180,0<x-b&&x-b<270||x-b<-270?d="clockwise":(x-b<0||270<x-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(y=x),90<Math.abs(x-y)&&Math.abs(x-y)<270&&(y=x,this._setProperty("turnAxis","Y"),_.deviceTurned()),this.pRotateDirectionY=d,u=y-180,0<(b=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&b-x<270||b-x<-270?p="clockwise":(b-x<0||270<b-x)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(c=b),90<Math.abs(b-c)&&Math.abs(b-c)<270&&(c=b,this._setProperty("turnAxis","Z"),_.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),typeof _.deviceShaken=="function"&&(this.pAccelerationX!==null&&(v=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),m<v+w&&_.deviceShaken())},a.default);s.default=g},{"../core/main":280}],298:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(l){var u;this._downKeys[l.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",l.which),this._downKeys[l.which]=!0,this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyPressed!="function"||l.charCode||u.keyPressed(l)===!1&&l.preventDefault())},a.default.prototype._onkeyup=function(l){this._downKeys[l.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),this._setProperty("keyCode",l.which);var u=this._isGlobal?window:this;typeof u.keyReleased=="function"&&u.keyReleased(l)===!1&&l.preventDefault()},a.default.prototype._onkeypress=function(l){var u;l.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",l.which),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyTyped=="function"&&u.keyTyped(l)===!1&&l.preventDefault())},a.default.prototype._onblur=function(l){this._downKeys={}},a.default.prototype.keyIsDown=function(l){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[l]||!1},a.default.prototype._areDownKeys=function(){for(var l in this._downKeys)if(this._downKeys.hasOwnProperty(l)&&this._downKeys[l]===!0)return!0;return!1},o=a.default,s.default=o},{"../core/main":280}],299:[function(o,i,s){"use strict";function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function l(d){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(u=o("../core/main"))&&u.__esModule?u:{default:u},c=function(d){if(d&&d.__esModule)return d;if(d===null||l(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var y;Object.prototype.hasOwnProperty.call(d,h)&&((y=g?Object.getOwnPropertyDescriptor(d,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=d[h])}return m.default=d,p&&p.set(d,m),m}(o("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}u.default.prototype.movedX=0,u.default.prototype.movedY=0,u.default.prototype._hasMouseInteracted=!1,u.default.prototype.mouseX=0,u.default.prototype.mouseY=0,u.default.prototype.pmouseX=0,u.default.prototype.pmouseY=0,u.default.prototype.winMouseX=0,u.default.prototype.winMouseY=0,u.default.prototype.pwinMouseX=0,u.default.prototype.pwinMouseY=0,u.default.prototype.mouseButton=0,u.default.prototype.mouseIsPressed=!1,u.default.prototype._updateNextMouseCoords=function(d){var p,h,m,g,y;this._curElement!==null&&(!d.touches||0<d.touches.length)&&(p=this._curElement.elt,h=this.width,m=this.height,(g=d)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),y=p.getBoundingClientRect(),h=p.scrollWidth/h||1,p=p.scrollHeight/m||1,m={x:(g.clientX-y.left)/h,y:(g.clientY-y.top)/p,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",d.movementX),this._setProperty("movedY",d.movementY),this._setProperty("mouseX",m.x),this._setProperty("mouseY",m.y),this._setProperty("winMouseX",m.winX),this._setProperty("winMouseY",m.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},u.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},u.default.prototype._setMouseButton=function(d){d.button===1?this._setProperty("mouseButton",c.CENTER):d.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},u.default.prototype._onmousemove=function(d){var p=this._isGlobal?window:this;this._updateNextMouseCoords(d),this.mouseIsPressed?typeof p.mouseDragged=="function"?p.mouseDragged(d)===!1&&d.preventDefault():typeof p.touchMoved=="function"&&p.touchMoved(d)===!1&&d.preventDefault():typeof p.mouseMoved=="function"&&p.mouseMoved(d)===!1&&d.preventDefault()},u.default.prototype._onmousedown=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(d),this._updateNextMouseCoords(d),this.touchstart||(typeof p.mousePressed=="function"?p.mousePressed(d)===!1&&d.preventDefault():typeof p.touchStarted=="function"&&p.touchStarted(d)===!1&&d.preventDefault(),this.touchstart=!1)},u.default.prototype._onmouseup=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof p.mouseReleased=="function"?p.mouseReleased(d)===!1&&d.preventDefault():typeof p.touchEnded=="function"&&p.touchEnded(d)===!1&&d.preventDefault(),this.touchend=!1)},u.default.prototype._ondragend=u.default.prototype._onmouseup,u.default.prototype._ondragover=u.default.prototype._onmousemove,u.default.prototype._onclick=function(d){var p=this._isGlobal?window:this;typeof p.mouseClicked=="function"&&p.mouseClicked(d)===!1&&d.preventDefault()},u.default.prototype._ondblclick=function(d){var p=this._isGlobal?window:this;typeof p.doubleClicked=="function"&&p.doubleClicked(d)===!1&&d.preventDefault()},u.default.prototype._mouseWheelDeltaY=0,u.default.prototype._pmouseWheelDeltaY=0,u.default.prototype._onwheel=function(d){var p=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",d.deltaY),typeof p.mouseWheel=="function"&&(d.delta=d.deltaY,p.mouseWheel(d)===!1&&d.preventDefault())},u.default.prototype.requestPointerLock=function(){var d=this._curElement.elt;return d.requestPointerLock=d.requestPointerLock||d.mozRequestPointerLock,d.requestPointerLock?(d.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},u.default.prototype.exitPointerLock=function(){document.exitPointerLock()},o=u.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.touches=[],o.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var l=[],u=0;u<a.touches.length;u++)l[u]=function(y,g,b,p){var h=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,m=y.getBoundingClientRect(),g=y.scrollWidth/g||1,y=y.scrollHeight/b||1,b=p.touches[h]||p.changedTouches[h];return{x:(b.clientX-m.left)/g,y:(b.clientY-m.top)/y,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,a,u);this._setProperty("touches",l)}},o.default.prototype._ontouchstart=function(a){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof l.touchStarted=="function"&&(l.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},o.default.prototype._ontouchmove=function(a){var l=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof l.touchMoved=="function"?l.touchMoved(a)===!1&&a.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(a)===!1&&a.preventDefault()},o.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"&&(l.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},o=o.default,s.default=o},{"../core/main":280}],301:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l,u,c,f={_toPixels:function(d){var p,h;return d instanceof ImageData?d.data:d.getContext("2d")?d.getContext("2d").getImageData(0,0,d.width,d.height).data:d.getContext("webgl")?(h=(p=d.getContext("webgl")).drawingBufferWidth*p.drawingBufferHeight*4,h=new Uint8Array(h),p.readPixels(0,0,d.width,d.height,p.RGBA,p.UNSIGNED_BYTE,h),h):void 0},_getARGB:function(d,p){return p*=4,d[3+p]<<24&4278190080|d[p]<<16&16711680|d[1+p]<<8&65280|255&d[2+p]},_setPixels:function(d,p){for(var h,m=0,g=d.length;m<g;m++)d[0+(h=4*m)]=(16711680&p[m])>>>16,d[1+h]=(65280&p[m])>>>8,d[2+h]=255&p[m],d[3+h]=(4278190080&p[m])>>>24},_toImageData:function(d){return d instanceof ImageData?d:d.getContext("2d").getImageData(0,0,d.width,d.height)},_createImageData:function(d,p){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(d,p)},apply:function(d,y,h){var m=d.getContext("2d"),g=m.getImageData(0,0,d.width,d.height),y=y(g,h);y instanceof ImageData?m.putImageData(y,0,0,0,0,d.width,d.height):m.putImageData(g,0,0,0,0,d.width,d.height)},threshold:function(d){for(var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,h=f._toPixels(d),m=Math.floor(255*p),g=0;g<h.length;g+=4){var y=void 0,y=m<=.2126*h[g]+.7152*h[g+1]+.0722*h[g+2]?255:0;h[g]=h[g+1]=h[g+2]=y}},gray:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4){var m=p[h],g=p[h+1],y=p[h+2];p[h]=p[h+1]=p[h+2]=.2126*m+.7152*g+.0722*y}},opaque:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4)p[h+3]=255;return p},invert:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4)p[h]=255-p[h],p[h+1]=255-p[h+1],p[h+2]=255-p[h+2]},posterize:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,h=f._toPixels(d);if(p<2||255<p)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var m=p-1,g=0;g<h.length;g+=4){var y=h[g],b=h[g+1],x=h[g+2];h[g]=255*(y*p>>8)/m,h[g+1]=255*(b*p>>8)/m,h[g+2]=255*(x*p>>8)/m}},dilate:function(d){for(var p,h,m,g,y,b,x,v,w,_=f._toPixels(d),S=0,C=_.length?_.length/4:0,E=new Int32Array(C);S<C;)for(h=(p=S)+d.width;S<h;)g=m=f._getARGB(_,S),(w=S-1)<p&&(w=S),h<=(v=S+1)&&(v=S),(y=S-d.width)<0&&(y=0),C<=(b=S+d.width)&&(b=S),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,g=x),g<(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,g=x),g<(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(m=y,g=v),g<(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(m=b,g=w),E[S++]=m;f._setPixels(_,E)},erode:function(d){for(var p,h,m,g,y,b,x,v,w,_=f._toPixels(d),S=0,C=_.length?_.length/4:0,E=new Int32Array(C);S<C;)for(h=(p=S)+d.width;S<h;)g=m=f._getARGB(_,S),(w=S-1)<p&&(w=S),h<=(v=S+1)&&(v=S),(y=S-d.width)<0&&(y=0),C<=(b=S+d.width)&&(b=S),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(m=w,g=x),(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))<g&&(m=w,g=x),(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<g&&(m=y,g=v),(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<g&&(m=b,g=w),E[S++]=m;f._setPixels(_,E)},blur:function(d,p){for(var h,m,g,y,b,x,v,w,_,S,C=f._toPixels(d),E=d.width,T=d.height,I=E*T,k=new Int32Array(I),F=0;F<I;F++)k[F]=f._getARGB(C,F);var D,L,P,R,V,G,U,H,X=new Int32Array(I),fe=new Int32Array(I),$=new Int32Array(I),M=new Int32Array(I),z=0,q=3.5*p|0;if(a!==(q=q<1?1:q<248?q:248)){l=1+(a=q)<<1,u=new Int32Array(l),c=new Array(l);for(var ee=0;ee<l;ee++)c[ee]=new Int32Array(256);for(var ae=1,Q=q-1;ae<q;ae++){u[q+ae]=u[Q]=G=Q*Q,U=c[q+ae],H=c[Q--];for(var le=0;le<256;le++)U[le]=H[le]=G*le}V=u[q]=q*q,U=c[q];for(var ie=0;ie<256;ie++)U[ie]=V*ie}for(L=0;L<T;L++){for(D=0;D<E;D++){if(y=g=m=b=h=0,(x=D-a)<0)S=-x,x=0;else{if(E<=x)break;S=0}for(P=S;P<l&&!(E<=x);P++){var K=k[x+z];R=c[P],b+=R[(-16777216&K)>>>24],m+=R[(16711680&K)>>16],g+=R[(65280&K)>>8],y+=R[255&K],h+=u[P],x++}X[v=z+D]=b/h,fe[v]=m/h,$[v]=g/h,M[v]=y/h}z+=E}for(_=(w=-a)*E,L=z=0;L<T;L++){for(D=0;D<E;D++){if(y=g=m=b=h=0,w<0)S=v=-w,x=D;else{if(T<=w)break;S=0,v=w,x=D+_}for(P=S;P<l&&!(T<=v);P++)R=c[P],b+=R[X[x]],m+=R[fe[x]],g+=R[$[x]],y+=R[M[x]],h+=u[P],v++,x+=E;k[D+z]=b/h<<24|m/h<<16|g/h<<8|y/h}z+=E,_+=E,w++}f._setPixels(C,k)}};s.default=f},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("omggif"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f){return function(d){if(Array.isArray(d)){for(var p=0,h=new Array(d.length);p<d.length;p++)h[p]=d[p];return h}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(f,d){return a.default._validateParameters("createImage",arguments),new a.default.Image(f,d)},a.default.prototype.saveCanvas=function(){for(var f,d,p,h,m,g,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];switch(a.default._validateParameters("saveCanvas",b),b[0]instanceof HTMLCanvasElement?(f=b[0],b.shift()):b[0]instanceof a.default.Element?(f=b[0].elt,b.shift()):b[0]instanceof a.default.Framebuffer?(h=b[0],(m=this.createGraphics(h.width,h.height)).pixelDensity(pixelDensity()),h.loadPixels(),m.loadPixels(),m.pixels.set(h.pixels),m.updatePixels(),f=m.elt,b.shift()):f=this._curElement&&this._curElement.elt,1<=b.length&&(d=b[0]),p=(p=2<=b.length?b[1]:p)||a.default.prototype._checkFileExtension(d,p)[1]||"png"){default:g="image/png";break;case"jpeg":case"jpg":g="image/jpeg"}f.toBlob(function(v){a.default.prototype.downloadFile(v,d,p),m&&m.remove()},g)},a.default.prototype.encodeAndDownloadGif=function(f,d){for(var p=f.gifProperties,h=p.loopLimit,m=(h===1?h=null:h===null&&(h=0),new Uint8Array(f.width*f.height*p.numFrames)),g=[],y={},b=0;b<p.numFrames;b++){for(var x=new Set,v=p.frames[b].image.data,w=v.length,_=new Uint32Array(f.width*f.height),S=0,C=0;S<w;S+=4,C++){var E=v[S+0]<<16|v[S+1]<<8|v[S+2]<<0;x.add(E),_[C]=E}var T=c(x).sort().toString();y[T]===void 0?y[T]={freq:1,frames:[b]}:(y[T].freq+=1,y[T].frames.push(b)),g.push(_)}for(var F=[],I=Object.keys(y).sort(function($,M){return y[M].freq-y[$].freq}),k=I[0].split(",").map(function($){return parseInt($)}),F=F.concat(y[k].frames),D=new Set(k),L=1;L<I.length;L++){var P=I[L].split(",").map(function($){return parseInt($)}).filter(function($){return!D.has($)});if(k.length+P.length<=256){for(var R=0;R<P.length;R++)k.push(P[R]),D.add(P[R]);F=F.concat(y[I[L]].frames)}}F=new Set(F);for(var V={},G=0;G<k.length;G++)V[k[G]]||(V[k[G]]=G);for(var U=1;U<k.length;)U<<=1;k.length=U;for(var h={loop:h,palette:new Uint32Array(k)},H=new l.default.GifWriter(m,f.width,f.height,h),X={},fe=0;fe<p.numFrames;fe++)(function(M){var z=!F.has(M),q=z?[]:k,ee=new Uint8Array(f.width*f.height),ae={},Q=new Set,le=(g[M].forEach(function(ye,xe){z?(ae[ye]===void 0&&(ae[ye]=q.length,q.push(ye)),ee[xe]=ae[ye]):ee[xe]=V[ye],0<M&&g[M-1][xe]!==ye&&Q.add(ye)}),{}),ie=q.filter(function(ye){return!Q.has(ye)});if(0<ie.length){var ie=ie[0],K=(z?ae:V)[ie];if(0<M){for(var ge=0;ge<g[M].length;ge++)g[M-1][ge]===g[M][ge]&&(ee[ge]=K);le.transparent=K,X.frameOpts.disposal=1}}if(le.delay=p.frames[M].delay/10,z){for(var ne=1;ne<q.length;)ne<<=1;q.length=ne,le.palette=new Uint32Array(q)}0<M&&H.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),X={pixelPaletteIndex:ee,frameOpts:le}})(fe);X.frameOpts.disposal=1,H.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),h=new Blob([m.slice(0,H.end())],{type:"image/gif"}),a.default.prototype.downloadFile(h,d,"gif")},a.default.prototype.saveFrames=function(f,d,p,g,m){a.default._validateParameters("saveFrames",arguments),p=a.default.prototype.constrain(p=p||3,0,15),p*=1e3;var g=a.default.prototype.constrain(g||15,0,22),y=0,b=a.default.prototype._makeFrame,x=this._curElement.elt,v=[],w=setInterval(function(){v.push(b(f+y,d,x)),y++},1e3/g);setTimeout(function(){if(clearInterval(w),m)m(v);else for(var _=0,S=v;_<S.length;_++){var C=S[_];a.default.prototype.downloadFile(C.imageData,C.filename,C.ext)}v=[]},.01+p)},a.default.prototype._makeFrame=function(f,d,m){var h,m=this?this._curElement.elt:m;if(d)switch(d.toLowerCase()){case"png":h="image/png";break;case"jpeg":case"jpg":h="image/jpeg";break;default:h="image/png"}else d="png",h="image/png";var m=(m=m.toDataURL(h)).replace(h,"image/octet-stream"),g={};return g.imageData=m,g.filename=f,g.ext=d,g},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var u=m(o("../core/main")),c=m(o("../core/helpers")),f=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=h();if(v&&v.has(x))return v.get(x);var w,_={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=S?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(_,w,C):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants")),d=m(o("omggif")),p=o("gifenc");function h(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,h=function(){return x},x)}function m(x){return x&&x.__esModule?x:{default:x}}function g(x,v,w,_,S,C,E){try{var T=x[C](E),I=T.value}catch(k){return void w(k)}T.done?v(I):Promise.resolve(I).then(_,S)}function y(x,v,w,_,S,C,E,T,I,k,F){var D,L,P,R,V,G,U,H,X;return x===f.COVER&&(D=v,P=w,U=C,H=E,G=T,X=I,L=k,R=F,V=Math.max(U/L,H/R),U/=V,H/=V,V=G,G=X,D===f.CENTER?V+=(L-U)/2:D===f.RIGHT&&(V+=L-U),P===f.CENTER?G+=(R-H)/2:P===f.BOTTOM&&(G+=R-H),T=(X={x:V,y:G,w:U,h:H}).x,I=X.y,k=X.w,F=X.h),x===f.CONTAIN&&(D=v,L=w,P=_,R=S,V=C,G=E,U=k,H=F,X=Math.max(U/V,H/G),U/=X,H/=X,X=P,P=R,D===f.CENTER?X+=(V-U)/2:D===f.RIGHT&&(X+=V-U),L===f.CENTER?P+=(G-H)/2:L===f.BOTTOM&&(P+=G-H),_=(x={x:X,y:P,w:U,h:H}).x,S=x.y,C=x.w,E=x.h),{sx:T,sy:I,sw:k,sh:F,dx:_,dy:S,dw:C,dh:E}}function b(x,v){return 0<x&&x<v?x:v}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadImage=function(x,v,w){u.default._validateParameters("loadImage",arguments);var _=new u.default.Image(1,1,this),S=this,C=new Request(x,{method:"GET",mode:"cors"});return fetch(x,C).then(function(E){var T,I=E.headers.get("content-type");I===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),I&&I.includes("image/gif")?E.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),F=_,D=v,L=w,P=(function(z){S._decrementPreload()}).bind(S),R=new d.default.GifReader(k),V=(F.width=F.canvas.width=R.width,F.height=F.canvas.height=R.height,[]),G=R.numFrames(),U=new Uint8ClampedArray(F.width*F.height*4),H=0;H<G;H++){var X=R.frameInfo(H),fe=F.drawingContext.getImageData(0,0,F.width,F.height),$=(U=fe.data.slice(),function(z,q){try{q.decodeAndBlitFrameRGBA(z,U)}catch(ee){u.default._friendlyFileLoadError(8,F.src),typeof L=="function"?L(ee):console.error(ee)}}(H,R),new ImageData(U,F.width,F.height)),$=(F.drawingContext.putImageData($,0,0),X.delay);$===0&&($=10),V.push({image:F.drawingContext.getImageData(0,0,F.width,F.height),delay:10*$}),X.disposal===2?F.drawingContext.clearRect(X.x,X.y,X.width,X.height):X.disposal===3&&F.drawingContext.putImageData(fe,0,0,X.x,X.y,X.width,X.height)}(k=R.loopCount())===null?k=1:k===0&&(k=null),F.drawingContext.putImageData(V[0].image,0,0),1<V.length&&(F.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:V,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof D=="function"&&D(F),P()}},function(k){typeof w=="function"?(w(k),S._decrementPreload()):console.error(k)}):((T=new Image).onload=function(){_.width=_.canvas.width=T.width,_.height=_.canvas.height=T.height,_.drawingContext.drawImage(T,0,0),_.modified=!0,typeof v=="function"&&v(_),S._decrementPreload()},T.onerror=function(k){u.default._friendlyFileLoadError(0,T.src),typeof w=="function"?(w(k),S._decrementPreload()):console.error(k)},x.indexOf("data:image/")!==0&&(T.crossOrigin="Anonymous"),T.src=x),_.modified=!0}).catch(function(E){u.default._friendlyFileLoadError(0,x),typeof w=="function"?(w(E),S._decrementPreload()):console.error(E)}),_},u.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function w(_,S){var C,E,T,I,k,F,D,L,P,R,V,G,U,H,X,fe,$,M,z,q,ee,ae,Q,le,ie,K,ge=arguments;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(C=2<ge.length&&ge[2]!==void 0?ge[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof _!="string")throw TypeError("fileName parameter must be a string");ne.next=3;break;case 3:if(typeof S!="number")throw TypeError("Duration parameter must be a number");ne.next=5;break;case 5:if(E=C&&C.delay||0,T=C&&C.units||"seconds",I=C&&C.silent||!1,k=C&&C.notificationDuration||0,F=C&&C.notificationID||"progressBar",typeof E!="number")throw TypeError("Delay parameter must be a number");ne.next=12;break;case 12:if(T!=="seconds"&&T!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ne.next=14;break;case 14:if(typeof I!="boolean")throw TypeError("Silent parameter must be a boolean");ne.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");ne.next=18;break;case 18:if(typeof F!="string")throw TypeError("Notification ID parameter must be a string");ne.next=20;break;case 20:return this._recording=!0,R=this._targetFrameRate,D=(D=1/(R=R!==1/0&&R!==void 0&&R!==0?R:60)*1e3)<20?20:D,P=(L=T==="seconds"?S*R:S)+(R=T==="seconds"?E*R:E),R=R,this.frameCount=R,V=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(F)!==null&&document.getElementById(F).remove(),I||((U=this.createP("")).id(F),U.style("font-size","16px"),U.style("font-family","Montserrat"),U.style("background-color","#ffffffa0"),U.style("padding","8px"),U.style("border-radius","10px"),U.position(0,0)),this._renderer instanceof u.default.RendererGL&&(X=this.drawingContext,H=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4)),this.noLoop(),ne.next=39,Promise.resolve();case 39:if(R<P)return this.redraw(),le=void 0,le=this._renderer instanceof u.default.RendererGL?(H=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4),X.readPixels(0,0,X.drawingBufferWidth,X.drawingBufferHeight,X.RGBA,X.UNSIGNED_BYTE,H),function(ye,xe,De){for(var Te=parseInt(De/2),Fe=4*xe,$e=new Uint8Array(4*xe),at=0;at<Te;++at){var We=at*Fe,jt=(De-at-1)*Fe;$e.set(ye.subarray(We,We+Fe)),ye.copyWithin(We,jt,jt+Fe),ye.set($e,jt)}return ye}(H,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(le),R++,I||U.html("Saved frame <b>"+G.length.toString()+"</b> out of "+L.toString()),ne.next=48,new Promise(function(ye){return setTimeout(ye,0)});ne.next=50;break;case 48:ne.next=39;break;case 50:I||U.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(V),fe=(0,p.GIFEncoder)(),$=function(ye){for(var xe=new Uint8Array(ye.length*ye[0].length),De=0;De<ye.length;De++)xe.set(ye[De],De*ye[0].length);var Te=(0,p.quantize)(xe,256,{format:"rgba4444",oneBitAlpha:!0});return Te.length===256?Te[Te.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Te.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Te}(G),M={},z=function(ye){for(var xe=ye.length/4,De=new Uint8Array(xe),Te=0;Te<xe;Te++){var Fe=ye[4*Te]<<24|ye[4*Te+1]<<16|ye[4*Te+2]<<8|ye[4*Te+3];M[Fe]===void 0&&(M[Fe]=(0,p.nearestColorIndex)($,ye.slice(4*Te,4*(Te+1)))),De[Te]=M[Fe]}return De},q=$.length-1,ee=[],ae=0;case 60:if(!(ae<G.length)){ne.next=71;break}if(Q=z(G[ae]),le=Q.slice(),ae===0)fe.writeFrame(Q,this.width,this.height,{palette:$,delay:D,dispose:1});else{for(ie=0;ie<Q.length;ie++)Q[ie]===ee[ie]&&(Q[ie]=q);fe.writeFrame(Q,this.width,this.height,{delay:D,transparent:!0,transparentIndex:q,dispose:1})}return ee=le,I||U.html("Rendered frame <b>"+ae.toString()+"</b> out of "+L.toString()),ne.next=68,new Promise(function(ye){return setTimeout(ye,0)});case 68:ae++,ne.next=60;break;case 71:fe.finish(),K=fe.bytesView(),K=new Blob([K],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),I||(U.html("Done. Downloading your gif!\u{1F338}"),0<k&&setTimeout(function(){return U.remove()},1e3*k)),u.default.prototype.downloadFile(K,_,"gif");case 80:case"end":return ne.stop()}},w,this)});var x,v=function(){var w=this,_=arguments;return new Promise(function(S,C){var E=x.apply(w,_);function T(k){g(E,S,C,T,I,"next",k)}function I(k){g(E,S,C,T,I,"throw",k)}T(void 0)})};return function(w,_){return v.apply(this,arguments)}}(),u.default.prototype.image=function(x,v,w,_,R,V,G,U,X,k,F,D){u.default._validateParameters("image",arguments);var H=x.width,L=x.height,P=(D=D||f.CENTER,F=F||f.CENTER,x.elt&&(H=H!==void 0?H:x.elt.width,L=L!==void 0?L:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(H=H!==void 0?H:x.elt.videoWidth,L=L!==void 0?L:x.elt.videoHeight),_||H),R=R||L,V=V||0,G=G||0,U=b(U!==void 0?U:H,H),H=b(X!==void 0?X:L,L),X=1;x.elt&&!x.canvas&&x.elt.style.width&&(X=x.elt.videoWidth&&!_?x.elt.videoWidth:x.elt.width,X/=parseInt(x.elt.style.width,10)),V*=X,G*=X,H*=X,U*=X,L=y(k,F,D,(L=c.default.modeAdjust(v,w,P,R,this._renderer._imageMode)).x,L.y,L.w,L.h,V,G,U,H),this._renderer.image(x,L.sx,L.sy,L.sw,L.sh,L.dx,L.dy,L.dw,L.dh)},u.default.prototype.tint=function(){for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];u.default._validateParameters("tint",v);var _=this.color.apply(this,v);this._renderer._tint=_.levels},u.default.prototype.noTint=function(){this._renderer._tint=null},u.default.prototype._getTintedImageCanvas=u.default.Renderer2D.prototype._getTintedImageCanvas,u.default.prototype.imageMode=function(x){u.default._validateParameters("imageMode",arguments),x!==f.CORNER&&x!==f.CORNERS&&x!==f.CENTER||(this._renderer._imageMode=x)},o=u.default,s.default=o},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f,d){for(var p=0;p<d.length;p++){var h=d[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}a.default.Image=function(){function f(m,g){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=g,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var d,p,h;return d=f,(p=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(b){var g,y=this.gifProperties,b=b._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=b),y.playing&&(y.timeDisplayed=b-y.lastChangeTime,g=y.frames[y.displayIndex].delay,y.timeDisplayed>=g&&(g=Math.floor(y.timeDisplayed/g),y.timeDisplayed=0,y.lastChangeTime=b,y.displayIndex+=g,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(b=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[b].image,0,0),y.displayIndex=b,this.setModified(!0))))}},{key:"_setProperty",value:function(m,g){this[m]=g,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,g,y,b){a.default.Renderer2D.prototype.updatePixels.call(this,m,g,y,b),this.setModified(!0)}},{key:"get",value:function(m,g,y,b){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,g)}},{key:"set",value:function(m,g,y){a.default.Renderer2D.prototype.set.call(this,m,g,y),this.setModified(!0)}},{key:"resize",value:function(m,g){m===0&&g===0?(m=this.canvas.width,g=this.canvas.height):m===0?m=this.canvas.width*g/this.canvas.height:g===0&&(g=this.canvas.height*m/this.canvas.width),m=Math.floor(m),g=Math.floor(g);var y=document.createElement("canvas");if(y.width=m,y.height=g,this.gifProperties)for(var b=this.gifProperties,x=0;x<b.numFrames;x++){for(var v=this.drawingContext.createImageData(m,g),w=(T=T=E=C=S=void 0,b.frames[x].image),_=v,S=0,C=0;C<_.height;C++)for(var E=0;E<_.width;E++){var T=Math.floor(E*w.width/_.width),T=4*(Math.floor(C*w.height/_.height)*w.width+T);_.data[S++]=w.data[T++],_.data[S++]=w.data[T++],_.data[S++]=w.data[T++],_.data[S++]=w.data[+T]}b.frames[x].image=v}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=m,this.canvas.height=this.height=g,this.drawingContext.drawImage(y,0,0,m,g,0,0,m,g),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];a.default.prototype.copy.apply(this,g)}},{key:"mask",value:function(m){var g=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,b=1,x=[m=m===void 0?this:m,0,0,(b=m instanceof a.default.Renderer?m._pInst._pixelDensity:b)*m.width,b*m.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=g,this.setModified(!0)}},{key:"filter",value:function(m,g){l.default.apply(this.canvas,l.default[m],g),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,g),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,g){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,m):a.default.prototype.saveCanvas(this.canvas,m,g)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var g;this.gifProperties&&(m<(g=this.gifProperties).numFrames&&0<=m?(g.timeDisplayed=0,g.lastChangeTime=0,g.displayIndex=m,this.drawingContext.putImageData(g.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,g){if(this.gifProperties){var y=this.gifProperties;if(g<y.numFrames&&0<=g)y.frames[g].delay=m;else{var b=!0,g=!1,x=void 0;try{for(var v,w=y.frames[Symbol.iterator]();!(b=(v=w.next()).done);b=!0)v.value.delay=m}catch(S){g=!0,x=S}finally{try{b||w.return==null||w.return()}finally{if(g)throw x}}}}}}])&&c(d.prototype,p),h&&c(d,h),f}(),o=a.default.Image,s.default=o},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(c){return c&&c.__esModule?c:{default:c}}o("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var c,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];a.default._validateParameters("blend",d),this._renderer?(c=this._renderer).blend.apply(c,d):a.default.Renderer2D.prototype.blend.apply(this,d)},a.default.prototype.copy=function(){for(var c,f,d,p,h,m,g,y,b,x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];if(a.default._validateParameters("copy",v),v.length===9)c=v[0],f=v[1],d=v[2],p=v[3],h=v[4],m=v[5],g=v[6],y=v[7],b=v[8];else{if(v.length!==8)throw new Error("Signature not supported");c=this,f=v[0],d=v[1],p=v[2],h=v[3],m=v[4],g=v[5],y=v[6],b=v[7]}a.default.prototype._copyHelper(this,c,f,d,p,h,m,g,y,b)},a.default.prototype._copyHelper=function(c,f,d,p,h,m,g,y,b,x){var v=f.canvas.width/f.width,w=0,_=0;f._renderer&&f._renderer.isP3D&&(w=f.width/2,_=f.height/2),c._renderer&&c._renderer.isP3D?(c.push(),c.resetMatrix(),c.noLights(),c.blendMode(c.BLEND),c.imageMode(c.CORNER),a.default.RendererGL.prototype.image.call(c._renderer,f,d+w,p+_,h,m,g,y,b,x),c.pop()):c.drawingContext.drawImage(f.canvas,v*(d+w),v*(p+_),v*h,v*m,g,y,b,x)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("filter",f);var g=(function(){var y,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])===!1&&(b.useWebGL=!1)),b}).apply(void 0,f),p=g.shader,h=g.operation,m=g.value,g=g.useWebGL;this._renderer.isP3D&&p?a.default.RendererGL.prototype.filter.call(this._renderer,p):g||this._renderer.isP3D?(!g&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,h,m):((p=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),p.filter.apply(p,f),this.copy(p._renderer,0,0,this.width,this.height,0,0,this.width,this.height),p.clear())):this.canvas!==void 0?l.default.apply(this.canvas,l.default[h],m):l.default.apply(this.elt,l.default[h],m)},a.default.prototype.get=function(c,f,d,p){var h;return a.default._validateParameters("get",arguments),(h=this._renderer).get.apply(h,arguments)},a.default.prototype.loadPixels=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},a.default.prototype.set=function(c,f,d){this._renderer.set(c,f,d)},a.default.prototype.updatePixels=function(c,f,d,p){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,f,d,p)},o=a.default,s.default=o},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=f(o("../core/main")),u=(o("whatwg-fetch"),o("es6-promise/auto"),f(o("fetch-jsonp"))),c=f(o("file-saver"));function f(m){return m&&m.__esModule?m:{default:m}}function d(m){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}function p(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(m,g){g&&g!==!0&&g!=="true"||(g="");var y="";return(m=m||"untitled")&&m.includes(".")&&(y=m.split(".").pop()),g&&y!==g&&(y=g,m="".concat(m,".").concat(y)),[m,y]}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),l.default.prototype.loadJSON=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];l.default._validateParameters("loadJSON",g);for(var b,x,v,w=g[0],_={},S="json",C=1;C<g.length;C++){var E=g[C];typeof E=="string"?E!=="jsonp"&&E!=="json"||(S=E):typeof E=="function"?b?x=E:b=E:d(E)==="object"&&(E.hasOwnProperty("jsonpCallback")||E.hasOwnProperty("jsonpCallbackFunction"))&&(S="jsonp",v=E)}var T=this;return this.httpDo(w,"GET",v,S,function(I){for(var k in I)_[k]=I[k];b!==void 0&&b(I),T._decrementPreload()},function(I){if(l.default._friendlyFileLoadError(5,w),!x)throw I;x(I)}),_},l.default.prototype.loadStrings=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];l.default._validateParameters("loadStrings",g);for(var b,x,v=[],w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var S=this;return l.default.prototype.httpDo.call(this,g[0],"GET","text",function(C){for(var E=C.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),T=0,I=E.length;T<I;T+=32768)Array.prototype.push.apply(v,E.slice(T,Math.min(T+32768,I)));b!==void 0&&b(v),S._decrementPreload()},function(C){if(l.default._friendlyFileLoadError(3,C),!x)throw C;x(C)}),v},l.default.prototype.loadTable=function(m){var g,y,b,x=[],v=!1,w=m.substring(m.lastIndexOf(".")+1,m.length);w==="csv"?b=",":w==="ssv"?b=";":w==="tsv"&&(b="	");for(var _=1;_<arguments.length;_++)typeof arguments[_]=="function"?g===void 0?g=arguments[_]:y===void 0&&(y=arguments[_]):typeof arguments[_]=="string"&&(x.push(arguments[_]),arguments[_]==="header"&&(v=!0),arguments[_]==="csv"?b=",":arguments[_]==="ssv"?b=";":arguments[_]==="tsv"&&(b="	"));var S=new l.default.Table,C=this;return this.httpDo(m,"GET","table",function(E){for(var T,I,k={},F=0,D=[],L=0,P=null,R=function(){k.currentState=F,k.token=""},V=function(){P.push(k.token),R()},G=function(){k.currentState=4,D.push(P),P=null};;){if((T=E[L++])==null){if(k.escaped)throw new Error("Unclosed quote in file.");if(P){V(),G();break}}if(P===null&&(k.escaped=!1,P=[],R()),k.currentState===F){if(T==='"'){k.escaped=!0,k.currentState=1;continue}k.currentState=1}if(k.currentState===1&&k.escaped)if(T==='"')E[L]==='"'?(k.token+='"',L++):(k.escaped=!1,k.currentState=2);else{if(T==="\r")continue;k.token+=T}else T==="\r"?(E[L]===`
`&&L++,V(),G()):T===`
`?(V(),G()):T===b?V():k.currentState===1&&(k.token+=T)}if(v)S.columns=D.shift();else for(var U=0;U<D[0].length;U++)S.columns[U]="null";for(var H=0;H<D.length;H++)(D[H].length!==1||D[H][0]!=="undefined"&&D[H][0]!=="")&&((I=new l.default.TableRow).arr=D[H],I.obj=function(X,fe){if((fe=fe||[])===void 0)for(var $=0;$<X.length;$++)fe[$.toString()]=$;return Object.fromEntries(fe.map(function(M,z){return[M,X[z]]}))}(D[H],S.columns),S.addRow(I));typeof g=="function"&&g(S),C._decrementPreload()},function(E){l.default._friendlyFileLoadError(2,m),y?y(E):console.error(E)}),S},l.default.prototype.loadXML=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];for(var b,x,v=new l.default.XML,w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var S=this;return this.httpDo(g[0],"GET","xml",function(C){for(var E in C)v[E]=C[E];b!==void 0&&b(v),S._decrementPreload()},function(C){if(l.default._friendlyFileLoadError(1,C),!x)throw C;x(C)}),v},l.default.prototype.loadBytes=function(m,g,y){var b={},x=this;return this.httpDo(m,"GET","arrayBuffer",function(v){b.bytes=new Uint8Array(v),typeof g=="function"&&g(b),x._decrementPreload()},function(v){if(l.default._friendlyFileLoadError(6,m),!y)throw v;y(v)}),b},l.default.prototype.httpGet=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return l.default._validateParameters("httpGet",g),g.splice(1,0,"GET"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpPost=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return l.default._validateParameters("httpPost",g),g.splice(1,0,"POST"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpDo=function(){for(var m,g,y,b={},x=0,v="text/plain",w=arguments.length-1;0<w&&typeof(w<0||arguments.length<=w?void 0:arguments[w])=="function";w--)x++;var _=arguments.length-x,S=arguments.length<=0?void 0:arguments[0];if(_==2&&typeof S=="string"&&d(arguments.length<=1?void 0:arguments[1])==="object")F=new Request(S,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var C,E="GET",T=1;T<arguments.length;T++){var I=T<0||arguments.length<=T?void 0:arguments[T];if(typeof I=="string")I==="GET"||I==="POST"||I==="PUT"||I==="DELETE"?E=I:I==="json"||I==="jsonp"||I==="binary"||I==="arrayBuffer"||I==="xml"||I==="text"||I==="table"?m=I:C=I;else if(typeof I=="number")C=I.toString();else if(d(I)==="object")if(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))for(var k in I)b[k]=I[k];else v=I instanceof l.default.XML?(C=I.serialize(),"application/xml"):(C=JSON.stringify(I),"application/json");else typeof I=="function"&&(g?y=I:g=I)}var _=E==="GET"?new Headers:new Headers({"Content-Type":v}),F=new Request(S,{method:E,mode:"cors",body:C,headers:_})}return(_=(_=(m=m||(S.includes("json")?"json":S.includes("xml")?"xml":"text"))==="jsonp"?(0,u.default)(S,b):fetch(F)).then(function(D){if(!D.ok)throw(L=new Error(D.body)).status=D.status,L.ok=!1,L;var L=0;switch((L=m!=="jsonp"?D.headers.get("content-length"):L)&&64e6<L&&l.default._friendlyFileLoadError(7,S),m){case"json":case"jsonp":return D.json();case"binary":return D.blob();case"arrayBuffer":return D.arrayBuffer();case"xml":return D.text().then(function(P){return P=new DOMParser().parseFromString(P,"text/xml"),new l.default.XML(P.documentElement)});default:return D.text()}})).then(g||function(){}),_.catch(y||console.error),_},window.URL=window.URL||window.webkitURL,l.default.prototype._pWriters=[],l.default.prototype.createWriter=function(m,g){var y,b;for(b in l.default.prototype._pWriters)if(l.default.prototype._pWriters[b].name===m)return y=new l.default.PrintWriter(m+this.millis(),g),l.default.prototype._pWriters.push(y),y;return y=new l.default.PrintWriter(m,g),l.default.prototype._pWriters.push(y),y},l.default.PrintWriter=function(m,g){var y=this;this.name=m,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),l.default.prototype.writeFile(x,m,g),l.default.prototype._pWriters)l.default.prototype._pWriters[b].name===this.name&&l.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},l.default.prototype.save=function(m,g,y){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)l.default.prototype.saveCanvas(x);else if(b[0]instanceof l.default.Renderer||b[0]instanceof l.default.Graphics)l.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")l.default.prototype.saveCanvas(x,b[0]);else switch(h(b[1],b[2])[1]){case"json":return void l.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void l.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?l.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof l.default.Table?l.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof l.default.Image?l.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof l.default.SoundFile&&l.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},l.default.prototype.saveJSON=function(m,g,y){l.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(m):JSON.stringify(m,void 0,2),this.saveStrings(y.split(`
`),g,"json")},l.default.prototype.saveJSONObject=l.default.prototype.saveJSON,l.default.prototype.saveJSONArray=l.default.prototype.saveJSON,l.default.prototype.saveStrings=function(m,g,y,b){l.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(g,y||"txt"),v=0;v<m.length;v++)b?x.write(m[v]+`\r
`):x.write(m[v]+`
`);x.close(),x.clear()},l.default.prototype.saveTable=function(m,g,y){l.default._validateParameters("saveTable",arguments),b=y===void 0?g.substring(g.lastIndexOf(".")+1,g.length):y;var b,x=this.createWriter(g,b),v=m.columns,w=b==="tsv"?"	":",";if(b!=="html"){if(v[0]!=="0"){for(var _=0;_<v.length;_++)_<v.length-1?x.write(v[_]+w):x.write(v[_]);x.write(`
`)}for(var S=0;S<m.rows.length;S++){for(var C=void 0,C=0;C<m.rows[S].arr.length;C++)C<m.rows[S].arr.length-1?b==="csv"&&String(m.rows[S].arr[C]).includes(",")?x.write('"'+m.rows[S].arr[C]+'"'+w):x.write(m.rows[S].arr[C]+w):b==="csv"&&String(m.rows[S].arr[C]).includes(",")?x.write('"'+m.rows[S].arr[C]+'"'):x.write(m.rows[S].arr[C]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),v[0]!=="0"){x.print("    <tr>");for(var E=0;E<v.length;E++){var T=p(v[E]);x.print("      <td>".concat(T)),x.print("      </td>")}x.print("    </tr>")}for(var I=0;I<m.rows.length;I++){x.print("    <tr>");for(var k=0;k<m.columns.length;k++){var F=p(m.rows[I].getString(k));x.print("      <td>".concat(F)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},l.default.prototype.writeFile=function(x,g,y){var b="application/octet-stream",x=(l.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));l.default.prototype.downloadFile(x,g,y)},l.default.prototype.downloadFile=function(m,x,v){var b,x=h(x,v),v=x[0];m instanceof Blob?c.default.saveAs(m,v):((b=document.createElement("a")).href=m,b.download=v,b.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},b.style.display="none",document.body.appendChild(b),l.default.prototype._isSafari()&&(m=(m=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(m)),b.click())},l.default.prototype._checkFileExtension=h,l.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},o=l.default,s.default=o},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Table=function(){function u(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,m=u;if(!(h instanceof m))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=p}var c,f,d;return c=u,(f=[{key:"addRow",value:function(p){if(p=p||new a.default.TableRow,p.arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,h){if(typeof h=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[h]===p)return this.rows[m]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].arr[h]===p)return this.rows[g];return null}},{key:"findRows",value:function(p,h){var m=[];if(typeof h=="string")for(var g=0;g<this.rows.length;g++)this.rows[g].obj[h]===p&&m.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[h]===p&&m.push(this.rows[y]);return m}},{key:"matchRow",value:function(p,h){if(typeof h=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[h].match(p))return this.rows[m]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].obj[h].match(p))return this.rows[g];return null}},{key:"matchRows",value:function(p,h){var m=[];if(typeof h=="number")for(var g=0;g<this.rows.length;g++)this.rows[g].arr[h].match(p)&&m.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[h].match(p)&&m.push(this.rows[y]);return m}},{key:"getColumn",value:function(p){var h=[];if(typeof p=="string")for(var m=0;m<this.rows.length;m++)h.push(this.rows[m].obj[p]);else for(var g=0;g<this.rows.length;g++)h.push(this.rows[g].arr[p]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,h){for(var m=[],g=0;g<p.length;g++)m.push(p.charAt(g).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(m.join("|"),"g");if(h===void 0)for(var b=0;b<this.columns.length;b++)for(var x=0;x<this.rows.length;x++){var v=(v=this.rows[x].arr[b]).replace(y,"");this.rows[x].arr[b]=v,this.rows[x].obj[this.columns[b]]=v}else if(typeof h=="string")for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].obj[h]).replace(y,""),S=(this.rows[w].obj[h]=_,this.columns.indexOf(h));this.rows[w].arr[S]=_}else for(var C=0;C<this.rows.length;C++){var E=(E=this.rows[C].arr[h]).replace(y,"");this.rows[C].arr[h]=E,this.rows[C].obj[this.columns[h]]=E}}},{key:"trim",value:function(p){var h=new RegExp(" ","g");if(p===void 0)for(var m=0;m<this.columns.length;m++)for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[m]).replace(h,"");this.rows[g].arr[m]=y,this.rows[g].obj[this.columns[m]]=y}else if(typeof p=="string")for(var b=0;b<this.rows.length;b++){var x=(x=this.rows[b].obj[p]).replace(h,""),v=(this.rows[b].obj[p]=x,this.columns.indexOf(p));this.rows[b].arr[v]=x}else for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].arr[p]).replace(h,"");this.rows[w].arr[p]=_,this.rows[w].obj[this.columns[p]]=_}}},{key:"removeColumn",value:function(g){typeof g=="string"?m=this.columns.indexOf(h=g):h=this.columns[m=g];var h,m,g=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(g);for(var y=0;y<this.rows.length;y++){var b=this.rows[y].arr,x=b.splice(m+1,b.length);b.pop(),this.rows[y].arr=b.concat(x),delete this.rows[y].obj[h]}}},{key:"set",value:function(p,h,m){this.rows[p].set(h,m)}},{key:"setNum",value:function(p,h,m){this.rows[p].setNum(h,m)}},{key:"setString",value:function(p,h,m){this.rows[p].setString(h,m)}},{key:"get",value:function(p,h){return this.rows[p].get(h)}},{key:"getNum",value:function(p,h){return this.rows[p].getNum(h)}},{key:"getString",value:function(p,h){return this.rows[p].getString(h)}},{key:"getObject",value:function(p){for(var h,m={},g=0;g<this.rows.length;g++)if(h=this.rows[g].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));m[h[p]]=h}else m[g]=this.rows[g].obj;return m}},{key:"getArray",value:function(){for(var p=[],h=0;h<this.rows.length;h++)p.push(this.rows[h].arr);return p}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(o,i,s){"use strict";o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.TableRow=function(){function l(d,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var h=[];d&&(h=d.split(p=p||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var u,c,f;return u=l,(c=[{key:"set",value:function(d,p){if(typeof d=="string"){var h=this.table.columns.indexOf(d);if(!(0<=h))throw new Error('This table has no column named "'.concat(d,'"'));this.obj[d]=p,this.arr[h]=p}else{if(!(d<this.table.columns.length))throw new Error("Column #".concat(d," is out of the range of this table"));this.arr[d]=p,h=this.table.columns[d],this.obj[h]=p}}},{key:"setNum",value:function(d,p){p=parseFloat(p),this.set(d,p)}},{key:"setString",value:function(d,p){p=p.toString(),this.set(d,p)}},{key:"get",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d]}},{key:"getNum",value:function(d){var p=parseFloat(typeof d=="string"?this.obj[d]:this.arr[d]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[d]," is NaN (Not a Number)");return p}},{key:"getString",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d].toString()}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function u(c){for(var f=[],d=0;d<c.length;d++)f.push(new a.default.XML(c[d]));return f}a.default.XML=function(){function c(h){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var f,d,p;return f=c,(d=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var m=this.DOM.innerHTML,g=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(h);y.innerHTML=m;for(var b=0;b<g.length;b++)y.setAttribute(g[b].nodeName,g[b].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],m=0;m<this.DOM.childNodes.length;m++)h.push(this.DOM.childNodes[m].nodeName);return h}},{key:"getChildren",value:function(h){return u(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new a.default.XML(this.DOM.children[h]);var m=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.children[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var v=b.value;if(v.tagName===h)return new a.default.XML(v)}}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}}},{key:"addChild",value:function(h){h instanceof a.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var m=-1;if(typeof h=="string"){for(var g=0;g<this.DOM.children.length;g++)if(this.DOM.children[g].tagName===h){m=g;break}}else m=h;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],m=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var v=b.value;h.push(v.nodeName)}}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}return h}},{key:"hasAttribute",value:function(h){var m={},g=!0,y=!1,b=void 0;try{for(var x,v=this.DOM.attributes[Symbol.iterator]();!(g=(x=v.next()).done);g=!0){var w=x.value;m[w.nodeName]=w.nodeValue}}catch(_){y=!0,b=_}finally{try{g||v.return==null||v.return()}finally{if(y)throw b}}return!!m[h]}},{key:"getNum",value:function(h,m){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(S){b=!0,x=S}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return Number(g[h])||m||0}},{key:"getString",value:function(h,m){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(S){b=!0,x=S}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return g[h]?String(g[h]):m||null}},{key:"setAttribute",value:function(h,m){this.DOM.setAttribute(h,m)}},{key:"getContent",value:function(h){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&l(f.prototype,d),p&&l(f,p),c}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(u,c,f){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(u,f),c)},a.default.prototype.dist=function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return a.default._validateParameters("dist",c),c.length===4?Math.hypot(c[2]-c[0],c[3]-c[1]):c.length===6?Math.hypot(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(u,c,f){return a.default._validateParameters("lerp",arguments),f*(c-u)+u},a.default.prototype.log=Math.log,a.default.prototype.mag=function(u,c){return a.default._validateParameters("mag",arguments),Math.hypot(u,c)},a.default.prototype.map=function(u,c,f,d,p,h){return a.default._validateParameters("map",arguments),u=(u-c)/(f-c)*(p-d)+d,h?d<p?this.constrain(u,d,p):this.constrain(u,p,d):u},a.default.prototype.max=function(){for(var u=function(p){return Math.max.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.min=function(){for(var u=function(p){return Math.min.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.norm=function(u,c,f){return a.default._validateParameters("norm",arguments),this.map(u,c,f,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(u,c){return c?(c=Math.pow(10,c),Math.round(u*c)/c):Math.round(u)},a.default.prototype.sq=function(u){return u*u},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(d){a.default._validateParameters("fract",arguments);var c,f=0,d=Number(d);return isNaN(d)||Math.abs(d)===1/0?d:(d<0&&(d=-d,f=1),String(d).includes(".")&&!String(d).includes("e")?(c=String(d),c=+("0"+c.slice(c.indexOf("."))),Math.abs(f-c)):d<1?Math.abs(f-d):0)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f,d){return(l=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(p,h,m){var g=[null];return g.push.apply(g,h),h=new(Function.bind.apply(p,g)),m&&u(h,m.prototype),h}).apply(null,arguments)}function u(c,f){return(u=Object.setPrototypeOf||function(d,p){return d.__proto__=p,d})(c,f)}a.default.prototype.createVector=function(c,f,d){return this instanceof a.default?l(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(c,f,d)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(d,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,d=(d=d("../core/main"))&&d.__esModule?d:{default:d};function a(p){return .5*(1-Math.cos(p*Math.PI))}var l,u=4095,c=4,f=.5,d=(d.default.prototype.noise=function(p){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(l==null){l=new Array(4096);for(var g=0;g<4096;g++)l[g]=Math.random()}p<0&&(p=-p),h<0&&(h=-h),m<0&&(m=-m);for(var y,b,x=Math.floor(p),v=Math.floor(h),w=Math.floor(m),_=p-x,S=h-v,C=m-w,E=0,T=.5,I=0;I<c;I++){var k=x+(v<<4)+(w<<8),F=a(_),D=a(S),L=l[k&u];L+=F*(l[k+1&u]-L),y=l[k+16&u],L+=D*((y+=F*(l[k+16+1&u]-y))-L),y=l[(k+=256)&u],y+=F*(l[k+1&u]-y),b=l[k+16&u],y+=D*((b+=F*(l[k+16+1&u]-b))-y),E+=(L+=a(C)*(y-L))*T,T*=f,x<<=1,v<<=1,w<<=1,1<=(_*=2)&&(x++,_--),1<=(S*=2)&&(v++,S--),1<=(C*=2)&&(w++,C--)}return E},d.default.prototype.noiseDetail=function(p,h){0<p&&(c=p),0<h&&(f=h)},d.default.prototype.noiseSeed=function(p){g=4294967296;var h,m,g,y={setSeed:function(x){m=h=(x??Math.random()*g)>>>0},getSeed:function(){return h},rand:function(){return(m=(1664525*m+1013904223)%g)/g}};y.setSeed(p),l=new Array(4096);for(var b=0;b<4096;b++)l[b]=y.rand()},d.default);s.default=d},{"../core/main":280}],313:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}function d(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}u.default.Vector=function(){function h(){var w=this,b=h;if(!(w instanceof b))throw new TypeError("Cannot call a class as a function");var x,v,w=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,v=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,v=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=v,this.z=w}var m,g,y;return m=h,y=[{key:"fromAngle",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new u.default.Vector(x*Math.cos(b),x*Math.sin(b),0)}},{key:"fromAngles",value:function(C,_){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,w=Math.cos(_),_=Math.sin(_),S=Math.cos(C),C=Math.sin(C);return new u.default.Vector(v*C*_,-v*S,v*C*w)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*c.TWO_PI)}},{key:"random3D",value:function(){var b=Math.random()*c.TWO_PI,x=2*Math.random()-1,w=Math.sqrt(1-x*x),v=w*Math.cos(b),w=w*Math.sin(b);return new u.default.Vector(v,w,x)}},{key:"copy",value:function(b){return b.copy(b)}},{key:"add",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),S.add(_),S}},{key:"rem",value:function(b,x){if(b instanceof u.default.Vector&&x instanceof u.default.Vector)return(b=b.copy()).rem(x),b}},{key:"sub",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),S.sub(_),S}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),S.mult(_),S}},{key:"rotate",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length===2?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),S.set(w)),S.rotate(_),S}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return S?S.set(w):(S=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),S.div(_),S}},{key:"dot",value:function(b,x){return b.dot(x)}},{key:"cross",value:function(b,x){return b.cross(x)}},{key:"dist",value:function(b,x){return b.dist(x)}},{key:"lerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2],C=x[3];return C?C.set(w):(C=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(_,S),C}},{key:"slerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2],C=x[3];return C?C.set(w):(C=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(_,S),C}},{key:"mag",value:function(b){return b.mag()}},{key:"magSq",value:function(b){return b.magSq()}},{key:"normalize",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1];return x.length<2?_=w.copy():(_ instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),_.set(w)),_.normalize()}},{key:"limit",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length<3?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),S.set(w)),S.limit(_)}},{key:"setMag",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length<3?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),S.set(w)),S.setMag(_)}},{key:"heading",value:function(b){return b.heading()}},{key:"angleBetween",value:function(b,x){return b.angleBetween(x)}},{key:"reflect",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];return x.length<3?S=w.copy():(S instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),S.set(w)),S.reflect(_)}},{key:"array",value:function(b){return b.array()}},{key:"equals",value:function(b,x){var v;return b instanceof u.default.Vector?v=b:Array.isArray(b)?v=new u.default.Vector().set(b):u.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),v.equals(x)}}],(g=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(b,x,v){return b instanceof u.default.Vector?(this.x=b.x||0,this.y=b.y||0,this.z=b.z||0):Array.isArray(b)?(this.x=b[0]||0,this.y=b[1]||0,this.z=b[2]||0):(this.x=b||0,this.y=x||0,this.z=v||0),this}},{key:"copy",value:function(){return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new u.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(b,x,v){return b instanceof u.default.Vector?(this.x+=b.x||0,this.y+=b.y||0,this.z+=b.z||0):Array.isArray(b)?(this.x+=b[0]||0,this.y+=b[1]||0,this.z+=b[2]||0):(this.x+=b||0,this.y+=x||0,this.z+=v||0),this}},{key:"calculateRemainder2D",value:function(b,x){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(b,x,v){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),v!==0&&(this.z=this.z%v),this}},{key:"rem",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_,S,C=x[0],E=x[1],T=x[2];if(C instanceof u.default.Vector){if([C.x,C.y,C.z].every(Number.isFinite))return w=parseFloat(C.x),_=parseFloat(C.y),S=parseFloat(C.z),this.calculateRemainder3D(w,_,S)}else if(Array.isArray(C)){if(C.every(Number.isFinite))return C.length===2?this.calculateRemainder2D(C[0],C[1]):C.length===3?this.calculateRemainder3D(C[0],C[1],C[2]):void 0}else if(x.length===1){if(Number.isFinite(C)&&C!==0)return this.x=this.x%C,this.y=this.y%C,this.z=this.z%C,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(C,E)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(C,E,T)}},{key:"sub",value:function(b,x,v){return b instanceof u.default.Vector?(this.x-=b.x||0,this.y-=b.y||0,this.z-=b.z||0):Array.isArray(b)?(this.x-=b[0]||0,this.y-=b[1]||0,this.z-=b[2]||0):(this.x-=b||0,this.y-=x||0,this.z-=v||0),this}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_=x[0],S=x[1],C=x[2];return _ instanceof u.default.Vector?Number.isFinite(_.x)&&Number.isFinite(_.y)&&Number.isFinite(_.z)&&typeof _.x=="number"&&typeof _.y=="number"&&typeof _.z=="number"?(this.x*=_.x,this.y*=_.y,this.z*=_.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(_)?_.every(function(E){return Number.isFinite(E)})&&_.every(function(E){return typeof E=="number"})?_.length===1?(this.x*=_[0],this.y*=_[0],this.z*=_[0]):_.length===2?(this.x*=_[0],this.y*=_[1]):_.length===3&&(this.x*=_[0],this.y*=_[1],this.z*=_[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(w=x).every(function(E){return Number.isFinite(E)})&&w.every(function(E){return typeof E=="number"})?(x.length===1&&(this.x*=_,this.y*=_,this.z*=_),x.length===2&&(this.x*=_,this.y*=S),x.length===3&&(this.x*=_,this.y*=S,this.z*=C)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],S=x[2];if(w instanceof u.default.Vector)if(Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"){var C=w.z===0&&this.z===0;if(w.x===0||w.y===0||!C&&w.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=w.x,this.y/=w.y,C||(this.z/=w.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(w))if(w.every(Number.isFinite)&&w.every(function(E){return typeof E=="number"})){if(w.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;w.length===1?(this.x/=w[0],this.y/=w[0],this.z/=w[0]):w.length===2?(this.x/=w[0],this.y/=w[1]):w.length===3&&(this.x/=w[0],this.y/=w[1],this.z/=w[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(E){return typeof E=="number"})){if(x.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=w,this.y/=w,this.z/=w),x.length===2&&(this.x/=w,this.y/=_),x.length===3&&(this.x/=w,this.y/=_,this.z/=S)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var b=this.x,x=this.y,v=this.z;return b*b+x*x+v*v}},{key:"dot",value:function(b,x,v){return b instanceof u.default.Vector?this.dot(b.x,b.y,b.z):this.x*(b||0)+this.y*(x||0)+this.z*(v||0)}},{key:"cross",value:function(w){var x=this.y*w.z-this.z*w.y,v=this.z*w.x-this.x*w.z,w=this.x*w.y-this.y*w.x;return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,x,v,w):new u.default.Vector(x,v,w)}},{key:"dist",value:function(b){return b.copy().sub(this).mag()}},{key:"normalize",value:function(){var b=this.mag();return b!==0&&this.mult(1/b),this}},{key:"limit",value:function(b){var x=this.magSq();return b*b<x&&this.div(Math.sqrt(x)).mult(b),this}},{key:"setMag",value:function(b){return this.normalize().mult(b)}},{key:"heading",value:function(){var b=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(b):b}},{key:"setHeading",value:function(b){this.isPInst&&(b=this._toRadians(b));var x=this.mag();return this.x=x*Math.cos(b),this.y=x*Math.sin(b),this}},{key:"rotate",value:function(x){var x=this.heading()+x,v=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*v,this.y=Math.sin(x)*v,this}},{key:"angleBetween",value:function(b){var x;return this.magSq()*b.magSq()==0?NaN:(x=this.cross(b),b=Math.atan2(x.mag(),this.dot(b))*Math.sign(x.z||1),this.isPInst?this._fromRadians(b):b)}},{key:"lerp",value:function(b,x,v,w){return b instanceof u.default.Vector?this.lerp(b.x,b.y,b.z,x):(this.x+=(b-this.x)*w||0,this.y+=(x-this.y)*w||0,this.z+=(v-this.z)*w||0,this)}},{key:"slerp",value:function(b,x){if(x!==0){if(x===1)return this.set(b);var v=this.mag(),w=b.mag();if(v*w==0)this.mult(1-x).add(b.x*x,b.y*x,b.z*x);else{var _=this.cross(b),S=_.mag(),C=Math.atan2(S,this.dot(b));if(0<S)_.x/=S,_.y/=S,_.z/=S;else{if(C<.5*Math.PI)return this.mult(1-x).add(b.x*x,b.y*x,b.z*x),this;this.z===0&&b.z===0?_.set(0,0,1):this.x!==0?_.set(this.y,-this.x,0).normalize():_.set(1,0,0)}S=_.cross(this),b=1-x+x*w/v,_=b*Math.cos(x*C),w=b*Math.sin(x*C),this.x=this.x*_+S.x*w,this.y=this.y*_+S.y*w,this.z=this.z*_+S.z*w}}return this}},{key:"reflect",value:function(b){return b.normalize(),this.sub(b.mult(2*this.dot(b)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(S,x,v){var w,_,S=S instanceof u.default.Vector?(w=S.x||0,_=S.y||0,S.z||0):Array.isArray(S)?(w=S[0]||0,_=S[1]||0,S[2]||0):(w=S||0,_=x||0,v||0);return this.x===w&&this.y===_&&this.z===S}}])&&d(m.prototype,g),y&&d(m,y),h}();var p=u.default.Vector;s.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(f,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f},l="_lcg_random_state",u=4294967296,c=0,f=(a.default.prototype._lcg=function(d){return this[d]=(1664525*this[d]+1013904223)%u,this[d]/u},a.default.prototype._lcgSetSeed=function(d,p){this[d]=(p??Math.random()*u)>>>0},a.default.prototype.randomSeed=function(d){this._lcgSetSeed(l,d),this._gaussian_previous=!1},a.default.prototype.random=function(d,p){var h,m;return a.default._validateParameters("random",arguments),h=this[l]!=null?this._lcg(l):Math.random(),d===void 0?h:p===void 0?Array.isArray(d)?d[Math.floor(h*d.length)]:h*d:(p<d&&(m=d,d=p,p=m),h*(p-d)+d)},a.default.prototype.randomGaussian=function(d){var p,h,m,g,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)p=c,this._gaussian_previous=!1;else{for(;1<=(g=(h=this.random(2)-1)*h+(m=this.random(2)-1)*m););p=h*(g=Math.sqrt(-2*Math.log(g)/g)),c=m*g,this._gaussian_previous=!0}return p*y+(d||0)},a.default);s.default=f},{"../core/main":280}],315:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype._angleMode=c.RADIANS,u.default.prototype.acos=function(p){return this._fromRadians(Math.acos(p))},u.default.prototype.asin=function(p){return this._fromRadians(Math.asin(p))},u.default.prototype.atan=function(p){return this._fromRadians(Math.atan(p))},u.default.prototype.atan2=function(p,h){return this._fromRadians(Math.atan2(p,h))},u.default.prototype.cos=function(p){return Math.cos(this._toRadians(p))},u.default.prototype.sin=function(p){return Math.sin(this._toRadians(p))},u.default.prototype.tan=function(p){return Math.tan(this._toRadians(p))},u.default.prototype.degrees=function(p){return p*c.RAD_TO_DEG},u.default.prototype.radians=function(p){return p*c.DEG_TO_RAD},u.default.prototype.angleMode=function(p){if(u.default._validateParameters("angleMode",arguments),p===void 0)return this._angleMode;p!==c.DEGREES&&p!==c.RADIANS||p!==this._angleMode&&(p===c.RADIANS?(this._setProperty("pRotationX",this.pRotationX*c.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*c.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*c.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*c.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*c.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*c.RAD_TO_DEG)),this._angleMode=p)},u.default.prototype._toRadians=function(p){return this._angleMode===c.DEGREES?p*c.DEG_TO_RAD:p},u.default.prototype._toDegrees=function(p){return this._angleMode===c.RADIANS?p*c.RAD_TO_DEG:p},u.default.prototype._fromRadians=function(p){return this._angleMode===c.DEGREES?p*c.RAD_TO_DEG:p},u.default.prototype._fromDegrees=function(p){return this._angleMode===c.RADIANS?p*c.DEG_TO_RAD:p};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(o,i,s){"use strict";o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.textAlign=function(l,u){var c;return a.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},a.default.prototype.textLeading=function(l){var u;return a.default._validateParameters("textLeading",arguments),(u=this._renderer).textLeading.apply(u,arguments)},a.default.prototype.textSize=function(l){var u;return a.default._validateParameters("textSize",arguments),(u=this._renderer).textSize.apply(u,arguments)},a.default.prototype.textStyle=function(l){var u;return a.default._validateParameters("textStyle",arguments),(u=this._renderer).textStyle.apply(u,arguments)},a.default.prototype.textWidth=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];if(u[0]+="",a.default._validateParameters("textWidth",u),u[0].length===0)return 0;for(var f=u[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),d=[],p=0;p<f.length;p++)d.push(this._renderer.textWidth(f[p]));return Math.max.apply(Math,d)},a.default.prototype.textAscent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textAscent",u),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textDescent",u),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(l){return a.default._validateParameters("textWrap",[l]),this._renderer.textWrap(l)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=p(o("../core/constants")),f=p(o("opentype.js"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=d();if(g&&g.has(m))return g.get(m);var y,b,x={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&((b=v?Object.getOwnPropertyDescriptor(m,y):null)&&(b.get||b.set)?Object.defineProperty(x,y,b):x[y]=m[y]);return x.default=m,g&&g.set(m,x),x}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadFont=function(m,g,y){u.default._validateParameters("loadFont",arguments);var b=new u.default.Font(this),x=this;return f.load(m,function(_,S){if(_)return u.default._friendlyFileLoadError(4,m),y!==void 0?y(_):void console.error(_,m);b.font=S,g!==void 0&&g(b),x._decrementPreload();var _=m.split("\\").pop().split("/").pop(),S=_.lastIndexOf("."),C=S<1?null:_.slice(S+1);["ttf","otf","woff","woff2"].includes(C)&&(C=_.slice(0,S!==-1?S:0),(_=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(C,`;
src: url(`).concat(m,`);
}
`))),document.head.appendChild(_))}),b},u.default.prototype.text=function(m,g,y,b,x){var v;return u.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(v=this._renderer).text.apply(v,arguments):this},u.default.prototype.textFont=function(m,g){if(u.default._validateParameters("textFont",arguments),arguments.length){if(m)return this._renderer._setProperty("_textFont",m),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var h=u.default;s.default=h},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(o,i,s){"use strict";function a(E){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(E)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../core/main"))&&l.__esModule?l:{default:l},u=function(E){if(E&&E.__esModule)return E;if(E===null||f(E)!=="object"&&typeof E!="function")return{default:E};var T=c();if(T&&T.has(E))return T.get(E);var I,k={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(I in E){var D;Object.prototype.hasOwnProperty.call(E,I)&&((D=F?Object.getOwnPropertyDescriptor(E,I):null)&&(D.get||D.set)?Object.defineProperty(k,I,D):k[I]=E[I])}return k.default=E,T&&T.set(E,k),k}(o("../core/constants"));function c(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,c=function(){return E},E)}function f(E){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(T){return a(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":a(T)})(E)}function d(E,T){for(var I=0;I<T.length;I++){var k=T[I];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}function p(E,T){var I=E.length;return E[T<0?T%I+I:T%I]}function h(E,T,I,k){var F,D,L;return k?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),D=h.tmpPoint1,L=h.tmpPoint2,D.x=T.x-E.x,D.y=T.y-E.y,L.x=I.x-T.x,L.y=I.y-T.y,F=D.x*L.x+D.y*L.y,D=Math.sqrt(D.x*D.x+D.y*D.y),L=Math.sqrt(L.x*L.x+L.y*L.y),Math.acos(F/(D*L))<k):(T[0]-E[0])*(I[1]-E[1])-(I[0]-E[0])*(T[1]-E[1])==0}function m(M,q,z,ee,ae,D,L,P,R){var V=1-R,U=Math.pow(V,3),H=Math.pow(V,2),$=R*R,X=$*R,G=U*M+3*H*R*z+3*V*R*R*ae+X*L,U=U*q+3*H*R*ee+3*V*R*R*D+X*P,H=M+2*R*(z-M)+$*(ae-2*z+M),X=q+2*R*(ee-q)+$*(D-2*ee+q),fe=z+2*R*(ae-z)+$*(L-2*ae+z),$=ee+2*R*(D-ee)+$*(P-2*D+ee),M=V*M+R*z,z=V*q+R*ee,q=V*ae+R*L,ee=V*D+R*P,ae=90-180*Math.atan2(H-fe,X-$)/Math.PI;return(fe<H||X<$)&&(ae+=180),{x:G,y:U,m:{x:H,y:X},n:{x:fe,y:$},start:{x:M,y:z},end:{x:q,y:ee},alpha:ae}}function g(E,T,I,k,F,D,L,P,R){return R==null?S(E,T,I,k,F,D,L,P):m(E,T,I,k,F,D,L,P,function(V,G,U,H,X,fe,$,M,z){if(!(z<0||S(V,G,U,H,X,fe,$,M)<z)){var q,ee=.5,ae=1-ee;for(q=S(V,G,U,H,X,fe,$,M,ae);.01<Math.abs(q-z);)q=S(V,G,U,H,X,fe,$,M,ae+=(q<z?1:-1)*(ee/=2));return ae}}(E,T,I,k,F,D,L,P,R))}function y(E,T,I){for(var k,F,D,L,P,R=0,V=0,G=(E=function(U,H){function X(Te,Fe,$e){var at,We;if(!Te)return["C",Fe.x,Fe.y,Fe.x,Fe.y,Fe.x,Fe.y];switch(Te[0]in{T:1,Q:1}||(Fe.qx=Fe.qy=null),Te[0]){case"M":Fe.X=Te[1],Fe.Y=Te[2];break;case"A":Te=["C"].concat(x.apply(0,[Fe.x,Fe.y].concat(Te.slice(1))));break;case"S":We=$e==="C"||$e==="S"?(at=2*Fe.x-Fe.bx,2*Fe.y-Fe.by):(at=Fe.x,Fe.y),Te=["C",at,We].concat(Te.slice(1));break;case"T":$e==="Q"||$e==="T"?(Fe.qx=2*Fe.x-Fe.qx,Fe.qy=2*Fe.y-Fe.qy):(Fe.qx=Fe.x,Fe.qy=Fe.y),Te=["C"].concat(_(Fe.x,Fe.y,Fe.qx,Fe.qy,Te[1],Te[2]));break;case"Q":Fe.qx=Te[1],Fe.qy=Te[2],Te=["C"].concat(_(Fe.x,Fe.y,Te[1],Te[2],Te[3],Te[4]));break;case"L":Te=["C"].concat(w(Fe.x,Fe.y,Te[1],Te[2]));break;case"H":Te=["C"].concat(w(Fe.x,Fe.y,Te[1],Fe.y));break;case"V":Te=["C"].concat(w(Fe.x,Fe.y,Fe.x,Te[1]));break;case"Z":Te=["C"].concat(w(Fe.x,Fe.y,Fe.X,Fe.Y))}return Te}function fe(Te,Fe){if(7<Te[Fe].length){Te[Fe].shift();for(var $e=Te[Fe];$e.length;)Q[Fe]="A",q&&(le[Fe]="A"),Te.splice(Fe++,0,["C"].concat($e.splice(0,6)));Te.splice(Fe,1),M=Math.max(z.length,q&&q.length||0)}}function $(Te,Fe,$e,at,We){Te&&Fe&&Te[We][0]==="M"&&Fe[We][0]!=="M"&&(Fe.splice(We,0,["M",at.x,at.y]),$e.bx=0,$e.by=0,$e.x=Te[We][1],$e.y=Te[We][2],M=Math.max(z.length,q&&q.length||0))}var M,z=b(U),q=H&&b(H),ee={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],le=[],ie="",K="";M=Math.max(z.length,q&&q.length||0);for(var ge=0;ge<M;ge++){(ie=z[ge]?z[ge][0]:ie)!=="C"&&(Q[ge]=ie,ge&&(K=Q[ge-1])),z[ge]=X(z[ge],ee,K),Q[ge]!=="A"&&ie==="C"&&(Q[ge]="C"),fe(z,ge),q&&((ie=q[ge]?q[ge][0]:ie)!=="C"&&(le[ge]=ie,ge&&(K=le[ge-1])),q[ge]=X(q[ge],ae,K),le[ge]!=="A"&&ie==="C"&&(le[ge]="C"),fe(q,ge)),$(z,q,ee,ae,ge),$(q,z,ae,ee,ge);var ne=z[ge],ye=q&&q[ge],xe=ne.length,De=q&&ye.length;ee.x=ne[xe-2],ee.y=ne[xe-1],ee.bx=parseFloat(ne[xe-4])||ee.x,ee.by=parseFloat(ne[xe-3])||ee.y,ae.bx=q&&(parseFloat(ye[De-4])||ae.x),ae.by=q&&(parseFloat(ye[De-3])||ae.y),ae.x=q&&ye[De-2],ae.y=q&&ye[De-1]}return q?[z,q]:z}(E)).length;V<G;V++){if((D=E[V])[0]==="M")k=+D[1],F=+D[2];else{if(T<R+(L=g(k,F,D[1],D[2],D[3],D[4],D[5],D[6]))&&!I)return{x:(P=g(k,F,D[1],D[2],D[3],D[4],D[5],D[6],T-R)).x,y:P.y,alpha:P.alpha};R+=L,k=+D[5],F=+D[6]}D.shift()}return P=(P=I?R:m(k,F,D[0],D[1],D[2],D[3],D[4],D[5],1)).alpha?{x:P.x,y:P.y,alpha:P.alpha}:P}function b(E){var T=[],I=0,k=0,F=0,D=0,L=0;if(E){E[0][0]==="M"&&(F=I=+E[0][1],D=k=+E[0][2],L++,T[0]=["M",I,k]);for(var P,R,V=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",G=L,U=E.length;G<U;G++){if(T.push(P=[]),(R=E[G])[0]!==R[0].toUpperCase())switch(P[0]=R[0].toUpperCase(),P[0]){case"A":P[1]=R[1],P[2]=R[2],P[3]=R[3],P[4]=R[4],P[5]=R[5],P[6]=+(R[6]+I),P[7]=+(R[7]+k);break;case"V":P[1]=+R[1]+k;break;case"H":P[1]=+R[1]+I;break;case"R":for(var H,X=2,fe=(H=[I,k].concat(R.slice(1))).length;X<fe;X++)H[X]=+H[X]+I,H[++X]=+H[X]+k;T.pop(),T=T.concat(v(H,V));break;case"M":F=+R[1]+I,D=+R[2]+k;break;default:for(var $=1,M=R.length;$<M;$++)P[$]=+R[$]+($%2?I:k)}else if(R[0]==="R")H=[I,k].concat(R.slice(1)),T.pop(),T=T.concat(v(H,V)),P=["R"].concat(R.slice(-2));else for(var z=0,q=R.length;z<q;z++)P[z]=R[z];switch(P[0]){case"Z":I=F,k=D;break;case"H":I=P[1];break;case"V":k=P[1];break;case"M":F=P[P.length-2],D=P[P.length-1];break;default:I=P[P.length-2],k=P[P.length-1]}}}return T}function x(E,T,I,k,q,Q,ee,P,R,V){function G(De,Te,Fe){return{x:De*Math.cos(Fe)-Te*Math.sin(Fe),y:De*Math.sin(Fe)+Te*Math.cos(Fe)}}var U,M=Math.PI,z=120*M/180,H=M/180*(+q||0),X=[],fe=(V?(ge=V[0],U=V[1],ie=V[2],K=V[3]):(E=(ae=G(E,T,-H)).x,T=ae.y,1<(fe=($=(E-(P=(ae=G(P,R,-H)).x))/2)*$/(I*I)+(ae=(T-(R=ae.y))/2)*ae/(k*k))&&(I*=fe=Math.sqrt(fe),k*=fe),fe=I*I,le=k*k,ie=(Q=(Q===ee?-1:1)*Math.sqrt(Math.abs((fe*le-fe*ae*ae-le*$*$)/(fe*ae*ae+le*$*$))))*I*ae/k+(E+P)/2,K=Q*-k*$/I+(T+R)/2,ge=Math.asin(((T-K)/k).toFixed(9)),U=Math.asin(((R-K)/k).toFixed(9)),(ge=E<ie?M-ge:ge)<0&&(ge=2*M+ge),(U=P<ie?M-U:U)<0&&(U=2*M+U),ee&&U<ge&&(ge-=2*M),!ee&&ge<U&&(U-=2*M)),U-ge),$=(Math.abs(fe)>z&&(le=U,ae=P,Q=R,U=ge+z*(ee&&ge<U?1:-1),X=x(P=ie+I*Math.cos(U),R=K+k*Math.sin(U),I,k,q,0,ee,ae,Q,[U,le,ie,K])),fe=U-ge,Math.cos(ge)),M=Math.sin(ge),z=Math.cos(U),q=Math.sin(U),ee=Math.tan(fe/4),ae=4/3*I*ee,Q=4/3*k*ee,le=[E,T],ie=[E+ae*M,T-Q*$],K=[P+ae*q,R-Q*z],ge=[P,R];if(ie[0]=2*le[0]-ie[0],ie[1]=2*le[1]-ie[1],V)return[ie,K,ge].concat(X);for(var ne=[],ye=0,xe=(X=[ie,K,ge].concat(X).join().split(",")).length;ye<xe;ye++)ne[ye]=ye%2?G(X[ye-1],X[ye],H).y:G(X[ye],X[ye+1],H).x;return ne}function v(E,T){for(var I=[],k=0,F=E.length;k<F-2*!T;k+=2){var D=[{x:+E[k-2],y:+E[k-1]},{x:+E[k],y:+E[k+1]},{x:+E[k+2],y:+E[k+3]},{x:+E[k+4],y:+E[k+5]}];T?k?F-4===k?D[3]={x:+E[0],y:+E[1]}:F-2===k&&(D[2]={x:+E[0],y:+E[1]},D[3]={x:+E[2],y:+E[3]}):D[0]={x:+E[F-2],y:+E[F-1]}:F-4===k?D[3]=D[2]:k||(D[0]={x:+E[k],y:+E[k+1]}),I.push(["C",(-D[0].x+6*D[1].x+D[2].x)/6,(-D[0].y+6*D[1].y+D[2].y)/6,(D[1].x+6*D[2].x-D[3].x)/6,(D[1].y+6*D[2].y-D[3].y)/6,D[2].x,D[2].y])}return I}function w(E,T,I,k){return[E,T,I,k,I,k]}function _(E,T,I,k,F,D){return[1/3*E+2/3*I,1/3*T+2/3*k,1/3*F+2/3*I,1/3*D+2/3*k,F,D]}function S(E,T,I,k,F,D,L,P,R){for(var V=(R=1<(R=R??1)?1:R<0?0:R)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],U=0,H=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],X=0;X<12;X++){var $=V*G[X]+V,fe=C($,E,I,F,L),$=C($,T,k,D,P);U+=H[X]*Math.sqrt(fe*fe+$*$)}return V*U}function C(E,T,I,k,F){return E*(E*(-3*T+9*I-9*k+3*F)+6*T-12*I+6*k)-3*T+3*I}l.default.Font=function(){function E(F){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.parent=F,this.cache={},this.font=void 0}var T,I,k;return T=E,(I=[{key:"textBounds",value:function(F){var D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,P=4<arguments.length?arguments[4]:void 0,R=P&&P.renderer&&P.renderer._pInst||this.parent,V=R._renderer.drawingContext,G=(V.textAlign||u.LEFT,V.textBaseline||u.BASELINE,G||R._renderer._textSize);if(!Q){for(var U=[],H=[],X=[],fe=(X[0]=[],[]),$=this._scale(G),M=R._renderer.textLeading(),z=0,q=(this.font.forEachGlyph(F,D,L,G,P,function(K,ge,ne,ye){var xe=K.getMetrics();K.index===0?X[z+=1]=[]:(X[z].push(ge+xe.xMin*$),X[z].push(ge+xe.xMax*$),fe.push(ne+z*M+-xe.yMin*$),fe.push(ne+z*M+-xe.yMax*$))}),0<X[z].length&&(U[z]=Math.min.apply(null,X[z]),H[z]=Math.max.apply(null,X[z])),0),ee=0;ee<=z;ee++){U[ee]=Math.min.apply(null,X[ee]),H[ee]=Math.max.apply(null,X[ee]);var ae=H[ee]-U[ee];q<ae&&(q=ae)}var V=Math.min.apply(null,U),Q={x:V,y:L=Math.min.apply(null,fe),h:Math.max.apply(null,fe)-L,w:q,advance:V-D},G=this._handleAlignment(R._renderer,F,Q.x,Q.y,Q.w+Q.advance);Q.x=G.x,Q.y=G.y}return Q}},{key:"textToPoints",value:function(F,D,L,P,R){var V=D,G=[],U=F.split(/\r?\n|\r|\n/g);P=P||this.parent._renderer._textSize;for(var H,X,fe,$=0;$<U.length;$++){var M=0;D=V;for(var z=(z=U[$]).replace("	","  "),q=this._getGlyphs(z),ee=0;ee<q.length;ee++){if(X=z,!((fe=q)[H=ee].name&&fe[H].name==="space"||X.length===fe.length&&X[H]===" "))for(var ae=function(K){for(var ge,ne=[],ye=0;ye<K.length;ye++)K[ye].type==="M"&&(ge&&ne.push(ge),ge=[]),ge.push(function(xe){var De=[xe.type];return xe.type==="M"||xe.type==="L"?De.push(xe.x,xe.y):xe.type==="C"?De.push(xe.x1,xe.y1,xe.x2,xe.y2,xe.x,xe.y):xe.type==="Q"&&De.push(xe.x1,xe.y1,xe.x,xe.y),De}(K[ye]));return ne.push(ge),ne}(q[ee].getPath(D,L,P).commands),Q=0;Q<ae.length;Q++)for(var le=function(K,ge){for(var ge=function(Fe,$e){if(f(Fe)!=="object")Fe=$e;else for(var at in $e)Fe[at]===void 0&&(Fe[at]=$e[at]);return Fe}(ge,{sampleFactor:.1,simplifyThreshold:0}),ne=y(K,0,1),ye=ne/(ne*ge.sampleFactor),xe=[],De=0;De<ne;De+=ye)xe.push(y(K,De));return ge.simplifyThreshold&&function(Te){for(var Fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,$e=0,at=Te.length-1;3<Te.length&&0<=at;--at)h(p(Te,at-1),p(Te,at),p(Te,at+1),Fe)&&(Te.splice(at%Te.length,1),$e++)}(xe,ge.simplifyThreshold),xe}(ae[Q],R),ie=0;ie<le.length;ie++)le[ie].x+=M,G.push(le[ie]);M+=q[ee].advanceWidth*this._scale(P)}L+=this.parent._renderer._textLeading}return G}},{key:"_getGlyphs",value:function(F){return this.font.stringToGlyphs(F)}},{key:"_getPath",value:function(F,V,L,P){var R=(P&&P.renderer&&P.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(R,F,V,L);return this.font.getPath(F,V.x,V.y,R._textSize,P)}},{key:"_getPathData",value:function(F,D,L,P){var R=3;return typeof F=="string"&&2<arguments.length?F=this._getPath(F,D,L,P):f(D)==="object"&&(P=D),P&&typeof P.decimals=="number"&&(R=P.decimals),F.toPathData(R)}},{key:"_getSVG",value:function(F,D,L,P){var R=3;return typeof F=="string"&&2<arguments.length?F=this._getPath(F,D,L,P):f(D)==="object"&&(P=D),P&&(typeof P.decimals=="number"&&(R=P.decimals),typeof P.strokeWidth=="number"&&(F.strokeWidth=P.strokeWidth),P.fill!==void 0&&(F.fill=P.fill),P.stroke!==void 0&&(F.stroke=P.stroke)),F.toSVG(R)}},{key:"_renderPath",value:function(G,H,X,P){var R=P&&P.renderer||this.parent._renderer,V=R.drawingContext,G=(f(G)==="object"&&G.commands?G:this._getPath(G,H,X,P)).commands,U=(V.beginPath(),!0),H=!1,X=void 0;try{for(var fe,$=G[Symbol.iterator]();!(U=(fe=$.next()).done);U=!0){var M=fe.value;M.type==="M"?V.moveTo(M.x,M.y):M.type==="L"?V.lineTo(M.x,M.y):M.type==="C"?V.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?V.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&V.closePath()}}catch(z){H=!0,X=z}finally{try{U||$.return==null||$.return()}finally{if(H)throw X}}return R._doStroke&&R._strokeSet&&!R._clipping&&V.stroke(),R._doFill&&!R._clipping&&(R._fillSet||R._setFill(u._DEFAULT_TEXT_FILL),V.fill()),this}},{key:"_textWidth",value:function(F,D){return this.font.getAdvanceWidth(F,D)}},{key:"_textAscent",value:function(F){return this.font.ascender*this._scale(F)}},{key:"_textDescent",value:function(F){return-this.font.descender*this._scale(F)}},{key:"_scale",value:function(F){return 1/this.font.unitsPerEm*(F||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(F,D,L,P,R){var V=F._textSize;switch(R===void 0&&(R=this._textWidth(D,V)),F._textAlign){case u.CENTER:L-=R/2;break;case u.RIGHT:L-=R}switch(F._textBaseline){case u.TOP:P+=this._textAscent(V);break;case u.CENTER:P+=this._textAscent(V)/2;break;case u.BOTTOM:P-=this._textDescent(V)}return{x:L,y:P}}}])&&d(T.prototype,I),k&&d(T,k),E}(),o=l.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.append=function(a,l){return a.push(l),a},o.default.prototype.arrayCopy=function(a,l,u,c,f){var d,p;a=f!==void 0?(p=Math.min(f,a.length),d=c,a.slice(l,p+l)):(p=u!==void 0?(p=u,Math.min(p,a.length)):a.length,u=l,a.slice(d=0,p)),Array.prototype.splice.apply(u,[d,p].concat(a))},o.default.prototype.concat=function(a,l){return a.concat(l)},o.default.prototype.reverse=function(a){return a.reverse()},o.default.prototype.shorten=function(a){return a.pop(),a},o.default.prototype.shuffle=function(a,l){for(var u,c,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),d=(a=l||f?a:a.slice()).length;1<d;)u=this.random(0,1)*d|0,c=a[--d],a[d]=a[u],a[u]=c;return a},o.default.prototype.sort=function(a,c){var u=c?a.slice(0,Math.min(c,a.length)):a,c=c?a.slice(Math.min(c,a.length)):[];return(u=typeof u[0]=="string"?u.sort():u.sort(function(f,d){return f-d})).concat(c)},o.default.prototype.splice=function(a,l,u){return Array.prototype.splice.apply(a,[u,0].concat(l)),a},o.default.prototype.subset=function(a,l,u){return u!==void 0?a.slice(l,l+u):a.slice(l,a.length)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.float=function(l){return l instanceof Array?l.map(parseFloat):parseFloat(l)},a.default.prototype.int=function(l){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return l===1/0||l==="Infinity"?1/0:l===-1/0||l==="-Infinity"?-1/0:typeof l=="string"?parseInt(l,u):typeof l=="number"?0|l:typeof l=="boolean"?l?1:0:l instanceof Array?l.map(function(c){return a.default.prototype.int(c,u)}):void 0},a.default.prototype.str=function(l){return l instanceof Array?l.map(a.default.prototype.str):String(l)},a.default.prototype.boolean=function(l){return typeof l=="number"?l!==0:typeof l=="string"?l.toLowerCase()==="true":typeof l=="boolean"?l:l instanceof Array?l.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(l){return l=a.default.prototype.int(l,10),typeof l=="number"?(l+128)%256-128:l instanceof Array?l.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(l){return typeof l!="number"||isNaN(l)?l instanceof Array?l.map(a.default.prototype.char):typeof l=="string"?a.default.prototype.char(parseInt(l,10)):void 0:String.fromCharCode(l)},a.default.prototype.unchar=function(l){return typeof l=="string"&&l.length===1?l.charCodeAt(0):l instanceof Array?l.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(l,u){if(u=u??8,l instanceof Array)return l.map(function(f){return a.default.prototype.hex(f,u)});if(l===1/0||l===-1/0)return(l===1/0?"F":"0").repeat(u);if(typeof l=="number"){l<0&&(l=4294967295+l+1);for(var c=Number(l).toString(16).toUpperCase();c.length<u;)c="0".concat(c);return c=c.length>=u?c.substring(c.length-u,c.length):c}},a.default.prototype.unhex=function(l){return l instanceof Array?l.map(a.default.prototype.unhex):parseInt("0x".concat(l),16)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(p=o("../core/main"))&&p.__esModule?p:{default:p};function l(h,m){return function(g){if(Array.isArray(g))return g}(h)||function(g,y){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var b=[],x=!0,v=!1,w=void 0;try{for(var _,S=g[Symbol.iterator]();!(x=(_=S.next()).done)&&(b.push(_.value),!y||b.length!==y);x=!0);}catch(C){v=!0,w=C}finally{try{x||S.return==null||S.return()}finally{if(v)throw w}}return b}}(h,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(h,m,g){var b=l(h.toString().split("."),2),y=b[0],b=b[1];return g===void 0?(y=y.padStart(m,"0"),b?y+"."+b:y):(y=(h=l(h.toFixed(g).toString().split("."),2))[0],b=h[1],y=y.padStart(m,"0"),b===void 0?y:y+"."+b)}function c(b,m){var g=(b=b.toString()).indexOf("."),y=g!==-1?b.substring(g):"",b=(b=g!==-1?b.substring(0,g):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(m===0)y="";else if(m!==void 0)if(m>y.length)for(var x=m-(y+=g===-1?".":"").length+1,v=0;v<x;v++)y+="0";else y=y.substring(0,m+1);return b+y}function f(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function d(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),a.default.prototype.join=function(h,m){return a.default._validateParameters("join",arguments),h.join(m)},a.default.prototype.match=function(h,m){return a.default._validateParameters("match",arguments),h.match(m)},a.default.prototype.matchAll=function(h,m){a.default._validateParameters("matchAll",arguments);for(var g=new RegExp(m,"g"),y=g.exec(h),b=[];y!==null;)b.push(y),y=g.exec(h);return b},a.default.prototype.nf=function(h,m,g){return a.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(y){return u(y,m,g)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):u(h,m,g)},a.default.prototype.nfc=function(h,m){return a.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(g){return c(g,m)}):c(h,m)},a.default.prototype.nfp=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("nfp",m);var y=a.default.prototype.nf.apply(this,m);return y instanceof Array?y.map(f):f(y)},a.default.prototype.nfs=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("nfs",m);var y=a.default.prototype.nf.apply(this,m);return y instanceof Array?y.map(d):d(y)},a.default.prototype.split=function(h,m){return a.default._validateParameters("split",arguments),h.split(m)},a.default.prototype.splitTokens=function(h,m){var g,y;return a.default._validateParameters("splitTokens",arguments),y=m!==void 0?(y=/\]/g.exec(m=m),(g=/\[/g.exec(m))&&y?(m=m.slice(0,y.index)+m.slice(y.index+1),g=/\[/g.exec(m),m=m.slice(0,g.index)+m.slice(g.index+1),new RegExp("[\\[".concat(m,"\\]]"),"g")):y?(m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[".concat(m,"\\]]"),"g")):g?(m=m.slice(0,g.index)+m.slice(g.index+1),new RegExp("[".concat(m,"\\[]"),"g")):new RegExp("[".concat(m,"]"),"g")):/\s/g,h.split(y).filter(function(b){return b})},a.default.prototype.trim=function(h){return a.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var p=a.default;s.default=p},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.day=function(){return new Date().getDate()},o.default.prototype.hour=function(){return new Date().getHours()},o.default.prototype.minute=function(){return new Date().getMinutes()},o.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},o.default.prototype.month=function(){return new Date().getMonth()+1},o.default.prototype.second=function(){return new Date().getSeconds()},o.default.prototype.year=function(){return new Date().getFullYear()},o=o.default,s.default=o},{"../core/main":280}],323:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=(o("./p5.Geometry"),function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("../core/constants")));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}u.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},u.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},u.default.prototype.buildGeometry=function(h){return this._renderer.buildGeometry(h)},u.default.prototype.freeGeometry=function(h){this._renderer._freeBuffers(h.gid)},u.default.prototype.plane=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),u.default._validateParameters("plane",arguments),"plane|".concat(y,"|").concat(b));return this._renderer.geometryInHash(x)||((h=new u.default.Geometry(y,b,function(){for(var v,w,_=0;_<=this.detailY;_++)for(var S=_/this.detailY,C=0;C<=this.detailX;C++)v=C/this.detailX,w=new u.default.Vector(v-.5,S-.5,0),this.vertices.push(w),this.uvs.push(v,S)})).computeFaces().computeNormals(),y<=1&&b<=1?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,h)),this._renderer.drawBuffersScaled(x,m,g,1),this},u.default.prototype.box=function(h,m,g,y,b){this._assert3d("box"),u.default._validateParameters("box",arguments),h===void 0&&(h=50),m===void 0&&(m=h),g===void 0&&(g=m);var x,v=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,v=(b===void 0&&(b=v?1:4),"box|".concat(y=y===void 0?v?1:4:y,"|").concat(b));return this._renderer.geometryInHash(v)||((x=new u.default.Geometry(y,b,function(){var w=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(_,S){for(var S=4*S,C=0;C<4;C++){var E=_[C],E=new u.default.Vector((2*(1&E)-1)/2,((2&E)-1)/2,((4&E)/2-1)/2);w.vertices.push(E),w.uvs.push(1&C,(2&C)/2)}w.faces.push([S,1+S,2+S]),w.faces.push([2+S,1+S,3+S])})})).computeNormals(),y<=4&&b<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,x)),this._renderer.drawBuffersScaled(v,h,m,g),this},u.default.prototype.sphere=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),u.default._validateParameters("sphere",arguments),this.ellipsoid(h,h,h,m,g),this};function d(h,m,g,y,b,x,v){h=h<=0?1:h,m=m<0?0:m,g=g<=0?h:g,y=y<3?3:y;for(var w,_,S=(x=x===void 0||x)?-2:0,C=(b=b<1?1:b)+((v=v===void 0?m!==0:v)?2:0),E=Math.atan2(h-m,g),T=Math.sin(E),I=Math.cos(E),k=S;k<=C;++k){var F=k/b,D=g*F,L=void 0,L=k<0?(F=D=0,h):b<k?(D=g,F=1,m):h+(m-h)*F;for(k!==-2&&k!==b+2||(L=0),D-=g/2,w=0;w<y;++w){var P=w/(y-1),V=2*Math.PI*P,R=Math.sin(V),V=Math.cos(V),G=(this.vertices.push(new u.default.Vector(R*L,D,V*L)),void 0),G=k<0?new u.default.Vector(0,-1,0):b<k&&m?new u.default.Vector(0,1,0):new u.default.Vector(R*I,T,V*I);this.vertexNormals.push(G),this.uvs.push(P,F)}}var U=0;if(x){for(_=0;_<y;++_)this.faces.push([U+_,U+y+(_+1)%y,U+y+_]);U+=2*y}for(k=0;k<b;++k){for(w=0;w<y;++w){var H=(w+1)%y;this.faces.push([U+w,U+H,U+y+H]),this.faces.push([U+w,U+y+H,U+y+w])}U+=y}if(v)for(U+=y,w=0;w<y;++w)this.faces.push([U+w,U+(w+1)%y,U+y])}u.default.prototype.cylinder=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],w=(this._assert3d("cylinder"),u.default._validateParameters("cylinder",arguments),"cylinder|".concat(y,"|").concat(b,"|").concat(x,"|").concat(v));return this._renderer.geometryInHash(w)||(h=new u.default.Geometry(y,b),d.call(h,1,1,1,y,b,x,v),y<=24&&b<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,h)),this._renderer.drawBuffersScaled(w,m,g,m),this},u.default.prototype.cone=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=(this._assert3d("cone"),u.default._validateParameters("cone",arguments),"cone|".concat(y,"|").concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||(h=new u.default.Geometry(y,b),d.call(h,1,0,1,y,b,x,!1),y<=24&&b<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,m,g,m),this},u.default.prototype.ellipsoid=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:m,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,v=(this._assert3d("ellipsoid"),u.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||((h=new u.default.Geometry(b,x,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,S=Math.PI*_-Math.PI/2,C=Math.cos(S),E=Math.sin(S),T=0;T<=this.detailX;T++){var I=T/this.detailX,F=2*Math.PI*I,k=Math.cos(F),F=Math.sin(F),F=new u.default.Vector(C*F,E,C*k);this.vertices.push(F),this.vertexNormals.push(F),this.uvs.push(I,_)}})).computeFaces(),b<=24&&x<=24?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,m,g,y),this},u.default.prototype.torus=function(h,v,g,y){if(this._assert3d("torus"),u.default._validateParameters("torus",arguments),h===void 0)h=50;else if(!h)return;if(v===void 0)v=10;else if(!v)return;g===void 0&&(g=24),y===void 0&&(y=16);var b,x=(v/h).toPrecision(4),v="torus|".concat(x,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(v)||((b=new u.default.Geometry(g,y,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,S=2*Math.PI*_,C=Math.cos(S),E=Math.sin(S),T=1+x*C,I=0;I<=this.detailX;I++){var k=I/this.detailX,F=2*Math.PI*k,L=Math.cos(F),F=Math.sin(F),D=new u.default.Vector(T*L,T*F,x*E),L=new u.default.Vector(C*L,C*F,E);this.vertices.push(D),this.vertexNormals.push(L),this.uvs.push(k,_)}})).computeFaces(),g<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,b)),this._renderer.drawBuffersScaled(v,h,h,h),this},u.default.RendererGL.prototype.point=function(h,m){var g=[];return g.push(new u.default.Vector(h,m,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(g,this.immediateMode.buffers.point),this},u.default.RendererGL.prototype.triangle=function(v){var m=v[0],g=v[1],y=v[2],b=v[3],x=v[4],v=v[5],w=(this.geometryInHash("tri")||((w=new u.default.Geometry(1,1,function(){var C=[];C.push(new u.default.Vector(0,0,0)),C.push(new u.default.Vector(1,0,0)),C.push(new u.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var _=Math.sign(m*b-y*g+y*v-x*b+x*g-m*v),S=new u.default.Matrix([y-m,b-g,0,0,x-m,v-g,0,0,0,0,_,0,m,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=S,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},u.default.RendererGL.prototype.ellipse=function(h){this.arc(h[0],h[1],h[2],h[3],0,c.TWO_PI,c.OPEN,h[4])},u.default.RendererGL.prototype.arc=function(){var h,m=arguments.length<=0?void 0:arguments[0],g=arguments.length<=1?void 0:arguments[1],y=arguments.length<=2?void 0:arguments[2],b=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],v=arguments.length<=5?void 0:arguments[5],w=arguments.length<=6?void 0:arguments[6],_=(arguments.length<=7?void 0:arguments[7])||25,S=(Math.abs(v-x)>=c.TWO_PI?"".concat(C="ellipse","|"):"".concat(C="arc","|").concat(x,"|").concat(v,"|").concat(w,"|")).concat(_,"|"),C=(this.geometryInHash(S)||((h=new u.default.Geometry(_,1,function(){if(x.toFixed(10)!==v.toFixed(10)){w!==c.PIE&&w!==void 0||(this.vertices.push(new u.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var E=0;E<=_;E++){var I=(v-x)*(E/_)+x,T=.5+Math.cos(I)/2,I=.5+Math.sin(I)/2;this.vertices.push(new u.default.Vector(T,I,0)),this.uvs.push([T,I]),E<_-1&&(this.faces.push([0,E+1,E+2]),this.edges.push([E+1,E+2]))}switch(w){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case c.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case c.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),_<=50?h._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(C," with more than 50 detail")),this.createBuffers(S,h)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(S)}finally{this.uMVMatrix=C}return this},u.default.RendererGL.prototype.rect=function(h){var m=h[0],g=h[1],y=h[2],b=h[3];if(h[4]===void 0){var w=this._pInst._glAttributes.perPixelLighting,x=h[4]||(w?1:24),v=h[5]||(w?1:16),w="rect|".concat(x,"|").concat(v),_=(this.geometryInHash(w)||((_=new u.default.Geometry(x,v,function(){for(var G=0;G<=this.detailY;G++)for(var U=G/this.detailY,H=0;H<=this.detailX;H++){var X=H/this.detailX,fe=new u.default.Vector(X,U,0);this.vertices.push(fe),this.uvs.push(X,U)}0<x&&0<v&&(this.edges=[[0,x],[x,(x+1)*(v+1)-1],[(x+1)*(v+1)-1,(x+1)*v],[(x+1)*v,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(w,_)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(w)}finally{this.uMVMatrix=_}}else{var w=h[4],_=h[5]===void 0?w:h[5],S=h[6]===void 0?_:h[6],h=h[7]===void 0?S:h[7],F=y,C=b,I=((F+=m)<m&&(I=m,m=F,F=I),(C+=g)<g&&(I=g,g=C,C=I),Math.min((F-m)/2,(C-g)/2)),E=(I<w&&(w=I),I<_&&(_=I),I<S&&(S=I),I<h&&(h=I),m),T=g,I=F,m=C,k=(this.beginShape(),_!==0?(this.vertex(I-_,T),this.quadraticVertex(I,T,I,T+_)):this.vertex(I,T),S!==0?(this.vertex(I,m-S),this.quadraticVertex(I,m,I-S,m)):this.vertex(I,m),h!==0?(this.vertex(E+h,m),this.quadraticVertex(E,m,E,m-h)):this.vertex(E,m),w!==0?(this.vertex(E,T+w),this.quadraticVertex(E,T,E+w,T)):this.vertex(E,T),!(this.immediateMode.geometry.uvs.length=0)),g=!1,F=void 0;try{for(var D,L=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(D=L.next()).done);k=!0){var P=D.value,R=(P.x-E)/y,V=(P.y-T)/b;this.immediateMode.geometry.uvs.push(R,V)}}catch($){g=!0,F=$}finally{try{k||L.return==null||L.return()}finally{if(g)throw F}}this.endShape(c.CLOSE)}return this},u.default.RendererGL.prototype.quad=function(h,m,g,y,b,x,v,w,_,S,C,E){var T=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,I=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(h,"|").concat(m,"|").concat(g,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(v,"|").concat(w,"|").concat(_,"|").concat(S,"|").concat(C,"|").concat(E,"|").concat(T,"|").concat(I);if(!this.geometryInHash(k)){var F=new u.default.Geometry(T,I,function(){for(var H=1/(this.detailX-1),X=1/(this.detailY-1),fe=0;fe<this.detailY;fe++)for(var $=0;$<this.detailX;$++){var M=$*H,z=fe*X;this.vertices.push(new u.default.Vector((1-M)*((1-z)*h+z*S)+M*((1-z)*y+z*v),(1-M)*((1-z)*m+z*C)+M*((1-z)*b+z*w),(1-M)*((1-z)*g+z*E)+M*((1-z)*x+z*_))),this.uvs.push([M,z])}});F.faces=[];for(var D=0;D<I-1;D++)for(var L=0;L<T-1;L++){var P=L+D*T,R=L+1+(D+1)*T,V=L+(D+1)*T;F.faces.push([P,L+1+D*T,R]),F.faces.push([P,R,V])}F.computeNormals();for(var G=[F.edges.length=0,2,3,1],U=0;U<G.length;U++)F.edges.push([G[U],G[(U+1)%G.length]]);F._edgesToVertices(),this.createBuffers(k,F)}return this.drawBuffers(k),this},u.default.RendererGL.prototype.bezier=function(h,m,g,y,b,x,v,w,_,S,C,E){arguments.length===8&&(C=w,S=v,w=x,v=b,b=y,y=g,g=x=_=E=0);var T=this._pInst._bezierDetail||20;this.beginShape();for(var I=0;I<=T;I++){var k=Math.pow(1-I/T,3),F=I/T*3*Math.pow(1-I/T,2),D=3*Math.pow(I/T,2)*(1-I/T),L=Math.pow(I/T,3);this.vertex(h*k+y*F+v*D+S*L,m*k+b*F+w*D+C*L,g*k+x*F+_*D+E*L)}return this.endShape(),this},u.default.RendererGL.prototype.curve=function(h,m,g,y,b,x,v,w,_,S,C,E){arguments.length===8&&(S=v,C=w,v=b,w=y,b=y=g,g=x=_=E=0);var T=this._pInst._curveDetail;this.beginShape();for(var I=0;I<=T;I++){var k=.5*Math.pow(I/T,3),F=.5*Math.pow(I/T,2),D=I/T*.5;this.vertex(k*(3*y-h-3*v+S)+F*(2*h-5*y+4*v-S)+D*(-h+v)+2*y*.5,k*(3*b-m-3*w+C)+F*(2*m-5*b+4*w-C)+D*(-m+w)+2*b*.5,k*(3*x-g-3*_+E)+F*(2*g-5*x+4*_-E)+D*(-g+_)+2*x*.5)}return this.endShape(),this},u.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},u.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var S=1/this._lutBezierDetail,C=0,E=1,T=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableBezier[T]=this._bezierCoefficients(x),E.toFixed(6)===S.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++T,this._lookUpTableBezier[T]=this._bezierCoefficients(x);break}C+=S,E-=S,++T}}for(var I=this._lookUpTableBezier.length,k=[],F=0;F<4;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var D=[];for(F=0;F<4;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[3]=this.curStrokeColor.slice(),_===6){this.isBezier=!0;var v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],L=Math.hypot(v[0]-v[1],w[0]-w[1]),R=Math.hypot(v[1]-v[2],w[1]-w[2]),P=Math.hypot(v[2]-v[3],w[2]-w[3]),R=L+R+P;for(L/=R,P/=R,b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[3][b]*L),k[2].push(k[0][b]*P+k[3][b]*(1-P)),D[1].push(D[0][b]*(1-L)+D[3][b]*L),D[2].push(D[0][b]*P+D[3][b]*(1-P));for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][F]*D[F][b];h+=v[F]*this._lookUpTableBezier[y][F],m+=w[F]*this._lookUpTableBezier[y][F]}this.vertex(h,m)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(_===9){this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var V=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(v[0]-v[1],w[0]-w[1],V[0]-V[1]),R=Math.hypot(v[1]-v[2],w[1]-w[2],V[1]-V[2]),U=Math.hypot(v[2]-v[3],w[2]-w[3],V[2]-V[3]),_=G+R+U;for(G/=_,U/=_,b=0;b<4;b++)k[1].push(k[0][b]*(1-G)+k[3][b]*G),k[2].push(k[0][b]*U+k[3][b]*(1-U)),D[1].push(D[0][b]*(1-G)+D[3][b]*G),D[2].push(D[0][b]*U+D[3][b]*(1-U));for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=g=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][F]*D[F][b];h+=v[F]*this._lookUpTableBezier[y][F],m+=w[F]*this._lookUpTableBezier[y][F],g+=V[F]*this._lookUpTableBezier[y][F]}this.vertex(h,m,g)}this.curFillColor=k[3],this.curStrokeColor=D[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},u.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var S=1/this._lutQuadraticDetail,C=0,E=1,T=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[T]=this._quadraticCoefficients(x),E.toFixed(6)===S.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++T,this._lookUpTableQuadratic[T]=this._quadraticCoefficients(x);break}C+=S,E-=S,++T}}for(var I=this._lookUpTableQuadratic.length,k=[],F=0;F<3;F++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var D=[];for(F=0;F<3;F++)D.push([]);if(D[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),D[2]=this.curStrokeColor.slice(),_===4){this.isQuadratic=!0;var v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],L=Math.hypot(v[0]-v[1],w[0]-w[1]);for(L/=L+Math.hypot(v[1]-v[2],w[1]-w[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[2][b]*L),D[1].push(D[0][b]*(1-L)+D[2][b]*L);for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][F]*D[F][b];h+=v[F]*this._lookUpTableQuadratic[y][F],m+=w[F]*this._lookUpTableQuadratic[y][F]}this.vertex(h,m)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(_===6){this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var P=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],R=Math.hypot(v[0]-v[1],w[0]-w[1],P[0]-P[1]);for(R/=R+Math.hypot(v[1]-v[2],w[1]-w[2],P[1]-P[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-R)+k[2][b]*R),D[1].push(D[0][b]*(1-R)+D[2][b]*R);for(y=0;y<I;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=h=m=g=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][F]*k[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][F]*D[F][b];h+=v[F]*this._lookUpTableQuadratic[y][F],m+=w[F]*this._lookUpTableQuadratic[y][F],g+=P[F]*this._lookUpTableQuadratic[y][F]}this.vertex(h,m,g)}this.curFillColor=k[2],this.curStrokeColor=D[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},u.default.RendererGL.prototype.curveVertex=function(){var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var S=1/this._lutBezierDetail,C=0,E=1,T=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableBezier[T]=this._bezierCoefficients(x),E.toFixed(6)===S.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(C.toFixed(6)),++T,this._lookUpTableBezier[T]=this._bezierCoefficients(x);break}C+=S,E-=S,++T}}var I=this._lookUpTableBezier.length;if(_===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<I;b++)m=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],this.vertex(m,g);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}}else if(_===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),h=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<I;b++)m=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],y=h[0]*this._lookUpTableBezier[b][0]+h[1]*this._lookUpTableBezier[b][1]+h[2]*this._lookUpTableBezier[b][2]+h[3]*this._lookUpTableBezier[b][3],this.vertex(m,g,y);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}},u.default.RendererGL.prototype.image=function(h,E,g,T,b,x,v,w,_){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(h),this._pInst.textureMode(c.NORMAL);var S=0,C=(E<=h.width&&(S=E/h.width),1),E=(E+T<=h.width&&(C=(E+T)/h.width),0),T=(g<=h.height&&(E=g/h.height),1);g+b<=h.height&&(T=(g+b)/h.height),this.beginShape(),this.vertex(x,v,0,S,E),this.vertex(x+w,v,0,C,E),this.vertex(x+w,v+_,0,C,T),this.vertex(x,v+_,0,S,T),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var p=u.default;s.default=p},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(m,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}var h=function(){function m(x){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new u.default.Matrix,x.uMVMatrix=new u.default.Matrix,this.geometry=new u.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(m.nextGeometryId),m.nextGeometryId++,this.hasTransform=!1}var g,y,b;return g=m,(y=[{key:"transformVertices",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uMVMatrix.multiplyPoint(w)}):x}},{key:"transformNormals",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uNMatrix.multiplyVec3(w)}):x}},{key:"addGeometry",value:function(x){for(var v,w=this,_=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(C,E){return C===w.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),S=((v=this.geometry.vertices).push.apply(v,d(this.transformVertices(x.vertices))),(v=this.geometry.vertexNormals).push.apply(v,d(this.transformNormals(x.vertexNormals))),(v=this.geometry.uvs).push.apply(v,d(x.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,d(x.faces.map(function(C){return C.map(function(E){return E+_})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,d(x.edges.map(function(C){return C.map(function(E){return E+_})}))),d(x.vertexColors));S.length<4*x.vertices.length;)S.push.apply(S,d(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,d(S))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(v===c.TRIANGLE_STRIP||v===c.QUAD_STRIP)for(var _=2;_<x.vertices.length;_++)_%2==0?w.push([_,_-1,_-2]):w.push([_,_-2,_-1]);else if(v===c.TRIANGLE_FAN)for(var S=2;S<x.vertices.length;S++)w.push([0,S-1,S]);else for(var C=0;C<x.vertices.length;C+=3)w.push([C,C+1,C+2]);this.addGeometry(Object.assign({},x,{faces:w}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&p(g.prototype,y),b&&p(g,b),m}();h.nextGeometryId=0,s.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=o("../core/main"))&&d.__esModule?d:{default:d},u=function(p){if(p&&p.__esModule)return p;if(p===null||f(p)!=="object"&&typeof p!="function")return{default:p};var h=c();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function c(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,c=function(){return p},p)}function f(p){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}l.default.prototype.orbitControl=function(p,h,m,_){var y=this,b=(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);p===void 0&&(p=1),h===void 0&&(h=p),m===void 0&&(m=1),f(_)!=="object"&&(_={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=_.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,v,w,C=_.freeRotation,_=C!==void 0&&C,S=[],C=(this.touches.forEach(function(L){y._renderer.prevTouches.forEach(function(P){L.id===P.id&&(P={x:L.x,y:L.y,px:P.x,py:P.y},S.push(P))})}),this._renderer.prevTouches=this.touches,0),E=0,T=0,I=0,k=0,F=this.height<this.width?this.height:this.width,D=!1;return 0<S.length?(D=0<S[0].x&&S[0].x<this.width&&0<S[0].y&&S[0].y<this.height,S.length===1?(E=-p*((x=S[0]).x-x.px)/F,T=h*(x.y-x.py)/F):(x=S[0],v=S[1],C=-(Math.hypot(x.x-v.x,x.y-v.y)-Math.hypot(x.px-v.px,x.py-v.py))*m*4e-4,I=.5*(x.x+v.x)-.5*(x.px+v.px),k=.5*(x.y+v.y)-.5*(x.py+v.py)),0<this.touches.length?D&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(D=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*m,C*=.01,this._mouseWheelDeltaY=0,D&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(E=-p*this.movedX/F,T=h*this.movedY/F):this.mouseButton===this.RIGHT&&(I=this.movedX,k=this.movedY*b.yScale),D&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(_?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,E===0&&T===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*E,.6*T),1e-6<this._renderer.rotateVelocity.magSq()?(_?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),I===0&&k===0||!this._renderer.executeRotateAndMove||(x=2*I/this.width,v=2*-k/this.height,this._renderer.moveVelocity.add(.15*x,.15*v)),1e-6<this._renderer.moveVelocity.magSq()?(m=b._getLocalAxes(),p=b.eyeX-b.centerX,h=b.eyeY-b.centerY,F=b.eyeZ-b.centerZ,D=Math.sqrt(p*p+h*h+F*F),C=new l.default.Vector(b.centerX,b.centerY,b.centerZ),C=b.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,T=(E=this._renderer.uPMatrix.mat4)[15]===0?(w=(E[8]+C.x)/E[0]*D,(E[9]+C.y)/E[5]*D):(w=(C.x-E[12])/E[0],(C.y-E[13])/E[5]),b.setPosition(b.eyeX+w*m.x[0]+T*m.y[0],b.eyeY+w*m.x[1]+T*m.y[1],b.eyeZ+w*m.x[2]+T*m.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];l.default._validateParameters("debugMode",h);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);h[0]===u.GRID?this.registerMethod("post",this._grid(h[1],h[2],h[3],h[4],h[5])):h[0]===u.AXES?this.registerMethod("post",this._axesIcon(h[1],h[2],h[3],h[4])):(this.registerMethod("post",this._grid(h[0],h[1],h[2],h[3],h[4])),this.registerMethod("post",this._axesIcon(h[5],h[6],h[7],h[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1)},l.default.prototype._grid=function(p,h,m,g,y){p===void 0&&(p=this.width/2),h===void 0&&(h=Math.round(p/30)<4?4:Math.round(p/30)),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0);var b=p/h,x=p/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var v=0;v<=h;v++)this.beginShape(this.LINES),this.vertex(-x+m,g,v*b-x+y),this.vertex(x+m,g,v*b-x+y),this.endShape();for(var w=0;w<=h;w++)this.beginShape(this.LINES),this.vertex(w*b-x+m,g,-x+y),this.vertex(w*b-x+m,g,x+y),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(p,h,m,g){return p===void 0&&(p=40<this.width/20?this.width/20:40),h===void 0&&(h=-this.width/4),m===void 0&&(m=h),g===void 0&&(g=h),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h+p,m,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h,m+p,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h,m,g+p),this.endShape(),this.pop()}};var d=l.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.ambientLight=function(l,u,c,f){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var d=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(d._array[0],d._array[1],d._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(l,u,c){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},a.default.prototype.directionalLight=function(l,y,g,f,d,p){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),l=l instanceof a.default.Color?l:this.color(l,y,g);var h,m,y=arguments[arguments.length-1],g=typeof y=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=y.x,m=y.y,y.z),y=Math.sqrt(h*h+m*m+g*g);return this._renderer.directionalLightDirections.push(h/y,m/y,g/y),this._renderer.directionalLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(l,g,y,f,d,p){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),l=l instanceof a.default.Color?l:this.color(l,g,y);var h,m,g=arguments[arguments.length-1],y=typeof g=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=g.x,m=g.y,g.z);return this._renderer.pointLightPositions.push(h,m,y),this._renderer.pointLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(l){this._renderer.activeImageLight=l,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(l){this.filter(this._renderer._getSphereMapping(l))},a.default.prototype.lights=function(){this._assert3d("lights");var l=this.color("rgb(128,128,128)");return this.ambientLight(l),this.directionalLight(l,0,0,-1),this},a.default.prototype.lightFalloff=function(l,u,c){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),l<0&&(l=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),l===0&&u===0&&c===0&&(l=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=l,this._renderer.linearAttenuation=u,this._renderer.quadraticAttenuation=c,this},a.default.prototype.spotLight=function(l,u,c,f,d,p,h,m,g,y,b){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var x,v,w,_=arguments.length;switch(_){case 11:case 10:x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(h,m,g);break;case 9:l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),w=new a.default.Vector(d,p,h),y=m,b=g):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=new a.default.Vector(d,p,h),y=m,b=g):h instanceof a.default.Vector?(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=h,y=m,b=g):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(h,m,g));break;case 8:y=(w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,h)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,h)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),h),m);break;case 7:l instanceof a.default.Color&&u instanceof a.default.Vector?(x=l,v=u,w=new a.default.Vector(c,f,d),y=p,b=h):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p,b=h):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p,b=h):w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,h)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,h)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),h);break;case 6:f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d),y=p);break;case 5:l instanceof a.default.Color&&u instanceof a.default.Vector&&c instanceof a.default.Vector?(x=l,v=u,w=c,y=f,b=d):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d));break;case 4:x=l,v=u,w=c,y=f;break;case 3:x=l,v=u,w=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(_<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(v.x,v.y,v.z),w.normalize(),this._renderer.spotLightDirections.push(w.x,w.y,w.z),y===void 0&&(y=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),y=this._renderer._pInst._toRadians(y),this._renderer.spotLightAngle.push(Math.cos(y)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("noLights",u),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var l=(p=o("../core/main"))&&p.__esModule?p:{default:p};function u(h){return function(m){if(Array.isArray(m)){for(var g=0,y=new Array(m.length);g<m.length;g++)y[g]=m[g];return y}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(h,m,g,y,b,x,v){try{var w=h[x](v),_=w.value}catch(S){return void g(S)}w.done?m(_):Promise.resolve(_).then(y,b)}function f(h){return function(){var m=this,g=arguments;return new Promise(function(y,b){var x=h.apply(m,g);function v(_){c(x,y,b,v,w,"next",_)}function w(_){c(x,y,b,v,w,"throw",_)}v(void 0)})}}function d(h){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("./p5.Geometry"),l.default.prototype.loadModel=function(h,m){l.default._validateParameters("loadModel",arguments);var g,y,b=!1,x=!1,v=!1,w=h.slice(-4),_=(m&&d(m)==="object"?(b=m.normalize||!1,g=m.successCallback,y=m.failureCallback,w=m.fileType||w,x=m.flipU||!1,v=m.flipV||!1):typeof m=="boolean"?(b=m,g=arguments[2],y=arguments[3],arguments[4]!==void 0&&(w=arguments[4])):(g=typeof m=="function"?m:void 0,y=arguments[2],arguments[3]!==void 0&&(w=arguments[3])),new l.default.Geometry),S=(_.gid="".concat(h,"|").concat(b),this);function C(){return(C=f(regeneratorRuntime.mark(function T(I){var k,F,D,L;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:for(k=[],F=0;F<I.length;F++)(D=I[F].match(/^mtllib (.+)/))&&function(){var R="",V=D[1],G=h.split("/");R=1<G.length?(G.pop(),G.join("/")+"/"+V):V,k.push(function(){return E.apply(this,arguments)}(R).then(function(U){return U?(H=S,X=R,new Promise(function(fe,$){var M=null,z={};H.loadStrings(X,function(q){for(var ee=0;ee<q.length;++ee){var ae,Q=q[ee].trim().split(/\s+/);Q[0]==="newmtl"?(ae=Q[1],z[M=ae]={}):Q[0]==="Kd"?z[M].diffuseColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ka"?z[M].ambientColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ks"?z[M].specularColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="map_Kd"&&(z[M].texturePath=Q[1])}fe(z)},$)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(R)),{});var H,X}).catch(function(U){return console.warn("Error loading MTL file: ".concat(R),U),{}}))}();return P.prev=2,P.next=5,Promise.all(k);case 5:return L=P.sent,L=Object.assign.apply(Object,[{}].concat(u(L))),P.abrupt("return",L);case 10:return P.prev=10,P.t0=P.catch(2),P.abrupt("return",{});case 13:case"end":return P.stop()}},T,null,[[2,10]])}))).apply(this,arguments)}function E(){return(E=f(regeneratorRuntime.mark(function T(I){var k;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,fetch(I,{method:"HEAD"});case 3:return k=F.sent,F.abrupt("return",k.ok);case 7:return F.prev=7,F.t0=F.catch(0),F.abrupt("return",!1);case 10:case"end":return F.stop()}},T,null,[[0,7]])}))).apply(this,arguments)}return w.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(T){(function(I,k){if(function(F){for(var D=new DataView(F),L=[115,111,108,105,100],P=0;P<5;P++)if(function(R,V,G){for(var U=0,H=R.length;U<H;U++)if(R[U]!==V.getUint8(G+U,!1))return;return 1}(L,D,P))return;return 1}(k))(function(F,D){for(var L,P,R,V,G,U,H,X=new DataView(D),fe=X.getUint32(80,!0),$=!1,M=0;M<70;M++)X.getUint32(M,!1)===1129270351&&X.getUint8(M+4)===82&&X.getUint8(M+5)===61&&($=!0,V=[],G=X.getUint8(M+6)/255,U=X.getUint8(M+7)/255,H=X.getUint8(M+8)/255);for(var z=0;z<fe;z++){for(var q,ee=84+50*z,ae=X.getFloat32(ee,!0),Q=X.getFloat32(4+ee,!0),le=X.getFloat32(8+ee,!0),ie=($&&(q=X.getUint16(48+ee,!0),R=32768&q?(L=G,P=U,H):(L=(31&q)/31,P=(q>>5&31)/31,(q>>10&31)/31)),new l.default.Vector(ae,Q,le)),K=1;K<=3;K++){var ge=ee+12*K,ge=new l.default.Vector(X.getFloat32(ge,!0),X.getFloat32(4+ge,!0),X.getFloat32(8+ge,!0));F.vertices.push(ge),F.vertexNormals.push(ie),$&&V.push(L,P,R)}F.faces.push([3*z,3*z+1,3*z+2]),F.uvs.push([0,0],[0,0],[0,0])}})(I,k);else{if(k=new DataView(k),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");k=new TextDecoder("utf-8").decode(k).split(`
`),function(F,D){for(var L,P,R="",V=[],G=0;G<D.length;++G){for(var U=D[G].trim(),H=U.split(" "),X=0;X<H.length;++X)H[X]===""&&H.splice(X,1);if(H.length!==0)switch(R){case"":if(H[0]!=="solid")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "solid"'));R="solid";break;case"solid":if(H[0]!=="facet"||H[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "facet normal"'));L=new l.default.Vector(parseFloat(H[2]),parseFloat(H[3]),parseFloat(H[4])),F.vertexNormals.push(L,L,L),R="facet normal";break;case"facet normal":if(H[0]!=="outer"||H[1]!=="loop")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(H[0]==="vertex")P=new l.default.Vector(parseFloat(H[1]),parseFloat(H[2]),parseFloat(H[3])),F.vertices.push(P),F.uvs.push([0,0]),V.push(F.vertices.indexOf(P));else{if(H[0]!=="endloop")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "vertex" or "endloop"'));F.faces.push(V),V=[],R="endloop"}break;case"endloop":if(H[0]!=="endfacet")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(H[0]!=="endsolid"){if(H[0]!=="facet"||H[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(H[0],'", should be "endsolid" or "facet normal"'));L=new l.default.Vector(parseFloat(H[2]),parseFloat(H[3]),parseFloat(H[4])),F.vertexNormals.push(L,L,L),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}}(I,k)}})(_,T),b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),S._decrementPreload(),typeof g=="function"&&g(_)},y):w.match(/\.obj$/i)?this.loadStrings(h,function(){var T=f(regeneratorRuntime.mark(function I(k){var F;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,function(){return C.apply(this,arguments)}(k);case 3:F=D.sent,function(L,P){for(var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},V={v:[],vt:[],vn:[]},G={},U=null,H=new Set,X=!1,fe=!1,$=0;$<P.length;++$){var M=P[$].trim().split(/\b\s+/);if(0<M.length){if(M[0]==="usemtl")U=M[1];else if(M[0]==="v"||M[0]==="vn"){var z=new l.default.Vector(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));V[M[0]].push(z)}else if(M[0]==="vt")z=[parseFloat(M[1]),1-parseFloat(M[2])],V[M[0]].push(z);else if(M[0]==="f")for(var q=3;q<M.length;++q){for(var ee=[],ae=[1,q-1,q],Q=0;Q<ae.length;++Q){for(var le,ie=M[ae[Q]],K=ie.split("/"),ge=0;ge<K.length;ge++)K[ge]=parseInt(K[ge])-1;G[ie]||(G[ie]={}),G[ie][U]===void 0?(le=L.vertices.length,L.vertices.push(V.v[K[0]].copy()),L.uvs.push(V.vt[K[1]]?V.vt[K[1]].slice():[0,0]),L.vertexNormals.push(V.vn[K[2]]?V.vn[K[2]].copy():new l.default.Vector),G[ie][U]=le,ee.push(le),U&&R[U]&&R[U].diffuseColor&&H.add(V.v[K[0]])):ee.push(G[ie][U])}if(ee[0]!==ee[1]&&ee[0]!==ee[2]&&ee[1]!==ee[2])if(L.faces.push(ee),U&&R[U]&&R[U].diffuseColor){X=X=!0;for(var ne=R[U].diffuseColor,ye=0;ye<ee.length;ye++)L.vertexColors.push(ne[0]),L.vertexColors.push(ne[1]),L.vertexColors.push(ne[2])}else fe=!0}}}if(L.vertexNormals.length===0&&L.computeNormals(),X===fe)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(_,k,F),D.next=11;break;case 7:return D.prev=7,D.t0=D.catch(0),y?y(D.t0):l.default._friendlyError("Error during parsing: "+D.t0.message),D.abrupt("return");case 11:return D.prev=11,b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),S._decrementPreload(),typeof g=="function"&&g(_),D.finish(11);case 18:case"end":return D.stop()}},I,null,[[0,7,11,18]])}));return function(I){return T.apply(this,arguments)}}(),y):(l.default._friendlyFileLoadError(3,h),y?y():l.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),_},l.default.prototype.model=function(h){this._assert3d("model"),l.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h.edges.length===0&&h._makeTriangleEdges(),h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var p=l.default;s.default=p},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Texture"),u.default.prototype.loadShader=function(p,h,m,g){u.default._validateParameters("loadShader",arguments),g=g||console.error;function y(){x._decrementPreload(),m&&m(b)}var b=new u.default.Shader,x=this,v=!1,w=!1;return this.loadStrings(p,function(_){b._vertSrc=_.join(`
`),w=!0,v&&y()},g),this.loadStrings(h,function(_){b._fragSrc=_.join(`
`),v=!0,w&&y()},g),b},u.default.prototype.createShader=function(p,h){return u.default._validateParameters("createShader",arguments),new u.default.Shader(this._renderer,p,h)},u.default.prototype.createFilterShader=function(p){u.default._validateParameters("createFilterShader",arguments);var h=p.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,h=new u.default.Shader(this._renderer,h,p);return this._renderer.GL?h.ensureCompiledOnContext(this):h.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),h},u.default.prototype.shader=function(p){return this._assert3d("shader"),u.default._validateParameters("shader",arguments),p.ensureCompiledOnContext(this),p.isStrokeShader()?this._renderer.userStrokeShader=p:(this._renderer.userFillShader=p,this._renderer._useNormalMaterial=!1),this},u.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},u.default.prototype.texture=function(p){return this._assert3d("texture"),u.default._validateParameters("texture",arguments),p.gifProperties&&p._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=p,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.textureMode=function(p){p!==c.IMAGE&&p!==c.NORMAL?console.warn("You tried to set ".concat(p," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=p},u.default.prototype.textureWrap=function(p){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,m=(this._renderer.textureWrapX=p,this._renderer.textureWrapY=h,!0),g=!1,y=void 0;try{for(var b,x=this._renderer.textures.values()[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)b.value.setWrapMode(p,h)}catch(v){g=!0,y=v}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}},u.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return u.default._validateParameters("normalMaterial",h),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},u.default.prototype.ambientMaterial=function(p,h,m){this._assert3d("ambientMaterial"),u.default._validateParameters("ambientMaterial",arguments);var g=u.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.emissiveMaterial=function(p,h,m,g){this._assert3d("emissiveMaterial"),u.default._validateParameters("emissiveMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.specularMaterial=function(p,h,m,g){this._assert3d("specularMaterial"),u.default._validateParameters("specularMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.shininess=function(p){return this._assert3d("shininess"),u.default._validateParameters("shininess",arguments),this._renderer._useShininess=p=p<1?1:p,this},u.default.prototype.metalness=function(p){return this._assert3d("metalness"),p=1-Math.exp(-p/100),this._renderer._useMetalness=p,this},u.default.RendererGL.prototype._applyColorBlend=function(p,y){var m=this.GL,g=this.drawMode===c.TEXTURE,y=y||this.userFillShader||this.userStrokeShader||this.userPointShader||g||this.curBlendMode!==c.BLEND||p[p.length-1]<1||this._isErasing;return y!==this._isBlending&&(y||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?m.enable(m.BLEND):m.disable(m.BLEND),m.depthMask(!0),this._isBlending=y),this._applyBlendMode(),p},u.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var p=this.GL;switch(this.curBlendMode){case c.BLEND:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.ADD:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE);break;case c.REMOVE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.DST_COLOR,p.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.ONE_MINUS_DST_COLOR,p.ONE_MINUS_SRC_COLOR,p.ONE,p.ONE);break;case c.REPLACE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ZERO);break;case c.SUBTRACT:p.blendEquationSeparate(p.FUNC_REVERSE_SUBTRACT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(o,i,s){"use strict";o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.prototype.camera=function(){var u;this._assert3d("camera");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("camera",f),(u=this._renderer._curCamera).camera.apply(u,f),this},a.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("perspective",f),(u=this._renderer._curCamera).perspective.apply(u,f),this},a.default.prototype.linePerspective=function(u){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(u===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=u},a.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("ortho",f),(u=this._renderer._curCamera).ortho.apply(u,f),this},a.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("frustum",f),(u=this._renderer._curCamera).frustum.apply(u,f),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new a.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},a.default.Camera=function(){function u(p){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var c,f,d;return c=u,(f=[{key:"perspective",value:function(y,h,m,g){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),h===void 0&&(h=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),g<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=m,this.cameraFar=g,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),b=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/h,0,0,0,0,-y*this.yScale,0,0,0,0,(g+m)*b,-1,0,0,2*g*m*b,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,C,m,g,y,b){E===void 0&&(E=-this._renderer.width/2),C===void 0&&(C=+this._renderer.width/2),m===void 0&&(m=-this._renderer.height/2),g===void 0&&(g=+this._renderer.height/2),y===void 0&&(y=0),b===void 0&&(b=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=y;var T=C-E,x=g-m,v=(this.cameraFar=b)-y,w=2/T,_=2/x*this.yScale,S=-2/v,C=-(C+E)/T,E=-(g+m)/x,T=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,0,0,S,0,C,E,T,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,C,m,g,y,b){E===void 0&&(E=.05*-this._renderer.width),C===void 0&&(C=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),g===void 0&&(g=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),this.cameraNear=y;var T=C-E,x=g-m,v=(this.cameraFar=b)-y,w=2*y/T,_=2*y/x*this.yScale,S=-2*b*y/v,C=(C+E)/T,E=(g+m)/x,T=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,C,E,T,-1,0,0,S,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,h,m,g){var y=this.centerX,b=this.centerY,x=this.centerZ,v=(y-=this.eyeX,b-=this.eyeY,x-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(v.rotate(this._renderer._pInst._toRadians(w),h,m,g),[y*v.mat4[0]+b*v.mat4[4]+x*v.mat4[8],y*v.mat4[1]+b*v.mat4[5]+x*v.mat4[9],y*v.mat4[2]+b*v.mat4[6]+x*v.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var h=this._getLocalAxes();this._rotateView(p,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(p){var h=this._getLocalAxes();this._rotateView(p,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(p,h,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,h,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,h,m,g,y,b,x,v,w){return p===void 0&&(p=this.defaultEyeX,h=this.defaultEyeY,m=this.defaultEyeZ,g=p,y=h,v=1,w=x=b=0),this.eyeX=p,this.eyeY=h,this.eyeZ=m,g!==void 0&&(this.centerX=g,this.centerY=y,this.centerZ=b),x!==void 0&&(this.upX=x,this.upY=v,this.upZ=w),g=this._getLocalAxes(),this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1),y=-p,this.cameraMatrix.translate([y,-h,-m]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(g,y,m){var b=this._getLocalAxes(),g=[b.x[0]*g,b.x[1]*g,b.x[2]*g],y=[b.y[0]*y,b.y[1]*y,b.y[2]*y],b=[b.z[0]*m,b.z[1]*m,b.z[2]*m];this.camera(this.eyeX+g[0]+y[0]+b[0],this.eyeY+g[1]+y[1]+b[1],this.eyeZ+g[2]+y[2]+b[2],this.centerX+g[0]+y[0]+b[0],this.centerY+g[1]+y[1]+b[1],this.centerZ+g[2]+y[2]+b[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,h,m){var g=p-this.eyeX,y=h-this.eyeY,b=m-this.eyeZ;this.camera(p,h,m,this.centerX+g,this.centerY+y,this.centerZ+b,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var h=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];h<m.length;h++){var g=m[h];this[g]=p[g]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,h,m){var g,y,b,x,v,w,_,S,C,E,T,I,k,F,D,L,P,R;m===0?this.set(p):m===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/p.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/p.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new a.default.Vector(p.eyeX,p.eyeY,p.eyeZ),v=new a.default.Vector(h.eyeX,h.eyeY,h.eyeZ),L=new a.default.Vector(p.centerX,p.centerY,p.centerZ),R=new a.default.Vector(h.centerX,h.centerY,h.centerZ),b=a.default.Vector.dist(x,L),g=a.default.Vector.dist(v,R),g=b*Math.pow(g/b,m),b=a.default.Vector.sub(x,v),y=1,1e-6<(P=(F=x.copy().sub(v).sub(L).add(R)).magSq())&&(y=a.default.Vector.dot(b,F)/P,y=Math.max(0,Math.min(y,1))),b=a.default.Vector.lerp(a.default.Vector.lerp(x,L,y),a.default.Vector.lerp(v,R,y),m),F=p.cameraMatrix.createSubMatrix3x3(),P=h.cameraMatrix.createSubMatrix3x3(),x=F.row(2),L=P.row(2),v=F.row(1),R=P.row(1),p=new a.default.Vector,h=new a.default.Vector,w=new a.default.Vector,_=new a.default.Vector,1-(S=.5*((F=(P=P.mult3x3(F.copy().transpose3x3())).diagonal())[0]+F[1]+F[2]-1))<1e-7?(p.set(a.default.Vector.lerp(x,L,m)).normalize(),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),h.set(a.default.Vector.lerp(v,R,m)).normalize()):(L=1/(1-S),R=Math.max(F[0],F[1],F[2]),I=P.mat3[1]+P.mat3[3],k=P.mat3[2]+P.mat3[6],D=P.mat3[5]+P.mat3[7],R=R===F[0]?(E=.5*I*(L/=C=Math.sqrt((F[0]-S)*L)),T=.5*k*L,.5*(P.mat3[7]-P.mat3[5])/C):R===F[1]?(T=.5*D*(L/=E=Math.sqrt((F[1]-S)*L)),C=.5*I*L,.5*(P.mat3[2]-P.mat3[6])/E):(C=.5*k*(L/=T=Math.sqrt((F[2]-S)*L)),E=.5*D*L,.5*(P.mat3[3]-P.mat3[1])/T),I=m*Math.atan2(R,S),k=Math.cos(I),F=Math.sin(I),(R=new a.default.Matrix("mat3",[k+(D=1-k)*C*C,D*(L=C*E)+F*T,D*(P=T*C)-F*E,D*L-F*T,k+D*E*E,D*(m=E*T)+F*C,D*P+F*E,D*m-F*C,k+D*T*T])).multiplyVec3(x,p),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),R.multiplyVec3(v,h)),this.camera(w.x,w.y,w.z,_.x,_.y,_.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var p=new a.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p.yScale=this.yScale,p}},{key:"_getLocalAxes",value:function(){var p=this.eyeX-this.centerX,h=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,x=Math.sqrt(p*p+h*h+m*m),x=(x!==0&&(p/=x,h/=x,m/=x),this.upX),g=(v=this.upY)*m-(w=this.upZ)*h,y=-x*m+w*p,b=x*h-v*p,x=h*b-m*y,v=-p*b+m*g,w=p*y-h*g,_=Math.sqrt(g*g+y*y+b*b),_=(_!==0&&(g/=_,y/=_,b/=_),Math.sqrt(x*x+v*v+w*w));return _!==0&&(x/=_,v/=_,w/=_),{x:[g,y,b],y:[x,v,w],z:[p,h,m]}}},{key:"_orbit",value:function(p,_,w){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(x,b),w=((g=(g*=Math.pow(10,w))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,b))))+_),_=p;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),b.mult(Math.cos(w)),v.mult(Math.cos(_)*Math.sin(w)),x.mult(Math.sin(_)*Math.sin(w)),y.set(b).add(v).add(x),this.eyeX=g*y.x+this.centerX,this.eyeY=g*y.y+this.centerY,this.eyeZ=g*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,_,C){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(y,x),E=Math.atan2(_,w),E=(v.mult(Math.sin(E)),x.mult(Math.cos(E)).add(v),Math.sqrt(w*w+_*_)),v=a.default.Vector.cross(y,x),w=((g=(g*=Math.pow(10,C))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.cos(E)),_=Math.sin(E),C=b.dot(y),E=b.dot(x),S=C*w+E*_,C=-C*_+E*w,E=b.dot(v);b.x=S*y.x+C*x.x+E*v.x,b.y=S*y.y+C*x.y+E*v.y,b.z=S*y.z+C*x.z+E*v.z,x.mult(-_),y.mult(w).add(x).mult(g),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,b.x,b.y,b.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&l(c.prototype,f),d&&l(c,d),u}(),a.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix)},o=a.default.Camera,s.default=o},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.DataArray=function(){function l(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,p=this,h=l;if(!(p instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(d),this.initialLength=d}var u,c,f;return u=l,(c=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var d;this.length<this.data.length/2&&(d=1<<Math.ceil(Math.log2(this.length)),(d=new Float32Array(d)).set(this.data.subarray(0,this.length),0),this.data=d)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];this.ensureLength(this.length+p.length),this.data.set(p,this.length),this.length+=p.length}},{key:"slice",value:function(d,p){return this.data.slice(d,Math.min(p,this.length))}},{key:"subArray",value:function(d,p){return this.data.subarray(d,Math.min(p,this.length))}},{key:"ensureLength",value:function(d){for(;this.data.length<d;){var p=new Float32Array(2*this.data.length);p.set(this.data,0),this.data=p}}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.DataArray,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(T,i,s){"use strict";function a(I){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(I)}function l(I){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(k){return a(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":a(k)})(I)}T("core-js/modules/es.symbol"),T("core-js/modules/es.symbol.description"),T("core-js/modules/es.symbol.iterator"),T("core-js/modules/es.array.fill"),T("core-js/modules/es.array.includes"),T("core-js/modules/es.array.iterator"),T("core-js/modules/es.object.get-own-property-descriptor"),T("core-js/modules/es.object.get-prototype-of"),T("core-js/modules/es.object.to-string"),T("core-js/modules/es.reflect.construct"),T("core-js/modules/es.reflect.get"),T("core-js/modules/es.regexp.to-string"),T("core-js/modules/es.string.includes"),T("core-js/modules/es.string.iterator"),T("core-js/modules/es.typed-array.float32-array"),T("core-js/modules/es.typed-array.uint8-array"),T("core-js/modules/es.typed-array.uint8-clamped-array"),T("core-js/modules/es.typed-array.copy-within"),T("core-js/modules/es.typed-array.every"),T("core-js/modules/es.typed-array.fill"),T("core-js/modules/es.typed-array.filter"),T("core-js/modules/es.typed-array.find"),T("core-js/modules/es.typed-array.find-index"),T("core-js/modules/es.typed-array.for-each"),T("core-js/modules/es.typed-array.includes"),T("core-js/modules/es.typed-array.index-of"),T("core-js/modules/es.typed-array.iterator"),T("core-js/modules/es.typed-array.join"),T("core-js/modules/es.typed-array.last-index-of"),T("core-js/modules/es.typed-array.map"),T("core-js/modules/es.typed-array.reduce"),T("core-js/modules/es.typed-array.reduce-right"),T("core-js/modules/es.typed-array.reverse"),T("core-js/modules/es.typed-array.set"),T("core-js/modules/es.typed-array.slice"),T("core-js/modules/es.typed-array.some"),T("core-js/modules/es.typed-array.sort"),T("core-js/modules/es.typed-array.subarray"),T("core-js/modules/es.typed-array.to-locale-string"),T("core-js/modules/es.typed-array.to-string"),T("core-js/modules/es.weak-map"),T("core-js/modules/web.dom-collections.iterator"),T("core-js/modules/es.array.fill"),T("core-js/modules/es.array.includes"),T("core-js/modules/es.array.iterator"),T("core-js/modules/es.object.get-prototype-of"),T("core-js/modules/es.object.to-string"),T("core-js/modules/es.string.includes"),T("core-js/modules/es.typed-array.float32-array"),T("core-js/modules/es.typed-array.uint8-array"),T("core-js/modules/es.typed-array.uint8-clamped-array"),T("core-js/modules/es.typed-array.copy-within"),T("core-js/modules/es.typed-array.every"),T("core-js/modules/es.typed-array.fill"),T("core-js/modules/es.typed-array.filter"),T("core-js/modules/es.typed-array.find"),T("core-js/modules/es.typed-array.find-index"),T("core-js/modules/es.typed-array.for-each"),T("core-js/modules/es.typed-array.includes"),T("core-js/modules/es.typed-array.index-of"),T("core-js/modules/es.typed-array.iterator"),T("core-js/modules/es.typed-array.join"),T("core-js/modules/es.typed-array.last-index-of"),T("core-js/modules/es.typed-array.map"),T("core-js/modules/es.typed-array.reduce"),T("core-js/modules/es.typed-array.reduce-right"),T("core-js/modules/es.typed-array.reverse"),T("core-js/modules/es.typed-array.set"),T("core-js/modules/es.typed-array.slice"),T("core-js/modules/es.typed-array.some"),T("core-js/modules/es.typed-array.sort"),T("core-js/modules/es.typed-array.subarray"),T("core-js/modules/es.typed-array.to-locale-string"),T("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(E=T("../core/main"))&&E.__esModule?E:{default:E},c=function(I){if(I&&I.__esModule)return I;if(I===null||l(I)!=="object"&&typeof I!="function")return{default:I};var k=p();if(k&&k.has(I))return k.get(I);var F,D={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(F in I){var P;Object.prototype.hasOwnProperty.call(I,F)&&((P=L?Object.getOwnPropertyDescriptor(I,F):null)&&(P.get||P.set)?Object.defineProperty(D,F,P):D[F]=I[F])}return D.default=I,k&&k.set(I,D),D}(T("../core/constants")),f=T("./p5.Texture"),d=T("./p5.RendererGL");function p(){var I;return typeof WeakMap!="function"?null:(I=new WeakMap,p=function(){return I},I)}function h(I,k){return function(F){if(Array.isArray(F))return F}(I)||function(F,D){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]"){var L=[],P=!0,R=!1,V=void 0;try{for(var G,U=F[Symbol.iterator]();!(P=(G=U.next()).done)&&(L.push(G.value),!D||L.length!==D);P=!0);}catch(H){R=!0,V=H}finally{try{P||U.return==null||U.return()}finally{if(R)throw V}}return L}}(I,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(I,k,F){return k in I?Object.defineProperty(I,k,{value:F,enumerable:!0,configurable:!0,writable:!0}):I[k]=F,I}function g(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function y(I,k){for(var F=0;F<k.length;F++){var D=k[F];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(I,D.key,D)}}function b(I,k,F){k&&y(I.prototype,k),F&&y(I,F)}function x(I,k,F){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,L,P){var R=function(V,G){for(;!Object.prototype.hasOwnProperty.call(V,G)&&(V=_(V))!==null;);return V}(R,L);if(R)return(R=Object.getOwnPropertyDescriptor(R,L)).get?R.get.call(P):R.value})(I,k,F||I)}function v(I,k){return(v=Object.setPrototypeOf||function(F,D){return F.__proto__=D,F})(I,k)}function w(I){return function(){var k,F=_(I),F=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=_(this).constructor,Reflect.construct(F,arguments,k)):F.apply(this,arguments),this);if(!k||l(k)!=="object"&&typeof k!="function"){if(F!==void 0)return F;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function _(I){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(I)}var S=function(I){var k=D;if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(I&&I.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),I&&v(k,I);var F=w(D);function D(L){var P;return g(this,D),(P=F.call(this,L.target._renderer)).fbo=L,P.yScale=-1,P}return b(D,[{key:"_computeCameraDefaultSettings",value:function(){x(_(D.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),D}(u.default.Camera),C=(u.default.FramebufferCamera=S,function(){function I(k,F){g(this,I),this.framebuffer=k,this.property=F}return b(I,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),I}()),E=(u.default.FramebufferTexture=C,function(){function I(k){var F=this,D=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},L=(g(this,I),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=D.format||c.UNSIGNED_BYTE,this.channels=D.channels||(k._renderer._pInst._glAttributes.alpha?c.RGBA:c.RGB),this.useDepth=D.depth===void 0||D.depth,this.depthFormat=D.depthFormat||c.FLOAT,this.textureFiltering=D.textureFiltering||c.LINEAR,D.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof D.antialias=="number"?this.antialiasSamples=D.antialias:this.antialiasSamples=D.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==c.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=D.density||k.pixelDensity(),k._renderer.GL);if(this.gl=L,D.width&&D.height?(P=k._renderer._adjustDimensions(D.width,D.height),this.width=P.adjustedWidth,this.height=P.adjustedHeight,this._autoSized=!1):(D.width===void 0!=(D.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),D.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(D.stencil===void 0||D.stencil),this.framebuffer=L.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=L.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var P=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=P,this.draw(function(){return F.target.clear()})}return b(I,[{key:"resize",value:function(k,F){this._autoSized=!1;var D=this.target._renderer._adjustDimensions(k,F);k=D.adjustedWidth,F=D.adjustedHeight,this.width=k,this.height=F,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===c.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===c.WEBGL&&this.depthFormat===c.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),[c.UNSIGNED_BYTE,c.FLOAT,c.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&![c.UNSIGNED_INT,c.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=c.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==c.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===c.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),k.halfFloat||this.format!==c.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.channels===c.RGB&&[c.FLOAT,c.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=c.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,F=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),D=k.getParameter(k.FRAMEBUFFER_BINDING),L=k.createTexture();if(!L)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,L);var P=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,P.internalFormat,this.width*this.density,this.height*this.density,0,P.format,P.type,null),this.colorTexture=L,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,L,0),this.useDepth){var L=k.createTexture();if(!L)throw new Error("Unable to create depth texture");var R=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,L),k.texImage2D(k.TEXTURE_2D,0,R.internalFormat,this.width*this.density,this.height*this.density,0,R.format,R.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,L,0),this.depthTexture=L}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),P.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(R=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),R.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new C(this,"depthTexture"),L=k.NEAREST,this.depthP5Texture=new u.default.Texture(this.target._renderer,this.depth,{minFilter:L,magFilter:L}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new C(this,"colorTexture"),P=this.textureFiltering===c.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new u.default.Texture(this.target._renderer,this.color,{minFilter:P,magFilter:P}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,F),k.bindFramebuffer(k.FRAMEBUFFER,D)}},{key:"_glColorFormat",value:function(){var k,F,D=this.gl,L=this.format===c.FLOAT?D.FLOAT:this.format===c.HALF_FLOAT?this.target.webglVersion===c.WEBGL2?D.HALF_FLOAT:D.getExtension("OES_texture_half_float").HALF_FLOAT_OES:D.UNSIGNED_BYTE,P=this.channels===c.RGBA?D.RGBA:D.RGB;return{internalFormat:this.target.webglVersion===c.WEBGL2?(m(F={},D.FLOAT,m({},D.RGBA,D.RGBA32F)),m(F,D.HALF_FLOAT,m({},D.RGBA,D.RGBA16F)),m(F,D.UNSIGNED_BYTE,(m(k={},D.RGBA,D.RGBA8),m(k,D.RGB,D.RGB8),k)),F[L][P]):this.format===c.HALF_FLOAT?D.RGBA:P,format:P,type:L}}},{key:"_glDepthFormat",value:function(){var D=this.gl,k=this.useStencil?this.depthFormat===c.FLOAT?D.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===c.WEBGL2?D.UNSIGNED_INT_24_8:D.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===c.FLOAT?D.FLOAT:D.UNSIGNED_INT,F=this.useStencil?D.DEPTH_STENCIL:D.DEPTH_COMPONENT,D=this.useStencil?this.depthFormat===c.FLOAT?D.DEPTH32F_STENCIL8:this.target.webglVersion===c.WEBGL2?D.DEPTH24_STENCIL8:D.DEPTH_STENCIL:this.target.webglVersion===c.WEBGL2?this.depthFormat===c.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT;return{internalFormat:D,format:F,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var L=this.color,k=this.depth,F=this.colorRenderbuffer,D=this.depthRenderbuffer,L=(this._deleteTexture(L),k&&this._deleteTexture(k),this.gl);F&&L.deleteRenderbuffer(F),D&&L.deleteRenderbuffer(D),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new S(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,F=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&F.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var D=0,L=F;D<L.length;D++){var R=h(L[D],2),P=R[0],R=R[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,P,R)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,F=this.target._renderer.activeFramebuffer(),D=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,d.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,D.format,D.type),F?k.bindFramebuffer(k.FRAMEBUFFER,F._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,F,D,L){u.default._validateParameters("p5.Framebuffer.get",arguments);var P=this._glColorFormat();if(k===void 0&&F===void 0)F=k=0,D=this.width,L=this.height;else if(D===void 0&&L===void 0)return(k<0||F<0||k>=this.width||F>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1)),(0,d.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,F*this.density,P.format,P.type);k=this.target.constrain(k,0,this.width-1),F=this.target.constrain(F,0,this.height-1),D=this.target.constrain(D,1,this.width-k),L=this.target.constrain(L,1,this.height-F);for(var R=(0,d.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,F*this.density,D*this.density,L*this.density,P.format,P.type),V=new Uint8ClampedArray(D*L*this.density*this.density*4),G=(V.fill(255),P.type===this.gl.RGB?3:4),U=0;U<L*this.density;U++)for(var H=0;H<D*this.density;H++)for(var X=0;X<4;X++){var fe,$=4*(U*D*this.density+H)+X;X<G&&(fe=G==4?$:(U*D*this.density+H)*G+X,V[$]=R[fe])}return k=new u.default.Image(D*this.density,L*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(V),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(D,L),k}},{key:"updatePixels",value:function(){var k=this.gl,F=(this.colorP5Texture.bindTexture(),this._glColorFormat()),D=F.format===k.RGBA?4:3,D=this.width*this.height*this.density*this.density*D,L=F.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof L)||this.pixels.length!==D)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,this.pixels),this.colorP5Texture.unbindTexture(),L=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),L?k.bindFramebuffer(k.FRAMEBUFFER,L._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),I}()),T=u.default.Framebuffer=E;s.default=T},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(m,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}u.default.Geometry=function(){function m(x,v,w){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new u.default.DataArray,this.lineTangentsIn=new u.default.DataArray,this.lineTangentsOut=new u.default.DataArray,this.lineSides=new u.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new u.default.DataArray,this.detailX=x!==void 0?x:1,this.detailY=v!==void 0?v:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,w instanceof Function&&w.call(this)}var g,y,b;return g=m,(y=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new u.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),v=new u.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),w=0;w<this.vertices.length;w++){var _=this.vertices[w];x.x=Math.min(x.x,_.x),x.y=Math.min(x.y,_.y),x.z=Math.min(x.z,_.z),v.x=Math.max(v.x,_.x),v.y=Math.max(v.y,_.y),v.z=Math.max(v.z,_.z)}var S=new u.default.Vector(v.x-x.x,v.y-x.y,v.z-x.z),C=new u.default.Vector((x.x+v.x)/2,(x.y+v.y)/2,(x.z+v.z)/2);this.boundingBoxCache={min:x,max:v,size:S,offset:C}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,v,w,_=this.detailX+1,S=0;S<this.detailY;S++)for(var C=0;C<this.detailX;C++)v=(S+1)*_+C+1,this.faces.push([S*_+C,x=S*_+C+1,w=(S+1)*_+C]),this.faces.push([w,x,v]);return this}},{key:"_getFaceNormal",value:function(v){var v=this.faces[v],w=this.vertices[v[0]],S=this.vertices[v[1]],v=this.vertices[v[2]],S=u.default.Vector.sub(S,w),v=u.default.Vector.sub(v,w),w=u.default.Vector.cross(S,v),_=u.default.Vector.mag(w),S=_/(u.default.Vector.mag(S)*u.default.Vector.mag(v));return S===0||isNaN(S)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),w):(1<S&&(S=1),w.mult(Math.asin(S)/_))}},{key:"computeNormals",value:function(){var x,v=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:c.FLAT,_=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,S=this.vertexNormals,C=this.vertices,E=this.faces;if(w===c.SMOOTH){for(var T={},I=[],k=Math.pow(10,_===void 0?3:_),F=function(V){return Math.round(V*k)/k},D=function(V){return"".concat(F(V.x),",").concat(F(V.y),",").concat(F(V.z))},L=0;L<C.length;L++){var P=C[L],R=D(P);T[R]===void 0&&(T[R]=I.length,I.push(P))}E.forEach(function(V){for(var G=0;G<3;++G){var U=V[G],U=C[U],U=D(U);V[G]=T[U]}}),this.edges.forEach(function(V){for(var G=0;G<2;++G){var U=V[G],U=C[U],U=D(U);V[G]=T[U]}}),this.vertices=C=I}for(x=S.length=0;x<C.length;++x)S.push(new u.default.Vector);for(E.forEach(function(V,G){for(var U=v._getFaceNormal(G),H=0;H<3;++H){var X=V[H];S[X].add(U)}}),x=0;x<C.length;++x)S[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var v=this.detailX+1,w=u.default.Vector.add(this.vertexNormals[x*v],this.vertexNormals[x*v+this.detailX]),w=u.default.Vector.div(w,2);this.vertexNormals[x*v]=w,this.vertexNormals[x*v+this.detailX]=w}return this}},{key:"averagePoleNormals",value:function(){for(var x=new u.default.Vector(0,0,0),v=0;v<this.detailX;v++)x.add(this.vertexNormals[v]);for(var x=u.default.Vector.div(x,this.detailX),w=0;w<this.detailX;w++)this.vertexNormals[w]=x;x=new u.default.Vector(0,0,0);for(var _=this.vertices.length-1;_>this.vertices.length-1-this.detailX;_--)x.add(this.vertexNormals[_]);x=u.default.Vector.div(x,this.detailX);for(var S=this.vertices.length-1;S>this.vertices.length-1-this.detailX;S--)this.vertexNormals[S]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,v=new Map,w=new Set,_=0;_<this.edges.length;_++){var S,C=this.edges[_-1],E=this.edges[_],T=this.vertices[E[0]],I=this.vertices[E[1]],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[0],4*(E[0]+1)):[0,0,0,0],F=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],D=I.copy().sub(T).normalize(),L=0<D.magSq();L&&this._addSegment(T,I,k,F,D),0<_&&C[1]===E[0]?w.has(E[0])||(w.add(E[0]),v.delete(E[0]),x&&L&&D.dot(x)<1-1e-8&&this._addJoin(T,x,D,k)):(L&&!w.has(E[0])&&((S=v.get(E[0]))?(this._addJoin(T,S.dir,D,k),v.delete(E[0]),w.add(E[0])):v.set(E[0],{point:T,dir:D.copy().mult(-1),color:k})),x&&!w.has(C[1])&&((S=v.get(C[1]))?(this._addJoin(this.vertices[C[1]],x,S.dir.copy().mult(-1),k),v.delete(C[1]),w.add(C[1])):v.set(C[1],{point:this.vertices[C[1]],dir:x,color:k}),x=void 0)),_!==this.edges.length-1||w.has(E[1])||((T=v.get(E[1]))?(this._addJoin(I,D,T.dir.copy().mult(-1),F),v.delete(E[1]),w.add(E[1])):v.set(E[1],{point:I,dir:D,color:F})),L&&(x=D)}var P=!0,R=!1,V=void 0;try{for(var G,U=v.values()[Symbol.iterator]();!(P=(G=U.next()).done);P=!0){var H=G.value,X=H.point,fe=H.dir,$=H.color;this._addCap(X,fe,$)}}catch(M){R=!0,V=M}finally{try{P||U.return==null||U.return()}finally{if(R)throw V}}return this}},{key:"_addSegment",value:function(C,E,w,_,S){var C=C.array(),E=E.array(),T=S.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var I=0,k=[this.lineTangentsIn,this.lineTangentsOut];I<k.length;I++)for(var F=k[I],D=0;D<6;D++)F.push.apply(F,d(T));return(S=this.lineVertices).push.apply(S,d(C).concat(d(E),d(C),d(E),d(E),d(C))),(S=this.lineVertexColors).push.apply(S,d(w).concat(d(_),d(w),d(_),d(_),d(w))),this}},{key:"_addCap",value:function(x,v,w){for(var _,S=x.array(),C=v.array(),E=[0,0,0],T=0;T<6;T++)(_=this.lineVertices).push.apply(_,d(S)),(_=this.lineTangentsIn).push.apply(_,d(C)),(_=this.lineTangentsOut).push.apply(_,E),(_=this.lineVertexColors).push.apply(_,d(w));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,v,w,_){for(var S,C=x.array(),E=v.array(),T=w.array(),I=0;I<12;I++)(S=this.lineVertices).push.apply(S,d(C)),(S=this.lineTangentsIn).push.apply(S,d(E)),(S=this.lineTangentsOut).push.apply(S,d(T)),(S=this.lineVertexColors).push.apply(S,d(_));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),v=this.vertices[0].copy(),w=0;w<this.vertices.length;w++)x.x=Math.max(x.x,this.vertices[w].x),v.x=Math.min(v.x,this.vertices[w].x),x.y=Math.max(x.y,this.vertices[w].y),v.y=Math.min(v.y,this.vertices[w].y),x.z=Math.max(x.z,this.vertices[w].z),v.z=Math.min(v.z,this.vertices[w].z);for(var _=u.default.Vector.lerp(x,v,.5),S=u.default.Vector.sub(x,v),C=200/Math.max(Math.max(S.x,S.y),S.z),E=0;E<this.vertices.length;E++)this.vertices[E].sub(_),this.vertices[E].mult(C)}return this}}])&&p(g.prototype,y),b&&p(g,b),m}();var h=u.default.Geometry;s.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(f,i,s){"use strict";f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f};function l(d,p){for(var h=0;h<p.length;h++){var m=p[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}var u=Array,c=function(d){return Array.isArray(d)},f=(typeof Float32Array<"u"&&(u=Float32Array,c=function(d){return Array.isArray(d)||d instanceof Float32Array}),a.default.Matrix=function(){function d(){var g=this,y=d;if(g instanceof y)return arguments.length&&((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])instanceof a.default&&(this.p5=(y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new u([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new u([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var p,h,m;return p=d,m=[{key:"identity",value:function(g){return new a.default.Matrix(g)}}],(h=[{key:"set",value:function(g){var y=arguments;if(g instanceof a.default.Matrix?y=g.mat4:c(g)&&(y=g),y.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(y.length,"."),"p5.Matrix.set");else for(var b=0;b<16;b++)this.mat4[b]=y[b];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var g;return this.mat3!==void 0?((g=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],g.mat3[1]=this.mat3[1],g.mat3[2]=this.mat3[2],g.mat3[3]=this.mat3[3],g.mat3[4]=this.mat3[4],g.mat3[5]=this.mat3[5],g.mat3[6]=this.mat3[6],g.mat3[7]=this.mat3[7],g.mat3[8]=this.mat3[8]):((g=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],g.mat4[1]=this.mat4[1],g.mat4[2]=this.mat4[2],g.mat4[3]=this.mat4[3],g.mat4[4]=this.mat4[4],g.mat4[5]=this.mat4[5],g.mat4[6]=this.mat4[6],g.mat4[7]=this.mat4[7],g.mat4[8]=this.mat4[8],g.mat4[9]=this.mat4[9],g.mat4[10]=this.mat4[10],g.mat4[11]=this.mat4[11],g.mat4[12]=this.mat4[12],g.mat4[13]=this.mat4[13],g.mat4[14]=this.mat4[14],g.mat4[15]=this.mat4[15]),g}},{key:"transpose",value:function(g){var y,b,x,v,w,_;return g instanceof a.default.Matrix?(y=g.mat4[1],b=g.mat4[2],x=g.mat4[3],v=g.mat4[6],w=g.mat4[7],_=g.mat4[11],this.mat4[0]=g.mat4[0],this.mat4[1]=g.mat4[4],this.mat4[2]=g.mat4[8],this.mat4[3]=g.mat4[12],this.mat4[4]=y,this.mat4[5]=g.mat4[5],this.mat4[6]=g.mat4[9],this.mat4[7]=g.mat4[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g.mat4[10],this.mat4[11]=g.mat4[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g.mat4[15]):c(g)&&(y=g[1],b=g[2],x=g[3],v=g[6],w=g[7],_=g[11],this.mat4[0]=g[0],this.mat4[1]=g[4],this.mat4[2]=g[8],this.mat4[3]=g[12],this.mat4[4]=y,this.mat4[5]=g[5],this.mat4[6]=g[9],this.mat4[7]=g[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g[10],this.mat4[11]=g[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g[15]),this}},{key:"invert",value:function(R){R instanceof a.default.Matrix?(y=R.mat4[0],b=R.mat4[1],x=R.mat4[2],v=R.mat4[3],w=R.mat4[4],_=R.mat4[5],S=R.mat4[6],C=R.mat4[7],E=R.mat4[8],T=R.mat4[9],I=R.mat4[10],k=R.mat4[11],F=R.mat4[12],D=R.mat4[13],L=R.mat4[14],P=R.mat4[15]):c(R)&&(y=R[0],b=R[1],x=R[2],v=R[3],w=R[4],_=R[5],S=R[6],C=R[7],E=R[8],T=R[9],I=R[10],k=R[11],F=R[12],D=R[13],L=R[14],P=R[15]);var y,b,x,v,w,_,S,C,E,T,I,k,F,D,L,P,R=y*_-b*w,V=y*S-x*w,G=y*C-v*w,U=b*S-x*_,H=b*C-v*_,X=x*C-v*S,fe=E*D-T*F,$=E*L-I*F,M=E*P-k*F,z=T*L-I*D,q=T*P-k*D,ee=I*P-k*L,ae=R*ee-V*q+G*z+U*M-H*$+X*fe;return ae?(this.mat4[0]=(_*ee-S*q+C*z)*(ae=1/ae),this.mat4[1]=(x*q-b*ee-v*z)*ae,this.mat4[2]=(D*X-L*H+P*U)*ae,this.mat4[3]=(I*H-T*X-k*U)*ae,this.mat4[4]=(S*M-w*ee-C*$)*ae,this.mat4[5]=(y*ee-x*M+v*$)*ae,this.mat4[6]=(L*G-F*X-P*V)*ae,this.mat4[7]=(E*X-I*G+k*V)*ae,this.mat4[8]=(w*q-_*M+C*fe)*ae,this.mat4[9]=(b*M-y*q-v*fe)*ae,this.mat4[10]=(F*H-D*G+P*R)*ae,this.mat4[11]=(T*G-E*H-k*R)*ae,this.mat4[12]=(_*$-w*z-S*fe)*ae,this.mat4[13]=(y*z-b*$+x*fe)*ae,this.mat4[14]=(D*V-F*U-L*R)*ae,this.mat4[15]=(E*U-T*V+I*R)*ae,this):null}},{key:"invert3x3",value:function(){var g=this.mat3[0],y=this.mat3[1],b=this.mat3[2],x=this.mat3[3],v=this.mat3[4],w=this.mat3[5],_=this.mat3[6],S=this.mat3[7],C=this.mat3[8],E=C*v-w*S,T=-C*x+w*_,I=S*x-v*_,k=g*E+y*T+b*I;return k?(this.mat3[0]=E*(k=1/k),this.mat3[1]=(-C*y+b*S)*k,this.mat3[2]=(w*y-b*v)*k,this.mat3[3]=T*k,this.mat3[4]=(C*g-b*_)*k,this.mat3[5]=(-w*g+b*x)*k,this.mat3[6]=I*k,this.mat3[7]=(-S*g+y*_)*k,this.mat3[8]=(v*g-y*x)*k,this):null}},{key:"transpose3x3",value:function(g){var y=(g=g===void 0?this.mat3:g)[1],b=g[2],x=g[5];return this.mat3[0]=g[0],this.mat3[1]=g[3],this.mat3[2]=g[6],this.mat3[3]=y,this.mat3[4]=g[4],this.mat3[5]=g[7],this.mat3[6]=b,this.mat3[7]=x,this.mat3[8]=g[8],this}},{key:"inverseTranspose",value:function(g){if(g=g.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=g[0],this.mat3[1]=g[1],this.mat3[2]=g[2],this.mat3[3]=g[4],this.mat3[4]=g[5],this.mat3[5]=g[6],this.mat3[6]=g[8],this.mat3[7]=g[9],this.mat3[8]=g[10]),g=this.invert3x3(),g)g.transpose3x3(this.mat3);else for(var y=0;y<9;y++)this.mat3[y]=0;return this}},{key:"determinant",value:function(){var g=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],y=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],v=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],w=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],_=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],S=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],C=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],E=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],T=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return g*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-y*T+b*E+x*C-v*S+w*_}},{key:"mult",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4[0],x=this.mat4[1],v=this.mat4[2],w=this.mat4[3];return this.mat4[0]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[1]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[2]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[3]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[4],x=this.mat4[5],v=this.mat4[6],w=this.mat4[7],this.mat4[4]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[5]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[6]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[7]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[8],x=this.mat4[9],v=this.mat4[10],w=this.mat4[11],this.mat4[8]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[9]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[10]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[11]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[12],x=this.mat4[13],v=this.mat4[14],w=this.mat4[15],this.mat4[12]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[13]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[14]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[15]=b*y[3]+x*y[7]+v*y[11]+w*y[15],this}},{key:"apply",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4,x=b[0],v=b[4],w=b[8],_=b[12],x=(b[0]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[4]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[8]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[12]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[1]),v=b[5],w=b[9],_=b[13],x=(b[1]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[5]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[9]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[13]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[2]),v=b[6],w=b[10],_=b[14],x=(b[2]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[6]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[10]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[14]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[3]),v=b[7],w=b[11],_=b[15];return b[3]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[7]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[11]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[15]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,this}},{key:"scale",value:function(g,y,b){return g instanceof a.default.Vector?(y=g.y,b=g.z,g=g.x):g instanceof Array&&(y=g[1],b=g[2],g=g[0]),this.mat4[0]*=g,this.mat4[1]*=g,this.mat4[2]*=g,this.mat4[3]*=g,this.mat4[4]*=y,this.mat4[5]*=y,this.mat4[6]*=y,this.mat4[7]*=y,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(R,q,z,x){q instanceof a.default.Vector?(z=q.y,x=q.z,q=q.x):q instanceof Array&&(z=q[1],x=q[2],q=q[0]);var v=Math.sqrt(q*q+z*z+x*x),v=(q*=1/v,z*=1/v,x*=1/v,this.mat4[0]),w=this.mat4[1],_=this.mat4[2],S=this.mat4[3],C=this.mat4[4],E=this.mat4[5],T=this.mat4[6],I=this.mat4[7],k=this.mat4[8],F=this.mat4[9],D=this.mat4[10],L=this.mat4[11],P=Math.sin(R),R=Math.cos(R),V=1-R,G=q*q*V+R,U=z*q*V+x*P,H=x*q*V-z*P,X=q*z*V-x*P,fe=z*z*V+R,$=x*z*V+q*P,M=q*x*V+z*P,z=z*x*V-q*P,q=x*x*V+R;return this.mat4[0]=v*G+C*U+k*H,this.mat4[1]=w*G+E*U+F*H,this.mat4[2]=_*G+T*U+D*H,this.mat4[3]=S*G+I*U+L*H,this.mat4[4]=v*X+C*fe+k*$,this.mat4[5]=w*X+E*fe+F*$,this.mat4[6]=_*X+T*fe+D*$,this.mat4[7]=S*X+I*fe+L*$,this.mat4[8]=v*M+C*z+k*q,this.mat4[9]=w*M+E*z+F*q,this.mat4[10]=_*M+T*z+D*q,this.mat4[11]=S*M+I*z+L*q,this}},{key:"translate",value:function(x){var y=x[0],b=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*y+this.mat4[4]*b+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*y+this.mat4[5]*b+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*y+this.mat4[6]*b+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*y+this.mat4[7]*b+this.mat4[11]*x}},{key:"rotateX",value:function(g){this.rotate(g,1,0,0)}},{key:"rotateY",value:function(g){this.rotate(g,0,1,0)}},{key:"rotateZ",value:function(g){this.rotate(g,0,0,1)}},{key:"perspective",value:function(v,y,b,x){var v=1/Math.tan(v/2),w=1/(b-x);return this.mat4[0]=v/y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=v,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+b)*w,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*b*w,this.mat4[15]=0,this}},{key:"ortho",value:function(g,y,b,x,v,w){var _=1/(g-y),S=1/(b-x),C=1/(v-w);return this.mat4[0]=-2*_,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*S,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*C,this.mat4[11]=0,this.mat4[12]=(g+y)*_,this.mat4[13]=(x+b)*S,this.mat4[14]=(w+v)*C,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(g,y,b,x){var v=new Array(4),w=this.mat4;return v[0]=w[0]*g+w[4]*y+w[8]*b+w[12]*x,v[1]=w[1]*g+w[5]*y+w[9]*b+w[13]*x,v[2]=w[2]*g+w[6]*y+w[10]*b+w[14]*x,v[3]=w[3]*g+w[7]*y+w[11]*b+w[15]*x,v}},{key:"multiplyPoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,0);return new a.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(b){var y;if(b===this||b===this.mat3)y=this.copy().mat3;else if(b instanceof a.default.Matrix)y=b.mat3;else if(c(b))y=b;else{if(arguments.length!==9)return;y=arguments}var b=this.mat3[0],x=this.mat3[1],v=this.mat3[2];return this.mat3[0]=b*y[0]+x*y[3]+v*y[6],this.mat3[1]=b*y[1]+x*y[4]+v*y[7],this.mat3[2]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[3],x=this.mat3[4],v=this.mat3[5],this.mat3[3]=b*y[0]+x*y[3]+v*y[6],this.mat3[4]=b*y[1]+x*y[4]+v*y[7],this.mat3[5]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[6],x=this.mat3[7],v=this.mat3[8],this.mat3[6]=b*y[0]+x*y[3]+v*y[6],this.mat3[7]=b*y[1]+x*y[4]+v*y[7],this.mat3[8]=b*y[2]+x*y[5]+v*y[8],this}},{key:"column",value:function(g){return new a.default.Vector(this.mat3[3*g],this.mat3[3*g+1],this.mat3[3*g+2])}},{key:"row",value:function(g){return new a.default.Vector(this.mat3[g],this.mat3[g+3],this.mat3[g+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(g,y){return(y=y===void 0?g.copy():y).x=this.row(0).dot(g),y.y=this.row(1).dot(g),y.z=this.row(2).dot(g),y}},{key:"createSubMatrix3x3",value:function(){var g=new a.default.Matrix("mat3");return g.mat3[0]=this.mat4[0],g.mat3[1]=this.mat4[1],g.mat3[2]=this.mat4[2],g.mat3[3]=this.mat4[4],g.mat3[4]=this.mat4[5],g.mat3[5]=this.mat4[6],g.mat3[6]=this.mat4[8],g.mat3[7]=this.mat4[9],g.mat3[8]=this.mat4[10],g}}])&&l(p.prototype,h),m&&l(p,m),d}(),a.default.Matrix);s.default=f},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.RenderBuffer=function(){function l(d,p,h,m,g,y){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.size=d,this.src=p,this.dst=h,this.attr=m,this._renderer=g,this.map=y}var u,c,f;return u=l,(c=[{key:"_prepareBuffer",value:function(d,p){var h,m,g,x=p.attributes,y=this._renderer.GL,b=d.model||d,x=x[this.attr];x&&(h=d[this.dst],0<(m=b[this.src]).length?((g=!h)&&(d[this.dst]=h=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,h),!g&&b.dirtyFlags[this.src]===!1||(g=(d=this.map)?d(m):m,this._renderer._bindBuffer(h,y.ARRAY_BUFFER,g),b.dirtyFlags[this.src]=!1),p.enableAttrib(x,this.size)):(d=x.location)!==-1&&this._renderer.registerEnabled.has(d)&&(y.disableVertexAttribArray(d),this._renderer.registerEnabled.delete(d)))}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.RenderBuffer,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("./p5.RenderBuffer"),u.default.RendererGL.prototype.beginShape=function(m){return this.immediateMode.shapeMode=m!==void 0?m:c.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var p={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},h=(u.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==c.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},u.default.RendererGL.prototype.vertex=function(m,g){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in p){var b=p[y],y=this.immediateMode.geometry[y];y.push.apply(y,d(y.slice(y.length-3*b,y.length-2*b)).concat(d(y.slice(y.length-b,y.length))))}var x,v,w=x=v=0,_=(arguments.length===3?w=arguments[2]:arguments.length===4?(x=arguments[2],v=arguments[3]):arguments.length===5&&(w=arguments[2],x=arguments[3],v=arguments[4]),new u.default.Vector(m,g,w)),_=(this.immediateMode.geometry.vertices.push(_),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),_=(this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(_[0],_[1],_[2],_[3]),this.textureMode!==c.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,v/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,v),this.immediateMode._bezierVertex[0]=m,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=w,this.immediateMode._quadraticVertex[0]=m,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=w,this},u.default.RendererGL.prototype.normal=function(m,g,y){return m instanceof u.default.Vector?this._currentNormal=m:this._currentNormal=new u.default.Vector(m,g,y),this},u.default.RendererGL.prototype.endShape=function(m,g,y,b,x,v){var w,_=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===c.TESS&&(this.immediateMode.shapeMode,c.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),w=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN,w=!0),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._doFill&&!w&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(_),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},u.default.RendererGL.prototype._processVertices=function(m){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,m=m===c.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,m),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===c.TESS,m=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g||m)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},u.default.RendererGL.prototype._calculateEdges=function(m,g,y){var b=[],x=0,v=this.immediateMode.contourIndices.slice(),w=0;switch(m){case c.TRIANGLE_STRIP:for(x=0;x<g.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case c.TRIANGLE_FAN:for(x=1;x<g.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,g.length-1]);break;case c.TRIANGLES:for(x=0;x<g.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case c.LINES:for(x=0;x<g.length-1;x+=2)b.push([x,x+1]);break;case c.QUADS:for(x=0;x<g.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case c.QUAD_STRIP:for(x=0;x<g.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<g.length;x++)x+1<g.length&&x+1!==v[0]?b.push([x,x+1]):((y||w)&&b.push([x,w]),0<v.length&&(w=v.shift()))}return m!==c.TESS&&y&&b.push([g.length-1,0]),b},u.default.RendererGL.prototype._tesselateShape=function(){for(var m=this,g=(this.immediateMode.shapeMode=c.TRIANGLES,[[]]),y=0;y<this.immediateMode.geometry.vertices.length;y++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===y&&(this.immediateMode.contourIndices.shift(),g.push([])),g[g.length-1].push(this.immediateMode.geometry.vertices[y].x,this.immediateMode.geometry.vertices[y].y,this.immediateMode.geometry.vertices[y].z,this.immediateMode.geometry.uvs[2*y],this.immediateMode.geometry.uvs[2*y+1],this.immediateMode.geometry.vertexColors[4*y],this.immediateMode.geometry.vertexColors[4*y+1],this.immediateMode.geometry.vertexColors[4*y+2],this.immediateMode.geometry.vertexColors[4*y+3],this.immediateMode.geometry.vertexNormals[y].x,this.immediateMode.geometry.vertexNormals[y].y,this.immediateMode.geometry.vertexNormals[y].z);for(var b,x=this._triangulate(g),v=this.immediateMode.geometry.vertices,w=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),_=0,S=x.length;_<S;_+=u.default.RendererGL.prototype.tessyVertexSize)w.push.apply(w,d(x.slice(_+5,_+9))),this.normal.apply(this,d(x.slice(_+9,_+12))),this.vertex.apply(this,d(x.slice(_,_+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(C){return C.map(function(E){if(!b.has(E)){var T=v[E],I=m.immediateMode.geometry.vertices.findIndex(function(V){return T.x===V.x&&T.y===V.y&&T.z===V.z});if(I===-1){for(var k=1/0,F=0,D=0;D<m.immediateMode.geometry.vertices.length;D++){var P=m.immediateMode.geometry.vertices[D],R=T.x-P.x,L=T.y-P.y,P=T.z-P.z,R=R*R+L*L+P*P;R<k&&(k=R,F=D)}I=F}b.set(E,I)}return b.get(E)})})),this.immediateMode.geometry.vertexColors=w},u.default.RendererGL.prototype._drawImmediateFill=function(){var m,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,y=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,m=this._getImmediateFillShader(),this._setFillUniforms(m),!0),x=!1,v=void 0;try{for(var w,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(w=_.next()).done);b=!0)w.value._prepareBuffer(this.immediateMode.geometry,m)}catch(S){x=!0,v=S}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}if(m.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),g===1)y.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{y.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,g)}catch{console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode")}m.unbindShader()},u.default.RendererGL.prototype._drawImmediateStroke=function(){var m=this.GL,g=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),y=(this._setStrokeUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(this.immediateMode.geometry,g)}catch(_){b=!0,x=_}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),m.drawArrays(m.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),g.unbindShader()},u.default.RendererGL);s.default=h},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=(o("./p5.RendererGL"),o("./p5.RenderBuffer"),function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants")));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.RendererGL.prototype.freeGeometry=function(p){p.gid?this._freeBuffers(p.gid):console.warn("The model you passed to freeGeometry does not have an id!")},u.default.RendererGL.prototype._initBufferDefaults=function(p){var h;return this._freeBuffers(p),1e3<Object.keys(this.retainedMode.geometry).length&&(h=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(h)),this.retainedMode.geometry[p]={}},u.default.RendererGL.prototype._freeBuffers=function(p){var h,m=this.retainedMode.geometry[p];function g(y){var b=!0,x=!1,v=void 0;try{for(var w,_=y[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var S=w.value;m[S.dst]&&(h.deleteBuffer(m[S.dst]),m[S.dst]=null)}}catch(C){x=!0,v=C}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}}m&&(delete this.retainedMode.geometry[p],h=this.GL,m.indexBuffer&&h.deleteBuffer(m.indexBuffer),g(this.retainedMode.buffers.stroke),g(this.retainedMode.buffers.fill))},u.default.RendererGL.prototype.createBuffers=function(x,h){var m,g,y,b=this.GL,x=this._initBufferDefaults(x),v=(x.model=h,x.indexBuffer);return h.faces.length?(v=v||(x.indexBuffer=b.createBuffer()),y=(g=(m=u.default.RendererGL.prototype._flatten(h.faces)).some(function(w){return 65535<w}))?Uint32Array:Uint16Array,this._bindBuffer(v,b.ELEMENT_ARRAY_BUFFER,m,y),x.indexBufferType=g?b.UNSIGNED_INT:b.UNSIGNED_SHORT,x.vertexCount=3*h.faces.length):(v&&(b.deleteBuffer(v),x.indexBuffer=null),x.vertexCount=h.vertices?h.vertices.length:0),x.lineVertexCount=h.lineVertices?h.lineVertices.length/3:0,x},u.default.RendererGL.prototype.drawBuffers=function(p){var h=this.GL,m=this.retainedMode.geometry[p];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[p].vertexCount){this._useVertexColor=0<m.model.vertexColors.length;var g=this._getRetainedFillShader(),y=(this._setFillUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.retainedMode.buffers.fill[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(m,g)}catch(T){b=!0,x=T}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),m.indexBuffer&&this._bindBuffer(m.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,m.model.hasFillTransparency()),this._drawElements(h.TRIANGLES,p),g.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<m.lineVertexCount){this._useLineColor=0<m.model.vertexStrokeColors.length;var _=this._getRetainedStrokeShader(),S=(this._setStrokeUniforms(_),!0),b=!1,x=void 0;try{for(var C,E=this.retainedMode.buffers.stroke[Symbol.iterator]();!(S=(C=E.next()).done);S=!0)C.value._prepareBuffer(m,_)}catch(k){b=!0,x=k}finally{try{S||E.return==null||E.return()}finally{if(b)throw x}}_.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,m.model.hasStrokeTransparency()),this._drawArrays(h.TRIANGLES,p),_.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(m),this},u.default.RendererGL.prototype.drawBuffersScaled=function(p,h,m,g){var y=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,m,g),this.drawBuffers(p)}finally{this.uMVMatrix=y}},u.default.RendererGL.prototype._drawArrays=function(p,h){return this.GL.drawArrays(p,0,this.retainedMode.geometry[h].lineVertexCount),this},u.default.RendererGL.prototype._drawElements=function(p,m){var m=this.retainedMode.geometry[m],g=this.GL;if(m.indexBuffer){if(this._pInst.webglVersion!==c.WEBGL2&&m.indexBufferType===g.UNSIGNED_INT&&!g.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");g.drawElements(g.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else g.drawArrays(p||g.TRIANGLES,0,m.vertexCount)},u.default.RendererGL.prototype._drawPoints=function(p,h){var m=this.GL,g=this._getImmediatePointShader();this._setPointUniforms(g),this._bindBuffer(h,m.ARRAY_BUFFER,this._vToNArray(p),Float32Array,m.STATIC_DRAW),g.enableAttrib(g.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),m.drawArrays(m.Points,0,p.length),g.unbindShader()};var d=u.default.RendererGL;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(D,i,s){"use strict";function a(U){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(U)}function l(U){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(H){return a(H)}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":a(H)})(U)}D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.get-own-property-descriptor"),D("core-js/modules/es.object.get-prototype-of"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.reflect.construct"),D("core-js/modules/es.reflect.get"),D("core-js/modules/es.regexp.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/es.weak-map"),D("core-js/modules/web.dom-collections.iterator"),D("core-js/modules/es.symbol"),D("core-js/modules/es.symbol.description"),D("core-js/modules/es.symbol.iterator"),D("core-js/modules/es.array.concat"),D("core-js/modules/es.array.copy-within"),D("core-js/modules/es.array.every"),D("core-js/modules/es.array.fill"),D("core-js/modules/es.array.flat"),D("core-js/modules/es.array.flat-map"),D("core-js/modules/es.array.from"),D("core-js/modules/es.array.includes"),D("core-js/modules/es.array.iterator"),D("core-js/modules/es.array.map"),D("core-js/modules/es.array.slice"),D("core-js/modules/es.array.some"),D("core-js/modules/es.array.unscopables.flat"),D("core-js/modules/es.array.unscopables.flat-map"),D("core-js/modules/es.map"),D("core-js/modules/es.object.assign"),D("core-js/modules/es.object.to-string"),D("core-js/modules/es.set"),D("core-js/modules/es.string.includes"),D("core-js/modules/es.string.iterator"),D("core-js/modules/es.typed-array.float32-array"),D("core-js/modules/es.typed-array.float64-array"),D("core-js/modules/es.typed-array.int16-array"),D("core-js/modules/es.typed-array.uint8-array"),D("core-js/modules/es.typed-array.uint16-array"),D("core-js/modules/es.typed-array.uint32-array"),D("core-js/modules/es.typed-array.copy-within"),D("core-js/modules/es.typed-array.every"),D("core-js/modules/es.typed-array.fill"),D("core-js/modules/es.typed-array.filter"),D("core-js/modules/es.typed-array.find"),D("core-js/modules/es.typed-array.find-index"),D("core-js/modules/es.typed-array.for-each"),D("core-js/modules/es.typed-array.includes"),D("core-js/modules/es.typed-array.index-of"),D("core-js/modules/es.typed-array.iterator"),D("core-js/modules/es.typed-array.join"),D("core-js/modules/es.typed-array.last-index-of"),D("core-js/modules/es.typed-array.map"),D("core-js/modules/es.typed-array.reduce"),D("core-js/modules/es.typed-array.reduce-right"),D("core-js/modules/es.typed-array.reverse"),D("core-js/modules/es.typed-array.set"),D("core-js/modules/es.typed-array.slice"),D("core-js/modules/es.typed-array.some"),D("core-js/modules/es.typed-array.sort"),D("core-js/modules/es.typed-array.subarray"),D("core-js/modules/es.typed-array.to-locale-string"),D("core-js/modules/es.typed-array.to-string"),D("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.readPixelsWebGL=V,s.readPixelWebGL=G,s.default=void 0;var u=m(D("../core/main")),c=function(U){if(U&&U.__esModule)return U;if(U===null||l(U)!=="object"&&typeof U!="function")return{default:U};var H=h();if(H&&H.has(U))return H.get(U);var X,fe={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(X in U){var M;Object.prototype.hasOwnProperty.call(U,X)&&((M=$?Object.getOwnPropertyDescriptor(U,X):null)&&(M.get||M.set)?Object.defineProperty(fe,X,M):fe[X]=U[X])}return fe.default=U,H&&H.set(U,fe),fe}(D("../core/constants")),f=m(D("./GeometryBuilder")),d=m(D("libtess")),p=(D("./p5.Shader"),D("./p5.Camera"),D("../core/p5.Renderer"),D("./p5.Matrix"),D("./p5.Framebuffer"),D("path"),D("./p5.Texture"));function h(){var U;return typeof WeakMap!="function"?null:(U=new WeakMap,h=function(){return U},U)}function m(U){return U&&U.__esModule?U:{default:U}}function g(U){return function(H){if(Array.isArray(H)){for(var X=0,fe=new Array(H.length);X<H.length;X++)fe[X]=H[X];return fe}}(U)||function(H){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]")return Array.from(H)}(U)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(U,H){for(var X=0;X<H.length;X++){var fe=H[X];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(U,fe.key,fe)}}function b(U,H,X){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,$,M){var z=function(q,ee){for(;!Object.prototype.hasOwnProperty.call(q,ee)&&(q=_(q))!==null;);return q}(z,$);if(z)return(z=Object.getOwnPropertyDescriptor(z,$)).get?z.get.call(M):z.value})(U,H,X||U)}function x(U,H){return(x=Object.setPrototypeOf||function(X,fe){return X.__proto__=fe,X})(U,H)}function v(U){return function(){var H,X,fe=_(U);return H=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(H=_(this).constructor,Reflect.construct(fe,arguments,H)):fe.apply(this,arguments),fe=this,!(X=H)||l(X)!=="object"&&typeof X!="function"?w(fe):X}}function w(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function _(U){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)})(U)}function S(U,H,X){H in U?Object.defineProperty(U,H,{value:X,enumerable:!0,configurable:!0,writable:!0}):U[H]=X}function C(U,H){F+="#define STROKE_CAP_".concat(U," ").concat(H,`
`),I[c[U]]=H}function E(U,H){F+="#define STROKE_JOIN_".concat(U," ").concat(H,`
`),k[c[U]]=H}var T,I={},k={},F="",D=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),E("ROUND",0),E("MITER",1),E("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),L={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:D+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:D+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:F+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:F+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},P=L.sphereMappingFrag;for(T in L)L[T]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+L[T];S(D={},c.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),S(D,c.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),S(D,c.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),S(D,c.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),S(D,c.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),S(D,c.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),S(D,c.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),S(D,c.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var R=D;function V(U,H,le,fe,$,M,z,q,ee,ae){var Q=H.getParameter(H.FRAMEBUFFER_BINDING),le=(H.bindFramebuffer(H.FRAMEBUFFER,le),q===H.RGBA?4:3),ie=M*z*le,K=ee===H.UNSIGNED_BYTE?Uint8Array:Float32Array;if(U instanceof K&&U.length===ie||(U=new K(ie)),H.readPixels(fe,ae?ae-$-z:$,M,z,q,ee,U),H.bindFramebuffer(H.FRAMEBUFFER,Q),ae)for(var ge=Math.floor(z/2),ne=new K(M*le),ye=0;ye<ge;ye++){var xe=ye*M*4,De=(z-ye-1)*M*4;ne.set(U.subarray(xe,xe+4*M)),U.copyWithin(xe,De,De+4*M),U.set(ne,De)}return U}function G(U,ee,X,fe,$,M,z){var q=U.getParameter(U.FRAMEBUFFER_BINDING),ee=(U.bindFramebuffer(U.FRAMEBUFFER,ee),$===U.RGBA?4:3),ee=new(M===U.UNSIGNED_BYTE?Uint8Array:Float32Array)(ee);return U.readPixels(X,z?z-fe-1:fe,1,1,$,M,ee),U.bindFramebuffer(U.FRAMEBUFFER,q),Array.from(ee)}u.default.prototype.setAttributes=function(U,H){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var X=!0;if(H!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[U]!==H&&(this._glAttributes[U]=H,X=!1)):U instanceof Object&&this._glAttributes!==U&&(this._glAttributes=U,X=!1),this._renderer.isP3D&&!X){if(!this._setupDone){for(var fe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(fe))return void u.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},u.default.RendererGL=function(U){var H=$;if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),U&&x(H,U);var X,fe=v($);function $(M,z,q,ee){if(this instanceof $)return(M=fe.call(this,M,z,q))._setAttributeDefaults(z),M._initContext(),M.isP3D=!0,M.geometryBuilder=void 0,M.GL=M.drawingContext,M._pInst._setProperty("drawingContext",M.drawingContext),M._isErasing=!1,M._clipDepths=[],M._isClipApplied=!1,M._stencilTestOn=!1,M._enableLighting=!1,M.ambientLightColors=[],M.mixedAmbientLight=[],M.mixedSpecularColor=[],M.specularColors=[1,1,1],M.directionalLightDirections=[],M.directionalLightDiffuseColors=[],M.directionalLightSpecularColors=[],M.pointLightPositions=[],M.pointLightDiffuseColors=[],M.pointLightSpecularColors=[],M.spotLightPositions=[],M.spotLightDirections=[],M.spotLightDiffuseColors=[],M.spotLightSpecularColors=[],M.spotLightAngle=[],M.spotLightConc=[],M.activeImageLight=null,M.diffusedTextures=new Map,M.specularTextures=new Map,M.drawMode=c.FILL,M.curFillColor=M._cachedFillStyle=[1,1,1,1],M.curAmbientColor=M._cachedFillStyle=[1,1,1,1],M.curSpecularColor=M._cachedFillStyle=[0,0,0,0],M.curEmissiveColor=M._cachedFillStyle=[0,0,0,0],M.curStrokeColor=M._cachedStrokeStyle=[0,0,0,1],M.curBlendMode=c.BLEND,M.preEraseBlend=void 0,M._cachedBlendMode=void 0,M.webglVersion===c.WEBGL2?M.blendExt=M.GL:M.blendExt=M.GL.getExtension("EXT_blend_minmax"),M._isBlending=!1,M._hasSetAmbient=!1,M._useSpecularMaterial=!1,M._useEmissiveMaterial=!1,M._useNormalMaterial=!1,M._useShininess=1,M._useMetalness=0,M._useLineColor=!1,M._useVertexColor=!1,M.registerEnabled=new Set,M._tint=[255,255,255,255],M.constantAttenuation=1,M.linearAttenuation=0,M.quadraticAttenuation=0,M.uMVMatrix=new u.default.Matrix,M.uPMatrix=new u.default.Matrix,M.uNMatrix=new u.default.Matrix("mat3"),M.curMatrix=new u.default.Matrix("mat3"),M._currentNormal=new u.default.Vector(0,0,1),M._curCamera=new u.default.Camera(w(M)),M._curCamera._computeCameraDefaultSettings(),M._curCamera._setDefaultCamera(),M.filterCamera=new u.default.Camera(w(M)),M.filterCamera._computeCameraDefaultSettings(),M.filterCamera._setDefaultCamera(),M.prevTouches=[],M.zoomVelocity=0,M.rotateVelocity=new u.default.Vector(0,0),M.moveVelocity=new u.default.Vector(0,0),M.executeZoom=!1,M.executeRotateAndMove=!1,M.specularShader=void 0,M.sphereMapping=void 0,M.diffusedShader=void 0,M._defaultLightShader=void 0,M._defaultImmediateModeShader=void 0,M._defaultNormalShader=void 0,M._defaultColorShader=void 0,M._defaultPointShader=void 0,M.userFillShader=void 0,M.userStrokeShader=void 0,M.userPointShader=void 0,M.retainedMode={geometry:{},buffers:{stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(M)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(M)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(M)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(M))],fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(M),M._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(M),M._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(M)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(M),M._flatten)],text:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(M),M._vToNArray),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(M),M._flatten)]}},M.immediateMode={geometry:new u.default.Geometry,shapeMode:c.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(M),M._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(M),M._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(M)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(M),M._flatten)],stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(M)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(M)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(M)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(M)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(M))],point:M.GL.createBuffer()}},M.pointSize=5,M.curStrokeWeight=1,M.curStrokeCap=c.ROUND,M.curStrokeJoin=c.ROUND,M.textures=new Map,M.framebuffers=new Set,M.activeFramebuffers=[],M.filterShader=void 0,M.filterLayer=void 0,M.filterLayerTemp=void 0,M.defaultFilterShaders={},M.textureMode=c.IMAGE,M.textureWrapX=c.CLAMP,M.textureWrapY=c.CLAMP,M._tex=null,M._curveTightness=6,M._lookUpTableBezier=[],M._lookUpTableQuadratic=[],M._lutBezierDetail=0,M._lutQuadraticDetail=0,M.isProcessingVertices=!1,M._tessy=M._initTessy(),M.fontInfos={},M._curShader=void 0,M;throw new TypeError("Cannot call a class as a function")}return H=$,(U=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var M;if(this.geometryBuilder)return M=this.geometryBuilder.finish(),this.geometryBuilder=void 0,M;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(M){return this.beginGeometry(),M(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(M){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};M._glAttributes===null?M._glAttributes=z:M._glAttributes=Object.assign(z,M._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?c.WEBGL2:c.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var M=this.drawingContext;M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var M=this.drawingContext;return M.getParameter(M.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(M,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(u.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),q=Math.min(M,ee),ee=Math.min(z,ee);return q===M&&ee===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(q,", height: ").concat(ee,".")),{adjustedWidth:q,adjustedHeight:ee}}},{key:"_resetContext",value:function(M,z){var q,ee=this.width,ae=this.height,le=this.canvas.id,Q=this._pInst instanceof u.default.Graphics,le=(Q?((q=this._pInst).canvas.parentNode.removeChild(q.canvas),q.canvas=document.createElement("canvas"),(q._pInst._userNode||document.body).appendChild(q.canvas),u.default.Element.call(q,q.canvas,q._pInst),q.width=ee,q.height=ae):((q=this.canvas)&&q.parentNode.removeChild(q),(q=document.createElement("canvas")).id=le,(this._pInst._userNode||document.body).appendChild(q),this._pInst.canvas=q,this.canvas=q),new u.default.RendererGL(this._pInst.canvas,this._pInst,!Q));this._pInst._setProperty("_renderer",le),le.resize(ee,ae),le._applyDefaults(),Q||this._pInst._elements.push(le),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,M)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),M=ee.levels[0]/255,z=ee.levels[1]/255,q=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(M,z,q,ee)}},{key:"fill",value:function(M,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ae._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(M,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ae._array}},{key:"strokeCap",value:function(M){this.curStrokeCap=M}},{key:"strokeJoin",value:function(M){this.curStrokeJoin=M}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(M,z){M.width===z.width&&M.height===z.height||M.resize(z.width,z.height),M.pixelDensity()!==z.pixelDensity()&&M.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var M,z,q=this,ee=this.getFilterLayer(),ae=void 0,Q=void 0,le=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(Q=arguments.length<=0?void 0:arguments[0],S(M={},c.BLUR,3),S(M,c.POSTERIZE,4),S(M,c.THRESHOLD,.5),ae=Q in(M=M)&&(arguments.length<=1?void 0:arguments[1])===void 0?M[Q]:arguments.length<=1?void 0:arguments[1],Q in this.defaultFilterShaders||(this.defaultFilterShaders[Q]=new u.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,R[Q])),this.filterShader=this.defaultFilterShaders[Q]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ie=(this.matchSize(ee,le),ee.draw(function(){return q._pInst.clear()}),[1/(le.width*le.pixelDensity()),1/(le.height*le.pixelDensity())]);Q===c.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,le),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(c.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ie),this.filterShader.setUniform("canvasSize",[le.width,le.height]),this.filterShader.setUniform("radius",Math.max(1,ae)),z.draw(function(){q.filterShader.setUniform("direction",[1,0]),q.filterShader.setUniform("tex0",le),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),ee.draw(function(){q.filterShader.setUniform("direction",[0,1]),q.filterShader.setUniform("tex0",z),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.pop()):ee.draw(function(){q._pInst.noStroke(),q._pInst.blendMode(c.BLEND),q._pInst.shader(q.filterShader),q.filterShader.setUniform("tex0",le),q.filterShader.setUniform("texelSize",ie),q.filterShader.setUniform("canvasSize",[le.width,le.height]),q.filterShader.setUniform("filterParameter",ae),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(c.CORNER),this._pInst.blendMode(c.BLEND),le.filterCamera._resize(),this._pInst.setCamera(le.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-le.width/2,-le.height/2,le.width,le.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(M){return M?this._pInst.pixelDensity(M):this._pInst.pixelDensity()}},{key:"blendMode",value:function(M){M===c.DARKEST||M===c.LIGHTEST||M===c.ADD||M===c.BLEND||M===c.SUBTRACT||M===c.SCREEN||M===c.EXCLUSION||M===c.REPLACE||M===c.MULTIPLY||M===c.REMOVE?this.curBlendMode=M:M!==c.BURN&&M!==c.OVERLAY&&M!==c.HARD_LIGHT&&M!==c.SOFT_LIGHT&&M!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(M,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(c.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,M/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},M=(b(_($.prototype),"beginClip",this).call(this,M),this.drawTarget()._isClipApplied=!0,this.GL);M.clearStencil(0),M.clear(M.STENCIL_BUFFER_BIT),M.enable(M.STENCIL_TEST),this._stencilTestOn=!0,M.stencilFunc(M.ALWAYS,1,255),M.stencilOp(M.KEEP,M.KEEP,M.REPLACE),M.disable(M.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var M=this.GL;M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.stencilFunc(this._clipInvert?M.EQUAL:M.NOTEQUAL,0,255),M.enable(M.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(_($.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(M){this.curStrokeWeight!==M&&(this.pointSize=M,this.curStrokeWeight=M)}},{key:"_getPixel",value:function(M,z){var q=this.GL;return G(q,null,M,z,q.RGBA,q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var M,z,q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(M=this._pInst._pixelDensity,z=this.GL,q._setProperty("pixels",V(q.pixels,z,null,0,0,this.width*M,this.height*M,z.RGBA,z.UNSIGNED_BYTE,this.height*M)))}},{key:"updatePixels",value:function(){var M=this._getTempFramebuffer();M.pixels=this._pixelsState.pixels,M.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(c.CENTER),this._pInst.image(M,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:c.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:c.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(M){return this.retainedMode.geometry[M]!==void 0}},{key:"viewport",value:function(M,z){this._viewport=[0,0,M,z],this.GL.viewport(0,0,M,z)}},{key:"resize",value:function(ae,ee){u.default.Renderer.prototype.resize.call(this,ae,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var ae=this._pixelsState,q=(ae.pixels!==void 0&&ae._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,ae=void 0;try{for(var Q,le=this.framebuffers[Symbol.iterator]();!(q=(Q=le.next()).done);q=!0)Q.value._canvasSizeChanged()}catch(ie){ee=!0,ae=ie}finally{try{q||le.return==null||le.return()}finally{if(ee)throw ae}}}},{key:"clear",value:function(){var M=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,q=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,ae=this.activeFramebuffer();ae&&ae.format===c.UNSIGNED_BYTE&&!ae.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(M*ee,z*ee,q*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(M,z,q,ee,ae,Q){arguments.length===16?u.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([M,z,0,0,q,ee,0,0,0,0,1,0,ae,Q,0,1])}},{key:"translate",value:function(M,z,q){return M instanceof u.default.Vector&&(q=M.z,z=M.y,M=M.x),this.uMVMatrix.translate([M,z,q]),this}},{key:"scale",value:function(M,z,q){return this.uMVMatrix.scale(M,z,q),this}},{key:"rotate",value:function(M,z){return z===void 0?this.rotateZ(M):(u.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(M){return this.rotate(M,1,0,0),this}},{key:"rotateY",value:function(M){return this.rotate(M,0,1,0),this}},{key:"rotateZ",value:function(M){return this.rotate(M,0,0,1),this}},{key:"push",value:function(){var M=u.default.Renderer.prototype.push.apply(this),z=M.properties;return z.uMVMatrix=this.uMVMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,M}},{key:"pop",value:function(){var M;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,q=new Array(z),ee=0;ee<z;ee++)q[ee]=arguments[ee];(M=b(_($.prototype),"pop",this)).call.apply(M,[this].concat(q)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var M=this.drawTarget();M._isClipApplied!==this._stencilTestOn&&(M._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var M=this.userStrokeShader;return M&&M.isStrokeShader()?M:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(M){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(P)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",M),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var M=this.userFillShader;if(this._useNormalMaterial&&(!M||!M.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getImmediateModeShader();return M}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var M=this.userFillShader;if(this._enableLighting){if(!M||!M.isLightShader())return this._getLightShader()}else if(this._tex){if(!M||!M.isTextureShader())return this._getLightShader()}else if(!M)return this._getColorShader();return M}},{key:"_getImmediatePointShader",value:function(){var M=this.userPointShader;return M&&M.isPointShader()?M:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+L.phongFrag):this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+L.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===c.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(M,z){var q="";return this.webglVersion===c.WEBGL2&&(q+=`#version 300 es
#define WEBGL2
`),M==="vert"?q+=`#define VERTEX_SHADER
`:M==="frag"&&(q+=`#define FRAGMENT_SHADER
`),z&&(q+="precision ".concat(z,` float;
`)),q}},{key:"_getEmptyTexture",value:function(){var M;return this._emptyTexture||((M=new u.default.Image(1,1)).set(0,0,255),this._emptyTexture=new u.default.Texture(this,M)),this._emptyTexture}},{key:"getTexture",value:function(M){M instanceof u.default.Framebuffer&&(M=M.color);var z=this.textures.get(M);return z||(z=new u.default.Texture(this,M),this.textures.set(M,z),z)}},{key:"getDiffusedTexture",value:function(M){var z,q,ee=this;return this.diffusedTextures.get(M)!=null?this.diffusedTextures.get(M):(z=Math.floor(M.height/M.width*200),q=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(L.imageLightVert,L.imageLightDiffusedFrag)),q.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",M),ee._pInst.noStroke(),ee._pInst.rectMode(c.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(M,q),q)}},{key:"getSpecularTexture",value:function(M){var z=this;if(this.specularTextures.get(M)!=null)return this.specularTextures.get(M);for(var q,ee=[],ae=this._pInst.createFramebuffer({width:512,height:512,density:1}),Q=Math.log(512)/Math.log(2),le=(this.specularShader||(this.specularShader=this._pInst.createShader(L.imageLightVert,L.imageLightSpecularFrag)),512);1<=le;le/=2)(function(ie){ae.resize(ie,ie);var K=1-Math.log(ie)/Math.log(2)/Q;ae.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",M),z.specularShader.setUniform("roughness",K),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(ie,ie)}),ee.push(ae.get().drawingContext.getImageData(0,0,ie,ie))})(le);return ae.remove(),q=new p.MipmapTexture(this,ee,{}),this.specularTextures.set(M,q),q}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(M){return new u.default.Framebuffer(this,M)}},{key:"_setStrokeUniforms",value:function(M){M.bindShader(),M.setUniform("uUseLineColor",this._useLineColor),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uStrokeWeight",this.curStrokeWeight),M.setUniform("uStrokeCap",I[this.curStrokeCap]),M.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(M){var z=this,q=(M.bindShader(),this.mixedSpecularColor=g(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,ae){return z.curFillColor[ae]*z._useMetalness+ee*(1-z._useMetalness)})),M.setUniform("uUseVertexColor",this._useVertexColor),M.setUniform("uMaterialColor",this.curFillColor),M.setUniform("isTexture",!!this._tex),this._tex&&M.setUniform("uSampler",this._tex),M.setUniform("uTint",this._tint),M.setUniform("uHasSetAmbient",this._hasSetAmbient),M.setUniform("uAmbientMatColor",this.curAmbientColor),M.setUniform("uSpecularMatColor",this.mixedSpecularColor),M.setUniform("uEmissiveMatColor",this.curEmissiveColor),M.setUniform("uSpecular",this._useSpecularMaterial),M.setUniform("uEmissive",this._useEmissiveMaterial),M.setUniform("uShininess",this._useShininess),M.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(M),M.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),q=(M.setUniform("uPointLightCount",q),M.setUniform("uPointLightLocation",this.pointLightPositions),M.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),M.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),q=(M.setUniform("uDirectionalLightCount",q),M.setUniform("uLightingDirection",this.directionalLightDirections),M.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),M.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),q=(this.mixedAmbientLight=g(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=z._useMetalness,Math.max(0,ee)})),M.setUniform("uAmbientLightCount",q),M.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);M.setUniform("uSpotLightCount",q),M.setUniform("uSpotLightAngle",this.spotLightAngle),M.setUniform("uSpotLightConc",this.spotLightConc),M.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),M.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),M.setUniform("uSpotLightLocation",this.spotLightPositions),M.setUniform("uSpotLightDirection",this.spotLightDirections),M.setUniform("uConstantAttenuation",this.constantAttenuation),M.setUniform("uLinearAttenuation",this.linearAttenuation),M.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),M.bindTextures()}},{key:"_setImageLightUniforms",value:function(M){var z,q;M.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),M.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),q=20/this._useShininess,M.setUniform("levelOfDetail",8*q),M.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(M){M.bindShader(),M.setUniform("uMaterialColor",this.curStrokeColor),M.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(M,z,q,ee,ae){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,M),q!==void 0&&((M=q)instanceof u.default.DataArray?M=q.dataArray():M instanceof(ee||Float32Array)||(M=new(ee||Float32Array)(M)),this.GL.bufferData(z,M,ae||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(M,z){return M.length===z.length&&M.every(function(q,ee){return q===z[ee]})}},{key:"_isTypedArray",value:function(M){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return M instanceof z})}},{key:"_flatten",value:function(M){return M.flat()}},{key:"_vToNArray",value:function(M){return M.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(M){var z=M*M,q=1-M,ee=q*q;return[ee*q,3*ee*M,3*q*z,z*M]}},{key:"_quadraticCoefficients",value:function(M){var z=1-M;return[z*z,2*z*M,M*M]}},{key:"_bezierToCatmull",value:function(M){return[M[1],M[1]+(M[2]-M[0])/this._curveTightness,M[2]-(M[3]-M[1])/this._curveTightness,M[2]]}},{key:"_initTessy",value:function(){var M=new d.default.GluTesselator;return M.gluTessCallback(d.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,q){var ee=!0,ae=!1,Q=void 0;try{for(var le,ie=z[Symbol.iterator]();!(ee=(le=ie.next()).done);ee=!0){var K=le.value;q.push(K)}}catch(ge){ae=!0,Q=ge}finally{try{ee||ie.return==null||ie.return()}finally{if(ae)throw Q}}}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==d.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_COMBINE,function(z,q,ee){for(var ae=new Array(u.default.RendererGL.prototype.tessyVertexSize).fill(0),Q=0;Q<ee.length;Q++)for(var le=0;le<ae.length;le++)ee[Q]!==0&&q[Q]&&(ae[le]+=q[Q][le]*ee[Q]);return ae}),M.gluTessCallback(d.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),M.gluTessProperty(d.default.gluEnum.GLU_TESS_WINDING_RULE,d.default.windingRule.GLU_TESS_WINDING_NONZERO),M}},{key:"_triangulate",value:function(M){var z=M[0]?M[0][2]:void 0,q=!0,ee=!0,K=!1,ne=void 0;try{for(var ae,Q=M[Symbol.iterator]();!(ee=(ae=Q.next()).done);ee=!0)for(var le=ae.value,ie=0;ie<le.length;ie+=u.default.RendererGL.prototype.tessyVertexSize)if(le[ie+2]!==z){q=!1;break}}catch(at){K=!0,ne=at}finally{try{ee||Q.return==null||Q.return()}finally{if(K)throw ne}}q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var K=[],ge=(this._tessy.gluTessBeginPolygon(K),!0),ne=!1,ye=void 0;try{for(var xe,De=M[Symbol.iterator]();!(ge=(xe=De.next()).done);ge=!0){var Te=xe.value;this._tessy.gluTessBeginContour();for(var Fe=0;Fe<Te.length;Fe+=u.default.RendererGL.prototype.tessyVertexSize){var $e=Te.slice(Fe,Fe+u.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex($e,$e)}this._tessy.gluTessEndContour()}}catch(at){ne=!0,ye=at}finally{try{ge||De.return==null||De.return()}finally{if(ne)throw ye}}return this._tessy.gluTessEndPolygon(),K}}])&&y(H.prototype,U),X&&y(H,X),$}(u.default.Renderer),u.default.prototype._assert3d=function(U){if(!this._renderer.isP3D)throw new Error("".concat(U,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},u.default.RendererGL.prototype.tessyVertexSize=12,D=u.default.RendererGL,s.default=D},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Shader=function(){function u(p,h,m){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=h,this._fragSrc=m,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var c,f,d;return c=u,(f=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return a.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return a.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(p){var h=new a.default.Shader(p._renderer,this._vertSrc,this._fragSrc);return h.ensureCompiledOnContext(p),h}},{key:"ensureCompiledOnContext",value:function(p){if(this._glProgram!==0&&this._renderer!==p._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=p._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,h=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),m=0;m<h;++m){var g=p.getActiveAttrib(this._glProgram,m),y=g.name,b=p.getAttribLocation(this._glProgram,y),x={};x.name=y,x.location=b,x.index=m,x.type=g.type,x.size=g.size,this.attributes[y]=x}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,h=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),m=0,g=0;g<h;++g){var y=p.getActiveUniform(this._glProgram,g),b={},x=(b.location=p.getUniformLocation(this._glProgram,y.name),b.size=y.size,y.name);1<y.size&&(x=x.substring(0,x.indexOf("[0]"))),b.name=x,b.type=y.type,b._cachedData=void 0,b.type===p.SAMPLER_2D&&(b.samplerIndex=m,m++,this.samplers.push(b)),b.isArray=1<y.size||b.type===p.FLOAT_MAT3||b.type===p.FLOAT_MAT4||b.type===p.FLOAT_VEC2||b.type===p.FLOAT_VEC3||b.type===p.FLOAT_VEC4||b.type===p.INT_VEC2||b.type===p.INT_VEC4||b.type===p.INT_VEC3,this.uniforms[x]=b}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,h=!0,m=!1,g=void 0;try{for(var y,b=this.samplers[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var x=y.value,v=x.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+x.samplerIndex),v.bindTexture(),v.update(),p.uniform1i(x.location,x.samplerIndex)}}catch(w){m=!0,g=w}finally{try{h||b.return==null||b.return()}finally{if(m)throw g}}}},{key:"updateTextures",value:function(){var p=!0,h=!1,m=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value.texture;b&&b.update()}}catch(x){h=!0,m=x}finally{try{p||y.return==null||y.return()}finally{if(h)throw m}}}},{key:"unbindTextures",value:function(){var p=!0,h=!1,m=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;this.setUniform(b.name,this._renderer._getEmptyTexture())}}catch(x){h=!0,m=x}finally{try{p||y.return==null||y.return()}finally{if(h)throw m}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,h=this._renderer.uPMatrix,m=this._renderer.uMVMatrix,g=m.copy();g.mult(h),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",h.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,h){var m=this.uniforms[p];if(m){var g=this._renderer.GL;if(m.isArray){if(m._cachedData&&this._renderer._arraysEqual(m._cachedData,h))return;m._cachedData=h.slice(0)}else{if(m._cachedData&&m._cachedData===h)return;Array.isArray(h)?m._cachedData=h.slice(0):m._cachedData=h}var y=m.location;switch(this.useProgram(),m.type){case g.BOOL:h===!0?g.uniform1i(y,1):g.uniform1i(y,0);break;case g.INT:1<m.size?h.length&&g.uniform1iv(y,h):g.uniform1i(y,h);break;case g.FLOAT:1<m.size?h.length&&g.uniform1fv(y,h):g.uniform1f(y,h);break;case g.FLOAT_MAT3:g.uniformMatrix3fv(y,!1,h);break;case g.FLOAT_MAT4:g.uniformMatrix4fv(y,!1,h);break;case g.FLOAT_VEC2:1<m.size?h.length&&g.uniform2fv(y,h):g.uniform2f(y,h[0],h[1]);break;case g.FLOAT_VEC3:1<m.size?h.length&&g.uniform3fv(y,h):g.uniform3f(y,h[0],h[1],h[2]);break;case g.FLOAT_VEC4:1<m.size?h.length&&g.uniform4fv(y,h):g.uniform4f(y,h[0],h[1],h[2],h[3]);break;case g.INT_VEC2:1<m.size?h.length&&g.uniform2iv(y,h):g.uniform2i(y,h[0],h[1]);break;case g.INT_VEC3:1<m.size?h.length&&g.uniform3iv(y,h):g.uniform3i(y,h[0],h[1],h[2]);break;case g.INT_VEC4:1<m.size?h.length&&g.uniform4iv(y,h):g.uniform4i(y,h[0],h[1],h[2],h[3]);break;case g.SAMPLER_2D:g.activeTexture(g.TEXTURE0+m.samplerIndex),m.texture=h instanceof a.default.Texture?h:this._renderer.getTexture(h),g.uniform1i(y,m.samplerIndex),m.texture.src.gifProperties&&m.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(p){return p!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,h,m,g,y,b){var x;return p&&(p=p.location)!==-1&&(x=this._renderer.GL,this._renderer.registerEnabled.has(p)||(x.enableVertexAttribArray(p),this._renderer.registerEnabled.add(p)),this._renderer.GL.vertexAttribPointer(p,h,m||x.FLOAT,g||!1,y||0,b||0)),this}},{key:"disableRemainingAttributes",value:function(){var p=this,h=!0,m=!1,g=void 0;try{for(var y,b=this._renderer.registerEnabled.values()[Symbol.iterator]();!(h=(y=b.next()).done);h=!0)(function(){var x=y.value;Object.keys(p.attributes).some(function(v){return p.attributes[v].location===x})||(p._renderer.GL.disableVertexAttribArray(x),p._renderer.registerEnabled.delete(x))})()}catch(x){m=!0,g=x}finally{try{h||b.return==null||b.return()}finally{if(m)throw g}}}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Shader,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.checkWebGLCapabilities=x,s.default=s.MipmapTexture=void 0;var u=(b=o("../core/main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=C?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(S,_,E):S[_]=v[_])}return S.default=v,w&&w.set(v,S),S}(o("../core/constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){return(d=Object.setPrototypeOf||function(_,S){return _.__proto__=S,_})(v,w)}function p(v){return function(){var w,_=h(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function y(v,w,_){w&&g(v.prototype,w),_&&g(v,_)}u.default.Texture=function(){function v(T,_,E){m(this,v),this._renderer=T;var C=this._renderer.GL,E=(E=E||{},this.src=_,this.glTex=void 0,this.glTarget=C.TEXTURE_2D,this.glFormat=E.format||C.RGBA,this.mipmaps=!1,this.glMinFilter=E.minFilter||C.LINEAR,this.glMagFilter=E.magFilter||C.LINEAR,this.glWrapS=E.wrapS||C.CLAMP_TO_EDGE,this.glWrapT=E.wrapT||C.CLAMP_TO_EDGE,this.glDataType=E.dataType||C.UNSIGNED_BYTE,x(T)),T=(this.glFormat!==C.HALF_FLOAT||E.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=C.FLOAT),this.glFormat!==C.HALF_FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||E.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.glFormat!==C.FLOAT||E.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=C.UNSIGNED_BYTE),this.glFormat!==C.FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||E.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.isSrcMediaElement=u.default.MediaElement!==void 0&&_ instanceof u.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=u.default.Element!==void 0&&_ instanceof u.default.Element&&!(_ instanceof u.default.Graphics)&&!(_ instanceof u.default.Renderer),this.isSrcP5Image=_ instanceof u.default.Image,this.isSrcP5Graphics=_ instanceof u.default.Graphics,this.isSrcP5Renderer=_ instanceof u.default.Renderer,this.isImageData=typeof ImageData<"u"&&_ instanceof ImageData,this.isFramebufferTexture=_ instanceof u.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=T.width,this.height=T.height,this.init(T),this}return y(v,[{key:"_getTextureDataFromSource",value:function(){var w;return this.isFramebufferTexture?w=this.src.rawTexture():this.isSrcP5Image?w=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?w=this.src.elt:this.isImageData&&(w=this.src),w}},{key:"init",value:function(w){var _,S=this._renderer.GL;this.isFramebufferTexture||(this.glTex=S.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.glMagFilter),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(_=new Uint8Array([1,1,1,1]),S.texImage2D(this.glTarget,0,S.RGBA,1,1,0,this.glFormat,this.glDataType,_)):S.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w))}},{key:"update",value:function(){var w,_,S,C=this.src;return C.width!==0&&C.height!==0&&!this.isFramebufferTexture&&(w=this._getTextureDataFromSource(),_=!1,S=this._renderer.GL,w.width!==this.width||w.height!==this.height?(_=!0,this.width=w.width||C.width,this.height=w.height||C.height,this.isSrcP5Image?C.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&C.setModified(!0)):this.isSrcP5Image?C.isModified()&&C.setModified(!(_=!0)):this.isSrcMediaElement?C.isModified()?C.setModified(!(_=!0)):C.loadedmetadata&&this._videoPrevUpdateTime!==C.time()&&(this._videoPrevUpdateTime=C.time(),_=!0):this.isImageData?C._dirty&&(_=!(C._dirty=!1)):_=!0,_&&(this.bindTexture(),S.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w)),_)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(w,_){var S=this._renderer.GL;this.glMinFilter=this.glFilter(w),this.glMagFilter=this.glFilter(_),this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.glMinFilter),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(w){var _=this._renderer.GL;return w===c.NEAREST?_.NEAREST:_.LINEAR}},{key:"setWrapMode",value:function(w,_){function S(I){return(I&I-1)==0}var C=this._renderer.GL,T=this._getTextureDataFromSource(),T=T.naturalWidth&&T.naturalHeight?(E=T.naturalWidth,T.naturalHeight):(E=this.width,this.height),E=S(E),T=S(T);w===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapS=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):w===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapS=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):this.glWrapS=C.CLAMP_TO_EDGE,_===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapT=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):_===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&T?this.glWrapT=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):this.glWrapT=C.CLAMP_TO_EDGE,this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this.glWrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),v}();var b=function(v){var w=S;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&d(w,v);var _=p(S);function S(C,E,T){return m(this,S),E=(C=_.call(this,C,E,T))._renderer.GL,C.glMinFilter===E.LINEAR&&(C.glMinFilter=E.LINEAR_MIPMAP_LINEAR),C}return y(S,[{key:"glFilter",value:function(C){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(C){var E=this._renderer.GL;this.glTex=E.createTexture(),this.bindTexture();for(var T=0;T<C.length;T++)E.texImage2D(this.glTarget,T,this.glFormat,this.glFormat,this.glDataType,C[T]);this.glMinFilter=E.LINEAR_MIPMAP_LINEAR,E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,this.glMagFilter),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),S}(u.default.Texture);function x(C){var w=C.GL,C=C.webglVersion,_=C===c.WEBGL2?w.getExtension("EXT_color_buffer_float")&&w.getExtension("EXT_float_blend"):w.getExtension("OES_texture_float"),S=_&&w.getExtension("OES_texture_float_linear"),C=C===c.WEBGL2?w.getExtension("EXT_color_buffer_float"):w.getExtension("OES_texture_half_float");return{float:_,floatLinear:S,halfFloat:C,halfFloatLinear:C&&w.getExtension("OES_texture_half_float_linear")}}s.MipmapTexture=b,o=u.default.Texture,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.iterator");var u,c=(u=o("../core/main"))&&u.__esModule?u:{default:u},f=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=d();if(w&&w.has(v))return w.get(v);var _,S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=C?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(S,_,E):S[_]=v[_])}return S.default=v,w&&w.set(v,S),S}(o("../core/constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}function p(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){for(var _=0;_<w.length;_++){var S=w[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function m(v,w,_){w&&h(v.prototype,w),_&&h(v,_)}o("./p5.Shader"),o("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(v){return this._isOpenType()?this._textFont._textWidth(v,this._textSize):0};var g=function(){function v(w,_){p(this,v),this.width=w,this.height=_,this.infos=[]}return m(v,[{key:"findImage",value:function(w){var _,S,C=this.width*this.height;if(C<w)throw new Error("font is too complex to render in 3D");for(var E=this.infos.length-1;0<=E;--E){var T=this.infos[E];if(T.index+w<C){S=(_=T).imageData;break}}if(!_){try{S=new ImageData(this.width,this.height)}catch{var I=document.getElementsByTagName("canvas")[0],k=!I,F=(I||((I=document.createElement("canvas")).style.display="none",document.body.appendChild(I)),I.getContext("2d"));F&&(S=F.createImageData(this.width,this.height)),k&&document.body.removeChild(I)}this.infos.push(_={index:0,imageData:S})}return F=_.index,_.index+=w,S._dirty=!0,{imageData:S,index:F}}}]),v}();function y(T,w,_,S,C){var E=T.imageData.data,T=4*T.index++;E[T++]=w,E[T++]=_,E[T++]=S,E[+T]=C}var b=Math.sqrt(3),x=function(){function v(w){p(this,v),this.font=w,this.strokeImageInfos=new g(64,64),this.colDimImageInfos=new g(64,64),this.rowDimImageInfos=new g(64,64),this.colCellImageInfos=new g(64,64),this.rowCellImageInfos=new g(64,64),this.glyphInfos={}}return m(v,[{key:"getGlyphInfo",value:function(w){var _=this.glyphInfos[w.index];if(!_){var S=w.getBoundingBox(),C=S.x1,E=S.y1,T=S.x2-C,I=S.y2-E,k=w.path.commands;if(T==0||I==0||!k.length)return this.glyphInfos[w.index]={};for(var F=[],D=[],L=[],P=8;0<=P;--P)L.push([]);for(P=8;0<=P;--P)D.push([]);var R,V,G,U,H=function(){function _t(kt,Rt,Mt,Be){p(this,_t),this.p0=kt,this.c0=Rt,this.c1=Mt,this.p1=Be}return m(_t,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ut){var Rt=c.default.Vector.lerp(this.p0,this.c0,ut),Be=c.default.Vector.lerp(this.c0,this.c1,ut),Mt=c.default.Vector.lerp(Rt,Be,ut),Be=(this.c1=c.default.Vector.lerp(this.c1,this.p1,ut),this.c0=c.default.Vector.lerp(Be,this.c1,ut),c.default.Vector.lerp(Mt,this.c0,ut)),ut=new _t(this.p0,Rt,Mt,Be);return this.p0=Be,ut}},{key:"splitInflections",value:function(){var kt=c.default.Vector.sub(this.c0,this.p0),Rt=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),kt),Mt=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),kt),c.default.Vector.mult(Rt,2)),Be=[],ut=Rt.x*Mt.y-Rt.y*Mt.x;return ut!==0&&0<=(kt=(Mt=kt.x*Mt.y-kt.y*Mt.x)*Mt-4*ut*(kt.x*Rt.y-kt.y*Rt.x))&&(ut<0&&(ut=-ut,Mt=-Mt),kt=(-Mt+(Rt=Math.sqrt(kt)))/(2*ut),0<(Mt=(-Mt-Rt)/(2*ut))&&Mt<1&&(Be.push(this.split(Mt)),kt=1-(1-kt)/(1-Mt)),0<kt&&kt<1&&Be.push(this.split(kt))),Be.push(this),Be}}]),_t}(),X=!0,fe=!1,$=void 0;try{for(var M,z=k[Symbol.iterator]();!(X=(M=z.next()).done);X=!0){var q=M.value,ee=(q.x-C)/T,ae=(q.y-E)/I;if(!We(R,V,ee,ae)){switch(q.type){case"M":G=ee,U=ae;break;case"L":at(R,V,ee,ae);break;case"Q":var Q=(q.x1-C)/T,le=(q.y1-E)/I;Fe([R,ee,Q],[V,ae,le],{x:R,y:V,cx:Q,cy:le});break;case"Z":We(R,V,G,U)?F.push({x:R,y:V}):(at(R,V,G,U),F.push({x:G,y:U}));break;case"C":for(var ie=function(me,Ve,Qe,Mt,Be,ut,Ge,de){var me=new H(new c.default.Vector(me,Ve),new c.default.Vector(Qe,Mt),new c.default.Vector(Be,ut),new c.default.Vector(Ge,de)).splitInflections(),oe=[],be=30/b,Oe=!0,Ve=!1,Qe=void 0;try{for(var St,Nt=me[Symbol.iterator]();!(Oe=(St=Nt.next()).done);Oe=!0){for(var Ft=St.value,Ut=[],en=void 0;!(.125<=(en=be/Ft.quadError()));){var Lr=Math.pow(en,.3333333333333333),ur=Ft.split(Lr),Yr=Ft.split(1-Lr/(1-Lr));oe.push(ur),Ut.push(Ft),Ft=Yr}en<1&&oe.push(Ft.split(.5)),oe.push(Ft),Array.prototype.push.apply(oe,Ut.reverse())}}catch(Rr){Ve=!0,Qe=Rr}finally{try{Oe||Nt.return==null||Nt.return()}finally{if(Ve)throw Qe}}return oe}(R,V,(q.x1-C)/T,(q.y1-E)/I,(q.x2-C)/T,(q.y2-E)/I,ee,ae),K=0;K<ie.length;K++){var ge=ie[K].toQuadratic();Fe([ge.x,ge.x1,ge.cx],[ge.y,ge.y1,ge.cy],ge)}break;default:throw new Error("unknown command type: ".concat(q.type))}R=ee,V=ae}}}catch(_t){fe=!0,$=_t}finally{try{X||z.return==null||z.return()}finally{if(fe)throw $}}for(var ne=F.length,ye=this.strokeImageInfos.findImage(ne),xe=ye.index,De=0;De<ne;++De){var Te=F[De];y(ye,$e(Te.x),$e(Te.y),$e(Te.cx),$e(Te.cy))}(_=this.glyphInfos[w.index]={glyph:w,uGlyphRect:[S.x1,-S.y1,S.x2,-S.y2],strokeImageInfo:ye,strokes:F,colInfo:jt(L,this.colDimImageInfos,this.colCellImageInfos),rowInfo:jt(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[_.colInfo.dimOffset,_.rowInfo.dimOffset]}return _;function Fe(_t,kt,Rt){var Mt=F.length;function Be(oe,be,Oe){for(var Ve=oe.length;0<Ve--;){var Qe=oe[Ve];Qe<be&&(be=Qe),Oe<Qe&&(Oe=Qe)}return{min:be,max:Oe}}F.push(Rt);for(var Rt=Be(_t,1,0),_t=Math.max(Math.floor(9*Rt.min-.5),0),ut=Math.min(Math.ceil(9*Rt.max+.5),9),Ge=_t;Ge<ut;++Ge)L[Ge].push(Mt);for(var Rt=Be(kt,1,0),_t=Math.max(Math.floor(9*Rt.min-.5),0),de=Math.min(Math.ceil(9*Rt.max+.5),9),me=_t;me<de;++me)D[me].push(Mt)}function $e(_t){return(_t=(Rt=255)*_t)<(kt=0)?kt:Rt<_t?Rt:_t;var kt,Rt}function at(_t,kt,Rt,Mt){Fe([_t,Rt],[kt,Mt],{x:_t,y:kt,cx:(_t+Rt)/2,cy:(kt+Mt)/2})}function We(_t,kt,Rt,Mt){return Math.abs(Rt-_t)<1e-5&&Math.abs(Mt-kt)<1e-5}function jt(_t,kt,Rt){for(var Mt=_t.length,Be=kt.findImage(Mt),kt=Be.index,ut=0,Ge=0;Ge<Mt;++Ge)ut+=_t[Ge].length;for(var de=Rt.findImage(ut),me=0;me<Mt;++me){var oe=_t[me],be=oe.length,Oe=de.index;y(Be,Oe>>7,127&Oe,be>>7,127&be);for(var Ve=0;Ve<be;++Ve){var Qe=oe[Ve]+xe;y(de,Qe>>7,127&Qe,0,0)}}return{cellImageInfo:de,dimOffset:kt,dimImageInfo:Be}}}}]),v}();c.default.RendererGL.prototype._renderText=function(v,w,_,S,C){if(this._textFont&&typeof this._textFont!="string"){if(!(C<=S)&&this._doFill){if(this._isOpenType()){v.push();var C=this._doStroke,E=this.drawMode,T=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),I=(I=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(T)),_=this._textFont._handleAlignment(this,w,_,S),S=this._textSize/T.unitsPerEm,k=(this.translate(_.x,_.y,0),this.scale(S,S,1),this.GL),_=!this._defaultFontShader,F=this._getFontShader(),D=(F.init(),F.bindShader(),_&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),L=(D||((S=this._textGeom=new c.default.Geometry(1,1,function(){for(var K=0;K<=1;K++)for(var ge=0;ge<=1;ge++)this.vertices.push(new c.default.Vector(ge,K,0)),this.uvs.push(ge,K)})).computeFaces().computeNormals(),D=this.createBuffers("glyph",S)),!0),_=!1,S=void 0;try{for(var P,R=this.retainedMode.buffers.text[Symbol.iterator]();!(L=(P=R.next()).done);L=!0)P.value._prepareBuffer(D,F)}catch(K){_=!0,S=K}finally{try{L||R.return==null||R.return()}finally{if(_)throw S}}this._bindBuffer(D.indexBuffer,k.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var V=0,G=null,U=T.stringToGlyphs(w),H=!0,X=!1,fe=void 0;try{for(var $,M=U[Symbol.iterator]();!(H=($=M.next()).done);H=!0){var z,q,ee=$.value,ae=(G&&(V+=T.getKerningValue(G,ee)),I.getGlyphInfo(ee));ae.uGlyphRect&&(z=ae.rowInfo,q=ae.colInfo,F.setUniform("uSamplerStrokes",ae.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",z.cellImageInfo.imageData),F.setUniform("uSamplerRows",z.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",q.cellImageInfo.imageData),F.setUniform("uSamplerCols",q.dimImageInfo.imageData),F.setUniform("uGridOffset",ae.uGridOffset),F.setUniform("uGlyphRect",ae.uGlyphRect),F.setUniform("uGlyphOffset",V),F.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),V+=ee.advanceWidth,G=ee}}catch(K){X=!0,fe=K}finally{try{H||M.return==null||M.return()}finally{if(X)throw fe}}}finally{F.unbindShader(),this._doStroke=C,this.drawMode=E,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),v.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return v}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})});function WG(t,r){return T9t.call(t,r)}function qG(t){if(Array.isArray(t)){for(var r=new Array(t.length),n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);var o=[];for(var i in t)WG(t,i)&&o.push(i);return o}function Rl(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function HG(t){for(var r=0,n=t.length,o;r<n;){if(o=t.charCodeAt(r),o>=48&&o<=57){r++;continue}return!1}return!0}function q0(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function jP(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function GG(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(GG(t[r]))return!0}else if(typeof t=="object"){for(var o=qG(t),i=o.length,s=0;s<i;s++)if(GG(t[o[s]]))return!0}}return!1}function lGe(t,r){var n=[t];for(var o in r){var i=typeof r[o]=="object"?JSON.stringify(r[o],null,2):r[o];typeof i<"u"&&n.push(o+": "+i)}return n.join(`
`)}var E9t,T9t,BP,$P=N(()=>{"use strict";E9t=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])},t(r,n)};return function(r,n){t(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),T9t=Object.prototype.hasOwnProperty;BP=function(t){E9t(r,t);function r(n,o,i,s,a){var l=this.constructor,u=t.call(this,lGe(n,{name:o,index:i,operation:s,tree:a}))||this;return u.name=o,u.index=i,u.operation=s,u.tree=a,Object.setPrototypeOf(u,l.prototype),u.message=lGe(n,{name:o,index:i,operation:s,tree:a}),u}return r}(Error)});var pce={};fn(pce,{JsonPatchError:()=>ws,_areEquals:()=>zP,applyOperation:()=>SE,applyPatch:()=>KD,applyReducer:()=>I9t,deepClone:()=>A9t,getValueByPointer:()=>YG,validate:()=>uGe,validator:()=>XG});function YG(t,r){if(r=="")return t;var n={op:"_get",path:r};return SE(t,n),n.value}function SE(t,r,n,o,i,s){if(n===void 0&&(n=!1),o===void 0&&(o=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(r,0,t,r.path):XG(r,0)),r.path===""){var a={newDocument:t};if(r.op==="add")return a.newDocument=r.value,a;if(r.op==="replace")return a.newDocument=r.value,a.removed=t,a;if(r.op==="move"||r.op==="copy")return a.newDocument=YG(t,r.from),r.op==="move"&&(a.removed=t),a;if(r.op==="test"){if(a.test=zP(t,r.value),a.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a.newDocument=t,a}else{if(r.op==="remove")return a.removed=t,a.newDocument=null,a;if(r.op==="_get")return r.value=t,a;if(n)throw new ws("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,r,t);return a}}else{o||(t=Rl(t));var l=r.path||"",u=l.split("/"),c=t,f=1,d=u.length,p=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=XG;;){if(h=u[f],h&&h.indexOf("~")!=-1&&(h=jP(h)),i&&(h=="__proto__"||h=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[h]===void 0?p=u.slice(0,f).join("/"):f==d-1&&(p=r.path),p!==void 0&&m(r,0,t,p)),f++,Array.isArray(c)){if(h==="-")h=c.length;else{if(n&&!HG(h))throw new ws("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,r,t);HG(h)&&(h=~~h)}if(f>=d){if(n&&r.op==="add"&&h>c.length)throw new ws("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,r,t);var a=k9t[r.op].call(r,c,h,t);if(a.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}}else if(f>=d){var a=XD[r.op].call(r,c,h,t);if(a.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}if(c=c[h],n&&f<d&&(!c||typeof c!="object"))throw new ws("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,r,t)}}}function KD(t,r,n,o,i){if(o===void 0&&(o=!0),i===void 0&&(i=!0),n&&!Array.isArray(r))throw new ws("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(t=Rl(t));for(var s=new Array(r.length),a=0,l=r.length;a<l;a++)s[a]=SE(t,r[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function I9t(t,r,n){var o=SE(t,r);if(o.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",n,r,t);return o.newDocument}function XG(t,r,n,o){if(typeof t!="object"||t===null||Array.isArray(t))throw new ws("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,t,n);if(XD[t.op]){if(typeof t.path!="string")throw new ws("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new ws('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new ws("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new ws("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&GG(t.value))throw new ws("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=o.split("/").length;if(i!==s+1&&i!==s)throw new ws("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==o)throw new ws("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},l=uGe([a],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new ws("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,t,n)}}}else throw new ws("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,n)}function uGe(t,r,n){try{if(!Array.isArray(t))throw new ws("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)KD(Rl(r),Rl(t),n||!0);else{n=n||XG;for(var o=0;o<t.length;o++)n(t[o],o,r,void 0)}}catch(i){if(i instanceof ws)return i;throw i}}function zP(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=Array.isArray(t),o=Array.isArray(r),i,s,a;if(n&&o){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!zP(t[i],r[i]))return!1;return!0}if(n!=o)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!r.hasOwnProperty(l[i]))return!1;for(i=s;i--!==0;)if(a=l[i],!zP(t[a],r[a]))return!1;return!0}return t!==t&&r!==r}var ws,A9t,XD,k9t,KG=N(()=>{"use strict";$P();ws=BP,A9t=Rl,XD={add:function(t,r,n){return t[r]=this.value,{newDocument:n}},remove:function(t,r,n){var o=t[r];return delete t[r],{newDocument:n,removed:o}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:function(t,r,n){var o=YG(n,this.path);o&&(o=Rl(o));var i=SE(n,{op:"remove",path:this.from}).removed;return SE(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:o}},copy:function(t,r,n){var o=YG(n,this.from);return SE(n,{op:"add",path:this.path,value:Rl(o)}),{newDocument:n}},test:function(t,r,n){return{newDocument:n,test:zP(t[r],this.value)}},_get:function(t,r,n){return this.value=t[r],{newDocument:n}}},k9t={add:function(t,r,n){return HG(r)?t.splice(r,0,this.value):t[r]=this.value,{newDocument:n,index:r}},remove:function(t,r,n){var o=t.splice(r,1);return{newDocument:n,removed:o[0]}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:XD.move,copy:XD.copy,test:XD.test,_get:XD._get}});var yce={};fn(yce,{compare:()=>L9t,generate:()=>hce,observe:()=>P9t,unobserve:()=>R9t});function M9t(t){return mce.get(t)}function F9t(t,r){return t.observers.get(r)}function O9t(t,r){t.observers.delete(r.callback)}function R9t(t,r){r.unobserve()}function P9t(t,r){var n=[],o,i=M9t(t);if(!i)i=new D9t(t),mce.set(t,i);else{var s=F9t(i,r);o=s&&s.observer}if(o)return o;if(o={},i.value=Rl(t),r){o.callback=r,o.next=null;var a=function(){hce(o)},l=function(){clearTimeout(o.next),o.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return o.patches=n,o.object=t,o.unobserve=function(){hce(o),clearTimeout(o.next),O9t(i,o),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},i.observers.set(r,new N9t(r,o)),o}function hce(t,r){r===void 0&&(r=!1);var n=mce.get(t.object);gce(n.value,t.object,t.patches,"",r),t.patches.length&&KD(n.value,t.patches);var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function gce(t,r,n,o,i){if(r!==t){typeof r.toJSON=="function"&&(r=r.toJSON());for(var s=qG(r),a=qG(t),l=!1,u=!1,c=a.length-1;c>=0;c--){var f=a[c],d=t[f];if(WG(r,f)&&!(r[f]===void 0&&d!==void 0&&Array.isArray(r)===!1)){var p=r[f];typeof d=="object"&&d!=null&&typeof p=="object"&&p!=null&&Array.isArray(d)===Array.isArray(p)?gce(d,p,n,o+"/"+q0(f),i):d!==p&&(l=!0,i&&n.push({op:"test",path:o+"/"+q0(f),value:Rl(d)}),n.push({op:"replace",path:o+"/"+q0(f),value:Rl(p)}))}else Array.isArray(t)===Array.isArray(r)?(i&&n.push({op:"test",path:o+"/"+q0(f),value:Rl(d)}),n.push({op:"remove",path:o+"/"+q0(f)}),u=!0):(i&&n.push({op:"test",path:o,value:t}),n.push({op:"replace",path:o,value:r}),l=!0)}if(!(!u&&s.length==a.length))for(var c=0;c<s.length;c++){var f=s[c];!WG(t,f)&&r[f]!==void 0&&n.push({op:"add",path:o+"/"+q0(f),value:Rl(r[f])})}}}function L9t(t,r,n){n===void 0&&(n=!1);var o=[];return gce(t,r,o,"",n),o}var mce,D9t,N9t,bce=N(()=>{"use strict";$P();KG();mce=new WeakMap,D9t=function(){function t(r){this.observers=new Map,this.obj=r}return t}(),N9t=function(){function t(r,n){this.callback=r,this.observer=n}return t}()});var g1o,cGe=N(()=>{"use strict";KG();bce();$P();KG();bce();$P();g1o=Object.assign({},pce,yce,{JsonPatchError:BP,deepClone:Rl,escapePathComponent:q0,unescapePathComponent:jP})});var dGe=mt((w1o,fGe)=>{"use strict";var j9t=/("(?:[^\\"]|\\.)*")|[:,]/g;fGe.exports=function(r,n){var o,i,s;return n=n||{},o=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=o===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function a(l,u,c){var f,d,p,h,m,g,y,b,x,v,w,_;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),w=JSON.stringify(l,s),w===void 0)return w;if(y=i-u.length-c,w.length<=y&&(x=w.replace(j9t,function(S,C){return C||S+" "}),x.length<=y))return x;if(s!=null&&(l=JSON.parse(w),s=void 0),typeof l=="object"&&l!==null){if(b=u+o,p=[],d=0,Array.isArray(l))for(v="[",f="]",y=l.length;d<y;d++)p.push(a(l[d],b,d===y-1?0:1)||"null");else for(v="{",f="}",g=Object.keys(l),y=g.length;d<y;d++)h=g[d],m=JSON.stringify(h)+": ",_=a(l[h],b,m.length+(d===y-1?0:1)),_!==void 0&&p.push(m+_);if(p.length>0)return[v,o+p.join(`,
`+b),f].join(`
`+u)}return w}(r,"",0)}});var UP=mt((_1o,pGe)=>{"use strict";var B9t="2.0.0",$9t=Number.MAX_SAFE_INTEGER||9007199254740991,z9t=16,U9t=250,V9t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];pGe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:z9t,MAX_SAFE_BUILD_LENGTH:U9t,MAX_SAFE_INTEGER:$9t,RELEASE_TYPES:V9t,SEMVER_SPEC_VERSION:B9t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var VP=mt((S1o,hGe)=>{"use strict";var G9t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};hGe.exports=G9t});var ZD=mt((Kx,mGe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:xce,MAX_SAFE_BUILD_LENGTH:W9t,MAX_LENGTH:q9t}=UP(),H9t=VP();Kx=mGe.exports={};var Y9t=Kx.re=[],X9t=Kx.safeRe=[],nr=Kx.src=[],or=Kx.t={},K9t=0,vce="[a-zA-Z0-9-]",Z9t=[["\\s",1],["\\d",q9t],[vce,W9t]],Q9t=t=>{for(let[r,n]of Z9t)t=t.split(`${r}*`).join(`${r}{0,${n}}`).split(`${r}+`).join(`${r}{1,${n}}`);return t},gn=(t,r,n)=>{let o=Q9t(r),i=K9t++;H9t(t,i,r),or[t]=i,nr[i]=r,Y9t[i]=new RegExp(r,n?"g":void 0),X9t[i]=new RegExp(o,n?"g":void 0)};gn("NUMERICIDENTIFIER","0|[1-9]\\d*");gn("NUMERICIDENTIFIERLOOSE","\\d+");gn("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${vce}*`);gn("MAINVERSION",`(${nr[or.NUMERICIDENTIFIER]})\\.(${nr[or.NUMERICIDENTIFIER]})\\.(${nr[or.NUMERICIDENTIFIER]})`);gn("MAINVERSIONLOOSE",`(${nr[or.NUMERICIDENTIFIERLOOSE]})\\.(${nr[or.NUMERICIDENTIFIERLOOSE]})\\.(${nr[or.NUMERICIDENTIFIERLOOSE]})`);gn("PRERELEASEIDENTIFIER",`(?:${nr[or.NUMERICIDENTIFIER]}|${nr[or.NONNUMERICIDENTIFIER]})`);gn("PRERELEASEIDENTIFIERLOOSE",`(?:${nr[or.NUMERICIDENTIFIERLOOSE]}|${nr[or.NONNUMERICIDENTIFIER]})`);gn("PRERELEASE",`(?:-(${nr[or.PRERELEASEIDENTIFIER]}(?:\\.${nr[or.PRERELEASEIDENTIFIER]})*))`);gn("PRERELEASELOOSE",`(?:-?(${nr[or.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${nr[or.PRERELEASEIDENTIFIERLOOSE]})*))`);gn("BUILDIDENTIFIER",`${vce}+`);gn("BUILD",`(?:\\+(${nr[or.BUILDIDENTIFIER]}(?:\\.${nr[or.BUILDIDENTIFIER]})*))`);gn("FULLPLAIN",`v?${nr[or.MAINVERSION]}${nr[or.PRERELEASE]}?${nr[or.BUILD]}?`);gn("FULL",`^${nr[or.FULLPLAIN]}$`);gn("LOOSEPLAIN",`[v=\\s]*${nr[or.MAINVERSIONLOOSE]}${nr[or.PRERELEASELOOSE]}?${nr[or.BUILD]}?`);gn("LOOSE",`^${nr[or.LOOSEPLAIN]}$`);gn("GTLT","((?:<|>)?=?)");gn("XRANGEIDENTIFIERLOOSE",`${nr[or.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);gn("XRANGEIDENTIFIER",`${nr[or.NUMERICIDENTIFIER]}|x|X|\\*`);gn("XRANGEPLAIN",`[v=\\s]*(${nr[or.XRANGEIDENTIFIER]})(?:\\.(${nr[or.XRANGEIDENTIFIER]})(?:\\.(${nr[or.XRANGEIDENTIFIER]})(?:${nr[or.PRERELEASE]})?${nr[or.BUILD]}?)?)?`);gn("XRANGEPLAINLOOSE",`[v=\\s]*(${nr[or.XRANGEIDENTIFIERLOOSE]})(?:\\.(${nr[or.XRANGEIDENTIFIERLOOSE]})(?:\\.(${nr[or.XRANGEIDENTIFIERLOOSE]})(?:${nr[or.PRERELEASELOOSE]})?${nr[or.BUILD]}?)?)?`);gn("XRANGE",`^${nr[or.GTLT]}\\s*${nr[or.XRANGEPLAIN]}$`);gn("XRANGELOOSE",`^${nr[or.GTLT]}\\s*${nr[or.XRANGEPLAINLOOSE]}$`);gn("COERCEPLAIN",`(^|[^\\d])(\\d{1,${xce}})(?:\\.(\\d{1,${xce}}))?(?:\\.(\\d{1,${xce}}))?`);gn("COERCE",`${nr[or.COERCEPLAIN]}(?:$|[^\\d])`);gn("COERCEFULL",nr[or.COERCEPLAIN]+`(?:${nr[or.PRERELEASE]})?(?:${nr[or.BUILD]})?(?:$|[^\\d])`);gn("COERCERTL",nr[or.COERCE],!0);gn("COERCERTLFULL",nr[or.COERCEFULL],!0);gn("LONETILDE","(?:~>?)");gn("TILDETRIM",`(\\s*)${nr[or.LONETILDE]}\\s+`,!0);Kx.tildeTrimReplace="$1~";gn("TILDE",`^${nr[or.LONETILDE]}${nr[or.XRANGEPLAIN]}$`);gn("TILDELOOSE",`^${nr[or.LONETILDE]}${nr[or.XRANGEPLAINLOOSE]}$`);gn("LONECARET","(?:\\^)");gn("CARETTRIM",`(\\s*)${nr[or.LONECARET]}\\s+`,!0);Kx.caretTrimReplace="$1^";gn("CARET",`^${nr[or.LONECARET]}${nr[or.XRANGEPLAIN]}$`);gn("CARETLOOSE",`^${nr[or.LONECARET]}${nr[or.XRANGEPLAINLOOSE]}$`);gn("COMPARATORLOOSE",`^${nr[or.GTLT]}\\s*(${nr[or.LOOSEPLAIN]})$|^$`);gn("COMPARATOR",`^${nr[or.GTLT]}\\s*(${nr[or.FULLPLAIN]})$|^$`);gn("COMPARATORTRIM",`(\\s*)${nr[or.GTLT]}\\s*(${nr[or.LOOSEPLAIN]}|${nr[or.XRANGEPLAIN]})`,!0);Kx.comparatorTrimReplace="$1$2$3";gn("HYPHENRANGE",`^\\s*(${nr[or.XRANGEPLAIN]})\\s+-\\s+(${nr[or.XRANGEPLAIN]})\\s*$`);gn("HYPHENRANGELOOSE",`^\\s*(${nr[or.XRANGEPLAINLOOSE]})\\s+-\\s+(${nr[or.XRANGEPLAINLOOSE]})\\s*$`);gn("STAR","(<|>)?=?\\s*\\*");gn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");gn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ZG=mt((C1o,gGe)=>{"use strict";var J9t=Object.freeze({loose:!0}),eVt=Object.freeze({}),tVt=t=>t?typeof t!="object"?J9t:t:eVt;gGe.exports=tVt});var wce=mt((E1o,xGe)=>{"use strict";var yGe=/^[0-9]+$/,bGe=(t,r)=>{let n=yGe.test(t),o=yGe.test(r);return n&&o&&(t=+t,r=+r),t===r?0:n&&!o?-1:o&&!n?1:t<r?-1:1},rVt=(t,r)=>bGe(r,t);xGe.exports={compareIdentifiers:bGe,rcompareIdentifiers:rVt}});var xu=mt((T1o,SGe)=>{"use strict";var QG=VP(),{MAX_LENGTH:vGe,MAX_SAFE_INTEGER:JG}=UP(),{safeRe:wGe,t:_Ge}=ZD(),nVt=ZG(),{compareIdentifiers:QD}=wce(),_ce=class t{constructor(r,n){if(n=nVt(n),r instanceof t){if(r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>vGe)throw new TypeError(`version is longer than ${vGe} characters`);QG("SemVer",r,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let o=r.trim().match(n.loose?wGe[_Ge.LOOSE]:wGe[_Ge.FULL]);if(!o)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>JG||this.major<0)throw new TypeError("Invalid major version");if(this.minor>JG||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>JG||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<JG)return s}return i}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(QG("SemVer.compare",this.version,this.options,r),!(r instanceof t)){if(typeof r=="string"&&r===this.version)return 0;r=new t(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof t||(r=new t(r,this.options)),QD(this.major,r.major)||QD(this.minor,r.minor)||QD(this.patch,r.patch)}comparePre(r){if(r instanceof t||(r=new t(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let n=0;do{let o=this.prerelease[n],i=r.prerelease[n];if(QG("prerelease compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return QD(o,i)}while(++n)}compareBuild(r){r instanceof t||(r=new t(r,this.options));let n=0;do{let o=this.build[n],i=r.build[n];if(QG("build compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return QD(o,i)}while(++n)}inc(r,n,o){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(o)?1:0;if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];o===!1&&(s=[n]),QD(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};SGe.exports=_ce});var CE=mt((A1o,EGe)=>{"use strict";var CGe=xu(),oVt=(t,r,n=!1)=>{if(t instanceof CGe)return t;try{return new CGe(t,r)}catch(o){if(!n)return null;throw o}};EGe.exports=oVt});var AGe=mt((k1o,TGe)=>{"use strict";var iVt=CE(),sVt=(t,r)=>{let n=iVt(t,r);return n?n.version:null};TGe.exports=sVt});var IGe=mt((I1o,kGe)=>{"use strict";var aVt=CE(),lVt=(t,r)=>{let n=aVt(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null};kGe.exports=lVt});var MGe=mt((D1o,NGe)=>{"use strict";var DGe=xu(),uVt=(t,r,n,o,i)=>{typeof n=="string"&&(i=o,o=n,n=void 0);try{return new DGe(t instanceof DGe?t.version:t,n).inc(r,o,i).version}catch{return null}};NGe.exports=uVt});var RGe=mt((N1o,OGe)=>{"use strict";var FGe=CE(),cVt=(t,r)=>{let n=FGe(t,null,!0),o=FGe(r,null,!0),i=n.compare(o);if(i===0)return null;let s=i>0,a=s?n:o,l=s?o:n,u=!!a.prerelease.length;if(!!l.prerelease.length&&!u)return!l.patch&&!l.minor?"major":a.patch?"patch":a.minor?"minor":"major";let f=u?"pre":"";return n.major!==o.major?f+"major":n.minor!==o.minor?f+"minor":n.patch!==o.patch?f+"patch":"prerelease"};OGe.exports=cVt});var LGe=mt((M1o,PGe)=>{"use strict";var fVt=xu(),dVt=(t,r)=>new fVt(t,r).major;PGe.exports=dVt});var BGe=mt((F1o,jGe)=>{"use strict";var pVt=xu(),hVt=(t,r)=>new pVt(t,r).minor;jGe.exports=hVt});var zGe=mt((O1o,$Ge)=>{"use strict";var mVt=xu(),gVt=(t,r)=>new mVt(t,r).patch;$Ge.exports=gVt});var VGe=mt((R1o,UGe)=>{"use strict";var yVt=CE(),bVt=(t,r)=>{let n=yVt(t,r);return n&&n.prerelease.length?n.prerelease:null};UGe.exports=bVt});var kp=mt((P1o,WGe)=>{"use strict";var GGe=xu(),xVt=(t,r,n)=>new GGe(t,n).compare(new GGe(r,n));WGe.exports=xVt});var HGe=mt((L1o,qGe)=>{"use strict";var vVt=kp(),wVt=(t,r,n)=>vVt(r,t,n);qGe.exports=wVt});var XGe=mt((j1o,YGe)=>{"use strict";var _Vt=kp(),SVt=(t,r)=>_Vt(t,r,!0);YGe.exports=SVt});var eW=mt((B1o,ZGe)=>{"use strict";var KGe=xu(),CVt=(t,r,n)=>{let o=new KGe(t,n),i=new KGe(r,n);return o.compare(i)||o.compareBuild(i)};ZGe.exports=CVt});var JGe=mt(($1o,QGe)=>{"use strict";var EVt=eW(),TVt=(t,r)=>t.sort((n,o)=>EVt(n,o,r));QGe.exports=TVt});var tWe=mt((z1o,eWe)=>{"use strict";var AVt=eW(),kVt=(t,r)=>t.sort((n,o)=>AVt(o,n,r));eWe.exports=kVt});var GP=mt((U1o,rWe)=>{"use strict";var IVt=kp(),DVt=(t,r,n)=>IVt(t,r,n)>0;rWe.exports=DVt});var tW=mt((V1o,nWe)=>{"use strict";var NVt=kp(),MVt=(t,r,n)=>NVt(t,r,n)<0;nWe.exports=MVt});var Sce=mt((G1o,oWe)=>{"use strict";var FVt=kp(),OVt=(t,r,n)=>FVt(t,r,n)===0;oWe.exports=OVt});var Cce=mt((W1o,iWe)=>{"use strict";var RVt=kp(),PVt=(t,r,n)=>RVt(t,r,n)!==0;iWe.exports=PVt});var rW=mt((q1o,sWe)=>{"use strict";var LVt=kp(),jVt=(t,r,n)=>LVt(t,r,n)>=0;sWe.exports=jVt});var nW=mt((H1o,aWe)=>{"use strict";var BVt=kp(),$Vt=(t,r,n)=>BVt(t,r,n)<=0;aWe.exports=$Vt});var Ece=mt((Y1o,lWe)=>{"use strict";var zVt=Sce(),UVt=Cce(),VVt=GP(),GVt=rW(),WVt=tW(),qVt=nW(),HVt=(t,r,n,o)=>{switch(r){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return zVt(t,n,o);case"!=":return UVt(t,n,o);case">":return VVt(t,n,o);case">=":return GVt(t,n,o);case"<":return WVt(t,n,o);case"<=":return qVt(t,n,o);default:throw new TypeError(`Invalid operator: ${r}`)}};lWe.exports=HVt});var cWe=mt((X1o,uWe)=>{"use strict";var YVt=xu(),XVt=CE(),{safeRe:oW,t:iW}=ZD(),KVt=(t,r)=>{if(t instanceof YVt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;r=r||{};let n=null;if(!r.rtl)n=t.match(r.includePrerelease?oW[iW.COERCEFULL]:oW[iW.COERCE]);else{let u=r.includePrerelease?oW[iW.COERCERTLFULL]:oW[iW.COERCERTL],c;for(;(c=u.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(n===null)return null;let o=n[2],i=n[3]||"0",s=n[4]||"0",a=r.includePrerelease&&n[5]?`-${n[5]}`:"",l=r.includePrerelease&&n[6]?`+${n[6]}`:"";return XVt(`${o}.${i}.${s}${a}${l}`,r)};uWe.exports=KVt});var dWe=mt((K1o,fWe)=>{"use strict";var Tce=class{constructor(){this.max=1e3,this.map=new Map}get(r){let n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(r,n)}return this}};fWe.exports=Tce});var Ip=mt((Z1o,gWe)=>{"use strict";var Ace=class t{constructor(r,n){if(n=QVt(n),r instanceof t)return r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease?r:new t(r.raw,n);if(r instanceof kce)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(o=>this.parseRange(o.trim())).filter(o=>o.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let o=this.set[0];if(this.set=this.set.filter(i=>!hWe(i[0])),this.set.length===0)this.set=[o];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&iGt(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(r=>r.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(r){let o=((this.options.includePrerelease&&nGt)|(this.options.loose&&oGt))+":"+r,i=pWe.get(o);if(i)return i;let s=this.options.loose,a=s?of[pc.HYPHENRANGELOOSE]:of[pc.HYPHENRANGE];r=r.replace(a,mGt(this.options.includePrerelease)),Pi("hyphen replace",r),r=r.replace(of[pc.COMPARATORTRIM],eGt),Pi("comparator trim",r),r=r.replace(of[pc.TILDETRIM],tGt),Pi("tilde trim",r),r=r.replace(of[pc.CARETTRIM],rGt),Pi("caret trim",r);let l=r.split(" ").map(d=>sGt(d,this.options)).join(" ").split(/\s+/).map(d=>hGt(d,this.options));s&&(l=l.filter(d=>(Pi("loose invalid filter",d,this.options),!!d.match(of[pc.COMPARATORLOOSE])))),Pi("range list",l);let u=new Map,c=l.map(d=>new kce(d,this.options));for(let d of c){if(hWe(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return pWe.set(o,f),f}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Range is required");return this.set.some(o=>mWe(o,n)&&r.set.some(i=>mWe(i,n)&&o.every(s=>i.every(a=>s.intersects(a,n)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new JVt(r,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(gGt(this.set[n],r,this.options))return!0;return!1}};gWe.exports=Ace;var ZVt=dWe(),pWe=new ZVt,QVt=ZG(),kce=WP(),Pi=VP(),JVt=xu(),{safeRe:of,t:pc,comparatorTrimReplace:eGt,tildeTrimReplace:tGt,caretTrimReplace:rGt}=ZD(),{FLAG_INCLUDE_PRERELEASE:nGt,FLAG_LOOSE:oGt}=UP(),hWe=t=>t.value==="<0.0.0-0",iGt=t=>t.value==="",mWe=(t,r)=>{let n=!0,o=t.slice(),i=o.pop();for(;n&&o.length;)n=o.every(s=>i.intersects(s,r)),i=o.pop();return n},sGt=(t,r)=>(Pi("comp",t,r),t=uGt(t,r),Pi("caret",t),t=aGt(t,r),Pi("tildes",t),t=fGt(t,r),Pi("xrange",t),t=pGt(t,r),Pi("stars",t),t),hc=t=>!t||t.toLowerCase()==="x"||t==="*",aGt=(t,r)=>t.trim().split(/\s+/).map(n=>lGt(n,r)).join(" "),lGt=(t,r)=>{let n=r.loose?of[pc.TILDELOOSE]:of[pc.TILDE];return t.replace(n,(o,i,s,a,l)=>{Pi("tilde",t,o,i,s,a,l);let u;return hc(i)?u="":hc(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:hc(a)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:l?(Pi("replaceTilde pr",l),u=`>=${i}.${s}.${a}-${l} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,Pi("tilde return",u),u})},uGt=(t,r)=>t.trim().split(/\s+/).map(n=>cGt(n,r)).join(" "),cGt=(t,r)=>{Pi("caret",t,r);let n=r.loose?of[pc.CARETLOOSE]:of[pc.CARET],o=r.includePrerelease?"-0":"";return t.replace(n,(i,s,a,l,u)=>{Pi("caret",t,i,s,a,l,u);let c;return hc(s)?c="":hc(a)?c=`>=${s}.0.0${o} <${+s+1}.0.0-0`:hc(l)?s==="0"?c=`>=${s}.${a}.0${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.0${o} <${+s+1}.0.0-0`:u?(Pi("replaceCaret pr",u),s==="0"?a==="0"?c=`>=${s}.${a}.${l}-${u} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}-${u} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l}-${u} <${+s+1}.0.0-0`):(Pi("no pr"),s==="0"?a==="0"?c=`>=${s}.${a}.${l}${o} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l} <${+s+1}.0.0-0`),Pi("caret return",c),c})},fGt=(t,r)=>(Pi("replaceXRanges",t,r),t.split(/\s+/).map(n=>dGt(n,r)).join(" ")),dGt=(t,r)=>{t=t.trim();let n=r.loose?of[pc.XRANGELOOSE]:of[pc.XRANGE];return t.replace(n,(o,i,s,a,l,u)=>{Pi("xRange",t,o,i,s,a,l,u);let c=hc(s),f=c||hc(a),d=f||hc(l),p=d;return i==="="&&p&&(i=""),u=r.includePrerelease?"-0":"",c?i===">"||i==="<"?o="<0.0.0-0":o="*":i&&p?(f&&(a=0),l=0,i===">"?(i=">=",f?(s=+s+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",f?s=+s+1:a=+a+1),i==="<"&&(u="-0"),o=`${i+s}.${a}.${l}${u}`):f?o=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(o=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),Pi("xRange return",o),o})},pGt=(t,r)=>(Pi("replaceStars",t,r),t.trim().replace(of[pc.STAR],"")),hGt=(t,r)=>(Pi("replaceGTE0",t,r),t.trim().replace(of[r.includePrerelease?pc.GTE0PRE:pc.GTE0],"")),mGt=t=>(r,n,o,i,s,a,l,u,c,f,d,p)=>(hc(o)?n="":hc(i)?n=`>=${o}.0.0${t?"-0":""}`:hc(s)?n=`>=${o}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,hc(c)?u="":hc(f)?u=`<${+c+1}.0.0-0`:hc(d)?u=`<${c}.${+f+1}.0-0`:p?u=`<=${c}.${f}.${d}-${p}`:t?u=`<${c}.${f}.${+d+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),gGt=(t,r,n)=>{for(let o=0;o<t.length;o++)if(!t[o].test(r))return!1;if(r.prerelease.length&&!n.includePrerelease){for(let o=0;o<t.length;o++)if(Pi(t[o].semver),t[o].semver!==kce.ANY&&t[o].semver.prerelease.length>0){let i=t[o].semver;if(i.major===r.major&&i.minor===r.minor&&i.patch===r.patch)return!0}return!1}return!0}});var WP=mt((Q1o,_We)=>{"use strict";var qP=Symbol("SemVer ANY"),Nce=class t{static get ANY(){return qP}constructor(r,n){if(n=yWe(n),r instanceof t){if(r.loose===!!n.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),Dce("comparator",r,n),this.options=n,this.loose=!!n.loose,this.parse(r),this.semver===qP?this.value="":this.value=this.operator+this.semver.version,Dce("comp",this)}parse(r){let n=this.options.loose?bWe[xWe.COMPARATORLOOSE]:bWe[xWe.COMPARATOR],o=r.match(n);if(!o)throw new TypeError(`Invalid comparator: ${r}`);this.operator=o[1]!==void 0?o[1]:"",this.operator==="="&&(this.operator=""),o[2]?this.semver=new vWe(o[2],this.options.loose):this.semver=qP}toString(){return this.value}test(r){if(Dce("Comparator.test",r,this.options.loose),this.semver===qP||r===qP)return!0;if(typeof r=="string")try{r=new vWe(r,this.options)}catch{return!1}return Ice(r,this.operator,this.semver,this.options)}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new wWe(r.value,n).test(this.value):r.operator===""?r.value===""?!0:new wWe(this.value,n).test(r.semver):(n=yWe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||Ice(this.semver,"<",r.semver,n)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||Ice(this.semver,">",r.semver,n)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};_We.exports=Nce;var yWe=ZG(),{safeRe:bWe,t:xWe}=ZD(),Ice=Ece(),Dce=VP(),vWe=xu(),wWe=Ip()});var HP=mt((J1o,SWe)=>{"use strict";var yGt=Ip(),bGt=(t,r,n)=>{try{r=new yGt(r,n)}catch{return!1}return r.test(t)};SWe.exports=bGt});var EWe=mt((ewo,CWe)=>{"use strict";var xGt=Ip(),vGt=(t,r)=>new xGt(t,r).set.map(n=>n.map(o=>o.value).join(" ").trim().split(" "));CWe.exports=vGt});var AWe=mt((two,TWe)=>{"use strict";var wGt=xu(),_Gt=Ip(),SGt=(t,r,n)=>{let o=null,i=null,s=null;try{s=new _Gt(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===-1)&&(o=a,i=new wGt(o,n))}),o};TWe.exports=SGt});var IWe=mt((rwo,kWe)=>{"use strict";var CGt=xu(),EGt=Ip(),TGt=(t,r,n)=>{let o=null,i=null,s=null;try{s=new EGt(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===1)&&(o=a,i=new CGt(o,n))}),o};kWe.exports=TGt});var MWe=mt((nwo,NWe)=>{"use strict";var Mce=xu(),AGt=Ip(),DWe=GP(),kGt=(t,r)=>{t=new AGt(t,r);let n=new Mce("0.0.0");if(t.test(n)||(n=new Mce("0.0.0-0"),t.test(n)))return n;n=null;for(let o=0;o<t.set.length;++o){let i=t.set[o],s=null;i.forEach(a=>{let l=new Mce(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||DWe(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||DWe(n,s))&&(n=s)}return n&&t.test(n)?n:null};NWe.exports=kGt});var OWe=mt((owo,FWe)=>{"use strict";var IGt=Ip(),DGt=(t,r)=>{try{return new IGt(t,r).range||"*"}catch{return null}};FWe.exports=DGt});var sW=mt((iwo,jWe)=>{"use strict";var NGt=xu(),LWe=WP(),{ANY:MGt}=LWe,FGt=Ip(),OGt=HP(),RWe=GP(),PWe=tW(),RGt=nW(),PGt=rW(),LGt=(t,r,n,o)=>{t=new NGt(t,o),r=new FGt(r,o);let i,s,a,l,u;switch(n){case">":i=RWe,s=RGt,a=PWe,l=">",u=">=";break;case"<":i=PWe,s=PGt,a=RWe,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(OGt(t,r,o))return!1;for(let c=0;c<r.set.length;++c){let f=r.set[c],d=null,p=null;if(f.forEach(h=>{h.semver===MGt&&(h=new LWe(">=0.0.0")),d=d||h,p=p||h,i(h.semver,d.semver,o)?d=h:a(h.semver,p.semver,o)&&(p=h)}),d.operator===l||d.operator===u||(!p.operator||p.operator===l)&&s(t,p.semver))return!1;if(p.operator===u&&a(t,p.semver))return!1}return!0};jWe.exports=LGt});var $We=mt((swo,BWe)=>{"use strict";var jGt=sW(),BGt=(t,r,n)=>jGt(t,r,">",n);BWe.exports=BGt});var UWe=mt((awo,zWe)=>{"use strict";var $Gt=sW(),zGt=(t,r,n)=>$Gt(t,r,"<",n);zWe.exports=zGt});var WWe=mt((lwo,GWe)=>{"use strict";var VWe=Ip(),UGt=(t,r,n)=>(t=new VWe(t,n),r=new VWe(r,n),t.intersects(r,n));GWe.exports=UGt});var HWe=mt((uwo,qWe)=>{"use strict";var VGt=HP(),GGt=kp();qWe.exports=(t,r,n)=>{let o=[],i=null,s=null,a=t.sort((f,d)=>GGt(f,d,n));for(let f of a)VGt(f,r,n)?(s=f,i||(i=f)):(s&&o.push([i,s]),s=null,i=null);i&&o.push([i,null]);let l=[];for(let[f,d]of o)f===d?l.push(f):!d&&f===a[0]?l.push("*"):d?f===a[0]?l.push(`<=${d}`):l.push(`${f} - ${d}`):l.push(`>=${f}`);let u=l.join(" || "),c=typeof r.raw=="string"?r.raw:String(r);return u.length<c.length?u:r}});var JWe=mt((cwo,QWe)=>{"use strict";var YWe=Ip(),Oce=WP(),{ANY:Fce}=Oce,YP=HP(),Rce=kp(),WGt=(t,r,n={})=>{if(t===r)return!0;t=new YWe(t,n),r=new YWe(r,n);let o=!1;e:for(let i of t.set){for(let s of r.set){let a=HGt(i,s,n);if(o=o||a!==null,a)continue e}if(o)return!1}return!0},qGt=[new Oce(">=0.0.0-0")],XWe=[new Oce(">=0.0.0")],HGt=(t,r,n)=>{if(t===r)return!0;if(t.length===1&&t[0].semver===Fce){if(r.length===1&&r[0].semver===Fce)return!0;n.includePrerelease?t=qGt:t=XWe}if(r.length===1&&r[0].semver===Fce){if(n.includePrerelease)return!0;r=XWe}let o=new Set,i,s;for(let h of t)h.operator===">"||h.operator===">="?i=KWe(i,h,n):h.operator==="<"||h.operator==="<="?s=ZWe(s,h,n):o.add(h.semver);if(o.size>1)return null;let a;if(i&&s){if(a=Rce(i.semver,s.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let h of o){if(i&&!YP(h,String(i),n)||s&&!YP(h,String(s),n))return null;for(let m of r)if(!YP(h,String(m),n))return!1;return!0}let l,u,c,f,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let h of r){if(f=f||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",i){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator===">"||h.operator===">="){if(l=KWe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!YP(i.semver,String(h),n))return!1}if(s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(u=ZWe(s,h,n),u===h&&u!==s)return!1}else if(s.operator==="<="&&!YP(s.semver,String(h),n))return!1}if(!h.operator&&(s||i)&&a!==0)return!1}return!(i&&c&&!s&&a!==0||s&&f&&!i&&a!==0||p||d)},KWe=(t,r,n)=>{if(!t)return r;let o=Rce(t.semver,r.semver,n);return o>0?t:o<0||r.operator===">"&&t.operator===">="?r:t},ZWe=(t,r,n)=>{if(!t)return r;let o=Rce(t.semver,r.semver,n);return o<0?t:o>0||r.operator==="<"&&t.operator==="<="?r:t};QWe.exports=WGt});var nqe=mt((fwo,rqe)=>{"use strict";var Pce=ZD(),eqe=UP(),YGt=xu(),tqe=wce(),XGt=CE(),KGt=AGe(),ZGt=IGe(),QGt=MGe(),JGt=RGe(),eWt=LGe(),tWt=BGe(),rWt=zGe(),nWt=VGe(),oWt=kp(),iWt=HGe(),sWt=XGe(),aWt=eW(),lWt=JGe(),uWt=tWe(),cWt=GP(),fWt=tW(),dWt=Sce(),pWt=Cce(),hWt=rW(),mWt=nW(),gWt=Ece(),yWt=cWe(),bWt=WP(),xWt=Ip(),vWt=HP(),wWt=EWe(),_Wt=AWe(),SWt=IWe(),CWt=MWe(),EWt=OWe(),TWt=sW(),AWt=$We(),kWt=UWe(),IWt=WWe(),DWt=HWe(),NWt=JWe();rqe.exports={parse:XGt,valid:KGt,clean:ZGt,inc:QGt,diff:JGt,major:eWt,minor:tWt,patch:rWt,prerelease:nWt,compare:oWt,rcompare:iWt,compareLoose:sWt,compareBuild:aWt,sort:lWt,rsort:uWt,gt:cWt,lt:fWt,eq:dWt,neq:pWt,gte:hWt,lte:mWt,cmp:gWt,coerce:yWt,Comparator:bWt,Range:xWt,satisfies:vWt,toComparators:wWt,maxSatisfying:_Wt,minSatisfying:SWt,minVersion:CWt,validRange:EWt,outside:TWt,gtr:AWt,ltr:kWt,intersects:IWt,simplifyRange:DWt,subset:NWt,SemVer:YGt,re:Pce.re,src:Pce.src,tokens:Pce.t,SEMVER_SPEC_VERSION:eqe.SEMVER_SPEC_VERSION,RELEASE_TYPES:eqe.RELEASE_TYPES,compareIdentifiers:tqe.compareIdentifiers,rcompareIdentifiers:tqe.rcompareIdentifiers}});function _d(t,r,n){return t.fields=r||[],t.fname=n,t}function Li(t){return t==null?null:t.fname}function Na(t){return t==null?null:t.fields}function iqe(t){return t.length===1?MWt(t[0]):FWt(t)}function pt(t){throw Error(t)}function KP(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||pt("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&pt("Access path missing closing bracket: "+t),o&&pt("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Qh(t,r,n){let o=KP(t);return t=o.length===1?o[0]:t,_d((n&&n.get||iqe)(o),[t],r||t)}function aW(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function RWt(t,r){let n=t||sqe;return{level(o){return arguments.length?(n=+o,this):n},error(){return n>=aqe&&aW(r||"error","ERROR",arguments),this},warn(){return n>=lqe&&aW(r||"warn","WARN",arguments),this},info(){return n>=uqe&&aW(r||"log","INFO",arguments),this},debug(){return n>=cqe&&aW(r||"log","DEBUG",arguments),this}}}function un(t){return t===Object(t)}function JD(...t){return t.reduce((r,n)=>{for(let o in n)if(o==="signals")r.signals=PWt(r.signals,n.signals);else{let i=o==="legend"?{layout:1}:o==="style"?!0:null;ZP(r,o,n[o],i)}return r},{})}function ZP(t,r,n,o){if(!oqe(r))return;let i,s;if(un(n)&&!Hr(n)){s=un(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?ZP(s,i,n[i]):oqe(i)&&(s[i]=n[i])}else t[r]=n}function PWt(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}function Un(t){return t[t.length-1]}function em(t){return t==null||t===""?null:+t}function cW(t,r,n,o){let i=n(t[0]),s=n(Un(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function LWt(t,r){return cW(t,r,em,mc)}function jWt(t,r){var n=Math.sign(t[0]);return cW(t,r,dqe(n),fqe(n))}function BWt(t,r,n){return cW(t,r,uW(n),uW(1/n))}function $Wt(t,r,n){return cW(t,r,pqe(n),hqe(n))}function fW(t,r,n,o,i){let s=o(t[0]),a=o(Un(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function Lce(t,r,n){return fW(t,r,n,em,mc)}function jce(t,r,n){let o=Math.sign(t[0]);return fW(t,r,n,dqe(o),fqe(o))}function dW(t,r,n,o){return fW(t,r,n,uW(o),uW(1/o))}function Bce(t,r,n,o){return fW(t,r,n,pqe(o),hqe(o))}function zWt(t){return 1+~~(new Date(t).getMonth()/3)}function UWt(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Br(t){return t!=null?Hr(t)?t:[t]:[]}function VWt(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function Dn(t){return typeof t=="function"}function $ce(t,r,n){n=n||{},r=Br(r)||[];let o=[],i=[],s={},a=n.comparator||WWt;return Br(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===GWt?-1:1),i.push(l=Dn(l)?l:Qh(l,null,n)),(Na(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:_d(a(i,o),Object.keys(s))}function Ja(t){return Dn(t)?t:()=>t}function zce(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function an(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function tm(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Uce(t,r){let n=t.length,o=-1,i,s,a,l,u;if(r==null){for(;++o<n;)if(s=t[o],s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=t[o],s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}else{for(;++o<n;)if(s=r(t[o],o,t),s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=r(t[o],o,t),s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}return[l,u]}function Pr(t,r){return YWt.call(t,r)}function zw(t){let r={},n;function o(s){return Pr(r,s)&&r[s]!==lW}let i={size:0,empty:0,object:r,has:o,get(s){return o(s)?r[s]:void 0},set(s,a){return o(s)||(++i.size,r[s]===lW&&--i.empty),r[s]=a,this},delete(s){return o(s)&&(--i.size,++i.empty,r[s]=lW),this},clear(){i.size=i.empty=0,i.object=r={}},test(s){return arguments.length?(n=s,i):n},clean(){let s={},a=0;for(let l in r){let u=r[l];u!==lW&&(!n||!n(u))&&(s[l]=u,++a)}i.size=a,i.empty=0,i.object=r=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function XWt(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=Un(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function Dt(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),an(o,n)}function KWt(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function Vce(t){return typeof t=="boolean"}function JP(t){return Object.prototype.toString.call(t)==="[object Date]"}function Gce(t){return t&&Dn(t[Symbol.iterator])}function X0(t){return typeof t=="number"}function ZWt(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Jn(t){return typeof t=="string"}function Wce(t,r,n){t&&(t=r?Br(t).map(l=>l.replace(/\\(.)/g,"$1")):Br(t));let o=t&&t.length,i=n&&n.get||iqe,s=l=>i(r?[l]:KP(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return _d(a,t,"key")}function QWt(t,r){let n=t[0],o=Un(t),i=+r;return i?i===1?o:n+i*(o-n):n}function qce(t){t=+t||JWt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>Pr(r,a)||Pr(n,a),get:a=>Pr(r,a)?r[a]:Pr(n,a)?s(a,n[a]):void 0,set:(a,l)=>Pr(r,a)?r[a]=l:s(a,l)}}function Hce(t,r,n,o){let i=r.length,s=n.length;if(!s)return r;if(!i)return n;let a=o||new r.constructor(i+s),l=0,u=0,c=0;for(;l<i&&u<s;++c)a[c]=t(r[l],n[u])>0?n[u++]:r[l++];for(;l<i;++l,++c)a[c]=r[l];for(;u<s;++u,++c)a[c]=n[u];return a}function XP(t,r){let n="";for(;--r>=0;)n+=t;return n}function eqt(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?XP(i,a)+s:o==="center"?XP(i,~~(a/2))+s+XP(i,Math.ceil(a/2)):s+XP(i,a)}function EE(t){return t&&Un(t)-t[0]||0}function $r(t){return Hr(t)?"["+t.map($r)+"]":un(t)||Jn(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Yce(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function Xce(t,r){return r=r||tqt,t==null||t===""?null:r(t)}function Kce(t){return t==null||t===""?null:t+""}function vu(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function rqt(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}function nqt(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var MWt,FWt,OWt,mc,Jh,H0,Y0,Zx,sqe,aqe,lqe,uqe,cqe,Hr,oqe,fqe,dqe,pqe,hqe,uW,GWt,QP,WWt,qWt,HWt,YWt,lW,JWt,tqt,Ls=N(()=>{"use strict";MWt=t=>function(r){return r[t]},FWt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};OWt=Qh("id"),mc=_d(t=>t,[],"identity"),Jh=_d(()=>0,[],"zero"),H0=_d(()=>1,[],"one"),Y0=_d(()=>!0,[],"true"),Zx=_d(()=>!1,[],"false");sqe=0,aqe=1,lqe=2,uqe=3,cqe=4;Hr=Array.isArray;oqe=t=>t!=="__proto__";fqe=t=>r=>t*Math.exp(r),dqe=t=>r=>Math.log(t*r),pqe=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),hqe=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,uW=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);GWt="descending";QP=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),WWt=(t,r)=>t.length===1?qWt(t[0],r[0]):HWt(t,r,t.length),qWt=(t,r)=>function(n,o){return QP(t(n),t(o))*r},HWt=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=QP(s(o),s(i));return a*r[l]});YWt=Object.prototype.hasOwnProperty;lW={};JWt=1e4;tqt=t=>X0(t)||JP(t)?t:Date.parse(t)});function eN(t,r,n){return t.fields=r||[],t.fname=n,t}function oqt(t){return t.length===1?iqt(t[0]):sqt(t)}function ua(t){throw Error(t)}function aqt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||ua("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&ua("Access path missing closing bracket: "+t),o&&ua("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Zce(t,r,n){let o=aqt(t);return t=o.length===1?o[0]:t,eN((n&&n.get||oqt)(o),[t],r||t)}function cqt(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function mqe(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cqt,o=t||fqt;return{level(i){return arguments.length?(o=+i,this):o},error(){return o>=Qce&&n(r||"error","ERROR",arguments),this},warn(){return o>=dqt&&n(r||"warn","WARN",arguments),this},info(){return o>=pqt&&n(r||"log","INFO",arguments),this},debug(){return o>=hqt&&n(r||"log","DEBUG",arguments),this}}}function tL(t){return t===Object(t)}function Jce(t){return t==null||t===""?null:+t}function rN(t){return t!=null?Dp(t)?t:[t]:[]}function Sd(t){return typeof t=="function"}function rL(t){return Sd(t)?t:()=>t}function gqe(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function K0(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function nN(t,r){return mqt.call(t,r)}function efe(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),K0(o,n)}function gqt(t){return Object.prototype.toString.call(t)==="[object Date]"}function yqe(t){return t&&Sd(t[Symbol.iterator])}function yqt(t){return typeof t=="number"}function hW(t){return typeof t=="string"}function mW(t){return Dp(t)?"["+t.map(mW)+"]":tL(t)||hW(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function bqe(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function xqe(t,r){return r=r||bqt,t==null||t===""?null:r(t)}function vqe(t){return t==null||t===""?null:t+""}function Uw(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var iqt,sqt,eL,tN,lqt,uqt,pW,pwo,fqt,Qce,dqt,pqt,hqt,Dp,mqt,bqt,nL=N(()=>{"use strict";iqt=t=>function(r){return r[t]},sqt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};eL=Zce("id"),tN=eN(t=>t,[],"identity"),lqt=eN(()=>0,[],"zero"),uqt=eN(()=>1,[],"one"),pW=eN(()=>!0,[],"true"),pwo=eN(()=>!1,[],"false");fqt=0,Qce=1,dqt=2,pqt=3,hqt=4;Dp=Array.isArray;mqt=Object.prototype.hasOwnProperty;bqt=t=>yqt(t)||gqt(t)?t:Date.parse(t)});function Sqe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function xqt(t,r){var n=Sqe(t);return function(o,i){return r(n(o),i,t)}}function _qe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function sf(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function vqt(t){return t<0?"-"+sf(-t,6):t>9999?"+"+sf(t,6):sf(t,4)}function wqt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":vqt(t.getUTCFullYear(),4)+"-"+sf(t.getUTCMonth()+1,2)+"-"+sf(t.getUTCDate(),2)+(i?"T"+sf(r,2)+":"+sf(n,2)+":"+sf(o,2)+"."+sf(i,3)+"Z":o?"T"+sf(r,2)+":"+sf(n,2)+":"+sf(o,2)+"Z":n||r?"T"+sf(r,2)+":"+sf(n,2)+"Z":"")}function ofe(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?xqt(y,p):Sqe(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===oL&&--m,d.charCodeAt(m-1)===nfe&&--m;function w(){if(x)return tfe;if(v)return v=!1,wqe;var S,C=g,E;if(d.charCodeAt(C)===rfe){for(;g++<m&&d.charCodeAt(g)!==rfe||d.charCodeAt(++g)===rfe;);return(S=g)>=m?x=!0:(E=d.charCodeAt(g++))===oL?v=!0:E===nfe&&(v=!0,d.charCodeAt(g)===oL&&++g),d.slice(C+1,S-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(S=g++))===oL)v=!0;else if(E===nfe)v=!0,d.charCodeAt(g)===oL&&++g;else if(E!==n)continue;return d.slice(C,S)}return x=!0,d.slice(C,m)}for(;(b=w())!==tfe;){for(var _=[];b!==wqe&&b!==tfe;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=_qe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=_qe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?wqt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var wqe,tfe,rfe,oL,nfe,Cqe=N(()=>{"use strict";wqe={},tfe={},rfe=34,oL=10,nfe=13});var Eqe=N(()=>{"use strict";Cqe()});function ife(t){return t}var sfe=N(()=>{"use strict"});function gW(t){if(t==null)return ife;var r,n,o=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(l,u){u||(r=n=0);var c=2,f=l.length,d=new Array(f);for(d[0]=(r+=l[0])*o+s,d[1]=(n+=l[1])*i+a;c<f;)d[c]=l[c],++c;return d}}var yW=N(()=>{"use strict";sfe()});var afe=N(()=>{"use strict";yW()});function Tqe(t,r){for(var n,o=t.length,i=o-r;i<--o;)n=t[i],t[i++]=t[o],t[o]=n}var Aqe=N(()=>{"use strict"});function TE(t,r){return typeof r=="string"&&(r=t.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(n){return kqe(t,n)})}:kqe(t,r)}function kqe(t,r){var n=r.id,o=r.bbox,i=r.properties==null?{}:r.properties,s=bW(t,r);return n==null&&o==null?{type:"Feature",properties:i,geometry:s}:o==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:o,properties:i,geometry:s}}function bW(t,r){var n=gW(t.transform),o=t.arcs;function i(f,d){d.length&&d.pop();for(var p=o[f<0?~f:f],h=0,m=p.length;h<m;++h)d.push(n(p[h],h));f<0&&Tqe(d,m)}function s(f){return n(f)}function a(f){for(var d=[],p=0,h=f.length;p<h;++p)i(f[p],d);return d.length<2&&d.push(d[0]),d}function l(f){for(var d=a(f);d.length<4;)d.push(d[0]);return d}function u(f){return f.map(l)}function c(f){var d=f.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:f.geometries.map(c)};case"Point":p=s(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(s);break;case"LineString":p=a(f.arcs);break;case"MultiLineString":p=f.arcs.map(a);break;case"Polygon":p=u(f.arcs);break;case"MultiPolygon":p=f.arcs.map(u);break;default:return null}return{type:d,coordinates:p}}return c(r)}var xW=N(()=>{"use strict";Aqe();yW()});function lfe(t,r){var n={},o={},i={},s=[],a=-1;r.forEach(function(c,f){var d=t.arcs[c<0?~c:c],p;d.length<3&&!d[1][0]&&!d[1][1]&&(p=r[++a],r[a]=c,r[f]=p)}),r.forEach(function(c){var f=l(c),d=f[0],p=f[1],h,m;if(h=i[d])if(delete i[h.end],h.push(c),h.end=p,m=o[p]){delete o[m.start];var g=m===h?h:h.concat(m);o[g.start=h.start]=i[g.end=m.end]=g}else o[h.start]=i[h.end]=h;else if(h=o[p])if(delete o[h.start],h.unshift(c),h.start=d,m=i[d]){delete i[m.end];var y=m===h?h:m.concat(h);o[y.start=m.start]=i[y.end=h.end]=y}else o[h.start]=i[h.end]=h;else h=[c],o[h.start=d]=i[h.end=p]=h});function l(c){var f=t.arcs[c<0?~c:c],d=f[0],p;return t.transform?(p=[0,0],f.forEach(function(h){p[0]+=h[0],p[1]+=h[1]})):p=f[f.length-1],c<0?[p,d]:[d,p]}function u(c,f){for(var d in c){var p=c[d];delete f[p.start],delete p.start,delete p.end,p.forEach(function(h){n[h<0?~h:h]=1}),s.push(p)}}return u(i,o),u(o,i),r.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}var ufe=N(()=>{"use strict"});function AE(t){return bW(t,Iqe.apply(this,arguments))}function Iqe(t,r,n){var o,i,s;if(arguments.length>1)o=_qt(t,r,n);else for(i=0,o=new Array(s=t.arcs.length);i<s;++i)o[i]=i;return{type:"MultiLineString",arcs:lfe(t,o)}}function _qt(t,r,n){var o=[],i=[],s;function a(d){var p=d<0?~d:d;(i[p]||(i[p]=[])).push({i:d,g:s})}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){d.forEach(u)}function f(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(f);break;case"LineString":l(d.arcs);break;case"MultiLineString":case"Polygon":u(d.arcs);break;case"MultiPolygon":c(d.arcs);break}}return f(r),i.forEach(n==null?function(d){o.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&o.push(d[0].i)}),o}var Dqe=N(()=>{"use strict";xW();ufe()});var Nqe=N(()=>{"use strict";xW();ufe()});var Mqe=N(()=>{"use strict"});var Fqe=N(()=>{"use strict";Mqe()});var cfe=N(()=>{"use strict";sfe()});var Oqe=N(()=>{"use strict";afe();cfe()});var vW=N(()=>{"use strict";afe();xW();Dqe();Nqe();Fqe();Oqe();yW();cfe()});function ffe({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):n}function Rqe({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):(t.set(o,n),n)}function Pqe({_intern:t,_key:r},n){let o=r(n);return t.has(o)&&(n=t.get(n),t.delete(o)),n}function Lqe(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Z0,Q0,iL=N(()=>{"use strict";Z0=class extends Map{constructor(r,n=Lqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let[o,i]of r)this.set(o,i)}get(r){return super.get(ffe(this,r))}has(r){return super.has(ffe(this,r))}set(r,n){return super.set(Rqe(this,r),n)}delete(r){return super.delete(Pqe(this,r))}},Q0=class extends Set{constructor(r,n=Lqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let o of r)this.add(o)}has(r){return super.has(ffe(this,r))}add(r){return super.add(Rqe(this,r))}delete(r){return super.delete(Pqe(this,r))}}});function jqe(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=Eqt?10:s>=Tqt?5:s>=Aqt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?jqe(t,r,n*2):[l,u,c]}function dfe(t,r,n){return r=+r,t=+t,n=+n,jqe(t,r,n)[2]}function pfe(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?dfe(r,t,n):dfe(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var Eqt,Tqt,Aqt,Bqe=N(()=>{"use strict";Eqt=Math.sqrt(50),Tqt=Math.sqrt(10),Aqt=Math.sqrt(2)});var $qe=N(()=>{"use strict";Bqe()});function zqe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var sL=N(()=>{"use strict"});function J0(t){return t=kE(Math.abs(t)),t?t[1]:NaN}var aL=N(()=>{"use strict";sL()});function Uqe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var Vqe=N(()=>{"use strict"});function Gqe(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var Wqe=N(()=>{"use strict"});function Qx(t){if(!(r=kqt.exec(t)))throw new Error("invalid format: "+t);var r;return new wW({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function wW(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var kqt,hfe=N(()=>{"use strict";kqt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Qx.prototype=wW.prototype;wW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function qqe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var Hqe=N(()=>{"use strict"});function Yqe(t,r){var n=kE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(mfe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+kE(t,Math.max(0,r+s-1))[0]}var mfe,gfe=N(()=>{"use strict";sL()});function yfe(t,r){var n=kE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var Xqe=N(()=>{"use strict";sL()});var bfe,Kqe=N(()=>{"use strict";sL();gfe();Xqe();bfe={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:zqe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>yfe(t*100,r),r:yfe,s:Yqe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function xfe(t){return t}var Zqe=N(()=>{"use strict"});function lL(t){var r=t.grouping===void 0||t.thousands===void 0?xfe:Uqe(Qqe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xfe:Gqe(Qqe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Qx(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):bfe[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=g==="$"?o:/[%p]/.test(_)?a:"",E=bfe[_],T=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(k){var F=S,D=C,L,P,R;if(_==="c")D=E(k)+D,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=qqe(k)),V&&+k==0&&m!=="+"&&(V=!1),F=(V?m==="("?m:l:m==="-"||m==="("?"":m)+F,D=(_==="s"?Jqe[8+mfe/3]:"")+D+(V&&m==="("?")":""),T){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){D=(R===46?i+k.slice(L+1):k.slice(L))+D,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=F.length+k.length+D.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-D.length:1/0),U=""),h){case"<":k=F+k+D+U;break;case"=":k=F+U+k+D;break;case"^":k=U.slice(0,G=U.length>>1)+F+k+D+U.slice(G);break;default:k=U+F+k+D;break}return s(k)}return I.toString=function(){return d+""},I}function f(d,p){var h=c((d=Qx(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(J0(p)/3)))*3,g=Math.pow(10,-m),y=Jqe[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var Qqe,Jqe,vfe=N(()=>{"use strict";aL();Vqe();Wqe();hfe();Hqe();Kqe();gfe();Zqe();Qqe=Array.prototype.map,Jqe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function wfe(t){return _W=lL(t),SW=_W.format,CW=_W.formatPrefix,_W}var _W,SW,CW,eHe=N(()=>{"use strict";vfe();wfe({thousands:",",grouping:[3],currency:["$",""]})});function _fe(t){return Math.max(0,-J0(Math.abs(t)))}var tHe=N(()=>{"use strict";aL()});function Sfe(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(J0(r)/3)))*3-J0(Math.abs(t)))}var rHe=N(()=>{"use strict";aL()});function Cfe(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,J0(r)-J0(t))+1}var nHe=N(()=>{"use strict";aL()});var oHe=N(()=>{"use strict";eHe();vfe();hfe();tHe();rHe();nHe()});function di(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>di(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(Efe.setTime(+s),Tfe.setTime(+a),t(Efe),t(Tfe),Math.floor(n(Efe,Tfe))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var Efe,Tfe,Jx=N(()=>{"use strict";Efe=new Date,Tfe=new Date});var ev,iHe,sHe=N(()=>{"use strict";Jx();ev=di(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);ev.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?di(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):ev);iHe=ev.range});var IE,aHe,lHe=N(()=>{"use strict";Jx();IE=di(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),aHe=IE.range});var EW,Iqt,TW,Dqt,uHe=N(()=>{"use strict";Jx();EW=di(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),Iqt=EW.range,TW=di(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),Dqt=TW.range});var AW,Nqt,kW,Mqt,cHe=N(()=>{"use strict";Jx();AW=di(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),Nqt=AW.range,kW=di(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),Mqt=kW.range});var ey,Fqt,ty,Oqt,fHe,Rqt,dHe=N(()=>{"use strict";Jx();ey=di(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Fqt=ey.range,ty=di(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),Oqt=ty.range,fHe=di(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),Rqt=fHe.range});function DE(t){return di(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function NE(t){return di(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var Vw,iN,pHe,hHe,Gw,mHe,gHe,yHe,Lqt,jqt,Bqt,$qt,zqt,Uqt,Ww,sN,bHe,xHe,qw,vHe,wHe,_He,Vqt,Gqt,Wqt,qqt,Hqt,Yqt,SHe=N(()=>{"use strict";Jx();Vw=DE(0),iN=DE(1),pHe=DE(2),hHe=DE(3),Gw=DE(4),mHe=DE(5),gHe=DE(6),yHe=Vw.range,Lqt=iN.range,jqt=pHe.range,Bqt=hHe.range,$qt=Gw.range,zqt=mHe.range,Uqt=gHe.range;Ww=NE(0),sN=NE(1),bHe=NE(2),xHe=NE(3),qw=NE(4),vHe=NE(5),wHe=NE(6),_He=Ww.range,Vqt=sN.range,Gqt=bHe.range,Wqt=xHe.range,qqt=qw.range,Hqt=vHe.range,Yqt=wHe.range});var uL,Xqt,cL,Kqt,CHe=N(()=>{"use strict";Jx();uL=di(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),Xqt=uL.range,cL=di(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),Kqt=cL.range});var rm,Zqt,nm,Qqt,EHe=N(()=>{"use strict";Jx();rm=di(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());rm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:di(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});Zqt=rm.range,nm=di(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());nm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:di(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});Qqt=nm.range});var Dfe=N(()=>{"use strict";sHe();lHe();uHe();cHe();dHe();SHe();CHe();EHe()});function Ffe(t){return ME.setFullYear(t),ME.setMonth(0),ME.setDate(1),ME.setHours(0,0,0,0),ME}function eHt(t){return ey.count(Ffe(t.getFullYear())-1,t)}function THe(t){return Vw.count(Ffe(t.getFullYear())-1,t)}function Nfe(t){return Ffe(t).getDay()}function tHt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return ty.count(r-1,t)}function AHe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Ww.count(r-1,t)}function Mfe(t){return ME.setTime(Date.UTC(t,0,1)),ME.getUTCDay()}function aN(t,r,n){return r+t*7-(n+6)%7}function DHe(t){return rHt[t]}function NHe(t){return nHt[t]}var gc,am,Cd,af,om,ry,lN,im,sm,ny,tv,Jqt,C2o,E2o,ME,T2o,A2o,k2o,I2o,rHt,nHt,fL,dL,pL,IW,oHt,kHe,iHt,sHt,hL,mL,gL,aHt,lHt,IHe,uHt,D2o,MHe=N(()=>{"use strict";nL();Dfe();gc="year",am="quarter",Cd="month",af="week",om="date",ry="day",lN="dayofyear",im="hours",sm="minutes",ny="seconds",tv="milliseconds",Jqt=[gc,am,Cd,af,om,ry,lN,im,sm,ny,tv],C2o=Jqt.reduce((t,r,n)=>(t[r]=1+n,t),{}),E2o={[gc]:"%Y ",[am]:"Q%q ",[Cd]:"%b ",[om]:"%d ",[af]:"W%U ",[ry]:"%a ",[lN]:"%j ",[im]:"%H:00",[sm]:"00:%M",[ny]:":%S",[tv]:".%L",[`${gc}-${Cd}`]:"%Y-%m ",[`${gc}-${Cd}-${om}`]:"%Y-%m-%d ",[`${im}-${sm}`]:"%H:%M"},ME=new Date;T2o={[gc]:t=>t.getFullYear(),[am]:t=>Math.floor(t.getMonth()/3),[Cd]:t=>t.getMonth(),[om]:t=>t.getDate(),[im]:t=>t.getHours(),[sm]:t=>t.getMinutes(),[ny]:t=>t.getSeconds(),[tv]:t=>t.getMilliseconds(),[lN]:t=>eHt(t),[af]:t=>THe(t),[af+ry]:(t,r)=>aN(THe(t),t.getDay(),Nfe(r)),[ry]:(t,r)=>aN(1,t.getDay(),Nfe(r))},A2o={[am]:t=>3*t,[af]:(t,r)=>aN(t,0,Nfe(r))},k2o={[gc]:t=>t.getUTCFullYear(),[am]:t=>Math.floor(t.getUTCMonth()/3),[Cd]:t=>t.getUTCMonth(),[om]:t=>t.getUTCDate(),[im]:t=>t.getUTCHours(),[sm]:t=>t.getUTCMinutes(),[ny]:t=>t.getUTCSeconds(),[tv]:t=>t.getUTCMilliseconds(),[lN]:t=>tHt(t),[af]:t=>AHe(t),[ry]:(t,r)=>aN(1,t.getUTCDay(),Mfe(r)),[af+ry]:(t,r)=>aN(AHe(t),t.getUTCDay(),Mfe(r))},I2o={[am]:t=>3*t,[af]:(t,r)=>aN(t,0,Mfe(r))},rHt={[gc]:rm,[am]:uL.every(3),[Cd]:uL,[af]:Vw,[om]:ey,[ry]:ey,[lN]:ey,[im]:AW,[sm]:EW,[ny]:IE,[tv]:ev},nHt={[gc]:nm,[am]:cL.every(3),[Cd]:cL,[af]:Ww,[om]:ty,[ry]:ty,[lN]:ty,[im]:kW,[sm]:TW,[ny]:IE,[tv]:ev};fL=1e3,dL=fL*60,pL=dL*60,IW=pL*24,oHt=IW*7,kHe=IW*30,iHt=IW*365,sHt=[gc,Cd,om,im,sm,ny,tv],hL=sHt.slice(0,-1),mL=hL.slice(0,-1),gL=mL.slice(0,-1),aHt=gL.slice(0,-1),lHt=[gc,af],IHe=[gc,Cd],uHt=[gc],D2o=[[hL,1,fL],[hL,5,5*fL],[hL,15,15*fL],[hL,30,30*fL],[mL,1,dL],[mL,5,5*dL],[mL,15,15*dL],[mL,30,30*dL],[gL,1,pL],[gL,3,3*pL],[gL,6,6*pL],[gL,12,12*pL],[aHt,1,IW],[lHt,1,oHt],[IHe,1,kHe],[IHe,3,3*kHe],[uHt,1,iHt]]});function Ofe(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rfe(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yL(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function uN(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=bL(i),f=xL(i),d=bL(s),p=xL(s),h=bL(a),m=xL(a),g=bL(l),y=xL(l),b=bL(u),x=xL(u),v={a:V,A:G,b:U,B:H,c:null,d:jHe,e:jHe,f:MHt,g:UHt,G:GHt,H:IHt,I:DHt,j:NHt,L:VHe,m:FHt,M:OHt,p:X,q:fe,Q:zHe,s:UHe,S:RHt,u:PHt,U:LHt,V:jHt,w:BHt,W:$Ht,x:null,X:null,y:zHt,Y:VHt,Z:WHt,"%":$He},w={a:$,A:M,b:z,B:q,c:null,d:BHe,e:BHe,f:XHt,g:iYt,G:aYt,H:qHt,I:HHt,j:YHt,L:WHe,m:KHt,M:ZHt,p:ee,q:ae,Q:zHe,s:UHe,S:QHt,u:JHt,U:eYt,V:tYt,w:rYt,W:nYt,x:null,X:null,y:oYt,Y:sYt,Z:lYt,"%":$He},_={a:I,A:k,b:F,B:D,c:L,d:PHe,e:PHe,f:EHt,g:RHe,G:OHe,H:LHe,I:LHe,j:wHt,L:CHt,m:vHt,M:_Ht,p:T,q:xHt,Q:AHt,s:kHt,S:SHt,u:hHt,U:mHt,V:gHt,w:pHt,W:yHt,x:P,X:R,y:RHe,Y:OHe,Z:bHt,"%":THt};v.x=S(n,v),v.X=S(o,v),v.c=S(r,v),w.x=S(n,w),w.X=S(o,w),w.c=S(r,w);function S(Q,le){return function(ie){var K=[],ge=-1,ne=0,ye=Q.length,xe,De,Te;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(K.push(Q.slice(ne,ge)),(De=FHe[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):De=xe==="e"?" ":"0",(Te=le[xe])&&(xe=Te(ie,De)),K.push(xe),ne=ge+1);return K.push(Q.slice(ne,ge)),K.join("")}}function C(Q,le){return function(ie){var K=yL(1900,void 0,1),ge=E(K,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ne=Rfe(yL(K.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?sN.ceil(ne):sN(ne),ne=ty.offset(ne,(K.V-1)*7),K.y=ne.getUTCFullYear(),K.m=ne.getUTCMonth(),K.d=ne.getUTCDate()+(K.w+6)%7):(ne=Ofe(yL(K.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?iN.ceil(ne):iN(ne),ne=ey.offset(ne,(K.V-1)*7),K.y=ne.getFullYear(),K.m=ne.getMonth(),K.d=ne.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),ye="Z"in K?Rfe(yL(K.y,0,1)).getUTCDay():Ofe(yL(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(ye+5)%7:K.w+K.U*7-(ye+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Rfe(K)):Ofe(K)}}function E(Q,le,ie,K){for(var ge=0,ne=le.length,ye=ie.length,xe,De;ge<ne;){if(K>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),De=_[xe in FHe?le.charAt(ge++):xe],!De||(K=De(Q,ie,K))<0)return-1}else if(xe!=ie.charCodeAt(K++))return-1}return K}function T(Q,le,ie){var K=c.exec(le.slice(ie));return K?(Q.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function I(Q,le,ie){var K=h.exec(le.slice(ie));return K?(Q.w=m.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(Q,le,ie){var K=d.exec(le.slice(ie));return K?(Q.w=p.get(K[0].toLowerCase()),ie+K[0].length):-1}function F(Q,le,ie){var K=b.exec(le.slice(ie));return K?(Q.m=x.get(K[0].toLowerCase()),ie+K[0].length):-1}function D(Q,le,ie){var K=g.exec(le.slice(ie));return K?(Q.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function fe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function M(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=S(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=C(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=S(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=C(Q+="",!0);return le.toString=function(){return Q},le}}}function lo(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function dHt(t){return t.replace(fHt,"\\$&")}function bL(t){return new RegExp("^(?:"+t.map(dHt).join("|")+")","i")}function xL(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function pHt(t,r,n){var o=el.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function hHt(t,r,n){var o=el.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function mHt(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function gHt(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function yHt(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function OHe(t,r,n){var o=el.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function RHe(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function bHt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function xHt(t,r,n){var o=el.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function vHt(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function PHe(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function wHt(t,r,n){var o=el.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function LHe(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function _Ht(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function SHt(t,r,n){var o=el.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function CHt(t,r,n){var o=el.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function EHt(t,r,n){var o=el.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function THt(t,r,n){var o=cHt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function AHt(t,r,n){var o=el.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function kHt(t,r,n){var o=el.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function jHe(t,r){return lo(t.getDate(),r,2)}function IHt(t,r){return lo(t.getHours(),r,2)}function DHt(t,r){return lo(t.getHours()%12||12,r,2)}function NHt(t,r){return lo(1+ey.count(rm(t),t),r,3)}function VHe(t,r){return lo(t.getMilliseconds(),r,3)}function MHt(t,r){return VHe(t,r)+"000"}function FHt(t,r){return lo(t.getMonth()+1,r,2)}function OHt(t,r){return lo(t.getMinutes(),r,2)}function RHt(t,r){return lo(t.getSeconds(),r,2)}function PHt(t){var r=t.getDay();return r===0?7:r}function LHt(t,r){return lo(Vw.count(rm(t)-1,t),r,2)}function GHe(t){var r=t.getDay();return r>=4||r===0?Gw(t):Gw.ceil(t)}function jHt(t,r){return t=GHe(t),lo(Gw.count(rm(t),t)+(rm(t).getDay()===4),r,2)}function BHt(t){return t.getDay()}function $Ht(t,r){return lo(iN.count(rm(t)-1,t),r,2)}function zHt(t,r){return lo(t.getFullYear()%100,r,2)}function UHt(t,r){return t=GHe(t),lo(t.getFullYear()%100,r,2)}function VHt(t,r){return lo(t.getFullYear()%1e4,r,4)}function GHt(t,r){var n=t.getDay();return t=n>=4||n===0?Gw(t):Gw.ceil(t),lo(t.getFullYear()%1e4,r,4)}function WHt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+lo(r/60|0,"0",2)+lo(r%60,"0",2)}function BHe(t,r){return lo(t.getUTCDate(),r,2)}function qHt(t,r){return lo(t.getUTCHours(),r,2)}function HHt(t,r){return lo(t.getUTCHours()%12||12,r,2)}function YHt(t,r){return lo(1+ty.count(nm(t),t),r,3)}function WHe(t,r){return lo(t.getUTCMilliseconds(),r,3)}function XHt(t,r){return WHe(t,r)+"000"}function KHt(t,r){return lo(t.getUTCMonth()+1,r,2)}function ZHt(t,r){return lo(t.getUTCMinutes(),r,2)}function QHt(t,r){return lo(t.getUTCSeconds(),r,2)}function JHt(t){var r=t.getUTCDay();return r===0?7:r}function eYt(t,r){return lo(Ww.count(nm(t)-1,t),r,2)}function qHe(t){var r=t.getUTCDay();return r>=4||r===0?qw(t):qw.ceil(t)}function tYt(t,r){return t=qHe(t),lo(qw.count(nm(t),t)+(nm(t).getUTCDay()===4),r,2)}function rYt(t){return t.getUTCDay()}function nYt(t,r){return lo(sN.count(nm(t)-1,t),r,2)}function oYt(t,r){return lo(t.getUTCFullYear()%100,r,2)}function iYt(t,r){return t=qHe(t),lo(t.getUTCFullYear()%100,r,2)}function sYt(t,r){return lo(t.getUTCFullYear()%1e4,r,4)}function aYt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?qw(t):qw.ceil(t),lo(t.getUTCFullYear()%1e4,r,4)}function lYt(){return"+0000"}function $He(){return"%"}function zHe(t){return+t}function UHe(t){return Math.floor(+t/1e3)}var FHe,el,cHt,fHt,Pfe=N(()=>{"use strict";Dfe();FHe={"-":"",_:" ",0:"0"},el=/^\s*\d+/,cHt=/^%/,fHt=/[\\^$*+?|[\]().{}]/g});function Lfe(t){return cN=uN(t),DW=cN.format,NW=cN.parse,MW=cN.utcFormat,FW=cN.utcParse,cN}var cN,DW,NW,MW,FW,HHe=N(()=>{"use strict";Pfe();Lfe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var YHe=N(()=>{"use strict";HHe();Pfe()});function vL(t){let r={};return n=>r[n]||(r[n]=t(n))}function uYt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=cYt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function cYt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function QHe(t){let r=vL(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Qx(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return uYt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Qx(a??",f");let l=pfe(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=Sfe(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=Cfe(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=_fe(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function fYt(){return jfe=QHe({format:SW,formatPrefix:CW})}function dYt(t){return QHe(lL(t))}function XHe(t){return arguments.length?jfe=dYt(t):jfe}function KHe(t,r,n){n=n||{},tL(n)||ua(`Invalid time multi-format specifier: ${n}`);let o=r(ny),i=r(sm),s=r(im),a=r(om),l=r(af),u=r(Cd),c=r(am),f=r(gc),d=t(n[tv]||".%L"),p=t(n[ny]||":%S"),h=t(n[sm]||"%I:%M"),m=t(n[im]||"%I %p"),g=t(n[om]||n[ry]||"%a %d"),y=t(n[af]||"%b %d"),b=t(n[Cd]||"%B"),x=t(n[am]||"%B"),v=t(n[gc]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function JHe(t){let r=vL(t.format),n=vL(t.utcFormat);return{timeFormat:o=>hW(o)?r(o):KHe(r,DHe,o),utcFormat:o=>hW(o)?n(o):KHe(n,NHe,o),timeParse:vL(t.parse),utcParse:vL(t.utcParse)}}function pYt(){return Bfe=JHe({format:DW,parse:NW,utcFormat:MW,utcParse:FW})}function hYt(t){return JHe(uN(t))}function OW(t){return arguments.length?Bfe=hYt(t):Bfe}function eYe(t,r){let n=arguments.length;return n&&n!==2&&ua("defaultLocale expects either zero or two arguments."),n?ZHe(XHe(t),OW(r)):ZHe(XHe(),OW())}var jfe,Bfe,ZHe,$fe=N(()=>{"use strict";$qe();oHe();MHe();nL();YHe();fYt();pYt();ZHe=(t,r)=>K0({},t,r)});function bYt(t,r){return n=>({options:n||{},sanitize:vYt,load:xYt,fileAccess:!!r,file:wYt(r),http:SYt(t)})}function xYt(t,r){return je(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function vYt(t,r){return je(this,null,function*(){r=K0({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=gYt.test(t.replace(yYt,""));(t==null||typeof t!="string"||!l)&&ua("Sanitize failure, invalid URI: "+mW(t));let u=mYt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(tYe))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(tYe.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function wYt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):_Yt}function _Yt(){return je(this,null,function*(){ua("No file system access.")})}function SYt(t){return t?function(r,n){return je(this,null,function*(){let o=K0({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Sd(s[i])?s[i]():s.text():ua(s.status+""+s.statusText)})}:CYt}function CYt(){return je(this,null,function*(){ua("No HTTP fetch method available.")})}function DYt(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=RW.length,i=RW.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&EYt(u)&&!RW[l](u)&&(i[l]=0,++a,a===RW.length))return"string";return IYt[i.reduce((s,a)=>s===0?a:s,0)-1]}function NYt(t,r){return r.reduce((n,o)=>(n[o]=DYt(t,o),n),{})}function nYe(t){let r=function(n,o){let i={delimiter:t};return Ufe(n,o?K0(o,i):i)};return r.responseType="text",r}function Ufe(t,r){return r.header&&(t=r.header.map(mW).join(r.delimiter)+`
`+t),ofe(r.delimiter).parse(t+"")}function MYt(t){return typeof Buffer=="function"&&Sd(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Vfe(t,r){let n=r&&r.property?Zce(r.property):tN;return tL(t)&&!MYt(t)?FYt(n(t),r):n(JSON.parse(t))}function FYt(t,r){return!Dp(t)&&yqe(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function iYe(t,r){let n,o,i,s;return t=Vfe(t,r),r&&r.feature?(n=TE,i=r.feature):r&&r.mesh?(n=AE,i=r.mesh,s=OYt[r.filter]):ua("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):ua("Invalid TopoJSON object: "+i),o&&o.features||[o]}function sYe(t,r){return arguments.length>1?(zfe[t]=r,this):nN(zfe,t)?zfe[t]:null}function aYe(t){let r=sYe(t);return r&&r.responseType||"text"}function lYe(t,r,n,o){r=r||{};let i=sYe(r.type||"json");return i||ua("Unknown data format type: "+r.type),t=i(t,r),r.parse&&RYt(t,r.parse,n,o),nN(t,"columns")&&delete t.columns,t}function RYt(t,r,n,o){if(!t.length)return;let i=OW();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=NYt(t,s)),s=Object.keys(r);let p=s.map(h=>{let m=r[h],g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!rYe[m])throw Error("Illegal format pattern: "+h+":"+m);return rYe[m]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var mYt,gYt,yYt,tYe,EYt,TYt,AYt,oYe,kYt,rYe,RW,IYt,OYt,zfe,uYe,cYe=N(()=>{"use strict";nL();Eqe();vW();$fe();mYt=/^(data:|([A-Za-z]+:)?\/\/)/,gYt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,yYt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,tYe="file://";EYt=t=>t!=null&&t===t,TYt=t=>t==="true"||t==="false"||t===!0||t===!1,AYt=t=>!Number.isNaN(Date.parse(t)),oYe=t=>!Number.isNaN(+t)&&!(t instanceof Date),kYt=t=>oYe(t)&&Number.isInteger(+t),rYe={boolean:bqe,integer:Jce,number:Jce,date:xqe,string:vqe,unknown:tN},RW=[TYt,kYt,oYe,AYt],IYt=["boolean","integer","number","date"];Ufe.responseType="text";Vfe.responseType="json";OYt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};iYe.responseType="json";zfe={dsv:Ufe,csv:nYe(","),tsv:nYe("	"),json:Vfe,topojson:iYe};uYe=bYt(typeof fetch<"u"&&fetch,null)});function BW(t){let r=t||tN,n=[],o={};return n.add=i=>{let s=r(i);return o[s]||(o[s]=1,n.push(i)),n},n.remove=i=>{let s=r(i);if(o[s]){o[s]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function SL(t,r){return je(this,null,function*(){try{yield r(t)}catch(n){t.error(n)}})}function FE(t){return!!(t&&_r(t))}function _r(t){return t[yYe]}function bYe(t,r){return t[yYe]=r,t}function Nn(t){let r=t===Object(t)?t:{data:t};return _r(r)?r:bYe(r,PYt++)}function $W(t){return OE(t,Nn({}))}function OE(t,r){for(let n in t)r[n]=t[n];return r}function zW(t,r){return bYe(r,_r(t))}function iy(t,r){return t?r?(n,o)=>t(n,o)||_r(r(n))-_r(r(o)):(n,o)=>t(n,o)||_r(n)-_r(o):null}function Wfe(t){return t&&t.constructor===iv}function iv(){let t=[],r=[],n=[],o=[],i=[],s=null,a=!1;return{constructor:iv,insert(l){let u=rN(l),c=u.length;for(let f=0;f<c;++f)t.push(u[f]);return this},remove(l){let u=Sd(l)?o:r,c=rN(l),f=c.length;for(let d=0;d<f;++d)u.push(c[d]);return this},modify(l,u,c){let f={field:u,value:rL(c)};return Sd(l)?(f.filter=l,i.push(f)):(f.tuple=l,n.push(f)),this},encode(l,u){return Sd(l)?i.push({filter:l,field:u}):n.push({tuple:l,field:u}),this},clean(l){return s=l,this},reflow(){return a=!0,this},pulse(l,u){let c={},f={},d,p,h,m,g,y;for(d=0,p=u.length;d<p;++d)c[_r(u[d])]=1;for(d=0,p=r.length;d<p;++d)g=r[d],c[_r(g)]=-1;for(d=0,p=o.length;d<p;++d)m=o[d],u.forEach(x=>{m(x)&&(c[_r(x)]=-1)});for(d=0,p=t.length;d<p;++d)g=t[d],y=_r(g),c[y]?c[y]=1:l.add.push(Nn(t[d]));for(d=0,p=u.length;d<p;++d)g=u[d],c[_r(g)]<0&&l.rem.push(g);function b(x,v,w){w?x[v]=w(x):l.encode=v,a||(f[_r(x)]=x)}for(d=0,p=n.length;d<p;++d)h=n[d],g=h.tuple,m=h.field,y=c[_r(g)],y>0&&(b(g,m,h.value),l.modifies(m));for(d=0,p=i.length;d<p;++d)h=i[d],m=h.filter,u.forEach(x=>{m(x)&&c[_r(x)]>0&&b(x,h.field,h.value)}),l.modifies(h.field);if(a)l.mod=r.length||o.length?u.filter(x=>c[_r(x)]>0):u.slice();else for(y in f)l.mod.push(f[y]);return(s||s==null&&(r.length||o.length))&&l.clean(!0),l}}}function CL(){Object.defineProperty(this,LW,{writable:!0,value:{}})}function Fo(t,r,n,o){this.id=++LYt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,r&&(this._update=r),n&&this.parameters(n,o)}function fYe(t){return function(r){let n=this.flags;return arguments.length===0?!!(n&t):(this.flags=r?n|t:n&~t,this)}}function UYt(t,r,n,o){let i=1,s;return t instanceof Fo?s=t:t&&t.prototype instanceof Fo?s=new t:Sd(t)?s=new Fo(null,t):(i=0,s=new Fo(t,r)),this.rank(s),i&&(o=n,n=r),n&&this.connect(s,s.parameters(n,o)),this.touch(s),s}function VYt(t,r){let n=t.rank,o=r.length;for(let i=0;i<o;++i)if(n<r[i].rank){this.rerank(t);return}}function dN(t,r,n){this.id=++GYt,this.value=null,n&&(this.receive=n),t&&(this._filter=t),r&&(this._apply=r)}function Hw(t,r,n){return new dN(t,r,n)}function WYt(t,r,n,o){let i=this,s=Hw(n,o),a=function(c){c.dataflow=i;try{s.receive(c)}catch(f){i.error(f)}finally{i.run()}},l;typeof t=="string"&&typeof document<"u"?l=document.querySelectorAll(t):l=rN(t);let u=l.length;for(let c=0;c<u;++c)l[c].addEventListener(r,a);return s}function qYt(t,r){let n=this.locale();return lYe(t,r,n.timeParse,n.utcParse)}function HYt(t,r,n){return r=this.parse(r,n),this.pulse(t,this.changeset().insert(r))}function YYt(t,r){return je(this,null,function*(){let n=this,o=0,i;try{i=yield n.loader().load(t,{context:"dataflow",response:aYe(r&&r.type)});try{i=n.parse(i,r)}catch(s){o=-2,n.warn("Data ingestion failed",t,s)}}catch(s){o=-1,n.warn("Loading failed",t,s)}return{data:i,status:o}})}function XYt(t,r,n){return je(this,null,function*(){let o=this,i=o._pending||KYt(o);i.requests+=1;let s=yield o.request(r,n);return o.pulse(t,o.changeset().remove(pW).insert(s.data||[])),i.done(),s})}function KYt(t){let r,n=new Promise(o=>r=o);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,r(t))},t._pending=n}function QYt(t,r,n,o,i){return(t instanceof Fo?eXt:JYt)(this,t,r,n,o,i),this}function JYt(t,r,n,o,i,s){let a=K0({},s,ZYt),l,u;Sd(n)||(n=rL(n)),o===void 0?l=c=>t.touch(n(c)):Sd(o)?(u=new Fo(null,o,i,!1),l=c=>{u.evaluate(c);let f=n(c),d=u.value;Wfe(d)?t.pulse(f,d,s):t.update(f,d,a)}):l=c=>t.update(n(c),o,a),r.apply(l)}function eXt(t,r,n,o,i,s){if(o===void 0)r.targets().add(n);else{let a=s||{},l=new Fo(null,tXt(n,o),i,!1);l.modified(a.force),l.rank=r.rank,r.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),t.connect(n,[l]))}}function tXt(t,r){return r=Sd(r)?r:rL(r),t?function(n,o){let i=r(n,o);return t.skip()||(t.skip(i!==this.value).value=i),i}:r}function rXt(t){t.rank=++this._rank}function nXt(t){let r=[t],n,o,i;for(;r.length;)if(this.rank(n=r.pop()),o=n._targets)for(i=o.length;--i>=0;)r.push(n=o[i]),n===t&&ua("Cycle detected in dataflow graph.")}function nv(t,r,n){this.dataflow=t,this.stamp=r??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Gfe(t,r){let n=[];return Uw(t,r,o=>n.push(o)),n}function gYe(t,r){let n={};return t.visit(r,o=>{n[_r(o)]=1}),o=>n[_r(o)]?null:o}function PW(t,r){return t?(n,o)=>t(n,o)&&r(n,o):r}function UW(t,r,n,o){let i=this,s=0;this.dataflow=t,this.stamp=r,this.fields=null,this.encode=o||null,this.pulses=n;for(let a of n)if(a.stamp===r){if(a.fields){let l=i.fields||(i.fields={});for(let u in a.fields)l[u]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}function iXt(t,r,n){return je(this,null,function*(){let o=this,i=[];if(o._pulse)return xYe(o);if(o._pending&&(yield o._pending),r&&(yield SL(o,r)),!o._touched.length)return o.debug("Dataflow invoked, but nothing to do."),o;let s=++o._clock;o._pulse=new nv(o,s,t),o._touched.forEach(f=>o._enqueue(f,!0)),o._touched=BW(eL);let a=0,l,u,c;try{for(;o._heap.size()>0;){if(l=o._heap.pop(),l.rank!==l.qrank){o._enqueue(l,!0);continue}u=l.run(o._getPulse(l,t)),u.then?u=yield u:u.async&&(i.push(u.async),u=jW),u!==jW&&l._targets&&l._targets.forEach(f=>o._enqueue(f)),++a}}catch(f){o._heap.clear(),c=f}if(o._input={},o._pulse=null,o.debug(`Pulse ${s}: ${a} operators`),c&&(o._postrun=[],o.error(c)),o._postrun.length){let f=o._postrun.sort((d,p)=>p.priority-d.priority);o._postrun=[];for(let d=0;d<f.length;++d)yield SL(o,f[d].callback)}return n&&(yield SL(o,n)),i.length&&Promise.all(i).then(f=>o.runAsync(null,()=>{f.forEach(d=>{try{d(o)}catch(p){o.error(p)}})})),o})}function sXt(t,r,n){return je(this,null,function*(){for(;this._running;)yield this._running;let o=()=>this._running=null;return(this._running=this.evaluate(t,r,n)).then(o,o),this._running})}function aXt(t,r,n){return this._pulse?xYe(this):(this.evaluate(t,r,n),this)}function lXt(t,r,n){if(this._pulse||r)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(o){this.error(o)}}function xYe(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function uXt(t,r){let n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||r)&&(t.qrank=t.rank,this._heap.push(t))}function cXt(t,r){let n=t.source,o=this._clock;return n&&Dp(n)?new UW(this,o,n.map(i=>i.pulse),r):this._input[t.id]||fXt(this._pulse,n&&n.pulse)}function fXt(t,r){return r&&r.stamp===t.stamp?r:(t=t.fork(),r&&r!==jW&&(t.source=r.source),t)}function dXt(t,r){let n=r||qfe;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function pXt(t,r,n){let o=n||qfe;return(t.set(r)||o.force)&&this.touch(t,o),this}function hXt(t,r,n){this.touch(t,n||qfe);let o=new nv(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return o.target=t,this._input[t.id]=r.pulse(o,i),this}function mXt(t){let r=[];return{clear:()=>r=[],size:()=>r.length,peek:()=>r[0],push:n=>(r.push(n),vYe(r,0,r.length-1,t)),pop:()=>{let n=r.pop(),o;return r.length?(o=r[0],r[0]=n,gXt(r,0,t)):o=n,o}}}function vYe(t,r,n,o){let i,s,a=t[n];for(;n>r;){if(s=n-1>>1,i=t[s],o(a,i)<0){t[n]=i,n=s;continue}break}return t[n]=a}function gXt(t,r,n){let o=r,i=t.length,s=t[r],a=(r<<1)+1,l;for(;a<i;)l=a+1,l<i&&n(t[a],t[l])>=0&&(a=l),t[r]=t[a],r=a,a=(r<<1)+1;return t[r]=s,vYe(t,o,r,n)}function Xw(){this.logger(mqe()),this.logLevel(Qce),this._clock=0,this._rank=0,this._locale=eYe();try{this._loader=uYe()}catch{}this._touched=BW(eL),this._input={},this._pulse=null,this._heap=mXt((t,r)=>t.qrank-r.qrank),this._postrun=[]}function _L(t){return function(){return this._log[t].apply(this,arguments)}}function et(t,r){Fo.call(this,t,null,r)}function VW(t){let r=Hfe(t);return r&&r.Definition||null}function Hfe(t){return t=t&&t.toLowerCase(),nN(ov,t)?ov[t]:null}var yYe,PYt,LW,LYt,jYt,BYt,$Yt,zYt,GYt,ZYt,jW,oy,Yw,rv,oXt,dYe,fN,pYe,wL,hYe,mYe,qfe,ov,tl=N(()=>{"use strict";nL();cYe();$fe();yYe=Symbol("vega_id"),PYt=1;LW="_:mod:_";CL.prototype={set(t,r,n,o){let i=this,s=i[t],a=i[LW];return r!=null&&r>=0?(s[r]!==n||o)&&(s[r]=n,a[r+":"+t]=-1,a[t]=-1):(s!==n||o)&&(i[t]=n,a[t]=Dp(n)?1+n.length:-1),i},modified(t,r){let n=this[LW];if(arguments.length){if(Dp(t)){for(let o=0;o<t.length;++o)if(n[t[o]])return!0;return!1}}else{for(let o in n)if(n[o])return!0;return!1}return r!=null&&r>=0?r+1<n[t]||!!n[r+":"+t]:!!n[t]},clear(){return this[LW]={},this}};LYt=0,jYt="pulse",BYt=new CL,$Yt=1,zYt=2;Fo.prototype={targets(){return this._targets||(this._targets=BW(eL))},set(t){return this.value!==t?(this.value=t,1):0},skip:fYe($Yt),modified:fYe(zYt),parameters(t,r,n){r=r!==!1;let o=this._argval=this._argval||new CL,i=this._argops=this._argops||[],s=[],a,l,u,c,f=(d,p,h)=>{h instanceof Fo?(h!==this&&(r&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:p})):o.set(d,p,h)};for(a in t)if(l=t[a],a===jYt)rN(l).forEach(d=>{d instanceof Fo?d!==this&&(d.targets().add(this),s.push(d)):ua("Pulse parameters must be operator instances.")}),this.source=l;else if(Dp(l))for(o.set(a,-1,Array(u=l.length)),c=0;c<u;++c)f(a,c,l[c]);else f(a,-1,l);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(t){let r=this._argval||BYt,n=this._argops,o,i,s,a;if(n){let l=n.length;for(i=0;i<l;++i)o=n[i],s=o.op,a=s.modified()&&s.stamp===t,r.set(o.name,o.index,s.value,a);if(n.initonly){for(i=0;i<l;++i)o=n[i],o.op.targets().remove(this);this._argops=null,this._update=null}}return r},detach(){let t=this._argops,r,n,o,i;if(t)for(r=0,n=t.length;r<n;++r)o=t[r],i=o.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let r=this._update;if(r){let n=this.marshall(t.stamp),o=r.call(this,n,t);if(n.clear(),o!==this.value)this.value=o;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?(this.skip(!1),r=0):r=this.evaluate(t),this.pulse=r||t}};GYt=0;dN.prototype={_filter:pW,_apply:tN,targets(){return this._targets||(this._targets=BW(eL))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let r=this.value=this._apply(t),n=this._targets,o=n?n.length:0;for(let i=0;i<o;++i)n[i].receive(r);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let r=Hw(t);return this.targets().add(r),r},apply(t){let r=Hw(null,t);return this.targets().add(r),r},merge(){let t=Hw();this.targets().add(t);for(let r=0,n=arguments.length;r<n;++r)arguments[r].targets().add(t);return t},throttle(t){let r=-1;return this.filter(()=>{let n=Date.now();return n-r>t?(r=n,1):0})},debounce(t){let r=Hw();return this.targets().add(Hw(null,null,gqe(t,n=>{let o=n.dataflow;r.receive(n),o&&o.run&&o.run()}))),r},between(t,r){let n=!1;return t.targets().add(Hw(null,null,()=>n=!0)),r.targets().add(Hw(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=pW,this._targets=null}};ZYt={skip:!0};jW={},oy=1,Yw=2,rv=4,oXt=oy|Yw,dYe=oy|rv,fN=oy|Yw|rv,pYe=8,wL=16,hYe=32,mYe=64;nv.prototype={StopPropagation:jW,ADD:oy,REM:Yw,MOD:rv,ADD_REM:oXt,ADD_MOD:dYe,ALL:fN,REFLOW:pYe,SOURCE:wL,NO_SOURCE:hYe,NO_FIELDS:mYe,fork(t){return new nv(this.dataflow).init(this,t)},clone(){let t=this.fork(fN);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(fN|wL)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new nv(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,r){let n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(r&mYe)&&(n.fields=t.fields),r&oy?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),r&Yw?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),r&rv?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),r&hYe?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){let r=t||fN;return r&oy&&this.add.length||r&Yw&&this.rem.length||r&rv&&this.mod.length},reflow(t){if(t)return this.fork(fN).reflow();let r=this.add.length,n=this.source&&this.source.length;return n&&n!==r&&(this.mod=this.source,r&&this.filter(rv,gYe(this,oy))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let r=this.fields||(this.fields={});return Dp(t)?t.forEach(n=>r[n]=!0):r[t]=!0,this},modified(t,r){let n=this.fields;return(r||this.mod.length)&&n?arguments.length?Dp(t)?t.some(o=>n[o]):n[t]:!!n:!1},filter(t,r){let n=this;return t&oy&&(n.addF=PW(n.addF,r)),t&Yw&&(n.remF=PW(n.remF,r)),t&rv&&(n.modF=PW(n.modF,r)),t&wL&&(n.srcF=PW(n.srcF,r)),n},materialize(t){t=t||fN;let r=this;return t&oy&&r.addF&&(r.add=Gfe(r.add,r.addF),r.addF=null),t&Yw&&r.remF&&(r.rem=Gfe(r.rem,r.remF),r.remF=null),t&rv&&r.modF&&(r.mod=Gfe(r.mod,r.modF),r.modF=null),t&wL&&r.srcF&&(r.source=r.source.filter(r.srcF),r.srcF=null),r},visit(t,r){let n=this,o=r;if(t&wL)return Uw(n.source,n.srcF,o),n;t&oy&&Uw(n.add,n.addF,o),t&Yw&&Uw(n.rem,n.remF,o),t&rv&&Uw(n.mod,n.modF,o);let i=n.source;if(t&pYe&&i){let s=n.add.length+n.mod.length;s===i.length||(s?Uw(i,gYe(n,dYe),o):Uw(i,n.srcF,o))}return n}};efe(UW,nv,{fork(t){let r=new nv(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&r.ADD&&this.visit(r.ADD,n=>r.add.push(n)),t&r.REM&&this.visit(r.REM,n=>r.rem.push(n)),t&r.MOD&&this.visit(r.MOD,n=>r.mod.push(n))),r},changed(t){return this.changes&t},modified(t){let r=this,n=r.fields;return n&&r.changes&r.MOD?Dp(t)?t.some(o=>n[o]):n[t]:0},filter(){ua("MultiPulse does not support filtering.")},materialize(){ua("MultiPulse does not support materialization.")},visit(t,r){let n=this,o=n.pulses,i=o.length,s=0;if(t&n.SOURCE)for(;s<i;++s)o[s].visit(t,r);else for(;s<i;++s)o[s].stamp===n.stamp&&o[s].visit(t,r);return n}});qfe={skip:!1,force:!1};Xw.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:_L("error"),warn:_L("warn"),info:_L("info"),debug:_L("debug"),logLevel:_L("level"),cleanThreshold:1e4,add:UYt,connect:VYt,rank:rXt,rerank:nXt,pulse:hXt,touch:dXt,update:pXt,changeset:iv,ingest:HYt,parse:qYt,preload:XYt,request:YYt,events:WYt,on:QYt,evaluate:iXt,run:aXt,runAsync:sXt,runAfter:lXt,_enqueue:uXt,_getPulse:cXt};efe(et,Fo,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?this.skip(!1):r=this.evaluate(t),r=r||t,r.then?r=r.then(n=>this.pulse=n):r!==t.StopPropagation&&(this.pulse=r),r},evaluate(t){let r=this.marshall(t.stamp),n=this.transform(r,t);return r.clear(),n},transform(){}});ov={}});function Np(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var EL=N(()=>{"use strict"});function sy(t){let r=t,n=t;t.length===1&&(r=(a,l)=>t(a)-l,n=yXt(t));function o(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}return u}function i(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)>0?c=f:u=f+1}return u}function s(a,l,u,c){u==null&&(u=0),c==null&&(c=a.length);let f=o(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:o,center:s,right:i}}function yXt(t){return(r,n)=>Np(t(r),n)}var Yfe=N(()=>{"use strict";EL()});function GW(t){return t===null?NaN:+t}function*wYe(t,r){if(r===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(o=+o)>=o&&(yield o)}}var Xfe=N(()=>{"use strict"});var _Ye,RE,Kfe,bXt,lm,SYe=N(()=>{"use strict";EL();Yfe();Xfe();_Ye=sy(Np),RE=_Ye.right,Kfe=_Ye.left,bXt=sy(GW).center,lm=RE});function Zfe(t,r){let n=0,o,i=0,s=0;if(r===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(o=a-i,i+=o/++n,s+=o*(a-i));else{let a=-1;for(let l of t)(l=r(l,++a,t))!=null&&(l=+l)>=l&&(o=l-i,i+=o/++n,s+=o*(l-i))}if(n>1)return s/(n-1)}var CYe=N(()=>{"use strict"});function WW(t,r){let n=Zfe(t,r);return n&&Math.sqrt(n)}var EYe=N(()=>{"use strict";CYe()});var Yi,TYe=N(()=>{"use strict";Yi=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(r){let n=this._partials,o=0;for(let i=0;i<this._n&&i<32;i++){let s=n[i],a=r+s,l=Math.abs(r)<Math.abs(s)?r-(a-s):s-(a-r);l&&(n[o++]=l),r=a}return n[o]=r,this._n=o+1,this}valueOf(){let r=this._partials,n=this._n,o,i,s,a=0;if(n>0){for(a=r[--n];n>0&&(o=a,i=r[--n],a=o+i,s=i-(a-o),!s););n>0&&(s<0&&r[n-1]<0||s>0&&r[n-1]>0)&&(i=s*2,o=a+i,i==o-a&&(a=o))}return a}}});function Qfe(t,r){return Array.from(r,n=>t[n])}var AYe=N(()=>{"use strict"});function pN(t,r,n){var o,i=-1,s,a,l;if(r=+r,t=+t,n=+n,t===r&&n>0)return[t];if((o=r<t)&&(s=t,t=r,r=s),(l=qW(t,r,n))===0||!isFinite(l))return[];if(l>0){let u=Math.round(t/l),c=Math.round(r/l);for(u*l<t&&++u,c*l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)*l}else{l=-l;let u=Math.round(t*l),c=Math.round(r*l);for(u/l<t&&++u,c/l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)/l}return o&&a.reverse(),a}function qW(t,r,n){var o=(r-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),s=o/Math.pow(10,i);return i>=0?(s>=Jfe?10:s>=ede?5:s>=tde?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Jfe?10:s>=ede?5:s>=tde?2:1)}function yc(t,r,n){var o=Math.abs(r-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),s=o/i;return s>=Jfe?i*=10:s>=ede?i*=5:s>=tde&&(i*=2),r<t?-i:i}var Jfe,ede,tde,kYe=N(()=>{"use strict";Jfe=Math.sqrt(50),ede=Math.sqrt(10),tde=Math.sqrt(2)});function Mp(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var rde=N(()=>{"use strict"});function PE(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}var nde=N(()=>{"use strict"});function HW(t,r,n=0,o=t.length-1,i=Np){for(;o>n;){if(o-n>600){let u=o-n+1,c=r-n+1,f=Math.log(u),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1),h=Math.max(n,Math.floor(r-c*d/u+p)),m=Math.min(o,Math.floor(r+(u-c)*d/u+p));HW(t,r,h,m,i)}let s=t[r],a=n,l=o;for(TL(t,n,r),i(t[o],s)>0&&TL(t,n,o);a<l;){for(TL(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?TL(t,n,l):(++l,TL(t,l,o)),l<=r&&(n=l+1),r<=l&&(o=l-1)}return t}function TL(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}var IYe=N(()=>{"use strict";EL()});function LE(t,r,n){if(t=Float64Array.from(wYe(t,n)),!!(o=t.length)){if((r=+r)<=0||o<2)return PE(t);if(r>=1)return Mp(t);var o,i=(o-1)*r,s=Math.floor(i),a=Mp(HW(t,s).subarray(0,s+1)),l=PE(t.subarray(s+1));return a+(l-a)*(i-s)}}function AL(t,r,n=GW){if(o=t.length){if((r=+r)<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var ode=N(()=>{"use strict";rde();nde();IYe();Xfe()});function YW(t,r){let n=0,o=0;if(r===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,o+=i);else{let i=-1;for(let s of t)(s=r(s,++i,t))!=null&&(s=+s)>=s&&(++n,o+=s)}if(n)return o/n}var DYe=N(()=>{"use strict"});function kL(t,r){return LE(t,.5,r)}var NYe=N(()=>{"use strict";ode()});function*xXt(t){for(let r of t)yield*UAe(r)}function hN(t){return Array.from(xXt(t))}var MYe=N(()=>{"use strict"});function ca(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var FYe=N(()=>{"use strict"});function mN(t,r){let n=0;if(r===void 0)for(let o of t)(o=+o)&&(n+=o);else{let o=-1;for(let i of t)(i=+r(i,++o,t))&&(n+=i)}return n}var OYe=N(()=>{"use strict"});var qo=N(()=>{"use strict";SYe();EL();Yfe();EYe();TYe();rde();DYe();NYe();MYe();nde();AYe();ode();FYe();OYe();kYe()});function*LYe(t,r){if(r==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)o=r(o,++n,t),o!=null&&o!==""&&(o=+o)>=o&&(yield o)}}function XW(t,r,n){let o=Float64Array.from(LYe(t,n));return o.sort(Np),r.map(i=>AL(o,i))}function KW(t,r){return XW(t,[.25,.5,.75],r)}function ZW(t,r){let n=t.length,o=WW(t,r),i=KW(t,r),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(o,s)||o||Math.abs(i[0])||1)*Math.pow(n,-.2)}function ide(t){let r=t.maxbins||20,n=t.base||10,o=Math.log(n),i=t.divide||[5,2],s=t.extent[0],a=t.extent[1],l,u,c,f,d,p,h=t.span||a-s||Math.abs(s)||1;if(t.step)l=t.step;else if(t.steps){for(f=h/r,d=0,p=t.steps.length;d<p&&t.steps[d]<f;++d);l=t.steps[Math.max(0,d-1)]}else{for(u=Math.ceil(Math.log(r)/o),c=t.minstep||0,l=Math.max(c,Math.pow(n,Math.round(Math.log(h)/o)-u));Math.ceil(h/l)>r;)l*=n;for(d=0,p=i.length;d<p;++d)f=l/i[d],f>=c&&h/f<=r&&(l=f)}f=Math.log(l);let m=f>=0?0:~~(-f/o)+1,g=Math.pow(n,-m-1);return(t.nice||t.nice===void 0)&&(f=Math.floor(s/l+g)*l,s=s<f?f-l:f,a=Math.ceil(a/l)*l),{start:s,stop:a===s?s+l:a,step:l}}function vXt(t){Ed=t}function sde(t,r,n,o){if(!t.length)return[void 0,void 0];let i=Float64Array.from(LYe(t,o)),s=i.length,a=r,l,u,c,f;for(c=0,f=Array(a);c<a;++c){for(l=0,u=0;u<s;++u)l+=i[~~(Ed()*s)];f[c]=l/s}return f.sort(Np),[LE(f,n/2),LE(f,1-n/2)]}function ade(t,r,n,o){o=o||(p=>p);let i=t.length,s=new Float64Array(i),a=0,l=1,u=o(t[0]),c=u,f=u+r,d;for(;l<i;++l){if(d=o(t[l]),d>=f){for(c=(u+c)/2;a<l;++a)s[a]=c;f=d+r,u=d}c=d}for(c=(u+c)/2;a<l;++a)s[a]=c;return n?wXt(s,r+r/4):s}function wXt(t,r){let n=t.length,o=0,i=1,s,a;for(;t[o]===t[i];)++i;for(;i<n;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<r){for(a=i+(o+s-i-i>>1);a<i;)t[a++]=t[i];for(;a>i;)t[a--]=t[o]}o=i,i=s}return t}function _Xt(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function SXt(t,r){r==null&&(r=t,t=0);let n,o,i,s={min(a){return arguments.length?(n=a||0,i=o-n,s):n},max(a){return arguments.length?(o=a||0,i=o-n,s):o},sample(){return n+Math.floor(i*Ed())},pdf(a){return a===Math.floor(a)&&a>=n&&a<o?1/i:0},cdf(a){let l=Math.floor(a);return l<n?0:l>=o?1:(l-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(t).max(r)}function DL(t,r){t=t||0,r=r??1;let n=0,o=0,i,s;if(IL===IL)n=IL,IL=NaN;else{do n=Ed()*2-1,o=Ed()*2-1,i=n*n+o*o;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,IL=o*s}return t+n*r}function QW(t,r,n){n=n??1;let o=(t-(r||0))/n;return Math.exp(-.5*o*o)/(n*jYe)}function NL(t,r,n){r=r||0,n=n??1;let o=(t-r)/n,i=Math.abs(o),s;if(i>37)s=0;else{let a=Math.exp(-i*i/2),l;i<7.07106781186547?(l=.0352624965998911*i+.700383064443688,l=l*i+6.37396220353165,l=l*i+33.912866078383,l=l*i+112.079291497871,l=l*i+221.213596169931,l=l*i+220.206867912376,s=a*l,l=.0883883476483184*i+1.75566716318264,l=l*i+16.064177579207,l=l*i+86.7807322029461,l=l*i+296.564248779674,l=l*i+637.333633378831,l=l*i+793.826512519948,l=l*i+440.413735824752,s=s/l):(l=i+.65,l=i+4/l,l=i+3/l,l=i+2/l,l=i+1/l,s=a/l/2.506628274631)}return o>0?1-s:s}function ML(t,r,n){return t<0||t>1?NaN:(r||0)+(n??1)*CXt*EXt(2*t-1)}function EXt(t){let r=-Math.log((1-t)*(1+t)),n;return r<6.25?(r-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*r,n=128584807152564e-32+n*r,n=11157877678025181e-33+n*r,n=-1333171662854621e-31+n*r,n=20972767875968562e-33+n*r,n=6637638134358324e-30+n*r,n=-4054566272975207e-29+n*r,n=-8151934197605472e-29+n*r,n=26335093153082323e-28+n*r,n=-12975133253453532e-27+n*r,n=-5415412054294628e-26+n*r,n=10512122733215323e-25+n*r,n=-4112633980346984e-24+n*r,n=-29070369957882005e-24+n*r,n=42347877827932404e-23+n*r,n=-13654692000834679e-22+n*r,n=-13882523362786469e-21+n*r,n=.00018673420803405714+n*r,n=-.000740702534166267+n*r,n=-.006033670871430149+n*r,n=.24015818242558962+n*r,n=1.6536545626831027+n*r):r<16?(r=Math.sqrt(r)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*r,n=-27517406297064545e-23+n*r,n=18239629214389228e-24+n*r,n=15027403968909828e-22+n*r,n=-4013867526981546e-21+n*r,n=29234449089955446e-22+n*r,n=12475304481671779e-21+n*r,n=-47318229009055734e-21+n*r,n=6828485145957318e-20+n*r,n=24031110387097894e-21+n*r,n=-.0003550375203628475+n*r,n=.0009532893797373805+n*r,n=-.0016882755560235047+n*r,n=.002491442096107851+n*r,n=-.003751208507569241+n*r,n=.005370914553590064+n*r,n=1.0052589676941592+n*r,n=3.0838856104922208+n*r):Number.isFinite(r)?(r=Math.sqrt(r)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*r,n=15076572693500548e-25+n*r,n=-3789465440126737e-24+n*r,n=761570120807834e-23+n*r,n=-1496002662714924e-23+n*r,n=2914795345090108e-23+n*r,n=-6771199775845234e-23+n*r,n=22900482228026655e-23+n*r,n=-99298272942317e-20+n*r,n=4526062597223154e-21+n*r,n=-1968177810553167e-20+n*r,n=7599527703001776e-20+n*r,n=-.00021503011930044477+n*r,n=-.00013871931833623122+n*r,n=1.0103004648645344+n*r,n=4.849906401408584+n*r):n=1/0,n*t}function JW(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>DL(n,o),pdf:s=>QW(s,n,o),cdf:s=>NL(s,n,o),icdf:s=>ML(s,n,o)};return i.mean(t).stdev(r)}function eq(t,r){let n=JW(),o=0,i={data(s){return arguments.length?(t=s,o=s?s.length:0,i.bandwidth(r)):t},bandwidth(s){return arguments.length?(r=s,!r&&t&&(r=ZW(t)),i):r},sample(){return t[~~(Ed()*o)]+r*n.sample()},pdf(s){let a=0,l=0;for(;l<o;++l)a+=n.pdf((s-t[l])/r);return a/r/o},cdf(s){let a=0,l=0;for(;l<o;++l)a+=n.cdf((s-t[l])/r);return a/o},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function tq(t,r){return t=t||0,r=r??1,Math.exp(t+DL()*r)}function rq(t,r,n){if(t<=0)return 0;r=r||0,n=n??1;let o=(Math.log(t)-r)/n;return Math.exp(-.5*o*o)/(n*jYe*t)}function nq(t,r,n){return NL(Math.log(t),r,n)}function oq(t,r,n){return Math.exp(ML(t,r,n))}function lde(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>tq(n,o),pdf:s=>rq(s,n,o),cdf:s=>nq(s,n,o),icdf:s=>oq(s,n,o)};return i.mean(t).stdev(r)}function ude(t,r){let n=0,o;function i(a){let l=[],u=0,c;for(c=0;c<n;++c)u+=l[c]=a[c]==null?1:+a[c];for(c=0;c<n;++c)l[c]/=u;return l}let s={weights(a){return arguments.length?(o=i(r=a||[]),s):r},distributions(a){return arguments.length?(a?(n=a.length,t=a):(n=0,t=[]),s.weights(r)):t},sample(){let a=Ed(),l=t[n-1],u=o[0],c=0;for(;c<n-1;u+=o[++c])if(a<u){l=t[c];break}return l.sample()},pdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].pdf(a);return l},cdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].cdf(a);return l},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(r)}function iq(t,r){return r==null&&(r=t??1,t=0),t+(r-t)*Ed()}function sq(t,r,n){return n==null&&(n=r??1,r=0),t>=r&&t<=n?1/(n-r):0}function aq(t,r,n){return n==null&&(n=r??1,r=0),t<r?0:t>n?1:(t-r)/(n-r)}function lq(t,r,n){return n==null&&(n=r??1,r=0),t>=0&&t<=1?r+t*(n-r):NaN}function cde(t,r){let n,o,i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(o=s??1,i):o},sample:()=>iq(n,o),pdf:s=>sq(s,n,o),cdf:s=>aq(s,n,o),icdf:s=>lq(s,n,o)};return r==null&&(r=t??1,t=0),i.min(t).max(r)}function FL(t,r,n,o){let i=o-t*t,s=Math.abs(i)<1e-24?0:(n-t*r)/i;return[r-s*t,s]}function uq(t,r,n,o){t=t.filter(h=>{let m=r(h),g=n(h);return m!=null&&(m=+m)>=m&&g!=null&&(g=+g)>=g}),o&&t.sort((h,m)=>r(h)-r(m));let i=t.length,s=new Float64Array(i),a=new Float64Array(i),l=0,u=0,c=0,f,d,p;for(p of t)s[l]=f=+r(p),a[l]=d=+n(p),++l,u+=(f-u)/l,c+=(d-c)/l;for(l=0;l<i;++l)s[l]-=u,a[l]-=c;return[s,a,u,c]}function OL(t,r,n,o){let i=-1,s,a;for(let l of t)s=r(l),a=n(l),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&o(s,a,++i)}function gN(t,r,n,o,i){let s=0,a=0;return OL(t,r,n,(l,u)=>{let c=u-i(l),f=u-o;s+=c*c,a+=f*f}),1-s/a}function cq(t,r,n){let o=0,i=0,s=0,a=0,l=0;OL(t,r,n,(f,d)=>{++l,o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=FL(o,i,s,a),c=f=>u[0]+u[1]*f;return{coef:u,predict:c,rSquared:gN(t,r,n,i,c)}}function fde(t,r,n){let o=0,i=0,s=0,a=0,l=0;OL(t,r,n,(f,d)=>{++l,f=Math.log(f),o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=FL(o,i,s,a),c=f=>u[0]+u[1]*Math.log(f);return{coef:u,predict:c,rSquared:gN(t,r,n,i,c)}}function dde(t,r,n){let[o,i,s,a]=uq(t,r,n),l=0,u=0,c=0,f=0,d=0,p,h,m;OL(t,r,n,(x,v)=>{p=o[d++],h=Math.log(v),m=p*v,l+=(v*h-l)/d,u+=(m-u)/d,c+=(m*h-c)/d,f+=(p*m-f)/d});let[g,y]=FL(u/a,l/a,c/a,f/a),b=x=>Math.exp(g+y*(x-s));return{coef:[Math.exp(g-y*s),y],predict:b,rSquared:gN(t,r,n,a,b)}}function pde(t,r,n){let o=0,i=0,s=0,a=0,l=0,u=0;OL(t,r,n,(d,p)=>{let h=Math.log(d),m=Math.log(p);++u,o+=(h-o)/u,i+=(m-i)/u,s+=(h*m-s)/u,a+=(h*h-a)/u,l+=(p-l)/u});let c=FL(o,i,s,a),f=d=>c[0]*Math.pow(d,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:f,rSquared:gN(t,r,n,l,f)}}function fq(t,r,n){let[o,i,s,a]=uq(t,r,n),l=o.length,u=0,c=0,f=0,d=0,p=0,h,m,g,y;for(h=0;h<l;)m=o[h],g=i[h++],y=m*m,u+=(y-u)/h,c+=(y*m-c)/h,f+=(y*y-f)/h,d+=(m*g-d)/h,p+=(y*g-p)/h;let b=f-u*u,x=u*b-c*c,v=(p*u-d*c)/x,w=(d*b-p*c)/x,_=-v*u,S=C=>(C=C-s,v*C*C+w*C+_+a);return{coef:[_-w*s+v*s*s+a,w-2*v*s,v],predict:S,rSquared:gN(t,r,n,a,S)}}function hde(t,r,n,o){if(o===1)return cq(t,r,n);if(o===2)return fq(t,r,n);let[i,s,a,l]=uq(t,r,n),u=i.length,c=[],f=[],d=o+1,p,h,m,g,y;for(p=0;p<d;++p){for(m=0,g=0;m<u;++m)g+=Math.pow(i[m],p)*s[m];for(c.push(g),y=new Float64Array(d),h=0;h<d;++h){for(m=0,g=0;m<u;++m)g+=Math.pow(i[m],p+h);y[h]=g}f.push(y)}f.push(c);let b=AXt(f),x=v=>{v-=a;let w=l+b[0]+b[1]*v+b[2]*v*v;for(p=3;p<d;++p)w+=b[p]*Math.pow(v,p);return w};return{coef:TXt(d,b,-a,l),predict:x,rSquared:gN(t,r,n,l,x)}}function TXt(t,r,n,o){let i=Array(t),s,a,l,u;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(l=r[s],u=1,i[s]+=l,a=1;a<=s;++a)u*=(s+1-a)/a,i[s-a]+=l*Math.pow(n,a)*u;return i[0]+=o,i}function AXt(t){let r=t.length-1,n=[],o,i,s,a,l;for(o=0;o<r;++o){for(a=o,i=o+1;i<r;++i)Math.abs(t[o][i])>Math.abs(t[o][a])&&(a=i);for(s=o;s<r+1;++s)l=t[s][o],t[s][o]=t[s][a],t[s][a]=l;for(i=o+1;i<r;++i)for(s=r;s>=o;s--)t[s][i]-=t[s][o]*t[o][i]/t[o][o]}for(i=r-1;i>=0;--i){for(l=0,s=i+1;s<r;++s)l+=t[s][i]*n[s];n[i]=(t[r][i]-l)/t[i][i]}return n}function mde(t,r,n,o){let[i,s,a,l]=uq(t,r,n,!0),u=i.length,c=Math.max(2,~~(o*u)),f=new Float64Array(u),d=new Float64Array(u),p=new Float64Array(u).fill(1);for(let h=-1;++h<=RYe;){let m=[0,c-1];for(let y=0;y<u;++y){let b=i[y],x=m[0],v=m[1],w=b-i[x]>i[v]-b?x:v,_=0,S=0,C=0,E=0,T=0,I=1/Math.abs(i[w]-b||1);for(let D=x;D<=v;++D){let L=i[D],P=s[D],R=kXt(Math.abs(b-L)*I)*p[D],V=L*R;_+=R,S+=V,C+=P*R,E+=P*V,T+=L*V}let[k,F]=FL(S/_,C/_,E/_,T/_);f[y]=k+F*b,d[y]=Math.abs(s[y]-f[y]),IXt(i,y+1,m)}if(h===RYe)break;let g=kL(d);if(Math.abs(g)<PYe)break;for(let y=0,b,x;y<u;++y)b=d[y]/(6*g),p[y]=b>=1?PYe:(x=1-b*b)*x}return DXt(i,f,a,l)}function kXt(t){return(t=1-t*t*t)*t*t}function IXt(t,r,n){let o=t[r],i=n[0],s=n[1]+1;if(!(s>=t.length))for(;r>i&&t[s]-o<=o-t[i];)n[0]=++i,n[1]=s,++s}function DXt(t,r,n,o){let i=t.length,s=[],a=0,l=0,u=[],c;for(;a<i;++a)c=t[a]+n,u[0]===c?u[1]+=(r[a]-u[1])/++l:(l=0,u[1]+=o,u=[c,r[a]],s.push(u));return u[1]+=o,s}function yN(t,r,n,o){n=n||25,o=Math.max(n,o||200);let i=g=>[g,t(g)],s=r[0],a=r[1],l=a-s,u=l/o,c=[i(s)],f=[];if(n===o){for(let g=1;g<o;++g)c.push(i(s+g/n*l));return c.push(i(a)),c}else{f.push(i(a));for(let g=n;--g>0;)f.push(i(s+g/n*l))}let d=c[0],p=f[f.length-1],h=1/l,m=MXt(d[1],f);for(;p;){let g=i((d[0]+p[0])/2);g[0]-d[0]>=u&&FXt(d,g,p,h,m)>NXt?f.push(g):(d=p,c.push(p),f.pop()),p=f[f.length-1]}return c}function MXt(t,r){let n=t,o=t,i=r.length;for(let s=0;s<i;++s){let a=r[s][1];a<n&&(n=a),a>o&&(o=a)}return 1/(o-n)}function FXt(t,r,n,o,i){let s=Math.atan2(i*(n[1]-t[1]),o*(n[0]-t[0])),a=Math.atan2(i*(r[1]-t[1]),o*(r[0]-t[0]));return Math.abs(s-a)}var Ed,jYe,CXt,IL,RYe,PYe,NXt,bN=N(()=>{"use strict";qo();Ed=Math.random;jYe=Math.sqrt(2*Math.PI),CXt=Math.SQRT2,IL=NaN;RYe=2,PYe=1e-12;NXt=.5*Math.PI/180});function eo(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),r(s,1),t(s),s},i.round=function(s){var a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=function(s,a){return r(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,l){var u=[],c;if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=function(s){return eo(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,l){if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););})},n&&(i.count=function(s,a){return gde.setTime(+s),yde.setTime(+a),t(gde),t(yde),Math.floor(n(gde,yde))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?function(a){return o(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var gde,yde,bc=N(()=>{"use strict";gde=new Date,yde=new Date});var dq,Kw,BYe,bde=N(()=>{"use strict";bc();dq=eo(function(){},function(t,r){t.setTime(+t+r)},function(t,r){return r-t});dq.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?eo(function(r){r.setTime(Math.floor(r/t)*t)},function(r,n){r.setTime(+r+n*t)},function(r,n){return(n-r)/t}):dq};Kw=dq,BYe=dq.range});var $Ye,xc,zYe,xde=N(()=>{"use strict";bc();$Ye=eo(function(t){t.setTime(t-t.getMilliseconds())},function(t,r){t.setTime(+t+r*1e3)},function(t,r){return(r-t)/1e3},function(t){return t.getUTCSeconds()}),xc=$Ye,zYe=$Ye.range});var UYe,BE,OXt,vde=N(()=>{"use strict";bc();UYe=eo(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getMinutes()}),BE=UYe,OXt=UYe.range});var VYe,zE,RXt,wde=N(()=>{"use strict";bc();VYe=eo(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getHours()}),zE=VYe,RXt=VYe.range});var GYe,Td,PXt,Sde=N(()=>{"use strict";bc();GYe=eo(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Td=GYe,PXt=GYe.range});function UE(t){return eo(function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n*7)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5})}var Fp,xN,qYe,HYe,Zw,YYe,XYe,KYe,LXt,jXt,BXt,$Xt,zXt,UXt,Cde=N(()=>{"use strict";bc();Fp=UE(0),xN=UE(1),qYe=UE(2),HYe=UE(3),Zw=UE(4),YYe=UE(5),XYe=UE(6),KYe=Fp.range,LXt=xN.range,jXt=qYe.range,BXt=HYe.range,$Xt=Zw.range,zXt=YYe.range,UXt=XYe.range});var ZYe,Qw,VXt,Ede=N(()=>{"use strict";bc();ZYe=eo(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,r){t.setMonth(t.getMonth()+r)},function(t,r){return r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Qw=ZYe,VXt=ZYe.range});var Tde,Ad,GXt,Ade=N(()=>{"use strict";bc();Tde=eo(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r)},function(t,r){return r.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Tde.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:eo(function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n*t)})};Ad=Tde,GXt=Tde.range});var QYe,VE,WXt,kde=N(()=>{"use strict";bc();QYe=eo(function(t){t.setUTCSeconds(0,0)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getUTCMinutes()}),VE=QYe,WXt=QYe.range});var JYe,GE,qXt,Ide=N(()=>{"use strict";bc();JYe=eo(function(t){t.setUTCMinutes(0,0,0)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getUTCHours()}),GE=JYe,qXt=JYe.range});var eXe,kd,HXt,Dde=N(()=>{"use strict";bc();eXe=eo(function(t){t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r)},function(t,r){return(r-t)/864e5},function(t){return t.getUTCDate()-1}),kd=eXe,HXt=eXe.range});function WE(t){return eo(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n*7)},function(r,n){return(n-r)/6048e5})}var Op,vN,tXe,rXe,Jw,nXe,oXe,iXe,YXt,XXt,KXt,ZXt,QXt,JXt,Nde=N(()=>{"use strict";bc();Op=WE(0),vN=WE(1),tXe=WE(2),rXe=WE(3),Jw=WE(4),nXe=WE(5),oXe=WE(6),iXe=Op.range,YXt=vN.range,XXt=tXe.range,KXt=rXe.range,ZXt=Jw.range,QXt=nXe.range,JXt=oXe.range});var sXe,e_,eKt,Mde=N(()=>{"use strict";bc();sXe=eo(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCMonth(t.getUTCMonth()+r)},function(t,r){return r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),e_=sXe,eKt=sXe.range});var Fde,Id,tKt,Ode=N(()=>{"use strict";bc();Fde=eo(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)},function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Fde.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:eo(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n*t)})};Id=Fde,tKt=Fde.range});function lXe(t,r,n,o,i,s){let a=[[xc,1,1e3],[xc,5,5*1e3],[xc,15,15*1e3],[xc,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=sy(([,,y])=>y).right(a,p);if(h===a.length)return t.every(yc(c/31536e6,f/31536e6,d));if(h===0)return Kw.every(Math.max(yc(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var Rde,Pde,Lde,jde,uXe=N(()=>{"use strict";qo();bde();xde();vde();wde();Sde();Cde();Ede();Ade();kde();Ide();Dde();Nde();Mde();Ode();[Rde,Pde]=lXe(Id,e_,Op,kd,GE,VE),[Lde,jde]=lXe(Ad,Qw,Fp,Td,zE,BE)});var RL=N(()=>{"use strict";bde();xde();vde();wde();Sde();Cde();Ede();Ade();kde();Ide();Dde();Nde();Mde();Ode();uXe()});function hq(t){let r=Br(t).slice(),n={};return r.length||pt("Missing time unit."),r.forEach(i=>{Pr(Bde,i)?n[i]=1:pt("Invalid time unit: ".concat(i,"."))}),(n[fa]||n[Pl]?1:0)+(n[vc]||n[Ll]||n[wc]?1:0)+(n[ly]?1:0)>1&&pt("Incompatible time units: ".concat(t)),r.sort((i,s)=>Bde[i]-Bde[s]),r}function Wde(t,r){let n=an({},nKt,r),o=hq(t),i=o.length,s="",a=0,l,u;for(a=0;a<i;)for(l=o.length;l>a;--l)if(u=o.slice(a,l).join("-"),n[u]!=null){s+=n[u],a=l;break}return s.trim()}function qde(t){return qE.setFullYear(t),qE.setMonth(0),qE.setDate(1),qE.setHours(0,0,0,0),qE}function Hde(t){return dXe(new Date(t))}function Yde(t){return $de(new Date(t))}function dXe(t){return Td.count(qde(t.getFullYear())-1,t)}function $de(t){return Fp.count(qde(t.getFullYear())-1,t)}function zde(t){return qde(t).getDay()}function oKt(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(-1,r,n,o,i,s,a);return l.setFullYear(t),l}return new Date(t,r,n,o,i,s,a)}function Xde(t){return pXe(new Date(t))}function Kde(t){return Ude(new Date(t))}function pXe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return kd.count(r-1,t)}function Ude(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Op.count(r-1,t)}function Vde(t){return qE.setTime(Date.UTC(t,0,1)),qE.getUTCDay()}function iKt(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(Date.UTC(-1,r,n,o,i,s,a));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(t,r,n,o,i,s,a))}function hXe(t,r,n,o,i){let s=r||1,a=Un(t),l=(b,x,v)=>(v=v||b,sKt(n[v],o[v],b===a&&s,x)),u=new Date,c=vu(t),f=c[rl]?l(rl):Ja(2012),d=c[Ll]?l(Ll):c[vc]?l(vc):Jh,p=c[fa]&&c[Pl]?l(Pl,1,fa+Pl):c[fa]?l(fa,1):c[Pl]?l(Pl,1):c[wc]?l(wc,1):c[ly]?l(ly,1):H0,h=c[lf]?l(lf):Jh,m=c[uf]?l(uf):Jh,g=c[Dd]?l(Dd):Jh,y=c[Rp]?l(Rp):Jh;return function(b){u.setTime(+b);let x=f(u);return i(x,d(u),p(u,x),h(u),m(u),g(u),y(u))}}function sKt(t,r,n,o){let i=n<=1?t:o?(s,a)=>o+n*Math.floor((t(s,a)-o)/n):(s,a)=>n*Math.floor(t(s,a)/n);return r?(s,a)=>r(i(s,a),a):i}function wN(t,r,n){return r+t*7-(n+6)%7}function Zde(t,r){return hXe(t,r||1,aKt,lKt,oKt)}function Qde(t,r){return hXe(t,r||1,uKt,cKt,iKt)}function sv(t){return fKt[t]}function av(t){return dKt[t]}function mXe(t,r,n){return t?t.offset(r,n):void 0}function Jde(t,r,n){return mXe(sv(t),r,n)}function epe(t,r,n){return mXe(av(t),r,n)}function gXe(t,r,n,o){return t?t.range(r,n,o):void 0}function tpe(t,r,n,o){return gXe(sv(t),r,n,o)}function rpe(t,r,n,o){return gXe(av(t),r,n,o)}function npe(t){let r=t.extent,n=t.maxbins||40,o=Math.abs(EE(r))/n,i=sy(l=>l[2]).right(PL,o),s,a;return i===PL.length?(s=bXe,a=yc(r[0]/Gde,r[1]/Gde,n)):i?(i=PL[o/PL[i-1][2]<PL[i][2]/o?i-1:i],s=i[0],a=i[1]):(s=yXe,a=Math.max(yc(r[0],r[1],n),1)),{units:s,step:a}}var rl,vc,Ll,fa,wc,Pl,ly,lf,uf,Dd,Rp,pq,Bde,nKt,qE,aKt,lKt,uKt,cKt,fKt,dKt,LL,jL,BL,mq,pKt,cXe,Gde,yXe,$L,zL,UL,hKt,mKt,fXe,bXe,PL,_N=N(()=>{"use strict";Ls();RL();qo();rl="year",vc="quarter",Ll="month",fa="week",wc="date",Pl="day",ly="dayofyear",lf="hours",uf="minutes",Dd="seconds",Rp="milliseconds",pq=[rl,vc,Ll,fa,wc,Pl,ly,lf,uf,Dd,Rp],Bde=pq.reduce((t,r,n)=>(t[r]=1+n,t),{});nKt={[rl]:"%Y ",[vc]:"Q%q ",[Ll]:"%b ",[wc]:"%d ",[fa]:"W%U ",[Pl]:"%a ",[ly]:"%j ",[lf]:"%H:00",[uf]:"00:%M",[Dd]:":%S",[Rp]:".%L",["".concat(rl,"-").concat(Ll)]:"%Y-%m ",["".concat(rl,"-").concat(Ll,"-").concat(wc)]:"%Y-%m-%d ",["".concat(lf,"-").concat(uf)]:"%H:%M"};qE=new Date;aKt={[rl]:t=>t.getFullYear(),[vc]:t=>Math.floor(t.getMonth()/3),[Ll]:t=>t.getMonth(),[wc]:t=>t.getDate(),[lf]:t=>t.getHours(),[uf]:t=>t.getMinutes(),[Dd]:t=>t.getSeconds(),[Rp]:t=>t.getMilliseconds(),[ly]:t=>dXe(t),[fa]:t=>$de(t),[fa+Pl]:(t,r)=>wN($de(t),t.getDay(),zde(r)),[Pl]:(t,r)=>wN(1,t.getDay(),zde(r))},lKt={[vc]:t=>3*t,[fa]:(t,r)=>wN(t,0,zde(r))};uKt={[rl]:t=>t.getUTCFullYear(),[vc]:t=>Math.floor(t.getUTCMonth()/3),[Ll]:t=>t.getUTCMonth(),[wc]:t=>t.getUTCDate(),[lf]:t=>t.getUTCHours(),[uf]:t=>t.getUTCMinutes(),[Dd]:t=>t.getUTCSeconds(),[Rp]:t=>t.getUTCMilliseconds(),[ly]:t=>pXe(t),[fa]:t=>Ude(t),[Pl]:(t,r)=>wN(1,t.getUTCDay(),Vde(r)),[fa+Pl]:(t,r)=>wN(Ude(t),t.getUTCDay(),Vde(r))},cKt={[vc]:t=>3*t,[fa]:(t,r)=>wN(t,0,Vde(r))};fKt={[rl]:Ad,[vc]:Qw.every(3),[Ll]:Qw,[fa]:Fp,[wc]:Td,[Pl]:Td,[ly]:Td,[lf]:zE,[uf]:BE,[Dd]:xc,[Rp]:Kw},dKt={[rl]:Id,[vc]:e_.every(3),[Ll]:e_,[fa]:Op,[wc]:kd,[Pl]:kd,[ly]:kd,[lf]:GE,[uf]:VE,[Dd]:xc,[Rp]:Kw};LL=1e3,jL=LL*60,BL=jL*60,mq=BL*24,pKt=mq*7,cXe=mq*30,Gde=mq*365,yXe=[rl,Ll,wc,lf,uf,Dd,Rp],$L=yXe.slice(0,-1),zL=$L.slice(0,-1),UL=zL.slice(0,-1),hKt=UL.slice(0,-1),mKt=[rl,fa],fXe=[rl,Ll],bXe=[rl],PL=[[$L,1,LL],[$L,5,5*LL],[$L,15,15*LL],[$L,30,30*LL],[zL,1,jL],[zL,5,5*jL],[zL,15,15*jL],[zL,30,30*jL],[UL,1,BL],[UL,3,3*BL],[UL,6,6*BL],[UL,12,12*BL],[hKt,1,mq],[mKt,1,pKt],[fXe,1,cXe],[fXe,3,3*cXe],[bXe,1,Gde]]});var Mpe={};fn(Mpe,{aggregate:()=>t_,bin:()=>lpe,collect:()=>upe,compare:()=>TXe,countpattern:()=>cpe,cross:()=>fpe,density:()=>dpe,dotbin:()=>hpe,expression:()=>NXe,extent:()=>mpe,facet:()=>yq,field:()=>MXe,filter:()=>ype,flatten:()=>bpe,fold:()=>xpe,formula:()=>vpe,generate:()=>FXe,impute:()=>wpe,joinaggregate:()=>_pe,kde:()=>Spe,key:()=>OXe,load:()=>RXe,lookup:()=>Cpe,multiextent:()=>PXe,multivalues:()=>LXe,params:()=>jXe,pivot:()=>Epe,prefacet:()=>BXe,project:()=>Tpe,proxy:()=>$Xe,quantile:()=>Ape,relay:()=>zXe,sample:()=>kpe,sequence:()=>Ipe,sieve:()=>UXe,subflow:()=>gpe,timeunit:()=>Dpe,tupleindex:()=>GXe,values:()=>WXe,window:()=>Npe});function gKt(t){return r=>{let n=t.length,o=1,i=String(t[0](r));for(;o<n;++o)i+="|"+t[o](r);return i}}function spe(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:gKt(t)}function wXe(t,r,n){return n||t+(r?"_"+r:"")}function bKt(t,r){return n=>an({name:t,out:n||t},yKt,r)}function _Xe(t,r){return VL[t](r)}function SXe(t,r){return t.idx-r.idx}function xKt(t){let r={};t.forEach(o=>r[o.name]=o);let n=o=>{o.req&&o.req.forEach(i=>{r[i]||n(r[i]=VL[i]())})};return t.forEach(n),Object.values(r).sort(SXe)}function vKt(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function wKt(t,r){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,r)))}function _Kt(t,r){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,r)))}function SKt(t){return this._out.forEach(r=>t[r.out]=r.value(this)),t}function CXe(t,r){let n=r||mc,o=xKt(t),i=t.slice().sort(SXe);function s(a){this._ops=o,this._out=i,this.cell=a,this.init()}return s.prototype.init=vKt,s.prototype.add=wKt,s.prototype.rem=_Kt,s.prototype.set=SKt,s.prototype.get=n,s.fields=t.map(a=>a.out),s}function ape(t){this._key=t?Qh(t):_r,this.reset()}function t_(t){et.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function lpe(t){et.call(this,null,t)}function EXe(t,r,n){let o=t,i=r||[],s=n||[],a={},l=0;return{add:u=>s.push(u),remove:u=>a[o(u)]=++l,size:()=>i.length,data:(u,c)=>(l&&(i=i.filter(f=>!a[o(f)]),a={},l=0),c&&u&&i.sort(u),s.length&&(i=u?Hce(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function upe(t){et.call(this,[],t)}function TXe(t){Fo.call(this,null,EKt,t)}function EKt(t){return this.value&&!t.modified()?this.value:$ce(t.fields,t.orders)}function cpe(t){et.call(this,null,t)}function TKt(t,r,n){switch(r){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}function fpe(t){et.call(this,null,t)}function AKt(t,r,n,o){for(var i=[],s={},a=t.length,l=0,u,c;l<a;++l)for(s[r]=c=t[l],u=0;u<a;++u)s[n]=t[u],o(s)&&(i.push(Nn(s)),s={},s[r]=c);return i}function AXe(t,r){let n=t[vXe];Pr(xXe,n)||pt("Unknown distribution function: "+n);let o=xXe[n]();for(let i in t)i===IKt?o.data((t.from||r()).map(t[i])):i===kKt?o[i](t[i].map(s=>AXe(s,r))):typeof o[i]===vXe&&o[i](t[i]);return o}function dpe(t){et.call(this,null,t)}function NKt(t){return()=>t.materialize(t.SOURCE).source}function IXe(t,r){return t?t.map((n,o)=>r[o]||Li(n)):null}function ppe(t,r,n){let o=[],i=d=>d(u),s,a,l,u,c,f;if(r==null)o.push(t.map(n));else for(s={},a=0,l=t.length;a<l;++a)u=t[a],c=r.map(i),f=s[c],f||(s[c]=f=[],f.dims=c,o.push(f)),f.push(n(u));return o}function hpe(t){et.call(this,null,t)}function NXe(t){Fo.call(this,null,FKt,t),this.modified(!0)}function FKt(t){let r=t.expr;return this.value&&!t.modified("expr")?this.value:_d(n=>r(n,t),Na(r),Li(r))}function mpe(t){et.call(this,[void 0,void 0],t)}function gpe(t,r){Fo.call(this,t),this.parent=r,this.count=0}function yq(t){et.call(this,{},t),this._keys=zw();let r=this._targets=[];r.active=0,r.forEach=n=>{for(let o=0,i=r.active;o<i;++o)n(r[o],o,r)}}function MXe(t){Fo.call(this,null,OKt,t)}function OKt(t){return this.value&&!t.modified()?this.value:Hr(t.name)?Br(t.name).map(r=>Qh(r)):Qh(t.name,t.as)}function ype(t){et.call(this,zw(),t)}function bpe(t){et.call(this,[],t)}function xpe(t){et.call(this,[],t)}function vpe(t){et.call(this,null,t)}function FXe(t){et.call(this,[],t)}function wpe(t){et.call(this,[],t)}function PKt(t){var r=t.method||gq.value,n;if(gq[r]==null)pt("Unrecognized imputation method: "+r);else return r===gq.value?(n=t.value!==void 0?t.value:0,()=>n):gq[r]}function LKt(t){let r=t.field;return n=>n?r(n):NaN}function jKt(t,r,n,o){var i=b=>b(y),s=[],a=o?o.slice():[],l={},u={},c,f,d,p,h,m,g,y;for(a.forEach((b,x)=>l[b]=x+1),p=0,g=t.length;p<g;++p)y=t[p],m=n(y),h=l[m]||(l[m]=a.push(m)),f=(c=r?r.map(i):RKt)+"",(d=u[f])||(d=u[f]=[],s.push(d),d.values=c),d[h-1]=y;return s.domain=a,s}function _pe(t){t_.call(this,t)}function Spe(t){et.call(this,null,t)}function OXe(t){Fo.call(this,null,BKt,t)}function BKt(t){return this.value&&!t.modified()?this.value:Wce(t.fields,t.flat)}function RXe(t){et.call(this,[],t),this._pending=null}function $Kt(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function ipe(t,r,n){n.forEach(Nn);let o=r.fork(r.NO_FIELDS&r.NO_SOURCE);return o.rem=t.value,t.value=o.source=o.add=n,t._pending=null,o.rem.length&&o.clean(!0),o}function Cpe(t){et.call(this,{},t)}function PXe(t){Fo.call(this,null,zKt,t)}function zKt(t){if(this.value&&!t.modified())return this.value;let r=t.extents,n=r.length,o=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=r[s],a[0]<o&&(o=a[0]),a[1]>i&&(i=a[1]);return[o,i]}function LXe(t){Fo.call(this,null,UKt,t)}function UKt(t){return this.value&&!t.modified()?this.value:t.values.reduce((r,n)=>r.concat(n),[])}function jXe(t){et.call(this,null,t)}function Epe(t){t_.call(this,t)}function VKt(t,r){let n=t.field,o=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=Na(n).concat(Na(o)),a=WKt(n,t.limit||0,r);return r.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:a.map(()=>i),fields:a.map(l=>GKt(l,n,o,s)),as:a.map(l=>l+""),modified:t.modified.bind(t)}}function GKt(t,r,n,o){return _d(i=>r(i)===t?n(i):NaN,o,t+"")}function WKt(t,r,n){let o={},i=[];return n.visit(n.SOURCE,s=>{let a=t(s);o[a]||(o[a]=1,i.push(a))}),i.sort(QP),r?i.slice(0,r):i}function BXe(t){yq.call(this,t)}function Tpe(t){et.call(this,null,t)}function qKt(t,r,n,o){for(let i=0,s=n.length;i<s;++i)r[o[i]]=n[i](t);return r}function $Xe(t){et.call(this,null,t)}function Ape(t){et.call(this,null,t)}function zXe(t){et.call(this,null,t)}function kpe(t){et.call(this,[],t),this.count=0}function Ipe(t){et.call(this,null,t)}function UXe(t){et.call(this,null,t),this.modified(!0)}function Dpe(t){et.call(this,null,t)}function GXe(t){et.call(this,zw(),t)}function WXe(t){et.call(this,null,t)}function YKt(t,r,n,o){let i=GL[t](r,n);return{init:i.init||Jh,update:function(s,a){a[o]=i.next(s)}}}function XKt(t,r,n){for(let o=r.length;n<o;++n)if(t(r[n])!=null)return n;return-1}function qXe(t){let r=Br(t.ops),n=Br(t.fields),o=Br(t.params),i=Br(t.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[],d=!0;function p(h){Br(Na(h)).forEach(m=>l[m]=1)}p(t.sort),r.forEach((h,m)=>{let g=n[m],y=Li(g),b=wXe(h,y,i[m]);if(p(g),s.push(b),Pr(GL,h))a.push(YKt(h,n[m],o[m],b));else{if(g==null&&h!=="count"&&pt("Null aggregate field specified."),h==="count"){c.push(b);return}d=!1;let x=u[y];x||(x=u[y]=[],x.field=g,f.push(x)),x.push(_Xe(h,b))}}),(c.length||f.length)&&(this.cell=ZKt(f,c,d)),this.inputs=Object.keys(l)}function ZKt(t,r,n){t=t.map(u=>CXe(u,u.field));let o={num:0,agg:null,store:!1,count:r};if(!n)for(var i=t.length,s=o.agg=Array(i),a=0;a<i;++a)s[a]=new t[a](o);if(o.store)var l=o.data=new ape;return o.add=function(u){if(o.num+=1,!n){l&&l.add(u);for(let c=0;c<i;++c)s[c].add(s[c].get(u),u)}},o.rem=function(u){if(o.num-=1,!n){l&&l.rem(u);for(let c=0;c<i;++c)s[c].rem(s[c].get(u),u)}},o.set=function(u){let c,f;for(l&&l.values(),c=0,f=r.length;c<f;++c)u[r[c]]=o.num;if(!n)for(c=0,f=s.length;c<f;++c)s[c].set(u)},o.init=function(){o.num=0,l&&l.reset();for(let u=0;u<i;++u)s[u].init()},o}function Npe(t){et.call(this,{},t),this._mlen=0,this._mods=[]}function QKt(t,r,n,o){let i=o.sort,s=i&&!o.ignorePeers,a=o.frame||[null,0],l=t.data(n),u=l.length,c=s?sy(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:i||Ja(-1)};r.init();for(let d=0;d<u;++d)JKt(f,a,d,u),s&&eZt(f,c),r.update(f,l[d])}function JKt(t,r,n,o){t.p0=t.i0,t.p1=t.i1,t.i0=r[0]==null?0:Math.max(0,n-Math.abs(r[0])),t.i1=r[1]==null?o:Math.min(o,n+Math.abs(r[1])+1),t.index=n}function eZt(t,r){let n=t.i0,o=t.i1-1,i=t.compare,s=t.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(t.i0=r.left(s,s[n])),o<a&&!i(s[o],s[o+1])&&(t.i1=r.right(s,s[o]))}var ope,yKt,VL,WL,jl,CKt,xXe,kKt,vXe,IKt,kXe,DKt,DXe,MKt,gq,RKt,HKt,VXe,GL,KKt,HXe,YXe=N(()=>{"use strict";Ls();tl();bN();qo();_N();ope=()=>{},yKt={init:ope,add:ope,rem:ope,idx:0},VL={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,r)=>t.sum+=+r,rem:(t,r)=>t.sum-=r},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,r)=>t.product*=r,rem:(t,r)=>t.product/=r},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,r)=>(t.mean_d=r-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,r)=>(t.mean_d=r-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,r)=>t.dev+=t.mean_d*(r-t.mean),rem:(t,r)=>t.dev-=t.mean_d*(r-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,r)=>{(r<t.min||t.min===void 0)&&(t.min=r)},rem:(t,r)=>{r<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,r)=>{(r>t.max||t.max===void 0)&&(t.max=r)},rem:(t,r)=>{r>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,r,n)=>{r<t.min&&(t.argmin=n)},rem:(t,r)=>{r<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,r,n)=>{r>t.max&&(t.argmax=n)},rem:(t,r)=>{r>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},WL=Object.keys(VL);WL.forEach(t=>{VL[t]=bKt(t,VL[t])});jl=ape.prototype;jl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};jl.add=function(t){this._add.push(t)};jl.rem=function(t){this._rem.push(t)};jl.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,r=this._rem,n=this._key,o=t.length,i=r.length,s=Array(o-i),a={},l,u,c;for(l=0;l<i;++l)a[n(r[l])]=1;for(l=0,u=0;l<o;++l)a[n(c=t[l])]?a[n(c)]=0:s[u++]=c;return this._rem=[],this._add=s};jl.distinct=function(t){let r=this.values(),n={},o=r.length,i=0,s;for(;--o>=0;)s=t(r[o])+"",Pr(n,s)||(n[s]=1,++i);return i};jl.extent=function(t){if(this._get!==t||!this._ext){let r=this.values(),n=Uce(r,t);this._ext=[r[n[0]],r[n[1]]],this._get=t}return this._ext};jl.argmin=function(t){return this.extent(t)[0]||{}};jl.argmax=function(t){return this.extent(t)[1]||{}};jl.min=function(t){let r=this.extent(t)[0];return r!=null?t(r):void 0};jl.max=function(t){let r=this.extent(t)[1];return r!=null?t(r):void 0};jl.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=KW(this.values(),t),this._get=t),this._q};jl.q1=function(t){return this.quartile(t)[0]};jl.q2=function(t){return this.quartile(t)[1]};jl.q3=function(t){return this.quartile(t)[2]};jl.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=sde(this.values(),1e3,.05,t),this._get=t),this._ci};jl.ci0=function(t){return this.ci(t)[0]};jl.ci1=function(t){return this.ci(t)[1]};t_.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:WL},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Dt(t_,et,{transform(t,r){let n=this,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.modified();return n.stamp=o.stamp,n.value&&(i||r.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),o.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),r.clean()&&n._drop&&o.clean(!0).runAfter(()=>this.clean()),n.changes(o)},cross(){let t=this,r=t.value,n=t._dnames,o=n.map(()=>({})),i=n.length;function s(l){let u,c,f,d;for(u in l)for(f=l[u].tuple,c=0;c<i;++c)o[c][d=f[n[c]]]=d}s(t._prev),s(r);function a(l,u,c){let f=n[c],d=o[c++];for(let p in d){let h=l?l+"|"+p:p;u[f]=d[p],c<i?a(h,u,c):r[h]||t.cell(h,u)}}a("",{},0)},init(t){let r=this._inputs=[],n=this._outputs=[],o={};function i(y){let b=Br(Na(y)),x=b.length,v=0,w;for(;v<x;++v)o[w=b[v]]||(o[w]=1,r.push(w))}this._dims=Br(t.groupby),this._dnames=this._dims.map(y=>{let b=Li(y);return i(y),n.push(b),b}),this.cellkey=t.key?t.key:spe(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let s=t.fields||[null],a=t.ops||["count"],l=t.as||[],u=s.length,c={},f,d,p,h,m,g;for(u!==a.length&&pt("Unmatched number of fields and aggregate ops."),g=0;g<u;++g){if(f=s[g],d=a[g],f==null&&d!=="count"&&pt("Null aggregate field specified."),h=Li(f),m=wXe(d,h,l[g]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[h],p||(i(f),p=c[h]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(_Xe(d,m))}return this._measures=this._measures.map(y=>CXe(y,y.field)),{}},cellkey:spe(),cell(t,r){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,r),this._adds[this._alen++]=n),n},newcell(t,r){let n={key:t,num:0,agg:null,tuple:this.newtuple(r,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let o=this._measures,i=o.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new o[s](n)}return n.store&&(n.data=new ape),n},newtuple(t,r){let n=this._dnames,o=this._dims,i=o.length,s={};for(let a=0;a<i;++a)s[n[a]]=o[a](t);return r?zW(r.tuple,s):Nn(s)},clean(){let t=this.value;for(let r in t)t[r].num===0&&delete t[r]},add(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].add(o[i].get(t),t)},rem(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].rem(o[i].get(t),t)},celltuple(t){let r=t.tuple,n=this._counts;t.store&&t.data.values();for(let o=0,i=n.length;o<i;++o)r[n[o]]=t.num;if(!this._countOnly){let o=t.agg;for(let i=0,s=o.length;i<s;++i)o[i].set(r)}return r},changes(t){let r=this._adds,n=this._mods,o=this._prev,i=this._drop,s=t.add,a=t.rem,l=t.mod,u,c,f,d;if(o)for(c in o)u=o[c],(!i||u.num)&&a.push(u.tuple);for(f=0,d=this._alen;f<d;++f)s.push(this.celltuple(r[f])),r[f]=null;for(f=0,d=this._mlen;f<d;++f)u=n[f],(u.num===0&&i?a:l).push(this.celltuple(u)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,t}});CKt=1e-14;lpe.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Dt(lpe,et,{transform(t,r){let n=t.interval!==!1,o=this._bins(t),i=o.start,s=o.step,a=t.as||["bin0","bin1"],l=a[0],u=a[1],c;return t.modified()?(r=r.reflow(!0),c=r.SOURCE):c=r.modified(Na(t.field))?r.ADD_MOD:r.ADD,r.visit(c,n?f=>{let d=o(f);f[l]=d,f[u]=d==null?null:i+s*(1+(d-i)/s)}:f=>f[l]=o(f)),r.modifies(n?a:l)},_bins(t){if(this.value&&!t.modified())return this.value;let r=t.field,n=ide(t),o=n.step,i=n.start,s=i+Math.ceil((n.stop-i)/o)*o,a,l;(a=t.anchor)!=null&&(l=a-(i+o*Math.floor((a-i)/o)),i+=l,s+=l);let u=function(c){let f=em(r(c));return f==null?null:f<i?-1/0:f>s?1/0:(f=Math.max(i,Math.min(f,s-o)),i+o*Math.floor(CKt+(f-i)/o))};return u.start=i,u.stop=n.stop,u.step=o,this.value=_d(u,Na(r),t.name||"bin_"+Li(r))}});upe.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Dt(upe,et,{transform(t,r){let n=r.fork(r.ALL),o=EXe(_r,this.value,n.materialize(n.ADD).add),i=t.sort,s=r.changed()||i&&(t.modified("sort")||r.modified(i.fields));return n.visit(n.REM,o.remove),this.modified(s),this.value=n.source=o.data(iy(i),s),r.source&&r.source.root&&(this.value.root=r.source.root),n}});Dt(TXe,Fo);cpe.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};Dt(cpe,et,{transform(t,r){let n=d=>p=>{for(var h=TKt(l(p),t.case,s)||[],m,g=0,y=h.length;g<y;++g)a.test(m=h[g])||d(m)},o=this._parameterCheck(t,r),i=this._counts,s=this._match,a=this._stop,l=t.field,u=t.as||["text","count"],c=n(d=>i[d]=1+(i[d]||0)),f=n(d=>i[d]-=1);return o?r.visit(r.SOURCE,c):(r.visit(r.ADD,c),r.visit(r.REM,f)),this._finish(r,u)},_parameterCheck(t,r){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||r.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,r){let n=this._counts,o=this._tuples||(this._tuples={}),i=r[0],s=r[1],a=t.fork(t.NO_SOURCE|t.NO_FIELDS),l,u,c;for(l in n)u=o[l],c=n[l]||0,!u&&c?(o[l]=u=Nn({}),u[i]=l,u[s]=c,a.add.push(u)):c===0?(u&&a.rem.push(u),n[l]=null,o[l]=null):u[s]!==c&&(u[s]=c,a.mod.push(u));return a.modifies(r)}});fpe.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Dt(fpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.as||["a","b"],i=o[0],s=o[1],a=!this.value||r.changed(r.ADD_REM)||t.modified("as")||t.modified("filter"),l=this.value;return a?(l&&(n.rem=l),l=r.materialize(r.SOURCE).source,n.add=this.value=AKt(l,i,s,t.filter||Y0)):n.mod=l,n.source=this.value,n.modifies(o)}});xXe={kde:eq,mixture:ude,normal:JW,lognormal:lde,uniform:cde},kKt="distributions",vXe="function",IKt="field";kXe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],DKt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:kXe},{name:"weights",type:"number",array:!0}]};dpe.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:kXe.concat(DKt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Dt(dpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=AXe(t.distribution,NKt(r)),i=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200,a=t.method||"pdf";a!=="pdf"&&a!=="cdf"&&pt("Invalid density method: "+a),!t.extent&&!o.data&&pt("Missing density extent parameter."),a=o[a];let l=t.as||["value","density"],u=t.extent||tm(o.data()),c=yN(a,u,i,s).map(f=>{let d={};return d[l[0]]=f[0],d[l[1]]=f[1],Nn(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});DXe="bin";hpe.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:DXe}]};MKt=(t,r)=>EE(tm(t,r))/30;Dt(hpe,et,{transform(t,r){if(this.value&&!(t.modified()||r.changed()))return r;let n=r.materialize(r.SOURCE).source,o=ppe(r.source,t.groupby,mc),i=t.smooth||!1,s=t.field,a=t.step||MKt(n,s),l=iy((m,g)=>s(m)-s(g)),u=t.as||DXe,c=o.length,f=1/0,d=-1/0,p=0,h;for(;p<c;++p){let m=o[p].sort(l);h=-1;for(let g of ade(m,a,i,s))g<f&&(f=g),g>d&&(d=g),m[++h][u]=g}return this.value={start:f,stop:d,step:a},r.reflow(!0).modifies(u)}});Dt(NXe,Fo);mpe.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Dt(mpe,et,{transform(t,r){let n=this.value,o=t.field,i=r.changed()||r.modified(o.fields)||t.modified("field"),s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),r.visit(i?r.SOURCE:r.ADD,l=>{let u=em(o(l));u!=null&&(u<s&&(s=u),u>a&&(a=u))}),!Number.isFinite(s)||!Number.isFinite(a)){let l=Li(o);l&&(l=` for field "${l}"`),r.dataflow.warn(`Infinite extent${l}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});Dt(gpe,Fo,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});Dt(yq,et,{activate(t){this._targets[this._targets.active++]=t},subflow(t,r,n,o){let i=this.value,s=Pr(i,t)&&i[t],a,l;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(l=o||(l=this._group[t])&&l.tuple,a=n.dataflow,s=new gpe(n.fork(n.NO_SOURCE),this),a.add(s).connect(r(a,t,l)),i[t]=s,this.activate(s)),s},clean(){let t=this.value,r=0;for(let n in t)if(t[n].count===0){let o=t[n].detachSubflow;o&&o(),delete t[n],++r}if(r){let n=this._targets.filter(o=>o&&o.count>0);this.initTargets(n)}},initTargets(t){let r=this._targets,n=r.length,o=t?t.length:0,i=0;for(;i<o;++i)r[i]=t[i];for(;i<n&&r[i]!=null;++i)r[i]=null;r.active=o},transform(t,r){let n=r.dataflow,o=t.key,i=t.subflow,s=this._keys,a=t.modified("key"),l=u=>this.subflow(u,i,r);return this._group=t.group||{},this.initTargets(),r.visit(r.REM,u=>{let c=_r(u),f=s.get(c);f!==void 0&&(s.delete(c),l(f).rem(u))}),r.visit(r.ADD,u=>{let c=o(u);s.set(_r(u),c),l(c).add(u)}),a||r.modified(o.fields)?r.visit(r.MOD,u=>{let c=_r(u),f=s.get(c),d=o(u);f===d?l(d).mod(u):(s.set(c,d),l(f).rem(u),l(d).add(u))}):r.changed(r.MOD)&&r.visit(r.MOD,u=>{l(s.get(_r(u))).mod(u)}),a&&r.visit(r.REFLOW,u=>{let c=_r(u),f=s.get(c),d=o(u);f!==d&&(s.set(c,d),l(f).rem(u),l(d).add(u))}),r.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),r}});Dt(MXe,Fo);ype.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Dt(ype,et,{transform(t,r){let n=r.dataflow,o=this.value,i=r.fork(),s=i.add,a=i.rem,l=i.mod,u=t.expr,c=!0;r.visit(r.REM,d=>{let p=_r(d);o.has(p)?o.delete(p):a.push(d)}),r.visit(r.ADD,d=>{u(d,t)?s.push(d):o.set(_r(d),1)});function f(d){let p=_r(d),h=u(d,t),m=o.get(p);h&&m?(o.delete(p),s.push(d)):!h&&!m?(o.set(p,1),a.push(d)):c&&h&&!m&&l.push(d)}return r.visit(r.MOD,f),t.modified()&&(c=!1,r.visit(r.REFLOW,f)),o.empty>n.cleanThreshold&&n.runAfter(o.clean),i}});bpe.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Dt(bpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=IXe(o,t.as||[]),s=t.index||null,a=i.length;return n.rem=this.value,r.visit(r.SOURCE,l=>{let u=o.map(m=>m(l)),c=u.reduce((m,g)=>Math.max(m,g.length),0),f=0,d,p,h;for(;f<c;++f){for(p=$W(l),d=0;d<a;++d)p[i[d]]=(h=u[d][f])==null?null:h;s&&(p[s]=f),n.add.push(p)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});xpe.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Dt(xpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=o.map(Li),s=t.as||["key","value"],a=s[0],l=s[1],u=o.length;return n.rem=this.value,r.visit(r.SOURCE,c=>{for(let f=0,d;f<u;++f)d=$W(c),d[a]=i[f],d[l]=o[f](c),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});vpe.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Dt(vpe,et,{transform(t,r){let n=t.expr,o=t.as,i=t.modified(),s=t.initonly?r.ADD:i?r.SOURCE:r.modified(n.fields)||r.modified(o)?r.ADD_MOD:r.ADD;return i&&(r=r.materialize().reflow(!0)),t.initonly||r.modifies(o),r.visit(s,a=>a[o]=n(a,t))}});Dt(FXe,et,{transform(t,r){let n=r.fork(r.ALL),o=t.generator,i=this.value,s=t.size-i.length,a,l,u;if(s>0){for(a=[];--s>=0;)a.push(u=Nn(o(t))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else l=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,i=i.slice(-s);return n.source=this.value=i,n}});gq={value:"value",median:kL,mean:YW,min:PE,max:Mp},RKt=[];wpe.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};Dt(wpe,et,{transform(t,r){var n=r.fork(r.ALL),o=PKt(t),i=LKt(t),s=Li(t.field),a=Li(t.key),l=(t.groupby||[]).map(Li),u=jKt(r.source,t.groupby,t.key,t.keyvals),c=[],f=this.value,d=u.domain.length,p,h,m,g,y,b,x,v,w,_;for(y=0,v=u.length;y<v;++y)for(p=u[y],m=p.values,h=NaN,x=0;x<d;++x)if(p[x]==null){for(g=u.domain[x],_={_impute:!0},b=0,w=m.length;b<w;++b)_[l[b]]=m[b];_[a]=g,_[s]=Number.isNaN(h)?h=o(p,i):h,c.push(Nn(_))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=c,n}});_pe.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:WL},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Dt(_pe,t_,{transform(t,r){let n=this,o=t.modified(),i;return n.value&&(o||r.modified(n._inputs,!0))?(i=n.value=o?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),n.changes(),r.visit(r.SOURCE,s=>{an(s,i[n.cellkey(s)].tuple)}),r.reflow(o).modifies(this._outputs)},changes(){let t=this._adds,r=this._mods,n,o;for(n=0,o=this._alen;n<o;++n)this.celltuple(t[n]),t[n]=null;for(n=0,o=this._mlen;n<o;++n)this.celltuple(r[n]),r[n]=null;this._alen=this._mlen=0}});Spe.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Dt(Spe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=ppe(o,t.groupby,t.field),s=(t.groupby||[]).map(Li),a=t.bandwidth,l=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[],f=t.extent,d=t.steps||t.minsteps||25,p=t.steps||t.maxsteps||200;l!=="pdf"&&l!=="cdf"&&pt("Invalid density method: "+l),t.resolve==="shared"&&(f||(f=tm(o,t.field)),d=p=t.steps||p),i.forEach(h=>{let m=eq(h,a)[l],g=t.counts?h.length:1,y=f||tm(h);yN(m,y,d,p).forEach(b=>{let x={};for(let v=0;v<s.length;++v)x[s[v]]=h.dims[v];x[u[0]]=b[0],x[u[1]]=b[1]*g,c.push(Nn(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});Dt(OXe,Fo);Dt(RXe,et,{transform(t,r){let n=r.dataflow;return this._pending?ipe(this,r,this._pending):$Kt(t)?r.StopPropagation:t.values?ipe(this,r,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(i=>(this._pending=Br(i.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(o=>ipe(this,r,Br(o.data)))}});Cpe.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Dt(Cpe,et,{transform(t,r){let n=t.fields,o=t.index,i=t.values,s=t.default==null?null:t.default,a=t.modified(),l=n.length,u=a?r.SOURCE:r.ADD,c=r,f=t.as,d,p,h;return i?(p=i.length,l>1&&!f&&pt('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==l*p&&pt('The "as" parameter has too few output field names.'),f=f||i.map(Li),d=function(m){for(var g=0,y=0,b,x;g<l;++g)if(x=o.get(n[g](m)),x==null)for(b=0;b<p;++b,++y)m[f[y]]=s;else for(b=0;b<p;++b,++y)m[f[y]]=i[b](x)}):(f||pt("Missing output field names."),d=function(m){for(var g=0,y;g<l;++g)y=o.get(n[g](m)),m[f[g]]=y??s}),a?c=r.reflow(!0):(h=n.some(m=>r.modified(m.fields)),u|=h?r.MOD:0),r.visit(u,d),c.modifies(f)}});Dt(PXe,Fo);Dt(LXe,Fo);Dt(jXe,et,{transform(t,r){return this.modified(t.modified()),this.value=t,r.fork(r.NO_SOURCE|r.NO_FIELDS)}});Epe.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:WL,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Dt(Epe,t_,{_transform:t_.prototype.transform,transform(t,r){return this._transform(VKt(t,r),r)}});Dt(BXe,yq,{transform(t,r){let n=t.subflow,o=t.field,i=s=>this.subflow(_r(s),n,r,s);return(t.modified("field")||o&&r.modified(Na(o)))&&pt("PreFacet does not support field modification."),this.initTargets(),o?(r.visit(r.MOD,s=>{let a=i(s);o(s).forEach(l=>a.mod(l))}),r.visit(r.ADD,s=>{let a=i(s);o(s).forEach(l=>a.add(Nn(l)))}),r.visit(r.REM,s=>{let a=i(s);o(s).forEach(l=>a.rem(l))})):(r.visit(r.MOD,s=>i(s).mod(s)),r.visit(r.ADD,s=>i(s).add(s)),r.visit(r.REM,s=>i(s).rem(s))),r.clean()&&r.runAfter(()=>this.clean()),r}});Tpe.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Dt(Tpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=IXe(t.fields,t.as||[]),s=o?(l,u)=>qKt(l,u,o,i):OE,a;return this.value?a=this.value:(r=r.addAll(),a=this.value={}),r.visit(r.REM,l=>{let u=_r(l);n.rem.push(a[u]),a[u]=null}),r.visit(r.ADD,l=>{let u=s(l,Nn({}));a[_r(l)]=u,n.add.push(u)}),r.visit(r.MOD,l=>{n.mod.push(s(l,a[_r(l)]))}),n}});Dt($Xe,et,{transform(t,r){return this.value=t.value,t.modified("value")?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});Ape.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};HKt=1e-14;Dt(Ape,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=t.as||["prob","value"];if(this.value&&!t.modified()&&!r.changed())return n.source=this.value,n;let i=r.materialize(r.SOURCE).source,s=ppe(i,t.groupby,t.field),a=(t.groupby||[]).map(Li),l=[],u=t.step||.01,c=t.probs||ca(u/2,1-HKt,u),f=c.length;return s.forEach(d=>{let p=XW(d,c);for(let h=0;h<f;++h){let m={};for(let g=0;g<a.length;++g)m[a[g]]=d.dims[g];m[o[0]]=c[h],m[o[1]]=p[h],l.push(Nn(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});Dt(zXe,et,{transform(t,r){let n,o;return this.value?o=this.value:(n=r=r.addAll(),o=this.value={}),t.derive&&(n=r.fork(r.NO_SOURCE),r.visit(r.REM,i=>{let s=_r(i);n.rem.push(o[s]),o[s]=null}),r.visit(r.ADD,i=>{let s=$W(i);o[_r(i)]=s,n.add.push(s)}),r.visit(r.MOD,i=>{let s=o[_r(i)];for(let a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});kpe.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Dt(kpe,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.modified("size"),i=t.size,s=this.value.reduce((f,d)=>(f[_r(d)]=1,f),{}),a=this.value,l=this.count,u=0;function c(f){let d,p;a.length<i?a.push(f):(p=~~((l+1)*Ed()),p<a.length&&p>=u&&(d=a[p],s[_r(d)]&&n.rem.push(d),a[p]=f)),++l}if(r.rem.length&&(r.visit(r.REM,f=>{let d=_r(f);s[d]&&(s[d]=-1,n.rem.push(f)),--l}),a=a.filter(f=>s[_r(f)]!==-1)),(r.rem.length||o)&&a.length<i&&r.source&&(u=l=a.length,r.visit(r.SOURCE,f=>{s[_r(f)]||c(f)}),u=-1),o&&a.length>i){let f=a.length-i;for(let d=0;d<f;++d)s[_r(a[d])]=-1,n.rem.push(a[d]);a=a.slice(f)}return r.mod.length&&r.visit(r.MOD,f=>{s[_r(f)]&&n.mod.push(f)}),r.add.length&&r.visit(r.ADD,c),(r.add.length||u<0)&&(n.add=a.filter(f=>!s[_r(f)])),this.count=l,this.value=n.source=a,n}});Ipe.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Dt(Ipe,et,{transform(t,r){if(this.value&&!t.modified())return;let n=r.materialize().fork(r.MOD),o=t.as||"data";return n.rem=this.value?r.rem.concat(this.value):r.rem,this.value=ca(t.start,t.stop,t.step||1).map(i=>{let s={};return s[o]=i,Nn(s)}),n.add=r.add.concat(this.value),n}});Dt(UXe,et,{transform(t,r){return this.value=r.source,r.changed()?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});VXe=["unit0","unit1"];Dpe.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:pq,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:VXe}]};Dt(Dpe,et,{transform(t,r){let n=t.field,o=t.interval!==!1,i=t.timezone==="utc",s=this._floor(t,r),a=(i?av:sv)(s.unit).offset,l=t.as||VXe,u=l[0],c=l[1],f=s.step,d=s.start||1/0,p=s.stop||-1/0,h=r.ADD;return(t.modified()||r.modified(Na(n)))&&(r=r.reflow(!0),h=r.SOURCE,d=1/0,p=-1/0),r.visit(h,m=>{let g=n(m),y,b;g==null?(m[u]=null,o&&(m[c]=null)):(m[u]=y=b=s(g),o&&(m[c]=b=a(y,f)),y<d&&(d=y),b>p&&(p=b))}),s.start=d,s.stop=p,r.modifies(o?l:u)},_floor(t,r){let n=t.timezone==="utc",{units:o,step:i}=t.units?{units:t.units,step:t.step||1}:npe({extent:t.extent||tm(r.materialize(r.SOURCE).source,t.field),maxbins:t.maxbins}),s=hq(o),a=this.value||{},l=(n?Qde:Zde)(s,i);return l.unit=Un(s),l.units=s,l.step=i,l.start=a.start,l.stop=a.stop,this.value=l}});Dt(GXe,et,{transform(t,r){let n=r.dataflow,o=t.field,i=this.value,s=l=>i.set(o(l),l),a=!0;return t.modified("field")||r.modified(o.fields)?(i.clear(),r.visit(r.SOURCE,s)):r.changed()?(r.visit(r.REM,l=>i.delete(o(l))),r.visit(r.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r.fork()}});Dt(WXe,et,{transform(t,r){(!this.value||t.modified("field")||t.modified("sort")||r.changed()||t.sort&&r.modified(t.sort.fields))&&(this.value=(t.sort?r.source.slice().sort(iy(t.sort)):r.source).map(t.field))}});GL={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?++t:t}}},percent_rank:function(){let t=GL.rank(),r=t.next;return{init:t.init,next:n=>(r(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:r=>{let n=r.data,o=r.compare,i=r.index;if(t<i){for(;i+1<n.length&&!o(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,r){r=+r,r>0||pt("ntile num must be greater than zero.");let n=GL.cume_dist(),o=n.next;return{init:n.init,next:i=>Math.ceil(r*o(i))}},lag:function(t,r){return r=+r||1,{next:n=>{let o=n.index-r;return o>=0?t(n.data[o]):null}}},lead:function(t,r){return r=+r||1,{next:n=>{let o=n.index+r,i=n.data;return o<i.length?t(i[o]):null}}},first_value:function(t){return{next:r=>t(r.data[r.i0])}},last_value:function(t){return{next:r=>t(r.data[r.i1-1])}},nth_value:function(t,r){return r=+r,r>0||pt("nth_value nth must be greater than zero."),{next:n=>{let o=n.i0+(r-1);return o<n.i1?t(n.data[o]):null}}},prev_value:function(t){let r;return{init:()=>r=null,next:n=>{let o=t(n.data[n.index]);return o!=null?r=o:r}}},next_value:function(t){let r,n;return{init:()=>(r=null,n=-1),next:o=>{let i=o.data;return o.index<=n?r:(n=XKt(t,i,o.index))<0?(n=i.length,r=null):r=t(i[n])}}}};KKt=Object.keys(GL);HXe=qXe.prototype;HXe.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};HXe.update=function(t,r){let n=this.cell,o=this.windows,i=t.data,s=o&&o.length,a;if(n){for(a=t.p0;a<t.i0;++a)n.rem(i[a]);for(a=t.p1;a<t.i1;++a)n.add(i[a]);n.set(r)}for(a=0;a<s;++a)o[a].update(t,r)};Npe.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:KKt.concat(WL)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Dt(Npe,et,{transform(t,r){this.stamp=r.stamp;let n=t.modified(),o=iy(t.sort),i=spe(t.groupby),s=l=>this.group(i(l)),a=this.state;(!a||n)&&(a=this.state=new qXe(t)),n||r.modified(a.inputs)?(this.value={},r.visit(r.SOURCE,l=>s(l).add(l))):(r.visit(r.REM,l=>s(l).remove(l)),r.visit(r.ADD,l=>s(l).add(l)));for(let l=0,u=this._mlen;l<u;++l)QKt(this._mods[l],a,o,t);return this._mlen=0,this._mods=[],r.reflow(n).modifies(a.outputs)},group(t){let r=this.value[t];return r||(r=this.value[t]=EXe(_r),r.stamp=-1),r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r),r}})});function SN(t,r,n){return t.fields=r||[],t.fname=n,t}function tZt(t){return t.length===1?rZt(t[0]):nZt(t)}function wu(t){throw Error(t)}function oZt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||wu("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&wu("Access path missing closing bracket: "+t),o&&wu("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Fpe(t,r,n){let o=oZt(t);return t=o.length===1?o[0]:t,SN((n&&n.get||tZt)(o),[t],r||t)}function lv(t){return t===Object(t)}function cf(t){return t[t.length-1]}function Rpe(t){return t==null||t===""?null:+t}function CN(t){return t!=null?_c(t)?t:[t]:[]}function r_(t){return typeof t=="function"}function uv(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function Pp(t,r){return aZt.call(t,r)}function cv(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),uv(o,n)}function KXe(t){return t&&r_(t[Symbol.iterator])}function EN(t){return typeof t=="string"}function ZXe(t){t=+t||lZt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>Pp(r,a)||Pp(n,a),get:a=>Pp(r,a)?r[a]:Pp(n,a)?s(a,n[a]):void 0,set:(a,l)=>Pp(r,a)?r[a]=l:s(a,l)}}function bq(t){return _c(t)?"["+t.map(bq)+"]":lv(t)||EN(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function qL(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var rZt,nZt,hEo,XXe,iZt,sZt,Ope,mEo,_c,aZt,lZt,HE=N(()=>{"use strict";rZt=t=>function(r){return r[t]},nZt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};hEo=Fpe("id"),XXe=SN(t=>t,[],"identity"),iZt=SN(()=>0,[],"zero"),sZt=SN(()=>1,[],"one"),Ope=SN(()=>!0,[],"true"),mEo=SN(()=>!1,[],"false"),_c=Array.isArray;aZt=Object.prototype.hasOwnProperty;lZt=1e4});function Vn(t){return function(){return t}}var HL=N(()=>{"use strict"});function JXe(t){return t>1?0:t<-1?o_:Math.acos(t)}function Lpe(t){return t>=1?YL:t<=-1?-YL:Math.asin(t)}var Ppe,Bl,n_,QXe,xq,um,fv,nl,o_,YL,vq,wq=N(()=>{"use strict";Ppe=Math.abs,Bl=Math.atan2,n_=Math.cos,QXe=Math.max,xq=Math.min,um=Math.sin,fv=Math.sqrt,nl=1e-12,o_=Math.PI,YL=o_/2,vq=2*o_});function eKe(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function cZt(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return eKe;let n=10**r;return function(o){this._+=o[0];for(let i=1,s=o.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+o[i]}}function XL(){return new XE}var jpe,Bpe,YE,uZt,XE,tKe=N(()=>{"use strict";jpe=Math.PI,Bpe=2*jpe,YE=1e-6,uZt=Bpe-YE;XE=class{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?eKe:cZt(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,o,i){this._append`Q${+r},${+n},${this._x1=+o},${this._y1=+i}`}bezierCurveTo(r,n,o,i,s,a){this._append`C${+r},${+n},${+o},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(r,n,o,i,s){if(r=+r,n=+n,o=+o,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=o-r,c=i-n,f=a-r,d=l-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(p>YE)if(!(Math.abs(d*u-c*f)>YE)||!s)this._append`L${this._x1=r},${this._y1=n}`;else{let h=o-a,m=i-l,g=u*u+c*c,y=h*h+m*m,b=Math.sqrt(g),x=Math.sqrt(p),v=s*Math.tan((jpe-Math.acos((g+p-y)/(2*b*x)))/2),w=v/x,_=v/b;Math.abs(w-1)>YE&&this._append`L${r+w*f},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*h>f*m)},${this._x1=r+_*u},${this._y1=n+_*c}`}}arc(r,n,o,i,s,a){if(r=+r,n=+n,o=+o,a=!!a,o<0)throw new Error(`negative radius: ${o}`);let l=o*Math.cos(i),u=o*Math.sin(i),c=r+l,f=n+u,d=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>YE||Math.abs(this._y1-f)>YE)&&this._append`L${c},${f}`,o&&(p<0&&(p=p%Bpe+Bpe),p>uZt?this._append`A${o},${o},0,1,${d},${r-l},${n-u}A${o},${o},0,1,${d},${this._x1=c},${this._y1=f}`:p>YE&&this._append`A${o},${o},0,${+(p>=jpe)},${d},${this._x1=r+o*Math.cos(s)},${this._y1=n+o*Math.sin(s)}`)}rect(r,n,o,i){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${o=+o}v${+i}h${-o}Z`}toString(){return this._}};XL.prototype=XE.prototype});var $pe=N(()=>{"use strict";tKe()});function i_(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{let o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);r=o}return t},()=>new XE(r)}var KL=N(()=>{"use strict";$pe()});function fZt(t){return t.innerRadius}function dZt(t){return t.outerRadius}function pZt(t){return t.startAngle}function hZt(t){return t.endAngle}function mZt(t){return t&&t.padAngle}function gZt(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<nl))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function _q(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/fv(l*l+u*u),f=c*u,d=-c*l,p=t+f,h=r+d,m=n+f,g=o+d,y=(p+m)/2,b=(h+g)/2,x=m-p,v=g-h,w=x*x+v*v,_=i-s,S=p*g-m*h,C=(v<0?-1:1)*fv(QXe(0,_*_*w-S*S)),E=(S*v-x*C)/w,T=(-S*x-v*C)/w,I=(S*v+x*C)/w,k=(-S*x+v*C)/w,F=E-y,D=T-b,L=I-y,P=k-b;return F*F+D*D>L*L+P*P&&(E=I,T=k),{cx:E,cy:T,x01:-f,y01:-d,x11:E*(i/_-1),y11:T*(i/_-1)}}function zpe(){var t=fZt,r=dZt,n=Vn(0),o=null,i=pZt,s=hZt,a=mZt,l=null,u=i_(c);function c(){var f,d,p=+t.apply(this,arguments),h=+r.apply(this,arguments),m=i.apply(this,arguments)-YL,g=s.apply(this,arguments)-YL,y=Ppe(g-m),b=g>m;if(l||(l=f=u()),h<p&&(d=h,h=p,p=d),!(h>nl))l.moveTo(0,0);else if(y>vq-nl)l.moveTo(h*n_(m),h*um(m)),l.arc(0,0,h,m,g,!b),p>nl&&(l.moveTo(p*n_(g),p*um(g)),l.arc(0,0,p,g,m,b));else{var x=m,v=g,w=m,_=g,S=y,C=y,E=a.apply(this,arguments)/2,T=E>nl&&(o?+o.apply(this,arguments):fv(p*p+h*h)),I=xq(Ppe(h-p)/2,+n.apply(this,arguments)),k=I,F=I,D,L;if(T>nl){var P=Lpe(T/p*um(E)),R=Lpe(T/h*um(E));(S-=P*2)>nl?(P*=b?1:-1,w+=P,_-=P):(S=0,w=_=(m+g)/2),(C-=R*2)>nl?(R*=b?1:-1,x+=R,v-=R):(C=0,x=v=(m+g)/2)}var V=h*n_(x),G=h*um(x),U=p*n_(_),H=p*um(_);if(I>nl){var X=h*n_(v),fe=h*um(v),$=p*n_(w),M=p*um(w),z;if(y<o_)if(z=gZt(V,G,$,M,X,fe,U,H)){var q=V-z[0],ee=G-z[1],ae=X-z[0],Q=fe-z[1],le=1/um(JXe((q*ae+ee*Q)/(fv(q*q+ee*ee)*fv(ae*ae+Q*Q)))/2),ie=fv(z[0]*z[0]+z[1]*z[1]);k=xq(I,(p-ie)/(le-1)),F=xq(I,(h-ie)/(le+1))}else k=F=0}C>nl?F>nl?(D=_q($,M,V,G,h,F,b),L=_q(X,fe,U,H,h,F,b),l.moveTo(D.cx+D.x01,D.cy+D.y01),F<I?l.arc(D.cx,D.cy,F,Bl(D.y01,D.x01),Bl(L.y01,L.x01),!b):(l.arc(D.cx,D.cy,F,Bl(D.y01,D.x01),Bl(D.y11,D.x11),!b),l.arc(0,0,h,Bl(D.cy+D.y11,D.cx+D.x11),Bl(L.cy+L.y11,L.cx+L.x11),!b),l.arc(L.cx,L.cy,F,Bl(L.y11,L.x11),Bl(L.y01,L.x01),!b))):(l.moveTo(V,G),l.arc(0,0,h,x,v,!b)):l.moveTo(V,G),!(p>nl)||!(S>nl)?l.lineTo(U,H):k>nl?(D=_q(U,H,X,fe,p,-k,b),L=_q(V,G,$,M,p,-k,b),l.lineTo(D.cx+D.x01,D.cy+D.y01),k<I?l.arc(D.cx,D.cy,k,Bl(D.y01,D.x01),Bl(L.y01,L.x01),!b):(l.arc(D.cx,D.cy,k,Bl(D.y01,D.x01),Bl(D.y11,D.x11),!b),l.arc(0,0,p,Bl(D.cy+D.y11,D.cx+D.x11),Bl(L.cy+L.y11,L.cx+L.x11),b),l.arc(L.cx,L.cy,k,Bl(L.y11,L.x11),Bl(L.y01,L.x01),!b))):l.arc(0,0,p,_,w,b)}if(l.closePath(),f)return l=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-o_/2;return[n_(d)*f,um(d)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Vn(+f),c):t},c.outerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:Vn(+f),c):r},c.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Vn(+f),c):n},c.padRadius=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Vn(+f),c):o},c.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Vn(+f),c):i},c.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Vn(+f),c):s},c.padAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Vn(+f),c):a},c.context=function(f){return arguments.length?(l=f??null,c):l},c}var rKe=N(()=>{"use strict";HL();wq();KL()});function Sq(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var IEo,Upe=N(()=>{"use strict";IEo=Array.prototype.slice});function nKe(t){this._context=t}function KE(t){return new nKe(t)}var Cq=N(()=>{"use strict";nKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function Eq(t){return t[0]}function Tq(t){return t[1]}var Vpe=N(()=>{"use strict"});function ZL(t,r){var n=Vn(!0),o=null,i=KE,s=null,a=i_(l);t=typeof t=="function"?t:t===void 0?Eq:Vn(t),r=typeof r=="function"?r:r===void 0?Tq:Vn(r);function l(u){var c,f=(u=Sq(u)).length,d,p=!1,h;for(o==null&&(s=i(h=a())),c=0;c<=f;++c)!(c<f&&n(d=u[c],c,u))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,c,u),+r(d,c,u));if(h)return s=null,h+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Vn(+u),l):t},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:Vn(+u),l):r},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Vn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,o!=null&&(s=i(o)),l):i},l.context=function(u){return arguments.length?(u==null?o=s=null:s=i(o=u),l):o},l}var Gpe=N(()=>{"use strict";Upe();HL();Cq();KL();Vpe()});function Aq(t,r,n){var o=null,i=Vn(!0),s=null,a=KE,l=null,u=i_(c);t=typeof t=="function"?t:t===void 0?Eq:Vn(+t),r=typeof r=="function"?r:r===void 0?Vn(0):Vn(+r),n=typeof n=="function"?n:n===void 0?Tq:Vn(+n);function c(d){var p,h,m,g=(d=Sq(d)).length,y,b=!1,x,v=new Array(g),w=new Array(g);for(s==null&&(l=a(x=u())),p=0;p<=g;++p){if(!(p<g&&i(y=d[p],p,d))===b)if(b=!b)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=p-1;m>=h;--m)l.point(v[m],w[m]);l.lineEnd(),l.areaEnd()}b&&(v[p]=+t(y,p,d),w[p]=+r(y,p,d),l.point(o?+o(y,p,d):v[p],n?+n(y,p,d):w[p]))}if(x)return l=null,x+""||null}function f(){return ZL().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Vn(+d),o=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Vn(+d),c):t},c.x1=function(d){return arguments.length?(o=d==null?null:typeof d=="function"?d:Vn(+d),c):o},c.y=function(d){return arguments.length?(r=typeof d=="function"?d:Vn(+d),n=null,c):r},c.y0=function(d){return arguments.length?(r=typeof d=="function"?d:Vn(+d),c):r},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Vn(+d),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(r)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(o).y(r)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Vn(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(l=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=l=null:l=a(s=d),c):s},c}var oKe=N(()=>{"use strict";Upe();HL();Cq();Gpe();KL();Vpe()});var iKe,sKe=N(()=>{"use strict";wq();iKe={draw(t,r){let n=fv(r/o_);t.moveTo(n,0),t.arc(0,0,n,0,vq)}}});function kq(t,r){let n=null,o=i_(i);t=typeof t=="function"?t:Vn(t||iKe),r=typeof r=="function"?r:Vn(r===void 0?64:+r);function i(){let s;if(n||(n=s=o()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Vn(s),i):t},i.size=function(s){return arguments.length?(r=typeof s=="function"?s:Vn(+s),i):r},i.context=function(s){return arguments.length?(n=s??null,i):n},i}var aKe=N(()=>{"use strict";HL();KL();sKe()});function Lp(){}var QL=N(()=>{"use strict"});function TN(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function JL(t){this._context=t}function Wpe(t){return new JL(t)}var ej=N(()=>{"use strict";JL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:TN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:TN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function lKe(t){this._context=t}function qpe(t){return new lKe(t)}var uKe=N(()=>{"use strict";QL();ej();lKe.prototype={areaStart:Lp,areaEnd:Lp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:TN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function cKe(t){this._context=t}function Hpe(t){return new cKe(t)}var fKe=N(()=>{"use strict";ej();cKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:TN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function dKe(t,r){this._basis=new JL(t),this._beta=r}var Ype,pKe=N(()=>{"use strict";ej();dKe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};Ype=function t(r){function n(o){return r===1?new JL(o):new dKe(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function AN(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Iq(t,r){this._context=t,this._k=(1-r)/6}var Xpe,tj=N(()=>{"use strict";Iq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:AN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:AN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Xpe=function t(r){function n(o){return new Iq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Dq(t,r){this._context=t,this._k=(1-r)/6}var Kpe,Zpe=N(()=>{"use strict";QL();tj();Dq.prototype={areaStart:Lp,areaEnd:Lp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:AN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Kpe=function t(r){function n(o){return new Dq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Nq(t,r){this._context=t,this._k=(1-r)/6}var Qpe,Jpe=N(()=>{"use strict";tj();Nq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:AN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Qpe=function t(r){function n(o){return new Nq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function rj(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>nl){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>nl){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function hKe(t,r){this._context=t,this._alpha=r}var ehe,Mq=N(()=>{"use strict";wq();tj();hKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:rj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};ehe=function t(r){function n(o){return r?new hKe(o,r):new Iq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function mKe(t,r){this._context=t,this._alpha=r}var the,gKe=N(()=>{"use strict";Zpe();QL();Mq();mKe.prototype={areaStart:Lp,areaEnd:Lp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:rj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};the=function t(r){function n(o){return r?new mKe(o,r):new Dq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function yKe(t,r){this._context=t,this._alpha=r}var rhe,bKe=N(()=>{"use strict";Jpe();Mq();yKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};rhe=function t(r){function n(o){return r?new yKe(o,r):new Nq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function xKe(t){this._context=t}function nhe(t){return new xKe(t)}var vKe=N(()=>{"use strict";QL();xKe.prototype={areaStart:Lp,areaEnd:Lp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function wKe(t){return t<0?-1:1}function _Ke(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(wKe(s)+wKe(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function SKe(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function ohe(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function Fq(t){this._context=t}function CKe(t){this._context=new EKe(t)}function EKe(t){this._context=t}function ihe(t){return new Fq(t)}function she(t){return new CKe(t)}var TKe=N(()=>{"use strict";Fq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ohe(this,this._t0,SKe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,ohe(this,SKe(this,n=_Ke(this,t,r)),n);break;default:ohe(this,this._t0,n=_Ke(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(CKe.prototype=Object.create(Fq.prototype)).point=function(t,r){Fq.prototype.point.call(this,r,t)};EKe.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function kKe(t){this._context=t}function AKe(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function ahe(t){return new kKe(t)}var IKe=N(()=>{"use strict";kKe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=AKe(t),i=AKe(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function Oq(t,r){this._context=t,this._t=r}function lhe(t){return new Oq(t,.5)}function uhe(t){return new Oq(t,0)}function che(t){return new Oq(t,1)}var DKe=N(()=>{"use strict";Oq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var NKe=N(()=>{"use strict";rKe();oKe();Gpe();aKe();uKe();fKe();ej();pKe();Zpe();Jpe();tj();gKe();bKe();Mq();vKe();Cq();TKe();IKe();DKe()});function ff(t,r){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=r,n}return null}var Rq,kN=N(()=>{"use strict";Rq=()=>typeof Image<"u"?Image:null});function OKe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function bZt(t,r){var n=OKe(t);return function(o,i){return r(n(o),i,t)}}function FKe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function df(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function xZt(t){return t<0?"-"+df(-t,6):t>9999?"+"+df(t,6):df(t,4)}function vZt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":xZt(t.getUTCFullYear(),4)+"-"+df(t.getUTCMonth()+1,2)+"-"+df(t.getUTCDate(),2)+(i?"T"+df(r,2)+":"+df(n,2)+":"+df(o,2)+"."+df(i,3)+"Z":o?"T"+df(r,2)+":"+df(n,2)+":"+df(o,2)+"Z":n||r?"T"+df(r,2)+":"+df(n,2)+"Z":"")}function hhe(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?bZt(y,p):OKe(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===nj&&--m,d.charCodeAt(m-1)===phe&&--m;function w(){if(x)return fhe;if(v)return v=!1,MKe;var S,C=g,E;if(d.charCodeAt(C)===dhe){for(;g++<m&&d.charCodeAt(g)!==dhe||d.charCodeAt(++g)===dhe;);return(S=g)>=m?x=!0:(E=d.charCodeAt(g++))===nj?v=!0:E===phe&&(v=!0,d.charCodeAt(g)===nj&&++g),d.slice(C+1,S-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(S=g++))===nj)v=!0;else if(E===phe)v=!0,d.charCodeAt(g)===nj&&++g;else if(E!==n)continue;return d.slice(C,S)}return x=!0,d.slice(C,m)}for(;(b=w())!==fhe;){for(var _=[];b!==MKe&&b!==fhe;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=FKe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=FKe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?vZt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var MKe,fhe,dhe,nj,phe,RKe=N(()=>{"use strict";MKe={},fhe={},dhe=34,nj=10,phe=13});var PKe=N(()=>{"use strict";RKe()});function uy(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var Pq=N(()=>{"use strict"});function mhe(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var LKe=N(()=>{"use strict"});function ZE(t){let r,n,o;t.length!==2?(r=uy,n=(l,u)=>uy(t(l),u),o=(l,u)=>t(l)-u):(r=t===uy||t===mhe?t:wZt,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function wZt(){return 0}var ghe=N(()=>{"use strict";Pq();LKe()});function oj(t){return t===null?NaN:+t}var yhe=N(()=>{"use strict"});var jKe,ij,_Zt,SZt,cm,BKe=N(()=>{"use strict";Pq();ghe();yhe();jKe=ZE(uy),ij=jKe.right,_Zt=jKe.left,SZt=ZE(oj).center,cm=ij});function Lq(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=CZt?10:s>=EZt?5:s>=TZt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?Lq(t,r,n*2):[l,u,c]}function QE(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?Lq(r,t,n):Lq(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function sj(t,r,n){return r=+r,t=+t,n=+n,Lq(t,r,n)[2]}function s_(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?sj(r,t,n):sj(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var CZt,EZt,TZt,$Ke=N(()=>{"use strict";CZt=Math.sqrt(50),EZt=Math.sqrt(10),TZt=Math.sqrt(2)});function bhe(t,r,n=oj){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var zKe=N(()=>{"use strict";yhe()});function jq(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var UKe=N(()=>{"use strict"});var jp=N(()=>{"use strict";BKe();Pq();ghe();zKe();UKe();$Ke();iL()});function VKe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function JE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var aj=N(()=>{"use strict"});function cy(t){return t=JE(Math.abs(t)),t?t[1]:NaN}var lj=N(()=>{"use strict";aj()});function GKe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var WKe=N(()=>{"use strict"});function qKe(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var HKe=N(()=>{"use strict"});function Nd(t){if(!(r=AZt.exec(t)))throw new Error("invalid format: "+t);var r;return new Bq({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function Bq(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var AZt,xhe=N(()=>{"use strict";AZt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Nd.prototype=Bq.prototype;Bq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function YKe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var XKe=N(()=>{"use strict"});function KKe(t,r){var n=JE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(vhe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+JE(t,Math.max(0,r+s-1))[0]}var vhe,whe=N(()=>{"use strict";aj()});function _he(t,r){var n=JE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var ZKe=N(()=>{"use strict";aj()});var She,QKe=N(()=>{"use strict";aj();whe();ZKe();She={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:VKe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>_he(t*100,r),r:_he,s:KKe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function Che(t){return t}var JKe=N(()=>{"use strict"});function Ehe(t){var r=t.grouping===void 0||t.thousands===void 0?Che:GKe(eZe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Che:qKe(eZe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Nd(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):She[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=g==="$"?o:/[%p]/.test(_)?a:"",E=She[_],T=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(k){var F=S,D=C,L,P,R;if(_==="c")D=E(k)+D,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=YKe(k)),V&&+k==0&&m!=="+"&&(V=!1),F=(V?m==="("?m:l:m==="-"||m==="("?"":m)+F,D=(_==="s"?tZe[8+vhe/3]:"")+D+(V&&m==="("?")":""),T){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){D=(R===46?i+k.slice(L+1):k.slice(L))+D,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=F.length+k.length+D.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-D.length:1/0),U=""),h){case"<":k=F+k+D+U;break;case"=":k=F+U+k+D;break;case"^":k=U.slice(0,G=U.length>>1)+F+k+D+U.slice(G);break;default:k=U+F+k+D;break}return s(k)}return I.toString=function(){return d+""},I}function f(d,p){var h=c((d=Nd(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(cy(p)/3)))*3,g=Math.pow(10,-m),y=tZe[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var eZe,tZe,rZe=N(()=>{"use strict";lj();WKe();HKe();xhe();XKe();QKe();whe();JKe();eZe=Array.prototype.map,tZe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function The(t){return $q=Ehe(t),a_=$q.format,IN=$q.formatPrefix,$q}var $q,a_,IN,nZe=N(()=>{"use strict";rZe();The({thousands:",",grouping:[3],currency:["$",""]})});function uj(t){return Math.max(0,-cy(Math.abs(t)))}var oZe=N(()=>{"use strict";lj()});function cj(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cy(r)/3)))*3-cy(Math.abs(t)))}var iZe=N(()=>{"use strict";lj()});function fj(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,cy(r)-cy(t))+1}var sZe=N(()=>{"use strict";lj()});var zq=N(()=>{"use strict";nZe();xhe();oZe();iZe();sZe()});function pi(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>pi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(Ahe.setTime(+s),khe.setTime(+a),t(Ahe),t(khe),Math.floor(n(Ahe,khe))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var Ahe,khe,dv=N(()=>{"use strict";Ahe=new Date,khe=new Date});var fm,aZe,Ihe=N(()=>{"use strict";dv();fm=pi(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);fm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?pi(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):fm);aZe=fm.range});var _u,lZe,Dhe=N(()=>{"use strict";dv();_u=pi(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),lZe=_u.range});var l_,kZt,u_,IZt,Nhe=N(()=>{"use strict";dv();l_=pi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),kZt=l_.range,u_=pi(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),IZt=u_.range});var c_,DZt,f_,NZt,Mhe=N(()=>{"use strict";dv();c_=pi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),DZt=c_.range,f_=pi(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),NZt=f_.range});var pf,MZt,Bp,FZt,Uq,OZt,Fhe=N(()=>{"use strict";dv();pf=pi(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),MZt=pf.range,Bp=pi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),FZt=Bp.range,Uq=pi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),OZt=Uq.range});function rT(t){return pi(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function nT(t){return pi(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var $p,DN,cZe,fZe,d_,dZe,pZe,hZe,RZt,PZt,LZt,jZt,BZt,$Zt,zp,NN,mZe,gZe,p_,yZe,bZe,xZe,zZt,UZt,VZt,GZt,WZt,qZt,Ohe=N(()=>{"use strict";dv();$p=rT(0),DN=rT(1),cZe=rT(2),fZe=rT(3),d_=rT(4),dZe=rT(5),pZe=rT(6),hZe=$p.range,RZt=DN.range,PZt=cZe.range,LZt=fZe.range,jZt=d_.range,BZt=dZe.range,$Zt=pZe.range;zp=nT(0),NN=nT(1),mZe=nT(2),gZe=nT(3),p_=nT(4),yZe=nT(5),bZe=nT(6),xZe=zp.range,zZt=NN.range,UZt=mZe.range,VZt=gZe.range,GZt=p_.range,WZt=yZe.range,qZt=bZe.range});var pv,HZt,hv,YZt,Rhe=N(()=>{"use strict";dv();pv=pi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),HZt=pv.range,hv=pi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),YZt=hv.range});var Sc,XZt,Cc,KZt,Phe=N(()=>{"use strict";dv();Sc=pi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pi(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});XZt=Sc.range,Cc=pi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pi(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});KZt=Cc.range});function wZe(t,r,n,o,i,s){let a=[[_u,1,1e3],[_u,5,5*1e3],[_u,15,15*1e3],[_u,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=ZE(([,,y])=>y).right(a,p);if(h===a.length)return t.every(s_(c/31536e6,f/31536e6,d));if(h===0)return fm.every(Math.max(s_(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var Lhe,jhe,Bhe,$he,_Ze=N(()=>{"use strict";jp();Ihe();Dhe();Nhe();Mhe();Fhe();Ohe();Rhe();Phe();[Lhe,jhe]=wZe(Cc,hv,zp,Uq,f_,u_),[Bhe,$he]=wZe(Sc,pv,$p,pf,c_,l_)});var pj=N(()=>{"use strict";Ihe();Dhe();Nhe();Mhe();Fhe();Ohe();Rhe();Phe();_Ze()});function Vhe(t){return oT.setFullYear(t),oT.setMonth(0),oT.setDate(1),oT.setHours(0,0,0,0),oT}function tQt(t){return pf.count(Vhe(t.getFullYear())-1,t)}function SZe(t){return $p.count(Vhe(t.getFullYear())-1,t)}function zhe(t){return Vhe(t).getDay()}function rQt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Bp.count(r-1,t)}function CZe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return zp.count(r-1,t)}function Uhe(t){return oT.setTime(Date.UTC(t,0,1)),oT.getUTCDay()}function MN(t,r,n){return r+t*7-(n+6)%7}function Ghe(t){return nQt[t]}function Whe(t){return oQt[t]}var Ec,mm,Md,hf,dm,dy,FN,pm,hm,py,mv,eQt,Yko,Xko,oT,Kko,Zko,Qko,Jko,nQt,oQt,hj,mj,gj,Vq,iQt,EZe,sQt,aQt,yj,bj,xj,lQt,uQt,TZe,cQt,eIo,qhe=N(()=>{"use strict";HE();pj();Ec="year",mm="quarter",Md="month",hf="week",dm="date",dy="day",FN="dayofyear",pm="hours",hm="minutes",py="seconds",mv="milliseconds",eQt=[Ec,mm,Md,hf,dm,dy,FN,pm,hm,py,mv],Yko=eQt.reduce((t,r,n)=>(t[r]=1+n,t),{}),Xko={[Ec]:"%Y ",[mm]:"Q%q ",[Md]:"%b ",[dm]:"%d ",[hf]:"W%U ",[dy]:"%a ",[FN]:"%j ",[pm]:"%H:00",[hm]:"00:%M",[py]:":%S",[mv]:".%L",[`${Ec}-${Md}`]:"%Y-%m ",[`${Ec}-${Md}-${dm}`]:"%Y-%m-%d ",[`${pm}-${hm}`]:"%H:%M"},oT=new Date;Kko={[Ec]:t=>t.getFullYear(),[mm]:t=>Math.floor(t.getMonth()/3),[Md]:t=>t.getMonth(),[dm]:t=>t.getDate(),[pm]:t=>t.getHours(),[hm]:t=>t.getMinutes(),[py]:t=>t.getSeconds(),[mv]:t=>t.getMilliseconds(),[FN]:t=>tQt(t),[hf]:t=>SZe(t),[hf+dy]:(t,r)=>MN(SZe(t),t.getDay(),zhe(r)),[dy]:(t,r)=>MN(1,t.getDay(),zhe(r))},Zko={[mm]:t=>3*t,[hf]:(t,r)=>MN(t,0,zhe(r))},Qko={[Ec]:t=>t.getUTCFullYear(),[mm]:t=>Math.floor(t.getUTCMonth()/3),[Md]:t=>t.getUTCMonth(),[dm]:t=>t.getUTCDate(),[pm]:t=>t.getUTCHours(),[hm]:t=>t.getUTCMinutes(),[py]:t=>t.getUTCSeconds(),[mv]:t=>t.getUTCMilliseconds(),[FN]:t=>rQt(t),[hf]:t=>CZe(t),[dy]:(t,r)=>MN(1,t.getUTCDay(),Uhe(r)),[hf+dy]:(t,r)=>MN(CZe(t),t.getUTCDay(),Uhe(r))},Jko={[mm]:t=>3*t,[hf]:(t,r)=>MN(t,0,Uhe(r))},nQt={[Ec]:Sc,[mm]:pv.every(3),[Md]:pv,[hf]:$p,[dm]:pf,[dy]:pf,[FN]:pf,[pm]:c_,[hm]:l_,[py]:_u,[mv]:fm},oQt={[Ec]:Cc,[mm]:hv.every(3),[Md]:hv,[hf]:zp,[dm]:Bp,[dy]:Bp,[FN]:Bp,[pm]:f_,[hm]:u_,[py]:_u,[mv]:fm};hj=1e3,mj=hj*60,gj=mj*60,Vq=gj*24,iQt=Vq*7,EZe=Vq*30,sQt=Vq*365,aQt=[Ec,Md,dm,pm,hm,py,mv],yj=aQt.slice(0,-1),bj=yj.slice(0,-1),xj=bj.slice(0,-1),lQt=xj.slice(0,-1),uQt=[Ec,hf],TZe=[Ec,Md],cQt=[Ec],eIo=[[yj,1,hj],[yj,5,5*hj],[yj,15,15*hj],[yj,30,30*hj],[bj,1,mj],[bj,5,5*mj],[bj,15,15*mj],[bj,30,30*mj],[xj,1,gj],[xj,3,3*gj],[xj,6,6*gj],[xj,12,12*gj],[lQt,1,Vq],[uQt,1,iQt],[TZe,1,EZe],[TZe,3,3*EZe],[cQt,1,sQt]]});function Hhe(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yhe(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vj(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function Gq(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=wj(i),f=_j(i),d=wj(s),p=_j(s),h=wj(a),m=_j(a),g=wj(l),y=_j(l),b=wj(u),x=_j(u),v={a:V,A:G,b:U,B:H,c:null,d:MZe,e:MZe,f:FQt,g:VQt,G:WQt,H:DQt,I:NQt,j:MQt,L:LZe,m:OQt,M:RQt,p:X,q:fe,Q:RZe,s:PZe,S:PQt,u:LQt,U:jQt,V:BQt,w:$Qt,W:zQt,x:null,X:null,y:UQt,Y:GQt,Z:qQt,"%":OZe},w={a:$,A:M,b:z,B:q,c:null,d:FZe,e:FZe,f:KQt,g:sJt,G:lJt,H:HQt,I:YQt,j:XQt,L:BZe,m:ZQt,M:QQt,p:ee,q:ae,Q:RZe,s:PZe,S:JQt,u:eJt,U:tJt,V:rJt,w:nJt,W:oJt,x:null,X:null,y:iJt,Y:aJt,Z:uJt,"%":OZe},_={a:I,A:k,b:F,B:D,c:L,d:DZe,e:DZe,f:TQt,g:IZe,G:kZe,H:NZe,I:NZe,j:_Qt,L:EQt,m:wQt,M:SQt,p:T,q:vQt,Q:kQt,s:IQt,S:CQt,u:mQt,U:gQt,V:yQt,w:hQt,W:bQt,x:P,X:R,y:IZe,Y:kZe,Z:xQt,"%":AQt};v.x=S(n,v),v.X=S(o,v),v.c=S(r,v),w.x=S(n,w),w.X=S(o,w),w.c=S(r,w);function S(Q,le){return function(ie){var K=[],ge=-1,ne=0,ye=Q.length,xe,De,Te;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(K.push(Q.slice(ne,ge)),(De=AZe[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):De=xe==="e"?" ":"0",(Te=le[xe])&&(xe=Te(ie,De)),K.push(xe),ne=ge+1);return K.push(Q.slice(ne,ge)),K.join("")}}function C(Q,le){return function(ie){var K=vj(1900,void 0,1),ge=E(K,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ne=Yhe(vj(K.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?NN.ceil(ne):NN(ne),ne=Bp.offset(ne,(K.V-1)*7),K.y=ne.getUTCFullYear(),K.m=ne.getUTCMonth(),K.d=ne.getUTCDate()+(K.w+6)%7):(ne=Hhe(vj(K.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?DN.ceil(ne):DN(ne),ne=pf.offset(ne,(K.V-1)*7),K.y=ne.getFullYear(),K.m=ne.getMonth(),K.d=ne.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),ye="Z"in K?Yhe(vj(K.y,0,1)).getUTCDay():Hhe(vj(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(ye+5)%7:K.w+K.U*7-(ye+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Yhe(K)):Hhe(K)}}function E(Q,le,ie,K){for(var ge=0,ne=le.length,ye=ie.length,xe,De;ge<ne;){if(K>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),De=_[xe in AZe?le.charAt(ge++):xe],!De||(K=De(Q,ie,K))<0)return-1}else if(xe!=ie.charCodeAt(K++))return-1}return K}function T(Q,le,ie){var K=c.exec(le.slice(ie));return K?(Q.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function I(Q,le,ie){var K=h.exec(le.slice(ie));return K?(Q.w=m.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(Q,le,ie){var K=d.exec(le.slice(ie));return K?(Q.w=p.get(K[0].toLowerCase()),ie+K[0].length):-1}function F(Q,le,ie){var K=b.exec(le.slice(ie));return K?(Q.m=x.get(K[0].toLowerCase()),ie+K[0].length):-1}function D(Q,le,ie){var K=g.exec(le.slice(ie));return K?(Q.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function fe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function M(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=S(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=C(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=S(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=C(Q+="",!0);return le.toString=function(){return Q},le}}}function uo(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function pQt(t){return t.replace(dQt,"\\$&")}function wj(t){return new RegExp("^(?:"+t.map(pQt).join("|")+")","i")}function _j(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function hQt(t,r,n){var o=ol.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function mQt(t,r,n){var o=ol.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function gQt(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function yQt(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function bQt(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function kZe(t,r,n){var o=ol.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function IZe(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function xQt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function vQt(t,r,n){var o=ol.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function wQt(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function DZe(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function _Qt(t,r,n){var o=ol.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function NZe(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function SQt(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function CQt(t,r,n){var o=ol.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function EQt(t,r,n){var o=ol.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function TQt(t,r,n){var o=ol.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function AQt(t,r,n){var o=fQt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function kQt(t,r,n){var o=ol.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function IQt(t,r,n){var o=ol.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function MZe(t,r){return uo(t.getDate(),r,2)}function DQt(t,r){return uo(t.getHours(),r,2)}function NQt(t,r){return uo(t.getHours()%12||12,r,2)}function MQt(t,r){return uo(1+pf.count(Sc(t),t),r,3)}function LZe(t,r){return uo(t.getMilliseconds(),r,3)}function FQt(t,r){return LZe(t,r)+"000"}function OQt(t,r){return uo(t.getMonth()+1,r,2)}function RQt(t,r){return uo(t.getMinutes(),r,2)}function PQt(t,r){return uo(t.getSeconds(),r,2)}function LQt(t){var r=t.getDay();return r===0?7:r}function jQt(t,r){return uo($p.count(Sc(t)-1,t),r,2)}function jZe(t){var r=t.getDay();return r>=4||r===0?d_(t):d_.ceil(t)}function BQt(t,r){return t=jZe(t),uo(d_.count(Sc(t),t)+(Sc(t).getDay()===4),r,2)}function $Qt(t){return t.getDay()}function zQt(t,r){return uo(DN.count(Sc(t)-1,t),r,2)}function UQt(t,r){return uo(t.getFullYear()%100,r,2)}function VQt(t,r){return t=jZe(t),uo(t.getFullYear()%100,r,2)}function GQt(t,r){return uo(t.getFullYear()%1e4,r,4)}function WQt(t,r){var n=t.getDay();return t=n>=4||n===0?d_(t):d_.ceil(t),uo(t.getFullYear()%1e4,r,4)}function qQt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+uo(r/60|0,"0",2)+uo(r%60,"0",2)}function FZe(t,r){return uo(t.getUTCDate(),r,2)}function HQt(t,r){return uo(t.getUTCHours(),r,2)}function YQt(t,r){return uo(t.getUTCHours()%12||12,r,2)}function XQt(t,r){return uo(1+Bp.count(Cc(t),t),r,3)}function BZe(t,r){return uo(t.getUTCMilliseconds(),r,3)}function KQt(t,r){return BZe(t,r)+"000"}function ZQt(t,r){return uo(t.getUTCMonth()+1,r,2)}function QQt(t,r){return uo(t.getUTCMinutes(),r,2)}function JQt(t,r){return uo(t.getUTCSeconds(),r,2)}function eJt(t){var r=t.getUTCDay();return r===0?7:r}function tJt(t,r){return uo(zp.count(Cc(t)-1,t),r,2)}function $Ze(t){var r=t.getUTCDay();return r>=4||r===0?p_(t):p_.ceil(t)}function rJt(t,r){return t=$Ze(t),uo(p_.count(Cc(t),t)+(Cc(t).getUTCDay()===4),r,2)}function nJt(t){return t.getUTCDay()}function oJt(t,r){return uo(NN.count(Cc(t)-1,t),r,2)}function iJt(t,r){return uo(t.getUTCFullYear()%100,r,2)}function sJt(t,r){return t=$Ze(t),uo(t.getUTCFullYear()%100,r,2)}function aJt(t,r){return uo(t.getUTCFullYear()%1e4,r,4)}function lJt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?p_(t):p_.ceil(t),uo(t.getUTCFullYear()%1e4,r,4)}function uJt(){return"+0000"}function OZe(){return"%"}function RZe(t){return+t}function PZe(t){return Math.floor(+t/1e3)}var AZe,ol,fQt,dQt,zZe=N(()=>{"use strict";pj();AZe={"-":"",_:" ",0:"0"},ol=/^\s*\d+/,fQt=/^%/,dQt=/[\\^$*+?|[\]().{}]/g});function Xhe(t){return ON=Gq(t),RN=ON.format,Wq=ON.parse,PN=ON.utcFormat,qq=ON.utcParse,ON}var ON,RN,Wq,PN,qq,UZe=N(()=>{"use strict";zZe();Xhe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var Hq=N(()=>{"use strict";UZe()});function Sj(t){let r={};return n=>r[n]||(r[n]=t(n))}function cJt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=fJt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function fJt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function dJt(t){let r=Sj(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Nd(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return cJt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Nd(a??",f");let l=s_(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=cj(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=fj(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=uj(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function hJt(){return pJt=dJt({format:a_,formatPrefix:IN})}function VZe(t,r,n){n=n||{},lv(n)||wu(`Invalid time multi-format specifier: ${n}`);let o=r(py),i=r(hm),s=r(pm),a=r(dm),l=r(hf),u=r(Md),c=r(mm),f=r(Ec),d=t(n[mv]||".%L"),p=t(n[py]||":%S"),h=t(n[hm]||"%I:%M"),m=t(n[pm]||"%I %p"),g=t(n[dm]||n[dy]||"%a %d"),y=t(n[hf]||"%b %d"),b=t(n[Md]||"%B"),x=t(n[mm]||"%B"),v=t(n[Ec]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function mJt(t){let r=Sj(t.format),n=Sj(t.utcFormat);return{timeFormat:o=>EN(o)?r(o):VZe(r,Ghe,o),utcFormat:o=>EN(o)?n(o):VZe(n,Whe,o),timeParse:Sj(t.parse),utcParse:Sj(t.utcParse)}}function yJt(){return gJt=mJt({format:RN,parse:Wq,utcFormat:PN,utcParse:qq})}var pJt,gJt,GZe=N(()=>{"use strict";jp();zq();qhe();HE();Hq();hJt();yJt()});function wJt(t,r){return n=>({options:n||{},sanitize:SJt,load:_Jt,fileAccess:!!r,file:CJt(r),http:TJt(t)})}function _Jt(t,r){return je(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function SJt(t,r){return je(this,null,function*(){r=uv({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=xJt.test(t.replace(vJt,""));(t==null||typeof t!="string"||!l)&&wu("Sanitize failure, invalid URI: "+bq(t));let u=bJt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(WZe))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(WZe.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function CJt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):EJt}function EJt(){return je(this,null,function*(){wu("No file system access.")})}function TJt(t){return t?function(r,n){return je(this,null,function*(){let o=uv({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?r_(s[i])?s[i]():s.text():wu(s.status+""+s.statusText)})}:AJt}function AJt(){return je(this,null,function*(){wu("No HTTP fetch method available.")})}function qZe(t){let r=function(n,o){let i={delimiter:t};return Khe(n,o?uv(o,i):i)};return r.responseType="text",r}function Khe(t,r){return r.header&&(t=r.header.map(bq).join(r.delimiter)+`
`+t),hhe(r.delimiter).parse(t+"")}function kJt(t){return typeof Buffer=="function"&&r_(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Zhe(t,r){let n=r&&r.property?Fpe(r.property):XXe;return lv(t)&&!kJt(t)?IJt(n(t),r):n(JSON.parse(t))}function IJt(t,r){return!_c(t)&&KXe(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function HZe(t,r){let n,o,i,s;return t=Zhe(t,r),r&&r.feature?(n=TE,i=r.feature):r&&r.mesh?(n=AE,i=r.mesh,s=DJt[r.filter]):wu("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):wu("Invalid TopoJSON object: "+i),o&&o.features||[o]}var bJt,xJt,vJt,WZe,DJt,_Io,Qhe,YZe=N(()=>{"use strict";HE();PKe();vW();GZe();bJt=/^(data:|([A-Za-z]+:)?\/\/)/,xJt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,vJt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,WZe="file://";Khe.responseType="text";Zhe.responseType="json";DJt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};HZe.responseType="json";_Io={dsv:Khe,csv:qZe(","),tsv:qZe("	"),json:Zhe,topojson:HZe},Qhe=wJt(typeof fetch<"u"&&fetch,null)});function da(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function hy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var Fd=N(()=>{"use strict"});function iT(){var t=new Z0,r=[],n=[],o=Jhe;function i(s){let a=t.get(s);if(a===void 0){if(o!==Jhe)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Z0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return iT(r,n).unknown(o)},da.apply(i,arguments),i}var Jhe,XZe=N(()=>{"use strict";jp();Fd();Jhe=Symbol("implicit")});function gv(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function h_(t,r){var n=Object.create(t.prototype);for(var o in r)n[o]=r[o];return n}var Yq=N(()=>{"use strict"});function yy(){}function ZZe(){return this.rgb().formatHex()}function jJt(){return nQe(this).formatHsl()}function QZe(){return this.rgb().formatRgb()}function mf(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=NJt.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?JZe(r):n===3?new Ma(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Xq(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Xq(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=MJt.exec(t))?new Ma(r[1],r[2],r[3],1):(r=FJt.exec(t))?new Ma(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=OJt.exec(t))?Xq(r[1],r[2],r[3],r[4]):(r=RJt.exec(t))?Xq(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=PJt.exec(t))?rQe(r[1],r[2]/100,r[3]/100,1):(r=LJt.exec(t))?rQe(r[1],r[2]/100,r[3]/100,r[4]):KZe.hasOwnProperty(t)?JZe(KZe[t]):t==="transparent"?new Ma(NaN,NaN,NaN,0):null}function JZe(t){return new Ma(t>>16&255,t>>8&255,t&255,1)}function Xq(t,r,n,o){return o<=0&&(t=r=n=NaN),new Ma(t,r,n,o)}function Ej(t){return t instanceof yy||(t=mf(t)),t?(t=t.rgb(),new Ma(t.r,t.g,t.b,t.opacity)):new Ma}function pa(t,r,n,o){return arguments.length===1?Ej(t):new Ma(t,r,n,o??1)}function Ma(t,r,n,o){this.r=+t,this.g=+r,this.b=+n,this.opacity=+o}function eQe(){return"#"+eme(this.r)+eme(this.g)+eme(this.b)}function tQe(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function eme(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function rQe(t,r,n,o){return o<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new my(t,r,n,o)}function nQe(t){if(t instanceof my)return new my(t.h,t.s,t.l,t.opacity);if(t instanceof yy||(t=mf(t)),!t)return new my;if(t instanceof my)return t;t=t.rgb();var r=t.r/255,n=t.g/255,o=t.b/255,i=Math.min(r,n,o),s=Math.max(r,n,o),a=NaN,l=s-i,u=(s+i)/2;return l?(r===s?a=(n-o)/l+(n<o)*6:n===s?a=(o-r)/l+2:a=(r-n)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new my(a,l,u,t.opacity)}function Od(t,r,n,o){return arguments.length===1?nQe(t):new my(t,r,n,o??1)}function my(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}function tme(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}var m_,sT,LN,Cj,gy,NJt,MJt,FJt,OJt,RJt,PJt,LJt,KZe,Kq=N(()=>{"use strict";Yq();m_=.7,sT=1/m_,LN="\\s*([+-]?\\d+)\\s*",Cj="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",gy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NJt=/^#([0-9a-f]{3,8})$/,MJt=new RegExp("^rgb\\("+[LN,LN,LN]+"\\)$"),FJt=new RegExp("^rgb\\("+[gy,gy,gy]+"\\)$"),OJt=new RegExp("^rgba\\("+[LN,LN,LN,Cj]+"\\)$"),RJt=new RegExp("^rgba\\("+[gy,gy,gy,Cj]+"\\)$"),PJt=new RegExp("^hsl\\("+[Cj,gy,gy]+"\\)$"),LJt=new RegExp("^hsla\\("+[Cj,gy,gy,Cj]+"\\)$"),KZe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gv(yy,mf,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ZZe,formatHex:ZZe,formatHsl:jJt,formatRgb:QZe,toString:QZe});gv(Ma,pa,h_(yy,{brighter:function(t){return t=t==null?sT:Math.pow(sT,t),new Ma(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?m_:Math.pow(m_,t),new Ma(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eQe,formatHex:eQe,formatRgb:tQe,toString:tQe}));gv(my,Od,h_(yy,{brighter:function(t){return t=t==null?sT:Math.pow(sT,t),new my(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?m_:Math.pow(m_,t),new my(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*r,i=2*n-o;return new Ma(tme(t>=240?t-240:t+120,i,o),tme(t,i,o),tme(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}))});var Zq,Qq,rme=N(()=>{"use strict";Zq=Math.PI/180,Qq=180/Math.PI});function uQe(t){if(t instanceof by)return new by(t.l,t.a,t.b,t.opacity);if(t instanceof yv)return cQe(t);t instanceof Ma||(t=Ej(t));var r=sme(t.r),n=sme(t.g),o=sme(t.b),i=nme((.2225045*r+.7168786*n+.0606169*o)/iQe),s,a;return r===n&&n===o?s=a=i:(s=nme((.4360747*r+.3850649*n+.1430804*o)/oQe),a=nme((.0139322*r+.0971045*n+.7141733*o)/sQe)),new by(116*i-16,500*(s-i),200*(i-a),t.opacity)}function gf(t,r,n,o){return arguments.length===1?uQe(t):new by(t,r,n,o??1)}function by(t,r,n,o){this.l=+t,this.a=+r,this.b=+n,this.opacity=+o}function nme(t){return t>BJt?Math.pow(t,1/3):t/lQe+aQe}function ome(t){return t>jN?t*t*t:lQe*(t-aQe)}function ime(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function sme(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $Jt(t){if(t instanceof yv)return new yv(t.h,t.c,t.l,t.opacity);if(t instanceof by||(t=uQe(t)),t.a===0&&t.b===0)return new yv(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var r=Math.atan2(t.b,t.a)*Qq;return new yv(r<0?r+360:r,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Rd(t,r,n,o){return arguments.length===1?$Jt(t):new yv(t,r,n,o??1)}function yv(t,r,n,o){this.h=+t,this.c=+r,this.l=+n,this.opacity=+o}function cQe(t){if(isNaN(t.h))return new by(t.l,0,0,t.opacity);var r=t.h*Zq;return new by(t.l,Math.cos(r)*t.c,Math.sin(r)*t.c,t.opacity)}var Jq,oQe,iQe,sQe,aQe,jN,lQe,BJt,fQe=N(()=>{"use strict";Yq();Kq();rme();Jq=18,oQe=.96422,iQe=1,sQe=.82521,aQe=4/29,jN=6/29,lQe=3*jN*jN,BJt=jN*jN*jN;gv(by,gf,h_(yy,{brighter:function(t){return new by(this.l+Jq*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new by(this.l-Jq*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return r=oQe*ome(r),t=iQe*ome(t),n=sQe*ome(n),new Ma(ime(3.1338561*r-1.6168667*t-.4906146*n),ime(-.9787684*r+1.9161415*t+.033454*n),ime(.0719453*r-.2289914*t+1.4052427*n),this.opacity)}}));gv(yv,Rd,h_(yy,{brighter:function(t){return new yv(this.h,this.c,this.l+Jq*(t??1),this.opacity)},darker:function(t){return new yv(this.h,this.c,this.l-Jq*(t??1),this.opacity)},rgb:function(){return cQe(this).rgb()}}))});function zJt(t){if(t instanceof aT)return new aT(t.h,t.s,t.l,t.opacity);t instanceof Ma||(t=Ej(t));var r=t.r/255,n=t.g/255,o=t.b/255,i=(hQe*o+dQe*r-pQe*n)/(hQe+dQe-pQe),s=o-i,a=(Tj*(n-i)-lme*s)/eH,l=Math.sqrt(a*a+s*s)/(Tj*i*(1-i)),u=l?Math.atan2(a,s)*Qq-120:NaN;return new aT(u<0?u+360:u,l,i,t.opacity)}function Up(t,r,n,o){return arguments.length===1?zJt(t):new aT(t,r,n,o??1)}function aT(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}var mQe,ame,lme,eH,Tj,dQe,pQe,hQe,gQe=N(()=>{"use strict";Yq();Kq();rme();mQe=-.14861,ame=1.78277,lme=-.29227,eH=-.90649,Tj=1.97294,dQe=Tj*eH,pQe=Tj*ame,hQe=ame*lme-eH*mQe;gv(aT,Up,h_(yy,{brighter:function(t){return t=t==null?sT:Math.pow(sT,t),new aT(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?m_:Math.pow(m_,t),new aT(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Zq,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),o=Math.cos(t),i=Math.sin(t);return new Ma(255*(r+n*(mQe*o+ame*i)),255*(r+n*(lme*o+eH*i)),255*(r+n*(Tj*o)),this.opacity)}}))});var js=N(()=>{"use strict";Kq();fQe();gQe()});function ume(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function tH(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return ume((n-o/r)*r,a,i,s,l)}}var rH=N(()=>{"use strict"});function nH(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return ume((n-o/r)*r,i,s,a,l)}}var cme=N(()=>{"use strict";rH()});var BN,fme=N(()=>{"use strict";BN=t=>()=>t});function yQe(t,r){return function(n){return t+n*r}}function UJt(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function g_(t,r){var n=r-t;return n?yQe(t,n>180||n<-180?n-360*Math.round(n/360):n):BN(isNaN(t)?r:t)}function bQe(t){return(t=+t)==1?Xi:function(r,n){return n-r?UJt(r,n,t):BN(isNaN(r)?n:r)}}function Xi(t,r){var n=r-t;return n?yQe(t,n):BN(isNaN(t)?r:t)}var lT=N(()=>{"use strict";fme()});function xQe(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=pa(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var Aj,vQe,wQe,dme=N(()=>{"use strict";js();rH();cme();lT();Aj=function t(r){var n=bQe(r);function o(i,s){var a=n((i=pa(i)).r,(s=pa(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Xi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);vQe=xQe(tH),wQe=xQe(nH)});function $N(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function oH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var iH=N(()=>{"use strict"});function _Qe(t,r){return(oH(r)?$N:pme)(t,r)}function pme(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=yf(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var hme=N(()=>{"use strict";kj();iH()});function sH(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var mme=N(()=>{"use strict"});function Su(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Ij=N(()=>{"use strict"});function aH(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=yf(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var gme=N(()=>{"use strict";kj()});function VJt(t){return function(){return t}}function GJt(t){return function(r){return t(r)+""}}function lH(t,r){var n=bme.lastIndex=yme.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=bme.exec(t))&&(i=yme.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Su(o,i)})),n=yme.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?GJt(u[0].x):VJt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var bme,yme,xme=N(()=>{"use strict";Ij();bme=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yme=new RegExp(bme.source,"g")});function yf(t,r){var n=typeof r,o;return r==null||n==="boolean"?BN(r):(n==="number"?Su:n==="string"?(o=mf(r))?(r=o,Aj):lH:r instanceof mf?Aj:r instanceof Date?sH:oH(r)?$N:Array.isArray(r)?pme:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?aH:Su)(t,r)}var kj=N(()=>{"use strict";js();dme();hme();mme();Ij();gme();xme();fme();iH()});function SQe(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var CQe=N(()=>{"use strict"});function EQe(t,r){var n=g_(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var TQe=N(()=>{"use strict";lT()});function y_(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var AQe=N(()=>{"use strict"});function vme(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*kQe,skewX:Math.atan(u)*kQe,scaleX:a,scaleY:l}}var kQe,uH,IQe=N(()=>{"use strict";kQe=180/Math.PI,uH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function DQe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?uH:vme(r.a,r.b,r.c,r.d,r.e,r.f)}function NQe(t){return t==null?uH:(cH||(cH=document.createElementNS("http://www.w3.org/2000/svg","g")),cH.setAttribute("transform",t),(t=cH.transform.baseVal.consolidate())?(t=t.matrix,vme(t.a,t.b,t.c,t.d,t.e,t.f)):uH)}var cH,MQe=N(()=>{"use strict";IQe()});function FQe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:Su(c,d)},{i:g-2,x:Su(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:Su(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:Su(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:Su(c,d)},{i:g-2,x:Su(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var OQe,RQe,PQe=N(()=>{"use strict";Ij();MQe();OQe=FQe(DQe,"px, ","px)","deg)"),RQe=FQe(NQe,", ",")",")")});function LQe(t){return((t=Math.exp(t))+1/t)/2}function qJt(t){return((t=Math.exp(t))-1/t)/2}function HJt(t){return((t=Math.exp(2*t))-1)/(t+1)}var WJt,jQe,BQe=N(()=>{"use strict";WJt=1e-12;jQe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<WJt)b=Math.log(p/c)/r,y=function(C){return[l+C*h,u+C*m,c*Math.exp(r*C*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);b=(S-_)/r,y=function(C){var E=C*b,T=LQe(_),I=c/(n*x)*(T*HJt(r*E+_)-qJt(_));return[l+I*h,u+I*m,c*T/LQe(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function $Qe(t){return function(r,n){var o=t((r=Od(r)).h,(n=Od(n)).h),i=Xi(r.s,n.s),s=Xi(r.l,n.l),a=Xi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var zQe,UQe,VQe=N(()=>{"use strict";js();lT();zQe=$Qe(g_),UQe=$Qe(Xi)});function wme(t,r){var n=Xi((t=gf(t)).l,(r=gf(r)).l),o=Xi(t.a,r.a),i=Xi(t.b,r.b),s=Xi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var GQe=N(()=>{"use strict";js();lT()});function WQe(t){return function(r,n){var o=t((r=Rd(r)).h,(n=Rd(n)).h),i=Xi(r.c,n.c),s=Xi(r.l,n.l),a=Xi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var qQe,HQe,YQe=N(()=>{"use strict";js();lT();qQe=WQe(g_),HQe=WQe(Xi)});function XQe(t){return function r(n){n=+n;function o(i,s){var a=t((i=Up(i)).h,(s=Up(s)).h),l=Xi(i.s,s.s),u=Xi(i.l,s.l),c=Xi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var KQe,ZQe,QQe=N(()=>{"use strict";js();lT();KQe=XQe(g_),ZQe=XQe(Xi)});function uT(t,r){r===void 0&&(r=t,t=yf);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var JQe=N(()=>{"use strict";kj()});function eJe(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var tJe=N(()=>{"use strict"});var _me={};fn(_me,{interpolate:()=>yf,interpolateArray:()=>_Qe,interpolateBasis:()=>tH,interpolateBasisClosed:()=>nH,interpolateCubehelix:()=>KQe,interpolateCubehelixLong:()=>ZQe,interpolateDate:()=>sH,interpolateDiscrete:()=>SQe,interpolateHcl:()=>qQe,interpolateHclLong:()=>HQe,interpolateHsl:()=>zQe,interpolateHslLong:()=>UQe,interpolateHue:()=>EQe,interpolateLab:()=>wme,interpolateNumber:()=>Su,interpolateNumberArray:()=>$N,interpolateObject:()=>aH,interpolateRgb:()=>Aj,interpolateRgbBasis:()=>vQe,interpolateRgbBasisClosed:()=>wQe,interpolateRound:()=>y_,interpolateString:()=>lH,interpolateTransformCss:()=>OQe,interpolateTransformSvg:()=>RQe,interpolateZoom:()=>jQe,piecewise:()=>uT,quantize:()=>eJe});var Dj=N(()=>{"use strict";kj();hme();rH();cme();mme();CQe();TQe();Ij();iH();gme();AQe();xme();PQe();BQe();dme();VQe();GQe();YQe();QQe();JQe();tJe()});function Sme(t){return function(){return t}}var rJe=N(()=>{"use strict"});function zN(t){return+t}var Cme=N(()=>{"use strict"});function $l(t){return t}function Eme(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:Sme(isNaN(r)?NaN:.5)}function YJt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function XJt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=Eme(i,o),s=n(a,s)):(o=Eme(o,i),s=n(s,a)),function(l){return s(o(l))}}function KJt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=Eme(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=cm(t,l,1,o)-1;return s[u](i[u](l))}}function xy(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cT(){var t=nJe,r=nJe,n=yf,o,i,s,a=$l,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==$l&&(a=YJt(t[0],t[p-1])),l=p>2?KJt:XJt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),Su)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,zN),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=y_,f()},d.clamp=function(p){return arguments.length?(a=p?!0:$l,f()):a!==$l},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function Nj(){return cT()($l,$l)}var nJe,b_=N(()=>{"use strict";jp();Dj();rJe();Cme();nJe=[0,1]});function UN(t,r,n,o){var i=s_(t,r,n),s;switch(o=Nd(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=cj(i,a))&&(o.precision=s),IN(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=fj(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=uj(i))&&(o.precision=s-(o.type==="%")*2);break}}return a_(o)}var Tme=N(()=>{"use strict";jp();zq()});function Pd(t){var r=t.domain;return t.ticks=function(n){var o=r();return QE(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return UN(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=sj(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function Mj(){var t=Nj();return t.copy=function(){return xy(t,Mj())},da.apply(t,arguments),Pd(t)}var x_=N(()=>{"use strict";jp();b_();Fd();Tme()});function Fj(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,zN),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return Fj(t).unknown(r)},t=arguments.length?Array.from(t,zN):[0,1],Pd(n)}var oJe=N(()=>{"use strict";x_();Cme()});function Oj(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var Ame=N(()=>{"use strict"});function iJe(t){return Math.log(t)}function sJe(t){return Math.exp(t)}function ZJt(t){return-Math.log(-t)}function QJt(t){return-Math.exp(-t)}function JJt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eer(t){return t===10?JJt:t===Math.E?Math.exp:r=>Math.pow(t,r)}function ter(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function aJe(t){return(r,n)=>-t(-r,n)}function Rj(t){let r=t(iJe,sJe),n=r.domain,o=10,i,s;function a(){return i=ter(o),s=eer(o),n()[0]<0?(i=aJe(i),s=aJe(s),t(ZJt,QJt)):t(iJe,sJe),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),h=i(f),m,g,y=l==null?10:+l,b=[];if(!(o%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(m=1;m<o;++m)if(g=p<0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=h;++p)for(m=o-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=QE(c,f,y))}else b=QE(p,h,Math.min(h-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=Nd(u)).precision==null&&(u.trim=!0),u=a_(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(Oj(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function Pj(){let t=Rj(cT()).domain([1,10]);return t.copy=()=>xy(t,Pj()).base(t.base()),da.apply(t,arguments),t}var fH=N(()=>{"use strict";jp();zq();Ame();b_();Fd()});function lJe(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function uJe(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function Lj(t){var r=1,n=t(lJe(r),uJe(r));return n.constant=function(o){return arguments.length?t(lJe(r=+o),uJe(r)):r},Pd(n)}function jj(){var t=Lj(cT());return t.copy=function(){return xy(t,jj()).constant(t.constant())},da.apply(t,arguments)}var dH=N(()=>{"use strict";x_();b_();Fd()});function cJe(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function rer(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ner(t){return t<0?-t*t:t*t}function Bj(t){var r=t($l,$l),n=1;function o(){return n===1?t($l,$l):n===.5?t(rer,ner):t(cJe(n),cJe(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},Pd(r)}function VN(){var t=Bj(cT());return t.copy=function(){return xy(t,VN()).exponent(t.exponent())},da.apply(t,arguments),t}function kme(){return VN.apply(null,arguments).exponent(.5)}var pH=N(()=>{"use strict";x_();b_();Fd()});function $j(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=bhe(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[cm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(uy),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return $j().domain(t).range(r).unknown(o)},da.apply(s,arguments)}var fJe=N(()=>{"use strict";jp();Fd()});function zj(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[cm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return zj().domain([t,r]).range(i).unknown(s)},da.apply(Pd(a),arguments)}var dJe=N(()=>{"use strict";jp();x_();Fd()});function Uj(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[cm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Uj().domain(t).range(r).unknown(n)},da.apply(i,arguments)}var pJe=N(()=>{"use strict";jp();Fd()});function oer(t){return new Date(t)}function ier(t){return t instanceof Date?+t:+new Date(+t)}function hH(t,r,n,o,i,s,a,l,u,c){var f=Nj(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(S){return(u(S)<S?h:l(S)<S?m:a(S)<S?g:s(S)<S?y:o(S)<S?i(S)<S?b:x:n(S)<S?v:w)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,ier)):p().map(oer)},f.ticks=function(S){var C=p();return t(C[0],C[C.length-1],S??10)},f.tickFormat=function(S,C){return C==null?_:c(C)},f.nice=function(S){var C=p();return(!S||typeof S.range!="function")&&(S=r(C[0],C[C.length-1],S??10)),S?p(Oj(C,S)):f},f.copy=function(){return xy(f,hH(t,r,n,o,i,s,a,l,u,c))},f}function mH(){return da.apply(hH(Bhe,$he,Sc,pv,$p,pf,c_,l_,_u,RN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Ime=N(()=>{"use strict";pj();Hq();b_();Fd();Ame()});function gH(){return da.apply(hH(Lhe,jhe,Cc,hv,zp,Bp,f_,u_,_u,PN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var hJe=N(()=>{"use strict";pj();Hq();Ime();Fd()});function yH(){var t=0,r=1,n,o,i,s,a=$l,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(yf),c.rangeRound=f(y_),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function bv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function GN(){var t=Pd(yH()($l));return t.copy=function(){return bv(t,GN())},hy.apply(t,arguments)}function bH(){var t=Rj(yH()).domain([1,10]);return t.copy=function(){return bv(t,bH()).base(t.base())},hy.apply(t,arguments)}function xH(){var t=Lj(yH());return t.copy=function(){return bv(t,xH()).constant(t.constant())},hy.apply(t,arguments)}function Vj(){var t=Bj(yH());return t.copy=function(){return bv(t,Vj()).exponent(t.exponent())},hy.apply(t,arguments)}function Dme(){return Vj.apply(null,arguments).exponent(.5)}var Nme=N(()=>{"use strict";Dj();b_();Fd();x_();fH();dH();pH()});function vH(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=$l,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=uT(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(yf),h.rangeRound=m(y_),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function Gj(){var t=Pd(vH()($l));return t.copy=function(){return bv(t,Gj())},hy.apply(t,arguments)}function wH(){var t=Rj(vH()).domain([.1,1,10]);return t.copy=function(){return bv(t,wH()).base(t.base())},hy.apply(t,arguments)}function _H(){var t=Lj(vH());return t.copy=function(){return bv(t,_H()).constant(t.constant())},hy.apply(t,arguments)}function Wj(){var t=Bj(vH());return t.copy=function(){return bv(t,Wj()).exponent(t.exponent())},hy.apply(t,arguments)}function Mme(){return Wj.apply(null,arguments).exponent(.5)}var mJe=N(()=>{"use strict";Dj();b_();Fd();x_();fH();Nme();dH();pH()});var Fme=N(()=>{"use strict";oJe();x_();fH();dH();XZe();pH();fJe();dJe();pJe();Ime();hJe();Nme();mJe();Tme()});function ha(t){for(var r=t.length/6|0,n=new Array(r),o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}var gm=N(()=>{"use strict"});var qj,gJe=N(()=>{"use strict";gm();qj=ha("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")});var Hj,yJe=N(()=>{"use strict";gm();Hj=ha("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")});var Yj,bJe=N(()=>{"use strict";gm();Yj=ha("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")});var Xj,xJe=N(()=>{"use strict";gm();Xj=ha("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0")});var Kj,vJe=N(()=>{"use strict";gm();Kj=ha("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")});var Zj,wJe=N(()=>{"use strict";gm();Zj=ha("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")});var Qj,_Je=N(()=>{"use strict";gm();Qj=ha("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")});var Jj,SJe=N(()=>{"use strict";gm();Jj=ha("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")});var e4,CJe=N(()=>{"use strict";gm();e4=ha("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")});var t4,EJe=N(()=>{"use strict";gm();t4=ha("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")});function Ome(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function SH(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return Ome((n-o/r)*r,a,i,s,l)}}var CH=N(()=>{"use strict"});function EH(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return Ome((n-o/r)*r,i,s,a,l)}}var Rme=N(()=>{"use strict";CH()});var WN,Pme=N(()=>{"use strict";WN=t=>()=>t});function TJe(t,r){return function(n){return t+n*r}}function aer(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function v_(t,r){var n=r-t;return n?TJe(t,n>180||n<-180?n-360*Math.round(n/360):n):WN(isNaN(t)?r:t)}function AJe(t){return(t=+t)==1?Ki:function(r,n){return n-r?aer(r,n,t):WN(isNaN(r)?n:r)}}function Ki(t,r){var n=r-t;return n?TJe(t,n):WN(isNaN(t)?r:t)}var fT=N(()=>{"use strict";Pme()});function kJe(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=pa(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var r4,IJe,DJe,Lme=N(()=>{"use strict";js();CH();Rme();fT();r4=function t(r){var n=AJe(r);function o(i,s){var a=n((i=pa(i)).r,(s=pa(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Ki(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);IJe=kJe(SH),DJe=kJe(EH)});function qN(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function TH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var AH=N(()=>{"use strict"});function NJe(t,r){return(TH(r)?qN:jme)(t,r)}function jme(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=Cu(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var Bme=N(()=>{"use strict";n4();AH()});function kH(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var $me=N(()=>{"use strict"});function Eu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var o4=N(()=>{"use strict"});function IH(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=Cu(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var zme=N(()=>{"use strict";n4()});function ler(t){return function(){return t}}function uer(t){return function(r){return t(r)+""}}function DH(t,r){var n=Vme.lastIndex=Ume.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=Vme.exec(t))&&(i=Ume.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Eu(o,i)})),n=Ume.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?uer(u[0].x):ler(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var Vme,Ume,Gme=N(()=>{"use strict";o4();Vme=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ume=new RegExp(Vme.source,"g")});function Cu(t,r){var n=typeof r,o;return r==null||n==="boolean"?WN(r):(n==="number"?Eu:n==="string"?(o=mf(r))?(r=o,r4):DH:r instanceof mf?r4:r instanceof Date?kH:TH(r)?qN:Array.isArray(r)?jme:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?IH:Eu)(t,r)}var n4=N(()=>{"use strict";js();Lme();Bme();$me();o4();zme();Gme();Pme();AH()});function MJe(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var FJe=N(()=>{"use strict"});function OJe(t,r){var n=v_(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var RJe=N(()=>{"use strict";fT()});function vy(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var PJe=N(()=>{"use strict"});function Wme(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*LJe,skewX:Math.atan(u)*LJe,scaleX:a,scaleY:l}}var LJe,NH,jJe=N(()=>{"use strict";LJe=180/Math.PI,NH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function BJe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?NH:Wme(r.a,r.b,r.c,r.d,r.e,r.f)}function $Je(t){return t==null?NH:(MH||(MH=document.createElementNS("http://www.w3.org/2000/svg","g")),MH.setAttribute("transform",t),(t=MH.transform.baseVal.consolidate())?(t=t.matrix,Wme(t.a,t.b,t.c,t.d,t.e,t.f)):NH)}var MH,zJe=N(()=>{"use strict";jJe()});function UJe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:Eu(c,d)},{i:g-2,x:Eu(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:Eu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:Eu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:Eu(c,d)},{i:g-2,x:Eu(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var VJe,GJe,WJe=N(()=>{"use strict";o4();zJe();VJe=UJe(BJe,"px, ","px)","deg)"),GJe=UJe($Je,", ",")",")")});function qJe(t){return((t=Math.exp(t))+1/t)/2}function fer(t){return((t=Math.exp(t))-1/t)/2}function der(t){return((t=Math.exp(2*t))-1)/(t+1)}var cer,HJe,YJe=N(()=>{"use strict";cer=1e-12;HJe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<cer)b=Math.log(p/c)/r,y=function(C){return[l+C*h,u+C*m,c*Math.exp(r*C*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);b=(S-_)/r,y=function(C){var E=C*b,T=qJe(_),I=c/(n*x)*(T*der(r*E+_)-fer(_));return[l+I*h,u+I*m,c*T/qJe(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function XJe(t){return function(r,n){var o=t((r=Od(r)).h,(n=Od(n)).h),i=Ki(r.s,n.s),s=Ki(r.l,n.l),a=Ki(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var KJe,ZJe,QJe=N(()=>{"use strict";js();fT();KJe=XJe(v_),ZJe=XJe(Ki)});function qme(t,r){var n=Ki((t=gf(t)).l,(r=gf(r)).l),o=Ki(t.a,r.a),i=Ki(t.b,r.b),s=Ki(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var JJe=N(()=>{"use strict";js();fT()});function eet(t){return function(r,n){var o=t((r=Rd(r)).h,(n=Rd(n)).h),i=Ki(r.c,n.c),s=Ki(r.l,n.l),a=Ki(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var tet,ret,net=N(()=>{"use strict";js();fT();tet=eet(v_),ret=eet(Ki)});function oet(t){return function r(n){n=+n;function o(i,s){var a=t((i=Up(i)).h,(s=Up(s)).h),l=Ki(i.s,s.s),u=Ki(i.l,s.l),c=Ki(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var iet,set,aet=N(()=>{"use strict";js();fT();iet=oet(v_),set=oet(Ki)});function dT(t,r){r===void 0&&(r=t,t=Cu);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var uet=N(()=>{"use strict";n4()});function cet(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var fet=N(()=>{"use strict"});var Hme={};fn(Hme,{interpolate:()=>Cu,interpolateArray:()=>NJe,interpolateBasis:()=>SH,interpolateBasisClosed:()=>EH,interpolateCubehelix:()=>iet,interpolateCubehelixLong:()=>set,interpolateDate:()=>kH,interpolateDiscrete:()=>MJe,interpolateHcl:()=>tet,interpolateHclLong:()=>ret,interpolateHsl:()=>KJe,interpolateHslLong:()=>ZJe,interpolateHue:()=>OJe,interpolateLab:()=>qme,interpolateNumber:()=>Eu,interpolateNumberArray:()=>qN,interpolateObject:()=>IH,interpolateRgb:()=>r4,interpolateRgbBasis:()=>IJe,interpolateRgbBasisClosed:()=>DJe,interpolateRound:()=>vy,interpolateString:()=>DH,interpolateTransformCss:()=>VJe,interpolateTransformSvg:()=>GJe,interpolateZoom:()=>HJe,piecewise:()=>dT,quantize:()=>cet});var pT=N(()=>{"use strict";n4();Bme();CH();Rme();$me();FJe();RJe();o4();AH();zme();PJe();Gme();WJe();YJe();Lme();QJe();JJe();net();aet();uet();fet()});var Yme=N(()=>{"use strict";gJe();yJe();bJe();xJe();vJe();wJe();_Je();SJe();CJe();EJe()});function her(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function ver(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function wer(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function rge(){let t=iT().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=her(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=jq(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,ij(h,g)-1),x=g===y?b:ij(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return rge().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function get(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return get(r())},t}function _er(){return get(rge().paddingInner(1))}function Cer(t){return Ser.call(t,Rpe)}function yet(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(cm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=Cer(o),n):t.slice()},n.range=function(o){return arguments.length?(r=Eer.call(o),n):r.slice()},n.tickFormat=function(o,i){return UN(t[0],cf(t),o??10,i)},n.copy=function(){return yet().domain(n.domain()).range(n.range())},n}function Aer(t){return t[Ter]=!0,t}function ker(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?ver(s):s.invertExtent?wer(s):void 0),s.type=t,Aer(s)};return o.metadata=qL(CN(n)),o}function Si(t,r,n){return arguments.length>1?(OH.set(t,ker(t,r,n)),this):Ier(t)?OH.get(t):void 0}function Ier(t){return OH.has(t)}function RH(t,r){let n=OH.get(t);return n&&n.metadata[r]}function nge(t){return RH(t,l4)}function Der(t){return RH(t,u4)}function Ner(t){return RH(t,w_)}function Mer(t){return RH(t,tge)}function Fer(t,r,n){return uT(Oer(r||"rgb",n),t)}function Oer(t,r){let n=_me[Rer(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function Rer(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function bet(t){if(_c(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function xet(t,r){for(let n in t)jer(n,r(t[n]))}function jer(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(det[t]=r,this):det[t]}function Ger(t,r,n){let o=t.range(),i=o[0],s=cf(o),a=Uer;if(i>s&&(o=s,s=i,i=o,a=Ver),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],cf(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function vet(t,r){return t.bins?Ger(t,t.bins,r):t.ticks?t.ticks(r):t.domain()}function Wer(t,r,n,o,i,s){let a=r.type,l=zer;if(a===i4||i===i4)l=t.timeFormat(o);else if(a===s4||i===s4)l=t.utcFormat(o);else if(Ner(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=wet(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function wet(t,r,n){let o=vet(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function qer(t,r){return t.bins?Xer(t.bins):t.type===w_?wet(t,r,!0):Xme[t.type]?Yer(t[Xme[t.type]]()):vet(t,r)}function Her(t,r,n){let o=r[_et[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function Yer(t){let r=[-1/0].concat(t);return r.max=1/0,r}function Xer(t){let r=t.slice(0,-1);return r.max=cf(t),r}function Zer(t,r,n,o,i,s,a){let l=_et[r.type]&&s!==i4&&s!==s4?Her(t,r,i):Wer(t,r,n,i,s,a);return o===Ber&&Ker(r)?Qer(l):o===$er?Jer(l):etr(l)}function ttr(t,r,n,o){let i=o||r.type;return EN(n)&&Mer(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===i4?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===s4?t.utcFormat("%A, %d %B %Y, %X UTC"):Zer(t,r,5,null,n,o,!0)}function oge(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=ttr(t,r,n.format,n.formatType);if(Der(r.type)){let s=qer(r).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(nge(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${l}`}else{let s=r.domain();return`values from ${i(s[0])} to ${i(cf(s))}`}}var mer,Kme,w_,Zme,Qme,Jme,i4,s4,HN,a4,FH,ege,met,ger,yer,ber,xer,il,l4,u4,ym,tge,Ser,Eer,OH,Ter,Per,Ler,det,Ber,$er,zer,Uer,Ver,Xme,_et,Ker,Qer,pet,Jer,etr,het,Cet=N(()=>{"use strict";HE();jp();Fme();Fme();Dj();Yme();qhe();mer="identity",Kme="linear",w_="log",Zme="pow",Qme="sqrt",Jme="symlog",i4="time",s4="utc",HN="sequential",a4="diverging",FH="quantile",ege="quantize",met="threshold",ger="ordinal",yer="point",ber="band",xer="bin-ordinal",il="continuous",l4="discrete",u4="discretizing",ym="interpolating",tge="temporal";Ser=Array.prototype.map;Eer=Array.prototype.slice;OH=new Map,Ter=Symbol("vega_scale");Si(mer,Fj);Si(Kme,Mj,il);Si(w_,Pj,[il,w_]);Si(Zme,VN,il);Si(Qme,kme,il);Si(Jme,jj,il);Si(i4,mH,[il,tge]);Si(s4,gH,[il,tge]);Si(HN,GN,[il,ym]);Si(`${HN}-${Kme}`,GN,[il,ym]);Si(`${HN}-${w_}`,bH,[il,ym,w_]);Si(`${HN}-${Zme}`,Vj,[il,ym]);Si(`${HN}-${Qme}`,Dme,[il,ym]);Si(`${HN}-${Jme}`,xH,[il,ym]);Si(`${a4}-${Kme}`,Gj,[il,ym]);Si(`${a4}-${w_}`,wH,[il,ym,w_]);Si(`${a4}-${Zme}`,Wj,[il,ym]);Si(`${a4}-${Qme}`,Mme,[il,ym]);Si(`${a4}-${Jme}`,_H,[il,ym]);Si(FH,$j,[u4,FH]);Si(ege,zj,u4);Si(met,Uj,u4);Si(xer,yet,[l4,u4]);Si(ger,iT,l4);Si(ber,rge,l4);Si(yer,_er,l4);Per={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ler={accent:Hj,category10:qj,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Yj,observable10:Xj,paired:Kj,pastel1:Zj,pastel2:Qj,set1:Jj,set2:e4,set3:t4,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};det={};xet(Ler,bet);xet(Per,t=>Fer(bet(t)));Ber="symbol",$er="discrete",zer=t=>_c(t)?t.map(r=>String(r)):String(t),Uer=(t,r)=>t[1]-r[1],Ver=(t,r)=>r[1]-t[1];Xme={[FH]:"quantiles",[ege]:"thresholds",[met]:"domain"},_et={[FH]:"quantiles",[ege]:"domain"};Ker=t=>Xme[t.type]||t.bins;Qer=t=>(r,n,o)=>{let i=pet(o[n+1],pet(o.max,1/0)),s=het(r,t),a=het(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},pet=(t,r)=>t??r,Jer=t=>(r,n)=>n?t(r):null,etr=t=>r=>t(r),het=(t,r)=>Number.isFinite(t)?r(t):null});function Tge(t){return t&&t.gradient}function Het(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?WH:"";return i||(i=t.id="gradient_"+rtr++,o==="radial"?(t.x1=wy(t.x1,.5),t.y1=wy(t.y1,.5),t.r1=wy(t.r1,0),t.x2=wy(t.x2,.5),t.y2=wy(t.y2,.5),t.r2=wy(t.r2,.5),s=WH):(t.x1=wy(t.x1,0),t.y1=wy(t.y1,0),t.x2=wy(t.x2,1),t.y2=wy(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function wy(t,r){return t??r}function Yet(t,r,n){var o=Pp(Eet,t)&&Eet[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function Xet(t){let r=[];return(t.match(otr)||[]).forEach(o=>{let i=o[0],s=i.toLowerCase(),a=ntr[s],l=ltr(s,a,o.slice(1).trim()),u=l.length;if(u<a||u&&u%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(r.push([i,...l.slice(0,a)]),u!==a){s==="m"&&(i=i==="M"?"L":"l");for(let c=a;c<u;c+=a)r.push([i,...l.slice(c,c+a)])}}),r}function ltr(t,r,n){let o=[];for(let i=0;r&&i<n.length;)for(let s=0;s<r;++s){let a=t==="a"&&(s===3||s===4)?atr:itr,l=n.slice(i).match(a);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");i+=l[0].length,o.push(+l[0]);let u=n.slice(i).match(str);u!==null&&(i+=u[0].length)}return o}function ctr(t,r,n,o,i,s,a,l,u){let c=Ket.call(arguments);if(ige[c])return ige[c];let f=a*A_,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let h=p*(l-t)*.5+d*(u-r)*.5,m=p*(u-r)*.5-d*(l-t)*.5,g=h*h/(n*n)+m*m/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,S=y*t+b*r,C=x*t+v*r,T=1/((S-w)*(S-w)+(C-_)*(C-_))-.25;T<0&&(T=0);let I=Math.sqrt(T);s==i&&(I=-I);let k=.5*(w+S)-I*(C-_),F=.5*(_+C)+I*(S-w),D=Math.atan2(_-F,w-k),P=Math.atan2(C-F,S-k)-D;P<0&&s===1?P+=_y:P>0&&s===0&&(P-=_y);let R=Math.ceil(Math.abs(P/(hT+.001))),V=[];for(let G=0;G<R;++G){let U=D+G*P/R,H=D+(G+1)*P/R;V[G]=[k,F,U,H,n,o,d,p]}return ige[c]=V}function ftr(t){let r=Ket.call(t);if(sge[r])return sge[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,h=c*l,m=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+m-w*g,S=o+g+w*m,C=n+y,E=o+b,T=C+w*b,I=E-w*y;return sge[r]=[f*_+d*S,p*_+h*S,f*T+d*I,p*T+h*I,f*C+d*E,p*C+h*E]}function dtr(t,r,n){let o=Vp[0]=t[0];if(o==="a"||o==="A")Vp[1]=r*t[1],Vp[2]=n*t[2],Vp[3]=t[3],Vp[4]=t[4],Vp[5]=t[5],Vp[6]=r*t[6],Vp[7]=n*t[7];else if(o==="h"||o==="H")Vp[1]=r*t[1];else if(o==="v"||o==="V")Vp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)Vp[i]=(i%2==1?r:n)*t[i];return Vp}function dge(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,h,m,g,y=0,b=0;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var x=0,v=r.length;x<v;++x){switch(a=r[x],(i!==1||s!==1)&&(a=dtr(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"c":p=u+a[5],h=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,h+o),u=p,c=h;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],h=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,h+o),f=u+a[1],d=c+a[2],u=p,c=h;break;case"S":p=a[3],h=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"q":p=u+a[3],h=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"Q":p=a[3],h=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"t":p=u+a[1],h=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-m,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),m=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h,f=u+a[1],d=c+a[2];break;case"T":p=a[1],h=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"a":Tet(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":Tet(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":u=y,c=b,t.closePath();break}l=a}}function Tet(t,r,n,o){let i=ctr(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=ftr(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function ptr(t){return Pp(ket,t)?ket[t]:htr(t)}function htr(t){if(!Pp(age,t)){let r=Xet(t);age[t]={draw:function(n,o){dge(n,r,0,0,Math.sqrt(o)/2)}}}return age[t]}function mtr(t){return t.x}function gtr(t){return t.y}function ytr(t){return t.width}function btr(t){return t.height}function xv(t){return typeof t=="function"?t:()=>+t}function PH(t,r,n){return Math.max(r,Math.min(t,n))}function xtr(){var t=mtr,r=gtr,n=ytr,o=btr,i=xv(0),s=i,a=i,l=i,u=null;function c(f,d,p){var h,m=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=PH(+i.call(this,f),0,x),w=PH(+s.call(this,f),0,x),_=PH(+a.call(this,f),0,x),S=PH(+l.call(this,f),0,x);if(u||(u=h=XL()),v<=0&&w<=0&&_<=0&&S<=0)u.rect(m,g,y,b);else{var C=m+y,E=g+b;u.moveTo(m+v,g),u.lineTo(C-w,g),u.bezierCurveTo(C-__*w,g,C,g+__*w,C,g+w),u.lineTo(C,E-S),u.bezierCurveTo(C,E-__*S,C-__*S,E,C-S,E),u.lineTo(m+_,E),u.bezierCurveTo(m+__*_,E,m,E-__*_,m,E-_),u.lineTo(m,g+v),u.bezierCurveTo(m,g+__*v,m+__*v,g,m+v,g),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(f){return arguments.length?(t=xv(f),c):t},c.y=function(f){return arguments.length?(r=xv(f),c):r},c.width=function(f){return arguments.length?(n=xv(f),c):n},c.height=function(f){return arguments.length?(o=xv(f),c):o},c.cornerRadius=function(f,d,p,h){return arguments.length?(i=xv(f),s=d!=null?xv(d):i,l=p!=null?xv(p):i,a=h!=null?xv(h):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function vtr(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,h){let m=h/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.hypot(g,y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*m,p-y*m),i.arc(d,p,m,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,m,0,_y);i.closePath()}else s=1;a=d,l=p,u=m}function f(d){var p,h=d.length,m,g=!1,y;for(i==null&&(i=y=XL()),p=0;p<=h;++p)!(p<h&&o(m=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(m,p,d),+r(m,p,d),+n(m,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function w4(t,r){return t??r}function Age(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Wtr(t,r){return jtr.context(t)(r)}function qtr(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?$tr:Btr).curve(Yet(o,n.orient,n.tension)).context(t)(r)}function Htr(t,r){let n=r[0],o=n.interpolate||"linear";return ztr.curve(Yet(o,n.orient,n.tension)).context(t)(r)}function QN(t,r,n,o){return Utr.context(t)(r,n,o)}function Ytr(t,r){return(r.mark.shape||r.shape).context(t)(r)}function Xtr(t,r){return Vtr.context(t)(r)}function Ktr(t,r){return Gtr.context(t)(r)}function kge(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+Ztr++),a=i.clipping[s]||(i.clipping[s]={id:s});return r_(o)?a.path=o(null):Age(n)?a.path=QN(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function bf(t){this.clear(),t&&this.union(t)}function aY(t){this.mark=t,this.bounds=this.bounds||new bf}function Ige(t){aY.call(this,t),this.items=this.items||[]}function Iet(t){t._pending+=1}function c4(t){t._pending-=1}function wv(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?Qtr(r,o):0))}return t}function Qtr(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function uY(t,r){return lY=t,r?(yT=r*A_,hge=gge=Math.cos(yT),BH=Math.sin(yT),mge=-BH):(hge=gge=1,yT=BH=mge=0),err}function Met(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function Fet(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>utr?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(Oet(u,t,r,n,o)),0<c&&c<1&&i(Oet(c,t,r,n,o))}function Oet(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function Zet(t){return function(r,n){if(!T_)return!0;t(T_,r),yge.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=yge;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(T_.isPointInPath(u,l))return!0;return!1}}function Qet(t,r){return r.contains(t.x||0,t.y||0)}function Jet(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(yge.set(n,o,n+i,o+s))}function trr(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return d4(r,n,o,i,s)}function d4(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-c,m=-(s-r)),y===1&&(h=c,m=l-r),y===2&&(h=-f,m=-(a-n)),y===3&&(h=f,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>p)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function XN(t,r){t.globalCompositeOperation=r.blend||"source-over"}function bm(t,r){return t??r}function Ret(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function rrr(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+bm(r.x1,.5)*o,n.y1+bm(r.y1,.5)*i,Math.max(o,i)*bm(r.r1,0),n.x1+bm(r.x2,.5)*o,n.y1+bm(r.y2,.5)*i,Math.max(o,i)*bm(r.r2,.5));else{let a=bm(r.x1,0),l=bm(r.y1,0),u=bm(r.x2,1),c=bm(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=ff(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=Ret(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return Ret(s,r.stops)}function ett(t,r,n){return Tge(n)?rrr(t,n,r.bounds):n}function qH(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=ett(t,r,r.fill),!0):!1}function KN(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=ett(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||nrr),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function orr(t,r){return t.zindex-r.zindex||t.index-r.index}function ttt(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(orr)}function Sy(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=ttt(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function bge(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=ttt(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function Dge(t){return function(r,n,o){Sy(n,i=>{(!o||o.intersects(i.bounds))&&rtt(t,r,i,i)})}}function irr(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&rtt(t,r,n.items[0],n.items)}}function rtt(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(XN(r,n),n.fill&&qH(r,n,i)&&r.fill(),n.stroke&&KN(r,n,i)&&r.stroke()))}function cY(t){return t=t||Ope,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,bge(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function C4(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Nge(t){return cY(C4(t))}function xT(t,r){return"translate("+t+","+r+")"}function Mge(t){return"rotate("+t+")"}function srr(t,r){return"scale("+t+","+r+")"}function ntt(t){return xT(t.x||0,t.y||0)}function arr(t){return xT(t.x||0,t.y||0)+(t.angle?" "+Mge(t.angle):"")}function lrr(t){return xT(t.x||0,t.y||0)+(t.angle?" "+Mge(t.angle):"")+(t.scaleX||t.scaleY?" "+srr(t.scaleX||1,t.scaleY||1):"")}function Fge(t,r,n){function o(a,l){a("transform",arr(l)),a("d",r(null,l))}function i(a,l){return r(uY(a,l.angle),l),wv(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=A_),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:Dge(s),pick:Nge(s),isect:n||Zet(s)}}function crr(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function frr(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function drr(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function Oge(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(uY(u),f),wv(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=C4(s);function l(u,c,f,d,p,h){var m=c.items,g=c.bounds;return!m||!m.length||g&&!g.contains(p,h)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,m,f,d)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:irr(s),pick:l,isect:Qet,tip:n}}function hrr(t,r){var n=r.clip;t.save(),r_(n)?(t.beginPath(),n(t),t.clip()):ott(t,r.group)}function ott(t,r){t.beginPath(),Age(r)?QN(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function itt(t){let r=bm(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function mrr(t,r){t("transform",ntt(r))}function stt(t,r){let n=itt(r);t("d",QN(null,r,n,n))}function grr(t,r){t("class","background"),t("aria-hidden",!0),stt(t,r)}function yrr(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?stt(t,r):t("d","")}function brr(t,r,n){let o=r.clip?kge(n,r,r):null;t("clip-path",o)}function xrr(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),wv(t,r),t.translate(r.x||0,r.y||0)}function y4(t,r,n,o){let i=itt(r);t.beginPath(),QN(t,r,(n||0)+i,(o||0)+i)}function Srr(t,r,n,o){Sy(r,i=>{let s=i.x||0,a=i.y||0,l=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(y4(t,i,s,a),XN(t,i),i.fill&&qH(t,i,u)&&t.fill(),i.stroke&&!l&&KN(t,i,u)&&t.stroke()),t.save(),t.translate(s,a),i.clip&&ott(t,i),n&&n.translate(-s,-a),Sy(i,c=>{(c.marktype==="group"||o==null||o.includes(c.marktype))&&this.draw(t,c,n,o)}),n&&n.translate(s,a),t.restore(),l&&i.stroke&&u&&(y4(t,i,s,a),XN(t,i),KN(t,i,u)&&t.stroke())})}function Crr(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return bge(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let h=f+(u.width||0),m=d+(u.height||0),g=u.clip;if(g&&(i<f||i>h||s<d||s>m))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&Age(u)&&!_rr(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&wrr(t,u,a,l)?(t.restore(),u):(c=bge(u,x=>Err(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&vrr(t,u,a,l)&&(c=u),t.restore(),c||null)})}function Err(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function Rge(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function Pge(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function Lge(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function fY(t,r){return t==="center"?r/2:t==="right"?r:0}function dY(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function Arr(t,r,n){let o=Rge(r,n),i=Pge(r,o),s=Lge(r,o),a=(r.x||0)-fY(r.align,i),l=(r.y||0)-dY(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,b4["xmlns:xlink"],"xlink:href"),t("transform",xT(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function krr(t,r){let n=r.image,o=Pge(r,n),i=Lge(r,n),s=(r.x||0)-fY(r.align,o),a=(r.y||0)-dY(r.baseline,i);return t.set(s,a,s+o,a+i)}function Irr(t,r,n){Sy(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=Rge(o,this),s=Pge(o,i),a=Lge(o,i);if(s===0||a===0)return;let l=(o.x||0)-fY(o.align,s),u=(o.y||0)-dY(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(XN(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function Mrr(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",lrr(r)),t("d",r.path)}function zH(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*A_,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=Xet(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),dge(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):dge(t,u,o,i,s,a)}function Frr(t,r){return zH(uY(t,r.angle),r)?t.set(0,0,0,0):wv(t,r,!0)}function Rrr(t,r){t("d",QN(null,r))}function Prr(t,r){var n,o;return wv(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function Pet(t,r){t.beginPath(),QN(t,r)}function jrr(t,r){t("transform",ntt(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function Brr(t,r){var n,o;return wv(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function att(t,r,n){var o,i,s,a;return r.stroke&&KN(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function $rr(t,r,n){Sy(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&att(t,o,i)&&(XN(t,o),t.stroke())}})}function zrr(t,r,n,o){return t.isPointInStroke?att(t,r,1)&&t.isPointInStroke(n,o):!1}function ltt(t){vT.width=t&&T_?jge:HH}function HH(t,r){return utt(k_(t,r),_v(t))}function utt(t,r){return~~(.8*t.length*r)}function jge(t,r){return _v(t)<=0||!(r=k_(t,r))?0:ctt(r,$ge(t))}function ctt(t,r){let n=`(${r}) ${t}`,o=Let.get(n);return o===void 0&&(T_.font=r,o=T_.measureText(t).width,Let.set(n,o)),o}function _v(t){return t.fontSize!=null?+t.fontSize||0:11}function wT(t){return t.lineHeight!=null?t.lineHeight:_v(t)+2}function Wrr(t){return _c(t)?t.length>1?t:t[0]:t}function E4(t){return Wrr(t.lineBreak&&t.text&&!_c(t.text)?t.text.split(t.lineBreak):t.text)}function Bge(t){let r=E4(t);return(_c(r)?r.length-1:0)*wT(t)}function k_(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?Hrr(t,n):n}function qrr(t){if(vT.width===jge){let r=$ge(t);return n=>ctt(n,r)}else if(vT.width===HH){let r=_v(t);return n=>utt(n,r)}else return r=>vT.width(t,r)}function Hrr(t,r){var n=+t.limit,o=qrr(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function pY(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function $ge(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+_v(t)+"px "+pY(t,r)}function zge(t){var r=t.baseline,n=_v(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*wT(t):r==="line-bottom"?.29*n-.5*wT(t):0)}function hY(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-hT,r+=o*Math.cos(i),n+=o*Math.sin(i)),h4.x1=r,h4.y1=n,h4}function Xrr(t,r){var n=r.dx||0,o=(r.dy||0)+zge(r),i=hY(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",Yrr[r.align]||"start"),l?(u=xT(s,a)+" "+Mge(l),(n||o)&&(u+=" "+xT(n,o))):u=xT(s+n,a+o),t("transform",u)}function Uge(t,r,n){var o=vT.height(r),i=r.align,s=hY(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+zge(r)-Math.round(.8*o),f=E4(r),d;if(_c(f)?(o+=wT(r)*(f.length-1),d=f.reduce((p,h)=>Math.max(p,vT.width(r,h)),0)):d=vT.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*A_,a,l);else if(n===2)return t.rotatedPoints(r.angle*A_,a,l);return t}function Krr(t,r,n){Sy(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=$ge(o),t.textAlign=o.align||"left",s=hY(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*A_),a=l=0),a+=o.dx||0,l+=(o.dy||0)+zge(o),f=E4(o),XN(t,o),_c(f))for(c=wT(o),u=0;u<f.length;++u)d=k_(o,f[u]),o.fill&&qH(t,o,i)&&t.fillText(d,a,l),o.stroke&&KN(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=k_(o,f),o.fill&&qH(t,o,i)&&t.fillText(d,a,l),o.stroke&&KN(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function Zrr(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=hY(r),l=a.x1,u=a.y1,c=Uge(h4,r,1),f=-r.angle*A_,d=Math.cos(f),p=Math.sin(f),h=d*i-p*s+(l-d*l+p*u),m=p*i+d*s+(u-p*l-d*u);return c.contains(h,m)}function Qrr(t,r){let n=Uge(h4,t,2);return d4(r,n[0],n[1],n[2],n[3])||d4(r,n[0],n[1],n[4],n[5])||d4(r,n[4],n[5],n[6],n[7])||d4(r,n[2],n[3],n[6],n[7])}function bT(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function ftt(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function sl(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=bT(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function xm(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function dtt(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function ptt(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function tnr(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=I_[i.marktype]).tip){for(a=ptt(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function rnr(t,r,n,o){t.element().setAttribute("title",o||"")}function jet(t,r){fnr(r).forEach(n=>dnr(t,n))}function dnr(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function p4(t,r,n){r.forEach(o=>t.fire(o,n))}function Bet(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?p4(this,t,o):((!i||!i.exit)&&p4(this,n,o),this._active=s,p4(this,r,o),p4(this,t,o))}}function $et(t){return function(r){p4(this,t,r),this._active=null}}function pnr(){return typeof window<"u"&&window.devicePixelRatio||1}function hnr(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?pnr():i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function gnr(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function Stt(t,r){let n=r.aria===!1;if(t(vtt,n||void 0),n||r.description==null)for(let o in Uet)t(Uet[o],void 0);else{let o=r.mark.marktype;t(Vge,r.description),t(Gge,r.ariaRole||(o==="group"?wtt:qge)),t(Wge,r.ariaRoleDescription||`${o} mark`)}}function Ctt(t){return t.aria===!1?{[vtt]:!0}:ynr[t.role]?null:zet[t.role]?xnr(t,zet[t.role]):bnr(t)}function bnr(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return _tt(n?wtt:qge,`${r} mark container`,t.description)}function xnr(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return _tt(r.role||qge,r.desc,n.description||o(n))}catch{return null}}function Vet(t){return CN(t.text).join(" ")}function vnr(t){let r=t.datum,n=t.orient,o=r.title?Ett(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${nge(l)?"discrete":l} scale with ${oge(a,s,t)}`}function wnr(t){let r=t.datum,n=r.title?Ett(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return Snr(o)+(n?` titled '${n}'`:"")+` for ${_nr(s)} with ${oge(u,l,t)}`}function Ett(t){try{return CN(cf(t.items).items[0].text).join(" ")}catch{return null}}function _nr(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+cf(t)}function Snr(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function Att(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${Cnr(c)}"`),l),l={open(u){s(u),r="<"+u;for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];for(let p of f)for(let h in p)a(h,p[h]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=Ttt(u),l),toString:()=>t};return l}function ktt(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes;for(let o of n)o.nodeType===3?t.text(o.nodeValue):ktt(t,o)}return t.close()}function Wet(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function Tnr(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=sl(t,n++,"pattern",Fa);E_(a,{id:WH+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=sl(a,0,"rect",Fa),E_(a,{width:1,height:1,fill:`url(${Dtt()}#${r.id})`}),t=sl(t,n++,"radialGradient",Fa),E_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=sl(t,n++,"linearGradient",Fa),E_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=sl(t,o,"stop",Fa),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return xm(t,o),n}function Anr(t,r,n){let o;return t=sl(t,n,"clipPath",Fa),t.setAttribute("id",r.id),r.path?(o=sl(t,0,"path",Fa),o.setAttribute("d",r.path)):(o=sl(t,0,"rect",Fa),E_(o,{x:0,y:0,width:r.width,height:r.height})),xm(t,1),n+1}function knr(t,r,n,o){r=r.lastChild.previousSibling;let i,s=0;Sy(n,a=>{i=t.mark(r,a,i,o),++s}),xm(r,1+s)}function qet(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=bT(a,o,Fa),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=bT(a,"path",Fa);s.appendChild(l),l.__data__=t;let u=bT(a,"g",Fa);s.appendChild(u),u.__data__=t;let c=bT(a,"path",Fa);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Inr(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function Inr(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function g4(t,r,n){r!==Tu[t]&&(n?Nnr(vv,t,r,n):Tc(vv,t,r),Tu[t]=r)}function GH(t,r,n){n!==Tu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),Tu[r]=n)}function E_(t,r){for(let n in r)Tc(t,n,r[n])}function Tc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function Nnr(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function Dtt(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Mnr(t,r,n,o,i){let s;if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),o==="text"&&(t["font-family"]=pY(r),t["font-size"]=_v(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let a in rY){let l=r[a],u=rY[a];l==="transparent"&&(u==="fill"||u==="stroke")||l!=null&&(Tge(l)&&(l=Het(l,i.gradient,"")),t[u]=l)}for(let a in nY){let l=r[a];l!=null&&(s=s||[],s.push(`${nY[a]}: ${l};`))}return s&&(t.style=s.join(" ")),t}function Ntt(t){let r=t.clip;if(r_(r))r(uY(fge.clear()));else if(r)fge.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(fge)}var rtr,WH,Eet,ntr,otr,itr,str,atr,A_,utr,hT,_y,YN,ige,sge,Ket,Vp,Aet,ket,age,__,_4,S4,wtr,_tr,Str,Ctr,Etr,Ttr,Atr,ktr,Itr,Dtr,Ntr,Mtr,Ftr,Otr,Rtr,Ptr,sY,Ltr,jtr,Btr,$tr,ztr,Utr,Vtr,Gtr,Ztr,pge,Jtr,lY,LH,jH,yT,hge,BH,mge,gge,C_,$H,Det,Net,mT,gT,lge,uge,err,T_,yge,nrr,urr,prr,vrr,wrr,_rr,Trr,b4,Drr,Nrr,Orr,Lrr,Urr,Vrr,Grr,Let,vT,Yrr,h4,Jrr,enr,I_,YH,ZN,nnr,onr,inr,htt,UH,mtt,xge,snr,XH,VH,gtt,vge,anr,ytt,KH,btt,ZH,lnr,unr,xtt,QH,JH,eY,cnr,wge,m4,_ge,tY,fnr,x4,mnr,Sge,cge,vtt,Vge,Gge,Wge,wtt,qge,_tt,ynr,zet,Uet,Ttt,Cnr,Enr,rY,nY,Itt,f4,Get,Fa,oY,vv,Tu,Dnr,Cge,S_,iY,Ege,Fnr,Onr,Rnr,Pnr,Lnr,v4,fge,Mtt=N(()=>{"use strict";HE();NKe();$pe();kN();YZe();Cet();rtr=0,WH="p_";Eet={basis:{curve:Wpe},"basis-closed":{curve:qpe},"basis-open":{curve:Hpe},bundle:{curve:Ype,tension:"beta",value:.85},cardinal:{curve:Xpe,tension:"tension",value:0},"cardinal-open":{curve:Qpe,tension:"tension",value:0},"cardinal-closed":{curve:Kpe,tension:"tension",value:0},"catmull-rom":{curve:ehe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:the,tension:"alpha",value:.5},"catmull-rom-open":{curve:rhe,tension:"alpha",value:.5},linear:{curve:KE},"linear-closed":{curve:nhe},monotone:{horizontal:she,vertical:ihe},natural:{curve:ahe},step:{curve:lhe},"step-after":{curve:che},"step-before":{curve:uhe}};ntr={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},otr=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,itr=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,str=/^((\s+,?\s*)|(,\s*))/,atr=/^[01]/;A_=Math.PI/180,utr=1e-14,hT=Math.PI/2,_y=Math.PI*2,YN=Math.sqrt(3)/2,ige={},sge={},Ket=[].join;Vp=["l",0,0,0,0,0,0,0];Aet=.5773502691896257,ket={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,_y)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=YN*n,i=o-n*Aet,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=YN*n,i=o-n*Aet;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=YN*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=YN*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=YN*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=YN*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};age={};__=.448084975506;_4=t=>t.x||0,S4=t=>t.y||0,wtr=t=>t.width||0,_tr=t=>t.height||0,Str=t=>(t.x||0)+(t.width||0),Ctr=t=>(t.y||0)+(t.height||0),Etr=t=>t.startAngle||0,Ttr=t=>t.endAngle||0,Atr=t=>t.padAngle||0,ktr=t=>t.innerRadius||0,Itr=t=>t.outerRadius||0,Dtr=t=>t.cornerRadius||0,Ntr=t=>w4(t.cornerRadiusTopLeft,t.cornerRadius)||0,Mtr=t=>w4(t.cornerRadiusTopRight,t.cornerRadius)||0,Ftr=t=>w4(t.cornerRadiusBottomRight,t.cornerRadius)||0,Otr=t=>w4(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Rtr=t=>w4(t.size,64),Ptr=t=>t.size||1,sY=t=>t.defined!==!1,Ltr=t=>ptr(t.shape||"circle"),jtr=zpe().startAngle(Etr).endAngle(Ttr).padAngle(Atr).innerRadius(ktr).outerRadius(Itr).cornerRadius(Dtr),Btr=Aq().x(_4).y1(S4).y0(Ctr).defined(sY),$tr=Aq().y(S4).x1(_4).x0(Str).defined(sY),ztr=ZL().x(_4).y(S4).defined(sY),Utr=xtr().x(_4).y(S4).width(wtr).height(_tr).cornerRadius(Ntr,Mtr,Ftr,Otr),Vtr=kq().type(Ltr).size(Rtr),Gtr=vtr().x(_4).y(S4).defined(sY).size(Ptr);Ztr=1;bf.prototype={clone(){return new bf(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};cv(Ige,aY);pge=class{constructor(r){this._pending=0,this._loader=r||Qhe()}pending(){return this._pending}sanitizeURL(r){let n=this;return Iet(n),n._loader.sanitize(r,{context:"href"}).then(o=>(c4(n),o)).catch(()=>(c4(n),null))}loadImage(r){let n=this,o=Rq();return Iet(n),n._loader.sanitize(r,{context:"image"}).then(i=>{let s=i.href;if(!s||!o)throw{url:s};let a=new o,l=Pp(i,"crossOrigin")?i.crossOrigin:"anonymous";return l!=null&&(a.crossOrigin=l),a.onload=()=>c4(n),a.onerror=()=>c4(n),a.src=s,a}).catch(i=>(c4(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){let r=this;return new Promise(n=>{function o(i){r.pending()?setTimeout(()=>{o(!0)},10):n(i)}o(!1)})}};Jtr=_y-1e-8,C_=(t,r)=>lY.add(t,r),$H=(t,r)=>C_(LH=t,jH=r),Det=t=>C_(t,lY.y1),Net=t=>C_(lY.x1,t),mT=(t,r)=>hge*t+mge*r,gT=(t,r)=>BH*t+gge*r,lge=(t,r)=>C_(mT(t,r),gT(t,r)),uge=(t,r)=>$H(mT(t,r),gT(t,r));err={beginPath(){},closePath(){},moveTo:uge,lineTo:uge,rect(t,r,n,o){yT?(lge(t+n,r),lge(t+n,r+o),lge(t,r+o),uge(t,r)):(C_(t+n,r+o),$H(t,r))},quadraticCurveTo(t,r,n,o){let i=mT(t,r),s=gT(t,r),a=mT(n,o),l=gT(n,o);Met(LH,i,a,Det),Met(jH,s,l,Net),$H(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=mT(t,r),l=gT(t,r),u=mT(n,o),c=gT(n,o),f=mT(i,s),d=gT(i,s);Fet(LH,a,u,f,Det),Fet(jH,l,c,d,Net),$H(f,d)},arc(t,r,n,o,i,s){if(o+=yT,i+=yT,LH=n*Math.cos(i)+t,jH=n*Math.sin(i)+r,Math.abs(i-o)>Jtr)C_(t-n,r-n),C_(t+n,r+n);else{let a=c=>C_(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%_y,o<0&&(o+=_y),i=i%_y,i<0&&(i+=_y),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=_y,l=o-o%hT,u=0;u<4&&l>i;++u,l-=hT)a(l);else for(l=o-o%hT+hT,u=0;u<4&&l<i;++u,l=l+hT)a(l)}}};T_=(T_=ff(1,1))?T_.getContext("2d"):null,yge=new bf;nrr=[];urr=Fge("arc",Wtr);prr=Oge("area",qtr,crr);vrr=C4(y4),wrr=C4(y4,!1),_rr=C4(y4,!0);Trr={type:"group",tag:"g",nested:!1,attr:mrr,bound:xrr,draw:Srr,pick:Crr,isect:Jet,content:brr,background:grr,foreground:yrr},b4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};Drr={type:"image",tag:"image",nested:!1,attr:Arr,bound:krr,draw:Irr,pick:cY(),isect:Ope,get:Rge,xOffset:fY,yOffset:dY},Nrr=Oge("line",Htr,frr);Orr={type:"path",tag:"path",nested:!1,attr:Mrr,bound:Frr,draw:Dge(zH),pick:Nge(zH),isect:Zet(zH)};Lrr={type:"rect",tag:"path",nested:!1,attr:Rrr,bound:Prr,draw:Dge(Pet),pick:Nge(Pet),isect:Jet};Urr={type:"rule",tag:"line",nested:!1,attr:jrr,bound:Brr,draw:$rr,pick:cY(zrr),isect:trr},Vrr=Fge("shape",Ytr),Grr=Fge("symbol",Xtr,Qet),Let=ZXe(),vT={height:_v,measureWidth:jge,estimateWidth:HH,width:HH,canvas:ltt};ltt(!0);Yrr={left:"start",center:"middle",right:"end"},h4=new bf;Jrr={type:"text",tag:"text",nested:!1,attr:Xrr,bound:Uge,draw:Krr,pick:cY(Zrr),isect:Qrr},enr=Oge("trail",Ktr,drr),I_={arc:urr,area:prr,group:Trr,image:Drr,line:Nrr,path:Orr,rect:Lrr,rule:Urr,shape:Vrr,symbol:Grr,text:Jrr,trail:enr};YH=class{constructor(r,n){this._active=null,this._handlers={},this._loader=r||Qhe(),this._tooltip=n||rnr}initialize(r,n,o){return this._el=r,this._obj=o||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(r){return arguments.length?(this._origin=r||[0,0],this):this._origin.slice()}scene(r){return arguments.length?(this._scene=r,this):this._scene}on(){}off(){}_handlerIndex(r,n,o){for(let i=r?r.length:0;--i>=0;)if(r[i].type===n&&(!o||r[i].handler===o))return i;return-1}handlers(r){let n=this._handlers,o=[];if(r)o.push(...n[this.eventName(r)]);else for(let i in n)o.push(...n[i]);return o}eventName(r){let n=r.indexOf(".");return n<0?r:r.slice(0,n)}handleHref(r,n,o){this._loader.sanitize(o,{context:"href"}).then(i=>{let s=new MouseEvent(r.type,r),a=bT(null,"a");for(let l in i)a.setAttribute(l,i[l]);a.dispatchEvent(s)}).catch(()=>{})}handleTooltip(r,n,o){if(n&&n.tooltip!=null){n=tnr(n,r,this.canvas(),this._origin);let i=o&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,r,n,i)}}getItemBoundingClientRect(r){let n=this.canvas();if(!n)return;let o=n.getBoundingClientRect(),i=this._origin,s=r.bounds,a=s.width(),l=s.height(),u=s.x1+i[0]+o.left,c=s.y1+i[1]+o.top;for(;r.mark&&(r=r.mark.group);)u+=r.x||0,c+=r.y||0;return{x:u,y:c,width:a,height:l,left:u,top:c,right:u+a,bottom:c+l}}};ZN=class{constructor(r){this._el=null,this._bgcolor=null,this._loader=new pge(r)}initialize(r,n,o,i,s){return this._el=r,this.resize(n,o,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(r){return arguments.length===0?this._bgcolor:(this._bgcolor=r,this)}resize(r,n,o,i){return this._width=r,this._height=n,this._origin=o||[0,0],this._scale=i||1,this}dirty(){}render(r,n){let o=this;return o._call=function(){o._render(r,n)},o._call(),o._call=null,o}_render(){}renderAsync(r,n){let o=this.render(r,n);return this._ready?this._ready.then(()=>o):Promise.resolve(o)}_load(r,n){var o=this,i=o._loader[r](n);if(!o._ready){let s=o._call;o._ready=o._loader.ready().then(a=>{a&&s(),o._ready=null})}return i}sanitizeURL(r){return this._load("sanitizeURL",r)}loadImage(r){return this._load("loadImage",r)}},nnr="keydown",onr="keypress",inr="keyup",htt="dragenter",UH="dragleave",mtt="dragover",xge="pointerdown",snr="pointerup",XH="pointermove",VH="pointerout",gtt="pointerover",vge="mousedown",anr="mouseup",ytt="mousemove",KH="mouseout",btt="mouseover",ZH="click",lnr="dblclick",unr="wheel",xtt="mousewheel",QH="touchstart",JH="touchmove",eY="touchend",cnr=[nnr,onr,inr,htt,UH,mtt,xge,snr,XH,VH,gtt,vge,anr,ytt,KH,btt,ZH,lnr,unr,xtt,QH,JH,eY],wge=XH,m4=KH,_ge=ZH,tY=class extends YH{constructor(r,n){super(r,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=cnr,this.pointermove=Bet([XH,ytt],[gtt,btt],[VH,KH]),this.dragover=Bet([mtt],[htt],[UH]),this.pointerout=$et([VH,KH]),this.dragleave=$et([UH])}initialize(r,n,o){return this._canvas=r&&ftt(r,"canvas"),[ZH,vge,xge,XH,VH,UH].forEach(i=>jet(this,i)),super.initialize(r,n,o)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(r){this.fire(xtt,r)}pointerdown(r){this._down=this._active,this.fire(xge,r)}mousedown(r){this._down=this._active,this.fire(vge,r)}click(r){this._down===this._active&&(this.fire(ZH,r),this._down=null)}touchstart(r){this._touch=this.pickEvent(r.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(QH,r,!0)}touchmove(r){this.fire(JH,r,!0)}touchend(r){this.fire(eY,r,!0),this._touch=null}fire(r,n,o){let i=o?this._touch:this._active,s=this._handlers[r];if(n.vegaType=r,r===_ge&&i&&i.href?this.handleHref(n,i,i.href):(r===wge||r===m4)&&this.handleTooltip(n,i,r!==m4),s)for(let a=0,l=s.length;a<l;++a)s[a].handler.call(this._obj,n,i)}on(r,n){let o=this.eventName(r),i=this._handlers;return this._handlerIndex(i[o],r,n)<0&&(jet(this,r),(i[o]||(i[o]=[])).push({type:r,handler:n})),this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&i.splice(s,1),this}pickEvent(r){let n=ptt(r,this._canvas),o=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-o[0],n[1]-o[1])}pick(r,n,o,i,s){let a=this.context();return I_[r.marktype].pick.call(this,a,r,n,o,i,s)}},fnr=t=>t===QH||t===JH||t===eY?[QH,JH,eY]:[t];x4=class extends ZN{constructor(r){super(r),this._options={},this._redraw=!1,this._dirty=new bf,this._tempb=new bf}initialize(r,n,o,i,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:ff(1,1,this._options.type),r&&this._canvas&&(xm(r,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(r,n,o,i,s)}resize(r,n,o,i){if(super.resize(r,n,o,i),this._canvas)hnr(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let s=this._options.externalContext;s||wu("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(r){let n=this._tempb.clear().union(r.bounds),o=r.mark.group;for(;o;)n.translate(o.x||0,o.y||0),o=o.mark.group;this._dirty.union(n)}_render(r,n){let o=this.context(),i=this._origin,s=this._width,a=this._height,l=this._dirty,u=mnr(i,s,a);o.save();let c=this._redraw||l.empty()?(this._redraw=!1,u.expand(1)):gnr(o,u.intersect(l),i);return this.clear(-i[0],-i[1],s,a),this.draw(o,r,c,n),o.restore(),l.clear(),this}draw(r,n,o,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;let s=I_[n.marktype];n.clip&&hrr(r,n),s.draw.call(this,r,n,o,i),n.clip&&r.restore()}clear(r,n,o,i){let s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(r,n,o,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(r,n,o,i))}},mnr=(t,r,n)=>new bf().set(0,0,r,n).translate(-t[0],-t[1]);Sge=class extends YH{constructor(r,n){super(r,n);let o=this;o._hrefHandler=cge(o,(i,s)=>{s&&s.href&&o.handleHref(i,s,s.href)}),o._tooltipHandler=cge(o,(i,s)=>{o.handleTooltip(i,s,i.type!==m4)})}initialize(r,n,o){let i=this._svg;return i&&(i.removeEventListener(_ge,this._hrefHandler),i.removeEventListener(wge,this._tooltipHandler),i.removeEventListener(m4,this._tooltipHandler)),this._svg=i=r&&ftt(r,"svg"),i&&(i.addEventListener(_ge,this._hrefHandler),i.addEventListener(wge,this._tooltipHandler),i.addEventListener(m4,this._tooltipHandler)),super.initialize(r,n,o)}canvas(){return this._svg}on(r,n){let o=this.eventName(r),i=this._handlers;if(this._handlerIndex(i[o],r,n)<0){let a={type:r,handler:n,listener:cge(this,n)};(i[o]||(i[o]=[])).push(a),this._svg&&this._svg.addEventListener(o,a.listener)}return this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&(this._svg&&this._svg.removeEventListener(o,i[s].listener),i.splice(s,1)),this}},cge=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)},vtt="aria-hidden",Vge="aria-label",Gge="role",Wge="aria-roledescription",wtt="graphics-object",qge="graphics-symbol",_tt=(t,r,n)=>({[Gge]:t,[Wge]:r,[Vge]:n||void 0}),ynr=qL(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),zet={axis:{desc:"axis",caption:vnr},legend:{desc:"legend",caption:wnr},"title-text":{desc:"title",caption:t=>`Title text '${Vet(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Vet(t)}'`}},Uet={ariaRole:Gge,ariaRoleDescription:Wge,description:Vge};Ttt=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Cnr=t=>Ttt(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");Enr=t=>ktt(Att(),t)+"";rY={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},nY={blend:"mix-blend-mode"},Itt={fill:"none","stroke-miterlimit":10},f4=0,Get="http://www.w3.org/2000/xmlns/",Fa=b4.xmlns,oY=class extends ZN{constructor(r){super(r),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(r,n,o,i,s){return this._defs={},this._clearDefs(),r&&(this._svg=sl(r,0,"svg",Fa),this._svg.setAttributeNS(Get,"xmlns",Fa),this._svg.setAttributeNS(Get,"xmlns:xlink",b4["xmlns:xlink"]),this._svg.setAttribute("version",b4.version),this._svg.setAttribute("class","marks"),xm(r,1),this._root=sl(this._svg,f4,"g",Fa),E_(this._root,Itt),xm(this._svg,f4+1)),this.background(this._bgcolor),super.initialize(r,n,o,i,s)}background(r){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",r),super.background(...arguments)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svg&&(E_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let r=this._svg,n=this._bgcolor;if(!r)return null;let o;n&&(r.removeAttribute("style"),o=sl(r,f4,"rect",Fa),E_(o,{width:this._width,height:this._height,fill:n}));let i=Enr(r);return n&&(r.removeChild(o),this._svg.style.setProperty("background-color",n)),i}_render(r,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,r,void 0,n),xm(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(r){r.dirty!==this._dirtyID&&(r.dirty=this._dirtyID,this._dirty.push(r))}isDirty(r){return this._dirtyAll||!r._svg||!r._svg.ownerSVGElement||r.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let r=this._dirty;if(!r.length||!this._dirtyID)return!0;let n=++this._dirtyID,o,i,s,a,l,u,c;for(l=0,u=r.length;l<u;++l)if(o=r[l],i=o.mark,i.marktype!==s&&(s=i.marktype,a=I_[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Wet(o,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(o.exit){a.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(a,c._svg,c)):o._svg&&(c=o._svg.parentNode,c&&c.removeChild(o._svg)),o._svg=null;continue}o=a.nested?i.items[0]:o,o._update!==n&&(!o._svg||!o._svg.ownerSVGElement?(this._dirtyAll=!1,Wet(o,n)):this._update(a,o._svg,o),o._update=n)}return!this._dirtyAll}mark(r,n,o,i){if(!this.isDirty(n))return n._svg;let s=this._svg,a=n.marktype,l=I_[a],u=n.interactive===!1?"none":null,c=l.tag==="g",f=qet(n,r,o,"g",s);if(a!=="group"&&i!=null&&!i.includes(a))return xm(f,0),n._svg;f.setAttribute("class",dtt(n));let d=Ctt(n);for(let g in d)Tc(f,g,d[g]);c||Tc(f,"pointer-events",u),Tc(f,"clip-path",n.clip?kge(this,n,n.group):null);let p=null,h=0,m=g=>{let y=this.isDirty(g),b=qet(g,f,p,l.tag,s);y&&(this._update(l,b,g),c&&knr(this,b,g,i)),p=b,++h};return l.nested?n.items.length&&m(n.items[0]):Sy(n,m),xm(f,h),f}_update(r,n,o){vv=n,Tu=n.__values__,Stt(g4,o),r.attr(g4,o,this);let i=Dnr[r.type];i&&i.call(this,r,n,o),vv&&this.style(vv,o)}style(r,n){if(n!=null){for(let o in rY){let i=o==="font"?pY(n):n[o];if(i===Tu[o])continue;let s=rY[o];i==null?r.removeAttribute(s):(Tge(i)&&(i=Het(i,this._defs.gradient,Dtt())),r.setAttribute(s,i+"")),Tu[o]=i}for(let o in nY)GH(r,nY[o],n[o])}}defs(){let r=this._svg,n=this._defs,o=n.el,i=0;for(let s in n.gradient)o||(n.el=o=sl(r,f4+1,"defs",Fa)),i=Tnr(o,n.gradient[s],i);for(let s in n.clipping)o||(n.el=o=sl(r,f4+1,"defs",Fa)),i=Anr(o,n.clipping[s],i);o&&(i===0?(r.removeChild(o),n.el=null):xm(o,i))}_clearDefs(){let r=this._defs;r.gradient={},r.clipping={}}};vv=null,Tu=null,Dnr={group(t,r,n){let o=vv=r.childNodes[2];Tu=o.__values__,t.foreground(g4,n,this),Tu=r.__values__,vv=r.childNodes[1],t.content(g4,n,this);let i=vv=r.childNodes[0];t.background(g4,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==Tu.events&&(Tc(o,"pointer-events",s),Tc(i,"pointer-events",s),Tu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;Tc(o,"display",null),this.style(i,n),Tc(i,"stroke",null),a&&(n.fill=null),Tu=o.__values__,this.style(o,n),a&&(n.fill=a),vv=null}else Tc(o,"display","none")},image(t,r,n){n.smooth===!1?(GH(r,"image-rendering","optimizeSpeed"),GH(r,"image-rendering","pixelated")):GH(r,"image-rendering",null)},text(t,r,n){let o=E4(n),i,s,a,l;_c(o)?(s=o.map(u=>k_(n,u)),i=s.join(`
`),i!==Tu.text&&(xm(r,0),a=r.ownerDocument,l=wT(n),s.forEach((u,c)=>{let f=bT(a,"tspan",Fa);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),Tu.text=i)):(s=k_(n,o),s!==Tu.text&&(r.textContent=s,Tu.text=s)),Tc(r,"font-family",pY(n)),Tc(r,"font-size",_v(n)+"px"),Tc(r,"font-style",n.fontStyle),Tc(r,"font-variant",n.fontVariant),Tc(r,"font-weight",n.fontWeight)}};Cge=class extends ZN{constructor(r){super(r),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(r){let n=Att();n.open("svg",uv({},b4,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let o=this._bgcolor;return o&&o!=="transparent"&&o!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:o}).close(),n.open("g",Itt,{transform:"translate("+this._origin+")"}),this.mark(n,r),n.close(),this.defs(n),this._text=n.close()+"",this}mark(r,n){let o=I_[n.marktype],i=o.tag,s=[Stt,o.attr];r.open("g",{class:dtt(n),"clip-path":n.clip?kge(this,n,n.group):null},Ctt(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});let a=l=>{let u=this.href(l);if(u&&r.open("a",u),r.open(i,this.attr(n,l,s,i!=="g"?i:null)),i==="text"){let c=E4(l);if(_c(c)){let f={x:0,dy:wT(l)};for(let d=0;d<c.length;++d)r.open("tspan",d?f:null).text(k_(l,c[d])).close()}else r.text(k_(l,c))}else if(i==="g"){let c=l.strokeForeground,f=l.fill,d=l.stroke;c&&d&&(l.stroke=null),r.open("path",this.attr(n,l,o.background,"bgrect")).close(),r.open("g",this.attr(n,l,o.content)),Sy(l,p=>this.mark(r,p)),r.close(),c&&d?(f&&(l.fill=null),l.stroke=d,r.open("path",this.attr(n,l,o.foreground,"bgrect")).close(),f&&(l.fill=f)):r.open("path",this.attr(n,l,o.foreground,"bgfore")).close()}r.close(),u&&r.close()};return o.nested?n.items&&n.items.length&&a(n.items[0]):Sy(n,a),r.close()}href(r){let n=r.href,o;if(n){if(o=this._hrefs&&this._hrefs[n])return o;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(r,n,o,i){let s={},a=(l,u,c,f)=>{s[f||l]=u};return Array.isArray(o)?o.forEach(l=>l(a,n,this)):o(a,n,this),i&&Mnr(s,n,r,i,this._defs),s}defs(r){let n=this._defs.gradient,o=this._defs.clipping;if(Object.keys(n).length+Object.keys(o).length!==0){r.open("defs");for(let s in n){let a=n[s],l=a.stops;a.gradient==="radial"?(r.open("pattern",{id:WH+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),r.close(),r.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):r.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let u=0;u<l.length;++u)r.open("stop",{offset:l[u].offset,"stop-color":l[u].color}).close();r.close()}for(let s in o){let a=o[s];r.open("clipPath",{id:s}),a.path?r.open("path",{d:a.path}).close():r.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),r.close()}r.close()}}};S_={svgMarkTypes:["text"],svgOnTop:!0,debug:!1},iY=class extends ZN{constructor(r){super(r),this._svgRenderer=new oY(r),this._canvasRenderer=new x4(r)}initialize(r,n,o,i,s){this._root_el=sl(r,0,"div");let a=sl(this._root_el,0,"div"),l=sl(this._root_el,1,"div");return this._root_el.style.position="relative",S_.debug||(a.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=S_.svgOnTop?l:a,this._canvasEl=S_.svgOnTop?a:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,o,i,s),this._svgRenderer.initialize(this._svgEl,n,o,i,s),super.initialize(r,n,o,i,s)}dirty(r){return S_.svgMarkTypes.includes(r.mark.marktype)?this._svgRenderer.dirty(r):this._canvasRenderer.dirty(r),this}_render(r,n){let i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!S_.svgMarkTypes.includes(s));this._svgRenderer.render(r,S_.svgMarkTypes),this._canvasRenderer.render(r,i)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svgRenderer.resize(r,n,o,i),this._canvasRenderer.resize(r,n,o,i),this}background(r){return S_.svgOnTop?this._canvasRenderer.background(r):this._svgRenderer.background(r),this}},Ege=class extends tY{constructor(r,n){super(r,n)}initialize(r,n,o){let i=sl(sl(r,0,"div"),S_.svgOnTop?0:1,"div");return super.initialize(i,n,o)}},Fnr="canvas",Onr="hybrid",Rnr="png",Pnr="svg",Lnr="none",v4={};v4[Fnr]=v4[Rnr]={renderer:x4,headless:x4,handler:tY};v4[Pnr]={renderer:oY,headless:Cge,handler:Sge};v4[Onr]={renderer:iY,headless:iY,handler:Ege};v4[Lnr]={};fge=new bf});var r0e={};fn(r0e,{bound:()=>Ztt,identifier:()=>t0e,mark:()=>Qtt,overlap:()=>Jtt,render:()=>trt,viewlayout:()=>nrt});function Ztt(t){et.call(this,null,t)}function gY(t,r,n){return r(t.bounds.clear(),t,n)}function t0e(t){et.call(this,0,t)}function Xnr(t){return t._signals[Ftt]||(t._signals[Ftt]=t.add(0))}function Qtt(t){et.call(this,null,t)}function Knr(t){let r=t.groups,n=t.parent;return r&&r.size===1?r.get(Object.keys(r.object)[0]):r&&n?r.lookup(n):null}function Jtt(t){et.call(this,null,t)}function trt(t){et.call(this,null,t)}function eM(t,r,n){return t[r]===n?0:(t[r]=n,1)}function Jnr(t){var r=t.items[0].orient;return r===vm||r===wm}function eor(t){let r=+t.grid;return[t.ticks?r++:-1,t.labels?r++:-1,r+ +t.domain]}function tor(t,r,n,o){var i=r.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,l=i.orient,u=eor(s),c=i.range,f=i.offset,d=i.position,p=i.minExtent,h=i.maxExtent,m=s.title&&i.items[u[2]].items[0],g=i.titlePadding,y=i.bounds,b=m&&Bge(m),x=0,v=0,w,_;switch(Au.clear().union(y),y.clear(),(w=u[0])>-1&&y.union(i.items[w].bounds),(w=u[1])>-1&&y.union(i.items[w].bounds),l){case tM:x=d||0,v=-f,_=Math.max(p,Math.min(h,-y.y1)),y.add(0,-_).add(c,0),m&&yY(t,m,_,g,b,0,-1,y);break;case vm:x=-f,v=d||0,_=Math.max(p,Math.min(h,-y.x1)),y.add(-_,0).add(0,c),m&&yY(t,m,_,g,b,1,-1,y);break;case wm:x=n+f,v=d||0,_=Math.max(p,Math.min(h,y.x2)),y.add(0,0).add(_,c),m&&yY(t,m,_,g,b,1,1,y);break;case M_:x=d||0,v=o+f,_=Math.max(p,Math.min(h,y.y2)),y.add(0,0).add(c,_),m&&yY(t,m,_,g,0,0,1,y);break;default:x=i.x,v=i.y}return wv(y.translate(x,v),i),eM(i,"x",x+a)|eM(i,"y",v+a)&&(i.bounds=Au,t.dirty(i),i.bounds=y,t.dirty(i)),i.mark.bounds.clear().union(y)}function yY(t,r,n,o,i,s,a,l){let u=r.bounds;if(r.auto){let c=a*(n+i+o),f=0,d=0;t.dirty(r),s?f=(r.x||0)-(r.x=c):d=(r.y||0)-(r.y=c),r.mark.bounds.clear().union(u.translate(-f,-d)),t.dirty(r)}l.union(u)}function ror(t){var r=t.items,n=r.length,o=0,i,s;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<n;++o)if(i=r[o],s=i.items,i.marktype===xY)switch(i.role){case Kge:case Qge:case Zge:break;case Utt:a.rowheaders.push(...s);break;case Vtt:a.rowfooters.push(...s);break;case Wtt:a.colheaders.push(...s);break;case qtt:a.colfooters.push(...s);break;case Gtt:a.rowtitle=s[0];break;case Htt:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function nor(t){return new bf().set(0,0,t.width||0,t.height||0)}function oor(t){let r=t.bounds.clone();return r.empty()?r.set(0,0,0,0):r.translate(-(t.x||0),-(t.y||0))}function Zi(t,r,n){let o=lv(t)?t[r]:t;return o??(n!==void 0?n:0)}function $tt(t){return t<0?Math.ceil(-t):0}function rrt(t,r,n){var o=!n.nodirty,i=n.bounds===e0e?nor:oor,s=Au.set(0,0,0,0),a=Zi(n.align,D_),l=Zi(n.align,N_),u=Zi(n.padding,D_),c=Zi(n.padding,N_),f=n.columns||r.length,d=f<=0?1:Math.ceil(r.length/f),p=r.length,h=Array(p),m=Array(f),g=0,y=Array(p),b=Array(d),x=0,v=Array(p),w=Array(p),_=Array(p),S,C,E,T,I,k,F,D,L,P,R;for(C=0;C<f;++C)m[C]=0;for(C=0;C<d;++C)b[C]=0;for(C=0;C<p;++C)k=r[C],I=_[C]=i(k),k.x=k.x||0,v[C]=0,k.y=k.y||0,w[C]=0,E=C%f,T=~~(C/f),g=Math.max(g,F=Math.ceil(I.x2)),x=Math.max(x,D=Math.ceil(I.y2)),m[E]=Math.max(m[E],F),b[T]=Math.max(b[T],D),h[C]=u+$tt(I.x1),y[C]=c+$tt(I.y1),o&&t.dirty(r[C]);for(C=0;C<p;++C)C%f===0&&(h[C]=0),C<f&&(y[C]=0);if(a===Yge)for(E=1;E<f;++E){for(R=0,C=E;C<p;C+=f)R<h[C]&&(R=h[C]);for(C=E;C<p;C+=f)h[C]=R+m[E-1]}else if(a===mY){for(R=0,C=0;C<p;++C)C%f&&R<h[C]&&(R=h[C]);for(C=0;C<p;++C)C%f&&(h[C]=R+g)}else for(a=!1,E=1;E<f;++E)for(C=E;C<p;C+=f)h[C]+=m[E-1];if(l===Yge)for(T=1;T<d;++T){for(R=0,C=T*f,S=C+f;C<S;++C)R<y[C]&&(R=y[C]);for(C=T*f;C<S;++C)y[C]=R+b[T-1]}else if(l===mY){for(R=0,C=f;C<p;++C)R<y[C]&&(R=y[C]);for(C=f;C<p;++C)y[C]=R+x}else for(l=!1,T=1;T<d;++T)for(C=T*f,S=C+f;C<S;++C)y[C]+=b[T-1];for(L=0,C=0;C<p;++C)L=h[C]+(C%f?L:0),v[C]+=L-r[C].x;for(E=0;E<f;++E)for(P=0,C=E;C<p;C+=f)P+=y[C],w[C]+=P-r[C].y;if(a&&Zi(n.center,D_)&&d>1)for(C=0;C<p;++C)I=a===mY?g:m[C%f],L=I-_[C].x2-r[C].x-v[C],L>0&&(v[C]+=L/2);if(l&&Zi(n.center,N_)&&f!==1)for(C=0;C<p;++C)I=l===mY?x:b[~~(C/f)],P=I-_[C].y2-r[C].y-w[C],P>0&&(w[C]+=P/2);for(C=0;C<p;++C)s.union(_[C].translate(v[C],w[C]));switch(L=Zi(n.anchor,Unr),P=Zi(n.anchor,Vnr),Zi(n.anchor,D_)){case Ac:L-=s.width();break;case Hge:L-=s.width()/2}switch(Zi(n.anchor,N_)){case Ac:P-=s.height();break;case Hge:P-=s.height()/2}for(L=Math.round(L),P=Math.round(P),s.clear(),C=0;C<p;++C)r[C].mark.bounds.clear();for(C=0;C<p;++C)k=r[C],k.x+=v[C]+=L,k.y+=w[C]+=P,s.union(k.mark.bounds.union(k.bounds.translate(v[C],w[C]))),o&&t.dirty(k);return s}function ior(t,r,n){var o=ror(r),i=o.marks,s=n.bounds===e0e?sor:aor,a=n.offset,l=n.columns||i.length,u=l<=0?1:Math.ceil(i.length/l),c=u*l,f,d,p,h,m,g,y;let b=rrt(t,i,n);b.empty()&&b.set(0,0,0,0),o.rowheaders&&(g=Zi(n.headerBand,N_,null),f=bY(t,o.rowheaders,i,l,u,-Zi(a,"rowHeader"),jtt,0,s,"x1",0,l,1,g)),o.colheaders&&(g=Zi(n.headerBand,D_,null),d=bY(t,o.colheaders,i,l,l,-Zi(a,"columnHeader"),jtt,1,s,"y1",0,1,l,g)),o.rowfooters&&(g=Zi(n.footerBand,N_,null),p=bY(t,o.rowfooters,i,l,u,Zi(a,"rowFooter"),Btt,0,s,"x2",l-1,l,1,g)),o.colfooters&&(g=Zi(n.footerBand,D_,null),h=bY(t,o.colfooters,i,l,l,Zi(a,"columnFooter"),Btt,1,s,"y2",c-l,1,l,g)),o.rowtitle&&(m=Zi(n.titleAnchor,N_),y=Zi(a,"rowTitle"),y=m===Ac?p+y:f-y,g=Zi(n.titleBand,N_,.5),ztt(t,o.rowtitle,y,0,b,g)),o.coltitle&&(m=Zi(n.titleAnchor,D_),y=Zi(a,"columnTitle"),y=m===Ac?h+y:d-y,g=Zi(n.titleBand,D_,.5),ztt(t,o.coltitle,y,1,b,g))}function sor(t,r){return r==="x1"?t.x||0:r==="y1"?t.y||0:r==="x2"?(t.x||0)+(t.width||0):r==="y2"?(t.y||0)+(t.height||0):void 0}function aor(t,r){return t.bounds[r]}function bY(t,r,n,o,i,s,a,l,u,c,f,d,p,h){var m=n.length,g=0,y=0,b,x,v,w,_,S,C,E,T;if(!m)return g;for(b=f;b<m;b+=d)n[b]&&(g=a(g,u(n[b],c)));if(!r.length)return g;for(r.length>i&&(t.warn("Grid headers exceed limit: "+i),r=r.slice(0,i)),g+=s,x=0,w=r.length;x<w;++x)t.dirty(r[x]),r[x].mark.bounds.clear();for(b=f,x=0,w=r.length;x<w;++x,b+=d){for(S=r[x],_=S.mark.bounds,v=b;v>=0&&(C=n[v])==null;v-=p);l?(E=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),T=g):(E=g,T=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),_.union(S.bounds.translate(E-(S.x||0),T-(S.y||0))),S.x=E,S.y=T,t.dirty(S),y=a(y,_[c])}return y}function ztt(t,r,n,o,i,s){if(r){t.dirty(r);var a=n,l=n;o?a=Math.round(i.x1+s*i.width()):l=Math.round(i.y1+s*i.height()),r.bounds.translate(a-(r.x||0),l-(r.y||0)),r.mark.bounds.clear().union(r.bounds),r.x=a,r.y=l,t.dirty(r)}}function lor(t,r){let n=t[r]||{};return(o,i)=>n[o]!=null?n[o]:t[o]!=null?t[o]:i}function uor(t,r){let n=-1/0;return t.forEach(o=>{o.offset!=null&&(n=Math.max(n,o.offset))}),n>-1/0?n:r}function cor(t,r,n,o,i,s,a){let l=lor(n,r),u=uor(t,l("offset",0)),c=l("anchor",Xge),f=c===Ac?1:c===Hge?.5:0,d={align:Yge,bounds:l("bounds",e0e),columns:l("direction")==="vertical"?1:t.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(r){case vm:d.anchor={x:Math.floor(o.x1)-u,column:Ac,y:f*(a||o.height()+2*o.y1),row:c};break;case wm:d.anchor={x:Math.ceil(o.x2)+u,y:f*(a||o.height()+2*o.y1),row:c};break;case tM:d.anchor={y:Math.floor(i.y1)-u,row:Ac,x:f*(s||i.width()+2*i.x1),column:c};break;case M_:d.anchor={y:Math.ceil(i.y2)+u,x:f*(s||i.width()+2*i.x1),column:c};break;case jnr:d.anchor={x:u,y:u};break;case Bnr:d.anchor={x:s-u,y:u,column:Ac};break;case $nr:d.anchor={x:u,y:a-u,row:Ac};break;case znr:d.anchor={x:s-u,y:a-u,column:Ac,row:Ac};break}return d}function dor(t,r){var n=r.items[0],o=n.datum,i=n.orient,s=n.bounds,a=n.x,l=n.y,u,c;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),hor(t,n,n.items[0].items[0]),s=por(n,s),u=2*n.padding,c=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),c=Math.ceil(s.height()+c)),o.type===Hnr&&mor(n.items[0].items[0].items[0].items),i!==Jge&&(n.x=a=0,n.y=l=0),n.width=u,n.height=c,wv(s.set(a,l,a+u,l+c),n),n.mark.bounds.clear().union(s),n}function por(t,r){return t.items.forEach(n=>r.union(n.bounds)),r.x1=t.padding,r.y1=t.padding,r}function hor(t,r,n){var o=r.padding,i=o-n.x,s=o-n.y;if(!r.datum.title)(i||s)&&T4(t,n,i,s);else{var a=r.items[1].items[0],l=a.anchor,u=r.titlePadding||0,c=o-a.x,f=o-a.y;switch(a.orient){case vm:i+=Math.ceil(a.bounds.width())+u;break;case wm:case M_:break;default:s+=a.bounds.height()+u}switch((i||s)&&T4(t,n,i,s),a.orient){case vm:f+=JN(r,n,a,l,1,1);break;case wm:c+=JN(r,n,a,Ac,0,0)+u,f+=JN(r,n,a,l,1,1);break;case M_:c+=JN(r,n,a,l,0,0),f+=JN(r,n,a,Ac,-1,0,1)+u;break;default:c+=JN(r,n,a,l,0,0)}(c||f)&&T4(t,a,c,f),(c=Math.round(a.bounds.x1-o))<0&&(T4(t,n,-c,0),T4(t,a,-c,0))}}function JN(t,r,n,o,i,s,a){let l=t.datum.type!=="symbol",u=n.datum.vgrad,c=l&&(s||!u)&&!a?r.items[0]:r,f=c.bounds[i?"y2":"x2"]-t.padding,d=u&&s?f:0,p=u&&s?0:f,h=i<=0?0:Bge(n);return Math.round(o===Xge?d:o===Ac?p-h:.5*(f-h))}function T4(t,r,n,o){r.x+=n,r.y+=o,r.bounds.translate(n,o),r.mark.bounds.translate(n,o),t.dirty(r)}function mor(t){let r=t.reduce((n,o)=>(n[o.column]=Math.max(o.bounds.x2-o.x,n[o.column]||0),n),{});t.forEach(n=>{n.width=r[n.column],n.height=n.bounds.y2-n.y})}function gor(t,r,n,o,i){var s=r.items[0],a=s.frame,l=s.orient,u=s.anchor,c=s.offset,f=s.padding,d=s.items[0].items[0],p=s.items[1]&&s.items[1].items[0],h=l===vm||l===wm?o:n,m=0,g=0,y=0,b=0,x=0,v;if(a!==xY?l===vm?(m=i.y2,h=i.y1):l===wm?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):l===vm&&(m=o,h=0),v=u===Xge?m:u===Ac?h:(m+h)/2,p&&p.text){switch(l){case tM:case M_:x=d.bounds.height()+f;break;case vm:b=d.bounds.width()+f;break;case wm:b=-d.bounds.width()-f;break}Au.clear().union(p.bounds),Au.translate(b-(p.x||0),x-(p.y||0)),eM(p,"x",b)|eM(p,"y",x)&&(t.dirty(p),p.bounds.clear().union(Au),p.mark.bounds.clear().union(Au),t.dirty(p)),Au.clear().union(p.bounds)}else Au.clear();switch(Au.union(d.bounds),l){case tM:g=v,y=i.y1-Au.height()-c;break;case vm:g=i.x1-Au.width()-c,y=v;break;case wm:g=i.x2+Au.width()+c,y=v;break;case M_:g=v,y=i.y2+c;break;default:g=s.x,y=s.y}return eM(s,"x",g)|eM(s,"y",y)&&(Au.translate(g,y),t.dirty(s),s.bounds.clear().union(Au),r.bounds.clear().union(Au),t.dirty(s)),s.bounds}function nrt(t){et.call(this,null,t)}function yor(t){return t&&t.mark.role!=="legend-entry"}function bor(t,r,n){var o=r.items,i=Math.max(0,r.width||0),s=Math.max(0,r.height||0),a=new bf().set(0,0,i,s),l=a.clone(),u=a.clone(),c=[],f,d,p,h,m,g;for(m=0,g=o.length;m<g;++m)switch(d=o[m],d.role){case Kge:h=Jnr(d)?l:u,h.union(tor(t,d,i,s));break;case Zge:f=d;break;case Qge:c.push(dor(t,d));break;case Gnr:case Wnr:case Utt:case Vtt:case Gtt:case Wtt:case qtt:case Htt:l.union(d.bounds),u.union(d.bounds);break;default:a.union(d.bounds)}if(c.length){let y={};c.forEach(b=>{p=b.orient||wm,p!==Jge&&(y[p]||(y[p]=[])).push(b)});for(let b in y){let x=y[b];rrt(t,x,cor(x,b,n.legends,l,u,i,s))}c.forEach(b=>{let x=b.bounds;if(x.equals(b._bounds)||(b.bounds=b._bounds,t.dirty(b),b.bounds=x,t.dirty(b)),n.autosize&&(n.autosize.type===Ytt||n.autosize.type===Xtt||n.autosize.type===Ktt))switch(b.orient){case vm:case wm:a.add(x.x1,0).add(x.x2,0);break;case tM:case M_:a.add(0,x.y1).add(0,x.y2)}else a.union(x)})}a.union(l).union(u),f&&a.union(gor(t,f,i,s,a)),r.clip&&a.set(0,0,r.width||0,r.height||0),xor(t,r,a,n)}function xor(t,r,n,o){let i=o.autosize||{},s=i.type;if(t._autosize<1||!s)return;let a=t._width,l=t._height,u=Math.max(0,r.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,r.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-f));if(i.contains===qnr){let m=t.padding();a-=m.left+m.right,l-=m.top+m.bottom}s===Jge?(c=0,d=0,u=a,f=l):s===Ytt?(u=Math.max(0,a-c-p),f=Math.max(0,l-d-h)):s===Xtt?(u=Math.max(0,a-c-p),l=f+d+h):s===Ktt?(a=u+c+p,f=Math.max(0,l-d-h)):s===Ynr&&(a=u+c+p,l=f+d+h),t._resizeView(a,l,u,f,[c,d],i.resize)}var tM,vm,wm,M_,jnr,Bnr,$nr,znr,Xge,Hge,Ac,Unr,Vnr,xY,Kge,Zge,Gnr,Wnr,Qge,Utt,Vtt,Gtt,Wtt,qtt,Htt,qnr,Hnr,Ytt,Xtt,Ktt,Ynr,Jge,mY,Yge,e0e,D_,N_,Ftt,Ott,ert,Rtt,Znr,Qnr,Ptt,Ltt,Au,jtt,Btt,ort=N(()=>{"use strict";tl();Mtt();HE();tM="top",vm="left",wm="right",M_="bottom",jnr="top-left",Bnr="top-right",$nr="bottom-left",znr="bottom-right",Xge="start",Hge="middle",Ac="end",Unr="x",Vnr="y",xY="group",Kge="axis",Zge="title",Gnr="frame",Wnr="scope",Qge="legend",Utt="row-header",Vtt="row-footer",Gtt="row-title",Wtt="column-header",qtt="column-footer",Htt="column-title",qnr="padding",Hnr="symbol",Ytt="fit",Xtt="fit-x",Ktt="fit-y",Ynr="pad",Jge="none",mY="all",Yge="each",e0e="flush",D_="column",N_="row";cv(Ztt,et,{transform(t,r){let n=r.dataflow,o=t.mark,i=o.marktype,s=I_[i],a=s.bound,l=o.bounds,u;if(s.nested)o.items.length&&n.dirty(o.items[0]),l=gY(o,a),o.items.forEach(c=>{c.bounds.clear().union(l)});else if(i===xY||t.modified())switch(r.visit(r.MOD,c=>n.dirty(c)),l.clear(),o.items.forEach(c=>l.union(gY(c,a))),o.role){case Kge:case Qge:case Zge:r.reflow()}else u=r.changed(r.REM),r.visit(r.ADD,c=>{l.union(gY(c,a))}),r.visit(r.MOD,c=>{u=u||l.alignsWith(c.bounds),n.dirty(c),l.union(gY(c,a))}),u&&(l.clear(),o.items.forEach(c=>l.union(c.bounds)));return Ntt(o),r.modifies("bounds")}});Ftt=":vega_identifier:";t0e.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};cv(t0e,et,{transform(t,r){let n=Xnr(r.dataflow),o=t.as,i=n.value;return r.visit(r.ADD,s=>s[o]=s[o]||++i),n.set(this.value=i),r}});cv(Qtt,et,{transform(t,r){let n=this.value;n||(n=r.dataflow.scenegraph().mark(t.markdef,Knr(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);let o=n.marktype===xY?Ige:aY;return r.visit(r.ADD,i=>o.call(i,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,r.reflow()),n.items=r.source,r}});Ott={parity:t=>t.filter((r,n)=>n%2?r.opacity=0:1),greedy:(t,r)=>{let n;return t.filter((o,i)=>!i||!ert(n.bounds,o.bounds,r)?(n=o,1):o.opacity=0)}},ert=(t,r,n)=>n>Math.max(r.x1-t.x2,t.x1-r.x2,r.y1-t.y2,t.y1-r.y2),Rtt=(t,r)=>{for(var n=1,o=t.length,i=t[0].bounds,s;n<o;i=s,++n)if(ert(i,s=t[n].bounds,r))return!0},Znr=t=>{let r=t.bounds;return r.width()>1&&r.height()>1},Qnr=(t,r,n)=>{var o=t.range(),i=new bf;return r===tM||r===M_?i.set(o[0],-1/0,o[1],1/0):i.set(-1/0,o[0],1/0,o[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Ptt=t=>(t.forEach(r=>r.opacity=1),t),Ltt=(t,r)=>t.reflow(r.modified()).modifies("opacity");cv(Jtt,et,{transform(t,r){let n=Ott[t.method]||Ott.parity,o=t.separation||0,i=r.materialize(r.SOURCE).source,s,a;if(!i||!i.length)return;if(!t.method)return t.modified("method")&&(Ptt(i),r=Ltt(r,t)),r;if(i=i.filter(Znr),!i.length)return;if(t.sort&&(i=i.slice().sort(t.sort)),s=Ptt(i),r=Ltt(r,t),s.length>=3&&Rtt(s,o)){do s=n(s,o);while(s.length>=3&&Rtt(s,o));s.length<3&&!cf(i).opacity&&(s.length>1&&(cf(s).opacity=0),cf(i).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(a=Qnr(t.boundScale,t.boundOrient,+t.boundTolerance),i.forEach(u=>{a(u)||(u.opacity=0)}));let l=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&l.union(u.bounds)}),r}});cv(trt,et,{transform(t,r){let n=r.dataflow;if(r.visit(r.ALL,o=>n.dirty(o)),r.fields&&r.fields.zindex){let o=r.source&&r.source[0];o&&(o.mark.zdirty=!0)}}});Au=new bf;jtt=(t,r)=>Math.floor(Math.min(t,r)),Btt=(t,r)=>Math.ceil(Math.max(t,r));cv(nrt,et,{transform(t,r){let n=r.dataflow;return t.mark.items.forEach(o=>{t.layout&&ior(n,o,t.layout),bor(n,o,t)}),yor(t.mark.group)?r.reflow():r}})});function ma(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Cy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var Ld=N(()=>{"use strict"});function nM(){var t=new Map,r=[],n=[],o=rM;function i(s){var a=s+"",l=t.get(a);if(!l){if(o!==rM)return o;t.set(a,l=r.push(s))}return n[(l-1)%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Map;for(let a of s){let l=a+"";t.has(l)||t.set(l,r.push(a))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return nM(r,n).unknown(o)},ma.apply(i,arguments),i}var rM,irt=N(()=>{"use strict";Ld();rM=Symbol("implicit")});function n0e(t){return function(){return t}}var srt=N(()=>{"use strict"});function oM(t){return+t}var o0e=N(()=>{"use strict"});function zl(t){return t}function i0e(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:n0e(isNaN(r)?NaN:.5)}function vor(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function wor(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=i0e(i,o),s=n(a,s)):(o=i0e(o,i),s=n(s,a)),function(l){return s(o(l))}}function _or(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=i0e(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=lm(t,l,1,o)-1;return s[u](i[u](l))}}function Ey(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _T(){var t=art,r=art,n=Cu,o,i,s,a=zl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==zl&&(a=vor(t[0],t[p-1])),l=p>2?_or:wor,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),Eu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,oM),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=vy,f()},d.clamp=function(p){return arguments.length?(a=p?!0:zl,f()):a!==zl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function A4(){return _T()(zl,zl)}var art,F_=N(()=>{"use strict";qo();pT();srt();o0e();art=[0,1]});function ST(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var vY=N(()=>{"use strict"});function Ty(t){return t=ST(Math.abs(t)),t?t[1]:NaN}var k4=N(()=>{"use strict";vY()});function lrt(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var urt=N(()=>{"use strict"});function crt(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var frt=N(()=>{"use strict"});function jd(t){return new s0e(t)}function s0e(t){if(!(r=Sor.exec(t)))throw new Error("invalid format: "+t);var r;this.fill=r[1]||" ",this.align=r[2]||">",this.sign=r[3]||"-",this.symbol=r[4]||"",this.zero=!!r[5],this.width=r[6]&&+r[6],this.comma=!!r[7],this.precision=r[8]&&+r[8].slice(1),this.trim=!!r[9],this.type=r[10]||""}var Sor,a0e=N(()=>{"use strict";Sor=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;jd.prototype=s0e.prototype;s0e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function drt(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(o>0){if(!+t[n])break e;o=0}break}return o>0?t.slice(0,o)+t.slice(i+1):t}var prt=N(()=>{"use strict"});function hrt(t,r){var n=ST(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(l0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+ST(t,Math.max(0,r+s-1))[0]}var l0e,u0e=N(()=>{"use strict";vY()});function c0e(t,r){var n=ST(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var mrt=N(()=>{"use strict";vY()});var f0e,grt=N(()=>{"use strict";u0e();mrt();f0e={"%":function(t,r){return(t*100).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return c0e(t*100,r)},r:c0e,s:hrt,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}});function d0e(t){return t}var yrt=N(()=>{"use strict"});function wY(t){var r=t.grouping&&t.thousands?lrt(t.grouping,t.thousands):d0e,n=t.currency,o=t.decimal,i=t.numerals?crt(t.numerals):d0e,s=t.percent||"%";function a(u){u=jd(u);var c=u.fill,f=u.align,d=u.sign,p=u.symbol,h=u.zero,m=u.width,g=u.comma,y=u.precision,b=u.trim,x=u.type;x==="n"?(g=!0,x="g"):f0e[x]||(y==null&&(y=12),b=!0,x="g"),(h||c==="0"&&f==="=")&&(h=!0,c="0",f="=");var v=p==="$"?n[0]:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w=p==="$"?n[1]:/[%p]/.test(x)?s:"",_=f0e[x],S=/[defgprs%]/.test(x);y=y==null?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function C(E){var T=v,I=w,k,F,D;if(x==="c")I=_(E)+I,E="";else{E=+E;var L=E<0;if(E=_(Math.abs(E),y),b&&(E=drt(E)),L&&+E==0&&(L=!1),T=(L?d==="("?d:"-":d==="-"||d==="("?"":d)+T,I=(x==="s"?brt[8+l0e/3]:"")+I+(L&&d==="("?")":""),S){for(k=-1,F=E.length;++k<F;)if(D=E.charCodeAt(k),48>D||D>57){I=(D===46?o+E.slice(k+1):E.slice(k))+I,E=E.slice(0,k);break}}}g&&!h&&(E=r(E,1/0));var P=T.length+E.length+I.length,R=P<m?new Array(m-P+1).join(c):"";switch(g&&h&&(E=r(R+E,R.length?m-I.length:1/0),R=""),f){case"<":E=T+E+I+R;break;case"=":E=T+R+E+I;break;case"^":E=R.slice(0,P=R.length>>1)+T+E+I+R.slice(P);break;default:E=R+T+E+I;break}return i(E)}return C.toString=function(){return u+""},C}function l(u,c){var f=a((u=jd(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(Ty(c)/3)))*3,p=Math.pow(10,-d),h=brt[8+d/3];return function(m){return f(p*m)+h}}return{format:a,formatPrefix:l}}var brt,p0e=N(()=>{"use strict";k4();urt();frt();a0e();prt();grt();u0e();yrt();brt=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function SY(t){return _Y=wY(t),_m=_Y.format,CT=_Y.formatPrefix,_Y}var _Y,_m,CT,xrt=N(()=>{"use strict";p0e();SY({decimal:".",thousands:",",grouping:[3],currency:["$",""]})});function iM(t){return Math.max(0,-Ty(Math.abs(t)))}var vrt=N(()=>{"use strict";k4()});function sM(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ty(r)/3)))*3-Ty(Math.abs(t)))}var wrt=N(()=>{"use strict";k4()});function aM(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Ty(r)-Ty(t))+1}var _rt=N(()=>{"use strict";k4()});var h0e={};fn(h0e,{format:()=>_m,formatDefaultLocale:()=>SY,formatLocale:()=>wY,formatPrefix:()=>CT,formatSpecifier:()=>jd,precisionFixed:()=>iM,precisionPrefix:()=>sM,precisionRound:()=>aM});var ET=N(()=>{"use strict";xrt();p0e();a0e();vrt();wrt();_rt()});function lM(t,r,n,o){var i=yc(t,r,n),s;switch(o=jd(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=sM(i,a))&&(o.precision=s),CT(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=aM(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=iM(i))&&(o.precision=s-(o.type==="%")*2);break}}return _m(o)}var m0e=N(()=>{"use strict";qo();ET()});function Bd(t){var r=t.domain;return t.ticks=function(n){var o=r();return pN(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return lM(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=qW(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function I4(){var t=A4();return t.copy=function(){return Ey(t,I4())},ma.apply(t,arguments),Bd(t)}var O_=N(()=>{"use strict";qo();F_();Ld();m0e()});function D4(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,oM),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return D4(t).unknown(r)},t=arguments.length?Array.from(t,oM):[0,1],Bd(n)}var Srt=N(()=>{"use strict";O_();o0e()});function N4(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var g0e=N(()=>{"use strict"});function Crt(t){return Math.log(t)}function Ert(t){return Math.exp(t)}function Cor(t){return-Math.log(-t)}function Eor(t){return-Math.exp(-t)}function Tor(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Aor(t){return t===10?Tor:t===Math.E?Math.exp:function(r){return Math.pow(t,r)}}function kor(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(r){return Math.log(r)/t})}function Trt(t){return function(r){return-t(-r)}}function M4(t){var r=t(Crt,Ert),n=r.domain,o=10,i,s;function a(){return i=kor(o),s=Aor(o),n()[0]<0?(i=Trt(i),s=Trt(s),t(Cor,Eor)):t(Crt,Ert),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=function(l){var u=n(),c=u[0],f=u[u.length-1],d;(d=f<c)&&(p=c,c=f,f=p);var p=i(c),h=i(f),m,g,y,b=l==null?10:+l,x=[];if(!(o%1)&&h-p<b){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(g=1,m=s(p);g<o;++g)if(y=m*g,!(y<c)){if(y>f)break;x.push(y)}}else for(;p<=h;++p)for(g=o-1,m=s(p);g>=1;--g)if(y=m*g,!(y<c)){if(y>f)break;x.push(y)}x.length*2<b&&(x=pN(c,f,b))}else x=pN(p,h,Math.min(h-p,b)).map(s);return d?x.reverse():x},r.tickFormat=function(l,u){if(u==null&&(u=o===10?".0e":","),typeof u!="function"&&(u=_m(u)),l===1/0)return u;l==null&&(l=10);var c=Math.max(1,o*l/r.ticks().length);return function(f){var d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=function(){return n(N4(n(),{floor:function(l){return s(Math.floor(i(l)))},ceil:function(l){return s(Math.ceil(i(l)))}}))},r}function F4(){var t=M4(_T()).domain([1,10]);return t.copy=function(){return Ey(t,F4()).base(t.base())},ma.apply(t,arguments),t}var CY=N(()=>{"use strict";qo();ET();g0e();F_();Ld()});function Art(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function krt(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function O4(t){var r=1,n=t(Art(r),krt(r));return n.constant=function(o){return arguments.length?t(Art(r=+o),krt(r)):r},Bd(n)}function R4(){var t=O4(_T());return t.copy=function(){return Ey(t,R4()).constant(t.constant())},ma.apply(t,arguments)}var EY=N(()=>{"use strict";O_();F_();Ld()});function Irt(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function Ior(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Dor(t){return t<0?-t*t:t*t}function P4(t){var r=t(zl,zl),n=1;function o(){return n===1?t(zl,zl):n===.5?t(Ior,Dor):t(Irt(n),Irt(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},Bd(r)}function uM(){var t=P4(_T());return t.copy=function(){return Ey(t,uM()).exponent(t.exponent())},ma.apply(t,arguments),t}function y0e(){return uM.apply(null,arguments).exponent(.5)}var TY=N(()=>{"use strict";O_();F_();Ld()});function L4(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=AL(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[lm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Np),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return L4().domain(t).range(r).unknown(o)},ma.apply(s,arguments)}var Drt=N(()=>{"use strict";qo();Ld()});function j4(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[lm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return j4().domain([t,r]).range(i).unknown(s)},ma.apply(Bd(a),arguments)}var Nrt=N(()=>{"use strict";qo();O_();Ld()});function B4(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[lm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return B4().domain(t).range(r).unknown(n)},ma.apply(i,arguments)}var Mrt=N(()=>{"use strict";qo();Ld()});function b0e(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function x0e(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $4(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function cM(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=z4(i),f=U4(i),d=z4(s),p=U4(s),h=z4(a),m=U4(a),g=z4(l),y=U4(l),b=z4(u),x=U4(u),v={a:V,A:G,b:U,B:H,c:null,d:jrt,e:jrt,f:Jor,g:uir,G:fir,H:Kor,I:Zor,j:Qor,L:Vrt,m:eir,M:tir,p:X,q:fe,Q:zrt,s:Urt,S:rir,u:nir,U:oir,V:iir,w:sir,W:air,x:null,X:null,y:lir,Y:cir,Z:dir,"%":$rt},w={a:$,A:M,b:z,B:q,c:null,d:Brt,e:Brt,f:gir,g:Tir,G:kir,H:pir,I:hir,j:mir,L:Wrt,m:yir,M:bir,p:ee,q:ae,Q:zrt,s:Urt,S:xir,u:vir,U:wir,V:_ir,w:Sir,W:Cir,x:null,X:null,y:Eir,Y:Air,Z:Iir,"%":$rt},_={a:I,A:k,b:F,B:D,c:L,d:Prt,e:Prt,f:qor,g:Rrt,G:Ort,H:Lrt,I:Lrt,j:Uor,L:Wor,m:zor,M:Vor,p:T,q:$or,Q:Yor,s:Xor,S:Gor,u:Ror,U:Por,V:Lor,w:Oor,W:jor,x:P,X:R,y:Rrt,Y:Ort,Z:Bor,"%":Hor};v.x=S(n,v),v.X=S(o,v),v.c=S(r,v),w.x=S(n,w),w.X=S(o,w),w.c=S(r,w);function S(Q,le){return function(ie){var K=[],ge=-1,ne=0,ye=Q.length,xe,De,Te;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(K.push(Q.slice(ne,ge)),(De=Frt[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):De=xe==="e"?" ":"0",(Te=le[xe])&&(xe=Te(ie,De)),K.push(xe),ne=ge+1);return K.push(Q.slice(ne,ge)),K.join("")}}function C(Q,le){return function(ie){var K=$4(1900,void 0,1),ge=E(K,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(le&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(ne=x0e($4(K.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?vN.ceil(ne):vN(ne),ne=kd.offset(ne,(K.V-1)*7),K.y=ne.getUTCFullYear(),K.m=ne.getUTCMonth(),K.d=ne.getUTCDate()+(K.w+6)%7):(ne=b0e($4(K.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?xN.ceil(ne):xN(ne),ne=Td.offset(ne,(K.V-1)*7),K.y=ne.getFullYear(),K.m=ne.getMonth(),K.d=ne.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),ye="Z"in K?x0e($4(K.y,0,1)).getUTCDay():b0e($4(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(ye+5)%7:K.w+K.U*7-(ye+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,x0e(K)):b0e(K)}}function E(Q,le,ie,K){for(var ge=0,ne=le.length,ye=ie.length,xe,De;ge<ne;){if(K>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),De=_[xe in Frt?le.charAt(ge++):xe],!De||(K=De(Q,ie,K))<0)return-1}else if(xe!=ie.charCodeAt(K++))return-1}return K}function T(Q,le,ie){var K=c.exec(le.slice(ie));return K?(Q.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function I(Q,le,ie){var K=h.exec(le.slice(ie));return K?(Q.w=m.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(Q,le,ie){var K=d.exec(le.slice(ie));return K?(Q.w=p.get(K[0].toLowerCase()),ie+K[0].length):-1}function F(Q,le,ie){var K=b.exec(le.slice(ie));return K?(Q.m=x.get(K[0].toLowerCase()),ie+K[0].length):-1}function D(Q,le,ie){var K=g.exec(le.slice(ie));return K?(Q.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function P(Q,le,ie){return E(Q,n,le,ie)}function R(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function fe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function M(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=S(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=C(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=S(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=C(Q+="",!0);return le.toString=function(){return Q},le}}}function co(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function For(t){return t.replace(Mor,"\\$&")}function z4(t){return new RegExp("^(?:"+t.map(For).join("|")+")","i")}function U4(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function Oor(t,r,n){var o=al.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function Ror(t,r,n){var o=al.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function Por(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function Lor(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function jor(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function Ort(t,r,n){var o=al.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function Rrt(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function Bor(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function $or(t,r,n){var o=al.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function zor(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function Prt(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function Uor(t,r,n){var o=al.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function Lrt(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function Vor(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function Gor(t,r,n){var o=al.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function Wor(t,r,n){var o=al.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function qor(t,r,n){var o=al.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function Hor(t,r,n){var o=Nor.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function Yor(t,r,n){var o=al.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function Xor(t,r,n){var o=al.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function jrt(t,r){return co(t.getDate(),r,2)}function Kor(t,r){return co(t.getHours(),r,2)}function Zor(t,r){return co(t.getHours()%12||12,r,2)}function Qor(t,r){return co(1+Td.count(Ad(t),t),r,3)}function Vrt(t,r){return co(t.getMilliseconds(),r,3)}function Jor(t,r){return Vrt(t,r)+"000"}function eir(t,r){return co(t.getMonth()+1,r,2)}function tir(t,r){return co(t.getMinutes(),r,2)}function rir(t,r){return co(t.getSeconds(),r,2)}function nir(t){var r=t.getDay();return r===0?7:r}function oir(t,r){return co(Fp.count(Ad(t)-1,t),r,2)}function Grt(t){var r=t.getDay();return r>=4||r===0?Zw(t):Zw.ceil(t)}function iir(t,r){return t=Grt(t),co(Zw.count(Ad(t),t)+(Ad(t).getDay()===4),r,2)}function sir(t){return t.getDay()}function air(t,r){return co(xN.count(Ad(t)-1,t),r,2)}function lir(t,r){return co(t.getFullYear()%100,r,2)}function uir(t,r){return t=Grt(t),co(t.getFullYear()%100,r,2)}function cir(t,r){return co(t.getFullYear()%1e4,r,4)}function fir(t,r){var n=t.getDay();return t=n>=4||n===0?Zw(t):Zw.ceil(t),co(t.getFullYear()%1e4,r,4)}function dir(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+co(r/60|0,"0",2)+co(r%60,"0",2)}function Brt(t,r){return co(t.getUTCDate(),r,2)}function pir(t,r){return co(t.getUTCHours(),r,2)}function hir(t,r){return co(t.getUTCHours()%12||12,r,2)}function mir(t,r){return co(1+kd.count(Id(t),t),r,3)}function Wrt(t,r){return co(t.getUTCMilliseconds(),r,3)}function gir(t,r){return Wrt(t,r)+"000"}function yir(t,r){return co(t.getUTCMonth()+1,r,2)}function bir(t,r){return co(t.getUTCMinutes(),r,2)}function xir(t,r){return co(t.getUTCSeconds(),r,2)}function vir(t){var r=t.getUTCDay();return r===0?7:r}function wir(t,r){return co(Op.count(Id(t)-1,t),r,2)}function qrt(t){var r=t.getUTCDay();return r>=4||r===0?Jw(t):Jw.ceil(t)}function _ir(t,r){return t=qrt(t),co(Jw.count(Id(t),t)+(Id(t).getUTCDay()===4),r,2)}function Sir(t){return t.getUTCDay()}function Cir(t,r){return co(vN.count(Id(t)-1,t),r,2)}function Eir(t,r){return co(t.getUTCFullYear()%100,r,2)}function Tir(t,r){return t=qrt(t),co(t.getUTCFullYear()%100,r,2)}function Air(t,r){return co(t.getUTCFullYear()%1e4,r,4)}function kir(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Jw(t):Jw.ceil(t),co(t.getUTCFullYear()%1e4,r,4)}function Iir(){return"+0000"}function $rt(){return"%"}function zrt(t){return+t}function Urt(t){return Math.floor(+t/1e3)}var Frt,al,Nor,Mor,v0e=N(()=>{"use strict";RL();Frt={"-":"",_:" ",0:"0"},al=/^\s*\d+/,Nor=/^%/,Mor=/[\\^$*+?|[\]().{}]/g});function w0e(t){return fM=cM(t),R_=fM.format,AY=fM.parse,P_=fM.utcFormat,kY=fM.utcParse,fM}var fM,R_,AY,P_,kY,Hrt=N(()=>{"use strict";v0e();w0e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var dM=N(()=>{"use strict";Hrt();v0e()});function Dir(t){return new Date(t)}function Nir(t){return t instanceof Date?+t:+new Date(+t)}function IY(t,r,n,o,i,s,a,l,u,c){var f=A4(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(S){return(u(S)<S?h:l(S)<S?m:a(S)<S?g:s(S)<S?y:o(S)<S?i(S)<S?b:x:n(S)<S?v:w)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,Nir)):p().map(Dir)},f.ticks=function(S){var C=p();return t(C[0],C[C.length-1],S??10)},f.tickFormat=function(S,C){return C==null?_:c(C)},f.nice=function(S){var C=p();return(!S||typeof S.range!="function")&&(S=r(C[0],C[C.length-1],S??10)),S?p(N4(C,S)):f},f.copy=function(){return Ey(f,IY(t,r,n,o,i,s,a,l,u,c))},f}function DY(){return ma.apply(IY(Lde,jde,Ad,Qw,Fp,Td,zE,BE,xc,R_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var _0e=N(()=>{"use strict";RL();dM();F_();Ld();g0e()});function NY(){return ma.apply(IY(Rde,Pde,Id,e_,Op,kd,GE,VE,xc,P_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var Yrt=N(()=>{"use strict";RL();dM();_0e();Ld()});function MY(){var t=0,r=1,n,o,i,s,a=zl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(Cu),c.rangeRound=f(vy),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function Sv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function pM(){var t=Bd(MY()(zl));return t.copy=function(){return Sv(t,pM())},Cy.apply(t,arguments)}function FY(){var t=M4(MY()).domain([1,10]);return t.copy=function(){return Sv(t,FY()).base(t.base())},Cy.apply(t,arguments)}function OY(){var t=O4(MY());return t.copy=function(){return Sv(t,OY()).constant(t.constant())},Cy.apply(t,arguments)}function V4(){var t=P4(MY());return t.copy=function(){return Sv(t,V4()).exponent(t.exponent())},Cy.apply(t,arguments)}function S0e(){return V4.apply(null,arguments).exponent(.5)}var C0e=N(()=>{"use strict";pT();F_();Ld();O_();CY();EY();TY()});function RY(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=zl,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=dT(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(Cu),h.rangeRound=m(vy),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function G4(){var t=Bd(RY()(zl));return t.copy=function(){return Sv(t,G4())},Cy.apply(t,arguments)}function PY(){var t=M4(RY()).domain([.1,1,10]);return t.copy=function(){return Sv(t,PY()).base(t.base())},Cy.apply(t,arguments)}function LY(){var t=O4(RY());return t.copy=function(){return Sv(t,LY()).constant(t.constant())},Cy.apply(t,arguments)}function W4(){var t=P4(RY());return t.copy=function(){return Sv(t,W4()).exponent(t.exponent())},Cy.apply(t,arguments)}function E0e(){return W4.apply(null,arguments).exponent(.5)}var Xrt=N(()=>{"use strict";pT();F_();Ld();O_();CY();C0e();EY();TY()});var T0e=N(()=>{"use strict";Srt();O_();CY();EY();irt();TY();Drt();Nrt();Mrt();_0e();Yrt();C0e();Xrt();m0e()});function q4(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function Fir(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function Oir(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function D0e(){let t=nM().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=q4(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=ca(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,RE(h,g)-1),x=g===y?b:RE(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return D0e().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function Jrt(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Jrt(r())},t}function Rir(){return Jrt(D0e().paddingInner(1))}function Lir(t){return Pir.call(t,em)}function ent(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(lm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=Lir(o),n):t.slice()},n.range=function(o){return arguments.length?(r=jir.call(o),n):r.slice()},n.tickFormat=function(o,i){return lM(t[0],Un(t),o??10,i)},n.copy=function(){return ent().domain(n.domain()).range(n.range())},n}function Bir(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?Fir(s):s.invertExtent?Oir(s):void 0),s.type=t,s};return o.metadata=vu(Br(n)),o}function Gn(t,r,n){return arguments.length>1?(jY[t]=Bir(t,r,n),this):N0e(t)?jY[t]:void 0}function N0e(t){return Pr(jY,t)}function IT(t,r){let n=jY[t];return n&&n.metadata[r]}function Q4(t){return IT(t,Oa)}function B_(t){return IT(t,K4)}function UY(t){return IT(t,Z4)}function M0e(t){return IT(t,Ay)}function $ir(t){return IT(t,I0e)}function F0e(t){return IT(t,Gp)}function O0e(t){return IT(t,TT)}function VY(t,r){let n=r[0],o=Un(r)-n;return function(i){return t(n+i*o)}}function gM(t,r,n){return dT(J4(r||"rgb",n),t)}function GY(t,r){let n=new Array(r),o=r+1;for(let i=0;i<r;)n[i]=t(++i/o);return n}function WY(t,r,n){let o=n-r,i,s,a;return!o||!Number.isFinite(o)?Ja(.5):(i=(s=t.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=Gn(s)().domain([r,n]).range([0,1]),zir.forEach(l=>t[l]?a[l](t[l]()):0),a)}function J4(t,r){let n=Hme[Uir(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function Uir(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function tnt(t){let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function rnt(t,r){for(let n in t)e5(n,r(t[n]))}function e5(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(Krt[t]=r,this):Krt[t]}function qY(t,r,n){let o;return X0(r)&&(t.bins&&(r=Math.max(r,t.bins.length)),n!=null&&(r=Math.min(r,Math.floor(EE(t.domain())/n||1)))),un(r)&&(o=r.step,r=r.interval),Jn(r)&&(r=t.type===L_?sv(r):t.type==j_?av(r):pt("Only time and utc scales accept interval strings."),o&&(r=r.every(o))),r}function R0e(t,r,n){let o=t.range(),i=o[0],s=Un(o),a=Hir;if(i>s&&(o=s,s=i,i=o,a=Yir),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],Un(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function HY(t,r){return t.bins?R0e(t,t.bins):t.ticks?t.ticks(r):t.domain()}function P0e(t,r,n,o,i,s){let a=r.type,l=qir;if(a===L_||i===L_)l=t.timeFormat(o);else if(a===j_||i===j_)l=t.utcFormat(o);else if(M0e(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=ont(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function ont(t,r,n){let o=HY(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function L0e(t,r){return t.bins?Zir(t.bins):t.type===Ay?ont(t,r,!0):A0e[t.type]?Kir(t[A0e[t.type]]()):HY(t,r)}function Xir(t,r,n){let o=r[int[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function Kir(t){let r=[-1/0].concat(t);return r.max=1/0,r}function Zir(t){let r=t.slice(0,-1);return r.max=Un(t),r}function j0e(t,r,n,o,i,s,a){let l=int[r.type]&&s!==L_&&s!==j_?Xir(t,r,i):P0e(t,r,n,i,s,a);return o===t5&&Qir(r)?Jir(l):o===Wir?esr(l):tsr(l)}function snt(t){let r=t.domain(),n=r.length-1,o=+r[0],i=+Un(r),s=i-o;if(t.type===X4){let a=n?s/n:.1;o-=a,i+=a,s=i-o}return a=>(a-o)/s}function rsr(t,r,n,o){let i=o||r.type;return Jn(n)&&$ir(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===L_?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===j_?t.utcFormat("%A, %d %B %Y, %X UTC"):j0e(t,r,5,null,n,o,!0)}function B0e(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=rsr(t,r,n.format,n.formatType);if(UY(r.type)){let s=L0e(r).slice(1).map(i),a=s.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(s.join(", "))}else if(B_(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(l)}else{let s=r.domain();return"values from ".concat(i(s[0])," to ").concat(i(Un(s)))}}var Mir,AT,Ay,hM,mM,H4,L_,j_,Sm,kT,TT,Y4,X4,BY,$Y,k0e,zY,Oa,K4,Z4,Gp,I0e,Pir,jir,jY,zir,Vir,Gir,Krt,t5,Wir,nnt,qir,Hir,Yir,A0e,int,Qir,Jir,Zrt,esr,tsr,Qrt,yM=N(()=>{"use strict";Ls();qo();T0e();T0e();pT();pT();_N();Mir="identity",AT="linear",Ay="log",hM="pow",mM="sqrt",H4="symlog",L_="time",j_="utc",Sm="sequential",kT="diverging",TT="quantile",Y4="quantize",X4="threshold",BY="ordinal",$Y="point",k0e="band",zY="bin-ordinal",Oa="continuous",K4="discrete",Z4="discretizing",Gp="interpolating",I0e="temporal";Pir=Array.prototype.map;jir=Array.prototype.slice;jY={};Gn(Mir,D4);Gn(AT,I4,Oa);Gn(Ay,F4,[Oa,Ay]);Gn(hM,uM,Oa);Gn(mM,y0e,Oa);Gn(H4,R4,Oa);Gn(L_,DY,[Oa,I0e]);Gn(j_,NY,[Oa,I0e]);Gn(Sm,pM,[Oa,Gp]);Gn("".concat(Sm,"-").concat(AT),pM,[Oa,Gp]);Gn("".concat(Sm,"-").concat(Ay),FY,[Oa,Gp,Ay]);Gn("".concat(Sm,"-").concat(hM),V4,[Oa,Gp]);Gn("".concat(Sm,"-").concat(mM),S0e,[Oa,Gp]);Gn("".concat(Sm,"-").concat(H4),OY,[Oa,Gp]);Gn("".concat(kT,"-").concat(AT),G4,[Oa,Gp]);Gn("".concat(kT,"-").concat(Ay),PY,[Oa,Gp,Ay]);Gn("".concat(kT,"-").concat(hM),W4,[Oa,Gp]);Gn("".concat(kT,"-").concat(mM),E0e,[Oa,Gp]);Gn("".concat(kT,"-").concat(H4),LY,[Oa,Gp]);Gn(TT,L4,[Z4,TT]);Gn(Y4,j4,Z4);Gn(X4,B4,Z4);Gn(zY,ent,[K4,Z4]);Gn(BY,nM,K4);Gn(k0e,D0e,K4);Gn($Y,Rir,K4);zir=["clamp","base","constant","exponent"];Vir={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Gir={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};Krt={};rnt(Gir,tnt);rnt(Vir,t=>gM(tnt(t)));t5="symbol",Wir="discrete",nnt="gradient",qir=t=>Hr(t)?t.map(r=>String(r)):String(t),Hir=(t,r)=>t[1]-r[1],Yir=(t,r)=>r[1]-t[1];A0e={[TT]:"quantiles",[Y4]:"thresholds",[X4]:"domain"},int={[TT]:"quantiles",[Y4]:"domain"};Qir=t=>A0e[t.type]||t.bins;Jir=t=>(r,n,o)=>{let i=Zrt(o[n+1],Zrt(o.max,1/0)),s=Qrt(r,t),a=Qrt(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},Zrt=(t,r)=>t??r,esr=t=>(r,n)=>n?t(r):null,tsr=t=>r=>t(r),Qrt=(t,r)=>Number.isFinite(t)?r(t):null});var G0e={};fn(G0e,{axisticks:()=>cnt,datajoin:()=>fnt,encode:()=>dnt,legendentries:()=>pnt,linkpath:()=>z0e,pie:()=>U0e,scale:()=>bnt,sortitems:()=>vnt,stack:()=>V0e});function cnt(t){et.call(this,null,t)}function fnt(t){et.call(this,null,t)}function nsr(){return Nn({})}function osr(t){let r=zw().test(n=>n.exit);return r.lookup=n=>r.get(t(n)),r}function dnt(t){et.call(this,null,t)}function pnt(t){et.call(this,[],t)}function z0e(t){et.call(this,{},t)}function U0e(t){et.call(this,null,t)}function xsr(t){let r=t.type;return!t.bins&&(r===AT||r===hM||r===mM)}function ynt(t){return Q4(t)&&t!==Sm}function bnt(t){et.call(this,null,t),this.modified(!0)}function wsr(t){var r=t.type,n="",o;return r===Sm?Sm+"-"+AT:(_sr(t)&&(o=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=o===2?Sm+"-":o===3?kT+"-":""),(n+r||AT).toLowerCase())}function _sr(t){let r=t.type;return Q4(r)&&r!==L_&&r!==j_&&(t.scheme||t.range&&t.range.length&&t.range.every(Jn))}function Ssr(t,r,n){let o=Csr(t,r.domainRaw,n);if(o>-1)return o;var i=r.domain,s=t.type,a=r.zero||r.zero===void 0&&xsr(t),l,u;if(!i)return 0;if(ynt(s)&&r.padding&&i[0]!==Un(i)&&(i=Esr(s,i,r.range,r.padding,r.exponent,r.constant)),(a||r.domainMin!=null||r.domainMax!=null||r.domainMid!=null)&&(l=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[l]<0&&(i[l]=0)),r.domainMin!=null&&(i[0]=r.domainMin),r.domainMax!=null&&(i[l]=r.domainMax),r.domainMid!=null)){u=r.domainMid;let c=u>i[l]?l+1:u<i[0]?0:l;c!==l&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(c,0,u)}return t.domain(xnt(s,i,n)),s===BY&&t.unknown(r.domainImplicit?rM:void 0),r.nice&&t.nice&&t.nice(r.nice!==!0&&qY(t,r.nice)||null),i.length}function Csr(t,r,n){return r?(t.domain(xnt(t.type,r,n)),r.length):-1}function Esr(t,r,n,o,i,s){var a=Math.abs(Un(n)-n[0]),l=a/(a-2*o),u=t===Ay?jce(r,null,l):t===mM?dW(r,null,l,.5):t===hM?dW(r,null,l,i||1):t===H4?Bce(r,null,l,s||1):Lce(r,null,l);return r=r.slice(),r[0]=u[0],r[r.length-1]=u[1],r}function xnt(t,r,n){if(M0e(t)){var o=Math.abs(r.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));o!==r.length&&n.warn("Log scale domain includes zero: "+$r(r))}return r}function Tsr(t,r,n){let o=r.bins;if(o&&!Hr(o)){let i=t.domain(),s=i[0],a=Un(i),l=o.step,u=o.start==null?s:o.start,c=o.stop==null?a:o.stop;l||pt("Scale bins parameter missing step property."),u<s&&(u=l*Math.ceil(s/l)),c>a&&(c=l*Math.floor(a/l)),o=ca(u,c+l/2,l)}return o?t.bins=o:t.bins&&delete t.bins,t.type===zY&&(o?!r.domain&&!r.domainRaw&&(t.domain(o),n=o.length):t.bins=t.domain()),n}function Asr(t,r,n){var o=t.type,i=r.round||!1,s=r.range;if(r.rangeStep!=null)s=ksr(o,r,n);else if(r.scheme&&(s=Isr(o,r,n),Dn(s))){if(t.interpolator)return t.interpolator(s);pt("Scale type ".concat(o," does not support interpolating color schemes."))}if(s&&F0e(o))return t.interpolator(gM($0e(s,r.reverse),r.interpolate,r.interpolateGamma));s&&r.interpolate&&t.interpolate?t.interpolate(J4(r.interpolate,r.interpolateGamma)):Dn(t.round)?t.round(i):Dn(t.rangeRound)&&t.interpolate(i?vy:Cu),s&&t.range($0e(s,r.reverse))}function ksr(t,r,n){t!==k0e&&t!==$Y&&pt("Only band and point scales support rangeStep.");var o=(r.paddingOuter!=null?r.paddingOuter:r.padding)||0,i=t===$Y?1:(r.paddingInner!=null?r.paddingInner:r.padding)||0;return[0,r.rangeStep*q4(n,i,o)]}function Isr(t,r,n){var o=r.schemeExtent,i,s;return Hr(r.scheme)?s=gM(r.scheme,r.interpolate,r.interpolateGamma):(i=r.scheme.toLowerCase(),s=e5(i),s||pt("Unrecognized scheme name: ".concat(r.scheme))),n=t===X4?n+1:t===zY?n-1:t===TT||t===Y4?+r.schemeCount||bsr:n,F0e(t)?lnt(s,o,r.reverse):Dn(s)?GY(lnt(s,o),n):t===BY?s:s.slice(0,n)}function lnt(t,r,n){return Dn(t)&&(r||n)?VY(t,$0e(r||[0,1],n)):t}function $0e(t,r){return r?t.slice().reverse():t}function vnt(t){et.call(this,null,t)}function V0e(t){et.call(this,null,t)}function Dsr(t,r,n,o,i){for(var s=(r-t.sum)/2,a=t.length,l=0,u;l<a;++l)u=t[l],u[o]=s,u[i]=s+=Math.abs(n(u))}function Nsr(t,r,n,o,i){for(var s=1/t.sum,a=0,l=t.length,u=0,c=0,f;u<l;++u)f=t[u],f[o]=a,f[i]=a=s*(c+=Math.abs(n(f)))}function Msr(t,r,n,o,i){for(var s=0,a=0,l=t.length,u=0,c,f;u<l;++u)f=t[u],c=+n(f),c<0?(f[o]=a,f[i]=a+=c):(f[o]=s,f[i]=s+=c)}function Fsr(t,r,n,o){var i=[],s=g=>g(f),a,l,u,c,f,d,p,h,m;if(r==null)i.push(t.slice());else for(a={},l=0,u=t.length;l<u;++l)f=t[l],d=r.map(s),p=a[d],p||(a[d]=p=[],i.push(p)),p.push(f);for(d=0,m=0,c=i.length;d<c;++d){for(p=i[d],l=0,h=0,u=p.length;l<u;++l)h+=Math.abs(o(p[l]));p.sum=h,h>m&&(m=h),n&&p.sort(n)}return i.max=m,i}var isr,ssr,asr,lsr,hnt,usr,mnt,csr,gnt,fsr,dsr,psr,hsr,msr,gsr,ysr,ant,bsr,vsr,unt,wnt,_nt,Snt,Cnt=N(()=>{"use strict";tl();yM();Ls();qo();pT();Dt(cnt,et,{transform(t,r){if(this.value&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.scale,a=t.count==null?t.values?t.values.length:10:t.count,l=qY(s,a,t.minstep),u=t.format||P0e(n,s,l,t.formatSpecifier,t.formatType,!!t.values),c=t.values?R0e(s,t.values,l):HY(s,l);return i&&(o.rem=i),i=c.map((f,d)=>Nn({index:d/(c.length-1||1),value:f,label:u(f)})),t.extra&&i.length&&i.push(Nn({index:-1,extra:{value:i[0].value},label:""})),o.source=i,o.add=i,this.value=i,o}});Dt(fnt,et,{transform(t,r){var n=r.dataflow,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.item||nsr,s=t.key||_r,a=this.value;return Hr(o.encode)&&(o.encode=null),a&&(t.modified("key")||r.modified(s))&&pt("DataJoin does not support modified key function or fields."),a||(r=r.addAll(),this.value=a=osr(s)),r.visit(r.ADD,l=>{let u=s(l),c=a.get(u);c?c.exit?(a.empty--,o.add.push(c)):o.mod.push(c):(c=i(l),a.set(u,c),o.add.push(c)),c.datum=l,c.exit=!1}),r.visit(r.MOD,l=>{let u=s(l),c=a.get(u);c&&(c.datum=l,o.mod.push(c))}),r.visit(r.REM,l=>{let u=s(l),c=a.get(u);l===c.datum&&!c.exit&&(o.rem.push(c),c.exit=!0,++a.empty)}),r.changed(r.ADD_MOD)&&o.modifies("datum"),(r.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),o}});Dt(dnt,et,{transform(t,r){var n=r.fork(r.ADD_REM),o=t.mod||!1,i=t.encoders,s=r.encode;if(Hr(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return r.StopPropagation;var a=s==="enter",l=i.update||Zx,u=i.enter||Zx,c=i.exit||Zx,f=(s&&!a?i[s]:l)||Zx;if(r.changed(r.ADD)&&(r.visit(r.ADD,d=>{u(d,t),l(d,t)}),n.modifies(u.output),n.modifies(l.output),f!==Zx&&f!==l&&(r.visit(r.ADD,d=>{f(d,t)}),n.modifies(f.output))),r.changed(r.REM)&&c!==Zx&&(r.visit(r.REM,d=>{c(d,t)}),n.modifies(c.output)),a||f!==Zx){let d=r.MOD|(t.modified()?r.REFLOW:0);a?(r.visit(d,p=>{let h=u(p,t)||o;(f(p,t)||h)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):r.visit(d,p=>{(f(p,t)||o)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:r.StopPropagation}});Dt(pnt,et,{transform(t,r){if(this.value!=null&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.type||t5,a=t.scale,l=+t.limit,u=qY(a,t.count==null?5:t.count,t.minstep),c=!!t.values||s===t5,f=t.format||j0e(n,a,u,s,t.formatSpecifier,t.formatType,c),d=t.values||L0e(a,u),p,h,m,g,y;return i&&(o.rem=i),s===t5?(l&&d.length>l?(r.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,l-1),y=!0):i=d,Dn(m=t.size)?(!t.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((b,x)=>Math.max(b,m(x,t)),0)):m=Ja(g=m||8),i=i.map((b,x)=>Nn({index:x,label:f(b,x,i),value:b,offset:g,size:m(b,t)})),y&&(y=d[i.length],i.push(Nn({index:i.length,label:"\u2026".concat(d.length-i.length," entries"),value:y,offset:g,size:m(y,t)})))):s===nnt?(p=a.domain(),h=WY(a,p[0],Un(p)),d.length<3&&!t.values&&p[0]!==Un(p)&&(d=[p[0],Un(p)]),i=d.map((b,x)=>Nn({index:x,label:f(b,x,d),value:b,perc:h(b)}))):(m=d.length-1,h=snt(a),i=d.map((b,x)=>Nn({index:x,label:f(b,x,d),value:b,perc:x?h(b):0,perc2:x===m?1:h(d[x+1])}))),o.source=i,o.add=i,this.value=i,o}});isr=t=>t.source.x,ssr=t=>t.source.y,asr=t=>t.target.x,lsr=t=>t.target.y;z0e.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Dt(z0e,et,{transform(t,r){var n=t.sourceX||isr,o=t.sourceY||ssr,i=t.targetX||asr,s=t.targetY||lsr,a=t.as||"path",l=t.orient||"vertical",u=t.shape||"line",c=ant.get(u+"-"+l)||ant.get(u);return c||pt("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),r.visit(r.SOURCE,f=>{f[a]=c(n(f),o(f),i(f),s(f))}),r.reflow(t.modified()).modifies(a)}});hnt=(t,r,n,o)=>"M"+t+","+r+"L"+n+","+o,usr=(t,r,n,o)=>hnt(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),mnt=(t,r,n,o)=>{var i=n-t,s=o-r,a=Math.sqrt(i*i+s*s)/2,l=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+r+"A"+a+","+a+" "+l+" 0 1 "+n+","+o},csr=(t,r,n,o)=>mnt(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),gnt=(t,r,n,o)=>{let i=n-t,s=o-r,a=.2*(i+s),l=.2*(s-i);return"M"+t+","+r+"C"+(t+a)+","+(r+l)+" "+(n+l)+","+(o-a)+" "+n+","+o},fsr=(t,r,n,o)=>gnt(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),dsr=(t,r,n,o)=>"M"+t+","+r+"V"+o+"H"+n,psr=(t,r,n,o)=>"M"+t+","+r+"H"+n+"V"+o,hsr=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+r*i+","+r*s+"A"+r+","+r+" 0 0,"+(u?1:0)+" "+r*a+","+r*l+"L"+o*a+","+o*l},msr=(t,r,n,o)=>{let i=(t+n)/2;return"M"+t+","+r+"C"+i+","+r+" "+i+","+o+" "+n+","+o},gsr=(t,r,n,o)=>{let i=(r+o)/2;return"M"+t+","+r+"C"+t+","+i+" "+n+","+i+" "+n+","+o},ysr=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=(r+o)/2;return"M"+r*i+","+r*s+"C"+u*i+","+u*s+" "+u*a+","+u*l+" "+o*a+","+o*l},ant=zw({line:hnt,"line-radial":usr,arc:mnt,"arc-radial":csr,curve:gnt,"curve-radial":fsr,"orthogonal-horizontal":dsr,"orthogonal-vertical":psr,"orthogonal-radial":hsr,"diagonal-horizontal":msr,"diagonal-vertical":gsr,"diagonal-radial":ysr});U0e.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Dt(U0e,et,{transform(t,r){var n=t.as||["startAngle","endAngle"],o=n[0],i=n[1],s=t.field||H0,a=t.startAngle||0,l=t.endAngle!=null?t.endAngle:2*Math.PI,u=r.source,c=u.map(s),f=c.length,d=a,p=(l-a)/mN(c),h=ca(f),m,g,y;for(t.sort&&h.sort((b,x)=>c[b]-c[x]),m=0;m<f;++m)y=c[h[m]],g=u[h[m]],g[o]=d,g[i]=d+=y*p;return this.value=c,r.reflow(t.modified()).modifies(n)}});bsr=5;vsr=vu(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);Dt(bnt,et,{transform(t,r){var n=r.dataflow,o=this.value,i=wsr(t);(!o||i!==o.type)&&(this.value=o=Gn(i)());for(i in t)if(!vsr[i]){if(i==="padding"&&ynt(o.type))continue;Dn(o[i])?o[i](t[i]):n.warn("Unsupported scale property: "+i)}return Asr(o,t,Tsr(o,t,Ssr(o,t,n))),r.fork(r.NO_SOURCE|r.NO_FIELDS)}});Dt(vnt,et,{transform(t,r){let n=t.modified("sort")||r.changed(r.ADD)||r.modified(t.sort.fields)||r.modified("datum");return n&&r.source.sort(iy(t.sort)),this.modified(n),r}});unt="zero",wnt="center",_nt="normalize",Snt=["y0","y1"];V0e.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:unt,values:[unt,wnt,_nt]},{name:"as",type:"string",array:!0,length:2,default:Snt}]};Dt(V0e,et,{transform(t,r){var n=t.as||Snt,o=n[0],i=n[1],s=iy(t.sort),a=t.field||H0,l=t.offset===wnt?Dsr:t.offset===_nt?Nsr:Msr,u,c,f,d;for(u=Fsr(r.source,t.groupby,s,a),c=0,f=u.length,d=u.max;c<f;++c)l(u[c],d,a,o,i);return r.reflow(t.modified()).modifies(n)}})});function ZY(t){return t>1?0:t<-1?Qr:Math.acos(t)}function ji(t){return t>1?Ho:t<-1?-Ho:Math.asin(t)}var Jt,DT,Qr,Ho,bM,Bs,Yo,Xr,Kr,Wp,_s,Qt,r5,YY,XY,NT,KY,Xt,ku,Xo,xM,An=N(()=>{"use strict";Jt=1e-6,DT=1e-12,Qr=Math.PI,Ho=Qr/2,bM=Qr/4,Bs=Qr*2,Yo=180/Qr,Xr=Qr/180,Kr=Math.abs,Wp=Math.atan,_s=Math.atan2,Qt=Math.cos,r5=Math.ceil,YY=Math.exp,XY=Math.hypot,NT=Math.log,KY=Math.pow,Xt=Math.sin,ku=Math.sign||function(t){return t>0?1:t<0?-1:0},Xo=Math.sqrt,xM=Math.tan});function Bi(){}var $_=N(()=>{"use strict"});function QY(t,r){t&&Tnt.hasOwnProperty(t.type)&&Tnt[t.type](t,r)}function W0e(t,r,n){var o=-1,i=t.length-n,s;for(r.lineStart();++o<i;)s=t[o],r.point(s[0],s[1],s[2]);r.lineEnd()}function Ant(t,r){var n=-1,o=t.length;for(r.polygonStart();++n<o;)W0e(t[n],r,1);r.polygonEnd()}function xf(t,r){t&&Ent.hasOwnProperty(t.type)?Ent[t.type](t,r):QY(t,r)}var Ent,Tnt,vM=N(()=>{"use strict";Ent={Feature:function(t,r){QY(t.geometry,r)},FeatureCollection:function(t,r){for(var n=t.features,o=-1,i=n.length;++o<i;)QY(n[o].geometry,r)}},Tnt={Sphere:function(t,r){r.sphere()},Point:function(t,r){t=t.coordinates,r.point(t[0],t[1],t[2])},MultiPoint:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],r.point(t[0],t[1],t[2])},LineString:function(t,r){W0e(t.coordinates,r,0)},MultiLineString:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)W0e(n[o],r,0)},Polygon:function(t,r){Ant(t.coordinates,r)},MultiPolygon:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)Ant(n[o],r)},GeometryCollection:function(t,r){for(var n=t.geometries,o=-1,i=n.length;++o<i;)QY(n[o],r)}}});function Osr(){Cm.point=Psr}function Rsr(){Dnt(knt,Int)}function Psr(t,r){Cm.point=Dnt,knt=t,Int=r,t*=Xr,r*=Xr,q0e=t,H0e=Qt(r=r/2+bM),Y0e=Xt(r)}function Dnt(t,r){t*=Xr,r*=Xr,r=r/2+bM;var n=t-q0e,o=n>=0?1:-1,i=o*n,s=Qt(r),a=Xt(r),l=Y0e*a,u=H0e*s+l*Qt(i),c=l*o*Xt(i);n5.add(_s(c,u)),q0e=t,H0e=s,Y0e=a}function X0e(t){return JY=new Yi,xf(t,Cm),JY*2}var n5,JY,knt,Int,q0e,H0e,Y0e,Cm,K0e=N(()=>{"use strict";qo();An();$_();vM();n5=new Yi,JY=new Yi,Cm={point:Bi,lineStart:Bi,lineEnd:Bi,polygonStart:function(){n5=new Yi,Cm.lineStart=Osr,Cm.lineEnd=Rsr},polygonEnd:function(){var t=+n5;JY.add(t<0?Bs+t:t),this.lineStart=this.lineEnd=this.point=Bi},sphere:function(){JY.add(Bs)}}});function MT(t){return[_s(t[1],t[0]),ji(t[2])]}function qp(t){var r=t[0],n=t[1],o=Qt(n);return[o*Qt(r),o*Xt(r),Xt(n)]}function o5(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function Cv(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}function eX(t,r){t[0]+=r[0],t[1]+=r[1],t[2]+=r[2]}function i5(t,r){return[t[0]*r,t[1]*r,t[2]*r]}function FT(t){var r=Xo(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=r,t[1]/=r,t[2]/=r}var wM=N(()=>{"use strict";An()});function Z0e(t,r){z_.push(Tv=[us=t,Ss=t]),r<vf&&(vf=r),r>zd&&(zd=r)}function Pnt(t,r){var n=qp([t*Xr,r*Xr]);if(_M){var o=Cv(_M,n),i=[o[1],-o[0],0],s=Cv(i,o);FT(s),s=MT(s);var a=t-OT,l=a>0?1:-1,u=s[0]*Yo*l,c,f=Kr(a)>180;f^(l*OT<u&&u<l*t)?(c=s[1]*Yo,c>zd&&(zd=c)):(u=(u+360)%360-180,f^(l*OT<u&&u<l*t)?(c=-s[1]*Yo,c<vf&&(vf=c)):(r<vf&&(vf=r),r>zd&&(zd=r))),f?t<OT?$d(us,t)>$d(us,Ss)&&(Ss=t):$d(t,Ss)>$d(us,Ss)&&(us=t):Ss>=us?(t<us&&(us=t),t>Ss&&(Ss=t)):t>OT?$d(us,t)>$d(us,Ss)&&(Ss=t):$d(t,Ss)>$d(us,Ss)&&(us=t)}else z_.push(Tv=[us=t,Ss=t]);r<vf&&(vf=r),r>zd&&(zd=r),_M=n,OT=t}function Nnt(){Ev.point=Pnt}function Mnt(){Tv[0]=us,Tv[1]=Ss,Ev.point=Z0e,_M=null}function Lnt(t,r){if(_M){var n=t-OT;s5.add(Kr(n)>180?n+(n>0?360:-360):n)}else Ont=t,Rnt=r;Cm.point(t,r),Pnt(t,r)}function Lsr(){Cm.lineStart()}function jsr(){Lnt(Ont,Rnt),Cm.lineEnd(),Kr(s5)>Jt&&(us=-(Ss=180)),Tv[0]=us,Tv[1]=Ss,_M=null}function $d(t,r){return(r-=t)<0?r+360:r}function Bsr(t,r){return t[0]-r[0]}function Fnt(t,r){return t[0]<=t[1]?t[0]<=r&&r<=t[1]:r<t[0]||t[1]<r}function Q0e(t){var r,n,o,i,s,a,l;if(zd=Ss=-(us=vf=1/0),z_=[],xf(t,Ev),n=z_.length){for(z_.sort(Bsr),r=1,o=z_[0],s=[o];r<n;++r)i=z_[r],Fnt(o,i[0])||Fnt(o,i[1])?($d(o[0],i[1])>$d(o[0],o[1])&&(o[1]=i[1]),$d(i[0],o[1])>$d(o[0],o[1])&&(o[0]=i[0])):s.push(o=i);for(a=-1/0,n=s.length-1,r=0,o=s[n];r<=n;o=i,++r)i=s[r],(l=$d(o[1],i[0]))>a&&(a=l,us=i[0],Ss=o[1])}return z_=Tv=null,us===1/0||vf===1/0?[[NaN,NaN],[NaN,NaN]]:[[us,vf],[Ss,zd]]}var us,vf,Ss,zd,OT,Ont,Rnt,_M,s5,z_,Tv,Ev,jnt=N(()=>{"use strict";qo();K0e();wM();An();vM();Ev={point:Z0e,lineStart:Nnt,lineEnd:Mnt,polygonStart:function(){Ev.point=Lnt,Ev.lineStart=Lsr,Ev.lineEnd=jsr,s5=new Yi,Cm.polygonStart()},polygonEnd:function(){Cm.polygonEnd(),Ev.point=Z0e,Ev.lineStart=Nnt,Ev.lineEnd=Mnt,n5<0?(us=-(Ss=180),vf=-(zd=90)):s5>Jt?zd=90:s5<-Jt&&(vf=-90),Tv[0]=us,Tv[1]=Ss},sphere:function(){us=-(Ss=180),vf=-(zd=90)}}});function rye(t,r){t*=Xr,r*=Xr;var n=Qt(r);l5(n*Qt(t),n*Xt(t),Xt(r))}function l5(t,r,n){++a5,rX+=(t-rX)/a5,nX+=(r-nX)/a5,oX+=(n-oX)/a5}function Bnt(){Em.point=$sr}function $sr(t,r){t*=Xr,r*=Xr;var n=Qt(r);kc=n*Qt(t),Ic=n*Xt(t),Dc=Xt(r),Em.point=zsr,l5(kc,Ic,Dc)}function zsr(t,r){t*=Xr,r*=Xr;var n=Qt(r),o=n*Qt(t),i=n*Xt(t),s=Xt(r),a=_s(Xo((a=Ic*s-Dc*i)*a+(a=Dc*o-kc*s)*a+(a=kc*i-Ic*o)*a),kc*o+Ic*i+Dc*s);tX+=a,iX+=a*(kc+(kc=o)),sX+=a*(Ic+(Ic=i)),aX+=a*(Dc+(Dc=s)),l5(kc,Ic,Dc)}function $nt(){Em.point=rye}function Usr(){Em.point=Gsr}function Vsr(){Vnt(znt,Unt),Em.point=rye}function Gsr(t,r){znt=t,Unt=r,t*=Xr,r*=Xr,Em.point=Vnt;var n=Qt(r);kc=n*Qt(t),Ic=n*Xt(t),Dc=Xt(r),l5(kc,Ic,Dc)}function Vnt(t,r){t*=Xr,r*=Xr;var n=Qt(r),o=n*Qt(t),i=n*Xt(t),s=Xt(r),a=Ic*s-Dc*i,l=Dc*o-kc*s,u=kc*i-Ic*o,c=XY(a,l,u),f=ji(c),d=c&&-f/c;J0e.add(d*a),eye.add(d*l),tye.add(d*u),tX+=f,iX+=f*(kc+(kc=o)),sX+=f*(Ic+(Ic=i)),aX+=f*(Dc+(Dc=s)),l5(kc,Ic,Dc)}function nye(t){a5=tX=rX=nX=oX=iX=sX=aX=0,J0e=new Yi,eye=new Yi,tye=new Yi,xf(t,Em);var r=+J0e,n=+eye,o=+tye,i=XY(r,n,o);return i<DT&&(r=iX,n=sX,o=aX,tX<Jt&&(r=rX,n=nX,o=oX),i=XY(r,n,o),i<DT)?[NaN,NaN]:[_s(n,r)*Yo,ji(o/i)*Yo]}var a5,tX,rX,nX,oX,iX,sX,aX,J0e,eye,tye,znt,Unt,kc,Ic,Dc,Em,Gnt=N(()=>{"use strict";qo();An();$_();vM();Em={sphere:Bi,point:rye,lineStart:Bnt,lineEnd:$nt,polygonStart:function(){Em.lineStart=Usr,Em.lineEnd=Vsr},polygonEnd:function(){Em.lineStart=Bnt,Em.lineEnd=$nt}}});function u5(t,r){function n(o,i){return o=t(o,i),r(o[0],o[1])}return t.invert&&r.invert&&(n.invert=function(o,i){return o=r.invert(o,i),o&&t.invert(o[0],o[1])}),n}var oye=N(()=>{"use strict"});function iye(t,r){return[Kr(t)>Qr?t+Math.round(-t/Bs)*Bs:t,r]}function sye(t,r,n){return(t%=Bs)?r||n?u5(qnt(t),Hnt(r,n)):qnt(t):r||n?Hnt(r,n):iye}function Wnt(t){return function(r,n){return r+=t,[r>Qr?r-Bs:r<-Qr?r+Bs:r,n]}}function qnt(t){var r=Wnt(t);return r.invert=Wnt(-t),r}function Hnt(t,r){var n=Qt(t),o=Xt(t),i=Qt(r),s=Xt(r);function a(l,u){var c=Qt(u),f=Qt(l)*c,d=Xt(l)*c,p=Xt(u),h=p*n+f*o;return[_s(d*i-h*s,f*n-p*o),ji(h*i+d*s)]}return a.invert=function(l,u){var c=Qt(u),f=Qt(l)*c,d=Xt(l)*c,p=Xt(u),h=p*i-d*s;return[_s(d*i+p*s,f*n+h*o),ji(h*n-f*o)]},a}function Ynt(t){t=sye(t[0]*Xr,t[1]*Xr,t.length>2?t[2]*Xr:0);function r(n){return n=t(n[0]*Xr,n[1]*Xr),n[0]*=Yo,n[1]*=Yo,n}return r.invert=function(n){return n=t.invert(n[0]*Xr,n[1]*Xr),n[0]*=Yo,n[1]*=Yo,n},r}var aye=N(()=>{"use strict";oye();An();iye.invert=iye});function Knt(t,r,n,o,i,s){if(n){var a=Qt(r),l=Xt(r),u=o*n;i==null?(i=r+o*Bs,s=r-u/2):(i=Xnt(a,i),s=Xnt(a,s),(o>0?i<s:i>s)&&(i+=o*Bs));for(var c,f=i;o>0?f>s:f<s;f-=u)c=MT([a,-l*Qt(f),-l*Xt(f)]),t.point(c[0],c[1])}}function Xnt(t,r){r=qp(r),r[0]-=t,FT(r);var n=ZY(-r[1]);return((-r[2]<0?-n:n)+Bs-Jt)%Bs}var Znt=N(()=>{"use strict";wM();An()});function lX(){var t=[],r;return{point:function(n,o,i){r.push([n,o,i])},lineStart:function(){t.push(r=[])},lineEnd:Bi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],r=null,n}}}var lye=N(()=>{"use strict";$_()});function SM(t,r){return Kr(t[0]-r[0])<Jt&&Kr(t[1]-r[1])<Jt}var uye=N(()=>{"use strict";An()});function uX(t,r,n,o){this.x=t,this.z=r,this.o=n,this.e=o,this.v=!1,this.n=this.p=null}function cX(t,r,n,o,i){var s=[],a=[],l,u;if(t.forEach(function(m){if(!((g=m.length-1)<=0)){var g,y=m[0],b=m[g],x;if(SM(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),l=0;l<g;++l)i.point((y=m[l])[0],y[1]);i.lineEnd();return}b[0]+=2*Jt}s.push(x=new uX(y,m,null,!0)),a.push(x.o=new uX(y,null,x,!1)),s.push(x=new uX(b,m,null,!1)),a.push(x.o=new uX(b,null,x,!0))}}),!!s.length){for(a.sort(r),Qnt(s),Qnt(a),l=0,u=a.length;l<u;++l)a[l].e=n=!n;for(var c=s[0],f,d;;){for(var p=c,h=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(l=0,u=f.length;l<u;++l)i.point((d=f[l])[0],d[1]);else o(p.x,p.n.x,1,i);p=p.n}else{if(h)for(f=p.p.z,l=f.length-1;l>=0;--l)i.point((d=f[l])[0],d[1]);else o(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,h=!h}while(!p.v);i.lineEnd()}}}function Qnt(t){if(r=t.length){for(var r,n=0,o=t[0],i;++n<r;)o.n=i=t[n],i.p=o,o=i;o.n=i=t[0],i.p=o}}var cye=N(()=>{"use strict";uye();An()});function fye(t){return Kr(t[0])<=Qr?t[0]:ku(t[0])*((Kr(t[0])+Qr)%Bs-Qr)}function Jnt(t,r){var n=fye(r),o=r[1],i=Xt(o),s=[Xt(n),-Qt(n),0],a=0,l=0,u=new Yi;i===1?o=Ho+Jt:i===-1&&(o=-Ho-Jt);for(var c=0,f=t.length;c<f;++c)if(p=(d=t[c]).length)for(var d,p,h=d[p-1],m=fye(h),g=h[1]/2+bM,y=Xt(g),b=Qt(g),x=0;x<p;++x,m=w,y=S,b=C,h=v){var v=d[x],w=fye(v),_=v[1]/2+bM,S=Xt(_),C=Qt(_),E=w-m,T=E>=0?1:-1,I=T*E,k=I>Qr,F=y*S;if(u.add(_s(F*T*Xt(I),b*C+F*Qt(I))),a+=k?E+T*Bs:E,k^m>=n^w>=n){var D=Cv(qp(h),qp(v));FT(D);var L=Cv(s,D);FT(L);var P=(k^E>=0?-1:1)*ji(L[2]);(o>P||o===P&&(D[0]||D[1]))&&(l+=k^E>=0?1:-1)}}return(a<-Jt||a<Jt&&u<-DT)^l&1}var eot=N(()=>{"use strict";qo();wM();An()});function fX(t,r,n,o){return function(i){var s=r(i),a=lX(),l=r(a),u=!1,c,f,d,p={point:h,lineStart:g,lineEnd:y,polygonStart:function(){p.point=b,p.lineStart=x,p.lineEnd=v,f=[],c=[]},polygonEnd:function(){p.point=h,p.lineStart=g,p.lineEnd=y,f=hN(f);var w=Jnt(c,o);f.length?(u||(i.polygonStart(),u=!0),cX(f,qsr,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),f=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,_){t(w,_)&&i.point(w,_)}function m(w,_){s.point(w,_)}function g(){p.point=m,s.lineStart()}function y(){p.point=h,s.lineEnd()}function b(w,_){d.push([w,_]),l.point(w,_)}function x(){l.lineStart(),d=[]}function v(){b(d[0][0],d[0][1]),l.lineEnd();var w=l.clean(),_=a.result(),S,C=_.length,E,T,I;if(d.pop(),c.push(d),d=null,!!C){if(w&1){if(T=_[0],(E=T.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<E;++S)i.point((I=T[S])[0],I[1]);i.lineEnd()}return}C>1&&w&2&&_.push(_.pop().concat(_.shift())),f.push(_.filter(Wsr))}}return p}}function Wsr(t){return t.length>1}function qsr(t,r){return((t=t.x)[0]<0?t[1]-Ho-Jt:Ho-t[1])-((r=r.x)[0]<0?r[1]-Ho-Jt:Ho-r[1])}var dye=N(()=>{"use strict";lye();cye();An();eot();qo()});function Hsr(t){var r=NaN,n=NaN,o=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var l=s>0?Qr:-Qr,u=Kr(s-r);Kr(u-Qr)<Jt?(t.point(r,n=(n+a)/2>0?Ho:-Ho),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(s,n),i=0):o!==l&&u>=Qr&&(Kr(r-o)<Jt&&(r-=o*Jt),Kr(s-l)<Jt&&(s-=l*Jt),n=Ysr(r,n,s,a),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(r=s,n=a),o=l},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-i}}}function Ysr(t,r,n,o){var i,s,a=Xt(t-n);return Kr(a)>Jt?Wp((Xt(r)*(s=Qt(o))*Xt(n)-Xt(o)*(i=Qt(r))*Xt(t))/(i*s*a)):(r+o)/2}function Xsr(t,r,n,o){var i;if(t==null)i=n*Ho,o.point(-Qr,i),o.point(0,i),o.point(Qr,i),o.point(Qr,0),o.point(Qr,-i),o.point(0,-i),o.point(-Qr,-i),o.point(-Qr,0),o.point(-Qr,i);else if(Kr(t[0]-r[0])>Jt){var s=t[0]<r[0]?Qr:-Qr;i=n*s/2,o.point(-s,i),o.point(0,i),o.point(s,i)}else o.point(r[0],r[1])}var pye,tot=N(()=>{"use strict";dye();An();pye=fX(function(){return!0},Hsr,Xsr,[-Qr,-Ho])});function rot(t){var r=Qt(t),n=6*Xr,o=r>0,i=Kr(r)>Jt;function s(f,d,p,h){Knt(h,t,n,p,f,d)}function a(f,d){return Qt(f)*Qt(d)>r}function l(f){var d,p,h,m,g;return{lineStart:function(){m=h=!1,g=1},point:function(y,b){var x=[y,b],v,w=a(y,b),_=o?w?0:c(y,b):w?c(y+(y<0?Qr:-Qr),b):0;if(!d&&(m=h=w)&&f.lineStart(),w!==h&&(v=u(d,x),(!v||SM(d,v)||SM(x,v))&&(x[2]=1)),w!==h)g=0,w?(f.lineStart(),v=u(x,d),f.point(v[0],v[1])):(v=u(d,x),f.point(v[0],v[1],2),f.lineEnd()),d=v;else if(i&&d&&o^w){var S;!(_&p)&&(S=u(x,d,!0))&&(g=0,o?(f.lineStart(),f.point(S[0][0],S[0][1]),f.point(S[1][0],S[1][1]),f.lineEnd()):(f.point(S[1][0],S[1][1]),f.lineEnd(),f.lineStart(),f.point(S[0][0],S[0][1],3)))}w&&(!d||!SM(d,x))&&f.point(x[0],x[1]),d=x,h=w,p=_},lineEnd:function(){h&&f.lineEnd(),d=null},clean:function(){return g|(m&&h)<<1}}}function u(f,d,p){var h=qp(f),m=qp(d),g=[1,0,0],y=Cv(h,m),b=o5(y,y),x=y[0],v=b-x*x;if(!v)return!p&&f;var w=r*b/v,_=-r*x/v,S=Cv(g,y),C=i5(g,w),E=i5(y,_);eX(C,E);var T=S,I=o5(C,T),k=o5(T,T),F=I*I-k*(o5(C,C)-1);if(!(F<0)){var D=Xo(F),L=i5(T,(-I-D)/k);if(eX(L,C),L=MT(L),!p)return L;var P=f[0],R=d[0],V=f[1],G=d[1],U;R<P&&(U=P,P=R,R=U);var H=R-P,X=Kr(H-Qr)<Jt,fe=X||H<Jt;if(!X&&G<V&&(U=V,V=G,G=U),fe?X?V+G>0^L[1]<(Kr(L[0]-P)<Jt?V:G):V<=L[1]&&L[1]<=G:H>Qr^(P<=L[0]&&L[0]<=R)){var $=i5(T,(-I+D)/k);return eX($,C),[L,MT($)]}}}function c(f,d){var p=o?t:Qr-t,h=0;return f<-p?h|=1:f>p&&(h|=2),d<-p?h|=4:d>p&&(h|=8),h}return fX(a,l,s,o?[0,-t]:[-Qr,t-Qr])}var not=N(()=>{"use strict";wM();Znt();An();uye();dye()});function oot(t,r,n,o,i,s){var a=t[0],l=t[1],u=r[0],c=r[1],f=0,d=1,p=u-a,h=c-l,m;if(m=n-a,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>f&&(f=m)}if(m=i-a,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<d&&(d=m)}if(m=o-l,!(!h&&m>0)){if(m/=h,h<0){if(m<f)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>f&&(f=m)}if(m=s-l,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>f&&(f=m)}else if(h>0){if(m<f)return;m<d&&(d=m)}return f>0&&(t[0]=a+f*p,t[1]=l+f*h),d<1&&(r[0]=a+d*p,r[1]=l+d*h),!0}}}}}var iot=N(()=>{"use strict"});function f5(t,r,n,o){function i(c,f){return t<=c&&c<=n&&r<=f&&f<=o}function s(c,f,d,p){var h=0,m=0;if(c==null||(h=a(c,d))!==(m=a(f,d))||u(c,f)<0^d>0)do p.point(h===0||h===3?t:n,h>1?o:r);while((h=(h+d+4)%4)!==m);else p.point(f[0],f[1])}function a(c,f){return Kr(c[0]-t)<Jt?f>0?0:3:Kr(c[0]-n)<Jt?f>0?2:1:Kr(c[1]-r)<Jt?f>0?1:0:f>0?3:2}function l(c,f){return u(c.x,f.x)}function u(c,f){var d=a(c,1),p=a(f,1);return d!==p?d-p:d===0?f[1]-c[1]:d===1?c[0]-f[0]:d===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,d=lX(),p,h,m,g,y,b,x,v,w,_,S,C={point:E,lineStart:F,lineEnd:D,polygonStart:I,polygonEnd:k};function E(P,R){i(P,R)&&f.point(P,R)}function T(){for(var P=0,R=0,V=h.length;R<V;++R)for(var G=h[R],U=1,H=G.length,X=G[0],fe,$,M=X[0],z=X[1];U<H;++U)fe=M,$=z,X=G[U],M=X[0],z=X[1],$<=o?z>o&&(M-fe)*(o-$)>(z-$)*(t-fe)&&++P:z<=o&&(M-fe)*(o-$)<(z-$)*(t-fe)&&--P;return P}function I(){f=d,p=[],h=[],S=!0}function k(){var P=T(),R=S&&P,V=(p=hN(p)).length;(R||V)&&(c.polygonStart(),R&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),V&&cX(p,l,P,s,c),c.polygonEnd()),f=c,p=h=m=null}function F(){C.point=L,h&&h.push(m=[]),_=!0,w=!1,x=v=NaN}function D(){p&&(L(g,y),b&&w&&d.rejoin(),p.push(d.result())),C.point=E,w&&f.lineEnd()}function L(P,R){var V=i(P,R);if(h&&m.push([P,R]),_)g=P,y=R,b=V,_=!1,V&&(f.lineStart(),f.point(P,R));else if(V&&w)f.point(P,R);else{var G=[x=Math.max(dX,Math.min(c5,x)),v=Math.max(dX,Math.min(c5,v))],U=[P=Math.max(dX,Math.min(c5,P)),R=Math.max(dX,Math.min(c5,R))];oot(G,U,t,r,n,o)?(w||(f.lineStart(),f.point(G[0],G[1])),f.point(U[0],U[1]),V||f.lineEnd(),S=!1):V&&(f.lineStart(),f.point(P,R),S=!1)}x=P,v=R,w=V}return C}}var c5,dX,hye=N(()=>{"use strict";An();lye();iot();cye();qo();c5=1e9,dX=-c5});function sot(t,r,n){var o=ca(t,r-Jt,n).concat(r);return function(i){return o.map(function(s){return[i,s]})}}function aot(t,r,n){var o=ca(t,r-Jt,n).concat(r);return function(i){return o.map(function(s){return[s,i]})}}function pX(){var t,r,n,o,i,s,a,l,u=10,c=u,f=90,d=360,p,h,m,g,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return ca(r5(o/f)*f,n,f).map(m).concat(ca(r5(l/d)*d,a,d).map(g)).concat(ca(r5(r/u)*u,t,u).filter(function(v){return Kr(v%f)>Jt}).map(p)).concat(ca(r5(s/c)*c,i,c).filter(function(v){return Kr(v%d)>Jt}).map(h))}return b.lines=function(){return x().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[m(o).concat(g(a).slice(1),m(n).reverse().slice(1),g(l).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(o=+v[0][0],n=+v[1][0],l=+v[0][1],a=+v[1][1],o>n&&(v=o,o=n,n=v),l>a&&(v=l,l=a,a=v),b.precision(y)):[[o,l],[n,a]]},b.extentMinor=function(v){return arguments.length?(r=+v[0][0],t=+v[1][0],s=+v[0][1],i=+v[1][1],r>t&&(v=r,r=t,t=v),s>i&&(v=s,s=i,i=v),b.precision(y)):[[r,s],[t,i]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(f=+v[0],d=+v[1],b):[f,d]},b.stepMinor=function(v){return arguments.length?(u=+v[0],c=+v[1],b):[u,c]},b.precision=function(v){return arguments.length?(y=+v,p=sot(s,i,90),h=aot(r,t,y),m=sot(l,a,90),g=aot(o,n,y),b):y},b.extentMajor([[-180,-90+Jt],[180,90-Jt]]).extentMinor([[-180,-80-Jt],[180,80+Jt]])}var lot=N(()=>{"use strict";qo();An()});var U_,hX=N(()=>{"use strict";U_=t=>t});function Ksr(){V_.point=Zsr}function Zsr(t,r){V_.point=fot,uot=yye=t,cot=bye=r}function fot(t,r){gye.add(bye*t-yye*r),yye=t,bye=r}function Qsr(){fot(uot,cot)}var mye,gye,uot,cot,yye,bye,V_,xye,dot=N(()=>{"use strict";qo();An();$_();mye=new Yi,gye=new Yi,V_={point:Bi,lineStart:Bi,lineEnd:Bi,polygonStart:function(){V_.lineStart=Ksr,V_.lineEnd=Qsr},polygonEnd:function(){V_.lineStart=V_.lineEnd=V_.point=Bi,mye.add(Kr(gye)),gye=new Yi},result:function(){var t=mye/2;return mye=new Yi,t}};xye=V_});function ear(t,r){t<CM&&(CM=t),t>d5&&(d5=t),r<mX&&(mX=r),r>gX&&(gX=r)}var CM,mX,d5,gX,Jsr,EM,vye=N(()=>{"use strict";$_();CM=1/0,mX=CM,d5=-CM,gX=d5,Jsr={point:ear,lineStart:Bi,lineEnd:Bi,polygonStart:Bi,polygonEnd:Bi,result:function(){var t=[[CM,mX],[d5,gX]];return d5=gX=-(mX=CM=1/0),t}};EM=Jsr});function RT(t,r){wye+=t,_ye+=r,++p5}function pot(){Tm.point=tar}function tar(t,r){Tm.point=rar,RT(ky=t,Iy=r)}function rar(t,r){var n=t-ky,o=r-Iy,i=Xo(n*n+o*o);yX+=i*(ky+t)/2,bX+=i*(Iy+r)/2,TM+=i,RT(ky=t,Iy=r)}function hot(){Tm.point=RT}function nar(){Tm.point=iar}function oar(){yot(mot,got)}function iar(t,r){Tm.point=yot,RT(mot=ky=t,got=Iy=r)}function yot(t,r){var n=t-ky,o=r-Iy,i=Xo(n*n+o*o);yX+=i*(ky+t)/2,bX+=i*(Iy+r)/2,TM+=i,i=Iy*t-ky*r,Sye+=i*(ky+t),Cye+=i*(Iy+r),h5+=i*3,RT(ky=t,Iy=r)}var wye,_ye,p5,yX,bX,TM,Sye,Cye,h5,mot,got,ky,Iy,Tm,Eye,bot=N(()=>{"use strict";An();wye=0,_ye=0,p5=0,yX=0,bX=0,TM=0,Sye=0,Cye=0,h5=0,Tm={point:RT,lineStart:pot,lineEnd:hot,polygonStart:function(){Tm.lineStart=nar,Tm.lineEnd=oar},polygonEnd:function(){Tm.point=RT,Tm.lineStart=pot,Tm.lineEnd=hot},result:function(){var t=h5?[Sye/h5,Cye/h5]:TM?[yX/TM,bX/TM]:p5?[wye/p5,_ye/p5]:[NaN,NaN];return wye=_ye=p5=yX=bX=TM=Sye=Cye=h5=0,t}};Eye=Tm});function xX(t){this._context=t}var xot=N(()=>{"use strict";An();$_();xX.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._context.moveTo(t,r),this._point=1;break}case 1:{this._context.lineTo(t,r);break}default:{this._context.moveTo(t+this._radius,r),this._context.arc(t,r,this._radius,0,Bs);break}}},result:Bi}});function sar(t,r){vX.point=_ot,vot=m5=t,wot=g5=r}function _ot(t,r){m5-=t,g5-=r,Aye.add(Xo(m5*m5+g5*g5)),m5=t,g5=r}var Aye,Tye,vot,wot,m5,g5,vX,kye,Sot=N(()=>{"use strict";qo();An();$_();Aye=new Yi,vX={point:Bi,lineStart:function(){vX.point=sar},lineEnd:function(){Tye&&_ot(vot,wot),vX.point=Bi},polygonStart:function(){Tye=!0},polygonEnd:function(){Tye=null},result:function(){var t=+Aye;return Aye=new Yi,t}};kye=vX});function wX(){this._string=[]}function Cot(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Eot=N(()=>{"use strict";wX.prototype={_radius:4.5,_circle:Cot(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._string.push("M",t,",",r),this._point=1;break}case 1:{this._string.push("L",t,",",r);break}default:{this._circle==null&&(this._circle=Cot(this._radius)),this._string.push("M",t,",",r,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}}});function _X(t,r){var n=4.5,o,i;function s(a){return a&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),xf(a,o(i))),i.result()}return s.area=function(a){return xf(a,o(xye)),xye.result()},s.measure=function(a){return xf(a,o(kye)),kye.result()},s.bounds=function(a){return xf(a,o(EM)),EM.result()},s.centroid=function(a){return xf(a,o(Eye)),Eye.result()},s.projection=function(a){return arguments.length?(o=a==null?(t=null,U_):(t=a).stream,s):t},s.context=function(a){return arguments.length?(i=a==null?(r=null,new wX):new xX(r=a),typeof n!="function"&&i.pointRadius(n),s):r},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(i.pointRadius(+a),+a),s):n},s.projection(t).context(r)}var Tot=N(()=>{"use strict";hX();vM();dot();vye();bot();xot();Sot();Eot()});function PT(t){return function(r){var n=new Iye;for(var o in t)n[o]=t[o];return n.stream=r,n}}function Iye(){}var SX=N(()=>{"use strict";Iye.prototype={constructor:Iye,point:function(t,r){this.stream.point(t,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}});function Dye(t,r,n){var o=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),o!=null&&t.clipExtent(null),xf(n,t.stream(EM)),r(EM.result()),o!=null&&t.clipExtent(o),t}function LT(t,r,n){return Dye(t,function(o){var i=r[1][0]-r[0][0],s=r[1][1]-r[0][1],a=Math.min(i/(o[1][0]-o[0][0]),s/(o[1][1]-o[0][1])),l=+r[0][0]+(i-a*(o[1][0]+o[0][0]))/2,u=+r[0][1]+(s-a*(o[1][1]+o[0][1]))/2;t.scale(150*a).translate([l,u])},n)}function AM(t,r,n){return LT(t,[[0,0],r],n)}function kM(t,r,n){return Dye(t,function(o){var i=+r,s=i/(o[1][0]-o[0][0]),a=(i-s*(o[1][0]+o[0][0]))/2,l=-s*o[0][1];t.scale(150*s).translate([a,l])},n)}function IM(t,r,n){return Dye(t,function(o){var i=+r,s=i/(o[1][1]-o[0][1]),a=-s*o[0][0],l=(i-s*(o[1][1]+o[0][1]))/2;t.scale(150*s).translate([a,l])},n)}var CX=N(()=>{"use strict";vM();vye()});function Nye(t,r){return+r?uar(t,r):lar(t)}function lar(t){return PT({point:function(r,n){r=t(r,n),this.stream.point(r[0],r[1])}})}function uar(t,r){function n(o,i,s,a,l,u,c,f,d,p,h,m,g,y){var b=c-o,x=f-i,v=b*b+x*x;if(v>4*r&&g--){var w=a+p,_=l+h,S=u+m,C=Xo(w*w+_*_+S*S),E=ji(S/=C),T=Kr(Kr(S)-1)<Jt||Kr(s-d)<Jt?(s+d)/2:_s(_,w),I=t(T,E),k=I[0],F=I[1],D=k-o,L=F-i,P=x*D-b*L;(P*P/v>r||Kr((b*D+x*L)/v-.5)>.3||a*p+l*h+u*m<aar)&&(n(o,i,s,a,l,u,k,F,T,w/=C,_/=C,S,g,y),y.point(k,F),n(k,F,T,w,_,S,c,f,d,p,h,m,g,y))}}return function(o){var i,s,a,l,u,c,f,d,p,h,m,g,y={point:b,lineStart:x,lineEnd:w,polygonStart:function(){o.polygonStart(),y.lineStart=_},polygonEnd:function(){o.polygonEnd(),y.lineStart=x}};function b(E,T){E=t(E,T),o.point(E[0],E[1])}function x(){d=NaN,y.point=v,o.lineStart()}function v(E,T){var I=qp([E,T]),k=t(E,T);n(d,p,f,h,m,g,d=k[0],p=k[1],f=E,h=I[0],m=I[1],g=I[2],Aot,o),o.point(d,p)}function w(){y.point=b,o.lineEnd()}function _(){x(),y.point=S,y.lineEnd=C}function S(E,T){v(i=E,T),s=d,a=p,l=h,u=m,c=g,y.point=v}function C(){n(d,p,f,h,m,g,s,a,i,l,u,c,Aot,o),y.lineEnd=w,w()}return y}}var Aot,aar,kot=N(()=>{"use strict";wM();An();SX();Aot=16,aar=Qt(30*Xr)});function far(t){return PT({point:function(r,n){var o=t(r,n);return this.stream.point(o[0],o[1])}})}function dar(t,r,n,o,i){function s(a,l){return a*=o,l*=i,[r+t*a,n-t*l]}return s.invert=function(a,l){return[(a-r)/t*o,(n-l)/t*i]},s}function Iot(t,r,n,o,i,s){if(!s)return dar(t,r,n,o,i);var a=Qt(s),l=Xt(s),u=a*t,c=l*t,f=a/t,d=l/t,p=(l*n-a*r)/t,h=(l*r+a*n)/t;function m(g,y){return g*=o,y*=i,[u*g-c*y+r,n-c*g-u*y]}return m.invert=function(g,y){return[o*(f*g-d*y+p),i*(h-d*g-f*y)]},m}function Cs(t){return EX(function(){return t})()}function EX(t){var r,n=150,o=480,i=250,s=0,a=0,l=0,u=0,c=0,f,d=0,p=1,h=1,m=null,g=pye,y=null,b,x,v,w=U_,_=.5,S,C,E,T,I;function k(P){return E(P[0]*Xr,P[1]*Xr)}function F(P){return P=E.invert(P[0],P[1]),P&&[P[0]*Yo,P[1]*Yo]}k.stream=function(P){return T&&I===P?T:T=car(far(f)(g(S(w(I=P)))))},k.preclip=function(P){return arguments.length?(g=P,m=void 0,L()):g},k.postclip=function(P){return arguments.length?(w=P,y=b=x=v=null,L()):w},k.clipAngle=function(P){return arguments.length?(g=+P?rot(m=P*Xr):(m=null,pye),L()):m*Yo},k.clipExtent=function(P){return arguments.length?(w=P==null?(y=b=x=v=null,U_):f5(y=+P[0][0],b=+P[0][1],x=+P[1][0],v=+P[1][1]),L()):y==null?null:[[y,b],[x,v]]},k.scale=function(P){return arguments.length?(n=+P,D()):n},k.translate=function(P){return arguments.length?(o=+P[0],i=+P[1],D()):[o,i]},k.center=function(P){return arguments.length?(s=P[0]%360*Xr,a=P[1]%360*Xr,D()):[s*Yo,a*Yo]},k.rotate=function(P){return arguments.length?(l=P[0]%360*Xr,u=P[1]%360*Xr,c=P.length>2?P[2]%360*Xr:0,D()):[l*Yo,u*Yo,c*Yo]},k.angle=function(P){return arguments.length?(d=P%360*Xr,D()):d*Yo},k.reflectX=function(P){return arguments.length?(p=P?-1:1,D()):p<0},k.reflectY=function(P){return arguments.length?(h=P?-1:1,D()):h<0},k.precision=function(P){return arguments.length?(S=Nye(C,_=P*P),L()):Xo(_)},k.fitExtent=function(P,R){return LT(k,P,R)},k.fitSize=function(P,R){return AM(k,P,R)},k.fitWidth=function(P,R){return kM(k,P,R)},k.fitHeight=function(P,R){return IM(k,P,R)};function D(){var P=Iot(n,0,0,p,h,d).apply(null,r(s,a)),R=Iot(n,o-P[0],i-P[1],p,h,d);return f=sye(l,u,c),C=u5(r,R),E=u5(f,C),S=Nye(C,_),L()}function L(){return T=I=null,k}return function(){return r=t.apply(this,arguments),k.invert=r.invert&&F,D()}}var car,Hp=N(()=>{"use strict";tot();not();hye();oye();hX();An();aye();SX();CX();kot();car=PT({point:function(t,r){this.stream.point(t*Xr,r*Xr)}})});function DM(t){var r=0,n=Qr/3,o=EX(t),i=o(r,n);return i.parallels=function(s){return arguments.length?o(r=s[0]*Xr,n=s[1]*Xr):[r*Yo,n*Yo]},i}var TX=N(()=>{"use strict";An();Hp()});function Dot(t){var r=Qt(t);function n(o,i){return[o*r,Xt(i)/r]}return n.invert=function(o,i){return[o/r,ji(i*r)]},n}var Not=N(()=>{"use strict";An()});function Mot(t,r){var n=Xt(t),o=(n+Xt(r))/2;if(Kr(o)<Jt)return Dot(t);var i=1+n*(2*o-n),s=Xo(i)/o;function a(l,u){var c=Xo(i-2*o*Xt(u))/o;return[c*Xt(l*=o),s-c*Qt(l)]}return a.invert=function(l,u){var c=s-u,f=_s(l,Kr(c))*ku(c);return c*o<0&&(f-=Qr*ku(l)*ku(c)),[f/o,ji((i-(l*l+c*c)*o*o)/(2*o))]},a}function G_(){return DM(Mot).scale(155.424).center([0,33.6442])}var AX=N(()=>{"use strict";An();TX();Not()});function y5(){return G_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var Mye=N(()=>{"use strict";AX()});function par(t){var r=t.length;return{point:function(n,o){for(var i=-1;++i<r;)t[i].point(n,o)},sphere:function(){for(var n=-1;++n<r;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<r;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<r;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<r;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<r;)t[n].polygonEnd()}}}function Fye(){var t,r,n=y5(),o,i=G_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=G_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,c={point:function(p,h){u=[p,h]}};function f(p){var h=p[0],m=p[1];return u=null,o.point(h,m),u||(s.point(h,m),u)||(l.point(h,m),u)}f.invert=function(p){var h=n.scale(),m=n.translate(),g=(p[0]-m[0])/h,y=(p[1]-m[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(p)},f.stream=function(p){return t&&r===p?t:t=par([n.stream(r=p),i.stream(p),a.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),a.precision(p),d()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),a.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var h=n.scale(),m=+p[0],g=+p[1];return o=n.translate(p).clipExtent([[m-.455*h,g-.238*h],[m+.455*h,g+.238*h]]).stream(c),s=i.translate([m-.307*h,g+.201*h]).clipExtent([[m-.425*h+Jt,g+.12*h+Jt],[m-.214*h-Jt,g+.234*h-Jt]]).stream(c),l=a.translate([m-.205*h,g+.212*h]).clipExtent([[m-.214*h+Jt,g+.166*h+Jt],[m-.115*h-Jt,g+.234*h-Jt]]).stream(c),d()},f.fitExtent=function(p,h){return LT(f,p,h)},f.fitSize=function(p,h){return AM(f,p,h)},f.fitWidth=function(p,h){return kM(f,p,h)},f.fitHeight=function(p,h){return IM(f,p,h)};function d(){return t=r=null,f}return f.scale(1070)}var Fot=N(()=>{"use strict";An();Mye();AX();CX()});function kX(t){return function(r,n){var o=Qt(r),i=Qt(n),s=t(o*i);return s===1/0?[2,0]:[s*i*Xt(r),s*Xt(n)]}}function Dy(t){return function(r,n){var o=Xo(r*r+n*n),i=t(o),s=Xt(i),a=Qt(i);return[_s(r*s,o*a),ji(o&&n*s/o)]}}var NM=N(()=>{"use strict";An()});function Rye(){return Cs(Oye).scale(124.75).clipAngle(180-.001)}var Oye,Oot=N(()=>{"use strict";An();NM();Hp();Oye=kX(function(t){return Xo(2/(1+t))});Oye.invert=Dy(function(t){return 2*ji(t/2)})});function Lye(){return Cs(Pye).scale(79.4188).clipAngle(180-.001)}var Pye,Rot=N(()=>{"use strict";An();NM();Hp();Pye=kX(function(t){return(t=ZY(t))&&t/Xt(t)});Pye.invert=Dy(function(t){return t})});function MM(t,r){return[t,NT(xM((Ho+r)/2))]}function jye(){return Bye(MM).scale(961/Bs)}function Bye(t){var r=Cs(t),n=r.center,o=r.scale,i=r.translate,s=r.clipExtent,a=null,l,u,c;r.scale=function(d){return arguments.length?(o(d),f()):o()},r.translate=function(d){return arguments.length?(i(d),f()):i()},r.center=function(d){return arguments.length?(n(d),f()):n()},r.clipExtent=function(d){return arguments.length?(d==null?a=l=u=c=null:(a=+d[0][0],l=+d[0][1],u=+d[1][0],c=+d[1][1]),f()):a==null?null:[[a,l],[u,c]]};function f(){var d=Qr*o(),p=r(Ynt(r.rotate()).invert([0,0]));return s(a==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:t===MM?[[Math.max(p[0]-d,a),l],[Math.min(p[0]+d,u),c]]:[[a,Math.max(p[1]-d,l)],[u,Math.min(p[1]+d,c)]])}return f()}var IX=N(()=>{"use strict";An();aye();Hp();MM.invert=function(t,r){return[t,2*Wp(YY(r))-Ho]}});function DX(t){return xM((Ho+t)/2)}function Pot(t,r){var n=Qt(t),o=t===r?Xt(t):NT(n/Qt(r))/NT(DX(r)/DX(t)),i=n*KY(DX(t),o)/o;if(!o)return MM;function s(a,l){i>0?l<-Ho+Jt&&(l=-Ho+Jt):l>Ho-Jt&&(l=Ho-Jt);var u=i/KY(DX(l),o);return[u*Xt(o*a),i-u*Qt(o*a)]}return s.invert=function(a,l){var u=i-l,c=ku(o)*Xo(a*a+u*u),f=_s(a,Kr(u))*ku(u);return u*o<0&&(f-=Qr*ku(a)*ku(u)),[f/o,2*Wp(KY(i/c,1/o))-Ho]},s}function $ye(){return DM(Pot).scale(109.5).parallels([30,30])}var Lot=N(()=>{"use strict";An();TX();IX()});function FM(t,r){return[t,r]}function zye(){return Cs(FM).scale(152.63)}var Uye=N(()=>{"use strict";Hp();FM.invert=FM});function jot(t,r){var n=Qt(t),o=t===r?Xt(t):(n-Qt(r))/(r-t),i=n/o+t;if(Kr(o)<Jt)return FM;function s(a,l){var u=i-l,c=o*a;return[u*Xt(c),i-u*Qt(c)]}return s.invert=function(a,l){var u=i-l,c=_s(a,Kr(u))*ku(u);return u*o<0&&(c-=Qr*ku(a)*ku(u)),[c/o,i-ku(o)*Xo(a*a+u*u)]},s}function Vye(){return DM(jot).scale(131.154).center([0,13.9389])}var Bot=N(()=>{"use strict";An();TX();Uye()});function Gye(t,r){var n=ji(NX*Xt(r)),o=n*n,i=o*o*o;return[t*Qt(n)/(NX*(b5+3*x5*o+i*(7*v5+9*w5*o))),n*(b5+x5*o+i*(v5+w5*o))]}function Wye(){return Cs(Gye).scale(177.158)}var b5,x5,v5,w5,NX,har,$ot=N(()=>{"use strict";Hp();An();b5=1.340264,x5=-.081106,v5=893e-6,w5=.003796,NX=Xo(3)/2,har=12;Gye.invert=function(t,r){for(var n=r,o=n*n,i=o*o*o,s=0,a,l,u;s<har&&(l=n*(b5+x5*o+i*(v5+w5*o))-r,u=b5+3*x5*o+i*(7*v5+9*w5*o),n-=a=l/u,o=n*n,i=o*o*o,!(Kr(a)<DT));++s);return[NX*t*(b5+3*x5*o+i*(7*v5+9*w5*o))/Qt(n),ji(Xt(n)/NX)]}});function qye(t,r){var n=Qt(r),o=Qt(t)*n;return[n*Xt(t)/o,Xt(r)/o]}function Hye(){return Cs(qye).scale(144.049).clipAngle(60)}var zot=N(()=>{"use strict";An();NM();Hp();qye.invert=Dy(Wp)});function Yye(){var t=1,r=0,n=0,o=1,i=1,s=0,a,l,u=null,c,f,d,p=1,h=1,m=PT({point:function(w,_){var S=v([w,_]);this.stream.point(S[0],S[1])}}),g=U_,y,b;function x(){return p=t*o,h=t*i,y=b=null,v}function v(w){var _=w[0]*p,S=w[1]*h;if(s){var C=S*a-_*l;_=_*a+S*l,S=C}return[_+r,S+n]}return v.invert=function(w){var _=w[0]-r,S=w[1]-n;if(s){var C=S*a+_*l;_=_*a-S*l,S=C}return[_/p,S/h]},v.stream=function(w){return y&&b===w?y:y=m(g(b=w))},v.postclip=function(w){return arguments.length?(g=w,u=c=f=d=null,x()):g},v.clipExtent=function(w){return arguments.length?(g=w==null?(u=c=f=d=null,U_):f5(u=+w[0][0],c=+w[0][1],f=+w[1][0],d=+w[1][1]),x()):u==null?null:[[u,c],[f,d]]},v.scale=function(w){return arguments.length?(t=+w,x()):t},v.translate=function(w){return arguments.length?(r=+w[0],n=+w[1],x()):[r,n]},v.angle=function(w){return arguments.length?(s=w%360*Xr,l=Xt(s),a=Qt(s),x()):s*Yo},v.reflectX=function(w){return arguments.length?(o=w?-1:1,x()):o<0},v.reflectY=function(w){return arguments.length?(i=w?-1:1,x()):i<0},v.fitExtent=function(w,_){return LT(v,w,_)},v.fitSize=function(w,_){return AM(v,w,_)},v.fitWidth=function(w,_){return kM(v,w,_)},v.fitHeight=function(w,_){return IM(v,w,_)},v}var Uot=N(()=>{"use strict";hye();hX();SX();CX();An()});function Xye(t,r){var n=r*r,o=n*n;return[t*(.8707-.131979*n+o*(-.013791+o*(.003971*n-.001529*o))),r*(1.007226+n*(.015085+o*(-.044475+.028874*n-.005916*o)))]}function Kye(){return Cs(Xye).scale(175.295)}var Vot=N(()=>{"use strict";Hp();An();Xye.invert=function(t,r){var n=r,o=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-r)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Kr(i)>Jt&&--o>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]}});function Zye(t,r){return[Qt(r)*Xt(t),Xt(r)]}function Qye(){return Cs(Zye).scale(249.5).clipAngle(90+Jt)}var Got=N(()=>{"use strict";An();NM();Hp();Zye.invert=Dy(ji)});function Jye(t,r){var n=Qt(r),o=1+Qt(t)*n;return[n*Xt(t)/o,Xt(r)/o]}function ebe(){return Cs(Jye).scale(250).clipAngle(142)}var Wot=N(()=>{"use strict";An();NM();Hp();Jye.invert=Dy(function(t){return 2*Wp(t)})});function tbe(t,r){return[NT(xM((Ho+r)/2)),-t]}function rbe(){var t=Bye(tbe),r=t.center,n=t.rotate;return t.center=function(o){return arguments.length?r([-o[1],o[0]]):(o=r(),[o[1],-o[0]])},t.rotate=function(o){return arguments.length?n([o[0],o[1],o.length>2?o[2]+90:90]):(o=n(),[o[0],o[1],o[2]-90])},n([0,0,90]).scale(159.155)}var qot=N(()=>{"use strict";An();IX();tbe.invert=function(t,r){return[-r,2*Wp(YY(t))-Ho]}});var _5=N(()=>{"use strict";K0e();jnt();Gnt();lot();Tot();Mye();Fot();Oot();Rot();Lot();AX();Bot();$ot();Uye();zot();Uot();Hp();IX();Vot();Got();Wot();qot()});function obe(t){return t>1?MX:t<-1?-MX:Math.asin(t)}function Xot(t){return t>0?Math.sqrt(t):0}var Hot,FX,S5,Yot,W_,MX,O5o,nbe,R5o,P5o,L5o,j5o,Kot=N(()=>{"use strict";Hot=Math.abs,FX=Math.cos,S5=Math.sin,Yot=1e-6,W_=Math.PI,MX=W_/2,O5o=W_/4,nbe=Xot(2),R5o=Xot(W_),P5o=W_*2,L5o=180/W_,j5o=W_/180});function mar(t,r){var n=t*S5(r),o=30,i;do r-=i=(r+S5(r)-n)/(1+FX(r));while(Hot(i)>Yot&&--o>0);return r/2}function gar(t,r,n){function o(i,s){return[t*i*FX(s=mar(n,s)),r*S5(s)]}return o.invert=function(i,s){return s=obe(s/r),[i/(t*FX(s)),obe((2*s+S5(2*s))/n)]},o}function ibe(){return Cs(Zot).scale(169.529)}var Zot,Qot=N(()=>{"use strict";_5();Kot();Zot=gar(nbe/MX,nbe,W_)});var Jot=N(()=>{"use strict";Qot()});function bar(t,r){return function n(){let o=r();return o.type=t,o.path=_X().projection(o),o.copy=o.copy||function(){let i=n();return RX.forEach(s=>{o[s]&&i[s](o[s]())}),i.path.pointRadius(o.path.pointRadius()),i},o}}function C5(t,r){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(OX[t]=bar(t,r),this):OX[t]||null}function sbe(t){return t&&t.path||yar}var yar,RX,OX,abe=N(()=>{"use strict";_5();Jot();yar=_X(),RX=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];OX={albers:y5,albersusa:Fye,azimuthalequalarea:Rye,azimuthalequidistant:Lye,conicconformal:$ye,conicequalarea:G_,conicequidistant:Vye,equalEarth:Wye,equirectangular:zye,gnomonic:Hye,identity:Yye,mercator:jye,mollweide:ibe,naturalEarth1:Kye,orthographic:Qye,stereographic:ebe,transversemercator:rbe};for(let t in OX)C5(t,OX[t])});var vbe={};fn(vbe,{contour:()=>dbe,geojson:()=>hbe,geopath:()=>mbe,geopoint:()=>gbe,geoshape:()=>ybe,graticule:()=>bbe,heatmap:()=>xbe,isocontour:()=>cbe,kde2d:()=>fbe,projection:()=>lit});function xar(){}function rit(){var t=1,r=1,n=l;function o(u,c){return c.map(f=>i(u,f))}function i(u,c){var f=[],d=[];return s(u,c,p=>{n(p,u,c),war(p)>0?f.push([p]):d.push(p)}),d.forEach(p=>{for(var h=0,m=f.length,g;h<m;++h)if(_ar((g=f[h])[0],p)!==-1){g.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:f}}function s(u,c,f){var d=new Array,p=new Array,h,m,g,y,b,x;for(h=m=-1,y=u[0]>=c,Av[y<<1].forEach(v);++h<t-1;)g=y,y=u[h+1]>=c,Av[g|y<<1].forEach(v);for(Av[y<<0].forEach(v);++m<r-1;){for(h=-1,y=u[m*t+t]>=c,b=u[m*t]>=c,Av[y<<1|b<<2].forEach(v);++h<t-1;)g=y,y=u[m*t+t+h+1]>=c,x=b,b=u[m*t+h+1]>=c,Av[g|y<<1|b<<2|x<<3].forEach(v);Av[y|b<<3].forEach(v)}for(h=-1,b=u[m*t]>=c,Av[b<<2].forEach(v);++h<t-1;)x=b,b=u[m*t+h+1]>=c,Av[b<<2|x<<3].forEach(v);Av[b<<3].forEach(v);function v(w){var _=[w[0][0]+h,w[0][1]+m],S=[w[1][0]+h,w[1][1]+m],C=a(_),E=a(S),T,I;(T=p[C])?(I=d[E])?(delete p[T.end],delete d[I.start],T===I?(T.ring.push(S),f(T.ring)):d[T.start]=p[I.end]={start:T.start,end:I.end,ring:T.ring.concat(I.ring)}):(delete p[T.end],T.ring.push(S),p[T.end=E]=T):(T=d[E])?(I=p[C])?(delete d[T.start],delete p[I.end],T===I?(T.ring.push(S),f(T.ring)):d[I.start]=p[T.end]={start:I.start,end:T.end,ring:I.ring.concat(T.ring)}):(delete d[T.start],T.ring.unshift(_),d[T.start=C]=T):d[C]=p[E]={start:C,end:E,ring:[_,S]}}}function a(u){return u[0]*2+u[1]*(t+1)*4}function l(u,c,f){u.forEach(d=>{var p=d[0],h=d[1],m=p|0,g=h|0,y,b=c[g*t+m];p>0&&p<t&&m===p&&(y=c[g*t+m-1],d[0]=p+(f-y)/(b-y)-.5),h>0&&h<r&&g===h&&(y=c[(g-1)*t+m],d[1]=h+(f-y)/(b-y)-.5)})}return o.contour=i,o.size=function(u){if(!arguments.length)return[t,r];var c=Math.floor(u[0]),f=Math.floor(u[1]);return c>=0&&f>=0||pt("invalid size"),t=c,r=f,o},o.smooth=function(u){return arguments.length?(n=u?l:xar,o):n===l},o}function war(t){for(var r=0,n=t.length,o=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++r<n;)o+=t[r-1][1]*t[r][0]-t[r-1][0]*t[r][1];return o}function _ar(t,r){for(var n=-1,o=r.length,i;++n<o;)if(i=Sar(t,r[n]))return i;return 0}function Sar(t,r){for(var n=r[0],o=r[1],i=-1,s=0,a=t.length,l=a-1;s<a;l=s++){var u=t[s],c=u[0],f=u[1],d=t[l],p=d[0],h=d[1];if(Car(u,d,r))return 0;f>o!=h>o&&n<(p-c)*(o-f)/(h-f)+c&&(i=-i)}return i}function Car(t,r,n){var o;return Ear(t,r,n)&&Tar(t[o=+(t[0]===r[0])],n[o],r[o])}function Ear(t,r,n){return(r[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(r[1]-t[1])}function Tar(t,r,n){return t<=r&&r<=n||n<=r&&r<=t}function nit(t,r,n){return function(o){var i=tm(o),s=n?Math.min(i[0],0):i[0],a=i[1],l=a-s,u=r?yc(s,a,t):l/(t+1);return ca(s+u,a,u)}}function cbe(t){et.call(this,null,t)}function Aar(t,r,n){let o=nit(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?o:o(t.map(i=>Mp(r(i).values)))}function kar(t,r,n,o){let i=o.scale||r.scale,s=o.translate||r.translate;if(Dn(i)&&(i=i(n,o)),Dn(s)&&(s=s(n,o)),(i===1||i==null)&&!s)return;let a=(X0(i)?i:i[0])||1,l=(X0(i)?i:i[1])||1,u=s&&s[0]||0,c=s&&s[1]||0;t.forEach(oit(r,a,l,u,c))}function oit(t,r,n,o,i){let s=t.x1||0,a=t.y1||0,l=r*n<0;function u(d){d.forEach(c)}function c(d){l&&d.reverse(),d.forEach(f)}function f(d){d[0]=(d[0]-s)*r+o,d[1]=(d[1]-a)*n+i}return function(d){return d.coordinates.forEach(u),d}}function eit(t,r,n){let o=t>=0?t:ZW(r,n);return Math.round((Math.sqrt(4*o*o+1)-1)/2)}function lbe(t){return Dn(t)?t:Ja(+t)}function iit(){var t=u=>u[0],r=u=>u[1],n=H0,o=[-1,-1],i=960,s=500,a=2;function l(u,c){let f=eit(o[0],u,t)>>a,d=eit(o[1],u,r)>>a,p=f?f+2:0,h=d?d+2:0,m=2*p+(i>>a),g=2*h+(s>>a),y=new Float32Array(m*g),b=new Float32Array(m*g),x=y;u.forEach(w=>{let _=p+(+t(w)>>a),S=h+(+r(w)>>a);_>=0&&_<m&&S>=0&&S<g&&(y[_+S*m]+=+n(w))}),f>0&&d>0?(OM(m,g,y,b,f),RM(m,g,b,y,d),OM(m,g,y,b,f),RM(m,g,b,y,d),OM(m,g,y,b,f),RM(m,g,b,y,d)):f>0?(OM(m,g,y,b,f),OM(m,g,b,y,f),OM(m,g,y,b,f),x=b):d>0&&(RM(m,g,y,b,d),RM(m,g,b,y,d),RM(m,g,y,b,d),x=b);let v=c?Math.pow(2,-2*a):1/mN(x);for(let w=0,_=m*g;w<_;++w)x[w]*=v;return{values:x,scale:1<<a,width:m,height:g,x1:p,y1:h,x2:p+(i>>a),y2:h+(s>>a)}}return l.x=function(u){return arguments.length?(t=lbe(u),l):t},l.y=function(u){return arguments.length?(r=lbe(u),l):r},l.weight=function(u){return arguments.length?(n=lbe(u),l):n},l.size=function(u){if(!arguments.length)return[i,s];var c=+u[0],f=+u[1];return c>=0&&f>=0||pt("invalid size"),i=c,s=f,l},l.cellSize=function(u){return arguments.length?((u=+u)>=1||pt("invalid cell size"),a=Math.floor(Math.log(u)/Math.LN2),l):1<<a},l.bandwidth=function(u){return arguments.length?(u=Br(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&pt("invalid bandwidth"),o=u,l):o},l}function OM(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<r;++a)for(let l=0,u=0;l<t+i;++l)l<t&&(u+=n[l+a*t]),l>=i&&(l>=s&&(u-=n[l-s+a*t]),o[l-i+a*t]=u/Math.min(l+1,t-1+s-l,s))}function RM(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<t;++a)for(let l=0,u=0;l<r+i;++l)l<r&&(u+=n[a+l*t]),l>=i&&(l>=s&&(u-=n[a+(l-s)*t]),o[a+(l-i)*t]=u/Math.min(l+1,r-1+s-l,s))}function fbe(t){et.call(this,null,t)}function sit(t,r){return Iar.forEach(n=>r[n]!=null?t[n](r[n]):0),t}function Dar(t,r){var n=[],o=f=>f(l),i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function dbe(t){et.call(this,null,t)}function hbe(t){et.call(this,null,t)}function mbe(t){et.call(this,null,t)}function Mar(t,r){let n=t.pointRadius();return t.context(null),r!=null&&t.pointRadius(r),n}function gbe(t){et.call(this,null,t)}function ybe(t){et.call(this,null,t)}function Far(t,r,n){let o=n==null?i=>t(r(i)):i=>{var s=t.pointRadius(),a=t.pointRadius(n)(r(i));return t.pointRadius(s),a};return o.context=i=>(t.context(i),o),o}function bbe(t){et.call(this,[],t),this.generator=pX()}function xbe(t){et.call(this,null,t)}function Oar(t,r){let n;return Dn(t)?(n=o=>pa(t(o,r)),n.dep=ait(t)):n=Ja(pa(t||"#888")),n}function Rar(t,r){let n;return Dn(t)?(n=o=>t(o,r),n.dep=ait(t)):t?n=Ja(t):(n=o=>o.$value/o.$max||0,n.dep=!0),n}function ait(t){if(!Dn(t))return!1;let r=vu(Na(t));return r.$x||r.$y||r.$value||r.$max}function Par(t,r,n,o){let i=t.width,s=t.height,a=t.x1||0,l=t.y1||0,u=t.x2||i,c=t.y2||s,f=t.values,d=f?y=>f[y]:Jh,p=ff(u-a,c-l),h=p.getContext("2d"),m=h.getImageData(0,0,u-a,c-l),g=m.data;for(let y=l,b=0;y<c;++y){r.$y=y-l;for(let x=a,v=y*i;x<u;++x,b+=4){r.$x=x-a,r.$value=d(x+v);let w=n(r);g[b+0]=w.r,g[b+1]=w.g,g[b+2]=w.b,g[b+3]=~~(255*o(r))}}return h.putImageData(m,0,0),p}function lit(t){et.call(this,null,t),this.modified(!0)}function Lar(t,r){let n=Bar(r.fit);r.extent?t.fitExtent(r.extent,n):r.size&&t.fitSize(r.size,n)}function jar(t){let r=C5((t||"mercator").toLowerCase());return r||pt("Unrecognized projection type: "+t),r()}function tit(t,r,n){Dn(t[r])&&t[r](n)}function Bar(t){return t=Br(t),t.length===1?t[0]:{type:pbe,features:t.reduce((r,n)=>r.concat($ar(n)),[])}}function $ar(t){return t.type===pbe?t.features:Br(t).filter(r=>r!=null).map(r=>r.type===ube?r:{type:ube,geometry:r})}var Av,Iar,ube,pbe,Nar,uit=N(()=>{"use strict";tl();Ls();qo();bN();abe();_5();js();kN();Av=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];cbe.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Dt(cbe,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=t.field||mc,s=rit().smooth(t.smooth!==!1),a=t.thresholds||Aar(o,i,t),l=t.as===null?null:t.as||"contour",u=[];return o.forEach(c=>{let f=i(c),d=s.size([f.width,f.height])(f.values,Hr(a)?a:a(f.values));kar(d,f,c,t),d.forEach(p=>{u.push(OE(c,Nn(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});fbe.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};Iar=["x","y","weight","size","cellSize","bandwidth"];Dt(fbe,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=Dar(o,t.groupby),s=(t.groupby||[]).map(Li),a=sit(iit(),t),l=t.as||"grid",u=[];function c(f,d){for(let p=0;p<s.length;++p)f[s[p]]=d[p];return f}return u=i.map(f=>Nn(c({[l]:a(f,t.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});dbe.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Dt(dbe,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=rit().smooth(t.smooth!==!1),i=t.values,s=t.thresholds||nit(t.count||10,t.nice,!!i),a=t.size,l,u;return i||(i=r.materialize(r.SOURCE).source,l=sit(iit(),t)(i,!0),u=oit(l,l.scale||1,l.scale||1,0,0),a=[l.width,l.height],i=l.values),s=Hr(s)?s:s(i),i=o.size(a)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Nn),n}});ube="Feature",pbe="FeatureCollection",Nar="MultiPoint";hbe.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Dt(hbe,et,{transform(t,r){var n=this._features,o=this._points,i=t.fields,s=i&&i[0],a=i&&i[1],l=t.geojson||!i&&mc,u=r.ADD,c;c=t.modified()||r.changed(r.REM)||r.modified(Na(l))||s&&r.modified(Na(s))||a&&r.modified(Na(a)),(!this.value||c)&&(u=r.SOURCE,this._features=n=[],this._points=o=[]),l&&r.visit(u,f=>n.push(l(f))),s&&a&&(r.visit(u,f=>{var d=s(f),p=a(f);d!=null&&p!=null&&(d=+d)===d&&(p=+p)===p&&o.push([d,p])}),n=n.concat({type:ube,geometry:{type:Nar,coordinates:o}})),this.value={type:pbe,features:n}}});mbe.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Dt(mbe,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.field||mc,s=t.as||"path",a=n.SOURCE;!o||t.modified()?(this.value=o=sbe(t.projection),n.materialize().reflow()):a=i===mc||r.modified(i.fields)?n.ADD_MOD:n.ADD;let l=Mar(o,t.pointRadius);return n.visit(a,u=>u[s]=o(i(u))),o.pointRadius(l),n.modifies(s)}});gbe.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Dt(gbe,et,{transform(t,r){var n=t.projection,o=t.fields[0],i=t.fields[1],s=t.as||["x","y"],a=s[0],l=s[1],u;function c(f){let d=n([o(f),i(f)]);d?(f[a]=d[0],f[l]=d[1]):(f[a]=void 0,f[l]=void 0)}return t.modified()?r=r.materialize().reflow(!0).visit(r.SOURCE,c):(u=r.modified(o.fields)||r.modified(i.fields),r.visit(u?r.ADD_MOD:r.ADD,c)),r.modifies(s)}});ybe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Dt(ybe,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.as||"shape",s=n.ADD;return(!o||t.modified())&&(this.value=o=Far(sbe(t.projection),t.field||Qh("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=o),n.modifies(i)}});bbe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Dt(bbe,et,{transform(t,r){var n=this.value,o=this.generator,i;if(!n.length||t.modified())for(let s in t)Dn(o[s])&&o[s](t[s]);return i=o(),n.length?r.mod.push(zW(n[0],i)):r.add.push(Nn(i)),n[0]=i,r}});xbe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Dt(xbe,et,{transform(t,r){if(!r.changed()&&!t.modified())return r.StopPropagation;var n=r.materialize(r.SOURCE).source,o=t.resolve==="shared",i=t.field||mc,s=Rar(t.opacity,t),a=Oar(t.color,t),l=t.as||"image",u={$x:0,$y:0,$value:0,$max:o?Mp(n.map(c=>Mp(i(c).values))):0};return n.forEach(c=>{let f=i(c),d=an({},c,u);o||(d.$max=Mp(f.values||[])),c[l]=Par(f,d,a.dep?a:Ja(a(d)),s.dep?s:Ja(s(d)))}),r.reflow(!0).modifies(l)}});Dt(lit,et,{transform(t,r){let n=this.value;return!n||t.modified("type")?(this.value=n=jar(t.type),RX.forEach(o=>{t[o]!=null&&tit(n,o,t[o])})):RX.forEach(o=>{t.modified(o)&&tit(n,o,t[o])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&Lar(n,t),r.fork(r.NO_SOURCE|r.NO_FIELDS)}})});function wbe(t,r){var n,o=1;t==null&&(t=0),r==null&&(r=0);function i(){var s,a=n.length,l,u=0,c=0;for(s=0;s<a;++s)l=n[s],u+=l.x,c+=l.y;for(u=(u/a-t)*o,c=(c/a-r)*o,s=0;s<a;++s)l=n[s],l.x-=u,l.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(r=+s,i):r},i.strength=function(s){return arguments.length?(o=+s,i):o},i}var cit=N(()=>{"use strict"});function fit(t){let r=+this._x.call(null,t),n=+this._y.call(null,t);return dit(this.cover(r,n),r,n,t)}function dit(t,r,n,o){if(isNaN(r)||isNaN(n))return t;var i,s=t._root,a={data:o},l=t._x0,u=t._y0,c=t._x1,f=t._y1,d,p,h,m,g,y,b,x;if(!s)return t._root=a,t;for(;s.length;)if((g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p,i=s,!(s=s[b=y<<1|g]))return i[b]=a,t;if(h=+t._x.call(null,s.data),m=+t._y.call(null,s.data),r===h&&n===m)return a.next=s,i?i[b]=a:t._root=a,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p;while((b=y<<1|g)===(x=(m>=p)<<1|h>=d));return i[x]=s,i[b]=a,t}function pit(t){var r,n,o=t.length,i,s,a=new Array(o),l=new Array(o),u=1/0,c=1/0,f=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,r=t[n]))||isNaN(s=+this._y.call(null,r))||(a[n]=i,l[n]=s,i<u&&(u=i),i>f&&(f=i),s<c&&(c=s),s>d&&(d=s));if(u>f||c>d)return this;for(this.cover(u,c).cover(f,d),n=0;n<o;++n)dit(this,a[n],l[n],t[n]);return this}var hit=N(()=>{"use strict"});function mit(t,r){if(isNaN(t=+t)||isNaN(r=+r))return this;var n=this._x0,o=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(o=Math.floor(r))+1;else{for(var a=i-n||1,l=this._root,u,c;n>t||t>=i||o>r||r>=s;)switch(c=(r<o)<<1|t<n,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:i=n+a,s=o+a;break;case 1:n=i-a,s=o+a;break;case 2:i=n+a,o=s-a;break;case 3:n=i-a,o=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=o,this._x1=i,this._y1=s,this}var git=N(()=>{"use strict"});function yit(){var t=[];return this.visit(function(r){if(!r.length)do t.push(r.data);while(r=r.next)}),t}var bit=N(()=>{"use strict"});function xit(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}var vit=N(()=>{"use strict"});function ll(t,r,n,o,i){this.node=t,this.x0=r,this.y0=n,this.x1=o,this.y1=i}var PX=N(()=>{"use strict"});function wit(t,r,n){var o,i=this._x0,s=this._y0,a,l,u,c,f=this._x1,d=this._y1,p=[],h=this._root,m,g;for(h&&p.push(new ll(h,i,s,f,d)),n==null?n=1/0:(i=t-n,s=r-n,f=t+n,d=r+n,n*=n);m=p.pop();)if(!(!(h=m.node)||(a=m.x0)>f||(l=m.y0)>d||(u=m.x1)<i||(c=m.y1)<s))if(h.length){var y=(a+u)/2,b=(l+c)/2;p.push(new ll(h[3],y,b,u,c),new ll(h[2],a,b,y,c),new ll(h[1],y,l,u,b),new ll(h[0],a,l,y,b)),(g=(r>=b)<<1|t>=y)&&(m=p[p.length-1],p[p.length-1]=p[p.length-1-g],p[p.length-1-g]=m)}else{var x=t-+this._x.call(null,h.data),v=r-+this._y.call(null,h.data),w=x*x+v*v;if(w<n){var _=Math.sqrt(n=w);i=t-_,s=r-_,f=t+_,d=r+_,o=h.data}}return o}var _it=N(()=>{"use strict";PX()});function Sit(t){if(isNaN(f=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var r,n=this._root,o,i,s,a=this._x0,l=this._y0,u=this._x1,c=this._y1,f,d,p,h,m,g,y,b;if(!n)return this;if(n.length)for(;;){if((m=f>=(p=(a+u)/2))?a=p:u=p,(g=d>=(h=(l+c)/2))?l=h:c=h,r=n,!(n=n[y=g<<1|m]))return this;if(!n.length)break;(r[y+1&3]||r[y+2&3]||r[y+3&3])&&(o=r,b=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):r?(s?r[y]=s:delete r[y],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(o?o[b]=n:this._root=n),this):(this._root=s,this)}function Cit(t){for(var r=0,n=t.length;r<n;++r)this.remove(t[r]);return this}var Eit=N(()=>{"use strict"});function Tit(){return this._root}var Ait=N(()=>{"use strict"});function kit(){var t=0;return this.visit(function(r){if(!r.length)do++t;while(r=r.next)}),t}var Iit=N(()=>{"use strict"});function Dit(t){var r=[],n,o=this._root,i,s,a,l,u;for(o&&r.push(new ll(o,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!t(o=n.node,s=n.x0,a=n.y0,l=n.x1,u=n.y1)&&o.length){var c=(s+l)/2,f=(a+u)/2;(i=o[3])&&r.push(new ll(i,c,f,l,u)),(i=o[2])&&r.push(new ll(i,s,f,c,u)),(i=o[1])&&r.push(new ll(i,c,a,l,f)),(i=o[0])&&r.push(new ll(i,s,a,c,f))}return this}var Nit=N(()=>{"use strict";PX()});function Mit(t){var r=[],n=[],o;for(this._root&&r.push(new ll(this._root,this._x0,this._y0,this._x1,this._y1));o=r.pop();){var i=o.node;if(i.length){var s,a=o.x0,l=o.y0,u=o.x1,c=o.y1,f=(a+u)/2,d=(l+c)/2;(s=i[0])&&r.push(new ll(s,a,l,f,d)),(s=i[1])&&r.push(new ll(s,f,l,u,d)),(s=i[2])&&r.push(new ll(s,a,d,f,c)),(s=i[3])&&r.push(new ll(s,f,d,u,c))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}var Fit=N(()=>{"use strict";PX()});function Oit(t){return t[0]}function Rit(t){return arguments.length?(this._x=t,this):this._x}var Pit=N(()=>{"use strict"});function Lit(t){return t[1]}function jit(t){return arguments.length?(this._y=t,this):this._y}var Bit=N(()=>{"use strict"});function jT(t,r,n){var o=new _be(r??Oit,n??Lit,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function _be(t,r,n,o,i,s){this._x=t,this._y=r,this._x0=n,this._y0=o,this._x1=i,this._y1=s,this._root=void 0}function $it(t){for(var r={data:t.data},n=r;t=t.next;)n=n.next={data:t.data};return r}var Nc,zit=N(()=>{"use strict";hit();git();bit();vit();_it();Eit();Ait();Iit();Nit();Fit();Pit();Bit();Nc=jT.prototype=_be.prototype;Nc.copy=function(){var t=new _be(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,o;if(!r)return t;if(!r.length)return t._root=$it(r),t;for(n=[{source:r,target:t._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(o=r.source[i])&&(o.length?n.push({source:o,target:r.target[i]=new Array(4)}):r.target[i]=$it(o));return t};Nc.add=fit;Nc.addAll=pit;Nc.cover=mit;Nc.data=yit;Nc.extent=xit;Nc.find=wit;Nc.remove=Sit;Nc.removeAll=Cit;Nc.root=Tit;Nc.size=kit;Nc.visit=Dit;Nc.visitAfter=Mit;Nc.x=Rit;Nc.y=jit});var Sbe=N(()=>{"use strict";zit()});function ga(t){return function(){return t}}var PM=N(()=>{"use strict"});function Am(t){return(t()-.5)*1e-6}var LX=N(()=>{"use strict"});function zar(t){return t.x+t.vx}function Uar(t){return t.y+t.vy}function Cbe(t){var r,n,o,i=1,s=1;typeof t!="function"&&(t=ga(t==null?1:+t));function a(){for(var c,f=r.length,d,p,h,m,g,y,b=0;b<s;++b)for(d=jT(r,zar,Uar).visitAfter(l),c=0;c<f;++c)p=r[c],g=n[p.index],y=g*g,h=p.x+p.vx,m=p.y+p.vy,d.visit(x);function x(v,w,_,S,C){var E=v.data,T=v.r,I=g+T;if(E){if(E.index>p.index){var k=h-E.x-E.vx,F=m-E.y-E.vy,D=k*k+F*F;D<I*I&&(k===0&&(k=Am(o),D+=k*k),F===0&&(F=Am(o),D+=F*F),D=(I-(D=Math.sqrt(D)))/D*i,p.vx+=(k*=D)*(I=(T*=T)/(y+T)),p.vy+=(F*=D)*I,E.vx-=k*(I=1-I),E.vy-=F*I)}return}return w>h+I||S<h-I||_>m+I||C<m-I}}function l(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(r){var c,f=r.length,d;for(n=new Array(f),c=0;c<f;++c)d=r[c],n[d.index]=+t(d,c,r)}}return a.initialize=function(c,f){r=c,o=f,u()},a.iterations=function(c){return arguments.length?(s=+c,a):s},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:ga(+c),u(),a):t},a}var Uit=N(()=>{"use strict";Sbe();PM();LX()});function Var(t){return t.index}function Vit(t,r){var n=t.get(r);if(!n)throw new Error("node not found: "+r);return n}function Ebe(t){var r=Var,n=d,o,i=ga(30),s,a,l,u,c,f=1;t==null&&(t=[]);function d(y){return 1/Math.min(l[y.source.index],l[y.target.index])}function p(y){for(var b=0,x=t.length;b<f;++b)for(var v=0,w,_,S,C,E,T,I;v<x;++v)w=t[v],_=w.source,S=w.target,C=S.x+S.vx-_.x-_.vx||Am(c),E=S.y+S.vy-_.y-_.vy||Am(c),T=Math.sqrt(C*C+E*E),T=(T-s[v])/T*y*o[v],C*=T,E*=T,S.vx-=C*(I=u[v]),S.vy-=E*I,_.vx+=C*(I=1-I),_.vy+=E*I}function h(){if(a){var y,b=a.length,x=t.length,v=new Map(a.map((_,S)=>[r(_,S,a),_])),w;for(y=0,l=new Array(b);y<x;++y)w=t[y],w.index=y,typeof w.source!="object"&&(w.source=Vit(v,w.source)),typeof w.target!="object"&&(w.target=Vit(v,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(y=0,u=new Array(x);y<x;++y)w=t[y],u[y]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);o=new Array(x),m(),s=new Array(x),g()}}function m(){if(a)for(var y=0,b=t.length;y<b;++y)o[y]=+n(t[y],y,t)}function g(){if(a)for(var y=0,b=t.length;y<b;++y)s[y]=+i(t[y],y,t)}return p.initialize=function(y,b){a=y,c=b,h()},p.links=function(y){return arguments.length?(t=y,h(),p):t},p.id=function(y){return arguments.length?(r=y,p):r},p.iterations=function(y){return arguments.length?(f=+y,p):f},p.strength=function(y){return arguments.length?(n=typeof y=="function"?y:ga(+y),m(),p):n},p.distance=function(y){return arguments.length?(i=typeof y=="function"?y:ga(+y),g(),p):i},p}var Git=N(()=>{"use strict";PM();LX()});function qit(){for(var t=0,r=arguments.length,n={},o;t<r;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new jX(n)}function jX(t){this._=t}function War(t,r){return t.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}function qar(t,r){for(var n=0,o=t.length,i;n<o;++n)if((i=t[n]).name===r)return i.value}function Wit(t,r,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===r){t[o]=Gar,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:r,value:n}),t}var Gar,Tbe,Hit=N(()=>{"use strict";Gar={value:()=>{}};jX.prototype=qit.prototype={constructor:jX,on:function(t,r){var n=this._,o=War(t+"",n),i,s=-1,a=o.length;if(arguments.length<2){for(;++s<a;)if((i=(t=o[s]).type)&&(i=qar(n[i],t.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++s<a;)if(i=(t=o[s]).type)n[i]=Wit(n[i],t.name,r);else if(r==null)for(i in n)n[i]=Wit(n[i],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new jX(t)},call:function(t,r){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,s;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],o=0,i=s.length;o<i;++o)s[o].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(r,n)}};Tbe=qit});var Yit=N(()=>{"use strict";Hit()});function D5(){return BT||(Zit(Har),BT=k5.now()+zX)}function Har(){BT=0}function I5(){this._call=this._time=this._next=null}function UX(t,r,n){var o=new I5;return o.restart(t,r,n),o}function Qit(){D5(),++LM;for(var t=BX,r;t;)(r=BT-t._time)>=0&&t._call.call(null,r),t=t._next;--LM}function Xit(){BT=($X=k5.now())+zX,LM=T5=0;try{Qit()}finally{LM=0,Xar(),BT=0}}function Yar(){var t=k5.now(),r=t-$X;r>Kit&&(zX-=r,$X=t)}function Xar(){for(var t,r=BX,n,o=1/0;r;)r._call?(o>r._time&&(o=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:BX=n);A5=t,Abe(o)}function Abe(t){if(!LM){T5&&(T5=clearTimeout(T5));var r=t-BT;r>24?(t<1/0&&(T5=setTimeout(Xit,t-k5.now()-zX)),E5&&(E5=clearInterval(E5))):(E5||($X=k5.now(),E5=setInterval(Yar,Kit)),LM=1,Zit(Xit))}}var LM,T5,E5,Kit,BX,A5,$X,BT,zX,k5,Zit,kbe=N(()=>{"use strict";LM=0,T5=0,E5=0,Kit=1e3,$X=0,BT=0,zX=0,k5=typeof performance=="object"&&performance.now?performance:Date,Zit=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};I5.prototype=UX.prototype={constructor:I5,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?D5():+n)+(r==null?0:+r),!this._next&&A5!==this&&(A5?A5._next=this:BX=this,A5=this),this._call=t,this._time=n,Abe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Abe())}}});function Ibe(t,r,n){var o=new I5,i=r;return r==null?(o.restart(t,r,n),o):(o._restart=o.restart,o.restart=function(s,a,l){a=+a,l=l==null?D5():+l,o._restart(function u(c){c+=i,o._restart(u,i+=a,l),s(c)},a,l)},o.restart(t,r,n),o)}var Jit=N(()=>{"use strict";kbe()});var Dbe=N(()=>{"use strict";kbe();Jit()});function est(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var tst=N(()=>{"use strict"});function rst(t){return t.x}function nst(t){return t.y}function Nbe(t){var r,n=1,o=.001,i=1-Math.pow(o,1/300),s=0,a=.6,l=new Map,u=UX(d),c=Tbe("tick","end"),f=est();t==null&&(t=[]);function d(){p(),c.call("tick",r),n<o&&(u.stop(),c.call("end",r))}function p(g){var y,b=t.length,x;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*i,l.forEach(function(w){w(n)}),y=0;y<b;++y)x=t[y],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return r}function h(){for(var g=0,y=t.length,b;g<y;++g){if(b=t[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var x=Kar*Math.sqrt(.5+g),v=g*Zar;b.x=x*Math.cos(v),b.y=x*Math.sin(v)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function m(g){return g.initialize&&g.initialize(t,f),g}return h(),r={tick:p,restart:function(){return u.restart(d),r},stop:function(){return u.stop(),r},nodes:function(g){return arguments.length?(t=g,h(),l.forEach(m),r):t},alpha:function(g){return arguments.length?(n=+g,r):n},alphaMin:function(g){return arguments.length?(o=+g,r):o},alphaDecay:function(g){return arguments.length?(i=+g,r):+i},alphaTarget:function(g){return arguments.length?(s=+g,r):s},velocityDecay:function(g){return arguments.length?(a=1-g,r):1-a},randomSource:function(g){return arguments.length?(f=g,l.forEach(m),r):f},force:function(g,y){return arguments.length>1?(y==null?l.delete(g):l.set(g,m(y)),r):l.get(g)},find:function(g,y,b){var x=0,v=t.length,w,_,S,C,E;for(b==null?b=1/0:b*=b,x=0;x<v;++x)C=t[x],w=g-C.x,_=y-C.y,S=w*w+_*_,S<b&&(E=C,b=S);return E},on:function(g,y){return arguments.length>1?(c.on(g,y),r):c.on(g)}}}var Kar,Zar,Mbe=N(()=>{"use strict";Yit();Dbe();tst();Kar=10,Zar=Math.PI*(3-Math.sqrt(5))});function Fbe(){var t,r,n,o,i=ga(-30),s,a=1,l=1/0,u=.81;function c(h){var m,g=t.length,y=jT(t,rst,nst).visitAfter(d);for(o=h,m=0;m<g;++m)r=t[m],y.visit(p)}function f(){if(t){var h,m=t.length,g;for(s=new Array(m),h=0;h<m;++h)g=t[h],s[g.index]=+i(g,h,t)}}function d(h){var m=0,g,y,b=0,x,v,w;if(h.length){for(x=v=w=0;w<4;++w)(g=h[w])&&(y=Math.abs(g.value))&&(m+=g.value,b+=y,x+=y*g.x,v+=y*g.y);h.x=x/b,h.y=v/b}else{g=h,g.x=g.data.x,g.y=g.data.y;do m+=s[g.data.index];while(g=g.next)}h.value=m}function p(h,m,g,y){if(!h.value)return!0;var b=h.x-r.x,x=h.y-r.y,v=y-m,w=b*b+x*x;if(v*v/u<w)return w<l&&(b===0&&(b=Am(n),w+=b*b),x===0&&(x=Am(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)),r.vx+=b*h.value*o/w,r.vy+=x*h.value*o/w),!0;if(h.length||w>=l)return;(h.data!==r||h.next)&&(b===0&&(b=Am(n),w+=b*b),x===0&&(x=Am(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)));do h.data!==r&&(v=s[h.data.index]*o/w,r.vx+=b*v,r.vy+=x*v);while(h=h.next)}return c.initialize=function(h,m){t=h,n=m,f()},c.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ga(+h),f(),c):i},c.distanceMin=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.distanceMax=function(h){return arguments.length?(l=h*h,c):Math.sqrt(l)},c.theta=function(h){return arguments.length?(u=h*h,c):Math.sqrt(u)},c}var ost=N(()=>{"use strict";Sbe();PM();LX();Mbe()});function Obe(t){var r=ga(.1),n,o,i;typeof t!="function"&&(t=ga(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(i[u]-f.x)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:ga(+l),a(),s):r},s.x=function(l){return arguments.length?(t=typeof l=="function"?l:ga(+l),a(),s):t},s}var ist=N(()=>{"use strict";PM()});function Rbe(t){var r=ga(.1),n,o,i;typeof t!="function"&&(t=ga(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(i[u]-f.y)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:ga(+l),a(),s):r},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:ga(+l),a(),s):t},s}var sst=N(()=>{"use strict";PM()});var ast=N(()=>{"use strict";cit();Uit();Git();ost();Mbe();ist();sst()});var jbe={};fn(jbe,{force:()=>Lbe});function Lbe(t){et.call(this,null,t)}function Jar(t,r){return()=>t.touch(r).run()}function elr(t,r){let n=Nbe(t),o=n.stop,i=n.restart,s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,o()),cst(n,r,!0).on("end",()=>s=!0)}function cst(t,r,n,o){var i=Br(r.forces),s,a,l,u;for(s=0,a=Pbe.length;s<a;++s)l=Pbe[s],l!==N5&&r.modified(l)&&t[l](r[l]);for(s=0,a=i.length;s<a;++s)u=N5+s,l=n||r.modified(N5,s)?rlr(i[s]):o&&tlr(i[s],o)?t.force(u):null,l&&t.force(u,l);for(a=t.numForces||0;s<a;++s)t.force(N5+s,null);return t.numForces=i.length,t}function tlr(t,r){var n,o;for(n in t)if(Dn(o=t[n])&&r.modified(Na(o)))return 1;return 0}function rlr(t){var r,n;Pr(lst,t.force)||pt("Unrecognized force: "+t.force),r=lst[t.force]();for(n in t)Dn(r[n])&&nlr(r[n],t[n],t);return r}function nlr(t,r,n){t(Dn(r)?o=>r(o,n):r)}var lst,N5,Pbe,Qar,ust,fst=N(()=>{"use strict";tl();Ls();ast();lst={center:wbe,collide:Cbe,nbody:Fbe,link:Ebe,x:Obe,y:Rbe},N5="forces",Pbe=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Qar=["static","iterations"],ust=["x","y","vx","vy"];Lbe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ust}]};Dt(Lbe,et,{transform(t,r){var n=this.value,o=r.changed(r.ADD_REM),i=t.modified(Pbe),s=t.iterations||300;if(n?(o&&(r.modifies("index"),n.nodes(r.source)),(i||r.changed(r.MOD))&&cst(n,t,0,r)):(this.value=n=elr(r.source,t),n.on("tick",Jar(r.dataflow,this)),t.static||(o=!0,n.tick()),r.modifies("index")),i||o||t.modified(Qar)||r.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!o)return r.StopPropagation}return this.finish(t,r)},finish(t,r){let n=r.dataflow;for(let l=this._argops,u=0,c=l.length,f;u<c;++u)if(f=l[u],!(f.name!==N5||f.op._argval.force!=="link")){for(var o=f.op._argops,i=0,s=o.length,a;i<s;++i)if(o[i].name==="links"&&(a=o[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return r.reflow(t.modified()).modifies(ust)}})});function olr(t,r){return t.parent===r.parent?1:2}function ilr(t){return t.reduce(slr,0)/t.length}function slr(t,r){return t+r.x}function alr(t){return 1+t.reduce(llr,0)}function llr(t,r){return Math.max(t,r.y)}function ulr(t){for(var r;r=t.children;)t=r[0];return t}function clr(t){for(var r;r=t.children;)t=r[r.length-1];return t}function Bbe(){var t=olr,r=1,n=1,o=!1;function i(s){var a,l=0;s.eachAfter(function(p){var h=p.children;h?(p.x=ilr(h),p.y=alr(h)):(p.x=a?l+=t(p,a):0,p.y=0,a=p)});var u=ulr(s),c=clr(s),f=u.x-t(u,c)/2,d=c.x+t(c,u)/2;return s.eachAfter(o?function(p){p.x=(p.x-s.x)*r,p.y=(s.y-p.y)*n}:function(p){p.x=(p.x-f)/(d-f)*r,p.y=(1-(s.y?p.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(o=!1,r=+s[0],n=+s[1],i):o?null:[r,n]},i.nodeSize=function(s){return arguments.length?(o=!0,r=+s[0],n=+s[1],i):o?[r,n]:null},i}var dst=N(()=>{"use strict"});function flr(t){var r=0,n=t.children,o=n&&n.length;if(!o)r=1;else for(;--o>=0;)r+=n[o].value;t.value=r}function pst(){return this.eachAfter(flr)}var hst=N(()=>{"use strict"});function mst(t,r){let n=-1;for(let o of this)t.call(r,o,++n,this);return this}var gst=N(()=>{"use strict"});function yst(t,r){for(var n=this,o=[n],i,s,a=-1;n=o.pop();)if(t.call(r,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)o.push(i[s]);return this}var bst=N(()=>{"use strict"});function xst(t,r){for(var n=this,o=[n],i=[],s,a,l,u=-1;n=o.pop();)if(i.push(n),s=n.children)for(a=0,l=s.length;a<l;++a)o.push(s[a]);for(;n=i.pop();)t.call(r,n,++u,this);return this}var vst=N(()=>{"use strict"});function wst(t,r){let n=-1;for(let o of this)if(t.call(r,o,++n,this))return o}var _st=N(()=>{"use strict"});function Sst(t){return this.eachAfter(function(r){for(var n=+t(r.data)||0,o=r.children,i=o&&o.length;--i>=0;)n+=o[i].value;r.value=n})}var Cst=N(()=>{"use strict"});function Est(t){return this.eachBefore(function(r){r.children&&r.children.sort(t)})}var Tst=N(()=>{"use strict"});function Ast(t){for(var r=this,n=dlr(r,t),o=[r];r!==n;)r=r.parent,o.push(r);for(var i=o.length;t!==n;)o.splice(i,0,t),t=t.parent;return o}function dlr(t,r){if(t===r)return t;var n=t.ancestors(),o=r.ancestors(),i=null;for(t=n.pop(),r=o.pop();t===r;)i=t,t=n.pop(),r=o.pop();return i}var kst=N(()=>{"use strict"});function Ist(){for(var t=this,r=[t];t=t.parent;)r.push(t);return r}var Dst=N(()=>{"use strict"});function Nst(){return Array.from(this)}var Mst=N(()=>{"use strict"});function Fst(){var t=[];return this.eachBefore(function(r){r.children||t.push(r)}),t}var Ost=N(()=>{"use strict"});function Rst(){var t=this,r=[];return t.each(function(n){n!==t&&r.push({source:n.parent,target:n})}),r}var Pst=N(()=>{"use strict"});function*Lst(){var t=this,r,n=[t],o,i,s;do for(r=n.reverse(),n=[];t=r.pop();)if(yield t,o=t.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);while(n.length)}var jst=N(()=>{"use strict"});function jM(t,r){t instanceof Map?(t=[void 0,t],r===void 0&&(r=mlr)):r===void 0&&(r=hlr);for(var n=new q_(t),o,i=[n],s,a,l,u;o=i.pop();)if((a=r(o.data))&&(u=(a=Array.from(a)).length))for(o.children=a,l=u-1;l>=0;--l)i.push(s=a[l]=new q_(a[l])),s.parent=o,s.depth=o.depth+1;return n.eachBefore($be)}function plr(){return jM(this).eachBefore(glr)}function hlr(t){return t.children}function mlr(t){return Array.isArray(t)?t[1]:null}function glr(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function $be(t){var r=0;do t.height=r;while((t=t.parent)&&t.height<++r)}function q_(t){this.data=t,this.depth=this.height=0,this.parent=null}var VX=N(()=>{"use strict";hst();gst();bst();vst();_st();Cst();Tst();kst();Dst();Mst();Ost();Pst();jst();q_.prototype=jM.prototype={constructor:q_,count:pst,each:mst,eachAfter:xst,eachBefore:yst,find:wst,sum:Sst,sort:Est,path:Ast,ancestors:Ist,descendants:Nst,leaves:Fst,links:Rst,copy:plr,[Symbol.iterator]:Lst}});function Bst(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $st(t){for(var r=t.length,n,o;r;)o=Math.random()*r--|0,n=t[r],t[r]=t[o],t[o]=n;return t}var zbe=N(()=>{"use strict"});function zst(t){for(var r=0,n=(t=$st(Array.from(t))).length,o=[],i,s;r<n;)i=t[r],s&&Ust(s,i)?++r:(s=blr(o=ylr(o,i)),r=0);return s}function ylr(t,r){var n,o;if(Ube(r,t))return[r];for(n=0;n<t.length;++n)if(GX(r,t[n])&&Ube(M5(t[n],r),t))return[t[n],r];for(n=0;n<t.length-1;++n)for(o=n+1;o<t.length;++o)if(GX(M5(t[n],t[o]),r)&&GX(M5(t[n],r),t[o])&&GX(M5(t[o],r),t[n])&&Ube(Vst(t[n],t[o],r),t))return[t[n],t[o],r];throw new Error}function GX(t,r){var n=t.r-r.r,o=r.x-t.x,i=r.y-t.y;return n<0||n*n<o*o+i*i}function Ust(t,r){var n=t.r-r.r+Math.max(t.r,r.r,1)*1e-9,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function Ube(t,r){for(var n=0;n<r.length;++n)if(!Ust(t,r[n]))return!1;return!0}function blr(t){switch(t.length){case 1:return xlr(t[0]);case 2:return M5(t[0],t[1]);case 3:return Vst(t[0],t[1],t[2])}}function xlr(t){return{x:t.x,y:t.y,r:t.r}}function M5(t,r){var n=t.x,o=t.y,i=t.r,s=r.x,a=r.y,l=r.r,u=s-n,c=a-o,f=l-i,d=Math.sqrt(u*u+c*c);return{x:(n+s+u/d*f)/2,y:(o+a+c/d*f)/2,r:(d+i+l)/2}}function Vst(t,r,n){var o=t.x,i=t.y,s=t.r,a=r.x,l=r.y,u=r.r,c=n.x,f=n.y,d=n.r,p=o-a,h=o-c,m=i-l,g=i-f,y=u-s,b=d-s,x=o*o+i*i-s*s,v=x-a*a-l*l+u*u,w=x-c*c-f*f+d*d,_=h*m-p*g,S=(m*w-g*v)/(_*2)-o,C=(g*y-m*b)/_,E=(h*v-p*w)/(_*2)-i,T=(p*b-h*y)/_,I=C*C+T*T-1,k=2*(s+S*C+E*T),F=S*S+E*E-s*s,D=-(I?(k+Math.sqrt(k*k-4*I*F))/(2*I):F/k);return{x:o+S+C*D,y:i+E+T*D,r:D}}var Gst=N(()=>{"use strict";zbe()});function Wst(t,r,n){var o=t.x-r.x,i,s,a=t.y-r.y,l,u,c=o*o+a*a;c?(s=r.r+n.r,s*=s,u=t.r+n.r,u*=u,s>u?(i=(c+u-s)/(2*c),l=Math.sqrt(Math.max(0,u/c-i*i)),n.x=t.x-i*o-l*a,n.y=t.y-i*a+l*o):(i=(c+s-u)/(2*c),l=Math.sqrt(Math.max(0,s/c-i*i)),n.x=r.x+i*o-l*a,n.y=r.y+i*a+l*o)):(n.x=r.x+n.r,n.y=r.y)}function qst(t,r){var n=t.r+r.r-1e-6,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function Hst(t){var r=t._,n=t.next._,o=r.r+n.r,i=(r.x*n.r+n.x*r.r)/o,s=(r.y*n.r+n.y*r.r)/o;return i*i+s*s}function WX(t){this._=t,this.next=null,this.previous=null}function Yst(t){if(!(i=(t=Bst(t)).length))return 0;var r,n,o,i,s,a,l,u,c,f,d;if(r=t[0],r.x=0,r.y=0,!(i>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(i>2))return r.r+n.r;Wst(n,r,o=t[2]),r=new WX(r),n=new WX(n),o=new WX(o),r.next=o.previous=n,n.next=r.previous=o,o.next=n.previous=r;e:for(l=3;l<i;++l){Wst(r._,n._,o=t[l]),o=new WX(o),u=n.next,c=r.previous,f=n._.r,d=r._.r;do if(f<=d){if(qst(u._,o._)){n=u,r.next=n,n.previous=r,--l;continue e}f+=u._.r,u=u.next}else{if(qst(c._,o._)){r=c,r.next=n,n.previous=r,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(o.previous=r,o.next=n,r.next=n.previous=n=o,s=Hst(r);(o=o.next)!==n;)(a=Hst(o))<s&&(r=o,s=a);n=r.next}for(r=[n._],o=n;(o=o.next)!==n;)r.push(o._);for(o=zst(r),l=0;l<i;++l)r=t[l],r.x-=o.x,r.y-=o.y;return o.r}var Xst=N(()=>{"use strict";zbe();Gst()});function Kst(t){return t==null?null:BM(t)}function BM(t){if(typeof t!="function")throw new Error;return t}var qX=N(()=>{"use strict"});function kv(){return 0}function H_(t){return function(){return t}}var Vbe=N(()=>{"use strict"});function vlr(t){return Math.sqrt(t.value)}function Wbe(){var t=null,r=1,n=1,o=kv;function i(s){return s.x=r/2,s.y=n/2,t?s.eachBefore(Zst(t)).eachAfter(Gbe(o,.5)).eachBefore(Qst(1)):s.eachBefore(Zst(vlr)).eachAfter(Gbe(kv,1)).eachAfter(Gbe(o,s.r/Math.min(r,n))).eachBefore(Qst(Math.min(r,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=Kst(s),i):t},i.size=function(s){return arguments.length?(r=+s[0],n=+s[1],i):[r,n]},i.padding=function(s){return arguments.length?(o=typeof s=="function"?s:H_(+s),i):o},i}function Zst(t){return function(r){r.children||(r.r=Math.max(0,+t(r)||0))}}function Gbe(t,r){return function(n){if(o=n.children){var o,i,s=o.length,a=t(n)*r||0,l;if(a)for(i=0;i<s;++i)o[i].r+=a;if(l=Yst(o),a)for(i=0;i<s;++i)o[i].r-=a;n.r=l+a}}}function Qst(t){return function(r){var n=r.parent;r.r*=t,n&&(r.x=n.x+t*r.x,r.y=n.y+t*r.y)}}var Jst=N(()=>{"use strict";Xst();qX();Vbe()});function HX(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}var qbe=N(()=>{"use strict"});function km(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(o-r)/t.value;++l<u;)a=s[l],a.y0=n,a.y1=i,a.x0=r,a.x1=r+=a.value*c}var $M=N(()=>{"use strict"});function Hbe(){var t=1,r=1,n=0,o=!1;function i(a){var l=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=r/l,a.eachBefore(s(r,l)),o&&a.eachBefore(HX),a}function s(a,l){return function(u){u.children&&km(u,u.x0,a*(u.depth+1)/l,u.x1,a*(u.depth+2)/l);var c=u.x0,f=u.y0,d=u.x1-n,p=u.y1-n;d<c&&(c=d=(c+d)/2),p<f&&(f=p=(f+p)/2),u.x0=c,u.y0=f,u.x1=d,u.y1=p}}return i.round=function(a){return arguments.length?(o=!!a,i):o},i.size=function(a){return arguments.length?(t=+a[0],r=+a[1],i):[t,r]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var eat=N(()=>{"use strict";qbe();$M()});function _lr(t){return t.id}function Slr(t){return t.parentId}function YX(){var t=_lr,r=Slr;function n(o){var i=Array.from(o),s=i.length,a,l,u,c,f,d,p,h=new Map;for(l=0;l<s;++l)a=i[l],f=i[l]=new q_(a),(d=t(a,l,o))!=null&&(d+="")&&(p=f.id=d,h.set(p,h.has(p)?tat:f)),(d=r(a,l,o))!=null&&(d+="")&&(f.parent=d);for(l=0;l<s;++l)if(f=i[l],d=f.parent){if(c=h.get(d),!c)throw new Error("missing: "+d);if(c===tat)throw new Error("ambiguous: "+d);c.children?c.children.push(f):c.children=[f],f.parent=c}else{if(u)throw new Error("multiple roots");u=f}if(!u)throw new Error("no root");if(u.parent=wlr,u.eachBefore(function(m){m.depth=m.parent.depth+1,--s}).eachBefore($be),u.parent=null,s>0)throw new Error("cycle");return u}return n.id=function(o){return arguments.length?(t=BM(o),n):t},n.parentId=function(o){return arguments.length?(r=BM(o),n):r},n}var wlr,tat,rat=N(()=>{"use strict";qX();VX();wlr={depth:-1},tat={}});function Clr(t,r){return t.parent===r.parent?1:2}function Ybe(t){var r=t.children;return r?r[0]:t.t}function Xbe(t){var r=t.children;return r?r[r.length-1]:t.t}function Elr(t,r,n){var o=n/(r.i-t.i);r.c-=o,r.s+=n,t.c+=o,r.z+=n,r.m+=n}function Tlr(t){for(var r=0,n=0,o=t.children,i=o.length,s;--i>=0;)s=o[i],s.z+=r,s.m+=r,r+=s.s+(n+=s.c)}function Alr(t,r,n){return t.a.parent===r.parent?t.a:n}function XX(t,r){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function klr(t){for(var r=new XX(t,0),n,o=[r],i,s,a,l;n=o.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),a=l-1;a>=0;--a)o.push(i=n.children[a]=new XX(s[a],a)),i.parent=n;return(r.parent=new XX(null,0)).children=[r],r}function Kbe(){var t=Clr,r=1,n=1,o=null;function i(c){var f=klr(c);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(a),o)c.eachBefore(u);else{var d=c,p=c,h=c;c.eachBefore(function(x){x.x<d.x&&(d=x),x.x>p.x&&(p=x),x.depth>h.depth&&(h=x)});var m=d===p?1:t(d,p)/2,g=m-d.x,y=r/(p.x+m+g),b=n/(h.depth||1);c.eachBefore(function(x){x.x=(x.x+g)*y,x.y=x.depth*b})}return c}function s(c){var f=c.children,d=c.parent.children,p=c.i?d[c.i-1]:null;if(f){Tlr(c);var h=(f[0].z+f[f.length-1].z)/2;p?(c.z=p.z+t(c._,p._),c.m=c.z-h):c.z=h}else p&&(c.z=p.z+t(c._,p._));c.parent.A=l(c,p,c.parent.A||d[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,f,d){if(f){for(var p=c,h=c,m=f,g=p.parent.children[0],y=p.m,b=h.m,x=m.m,v=g.m,w;m=Xbe(m),p=Ybe(p),m&&p;)g=Ybe(g),h=Xbe(h),h.a=c,w=m.z+x-p.z-y+t(m._,p._),w>0&&(Elr(Alr(m,c,d),c,w),y+=w,b+=w),x+=m.m,y+=p.m,v+=g.m,b+=h.m;m&&!Xbe(h)&&(h.t=m,h.m+=x-b),p&&!Ybe(g)&&(g.t=p,g.m+=y-v,d=c)}return d}function u(c){c.x*=r,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(o=!1,r=+c[0],n=+c[1],i):o?null:[r,n]},i.nodeSize=function(c){return arguments.length?(o=!0,r=+c[0],n=+c[1],i):o?[r,n]:null},i}var nat=N(()=>{"use strict";VX();XX.prototype=Object.create(q_.prototype)});function Iv(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(i-n)/t.value;++l<u;)a=s[l],a.x0=r,a.x1=o,a.y0=n,a.y1=n+=a.value*c}var F5=N(()=>{"use strict"});function Qbe(t,r,n,o,i,s){for(var a=[],l=r.children,u,c,f=0,d=0,p=l.length,h,m,g=r.value,y,b,x,v,w,_,S;f<p;){h=i-n,m=s-o;do y=l[d++].value;while(!y&&d<p);for(b=x=y,_=Math.max(m/h,h/m)/(g*t),S=y*y*_,w=Math.max(x/S,S/b);d<p;++d){if(y+=c=l[d].value,c<b&&(b=c),c>x&&(x=c),S=y*y*_,v=Math.max(x/S,S/b),v>w){y-=c;break}w=v}a.push(u={value:y,dice:h<m,children:l.slice(f,d)}),u.dice?km(u,n,o,i,g?o+=m*y/g:s):Iv(u,n,o,g?n+=h*y/g:i,s),g-=y,f=d}return a}var Zbe,O5,KX=N(()=>{"use strict";$M();F5();Zbe=(1+Math.sqrt(5))/2;O5=function t(r){function n(o,i,s,a,l){Qbe(r,o,i,s,a,l)}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(Zbe)});function Jbe(){var t=O5,r=!1,n=1,o=1,i=[0],s=kv,a=kv,l=kv,u=kv,c=kv;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=o,p.eachBefore(d),i=[0],r&&p.eachBefore(HX),p}function d(p){var h=i[p.depth],m=p.x0+h,g=p.y0+h,y=p.x1-h,b=p.y1-h;y<m&&(m=y=(m+y)/2),b<g&&(g=b=(g+b)/2),p.x0=m,p.y0=g,p.x1=y,p.y1=b,p.children&&(h=i[p.depth+1]=s(p)/2,m+=c(p)-h,g+=a(p)-h,y-=l(p)-h,b-=u(p)-h,y<m&&(m=y=(m+y)/2),b<g&&(g=b=(g+b)/2),t(p,m,g,y,b))}return f.round=function(p){return arguments.length?(r=!!p,f):r},f.size=function(p){return arguments.length?(n=+p[0],o=+p[1],f):[n,o]},f.tile=function(p){return arguments.length?(t=BM(p),f):t},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(s=typeof p=="function"?p:H_(+p),f):s},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:H_(+p),f):a},f.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:H_(+p),f):l},f.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:H_(+p),f):u},f.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:H_(+p),f):c},f}var oat=N(()=>{"use strict";qbe();KX();qX();Vbe()});function exe(t,r,n,o,i){var s=t.children,a,l=s.length,u,c=new Array(l+1);for(c[0]=u=a=0;a<l;++a)c[a+1]=u+=s[a].value;f(0,l,t.value,r,n,o,i);function f(d,p,h,m,g,y,b){if(d>=p-1){var x=s[d];x.x0=m,x.y0=g,x.x1=y,x.y1=b;return}for(var v=c[d],w=h/2+v,_=d+1,S=p-1;_<S;){var C=_+S>>>1;c[C]<w?_=C+1:S=C}w-c[_-1]<c[_]-w&&d+1<_&&--_;var E=c[_]-v,T=h-E;if(y-m>b-g){var I=h?(m*T+y*E)/h:y;f(d,_,E,m,g,I,b),f(_,p,T,I,g,y,b)}else{var k=h?(g*T+b*E)/h:b;f(d,_,E,m,g,y,k),f(_,p,T,m,k,y,b)}}}var iat=N(()=>{"use strict"});function txe(t,r,n,o,i){(t.depth&1?Iv:km)(t,r,n,o,i)}var sat=N(()=>{"use strict";$M();F5()});var rxe,aat=N(()=>{"use strict";$M();F5();KX();rxe=function t(r){function n(o,i,s,a,l){if((u=o._squarify)&&u.ratio===r)for(var u,c,f,d,p=-1,h,m=u.length,g=o.value;++p<m;){for(c=u[p],f=c.children,d=c.value=0,h=f.length;d<h;++d)c.value+=f[d].value;c.dice?km(c,i,s,a,g?s+=(l-s)*c.value/g:l):Iv(c,i,s,g?i+=(a-i)*c.value/g:a,l),g-=c.value}else o._squarify=u=Qbe(r,o,i,s,a,l),u.ratio=r}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(Zbe)});var lat=N(()=>{"use strict";dst();VX();Jst();eat();rat();nat();oat();iat();$M();F5();sat();KX();aat()});var mxe={};fn(mxe,{nest:()=>lxe,pack:()=>uxe,partition:()=>cxe,stratify:()=>fxe,tree:()=>dxe,treelinks:()=>pxe,treemap:()=>hxe});function nxe(t,r,n){let o={};return t.each(i=>{let s=i.data;n(s)&&(o[r(s)]=i)}),t.lookup=o,t}function lxe(t){et.call(this,null,t)}function Dlr(){let t=[],r={entries:i=>o(n(i,0),0),key:i=>(t.push(i),r)};function n(i,s){if(s>=t.length)return i;let a=i.length,l=t[s++],u={},c={},f=-1,d,p,h;for(;++f<a;)d=l(p=i[f])+"",(h=u[d])?h.push(p):u[d]=[p];for(d in u)c[d]=n(u[d],s);return c}function o(i,s){if(++s>t.length)return i;let a=[];for(let l in i)a.push({key:l,values:o(i[l],s)});return a}return r}function Dv(t){et.call(this,null,t)}function Mlr(t,r,n){for(let o,i=0,s=r.length;i<s;++i)o=r[i],o in n&&t[o](n[o])}function Flr(t,r,n){let o=t.data,i=r.length-1;for(let s=0;s<i;++s)o[n[s]]=t[r[s]];o[n[i]]=t.children?t.children.length:0}function uxe(t){Dv.call(this,t)}function cxe(t){Dv.call(this,t)}function fxe(t){et.call(this,null,t)}function dxe(t){Dv.call(this,t)}function pxe(t){et.call(this,[],t)}function hxe(t){Dv.call(this,t)}var Ilr,Nlr,oxe,ixe,uat,sxe,cat,axe,fat=N(()=>{"use strict";tl();Ls();lat();lxe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};Ilr=t=>t.values;Dt(lxe,et,{transform(t,r){r.source||pt("Nest transform requires an upstream data source.");var n=t.generate,o=t.modified(),i=r.clone(),s=this.value;return(!s||o||r.changed())&&(s&&s.each(a=>{a.children&&FE(a.data)&&i.rem.push(a.data)}),this.value=s=jM({values:Br(t.keys).reduce((a,l)=>(a.key(l),a),Dlr()).entries(i.source)},Ilr),n&&s.each(a=>{a.children&&(a=Nn(a.data),i.add.push(a),i.source.push(a))}),nxe(s,_r,_r)),i.source.root=s,i}});Nlr=(t,r)=>t.parent===r.parent?1:2;Dt(Dv,et,{transform(t,r){(!r.source||!r.source.root)&&pt(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(t.method),o=this.fields,i=r.source.root,s=t.as||o;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(iy(t.sort,a=>a.data)),Mlr(n,this.params,t),n.separation&&n.separation(t.separation!==!1?Nlr:H0);try{this.value=n(i)}catch(a){pt(a)}return i.each(a=>Flr(a,o,s)),r.reflow(t.modified()).modifies(s).modifies("leaf")}});oxe=["x","y","r","depth","children"];uxe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oxe.length,default:oxe}]};Dt(uxe,Dv,{layout:Wbe,params:["radius","size","padding"],fields:oxe});ixe=["x0","y0","x1","y1","depth","children"];cxe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ixe.length,default:ixe}]};Dt(cxe,Dv,{layout:Hbe,params:["size","round","padding"],fields:ixe});fxe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Dt(fxe,et,{transform(t,r){r.source||pt("Stratify transform requires an upstream data source.");let n=this.value,o=t.modified(),i=r.fork(r.ALL).materialize(r.SOURCE),s=!n||o||r.changed(r.ADD_REM)||r.modified(t.key.fields)||r.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?nxe(YX().id(t.key).parentId(t.parentKey)(i.source),t.key,Y0):nxe(YX()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});uat={tidy:Kbe,cluster:Bbe},sxe=["x","y","depth","children"];dxe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:sxe.length,default:sxe}]};Dt(dxe,Dv,{layout(t){let r=t||"tidy";if(Pr(uat,r))return uat[r]();pt("Unrecognized Tree layout method: "+r)},params:["size","nodeSize"],fields:sxe});pxe.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Dt(pxe,et,{transform(t,r){let n=this.value,o=r.source&&r.source.root,i=r.fork(r.NO_SOURCE),s={};return o||pt("TreeLinks transform requires a tree data source."),r.changed(r.ADD_REM)?(i.rem=n,r.visit(r.SOURCE,a=>s[_r(a)]=1),o.each(a=>{let l=a.data,u=a.parent&&a.parent.data;u&&s[_r(l)]&&s[_r(u)]&&i.add.push(Nn({source:u,target:l}))}),this.value=i.add):r.changed(r.MOD)&&(r.visit(r.MOD,a=>s[_r(a)]=1),n.forEach(a=>{(s[_r(a.source)]||s[_r(a.target)])&&i.mod.push(a)})),i}});cat={binary:exe,dice:km,slice:Iv,slicedice:txe,squarify:O5,resquarify:rxe},axe=["x0","y0","x1","y1","depth","children"];hxe.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:axe.length,default:axe}]};Dt(hxe,Dv,{layout(){let t=Jbe();return t.ratio=r=>{let n=t.tile();n.ratio&&t.tile(n.ratio(r))},t.method=r=>{Pr(cat,r)?t.tile(cat[r]):pt("Unrecognized Treemap layout method: "+r)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:axe})});function bxe(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function dat(){return new bxe}var gxe,yxe,$T,Olr,Yp,pat=N(()=>{"use strict";gxe=Math.PI,yxe=2*gxe,$T=1e-6,Olr=yxe-$T;bxe.prototype=dat.prototype={constructor:bxe,moveTo:function(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function(t,r,n,o){this._+="Q"+ +t+","+ +r+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(t,r,n,o,i,s){this._+="C"+ +t+","+ +r+","+ +n+","+ +o+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,r,n,o,i){t=+t,r=+r,n=+n,o=+o,i=+i;var s=this._x1,a=this._y1,l=n-t,u=o-r,c=s-t,f=a-r,d=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=r);else if(d>$T)if(!(Math.abs(f*l-u*c)>$T)||!i)this._+="L"+(this._x1=t)+","+(this._y1=r);else{var p=n-s,h=o-a,m=l*l+u*u,g=p*p+h*h,y=Math.sqrt(m),b=Math.sqrt(d),x=i*Math.tan((gxe-Math.acos((m+d-g)/(2*y*b)))/2),v=x/b,w=x/y;Math.abs(v-1)>$T&&(this._+="L"+(t+v*c)+","+(r+v*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>c*h)+","+(this._x1=t+w*l)+","+(this._y1=r+w*u)}},arc:function(t,r,n,o,i,s){t=+t,r=+r,n=+n,s=!!s;var a=n*Math.cos(o),l=n*Math.sin(o),u=t+a,c=r+l,f=1^s,d=s?o-i:i-o;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+c:(Math.abs(this._x1-u)>$T||Math.abs(this._y1-c)>$T)&&(this._+="L"+u+","+c),n&&(d<0&&(d=d%yxe+yxe),d>Olr?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(r-l)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c):d>$T&&(this._+="A"+n+","+n+",0,"+ +(d>=gxe)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=r+n*Math.sin(i))))},rect:function(t,r,n,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};Yp=dat});var zM=N(()=>{"use strict";pat()});function Wn(t){return function(){return t}}var R5=N(()=>{"use strict"});function mat(t){return t>1?0:t<-1?X_:Math.acos(t)}function vxe(t){return t>=1?P5:t<=-1?-P5:Math.asin(t)}var xxe,Ul,Y_,hat,ZX,Im,zT,ul,X_,P5,QX,JX=N(()=>{"use strict";xxe=Math.abs,Ul=Math.atan2,Y_=Math.cos,hat=Math.max,ZX=Math.min,Im=Math.sin,zT=Math.sqrt,ul=1e-12,X_=Math.PI,P5=X_/2,QX=2*X_});function Rlr(t){return t.innerRadius}function Plr(t){return t.outerRadius}function Llr(t){return t.startAngle}function jlr(t){return t.endAngle}function Blr(t){return t&&t.padAngle}function $lr(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<ul))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function eK(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/zT(l*l+u*u),f=c*u,d=-c*l,p=t+f,h=r+d,m=n+f,g=o+d,y=(p+m)/2,b=(h+g)/2,x=m-p,v=g-h,w=x*x+v*v,_=i-s,S=p*g-m*h,C=(v<0?-1:1)*zT(hat(0,_*_*w-S*S)),E=(S*v-x*C)/w,T=(-S*x-v*C)/w,I=(S*v+x*C)/w,k=(-S*x+v*C)/w,F=E-y,D=T-b,L=I-y,P=k-b;return F*F+D*D>L*L+P*P&&(E=I,T=k),{cx:E,cy:T,x01:-f,y01:-d,x11:E*(i/_-1),y11:T*(i/_-1)}}function wxe(){var t=Rlr,r=Plr,n=Wn(0),o=null,i=Llr,s=jlr,a=Blr,l=null;function u(){var c,f,d=+t.apply(this,arguments),p=+r.apply(this,arguments),h=i.apply(this,arguments)-P5,m=s.apply(this,arguments)-P5,g=xxe(m-h),y=m>h;if(l||(l=c=Yp()),p<d&&(f=p,p=d,d=f),!(p>ul))l.moveTo(0,0);else if(g>QX-ul)l.moveTo(p*Y_(h),p*Im(h)),l.arc(0,0,p,h,m,!y),d>ul&&(l.moveTo(d*Y_(m),d*Im(m)),l.arc(0,0,d,m,h,y));else{var b=h,x=m,v=h,w=m,_=g,S=g,C=a.apply(this,arguments)/2,E=C>ul&&(o?+o.apply(this,arguments):zT(d*d+p*p)),T=ZX(xxe(p-d)/2,+n.apply(this,arguments)),I=T,k=T,F,D;if(E>ul){var L=vxe(E/d*Im(C)),P=vxe(E/p*Im(C));(_-=L*2)>ul?(L*=y?1:-1,v+=L,w-=L):(_=0,v=w=(h+m)/2),(S-=P*2)>ul?(P*=y?1:-1,b+=P,x-=P):(S=0,b=x=(h+m)/2)}var R=p*Y_(b),V=p*Im(b),G=d*Y_(w),U=d*Im(w);if(T>ul){var H=p*Y_(x),X=p*Im(x),fe=d*Y_(v),$=d*Im(v),M;if(g<X_&&(M=$lr(R,V,fe,$,H,X,G,U))){var z=R-M[0],q=V-M[1],ee=H-M[0],ae=X-M[1],Q=1/Im(mat((z*ee+q*ae)/(zT(z*z+q*q)*zT(ee*ee+ae*ae)))/2),le=zT(M[0]*M[0]+M[1]*M[1]);I=ZX(T,(d-le)/(Q-1)),k=ZX(T,(p-le)/(Q+1))}}S>ul?k>ul?(F=eK(fe,$,R,V,p,k,y),D=eK(H,X,G,U,p,k,y),l.moveTo(F.cx+F.x01,F.cy+F.y01),k<T?l.arc(F.cx,F.cy,k,Ul(F.y01,F.x01),Ul(D.y01,D.x01),!y):(l.arc(F.cx,F.cy,k,Ul(F.y01,F.x01),Ul(F.y11,F.x11),!y),l.arc(0,0,p,Ul(F.cy+F.y11,F.cx+F.x11),Ul(D.cy+D.y11,D.cx+D.x11),!y),l.arc(D.cx,D.cy,k,Ul(D.y11,D.x11),Ul(D.y01,D.x01),!y))):(l.moveTo(R,V),l.arc(0,0,p,b,x,!y)):l.moveTo(R,V),!(d>ul)||!(_>ul)?l.lineTo(G,U):I>ul?(F=eK(G,U,H,X,d,-I,y),D=eK(R,V,fe,$,d,-I,y),l.lineTo(F.cx+F.x01,F.cy+F.y01),I<T?l.arc(F.cx,F.cy,I,Ul(F.y01,F.x01),Ul(D.y01,D.x01),!y):(l.arc(F.cx,F.cy,I,Ul(F.y01,F.x01),Ul(F.y11,F.x11),!y),l.arc(0,0,d,Ul(F.cy+F.y11,F.cx+F.x11),Ul(D.cy+D.y11,D.cx+D.x11),y),l.arc(D.cx,D.cy,I,Ul(D.y11,D.x11),Ul(D.y01,D.x01),!y))):l.arc(0,0,d,w,v,y)}if(l.closePath(),c)return l=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-X_/2;return[Y_(f)*c,Im(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Wn(+c),u):t},u.outerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:Wn(+c),u):r},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Wn(+c),u):n},u.padRadius=function(c){return arguments.length?(o=c==null?null:typeof c=="function"?c:Wn(+c),u):o},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Wn(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Wn(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Wn(+c),u):a},u.context=function(c){return arguments.length?(l=c??null,u):l},u}var gat=N(()=>{"use strict";zM();R5();JX()});function tK(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var lzo,_xe=N(()=>{"use strict";lzo=Array.prototype.slice});function yat(t){this._context=t}function UT(t){return new yat(t)}var rK=N(()=>{"use strict";yat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function nK(t){return t[0]}function oK(t){return t[1]}var Sxe=N(()=>{"use strict"});function L5(t,r){var n=Wn(!0),o=null,i=UT,s=null;t=typeof t=="function"?t:t===void 0?nK:Wn(t),r=typeof r=="function"?r:r===void 0?oK:Wn(r);function a(l){var u,c=(l=tK(l)).length,f,d=!1,p;for(o==null&&(s=i(p=Yp())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(f,u,l),+r(f,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Wn(+l),a):t},a.y=function(l){return arguments.length?(r=typeof l=="function"?l:Wn(+l),a):r},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Wn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,o!=null&&(s=i(o)),a):i},a.context=function(l){return arguments.length?(l==null?o=s=null:s=i(o=l),a):o},a}var Cxe=N(()=>{"use strict";zM();_xe();R5();rK();Sxe()});function iK(t,r,n){var o=null,i=Wn(!0),s=null,a=UT,l=null;t=typeof t=="function"?t:t===void 0?nK:Wn(+t),r=typeof r=="function"?r:r===void 0?Wn(0):Wn(+r),n=typeof n=="function"?n:n===void 0?oK:Wn(+n);function u(f){var d,p,h,m=(f=tK(f)).length,g,y=!1,b,x=new Array(m),v=new Array(m);for(s==null&&(l=a(b=Yp())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)p=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=d-1;h>=p;--h)l.point(x[h],v[h]);l.lineEnd(),l.areaEnd()}y&&(x[d]=+t(g,d,f),v[d]=+r(g,d,f),l.point(o?+o(g,d,f):x[d],n?+n(g,d,f):v[d]))}if(b)return l=null,b+""||null}function c(){return L5().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Wn(+f),o=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Wn(+f),u):t},u.x1=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Wn(+f),u):o},u.y=function(f){return arguments.length?(r=typeof f=="function"?f:Wn(+f),n=null,u):r},u.y0=function(f){return arguments.length?(r=typeof f=="function"?f:Wn(+f),u):r},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Wn(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(r)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(o).y(r)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Wn(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}var bat=N(()=>{"use strict";zM();_xe();R5();rK();Cxe();Sxe()});var xat,vat=N(()=>{"use strict";JX();xat={draw:function(t,r){var n=Math.sqrt(r/X_);t.moveTo(n,0),t.arc(0,0,n,0,QX)}}});function Exe(t,r){var n=null;t=typeof t=="function"?t:Wn(t||xat),r=typeof r=="function"?r:Wn(r===void 0?64:+r);function o(){var i;if(n||(n=i=Yp()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(i){return arguments.length?(t=typeof i=="function"?i:Wn(i),o):t},o.size=function(i){return arguments.length?(r=typeof i=="function"?i:Wn(+i),o):r},o.context=function(i){return arguments.length?(n=i??null,o):n},o}var wat=N(()=>{"use strict";zM();vat();R5()});function Xp(){}var j5=N(()=>{"use strict"});function UM(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function B5(t){this._context=t}function Txe(t){return new B5(t)}var $5=N(()=>{"use strict";B5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:UM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:UM(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function _at(t){this._context=t}function Axe(t){return new _at(t)}var Sat=N(()=>{"use strict";j5();$5();_at.prototype={areaStart:Xp,areaEnd:Xp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:UM(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function Cat(t){this._context=t}function kxe(t){return new Cat(t)}var Eat=N(()=>{"use strict";$5();Cat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:UM(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function Tat(t,r){this._basis=new B5(t),this._beta=r}var Ixe,Aat=N(()=>{"use strict";$5();Tat.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};Ixe=function t(r){function n(o){return r===1?new B5(o):new Tat(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function VM(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function sK(t,r){this._context=t,this._k=(1-r)/6}var Dxe,z5=N(()=>{"use strict";sK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:VM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:VM(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Dxe=function t(r){function n(o){return new sK(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function aK(t,r){this._context=t,this._k=(1-r)/6}var Nxe,Mxe=N(()=>{"use strict";j5();z5();aK.prototype={areaStart:Xp,areaEnd:Xp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:VM(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Nxe=function t(r){function n(o){return new aK(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function lK(t,r){this._context=t,this._k=(1-r)/6}var Fxe,Oxe=N(()=>{"use strict";z5();lK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:VM(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Fxe=function t(r){function n(o){return new lK(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function U5(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>ul){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>ul){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function kat(t,r){this._context=t,this._alpha=r}var Rxe,uK=N(()=>{"use strict";JX();z5();kat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:U5(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Rxe=function t(r){function n(o){return r?new kat(o,r):new sK(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function Iat(t,r){this._context=t,this._alpha=r}var Pxe,Dat=N(()=>{"use strict";Mxe();j5();uK();Iat.prototype={areaStart:Xp,areaEnd:Xp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:U5(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Pxe=function t(r){function n(o){return r?new Iat(o,r):new aK(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function Nat(t,r){this._context=t,this._alpha=r}var Lxe,Mat=N(()=>{"use strict";Oxe();uK();Nat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:U5(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Lxe=function t(r){function n(o){return r?new Nat(o,r):new lK(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function Fat(t){this._context=t}function jxe(t){return new Fat(t)}var Oat=N(()=>{"use strict";j5();Fat.prototype={areaStart:Xp,areaEnd:Xp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function Rat(t){return t<0?-1:1}function Pat(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(Rat(s)+Rat(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function Lat(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Bxe(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function cK(t){this._context=t}function jat(t){this._context=new Bat(t)}function Bat(t){this._context=t}function $xe(t){return new cK(t)}function zxe(t){return new jat(t)}var $at=N(()=>{"use strict";cK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bxe(this,this._t0,Lat(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Bxe(this,Lat(this,n=Pat(this,t,r)),n);break;default:Bxe(this,this._t0,n=Pat(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(jat.prototype=Object.create(cK.prototype)).point=function(t,r){cK.prototype.point.call(this,r,t)};Bat.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function Uat(t){this._context=t}function zat(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function Uxe(t){return new Uat(t)}var Vat=N(()=>{"use strict";Uat.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=zat(t),i=zat(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function fK(t,r){this._context=t,this._t=r}function Vxe(t){return new fK(t,.5)}function Gxe(t){return new fK(t,0)}function Wxe(t){return new fK(t,1)}var Gat=N(()=>{"use strict";fK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var Wat=N(()=>{"use strict";gat();bat();Cxe();wat();Sat();Eat();$5();Aat();Mxe();Oxe();z5();Dat();Mat();uK();Oat();rK();$at();Vat();Gat()});function Yat(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function zlr(t,r){var n=Yat(t);return function(o,i){return r(n(o),i,t)}}function Hat(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function wf(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function Ulr(t){return t<0?"-"+wf(-t,6):t>9999?"+"+wf(t,6):wf(t,4)}function Vlr(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ulr(t.getUTCFullYear(),4)+"-"+wf(t.getUTCMonth()+1,2)+"-"+wf(t.getUTCDate(),2)+(i?"T"+wf(r,2)+":"+wf(n,2)+":"+wf(o,2)+"."+wf(i,3)+"Z":o?"T"+wf(r,2)+":"+wf(n,2)+":"+wf(o,2)+"Z":n||r?"T"+wf(r,2)+":"+wf(n,2)+"Z":"")}function Xxe(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?zlr(y,p):Yat(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===V5&&--m,d.charCodeAt(m-1)===Yxe&&--m;function w(){if(x)return qxe;if(v)return v=!1,qat;var S,C=g,E;if(d.charCodeAt(C)===Hxe){for(;g++<m&&d.charCodeAt(g)!==Hxe||d.charCodeAt(++g)===Hxe;);return(S=g)>=m?x=!0:(E=d.charCodeAt(g++))===V5?v=!0:E===Yxe&&(v=!0,d.charCodeAt(g)===V5&&++g),d.slice(C+1,S-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(S=g++))===V5)v=!0;else if(E===Yxe)v=!0,d.charCodeAt(g)===V5&&++g;else if(E!==n)continue;return d.slice(C,S)}return x=!0,d.slice(C,m)}for(;(b=w())!==qxe;){for(var _=[];b!==qat&&b!==qxe;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=Hat(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=Hat(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?Vlr(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var qat,qxe,Hxe,V5,Yxe,Xat=N(()=>{"use strict";qat={},qxe={},Hxe=34,V5=10,Yxe=13});var Kat=N(()=>{"use strict";Xat()});function Zat(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function VT(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var G5=N(()=>{"use strict"});function Ny(t){return t=VT(Math.abs(t)),t?t[1]:NaN}var W5=N(()=>{"use strict";G5()});function Qat(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var Jat=N(()=>{"use strict"});function elt(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var tlt=N(()=>{"use strict"});function Nv(t){if(!(r=Glr.exec(t)))throw new Error("invalid format: "+t);var r;return new dK({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function dK(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var Glr,Kxe=N(()=>{"use strict";Glr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Nv.prototype=dK.prototype;dK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function rlt(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var nlt=N(()=>{"use strict"});function olt(t,r){var n=VT(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(Zxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+VT(t,Math.max(0,r+s-1))[0]}var Zxe,Qxe=N(()=>{"use strict";G5()});function Jxe(t,r){var n=VT(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var ilt=N(()=>{"use strict";G5()});var eve,slt=N(()=>{"use strict";G5();Qxe();ilt();eve={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zat,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>Jxe(t*100,r),r:Jxe,s:olt,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function tve(t){return t}var alt=N(()=>{"use strict"});function q5(t){var r=t.grouping===void 0||t.thousands===void 0?tve:Qat(llt.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?tve:elt(llt.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Nv(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):eve[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",C=g==="$"?o:/[%p]/.test(_)?a:"",E=eve[_],T=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(k){var F=S,D=C,L,P,R;if(_==="c")D=E(k)+D,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=rlt(k)),V&&+k==0&&m!=="+"&&(V=!1),F=(V?m==="("?m:l:m==="-"||m==="("?"":m)+F,D=(_==="s"?ult[8+Zxe/3]:"")+D+(V&&m==="("?")":""),T){for(L=-1,P=k.length;++L<P;)if(R=k.charCodeAt(L),48>R||R>57){D=(R===46?i+k.slice(L+1):k.slice(L))+D,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=F.length+k.length+D.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-D.length:1/0),U=""),h){case"<":k=F+k+D+U;break;case"=":k=F+U+k+D;break;case"^":k=U.slice(0,G=U.length>>1)+F+k+D+U.slice(G);break;default:k=U+F+k+D;break}return s(k)}return I.toString=function(){return d+""},I}function f(d,p){var h=c((d=Nv(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Ny(p)/3)))*3,g=Math.pow(10,-m),y=ult[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var llt,ult,rve=N(()=>{"use strict";W5();Jat();tlt();Kxe();nlt();slt();Qxe();alt();llt=Array.prototype.map,ult=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function nve(t){return pK=q5(t),hK=pK.format,mK=pK.formatPrefix,pK}var pK,hK,mK,clt=N(()=>{"use strict";rve();nve({thousands:",",grouping:[3],currency:["$",""]})});function ove(t){return Math.max(0,-Ny(Math.abs(t)))}var flt=N(()=>{"use strict";W5()});function ive(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ny(r)/3)))*3-Ny(Math.abs(t)))}var dlt=N(()=>{"use strict";W5()});function sve(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Ny(r)-Ny(t))+1}var plt=N(()=>{"use strict";W5()});var hlt=N(()=>{"use strict";clt();rve();Kxe();flt();dlt();plt()});function H5(t){let r={};return n=>r[n]||(r[n]=t(n))}function Wlr(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=qlr(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function qlr(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function glt(t){let r=H5(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Nv(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Wlr(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Nv(a??",f");let l=yc(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=ive(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=sve(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=ove(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function ylt(){return ave=glt({format:hK,formatPrefix:mK})}function blt(t){return glt(q5(t))}function Y5(t){return arguments.length?ave=blt(t):ave}function mlt(t,r,n){n=n||{},un(n)||pt("Invalid time multi-format specifier: ".concat(n));let o=r(Dd),i=r(uf),s=r(lf),a=r(wc),l=r(fa),u=r(Ll),c=r(vc),f=r(rl),d=t(n[Rp]||".%L"),p=t(n[Dd]||":%S"),h=t(n[uf]||"%I:%M"),m=t(n[lf]||"%I %p"),g=t(n[wc]||n[Pl]||"%a %d"),y=t(n[fa]||"%b %d"),b=t(n[Ll]||"%B"),x=t(n[vc]||"%B"),v=t(n[rl]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function xlt(t){let r=H5(t.format),n=H5(t.utcFormat);return{timeFormat:o=>Jn(o)?r(o):mlt(r,sv,o),utcFormat:o=>Jn(o)?n(o):mlt(n,av,o),timeParse:H5(t.parse),utcParse:H5(t.utcParse)}}function vlt(){return lve=xlt({format:R_,parse:AY,utcFormat:P_,utcParse:kY})}function wlt(t){return xlt(cM(t))}function GT(t){return arguments.length?lve=wlt(t):lve}function gK(t,r){let n=t?blt(t):Y5(),o=r?wlt(r):GT();return uve(n,o)}function cve(t,r){let n=arguments.length;return n&&n!==2&&pt("defaultLocale expects either zero or two arguments."),n?uve(Y5(t),GT(r)):uve(Y5(),GT())}function _lt(){return ylt(),vlt(),cve()}var ave,lve,uve,yK=N(()=>{"use strict";qo();hlt();_N();Ls();dM();ylt();vlt();uve=(t,r)=>an({},t,r)});function Klr(t,r){return n=>({options:n||{},sanitize:Qlr,load:Zlr,fileAccess:!!r,file:Jlr(r),http:tur(t)})}function Zlr(t,r){return je(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function Qlr(t,r){return je(this,null,function*(){r=an({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=Ylr.test(t.replace(Xlr,""));(t==null||typeof t!="string"||!l)&&pt("Sanitize failure, invalid URI: "+$r(t));let u=Hlr.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(Slt))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(Slt.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function Jlr(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):eur}function eur(){return je(this,null,function*(){pt("No file system access.")})}function tur(t){return t?function(r,n){return je(this,null,function*(){let o=an({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Dn(s[i])?s[i]():s.text():pt(s.status+""+s.statusText)})}:rur}function rur(){return je(this,null,function*(){pt("No HTTP fetch method available.")})}function Tlt(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=bK.length,i=bK.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&nur(u)&&!bK[l](u)&&(i[l]=0,++a,a===bK.length))return"string";return aur[i.reduce((s,a)=>s===0?a:s,0)-1]}function Alt(t,r){return r.reduce((n,o)=>(n[o]=Tlt(t,o),n),{})}function Clt(t){let r=function(n,o){let i={delimiter:t};return dve(n,o?an(o,i):i)};return r.responseType="text",r}function dve(t,r){return r.header&&(t=r.header.map($r).join(r.delimiter)+`
`+t),Xxe(r.delimiter).parse(t+"")}function lur(t){return typeof Buffer=="function"&&Dn(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function pve(t,r){let n=r&&r.property?Qh(r.property):mc;return un(t)&&!lur(t)?uur(n(t),r):n(JSON.parse(t))}function uur(t,r){return!Hr(t)&&Gce(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function klt(t,r){let n,o,i,s;return t=pve(t,r),r&&r.feature?(n=TE,i=r.feature):r&&r.mesh?(n=AE,i=r.mesh,s=cur[r.filter]):pt("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):pt("Invalid TopoJSON object: "+i),o&&o.features||[o]}function hve(t,r){return arguments.length>1?(xK[t]=r,this):Pr(xK,t)?xK[t]:null}function fur(t){let r=hve(t);return r&&r.responseType||"text"}function dur(t,r,n,o){r=r||{};let i=hve(r.type||"json");return i||pt("Unknown data format type: "+r.type),t=i(t,r),r.parse&&pur(t,r.parse,n,o),Pr(t,"columns")&&delete t.columns,t}function pur(t,r,n,o){if(!t.length)return;let i=GT();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=Alt(t,s)),s=Object.keys(r);let p=s.map(h=>{let m=r[h],g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!fve[m])throw Error("Illegal format pattern: "+h+":"+m);return fve[m]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var Hlr,Ylr,Xlr,Slt,nur,our,iur,Elt,sur,fve,bK,aur,cur,xK,vK,mve=N(()=>{"use strict";Ls();Kat();vW();yK();Hlr=/^(data:|([A-Za-z]+:)?\/\/)/,Ylr=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Xlr=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Slt="file://";nur=t=>t!=null&&t===t,our=t=>t==="true"||t==="false"||t===!0||t===!1,iur=t=>!Number.isNaN(Date.parse(t)),Elt=t=>!Number.isNaN(+t)&&!(t instanceof Date),sur=t=>Elt(t)&&Number.isInteger(+t),fve={boolean:Yce,integer:em,number:em,date:Xce,string:Kce,unknown:mc},bK=[our,sur,Elt,iur],aur=["boolean","integer","number","date"];dve.responseType="text";pve.responseType="json";cur={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};klt.responseType="json";xK={dsv:dve,csv:Clt(","),tsv:Clt("	"),json:pve,topojson:klt};vK=Klr(typeof fetch<"u"&&fetch,null)});function hur(){Jlt=0}function Ove(t){return t&&t.gradient}function eut(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?kK:"";return i||(i=t.id="gradient_"+Jlt++,o==="radial"?(t.x1=My(t.x1,.5),t.y1=My(t.y1,.5),t.r1=My(t.r1,0),t.x2=My(t.x2,.5),t.y2=My(t.y2,.5),t.r2=My(t.r2,.5),s=kK):(t.x1=My(t.x1,0),t.y1=My(t.y1,0),t.x2=My(t.x2,1),t.y2=My(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function My(t,r){return t??r}function Rve(t,r){var n=[],o;return o={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:r?r[0]:1,y2:r?r[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),o}}}function Pve(t,r,n){var o=Pr(Ilt,t)&&Ilt[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function KT(t){let r=[],n,o,i,s,a,l,u,c,f,d,p=t.slice().replace(X5[0],"###$1").split(X5[1]).slice(1);for(u=0,f=p.length;u<f;++u){for(n=p[u],o=n.slice(1).trim().replace(X5[2],"$1###$2").replace(X5[3],"$1###$2").split(X5[4]),a=n.charAt(0),i=[a],c=0,d=o.length;c<d;++c)(s=+o[c])===s&&i.push(s);if(l=mur[a.toLowerCase()],i.length-1>l){let h=i.length;for(c=1,r.push([a].concat(i.slice(c,c+=l))),a=a==="M"?"L":a==="m"?"l":a;c<h;c+=l)r.push([a].concat(i.slice(c,c+l)))}else r.push(i)}return r}function yur(t,r,n,o,i,s,a,l,u){let c=tut.call(arguments);if(gve[c])return gve[c];let f=a*t2,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let h=p*(l-t)*.5+d*(u-r)*.5,m=p*(u-r)*.5-d*(l-t)*.5,g=h*h/(n*n)+m*m/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,S=y*t+b*r,C=x*t+v*r,T=1/((S-w)*(S-w)+(C-_)*(C-_))-.25;T<0&&(T=0);let I=Math.sqrt(T);s==i&&(I=-I);let k=.5*(w+S)-I*(C-_),F=.5*(_+C)+I*(S-w),D=Math.atan2(_-F,w-k),P=Math.atan2(C-F,S-k)-D;P<0&&s===1?P+=Fy:P>0&&s===0&&(P-=Fy);let R=Math.ceil(Math.abs(P/(WT+.001))),V=[];for(let G=0;G<R;++G){let U=D+G*P/R,H=D+(G+1)*P/R;V[G]=[k,F,U,H,n,o,d,p]}return gve[c]=V}function bur(t){let r=tut.call(t);if(yve[r])return yve[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,h=c*l,m=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+m-w*g,S=o+g+w*m,C=n+y,E=o+b,T=C+w*b,I=E-w*y;return yve[r]=[f*_+d*S,p*_+h*S,f*T+d*I,p*T+h*I,f*C+d*E,p*C+h*E]}function xur(t,r,n){let o=Kp[0]=t[0];if(o==="a"||o==="A")Kp[1]=r*t[1],Kp[2]=n*t[2],Kp[3]=t[3],Kp[4]=t[4],Kp[5]=t[5],Kp[6]=r*t[6],Kp[7]=n*t[7];else if(o==="h"||o==="H")Kp[1]=r*t[1];else if(o==="v"||o==="V")Kp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)Kp[i]=(i%2==1?r:n)*t[i];return Kp}function qM(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,h,m,g;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var y=0,b=r.length;y<b;++y){switch(a=r[y],(i!==1||s!==1)&&(a=xur(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],t.moveTo(u+n,c+o);break;case"c":p=u+a[5],h=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,h+o),u=p,c=h;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],h=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,h+o),f=u+a[1],d=c+a[2],u=p,c=h;break;case"S":p=a[3],h=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"q":p=u+a[3],h=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"Q":p=a[3],h=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"t":p=u+a[1],h=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-m,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),m=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h,f=u+a[1],d=c+a[2];break;case"T":p=a[1],h=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"a":Dlt(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":Dlt(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":t.closePath();break}l=a}}function Dlt(t,r,n,o){let i=yur(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=bur(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function rut(t){return Pr(Mlt,t)?Mlt[t]:vur(t)}function vur(t){if(!Pr(bve,t)){let r=KT(t);bve[t]={draw:function(n,o){qM(n,r,0,0,Math.sqrt(o)/2)}}}return bve[t]}function wur(t){return t.x}function _ur(t){return t.y}function Sur(t){return t.width}function Cur(t){return t.height}function Mv(t){return typeof t=="function"?t:()=>+t}function wK(t,r,n){return Math.max(r,Math.min(t,n))}function nut(){var t=wur,r=_ur,n=Sur,o=Cur,i=Mv(0),s=i,a=i,l=i,u=null;function c(f,d,p){var h,m=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=wK(+i.call(this,f),0,x),w=wK(+s.call(this,f),0,x),_=wK(+a.call(this,f),0,x),S=wK(+l.call(this,f),0,x);if(u||(u=h=Yp()),v<=0&&w<=0&&_<=0&&S<=0)u.rect(m,g,y,b);else{var C=m+y,E=g+b;u.moveTo(m+v,g),u.lineTo(C-w,g),u.bezierCurveTo(C-K_*w,g,C,g+K_*w,C,g+w),u.lineTo(C,E-S),u.bezierCurveTo(C,E-K_*S,C-K_*S,E,C-S,E),u.lineTo(m+_,E),u.bezierCurveTo(m+K_*_,E,m,E-K_*_,m,E-_),u.lineTo(m,g+v),u.bezierCurveTo(m,g+K_*v,m+K_*v,g,m+v,g),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(f){return arguments.length?(t=Mv(f),c):t},c.y=function(f){return arguments.length?(r=Mv(f),c):r},c.width=function(f){return arguments.length?(n=Mv(f),c):n},c.height=function(f){return arguments.length?(o=Mv(f),c):o},c.cornerRadius=function(f,d,p,h){return arguments.length?(i=Mv(f),s=d!=null?Mv(d):i,l=p!=null?Mv(p):i,a=h!=null?Mv(h):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function out(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,h){let m=h/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.sqrt(g*g+y*y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*m,p-y*m),i.arc(d,p,m,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,m,0,Fy);i.closePath()}else s=1;a=d,l=p,u=m}function f(d){var p,h=d.length,m,g=!1,y;for(i==null&&(i=y=Yp()),p=0;p<=h;++p)!(p<h&&o(m=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(m,p,d),+r(m,p,d),+n(m,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function oB(t,r){return t??r}function Lve(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Xur(t,r){return Uur.context(t)(r)}function Kur(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?Gur:Vur).curve(Pve(o,n.orient,n.tension)).context(t)(r)}function Zur(t,r){let n=r[0],o=n.interpolate||"linear";return Wur.curve(Pve(o,n.orient,n.tension)).context(t)(r)}function KM(t,r,n,o){return qur.context(t)(r,n,o)}function Qur(t,r){return(r.mark.shape||r.shape).context(t)(r)}function Jur(t,r){return Hur.context(t)(r)}function ecr(t,r){return Yur.context(t)(r)}function sut(){iut=1}function jve(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+iut++),a=i.clipping[s]||(i.clipping[s]={id:s});return Dn(o)?a.path=o(null):Lve(n)?a.path=KM(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Du(t){this.clear(),t&&this.union(t)}function Bve(t){this.mark=t,this.bounds=this.bounds||new Du}function $ve(t){Bve.call(this,t),this.items=this.items||[]}function zve(t){this._pending=0,this._loader=t||vK()}function Flt(t){t._pending+=1}function K5(t){t._pending-=1}function ZT(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?tcr(r,o):0))}return t}function tcr(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function aB(t,r){return BK=t,r?(YT=r*t2,Cve=Tve=Math.cos(YT),CK=Math.sin(YT),Eve=-CK):(Cve=Tve=1,YT=CK=Eve=0),ncr}function Plt(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function Llt(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>gur?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(jlt(u,t,r,n,o)),0<c&&c<1&&i(jlt(c,t,r,n,o))}function jlt(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function Uve(t){return function(r,n){if(!e2)return!0;t(e2,r),Ave.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=Ave;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(e2.isPointInPath(u,l))return!0;return!1}}function Vve(t,r){return r.contains(t.x||0,t.y||0)}function aut(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(Ave.set(n,o,n+i,o+s))}function lut(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return WM(r,n,o,i,s)}function WM(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-c,m=-(s-r)),y===1&&(h=c,m=l-r),y===2&&(h=-f,m=-(a-n)),y===3&&(h=f,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>p)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function HM(t,r){t.globalCompositeOperation=r.blend||"source-over"}function Dm(t,r){return t??r}function Blt(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function ocr(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+Dm(r.x1,.5)*o,n.y1+Dm(r.y1,.5)*i,Math.max(o,i)*Dm(r.r1,0),n.x1+Dm(r.x2,.5)*o,n.y1+Dm(r.y2,.5)*i,Math.max(o,i)*Dm(r.r2,.5));else{let a=Dm(r.x1,0),l=Dm(r.y1,0),u=Dm(r.x2,1),c=Dm(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=ff(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=Blt(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return Blt(s,r.stops)}function uut(t,r,n){return Ove(n)?ocr(t,n,r.bounds):n}function IK(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=uut(t,r,r.fill),!0):!1}function YM(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=uut(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||icr),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function scr(t,r){return t.zindex-r.zindex||t.index-r.index}function Gve(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(scr)}function Fm(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=Gve(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function DK(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=Gve(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function Wve(t){return function(r,n,o){Fm(n,i=>{(!o||o.intersects(i.bounds))&&cut(t,r,i,i)})}}function acr(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&cut(t,r,n.items[0],n.items)}}function cut(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(HM(r,n),n.fill&&IK(r,n,i)&&r.fill(),n.stroke&&YM(r,n,i)&&r.stroke()))}function $K(t){return t=t||Y0,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,DK(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function lB(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function qve(t){return $K(lB(t))}function XT(t,r){return"translate("+t+","+r+")"}function Hve(t){return"rotate("+t+")"}function lcr(t,r){return"scale("+t+","+r+")"}function fut(t){return XT(t.x||0,t.y||0)}function ucr(t){return XT(t.x||0,t.y||0)+(t.angle?" "+Hve(t.angle):"")}function ccr(t){return XT(t.x||0,t.y||0)+(t.angle?" "+Hve(t.angle):"")+(t.scaleX||t.scaleY?" "+lcr(t.scaleX||1,t.scaleY||1):"")}function Yve(t,r,n){function o(a,l){a("transform",ucr(l)),a("d",r(null,l))}function i(a,l){return r(aB(a,l.angle),l),ZT(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=t2),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:Wve(s),pick:qve(s),isect:n||Uve(s)}}function dcr(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function pcr(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function hcr(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function Xve(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(aB(u),f),ZT(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=lB(s);function l(u,c,f,d,p,h){var m=c.items,g=c.bounds;return!m||!m.length||g&&!g.contains(p,h)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,m,f,d)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:acr(s),pick:l,isect:Vve,tip:n}}function gcr(t,r){var n=r.clip;t.save(),Dn(n)?(t.beginPath(),n(t),t.clip()):dut(t,r.group)}function dut(t,r){t.beginPath(),Lve(r)?KM(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function put(t){let r=Dm(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function ycr(t,r){t("transform",fut(r))}function hut(t,r){let n=put(r);t("d",KM(null,r,n,n))}function bcr(t,r){t("class","background"),t("aria-hidden",!0),hut(t,r)}function xcr(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?hut(t,r):t("d","")}function vcr(t,r,n){let o=r.clip?jve(n,r,r):null;t("clip-path",o)}function wcr(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),ZT(t,r),t.translate(r.x||0,r.y||0)}function tB(t,r,n,o){let i=put(r);t.beginPath(),KM(t,r,(n||0)+i,(o||0)+i)}function Ecr(t,r,n){Fm(r,o=>{let i=o.x||0,s=o.y||0,a=o.strokeForeground,l=o.opacity==null?1:o.opacity;(o.stroke||o.fill)&&l&&(tB(t,o,i,s),HM(t,o),o.fill&&IK(t,o,l)&&t.fill(),o.stroke&&!a&&YM(t,o,l)&&t.stroke()),t.save(),t.translate(i,s),o.clip&&dut(t,o),n&&n.translate(-i,-s),Fm(o,u=>{this.draw(t,u,n)}),n&&n.translate(i,s),t.restore(),a&&o.stroke&&l&&(tB(t,o,i,s),HM(t,o),YM(t,o,l)&&t.stroke())})}function Tcr(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return DK(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let h=f+(u.width||0),m=d+(u.height||0),g=u.clip;if(g&&(i<f||i>h||s<d||s>m))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&Lve(u)&&!Ccr(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&Scr(t,u,a,l)?(t.restore(),u):(c=DK(u,x=>Acr(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&_cr(t,u,a,l)&&(c=u),t.restore(),c||null)})}function Acr(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function Kve(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function Zve(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function Qve(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function zK(t,r){return t==="center"?r/2:t==="right"?r:0}function UK(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function Icr(t,r,n){let o=Kve(r,n),i=Zve(r,o),s=Qve(r,o),a=(r.x||0)-zK(r.align,i),l=(r.y||0)-UK(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,rB["xmlns:xlink"],"xlink:href"),t("transform",XT(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function Dcr(t,r){let n=r.image,o=Zve(r,n),i=Qve(r,n),s=(r.x||0)-zK(r.align,o),a=(r.y||0)-UK(r.baseline,i);return t.set(s,a,s+o,a+i)}function Ncr(t,r,n){Fm(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=Kve(o,this),s=Zve(o,i),a=Qve(o,i);if(s===0||a===0)return;let l=(o.x||0)-zK(o.align,s),u=(o.y||0)-UK(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(HM(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function Ocr(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",ccr(r)),t("d",r.path)}function TK(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*t2,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=KT(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),qM(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):qM(t,u,o,i,s,a)}function Rcr(t,r){return TK(aB(t,r.angle),r)?t.set(0,0,0,0):ZT(t,r,!0)}function Lcr(t,r){t("d",KM(null,r))}function jcr(t,r){var n,o;return ZT(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function $lt(t,r){t.beginPath(),KM(t,r)}function $cr(t,r){t("transform",fut(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function zcr(t,r){var n,o;return ZT(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function mut(t,r,n){var o,i,s,a;return r.stroke&&YM(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function Ucr(t,r,n){Fm(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&mut(t,o,i)&&(HM(t,o),t.stroke())}})}function Vcr(t,r,n,o){return t.isPointInStroke?mut(t,r,1)&&t.isPointInStroke(n,o):!1}function gut(t){Mm.width=t&&e2?Jve:kve}function kve(t,r){return yut(n2(t,r),Oy(t))}function yut(t,r){return~~(.8*t.length*r)}function Jve(t,r){return Oy(t)<=0||!(r=n2(t,r))?0:but(r,VK(t))}function but(t,r){let n=`(${r}) ${t}`,o=zlt.get(n);return o===void 0&&(e2.font=r,o=e2.measureText(t).width,zlt.set(n,o)),o}function Oy(t){return t.fontSize!=null?+t.fontSize||0:11}function r2(t){return t.lineHeight!=null?t.lineHeight:Oy(t)+2}function Hcr(t){return Hr(t)?t.length>1?t:t[0]:t}function uB(t){return Hcr(t.lineBreak&&t.text&&!Hr(t.text)?t.text.split(t.lineBreak):t.text)}function Ycr(t){let r=uB(t);return(Hr(r)?r.length-1:0)*r2(t)}function n2(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?Kcr(t,n):n}function Xcr(t){if(Mm.width===Jve){let r=VK(t);return n=>but(n,r)}else{let r=Oy(t);return n=>yut(n,r)}}function Kcr(t,r){var n=+t.limit,o=Xcr(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function cB(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function VK(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Oy(t)+"px "+cB(t,r)}function e1e(t){var r=t.baseline,n=Oy(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*r2(t):r==="line-bottom"?.29*n-.5*r2(t):0)}function GK(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-WT,r+=o*Math.cos(i),n+=o*Math.sin(i)),Q5.x1=r,Q5.y1=n,Q5}function Qcr(t,r){var n=r.dx||0,o=(r.dy||0)+e1e(r),i=GK(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",Zcr[r.align]||"start"),l?(u=XT(s,a)+" "+Hve(l),(n||o)&&(u+=" "+XT(n,o))):u=XT(s+n,a+o),t("transform",u)}function t1e(t,r,n){var o=Mm.height(r),i=r.align,s=GK(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+e1e(r)-Math.round(.8*o),f=uB(r),d;if(Hr(f)?(o+=r2(r)*(f.length-1),d=f.reduce((p,h)=>Math.max(p,Mm.width(r,h)),0)):d=Mm.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*t2,a,l);else if(n===2)return t.rotatedPoints(r.angle*t2,a,l);return t}function Jcr(t,r,n){Fm(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=VK(o),t.textAlign=o.align||"left",s=GK(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*t2),a=l=0),a+=o.dx||0,l+=(o.dy||0)+e1e(o),f=uB(o),HM(t,o),Hr(f))for(c=r2(o),u=0;u<f.length;++u)d=n2(o,f[u]),o.fill&&IK(t,o,i)&&t.fillText(d,a,l),o.stroke&&YM(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=n2(o,f),o.fill&&IK(t,o,i)&&t.fillText(d,a,l),o.stroke&&YM(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function efr(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=GK(r),l=a.x1,u=a.y1,c=t1e(Q5,r,1),f=-r.angle*t2,d=Math.cos(f),p=Math.sin(f),h=d*i-p*s+(l-d*l+p*u),m=p*i+d*s+(u-p*l-d*u);return c.contains(h,m)}function tfr(t,r){let n=t1e(Q5,t,2);return WM(r,n[0],n[1],n[2],n[3])||WM(r,n[0],n[1],n[4],n[5])||WM(r,n[4],n[5],n[6],n[7])||WM(r,n[2],n[3],n[6],n[7])}function Ive(t,r,n){var o=Ud[t.mark.marktype],i=r||o.bound;return o.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Du),t,n)}function xut(t,r,n){var o=Ud[t.marktype],i=o.bound,s=t.items,a=s&&s.length,l,u,c,f;if(o.nested)return a?c=s[0]:(Ult.mark=t,c=Ult),f=Ive(c,i,n),r=r&&r.union(f)||f,r;if(r=r||t.bounds&&t.bounds.clear()||new Du,a)for(l=0,u=s.length;l<u;++l)r.union(Ive(s[l],i,n));return t.bounds=r}function vut(t,r){return JSON.stringify(t,ofr,r)}function wut(t){let r=typeof t=="string"?JSON.parse(t):t;return _ut(r)}function _ut(t){var r=t.marktype,n=t.items,o,i,s;if(n)for(i=0,s=n.length;i<s;++i)o=r?"mark":"group",n[i][o]=t,n[i].zindex&&(n[i][o].zdirty=!0),(r||o)==="group"&&_ut(n[i]);return r&&xut(t),t}function WK(t){arguments.length?this.root=wut(t):(this.root=Sut({marktype:"group",name:"root",role:"frame"}),this.root.items=[new $ve(this.root)])}function Sut(t,r){let n={bounds:new Du,clip:!!t.clip,group:r,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function Q_(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function r1e(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function _f(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Q_(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function Nm(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function Cut(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function fB(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function ifr(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=Ud[i.marktype]).tip){for(a=fB(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function o2(t,r){this._active=null,this._handlers={},this._loader=t||vK(),this._tooltip=r||sfr}function sfr(t,r,n,o){t.element().setAttribute("title",o||"")}function Ry(t){this._el=null,this._bgcolor=null,this._loader=new zve(t)}function ZM(t,r){o2.call(this,t,r),this._down=null,this._touch=null,this._first=!0,this._events={}}function Vlt(t,r){hfr(r).forEach(n=>mfr(t,n))}function mfr(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function Glt(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?this.fire(t,o):((!i||!i.exit)&&this.fire(n,o),this._active=s,this.fire(r,o),this.fire(t,o))}}function Wlt(t){return function(r){this.fire(t,r),this._active=null}}function gfr(){return typeof window<"u"&&window.devicePixelRatio||1}function bfr(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?yfr:i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function PK(t){Ry.call(this,t),this._options={},this._redraw=!1,this._dirty=new Du,this._tempb=new Du}function vfr(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function n1e(t,r){o2.call(this,t,r);let n=this;n._hrefHandler=Fve(n,(o,i)=>{i&&i.href&&n.handleHref(o,i,i.href)}),n._tooltipHandler=Fve(n,(o,i)=>{n.handleTooltip(o,i,o.type!==nB)})}function Mut(t,r){let n=r.aria===!1;if(t(Iut,n||void 0),n||r.description==null)for(let o in Ylt)t(Ylt[o],void 0);else{let o=r.mark.marktype;t(o1e,r.description),t(i1e,r.ariaRole||(o==="group"?Dut:a1e)),t(s1e,r.ariaRoleDescription||`${o} mark`)}}function Fut(t){return t.aria===!1?{[Iut]:!0}:wfr[t.role]?null:Hlt[t.role]?Sfr(t,Hlt[t.role]):_fr(t)}function _fr(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return Nut(n?Dut:a1e,`${r} mark container`,t.description)}function Sfr(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return Nut(r.role||a1e,r.desc,n.description||o(n))}catch{return null}}function Xlt(t){return Br(t.text).join(" ")}function Cfr(t){let r=t.datum,n=t.orient,o=r.title?Out(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${B_(l)?"discrete":l} scale with ${B0e(a,s,t)}`}function Efr(t){let r=t.datum,n=r.title?Out(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return Afr(o)+(n?` titled '${n}'`:"")+` for ${Tfr(s)} with ${B0e(u,l,t)}`}function Out(t){try{return Br(Un(t.items).items[0].text).join(" ")}catch{return null}}function Tfr(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Un(t)}function Afr(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function l1e(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${kfr(c)}"`),l),l={open(u,...c){s(u),r="<"+u;for(let f of c)for(let d in f)a(d,f[d]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=Rut(u),l),toString:()=>t};return l}function Lut(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes,o=n.length;for(let i=0;i<o;i++){let s=n[i];s.nodeType===3?t.text(s.nodeValue):Lut(t,s)}}return t.close()}function u1e(t){Ry.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Zlt(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function Ifr(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=_f(t,n++,"pattern",Ra);J_(a,{id:kK+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=_f(a,0,"rect",Ra),J_(a,{width:1,height:1,fill:`url(${But()}#${r.id})`}),t=_f(t,n++,"radialGradient",Ra),J_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=_f(t,n++,"linearGradient",Ra),J_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=_f(t,o,"stop",Ra),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return Nm(t,o),n}function Dfr(t,r,n){let o;return t=_f(t,n,"clipPath",Ra),t.setAttribute("id",r.id),r.path?(o=_f(t,0,"path",Ra),o.setAttribute("d",r.path)):(o=_f(t,0,"rect",Ra),J_(o,{x:0,y:0,width:r.width,height:r.height})),Nm(t,1),n+1}function Nfr(t,r,n){r=r.lastChild.previousSibling;let o,i=0;Fm(n,s=>{o=t.mark(r,s,o),++i}),Nm(r,1+i)}function Qlt(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=Q_(a,o,Ra),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=Q_(a,"path",Ra);s.appendChild(l),l.__data__=t;let u=Q_(a,"g",Ra);s.appendChild(u),u.__data__=t;let c=Q_(a,"path",Ra);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Mfr(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function Mfr(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function eB(t,r,n){r!==Iu[t]&&(n?Ofr(Fv,t,r,n):Mc(Fv,t,r),Iu[t]=r)}function _ve(t,r,n){n!==Iu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),Iu[r]=n)}function J_(t,r){for(let n in r)Mc(t,n,r[n])}function Mc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function Ofr(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function But(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function c1e(t){Ry.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function Rfr(t,r,n,o,i){if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),o==="text"&&(t["font-family"]=cB(r),t["font-size"]=Oy(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let s in LK){let a=r[s],l=LK[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(Ove(a)&&(a=eut(a,i.gradient,"")),t[l]=a)}return t}function dB(t,r){return t=String(t||"").toLowerCase(),arguments.length>1?(XM[t]=r,this):XM[t]}function f1e(t,r,n){let o=[],i=new Du().union(r),s=t.marktype;return s?Gut(t,i,n,o):s==="group"?Wut(t,i,n,o):pt("Intersect scene must be mark node or group item.")}function Gut(t,r,n,o){if(Pfr(t,r,n)){let i=t.items,s=t.marktype,a=i.length,l=0;if(s==="group")for(;l<a;++l)Wut(i[l],r,n,o);else for(let u=Ud[s].isect;l<a;++l){let c=i[l];qut(c,r,u)&&o.push(c)}}return o}function Pfr(t,r,n){return t.bounds&&r.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function Wut(t,r,n,o){n&&n(t.mark)&&qut(t,r,Ud.group.isect)&&o.push(t);let i=t.items,s=i&&i.length;if(s){let a=t.x||0,l=t.y||0;r.translate(-a,-l);for(let u=0;u<s;++u)Gut(i[u],r,n,o);r.translate(a,l)}return o}function qut(t,r,n){let o=t.bounds;return r.encloses(o)||r.intersects(o)&&n(t,r)}function Lfr(t){let r=t.clip;if(Dn(r))r(aB(Sve.clear()));else if(r)Sve.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(Sve)}function d1e(t,r,n){return t===r?!0:n==="path"?Hut(t,r):t instanceof Date&&r instanceof Date?+t==+r:X0(t)&&X0(r)?Math.abs(t-r)<=jfr:!t||!r||!un(t)&&!un(r)?t==r:Bfr(t,r)}function Hut(t,r){return d1e(KT(t),KT(r))}function Bfr(t,r){var n=Object.keys(t),o=Object.keys(r),i,s;if(n.length!==o.length)return!1;for(n.sort(),o.sort(),s=n.length-1;s>=0;s--)if(n[s]!=o[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!d1e(t[i],r[i],i))return!1;return typeof t==typeof r}function $fr(){sut(),hur()}var Jlt,kK,Ilt,mur,X5,t2,gur,WT,Fy,GM,gve,yve,tut,Kp,Nlt,Mlt,bve,K_,iB,sB,Eur,Tur,Aur,kur,Iur,Dur,Nur,Mur,Fur,Our,Rur,Pur,Lur,jur,Bur,$ur,jK,zur,Uur,Vur,Gur,Wur,qur,Hur,Yur,iut,rcr,BK,_K,SK,YT,Cve,CK,Eve,Tve,Z_,EK,Olt,Rlt,qT,HT,xve,vve,ncr,e2,Ave,icr,fcr,mcr,_cr,Scr,Ccr,kcr,rB,Mcr,Fcr,Pcr,Bcr,Gcr,Wcr,qcr,zlt,Mm,Zcr,Q5,rfr,nfr,Ud,Ult,ofr,afr,lfr,ufr,Eut,AK,Tut,Dve,cfr,NK,J5,Aut,MK,ffr,dfr,kut,FK,OK,RK,pfr,Nve,nB,Mve,hfr,yfr,qlt,xfr,Fve,Iut,o1e,i1e,s1e,Dut,a1e,Nut,wfr,Hlt,Ylt,Rut,kfr,Put,LK,jut,Z5,Klt,Ra,wve,Fv,Iu,Ffr,$ut,zut,Uut,Vut,Ov,XM,Sve,jfr,pB=N(()=>{"use strict";Ls();Wat();zM();kN();mve();yM();Jlt=0;kK="p_";Ilt={basis:{curve:Txe},"basis-closed":{curve:Axe},"basis-open":{curve:kxe},bundle:{curve:Ixe,tension:"beta",value:.85},cardinal:{curve:Dxe,tension:"tension",value:0},"cardinal-open":{curve:Fxe,tension:"tension",value:0},"cardinal-closed":{curve:Nxe,tension:"tension",value:0},"catmull-rom":{curve:Rxe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Pxe,tension:"alpha",value:.5},"catmull-rom-open":{curve:Lxe,tension:"alpha",value:.5},linear:{curve:UT},"linear-closed":{curve:jxe},monotone:{horizontal:zxe,vertical:$xe},natural:{curve:Uxe},step:{curve:Vxe},"step-after":{curve:Wxe},"step-before":{curve:Gxe}};mur={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},X5=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];t2=Math.PI/180,gur=1e-14,WT=Math.PI/2,Fy=Math.PI*2,GM=Math.sqrt(3)/2,gve={},yve={},tut=[].join;Kp=["l",0,0,0,0,0,0,0];Nlt=.5773502691896257,Mlt={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,Fy)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=GM*n,i=o-n*Nlt,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=GM*n,i=o-n*Nlt;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=GM*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=GM*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=GM*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=GM*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};bve={};K_=.448084975506;iB=t=>t.x||0,sB=t=>t.y||0,Eur=t=>t.width||0,Tur=t=>t.height||0,Aur=t=>(t.x||0)+(t.width||0),kur=t=>(t.y||0)+(t.height||0),Iur=t=>t.startAngle||0,Dur=t=>t.endAngle||0,Nur=t=>t.padAngle||0,Mur=t=>t.innerRadius||0,Fur=t=>t.outerRadius||0,Our=t=>t.cornerRadius||0,Rur=t=>oB(t.cornerRadiusTopLeft,t.cornerRadius)||0,Pur=t=>oB(t.cornerRadiusTopRight,t.cornerRadius)||0,Lur=t=>oB(t.cornerRadiusBottomRight,t.cornerRadius)||0,jur=t=>oB(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Bur=t=>oB(t.size,64),$ur=t=>t.size||1,jK=t=>t.defined!==!1,zur=t=>rut(t.shape||"circle"),Uur=wxe().startAngle(Iur).endAngle(Dur).padAngle(Nur).innerRadius(Mur).outerRadius(Fur).cornerRadius(Our),Vur=iK().x(iB).y1(sB).y0(kur).defined(jK),Gur=iK().y(sB).x1(iB).x0(Aur).defined(jK),Wur=L5().x(iB).y(sB).defined(jK),qur=nut().x(iB).y(sB).width(Eur).height(Tur).cornerRadius(Rur,Pur,Lur,jur),Hur=Exe().type(zur).size(Bur),Yur=out().x(iB).y(sB).defined(jK).size($ur);iut=1;Du.prototype={clone(){return new Du(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};Dt($ve,Bve);zve.prototype={pending(){return this._pending},sanitizeURL(t){let r=this;return Flt(r),r._loader.sanitize(t,{context:"href"}).then(n=>(K5(r),n)).catch(()=>(K5(r),null))},loadImage(t){let r=this,n=Rq();return Flt(r),r._loader.sanitize(t,{context:"image"}).then(o=>{let i=o.href;if(!i||!n)throw{url:i};let s=new n,a=Pr(o,"crossOrigin")?o.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>K5(r),s.onerror=()=>K5(r),s.src=i,s}).catch(o=>(K5(r),{complete:!1,width:0,height:0,src:o&&o.url||""}))},ready(){let t=this;return new Promise(r=>{function n(o){t.pending()?setTimeout(()=>{n(!0)},10):r(o)}n(!1)})}};rcr=Fy-1e-8,Z_=(t,r)=>BK.add(t,r),EK=(t,r)=>Z_(_K=t,SK=r),Olt=t=>Z_(t,BK.y1),Rlt=t=>Z_(BK.x1,t),qT=(t,r)=>Cve*t+Eve*r,HT=(t,r)=>CK*t+Tve*r,xve=(t,r)=>Z_(qT(t,r),HT(t,r)),vve=(t,r)=>EK(qT(t,r),HT(t,r));ncr={beginPath(){},closePath(){},moveTo:vve,lineTo:vve,rect(t,r,n,o){YT?(xve(t+n,r),xve(t+n,r+o),xve(t,r+o),vve(t,r)):(Z_(t+n,r+o),EK(t,r))},quadraticCurveTo(t,r,n,o){let i=qT(t,r),s=HT(t,r),a=qT(n,o),l=HT(n,o);Plt(_K,i,a,Olt),Plt(SK,s,l,Rlt),EK(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=qT(t,r),l=HT(t,r),u=qT(n,o),c=HT(n,o),f=qT(i,s),d=HT(i,s);Llt(_K,a,u,f,Olt),Llt(SK,l,c,d,Rlt),EK(f,d)},arc(t,r,n,o,i,s){if(o+=YT,i+=YT,_K=n*Math.cos(i)+t,SK=n*Math.sin(i)+r,Math.abs(i-o)>rcr)Z_(t-n,r-n),Z_(t+n,r+n);else{let a=c=>Z_(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%Fy,o<0&&(o+=Fy),i=i%Fy,i<0&&(i+=Fy),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=Fy,l=o-o%WT,u=0;u<4&&l>i;++u,l-=WT)a(l);else for(l=o-o%WT+WT,u=0;u<4&&l<i;++u,l=l+WT)a(l)}}};e2=(e2=ff(1,1))?e2.getContext("2d"):null,Ave=new Du;icr=[];fcr=Yve("arc",Xur);mcr=Xve("area",Kur,dcr);_cr=lB(tB),Scr=lB(tB,!1),Ccr=lB(tB,!0);kcr={type:"group",tag:"g",nested:!1,attr:ycr,bound:wcr,draw:Ecr,pick:Tcr,isect:aut,content:vcr,background:bcr,foreground:xcr},rB={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};Mcr={type:"image",tag:"image",nested:!1,attr:Icr,bound:Dcr,draw:Ncr,pick:$K(),isect:Y0,get:Kve,xOffset:zK,yOffset:UK},Fcr=Xve("line",Zur,pcr);Pcr={type:"path",tag:"path",nested:!1,attr:Ocr,bound:Rcr,draw:Wve(TK),pick:qve(TK),isect:Uve(TK)};Bcr={type:"rect",tag:"path",nested:!1,attr:Lcr,bound:jcr,draw:Wve($lt),pick:qve($lt),isect:aut};Gcr={type:"rule",tag:"line",nested:!1,attr:$cr,bound:zcr,draw:Ucr,pick:$K(Vcr),isect:lut},Wcr=Yve("shape",Qur),qcr=Yve("symbol",Jur,Vve),zlt=qce(),Mm={height:Oy,measureWidth:Jve,estimateWidth:kve,width:kve,canvas:gut};gut(!0);Zcr={left:"start",center:"middle",right:"end"},Q5=new Du;rfr={type:"text",tag:"text",nested:!1,attr:Qcr,bound:t1e,draw:Jcr,pick:$K(efr),isect:tfr},nfr=Xve("trail",ecr,hcr),Ud={arc:fcr,area:mcr,group:kcr,image:Mcr,line:Fcr,path:Pcr,rect:Bcr,rule:Gcr,shape:Wcr,symbol:qcr,text:rfr,trail:nfr};Ult={mark:null};ofr=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];WK.prototype={toJSON(t){return vut(this.root,t||0)},mark(t,r,n){r=r||this.root.items[0];let o=Sut(t,r);return r.items[n]=o,o.zindex&&(o.group.zdirty=!0),o}};o2.prototype={initialize(t,r,n){return this._el=t,this._obj=n||null,this.origin(r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,r,n){for(let o=t?t.length:0;--o>=0;)if(t[o].type===r&&(!n||t[o].handler===n))return o;return-1},handlers(t){let r=this._handlers,n=[];if(t)n.push(...r[this.eventName(t)]);else for(let o in r)n.push(...r[o]);return n},eventName(t){let r=t.indexOf(".");return r<0?t:t.slice(0,r)},handleHref(t,r,n){this._loader.sanitize(n,{context:"href"}).then(o=>{let i=new MouseEvent(t.type,t),s=Q_(null,"a");for(let a in o)s.setAttribute(a,o[a]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(t,r,n){if(r&&r.tooltip!=null){r=ifr(r,t,this.canvas(),this._origin);let o=n&&r&&r.tooltip||null;this._tooltip.call(this._obj,this,t,r,o)}},getItemBoundingClientRect(t){let r=this.canvas();if(!r)return;let n=r.getBoundingClientRect(),o=this._origin,i=t.bounds,s=i.width(),a=i.height(),l=i.x1+o[0]+n.left,u=i.y1+o[1]+n.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};Ry.prototype={initialize(t,r,n,o,i){return this._el=t,this.resize(r,n,o,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,r,n,o){return this._width=t,this._height=r,this._origin=n||[0,0],this._scale=o||1,this},dirty(){},render(t){let r=this;return r._call=function(){r._render(t)},r._call(),r._call=null,r},_render(){},renderAsync(t){let r=this.render(t);return this._ready?this._ready.then(()=>r):Promise.resolve(r)},_load(t,r){var n=this,o=n._loader[t](r);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return o},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};afr="keydown",lfr="keypress",ufr="keyup",Eut="dragenter",AK="dragleave",Tut="dragover",Dve="mousedown",cfr="mouseup",NK="mousemove",J5="mouseout",Aut="mouseover",MK="click",ffr="dblclick",dfr="wheel",kut="mousewheel",FK="touchstart",OK="touchmove",RK="touchend",pfr=[afr,lfr,ufr,Eut,AK,Tut,Dve,cfr,NK,J5,Aut,MK,ffr,dfr,kut,FK,OK,RK],Nve=NK,nB=J5,Mve=MK;hfr=t=>t===FK||t===OK||t===RK?[FK,OK,RK]:[t];Dt(ZM,o2,{initialize(t,r,n){return this._canvas=t&&r1e(t,"canvas"),[MK,Dve,NK,J5,AK].forEach(o=>Vlt(this,o)),o2.prototype.initialize.call(this,t,r,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:pfr,DOMMouseScroll(t){this.fire(kut,t)},mousemove:Glt(NK,Aut,J5),dragover:Glt(Tut,Eut,AK),mouseout:Wlt(J5),dragleave:Wlt(AK),mousedown(t){this._down=this._active,this.fire(Dve,t)},click(t){this._down===this._active&&(this.fire(MK,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(FK,t,!0)},touchmove(t){this.fire(OK,t,!0)},touchend(t){this.fire(RK,t,!0),this._touch=null},fire(t,r,n){let o=n?this._touch:this._active,i=this._handlers[t];if(r.vegaType=t,t===Mve&&o&&o.href?this.handleHref(r,o,o.href):(t===Nve||t===nB)&&this.handleTooltip(r,o,t!==nB),i)for(let s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,r,o)},on(t,r){let n=this.eventName(t),o=this._handlers;return this._handlerIndex(o[n],t,r)<0&&(Vlt(this,t),(o[n]||(o[n]=[])).push({type:t,handler:r})),this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&o.splice(i,1),this},pickEvent(t){let r=fB(t,this._canvas),n=this._origin;return this.pick(this._scene,r[0],r[1],r[0]-n[0],r[1]-n[1])},pick(t,r,n,o,i){let s=this.context();return Ud[t.marktype].pick.call(this,s,t,r,n,o,i)}});yfr=gfr();qlt=Ry.prototype,xfr=(t,r,n)=>new Du().set(0,0,r,n).translate(-t[0],-t[1]);Dt(PK,Ry,{initialize(t,r,n,o,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:ff(1,1,this._options.type),t&&this._canvas&&(Nm(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),qlt.initialize.call(this,t,r,n,o,i)},resize(t,r,n,o){if(qlt.resize.call(this,t,r,n,o),this._canvas)bfr(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||pt("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){let r=this._tempb.clear().union(t.bounds),n=t.mark.group;for(;n;)r.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(r)},_render(t){let r=this.context(),n=this._origin,o=this._width,i=this._height,s=this._dirty,a=xfr(n,o,i);r.save();let l=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):vfr(r,a.intersect(s),n);return this.clear(-n[0],-n[1],o,i),this.draw(r,t,l),r.restore(),s.clear(),this},draw(t,r,n){let o=Ud[r.marktype];r.clip&&gcr(t,r),o.draw.call(this,t,r,n),r.clip&&t.restore()},clear(t,r,n,o){let i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(t,r,n,o),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,r,n,o))}});Fve=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)};Dt(n1e,o2,{initialize(t,r,n){let o=this._svg;return o&&(o.removeEventListener(Mve,this._hrefHandler),o.removeEventListener(Nve,this._tooltipHandler),o.removeEventListener(nB,this._tooltipHandler)),this._svg=o=t&&r1e(t,"svg"),o&&(o.addEventListener(Mve,this._hrefHandler),o.addEventListener(Nve,this._tooltipHandler),o.addEventListener(nB,this._tooltipHandler)),o2.prototype.initialize.call(this,t,r,n)},canvas(){return this._svg},on(t,r){let n=this.eventName(t),o=this._handlers;if(this._handlerIndex(o[n],t,r)<0){let s={type:t,handler:r,listener:Fve(this,r)};(o[n]||(o[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&(this._svg&&this._svg.removeEventListener(n,o[i].listener),o.splice(i,1)),this}});Iut="aria-hidden",o1e="aria-label",i1e="role",s1e="aria-roledescription",Dut="graphics-object",a1e="graphics-symbol",Nut=(t,r,n)=>({[i1e]:t,[s1e]:r,[o1e]:n||void 0}),wfr=vu(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Hlt={axis:{desc:"axis",caption:Cfr},legend:{desc:"legend",caption:Efr},"title-text":{desc:"title",caption:t=>`Title text '${Xlt(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Xlt(t)}'`}},Ylt={ariaRole:i1e,ariaRoleDescription:s1e,description:o1e};Rut=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),kfr=t=>Rut(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");Put=t=>Lut(l1e(),t)+"";LK={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},jut={fill:"none","stroke-miterlimit":10},Z5=0,Klt="http://www.w3.org/2000/xmlns/",Ra=rB.xmlns;wve=Ry.prototype;Dt(u1e,Ry,{initialize(t,r,n,o,i){return this._defs={},this._clearDefs(),t&&(this._svg=_f(t,0,"svg",Ra),this._svg.setAttributeNS(Klt,"xmlns",Ra),this._svg.setAttributeNS(Klt,"xmlns:xlink",rB["xmlns:xlink"]),this._svg.setAttribute("version",rB.version),this._svg.setAttribute("class","marks"),Nm(t,1),this._root=_f(this._svg,Z5,"g",Ra),J_(this._root,jut),Nm(this._svg,Z5+1)),this.background(this._bgcolor),wve.initialize.call(this,t,r,n,o,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),wve.background.apply(this,arguments)},resize(t,r,n,o){return wve.resize.call(this,t,r,n,o),this._svg&&(J_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let t=this._svg,r=this._bgcolor;if(!t)return null;let n;r&&(t.removeAttribute("style"),n=_f(t,Z5,"rect",Ra),J_(n,{width:this._width,height:this._height,fill:r}));let o=Put(t);return r&&(t.removeChild(n),this._svg.style.setProperty("background-color",r)),o},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Nm(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let t=this._dirty;if(!t.length||!this._dirtyID)return!0;let r=++this._dirtyID,n,o,i,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(n=t[a],o=n.mark,o.marktype!==i&&(i=o.marktype,s=Ud[i]),o.zdirty&&o.dirty!==r&&(this._dirtyAll=!1,Zlt(n,r),o.items.forEach(c=>{c.dirty=r})),!o.zdirty){if(n.exit){s.nested&&o.items.length?(u=o.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?o.items[0]:n,n._update!==r&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Zlt(n,r)):this._update(s,n._svg,n),n._update=r)}return!this._dirtyAll},mark(t,r,n){if(!this.isDirty(r))return r._svg;let o=this._svg,i=Ud[r.marktype],s=r.interactive===!1?"none":null,a=i.tag==="g",l=null,u=0,c=Qlt(r,t,n,"g",o);c.setAttribute("class",Cut(r));let f=Fut(r);for(let p in f)Mc(c,p,f[p]);a||Mc(c,"pointer-events",s),Mc(c,"clip-path",r.clip?jve(this,r,r.group):null);let d=p=>{let h=this.isDirty(p),m=Qlt(p,c,l,i.tag,o);h&&(this._update(i,m,p),a&&Nfr(this,m,p)),l=m,++u};return i.nested?r.items.length&&d(r.items[0]):Fm(r,d),Nm(c,u),c},_update(t,r,n){Fv=r,Iu=r.__values__,Mut(eB,n),t.attr(eB,n,this);let o=Ffr[t.type];o&&o.call(this,t,r,n),Fv&&this.style(Fv,n)},style(t,r){if(r!=null)for(let n in LK){let o=n==="font"?cB(r):r[n];if(o===Iu[n])continue;let i=LK[n];o==null?t.removeAttribute(i):(Ove(o)&&(o=eut(o,this._defs.gradient,But())),t.setAttribute(i,o+"")),Iu[n]=o}},defs(){let t=this._svg,r=this._defs,n=r.el,o=0;for(let i in r.gradient)n||(r.el=n=_f(t,Z5+1,"defs",Ra)),o=Ifr(n,r.gradient[i],o);for(let i in r.clipping)n||(r.el=n=_f(t,Z5+1,"defs",Ra)),o=Dfr(n,r.clipping[i],o);n&&(o===0?(t.removeChild(n),r.el=null):Nm(n,o))},_clearDefs(){let t=this._defs;t.gradient={},t.clipping={}}});Fv=null,Iu=null,Ffr={group(t,r,n){let o=Fv=r.childNodes[2];Iu=o.__values__,t.foreground(eB,n,this),Iu=r.__values__,Fv=r.childNodes[1],t.content(eB,n,this);let i=Fv=r.childNodes[0];t.background(eB,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==Iu.events&&(Mc(o,"pointer-events",s),Mc(i,"pointer-events",s),Iu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;Mc(o,"display",null),this.style(i,n),Mc(i,"stroke",null),a&&(n.fill=null),Iu=o.__values__,this.style(o,n),a&&(n.fill=a),Fv=null}else Mc(o,"display","none")},image(t,r,n){n.smooth===!1?(_ve(r,"image-rendering","optimizeSpeed"),_ve(r,"image-rendering","pixelated")):_ve(r,"image-rendering",null)},text(t,r,n){let o=uB(n),i,s,a,l;Hr(o)?(s=o.map(u=>n2(n,u)),i=s.join(`
`),i!==Iu.text&&(Nm(r,0),a=r.ownerDocument,l=r2(n),s.forEach((u,c)=>{let f=Q_(a,"tspan",Ra);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),Iu.text=i)):(s=n2(n,o),s!==Iu.text&&(r.textContent=s,Iu.text=s)),Mc(r,"font-family",cB(n)),Mc(r,"font-size",Oy(n)+"px"),Mc(r,"font-style",n.fontStyle),Mc(r,"font-variant",n.fontVariant),Mc(r,"font-weight",n.fontWeight)}};Dt(c1e,Ry,{svg(){return this._text},_render(t){let r=l1e();r.open("svg",an({},rB,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&r.open("rect",{width:this._width,height:this._height,fill:n}).close(),r.open("g",jut,{transform:"translate("+this._origin+")"}),this.mark(r,t),r.close(),this.defs(r),this._text=r.close()+"",this},mark(t,r){let n=Ud[r.marktype],o=n.tag,i=[Mut,n.attr];t.open("g",{class:Cut(r),"clip-path":r.clip?jve(this,r,r.group):null},Fut(r),{"pointer-events":o!=="g"&&r.interactive===!1?"none":null});let s=a=>{let l=this.href(a);if(l&&t.open("a",l),t.open(o,this.attr(r,a,i,o!=="g"?o:null)),o==="text"){let u=uB(a);if(Hr(u)){let c={x:0,dy:r2(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(n2(a,u[f])).close()}else t.text(n2(a,u))}else if(o==="g"){let u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(r,a,n.background,"bgrect")).close(),t.open("g",this.attr(r,a,n.content)),Fm(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(r,a,n.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(r,a,n.foreground,"bgfore")).close()}t.close(),l&&t.close()};return n.nested?r.items&&r.items.length&&s(r.items[0]):Fm(r,s),t.close()},href(t){let r=t.href,n;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then(o=>{o["xlink:href"]=o.href,o.href=null,(this._hrefs||(this._hrefs={}))[r]=o})}return null},attr(t,r,n,o){let i={},s=(a,l,u,c)=>{i[c||a]=l};return Array.isArray(n)?n.forEach(a=>a(s,r,this)):n(s,r,this),o&&Rfr(i,r,t,o,this._defs),i},defs(t){let r=this._defs.gradient,n=this._defs.clipping;if(Object.keys(r).length+Object.keys(n).length!==0){t.open("defs");for(let i in r){let s=r[i],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:kK+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),t.close(),t.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(let i in n){let s=n[i];t.open("clipPath",{id:i}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});$ut="canvas",zut="png",Uut="svg",Vut="none",Ov={Canvas:$ut,PNG:zut,SVG:Uut,None:Vut},XM={};XM[$ut]=XM[zut]={renderer:PK,headless:PK,handler:ZM};XM[Uut]={renderer:u1e,headless:c1e,handler:n1e};XM[Vut]={};Sve=new Du;jfr=1e-9});var w1e={};fn(w1e,{label:()=>v1e});function Gfr(t,r){let n=t.bitmap();return(r||[]).forEach(o=>n.set(t(o.boundary[0]),t(o.boundary[3]))),[n,void 0]}function Wfr(t,r,n,o){let i=t.width,s=t.height,a=n||o,l=ff(i,s).getContext("2d");r.forEach(y=>Xut(l,y,a));let u=new Uint32Array(l.getImageData(0,0,i,s).data.buffer),c=t.bitmap(),f=a&&t.bitmap(),d,p,h,m,g;for(p=0;p<s;++p)for(d=0;d<i;++d)g=u[p*i+d]&zfr,g&&(h=t(d),m=t(p),o||c.set(h,m),a&&g^Ufr&&f.set(h,m));return[c,f]}function Xut(t,r,n){if(!r.length)return;let o=r[0].mark.marktype;o==="group"?r.forEach(i=>{i.items.forEach(s=>Xut(t,s.items,n))}):Ud[o].draw(t,{items:n?r.map(qfr):r})}function qfr(t){let r=OE(t,{});return r.stroke&&(r.strokeOpacity=1),r.fill&&(r.fillOpacity=Vfr,r.stroke="#000",r.strokeOpacity=1,r.strokeWidth=2),r}function Hfr(t,r){let n=new Uint32Array(~~((t*r+hB)/hB));function o(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{let l=a*t+s;return n[l>>>Rv]&1<<(l&Fc)},set:(s,a)=>{let l=a*t+s;o(l>>>Rv,1<<(l&Fc))},clear:(s,a)=>{let l=a*t+s;i(l>>>Rv,~(1<<(l&Fc)))},getRange:(s,a,l,u)=>{let c=u,f,d,p,h;for(;c>=a;--c)if(f=c*t+s,d=c*t+l,p=f>>>Rv,h=d>>>Rv,p===h){if(n[p]&i2[f&Fc]&Om[(d&Fc)+1])return!0}else{if(n[p]&i2[f&Fc]||n[h]&Om[(d&Fc)+1])return!0;for(let m=p+1;m<h;++m)if(n[m])return!0}return!1},setRange:(s,a,l,u)=>{let c,f,d,p,h;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>Rv,p=f>>>Rv,d===p)o(d,i2[c&Fc]&Om[(f&Fc)+1]);else for(o(d,i2[c&Fc]),o(p,Om[(f&Fc)+1]),h=d+1;h<p;++h)o(h,4294967295)},clearRange:(s,a,l,u)=>{let c,f,d,p,h;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>Rv,p=f>>>Rv,d===p)i(d,Om[c&Fc]|i2[(f&Fc)+1]);else for(i(d,Om[c&Fc]),i(p,i2[(f&Fc)+1]),h=d+1;h<p;++h)i(h,0)},outOfBounds:(s,a,l,u)=>s<0||a<0||u>=r||l>=t}}function Yfr(t,r,n){let o=Math.max(1,Math.sqrt(t*r/1e6)),i=~~((t+2*n+o)/o),s=~~((r+2*n+o)/o),a=l=>~~((l+n)/o);return a.invert=l=>l*o-n,a.bitmap=()=>Hfr(i,s),a.ratio=o,a.padding=n,a.width=t,a.height=r,a}function Xfr(t,r,n,o){let i=t.width,s=t.height;return function(a){let l=a.datum.datum.items[o].items,u=l.length,c=a.datum.fontSize,f=Mm.width(a.datum,a.datum.text),d=0,p,h,m,g,y,b,x;for(let v=0;v<u;++v)p=l[v].x,m=l[v].y,h=l[v].x2===void 0?p:l[v].x2,g=l[v].y2===void 0?m:l[v].y2,y=(p+h)/2,b=(m+g)/2,x=Math.abs(h-p+g-m),x>=d&&(d=x,a.x=y,a.y=b);return y=f/2,b=c/2,p=a.x-y,h=a.x+y,m=a.y-b,g=a.y+b,a.align="center",p<0&&h<=i?a.align="left":0<=p&&i<h&&(a.align="right"),a.baseline="middle",m<0&&g<=s?a.baseline="top":0<=m&&s<g&&(a.baseline="bottom"),!0}}function qK(t,r,n,o,i,s){let a=n/2;return t-a<0||t+a>i||r-(a=o/2)<0||r+a>s}function s2(t,r,n,o,i,s,a,l){let u=i*s/(o*2),c=t(r-u),f=t(r+u),d=t(n-(s=s/2)),p=t(n+s);return a.outOfBounds(c,d,f,p)||a.getRange(c,d,f,p)||l&&l.getRange(c,d,f,p)}function Kfr(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1];function u(c,f,d,p,h){let m=t.invert(c),g=t.invert(f),y=d,b=s,x;if(!qK(m,g,p,h,i,s)&&!s2(t,m,g,h,p,y,a,l)&&!s2(t,m,g,h,p,h,a,null)){for(;b-y>=1;)x=(y+b)/2,s2(t,m,g,h,p,x,a,l)?b=x:y=x;if(y>d)return[m,g,y,!0]}}return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,h=Mm.width(c.datum,c.datum.text),m=n?p:0,g=!1,y=!1,b=0,x,v,w,_,S,C,E,T,I,k,F,D,L,P,R,V,G;for(let U=0;U<d;++U){for(x=f[U].x,w=f[U].y,v=f[U].x2===void 0?x:f[U].x2,_=f[U].y2===void 0?w:f[U].y2,x>v&&(G=x,x=v,v=G),w>_&&(G=w,w=_,_=G),I=t(x),F=t(v),k=~~((I+F)/2),D=t(w),P=t(_),L=~~((D+P)/2),E=k;E>=I;--E)for(T=L;T>=D;--T)V=u(E,T,m,h,p),V&&([c.x,c.y,m,g]=V);for(E=k;E<=F;++E)for(T=L;T<=P;++T)V=u(E,T,m,h,p),V&&([c.x,c.y,m,g]=V);!g&&!n&&(R=Math.abs(v-x+_-w),S=(x+v)/2,C=(w+_)/2,R>=b&&!qK(S,C,h,p,i,s)&&!s2(t,S,C,p,h,p,a,null)&&(b=R,c.x=S,c.y=C,y=!0))}return g||y?(S=h/2,C=p/2,a.setRange(t(c.x-S),t(c.y-C),t(c.x+S),t(c.y+C)),c.align="center",c.baseline="middle",!0):!1}}function Jfr(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=t.bitmap();return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,h=Mm.width(c.datum,c.datum.text),m=[],g=n?p:0,y=!1,b=!1,x=0,v,w,_,S,C,E,T,I,k,F,D,L;for(let P=0;P<d;++P){for(v=f[P].x,_=f[P].y,w=f[P].x2===void 0?v:f[P].x2,S=f[P].y2===void 0?_:f[P].y2,m.push([t((v+w)/2),t((_+S)/2)]);m.length;)if([T,I]=m.pop(),!(a.get(T,I)||l.get(T,I)||u.get(T,I))){u.set(T,I);for(let R=0;R<4;++R)C=T+Zfr[R],E=I+Qfr[R],u.outOfBounds(C,E,C,E)||m.push([C,E]);if(C=t.invert(T),E=t.invert(I),k=g,F=s,!qK(C,E,h,p,i,s)&&!s2(t,C,E,p,h,k,a,l)&&!s2(t,C,E,p,h,p,a,null)){for(;F-k>=1;)D=(k+F)/2,s2(t,C,E,p,h,D,a,l)?F=D:k=D;k>g&&(c.x=C,c.y=E,g=k,y=!0)}}!y&&!n&&(L=Math.abs(w-v+S-_),C=(v+w)/2,E=(_+S)/2,L>=x&&!qK(C,E,h,p,i,s)&&!s2(t,C,E,p,h,p,a,null)&&(x=L,c.x=C,c.y=E,b=!0))}return y||b?(C=h/2,E=p/2,a.setRange(t(c.x-C),t(c.y-E),t(c.x+C),t(c.y+E)),c.align="center",c.baseline="middle",!0):!1}}function rdr(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=o.length;return function(c){let f=c.boundary,d=c.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let p=0,h,m,g,y,b,x,v,w,_,S,C,E,T,I,k;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,m=(n[F]>>>2&3)-1,g=h===0&&m===0||o[F]<0,y=h&&m?Math.SQRT1_2:1,b=o[F]<0?-1:1,x=f[1+h]+o[F]*h*y,C=f[4+m]+b*d*m/2+o[F]*m*y,w=C-d/2,_=C+d/2,E=t(x),I=t(w),k=t(_),!p)if(Yut(E,E,I,k,a,l,x,x,w,_,f,g))p=Mm.width(c.datum,c.datum.text);else continue;if(S=x+b*p*h/2,x=S-p/2,v=S+p/2,E=t(x),T=t(v),Yut(E,T,I,k,a,l,x,v,w,_,f,g))return c.x=h?h*b<0?v:x:S,c.y=m?m*b<0?_:w:C,c.align=edr[h*b+1],c.baseline=tdr[m*b+1],a.setRange(E,I,T,k),!0}return!1}}function Yut(t,r,n,o,i,s,a,l,u,c,f,d){return!(i.outOfBounds(t,n,r,o)||(d&&s?s.getRange(t,n,r,o)||!ndr(a,u,l,c,f):i.getRange(t,n,r,o)))}function ndr(t,r,n,o,i){return i[0]<=t&&n<=i[2]&&i[3]<=r&&o<=i[5]}function sdr(t,r,n,o,i,s,a,l,u,c,f){if(!t.length)return t;let d=Math.max(o.length,i.length),p=adr(o,d),h=ldr(i,d),m=udr(t[0].datum),g=m==="group"&&t[0].datum.items[u].marktype,y=g==="area",b=cdr(m,g,l,u),x=Yfr(r[0],r[1],c),v=y&&f==="naive",w=t.map(C=>({datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(C)})),_;if(!v){n&&w.sort((E,T)=>n(E.datum,T.datum));let C=!1;for(let E=0;E<h.length&&!C;++E)C=h[E]===5||p[E]<0;m&&(a||y)&&(s=[t.map(E=>E.datum)].concat(s)),_=s.length?Wfr(x,s,C,y):Gfr(x,a&&w)}let S=y?idr[f](x,_,a,u):rdr(x,_,h,p);return w.forEach(C=>C.opacity=+S(C)),w}function adr(t,r){let n=new Float64Array(r),o=t.length;for(let i=0;i<o;++i)n[i]=t[i]||0;for(let i=o;i<r;++i)n[i]=n[o-1];return n}function ldr(t,r){let n=new Int8Array(r),o=t.length;for(let i=0;i<o;++i)n[i]|=odr[t[i]];for(let i=o;i<r;++i)n[i]=n[o-1];return n}function udr(t){return t&&t.mark&&t.mark.marktype}function cdr(t,r,n,o){let i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>i(s.datum):r==="line"?s=>{let a=s.datum.items[o].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{let a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}function v1e(t){et.call(this,null,t)}var zfr,Ufr,Vfr,Rv,Fc,hB,i2,Om,Zfr,Qfr,edr,tdr,p1e,h1e,m1e,g1e,y1e,b1e,odr,idr,x1e,Kut,Zut=N(()=>{"use strict";kN();tl();pB();Ls();zfr=4278190080,Ufr=268435456,Vfr=.0625;Rv=5,Fc=31,hB=32,i2=new Uint32Array(hB+1),Om=new Uint32Array(hB+1);Om[0]=0;i2[0]=~Om[0];for(let t=1;t<=hB;++t)Om[t]=Om[t-1]<<1|1,i2[t]=~Om[t];Zfr=[-1,-1,1,1],Qfr=[-1,1,-1,1];edr=["right","center","left"],tdr=["bottom","middle","top"];p1e=0,h1e=4,m1e=8,g1e=0,y1e=1,b1e=2,odr={"top-left":p1e+g1e,top:p1e+y1e,"top-right":p1e+b1e,left:h1e+g1e,middle:h1e+y1e,right:h1e+b1e,"bottom-left":m1e+g1e,bottom:m1e+y1e,"bottom-right":m1e+b1e},idr={naive:Xfr,"reduced-search":Kfr,floodfill:Jfr};x1e=["x","y","opacity","align","baseline"],Kut=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];v1e.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Kut},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:x1e.length,default:x1e}]};Dt(v1e,et,{transform(t,r){function n(s){let a=t[s];return Dn(a)&&r.modified(a.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&pt("Size parameter should be specified as a [width, height] array.");let i=t.as||x1e;return sdr(r.materialize(r.SOURCE).source,t.size,t.sort,Br(t.offset||1),Br(t.anchor||Kut),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(s=>{let a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),r.reflow(o).modifies(i)}})});var E1e={};fn(E1e,{loess:()=>S1e,regression:()=>C1e});function Qut(t,r){var n=[],o=function(f){return f(l)},i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function S1e(t){et.call(this,null,t)}function C1e(t){et.call(this,null,t)}var _1e,fdr,Jut=N(()=>{"use strict";bN();tl();Ls();S1e.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Dt(S1e,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=Qut(o,t.groupby),s=(t.groupby||[]).map(Li),a=s.length,l=t.as||[Li(t.x),Li(t.y)],u=[];i.forEach(c=>{mde(c,t.x,t.y,t.bandwidth||.3).forEach(f=>{let d={};for(let p=0;p<a;++p)d[s[p]]=c.dims[p];d[l[0]]=f[0],d[l[1]]=f[1],u.push(Nn(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});_1e={linear:cq,log:fde,exp:dde,pow:pde,quad:fq,poly:hde},fdr=(t,r)=>t==="poly"?r:t==="quad"?2:1;C1e.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(_1e)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Dt(C1e,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=Qut(o,t.groupby),s=(t.groupby||[]).map(Li),a=t.method||"linear",l=t.order||3,u=fdr(a,l),c=t.as||[Li(t.x),Li(t.y)],f=_1e[a],d=[],p=t.extent;Pr(_1e,a)||pt("Invalid regression method: "+a),p!=null&&a==="log"&&p[0]<=0&&(r.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(h=>{if(h.length<=u){r.dataflow.warn("Skipping regression with more parameters than data points.");return}let g=f(h,t.x,t.y,l);if(t.params){d.push(Nn({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}let y=p||tm(h,t.x),b=x=>{let v={};for(let w=0;w<s.length;++w)v[s[w]]=h.dims[w];v[c[0]]=x[0],v[c[1]]=x[1],d.push(Nn(v))};a==="linear"?y.forEach(x=>b([x,g.predict(x)])):yN(g.predict,y,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}})});function ddr(t,r){let n=t/(Math.abs(t)+Math.abs(r));return(r>0?3-n:1+n)/4}function T1e(t,r,n,o){let i=t-n,s=r-o;return i*i+s*s}function A1e(t,r,n,o,i,s){let a=(o-r)*(i-t),l=(n-t)*(s-r);return Math.abs(a-l)>=33306690738754716e-32*Math.abs(a+l)?a-l:0}function YK(t,r,n,o,i,s){return(A1e(i,s,t,r,n,o)||A1e(t,r,n,o,i,s)||A1e(n,o,i,s,t,r))<0}function pdr(t,r,n,o,i,s,a,l){let u=t-a,c=r-l,f=n-a,d=o-l,p=i-a,h=s-l,m=u*u+c*c,g=f*f+d*d,y=p*p+h*h;return u*(d*y-g*h)-c*(f*y-g*p)+m*(f*h-d*p)<0}function hdr(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),h=(c*f-l*d)*p,m=(a*d-u*f)*p;return h*h+m*m}function mdr(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),h=t+(c*f-l*d)*p,m=r+(a*d-u*f)*p;return{x:h,y:m}}function QM(t,r,n,o){if(o-n<=20)for(let i=n+1;i<=o;i++){let s=t[i],a=r[s],l=i-1;for(;l>=n&&r[t[l]]>a;)t[l+1]=t[l--];t[l+1]=s}else{let i=n+o>>1,s=n+1,a=o;mB(t,i,s),r[t[n]]>r[t[o]]&&mB(t,n,o),r[t[s]]>r[t[o]]&&mB(t,s,o),r[t[n]]>r[t[s]]&&mB(t,n,s);let l=t[s],u=r[l];for(;;){do s++;while(r[t[s]]<u);do a--;while(r[t[a]]>u);if(a<s)break;mB(t,s,a)}t[n+1]=t[a],t[a]=l,o-s+1>=a-n?(QM(t,r,s,o),QM(t,r,n,a-1)):(QM(t,r,n,a-1),QM(t,r,s,o))}}function mB(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function gdr(t){return t[0]}function ydr(t){return t[1]}var ect,HK,gB,tct=N(()=>{"use strict";ect=Math.pow(2,-52),HK=new Uint32Array(512),gB=class t{static from(r,n=gdr,o=ydr){let i=r.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){let l=r[a];s[2*a]=n(l),s[2*a+1]=o(l)}return new t(s)}constructor(r){let n=r.length>>1;if(n>0&&typeof r[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=r;let o=Math.max(2*n-5,0);this._triangles=new Uint32Array(o*3),this._halfedges=new Int32Array(o*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:r,_hullPrev:n,_hullNext:o,_hullTri:i,_hullHash:s}=this,a=r.length>>1,l=1/0,u=1/0,c=-1/0,f=-1/0;for(let I=0;I<a;I++){let k=r[2*I],F=r[2*I+1];k<l&&(l=k),F<u&&(u=F),k>c&&(c=k),F>f&&(f=F),this._ids[I]=I}let d=(l+c)/2,p=(u+f)/2,h=1/0,m,g,y;for(let I=0;I<a;I++){let k=T1e(d,p,r[2*I],r[2*I+1]);k<h&&(m=I,h=k)}let b=r[2*m],x=r[2*m+1];h=1/0;for(let I=0;I<a;I++){if(I===m)continue;let k=T1e(b,x,r[2*I],r[2*I+1]);k<h&&k>0&&(g=I,h=k)}let v=r[2*g],w=r[2*g+1],_=1/0;for(let I=0;I<a;I++){if(I===m||I===g)continue;let k=hdr(b,x,v,w,r[2*I],r[2*I+1]);k<_&&(y=I,_=k)}let S=r[2*y],C=r[2*y+1];if(_===1/0){for(let F=0;F<a;F++)this._dists[F]=r[2*F]-r[0]||r[2*F+1]-r[1];QM(this._ids,this._dists,0,a-1);let I=new Uint32Array(a),k=0;for(let F=0,D=-1/0;F<a;F++){let L=this._ids[F];this._dists[L]>D&&(I[k++]=L,D=this._dists[L])}this.hull=I.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(YK(b,x,v,w,S,C)){let I=g,k=v,F=w;g=y,v=S,w=C,y=I,S=k,C=F}let E=mdr(b,x,v,w,S,C);this._cx=E.x,this._cy=E.y;for(let I=0;I<a;I++)this._dists[I]=T1e(r[2*I],r[2*I+1],E.x,E.y);QM(this._ids,this._dists,0,a-1),this._hullStart=m;let T=3;o[m]=n[y]=g,o[g]=n[m]=y,o[y]=n[g]=m,i[m]=0,i[g]=1,i[y]=2,s.fill(-1),s[this._hashKey(b,x)]=m,s[this._hashKey(v,w)]=g,s[this._hashKey(S,C)]=y,this.trianglesLen=0,this._addTriangle(m,g,y,-1,-1,-1);for(let I=0,k,F;I<this._ids.length;I++){let D=this._ids[I],L=r[2*D],P=r[2*D+1];if(I>0&&Math.abs(L-k)<=ect&&Math.abs(P-F)<=ect||(k=L,F=P,D===m||D===g||D===y))continue;let R=0;for(let X=0,fe=this._hashKey(L,P);X<this._hashSize&&(R=s[(fe+X)%this._hashSize],!(R!==-1&&R!==o[R]));X++);R=n[R];let V=R,G;for(;G=o[V],!YK(L,P,r[2*V],r[2*V+1],r[2*G],r[2*G+1]);)if(V=G,V===R){V=-1;break}if(V===-1)continue;let U=this._addTriangle(V,D,o[V],-1,-1,i[V]);i[D]=this._legalize(U+2),i[V]=U,T++;let H=o[V];for(;G=o[H],YK(L,P,r[2*H],r[2*H+1],r[2*G],r[2*G+1]);)U=this._addTriangle(H,D,G,i[D],-1,i[H]),i[D]=this._legalize(U+2),o[H]=H,T--,H=G;if(V===R)for(;G=n[V],YK(L,P,r[2*G],r[2*G+1],r[2*V],r[2*V+1]);)U=this._addTriangle(G,D,V,-1,i[V],i[G]),this._legalize(U+2),i[G]=U,o[V]=V,T--,V=G;this._hullStart=n[D]=V,o[V]=n[H]=D,o[D]=H,s[this._hashKey(L,P)]=D,s[this._hashKey(r[2*V],r[2*V+1])]=V}this.hull=new Uint32Array(T);for(let I=0,k=this._hullStart;I<T;I++)this.hull[I]=k,k=o[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(r,n){return Math.floor(ddr(r-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(r){let{_triangles:n,_halfedges:o,coords:i}=this,s=0,a=0;for(;;){let l=o[r],u=r-r%3;if(a=u+(r+2)%3,l===-1){if(s===0)break;r=HK[--s];continue}let c=l-l%3,f=u+(r+1)%3,d=c+(l+2)%3,p=n[a],h=n[r],m=n[f],g=n[d];if(pdr(i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*g],i[2*g+1])){n[r]=g,n[l]=p;let b=o[d];if(b===-1){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=r;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(r,b),this._link(l,o[a]),this._link(a,d);let x=c+(l+1)%3;s<HK.length&&(HK[s++]=x)}else{if(s===0)break;r=HK[--s]}}return a}_link(r,n){this._halfedges[r]=n,n!==-1&&(this._halfedges[n]=r)}_addTriangle(r,n,o,i,s,a){let l=this.trianglesLen;return this._triangles[l]=r,this._triangles[l+1]=n,this._triangles[l+2]=o,this._link(l,i),this._link(l+1,s),this._link(l+2,a),this.trianglesLen+=3,l}}});var Rm,k1e=N(()=>{"use strict";Rm=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(r,n){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(r,n){this._+=`L${this._x1=+r},${this._y1=+n}`}arc(r,n,o){r=+r,n=+n,o=+o;let i=r+o,s=n;if(o<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),o&&(this._+=`A${o},${o},0,1,1,${r-o},${n}A${o},${o},0,1,1,${this._x1=i},${this._y1=s}`)}rect(r,n,o,i){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${+o}v${+i}h${-o}Z`}value(){return this._||null}}});var QT,I1e=N(()=>{"use strict";QT=class{constructor(){this._=[]}moveTo(r,n){this._.push([r,n])}closePath(){this._.push(this._[0].slice())}lineTo(r,n){this._.push([r,n])}value(){return this._.length?this._:null}}});var XK,rct=N(()=>{"use strict";k1e();I1e();XK=class{constructor(r,[n,o,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=r,this._circumcenters=new Float64Array(r.points.length*2),this.vectors=new Float64Array(r.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=o,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:r,hull:n,triangles:o},vectors:i}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let h=0,m=0,g=o.length,y,b;h<g;h+=3,m+=2){let x=o[h]*2,v=o[h+1]*2,w=o[h+2]*2,_=r[x],S=r[x+1],C=r[v],E=r[v+1],T=r[w],I=r[w+1],k=C-_,F=E-S,D=T-_,L=I-S,P=k*k+F*F,R=D*D+L*L,V=(k*L-F*D)*2;if(!V)y=(_+T)/2-1e8*L,b=(S+I)/2+1e8*D;else if(Math.abs(V)<1e-8)y=(_+T)/2,b=(S+I)/2;else{let G=1/V;y=_+(L*P-F*R)*G,b=S+(k*R-D*P)*G}s[m]=y,s[m+1]=b}let a=n[n.length-1],l,u=a*4,c,f=r[2*a],d,p=r[2*a+1];i.fill(0);for(let h=0;h<n.length;++h)a=n[h],l=u,c=f,d=p,u=a*4,f=r[2*a],p=r[2*a+1],i[l+2]=i[u]=d-p,i[l+3]=i[u+1]=f-c}render(r){let n=r==null?r=new Rm:void 0,{delaunay:{halfedges:o,inedges:i,hull:s},circumcenters:a,vectors:l}=this;if(s.length<=1)return null;for(let f=0,d=o.length;f<d;++f){let p=o[f];if(p<f)continue;let h=Math.floor(f/3)*2,m=Math.floor(p/3)*2,g=a[h],y=a[h+1],b=a[m],x=a[m+1];this._renderSegment(g,y,b,x,r)}let u,c=s[s.length-1];for(let f=0;f<s.length;++f){u=c,c=s[f];let d=Math.floor(i[c]/3)*2,p=a[d],h=a[d+1],m=u*4,g=this._project(p,h,l[m+2],l[m+3]);g&&this._renderSegment(p,h,g[0],g[1],r)}return n&&n.value()}renderBounds(r){let n=r==null?r=new Rm:void 0;return r.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(r,n){let o=n==null?n=new Rm:void 0,i=this._clip(r);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),o&&o.value()}*cellPolygons(){let{delaunay:{points:r}}=this;for(let n=0,o=r.length/2;n<o;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(r){let n=new QT;return this.renderCell(r,n),n.value()}_renderSegment(r,n,o,i,s){let a,l=this._regioncode(r,n),u=this._regioncode(o,i);l===0&&u===0?(s.moveTo(r,n),s.lineTo(o,i)):(a=this._clipSegment(r,n,o,i,l,u))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(r,n,o){return n=+n,n!==n||(o=+o,o!==o)?!1:this.delaunay._step(r,n,o)===r}*neighbors(r){let n=this._clip(r);if(n)for(let o of this.delaunay.neighbors(r)){let i=this._clip(o);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let l=0,u=i.length;l<u;l+=2)if(n[s]==i[l]&&n[s+1]==i[l+1]&&n[(s+2)%a]==i[(l+u-2)%u]&&n[(s+3)%a]==i[(l+u-1)%u]){yield o;break e}}}}_cell(r){let{circumcenters:n,delaunay:{inedges:o,halfedges:i,triangles:s}}=this,a=o[r];if(a===-1)return null;let l=[],u=a;do{let c=Math.floor(u/3);if(l.push(n[c*2],n[c*2+1]),u=u%3===2?u-2:u+1,s[u]!==r)break;u=i[u]}while(u!==a&&u!==-1);return l}_clip(r){if(r===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(r);if(n===null)return null;let{vectors:o}=this,i=r*4;return o[i]||o[i+1]?this._clipInfinite(r,n,o[i],o[i+1],o[i+2],o[i+3]):this._clipFinite(r,n)}_clipFinite(r,n){let o=n.length,i=null,s,a,l=n[o-2],u=n[o-1],c,f=this._regioncode(l,u),d,p;for(let h=0;h<o;h+=2)if(s=l,a=u,l=n[h],u=n[h+1],c=f,f=this._regioncode(l,u),c===0&&f===0)d=p,p=0,i?i.push(l,u):i=[l,u];else{let m,g,y,b,x;if(c===0){if((m=this._clipSegment(s,a,l,u,c,f))===null)continue;[g,y,b,x]=m}else{if((m=this._clipSegment(l,u,s,a,f,c))===null)continue;[b,x,g,y]=m,d=p,p=this._edgecode(g,y),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(g,y):i=[g,y]}d=p,p=this._edgecode(b,x),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(b,x):i=[b,x]}if(i)d=p,p=this._edgecode(i[0],i[1]),d&&p&&this._edge(r,d,p,i,i.length);else if(this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(r,n,o,i,s,a){for(;;){if(s===0&&a===0)return[r,n,o,i];if(s&a)return null;let l,u,c=s||a;c&8?(l=r+(o-r)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=r+(o-r)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-r)/(o-r),l=this.xmax):(u=n+(i-n)*(this.xmin-r)/(o-r),l=this.xmin),s?(r=l,n=u,s=this._regioncode(r,n)):(o=l,i=u,a=this._regioncode(o,i))}}_clipInfinite(r,n,o,i,s,a){let l=Array.from(n),u;if((u=this._project(l[0],l[1],o,i))&&l.unshift(u[0],u[1]),(u=this._project(l[l.length-2],l[l.length-1],s,a))&&l.push(u[0],u[1]),l=this._clipFinite(r,l))for(let c=0,f=l.length,d,p=this._edgecode(l[f-2],l[f-1]);c<f;c+=2)d=p,p=this._edgecode(l[c],l[c+1]),d&&p&&(c=this._edge(r,d,p,l,c),f=l.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(r,n,o,i,s){for(;n!==o;){let a,l;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,l=this.ymin;break}(i[s]!==a||i[s+1]!==l)&&this.contains(r,a,l)&&(i.splice(s,0,a,l),s+=2)}if(i.length>4)for(let a=0;a<i.length;a+=2){let l=(a+2)%i.length,u=(a+4)%i.length;(i[a]===i[l]&&i[l]===i[u]||i[a+1]===i[l+1]&&i[l+1]===i[u+1])&&(i.splice(l,2),a-=2)}return s}_project(r,n,o,i){let s=1/0,a,l,u;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(u=this.ymin,l=r+(s=a)*o)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(u=this.ymax,l=r+(s=a)*o)}if(o>0){if(r>=this.xmax)return null;(a=(this.xmax-r)/o)<s&&(l=this.xmax,u=n+(s=a)*i)}else if(o<0){if(r<=this.xmin)return null;(a=(this.xmin-r)/o)<s&&(l=this.xmin,u=n+(s=a)*i)}return[l,u]}_edgecode(r,n){return(r===this.xmin?1:r===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(r,n){return(r<this.xmin?1:r>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}});function xdr(t){return t[0]}function vdr(t){return t[1]}function wdr(t){let{triangles:r,coords:n}=t;for(let o=0;o<r.length;o+=3){let i=2*r[o],s=2*r[o+1],a=2*r[o+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function _dr(t,r,n){return[t+Math.sin(t+r)*n,r+Math.cos(t-r)*n]}function Sdr(t,r,n,o){let i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){let l=t[a];s[a*2]=r.call(o,l,a,t),s[a*2+1]=n.call(o,l,a,t)}return s}function*Cdr(t,r,n,o){let i=0;for(let s of t)yield r.call(o,s,i,t),yield n.call(o,s,i,t),++i}var bdr,JM,yB,nct=N(()=>{"use strict";tct();k1e();I1e();rct();bdr=2*Math.PI,JM=Math.pow;yB=class t{static from(r,n=xdr,o=vdr,i){return new t("length"in r?Sdr(r,n,o,i):Float64Array.from(Cdr(r,n,o,i)))}constructor(r){this._delaunator=new gB(r),this.inedges=new Int32Array(r.length/2),this._hullIndex=new Int32Array(r.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let r=this._delaunator,n=this.points;if(r.hull&&r.hull.length>2&&wdr(r)){this.collinear=Int32Array.from({length:n.length/2},(p,h)=>h).sort((p,h)=>n[2*p]-n[2*h]||n[2*p+1]-n[2*h+1]);let u=this.collinear[0],c=this.collinear[this.collinear.length-1],f=[n[2*u],n[2*u+1],n[2*c],n[2*c+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,h=n.length/2;p<h;++p){let m=_dr(n[2*p],n[2*p+1],d);n[2*p]=m[0],n[2*p+1]=m[1]}this._delaunator=new gB(n)}else delete this.collinear;let o=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let u=0,c=o.length;u<c;++u){let f=s[u%3===2?u-2:u+1];(o[u]===-1||a[f]===-1)&&(a[f]=u)}for(let u=0,c=i.length;u<c;++u)l[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],a[i[0]]=1,i.length===2&&(a[i[1]]=0))}voronoi(r){return new XK(this,r)}*neighbors(r){let{inedges:n,hull:o,_hullIndex:i,halfedges:s,triangles:a,collinear:l}=this;if(l){let d=l.indexOf(r);d>0&&(yield l[d-1]),d<l.length-1&&(yield l[d+1]);return}let u=n[r];if(u===-1)return;let c=u,f=-1;do{if(yield f=a[c],c=c%3===2?c-2:c+1,a[c]!==r)return;if(c=s[c],c===-1){let d=o[(i[r]+1)%o.length];d!==f&&(yield d);return}}while(c!==u)}find(r,n,o=0){if(r=+r,r!==r||(n=+n,n!==n))return-1;let i=o,s;for(;(s=this._step(o,r,n))>=0&&s!==o&&s!==i;)o=s;return s}_step(r,n,o){let{inedges:i,hull:s,_hullIndex:a,halfedges:l,triangles:u,points:c}=this;if(i[r]===-1||!c.length)return(r+1)%(c.length>>1);let f=r,d=JM(n-c[r*2],2)+JM(o-c[r*2+1],2),p=i[r],h=p;do{let m=u[h],g=JM(n-c[m*2],2)+JM(o-c[m*2+1],2);if(g<d&&(d=g,f=m),h=h%3===2?h-2:h+1,u[h]!==r)break;if(h=l[h],h===-1){if(h=s[(a[r]+1)%s.length],h!==m&&JM(n-c[h*2],2)+JM(o-c[h*2+1],2)<d)return h;break}}while(h!==p);return f}render(r){let n=r==null?r=new Rm:void 0,{points:o,halfedges:i,triangles:s}=this;for(let a=0,l=i.length;a<l;++a){let u=i[a];if(u<a)continue;let c=s[a]*2,f=s[u]*2;r.moveTo(o[c],o[c+1]),r.lineTo(o[f],o[f+1])}return this.renderHull(r),n&&n.value()}renderPoints(r,n=2){let o=r==null?r=new Rm:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){let l=i[s],u=i[s+1];r.moveTo(l+n,u),r.arc(l,u,n,0,bdr)}return o&&o.value()}renderHull(r){let n=r==null?r=new Rm:void 0,{hull:o,points:i}=this,s=o[0]*2,a=o.length;r.moveTo(i[s],i[s+1]);for(let l=1;l<a;++l){let u=2*o[l];r.lineTo(i[u],i[u+1])}return r.closePath(),n&&n.value()}hullPolygon(){let r=new QT;return this.renderHull(r),r.value()}renderTriangle(r,n){let o=n==null?n=new Rm:void 0,{points:i,triangles:s}=this,a=s[r*=3]*2,l=s[r+1]*2,u=s[r+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.lineTo(i[u],i[u+1]),n.closePath(),o&&o.value()}*trianglePolygons(){let{triangles:r}=this;for(let n=0,o=r.length/3;n<o;++n)yield this.trianglePolygon(n)}trianglePolygon(r){let n=new QT;return this.renderTriangle(r,n),n.value()}}});var oct=N(()=>{"use strict";nct()});var N1e={};fn(N1e,{voronoi:()=>D1e});function D1e(t){et.call(this,null,t)}function Tdr(t){let r=t[0][0],n=t[0][1],o=t.length-1;for(;t[o][0]===r&&t[o][1]===n;--o);return"M"+t.slice(0,o+1).join("L")+"Z"}var Edr,ict=N(()=>{"use strict";tl();Ls();oct();D1e.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};Edr=[-1e5,-1e5,1e5,1e5];Dt(D1e,et,{transform(t,r){let n=t.as||"path",o=r.source;if(!o||!o.length)return r;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Edr;let s=this.value=yB.from(o,t.x,t.y).voronoi(i);for(let a=0,l=o.length;a<l;++a){let u=s.cellPolygon(a);o[a][n]=u?Tdr(u):null}return r.reflow(t.modified()).modifies(n)}})});function eF(t,r,n){return t.fields=r||[],t.fname=n,t}function Adr(t){return t.length===1?kdr(t[0]):Idr(t)}function JT(t){throw Error(t)}function Ddr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||JT("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&JT("Access path missing closing bracket: "+t),o&&JT("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Ndr(t,r,n){let o=Ddr(t);return t=o.length===1?o[0]:t,eF((n&&n.get||Adr)(o),[t],r||t)}function F1e(t){return t[t.length-1]}function sct(t){return t==null||t===""?null:+t}function O1e(t){return t!=null?M1e(t)?t:[t]:[]}function KK(t){return typeof t=="function"}function ZK(t){return KK(t)?t:()=>t}function act(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function lct(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function uct(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),act(o,n)}function R1e(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var kdr,Idr,i7o,s7o,Mdr,Fdr,a7o,l7o,M1e,QK=N(()=>{"use strict";kdr=t=>function(r){return r[t]},Idr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};i7o=Ndr("id"),s7o=eF(t=>t,[],"identity"),Mdr=eF(()=>0,[],"zero"),Fdr=eF(()=>1,[],"one"),a7o=eF(()=>!0,[],"true"),l7o=eF(()=>!1,[],"false"),M1e=Array.isArray});function Py(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var JK=N(()=>{"use strict"});function P1e(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var cct=N(()=>{"use strict"});function eA(t){let r,n,o;t.length!==2?(r=Py,n=(l,u)=>Py(t(l),u),o=(l,u)=>t(l)-u):(r=t===Py||t===P1e?t:Odr,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function Odr(){return 0}var L1e=N(()=>{"use strict";JK();cct()});function bB(t){return t===null?NaN:+t}var j1e=N(()=>{"use strict"});var fct,xB,Rdr,Pdr,Pm,dct=N(()=>{"use strict";JK();L1e();j1e();fct=eA(Py),xB=fct.right,Rdr=fct.left,Pdr=eA(bB).center,Pm=xB});function eZ(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=Ldr?10:s>=jdr?5:s>=Bdr?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?eZ(t,r,n*2):[l,u,c]}function tA(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?eZ(r,t,n):eZ(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function vB(t,r,n){return r=+r,t=+t,n=+n,eZ(t,r,n)[2]}function tF(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?vB(r,t,n):vB(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var Ldr,jdr,Bdr,pct=N(()=>{"use strict";Ldr=Math.sqrt(50),jdr=Math.sqrt(10),Bdr=Math.sqrt(2)});function B1e(t,r,n=bB){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var hct=N(()=>{"use strict";j1e()});function tZ(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var mct=N(()=>{"use strict"});var Lm=N(()=>{"use strict";dct();JK();L1e();hct();mct();pct();iL()});function ya(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Ly(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var Vd=N(()=>{"use strict"});function rA(){var t=new Z0,r=[],n=[],o=$1e;function i(s){let a=t.get(s);if(a===void 0){if(o!==$1e)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Z0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return rA(r,n).unknown(o)},ya.apply(i,arguments),i}var $1e,gct=N(()=>{"use strict";Lm();Vd();$1e=Symbol("implicit")});function z1e(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function rZ(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return z1e((n-o/r)*r,a,i,s,l)}}var nZ=N(()=>{"use strict"});function oZ(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return z1e((n-o/r)*r,i,s,a,l)}}var U1e=N(()=>{"use strict";nZ()});var rF,V1e=N(()=>{"use strict";rF=t=>()=>t});function yct(t,r){return function(n){return t+n*r}}function $dr(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function a2(t,r){var n=r-t;return n?yct(t,n>180||n<-180?n-360*Math.round(n/360):n):rF(isNaN(t)?r:t)}function bct(t){return(t=+t)==1?Qi:function(r,n){return n-r?$dr(r,n,t):rF(isNaN(r)?n:r)}}function Qi(t,r){var n=r-t;return n?yct(t,n):rF(isNaN(t)?r:t)}var nA=N(()=>{"use strict";V1e()});function xct(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=pa(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var wB,vct,wct,G1e=N(()=>{"use strict";js();nZ();U1e();nA();wB=function t(r){var n=bct(r);function o(i,s){var a=n((i=pa(i)).r,(s=pa(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Qi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);vct=xct(rZ),wct=xct(oZ)});function nF(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function iZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var sZ=N(()=>{"use strict"});function _ct(t,r){return(iZ(r)?nF:W1e)(t,r)}function W1e(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=Sf(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var q1e=N(()=>{"use strict";_B();sZ()});function aZ(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var H1e=N(()=>{"use strict"});function Nu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var SB=N(()=>{"use strict"});function lZ(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=Sf(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var Y1e=N(()=>{"use strict";_B()});function zdr(t){return function(){return t}}function Udr(t){return function(r){return t(r)+""}}function uZ(t,r){var n=K1e.lastIndex=X1e.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=K1e.exec(t))&&(i=X1e.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Nu(o,i)})),n=X1e.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?Udr(u[0].x):zdr(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var K1e,X1e,Z1e=N(()=>{"use strict";SB();K1e=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X1e=new RegExp(K1e.source,"g")});function Sf(t,r){var n=typeof r,o;return r==null||n==="boolean"?rF(r):(n==="number"?Nu:n==="string"?(o=mf(r))?(r=o,wB):uZ:r instanceof mf?wB:r instanceof Date?aZ:iZ(r)?nF:Array.isArray(r)?W1e:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?lZ:Nu)(t,r)}var _B=N(()=>{"use strict";js();G1e();q1e();H1e();SB();Y1e();Z1e();V1e();sZ()});function Sct(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var Cct=N(()=>{"use strict"});function Ect(t,r){var n=a2(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var Tct=N(()=>{"use strict";nA()});function l2(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var Act=N(()=>{"use strict"});function Q1e(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*kct,skewX:Math.atan(u)*kct,scaleX:a,scaleY:l}}var kct,cZ,Ict=N(()=>{"use strict";kct=180/Math.PI,cZ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function Dct(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?cZ:Q1e(r.a,r.b,r.c,r.d,r.e,r.f)}function Nct(t){return t==null?cZ:(fZ||(fZ=document.createElementNS("http://www.w3.org/2000/svg","g")),fZ.setAttribute("transform",t),(t=fZ.transform.baseVal.consolidate())?(t=t.matrix,Q1e(t.a,t.b,t.c,t.d,t.e,t.f)):cZ)}var fZ,Mct=N(()=>{"use strict";Ict()});function Fct(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:Nu(c,d)},{i:g-2,x:Nu(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:Nu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:Nu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:Nu(c,d)},{i:g-2,x:Nu(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var Oct,Rct,Pct=N(()=>{"use strict";SB();Mct();Oct=Fct(Dct,"px, ","px)","deg)"),Rct=Fct(Nct,", ",")",")")});function Lct(t){return((t=Math.exp(t))+1/t)/2}function Gdr(t){return((t=Math.exp(t))-1/t)/2}function Wdr(t){return((t=Math.exp(2*t))-1)/(t+1)}var Vdr,jct,Bct=N(()=>{"use strict";Vdr=1e-12;jct=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<Vdr)b=Math.log(p/c)/r,y=function(C){return[l+C*h,u+C*m,c*Math.exp(r*C*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(w*w+1)-w);b=(S-_)/r,y=function(C){var E=C*b,T=Lct(_),I=c/(n*x)*(T*Wdr(r*E+_)-Gdr(_));return[l+I*h,u+I*m,c*T/Lct(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function $ct(t){return function(r,n){var o=t((r=Od(r)).h,(n=Od(n)).h),i=Qi(r.s,n.s),s=Qi(r.l,n.l),a=Qi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var zct,Uct,Vct=N(()=>{"use strict";js();nA();zct=$ct(a2),Uct=$ct(Qi)});function J1e(t,r){var n=Qi((t=gf(t)).l,(r=gf(r)).l),o=Qi(t.a,r.a),i=Qi(t.b,r.b),s=Qi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var Gct=N(()=>{"use strict";js();nA()});function Wct(t){return function(r,n){var o=t((r=Rd(r)).h,(n=Rd(n)).h),i=Qi(r.c,n.c),s=Qi(r.l,n.l),a=Qi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var qct,Hct,Yct=N(()=>{"use strict";js();nA();qct=Wct(a2),Hct=Wct(Qi)});function Xct(t){return function r(n){n=+n;function o(i,s){var a=t((i=Up(i)).h,(s=Up(s)).h),l=Qi(i.s,s.s),u=Qi(i.l,s.l),c=Qi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var Kct,Zct,Qct=N(()=>{"use strict";js();nA();Kct=Xct(a2),Zct=Xct(Qi)});function oA(t,r){r===void 0&&(r=t,t=Sf);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var Jct=N(()=>{"use strict";_B()});function eft(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var tft=N(()=>{"use strict"});var ewe={};fn(ewe,{interpolate:()=>Sf,interpolateArray:()=>_ct,interpolateBasis:()=>rZ,interpolateBasisClosed:()=>oZ,interpolateCubehelix:()=>Kct,interpolateCubehelixLong:()=>Zct,interpolateDate:()=>aZ,interpolateDiscrete:()=>Sct,interpolateHcl:()=>qct,interpolateHclLong:()=>Hct,interpolateHsl:()=>zct,interpolateHslLong:()=>Uct,interpolateHue:()=>Ect,interpolateLab:()=>J1e,interpolateNumber:()=>Nu,interpolateNumberArray:()=>nF,interpolateObject:()=>lZ,interpolateRgb:()=>wB,interpolateRgbBasis:()=>vct,interpolateRgbBasisClosed:()=>wct,interpolateRound:()=>l2,interpolateString:()=>uZ,interpolateTransformCss:()=>Oct,interpolateTransformSvg:()=>Rct,interpolateZoom:()=>jct,piecewise:()=>oA,quantize:()=>eft});var CB=N(()=>{"use strict";_B();q1e();nZ();U1e();H1e();Cct();Tct();SB();sZ();Y1e();Act();Z1e();Pct();Bct();G1e();Vct();Gct();Yct();Qct();Jct();tft()});function twe(t){return function(){return t}}var rft=N(()=>{"use strict"});function oF(t){return+t}var rwe=N(()=>{"use strict"});function Vl(t){return t}function nwe(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:twe(isNaN(r)?NaN:.5)}function qdr(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function Hdr(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=nwe(i,o),s=n(a,s)):(o=nwe(o,i),s=n(s,a)),function(l){return s(o(l))}}function Ydr(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=nwe(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=Pm(t,l,1,o)-1;return s[u](i[u](l))}}function jy(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iA(){var t=nft,r=nft,n=Sf,o,i,s,a=Vl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Vl&&(a=qdr(t[0],t[p-1])),l=p>2?Ydr:Hdr,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),Nu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,oF),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=l2,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Vl,f()):a!==Vl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function EB(){return iA()(Vl,Vl)}var nft,u2=N(()=>{"use strict";Lm();CB();rft();rwe();nft=[0,1]});function iF(t,r,n,o){var i=tF(t,r,n),s;switch(o=jd(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=sM(i,a))&&(o.precision=s),CT(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=aM(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=iM(i))&&(o.precision=s-(o.type==="%")*2);break}}return _m(o)}var owe=N(()=>{"use strict";Lm();ET()});function Gd(t){var r=t.domain;return t.ticks=function(n){var o=r();return tA(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return iF(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=vB(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function TB(){var t=EB();return t.copy=function(){return jy(t,TB())},ya.apply(t,arguments),Gd(t)}var c2=N(()=>{"use strict";Lm();u2();Vd();owe()});function AB(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,oF),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return AB(t).unknown(r)},t=arguments.length?Array.from(t,oF):[0,1],Gd(n)}var oft=N(()=>{"use strict";c2();rwe()});function kB(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var iwe=N(()=>{"use strict"});function ift(t){return Math.log(t)}function sft(t){return Math.exp(t)}function Xdr(t){return-Math.log(-t)}function Kdr(t){return-Math.exp(-t)}function Zdr(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Qdr(t){return t===10?Zdr:t===Math.E?Math.exp:r=>Math.pow(t,r)}function Jdr(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function aft(t){return(r,n)=>-t(-r,n)}function IB(t){let r=t(ift,sft),n=r.domain,o=10,i,s;function a(){return i=Jdr(o),s=Qdr(o),n()[0]<0?(i=aft(i),s=aft(s),t(Xdr,Kdr)):t(ift,sft),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),h=i(f),m,g,y=l==null?10:+l,b=[];if(!(o%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(m=1;m<o;++m)if(g=p<0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=h;++p)for(m=o-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=tA(c,f,y))}else b=tA(p,h,Math.min(h-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=jd(u)).precision==null&&(u.trim=!0),u=_m(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(kB(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function DB(){let t=IB(iA()).domain([1,10]);return t.copy=()=>jy(t,DB()).base(t.base()),ya.apply(t,arguments),t}var dZ=N(()=>{"use strict";Lm();ET();iwe();u2();Vd()});function lft(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function uft(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function NB(t){var r=1,n=t(lft(r),uft(r));return n.constant=function(o){return arguments.length?t(lft(r=+o),uft(r)):r},Gd(n)}function MB(){var t=NB(iA());return t.copy=function(){return jy(t,MB()).constant(t.constant())},ya.apply(t,arguments)}var pZ=N(()=>{"use strict";c2();u2();Vd()});function cft(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function epr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function tpr(t){return t<0?-t*t:t*t}function FB(t){var r=t(Vl,Vl),n=1;function o(){return n===1?t(Vl,Vl):n===.5?t(epr,tpr):t(cft(n),cft(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},Gd(r)}function sF(){var t=FB(iA());return t.copy=function(){return jy(t,sF()).exponent(t.exponent())},ya.apply(t,arguments),t}function swe(){return sF.apply(null,arguments).exponent(.5)}var hZ=N(()=>{"use strict";c2();u2();Vd()});function OB(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=B1e(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[Pm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Py),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return OB().domain(t).range(r).unknown(o)},ya.apply(s,arguments)}var fft=N(()=>{"use strict";Lm();Vd()});function RB(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Pm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return RB().domain([t,r]).range(i).unknown(s)},ya.apply(Gd(a),arguments)}var dft=N(()=>{"use strict";Lm();c2();Vd()});function PB(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[Pm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return PB().domain(t).range(r).unknown(n)},ya.apply(i,arguments)}var pft=N(()=>{"use strict";Lm();Vd()});function hi(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>hi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(awe.setTime(+s),lwe.setTime(+a),t(awe),t(lwe),Math.floor(n(awe,lwe))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var awe,lwe,Pv=N(()=>{"use strict";awe=new Date,lwe=new Date});var jm,hft,uwe=N(()=>{"use strict";Pv();jm=hi(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);jm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?hi(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):jm);hft=jm.range});var Mu,mft,cwe=N(()=>{"use strict";Pv();Mu=hi(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),mft=Mu.range});var f2,rpr,d2,npr,fwe=N(()=>{"use strict";Pv();f2=hi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),rpr=f2.range,d2=hi(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),npr=d2.range});var p2,opr,h2,ipr,dwe=N(()=>{"use strict";Pv();p2=hi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),opr=p2.range,h2=hi(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),ipr=h2.range});var Bm,spr,Lv,apr,mZ,lpr,pwe=N(()=>{"use strict";Pv();Bm=hi(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),spr=Bm.range,Lv=hi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),apr=Lv.range,mZ=hi(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),lpr=mZ.range});function lA(t){return hi(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function uA(t){return hi(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var $y,yft,bft,xft,vft,wft,_ft,Sft,upr,cpr,fpr,dpr,ppr,hpr,zy,Cft,Eft,Tft,Aft,kft,Ift,Dft,mpr,gpr,ypr,bpr,xpr,vpr,hwe=N(()=>{"use strict";Pv();$y=lA(0),yft=lA(1),bft=lA(2),xft=lA(3),vft=lA(4),wft=lA(5),_ft=lA(6),Sft=$y.range,upr=yft.range,cpr=bft.range,fpr=xft.range,dpr=vft.range,ppr=wft.range,hpr=_ft.range;zy=uA(0),Cft=uA(1),Eft=uA(2),Tft=uA(3),Aft=uA(4),kft=uA(5),Ift=uA(6),Dft=zy.range,mpr=Cft.range,gpr=Eft.range,ypr=Tft.range,bpr=Aft.range,xpr=kft.range,vpr=Ift.range});var jv,wpr,Bv,_pr,mwe=N(()=>{"use strict";Pv();jv=hi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),wpr=jv.range,Bv=hi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),_pr=Bv.range});var $v,Spr,zv,Cpr,gwe=N(()=>{"use strict";Pv();$v=hi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());$v.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:hi(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});Spr=$v.range,zv=hi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:hi(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});Cpr=zv.range});function Mft(t,r,n,o,i,s){let a=[[Mu,1,1e3],[Mu,5,5*1e3],[Mu,15,15*1e3],[Mu,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=eA(([,,y])=>y).right(a,p);if(h===a.length)return t.every(tF(c/31536e6,f/31536e6,d));if(h===0)return jm.every(Math.max(tF(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var ywe,bwe,xwe,vwe,Fft=N(()=>{"use strict";Lm();uwe();cwe();fwe();dwe();pwe();hwe();mwe();gwe();[ywe,bwe]=Mft(zv,Bv,zy,mZ,h2,d2),[xwe,vwe]=Mft($v,jv,$y,Bm,p2,f2)});var gZ=N(()=>{"use strict";uwe();cwe();fwe();dwe();pwe();hwe();mwe();gwe();Fft()});function Tpr(t){return new Date(t)}function Apr(t){return t instanceof Date?+t:+new Date(+t)}function yZ(t,r,n,o,i,s,a,l,u,c){var f=EB(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(S){return(u(S)<S?h:l(S)<S?m:a(S)<S?g:s(S)<S?y:o(S)<S?i(S)<S?b:x:n(S)<S?v:w)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,Apr)):p().map(Tpr)},f.ticks=function(S){var C=p();return t(C[0],C[C.length-1],S??10)},f.tickFormat=function(S,C){return C==null?_:c(C)},f.nice=function(S){var C=p();return(!S||typeof S.range!="function")&&(S=r(C[0],C[C.length-1],S??10)),S?p(kB(C,S)):f},f.copy=function(){return jy(f,yZ(t,r,n,o,i,s,a,l,u,c))},f}function bZ(){return ya.apply(yZ(xwe,vwe,$v,jv,$y,Bm,p2,f2,Mu,R_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var wwe=N(()=>{"use strict";gZ();dM();u2();Vd();iwe()});function xZ(){return ya.apply(yZ(ywe,bwe,zv,Bv,zy,Lv,h2,d2,Mu,P_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var Oft=N(()=>{"use strict";gZ();dM();wwe();Vd()});function vZ(){var t=0,r=1,n,o,i,s,a=Vl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(Sf),c.rangeRound=f(l2),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function Uv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function aF(){var t=Gd(vZ()(Vl));return t.copy=function(){return Uv(t,aF())},Ly.apply(t,arguments)}function wZ(){var t=IB(vZ()).domain([1,10]);return t.copy=function(){return Uv(t,wZ()).base(t.base())},Ly.apply(t,arguments)}function _Z(){var t=NB(vZ());return t.copy=function(){return Uv(t,_Z()).constant(t.constant())},Ly.apply(t,arguments)}function jB(){var t=FB(vZ());return t.copy=function(){return Uv(t,jB()).exponent(t.exponent())},Ly.apply(t,arguments)}function _we(){return jB.apply(null,arguments).exponent(.5)}var Swe=N(()=>{"use strict";CB();u2();Vd();c2();dZ();pZ();hZ()});function SZ(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Vl,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=oA(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(Sf),h.rangeRound=m(l2),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function BB(){var t=Gd(SZ()(Vl));return t.copy=function(){return Uv(t,BB())},Ly.apply(t,arguments)}function CZ(){var t=IB(SZ()).domain([.1,1,10]);return t.copy=function(){return Uv(t,CZ()).base(t.base())},Ly.apply(t,arguments)}function EZ(){var t=NB(SZ());return t.copy=function(){return Uv(t,EZ()).constant(t.constant())},Ly.apply(t,arguments)}function $B(){var t=FB(SZ());return t.copy=function(){return Uv(t,$B()).exponent(t.exponent())},Ly.apply(t,arguments)}function Cwe(){return $B.apply(null,arguments).exponent(.5)}var Rft=N(()=>{"use strict";CB();u2();Vd();c2();dZ();Swe();pZ();hZ()});var Ewe=N(()=>{"use strict";oft();c2();dZ();pZ();gct();hZ();fft();dft();pft();wwe();Oft();Swe();Rft();owe()});function kwe(t){return cA.setFullYear(t),cA.setMonth(0),cA.setDate(1),cA.setHours(0,0,0,0),cA}function Npr(t){return Bm.count(kwe(t.getFullYear())-1,t)}function Pft(t){return $y.count(kwe(t.getFullYear())-1,t)}function Twe(t){return kwe(t).getDay()}function Mpr(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return Lv.count(r-1,t)}function Lft(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return zy.count(r-1,t)}function Awe(t){return cA.setTime(Date.UTC(t,0,1)),cA.getUTCDay()}function lF(t,r,n){return r+t*7-(n+6)%7}var Zp,x2,Uy,$m,m2,g2,uF,y2,b2,fA,dA,Dpr,TWo,AWo,cA,kWo,IWo,DWo,NWo,MWo,FWo,zB,UB,VB,TZ,Fpr,jft,Opr,Rpr,GB,WB,qB,Ppr,Lpr,Bft,jpr,OWo,$ft=N(()=>{"use strict";QK();gZ();Zp="year",x2="quarter",Uy="month",$m="week",m2="date",g2="day",uF="dayofyear",y2="hours",b2="minutes",fA="seconds",dA="milliseconds",Dpr=[Zp,x2,Uy,$m,m2,g2,uF,y2,b2,fA,dA],TWo=Dpr.reduce((t,r,n)=>(t[r]=1+n,t),{}),AWo={[Zp]:"%Y ",[x2]:"Q%q ",[Uy]:"%b ",[m2]:"%d ",[$m]:"W%U ",[g2]:"%a ",[uF]:"%j ",[y2]:"%H:00",[b2]:"00:%M",[fA]:":%S",[dA]:".%L",[`${Zp}-${Uy}`]:"%Y-%m ",[`${Zp}-${Uy}-${m2}`]:"%Y-%m-%d ",[`${y2}-${b2}`]:"%H:%M"},cA=new Date;kWo={[Zp]:t=>t.getFullYear(),[x2]:t=>Math.floor(t.getMonth()/3),[Uy]:t=>t.getMonth(),[m2]:t=>t.getDate(),[y2]:t=>t.getHours(),[b2]:t=>t.getMinutes(),[fA]:t=>t.getSeconds(),[dA]:t=>t.getMilliseconds(),[uF]:t=>Npr(t),[$m]:t=>Pft(t),[$m+g2]:(t,r)=>lF(Pft(t),t.getDay(),Twe(r)),[g2]:(t,r)=>lF(1,t.getDay(),Twe(r))},IWo={[x2]:t=>3*t,[$m]:(t,r)=>lF(t,0,Twe(r))},DWo={[Zp]:t=>t.getUTCFullYear(),[x2]:t=>Math.floor(t.getUTCMonth()/3),[Uy]:t=>t.getUTCMonth(),[m2]:t=>t.getUTCDate(),[y2]:t=>t.getUTCHours(),[b2]:t=>t.getUTCMinutes(),[fA]:t=>t.getUTCSeconds(),[dA]:t=>t.getUTCMilliseconds(),[uF]:t=>Mpr(t),[$m]:t=>Lft(t),[g2]:(t,r)=>lF(1,t.getUTCDay(),Awe(r)),[$m+g2]:(t,r)=>lF(Lft(t),t.getUTCDay(),Awe(r))},NWo={[x2]:t=>3*t,[$m]:(t,r)=>lF(t,0,Awe(r))},MWo={[Zp]:$v,[x2]:jv.every(3),[Uy]:jv,[$m]:$y,[m2]:Bm,[g2]:Bm,[uF]:Bm,[y2]:p2,[b2]:f2,[fA]:Mu,[dA]:jm},FWo={[Zp]:zv,[x2]:Bv.every(3),[Uy]:Bv,[$m]:zy,[m2]:Lv,[g2]:Lv,[uF]:Lv,[y2]:h2,[b2]:d2,[fA]:Mu,[dA]:jm},zB=1e3,UB=zB*60,VB=UB*60,TZ=VB*24,Fpr=TZ*7,jft=TZ*30,Opr=TZ*365,Rpr=[Zp,Uy,m2,y2,b2,fA,dA],GB=Rpr.slice(0,-1),WB=GB.slice(0,-1),qB=WB.slice(0,-1),Ppr=qB.slice(0,-1),Lpr=[Zp,$m],Bft=[Zp,Uy],jpr=[Zp],OWo=[[GB,1,zB],[GB,5,5*zB],[GB,15,15*zB],[GB,30,30*zB],[WB,1,UB],[WB,5,5*UB],[WB,15,15*UB],[WB,30,30*UB],[qB,1,VB],[qB,3,3*VB],[qB,6,6*VB],[qB,12,12*VB],[Ppr,1,TZ],[Lpr,1,Fpr],[Bft,1,jft],[Bft,3,3*jft],[jpr,1,Opr]]});function Bpr(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function Hpr(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function Ypr(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function Rwe(){let t=rA().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=Bpr(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=tZ(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,xB(h,g)-1),x=g===y?b:xB(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return Rwe().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function Gft(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Gft(r())},t}function Xpr(){return Gft(Rwe().paddingInner(1))}function Zpr(t){return Kpr.call(t,sct)}function Wft(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(Pm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=Zpr(o),n):t.slice()},n.range=function(o){return arguments.length?(r=Qpr.call(o),n):r.slice()},n.tickFormat=function(o,i){return iF(t[0],F1e(t),o??10,i)},n.copy=function(){return Wft().domain(n.domain()).range(n.range())},n}function ehr(t){return t[Jpr]=!0,t}function thr(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?Hpr(s):s.invertExtent?Ypr(s):void 0),s.type=t,ehr(s)};return o.metadata=R1e(O1e(n)),o}function Ko(t,r,n){return arguments.length>1?(Iwe.set(t,thr(t,r,n)),this):rhr(t)?Iwe.get(t):void 0}function rhr(t){return Iwe.has(t)}function nhr(t,r,n){return oA(ohr(r||"rgb",n),t)}function ohr(t,r){let n=ewe[ihr(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function ihr(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function qft(t){if(M1e(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function Hft(t,r){for(let n in t)lhr(n,r(t[n]))}function lhr(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(zft[t]=r,this):zft[t]}var $pr,Dwe,cF,Nwe,Mwe,Fwe,zpr,Upr,fF,HB,AZ,Owe,Uft,Vpr,Gpr,Wpr,qpr,cl,kZ,IZ,zm,Vft,Kpr,Qpr,Iwe,Jpr,shr,ahr,zft,qWo,HWo,Yft=N(()=>{"use strict";QK();Lm();Ewe();Ewe();CB();Yme();$ft();$pr="identity",Dwe="linear",cF="log",Nwe="pow",Mwe="sqrt",Fwe="symlog",zpr="time",Upr="utc",fF="sequential",HB="diverging",AZ="quantile",Owe="quantize",Uft="threshold",Vpr="ordinal",Gpr="point",Wpr="band",qpr="bin-ordinal",cl="continuous",kZ="discrete",IZ="discretizing",zm="interpolating",Vft="temporal";Kpr=Array.prototype.map;Qpr=Array.prototype.slice;Iwe=new Map,Jpr=Symbol("vega_scale");Ko($pr,AB);Ko(Dwe,TB,cl);Ko(cF,DB,[cl,cF]);Ko(Nwe,sF,cl);Ko(Mwe,swe,cl);Ko(Fwe,MB,cl);Ko(zpr,bZ,[cl,Vft]);Ko(Upr,xZ,[cl,Vft]);Ko(fF,aF,[cl,zm]);Ko(`${fF}-${Dwe}`,aF,[cl,zm]);Ko(`${fF}-${cF}`,wZ,[cl,zm,cF]);Ko(`${fF}-${Nwe}`,jB,[cl,zm]);Ko(`${fF}-${Mwe}`,_we,[cl,zm]);Ko(`${fF}-${Fwe}`,_Z,[cl,zm]);Ko(`${HB}-${Dwe}`,BB,[cl,zm]);Ko(`${HB}-${cF}`,CZ,[cl,zm,cF]);Ko(`${HB}-${Nwe}`,$B,[cl,zm]);Ko(`${HB}-${Mwe}`,Cwe,[cl,zm]);Ko(`${HB}-${Fwe}`,EZ,[cl,zm]);Ko(AZ,OB,[IZ,AZ]);Ko(Owe,RB,IZ);Ko(Uft,PB,IZ);Ko(qpr,Wft,[kZ,IZ]);Ko(Vpr,rA,kZ);Ko(Wpr,Rwe,kZ);Ko(Gpr,Xpr,kZ);shr={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ahr={accent:Hj,category10:qj,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Yj,observable10:Xj,paired:Kj,pastel1:Zj,pastel2:Qj,set1:Jj,set2:e4,set3:t4,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};zft={};Hft(ahr,qft);Hft(shr,t=>nhr(qft(t)));qWo={[AZ]:"quantiles",[Owe]:"thresholds",[Uft]:"domain"},HWo={[AZ]:"quantiles",[Owe]:"domain"}});var Xft,XWo,KWo,Kft=N(()=>{"use strict";Xft=Math.random,XWo=Math.sqrt(2*Math.PI),KWo=.5*Math.PI/180});var jwe={};fn(jwe,{wordcloud:()=>Lwe});function uhr(){var t=[256,256],r,n,o,i,s,a,l,u=Zft,c=[],f=Math.random,d={};d.layout=function(){for(var m=p(ff()),g=mhr((t[0]>>5)*t[1]),y=null,b=c.length,x=-1,v=[],w=c.map(S=>({text:r(S),font:n(S),style:i(S),weight:s(S),rotate:a(S),size:~~(o(S)+1e-14),padding:l(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,C)=>C.size-S.size);++x<b;){var _=w[x];_.x=t[0]*(f()+.5)>>1,_.y=t[1]*(f()+.5)>>1,chr(m,_,w,x),_.hasText&&h(g,_,y)&&(v.push(_),y?dhr(y,_):y=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=t[0]>>1,_.y-=t[1]>>1)}return v};function p(m){m.width=m.height=1;var g=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(YB<<5)/g,m.height=DZ/g;var y=m.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(m,g,y){for(var b=g.x,x=g.y,v=Math.sqrt(t[0]*t[0]+t[1]*t[1]),w=u(t),_=f()<.5?1:-1,S=-_,C,E,T;(C=w(S+=_))&&(E=~~C[0],T=~~C[1],!(Math.min(Math.abs(E),Math.abs(T))>=v));)if(g.x=b+E,g.y=x+T,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!y||!fhr(g,m,t[0]))&&(!y||phr(g,y))){for(var I=g.sprite,k=g.width>>5,F=t[0]>>5,D=g.x-(k<<4),L=D&127,P=32-L,R=g.y1-g.y0,V=(g.y+g.y0)*F+(D>>5),G,U=0;U<R;U++){G=0;for(var H=0;H<=k;H++)m[V+H]|=G<<P|(H<k?(G=I[U*k+H])>>>L:0);V+=F}return g.sprite=null,!0}return!1}return d.words=function(m){return arguments.length?(c=m,d):c},d.size=function(m){return arguments.length?(t=[+m[0],+m[1]],d):t},d.font=function(m){return arguments.length?(n=pA(m),d):n},d.fontStyle=function(m){return arguments.length?(i=pA(m),d):i},d.fontWeight=function(m){return arguments.length?(s=pA(m),d):s},d.rotate=function(m){return arguments.length?(a=pA(m),d):a},d.text=function(m){return arguments.length?(r=pA(m),d):r},d.spiral=function(m){return arguments.length?(u=ghr[m]||m,d):u},d.fontSize=function(m){return arguments.length?(o=pA(m),d):o},d.padding=function(m){return arguments.length?(l=pA(m),d):l},d.random=function(m){return arguments.length?(f=m,d):f},d}function chr(t,r,n,o){if(!r.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(YB<<5)/s,DZ/s);var a=0,l=0,u=0,c=n.length,f,d,p,h,m;for(--o;++o<c;){if(r=n[o],i.save(),i.font=r.style+" "+r.weight+" "+~~((r.size+1)/s)+"px "+r.font,f=i.measureText(r.text+"m").width*s,p=r.size<<1,r.rotate){var g=Math.sin(r.rotate*Pwe),y=Math.cos(r.rotate*Pwe),b=f*y,x=f*g,v=p*y,w=p*g;f=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,p=~~Math.max(Math.abs(x+v),Math.abs(x-v))}else f=f+31>>5<<5;if(p>u&&(u=p),a+f>=YB<<5&&(a=0,l+=u,u=0),l+p>=DZ)break;i.translate((a+(f>>1))/s,(l+(p>>1))/s),r.rotate&&i.rotate(r.rotate*Pwe),i.fillText(r.text,0,0),r.padding&&(i.lineWidth=2*r.padding,i.strokeText(r.text,0,0)),i.restore(),r.width=f,r.height=p,r.xoff=a,r.yoff=l,r.x1=f>>1,r.y1=p>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,a+=f}for(var _=i.getImageData(0,0,(YB<<5)/s,DZ/s).data,S=[];--o>=0;)if(r=n[o],!!r.hasText){for(f=r.width,d=f>>5,p=r.y1-r.y0,h=0;h<p*d;h++)S[h]=0;if(a=r.xoff,a==null)return;l=r.yoff;var C=0,E=-1;for(m=0;m<p;m++){for(h=0;h<f;h++){var T=d*m+(h>>5),I=_[(l+m)*(YB<<5)+(a+h)<<2]?1<<31-h%32:0;S[T]|=I,C|=I}C?E=m:(r.y0++,p--,m--,l++)}r.y1=r.y0+E,r.sprite=S.slice(0,(r.y1-r.y0)*d)}}}function fhr(t,r,n){n>>=5;for(var o=t.sprite,i=t.width>>5,s=t.x-(i<<4),a=s&127,l=32-a,u=t.y1-t.y0,c=(t.y+t.y0)*n+(s>>5),f,d=0;d<u;d++){f=0;for(var p=0;p<=i;p++)if((f<<l|(p<i?(f=o[d*i+p])>>>a:0))&r[c+p])return!0;c+=n}return!1}function dhr(t,r){var n=t[0],o=t[1];r.x+r.x0<n.x&&(n.x=r.x+r.x0),r.y+r.y0<n.y&&(n.y=r.y+r.y0),r.x+r.x1>o.x&&(o.x=r.x+r.x1),r.y+r.y1>o.y&&(o.y=r.y+r.y1)}function phr(t,r){return t.x+t.x1>r[0].x&&t.x+t.x0<r[1].x&&t.y+t.y1>r[0].y&&t.y+t.y0<r[1].y}function Zft(t){var r=t[0]/t[1];return function(n){return[r*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function hhr(t){var r=4,n=r*t[0]/t[1],o=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:o+=n;break;case 1:i+=r;break;case 2:o-=n;break;default:i-=r;break}return[o,i]}}function mhr(t){for(var r=[],n=-1;++n<t;)r[n]=0;return r}function pA(t){return typeof t=="function"?t:function(){return t}}function Lwe(t){et.call(this,uhr(),t)}var Pwe,YB,DZ,ghr,Qft,yhr,Jft=N(()=>{"use strict";kN();tl();QK();Yft();Kft();Pwe=Math.PI/180,YB=64,DZ=2048;ghr={archimedean:Zft,rectangular:hhr},Qft=["x","y","font","fontSize","fontStyle","fontWeight","angle"],yhr=["text","font","rotate","fontSize","fontStyle","fontWeight"];Lwe.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Qft}]};uct(Lwe,et,{transform(t,r){t.size&&!(t.size[0]&&t.size[1])&&JT("Wordcloud size dimensions must be non-zero.");function n(m){let g=t[m];return KK(g)&&r.modified(g.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||yhr.some(n)))return;let i=r.materialize(r.SOURCE).source,s=this.value,a=t.as||Qft,l=t.fontSize||14,u;if(KK(l)?u=t.fontSizeRange:l=ZK(l),u){let m=l,g=Ko("sqrt")().domain(lct(i,m)).range(u);l=y=>g(m(y))}i.forEach(m=>{m[a[0]]=NaN,m[a[1]]=NaN,m[a[3]]=0});let c=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(l).random(Xft).layout(),f=s.size(),d=f[0]>>1,p=f[1]>>1,h=c.length;for(let m=0,g,y;m<h;++m)g=c[m],y=g.datum,y[a[0]]=g.x+d,y[a[1]]=g.y+p,y[a[2]]=g.font,y[a[3]]=g.size,y[a[4]]=g.style,y[a[5]]=g.weight,y[a[6]]=g.rotate;return r.reflow(o).modifies(a)}})});var zwe={};fn(zwe,{crossfilter:()=>Bwe,resolvefilter:()=>$we});function vhr(){let t=8,r=[],n=XB(0),o=NZ(0,t),i=NZ(0,t);return{data:()=>r,seen:()=>n=whr(n,r.length),add(s){for(let a=0,l=r.length,u=s.length,c;a<u;++a)c=s[a],c._index=l++,r.push(c)},remove(s,a){let l=r.length,u=Array(l-s),c=r,f,d,p;for(d=0;!a[d]&&d<l;++d)u[d]=r[d],c[d]=d;for(p=d;d<l;++d)f=r[d],a[d]?c[d]=-1:(c[d]=p,o[p]=o[d],i[p]=i[d],u[p]=f,f._index=p++),o[d]=0;return r=u,c},size:()=>r.length,curr:()=>o,prev:()=>i,reset:s=>i[s]=o[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,a){o[s]|=a},clear(s,a){o[s]&=~a},resize(s,a){let l=o.length;(s>l||a>t)&&(t=Math.max(a,t),o=NZ(s,t,o),i=NZ(s,t))}}}function whr(t,r,n){return t.length>=r?t:(n=n||new t.constructor(r),n.set(t),n)}function NZ(t,r,n){let o=(r<257?bhr:r<65537?xhr:XB)(t);return n&&o.set(n),o}function edt(t,r,n){let o=1<<r;return{one:o,zero:~o,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(i,s){let a=this,l=a.bisect(a.range,i.value),u=i.index,c=l[0],f=l[1],d=u.length,p;for(p=0;p<c;++p)s[u[p]]|=o;for(p=f;p<d;++p)s[u[p]]|=o;return a}}}function tdt(){let t=XB(0),r=[],n=0;function o(l,u,c){if(!u.length)return[];let f=n,d=u.length,p=XB(d),h=Array(d),m,g,y;for(y=0;y<d;++y)h[y]=l(u[y]),p[y]=y;if(h=_hr(h,p),f)m=r,g=t,r=Array(f+d),t=XB(f+d),Shr(c,m,g,f,h,p,d,r,t);else{if(c>0)for(y=0;y<d;++y)p[y]+=c;r=h,t=p}return n=f+d,{index:p,value:h}}function i(l,u){let c=n,f,d,p;for(d=0;!u[t[d]]&&d<c;++d);for(p=d;d<c;++d)u[f=t[d]]||(t[p]=f,r[p]=r[d],++p);n=c-l}function s(l){for(let u=0,c=n;u<c;++u)t[u]=l[t[u]]}function a(l,u){let c;return u?c=u.length:(u=r,c=n),[Kfe(u,l[0],0,c),RE(u,l[1],0,c)]}return{insert:o,remove:i,bisect:a,reindex:s,index:()=>t,size:()=>n}}function _hr(t,r){return t.sort.call(r,(n,o)=>{let i=t[n],s=t[o];return i<s?-1:i>s?1:0}),Qfe(t,r)}function Shr(t,r,n,o,i,s,a,l,u){let c=0,f=0,d;for(d=0;c<o&&f<a;++d)r[c]<i[f]?(l[d]=r[c],u[d]=n[c++]):(l[d]=i[f],u[d]=s[f++]+t);for(;c<o;++c,++d)l[d]=r[c],u[d]=n[c];for(;f<a;++f,++d)l[d]=i[f],u[d]=s[f]+t}function Bwe(t){et.call(this,vhr(),t),this._indices=null,this._dims=null}function $we(t){et.call(this,null,t)}var bhr,xhr,XB,rdt=N(()=>{"use strict";qo();tl();Ls();bhr=t=>new Uint8Array(t),xhr=t=>new Uint16Array(t),XB=t=>new Uint32Array(t);Bwe.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Dt(Bwe,et,{transform(t,r){if(this._dims){var n=t.modified("fields")||t.fields.some(o=>r.modified(o.fields));return n?this.reinit(t,r):this.eval(t,r)}else return this.init(t,r)},init(t,r){let n=t.fields,o=t.query,i=this._indices={},s=this._dims=[],a=o.length,l=0,u,c;for(;l<a;++l)u=n[l].fname,c=i[u]||(i[u]=tdt()),s.push(edt(c,l,o[l]));return this.eval(t,r)},reinit(t,r){let n=r.materialize().fork(),o=t.fields,i=t.query,s=this._indices,a=this._dims,l=this.value,u=l.curr(),c=l.prev(),f=l.all(),d=n.rem=n.add,p=n.mod,h=i.length,m={},g,y,b,x,v,w,_,S,C;if(c.set(u),r.rem.length&&(v=this.remove(t,r,n)),r.add.length&&l.add(r.add),r.mod.length)for(w={},x=r.mod,_=0,S=x.length;_<S;++_)w[x[_]._index]=1;for(_=0;_<h;++_)C=o[_],(!a[_]||t.modified("fields",_)||r.modified(C.fields))&&(b=C.fname,(g=m[b])||(s[b]=y=tdt(),m[b]=g=y.insert(C,r.source,0)),a[_]=edt(y,_,i[_]).onAdd(g,u));for(_=0,S=l.data().length;_<S;++_)v[_]||(c[_]!==u[_]?d.push(_):w[_]&&u[_]!==f&&p.push(_));return l.mask=(1<<h)-1,n},eval(t,r){let n=r.materialize().fork(),o=this._dims.length,i=0;return r.rem.length&&(this.remove(t,r,n),i|=(1<<o)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,r,n)),r.add.length&&(this.insert(t,r,n),i|=(1<<o)-1),r.mod.length&&(this.modify(r,n),i|=(1<<o)-1),this.value.mask=i,n},insert(t,r,n){let o=r.add,i=this.value,s=this._dims,a=this._indices,l=t.fields,u={},c=n.add,f=i.size()+o.length,d=s.length,p=i.size(),h,m,g;i.resize(f,d),i.add(o);let y=i.curr(),b=i.prev(),x=i.all();for(h=0;h<d;++h)m=l[h].fname,g=u[m]||(u[m]=a[m].insert(l[h],o,p)),s[h].onAdd(g,y);for(;p<f;++p)b[p]=x,y[p]!==x&&c.push(p)},modify(t,r){let n=r.mod,o=this.value,i=o.curr(),s=o.all(),a=t.mod,l,u,c;for(l=0,u=a.length;l<u;++l)c=a[l]._index,i[c]!==s&&n.push(c)},remove(t,r,n){let o=this._indices,i=this.value,s=i.curr(),a=i.prev(),l=i.all(),u={},c=n.rem,f=r.rem,d,p,h,m;for(d=0,p=f.length;d<p;++d)h=f[d]._index,u[h]=1,a[h]=m=s[h],s[h]=l,m!==l&&c.push(h);for(h in o)o[h].remove(p,u);return this.reindex(r,p,u),u},reindex(t,r,n){let o=this._indices,i=this.value;t.runAfter(()=>{let s=i.remove(r,n);for(let a in o)o[a].reindex(s)})},update(t,r,n){let o=this._dims,i=t.query,s=r.stamp,a=o.length,l=0,u,c;for(n.filters=0,c=0;c<a;++c)t.modified("query",c)&&(u=c,++l);if(l===1)l=o[u].one,this.incrementOne(o[u],i[u],n.add,n.rem);else for(c=0,l=0;c<a;++c)t.modified("query",c)&&(l|=o[c].one,this.incrementAll(o[c],i[c],s,n.add),n.rem=n.add);return l},incrementAll(t,r,n,o){let i=this.value,s=i.seen(),a=i.curr(),l=i.prev(),u=t.index(),c=t.bisect(t.range),f=t.bisect(r),d=f[0],p=f[1],h=c[0],m=c[1],g=t.one,y,b,x;if(d<h)for(y=d,b=Math.min(h,p);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(d>h)for(y=h,b=Math.min(d,m);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;if(p>m)for(y=Math.max(d,m),b=p;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(p<m)for(y=Math.max(h,p),b=m;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;t.range=r.slice()},incrementOne(t,r,n,o){let i=this.value,s=i.curr(),a=t.index(),l=t.bisect(t.range),u=t.bisect(r),c=u[0],f=u[1],d=l[0],p=l[1],h=t.one,m,g,y;if(c<d)for(m=c,g=Math.min(d,f);m<g;++m)y=a[m],s[y]^=h,n.push(y);else if(c>d)for(m=d,g=Math.min(c,p);m<g;++m)y=a[m],s[y]^=h,o.push(y);if(f>p)for(m=Math.max(c,p),g=f;m<g;++m)y=a[m],s[y]^=h,n.push(y);else if(f<p)for(m=Math.max(d,f),g=p;m<g;++m)y=a[m],s[y]^=h,o.push(y);t.range=r.slice()}});$we.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Dt($we,et,{transform(t,r){let n=~(t.ignore||0),o=t.filter,i=o.mask;if(!(i&n))return r.StopPropagation;let s=r.fork(r.ALL),a=o.data(),l=o.curr(),u=o.prev(),c=f=>l[f]&n?null:a[f];return s.filter(s.MOD,c),i&i-1?(s.filter(s.ADD,f=>{let d=l[f]&n;return!d&&d^u[f]&n?a[f]:null}),s.filter(s.REM,f=>{let d=l[f]&n;return d&&!(d^(d^u[f]&n))?a[f]:null})):(s.filter(s.ADD,c),s.filter(s.REM,f=>(l[f]&n)===i?a[f]:null)),s.filter(s.SOURCE,f=>c(f._index))}})});function dF(t,r,n){return t.fields=r||[],t.fname=n,t}function Chr(t){return t.length===1?Ehr(t[0]):Thr(t)}function fl(t){throw Error(t)}function Ahr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||fl("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&fl("Access path missing closing bracket: "+t),o&&fl("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Uwe(t,r,n){let o=Ahr(t);return t=o.length===1?o[0]:t,dF((n&&n.get||Chr)(o),[t],r||t)}function KB(t){return t===Object(t)}function Vv(t){return t[t.length-1]}function RZ(t){return t==null||t===""?null:+t}function PZ(t,r,n,o){let i=n(t[0]),s=n(Vv(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function adt(t,r){return PZ(t,r,RZ,OZ)}function ldt(t,r){var n=Math.sign(t[0]);return PZ(t,r,odt(n),ndt(n))}function udt(t,r,n){return PZ(t,r,FZ(n),FZ(1/n))}function cdt(t,r,n){return PZ(t,r,idt(n),sdt(n))}function LZ(t,r,n,o,i){let s=o(t[0]),a=o(Vv(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function fdt(t,r,n){return LZ(t,r,n,RZ,OZ)}function ddt(t,r,n){let o=Math.sign(t[0]);return LZ(t,r,n,odt(o),ndt(o))}function pdt(t,r,n,o){return LZ(t,r,n,FZ(o),FZ(1/o))}function hdt(t,r,n,o){return LZ(t,r,n,idt(o),sdt(o))}function mdt(t){return 1+~~(new Date(t).getMonth()/3)}function gdt(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Gwe(t){return t!=null?Vy(t)?t:[t]:[]}function ydt(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function pF(t){return typeof t=="function"}function jZ(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function bdt(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Gy(t,r){return khr.call(t,r)}function xdt(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=Vv(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function vdt(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function wdt(t){return typeof t=="boolean"}function Wwe(t){return Object.prototype.toString.call(t)==="[object Date]"}function qwe(t){return typeof t=="number"}function _dt(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function v2(t){return typeof t=="string"}function Sdt(t,r){let n=t[0],o=Vv(t),i=+r;return i?i===1?o:n+i*(o-n):n}function MZ(t,r){let n="";for(;--r>=0;)n+=t;return n}function Cdt(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?MZ(i,a)+s:o==="center"?MZ(i,~~(a/2))+s+MZ(i,Math.ceil(a/2)):s+MZ(i,a)}function Edt(t){return t&&Vv(t)-t[0]||0}function hF(t){return Vy(t)?"["+t.map(hF)+"]":KB(t)||v2(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Tdt(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function Adt(t,r){return r=r||Ihr,t==null||t===""?null:r(t)}function kdt(t){return t==null||t===""?null:t+""}function Hwe(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function Idt(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}var Ehr,Thr,sqo,OZ,aqo,lqo,Vwe,uqo,Vy,ndt,odt,idt,sdt,FZ,khr,Ihr,Ywe=N(()=>{"use strict";Ehr=t=>function(r){return r[t]},Thr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};sqo=Uwe("id"),OZ=dF(t=>t,[],"identity"),aqo=dF(()=>0,[],"zero"),lqo=dF(()=>1,[],"one"),Vwe=dF(()=>!0,[],"true"),uqo=dF(()=>!1,[],"false"),Vy=Array.isArray;ndt=t=>r=>t*Math.exp(r),odt=t=>r=>Math.log(t*r),idt=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),sdt=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,FZ=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);khr=Object.prototype.hasOwnProperty;Ihr=t=>qwe(t)||Wwe(t)?t:Date.parse(t)});function Um(t){this.type=t}function $hr(t){switch(t.type){case Fhr:return t.elements;case Ohr:case Phr:return[t.left,t.right];case e_e:return[t.callee].concat(t.arguments);case Rhr:return[t.test,t.consequent,t.alternate];case Lhr:return[t.object,t.property];case jhr:return t.properties;case Nhr:return[t.key,t.value];case Bhr:return[t.argument];case Mhr:case gA:case Dhr:default:return[]}}function VZ(t,r){if(!t)throw new Error("ASSERT: "+r)}function Gv(t){return t>=48&&t<=57}function t_e(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function QB(t){return"01234567".indexOf(t)>=0}function smr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function e$(t){return t===10||t===13||t===8232||t===8233}function n$(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&omr.test(String.fromCharCode(t))}function $Z(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&imr.test(String.fromCharCode(t))}function Bdt(){for(;ct<Fu;){let t=mr.charCodeAt(ct);if(smr(t)||e$(t))++ct;else break}}function Jwe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ct<Fu&&t_e(mr[ct])?(o=mr[ct++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):fo({},dl,Gl);return String.fromCharCode(i)}function lmr(){var t,r,n,o;for(t=mr[ct],r=0,t==="}"&&fo({},dl,Gl);ct<Fu&&(t=mr[ct++],!!t_e(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&fo({},dl,Gl),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function $dt(){var t,r;for(t=mr.charCodeAt(ct++),r=String.fromCharCode(t),t===92&&(mr.charCodeAt(ct)!==117&&fo({},dl,Gl),++ct,t=Jwe("u"),(!t||t==="\\"||!n$(t.charCodeAt(0)))&&fo({},dl,Gl),r=t);ct<Fu&&(t=mr.charCodeAt(ct),!!$Z(t));)++ct,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),mr.charCodeAt(ct)!==117&&fo({},dl,Gl),++ct,t=Jwe("u"),(!t||t==="\\"||!$Z(t.charCodeAt(0)))&&fo({},dl,Gl),r+=t);return r}function umr(){var t,r;for(t=ct++;ct<Fu;){if(r=mr.charCodeAt(ct),r===92)return ct=t,$dt();if($Z(r))++ct;else break}return mr.slice(t,ct)}function cmr(){var t,r,n;return t=ct,r=mr.charCodeAt(ct)===92?$dt():umr(),r.length===1?n=hA:amr.hasOwnProperty(r)?n=w2:r==="null"?n=UZ:r==="true"||r==="false"?n=zZ:n=hA,{type:n,value:r,start:t,end:ct}}function Kwe(){var t=ct,r=mr.charCodeAt(ct),n,o=mr[ct],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ct,{type:Cf,value:String.fromCharCode(r),start:t,end:ct};default:if(n=mr.charCodeAt(ct+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ct+=2,{type:Cf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ct};case 33:case 61:return ct+=2,mr.charCodeAt(ct)===61&&++ct,{type:Cf,value:mr.slice(t,ct),start:t,end:ct}}}if(a=mr.substr(ct,4),a===">>>=")return ct+=4,{type:Cf,value:a,start:t,end:ct};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ct+=3,{type:Cf,value:s,start:t,end:ct};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ct+=2,{type:Cf,value:i,start:t,end:ct};if(i==="//"&&fo({},dl,Gl),"<>=!+-*%&|^/".indexOf(o)>=0)return++ct,{type:Cf,value:o,start:t,end:ct};fo({},dl,Gl)}function fmr(t){let r="";for(;ct<Fu&&t_e(mr[ct]);)r+=mr[ct++];return r.length===0&&fo({},dl,Gl),n$(mr.charCodeAt(ct))&&fo({},dl,Gl),{type:yA,value:parseInt("0x"+r,16),start:t,end:ct}}function dmr(t){let r="0"+mr[ct++];for(;ct<Fu&&QB(mr[ct]);)r+=mr[ct++];return(n$(mr.charCodeAt(ct))||Gv(mr.charCodeAt(ct)))&&fo({},dl,Gl),{type:yA,value:parseInt(r,8),octal:!0,start:t,end:ct}}function Ddt(){var t,r,n;if(n=mr[ct],VZ(Gv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ct,t="",n!=="."){if(t=mr[ct++],n=mr[ct],t==="0"){if(n==="x"||n==="X")return++ct,fmr(r);if(QB(n))return dmr(r);n&&Gv(n.charCodeAt(0))&&fo({},dl,Gl)}for(;Gv(mr.charCodeAt(ct));)t+=mr[ct++];n=mr[ct]}if(n==="."){for(t+=mr[ct++];Gv(mr.charCodeAt(ct));)t+=mr[ct++];n=mr[ct]}if(n==="e"||n==="E")if(t+=mr[ct++],n=mr[ct],(n==="+"||n==="-")&&(t+=mr[ct++]),Gv(mr.charCodeAt(ct)))for(;Gv(mr.charCodeAt(ct));)t+=mr[ct++];else fo({},dl,Gl);return n$(mr.charCodeAt(ct))&&fo({},dl,Gl),{type:yA,value:parseFloat(t),start:r,end:ct}}function pmr(){var t="",r,n,o,i,s=!1;for(r=mr[ct],VZ(r==="'"||r==='"',"String literal must starts with a quote"),n=ct,++ct;ct<Fu;)if(o=mr[ct++],o===r){r="";break}else if(o==="\\")if(o=mr[ct++],!o||!e$(o.charCodeAt(0)))switch(o){case"u":case"x":mr[ct]==="{"?(++ct,t+=lmr()):t+=Jwe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:QB(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ct<Fu&&QB(mr[ct])&&(s=!0,i=i*8+"01234567".indexOf(mr[ct++]),"0123".indexOf(o)>=0&&ct<Fu&&QB(mr[ct])&&(i=i*8+"01234567".indexOf(mr[ct++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&mr[ct]===`
`&&++ct;else{if(e$(o.charCodeAt(0)))break;t+=o}return r!==""&&fo({},dl,Gl),{type:r$,value:t,octal:s,start:n,end:ct}}function hmr(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";fo({},Qwe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{fo({},Qwe)}try{return new RegExp(t,r)}catch{return null}}function mmr(){var t,r,n,o,i;for(t=mr[ct],VZ(t==="/","Regular expression literal must start with a slash"),r=mr[ct++],n=!1,o=!1;ct<Fu;)if(t=mr[ct++],r+=t,t==="\\")t=mr[ct++],e$(t.charCodeAt(0))&&fo({},Xwe),r+=t;else if(e$(t.charCodeAt(0)))fo({},Xwe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||fo({},Xwe),i=r.substr(1,r.length-2),{value:i,literal:r}}function gmr(){var t,r,n;for(r="",n="";ct<Fu&&(t=mr[ct],!!$Z(t.charCodeAt(0)));)++ct,t==="\\"&&ct<Fu?fo({},dl,Gl):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&fo({},Qwe,n),{value:n,literal:r}}function ymr(){var t,r,n,o;return Oo=null,Bdt(),t=ct,r=mmr(),n=gmr(),o=hmr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ct}}function bmr(t){return t.type===hA||t.type===w2||t.type===zZ||t.type===UZ}function zdt(){if(Bdt(),ct>=Fu)return{type:t$,start:ct,end:ct};let t=mr.charCodeAt(ct);return n$(t)?cmr():t===40||t===41||t===59?Kwe():t===39||t===34?pmr():t===46?Gv(mr.charCodeAt(ct+1))?Ddt():Kwe():Gv(t)?Ddt():Kwe()}function Ef(){let t=Oo;return ct=t.end,Oo=zdt(),ct=t.end,t}function Udt(){let t=ct;Oo=zdt(),ct=t}function xmr(t){let r=new Um(Uhr);return r.elements=t,r}function Ndt(t,r,n){let o=new Um(t==="||"||t==="&&"?Hhr:Vhr);return o.operator=t,o.left=r,o.right=n,o}function vmr(t,r){let n=new Um(Ghr);return n.callee=t,n.arguments=r,n}function wmr(t,r,n){let o=new Um(Whr);return o.test=t,o.consequent=r,o.alternate=n,o}function r_e(t){let r=new Um(Ldt);return r.name=t,r}function ZB(t){let r=new Um(qhr);return r.value=t.value,r.raw=mr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function Mdt(t,r,n){let o=new Um(Yhr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function _mr(t){let r=new Um(Xhr);return r.properties=t,r}function Fdt(t,r,n){let o=new Um(Khr);return o.key=r,o.value=n,o.kind=t,o}function Smr(t,r){let n=new Um(Zhr);return n.operator=t,n.argument=r,n.prefix=!0,n}function fo(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(VZ(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ct,n.description=i,n}function GZ(t){t.type===t$&&fo(t,rmr),t.type===yA&&fo(t,Qhr),t.type===r$&&fo(t,Jhr),t.type===hA&&fo(t,emr),t.type===w2&&fo(t,tmr),fo(t,dl,t.value)}function Ou(t){let r=Ef();(r.type!==Cf||r.value!==t)&&GZ(r)}function $i(t){return Oo.type===Cf&&Oo.value===t}function Zwe(t){return Oo.type===w2&&Oo.value===t}function Cmr(){let t=[];for(ct=Oo.start,Ou("[");!$i("]");)$i(",")?(Ef(),t.push(null)):(t.push(mA()),$i("]")||Ou(","));return Ef(),xmr(t)}function Odt(){ct=Oo.start;let t=Ef();return t.type===r$||t.type===yA?(t.octal&&fo(t,jdt),ZB(t)):r_e(t.value)}function Emr(){var t,r,n,o;if(ct=Oo.start,t=Oo,t.type===hA)return n=Odt(),Ou(":"),o=mA(),Fdt("init",n,o);if(t.type===t$||t.type===Cf)GZ(t);else return r=Odt(),Ou(":"),o=mA(),Fdt("init",r,o)}function Tmr(){var t=[],r,n,o,i={},s=String;for(ct=Oo.start,Ou("{");!$i("}");)r=Emr(),r.key.type===Ldt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?fo({},nmr):i[o]=!0,t.push(r),$i("}")||Ou(",");return Ou("}"),_mr(t)}function Amr(){Ou("(");let t=n_e();return Ou(")"),t}function Imr(){var t,r,n;if($i("("))return Amr();if($i("["))return Cmr();if($i("{"))return Tmr();if(t=Oo.type,ct=Oo.start,t===hA||kmr[Oo.value])n=r_e(Ef().value);else if(t===r$||t===yA)Oo.octal&&fo(Oo,jdt),n=ZB(Ef());else{if(t===w2)throw new Error(JB);t===zZ?(r=Ef(),r.value=r.value==="true",n=ZB(r)):t===UZ?(r=Ef(),r.value=null,n=ZB(r)):$i("/")||$i("/=")?(n=ZB(ymr()),Udt()):GZ(Ef())}return n}function Dmr(){let t=[];if(Ou("("),!$i(")"))for(;ct<Fu&&(t.push(mA()),!$i(")"));)Ou(",");return Ou(")"),t}function Nmr(){ct=Oo.start;let t=Ef();return bmr(t)||GZ(t),r_e(t.value)}function Mmr(){return Ou("."),Nmr()}function Fmr(){Ou("[");let t=n_e();return Ou("]"),t}function Omr(){var t,r,n;for(t=Imr();;)if($i("."))n=Mmr(),t=Mdt(".",t,n);else if($i("("))r=Dmr(),t=vmr(t,r);else if($i("["))n=Fmr(),t=Mdt("[",t,n);else break;return t}function Rdt(){let t=Omr();if(Oo.type===Cf&&($i("++")||$i("--")))throw new Error(JB);return t}function BZ(){var t,r;if(Oo.type!==Cf&&Oo.type!==w2)r=Rdt();else{if($i("++")||$i("--"))throw new Error(JB);if($i("+")||$i("-")||$i("~")||$i("!"))t=Ef(),r=BZ(),r=Smr(t.value,r);else{if(Zwe("delete")||Zwe("void")||Zwe("typeof"))throw new Error(JB);r=Rdt()}}return r}function Pdt(t){let r=0;if(t.type!==Cf&&t.type!==w2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function Rmr(){var t,r,n,o,i,s,a,l,u,c;if(t=Oo,u=BZ(),o=Oo,i=Pdt(o),i===0)return u;for(o.prec=i,Ef(),r=[t,Oo],a=BZ(),s=[u,o,a];(i=Pdt(Oo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=Ndt(l,u,a),s.push(n);o=Ef(),o.prec=i,s.push(o),r.push(Oo),n=BZ(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=Ndt(s[c-1].value,s[c-2],n),c-=2;return n}function mA(){var t,r,n;return t=Rmr(),$i("?")&&(Ef(),r=mA(),Ou(":"),n=mA(),t=wmr(t,r,n)),t}function n_e(){let t=mA();if($i(","))throw new Error(JB);return t}function Vdt(t){mr=t,ct=0,Fu=mr.length,Oo=null,Udt();let r=n_e();if(Oo.type!==t$)throw new Error("Unexpect token after expression.");return r}function i_e(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&fl("Missing arguments to clamp function."),a.length>3&&fl("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&fl("Missing arguments to if function."),a.length>3&&fl("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function Pmr(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function Gdt(t){t=t||{};let r=t.allowed?Hwe(t.allowed):{},n=t.forbidden?Hwe(t.forbidden):{},o=t.constants||o_e,i=(t.functions||i_e)(d),s=t.globalvar,a=t.fieldvar,l=pF(s)?s:m=>`${s}["${m}"]`,u={},c={},f=0;function d(m){if(v2(m))return m;let g=p[m.type];return g==null&&fl("Unsupported type: "+m.type),g(m)}let p={Literal:m=>m.raw,Identifier:m=>{let g=m.name;return f>0?g:Gy(n,g)?fl("Illegal identifier: "+g):Gy(o,g)?o[g]:Gy(r,g)?g:(u[g]=1,l(g))},MemberExpression:m=>{let g=!m.computed,y=d(m.object);g&&(f+=1);let b=d(m.property);return y===a&&(c[Pmr(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&fl("Illegal callee type: "+m.callee.type);let g=m.callee.name,y=m.arguments,b=Gy(i,g)&&i[g];return b||fl("Unrecognized function: "+g),pF(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{f+=1;let g=d(m.key);return f-=1,g+":"+d(m.value)}};function h(m){let g={code:d(m),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return h.functions=i,h.constants=o,h}var Dhr,gA,Nhr,Mhr,Fhr,Ohr,e_e,Rhr,Phr,Lhr,jhr,Bhr,Wy,mr,ct,Fu,Oo,zZ,t$,hA,w2,UZ,yA,Cf,r$,zhr,Uhr,Vhr,Ghr,Whr,Ldt,qhr,Hhr,Yhr,Xhr,Khr,Zhr,dl,Qhr,Jhr,emr,tmr,rmr,Qwe,Xwe,jdt,nmr,Gl,JB,omr,imr,amr,kmr,o_e,Wdt=N(()=>{"use strict";Ywe();Dhr="RawCode",gA="Literal",Nhr="Property",Mhr="Identifier",Fhr="ArrayExpression",Ohr="BinaryExpression",e_e="CallExpression",Rhr="ConditionalExpression",Phr="LogicalExpression",Lhr="MemberExpression",jhr="ObjectExpression",Bhr="UnaryExpression";Um.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=$hr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};zZ=1,t$=2,hA=3,w2=4,UZ=5,yA=6,Cf=7,r$=8,zhr=9;Wy={};Wy[zZ]="Boolean";Wy[t$]="<end>";Wy[hA]="Identifier";Wy[w2]="Keyword";Wy[UZ]="Null";Wy[yA]="Numeric";Wy[Cf]="Punctuator";Wy[r$]="String";Wy[zhr]="RegularExpression";Uhr="ArrayExpression",Vhr="BinaryExpression",Ghr="CallExpression",Whr="ConditionalExpression",Ldt="Identifier",qhr="Literal",Hhr="LogicalExpression",Yhr="MemberExpression",Xhr="ObjectExpression",Khr="Property",Zhr="UnaryExpression",dl="Unexpected token %0",Qhr="Unexpected number",Jhr="Unexpected string",emr="Unexpected identifier",tmr="Unexpected reserved word",rmr="Unexpected end of input",Qwe="Invalid regular expression",Xwe="Invalid regular expression: missing /",jdt="Octal literals are not allowed in strict mode.",nmr="Duplicate data property in object literal not allowed in strict mode",Gl="ILLEGAL",JB="Disabled.",omr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),imr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");amr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};kmr={if:1};o_e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function o$(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var qdt=N(()=>{"use strict"});function s_e(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var Hdt=N(()=>{"use strict"});function WZ(t){let r,n,o;t.length!==2?(r=o$,n=(l,u)=>o$(t(l),u),o=(l,u)=>t(l)-u):(r=t===o$||t===s_e?t:Lmr,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function Lmr(){return 0}var Ydt=N(()=>{"use strict";qdt();Hdt()});function qZ(t,...r){t=new Q0(t),r=r.map(jmr);e:for(let n of t)for(let o of r)if(!o.has(n)){t.delete(n);continue e}return t}function jmr(t){return t instanceof Q0?t:new Q0(t)}var Xdt=N(()=>{"use strict";iL()});function HZ(...t){let r=new Q0;for(let n of t)for(let o of n)r.add(o);return r}var Kdt=N(()=>{"use strict";iL()});var Zdt=N(()=>{"use strict";Ydt();Xdt();Kdt()});function gF(t,r,n){return t.fields=r||[],t.fname=n,t}function Bmr(t){return t.length===1?$mr(t[0]):zmr(t)}function mF(t){throw Error(t)}function Umr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||mF("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&mF("Access path missing closing bracket: "+t),o&&mF("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function YZ(t,r,n){let o=Umr(t);return t=o.length===1?o[0]:t,gF((n&&n.get||Bmr)(o),[t],r||t)}function Qdt(t){return t[t.length-1]}function _2(t){return t==null||t===""?null:+t}function a_e(t){return t!=null?XZ(t)?t:[t]:[]}function Jdt(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function KZ(t,r){return Vmr.call(t,r)}function i$(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function ZZ(t){return Object.prototype.toString.call(t)==="[object Date]"}var $mr,zmr,Tqo,Aqo,kqo,Iqo,Dqo,Nqo,XZ,Vmr,l_e=N(()=>{"use strict";$mr=t=>function(r){return r[t]},zmr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};Tqo=YZ("id"),Aqo=gF(t=>t,[],"identity"),kqo=gF(()=>0,[],"zero"),Iqo=gF(()=>1,[],"one"),Dqo=gF(()=>!0,[],"true"),Nqo=gF(()=>!1,[],"false"),XZ=Array.isArray;Vmr=Object.prototype.hasOwnProperty});function tgr(t){this.type=t}function rgr(t){switch(t.type){case Hmr:return t.elements;case Ymr:case Zmr:return[t.left,t.right];case Xmr:return[t.callee].concat(t.arguments);case Kmr:return[t.test,t.consequent,t.alternate];case Qmr:return[t.object,t.property];case Jmr:return t.properties;case Wmr:return[t.key,t.value];case egr:return[t.argument];case qmr:case u_e:case Gmr:default:return[]}}var Gmr,u_e,Wmr,qmr,Hmr,Ymr,Xmr,Kmr,Zmr,Qmr,Jmr,egr,qy,ngr,ogr,igr,sgr,agr,lgr,ugr,cgr,fgr,Lqo,jqo,ept=N(()=>{"use strict";l_e();Gmr="RawCode",u_e="Literal",Wmr="Property",qmr="Identifier",Hmr="ArrayExpression",Ymr="BinaryExpression",Xmr="CallExpression",Kmr="ConditionalExpression",Zmr="LogicalExpression",Qmr="MemberExpression",Jmr="ObjectExpression",egr="UnaryExpression";tgr.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=rgr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};ngr=1,ogr=2,igr=3,sgr=4,agr=5,lgr=6,ugr=7,cgr=8,fgr=9;qy={};qy[ngr]="Boolean";qy[ogr]="<end>";qy[igr]="Identifier";qy[sgr]="Keyword";qy[agr]="Null";qy[lgr]="Numeric";qy[ugr]="Punctuator";qy[cgr]="String";qy[fgr]="RegularExpression";Lqo=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),jqo=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")});function ipt(t){return(!t.getter||!t.getter[tpt])&&(t.getter=YZ(t.field),t.getter[tpt]=!0),t.getter}function opt(t,r){for(var n=r.fields,o=r.values,i=n.length,s=0,a,l;s<i;++s)if(l=n[s],a=ipt(l)(t),ZZ(a)&&(a=_2(a)),ZZ(o[s])&&(o[s]=_2(o[s])),XZ(o[s])&&ZZ(o[s][0])&&(o[s]=o[s].map(_2)),l.type===mgr){if(XZ(o[s])?o[s].indexOf(a)<0:a!==o[s])return!1}else if(l.type===ggr){if(!i$(a,o[s]))return!1}else if(l.type===xgr){if(!i$(a,o[s],!0,!1))return!1}else if(l.type===ygr){if(!i$(a,o[s],!1,!1))return!1}else if(l.type===bgr&&!i$(a,o[s],!1,!0))return!1;return!0}function spt(t,r,n){for(var o=this.context.data[t],i=o?o.values.value:[],s=o?o[QZ]&&o[QZ].value:void 0,a=n===f_e,l=i.length,u=0,c,f,d,p,h;u<l;++u)if(c=i[u],s&&a){if(f=f||{},d=f[p=c.unit]||0,d===-1)continue;if(h=opt(r,c),f[p]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(p).count)return!1}else if(h=opt(r,c),a^h)return h;return l&&a}function lpt(t,r,n){let o=this.context.data[t],i=o?o.values.value:[],s=o?o[QZ]&&o[QZ].value:void 0,a=n===f_e,l=s$(r),u=vgr(i,l);if(u===i.length||s$(i[u])!==l)return!1;if(s&&a){if(s.size===1)return!0;if(wgr(i,l)-u<s.size)return!1}return!0}function upt(t,r){return t.map(n=>Jdt(r.fields?{values:r.fields.map(o=>ipt(o)(n.datum))}:{[Hy]:s$(n.datum)},r))}function cpt(t,r,n,o){for(var i=this.context.data[t],s=i?i.values.value:[],a={},l={},u={},c,f,d,p,h,m,g,y,b,x,v=s.length,w=0,_,S;w<v;++w)if(c=s[w],p=c.unit,f=c.fields,d=c.values,f&&d){for(_=0,S=f.length;_<S;++_)h=f[_],g=a[h.field]||(a[h.field]={}),y=g[p]||(g[p]=[]),u[h.field]=b=h.type.charAt(0),x=c_e[`${b}_union`],g[p]=x(y,a_e(d[_]));n&&(y=l[p]||(l[p]=[]),y.push(a_e(d).reduce((C,E,T)=>(C[f[T].field]=E,C),{})))}else h=Hy,m=s$(c),g=a[h]||(a[h]={}),y=g[p]||(g[p]=[]),y.push(m),n&&(y=l[p]||(l[p]=[]),y.push({[Hy]:m}));if(r=r||rpt,a[Hy]?a[Hy]=c_e[`${Hy}_${r}`](...Object.values(a[Hy])):Object.keys(a).forEach(C=>{a[C]=Object.keys(a[C]).map(E=>a[C][E]).reduce((E,T)=>E===void 0?T:c_e[`${u[C]}_${r}`](E,T))}),s=Object.keys(l),n&&s.length){let C=o?pgr:dgr;a[C]=r===rpt?{[npt]:s.reduce((E,T)=>(E.push(...l[T]),E),[])}:{[hgr]:s.map(E=>({[npt]:l[E]}))}}return a}function JZ(t,r,n,o){r[0].type!==u_e&&mF("First argument to selection functions must be a string literal.");let i=r[0].value,s=r.length>=2&&Qdt(r).value,a="unit",l=Sgr+a,u=_gr+i;s===f_e&&!KZ(o,l)&&(o[l]=n.getData(i).indataRef(n,a)),KZ(o,u)||(o[u]=n.getData(i).tuplesRef())}var tpt,f_e,rpt,dgr,pgr,npt,hgr,Hy,s$,mgr,ggr,ygr,bgr,xgr,QZ,apt,vgr,wgr,c_e,_gr,Sgr,fpt=N(()=>{"use strict";Zdt();l_e();ept();tpt=Symbol("vega_selection_getter");f_e="intersect",rpt="union",dgr="vlMulti",pgr="vlPoint",npt="or",hgr="and",Hy="_vgsid_",s$=YZ(Hy),mgr="E",ggr="R",ygr="R-E",bgr="R-LE",xgr="R-RE",QZ="index:unit";apt=WZ(s$),vgr=apt.left,wgr=apt.right;c_e={[`${Hy}_union`]:HZ,[`${Hy}_intersect`]:qZ,E_union:function(t,r){if(!t.length)return r;for(var n=0,o=r.length;n<o;++n)t.indexOf(r[n])<0&&t.push(r[n]);return t},E_intersect:function(t,r){return t.length?t.filter(n=>r.indexOf(n)>=0):r},R_union:function(t,r){var n=_2(r[0]),o=_2(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<o&&(t[1]=o),t):[n,o]},R_intersect:function(t,r){var n=_2(r[0]),o=_2(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?o<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>o&&(t[1]=o),t):[n,o]}},_gr=":",Sgr="@"});function mpt(t){let r=this.context.data[t];return r?r.values.value:[]}function Cgr(t,r,n){let o=this.context.data[t]["index:"+r],i=o?o.value.get(n):void 0;return i&&i.count}function Egr(t,r){let n=this.context.dataflow,o=this.context.data[t],i=o.input;return n.pulse(i,n.changeset().remove(Vwe).insert(r)),1}function Tgr(t,r,n){if(t){let o=this.context.dataflow,i=t.mark.source;o.pulse(i,o.changeset().encode(t,r))}return n!==void 0?n:t}function tQ(t,r,n){return!Number.isInteger(t)||!Number.isInteger(r)?"":(eQ.setYear(2e3),eQ.setMonth(t),eQ.setDate(r),gpt.call(this,eQ,n))}function Ngr(t){return tQ.call(this,t,1,"%B")}function Mgr(t){return tQ.call(this,t,1,"%b")}function Fgr(t){return tQ.call(this,0,2+t,"%A")}function Ogr(t){return tQ.call(this,0,2+t,"%a")}function g_e(t,r,n,o){r[0].type!==gA&&fl("First argument to data functions must be a string literal.");let i=r[0].value,s=Rgr+i;if(!Gy(s,o))try{o[s]=n.getData(i).tuplesRef()}catch{}}function Lgr(t,r,n,o){r[0].type!==gA&&fl("First argument to indata must be a string literal."),r[1].type!==gA&&fl("Second argument to indata must be a string literal.");let i=r[0].value,s=r[1].value,a=Pgr+s;Gy(a,o)||(o[a]=n.getData(i).indataRef(n,s))}function Tf(t,r,n,o){if(r[0].type===gA)dpt(n,o,r[0].value);else for(t in n.scales)dpt(n,o,t)}function dpt(t,r,n){let o=p_e+n;if(!Gy(r,o))try{r[o]=t.scaleRef(n)}catch{}}function Wv(t,r){let n;return pF(t)?t:v2(t)?(n=r.scales[t])&&n.value:void 0}function jgr(t,r,n){r.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Tf,n._range=Tf,n._scale=Tf;let o=i=>"_["+(i.type===gA?hF(p_e+i.value):hF(p_e)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${o(i[0])})`,_range:i=>`${o(i[0])}.range()`,_scale:i=>`${o(i[0])}(${t(i[1])})`}}function y_e(t,r){return function(n,o,i){if(n){let s=Wv(n,(i||this).context);return s&&s.path[t](o)}else return r(o)}}function Ugr(t){let r=this.context.group,n=!1;if(r)for(;t;){if(t===r){n=!0;break}t=t.mark.group}return n}function b_e(t,r,n){try{t[r].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(o){t.warn(o)}return n[n.length-1]}function Vgr(){return b_e(this.context.dataflow,"warn",arguments)}function Ggr(){return b_e(this.context.dataflow,"info",arguments)}function Wgr(){return b_e(this.context.dataflow,"debug",arguments)}function d_e(t){let r=t/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}function h_e(t){let r=pa(t),n=d_e(r.r),o=d_e(r.g),i=d_e(r.b);return .2126*n+.7152*o+.0722*i}function qgr(t,r){let n=h_e(t),o=h_e(r),i=Math.max(n,o),s=Math.min(n,o);return(i+.05)/(s+.05)}function Hgr(){let t=[].slice.call(arguments);return t.unshift({}),jZ(...t)}function bpt(t,r){return t===r||t!==t&&r!==r?!0:Vy(t)?Vy(r)&&t.length===r.length?Ygr(t,r):!1:KB(t)&&KB(r)?xpt(t,r):!1}function Ygr(t,r){for(let n=0,o=t.length;n<o;++n)if(!bpt(t[n],r[n]))return!1;return!0}function xpt(t,r){for(let n in t)if(!bpt(t[n],r[n]))return!1;return!0}function ppt(t){return r=>xpt(t,r)}function Xgr(t,r,n,o,i,s){let a=this.context.dataflow,l=this.context.data[t],u=l.input,c=a.stamp(),f=l.changes,d,p;if(a._trigger===!1||!(u.value.length||r||o))return 0;if((!f||f.stamp<c)&&(l.changes=f=a.changeset(),f.stamp=c,a.runAfter(()=>{l.modified=!0,a.pulse(u,f).run()},!0,1)),n&&(d=n===!0?Vwe:Vy(n)||FE(n)?n:ppt(n),f.remove(d)),r&&f.insert(r),o&&(d=ppt(o),u.value.some(d)?f.remove(d):f.insert(o)),i)for(p in s)f.modify(i,p,s[p]);return 1}function Kgr(t){let r=t.touches,n=r[0].clientX-r[1].clientX,o=r[0].clientY-r[1].clientY;return Math.sqrt(n*n+o*o)}function Zgr(t){let r=t.touches;return Math.atan2(r[0].clientY-r[1].clientY,r[0].clientX-r[1].clientX)}function Qgr(t,r){let n=hpt[r]||(hpt[r]=Uwe(r));return Vy(t)?t.map(n):n(t)}function x_e(t){return Vy(t)||ArrayBuffer.isView(t)?t:null}function v_e(t){return x_e(t)||(v2(t)?t:null)}function Jgr(t,...r){return x_e(t).join(...r)}function e0r(t,...r){return v_e(t).indexOf(...r)}function t0r(t,...r){return v_e(t).lastIndexOf(...r)}function r0r(t,...r){return v_e(t).slice(...r)}function n0r(t,r,n){return pF(n)&&fl("Function argument passed to replace."),String(t).replace(r,n)}function o0r(t){return x_e(t).slice().reverse()}function i0r(t,r,n){return q4(t||0,r||0,n||0)}function s0r(t,r){let n=Wv(t,(r||this).context);return n&&n.bandwidth?n.bandwidth():0}function a0r(t,r){let n=Wv(t,(r||this).context);return n?n.copy():void 0}function l0r(t,r){let n=Wv(t,(r||this).context);return n?n.domain():[]}function u0r(t,r,n){let o=Wv(t,(n||this).context);return o?Vy(r)?(o.invertRange||o.invert)(r):(o.invert||o.invertExtent)(r):void 0}function c0r(t,r){let n=Wv(t,(r||this).context);return n&&n.range?n.range():[]}function f0r(t,r,n){let o=Wv(t,(n||this).context);return o?o(r):void 0}function d0r(t,r,n,o,i){t=Wv(t,(i||this).context);let s=Rve(r,n),a=t.domain(),l=a[0],u=Vv(a),c=OZ;return u-l?c=WY(t,l,u):t=(t.interpolator?Gn("sequential")().interpolator(t.interpolator()):Gn("linear")().interpolate(t.interpolate()).range(t.range())).domain([l=0,u=1]),t.ticks&&(a=t.ticks(+o||15),l!==a[0]&&a.unshift(l),u!==Vv(a)&&a.push(u)),a.forEach(f=>s.stop(c(f),t(f))),s}function p0r(t,r,n){let o=Wv(t,(n||this).context);return function(i){return o?o.path.context(i)(r):""}}function h0r(t){let r=null;return function(n){return n?qM(n,r=r||KT(t)):t}}function wpt(t,r){let n=mpt.call(r,t);return n.root&&n.root.lookup||{}}function m0r(t,r,n){let o=wpt(t,this),i=o[r],s=o[n];return i&&s?i.path(s).map(vpt):void 0}function g0r(t,r){let n=wpt(t,this)[r];return n?n.ancestors().map(vpt):void 0}function y0r(){let t=_pt();return t?t.screen:{}}function b0r(){let t=_pt();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function x0r(){let t=this.context.dataflow,r=t.container&&t.container();return r?[r.clientWidth,r.clientHeight]:[void 0,void 0]}function v0r(t,r,n){if(!t)return[];let[o,i]=t,s=new Du().set(o[0],o[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return f1e(a,s,w0r(r))}function w0r(t){let r=null;if(t){let n=Gwe(t.marktype),o=Gwe(t.markname);r=i=>(!n.length||n.some(s=>i.marktype===s))&&(!o.length||o.some(s=>i.name===s))}return r}function C0r(t){let r=i_e(t);_0r.forEach(n=>r[n]=S0r+n);for(let n in yF)r[n]=Spt+n;return jZ(r,jgr(t,yF,w_e)),r}function $s(t,r,n){return arguments.length===1?yF[t]:(yF[t]=r,n&&(w_e[t]=n),m_e&&(m_e.functions[t]=Spt+t),this)}function Vm(t,r){let n={},o;try{t=v2(t)?t:hF(t)+"",o=Vdt(t)}catch{fl("Expression parse error: "+t)}o.visit(s=>{if(s.type!==e_e)return;let a=s.callee.name,l=Cpt.visitors[a];l&&l(a,s.arguments,r,n)});let i=m_e(o);return i.globals.forEach(s=>{let a=ypt+s;!Gy(n,a)&&r.getSignal(s)&&(n[a]=r.signalRef(s))}),{$expr:jZ({code:i.code},r.options.ast?{ast:o}:null),$fields:i.fields,$params:n}}var a$,Agr,gpt,kgr,Igr,Dgr,eQ,Rgr,Pgr,p_e,ypt,Bgr,$gr,zgr,hpt,vpt,_pt,yF,_0r,S0r,Spt,w_e,Cpt,m_e,rQ=N(()=>{"use strict";Ywe();Wdt();_5();js();tl();yM();pB();fpt();bN();_N();qo();a$=t=>function(r,n){return this.context.dataflow.locale()[t](n)(r)},Agr=a$("format"),gpt=a$("timeFormat"),kgr=a$("utcFormat"),Igr=a$("timeParse"),Dgr=a$("utcParse"),eQ=new Date(2e3,0,1);Rgr=":",Pgr="@",p_e="%",ypt="$";Bgr=y_e("area",X0e),$gr=y_e("bounds",Q0e),zgr=y_e("centroid",nye);hpt={};vpt=t=>t.data;_pt=()=>typeof window<"u"&&window||null;yF={random(){return Ed()},cumulativeNormal:NL,cumulativeLogNormal:nq,cumulativeUniform:aq,densityNormal:QW,densityLogNormal:rq,densityUniform:sq,quantileNormal:ML,quantileLogNormal:oq,quantileUniform:lq,sampleNormal:DL,sampleLogNormal:tq,sampleUniform:iq,isArray:Vy,isBoolean:wdt,isDate:Wwe,isDefined(t){return t!==void 0},isNumber:qwe,isObject:KB,isRegExp:_dt,isString:v2,isTuple:FE,isValid(t){return t!=null&&t===t},toBoolean:Tdt,toDate:Adt,toNumber:RZ,toString:kdt,indexof:e0r,join:Jgr,lastindexof:t0r,replace:n0r,reverse:o0r,slice:r0r,flush:xdt,lerp:Sdt,merge:Hgr,pad:Cdt,peek:Vv,pluck:Qgr,span:Edt,inrange:vdt,truncate:Idt,rgb:pa,lab:gf,hcl:Rd,hsl:Od,luminance:h_e,contrast:qgr,sequence:ca,format:Agr,utcFormat:kgr,utcParse:Dgr,utcOffset:epe,utcSequence:rpe,timeFormat:gpt,timeParse:Igr,timeOffset:Jde,timeSequence:tpe,timeUnitSpecifier:Wde,monthFormat:Ngr,monthAbbrevFormat:Mgr,dayFormat:Fgr,dayAbbrevFormat:Ogr,quarter:mdt,utcquarter:gdt,week:Yde,utcweek:Kde,dayofyear:Hde,utcdayofyear:Xde,warn:Vgr,info:Ggr,debug:Wgr,extent:bdt,inScope:Ugr,intersect:v0r,clampRange:ydt,pinchDistance:Kgr,pinchAngle:Zgr,screen:y0r,containerSize:x0r,windowSize:b0r,bandspace:i0r,setdata:Egr,pathShape:h0r,panLinear:adt,panLog:ldt,panPow:udt,panSymlog:cdt,zoomLinear:fdt,zoomLog:ddt,zoomPow:pdt,zoomSymlog:hdt,encode:Tgr,modify:Xgr},_0r=["view","item","group","xy","x","y"],S0r="event.vega.",Spt="this.",w_e={},Cpt={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${hF(ypt+t)}]`,functions:C0r,constants:o_e,visitors:w_e},m_e=Gdt(Cpt);$s("bandwidth",s0r,Tf);$s("copy",a0r,Tf);$s("domain",l0r,Tf);$s("range",c0r,Tf);$s("invert",u0r,Tf);$s("scale",f0r,Tf);$s("gradient",d0r,Tf);$s("geoArea",Bgr,Tf);$s("geoBounds",$gr,Tf);$s("geoCentroid",zgr,Tf);$s("geoShape",p0r,Tf);$s("indata",Cgr,Lgr);$s("data",mpt,g_e);$s("treePath",m0r,g_e);$s("treeAncestors",g0r,g_e);$s("vlSelectionTest",spt,JZ);$s("vlSelectionIdTest",lpt,JZ);$s("vlSelectionResolve",cpt,JZ);$s("vlSelectionTuples",upt)});function Gm(t,r,n){return t.fields=r||[],t.fname=n,t}function E0r(t){return t==null?null:t.fields}function Ept(t){return t.length===1?T0r(t[0]):A0r(t)}function S2(t){throw Error(t)}function Tpt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||S2("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&S2("Access path missing closing bracket: "+t),o&&S2("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function nQ(t,r,n){let o=Tpt(t);return t=o.length===1?o[0]:t,Gm((n&&n.get||Ept)(o),[t],r||t)}function iQ(t){return t===Object(t)}function bF(t){return t!=null?oQ(t)?t:[t]:[]}function k0r(t){return typeof t=="function"}function kpt(t,r,n){n=n||{},r=bF(r)||[];let o=[],i=[],s={},a=n.comparator||D0r;return bF(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===I0r?-1:1),i.push(l=k0r(l)?l:nQ(l,null,n)),(E0r(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:Gm(a(i,o),Object.keys(s))}function Dpt(t,r){return F0r.call(t,r)}function O0r(t){return typeof t=="string"}function Npt(t,r,n){t&&(t=r?bF(t).map(l=>l.replace(/\\(.)/g,"$1")):bF(t));let o=t&&t.length,i=n&&n.get||Ept,s=l=>i(r?[l]:Tpt(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return Gm(a,t,"key")}function sQ(t){return oQ(t)?"["+t.map(sQ)+"]":iQ(t)||O0r(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function __e(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var T0r,A0r,rHo,nHo,oHo,iHo,Apt,sHo,oQ,I0r,Ipt,D0r,N0r,M0r,F0r,Mpt=N(()=>{"use strict";T0r=t=>function(r){return r[t]},A0r=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};rHo=nQ("id"),nHo=Gm(t=>t,[],"identity"),oHo=Gm(()=>0,[],"zero"),iHo=Gm(()=>1,[],"one"),Apt=Gm(()=>!0,[],"true"),sHo=Gm(()=>!1,[],"false"),oQ=Array.isArray;I0r="descending";Ipt=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),D0r=(t,r)=>t.length===1?N0r(t[0],r[0]):M0r(t,r,t.length),N0r=(t,r)=>function(n,o){return Ipt(t(n),t(o))*r},M0r=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=Ipt(s(o),s(i));return a*r[l]}),F0r=Object.prototype.hasOwnProperty});function R0r(t){let r=this,n=t.operators||[];return t.background&&(r.background=t.background),t.eventConfig&&(r.eventConfig=t.eventConfig),t.locale&&(r.locale=t.locale),n.forEach(o=>r.parseOperator(o)),n.forEach(o=>r.parseOperatorParameters(o)),(t.streams||[]).forEach(o=>r.parseStream(o)),(t.updates||[]).forEach(o=>r.parseUpdate(o)),r.resolve()}function L0r(t,r){let n="";return P0r[r]||(t.x2&&(t.x?(Fpt[r]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(Fpt[r]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function S_e(t){return(t+"").toLowerCase()}function j0r(t){return S_e(t)==="operator"}function B0r(t){return S_e(t)==="collect"}function l$(t,r,n){n.endsWith(";")||(n="return("+n+");");let o=Function(...r.concat(n));return t&&t.functions?o.bind(t.functions):o}function $0r(t,r,n,o){return`((u = ${t}) < (v = ${r}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${o}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${o} : `}function U0r(t){let r=this;j0r(t.type)||!t.type?r.operator(t,t.update?r.operatorExpression(t.update):null):r.transform(t,t.type)}function V0r(t){let r=this;if(t.params){let n=r.get(t.id);n||S2("Invalid operator id: "+t.id),r.dataflow.connect(n,n.parameters(r.parseParameters(t.params),t.react,t.initonly))}}function G0r(t,r){r=r||{};let n=this;for(let o in t){let i=t[o];r[o]=oQ(i)?i.map(s=>Opt(s,n,r)):Opt(i,n,r)}return r}function Opt(t,r,n){if(!t||!iQ(t))return t;for(let o=0,i=Rpt.length,s;o<i;++o)if(s=Rpt[o],Dpt(t,s.key))return s.parse(t,r,n);return t}function W0r(t,r){return r.get(t.$ref)||S2("Operator not defined: "+t.$ref)}function q0r(t,r,n){t.$params&&r.parseParameters(t.$params,n);let o="e:"+t.$expr.code;return r.fn[o]||(r.fn[o]=Gm(r.parameterExpression(t.$expr),t.$fields))}function H0r(t,r){let n="k:"+t.$key+"_"+!!t.$flat;return r.fn[n]||(r.fn[n]=Npt(t.$key,t.$flat,r.expr.codegen))}function Y0r(t,r){if(!t.$field)return null;let n="f:"+t.$field+"_"+t.$name;return r.fn[n]||(r.fn[n]=nQ(t.$field,t.$name,r.expr.codegen))}function X0r(t,r){let n="c:"+t.$compare+"_"+t.$order,o=bF(t.$compare).map(i=>i&&i.$tupleid?_r:i);return r.fn[n]||(r.fn[n]=kpt(o,t.$order,r.expr.codegen))}function K0r(t,r){let n=t.$encode,o={};for(let i in n){let s=n[i];o[i]=Gm(r.encodeExpression(s.$expr),s.$fields),o[i].output=s.$output}return o}function Z0r(t,r){return r}function Q0r(t,r){let n=t.$subflow;return function(o,i,s){let a=r.fork().parse(n),l=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(s),l.detachSubflow=()=>r.detach(a),l}}function J0r(){return _r}function eyr(t){var r=this,n=t.filter!=null?r.eventExpression(t.filter):void 0,o=t.stream!=null?r.get(t.stream):void 0,i;t.source?o=r.events(t.source,t.type,n):t.merge&&(i=t.merge.map(s=>r.get(s)),o=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(s=>r.get(s)),o=o.between(i[0],i[1])),t.filter&&(o=o.filter(n)),t.throttle!=null&&(o=o.throttle(+t.throttle)),t.debounce!=null&&(o=o.debounce(+t.debounce)),o==null&&S2("Invalid stream definition: "+JSON.stringify(t)),t.consume&&o.consume(!0),r.stream(t,o)}function tyr(t){var r=this,n=iQ(n=t.source)?n.$ref:n,o=r.get(n),i=null,s=t.update,a=void 0;o||S2("Source not defined: "+t.source),i=t.target&&t.target.$expr?r.eventExpression(t.target.$expr):r.get(t.target),s&&s.$expr&&(s.$params&&(a=r.parseParameters(s.$params)),s=r.handlerExpression(s.$expr)),r.update(t,o,i,s,a)}function nyr(t){var r=this,n={};if(t.signals){var o=n.signals={};Object.keys(r.signals).forEach(s=>{let a=r.signals[s];t.signals(s,a)&&(o[s]=a.value)})}if(t.data){var i=n.data={};Object.keys(r.data).forEach(s=>{let a=r.data[s];t.data(s,a)&&(i[s]=a.input.value)})}return r.subcontext&&t.recurse!==!1&&(n.subcontext=r.subcontext.map(s=>s.getState(t))),n}function oyr(t){var r=this,n=r.dataflow,o=t.data,i=t.signals;Object.keys(i||{}).forEach(s=>{n.update(r.signals[s],i[s],ryr)}),Object.keys(o||{}).forEach(s=>{n.pulse(r.data[s].input,n.changeset().remove(Apt).insert(o[s]))}),(t.subcontext||[]).forEach((s,a)=>{let l=r.subcontext[a];l&&l.setState(s)})}function aQ(t,r,n,o){return new Lpt(t,r,n,o)}function Lpt(t,r,n,o){this.dataflow=t,this.transforms=r,this.events=t.events.bind(t),this.expr=o||z0r,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ppt(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}var P0r,Fpt,z0r,Rpt,ryr,C_e=N(()=>{"use strict";Mpt();tl();P0r=__e(["rule"]),Fpt=__e(["group","image","rect"]);z0r={operator:(t,r)=>l$(t,["_"],r.code),parameter:(t,r)=>l$(t,["datum","_"],r.code),event:(t,r)=>l$(t,["event"],r.code),handler:(t,r)=>{let n=`var datum=event.item&&event.item.datum;return ${r.code};`;return l$(t,["_","event"],n)},encode:(t,r)=>{let{marktype:n,channels:o}=r,i="var o=item,datum=o.datum,m=0,$;";for(let s in o){let a="o["+sQ(s)+"]";i+=`$=${o[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=L0r(o,n),i+="return m;",l$(t,["item","_"],i)},codegen:{get(t){let r=`[${t.map(sQ).join("][")}]`,n=Function("_",`return _${r};`);return n.path=r,n},comparator(t,r){let n,o=(s,a)=>{let l=r[a],u,c;return s.path?(u=`a${s.path}`,c=`b${s.path}`):((n=n||{})["f"+a]=s,u=`this.f${a}(a)`,c=`this.f${a}(b)`),$0r(u,c,-l,l)},i=Function("a","b","var u, v; return "+t.map(o).join("")+"0;");return n?i.bind(n):i}}};Rpt=[{key:"$ref",parse:W0r},{key:"$key",parse:H0r},{key:"$expr",parse:q0r},{key:"$field",parse:Y0r},{key:"$encode",parse:K0r},{key:"$compare",parse:X0r},{key:"$context",parse:Z0r},{key:"$subflow",parse:Q0r},{key:"$tupleid",parse:J0r}];ryr={skip:!0};Lpt.prototype=Ppt.prototype={fork(){let t=new Ppt(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);let r=Object.keys(t.nodes);for(let n of r)t.nodes[n]._targets=null;for(let n of r)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,r){return this.nodes[t]=r},add(t,r){let n=this,o=n.dataflow,i=t.value;if(n.set(t.id,r),B0r(t.type)&&i&&(i.$ingest?o.ingest(r,i.$ingest,i.$format):i.$request?o.preload(r,i.$request,i.$format):o.pulse(r,o.changeset().insert(i))),t.root&&(n.root=r),t.parent){let s=n.get(t.parent.$ref);s?(o.connect(s,[r]),r.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),o.connect(s,[r]),r.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=r),t.scale&&(n.scales[t.scale]=r),t.data)for(let s in t.data){let a=n.data[s]||(n.data[s]={});t.data[s].forEach(l=>a[l]=r)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,r){this.add(t,this.dataflow.add(t.value,r))},transform(t,r){this.add(t,this.dataflow.add(this.transforms[S_e(r)]))},stream(t,r){this.set(t.id,r)},update(t,r,n,o,i){this.dataflow.on(r,n,o,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:R0r,parseOperator:U0r,parseOperatorParameters:V0r,parseParameters:G0r,parseStream:eyr,parseUpdate:tyr,getState:nyr,setState:oyr}});function iyr(t){let r=t.container();r&&(r.setAttribute("role","graphics-document"),r.setAttribute("aria-roleDescription","visualization"),qpt(r,t.description()))}function qpt(t,r){t&&(r==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",r))}function syr(t){t.add(null,r=>(t._background=r.bg,t._resize=1,r.bg),{bg:t._signals.background})}function ayr(t){let r=t._signals.cursor||(t._signals.cursor=t.add({user:E_e,item:null}));t.on(t.events("view","mousemove"),r,(n,o)=>{let i=r.value,s=i?Jn(i)?i:i.user:E_e,a=o.item&&o.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),t.add(null,function(n){let o=n.cursor,i=this.value;return Jn(o)||(i=o.item,o=o.user),A_e(t,o&&o!==E_e?o:i||o),i},{cursor:r})}function A_e(t,r){let n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return r==null?n.style.removeProperty("cursor"):n.style.cursor=r}function cQ(t,r){var n=t._runtime.data;return Pr(n,r)||pt("Unrecognized data set: "+r),n[r]}function lyr(t,r){return arguments.length<2?cQ(this,t).values.value:dQ.call(this,t,iv().remove(Y0).insert(r))}function dQ(t,r){Wfe(r)||pt("Second argument to changes must be a changeset.");let n=cQ(this,t);return n.modified=!0,this.pulse(n.input,r)}function uyr(t,r){return dQ.call(this,t,iv().insert(r))}function cyr(t,r){return dQ.call(this,t,iv().remove(r))}function Hpt(t){var r=t.padding();return Math.max(0,t._viewWidth+r.left+r.right)}function Ypt(t){var r=t.padding();return Math.max(0,t._viewHeight+r.top+r.bottom)}function pQ(t){var r=t.padding(),n=t._origin;return[r.left+n[0],r.top+n[1]]}function fyr(t){var r=pQ(t),n=Hpt(t),o=Ypt(t);t._renderer.background(t.background()),t._renderer.resize(n,o,r),t._handler.origin(r),t._resizeListeners.forEach(i=>{try{i(n,o)}catch(s){t.error(s)}})}function dyr(t,r,n){var o=t._renderer,i=o&&o.canvas(),s,a,l;return i&&(l=pQ(t),a=r.changedTouches?r.changedTouches[0]:r,s=fB(a,i),s[0]-=l[0],s[1]-=l[1]),r.dataflow=t,r.item=n,r.vega=pyr(t,n,s),r}function pyr(t,r,n){let o=r?r.mark.marktype==="group"?r:r.mark.group:null;function i(a){var l=o,u;if(a){for(u=r;u;u=u.mark.group)if(u.mark.name===a){l=u;break}}return l&&l.mark&&l.mark.interactive?l:{}}function s(a){if(!a)return n;Jn(a)&&(a=i(a));let l=n.slice();for(;a;)l[0]-=a.x||0,l[1]-=a.y||0,a=a.mark&&a.mark.group;return l}return{view:Ja(t),item:Ja(r||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}function yyr(t){let r=an({defaults:{}},t),n=(o,i)=>{i.forEach(s=>{Hr(o[s])&&(o[s]=vu(o[s]))})};return n(r.defaults,["prevent","allow"]),n(r,["view","window","selector"]),r}function Xpt(t,r,n,o){t._eventListeners.push({type:n,sources:Br(r),handler:o})}function byr(t,r){var n=t._eventConfig.defaults,o=n.prevent,i=n.allow;return o===!1||i===!0?!1:o===!0||i===!1?!0:o?o[r]:i?!i[r]:t.preventDefault()}function lQ(t,r,n){let o=t._eventConfig&&t._eventConfig[r];return o===!1||un(o)&&!o[n]?(t.warn(`Blocked ${r} ${n} event listener.`),!1):!0}function xyr(t,r,n){var o=this,i=new dN(n),s=function(c,f){o.runAsync(null,()=>{t===jpt&&byr(o,r)&&c.preventDefault(),i.receive(dyr(o,c,f))})},a;if(t===hyr)lQ(o,"timer",r)&&o.timer(s,r);else if(t===jpt)lQ(o,"view",r)&&o.addEventListener(r,s,gyr);else if(t===myr?lQ(o,"window",r)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&lQ(o,"selector",r)&&(a=document.querySelectorAll(t)),!a)o.warn("Can not resolve event source: "+t);else{for(var l=0,u=a.length;l<u;++l)a[l].addEventListener(r,s);Xpt(o,a,r,s)}return i}function Bpt(t){return t.item}function $pt(t){return t.item.mark.source}function zpt(t){return function(r,n){return n.vega.view().changeset().encode(n.item,t)}}function vyr(t,r){return t=[t||"hover"],r=[r||"update",t[0]],this.on(this.events("view","mouseover",Bpt),$pt,zpt(t)),this.on(this.events("view","mouseout",Bpt),$pt,zpt(r)),this}function wyr(){var t=this._tooltip,r=this._timers,n=this._eventListeners,o,i,s;for(o=r.length;--o>=0;)r[o].stop();for(o=n.length;--o>=0;)for(s=n[o],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function Wd(t,r,n){let o=document.createElement(t);for(let i in r)o.setAttribute(i,r[i]);return n!=null&&(o.textContent=n),o}function Eyr(t,r,n){if(!r)return;let o=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=t.signal(o.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(o.signal,a)})}},o.debounce&&(i.update=zce(o.debounce,i.update))),(o.input==null&&o.element?Tyr:kyr)(i,r,o,t),i.active||(t.on(t._signals[o.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(o.signal))}),i.active=!0),i}function Tyr(t,r,n,o){let i=n.event||"input",s=()=>t.update(r.value);o.signal(n.signal,r.value),r.addEventListener(i,s),Xpt(o,r,i,s),t.set=a=>{r.value=a,r.dispatchEvent(Ayr(i))}}function Ayr(t){return typeof Event<"u"?new Event(t):{type:t}}function kyr(t,r,n,o){let i=o.signal(n.signal),s=Wd("div",{class:_yr}),a=n.input==="radio"?s:s.appendChild(Wd("label"));a.appendChild(Wd("span",{class:Syr},n.name||n.signal)),r.appendChild(s);let l=Iyr;switch(n.input){case"checkbox":l=Dyr;break;case"select":l=Nyr;break;case"radio":l=Myr;break;case"range":l=Fyr;break}l(t,a,n,i)}function Iyr(t,r,n,o){let i=Wd("input");for(let s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=o,r.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=s=>i.value=s}function Dyr(t,r,n,o){let i={type:"checkbox",name:n.signal};o&&(i.checked=!0);let s=Wd("input",i);r.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=a=>s.checked=!!a||null}function Nyr(t,r,n,o){let i=Wd("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,l)=>{let u={value:a};fQ(a,o)&&(u.selected=!0),i.appendChild(Wd("option",u,(s[l]||a)+""))}),r.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=a=>{for(let l=0,u=n.options.length;l<u;++l)if(fQ(n.options[l],a)){i.selectedIndex=l;return}}}function Myr(t,r,n,o){let i=Wd("span",{class:Cyr}),s=n.labels||[];r.appendChild(i),t.elements=n.options.map((a,l)=>{let u={type:"radio",name:n.signal,value:a};fQ(a,o)&&(u.checked=!0);let c=Wd("input",u);c.addEventListener("change",()=>t.update(a));let f=Wd("label",{},(s[l]||a)+"");return f.prepend(c),i.appendChild(f),c}),t.set=a=>{let l=t.elements,u=l.length;for(let c=0;c<u;++c)fQ(l[c].value,a)&&(l[c].checked=!0)}}function Fyr(t,r,n,o){o=o!==void 0?o:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+o)||100,s=n.min||Math.min(0,i,+o)||0,a=n.step||yc(s,i,100),l=Wd("input",{type:"range",name:n.signal,min:s,max:i,step:a});l.value=o;let u=Wd("span",{},+o);r.appendChild(l),r.appendChild(u);let c=()=>{u.textContent=l.value,t.update(+l.value)};l.addEventListener("input",c),l.addEventListener("change",c),t.elements=[l],t.set=f=>{l.value=f,u.textContent=f}}function fQ(t,r){return t===r||t+""==r+""}function Kpt(t,r,n,o,i,s){return r=r||new o(t.loader()),r.initialize(n,Hpt(t),Ypt(t),pQ(t),i,s).background(t.background())}function k_e(t,r){return r?function(){try{r.apply(this,arguments)}catch(n){t.error(n)}}:null}function Oyr(t,r,n,o){let i=new o(t.loader(),k_e(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,pQ(t),t);return r&&r.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ryr(t,r){let n=this,o=n._renderType,i=n._eventConfig.bind,s=dB(o);t=n._el=t?T_e(n,t,!0):null,iyr(n),s||n.error("Unrecognized renderer type: "+o);let a=s.handler||ZM,l=t?s.renderer:s.headless;return n._renderer=l?Kpt(n,n._renderer,t,l):null,n._handler=Oyr(n,n._handler,t,a),n._redraw=!0,t&&i!=="none"&&(r=r?n._elBind=T_e(n,r,!0):t.appendChild(Wd("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=T_e(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Eyr(n,u.element||r,u)})),n}function T_e(t,r,n){if(typeof r=="string")if(typeof document<"u"){if(r=document.querySelector(r),!r)return t.error("Signal bind element not found: "+r),null}else return t.error("DOM document instance not found."),null;if(r&&n)try{r.innerHTML=""}catch(o){r=null,t.error(o)}return r}function Upt(t){return un(t)?{top:u$(t.top),bottom:u$(t.bottom),left:u$(t.left),right:u$(t.right)}:Pyr(u$(t))}function I_e(t,r,n,o){return je(this,null,function*(){let i=dB(r),s=i&&i.headless;return s||pt("Unrecognized renderer type: "+r),yield t.runAsync(),Kpt(t,null,null,s,n,o).renderAsync(t._scenegraph.root)})}function Lyr(t,r){return je(this,null,function*(){t!==Ov.Canvas&&t!==Ov.SVG&&t!==Ov.PNG&&pt("Unrecognized image type: "+t);let n=yield I_e(this,t,r);return t===Ov.SVG?jyr(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function jyr(t,r){let n=new Blob([t],{type:r});return window.URL.createObjectURL(n)}function Byr(t,r){return je(this,null,function*(){return(yield I_e(this,Ov.Canvas,t,r)).canvas()})}function $yr(t){return je(this,null,function*(){return(yield I_e(this,Ov.SVG,t)).svg()})}function zyr(t,r,n){return aQ(t,ov,yF,n).parse(r)}function Uyr(t){var r=this._runtime.scales;return Pr(r,t)||pt("Unrecognized scale or projection: "+t),r[t].value}function Jpt(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===D_e?o.left+o.right:0)}function eht(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===D_e?o.top+o.bottom:0)}function Vyr(t){var r=t._signals,n=r[Zpt],o=r[Qpt],i=r[D_e];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,l=>{t._width=l.size,t._viewWidth=Jpt(t,l.size),s()},{size:n}),t._resizeHeight=t.add(null,l=>{t._height=l.size,t._viewHeight=eht(t,l.size),s()},{size:o});let a=t.add(null,s,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=o.rank+1,a.rank=i.rank+1}function Gyr(t,r,n,o,i,s){this.runAfter(a=>{let l=0;a._autosize=0,a.width()!==n&&(l=1,a.signal(Zpt,n,Vpt),a._resizeWidth.skip(!0)),a.height()!==o&&(l=1,a.signal(Qpt,o,Vpt),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==r&&(a._resize=1,a._viewHeight=r),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),l&&a.run("enter"),s&&a.runAfter(u=>u.resize())},!1,1)}function Wyr(t){return this._runtime.getState(t||{data:qyr,signals:Hyr,recurse:!0})}function qyr(t,r){return r.modified&&Hr(r.input.value)&&t.indexOf("_:vega:_")}function Hyr(t,r){return!(t==="parent"||r instanceof ov.proxy)}function Yyr(t){return this.runAsync(null,r=>{r._trigger=!1,r._runtime.setState(t)},r=>{r._trigger=!0}),this}function Xyr(t,r){function n(o){t({timestamp:Date.now(),elapsed:o})}this._timers.push(Ibe(n,r))}function Kyr(t,r,n,o){let i=t.element();i&&i.setAttribute("title",Zyr(o))}function Zyr(t){return t==null?"":Hr(t)?tht(t):un(t)&&!JP(t)?Qyr(t):t+""}function Qyr(t){return Object.keys(t).map(r=>{let n=t[r];return r+": "+(Hr(n)?tht(n):rht(n))}).join(`
`)}function tht(t){return"["+t.map(rht).join(", ")+"]"}function rht(t){return Hr(t)?"[\u2026]":un(t)&&!JP(t)?"{\u2026}":t}function N_e(t,r){let n=this;if(r=r||{},Xw.call(n),r.loader&&n.loader(r.loader),r.logger&&n.logger(r.logger),r.logLevel!=null&&n.logLevel(r.logLevel),r.locale||t.locale){let s=an({},t.locale,r.locale);n.locale(gK(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=r.renderer||Ov.Canvas,n._scenegraph=new WK;let o=n._scenegraph.root;n._renderer=null,n._tooltip=r.tooltip||Kyr,n._redraw=!0,n._handler=new ZM().scene(o),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=yyr(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=zyr(n,t,r.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:an({},s)})),i.root&&i.root.set(o),o.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(o.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Jpt(n,n._width),n._viewHeight=eht(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Vyr(n),syr(n),ayr(n),n.description(t.description),r.hover&&n.hover(),r.container&&n.initialize(r.container,r.bind)}function uQ(t,r){return Pr(t._signals,r)?t._signals[r]:pt("Unrecognized signal name: "+$r(r))}function nht(t,r){let n=(t._targets||[]).filter(o=>o._update&&o._update.handler===r);return n.length?n[0]:null}function Gpt(t,r,n,o){let i=nht(n,o);return i||(i=k_e(t,()=>o(r,n.value)),i.handler=o,t.on(n,null,i)),t}function Wpt(t,r,n){let o=nht(r,n);return o&&r._targets.remove(o),t}var E_e,jpt,hyr,myr,gyr,_yr,Syr,Cyr,u$,Pyr,Zpt,Qpt,D_e,Vpt,oht=N(()=>{"use strict";Ls();tl();pB();qo();rQ();C_e();Dbe();yK();E_e="default";jpt="view",hyr="timer",myr="window",gyr={trap:!1};_yr="vega-bind",Syr="vega-bind-name",Cyr="vega-bind-radio";u$=t=>+t||0,Pyr=t=>({top:t,bottom:t,left:t,right:t});Zpt="width",Qpt="height",D_e="padding",Vpt={skip:!0};Dt(N_e,Xw,{evaluate(t,r,n){return je(this,null,function*(){if(yield Xw.prototype.evaluate.call(this,t,r),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,fyr(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(o){this.error(o)}return n&&SL(this,n),this})},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let r=t!=null?t+"":null;return r!==this._desc&&qpt(this._el,this._desc=r),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,r,n){let o=uQ(this,t);return arguments.length===1?o.value:this.update(o,r,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",Upt(t)):Upt(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(dB(t)||pt("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Xw.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(uQ(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Gyr,addEventListener(t,r,n){let o=r;return n&&n.trap===!1||(o=k_e(this,r),o.raw=r),this._handler.on(t,o),this},removeEventListener(t,r){for(var n=this._handler.handlers(t),o=n.length,i,s;--o>=0;)if(s=n[o].type,i=n[o].handler,t===s&&(r===i||r===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(t){let r=this._resizeListeners;return r.indexOf(t)<0&&r.push(t),this},removeResizeListener(t){var r=this._resizeListeners,n=r.indexOf(t);return n>=0&&r.splice(n,1),this},addSignalListener(t,r){return Gpt(this,t,uQ(this,t),r)},removeSignalListener(t,r){return Wpt(this,uQ(this,t),r)},addDataListener(t,r){return Gpt(this,t,cQ(this,t).values,r)},removeDataListener(t,r){return Wpt(this,cQ(this,t).values,r)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let r=A_e(this,null);this._globalCursor=!!t,r&&A_e(this,r)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:Xyr,events:xyr,finalize:wyr,hover:vyr,data:lyr,change:dQ,insert:uyr,remove:cyr,scale:Uyr,initialize:Ryr,toImageURL:Lyr,toCanvas:Byr,toSVG:$yr,getState:Wyr,setState:Yyr})});function cht(t,r,n){return lht=r||Jyr,uht=n||obr,fht(t.trim()).map(M_e)}function ibr(t){return uht[t]}function c$(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function fht(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=c$(t,i,aht,hQ+iht,mQ+sht),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function M_e(t){return t[0]==="["?sbr(t):abr(t)}function sbr(t){let r=t.length,n=1,o;if(n=c$(t,n,mQ,hQ,mQ),n===r)throw"Empty between selector: "+t;if(o=fht(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==rbr)throw"Expected '>' after between selector: "+t;o=o.map(M_e);let i=M_e(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function abr(t){let r={source:lht},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===sht){if(l=t.lastIndexOf(iht),l>=0){try{o=lbr(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===tbr&&(i=++l),u=c$(t,l,ebr),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=c$(t,l,hQ),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=c$(t,l,mQ),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==hQ)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||nbr.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):ibr(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function lbr(t){let r=t.split(aht);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var Jyr,hQ,mQ,iht,sht,ebr,aht,tbr,rbr,nbr,obr,lht,uht,dht=N(()=>{"use strict";Jyr="view",hQ="[",mQ="]",iht="{",sht="}",ebr=":",aht=",",tbr="@",rbr=">",nbr=/[[\]{}]/,obr={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});function ubr(t){return un(t)?t:{type:t||"pad"}}function fbr(t){return un(t)?t.signal?t:{top:f$(t.top),bottom:f$(t.bottom),left:f$(t.left),right:f$(t.right)}:cbr(f$(t))}function pht(t,r,n,o){return n!=null?(un(n)&&!Hr(n)||Hr(n)&&n.length&&un(n[0])?t.update[r]=n:t[o||"enter"][r]={value:n},1):0}function Wl(t,r,n){for(let o in r)pht(t,o,r[o]);for(let o in n)pht(t,o,n[o],"update")}function CF(t,r,n){for(let o in r)n&&Pr(n,o)||(t[o]=an(t[o]||{},r[o]));return t}function vF(t,r){return r&&(r.enter&&r.enter[t]||r.update&&r.update[t])}function Abr(t,r,n,o,i){let s={},a={},l,u,c,f;u="lineBreak",r==="text"&&i[u]!=null&&!vF(u,t)&&F_e(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===G_e?i.group:n===V_e?an({},i.mark,i[r]):null;for(u in f)c=vF(u,t)||(u==="fill"||u==="stroke")&&(vF("fill",t)||vF("stroke",t)),c||F_e(s,u,f[u]);Br(o).forEach(d=>{let p=i.style&&i.style[d];for(let h in p)vF(h,t)||F_e(s,h,p[h])}),t=an({},t);for(u in s)f=s[u],f.signal?(l=l||{})[u]=f:a[u]=f;return t.enter=an(a,t.enter),l&&(t.update=an(l,t.update)),t}function F_e(t,r,n){t[r]=n&&n.signal?{signal:n.signal}:{value:n}}function SQ(t){if(t.gradient!=null)return Ibr(t);let r=t.signal?`(${t.signal})`:t.color?kbr(t.color):t.field!=null?Oht(t.field):t.value!==void 0?$r(t.value):void 0;return t.scale!=null&&(r=Dbr(t,r)),r===void 0&&(r=null),t.exponent!=null&&(r=`pow(${r},${yQ(t.exponent)})`),t.mult!=null&&(r+=`*${yQ(t.mult)}`),t.offset!=null&&(r+=`+${yQ(t.offset)}`),t.round&&(r=`round(${r})`),r}function kbr(t){return t.c?gQ("hcl",t.h,t.c,t.l):t.h||t.s?gQ("hsl",t.h,t.s,t.l):t.l||t.a?gQ("lab",t.l,t.a,t.b):t.r||t.g||t.b?gQ("rgb",t.r,t.g,t.b):null}function Ibr(t){let r=[t.start,t.stop,t.count].map(n=>n==null?null:$r(n));for(;r.length&&Un(r)==null;)r.pop();return r.unshift(Fht(t.gradient)),`gradient(${r.join(",")})`}function yQ(t){return un(t)?"("+SQ(t)+")":t}function Oht(t){return Rht(un(t)?t:{datum:t})}function Rht(t){let r,n,o;if(t.signal)r="datum",o=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),r="item";n-- >0;)r+=".mark.group";t.parent?(o=t.parent,r+=".datum"):o=t.group}else t.datum?(r="datum",o=t.datum):pt("Invalid field reference: "+$r(t));return t.signal||(o=Jn(o)?KP(o).map($r).join("]["):Rht(o)),r+"["+o+"]"}function Dbr(t,r){let n=Fht(t.scale);return t.range!=null?r=`lerp(_range(${n}), ${+t.range})`:(r!==void 0&&(r=`_scale(${n}, ${r})`),t.band&&(r=(r?r+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+yQ(t.band)),t.extra&&(r=`(datum.extra ? _scale(${n}, datum.extra.value) : ${r})`)),r==null&&(r="0")),r}function Nbr(t){let r="";return t.forEach(n=>{let o=SQ(n);r+=n.test?`(${n.test})?${o}:`:o}),Un(r)===":"&&(r+="null"),r}function Pht(t,r,n,o,i,s){let a={};s=s||{},s.encoders={$encode:a},t=Abr(t,r,n,o,i.config);for(let l in t)a[l]=Mbr(t[l],r,s,i);return s}function Mbr(t,r,n,o){let i={},s={};for(let a in t)t[a]!=null&&(i[a]=Obr(Fbr(t[a]),o,n,s));return{$expr:{marktype:r,channels:i},$fields:Object.keys(s),$output:Object.keys(t)}}function Fbr(t){return Hr(t)?Nbr(t):SQ(t)}function Obr(t,r,n,o){let i=Vm(t,r);return i.$fields.forEach(s=>o[s]=1),an(n,i.$params),i.$expr}function hht(t,r){pt(t+' for "outer" push: '+$r(r))}function Lht(t,r){let n=t.name;if(t.push===Rbr)r.signals[n]||hht("No prior signal definition",n),Pbr.forEach(o=>{t[o]!==void 0&&hht("Invalid property ",o)});else{let o=r.addSignal(n,t.value);t.react===!1&&(o.react=!1),t.bind&&r.addBinding(n,t.bind)}}function P_e(t,r,n,o){this.id=-1,this.type=t,this.value=r,this.params=n,o&&(this.parent=o)}function CQ(t,r,n,o){return new P_e(t,r,n,o)}function _Q(t,r){return CQ("operator",t,r)}function Nr(t){let r={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(r),r}function h$(t,r){return r?{$field:t,$name:r}:{$field:t}}function mht(t,r){return{$compare:t,$order:r}}function Lbr(t,r){let n={$key:t};return r&&(n.$flat=!0),n}function $br(t){return un(t)?(t.order===Bbr?"-":"+")+EQ(t.op,t.field):""}function EQ(t,r){return(t&&t.signal?"$"+t.signal:t||"")+(t&&r?"_":"")+(r&&r.signal?"$"+r.signal:r||"")}function Pa(t){return t&&t.signal}function zbr(t){return t&&t.expr}function bQ(t){if(Pa(t))return!0;if(un(t)){for(let r in t)if(bQ(t[r]))return!0}return!1}function Wm(t,r){return t??r}function xA(t){return t&&t.signal||t}function m$(t,r){return(t.merge?Vbr:t.stream?Gbr:t.type?Wbr:pt("Invalid stream specification: "+$r(t)))(t,r)}function Ubr(t){return t===q_e?j_e:t||j_e}function Vbr(t,r){let n=t.merge.map(i=>m$(i,r)),o=H_e({merge:n},t,r);return r.addStream(o).id}function Gbr(t,r){let n=m$(t.stream,r),o=H_e({stream:n},t,r);return r.addStream(o).id}function Wbr(t,r){let n;t.type===ght?(n=r.event(ght,t.throttle),t={between:t.between,filter:t.filter}):n=r.event(Ubr(t.source),t.type);let o=H_e({stream:n},t,r);return Object.keys(o).length===1?n:r.addStream(o).id}function H_e(t,r,n){let o=r.between;return o&&(o.length!==2&&pt('Stream "between" parameter must have 2 entries: '+$r(r)),t.between=[m$(o[0],n),m$(o[1],n)]),o=r.filter?[].concat(r.filter):[],(r.marktype||r.markname||r.markrole)&&o.push(qbr(r.marktype,r.markname,r.markrole)),r.source===q_e&&o.push("inScope(event.item)"),o.length&&(t.filter=Vm("("+o.join(")&&(")+")",n).$expr),(o=r.throttle)!=null&&(t.throttle=+o),(o=r.debounce)!=null&&(t.debounce=+o),r.consume&&(t.consume=!0),t}function qbr(t,r,n){let o="event.item";return o+(t&&t!=="*"?"&&"+o+".mark.marktype==='"+t+"'":"")+(n?"&&"+o+".mark.role==='"+n+"'":"")+(r?"&&"+o+".mark.name==='"+r+"'":"")}function Ybr(t,r,n){let o=t.encode,i={target:n},s=t.events,a=t.update,l=[];s||pt("Signal update missing events specification."),Jn(s)&&(s=cht(s,r.isSubscope()?q_e:j_e)),s=Br(s).filter(u=>u.signal||u.scale?(l.push(u),0):1),l.length>1&&(l=[Kbr(l)]),s.length&&l.push(s.length>1?{merge:s}:s[0]),o!=null&&(a&&pt("Signal encode and update are mutually exclusive."),a="encode(item(),"+$r(o)+")"),i.update=Jn(a)?Vm(a,r):a.expr!=null?Vm(a.expr,r):a.value!=null?a.value:a.signal!=null?{$expr:Hbr,$params:{$value:r.signalRef(a.signal)}}:pt("Invalid signal update specification."),t.force&&(i.options={force:!0}),l.forEach(u=>r.addUpdate(an(Xbr(u,r),i)))}function Xbr(t,r){return{source:t.signal?r.signalRef(t.signal):t.scale?r.scaleRef(t.scale):m$(t,r)}}function Kbr(t){return{signal:"["+t.map(r=>r.scale?'scale("'+r.scale+'")':r.signal)+"]"}}function Zbr(t,r){let n=r.getSignal(t.name),o=t.update;t.init&&(o?pt("Signals can not include both init and update expressions."):(o=t.init,n.initonly=!0)),o&&(o=Vm(o,r),n.update=o.$expr,n.params=o.$params),t.on&&t.on.forEach(i=>Ybr(i,r,n.id))}function bxr(t,r){let n=t.type||"linear";N0e(n)||pt("Unrecognized scale type: "+$r(n)),r.addScale(t.name,{type:n,domain:void 0})}function xxr(t,r){let n=r.getScale(t.name).params,o;n.domain=Wht(t.domain,t,r),t.range!=null&&(n.range=Hht(t,r,n)),t.interpolate!=null&&Ixr(t.interpolate,n),t.nice!=null&&(n.nice=kxr(t.nice)),t.bins!=null&&(n.bins=Axr(t.bins,r));for(o in t)Pr(n,o)||o==="name"||(n[o]=Qp(t[o],r))}function Qp(t,r){return un(t)?t.signal?r.signalRef(t.signal):pt("Unsupported object: "+$r(t)):t}function xQ(t,r){return t.signal?r.signalRef(t.signal):t.map(n=>Qp(n,r))}function TQ(t){pt("Can not find data set: "+$r(t))}function Wht(t,r,n){if(!t){(r.domainMin!=null||r.domainMax!=null)&&pt("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(Hr(t)?vxr:t.fields?_xr:wxr)(t,r,n)}function vxr(t,r,n){return t.map(o=>Qp(o,n))}function wxr(t,r,n){let o=n.getData(t.data);return o||TQ(t.data),B_(r.type)?o.valuesRef(n,t.field,qht(t.sort,!1)):O0e(r.type)?o.domainRef(n,t.field):o.extentRef(n,t.field)}function _xr(t,r,n){let o=t.data,i=t.fields.reduce((s,a)=>(a=Jn(a)?{data:o,field:a}:Hr(a)||a.signal?Sxr(a,n):a,s.push(a),s),[]);return(B_(r.type)?Cxr:O0e(r.type)?Exr:Txr)(t,n,i)}function Sxr(t,r){let n="_:vega:_"+yxr++,o=Hm({});if(Hr(t))o.value={$ingest:t};else if(t.signal){let i="setdata("+$r(n)+","+t.signal+")";o.params.input=r.signalRef(i)}return r.addDataPipeline(n,[o,wA({})]),{data:n,field:"data"}}function Cxr(t,r,n){let o=qht(t.sort,!0),i,s,a=n.map(c=>{let f=r.getData(c.data);return f||TQ(c.data),f.countsRef(r,c.field,o)}),l={groupby:L_e,pulse:a};o&&(i=o.op||"count",s=o.field?EQ(i,o.field):"count",l.ops=[Ght[i]],l.fields=[r.fieldRef(s)],l.as=[s]),i=r.add(jht(l));let u=r.add(Hm({pulse:Nr(i)}));return s=r.add(gxr({field:L_e,sort:r.sortRef(o),pulse:Nr(u)})),Nr(s)}function qht(t,r){return t&&(!t.field&&!t.op?un(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?pt("No field provided for sort aggregate op: "+t.op):r&&t.field&&t.op&&!Ght[t.op]&&pt("Multiple domain scales can not be sorted using "+t.op)),t}function Exr(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||TQ(i.data),s.domainRef(r,i.field)});return Nr(r.add(lxr({values:o})))}function Txr(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||TQ(i.data),s.extentRef(r,i.field)});return Nr(r.add(axr({extents:o})))}function Axr(t,r){return t.signal||Hr(t)?xQ(t,r):r.objectProperty(t)}function kxr(t){return un(t)?{interval:Qp(t.interval),step:Qp(t.step)}:Qp(t)}function Ixr(t,r){r.interpolate=Qp(t.type||t),t.gamma!=null&&(r.interpolateGamma=Qp(t.gamma))}function Hht(t,r,n){let o=r.config.range,i=t.range;if(i.signal)return r.signalRef(i.signal);if(Jn(i)){if(o&&Pr(o,i))return t=an({},t,{range:o[i]}),Hht(t,r,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=B_(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:pt("Unrecognized scale range value: "+$r(i))}else if(i.scheme){n.scheme=Hr(i.scheme)?xQ(i.scheme,r):Qp(i.scheme,r),i.extent&&(n.schemeExtent=xQ(i.extent,r)),i.count&&(n.schemeCount=Qp(i.count,r));return}else if(i.step){n.rangeStep=Qp(i.step,r);return}else{if(B_(t.type)&&!Hr(i))return Wht(i,t,r);Hr(i)||pt("Unsupported range type: "+$r(i))}return i.map(s=>(Hr(s)?xQ:Qp)(s,r))}function Dxr(t,r){let n=r.config.projection||{},o={};for(let i in t)i!=="name"&&(o[i]=B_e(t[i],i,r));for(let i in n)o[i]==null&&(o[i]=B_e(n[i],i,r));r.addProjection(t.name,o)}function B_e(t,r,n){return Hr(t)?t.map(o=>B_e(o,r,n)):un(t)?t.signal?n.signalRef(t.signal):r==="fit"?t:pt("Unsupported parameter object: "+$r(t)):t}function g$(t){return t.type=AQ,t.interactive=t.interactive||!1,t}function Af(t,r){let n=(o,i)=>Wm(t[o],Wm(r[o],i));return n.isVertical=o=>Nxr===Wm(t.direction,r.direction||(o?r.symbolDirection:r.gradientDirection)),n.gradientLength=()=>Wm(t.gradientLength,r.gradientLength||r.gradientWidth),n.gradientThickness=()=>Wm(t.gradientThickness,r.gradientThickness||r.gradientHeight),n.entryColumns=()=>Wm(t.columns,Wm(r.columns,+n.isVertical(!0))),n}function Kht(t,r){let n=r&&(r.update&&r.update[t]||r.enter&&r.enter[t]);return n&&n.signal?n:n?n.value:null}function qxr(t,r,n){let o=r.config.style[n];return o&&o[t]}function kQ(t,r,n){return`item.anchor === '${Mxr}' ? ${t} : item.anchor === '${Oxr}' ? ${r} : ${n}`}function Hxr(t){let r=t("tickBand"),n=t("tickOffset"),o,i;return r?r.signal?(o={signal:`(${r.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${r.signal}) === 'extent'`},un(n)||(n={signal:`(${r.signal}) === 'extent' ? 0 : ${n}`})):r==="extent"?(o=1,i=!0,n=0):(o=.5,i=!1):(o=t("bandPosition"),i=t("tickExtra")),{extra:i,band:o,offset:n}}function Zht(t,r){return r?t?un(t)?Object.assign({},t,{offset:Zht(t.offset,r)}):{value:t,offset:r}:r:t}function qd(t,r){return r?(t.name=r.name,t.style=r.style||t.style,t.interactive=!!r.interactive,t.encode=CF(t.encode,r,b$)):t.interactive=!1,t}function Yxr(t,r,n,o){let i=Af(t,n),s=i.isVertical(),a=i.gradientThickness(),l=i.gradientLength(),u,c,f,d,p;s?(c=[0,1],f=[0,0],d=a,p=l):(c=[0,0],f=[1,0],d=l,p=a);let h={enter:u={opacity:qn,x:qn,y:qn,width:pl(d),height:pl(p)},update:an({},u,{opacity:eh,fill:{gradient:r,start:c,stop:f}}),exit:{opacity:qn}};return Wl(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),qd({type:Xht,role:wbr,encode:h},o)}function Xxr(t,r,n,o,i){let s=Af(t,n),a=s.isVertical(),l=s.gradientThickness(),u=s.gradientLength(),c,f,d,p,h="";a?(c="y",d="y2",f="x",p="width",h="1-"):(c="x",d="x2",f="y",p="height");let m={opacity:qn,fill:{scale:r,field:Jp}};m[c]={signal:h+"datum."+SF,mult:u},m[f]=qn,m[d]={signal:h+"datum."+Pxr,mult:u},m[p]=pl(l);let g={enter:m,update:an({},m,{opacity:eh}),exit:{opacity:qn}};return Wl(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),qd({type:Xht,role:xbr,key:Jp,from:i,encode:g},o)}function xht(t,r,n,o){let i=Af(t,r),s=i.isVertical(),a=pl(i.gradientThickness()),l=i.gradientLength(),u=i("labelOverlap"),c,f,d,p,h="",m={enter:c={opacity:qn},update:f={opacity:eh,text:{field:Y_e}},exit:{opacity:qn}};return Wl(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Wm(t.labelLimit,r.gradientLabelLimit)}),s?(c.align={value:"left"},c.baseline=f.baseline={signal:Zxr},d="y",p="x",h="1-"):(c.align=f.align={signal:Kxr},c.baseline={value:"top"},d="x",p="y"),c[d]=f[d]={signal:h+"datum."+SF,mult:l},c[p]=f[p]=a,a.offset=Wm(t.labelOffset,r.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+$_e}:void 0,qd({type:_A,role:Mht,style:y$,key:Jp,from:o,encode:m,overlap:u},n)}function Qxr(t,r,n,o,i){let s=Af(t,r),a=n.entries,l=!!(a&&a.interactive),u=a?a.name:void 0,c=s("clipHeight"),f=s("symbolOffset"),d={data:"value"},p=`(${i}) ? datum.${Rxr} : datum.${U_e}`,h=c?pl(c):{field:U_e},m=`datum.${$_e}`,g=`max(1, ${i})`,y,b,x,v,w;h.mult=.5,y={enter:b={opacity:qn,x:{signal:p,mult:.5,offset:f},y:h},update:x={opacity:eh,x:b.x,y:b.y},exit:{opacity:qn}};let _=null,S=null;t.fill||(_=r.symbolBaseFillColor,S=r.symbolBaseStrokeColor),Wl(y,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),K_e.forEach(I=>{t[I]&&(x[I]=b[I]={scale:t[I],field:Jp})});let C=qd({type:Wxr,role:_br,key:Jp,from:d,clip:c?!0:void 0,encode:y},n.symbols),E=pl(f);E.offset=s("labelOffset"),y={enter:b={opacity:qn,x:{signal:p,offset:E},y:h},update:x={opacity:eh,text:{field:Y_e},x:b.x,y:b.y},exit:{opacity:qn}},Wl(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});let T=qd({type:_A,role:Mht,style:y$,key:Jp,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!c},width:qn,height:c?pl(c):qn,opacity:qn},exit:{opacity:qn},update:x={opacity:eh,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,x.row.signal=`${m}%${v}`,x.column.signal=`floor(${m} / ${v})`,w={field:["row",m]}):(x.row.signal=`floor(${m} / ${g})`,x.column.signal=`${m} % ${g}`,w={field:m}),x.column.signal=`(${i})?${x.column.signal}:${m}`,o={facet:{data:o,name:"value",groupby:$_e}},g$({role:W_e,from:o,encode:CF(y,a,b$),marks:[C,T],name:u,interactive:l,sort:w})}function Jxr(t,r){let n=Af(t,r);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}function avr(t,r,n,o){let i=Af(t,r),s={enter:{opacity:qn},update:{opacity:eh,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:qn}};return Wl(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:ovr},angle:{signal:ivr},align:{signal:nvr},baseline:{signal:svr},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),qd({type:_A,role:Sbr,style:X_e,from:o,encode:s},n)}function lvr(t,r){let n;return un(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+vht(t.path)+")":t.sphere&&(n="geoShape("+vht(t.sphere)+', {type: "Sphere"})')),n?r.signalRef(n):!!t}function vht(t){return un(t)&&t.signal?t.signal:$r(t)}function Qht(t){let r=t.role||"";return!r.indexOf("axis")||!r.indexOf("legend")||!r.indexOf("title")?r:t.type===AQ?W_e:r||V_e}function uvr(t){return{marktype:t.type,name:t.name||void 0,role:t.role||Qht(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function cvr(t,r){return t&&t.signal?r.signalRef(t.signal):t!==!1}function t2e(t,r){let n=VW(t.type);n||pt("Unrecognized transform type: "+$r(t.type));let o=CQ(n.type.toLowerCase(),null,Jht(n,t,r));return t.signal&&r.addSignal(t.signal,r.proxy(o)),o.metadata=n.metadata||{},o}function Jht(t,r,n){let o={},i=t.params.length;for(let s=0;s<i;++s){let a=t.params[s];o[a.name]=fvr(a,r,n)}return o}function fvr(t,r,n){let o=t.type,i=r[t.name];if(o==="index")return dvr(t,r,n);if(i===void 0){t.required&&pt("Missing required "+$r(r.type)+" parameter: "+$r(t.name));return}else{if(o==="param")return pvr(t,r,n);if(o==="projection")return n.projectionRef(r[t.name])}return t.array&&!Pa(i)?i.map(s=>wht(t,s,n)):wht(t,i,n)}function wht(t,r,n){let o=t.type;if(Pa(r))return Sht(o)?pt("Expression references can not be signals."):O_e(o)?n.fieldRef(r):Cht(o)?n.compareRef(r):n.signalRef(r.signal);{let i=t.expr||O_e(o);return i&&hvr(r)?n.exprRef(r.expr,r.as):i&&mvr(r)?h$(r.field,r.as):Sht(o)?Vm(r,n):gvr(o)?Nr(n.getData(r).values):O_e(o)?h$(r):Cht(o)?n.compareRef(r):r}}function dvr(t,r,n){return Jn(r.from)||pt('Lookup "from" parameter must be a string literal.'),n.getData(r.from).lookupRef(n,r.key)}function pvr(t,r,n){let o=r[t.name];return t.array?(Hr(o)||pt("Expected an array of sub-parameters. Instead: "+$r(o)),o.map(i=>_ht(t,i,n))):_ht(t,o,n)}function _ht(t,r,n){let o=t.params.length,i;for(let a=0;a<o;++a){i=t.params[a];for(let l in i.key)if(i.key[l]!==r[l]){i=null;break}if(i)break}i||pt("Unsupported parameter: "+$r(r));let s=an(Jht(i,r,n),i.key);return Nr(n.add(cxr(s)))}function yvr(t,r,n){let o,i,s,a,l;return t?(o=t.facet)&&(r||pt("Only group marks can be faceted."),o.field!=null?a=l=wQ(o,n):(t.data?l=Nr(n.getData(t.data).aggregate):(s=t2e(an({type:"aggregate",groupby:Br(o.groupby)},o.aggregate),n),s.params.key=n.keyRef(o.groupby),s.params.pulse=wQ(o,n),a=l=Nr(n.add(s))),i=n.keyRef(o.groupby,!0))):a=Nr(n.add(Hm(null,[{}]))),a||(a=wQ(t,n)),{key:i,pulse:a,parent:l}}function wQ(t,r){return t.$ref?t:t.data&&t.data.$ref?t.data:Nr(r.getData(t.data).output)}function vA(t,r,n,o,i){this.scope=t,this.input=r,this.output=n,this.values=o,this.aggregate=i,this.index={}}function emt(t){return Jn(t)?t:null}function Eht(t,r,n){let o=EQ(n.op,n.field),i;if(r.ops){for(let s=0,a=r.as.length;s<a;++s)if(r.as[s]===o)return}else r.ops=["count"],r.fields=[null],r.as=["count"];n.op&&(r.ops.push((i=n.op.signal)?t.signalRef(i):n.op),r.fields.push(t.fieldRef(n.field)),r.as.push(o))}function d$(t,r,n,o,i,s,a){let l=r[n]||(r[n]={}),u=$br(s),c=emt(i),f,d;if(c!=null&&(t=r.scope,c=c+(u?"|"+u:""),f=l[c]),!f){let p=s?{field:L_e,pulse:r.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:Nr(r.output)};u&&(p.sort=t.sortRef(s)),d=t.add(CQ(o,void 0,p)),a&&(r.index[i]=d),f=Nr(d),c!=null&&(l[c]=f)}return f}function bvr(t,r,n){let o=t.from.facet,i=o.name,s=wQ(o,r),a;o.name||pt("Facet must have a name: "+$r(o)),o.data||pt("Facet must reference a data set: "+$r(o)),o.field?a=r.add(zht({field:r.fieldRef(o.field),pulse:s})):o.groupby?a=r.add(txr({key:r.keyRef(o.groupby),group:Nr(r.proxy(n.parent)),pulse:s})):pt("Facet must specify groupby or field: "+$r(o));let l=r.fork(),u=l.add(Hm()),c=l.add(wA({pulse:Nr(u)}));l.addData(i,new vA(l,u,u,c)),l.addSignal("parent",null),a.params.subflow={$subflow:l.parse(t).toRuntime()}}function xvr(t,r,n){let o=r.add(zht({pulse:n.pulse})),i=r.fork();i.add(wA()),i.addSignal("parent",null),o.params.subflow={$subflow:i.parse(t).toRuntime()}}function tmt(t,r,n){let o=t.remove,i=t.insert,s=t.toggle,a=t.modify,l=t.values,u=r.add(_Q()),c="if("+t.trigger+',modify("'+n+'",'+[i,o,s,a,l].map(d=>d??"null").join(",")+"),0)",f=Vm(c,r);u.update=f.$expr,u.params=f.$params}function DQ(t,r){let n=Qht(t),o=t.type===AQ,i=t.from&&t.from.facet,s=t.overlap,a=t.layout||n===W_e||n===G_e,l,u,c,f,d,p,h,m=n===V_e||a||i,g=yvr(t.from,o,r);u=r.add(Jbr({key:g.key||(t.key?h$(t.key):void 0),pulse:g.pulse,clean:!o}));let y=Nr(u);u=c=r.add(Hm({pulse:y})),u=r.add(sxr({markdef:uvr(t),interactive:cvr(t.interactive,r),clip:lvr(t.clip,r),context:{$context:!0},groups:r.lookup(),parent:r.signals.parent?r.signalRef("parent"):null,index:r.markpath(),pulse:Nr(u)}));let b=Nr(u);u=f=r.add($ht(Pht(t.encode,t.type,n,t.style,r,{mod:!1,pulse:b}))),u.params.parent=r.encode(),t.transform&&t.transform.forEach(S=>{let C=t2e(S,r),E=C.metadata;(E.generates||E.changes)&&pt("Mark transforms should not generate new data."),E.nomod||(f.params.mod=!0),C.params.pulse=Nr(u),r.add(u=C)}),t.sort&&(u=r.add(mxr({sort:r.compareRef(t.sort),pulse:Nr(u)})));let x=Nr(u);(i||a)&&(a=r.add(Vht({layout:r.objectProperty(t.layout),legends:r.legends,mark:b,pulse:x})),p=Nr(a));let v=r.add(Bht({mark:b,pulse:p||x}));h=Nr(v),o&&(m&&(l=r.operators,l.pop(),a&&l.pop()),r.pushState(x,p||h,y),i?bvr(t,r,g):m?xvr(t,r,g):r.parse(t),r.popState(),m&&(a&&l.push(a),l.push(v))),s&&(h=vvr(s,h,r));let w=r.add(Uht({pulse:h})),_=r.add(wA({pulse:Nr(w)},void 0,r.parent()));t.name!=null&&(d=t.name,r.addData(d,new vA(r,c,w,_)),t.on&&t.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&pt("Marks only support modify triggers."),tmt(S,r,d)}))}function vvr(t,r,n){let o=t.method,i=t.bound,s=t.separation,a={separation:Pa(s)?n.signalRef(s.signal):s,method:Pa(o)?n.signalRef(o.signal):o,pulse:r};if(t.order&&(a.sort=n.compareRef({field:t.order})),i){let l=i.tolerance;a.boundTolerance=Pa(l)?n.signalRef(l.signal):+l,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Nr(n.add(uxr(a)))}function wvr(t,r){let n=r.config.legend,o=t.encode||{},i=Af(t,n),s=o.legend||{},a=s.name||void 0,l=s.interactive,u=s.style,c={},f=0,d,p,h;K_e.forEach(v=>t[v]?(c[v]=t[v],f=f||t[v]):0),f||pt("Missing valid scale for legend.");let m=_vr(t,r.scaleType(f)),g={title:t.title!=null,scales:c,type:m,vgrad:m!=="symbol"&&i.isVertical()},y=Nr(r.add(Hm(null,[g]))),b={enter:{x:{value:0},y:{value:0}}},x=Nr(r.add(oxr(p={type:m,scale:r.scaleRef(f),count:r.objectProperty(i("tickCount")),limit:r.property(i("symbolLimit")),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)})));return m===vQ?(h=[Yxr(t,f,n,o.gradient),xht(t,n,o.labels,x)],p.count=p.count||r.signalRef(`max(2,2*floor((${xA(i.gradientLength())})/100))`)):m===z_e?h=[Xxr(t,f,n,o.gradient,x),xht(t,n,o.labels,x)]:(d=Jxr(t,n),h=[Qxr(t,n,o,x,xA(d.columns))],p.size=Evr(t,r,h[0].marks)),h=[g$({role:vbr,from:y,encode:b,marks:h,layout:d,interactive:l})],g.title&&h.push(avr(t,n,o.title,y)),DQ(g$({role:bbr,from:y,encode:CF(Cvr(i,t,n),s,b$),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:l,style:u}),r)}function _vr(t,r){let n=t.type||bht;return!t.type&&Svr(t)===1&&(t.fill||t.stroke)&&(n=Q4(r)?vQ:UY(r)?z_e:bht),n!==vQ?n:UY(r)?z_e:vQ}function Svr(t){return K_e.reduce((r,n)=>r+(t[n]?1:0),0)}function Cvr(t,r,n){let o={enter:{},update:{}};return Wl(o,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:r.format,formatType:r.formatType}),o}function Evr(t,r,n){let o=xA(Tht("size",t,n)),i=xA(Tht("strokeWidth",t,n)),s=xA(Tvr(n[1].encode,r,y$));return Vm(`max(ceil(sqrt(${o})+${i}),${s})`,r)}function Tht(t,r,n){return r[t]?`scale("${r[t]}",datum)`:Kht(t,n[0].encode)}function Tvr(t,r,n){return Kht("fontSize",t)||qxr("fontSize",r,n)}function kvr(t,r){t=Jn(t)?{text:t}:t;let n=Af(t,r.config.title),o=t.encode||{},i=o.group||{},s=i.name||void 0,a=i.interactive,l=i.style,u=[],c={},f=Nr(r.add(Hm(null,[c])));return u.push(Nvr(t,n,Ivr(t),f)),t.subtitle&&u.push(Mvr(t,n,o.subtitle,f)),DQ(g$({role:Cbr,from:f,encode:Dvr(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:l}),r)}function Ivr(t){let r=t.encode;return r&&r.title||an({name:t.name,interactive:t.interactive,style:t.style},r)}function Dvr(t,r){let n={enter:{},update:{}};return Wl(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:Q_e},angle:{signal:Avr},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),CF(n,r,b$)}function Nvr(t,r,n,o){let i={value:0},s=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Wl(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("color"),font:r("font"),fontSize:r("fontSize"),fontStyle:r("fontStyle"),fontWeight:r("fontWeight"),lineHeight:r("lineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),qd({type:_A,role:Ebr,style:Lxr,from:o,encode:a},n)}function Mvr(t,r,n,o){let i={value:0},s=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Wl(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("subtitleColor"),font:r("subtitleFont"),fontSize:r("subtitleFontSize"),fontStyle:r("subtitleFontStyle"),fontWeight:r("subtitleFontWeight"),lineHeight:r("subtitleLineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),qd({type:_A,role:Tbr,style:jxr,from:o,encode:a},n)}function Fvr(t,r){let n=[];t.transform&&t.transform.forEach(o=>{n.push(t2e(o,r))}),t.on&&t.on.forEach(o=>{tmt(o,r,t.name)}),r.addDataPipeline(t.name,Ovr(t,r,n))}function Ovr(t,r,n){let o=[],i=null,s=!1,a=!1,l,u,c,f,d;for(t.values?Pa(t.values)||bQ(t.format)?(o.push(Aht(r,t)),o.push(i=bA())):o.push(i=bA({$ingest:t.values,$format:t.format})):t.url?bQ(t.url)||bQ(t.format)?(o.push(Aht(r,t)),o.push(i=bA())):o.push(i=bA({$request:t.url,$format:t.format})):t.source&&(i=l=Br(t.source).map(p=>Nr(r.getData(p).output)),o.push(null)),u=0,c=n.length;u<c;++u)f=n[u],d=f.metadata,!i&&!d.source&&o.push(i=bA()),o.push(f),d.generates&&(a=!0),d.modifies&&!a&&(s=!0),d.source?i=f:d.changes&&(i=null);return l&&(c=l.length-1,o[0]=pxr({derive:s,pulse:c?l:l[0]}),(s||c)&&o.splice(1,0,bA())),i||o.push(bA()),o.push(wA({})),o}function bA(t){let r=Hm({},t);return r.metadata={source:!0},r}function Aht(t,r){return ixr({url:r.url?t.property(r.url):void 0,async:r.async?t.property(r.async):void 0,values:r.values?t.property(r.values):void 0,format:t.objectProperty(r.format)})}function xF(t,r,n,o){let i;if(r&&Pr(r,t))return r[t];if(Pr(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return o[X_e][i]}else if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return o[y$][i]}return null}function Iht(t){let r={};for(let n of t)if(n)for(let o in n)r[o]=1;return Object.keys(r)}function Vvr(t,r){var n=r.config,o=n.style,i=n.axis,s=r.scaleType(t.scale)==="band"&&n.axisBand,a=t.orient,l,u,c;if(Pa(a)){let d=Iht([n.axisX,n.axisY]),p=Iht([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(c of d)l[c]=hl(a,xF(c,n.axisX,i,o),xF(c,n.axisY,i,o));u={};for(c of p)u[c]=zvr(a.signal,xF(c,n.axisTop,i,o),xF(c,n.axisBottom,i,o),xF(c,n.axisLeft,i,o),xF(c,n.axisRight,i,o))}else l=a===Ym||a===C2?n.axisX:n.axisY,u=n["axis"+a[0].toUpperCase()+a.slice(1)];return l||u||s?an({},i,l,u,s):i}function Gvr(t,r,n,o){let i=Af(t,r),s=t.orient,a,l,u={enter:a={opacity:qn},update:l={opacity:eh},exit:{opacity:qn}};Wl(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let c=Dht(t,0),f=Dht(t,1);return a.x=l.x=hl(s,c,qn),a.x2=l.x2=hl(s,f),a.y=l.y=qm(s,c,qn),a.y2=l.y2=qm(s,f),qd({type:Z_e,role:pbr,from:o,encode:u},n)}function Dht(t,r){return{scale:t.scale,range:r}}function Wvr(t,r,n,o,i){let s=Af(t,r),a=t.orient,l=t.gridScale,u=NQ(a,1,-1),c=qvr(t.offset,u),f,d,p,h={enter:f={opacity:qn},update:p={opacity:eh},exit:d={opacity:qn}};Wl(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});let m={scale:t.scale,field:Jp,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=hl(a,{signal:"height"},{signal:"width"}),y=l?{scale:l,range:0,mult:u,offset:c}:{value:0,offset:c},b=l?{scale:l,range:1,mult:u,offset:c}:an(g,{mult:u,offset:c});return f.x=p.x=hl(a,m,y),f.y=p.y=qm(a,m,y),f.x2=p.x2=qm(a,b),f.y2=p.y2=hl(a,b),d.x=hl(a,m),d.y=qm(a,m),qd({type:Z_e,role:hbr,key:Jp,from:o,encode:h},n)}function qvr(t,r){if(r!==1)if(!un(t))t=Pa(r)?{signal:`(${r.signal}) * (${t||0})`}:r*(t||0);else{let n=t=an({},t);for(;n.mult!=null;)if(un(n.mult))n=n.mult=an({},n.mult);else return n.mult=Pa(r)?{signal:`(${n.mult}) * (${r.signal})`}:n.mult*r,t;n.mult=r}return t}function Hvr(t,r,n,o,i,s){let a=Af(t,r),l=t.orient,u=NQ(l,-1,1),c,f,d,p={enter:c={opacity:qn},update:d={opacity:eh},exit:f={opacity:qn}};Wl(p,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let h=pl(i);h.mult=u;let m={scale:t.scale,field:Jp,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return d.y=c.y=hl(l,qn,m),d.y2=c.y2=hl(l,h),f.x=hl(l,m),d.x=c.x=qm(l,qn,m),d.x2=c.x2=qm(l,h),f.y=qm(l,m),qd({type:Z_e,role:gbr,key:Jp,from:o,encode:p},n)}function R_e(t,r,n,o,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+r+","+n+","+o+","+i+")"}}function Yvr(t,r,n,o,i,s){let a=Af(t,r),l=t.orient,u=t.scale,c=NQ(l,-1,1),f=xA(a("labelFlush")),d=xA(a("labelFlushOffset")),p=a("labelAlign"),h=a("labelBaseline"),m=f===0||!!f,g,y=pl(i);y.mult=c,y.offset=pl(a("labelPadding")||0),y.offset.mult=c;let b={scale:u,field:Jp,band:.5,offset:Zht(s.offset,a("labelOffset"))},x=hl(l,m?R_e(u,f,'"left"','"right"','"center"'):{value:"center"},Rvr(l,"left","right")),v=hl(l,nmt(l,"bottom","top"),m?R_e(u,f,'"top"','"bottom"','"middle"'):{value:"middle"}),w=R_e(u,f,`-(${d})`,d,0);m=m&&d;let _={opacity:qn,x:hl(l,b,y),y:qm(l,b,y)},S={enter:_,update:g={opacity:eh,text:{field:Y_e},x:_.x,y:_.y,align:x,baseline:v},exit:{opacity:qn,x:_.x,y:_.y}};Wl(S,{dx:!p&&m?hl(l,w):null,dy:!h&&m?qm(l,w):null}),Wl(S,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:p,baseline:h});let C=a("labelBound"),E=a("labelOverlap");return E=E||C?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:C?{scale:u,orient:l,tolerance:C}:null}:void 0,g.align!==x&&(g.align=_F(g.align,x)),g.baseline!==v&&(g.baseline=_F(g.baseline,v)),qd({type:_A,role:mbr,style:y$,key:Jp,from:o,encode:S,overlap:E},n)}function Xvr(t,r,n,o){let i=Af(t,r),s=t.orient,a=NQ(s,-1,1),l,u,c={enter:l={opacity:qn,anchor:pl(i("titleAnchor",null)),align:{signal:Q_e}},update:u=an({},l,{opacity:eh,text:pl(t.title)}),exit:{opacity:qn}},f={signal:`lerp(range("${t.scale}"), ${kQ(0,1,.5)})`};return u.x=hl(s,f),u.y=qm(s,f),l.angle=hl(s,qn,Uvr(a,90)),l.baseline=hl(s,nmt(s,C2,Ym),{value:C2}),u.angle=l.angle,u.baseline=l.baseline,Wl(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Kvr(i,s,c,n),c.update.align=_F(c.update.align,l.align),c.update.angle=_F(c.update.angle,l.angle),c.update.baseline=_F(c.update.baseline,l.baseline),qd({type:_A,role:ybr,style:X_e,from:o,encode:c},n)}function Kvr(t,r,n,o){let i=(l,u)=>l!=null?(n.update[u]=_F(pl(l),n.update[u]),!1):!vF(u,o),s=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===s?pl(a):hl(r,pl(a),pl(s))}function Zvr(t,r){let n=Vvr(t,r),o=t.encode||{},i=o.axis||{},s=i.name||void 0,a=i.interactive,l=i.style,u=Af(t,n),c=Hxr(u),f={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:t.title!=null},d=Nr(r.add(Hm({},[f]))),p=Nr(r.add(Qbr({scale:r.scaleRef(t.scale),extra:r.property(c.extra),count:r.objectProperty(t.tickCount),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)}))),h=[],m;return f.grid&&h.push(Wvr(t,n,o.grid,p,c)),f.ticks&&(m=u("tickSize"),h.push(Hvr(t,n,o.ticks,p,m,c))),f.labels&&(m=f.ticks?m:0,h.push(Yvr(t,n,o.labels,p,m,c))),f.domain&&h.push(Gvr(t,n,o.domain,d)),f.title&&h.push(Xvr(t,n,o.title,d)),DQ(g$({role:dbr,from:d,encode:CF(Qvr(u,t),i,b$),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:a,style:l}),r)}function Qvr(t,r){let n={enter:{},update:{}};return Wl(n,{orient:t("orient"),offset:t("offset")||0,position:Wm(r.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${r.scale}")))`},translate:t("translate"),format:r.format,formatType:r.formatType}),n}function imt(t,r,n){let o=Br(t.signals),i=Br(t.scales);return n||o.forEach(s=>Lht(s,r)),Br(t.projections).forEach(s=>Dxr(s,r)),i.forEach(s=>bxr(s,r)),Br(t.data).forEach(s=>Fvr(s,r)),i.forEach(s=>xxr(s,r)),(n||o).forEach(s=>Zbr(s,r)),Br(t.axes).forEach(s=>Zvr(s,r)),Br(t.marks).forEach(s=>DQ(s,r)),Br(t.legends).forEach(s=>wvr(s,r)),t.title&&kvr(t.title,r),r.parseLambdas(),r}function e1r(t,r){let n=r.config,o=Nr(r.root=r.add(_Q())),i=t1r(t,n);i.forEach(c=>Lht(c,r)),r.description=t.description||n.description,r.eventConfig=n.events,r.legends=r.objectProperty(n.legend&&n.legend.layout),r.locale=n.locale;let s=r.add(Hm()),a=r.add($ht(Pht(Jvr(t.encode),AQ,G_e,t.style,r,{pulse:Nr(s)}))),l=r.add(Vht({layout:r.objectProperty(t.layout),legends:r.legends,autosize:r.signalRef("autosize"),mark:o,pulse:Nr(a)}));r.operators.pop(),r.pushState(Nr(a),Nr(l),null),imt(t,r,i),r.operators.push(l);let u=r.add(Bht({mark:o,pulse:Nr(l)}));return u=r.add(Uht({pulse:Nr(u)})),u=r.add(wA({pulse:Nr(u)})),r.addData("root",new vA(r,s,s,u)),r}function p$(t,r){return r&&r.signal?{name:t,update:r.signal}:{name:t,value:r}}function t1r(t,r){let n=a=>Wm(t[a],r[a]),o=[p$("background",n("background")),p$("autosize",ubr(n("autosize"))),p$("padding",fbr(n("padding"))),p$("width",n("width")||0),p$("height",n("height")||0)],i=o.reduce((a,l)=>(a[l.name]=l,a),{}),s={};return Br(t.signals).forEach(a=>{Pr(i,a.name)?a=an(i[a.name],a):o.push(a),s[a.name]=a}),Br(r.signals).forEach(a=>{!Pr(s,a.name)&&!Pr(i,a.name)&&o.push(a)}),o}function smt(t,r){this.config=t||{},this.options=r||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Nht(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function n2e(t){return(Hr(t)?r1r:n1r)(t)}function r1r(t){let r=t.length,n="[";for(let o=0;o<r;++o){let i=t[o];n+=(o>0?",":"")+(un(i)?i.signal||n2e(i):$r(i))}return n+"]"}function n1r(t){let r="{",n=0,o,i;for(o in t)i=t[o],r+=(++n>1?",":"")+$r(o)+":"+(un(i)?i.signal||n2e(i):$r(i));return r+"}"}function o1r(){let t="sans-serif",o="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:o},area:{fill:o},image:null,line:{stroke:o,strokeWidth:2},path:{stroke:o},rect:{fill:o},rule:{stroke:i},shape:{stroke:o},symbol:{fill:o,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:o,size:2},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function amt(t,r,n){return un(t)||pt("Input Vega specification must be an object."),r=JD(o1r(),r,t.config),e1r(t,new smt(r,n)).toRuntime()}var f$,cbr,pl,V_e,G_e,W_e,dbr,pbr,hbr,mbr,gbr,ybr,bbr,xbr,vbr,wbr,Mht,_br,Sbr,Cbr,Ebr,Tbr,Fht,gQ,Rbr,Pbr,L_e,jbr,Bbr,q_e,j_e,ght,Hbr,Zo,jht,Qbr,Bht,Hm,yht,Jbr,$ht,exr,txr,rxr,nxr,oxr,ixr,sxr,axr,lxr,uxr,cxr,zht,fxr,dxr,pxr,Uht,hxr,wA,mxr,Vht,gxr,yxr,Ght,Ym,EF,TF,C2,Yht,Nxr,Mxr,Fxr,Oxr,$_e,Y_e,Rxr,SF,Pxr,Jp,y$,X_e,Lxr,jxr,bht,vQ,z_e,U_e,Bxr,$xr,zxr,Uxr,Vxr,Gxr,K_e,b$,qn,eh,AQ,Xht,Z_e,Wxr,_A,Q_e,Kxr,Zxr,J_e,e2e,IQ,evr,tvr,rvr,nvr,ovr,ivr,svr,hvr,mvr,gvr,Sht,O_e,Cht,Avr,rmt,NQ,hl,qm,nmt,Rvr,Pvr,Lvr,jvr,Bvr,$vr,omt,kht,r2e,zvr,wF,Uvr,_F,Jvr,lmt=N(()=>{"use strict";Ls();rQ();dht();yM();tl();f$=t=>+t||0,cbr=t=>({top:t,bottom:t,left:t,right:t});pl=t=>un(t)&&!Hr(t)?an({},t):{value:t};V_e="mark",G_e="frame",W_e="scope",dbr="axis",pbr="axis-domain",hbr="axis-grid",mbr="axis-label",gbr="axis-tick",ybr="axis-title",bbr="legend",xbr="legend-band",vbr="legend-entry",wbr="legend-gradient",Mht="legend-label",_br="legend-symbol",Sbr="legend-title",Cbr="title",Ebr="title-text",Tbr="title-subtitle";Fht=t=>Jn(t)?$r(t):t.signal?`(${t.signal})`:Oht(t);gQ=(t,r,n,o)=>`(${t}(${[r,n,o].map(SQ).join(",")})+'')`;Rbr="outer",Pbr=["value","update","init","react","bind"];L_e=h$("key");jbr="ascending",Bbr="descending";q_e="scope",j_e="view";ght="timer";Hbr={code:"_.$value",ast:{type:"Identifier",value:"value"}};Zo=t=>(r,n,o)=>CQ(t,n,r||void 0,o),jht=Zo("aggregate"),Qbr=Zo("axisticks"),Bht=Zo("bound"),Hm=Zo("collect"),yht=Zo("compare"),Jbr=Zo("datajoin"),$ht=Zo("encode"),exr=Zo("expression"),txr=Zo("facet"),rxr=Zo("field"),nxr=Zo("key"),oxr=Zo("legendentries"),ixr=Zo("load"),sxr=Zo("mark"),axr=Zo("multiextent"),lxr=Zo("multivalues"),uxr=Zo("overlap"),cxr=Zo("params"),zht=Zo("prefacet"),fxr=Zo("projection"),dxr=Zo("proxy"),pxr=Zo("relay"),Uht=Zo("render"),hxr=Zo("scale"),wA=Zo("sieve"),mxr=Zo("sortitems"),Vht=Zo("viewlayout"),gxr=Zo("values"),yxr=0,Ght={min:"min",max:"max",count:"sum"};Ym="top",EF="left",TF="right",C2="bottom",Yht="center",Nxr="vertical",Mxr="start",Fxr="middle",Oxr="end",$_e="index",Y_e="label",Rxr="offset",SF="perc",Pxr="perc2",Jp="value",y$="guide-label",X_e="guide-title",Lxr="group-title",jxr="group-subtitle",bht="symbol",vQ="gradient",z_e="discrete",U_e="size",Bxr="shape",$xr="fill",zxr="stroke",Uxr="strokeWidth",Vxr="strokeDash",Gxr="opacity",K_e=[U_e,Bxr,$xr,zxr,Uxr,Vxr,Gxr],b$={name:1,style:1,interactive:1},qn={value:0},eh={value:1},AQ="group",Xht="rect",Z_e="rule",Wxr="symbol",_A="text";Q_e=kQ($r(EF),$r(TF),$r(Yht));Kxr=`datum.${SF}<=0?"${EF}":datum.${SF}>=1?"${TF}":"${Yht}"`,Zxr=`datum.${SF}<=0?"${C2}":datum.${SF}>=1?"${Ym}":"${Fxr}"`;J_e='item.orient === "left"',e2e='item.orient === "right"',IQ=`(${J_e} || ${e2e})`,evr=`datum.vgrad && ${IQ}`,tvr=kQ('"top"','"bottom"','"middle"'),rvr=kQ('"right"','"left"','"center"'),nvr=`datum.vgrad && ${e2e} ? (${rvr}) : (${IQ} && !(datum.vgrad && ${J_e})) ? "left" : ${Q_e}`,ovr=`item._anchor || (${IQ} ? "middle" : "start")`,ivr=`${evr} ? (${J_e} ? -90 : 90) : 0`,svr=`${IQ} ? (datum.vgrad ? (${e2e} ? "bottom" : "top") : ${tvr}) : "top"`;hvr=t=>t&&t.expr,mvr=t=>t&&t.field,gvr=t=>t==="data",Sht=t=>t==="expr",O_e=t=>t==="field",Cht=t=>t==="compare";vA.fromEntries=function(t,r){let n=r.length,o=r[n-1],i=r[n-2],s=r[0],a=null,l=1;for(s&&s.type==="load"&&(s=r[1]),t.add(r[0]);l<n;++l)r[l].params.pulse=Nr(r[l-1]),t.add(r[l]),r[l].type==="aggregate"&&(a=r[l]);return new vA(t,s,i,o,a)};vA.prototype={countsRef(t,r,n){let o=this,i=o.counts||(o.counts={}),s=emt(r),a,l,u;return s!=null&&(t=o.scope,a=i[s]),a?n&&n.field&&Eht(t,a.agg.params,n):(u={groupby:t.fieldRef(r,"key"),pulse:Nr(o.output)},n&&n.field&&Eht(t,u,n),l=t.add(jht(u)),a=t.add(Hm({pulse:Nr(l)})),a={agg:l,ref:Nr(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Nr(this.values)},extentRef(t,r){return d$(t,this,"extent","extent",r,!1)},domainRef(t,r){return d$(t,this,"domain","values",r,!1)},valuesRef(t,r,n){return d$(t,this,"vals","values",r,n||!0)},lookupRef(t,r){return d$(t,this,"lookup","tupleindex",r,!1)},indataRef(t,r){return d$(t,this,"indata","tupleindex",r,!0,!0)}};Avr=`item.orient==="${EF}"?-90:item.orient==="${TF}"?90:0`;rmt=t=>t===C2||t===Ym,NQ=(t,r,n)=>Pa(t)?jvr(t.signal,r,n):t===EF||t===Ym?r:n,hl=(t,r,n)=>Pa(t)?Pvr(t.signal,r,n):rmt(t)?r:n,qm=(t,r,n)=>Pa(t)?Lvr(t.signal,r,n):rmt(t)?n:r,nmt=(t,r,n)=>Pa(t)?Bvr(t.signal,r,n):t===Ym?{value:r}:{value:n},Rvr=(t,r,n)=>Pa(t)?$vr(t.signal,r,n):t===TF?{value:r}:{value:n},Pvr=(t,r,n)=>omt(`${t} === '${Ym}' || ${t} === '${C2}'`,r,n),Lvr=(t,r,n)=>omt(`${t} !== '${Ym}' && ${t} !== '${C2}'`,r,n),jvr=(t,r,n)=>r2e(`${t} === '${EF}' || ${t} === '${Ym}'`,r,n),Bvr=(t,r,n)=>r2e(`${t} === '${Ym}'`,r,n),$vr=(t,r,n)=>r2e(`${t} === '${TF}'`,r,n),omt=(t,r,n)=>(r=r!=null?pl(r):r,n=n!=null?pl(n):n,kht(r)&&kht(n)?(r=r?r.signal||$r(r.value):null,n=n?n.signal||$r(n.value):null,{signal:`${t} ? (${r}) : (${n})`}):[an({test:t},r)].concat(n||[])),kht=t=>t==null||Object.keys(t).length===1,r2e=(t,r,n)=>({signal:`${t} ? (${wF(r)}) : (${wF(n)})`}),zvr=(t,r,n,o,i)=>({signal:(o!=null?`${t} === '${EF}' ? (${wF(o)}) : `:"")+(n!=null?`${t} === '${C2}' ? (${wF(n)}) : `:"")+(i!=null?`${t} === '${TF}' ? (${wF(i)}) : `:"")+(r!=null?`${t} === '${Ym}' ? (${wF(r)}) : `:"")+"(null)"}),wF=t=>Pa(t)?t.signal:t==null?null:$r(t),Uvr=(t,r)=>r===0?0:Pa(t)?{signal:`(${t.signal}) * ${r}`}:{value:t*r},_F=(t,r)=>{let n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+r.signal}:t};Jvr=t=>CF({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);smt.prototype=Nht.prototype={parse(t){return imt(t,this)},fork(){return new Nht(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(r=>{r.$ref=t.id}),t.refs=null),t},proxy(t){let r=t instanceof P_e?Nr(t):t;return this.add(dxr({value:r}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,r;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(o,i,s){let a,l;o&&(a=o.data||(o.data={}),l=a[i]||(a[i]=[]),l.push(s))}for(t in this.data){r=this.data[t],n(r.input,t,"input"),n(r.output,t,"output"),n(r.values,t,"values");for(let o in r.index)n(r.index[o],t,"index:"+o)}return this},pushState(t,r,n){this._encode.push(Nr(this.add(wA({pulse:t})))),this._parent.push(r),this._lookup.push(n?Nr(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,r){if(Jn(t))return h$(t,r);t.signal||pt("Unsupported field reference: "+$r(t));let n=t.signal,o=this.field[n];if(!o){let i={name:this.signalRef(n)};r&&(i.as=r),this.field[n]=o=Nr(this.add(rxr(i)))}return o},compareRef(t){let r=!1,n=s=>Pa(s)?(r=!0,this.signalRef(s.signal)):zbr(s)?(r=!0,this.exprRef(s.expr)):s,o=Br(t.field).map(n),i=Br(t.order).map(n);return r?Nr(this.add(yht({fields:o,orders:i}))):mht(o,i)},keyRef(t,r){let n=!1,o=s=>Pa(s)?(n=!0,Nr(i[s.signal])):s,i=this.signals;return t=Br(t).map(o),n?Nr(this.add(nxr({fields:t,flat:r}))):Lbr(t,r)},sortRef(t){if(!t)return t;let r=EQ(t.op,t.field),n=t.order||jbr;return n.signal?Nr(this.add(yht({fields:r,orders:this.signalRef(n.signal)}))):mht(r,n)},event(t,r){let n=t+":"+r;if(!this.events[n]){let o=this.id();this.streams.push({id:o,source:t,type:r}),this.events[n]=o}return this.events[n]},hasOwnSignal(t){return Pr(this.signals,t)},addSignal(t,r){this.hasOwnSignal(t)&&pt("Duplicate signal name: "+$r(t));let n=r instanceof P_e?r:this.add(_Q(r));return this.signals[t]=n},getSignal(t){return this.signals[t]||pt("Unrecognized signal name: "+$r(t)),this.signals[t]},signalRef(t){return this.signals[t]?Nr(this.signals[t]):(Pr(this.lambdas,t)||(this.lambdas[t]=this.add(_Q(null))),Nr(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let r=0,n=t.length;r<n;++r){let o=t[r],i=Vm(o,this),s=this.lambdas[o];s.params=i.$params,s.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!un(t)?t:this.signalRef(t.signal||n2e(t))},exprRef(t,r){let n={expr:Vm(t,this)};return r&&(n.expr.$name=r),Nr(this.add(exr(n)))},addBinding(t,r){this.bindings||pt("Nested signals do not support binding: "+$r(t)),this.bindings.push(an({signal:t},r))},addScaleProj(t,r){Pr(this.scales,t)&&pt("Duplicate scale or projection name: "+$r(t)),this.scales[t]=this.add(r)},addScale(t,r){this.addScaleProj(t,hxr(r))},addProjection(t,r){this.addScaleProj(t,fxr(r))},getScale(t){return this.scales[t]||pt("Unrecognized scale name: "+$r(t)),this.scales[t]},scaleRef(t){return Nr(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,r){return Pr(this.data,t)&&pt("Duplicate data set name: "+$r(t)),this.data[t]=r},getData(t){return this.data[t]||pt("Undefined data set name: "+$r(t)),this.data[t]},addDataPipeline(t,r){return Pr(this.data,t)&&pt("Duplicate data set name: "+$r(t)),this.addData(t,vA.fromEntries(this,r))}}});function Xm(t){this.type=t}function y1r(t){switch(t.type){case u1r:return t.elements;case c1r:case p1r:return[t.left,t.right];case f1r:return[t.callee].concat(t.arguments);case d1r:return[t.test,t.consequent,t.alternate];case h1r:return[t.object,t.property];case m1r:return t.properties;case a1r:return[t.key,t.value];case g1r:return[t.argument];case l1r:case s1r:case i1r:default:return[]}}function PQ(t,r){if(!t)throw new Error("ASSERT: "+r)}function qv(t){return t>=48&&t<=57}function u2e(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function v$(t){return"01234567".indexOf(t)>=0}function L1r(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function _$(t){return t===10||t===13||t===8232||t===8233}function E$(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&R1r.test(String.fromCharCode(t))}function FQ(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&P1r.test(String.fromCharCode(t))}function bmt(){for(;ft<Ru;){let t=gr.charCodeAt(ft);if(L1r(t)||_$(t))++ft;else break}}function l2e(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ft<Ru&&u2e(gr[ft])?(o=gr[ft++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):po({},ml,ql);return String.fromCharCode(i)}function B1r(){var t,r,n,o;for(t=gr[ft],r=0,t==="}"&&po({},ml,ql);ft<Ru&&(t=gr[ft++],!!u2e(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&po({},ml,ql),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function xmt(){var t,r;for(t=gr.charCodeAt(ft++),r=String.fromCharCode(t),t===92&&(gr.charCodeAt(ft)!==117&&po({},ml,ql),++ft,t=l2e("u"),(!t||t==="\\"||!E$(t.charCodeAt(0)))&&po({},ml,ql),r=t);ft<Ru&&(t=gr.charCodeAt(ft),!!FQ(t));)++ft,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),gr.charCodeAt(ft)!==117&&po({},ml,ql),++ft,t=l2e("u"),(!t||t==="\\"||!FQ(t.charCodeAt(0)))&&po({},ml,ql),r+=t);return r}function $1r(){var t,r;for(t=ft++;ft<Ru;){if(r=gr.charCodeAt(ft),r===92)return ft=t,xmt();if(FQ(r))++ft;else break}return gr.slice(t,ft)}function z1r(){var t,r,n;return t=ft,r=gr.charCodeAt(ft)===92?xmt():$1r(),r.length===1?n=SA:j1r.hasOwnProperty(r)?n=E2:r==="null"?n=RQ:r==="true"||r==="false"?n=OQ:n=SA,{type:n,value:r,start:t,end:ft}}function i2e(){var t=ft,r=gr.charCodeAt(ft),n,o=gr[ft],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ft,{type:kf,value:String.fromCharCode(r),start:t,end:ft};default:if(n=gr.charCodeAt(ft+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ft+=2,{type:kf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ft};case 33:case 61:return ft+=2,gr.charCodeAt(ft)===61&&++ft,{type:kf,value:gr.slice(t,ft),start:t,end:ft}}}if(a=gr.substr(ft,4),a===">>>=")return ft+=4,{type:kf,value:a,start:t,end:ft};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ft+=3,{type:kf,value:s,start:t,end:ft};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ft+=2,{type:kf,value:i,start:t,end:ft};if(i==="//"&&po({},ml,ql),"<>=!+-*%&|^/".indexOf(o)>=0)return++ft,{type:kf,value:o,start:t,end:ft};po({},ml,ql)}function U1r(t){let r="";for(;ft<Ru&&u2e(gr[ft]);)r+=gr[ft++];return r.length===0&&po({},ml,ql),E$(gr.charCodeAt(ft))&&po({},ml,ql),{type:EA,value:parseInt("0x"+r,16),start:t,end:ft}}function V1r(t){let r="0"+gr[ft++];for(;ft<Ru&&v$(gr[ft]);)r+=gr[ft++];return(E$(gr.charCodeAt(ft))||qv(gr.charCodeAt(ft)))&&po({},ml,ql),{type:EA,value:parseInt(r,8),octal:!0,start:t,end:ft}}function umt(){var t,r,n;if(n=gr[ft],PQ(qv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ft,t="",n!=="."){if(t=gr[ft++],n=gr[ft],t==="0"){if(n==="x"||n==="X")return++ft,U1r(r);if(v$(n))return V1r(r);n&&qv(n.charCodeAt(0))&&po({},ml,ql)}for(;qv(gr.charCodeAt(ft));)t+=gr[ft++];n=gr[ft]}if(n==="."){for(t+=gr[ft++];qv(gr.charCodeAt(ft));)t+=gr[ft++];n=gr[ft]}if(n==="e"||n==="E")if(t+=gr[ft++],n=gr[ft],(n==="+"||n==="-")&&(t+=gr[ft++]),qv(gr.charCodeAt(ft)))for(;qv(gr.charCodeAt(ft));)t+=gr[ft++];else po({},ml,ql);return E$(gr.charCodeAt(ft))&&po({},ml,ql),{type:EA,value:parseFloat(t),start:r,end:ft}}function G1r(){var t="",r,n,o,i,s=!1;for(r=gr[ft],PQ(r==="'"||r==='"',"String literal must starts with a quote"),n=ft,++ft;ft<Ru;)if(o=gr[ft++],o===r){r="";break}else if(o==="\\")if(o=gr[ft++],!o||!_$(o.charCodeAt(0)))switch(o){case"u":case"x":gr[ft]==="{"?(++ft,t+=B1r()):t+=l2e(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:v$(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ft<Ru&&v$(gr[ft])&&(s=!0,i=i*8+"01234567".indexOf(gr[ft++]),"0123".indexOf(o)>=0&&ft<Ru&&v$(gr[ft])&&(i=i*8+"01234567".indexOf(gr[ft++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&gr[ft]===`
`&&++ft;else{if(_$(o.charCodeAt(0)))break;t+=o}return r!==""&&po({},ml,ql),{type:C$,value:t,octal:s,start:n,end:ft}}function W1r(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";po({},a2e)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{po({},a2e)}try{return new RegExp(t,r)}catch{return null}}function q1r(){var t,r,n,o,i;for(t=gr[ft],PQ(t==="/","Regular expression literal must start with a slash"),r=gr[ft++],n=!1,o=!1;ft<Ru;)if(t=gr[ft++],r+=t,t==="\\")t=gr[ft++],_$(t.charCodeAt(0))&&po({},o2e),r+=t;else if(_$(t.charCodeAt(0)))po({},o2e);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||po({},o2e),i=r.substr(1,r.length-2),{value:i,literal:r}}function H1r(){var t,r,n;for(r="",n="";ft<Ru&&(t=gr[ft],!!FQ(t.charCodeAt(0)));)++ft,t==="\\"&&ft<Ru?po({},ml,ql):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&po({},a2e,n),{value:n,literal:r}}function Y1r(){var t,r,n,o;return Ro=null,bmt(),t=ft,r=q1r(),n=H1r(),o=W1r(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ft}}function X1r(t){return t.type===SA||t.type===E2||t.type===OQ||t.type===RQ}function vmt(){if(bmt(),ft>=Ru)return{type:S$,start:ft,end:ft};let t=gr.charCodeAt(ft);return E$(t)?z1r():t===40||t===41||t===59?i2e():t===39||t===34?G1r():t===46?qv(gr.charCodeAt(ft+1))?umt():i2e():qv(t)?umt():i2e()}function If(){let t=Ro;return ft=t.end,Ro=vmt(),ft=t.end,t}function wmt(){let t=ft;Ro=vmt(),ft=t}function K1r(t){let r=new Xm(x1r);return r.elements=t,r}function cmt(t,r,n){let o=new Xm(t==="||"||t==="&&"?C1r:v1r);return o.operator=t,o.left=r,o.right=n,o}function Z1r(t,r){let n=new Xm(w1r);return n.callee=t,n.arguments=r,n}function Q1r(t,r,n){let o=new Xm(_1r);return o.test=t,o.consequent=r,o.alternate=n,o}function c2e(t){let r=new Xm(gmt);return r.name=t,r}function x$(t){let r=new Xm(S1r);return r.value=t.value,r.raw=gr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function fmt(t,r,n){let o=new Xm(E1r);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function J1r(t){let r=new Xm(T1r);return r.properties=t,r}function dmt(t,r,n){let o=new Xm(A1r);return o.key=r,o.value=n,o.kind=t,o}function ewr(t,r){let n=new Xm(k1r);return n.operator=t,n.argument=r,n.prefix=!0,n}function po(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(PQ(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ft,n.description=i,n}function LQ(t){t.type===S$&&po(t,F1r),t.type===EA&&po(t,I1r),t.type===C$&&po(t,D1r),t.type===SA&&po(t,N1r),t.type===E2&&po(t,M1r),po(t,ml,t.value)}function Pu(t){let r=If();(r.type!==kf||r.value!==t)&&LQ(r)}function zi(t){return Ro.type===kf&&Ro.value===t}function s2e(t){return Ro.type===E2&&Ro.value===t}function twr(){let t=[];for(ft=Ro.start,Pu("[");!zi("]");)zi(",")?(If(),t.push(null)):(t.push(CA()),zi("]")||Pu(","));return If(),K1r(t)}function pmt(){ft=Ro.start;let t=If();return t.type===C$||t.type===EA?(t.octal&&po(t,ymt),x$(t)):c2e(t.value)}function rwr(){var t,r,n,o;if(ft=Ro.start,t=Ro,t.type===SA)return n=pmt(),Pu(":"),o=CA(),dmt("init",n,o);if(t.type===S$||t.type===kf)LQ(t);else return r=pmt(),Pu(":"),o=CA(),dmt("init",r,o)}function nwr(){var t=[],r,n,o,i={},s=String;for(ft=Ro.start,Pu("{");!zi("}");)r=rwr(),r.key.type===gmt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?po({},O1r):i[o]=!0,t.push(r),zi("}")||Pu(",");return Pu("}"),J1r(t)}function owr(){Pu("(");let t=f2e();return Pu(")"),t}function swr(){var t,r,n;if(zi("("))return owr();if(zi("["))return twr();if(zi("{"))return nwr();if(t=Ro.type,ft=Ro.start,t===SA||iwr[Ro.value])n=c2e(If().value);else if(t===C$||t===EA)Ro.octal&&po(Ro,ymt),n=x$(If());else{if(t===E2)throw new Error(w$);t===OQ?(r=If(),r.value=r.value==="true",n=x$(r)):t===RQ?(r=If(),r.value=null,n=x$(r)):zi("/")||zi("/=")?(n=x$(Y1r()),wmt()):LQ(If())}return n}function awr(){let t=[];if(Pu("("),!zi(")"))for(;ft<Ru&&(t.push(CA()),!zi(")"));)Pu(",");return Pu(")"),t}function lwr(){ft=Ro.start;let t=If();return X1r(t)||LQ(t),c2e(t.value)}function uwr(){return Pu("."),lwr()}function cwr(){Pu("[");let t=f2e();return Pu("]"),t}function fwr(){var t,r,n;for(t=swr();;)if(zi("."))n=uwr(),t=fmt(".",t,n);else if(zi("("))r=awr(),t=Z1r(t,r);else if(zi("["))n=cwr(),t=fmt("[",t,n);else break;return t}function hmt(){let t=fwr();if(Ro.type===kf&&(zi("++")||zi("--")))throw new Error(w$);return t}function MQ(){var t,r;if(Ro.type!==kf&&Ro.type!==E2)r=hmt();else{if(zi("++")||zi("--"))throw new Error(w$);if(zi("+")||zi("-")||zi("~")||zi("!"))t=If(),r=MQ(),r=ewr(t.value,r);else{if(s2e("delete")||s2e("void")||s2e("typeof"))throw new Error(w$);r=hmt()}}return r}function mmt(t){let r=0;if(t.type!==kf&&t.type!==E2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function dwr(){var t,r,n,o,i,s,a,l,u,c;if(t=Ro,u=MQ(),o=Ro,i=mmt(o),i===0)return u;for(o.prec=i,If(),r=[t,Ro],a=MQ(),s=[u,o,a];(i=mmt(Ro))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=cmt(l,u,a),s.push(n);o=If(),o.prec=i,s.push(o),r.push(Ro),n=MQ(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=cmt(s[c-1].value,s[c-2],n),c-=2;return n}function CA(){var t,r,n;return t=dwr(),zi("?")&&(If(),r=CA(),Pu(":"),n=CA(),t=Q1r(t,r,n)),t}function f2e(){let t=CA();if(zi(","))throw new Error(w$);return t}function _mt(t){gr=t,ft=0,Ru=gr.length,Ro=null,wmt();let r=f2e();if(Ro.type!==S$)throw new Error("Unexpect token after expression.");return r}function hwr(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&pt("Missing arguments to clamp function."),a.length>3&&pt("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&pt("Missing arguments to if function."),a.length>3&&pt("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function mwr(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function Smt(t){t=t||{};let r=t.allowed?vu(t.allowed):{},n=t.forbidden?vu(t.forbidden):{},o=t.constants||pwr,i=(t.functions||hwr)(d),s=t.globalvar,a=t.fieldvar,l=Dn(s)?s:m=>"".concat(s,'["').concat(m,'"]'),u={},c={},f=0;function d(m){if(Jn(m))return m;let g=p[m.type];return g==null&&pt("Unsupported type: "+m.type),g(m)}let p={Literal:m=>m.raw,Identifier:m=>{let g=m.name;return f>0?g:Pr(n,g)?pt("Illegal identifier: "+g):Pr(o,g)?o[g]:Pr(r,g)?g:(u[g]=1,l(g))},MemberExpression:m=>{let g=!m.computed,y=d(m.object);g&&(f+=1);let b=d(m.property);return y===a&&(c[mwr(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&pt("Illegal callee type: "+m.callee.type);let g=m.callee.name,y=m.arguments,b=Pr(i,g)&&i[g];return b||pt("Unrecognized function: "+g),Dn(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{f+=1;let g=d(m.key);return f-=1,g+":"+d(m.value)}};function h(m){let g={code:d(m),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return h.functions=i,h.constants=o,h}var i1r,s1r,a1r,l1r,u1r,c1r,f1r,d1r,p1r,h1r,m1r,g1r,Yy,gr,ft,Ru,Ro,OQ,S$,SA,E2,RQ,EA,kf,C$,b1r,x1r,v1r,w1r,_1r,gmt,S1r,C1r,E1r,T1r,A1r,k1r,ml,I1r,D1r,N1r,M1r,F1r,a2e,o2e,ymt,O1r,ql,w$,R1r,P1r,j1r,iwr,pwr,Cmt=N(()=>{"use strict";Ls();i1r="RawCode",s1r="Literal",a1r="Property",l1r="Identifier",u1r="ArrayExpression",c1r="BinaryExpression",f1r="CallExpression",d1r="ConditionalExpression",p1r="LogicalExpression",h1r="MemberExpression",m1r="ObjectExpression",g1r="UnaryExpression";Xm.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=y1r(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};OQ=1,S$=2,SA=3,E2=4,RQ=5,EA=6,kf=7,C$=8,b1r=9;Yy={};Yy[OQ]="Boolean";Yy[S$]="<end>";Yy[SA]="Identifier";Yy[E2]="Keyword";Yy[RQ]="Null";Yy[EA]="Numeric";Yy[kf]="Punctuator";Yy[C$]="String";Yy[b1r]="RegularExpression";x1r="ArrayExpression",v1r="BinaryExpression",w1r="CallExpression",_1r="ConditionalExpression",gmt="Identifier",S1r="Literal",C1r="LogicalExpression",E1r="MemberExpression",T1r="ObjectExpression",A1r="Property",k1r="UnaryExpression",ml="Unexpected token %0",I1r="Unexpected number",D1r="Unexpected string",N1r="Unexpected identifier",M1r="Unexpected reserved word",F1r="Unexpected end of input",a2e="Invalid regular expression",o2e="Invalid regular expression: missing /",ymt="Octal literals are not allowed in strict mode.",O1r="Duplicate data property in object literal not allowed in strict mode",ql="ILLEGAL",w$="Disabled.",R1r=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),P1r=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");j1r={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};iwr={if:1};pwr={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function Df(t,r,n){return kmt=r||gwr,Imt=n||wwr,Dmt(t.trim()).map(d2e)}function _wr(t){return Imt[t]}function T$(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function Dmt(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=T$(t,i,Amt,jQ+Emt,BQ+Tmt),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function d2e(t){return t[0]==="["?Swr(t):Cwr(t)}function Swr(t){let r=t.length,n=1,o;if(n=T$(t,n,BQ,jQ,BQ),n===r)throw"Empty between selector: "+t;if(o=Dmt(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==xwr)throw"Expected '>' after between selector: "+t;o=o.map(d2e);let i=d2e(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function Cwr(t){let r={source:kmt},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===Tmt){if(l=t.lastIndexOf(Emt),l>=0){try{o=Ewr(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===bwr&&(i=++l),u=T$(t,l,ywr),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=T$(t,l,jQ),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=T$(t,l,BQ),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==jQ)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||vwr.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):_wr(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function Ewr(t){let r=t.split(Amt);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var gwr,jQ,BQ,Emt,Tmt,ywr,Amt,bwr,xwr,vwr,wwr,kmt,Imt,T2=N(()=>{"use strict";gwr="view",jQ="[",BQ="]",Emt="{",Tmt="}",ywr=":",Amt=",",bwr="@",xwr=">",vwr=/[[\]{}]/,wwr={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});var p2e={};fn(p2e,{Bounds:()=>Du,CanvasHandler:()=>ZM,CanvasRenderer:()=>PK,DATE:()=>wc,DAY:()=>Pl,DAYOFYEAR:()=>ly,Dataflow:()=>Xw,Debug:()=>cqe,Error:()=>aqe,EventStream:()=>dN,Gradient:()=>Rve,GroupItem:()=>$ve,HOURS:()=>lf,Handler:()=>o2,Info:()=>uqe,Item:()=>Bve,MILLISECONDS:()=>Rp,MINUTES:()=>uf,MONTH:()=>Ll,Marks:()=>Ud,MultiPulse:()=>UW,None:()=>sqe,Operator:()=>Fo,Parameters:()=>CL,Pulse:()=>nv,QUARTER:()=>vc,RenderType:()=>Ov,Renderer:()=>Ry,ResourceLoader:()=>zve,SECONDS:()=>Dd,SVGHandler:()=>n1e,SVGRenderer:()=>u1e,SVGStringRenderer:()=>c1e,Scenegraph:()=>WK,TIME_UNITS:()=>pq,Transform:()=>et,View:()=>N_e,WEEK:()=>fa,Warn:()=>lqe,YEAR:()=>rl,accessor:()=>_d,accessorFields:()=>Na,accessorName:()=>Li,array:()=>Br,ascending:()=>QP,bandwidthNRD:()=>ZW,bin:()=>ide,bootstrapCI:()=>sde,boundClip:()=>Lfr,boundContext:()=>aB,boundItem:()=>Ive,boundMark:()=>xut,boundStroke:()=>ZT,changeset:()=>iv,clampRange:()=>VWt,codegenExpression:()=>Smt,compare:()=>$ce,constant:()=>Ja,cumulativeLogNormal:()=>nq,cumulativeNormal:()=>NL,cumulativeUniform:()=>aq,dayofyear:()=>Hde,debounce:()=>zce,defaultLocale:()=>cve,definition:()=>VW,densityLogNormal:()=>rq,densityNormal:()=>QW,densityUniform:()=>sq,domChild:()=>_f,domClear:()=>Nm,domCreate:()=>Q_,domFind:()=>r1e,dotbin:()=>ade,error:()=>pt,expressionFunction:()=>$s,extend:()=>an,extent:()=>tm,extentIndex:()=>Uce,falsy:()=>Zx,fastmap:()=>zw,field:()=>Qh,flush:()=>XWt,font:()=>VK,fontFamily:()=>cB,fontSize:()=>Oy,format:()=>xK,formatLocale:()=>Y5,formats:()=>hve,hasOwnProperty:()=>Pr,id:()=>OWt,identity:()=>mc,inferType:()=>Tlt,inferTypes:()=>Alt,ingest:()=>Nn,inherits:()=>Dt,inrange:()=>KWt,interpolate:()=>J4,interpolateColors:()=>gM,interpolateRange:()=>VY,intersect:()=>f1e,intersectBoxLine:()=>WM,intersectPath:()=>Uve,intersectPoint:()=>Vve,intersectRule:()=>lut,isArray:()=>Hr,isBoolean:()=>Vce,isDate:()=>JP,isFunction:()=>Dn,isIterable:()=>Gce,isNumber:()=>X0,isObject:()=>un,isRegExp:()=>ZWt,isString:()=>Jn,isTuple:()=>FE,key:()=>Wce,lerp:()=>QWt,lineHeight:()=>r2,loader:()=>vK,locale:()=>gK,logger:()=>RWt,lruCache:()=>qce,markup:()=>l1e,merge:()=>Hce,mergeConfig:()=>JD,multiLineOffset:()=>Ycr,one:()=>H0,pad:()=>eqt,panLinear:()=>LWt,panLog:()=>jWt,panPow:()=>BWt,panSymlog:()=>$Wt,parse:()=>amt,parseExpression:()=>_mt,parseSelector:()=>Df,pathCurves:()=>Pve,pathEqual:()=>Hut,pathParse:()=>KT,pathRectangle:()=>nut,pathRender:()=>qM,pathSymbols:()=>rut,pathTrail:()=>out,peek:()=>Un,point:()=>fB,projection:()=>C5,quantileLogNormal:()=>oq,quantileNormal:()=>ML,quantileUniform:()=>lq,quantiles:()=>XW,quantizeInterpolator:()=>GY,quarter:()=>zWt,quartiles:()=>KW,random:()=>Ed,randomInteger:()=>SXt,randomKDE:()=>eq,randomLCG:()=>_Xt,randomLogNormal:()=>lde,randomMixture:()=>ude,randomNormal:()=>JW,randomUniform:()=>cde,read:()=>dur,regressionExp:()=>dde,regressionLinear:()=>cq,regressionLoess:()=>mde,regressionLog:()=>fde,regressionPoly:()=>hde,regressionPow:()=>pde,regressionQuad:()=>fq,renderModule:()=>dB,repeat:()=>XP,resetDefaultLocale:()=>_lt,resetSVGClipId:()=>sut,resetSVGDefIds:()=>$fr,responseType:()=>fur,runtimeContext:()=>aQ,sampleCurve:()=>yN,sampleLogNormal:()=>tq,sampleNormal:()=>DL,sampleUniform:()=>iq,scale:()=>Gn,sceneEqual:()=>d1e,sceneFromJSON:()=>wut,scenePickVisit:()=>DK,sceneToJSON:()=>vut,sceneVisit:()=>Fm,sceneZOrder:()=>Gve,scheme:()=>e5,serializeXML:()=>Put,setRandom:()=>vXt,span:()=>EE,splitAccessPath:()=>KP,stringValue:()=>$r,textMetrics:()=>Mm,timeBin:()=>npe,timeFloor:()=>Zde,timeFormatLocale:()=>GT,timeInterval:()=>sv,timeOffset:()=>Jde,timeSequence:()=>tpe,timeUnitSpecifier:()=>Wde,timeUnits:()=>hq,toBoolean:()=>Yce,toDate:()=>Xce,toNumber:()=>em,toSet:()=>vu,toString:()=>Kce,transform:()=>Hfe,transforms:()=>ov,truncate:()=>rqt,truthy:()=>Y0,tupleid:()=>_r,typeParsers:()=>fve,utcFloor:()=>Qde,utcInterval:()=>av,utcOffset:()=>epe,utcSequence:()=>rpe,utcdayofyear:()=>Xde,utcquarter:()=>UWt,utcweek:()=>Kde,version:()=>Vwr,visitArray:()=>nqt,week:()=>Yde,writeConfig:()=>ZP,zero:()=>Jh,zoomLinear:()=>Lce,zoomLog:()=>jce,zoomPow:()=>dW,zoomSymlog:()=>Bce});var Twr,Awr,kwr,Iwr,Dwr,Nwr,Mwr,Fwr,Owr,Rwr,Pwr,Lwr,jwr,Bwr,$wr,zwr,Uwr,Vwr,h2e=N(()=>{"use strict";Ls();Ls();tl();tl();YXe();ort();Cnt();uit();fst();fat();Zut();Jut();ict();Jft();rdt();bN();_N();mve();pB();yM();abe();oht();yK();rQ();lmt();C_e();Cmt();T2();Twr="vega",Awr="5.20.0",kwr="The Vega visualization grammar.",Iwr=["vega","visualization","interaction","dataflow","library","data","d3"],Dwr="BSD-3-Clause",Nwr="UW Interactive Data Lab (http://idl.cs.washington.edu)",Mwr="build/vega-node.js",Fwr="build/vega.module.js",Owr="build/vega.min.js",Rwr="build/vega.min.js",Pwr="index.d.ts",Lwr="vega/vega",jwr={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},Bwr={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.20.0","vega-util":"~1.16.1","vega-view":"~5.10.0","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},$wr={"vega-schema":"*"},zwr="f262105e75449760b0f35fda70e6b576a31d68a4",Uwr={name:Twr,version:Awr,description:kwr,keywords:Iwr,license:Dwr,author:Nwr,main:Mwr,module:Fwr,unpkg:Owr,jsdelivr:Rwr,types:Pwr,repository:Lwr,scripts:jwr,dependencies:Bwr,devDependencies:$wr,gitHead:zwr};an(ov,Mpe,r0e,G0e,vbe,jbe,w1e,mxe,E1e,N1e,jwe,zwe);Vwr=Uwr.version});var Mmt,Nmt=N(()=>{Mmt={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"4.13.1",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{changelog:"conventional-changelog -p angular -r 2",build:"yarn build:only","build:only":"yarn tsc:src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"find build ! -name 'vega-lite-schema.json' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",test:"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup 'yarn tsc:src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'yarn tsc:site -w' 'rollup -c site/rollup.config.js -w'","watch:test":"jest --watch"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2",ajv:"^6.12.2",chai:"^4.2.0",cheerio:"^1.0.0-rc.3",codecov:"^3.7.0",concurrently:"^5.2.0","conventional-changelog-cli":"^2.0.34",d3:"^5.16.0",eslint:"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3",jest:"^26.0.1","jest-puppeteer":"^4.4.0",mkdirp:"^1.0.4",prettier:"^2.0.5",puppeteer:"^3.1.0",rollup:"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7",terser:"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1",typescript:"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},dependencies:{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0",yargs:"~15.3.1"},peerDependencies:{vega:"^5.12.1"},jest:{preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],coverageDirectory:"./coverage/",collectCoverage:!1}}});function Km(t,r,n){return t.fields=r||[],t.fname=n,t}var AF=N(()=>{"use strict"});function m2e(t){return t.length===1?Wwr(t[0]):qwr(t)}var Wwr,qwr,g2e=N(()=>{"use strict";Wwr=t=>function(r){return r[t]},qwr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}}});function A$(t){throw Error(t)}var y2e=N(()=>{"use strict"});function Zm(t){var r=[],n=null,o=0,i=t.length,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<i;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===n)c(),n=null,o=-1;else{if(n)continue;a===o&&u==='"'||a===o&&u==="'"?(a=l+1,n=u):u==="."&&!o?l>a?c():a=l+1:u==="["?(l>a&&c(),o=a=l+1):u==="]"&&(o||A$("Access path missing open bracket: "+t),o>0&&c(),o=0,a=l+1)}return o&&A$("Access path missing closing bracket: "+t),n&&A$("Access path missing closing quote: "+t),l>a&&(l++,c()),r}var $Q=N(()=>{"use strict";y2e()});function zQ(t,r,n){let o=Zm(t);return t=o.length===1?o[0]:t,Km((n&&n.get||m2e)(o),[t],r||t)}var UQ=N(()=>{"use strict";AF();g2e();$Q()});var k$,Hwr,VQ,Ywr,Xwr,Kwr,Zwr,b2e=N(()=>{"use strict";AF();UQ();k$=[],Hwr=zQ("id"),VQ=Km(function(t){return t},k$,"identity"),Ywr=Km(function(){return 0},k$,"zero"),Xwr=Km(function(){return 1},k$,"one"),Kwr=Km(function(){return!0},k$,"true"),Zwr=Km(function(){return!1},k$,"false")});function GQ(t,r,n){var o=[r].concat([].slice.call(n));console[t].apply(console,o)}function x2e(t,r){var n=t||Fmt;return{level:function(o){return arguments.length?(n=+o,this):n},error:function(){return n>=Omt&&GQ(r||"error","ERROR",arguments),this},warn:function(){return n>=WQ&&GQ(r||"warn","WARN",arguments),this},info:function(){return n>=Rmt&&GQ(r||"log","INFO",arguments),this},debug:function(){return n>=Pmt&&GQ(r||"log","DEBUG",arguments),this}}}var Fmt,Omt,WQ,Rmt,Pmt,Lmt=N(()=>{"use strict";Fmt=0,Omt=1,WQ=2,Rmt=3,Pmt=4});var Bt,I$=N(()=>{"use strict";Bt=Array.isArray});function wo(t){return t===Object(t)}var qQ=N(()=>{"use strict"});function D$(...t){return t.reduce((r,n)=>{for(var o in n)if(o==="signals")r.signals=Qwr(r.signals,n.signals);else{var i=o==="legend"?{layout:1}:o==="style"?!0:null;N$(r,o,n[o],i)}return r},{})}function N$(t,r,n,o){if(jmt(r)){var i,s;if(wo(n)&&!Bt(n)){s=wo(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?N$(s,i,n[i]):jmt(i)&&(s[i]=n[i])}else t[r]=n}}function Qwr(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}var jmt,Bmt=N(()=>{"use strict";I$();qQ();jmt=t=>t!=="__proto__"});var kF=N(()=>{"use strict"});var v2e=N(()=>{"use strict"});var $mt=N(()=>{"use strict";b2e();kF();v2e()});var zmt=N(()=>{"use strict"});function Mn(t){return t!=null?Bt(t)?t:[t]:[]}var YQ=N(()=>{"use strict";I$()});var Umt=N(()=>{"use strict"});function M$(t){return typeof t=="function"}var XQ=N(()=>{"use strict"});var Vmt=N(()=>{"use strict";AF();YQ();UQ();XQ()});var Gmt=N(()=>{"use strict";XQ()});var Wmt=N(()=>{"use strict"});var qmt=N(()=>{"use strict"});var Hmt=N(()=>{"use strict"});var Ymt=N(()=>{"use strict"});function Hd(t,r){return t_r.call(t,r)}var t_r,KQ=N(()=>{"use strict";t_r=Object.prototype.hasOwnProperty});var Xmt=N(()=>{"use strict";KQ()});var Kmt=N(()=>{"use strict";kF()});var Zmt=N(()=>{"use strict"});var Qmt=N(()=>{"use strict"});function Xy(t){return typeof t=="boolean"}var Jmt=N(()=>{"use strict"});var w2e=N(()=>{"use strict"});function _o(t){return typeof t=="number"}var _2e=N(()=>{"use strict"});var egt=N(()=>{"use strict"});function pr(t){return typeof t=="string"}var S2e=N(()=>{"use strict"});var tgt=N(()=>{"use strict";AF();YQ();g2e();$Q()});var rgt=N(()=>{"use strict";kF()});var ngt=N(()=>{"use strict";KQ()});var ogt=N(()=>{"use strict"});var C2e=N(()=>{"use strict"});var igt=N(()=>{"use strict";C2e()});var sgt=N(()=>{"use strict";kF()});function Jr(t){return Bt(t)?"["+t.map(Jr)+"]":wo(t)||pr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var agt=N(()=>{"use strict";I$();qQ();S2e()});var lgt=N(()=>{"use strict"});var ugt=N(()=>{"use strict";w2e();_2e()});var cgt=N(()=>{"use strict"});function Qm(t){for(var r={},n=0,o=t.length;n<o;++n)r[t[n]]=!0;return r}var fgt=N(()=>{"use strict"});var dgt=N(()=>{"use strict"});var pgt=N(()=>{"use strict"});var ir=N(()=>{"use strict";AF();b2e();Lmt();Bmt();$mt();zmt();YQ();Umt();Vmt();Gmt();Wmt();y2e();qmt();Hmt();Ymt();Xmt();UQ();Kmt();KQ();Zmt();Qmt();I$();Jmt();w2e();XQ();_2e();qQ();egt();S2e();tgt();rgt();ngt();ogt();igt();kF();C2e();sgt();$Q();agt();lgt();ugt();v2e();cgt();fgt();dgt();pgt()});function Pt(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}var So=N(()=>{"use strict";});var hgt=N(()=>{"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var r=isNaN(arguments[0])?1:Number(arguments[0]);return r?Array.prototype.reduce.call(this,function(n,o){return Array.isArray(o)?n.push.apply(n,t.call(o,r-1)):n.push(o),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})});var mgt=mt((YKo,ZQ)=>{"use strict";var o_r=function(){"use strict";function t(f,d){return d!=null&&f instanceof d}var r;try{r=Map}catch{r=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function i(f,d,p,h,m){typeof d=="object"&&(p=d.depth,h=d.prototype,m=d.includeNonEnumerable,d=d.circular);var g=[],y=[],b=typeof Buffer<"u";typeof d>"u"&&(d=!0),typeof p>"u"&&(p=1/0);function x(v,w){if(v===null)return null;if(w===0)return v;var _,S;if(typeof v!="object")return v;if(t(v,r))_=new r;else if(t(v,n))_=new n;else if(t(v,o))_=new o(function(P,R){v.then(function(V){P(x(V,w-1))},function(V){R(x(V,w-1))})});else if(i.__isArray(v))_=[];else if(i.__isRegExp(v))_=new RegExp(v.source,c(v)),v.lastIndex&&(_.lastIndex=v.lastIndex);else if(i.__isDate(v))_=new Date(v.getTime());else{if(b&&Buffer.isBuffer(v))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(v.length):_=new Buffer(v.length),v.copy(_),_;t(v,Error)?_=Object.create(v):typeof h>"u"?(S=Object.getPrototypeOf(v),_=Object.create(S)):(_=Object.create(h),S=h)}if(d){var C=g.indexOf(v);if(C!=-1)return y[C];g.push(v),y.push(_)}t(v,r)&&v.forEach(function(P,R){var V=x(R,w-1),G=x(P,w-1);_.set(V,G)}),t(v,n)&&v.forEach(function(P){var R=x(P,w-1);_.add(R)});for(var E in v){var T;S&&(T=Object.getOwnPropertyDescriptor(S,E)),!(T&&T.set==null)&&(_[E]=x(v[E],w-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(v),E=0;E<I.length;E++){var k=I[E],F=Object.getOwnPropertyDescriptor(v,k);F&&!F.enumerable&&!m||(_[k]=x(v[k],w-1),F.enumerable||Object.defineProperty(_,k,{enumerable:!1}))}if(m)for(var D=Object.getOwnPropertyNames(v),E=0;E<D.length;E++){var L=D[E],F=Object.getOwnPropertyDescriptor(v,L);F&&F.enumerable||(_[L]=x(v[L],w-1),Object.defineProperty(_,L,{enumerable:!1}))}return _}return x(f,p)}i.clonePrototype=function(d){if(d===null)return null;var p=function(){};return p.prototype=d,new p};function s(f){return Object.prototype.toString.call(f)}i.__objToStr=s;function a(f){return typeof f=="object"&&s(f)==="[object Date]"}i.__isDate=a;function l(f){return typeof f=="object"&&s(f)==="[object Array]"}i.__isArray=l;function u(f){return typeof f=="object"&&s(f)==="[object RegExp]"}i.__isRegExp=u;function c(f){var d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),d}return i.__getRegExpFlags=c,i}();typeof ZQ=="object"&&ZQ.exports&&(ZQ.exports=o_r)});var ygt=mt((XKo,ggt)=>{"use strict";ggt.exports=function t(r,n){if(r===n)return!0;if(r&&n&&typeof r=="object"&&typeof n=="object"){if(r.constructor!==n.constructor)return!1;var o,i,s;if(Array.isArray(r)){if(o=r.length,o!=n.length)return!1;for(i=o;i--!==0;)if(!t(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if(s=Object.keys(r),o=s.length,o!==Object.keys(n).length)return!1;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=o;i--!==0;){var a=s[i];if(!t(r[a],n[a]))return!1}return!0}return r!==r&&n!==n}});var E2e=mt((KKo,bgt)=>{"use strict";bgt.exports=function(t,r){r||(r={}),typeof r=="function"&&(r={cmp:r});var n=typeof r.cycles=="boolean"?r.cycles:!1,o=r.cmp&&function(s){return function(a){return function(l,u){var c={key:l,value:a[l]},f={key:u,value:a[u]};return s(c,f)}}}(r.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=s(a[l])||"null";return u+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(a)-1,f=Object.keys(a).sort(o&&o(a));for(u="",l=0;l<f.length;l++){var d=f[l],p=s(a[d]);p&&(u&&(u+=","),u+=JSON.stringify(d)+":"+p)}return i.splice(c,1),"{"+u+"}"}}(t)}});function QQ(t){return!!t.or}function JQ(t){return!!t.and}function eJ(t){return!!t.not}function F$(t,r){if(eJ(t))F$(t.not,r);else if(JQ(t))for(let n of t.and)F$(n,r);else if(QQ(t))for(let n of t.or)F$(n,r);else r(t)}function O$(t,r){return eJ(t)?{not:O$(t.not,r)}:JQ(t)?{and:t.and.map(n=>O$(n,r))}:QQ(t)?{or:t.or.map(n=>O$(n,r))}:r(t)}var tJ=N(()=>{"use strict"});function A2(t,r){let n={};for(let o of r)Hd(t,o)&&(n[o]=t[o]);return n}function Nf(t,r){let n=Object.assign({},t);for(let o of r)delete n[o];return n}function Tr(t){if(_o(t))return t;let r=pr(t)?t:(0,rJ.default)(t);if(r.length<250)return r;let n=0;for(let o=0;o<r.length;o++){let i=r.charCodeAt(o);n=(n<<5)-n+i,n=n&n}return n}function T2e(t){return t===!1||t===null}function qt(t,r){return t.indexOf(r)>-1}function k2(t,r){let n=0;for(let[o,i]of t.entries())if(r(i,o,n++))return!0;return!1}function A2e(t,r){let n=0;for(let[o,i]of t.entries())if(!r(i,o,n++))return!1;return!0}function _gt(t,...r){for(let n of r)i_r(t,n??{});return t}function i_r(t,r){for(let n of nt(r))N$(t,n,r[n],!0)}function Yd(t,r){let n=[],o={},i;for(let s of t)i=r(s),!(i in o)&&(o[i]=1,n.push(s));return n}function Sgt(t,r){if(t.size!==r.size)return!1;for(let n of t)if(!r.has(n))return!1;return!0}function k2e(t,r){for(let n of t)if(r.has(n))return!0;return!1}function xgt(t){let r=new Set;for(let n of t){let i=Zm(n).map((a,l)=>l===0?a:`[${a}]`),s=i.map((a,l)=>i.slice(0,l+1).join(""));for(let a of s)r.add(a)}return r}function I2e(t,r){return t===void 0||r===void 0?!0:k2e(xgt(t),xgt(r))}function bn(t){return nt(t).length===0}function R$(t){let r=[];for(let n in t)Hd(t,n)&&r.push({key:n,value:t[n]});return r}function P$(t){return t===!0||t===!1}function kn(t){let r=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+r}function TA(t,r){return eJ(t)?"!("+TA(t.not,r)+")":JQ(t)?"("+t.and.map(n=>TA(n,r)).join(") && (")+")":QQ(t)?"("+t.or.map(n=>TA(n,r)).join(") || (")+")":r(t)}function nJ(t,r){if(r.length===0)return!0;let n=r.shift();return n in t&&nJ(t[n],r)&&delete t[n],bn(t)}function AA(t){return t.charAt(0).toUpperCase()+t.substr(1)}function oJ(t,r="datum"){let n=Zm(t),o=[];for(let i=1;i<=n.length;i++){let s=`[${n.slice(0,i).map(Jr).join("][")}]`;o.push(`${r}${s}`)}return o.join(" && ")}function Cgt(t,r="datum"){return`${r}[${Jr(Zm(t).join("."))}]`}function s_r(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Mf(t){return`${Zm(t).map(s_r).join("\\.")}`}function Ky(t,r,n){return t.replace(new RegExp(r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function iJ(t){return`${Zm(t).join(".")}`}function IF(t){return t?Zm(t).length:0}function Fn(...t){for(let r of t)if(r!==void 0)return r}function D2e(t){let r=++a_r;return t?String(t)+r:r}function Egt(t){return l_r(t)?t:`__${t}`}function l_r(t){return t.indexOf("__")===0}function kA(t){if(t!==void 0)return(t%360+360)%360}function sJ(t){return _o(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var vgt,wgt,rJ,Hv,sr,mi,nt,th,a_r,bt=N(()=>{"use strict";hgt();vgt=Al(mgt()),wgt=Al(ygt()),rJ=Al(E2e());ir();tJ();Hv=wgt.default,sr=vgt.default;Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>(0,rJ.default)(t)).join(",")})`};mi=rJ.default;nt=Object.keys,th=Object.values;a_r=42});function DF(t){return t&&t.condition}function F2e(t){return!!Agt[t]}var N2e,lJ,Tgt,M2e,Agt,rZo,L$=N(()=>{"use strict";bt();N2e={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};lJ=["domain","grid","labels","ticks","title"],Tgt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},M2e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Agt=Object.assign(Object.assign({},M2e),{style:1,labelExpr:1,encoding:1});rZo=nt(Agt)});function Ff(t){return qt(["line","area","trail"],t)}function R2e(t){return qt(["rect","bar","image","arc"],t)}function Hl(t){return t.type}function Bgt(t){return Hl(t)?t.type:t}var Oc,O2e,IA,DA,kgt,NA,NF,Igt,MF,uJ,j$,Dgt,B$,$$,cJ,P2e,sZo,u_r,c_r,Ngt,f_r,L2e,Mgt,Fgt,Ogt,Rgt,Pgt,Lgt,jgt,ba=N(()=>{"use strict";ir();bt();Oc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},O2e=Oc.arc,IA=Oc.area,DA=Oc.bar,kgt=Oc.image,NA=Oc.line,NF=Oc.point,Igt=Oc.rect,MF=Oc.rule,uJ=Oc.text,j$=Oc.tick,Dgt=Oc.trail,B$=Oc.circle,$$=Oc.square,cJ=Oc.geoshape;P2e=nt(Oc);sZo=Qm(P2e),u_r=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],c_r=["fill","fillOpacity"],Ngt=[...u_r,...c_r],f_r={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},L2e=nt(f_r),Mgt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},Fgt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},Ogt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Rgt=5,Pgt={binSpacing:1,continuousBandSize:Rgt,timeUnitBandPosition:.5},Lgt={binSpacing:0,continuousBandSize:Rgt,timeUnitBandPosition:.5},jgt={thickness:1}});function La(t){return"mark"in t}var I2=N(()=>{"use strict"});var Zy,z$=N(()=>{"use strict";ba();I2();Zy=class{constructor(r,n){this.name=r,this.run=n}hasMatchingType(r){return La(r)?Bgt(r.mark)===this.name:!1}}});function rh(t){return!!t&&!!t.argmin}function Jm(t){return!!t&&!!t.argmax}function FF(t){return pr(t)&&!!$gt[t]}function fJ(t){return pr(t)&&qt(p_r,t)}function Ugt(t){return pr(t)&&qt(["min","max"],t)}var $gt,zgt,pZo,p_r,Vgt,h_r,Ggt,Yv=N(()=>{"use strict";ir();bt();$gt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},zgt={count:1,min:1,max:1};pZo=nt($gt);p_r=["count","valid","missing","distinct"];Vgt=["count","sum","distinct","valid","missing"],h_r=["mean","average","median","q1","q3","min","max"],Ggt=Qm(h_r)});function j2e(t){return t in Wgt}function qgt(t){switch(t){case Pc:return"y";case Lu:return"y2";case Lc:return"x";case Yl:return"x2"}}function Hgt(t){return t in B2e}function Kv(t){return t===Es||t===ju||t===Bu}function Zgt(t){return!!Kgt[t]}function mJ(t){return!!pJ[t]}function gJ(t){return ep(t)!==t}function ep(t){switch(t){case Pf:return to;case Xd:return gi;case Lu:return Pc;case Yl:return Lc;case tg:return Rc;case eg:return Lf}return t}function nh(t){if(j2e(t))switch(t){case Rc:return"startAngle";case tg:return"endAngle";case Lf:return"outerRadius";case eg:return"innerRadius"}return t}function yl(t){switch(t){case to:return Pf;case gi:return Xd;case Pc:return Lu;case Lc:return Yl;case Rc:return tg;case Lf:return eg}}function Xl(t){switch(t){case to:case Pf:return"width";case gi:case Xd:return"height"}}function Jgt(t){switch(t){case to:return"xOffset";case gi:return"yOffset";case Pf:return"x2Offset";case Xd:return"y2Offset";case Rc:return"thetaOffset";case Lf:return"radiusOffset";case tg:return"theta2Offset";case eg:return"radius2Offset"}}function bl(t){return t in Qy}function D2(t){return t==="width"?to:gi}function o0t(t){return!!yJ[t]}function i0t(t){switch(t){case Es:case ju:case Bu:case jf:case cs:case jc:case Qd:case Jd:return!0;case Kd:case Zd:case rg:return!1}}function $u(t){return!!s0t[t]}function a0t(t,r){return y_r(t)[r]}function y_r(t){switch(t){case Es:case ju:case Bu:case jF:case OA:case RF:case Xv:case PF:case FA:case jc:case Kd:case Zd:case Qd:case OF:case Of:case Rf:return z2e;case to:case gi:case Pc:case Lc:return g_r;case Pf:case Xd:case Lu:case Yl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case jf:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Jd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case cs:return{point:"always",geoshape:"always"};case MA:return{text:"always"};case rg:return{point:"always",square:"always",text:"always"};case LF:return{image:"always"};case Rc:return{text:"always",arc:"always"};case Lf:return{text:"always",arc:"always"};case tg:case eg:return{arc:"always"}}}function BF(t){switch(t){case to:case gi:case Rc:case Lf:case jf:case rg:case Qd:case jc:case Kd:case Zd:case Pf:case Xd:case tg:case eg:return;case OF:case Of:case Rf:case cs:case Jd:case MA:case Xv:case PF:case LF:case jF:return"discrete";case Es:case ju:case Bu:return"flexible";case Pc:case Lc:case Lu:case Yl:case OA:case RF:case FA:return}}var Of,Rf,OF,to,gi,Pf,Xd,Lf,eg,Rc,tg,Pc,Lc,Lu,Yl,Es,ju,Bu,cs,jf,rg,jc,Kd,Zd,Qd,Jd,MA,FA,OA,RF,Xv,PF,LF,jF,m_r,Wgt,B2e,Ygt,dJ,Xgt,gl,pJ,hJ,yZo,bZo,xZo,$2e,vZo,wZo,_Zo,Kgt,SZo,CZo,Qgt,EZo,TZo,AZo,kZo,IZo,DZo,NZo,MZo,FZo,OZo,RZo,PZo,LZo,yJ,e0t,Qy,Ts,bJ,t0t,jZo,BZo,$Zo,zZo,UZo,VZo,GZo,WZo,r0t,n0t,s0t,N2,z2e,qZo,g_r,Ir=N(()=>{"use strict";So();bt();Of="row",Rf="column",OF="facet",to="x",gi="y",Pf="x2",Xd="y2",Lf="radius",eg="radius2",Rc="theta",tg="theta2",Pc="latitude",Lc="longitude",Lu="latitude2",Yl="longitude2",Es="color",ju="fill",Bu="stroke",cs="shape",jf="size",rg="angle",jc="opacity",Kd="fillOpacity",Zd="strokeOpacity",Qd="strokeWidth",Jd="strokeDash",MA="text",FA="order",OA="detail",RF="key",Xv="tooltip",PF="href",LF="url",jF="description",m_r={x:1,y:1,x2:1,y2:1},Wgt={theta:1,theta2:1,radius:1,radius2:1};B2e={longitude:1,longitude2:1,latitude:1,latitude2:1};Ygt=nt(B2e),dJ=Object.assign(Object.assign(Object.assign(Object.assign({},m_r),Wgt),B2e),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});Xgt={row:1,column:1,facet:1},gl=nt(Xgt),pJ=Object.assign(Object.assign({},dJ),Xgt),hJ=nt(pJ),{order:yZo,detail:bZo,tooltip:xZo}=pJ,$2e=Pt(pJ,["order","detail","tooltip"]),{row:vZo,column:wZo,facet:_Zo}=$2e,Kgt=Pt($2e,["row","column","facet"]),SZo=nt($2e),CZo=nt(Kgt);Qgt=[Pf,Xd,Lu,Yl,tg,eg];EZo=nt(dJ),{x:TZo,y:AZo,x2:kZo,y2:IZo,latitude:DZo,longitude:NZo,latitude2:MZo,longitude2:FZo,theta:OZo,theta2:RZo,radius:PZo,radius2:LZo}=dJ,yJ=Pt(dJ,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),e0t=nt(yJ),Qy={x:1,y:1},Ts=nt(Qy);bJ={theta:1,radius:1},t0t=nt(bJ);({text:jZo,tooltip:BZo,href:$Zo,url:zZo,description:UZo,detail:VZo,key:GZo,order:WZo}=yJ),r0t=Pt(yJ,["text","tooltip","href","url","description","detail","key","order"]),n0t=nt(r0t);s0t=Object.assign(Object.assign(Object.assign({},Qy),bJ),r0t),N2=nt(s0t);z2e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:qZo}=z2e,g_r=Pt(z2e,["geoshape"])});function xJ(t){return Xy(t)&&(t=zF(t,void 0)),"bin"+nt(t).map(r=>$F(t[r])?kn(`_${r}_${Object.entries(t[r])}`):kn(`_${r}_${t[r]}`)).join("")}function Sn(t){return t===!0||M2(t)&&!t.binned}function Ji(t){return t==="binned"||M2(t)&&t.binned===!0}function M2(t){return wo(t)}function $F(t){return t?.selection}function U2e(t){switch(t){case Of:case Rf:case jf:case Es:case ju:case Bu:case Qd:case jc:case Kd:case Zd:case cs:return 6;case Jd:return 4;default:return 10}}var Kl=N(()=>{"use strict";ir();Ir();Mr();bt()});var it={};fn(it,{CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>i2r,CONCAT_CANNOT_SHARE_AXIS:()=>O_r,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>_2r,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>S2r,FACETED_INDEPENDENT_SAME_SOURCE:()=>C2r,FIT_NON_SINGLE:()=>v_r,INVALID_CHANNEL_FOR_AXIS:()=>E2r,LEGEND_BINDINGS_PROJECT_LENGTH:()=>D_r,LINE_WITH_VARYING_SIZE:()=>Z_r,MORE_THAN_ONE_SORT:()=>w2r,NO_FIELDS_NEEDS_AS:()=>j_r,RANGE_STEP_DEPRECATED:()=>s2r,REPLACE_ANGLE_WITH_THETA:()=>U_r,SCALE_BINDINGS_CONTINUOUS:()=>I_r,cannotApplySizeToNonOrientedMark:()=>f2r,cannotProjectAggregate:()=>E_r,cannotProjectOnChannelWithoutField:()=>C_r,cannotStackNonLinearScale:()=>A2r,cannotStackRangedMark:()=>T2r,cannotUseScalePropertyWithNonColor:()=>a2r,channelRequiredForBinned:()=>P2r,columnsNotSupportByRowCol:()=>F_r,containerSizeNonSingle:()=>w_r,containerSizeNotCompatibleWithAutosize:()=>__r,customFormatTypeNotAllowed:()=>B_r,differentParse:()=>P_r,discreteChannelCannotEncode:()=>r2r,domainRequiredForThresholdScale:()=>L2r,domainSortDropped:()=>v2r,droppedDay:()=>D2r,droppingColor:()=>Y_r,droppingFit:()=>S_r,emptyFieldDef:()=>X_r,encodingOverridden:()=>$_r,errorBand1DNotSupport:()=>R2r,errorBarCenterAndExtentAreNotNeeded:()=>N2r,errorBarCenterIsNotNeeded:()=>O2r,errorBarCenterIsUsedWithWrongExtent:()=>M2r,errorBarContinuousAxisHasCustomizedAggregate:()=>F2r,facetChannelDropped:()=>t2r,facetChannelShouldBeDiscrete:()=>e2r,incompatibleChannel:()=>Q_r,independentScaleMeansIndependentGuide:()=>x2r,invalidAggregate:()=>q_r,invalidEncodingChannel:()=>J_r,invalidFieldType:()=>G_r,invalidFieldTypeForCountAggregate:()=>W_r,invalidSpec:()=>x_r,invalidTimeUnit:()=>I2r,invalidTransformIgnored:()=>L_r,latLongDeprecated:()=>K_r,lineWithRange:()=>n2r,mergeConflictingDomainProperty:()=>b2r,mergeConflictingProperty:()=>y2r,missingFieldType:()=>H_r,nearestNotSupportForContinuous:()=>T_r,noSameUnitLookup:()=>N_r,noSuchRepeatedValue:()=>M_r,orientOverridden:()=>o2r,primitiveChannelDef:()=>V_r,projectionOverridden:()=>z_r,scalePropertyNotWorkWithScaleType:()=>h2r,scaleTypeNotWorkWithChannel:()=>d2r,scaleTypeNotWorkWithFieldDef:()=>p2r,scaleTypeNotWorkWithMark:()=>m2r,selectionNotFound:()=>k_r,selectionNotSupported:()=>A_r,stackNonSummativeAggregate:()=>k2r,stepDropped:()=>g2r,unaggregateDomainHasNoEffectForRawField:()=>l2r,unaggregateDomainWithNonSharedDomainOp:()=>u2r,unaggregatedDomainWithLogScale:()=>c2r,unrecognizedParse:()=>R_r});function x_r(t){return`Invalid specification ${JSON.stringify(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function w_r(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function __r(t){let r=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${r} "container" only works well with autosize "fit" or "fit-${n}".`}function S_r(t){return t?`Dropping "fit-${t}" because spec has discrete ${Xl(t)}.`:'Dropping "fit" because spec has discrete size.'}function C_r(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function E_r(t,r){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${r}").`}function T_r(t){return`The "nearest" transform is not supported for ${t} marks.`}function A_r(t){return`Selection not supported for ${t} yet.`}function k_r(t){return`Cannot find a selection named "${t}".`}function N_r(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}function M_r(t){return`Unknown repeated value "${t}".`}function F_r(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}function R_r(t){return`Unrecognized parse "${t}".`}function P_r(t,r,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${r}.`}function L_r(t){return`Ignoring an invalid transform: ${mi(t)}.`}function B_r(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function $_r(t){return`Layer's shared ${t.join(",")} channel ${t.length===1?"is":"are"} overriden.`}function z_r(t){let{parentProjection:r,projection:n}=t;return`Layer's shared projection ${mi(r)} is overridden by a child projection ${mi(n)}.`}function V_r(t,r,n){return`Channel ${t} is a ${r}. Converted to {value: ${mi(n)}}.`}function G_r(t){return`Invalid field type "${t}".`}function W_r(t,r){return`Invalid field type "${t}" for aggregate: "${r}", using "quantitative" instead.`}function q_r(t){return`Invalid aggregation operator "${t}".`}function H_r(t,r){return`Missing type for channel "${t}", using "${r}" instead.`}function Y_r(t,r){let{fill:n,stroke:o}=r;return`Dropping color ${t} as the plot also has ${n&&o?"fill and stroke":n?"fill":"stroke"}.`}function X_r(t,r){return`Dropping ${mi(t)} from channel "${r}" since it does not contain any data field, datum, value, or signal.`}function K_r(t,r,n){return`${t}-encoding with type ${r} is deprecated. Replacing with ${n}-encoding.`}function Q_r(t,r,n){return`${t} dropped as it is incompatible with "${r}"${n?` when ${n}`:""}.`}function J_r(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function e2r(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function t2r(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function r2r(t,r){return`Using discrete channel "${t}" to encode "${r}" field can be misleading as it does not encode ${r==="ordinal"?"order":"magnitude"}.`}function n2r(t,r){return`Line mark is for continuous lines and thus cannot be used with ${t&&r?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function o2r(t,r){return`Specified orient "${t}" overridden with "${r}".`}function a2r(t){return`Cannot use the scale property "${t}" with non-color channel.`}function l2r(t){return`Using unaggregated domain with raw field has no effect (${mi(t)}).`}function u2r(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function c2r(t){return`Unaggregated domain is currently unsupported for log scale (${mi(t)}).`}function f2r(t){return`Cannot apply size to non-oriented mark "${t}".`}function d2r(t,r,n){return`Channel "${t}" does not work with "${r}" scale. We are using "${n}" scale instead.`}function p2r(t,r){return`FieldDef does not work with "${t}" scale. We are using "${r}" scale instead.`}function h2r(t,r,n){return`${n}-scale's "${r}" is dropped as it does not work with ${t} scale.`}function m2r(t,r){return`Scale type "${r}" does not work with mark "${t}".`}function g2r(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function y2r(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${mi(n)} and ${mi(o)}). Using ${mi(n)}.`}function b2r(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${mi(n)} and ${mi(o)}). Using the union of the two domains.`}function x2r(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function v2r(t){return`Dropping sort property ${mi(t)} as unioned domains only support boolean or op "count", "min", and "max".`}function T2r(t){return`Cannot stack "${t}" if there is already "${t}2".`}function A2r(t){return`Cannot stack non-linear scale (${t}).`}function k2r(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function I2r(t,r){return`Invalid ${t}: ${mi(r)}.`}function D2r(t){return`Dropping day from datetime ${mi(t)} as day cannot be combined with other units.`}function N2r(t,r){return`${r?"extent ":""}${r&&t?"and ":""}${t?"center ":""}${r&&t?"are ":"is "}not needed when data are aggregated.`}function M2r(t,r,n){return`${t} is not usually used with ${r} for ${n}.`}function F2r(t,r){return`Continuous axis should not have customized aggregation function ${t}; ${r} already agregates the axis.`}function O2r(t,r){return`Center is not needed to be specified in ${r} when extent is ${t}.`}function R2r(t){return`1D error band does not support ${t}.`}function P2r(t){return`Channel ${t} is required for "binned" bin.`}function L2r(t){return`Domain for ${t} is required for threshold scale.`}var v_r,I_r,D_r,O_r,j_r,U_r,Z_r,i2r,s2r,w2r,_2r,S2r,C2r,E2r,l0t=N(()=>{"use strict";Ir();bt();v_r='Autosize "fit" only works for single views and layered views.';I_r="Scale bindings are currently only supported for scales with unbinned, continuous domains.",D_r="Legend bindings are only supported for selections over an individual field or encoding channel.";O_r="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";j_r='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';U_r="Arc marks uses theta channel rather than angle, replacing angle with theta.";Z_r="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";i2r="Custom domain scale cannot be unioned with default field-based domain.",s2r=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;w2r="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",_2r="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",S2r="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",C2r="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",E2r="Invalid channel for axis."});function c0t(t){return UF=t,UF}function f0t(){return UF=u0t,UF}function st(...t){UF.warn(...t)}function d0t(...t){UF.debug(...t)}var u0t,UF,cn=N(()=>{"use strict";ir();l0t();u0t=x2e(WQ),UF=u0t});function Jy(t){if(t&&wo(t)){for(let r of vJ)if(r in t)return!0}return!1}function $2r(t){if(sJ(t)&&(t=+t),_o(t))return t>4&&st(it.invalidTimeUnit("quarter",t)),t-1;throw new Error(it.invalidTimeUnit("quarter",t))}function z2r(t){if(sJ(t)&&(t=+t),_o(t))return t-1;{let r=t.toLowerCase(),n=p0t.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=j2r.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("month",t))}}function U2r(t){if(sJ(t)&&(t=+t),_o(t))return t%7;{let r=t.toLowerCase(),n=h0t.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=B2r.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("day",t))}}function V2e(t,r){let n=[];if(r&&t.day!==void 0&&nt(t).length>1&&(st(it.droppedDay(t)),t=sr(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){let o=r?z2r(t.month):t.month;n.push(o)}else if(t.quarter!==void 0){let o=r?$2r(t.quarter):t.quarter;n.push(_o(o)?o*3:o+"*3")}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){let o=r?U2r(t.day):t.day;n.push(_o(o)?o+1:o+"+1")}else n.push(1);for(let o of["hours","minutes","seconds","milliseconds"]){let i=t[o];n.push(typeof i>"u"?0:i)}return n}function F2(t){let n=V2e(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function m0t(t){let n=V2e(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function g0t(t){let r=V2e(t,!0);return t.utc?+new Date(Date.UTC(...r)):+new Date(...r)}var p0t,j2r,h0t,B2r,VF=N(()=>{"use strict";ir();cn();eb();bt();p0t=["january","february","march","april","may","june","july","august","september","october","november","december"],j2r=p0t.map(t=>t.substr(0,3)),h0t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],B2r=h0t.map(t=>t.substr(0,3))});function b0t(t){return!!y0t[t]}function W2e(t){return t.startsWith("utc")}function V2r(t){return t.substr(3)}function U$(t){let r=[];for(let n of vJ)x0t(t,n)&&r.push(n);return r}function x0t(t,r){let n=t.indexOf(r);return!(n<0||n>0&&r==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&r==="day"&&t.charAt(n+3)==="o"||n>0&&r==="year"&&t.charAt(n-1)==="f")}function v0t(t,r,{end:n}={end:!1}){let o=oJ(r),i=W2e(t)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${o})-1)`:`${i}${u}(${o})`}let a,l={};for(let u of vJ)x0t(t,u)&&(l[u]=s(u),a=u);return n&&(l[a]+="+1"),m0t(l)}function q2e(t){if(!t)return;let r=U$(t);return`timeUnitSpecifier(${(0,G2e.default)(r)}, ${(0,G2e.default)(G2r)})`}function w0t(t,r,n){if(!t)return;let o=q2e(t);return`${n||W2e(t)?"utc":"time"}Format(${r}, ${o})`}function fs(t){if(!t)return;let r;return pr(t)?r={unit:t}:wo(t)&&(r=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),W2e(r.unit)&&(r.utc=!0,r.unit=V2r(r.unit)),r}function _0t(t){let r=fs(t),{utc:n}=r,o=Pt(r,["utc"]);return o.unit?(n?"utc":"")+nt(o).map(i=>kn(`${i==="unit"?"":`_${i}_`}${o[i]}`)).join(""):(n?"utc":"")+"timeunit"+nt(o).map(i=>kn(`_${i}_${o[i]}`)).join("")}var G2e,y0t,vJ,G2r,eb=N(()=>{"use strict";So();G2e=Al(E2e());ir();VF();bt();y0t={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},vJ=nt(y0t);G2r={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "}});function rr(t){return t&&!!t.signal}function zu(t){return!!t.step}function S0t(t){return Bt(t)?!1:"fields"in t&&!("data"in t)}function C0t(t){return Bt(t)?!1:"fields"in t&&"data"in t}function Zv(t){return Bt(t)?!1:"field"in t&&"data"in t}var W2r,E0t,T0t,wJ,ho=N(()=>{"use strict";ir();bt();W2r={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},E0t=nt(W2r),T0t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},wJ=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"]});function A0t(t){return t?.selection}function _J(t){return t&&!!t.field&&t.equal!==void 0}function k0t(t){return t&&!!t.field&&t.lt!==void 0}function I0t(t){return t&&!!t.field&&t.lte!==void 0}function D0t(t){return t&&!!t.field&&t.gt!==void 0}function N0t(t){return t&&!!t.field&&t.gte!==void 0}function SJ(t){if(t&&t.field){if(Bt(t.range)&&t.range.length===2)return!0;if(rr(t.range))return!0}return!1}function CJ(t){return t&&!!t.field&&(Bt(t.oneOf)||Bt(t.in))}function q2r(t){return t&&!!t.field&&t.valid!==void 0}function H2e(t){return CJ(t)||_J(t)||SJ(t)||k0t(t)||D0t(t)||I0t(t)||N0t(t)}function tb(t,r){return G$(t,{timeUnit:r,wrapTime:!0})}function H2r(t,r){return t.map(n=>tb(n,r))}function EJ(t,r=!0){var n;let{field:o}=t,i=(n=fs(t.timeUnit))===null||n===void 0?void 0:n.unit,s=i?"time("+v0t(i,o)+")":vt(t,{expr:"datum"});if(_J(t))return s+"==="+tb(t.equal,i);if(k0t(t)){let a=t.lt;return`${s}<${tb(a,i)}`}else if(D0t(t)){let a=t.gt;return`${s}>${tb(a,i)}`}else if(I0t(t)){let a=t.lte;return`${s}<=${tb(a,i)}`}else if(N0t(t)){let a=t.gte;return`${s}>=${tb(a,i)}`}else{if(CJ(t))return`indexof([${H2r(t.oneOf,i).join(",")}], ${s}) !== -1`;if(q2r(t))return V$(s,t.valid);if(SJ(t)){let{range:a}=t,l=rr(a)?{signal:`${a.signal}[0]`}:a[0],u=rr(a)?{signal:`${a.signal}[1]`}:a[1];if(l!==null&&u!==null&&r)return"inrange("+s+", ["+tb(l,i)+", "+tb(u,i)+"])";let c=[];return l!==null&&c.push(`${s} >= ${tb(l,i)}`),u!==null&&c.push(`${s} <= ${tb(u,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(t)}`)}function V$(t,r=!0){return r?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function M0t(t){var r;return H2e(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(r=fs(t.timeUnit))===null||r===void 0?void 0:r.unit}):t}var RA=N(()=>{"use strict";ir();Mr();eb();ho()});function O0t(t){if(t)switch(t=t.toLowerCase(),t){case"q":case oh:return"quantitative";case"t":case rb:return"temporal";case"o":case W$:return"ordinal";case"n":case q$:return"nominal";case ng:return"geojson"}}var GF,oh,W$,rb,q$,ng,F0t,tp=N(()=>{"use strict";bt();GF={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},oh=GF.quantitative,W$=GF.ordinal,rb=GF.temporal,q$=GF.nominal,ng=GF.geojson,F0t=nt(GF)});function R0t(t,r){let n=Y2e[t],o=Y2e[r];return n===o||n==="ordinal-position"&&o==="time"||o==="ordinal-position"&&n==="time"}function X2e(t){return X2r[t]}function L0t(t){return t in Q2r}function es(t){return t in oSr}function xa(t){return t in rSr}function Bf(t){return t in K2r}function WF(t){return t in eSr}function B0t(t){return!pr(t)&&!!t.name}function K2e(t){return t?.selection}function $0t(t){return t&&t.unionWith}function TJ(t,r){switch(r){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!qt(["point","band","identity"],t);case"bins":return!qt(["point","band","identity","ordinal"],t);case"round":return Bf(t)||t==="band"||t==="point";case"padding":return Bf(t)||qt(["point","band"],t);case"paddingOuter":case"align":return qt(["point","band"],t);case"paddingInner":return t==="band";case"domainMid":case"clamp":return Bf(t);case"nice":return Bf(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return xa(t)&&!qt(["log","time","utc","threshold","quantile"],t)}}function AJ(t,r){switch(r){case"interpolate":case"scheme":case"domainMid":return Kv(t)?void 0:it.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function Q2e(t,r){return qt([W$,q$],r)?t===void 0||es(t):r===rb?qt([Ui.TIME,Ui.UTC,void 0],t):r===oh?qt([Ui.LOG,Ui.POW,Ui.SQRT,Ui.SYMLOG,Ui.QUANTILE,Ui.QUANTIZE,Ui.THRESHOLD,Ui.LINEAR,void 0],t):!0}function J2e(t,r){if(!$u(t))return!1;switch(t){case to:case gi:case Rc:case Lf:return Bf(r)||qt(["band","point"],r);case jf:case Qd:case jc:case Kd:case Zd:case rg:return Bf(r)||WF(r)||qt(["band","point","ordinal"],r);case Es:case ju:case Bu:return r!=="band";case Jd:return r==="ordinal"||WF(r);case cs:return r==="ordinal"}}function sSr(){var t;let r={};for(let n of hJ)for(let o of F0t)for(let i of Y2r){let s=aSr(n,o);J2e(n,i)&&Q2e(i,o)&&(r[s]=(t=r[s])!==null&&t!==void 0?t:[],r[s].push(i))}return r}function aSr(t,r){return t+"_"+r}var Ui,Y2e,Y2r,X2r,P0t,K2r,Z2r,Q2r,J2r,eSr,tSr,rSr,nSr,oSr,j0t,Z2e,EQo,TQo,AQo,kQo,IQo,iSr,z0t,DQo,Ci=N(()=>{"use strict";So();ir();Ir();Ir();cn();tp();bt();Ui={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Y2e={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Y2r=nt(Y2e);X2r={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};P0t=["linear","log","pow","sqrt","symlog","time","utc"],K2r=Qm(P0t),Z2r=["linear","log","pow","sqrt","symlog"],Q2r=Qm(Z2r);J2r=["quantile","quantize","threshold"],eSr=Qm(J2r),tSr=P0t.concat(["quantile","quantize","threshold","sequential","identity"]),rSr=Qm(tSr),nSr=["ordinal","bin-ordinal","point","band"],oSr=Qm(nSr);j0t={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};Z2e={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},EQo=nt(Z2e),{type:TQo,domain:AQo,range:kQo,scheme:IQo}=Z2e,iSr=Pt(Z2e,["type","domain","range","scheme"]),z0t=nt(iSr),DQo=sSr()});function HF(t){let{channel:r,channelDef:n,markDef:o,scale:i,config:s}=t,a=tSe(t);return At(n)&&!fJ(n.aggregate)&&i&&Bf(i.get("type"))&&i.get("zero")===!1?eSe({fieldDef:n,channel:r,markDef:o,ref:a,config:s}):a}function eSe({fieldDef:t,channel:r,markDef:n,ref:o,config:i}){return Ff(n.type)||ln("invalid",n,i)===null?o:[lSr(t,r),o]}function lSr(t,r){let n=H$(t,!0),i=ep(r)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function H$(t,r=!0){return V$(pr(t)?t:vt(t,{expr:"datum"}),!r)}function U0t(t){let{datum:r}=t;return Jy(r)?F2(r):`${JSON.stringify(r)}`}function nb(t,r,n,o){let i={};if(r&&(i.scale=r),$f(t)){let{datum:s}=t;Jy(s)?i.signal=F2(s):rr(s)?i.signal=s.signal:i.value=s}else i.field=vt(t,n);if(o){let{offset:s,band:a}=o;s&&(i.offset=s),a&&(i.band=a)}return i}function qF({scaleName:t,fieldOrDatumDef:r,fieldOrDatumDef2:n,offset:o,startSuffix:i,band:s=.5}){let a=0<s&&s<1?"datum":void 0,l=vt(r,{expr:a,suffix:i}),u=n!==void 0?vt(n,{expr:a}):vt(r,{suffix:"end",expr:a}),c={};if(s===0||s===1){c.scale=t;let f=s===0?l:u;c.field=f}else{let f=`${s} * ${l} + ${1-s} * ${u}`;c.signal=`scale("${t}", ${f})`}return o&&(c.offset=o),c}function tSe({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c,band:f}){var d;if(r){if(Or(r)){if(va(r)){f=f??R2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:l,config:i,isMidPoint:!0});let{bin:h,timeUnit:m,type:g}=r;if(Sn(h)||f&&m&&g===rb)return l&&l.impute?nb(r,s,{binSuffix:"mid"},{offset:u}):f?qF({scaleName:s,fieldOrDatumDef:r,band:f,offset:u}):nb(r,s,ob(r,t)?{binSuffix:"range"}:{},{offset:u});if(Ji(h)){if(At(n))return qF({scaleName:s,fieldOrDatumDef:r,fieldOrDatumDef2:n,band:f,offset:u});{let y=t===to?Pf:Xd;st(it.channelRequiredForBinned(y))}}}let p=a?.get("type");return nb(r,s,es(p)?{binSuffix:"range"}:{},{offset:u,band:p==="band"?(d=f??r.band)!==null&&d!==void 0?d:.5:void 0})}else if(Uu(r)){let p=r.value,h=u?{offset:u}:{};return Object.assign(Object.assign({},PA(t,p)),h)}}return M$(c)&&(c=c()),c&&Object.assign(Object.assign({},c),u?{offset:u}:{})}function PA(t,r){return qt(["x","x2"],t)&&r==="width"?{field:{group:"width"}}:qt(["y","y2"],t)&&r==="height"?{field:{group:"height"}}:mo(r)}var O2=N(()=>{"use strict";ir();Yv();Kl();Ir();Mr();VF();cn();ba();RA();Ci();tp();bt();ho();Po()});function sb(t){return t&&t!=="number"&&t!=="time"}function G0t(t,r,n){return`${t}(${r}${n?`, ${JSON.stringify(n)}`:""})`}function YF({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s}){var a,l;if(sb(n))return Y$({fieldOrDatumDef:t,format:r,formatType:n,expr:o,config:s});let u=W0t(t,o,i);if(ZF(t)){let c=fSr(u,At(t)?(a=fs(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0,r,s.timeFormat,KF(t)&&((l=t.scale)===null||l===void 0?void 0:l.type)===Ui.UTC);return c?{signal:c}:void 0}if(r=q0t(ib(t),r,s),At(t)&&Sn(t.bin)){let c=vt(t,{expr:o,binSuffix:"end"});return{signal:XF(u,c,r,n,s)}}else return r||ib(t)==="quantitative"?{signal:`${H0t(u,r)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function W0t(t,r,n){return At(t)?n?`${vt(t,{expr:r,suffix:"end"})}-${vt(t,{expr:r,suffix:"start"})}`:vt(t,{expr:r}):U0t(t)}function Y$({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s,field:a}){if(a=a??W0t(t,o,i),At(t)&&Sn(t.bin)){let l=vt(t,{expr:o,binSuffix:"end"});return{signal:XF(a,l,r,n,s)}}return{signal:G0t(n,a,r)}}function IJ(t,r,n,o,i,s){var a;if(!sb(o)){if(ZF(t)){let l=At(t)?(a=fs(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return cSr(n,l,i,s)}return q0t(r,n,i)}}function DJ(t,r,n){if(t&&(rr(t)||t==="number"||t==="time"))return t;if(ZF(r)&&n!=="time"&&n!=="utc")return"time"}function q0t(t,r,n){if(pr(r))return r;if(t===oh)return n.numberFormat}function cSr(t,r,n,o){return t||(r?{signal:q2e(r)}:o?void 0:n.timeFormat)}function H0t(t,r){return`format(${t}, "${r||""}")`}function V0t(t,r,n,o){var i;return sb(n)?G0t(n,t,r):H0t(t,(i=pr(r)?r:void 0)!==null&&i!==void 0?i:o.numberFormat)}function XF(t,r,n,o,i){let s=V0t(t,n,o,i),a=V0t(r,n,o,i);return`${V$(t,!1)} ? "null" : ${s} + "${uSr}" + ${a}`}function fSr(t,r,n,o,i){return!r||n?(n=pr(n)?n:o,`${i?"utc":"time"}Format(${t}, '${n}')`):w0t(r,t,i)}var uSr,ab=N(()=>{"use strict";ir();Kl();Mr();RA();Ci();eb();tp();ho();O2();uSr=" \u2013 "});function rSe(t){return t in dSr}function NJ(t){return!!t&&!!t.encoding}function xl(t){return!!t&&(t.op==="count"||!!t.field)}function MJ(t){return!!t&&Bt(t)}var P2,dSr,og=N(()=>{"use strict";ir();P2="min",dSr={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1}});function lb(t){return"row"in t||"column"in t}function FJ(t){return!!t&&"header"in t}function Qv(t){return"facet"in t}var Jv=N(()=>{"use strict"});function Y0t(t){return t.selection}function X0t(t){return t&&!pr(t)&&"repeat"in t}function nSe(t){let{field:r,timeUnit:n,bin:o,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),o?{bin:o}:{}),i?{aggregate:i}:{}),{field:r})}function oSe(t){return va(t)&&"sort"in t}function R2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:i,config:s,isMidPoint:a}){if(Or(r)&&r.band!==void 0)return r.band;if(At(r)){let{timeUnit:l,bin:u}=r;if(l&&!n)return a?ub("timeUnitBandPosition",o,s):R2e(o.type)?ub("timeUnitBand",o,s):0;if(Sn(u))return R2e(o.type)&&!a?1:.5}if(i?.fieldChannel===t&&a)return .5}function QF(t,r,n,o,i,s){return Sn(r.bin)||r.timeUnit&&va(r)&&r.type==="temporal"?!!R2({channel:t,fieldDef:r,fieldDef2:n,stack:o,markDef:i,config:s}):!1}function JF(t){return!!t&&"condition"in t}function eO(t){let r=t&&t.condition;return!!r&&!Bt(r)&&At(r)}function RJ(t){let r=t&&t.condition;return!!r&&!Bt(r)&&Or(r)}function K0t(t){let r=t&&t.condition;return!!r&&(Bt(r)||Uu(r))}function At(t){return!!t&&(!!t.field||t.aggregate==="count")}function ib(t){return t&&t.type}function $f(t){return!!t&&"datum"in t}function zf(t){return va(t)&&J0t(t)||PJ(t)}function PJ(t){return $f(t)&&_o(t.datum)}function Or(t){return At(t)||$f(t)}function va(t){return!!t&&("field"in t&&"type"in t||t.aggregate==="count")}function Uu(t){return t&&"value"in t&&"value"in t}function KF(t){return!!t&&("scale"in t||"sort"in t)}function LJ(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function Z0t(t){return!!t&&"legend"in t}function Q0t(t){return!!t&&("format"in t||"formatType"in t)}function pSr(t){return"op"in t}function vt(t,r={}){var n,o,i;let s=t.field,a=r.prefix,l=r.suffix,u="";if(hSr(t))s=Egt("count");else{let c;if(!r.nofn)if(pSr(t))c=t.op;else{let{bin:f,aggregate:d,timeUnit:p}=t;Sn(f)?(c=xJ(f),l=((n=r.binSuffix)!==null&&n!==void 0?n:"")+((o=r.suffix)!==null&&o!==void 0?o:"")):d?Jm(d)?(u=`["${s}"]`,s=`argmax_${d.argmax}`):rh(d)?(u=`["${s}"]`,s=`argmin_${d.argmin}`):c=String(d):p&&(c=_0t(p),l=(!qt(["range","mid"],r.binSuffix)&&r.binSuffix||"")+((i=r.suffix)!==null&&i!==void 0?i:""))}c&&(s=s?`${c}_${s}`:c)}return l&&(s=`${s}_${l}`),a&&(s=`${a}_${s}`),r.forAs?iJ(s):r.expr?Cgt(s,r.expr)+u:Mf(s)+u}function iSe(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return At(t)&&!!t.bin;case"temporal":return!1}throw new Error(it.invalidFieldType(t.type))}function J0t(t){return!iSe(t)}function hSr(t){return t.aggregate==="count"}function mSr(t,r){var n;let{field:o,bin:i,timeUnit:s,aggregate:a}=t;if(a==="count")return r.countTitle;if(Sn(i))return`${o} (binned)`;if(s){let l=(n=fs(s))===null||n===void 0?void 0:n.unit;if(l)return`${o} (${U$(l).join("-")})`}else if(a)return Jm(a)?`${o} for max ${a.argmax}`:rh(a)?`${o} for min ${a.argmin}`:`${AA(a)} of ${o}`;return o}function gSr(t){let{aggregate:r,bin:n,timeUnit:o,field:i}=t;if(Jm(r))return`${i} for argmax(${r.argmax})`;if(rh(r))return`${i} for argmin(${r.argmin})`;let s=fs(o),a=r||s?.unit||s?.maxbins&&"timeunit"||Sn(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}function sSe(t){tyt=t}function ryt(){sSe(eyt)}function ih(t,r,{allowDisabling:n,includeDefault:o=!0}){var i,s;let l=((i=jJ(t))!==null&&i!==void 0?i:{}).title;if(!At(t))return l;let u=t,c=o?aSe(u,r):void 0;return n?Fn(l,u.title,c):(s=l??u.title)!==null&&s!==void 0?s:c}function jJ(t){if(LJ(t)&&t.axis)return t.axis;if(Z0t(t)&&t.legend)return t.legend;if(FJ(t)&&t.header)return t.header}function aSe(t,r){return tyt(t,r)}function tO(t){var r;if(Q0t(t)){let{format:n,formatType:o}=t;return{format:n,formatType:o}}else{let n=(r=jJ(t))!==null&&r!==void 0?r:{},{format:o,formatType:i}=n;return{format:o,formatType:i}}}function ySr(t,r){if(t.timeUnit)return"temporal";if(Sn(t.bin))return"quantitative";switch(BF(r)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function Zl(t){if(At(t))return t;if(eO(t))return t.condition}function Io(t){if(Or(t))return t;if(RJ(t))return t.condition}function X$(t,r,n){if(pr(t)||_o(t)||Xy(t)){let o=pr(t)?"string":_o(t)?"number":"boolean";return st(it.primitiveChannelDef(r,o,t)),{value:t}}return Or(t)?OJ(t,r,n):RJ(t)?Object.assign(Object.assign({},t),{condition:OJ(t.condition,r,n)}):t}function OJ(t,r,n){if(Q0t(t)){let{format:o,formatType:i}=t,s=Pt(t,["format","formatType"]);if(sb(i)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),OJ(s,r,n)}else{let o=LJ(t)?"axis":Z0t(t)?"legend":FJ(t)?"header":null;if(o&&t[o]){let i=t[o],{format:s,formatType:a}=i,l=Pt(i,["format","formatType"]);if(sb(a)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),OJ(Object.assign(Object.assign({},t),{[o]:l}),r,n)}}return At(t)?lSe(t,r):bSr(t)}function bSr(t){let r=t.type;if(r)return t;let{datum:n}=t;return r=_o(n)?"quantitative":pr(n)?"nominal":Jy(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:r})}function lSe(t,r){let{aggregate:n,timeUnit:o,bin:i,field:s}=t,a=Object.assign({},t);if(n&&!FF(n)&&!Jm(n)&&!rh(n)&&(st(it.invalidAggregate(n)),delete a.aggregate),o&&(a.timeUnit=fs(o)),s&&(a.field=`${s}`),Sn(i)&&(a.bin=zF(i,r)),Ji(i)&&!bl(r)&&st(`Channel ${r} should not be used with "binned" bin.`),va(a)){let{type:l}=a,u=O0t(l);l!==u&&(a.type=u),l!=="quantitative"&&fJ(n)&&(st(it.invalidFieldTypeForCountAggregate(l,n)),a.type="quantitative")}else if(!gJ(r)){let l=ySr(a,r);st(it.missingFieldType(r,l)),a.type=l}if(va(a)){let{compatible:l,warning:u}=xSr(a,r);l||st(u)}if(oSe(a)&&pr(a.sort)){let{sort:l}=a;if(rSe(l))return Object.assign(Object.assign({},a),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&rSe(u))return Object.assign(Object.assign({},a),{sort:{encoding:u,order:"descending"}})}if(FJ(a)){let{header:l}=a,{orient:u}=l,c=Pt(l,["orient"]);if(u)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}return a}function zF(t,r){return Xy(t)?{maxbins:U2e(r)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:U2e(r)}):t}function xSr(t,r){let n=t.type;if(n==="geojson"&&r!=="shape")return{compatible:!1,warning:`Channel ${r} should not be used with a geojson data.`};switch(r){case Of:case Rf:case OF:return J0t(t)?{compatible:!1,warning:it.facetChannelShouldBeDiscrete(r)}:LA;case to:case gi:case Es:case ju:case Bu:case MA:case OA:case RF:case Xv:case PF:case LF:case rg:case Rc:case Lf:case jF:return LA;case Lc:case Yl:case Pc:case Lu:return n!==oh?{compatible:!1,warning:`Channel ${r} should be used with a quantitative field only, not ${t.type} field.`}:LA;case jc:case Kd:case Zd:case Qd:case jf:case tg:case eg:case Pf:case Xd:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${r} should not be used with an unsorted discrete field.`}:LA;case Jd:return qt(["ordinal","nominal"],t.type)?LA:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case cs:return qt(["ordinal","nominal","geojson"],t.type)?LA:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case FA:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:LA}}function ZF(t){let{formatType:r}=tO(t);return r==="time"||!r&&vSr(t)}function vSr(t){return t&&(t.type==="temporal"||At(t)&&!!t.timeUnit)}function G$(t,{timeUnit:r,type:n,wrapTime:o,undefinedIfExprNotRequired:i}){var s;let a=r&&((s=fs(r))===null||s===void 0?void 0:s.unit),l=a||n==="temporal",u;return rr(t)?u=t.signal:Jy(t)?(l=!0,u=F2(t)):(pr(t)||_o(t))&&l&&(u=`datetime(${JSON.stringify(t)})`,b0t(a)&&(_o(t)&&t<1e4||pr(t)&&isNaN(Date.parse(t)))&&(u=F2({[a]:t}))),u?o&&l?`time(${u})`:u:i?void 0:JSON.stringify(t)}function BJ(t,r){let{type:n}=t;return r.map(o=>{let i=G$(o,{timeUnit:At(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:o})}function ob(t,r){return Sn(t.bin)?$u(r)&&qt(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}var eyt,tyt,LA,Mr=N(()=>{"use strict";So();ir();Yv();Kl();Ir();Po();ab();VF();cn();ba();og();Jv();eb();tp();bt();ho();eyt=(t,r)=>{switch(r.fieldTitle){case"plain":return t.field;case"functional":return gSr(t);default:return mSr(t,r)}},tyt=eyt;LA={compatible:!0}});function $J(t){let{anchor:r,frame:n,offset:o,orient:i,color:s,subtitleColor:a,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:f,subtitleLineHeight:d,subtitlePadding:p}=t,h=Pt(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},h),s?{fill:s}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},r?{anchor:r}:{}),n?{frame:n}:{}),o?{offset:o}:{}),i?{orient:i}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),f?{subtitleFontWeight:f}:{}),d?{subtitleLineHeight:d}:{}),p?{subtitlePadding:p}:{}),b=A2(m,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMark:g,subtitle:y}}function ig(t){return pr(t)||Bt(t)&&pr(t[0])}var K$=N(()=>{"use strict";So();ir();bt()});function mo(t){return rr(t)?t:t!==void 0?{value:t}:void 0}function uSe(t){return rr(t)?t.signal:Jr(t.value)}function L2(t){return rr(t)?t.signal:t==null?null:Jr(t)}function nyt(t,r,n){for(let o of n){let i=ub(o,r.markDef,r.config);i!==void 0&&(t[o]=mo(i))}return t}function cSe(t){var r;return[].concat(t.type,(r=t.style)!==null&&r!==void 0?r:[])}function ln(t,r,n,o={}){let{vgChannel:i,ignoreVgConfig:s}=o;return i&&r[i]!==void 0?r[i]:r[t]!==void 0?r[t]:s&&(!i||i===t)?void 0:ub(t,r,n,o)}function ub(t,r,n,{vgChannel:o}={}){return Fn(o?Z$(t,r,n.style):void 0,Z$(t,r,n.style),o?n[r.type][o]:void 0,n[r.type][t],o?n.mark[o]:n.mark[t])}function Z$(t,r,n){return fSe(t,cSe(r),n)}function fSe(t,r,n){r=Mn(r);let o;for(let i of r){let s=n[i];s&&s[t]!==void 0&&(o=s[t])}return o}function zJ(t,r){return Mn(t).reduce((n,o)=>{var i;return n.field.push(vt(o,r)),n.order.push((i=o.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function dSe(t,r){let n=[...t];return r.forEach(o=>{for(let i of n)if(Hv(i,o))return;n.push(o)}),n}function pSe(t,r){return Hv(t,r)||!r?t:t?[...Mn(t),...Mn(r)].join(", "):r}function UJ(t,r){let n=t.value,o=r.value;if(n==null||o===null)return{explicit:t.explicit,value:null};if((ig(n)||rr(n))&&(ig(o)||rr(o)))return{explicit:t.explicit,value:pSe(n,o)};if(ig(n)||rr(n))return{explicit:t.explicit,value:n};if(ig(o)||rr(o))return{explicit:t.explicit,value:o};if(!ig(n)&&!rr(n)&&!ig(o)&&!rr(o))return{explicit:t.explicit,value:dSe(n,o)};throw new Error("It should never reach here")}var Po=N(()=>{"use strict";ir();Mr();K$();bt();ho()});function cb(t,r){let n=t&&t[r];return n?Bt(n)?k2(n,o=>!!o.field):At(n)||eO(n):!1}function rO(t){return k2(hJ,r=>{if(cb(t,r)){let n=t[r];if(Bt(n))return k2(n,o=>!!o.aggregate);{let o=Zl(n);return o&&!!o.aggregate}}return!1})}function nO(t,r){let n=[],o=[],i=[],s=[],a={};return Q$(t,(l,u)=>{if(At(l)){let{field:c,aggregate:f,bin:d,timeUnit:p}=l,h=Pt(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let m=jJ(l),g=m&&m.title,y=vt(l,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},g?[]:{title:ih(l,r,{allowDisabling:!0})}),h),{field:y});if(f){let x;if(Jm(f)?(x="argmax",y=vt({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${y}.${c}`):rh(f)?(x="argmin",y=vt({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${y}.${c}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(x=f),x){let v={op:x,as:y};c&&(v.field=c),s.push(v)}}else if(n.push(y),va(l)&&Sn(d)){if(o.push({bin:d,field:c,as:y}),n.push(vt(l,{binSuffix:"end"})),ob(l,u)&&n.push(vt(l,{binSuffix:"range"})),bl(u)){let x={field:y+"_end"};a[u+"2"]=x}b.bin="binned",gJ(u)||(b.type=oh)}else if(p){i.push({timeUnit:p,field:c,as:y});let x=va(l)&&l.type!==rb&&"time";x&&(u===MA||u===Xv?b.formatType=x:o0t(u)?b.legend=Object.assign({formatType:x},b.legend):bl(u)&&(b.axis=Object.assign({formatType:x},b.axis)))}a[u]=b}else n.push(c),a[u]=t[u]}else a[u]=t[u]}),{bins:o,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function _Sr(t,r,n){let o=a0t(r,n);if(o){if(o==="binned"){let i=t[r===Pf?to:gi];return!!(At(i)&&At(t[r])&&Ji(i.bin))}}else return!1;return!0}function oyt(t,r,n){let o=r.type;return nt(t).reduce((i,s)=>{if(!mJ(s))return st(it.invalidEncodingChannel(s)),i;let a=t[s];if(s==="angle"&&o==="arc"&&!t.theta&&(st(it.REPLACE_ANGLE_WITH_THETA),s=Rc),!_Sr(t,s,o))return st(it.incompatibleChannel(s,o)),i;if(s===jf&&o==="line"){let l=Zl(t[s]);if(l?.aggregate)return st(it.LINE_WITH_VARYING_SIZE),i}if(s===Es&&(r.filled?"fill"in t:"stroke"in t))return st(it.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if(s===OA||s===FA&&!Bt(a)&&!Uu(a)||s===Xv&&Bt(a))a&&(i[s]=Mn(a).reduce((l,u)=>(At(u)?l.push(lSe(u,s)):st(it.emptyFieldDef(u,s)),l),[]));else{if(s===Xv&&a===null)i[s]=null;else if(!At(a)&&!$f(a)&&!Uu(a)&&!JF(a)&&!rr(a))return st(it.emptyFieldDef(a,s)),i;i[s]=X$(a,s,n)}return i},{})}function iyt(t){let r=[];for(let n of nt(t))if(cb(t,n)){let o=t[n],i=Mn(o);for(let s of i)At(s)?r.push(s):eO(s)&&r.push(s.condition)}return r}function Q$(t,r,n){if(t)for(let o of nt(t)){let i=t[o];if(Bt(i))for(let s of i)r.call(n,s,o);else r.call(n,i,o)}}function VJ(t,r,n,o){return t?nt(t).reduce((i,s)=>{let a=t[s];return Bt(a)?a.reduce((l,u)=>r.call(o,l,u,s),i):r.call(o,i,a,s)},n):n}function GJ(t,r){return nt(r).reduce((n,o)=>{switch(o){case to:case gi:case PF:case jF:case LF:case Pf:case Xd:case Rc:case tg:case Lf:case eg:case Pc:case Lc:case Lu:case Yl:case MA:case cs:case rg:case Xv:return n;case FA:if(t==="line"||t==="trail")return n;case OA:case RF:{let i=r[o];if(Bt(i)||At(i))for(let s of Mn(i))s.aggregate||n.push(vt(s,{}));return n}case jf:if(t==="trail")return n;case Es:case ju:case Bu:case jc:case Kd:case Zd:case Jd:case Qd:{let i=Zl(r[o]);return i&&!i.aggregate&&n.push(vt(i,{})),n}}},[])}var Bc=N(()=>{"use strict";So();ir();Yv();Kl();Ir();Mr();cn();tp();bt();ho()});function syt(t){let{tooltip:r}=t,n=Pt(t,["tooltip"]);if(!r)return{filteredEncoding:t};let o,i;if(Bt(r)){for(let s of r)s.aggregate?(o||(o=[]),o.push(s)):(i||(i=[]),i.push(s));o&&(n.tooltip=o)}else r.aggregate?n.tooltip=r:i=r;return Bt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function J$(t,r,n,o=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...t.map(({fieldPrefix:s,titlePrefix:a})=>{let l=o?` of ${r.field}`:"";return{field:s+r.field,type:r.type,title:rr(a)?{signal:a+`"${escape(l)}"`}:a+l}}),...iyt(n)]}}function hSe(t){let{axis:r,title:n,field:o}=t;return r&&r.title!==void 0?void 0:Fn(n,o)}function oO(t,r,n,o,i){let{scale:s,axis:a}=n;return({partName:l,mark:u,positionPrefix:c,endPositionPrefix:f=void 0,aria:d,extraEncoding:p={}})=>{let h=hSe(n);return mSe(t,l,i,d,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[r]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},h!==void 0?{title:h}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},pr(f)?{[r+"2"]:{field:f+"_"+n.field}}:{}),o),p)})}}function mSe(t,r,n,o,i){let{clip:s,color:a,opacity:l}=t,u=t.type;return t[r]||t[r]===void 0&&n[r]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[r]),s?{clip:s}:{}),a?{color:a}:{}),l?{opacity:l}:{}),Hl(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${r}`}),Xy(t[r])?{}:t[r]),o===!1?{aria:o}:{})})]:[]}function qJ(t,r,n){let{encoding:o}=t,i=r==="vertical"?"y":"x",s=o[i],a=o[i+"2"],l=o[i+"Error"],u=o[i+"Error2"];return{continuousAxisChannelDef:WJ(s,n),continuousAxisChannelDef2:WJ(a,n),continuousAxisChannelDefError:WJ(l,n),continuousAxisChannelDefError2:WJ(u,n),continuousAxis:i}}function WJ(t,r){if(t&&t.aggregate){let{aggregate:n}=t,o=Pt(t,["aggregate"]);return n!==r&&st(it.errorBarContinuousAxisHasCustomizedAggregate(n,r)),o}else return t}function HJ(t,r){let{mark:n,encoding:o}=t,{x:i,y:s}=o;if(zf(i)){if(zf(s)){let a=At(i)&&i.aggregate,l=At(s)&&s.aggregate;if(!a&&l===r)return"vertical";if(!l&&a===r)return"horizontal";if(a===r&&l===r)throw new Error("Both x and y cannot have aggregate");return Hl(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(zf(s))return"vertical";throw new Error("Need a valid continuous axis for "+r+"s")}}var YJ=N(()=>{"use strict";So();ir();Mr();Bc();cn();ba();bt();ho()});function uyt(t){return _o(t)?"tukey":t}function gSe(t,{config:r}){var n,o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=Pt(t,["mark","encoding","selection","projection"]),c=Hl(i)?i:{type:i};a&&st(it.selectionNotSupported("boxplot"));let f=(n=c.extent)!==null&&n!==void 0?n:r.boxplot.extent,d=ln("size",c,r),p=uyt(f),{transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:v,boxOrient:w,customTooltipWithoutAggregatedField:_}=CSr(t,f,r),{color:S,size:C}=x,E=Pt(x,["color","size"]),T=U=>oO(c,g,m,U,r.boxplot),I=T(E),k=T(x),F=T(Object.assign(Object.assign({},E),C?{size:C}:{})),D=J$([{fieldPrefix:p==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:p==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),L={type:"tick",color:"black",opacity:1,orient:v,invalid:null},P=p==="min-max"?D:J$([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),R=[...I({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:P}),...I({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:P}),...I({partName:"ticks",mark:L,positionPrefix:"lower_whisker",aria:!1,extraEncoding:P}),...I({partName:"ticks",mark:L,positionPrefix:"upper_whisker",aria:!1,extraEncoding:P})],V=[...p!=="tukey"?R:[],...k({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:D}),...F({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},wo(r.boxplot.median)&&r.boxplot.median.color?{color:r.boxplot.median.color}:{}),d?{size:d}:{}),{orient:v,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:D})],G;if(p!=="min-max"){let U=`datum["lower_box_${m.field}"]`,H=`datum["upper_box_${m.field}"]`,X=`(${H} - ${U})`,fe=`${U} - ${f} * ${X}`,$=`${H} + ${f} * ${X}`,M=`datum["${m.field}"]`,z={joinaggregate:cyt(m.field),groupby:y},q;p==="tukey"&&(q={transform:[{filter:`(${fe} <= ${M}) && (${M} <= ${$})`},{aggregate:[{op:"min",field:m.field,as:"lower_whisker_"+m.field},{op:"max",field:m.field,as:"upper_whisker_"+m.field},{op:"min",field:"lower_box_"+m.field,as:"lower_box_"+m.field},{op:"max",field:"upper_box_"+m.field,as:"upper_box_"+m.field},...b],groupby:y}],layer:R});let{tooltip:ee}=E,ae=Pt(E,["tooltip"]),{scale:Q,axis:le}=m,ie=hSe(m),K=mSe(c,"outliers",r.boxplot,!0,{transform:[{filter:`(${M} < ${fe}) || (${M} > ${$})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},ie!==void 0?{title:ie}:{}),Q!==void 0?{scale:Q}:{}),le!==void 0?{axis:le}:{})},ae),_?{tooltip:_}:{})})[0];K&&q?G={transform:[z],layer:[K,q]}:K?(G=K,G.transform.unshift(z)):q&&(G=q,G.transform.unshift(z))}return G?Object.assign(Object.assign({},u),{layer:[G,{transform:h,layer:V}]}):Object.assign(Object.assign({},u),{transform:((o=u.transform)!==null&&o!==void 0?o:[]).concat(h),layer:V})}function cyt(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function CSr(t,r,n){let o=HJ(t,e6),{continuousAxisChannelDef:i,continuousAxis:s}=qJ(t,o,e6),a=i.field,l=uyt(r),u=[...cyt(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${r}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${r}, datum["min_${a}"])`,as:"lower_whisker_"+a}],f=t.encoding,d=s,p=f[d],h=Pt(f,[typeof d=="symbol"?d:d+""]),{customTooltipWithoutAggregatedField:m,filteredEncoding:g}=syt(h),{bins:y,timeUnits:b,aggregate:x,groupby:v,encoding:w}=nO(g,n),_=o==="vertical"?"horizontal":"vertical",S=o;return{transform:[...y,...b,{aggregate:[...x,...u],groupby:v},...c],groupby:v,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:S,customTooltipWithoutAggregatedField:m}}var e6,ayt,lyt,ySe=N(()=>{"use strict";So();ir();Po();Bc();cn();ba();z$();YJ();e6="boxplot",ayt=["box","median","outliers","rule","ticks"],lyt=new Zy(e6,gSe)});function bSe(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:l,outerSpec:u,tooltipEncoding:c}=xSe(t,XJ,r),f=oO(l,i,o,s,r.errorbar),d={type:"tick",orient:a},p=[...f({partName:"ticks",mark:d,positionPrefix:"lower",aria:!1,extraEncoding:c}),...f({partName:"ticks",mark:d,positionPrefix:"upper",aria:!1,extraEncoding:c}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function ESr(t,r){let{encoding:n}=t;if(TSr(n))return{orient:HJ(t,r),inputType:"raw"};let o=ASr(n),i=kSr(n),s=n.x,a=n.y;if(o){if(i)throw new Error(`${r} cannot be both type aggregated-upper-lower and aggregated-error`);let l=n.x2,u=n.y2;if(Or(l)&&Or(u))throw new Error(`${r} cannot have both x2 and y2`);if(Or(l)){if(zf(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${r}`)}else if(Or(u)){if(zf(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${r}`)}throw new Error("No ranged axis")}else{let l=n.xError,u=n.xError2,c=n.yError,f=n.yError2;if(Or(u)&&!Or(l))throw new Error(`${r} cannot have xError2 without xError`);if(Or(f)&&!Or(c))throw new Error(`${r} cannot have yError2 without yError`);if(Or(l)&&Or(c))throw new Error(`${r} cannot have both xError and yError with both are quantiative`);if(Or(l)){if(zf(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Or(c)){if(zf(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function TSr(t){return(Or(t.x)||Or(t.y))&&!Or(t.x2)&&!Or(t.y2)&&!Or(t.xError)&&!Or(t.xError2)&&!Or(t.yError)&&!Or(t.yError2)}function ASr(t){return Or(t.x2)||Or(t.y2)}function kSr(t){return Or(t.xError)||Or(t.xError2)||Or(t.yError)||Or(t.yError2)}function xSe(t,r,n){var o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=Pt(t,["mark","encoding","selection","projection"]),c=Hl(i)?i:{type:i};a&&st(it.selectionNotSupported(r));let{orient:f,inputType:d}=ESr(t,r),{continuousAxisChannelDef:p,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=qJ(t,f,r),{errorBarSpecificAggregate:b,postAggregateCalculates:x,tooltipSummary:v,tooltipTitleWithFieldName:w}=ISr(c,p,h,m,g,d,r,n),_=s,S=y,C=_[S],E=y==="x"?"x2":"y2",T=_[E],I=y==="x"?"xError":"yError",k=_[I],F=y==="x"?"xError2":"yError2",D=_[F],L=Pt(_,[typeof S=="symbol"?S:S+"",typeof E=="symbol"?E:E+"",typeof I=="symbol"?I:I+"",typeof F=="symbol"?F:F+""]),{bins:P,timeUnits:R,aggregate:V,groupby:G,encoding:U}=nO(L,n),H=[...V,...b],X=d!=="raw"?[]:G,fe=J$(v,p,U,w);return{transform:[...(o=u.transform)!==null&&o!==void 0?o:[],...P,...R,...H.length===0?[]:[{aggregate:H,groupby:X}],...x],groupby:X,continuousAxisChannelDef:p,continuousAxis:y,encodingWithoutContinuousAxis:U,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:fe}}function ISr(t,r,n,o,i,s,a,l){let u=[],c=[],f=r.field,d,p=!1;if(s==="raw"){let h=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":l.errorbar.center,m=t.extent?t.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&st(it.errorBarCenterIsUsedWithWrongExtent(h,m,a)),m==="stderr"||m==="stdev")u=[{op:m,field:f,as:"extent_"+f},{op:h,field:f,as:"center_"+f}],c=[{calculate:`datum["center_${f}"] + datum["extent_${f}"]`,as:"upper_"+f},{calculate:`datum["center_${f}"] - datum["extent_${f}"]`,as:"lower_"+f}],d=[{fieldPrefix:"center_",titlePrefix:AA(h)},{fieldPrefix:"upper_",titlePrefix:fyt(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:fyt(h,m,"-")}],p=!0;else{t.center&&t.extent&&st(it.errorBarCenterIsNotNeeded(t.extent,a));let g,y,b;m==="ci"?(g="mean",y="ci0",b="ci1"):(g="median",y="q1",b="q3"),u=[{op:y,field:f,as:"lower_"+f},{op:b,field:f,as:"upper_"+f},{op:g,field:f,as:"center_"+f}],d=[{fieldPrefix:"upper_",titlePrefix:ih({field:f,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ih({field:f,aggregate:y,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ih({field:f,aggregate:g,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&st(it.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?(d=[],c=[{calculate:`datum["${n.field}"]`,as:"upper_"+f},{calculate:`datum["${f}"]`,as:"lower_"+f}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:`datum["${f}"] + datum["${o.field}"]`,as:"upper_"+f}],i?c.push({calculate:`datum["${f}"] + datum["${i.field}"]`,as:"lower_"+f}):c.push({calculate:`datum["${f}"] - datum["${o.field}"]`,as:"lower_"+f}));for(let h of c)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Ky(Ky(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:u,tooltipSummary:d,tooltipTitleWithFieldName:p}}function fyt(t,r,n){return AA(t)+" "+n+" "+r}var XJ,dyt,pyt,KJ=N(()=>{"use strict";So();Mr();Bc();cn();ba();bt();z$();YJ();XJ="errorbar",dyt=["ticks","rule"],pyt=new Zy(XJ,bSe)});function vSe(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:l,tooltipEncoding:u}=xSe(t,ZJ,r),c=a,f=oO(c,i,o,s,r.errorband),d=t.encoding.x!==void 0&&t.encoding.y!==void 0,p={type:d?"area":"rect"},h={type:d?"line":"rule"},m=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return d?(p=Object.assign(Object.assign(Object.assign({},p),m),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),m)):c.interpolate?st(it.errorBand1DNotSupport("interpolate")):c.tension&&st(it.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},l),{transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...f({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:u}),...f({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}var ZJ,hyt,myt,wSe=N(()=>{"use strict";cn();z$();YJ();KJ();ZJ="errorband",hyt=["band","borders"],myt=new Zy(ZJ,vSe)});function _Se(t,r,n){let o=new Zy(t,r);gyt[t]={normalizer:o,parts:n}}function yyt(){return nt(gyt)}var gyt,byt=N(()=>{"use strict";bt();z$();ySe();wSe();KJ();gyt={};_Se(e6,gSe,ayt);_Se(XJ,bSe,dyt);_Se(ZJ,vSe,hyt)});var xyt,vyt=N(()=>{"use strict";xyt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"]});var QJ,wyt,_yt,SSe,vei,t6=N(()=>{"use strict";bt();QJ=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],wyt={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},_yt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},SSe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},vei=nt(SSe)});function r6(t){return!!t&&(t==="legend"||!!t.legend)}function JJ(t){return r6(t)&&wo(t)}var e1,Syt,iO=N(()=>{"use strict";ir();e1="_vgsid_",Syt={single:{on:"click",fields:[e1],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[e1],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}}});function CSe(t){return j2(t)||sO(t)||n6(t)}function n6(t){return"concat"in t}function j2(t){return"vconcat"in t}function sO(t){return"hconcat"in t}var eee=N(()=>{"use strict"});function Uf(t){return wo(t)&&t.step!==void 0}function ESe(t){return t.view||t.width||t.height}function Cyt(t,r,n){var o,i;let s=n[r],a={},{spacing:l,columns:u}=s;l!==void 0&&(a.spacing=l),u!==void 0&&(Qv(t)&&!lb(t.facet)||n6(t))&&(a.columns=u),j2(t)&&(a.columns=1);for(let c of NSr)if(t[c]!==void 0)if(c==="spacing"){let f=t[c];a[c]=_o(f)?f:{row:(o=f.row)!==null&&o!==void 0?o:l,column:(i=f.column)!==null&&i!==void 0?i:l}}else a[c]=t[c];return a}var TSe,DSr,NSr,jA=N(()=>{"use strict";ir();bt();eee();Jv();TSe=20,DSr={align:1,bounds:1,center:1,columns:1,spacing:1},NSr=nt(DSr)});function o6(t,r){var n;return(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"continuousWidth":"continuousHeight"]}function BA(t,r){let n=$A(t,r);return Uf(n)?n.step:tee}function $A(t,r){var n;let o=(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"discreteWidth":"discreteHeight"];return Fn(o,{step:t.step})}function OSr(t={}){return{signals:[{name:"color",value:wo(t)?Object.assign(Object.assign({},Tyt),t):Tyt}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function RSr(t){return{signals:[{name:"fontSize",value:wo(t)?Object.assign(Object.assign({},Eyt),t):Eyt}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function PSr(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function ree(t={}){let{color:r,font:n,fontSize:o}=t,i=Pt(t,["color","font","fontSize"]);return D$({},FSr,n?PSr(n):{},r?OSr(r):{},o?RSr(o):{},i||{})}function Ayt(t){t=sr(t);for(let r of jSr)delete t[r];if(t.axis)for(let r in t.axis)DF(t.axis[r])&&delete t.axis[r];if(t.legend)for(let r of xyt)delete t.legend[r];if(t.mark){for(let r of L2e)delete t.mark[r];t.mark.tooltip&&wo(t.mark.tooltip)&&delete t.mark.tooltip}for(let r of LSr){for(let o of L2e)delete t[r][o];let n=BSr[r];if(n)for(let o of n)delete t[r][o];zSr(t,r)}for(let r of yyt())delete t[r];$Sr(t);for(let r in t)wo(t[r])&&bn(t[r])&&delete t[r];return bn(t)?void 0:t}function $Sr(t){let{titleMarkConfig:r,subtitleMarkConfig:n,subtitle:o}=$J(t.title);bn(r)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),r)),bn(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),bn(o)?delete t.title:t.title=o}function zSr(t,r,n,o){let i=o?t[r][o]:t[r];r==="view"&&(n="cell");let s=Object.assign(Object.assign({},i),t.style[n??r]);bn(s)||(t.style[n??r]=s),o||delete t[r]}var tee,MSr,FSr,t1,Eyt,Tyt,LSr,jSr,BSr,B2=N(()=>{"use strict";So();ir();L$();byt();vyt();t6();ba();ba();Ci();iO();jA();K$();bt();tee=20,MSr={continuousWidth:200,continuousHeight:200,step:tee},FSr={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:MSr,mark:Fgt,arc:{},area:{},bar:Pgt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Lgt,rule:{color:"black"},square:{},text:{color:"black"},tick:jgt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:j0t,projection:{},legend:_yt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Syt,style:{},title:{},facet:{spacing:TSe},concat:{spacing:TSe}},t1=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Eyt={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Tyt={blue:t1[0],orange:t1[1],red:t1[2],teal:t1[3],green:t1[4],yellow:t1[5],purple:t1[6],pink:t1[7],brown:t1[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};LSr=["view",...P2e],jSr=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],BSr=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Mgt)});function r1(t){return"layer"in t}var ASe=N(()=>{"use strict"});function kSe(t){return"repeat"in t}function kyt(t){return!Bt(t.repeat)&&t.repeat.layer}var nee=N(()=>{"use strict";ir()});var aO=N(()=>{"use strict";eee();Jv();ASe();nee();I2()});var lO,ISe=N(()=>{"use strict";So();cn();eee();Jv();ASe();nee();I2();lO=class{map(r,n){return Qv(r)?this.mapFacet(r,n):kSe(r)?this.mapRepeat(r,n):sO(r)?this.mapHConcat(r,n):j2(r)?this.mapVConcat(r,n):n6(r)?this.mapConcat(r,n):this.mapLayerOrUnit(r,n)}mapLayerOrUnit(r,n){if(r1(r))return this.mapLayer(r,n);if(La(r))return this.mapUnit(r,n);throw new Error(it.invalidSpec(r))}mapLayer(r,n){return Object.assign(Object.assign({},r),{layer:r.layer.map(o=>this.mapLayerOrUnit(o,n))})}mapHConcat(r,n){return Object.assign(Object.assign({},r),{hconcat:r.hconcat.map(o=>this.map(o,n))})}mapVConcat(r,n){return Object.assign(Object.assign({},r),{vconcat:r.vconcat.map(o=>this.map(o,n))})}mapConcat(r,n){let{concat:o}=r,i=Pt(r,["concat"]);return Object.assign(Object.assign({},i),{concat:o.map(s=>this.map(s,n))})}mapFacet(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}mapRepeat(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}}});function VSr(t){return t in USr}function Iyt(t,r){var n,o;let i=r==="x"?"y":"radius",s=t[r],a=t[i];if(At(s)&&At(a))if(ib(s)==="quantitative"&&ib(a)==="quantitative"){if(s.stack)return r;if(a.stack)return i;let l=At(s)&&!!s.aggregate,u=At(a)&&!!a.aggregate;if(l!==u)return l?r:i;{let c=(n=s.scale)===null||n===void 0?void 0:n.type,f=(o=a.scale)===null||o===void 0?void 0:o.type;if(c&&c!=="linear")return i;if(f&&f!=="linear")return r}}else{if(ib(s)==="quantitative")return r;if(ib(a)==="quantitative")return i}else{if(ib(s)==="quantitative")return r;if(ib(a)==="quantitative")return i}}function qSr(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function oee(t,r,n={}){let o=Hl(t)?t.type:t;if(!GSr.has(o))return null;let i=Iyt(r,"x")||Iyt(r,"theta");if(!i)return null;let s=r[i],a=At(s)?vt(s,{}):void 0,l=qSr(i),u=r[l],c=At(u)?vt(u,{}):void 0;c===a&&(c=void 0,u=void 0,l=void 0);let f=e0t.reduce((p,h)=>{if(h!=="tooltip"&&cb(r,h)){let m=r[h];for(let g of Mn(m)){let y=Zl(g);if(y.aggregate)continue;let b=vt(y,{});(!b||b!==c)&&p.push({channel:h,fieldDef:y})}}return p},[]),d;if(s.stack!==void 0?Xy(s.stack)?d=s.stack?"zero":null:d=s.stack:f.length>0&&WSr.has(o)&&(d="zero"),!d||!VSr(d)||rO(r)&&f.length===0)return null;if(s.scale&&s.scale.type&&s.scale.type!==Ui.LINEAR){if(n.disallowNonLinearStack)return null;st(it.cannotStackNonLinearScale(s.scale.type))}return Or(r[yl(i)])?(s.stack!==void 0&&st(it.cannotStackRangedMark(i)),null):(At(s)&&s.aggregate&&!qt(Vgt,s.aggregate)&&st(it.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:u?l:void 0,groupbyField:c,fieldChannel:i,impute:s.impute===null?!1:Ff(o),stackBy:f,offset:d})}var USr,GSr,WSr,DSe=N(()=>{"use strict";ir();Yv();Ir();Mr();Bc();cn();ba();Ci();bt();USr={zero:1,center:1,normalize:1};GSr=new Set([O2e,DA,IA,MF,NF,B$,$$,NA,uJ,j$]),WSr=new Set([DA,IA,O2e])});function HSr(t){let{point:r,line:n}=t,o=Pt(t,["point","line"]);return nt(o).length>1?o:o.type}function YSr(t){for(let r of["line","area","rule","trail"])t[r]&&(t=Object.assign(Object.assign({},t),{[r]:Nf(t[r],["point","line"])}));return t}function NSe(t,r={},n){return t.point==="transparent"?{opacity:0}:t.point?wo(t.point)?t.point:{}:t.point!==void 0?null:r.point||n.shape?wo(r.point)?r.point:{}:void 0}function Dyt(t,r={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:r.line?r.line===!0?{}:r.line:void 0}var iee,Nyt=N(()=>{"use strict";So();ir();ba();I2();DSe();bt();iee=class{constructor(){this.name="path-overlay"}hasMatchingType(r,n){if(La(r)){let{mark:o,encoding:i}=r,s=Hl(o)?o:{type:o};switch(s.type){case"line":case"rule":case"trail":return!!NSe(s,n[s.type],i);case"area":return!!NSe(s,n[s.type],i)||!!Dyt(s,n[s.type])}}return!1}run(r,n,o){let{config:i}=n,{selection:s,projection:a,encoding:l,mark:u}=r,c=Pt(r,["selection","projection","encoding","mark"]),f=Hl(u)?u:{type:u},d=NSe(f,i[f.type],l),p=f.type==="area"&&Dyt(f,i[f.type]),h=[Object.assign(Object.assign({},s?{selection:s}:{}),{mark:HSr(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:Nf(l,["shape"])})],m=oee(f,l),g=l;if(m){let{fieldChannel:y,offset:b}=m;g=Object.assign(Object.assign({},l),{[y]:Object.assign(Object.assign({},l[y]),b?{stack:b}:{})})}return p&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},A2(f,["clip","interpolate","tension","tooltip"])),p),encoding:g})),d&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},A2(f,["clip","tooltip"])),d),encoding:g})),o(Object.assign(Object.assign({},c),{layer:h}),Object.assign(Object.assign({},n),{config:YSr(i)}))}}});var see,Myt=N(()=>{"use strict";So();Ir();Mr();cn();I2();bt();see=class{constructor(){this.name="RangeStep"}hasMatchingType(r){var n;if(La(r)&&r.encoding)for(let o of Ts){let i=r.encoding[o];if(i&&Or(i)&&!((n=i?.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(r){var n;let o={},i=Object.assign({},r.encoding);for(let s of Ts){let a=Xl(s),l=i[s];if(l&&Or(l)&&!((n=l?.scale)===null||n===void 0)&&n.rangeStep){let{scale:u}=l,c=Pt(l,["scale"]),f=u,{rangeStep:d}=f,p=Pt(f,["rangeStep"]);o[a]={step:u.rangeStep},st(it.RANGE_STEP_DEPRECATED),i=Object.assign(Object.assign({},i),{[s]:Object.assign(Object.assign({},c),bn(p)?{}:{scale:p})})}}return Object.assign(Object.assign(Object.assign({},o),r),{encoding:i})}}});function Ryt(t,r){return r?lb(t)?Lyt(t,r):Pyt(t,r):t}function aee(t,r){return r?Lyt(t,r):t}function MSe(t,r,n){let o=r[t];if(X0t(o)){if(o.repeat in n)return Object.assign(Object.assign({},r),{[t]:n[o.repeat]});st(it.noSuchRepeatedValue(o.repeat));return}return r}function Pyt(t,r){if(t=MSe("field",t,r),t!==void 0){if(t===null)return null;if(oSe(t)&&xl(t.sort)){let n=MSe("field",t.sort,r);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function Fyt(t,r){if(At(t))return Pyt(t,r);{let n=MSe("datum",t,r);return n!==t&&!n.type&&(n.type="nominal"),n}}function Oyt(t,r){if(Or(t)){let n=Fyt(t,r);if(n)return n;if(JF(t))return{condition:t.condition}}else{if(RJ(t)){let n=Fyt(t.condition,r);if(n)return Object.assign(Object.assign({},t),{condition:n});{let{condition:o}=t;return Pt(t,["condition"])}}return t}}function Lyt(t,r){let n={};for(let o in t)if(Hd(t,o)){let i=t[o];if(Bt(i))n[o]=i.map(s=>Oyt(s,r)).filter(s=>s);else{let s=Oyt(i,r);s!==void 0&&(n[o]=s)}}return n}var jyt=N(()=>{"use strict";So();ir();Mr();cn();og();Jv()});var lee,Byt=N(()=>{"use strict";Kl();Ir();Mr();cn();I2();lee=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(r){if(La(r)){let{encoding:n,mark:o}=r;if(o==="line")for(let i of Qgt){let s=ep(i),a=n[s];if(n[i]&&(At(a)&&!Ji(a.bin)||$f(a)))return!0}}return!1}run(r,n,o){let{encoding:i}=r;return st(it.lineWithRange(!!i.x2,!!i.y2)),o(Object.assign(Object.assign({},r),{mark:"rule"}),n)}}});function $yt(t){let{parentEncoding:r,encoding:n}=t;if(r&&n){let i=nt(r).reduce((s,a)=>(n[a]&&s.push(a),s),[]);i.length>0&&st(it.encodingOverridden(i))}let o=Object.assign(Object.assign({},r??{}),n??{});return bn(o)?void 0:o}function zyt(t){let{parentProjection:r,projection:n}=t;return r&&n&&st(it.projectionOverridden({parentProjection:r,projection:n})),n??r}var uee,Uyt=N(()=>{"use strict";So();ir();Ir();ySe();wSe();KJ();Bc();cn();Jv();ISe();nee();I2();bt();Nyt();Myt();jyt();Byt();uee=class extends lO{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[lyt,pyt,myt,new iee,new lee,new see]}map(r,n){if(La(r)){let o=cb(r.encoding,Of),i=cb(r.encoding,Rf),s=cb(r.encoding,OF);if(o||i||s)return this.mapFacetedUnit(r,n)}return super.map(r,n)}mapUnit(r,n){let{parentEncoding:o,parentProjection:i}=n,s=Object.assign(Object.assign({},r),{encoding:aee(r.encoding,n.repeater)});if(o||i)return this.mapUnitWithParentEncodingOrProjection(s,n);let a=this.mapLayerOrUnit.bind(this);for(let l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(r,n){return kyt(r)?this.mapLayerRepeat(r,n):this.mapNonLayerRepeat(r,n)}mapLayerRepeat(r,n){let{repeat:o,spec:i}=r,s=Pt(r,["repeat","spec"]),{row:a,column:l,layer:u}=o,{repeater:c={},repeaterPrefix:f=""}=n;return a||l?this.mapRepeat(Object.assign(Object.assign({},r),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),l?{column:l}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},s),{layer:u.map(d=>{let p=Object.assign(Object.assign({},c),{layer:d}),h=(i.name||"")+f+`child__layer_${kn(d)}`,m=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(r,n){var o;let{repeat:i,spec:s,data:a}=r,l=Pt(r,["repeat","spec","data"]);!Bt(i)&&r.columns&&(r=Nf(r,["columns"]),st(it.columnsNotSupportByRowCol("repeat")));let u=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!Bt(i)&&i.row||[c?c.row:null],p=!Bt(i)&&i.column||[c?c.column:null],h=Bt(i)&&i||[c?c.repeat:null];for(let g of h)for(let y of d)for(let b of p){let x={repeat:g,row:y,column:b,layer:c.layer},v=(s.name||"")+f+"child__"+(Bt(i)?`${kn(g)}`:(i.row?`row_${kn(y)}`:"")+(i.column?`column_${kn(b)}`:"")),w=this.map(s,Object.assign(Object.assign({},n),{repeater:x,repeaterPrefix:v}));w.name=v,u.push(Nf(w,["data"]))}let m=Bt(i)?r.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(o=s.data)!==null&&o!==void 0?o:a,align:"all"},l),{columns:m,concat:u})}mapFacet(r,n){let{facet:o}=r;return lb(o)&&r.columns&&(r=Nf(r,["columns"]),st(it.columnsNotSupportByRowCol("facet"))),super.mapFacet(r,n)}mapUnitWithParentEncodingOrProjection(r,n){let{encoding:o,projection:i}=r,{parentEncoding:s,parentProjection:a,config:l}=n,u=zyt({parentProjection:a,projection:i}),c=$yt({parentEncoding:s,encoding:aee(o,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},r),u?{projection:u}:{}),c?{encoding:c}:{}),{config:l})}mapFacetedUnit(r,n){let o=r.encoding,{row:i,column:s,facet:a}=o,l=Pt(o,["row","column","facet"]),{mark:u,width:c,projection:f,height:d,view:p,selection:h,encoding:m}=r,g=Pt(r,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:y,layout:b}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),x=aee(l,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),b),{facet:y,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{width:c}:{}),d?{height:d}:{}),p?{view:p}:{}),f?{projection:f}:{}),{mark:u,encoding:x}),h?{selection:h}:{})}),n)}getFacetMappingAndLayout(r,n){var o;let{row:i,column:s,facet:a}=r;if(i||s){a&&st(it.facetChannelDropped([...i?[Of]:[],...s?[Rf]:[]]));let l={},u={};for(let c of[Of,Rf]){let f=r[c];if(f){let{align:d,center:p,spacing:h,columns:m}=f,g=Pt(f,["align","center","spacing","columns"]);l[c]=g;for(let y of["align","center","spacing"])f[y]!==void 0&&(u[y]=(o=u[y])!==null&&o!==void 0?o:{},u[y][c]=f[y])}}return{facetMapping:l,layout:u}}else{let{align:l,center:u,spacing:c,columns:f}=a,d=Pt(a,["align","center","spacing","columns"]);return{facetMapping:Ryt(d,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},l?{align:l}:{}),u?{center:u}:{}),c?{spacing:c}:{}),f?{columns:f}:{})}}}mapLayer(r,n){var{parentEncoding:o,parentProjection:i}=n,s=Pt(n,["parentEncoding","parentProjection"]);let{encoding:a,projection:l}=r,u=Pt(r,["encoding","projection"]),c=Object.assign(Object.assign({},s),{parentEncoding:$yt({parentEncoding:o,encoding:a}),parentProjection:zyt({parentProjection:i,projection:l})});return super.mapLayer(u,c)}}});function cee(t,r){r===void 0&&(r=ree(t.config));let n=KSr(t,r),{width:o,height:i}=t,s=ZSr(n,{width:o,height:i,autosize:t.autosize},r);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}function KSr(t,r={}){return XSr.map(t,{config:r})}function Vyt(t){return pr(t)?{type:t}:t??{}}function ZSr(t,r,n){let{width:o,height:i}=r,s=La(t)||r1(t),a={};s?o=="container"&&i=="container"?(a.type="fit",a.contains="padding"):o=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(o=="container"&&(st(it.containerSizeNonSingle("width")),o=void 0),i=="container"&&(st(it.containerSizeNonSingle("height")),i=void 0));let l=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?Vyt(n.autosize):{}),Vyt(t.autosize));if(l.type==="fit"&&!s&&(st(it.FIT_NON_SINGLE),l.type="pad"),o=="container"&&!(l.type=="fit"||l.type=="fit-x")&&st(it.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(l.type=="fit"||l.type=="fit-y")&&st(it.containerSizeNotCompatibleWithAutosize("height")),!Hv(l,{type:"pad"}))return l}var XSr,FSe=N(()=>{"use strict";ir();B2();cn();aO();bt();Uyt();XSr=new uee});function Gyt(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function Wyt(t){return t?`fit-${D2(t)}`:"fit"}function OSe(t){return QSr.reduce((r,n)=>(t&&t[n]!==void 0&&(r[n]=t[n]),r),{})}var QSr,qyt=N(()=>{"use strict";Ir();QSr=["background","padding"]});function n1(t){return{explicit:!0,value:t}}function Gu(t){return{explicit:!1,value:t}}function fee(t){return(r,n,o,i)=>{let s=t(r.value,n.value);return s>0?r:s<0?n:uO(r,n,o,i)}}function uO(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingProperty(n,o,t.value,r.value)),t}function Vf(t,r,n,o,i=uO){return t===void 0||t.value===void 0?r:t.explicit&&!r.explicit?t:r.explicit&&!t.explicit?r:Hv(t.value,r.value)?t:i(t,r,n,o)}var Vu,$c=N(()=>{"use strict";cn();bt();Vu=class t{constructor(r={},n={}){this.explicit=r,this.implicit=n}clone(){return new t(sr(this.explicit),sr(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(r){return Fn(this.explicit[r],this.implicit[r])}getWithExplicit(r){return this.explicit[r]!==void 0?{explicit:!0,value:this.explicit[r]}:this.implicit[r]!==void 0?{explicit:!1,value:this.implicit[r]}:{explicit:!1,value:void 0}}setWithExplicit(r,n){n.value!==void 0&&this.set(r,n.value,n.explicit)}set(r,n,o){return delete this[o?"implicit":"explicit"][r],this[o?"explicit":"implicit"][r]=n,this}copyKeyFromSplit(r,n){n.explicit[r]!==void 0?this.set(r,n.explicit[r],!0):n.implicit[r]!==void 0&&this.set(r,n.implicit[r],!1)}copyKeyFromObject(r,n){n[r]!==void 0&&this.set(r,n[r],!0)}copyAll(r){for(let n of nt(r.combine())){let o=r.getWithExplicit(n);this.setWithExplicit(n,o)}}}});var dee,Hyt=N(()=>{"use strict";$c();dee=class extends Vu{constructor(r={},n={},o=!1){super(r,n),this.explicit=r,this.implicit=n,this.parseNothing=o}clone(){let r=super.clone();return r.parseNothing=this.parseNothing,r}}});function $2(t){return"url"in t}function cO(t){return"values"in t}function pee(t){return"name"in t&&!$2(t)&&!cO(t)&&!fb(t)}function fb(t){return t&&(RSe(t)||PSe(t)||i6(t))}function RSe(t){return"sequence"in t}function PSe(t){return"sphere"in t}function i6(t){return"graticule"in t}var zs,fO,db=N(()=>{"use strict";zs="main",fO="raw"});function LSe(t){return"filter"in t}function Yyt(t){return t?.stop!==void 0}function Xyt(t){return"lookup"in t}function Kyt(t){return"data"in t}function Zyt(t){return"selection"in t}function Qyt(t){return"pivot"in t}function Jyt(t){return"density"in t}function ebt(t){return"quantile"in t}function tbt(t){return"regression"in t}function rbt(t){return"loess"in t}function nbt(t){return"sample"in t}function obt(t){return"window"in t}function ibt(t){return"joinaggregate"in t}function sbt(t){return"flatten"in t}function abt(t){return"calculate"in t}function lbt(t){return"bin"in t}function ubt(t){return"impute"in t}function cbt(t){return"timeUnit"in t}function fbt(t){return"aggregate"in t}function dbt(t){return"stack"in t}function pbt(t){return"fold"in t}function hbt(t){return t.map(r=>LSe(r)?{filter:O$(r.filter,M0t)}:r)}var s6=N(()=>{"use strict";tJ();RA()});function sh(t,r,n,o){let i=JF(r)&&r.condition,s=o(r);if(i){let l=Mn(i).map(u=>{let c=o(u),f=Y0t(u)?hee(t,u.selection):VA(t,u.test);return Object.assign({test:f},c)});return{[n]:[...l,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}var zA=N(()=>{"use strict";ir();Mr();mee();UA()});function z2(t,r="text"){let n=t.encoding[r];return sh(t,n,r,o=>dO(o,t.config))}function dO(t,r,n="datum"){if(t){if(Uu(t))return mo(t.value);if(Or(t)){let{format:o,formatType:i}=tO(t);return YF({fieldOrDatumDef:t,format:o,formatType:i,expr:n,config:r})}}}var pO=N(()=>{"use strict";Mr();Po();ab();zA()});function hO(t,r={}){let{encoding:n,markDef:o,config:i,stack:s}=t,a=n.tooltip;if(Bt(a))return{tooltip:jSe({tooltip:a},s,i,r)};{let l=r.reactiveGeom?"datum.datum":"datum";return sh(t,a,"tooltip",u=>{let c=dO(u,i,l);if(c)return c;if(u===null)return;let f=ln("tooltip",o,i);if(f===!0&&(f={content:"encoding"}),pr(f))return{value:f};if(wo(f))return f.content==="encoding"?jSe(n,s,i,r):{signal:l}})}}function BSe(t,r,n,{reactiveGeom:o}={}){let i={},s=o?"datum.datum":"datum",a=[];function l(c,f){let d=ep(f),p=va(c)?c:Object.assign(Object.assign({},c),{type:t[d].type}),h=Mn(ih(p,n,{allowDisabling:!1})).join(", "),m;if(bl(f)){let g=f==="x"?"x2":"y2",y=Zl(t[g]);if(Ji(p.bin)&&y){let b=vt(p,{expr:s}),x=vt(y,{expr:s}),{format:v,formatType:w}=tO(p);m=XF(b,x,v,w,n),i[g]=!0}else if(r&&r.fieldChannel===f&&r.offset==="normalize"){let{format:b,formatType:x}=tO(p);m=YF({fieldOrDatumDef:p,format:b,formatType:x,expr:s,config:n,normalizeStack:!0}).signal}}m=m??dO(p,n,s).signal,a.push({channel:f,key:h,value:m})}Q$(t,(c,f)=>{At(c)?l(c,f):eO(c)&&l(c.condition,f)});let u={};for(let{channel:c,key:f,value:d}of a)!i[c]&&!u[f]&&(u[Jr(f)]=d);return u}function jSe(t,r,n,{reactiveGeom:o}={}){let i=BSe(t,r,n,{reactiveGeom:o}),s=R$(i).map(({key:a,value:l})=>`${a}: ${l}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}var a6=N(()=>{"use strict";ir();Kl();Ir();Mr();Bc();bt();Po();ab();zA();pO()});function $Se(t){let{markDef:r,config:n}=t,o=ln("aria",r,n);return o===!1?{}:Object.assign(Object.assign(Object.assign({},o?{aria:o}:{}),JSr(t)),eCr(t))}function JSr(t){let{mark:r,markDef:n,config:o}=t;if(o.aria===!1)return{};let i=ln("ariaRoleDescription",n,o);return i!=null?{ariaRoleDescription:{value:i}}:r in T0t?{}:{ariaRoleDescription:{value:r}}}function eCr(t){let{encoding:r,markDef:n,config:o,stack:i}=t,s=r.description;if(s)return sh(t,s,"description",u=>dO(u,t.config));let a=ln("description",n,o);if(a!=null)return{description:mo(a)};if(o.aria===!1)return{};let l=BSe(r,i,o);if(!bn(l))return{description:{signal:R$(l).map(({key:u,value:c})=>`${u} + ": " + (${c})`).join(' + "; " + ')}}}var zSe=N(()=>{"use strict";bt();Po();ho();zA();pO();a6()});function Qo(t,r,n={}){let{markDef:o,encoding:i,config:s}=r,{vgChannel:a}=n,{defaultRef:l,defaultValue:u}=n;l===void 0&&(u=u??ln(t,o,s,{vgChannel:a,ignoreVgConfig:!0}),u!==void 0&&(l=mo(u)));let c=i[t];return sh(r,c,a??t,f=>tSe({channel:t,channelDef:f,markDef:o,config:s,scaleName:r.scaleName(t),scale:r.getScaleComponent(t),stack:null,defaultRef:l}))}var mO=N(()=>{"use strict";Po();zA();O2()});function gO(t,r={filled:void 0}){var n,o,i,s;let{markDef:a,encoding:l,config:u}=t,{type:c}=a,f=(n=r.filled)!==null&&n!==void 0?n:ln("filled",a,u),d=qt(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,p=(i=(o=ln(f===!0?"color":void 0,a,u,{vgChannel:"fill"}))!==null&&o!==void 0?o:u.mark[f===!0&&"color"])!==null&&i!==void 0?i:d,h=(s=ln(f===!1?"color":void 0,a,u,{vgChannel:"stroke"}))!==null&&s!==void 0?s:u.mark[f===!1&&"color"],m=f?"fill":"stroke",g=Object.assign(Object.assign({},p?{fill:mo(p)}:{}),h?{stroke:mo(h)}:{});return a.color&&(f?a.fill:a.stroke)&&st(it.droppingColor("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Qo("color",t,{vgChannel:m,defaultValue:f?p:h})),Qo("fill",t,{defaultValue:l.fill?p:void 0})),Qo("stroke",t,{defaultValue:l.stroke?h:void 0}))}var gee=N(()=>{"use strict";cn();bt();Po();mO()});function U2(t,r){let n=Jgt(t),o=r[n];if(o)return o}var yee=N(()=>{"use strict";Ir()});function ts(t,r,{defaultPos:n,vgChannel:o,isMidPoint:i}){let{encoding:s,markDef:a,config:l,stack:u}=r,c=s[t],f=s[yl(t)],d=r.scaleName(t),p=r.getScaleComponent(t),h=U2(t,a),m=l6({model:r,defaultPos:n,channel:t,scaleName:d,scale:p}),g=!c&&bl(t)&&(s.latitude||s.longitude)?{field:r.getName(t)}:tCr({channel:t,channelDef:c,channel2Def:f,markDef:a,config:l,isMidPoint:i,scaleName:d,scale:p,stack:u,offset:h,defaultRef:m});return g?{[o||t]:g}:void 0}function tCr(t){let{channel:r,channelDef:n,isMidPoint:o,scaleName:i,stack:s,offset:a,markDef:l,config:u}=t;if(Or(n)&&s&&r===s.fieldChannel){if(At(n)){let c=R2({channel:r,fieldDef:n,isMidPoint:o,markDef:l,stack:s,config:u});if(c!==void 0)return qF({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:a})}return nb(n,i,{suffix:"end"},{offset:a})}return HF(t)}function l6({model:t,defaultPos:r,channel:n,scaleName:o,scale:i}){let{markDef:s,config:a}=t;return()=>{let l=ep(n),u=nh(n),c=ln(n,s,a,{vgChannel:u});if(c!==void 0)return PA(n,c);switch(r){case"zeroOrMin":case"zeroOrMax":if(o){let f=i.get("type");if(!qt([Ui.LOG,Ui.TIME,Ui.UTC],f)){if(i.domainDefinitelyIncludesZero())return{scale:o,value:0}}}if(r==="zeroOrMin")return l==="y"?{field:{group:"height"}}:{value:0};switch(l){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let f=t[Xl(n)];return Object.assign(Object.assign({},f),{mult:.5})}}}}var u6=N(()=>{"use strict";Ir();Mr();Ci();bt();Po();yee();O2()});function bee(t,r,n,o="middle"){if(t==="radius"||t==="theta")return nh(t);let s=ln(t==="x"?"align":"baseline",r,n);return t==="x"?rCr[s||(o==="top"?"left":"center")]:nCr[s||o]}var rCr,nCr,USe=N(()=>{"use strict";Ir();Po();rCr={left:"x",center:"xc",right:"x2"},nCr={top:"y",middle:"yc",bottom:"y2"}});function V2(t,r,{defaultPos:n,defaultPos2:o,range:i}){return i?c6(t,r,{defaultPos:n,defaultPos2:o}):ts(t,r,{defaultPos:n})}function c6(t,r,{defaultPos:n,defaultPos2:o}){let{markDef:i,config:s}=r,a=yl(t),l=Xl(t),u=oCr(r,o,a),c=u[l]?bee(t,i,s):nh(t);return Object.assign(Object.assign({},ts(t,r,{defaultPos:n,vgChannel:c})),u)}function oCr(t,r,n){let{encoding:o,mark:i,markDef:s,stack:a,config:l}=t,u=ep(n),c=Xl(n),f=nh(n),d=o[u],p=t.scaleName(u),h=t.getScaleComponent(u),m=n in o||n in s?U2(n,t.markDef):U2(u,t.markDef);if(!d&&(n==="x2"||n==="y2")&&(o.latitude||o.longitude))return{[f]:{field:t.getName(n)}};let g=iCr({channel:n,channelDef:d,channel2Def:o[n],markDef:s,config:l,scaleName:p,scale:h,stack:a,offset:m,defaultRef:void 0});return g!==void 0?{[f]:g}:xee(n,s)||xee(n,{[n]:Z$(n,s,l.style),[c]:Z$(c,s,l.style)})||xee(n,l[i])||xee(n,l.mark)||{[f]:l6({model:t,defaultPos:r,channel:n,scaleName:p,scale:h})()}}function iCr({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c}){return Or(r)&&l&&t.charAt(0)===l.fieldChannel.charAt(0)?nb(r,s,{suffix:"start"},{offset:u}):HF({channel:t,channelDef:n,scaleName:s,scale:a,stack:l,markDef:o,config:i,offset:u,defaultRef:c})}function xee(t,r){let n=Xl(t),o=nh(t);if(r[o]!==void 0)return{[o]:PA(t,r[o])};if(r[t]!==void 0)return{[o]:PA(t,r[t])};if(r[n])return{[n]:PA(t,r[n])}}var vee=N(()=>{"use strict";Ir();Mr();Po();yee();USe();u6();O2()});function Gf(t,r,n){var o,i,s,a;let{config:l,encoding:u,markDef:c,stack:f}=t,d=yl(r),p=Xl(r),h=u[r],m=u[d],g=t.getScaleComponent(r),y=g?g.get("type"):void 0,b=t.scaleName(r),x=c.orient,v=(i=(o=u[p])!==null&&o!==void 0?o:u.size)!==null&&i!==void 0?i:ln("size",c,l,{vgChannel:p}),w=n==="bar"&&(r==="x"?x==="vertical":x==="horizontal");if(At(h)&&(Sn(h.bin)||Ji(h.bin)||h.timeUnit&&!m)&&!v&&!es(y)){let _=R2({channel:r,fieldDef:h,stack:f,markDef:c,config:l}),S=(s=t.component.axes[r])===null||s===void 0?void 0:s[0],C=(a=S?.get("translate"))!==null&&a!==void 0?a:.5;return gbt({fieldDef:h,fieldDef2:m,channel:r,markDef:c,scaleName:b,band:_,axisTranslate:C,spacing:bl(r)?ln("binSpacing",c,l):void 0,reverse:g.get("reverse"),config:l})}else return(Or(h)&&es(y)||w)&&!m?aCr(n,h,r,t):c6(r,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function sCr(t,r,n,o,i,s){if(o){let u=o.get("type");if(u==="point"||u==="band"){if(i[t].discreteBandSize!==void 0)return{value:i[t].discreteBandSize};if(u===Ui.POINT){let c=o.get("range");return zu(c)&&_o(c.step)?{value:c.step-2}:{value:tee-2}}else return{scale:n,band:s}}else return{value:i[t].continuousBandSize}}let a=BA(i.view,r),l=Fn(i[t].discreteBandSize,a-2);return l!==void 0?{value:l}:void 0}function aCr(t,r,n,o){var i;let{markDef:s,encoding:a,config:l,stack:u}=o,c=s.orient,f=o.scaleName(n),d=o.getScaleComponent(n),p=Xl(n),h=yl(n),m=c==="horizontal"&&n==="y"||c==="vertical"&&n==="x",g=ln(m?"size":p,s,l,{vgChannel:p}),y;(a.size||g!==void 0)&&(m?y=Qo("size",o,{vgChannel:p,defaultValue:g}):st(it.cannotApplySizeToNonOrientedMark(s.type)));let b=(i=Or(r)?R2({channel:n,fieldDef:r,markDef:s,stack:u,config:l}):void 0)!==null&&i!==void 0?i:1;y=y||{[p]:sCr(t,p,f,d,l,b)};let x=d?.get("type")!=="band"||!("band"in y[p]),v=bee(n,s,l,x?"middle":"top"),w=U2(n,s),_=HF({channel:n,channelDef:r,markDef:s,config:l,scaleName:f,scale:d,stack:u,offset:w,defaultRef:l6({model:o,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:x?.5:(1-b)/2});if(p)return Object.assign({[v]:_},y);{let S=nh(h),C=y[p],E=w?Object.assign(Object.assign({},C),{offset:w}):C;return{[v]:_,[S]:Bt(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:E})]:Object.assign(Object.assign({},_),{offset:E})}}}function f6(t,r,n,o,i){if(j2e(t))return 0;let s=t==="x"||t==="y2"?-r/2:r/2;if(rr(n)){let a=L2(i);return{signal:`${n.signal} ? ${o-s}${a?"-"+a:""} : ${o+s}${a?"+"+a:""}`}}else{if(rr(i)){let a=o+(n?-s:s);return{signal:`${a||""}${n?" - ":a?" + ":""}${i.signal}`}}return i=i||0,o+(n?-i-s:+i+s)}}function gbt({fieldDef:t,fieldDef2:r,channel:n,band:o,scaleName:i,markDef:s,spacing:a=0,axisTranslate:l,reverse:u,config:c}){let f=yl(n),d=nh(n),p=nh(f),h=U2(n,s);if(Sn(t.bin)||t.timeUnit)return{[p]:mbt({channel:n,fieldDef:t,scaleName:i,markDef:s,band:(1-o)/2,offset:f6(f,a,u,l,h),config:c}),[d]:mbt({channel:n,fieldDef:t,scaleName:i,markDef:s,band:1-(1-o)/2,offset:f6(n,a,u,l,h),config:c})};if(Ji(t.bin)){let m=nb(t,i,{},{offset:f6(f,a,u,l,h)});if(At(r))return{[p]:m,[d]:nb(r,i,{},{offset:f6(n,a,u,l,h)})};if(M2(t.bin)&&t.bin.step)return{[p]:m,[d]:{signal:`scale("${i}", ${vt(t,{expr:"datum"})} + ${t.bin.step})`,offset:f6(n,a,u,l,h)}}}st(it.channelRequiredForBinned(f))}function mbt({channel:t,fieldDef:r,scaleName:n,markDef:o,band:i,offset:s,config:a}){let l=qF({scaleName:n,fieldOrDatumDef:r,band:i,offset:s});return eSe({fieldDef:r,channel:t,markDef:o,ref:l,config:a})}var VSe=N(()=>{"use strict";ir();Kl();Ir();Mr();B2();cn();Ci();bt();ho();Po();mO();yee();USe();u6();vee();O2()});function rs(t,r){let{fill:n=void 0,stroke:o=void 0}=r.color==="include"?gO(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uCr(t.markDef,r)),ybt(t,"fill",n)),ybt(t,"stroke",o)),Qo("opacity",t)),Qo("fillOpacity",t)),Qo("strokeOpacity",t)),Qo("strokeWidth",t)),Qo("strokeDash",t)),hO(t)),z2(t,"href")),$Se(t))}function ybt(t,r,n){let{config:o,mark:i,markDef:s}=t;if(ln("invalid",s,o)==="hide"&&n&&!Ff(i)){let l=cCr(t,{invalid:!0,channels:N2});if(l)return{[r]:[{test:l,value:null},...Mn(n)]}}return n?{[r]:n}:{}}function uCr(t,r){return E0t.reduce((n,o)=>(!lCr.has(o)&&t[o]!==void 0&&r[o]!=="ignore"&&(n[o]=mo(t[o])),n),{})}function cCr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&xa(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>H$(a,r)).join(` ${s} `)}}var lCr,bbt=N(()=>{"use strict";ir();Ir();ba();Ci();bt();ho();Po();zSe();gee();mO();pO();a6();O2();gee();zA();mO();u6();vee();VSe();pO();a6();lCr=new Set(["aria"])});function yO(t){let{config:r,markDef:n}=t;if(ln("invalid",n,r)){let i=fCr(t,{channels:Ts});if(i)return{defined:{signal:i}}}return{}}function fCr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&xa(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>H$(a,r)).join(` ${s} `)}}function wee(t,r){if(r!==void 0)return{[t]:mo(r)}}var xbt=N(()=>{"use strict";Ir();Ci();bt();Po();O2()});var zc=N(()=>{"use strict";bbt();gee();zA();xbt();mO();u6();vee();VSe();pO();a6();zSe()});var GSe,dCr,_ee,WSe=N(()=>{"use strict";cn();ba();zc();GSe="voronoi",dCr={has:t=>t.type!=="interval"&&t.nearest,parse:(t,r)=>{if(r.events)for(let n of r.events)n.markname=t.getName(GSe)},marks:(t,r,n)=>{let{x:o,y:i}=r.project.hasChannel,s=t.mark;if(Ff(s))return st(it.nearestNotSupportForContinuous(s)),n;let a={name:t.getName(GSe),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},hO(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:o||!i?"datum.datum.x || 0":"0"},y:{expr:i||!o?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},l=0,u=!1;return n.forEach((c,f)=>{var d;let p=(d=c.name)!==null&&d!==void 0?d:"";p===t.component.mark[0].name?l=f:p.indexOf(GSe)>=0&&(u=!0)}),u||n.splice(l+1,0,a),n}},_ee=dCr});var Dr,ds,ro=N(()=>{"use strict";bt();Dr=class{constructor(r,n){this.debugName=n,this._children=[],this._parent=null,r&&(this.parent=r)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(r){this._parent=r,r&&r.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(r,n){if(this._children.indexOf(r)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,r):this._children.push(r)}removeChild(r){let n=this._children.indexOf(r);return this._children.splice(n,1),n}remove(){let r=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,r++)}insertAsParentOf(r){let n=r.parent;n.removeChild(this),this.parent=n,r.parent=this}swapWithParent(){let r=this._parent,n=r.parent;for(let o of this._children)o.parent=r;this._children=[],r.removeChild(this),r.parent.removeChild(r),this.parent=n,r.parent=this}},ds=class extends Dr{constructor(r,n,o,i){super(r,n),this.type=o,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){let r=new this.constructor;return r.debugName="clone_"+this.debugName,r._source=this._source,r._name="clone_"+this._name,r.type=this.type,r.refCounts=this.refCounts,r.refCounts[r._name]=0,r}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${D2e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(r){this._source=r}}});var lh,d6=N(()=>{"use strict";So();Ir();Mr();eb();bt();ps();ro();lh=class t extends Dr{constructor(r,n){super(r),this.formula=n}clone(){return new t(null,sr(this.formula))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{let{field:l,timeUnit:u}=s,c=no(n)?n.encoding[yl(a)]:void 0,f=no(n)&&QF(a,s,c,n.stack,n.markDef,n.config);if(u){let d=vt(s,{forAs:!0});i[Tr({as:d,field:l,timeUnit:u})]=Object.assign({as:d,field:l,timeUnit:u},f?{band:!0}:{})}return i},{});return bn(o)?null:new t(r,o)}static makeFromTransform(r,n){let o=Object.assign({},n),{timeUnit:i}=o,s=Pt(o,["timeUnit"]),a=fs(i),l=Object.assign(Object.assign({},s),{timeUnit:a});return new t(r,{[Tr(l)]:l})}merge(r){this.formula=Object.assign({},this.formula);for(let n in r.formula)(!this.formula[n]||r.formula[n].band)&&(this.formula[n]=r.formula[n]);for(let n of r.children)r.removeChild(n),n.parent=this;r.remove()}producedFields(){return new Set(th(this.formula).map(r=>r.as))}dependentFields(){return new Set(th(this.formula).map(r=>r.field))}hash(){return`TimeUnit ${Tr(this.formula)}`}assemble(){let r=[];for(let n of th(this.formula)){let{field:o,as:i,timeUnit:s}=n,a=fs(s),{unit:l,utc:u}=a,c=Pt(a,["unit","utc"]);r.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Mf(o),type:"timeunit"},l?{units:U$(l)}:{}),u?{timezone:"utc"}:{}),c),{as:[i,`${i}_end`]}))}return r}}});var o1,qSe,pCr,vbt,bO=N(()=>{"use strict";So();ir();Ir();cn();Ci();bt();d6();o1="_tuple_fields",qSe=class{constructor(...r){this.items=r,this.hasChannel={},this.hasField={}}},pCr={has:()=>!0,parse:(t,r,n)=>{var o,i,s;let a=r.name,l=(o=r.project)!==null&&o!==void 0?o:r.project=new qSe,u={},c={},f=new Set,d=(p,h)=>{let m=h==="visual"?p.channel:p.field,g=kn(`${a}_${m}`);for(let y=1;f.has(g);y++)g=kn(`${a}_${m}_${y}`);return f.add(g),{[h]:g}};if(!n.fields&&!n.encodings){let p=t.config.selection[n.type];if(n.init)for(let h of Mn(n.init))for(let m of nt(h))Zgt(m)?(n.encodings||(n.encodings=[])).push(m):n.type==="interval"?(st('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=p.encodings):(n.fields||(n.fields=[])).push(m);else n.encodings=p.encodings,n.fields=p.fields}for(let p of(i=n.fields)!==null&&i!==void 0?i:[]){let h={type:"E",field:p};h.signals=Object.assign({},d(h,"data")),l.items.push(h),l.hasField[p]=h}for(let p of(s=n.encodings)!==null&&s!==void 0?s:[]){let h=t.fieldDef(p);if(h){let m=h.field;if(h.aggregate){st(it.cannotProjectAggregate(p,h.aggregate));continue}else if(!m){st(it.cannotProjectOnChannelWithoutField(p));continue}if(h.timeUnit){m=t.vgField(p);let g={timeUnit:h.timeUnit,as:m,field:h.field};c[Tr(g)]=g}if(!u[m]){let g="E";if(r.type==="interval"){let b=t.getScaleComponent(p).get("type");xa(b)&&(g="R")}else h.bin&&(g="R-RE");let y={field:m,channel:p,type:g};y.signals=Object.assign(Object.assign({},d(y,"data")),d(y,"visual")),l.items.push(u[m]=y),l.hasField[m]=l.hasChannel[p]=u[m]}}else st(it.cannotProjectOnChannelWithoutField(p))}if(n.init){let p=h=>l.items.map(m=>h[m.channel]!==void 0?h[m.channel]:h[m.field]);if(n.type==="interval")r.init=p(n.init);else{let h=Mn(n.init);r.init=h.map(p)}}bn(c)||(l.timeUnit=new lh(null,c))},signals:(t,r,n)=>{let o=r.name+o1;return n.filter(s=>s.name===o).length>0?n:n.concat({name:o,value:r.project.items.map(s=>{let{signals:a,hasLegend:l}=s,u=Pt(s,["signals","hasLegend"]);return u.field=Mf(u.field),u})})}},vbt=pCr});var hCr,See,HSe=N(()=>{"use strict";ir();Wf();bt();GA();WSe();bO();iO();hCr={has:t=>t.type==="single"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!r6(t.bind),parse:(t,r,n,o)=>{o.on||delete r.events,o.clear||delete r.clear},topLevelSignals:(t,r,n)=>{let o=r.name,i=r.project,s=r.bind,a=r.init&&r.init[0],l=_ee.has(r)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,c)=>{var f,d;let p=kn(`${o}_${u.field}`);n.filter(m=>m.name===p).length||n.unshift(Object.assign(Object.assign({name:p},a?{init:G2(a[c])}:{value:null}),{on:r.events?[{events:r.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${Jr(u.field)}] : null`}]:[],bind:(d=(f=s[u.field])!==null&&f!==void 0?f:s[u.channel])!==null&&d!==void 0?d:s}))}),n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.filter(c=>c.name===o+vl)[0],a=o+o1,l=i.items.map(c=>kn(`${o}_${c.field}`)),u=l.map(c=>`${c} !== null`).join(" && ");return l.length&&(s.update=`${u} ? {fields: ${a}, values: [${l.join(", ")}]} : null`),delete s.value,delete s.on,n}},See=hCr});var xO,mCr,Cee,Eee=N(()=>{"use strict";Wf();xO="_toggle",mCr={has:t=>t.type==="multi"&&!!t.toggle,signals:(t,r,n)=>n.concat({name:r.name+xO,value:!1,on:[{events:r.events,update:r.toggle}]}),modifyExpr:(t,r)=>{let n=r.name+vl,o=r.name+xO;return`${o} ? null : ${n}, `+(r.resolve==="global"?`${o} ? null : true, `:`${o} ? null : {unit: ${qf(t)}}, `)+`${o} ? ${n} : null`}},Cee=mCr});var gCr,wbt,_bt=N(()=>{"use strict";T2();ir();Wf();bt();HSe();Eee();gCr={has:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,r,n)=>{n.clear&&(r.clear=pr(n.clear)?Df(n.clear,"scope"):n.clear)},topLevelSignals:(t,r,n)=>{if(See.has(r))for(let o of r.project.items){let i=n.findIndex(s=>s.name===kn(`${r.name}_${o.field}`));i!==-1&&n[i].on.push({events:r.clear,update:"null"})}return n},signals:(t,r,n)=>{function o(i,s){i!==-1&&n[i].on&&n[i].on.push({events:r.clear,update:s})}if(r.type==="interval")for(let i of r.project.items){let s=n.findIndex(a=>a.name===i.signals.visual);if(o(s,"[0, 0]"),s===-1){let a=n.findIndex(l=>l.name===i.signals.data);o(a,"null")}}else{let i=n.findIndex(s=>s.name===r.name+vl);o(i,"null"),Cee.has(r)&&(i=n.findIndex(s=>s.name===r.name+xO),o(i,"false"))}return n}},wbt=gCr});function p6(t,r){return`domain(${Jr(t.scaleName(r))})`}function YSe(t){var r;return t.parent&&ch(t.parent)&&((r=!t.parent.parent)!==null&&r!==void 0?r:YSe(t.parent.parent))}var yCr,uh,h6=N(()=>{"use strict";ir();Wf();Ir();cn();Ci();ps();yCr={has:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,r)=>{let n=r.scales=[];for(let o of r.project.items){let i=o.channel;if(!$u(i))continue;let s=t.getScaleComponent(i),a=s?s.get("type"):void 0;if(!s||!xa(a)){st(it.SCALE_BINDINGS_CONTINUOUS);continue}let l={selection:r.name,field:o.field};s.set("selectionExtent",l,!0),n.push(o)}},topLevelSignals:(t,r,n)=>{let o=r.scales.filter(a=>n.filter(l=>l.name===a.signals.data).length===0);if(!t.parent||YSe(t)||o.length===0)return n;let i=n.filter(a=>a.name===r.name)[0],s=i.update;if(s.indexOf(Tee)>=0)i.update=`{${o.map(a=>`${Jr(a.field)}: ${a.signals.data}`).join(", ")}}`;else{for(let a of o){let l=`${Jr(a.field)}: ${a.signals.data}`;s.indexOf(l)<0&&(s=`${s.substring(0,s.length-1)}, ${l}}`)}i.update=s}return n.concat(o.map(a=>({name:a.signals.data})))},signals:(t,r,n)=>{if(t.parent&&!YSe(t))for(let o of r.scales){let i=n.filter(s=>s.name===o.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},uh=yCr});function Ebt(t,r,n){var o;let i=(o=t.fieldDef(r))===null||o===void 0?void 0:o.field;pb(t,s=>{var a,l;let u=(a=s.project.hasField[i])!==null&&a!==void 0?a:s.project.hasChannel[r];if(u&&Sbt.has(s)){let c=(l=n.get("selections"))!==null&&l!==void 0?l:[];c.push(s.name),n.set("selections",c,!1),u.hasLegend=!0}})}var Sbt,Cbt,XSe=N(()=>{"use strict";T2();ir();Wf();cn();iO();bt();bO();Eee();Sbt={has:t=>{let r=t.resolve==="global"&&t.bind&&r6(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==e1;return r&&!n&&st(it.LEGEND_BINDINGS_PROJECT_LENGTH),r&&n},parse:(t,r,n,o)=>{var i;if(o.on||delete r.events,o.clear||delete r.clear,o.on||o.clear){let l='event.item && indexof(event.item.mark.role, "legend") < 0';for(let u of r.events)u.filter=Mn((i=u.filter)!==null&&i!==void 0?i:[]),u.filter.indexOf(l)<0&&u.filter.push(l)}let s=JJ(r.bind)?r.bind.legend:"click",a=pr(s)?Df(s,"view"):Mn(s);r.bind={legend:{merge:a}}},topLevelSignals:(t,r,n)=>{let o=r.name,i=JJ(r.bind)&&r.bind.legend,s=a=>l=>{let u=sr(l);return u.markname=a,u};for(let a of r.project.items){if(!a.hasLegend)continue;let l=`${kn(a.field)}_legend`,u=`${o}_${l}`;if(n.filter(f=>f.name===u).length===0){let f=i.merge.map(s(`${l}_symbols`)).concat(i.merge.map(s(`${l}_labels`))).concat(i.merge.map(s(`${l}_entries`)));n.unshift(Object.assign(Object.assign({name:u},r.init?{}:{value:null}),{on:[{events:f,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.find(p=>p.name===o+vl),a=o+o1,l=i.items.filter(p=>p.hasLegend).map(p=>kn(`${o}_${kn(p.field)}_legend`)),c=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${a}, values: [${l.join(", ")}]} : null`;r.events&&l.length>0?s.on.push({events:l.map(p=>({signal:p})),update:c}):l.length>0&&(s.update=c,delete s.value,delete s.on);let f=n.find(p=>p.name===o+xO),d=JJ(r.bind)&&r.bind.legend;return f&&(r.events?f.on.push(Object.assign(Object.assign({},f.on[0]),{events:d})):f.on[0].events=d),n}},Cbt=Sbt});function Tbt(t,r,n,o,i){var s;let a=r.name,l=a+Abt,u=a+kbt,c=n.channel,f=uh.has(r),d=i.filter(w=>w.name===n.signals[f?"data":"visual"])[0],p=t.getSizeSignalRef(o).signal,h=t.getScaleComponent(c),m=h.get("type"),g=f&&c===to?"-":"",y=`${l}.extent_${c}`,b=`${g}${u}.${c} / `+(f?`${p}`:`span(${y})`),v=`${f?m==="log"?"panLog":m==="pow"?"panPow":"panLinear":"panLinear"}(${y}, ${b}`+(f&&m==="pow"?`, ${(s=h.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";d.on.push({events:{signal:u},update:f?v:`clampRange(${v}, 0, ${p})`})}var Abt,kbt,bCr,Ibt,Dbt=N(()=>{"use strict";T2();Ir();Aee();h6();Abt="_translate_anchor",kbt="_translate_delta",bCr={has:t=>t.type==="interval"&&t.translate,signals:(t,r,n)=>{let o=r.name,i=uh.has(r),s=o+Abt,{x:a,y:l}=r.project.hasChannel,u=Df(r.translate,"scope");return i||(u=u.map(c=>(c.between[0].markname=o+WA,c))),n.push({name:s,value:{},on:[{events:u.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?", extent_x: "+(i?p6(t,to):`slice(${a.signals.visual})`):"")+(l!==void 0?", extent_y: "+(i?p6(t,gi):`slice(${l.signals.visual})`):"")+"}"}]},{name:o+kbt,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&Tbt(t,r,a,"width",n),l!==void 0&&Tbt(t,r,l,"height",n),n}},Ibt=bCr});function Nbt(t,r,n,o,i){var s;let a=r.name,l=n.channel,u=uh.has(r),c=i.filter(x=>x.name===n.signals[u?"data":"visual"])[0],f=t.getSizeSignalRef(o).signal,d=t.getScaleComponent(l),p=d.get("type"),h=u?p6(t,l):c.name,m=a+Fbt,g=`${a}${Mbt}.${l}`,b=`${u?p==="log"?"zoomLog":p==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${g}, ${m}`+(u&&p==="pow"?`, ${(s=d.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";c.on.push({events:{signal:m},update:u?b:`clampRange(${b}, 0, ${f})`})}var Mbt,Fbt,xCr,Obt,Rbt=N(()=>{"use strict";T2();ir();Ir();Aee();h6();Mbt="_zoom_anchor",Fbt="_zoom_delta",xCr={has:t=>t.type==="interval"&&t.zoom,signals:(t,r,n)=>{let o=r.name,i=uh.has(r),s=o+Fbt,{x:a,y:l}=r.project.hasChannel,u=Jr(t.scaleName(to)),c=Jr(t.scaleName(gi)),f=Df(r.zoom,"scope");return i||(f=f.map(d=>(d.markname=o+WA,d))),n.push({name:o+Mbt,on:[{events:f,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(d=>!!d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&Nbt(t,r,a,"width",n),l!==void 0&&Nbt(t,r,l,"height",n),n}},Obt=xCr});function vO(t,r){for(let n of vCr)n.has(t)&&r(n)}var vCr,KSe=N(()=>{"use strict";_bt();HSe();WSe();bO();h6();XSe();Eee();Dbt();Rbt();vCr=[vbt,Cee,uh,Cbt,Ibt,Obt,See,_ee,wbt]});function G2(t,r=!0,n=VQ){if(Bt(t)){let o=t.map(i=>G2(i,r,n));return r?`[${o.join(", ")}]`:o}else if(Jy(t))return n(r?F2(t):g0t(t));return r?n(JSON.stringify(t)):t}function Pbt(t,r){return pb(t,(n,o)=>{let i=n.name,s=o.modifyExpr(t,n);r.push(...o.signals(t,n)),vO(n,a=>{a.signals&&(r=a.signals(t,n,r)),a.modifyExpr&&(s=a.modifyExpr(t,n,s))}),r.push({name:i+Ubt,on:[{events:{signal:n.name+vl},update:`modify(${Jr(n.name+sg)}, ${s})`}]})}),QSe(r)}function Lbt(t,r){if(t.component.selection&&nt(t.component.selection).length){let n=Jr(t.getName("cell"));r.unshift({name:"facet",value:{},on:[{events:Df("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return QSe(r)}function jbt(t,r){let n=!1;return pb(t,(o,i)=>{let s=o.name,a=Jr(s+sg);if(r.filter(u=>u.name===s).length===0){let u=o.resolve==="global"?"union":o.resolve,c=o.type==="multi"?", true)":")";r.push({name:o.name,update:`${Tee}(${a}, ${Jr(u)}${c}`})}n=!0,i.topLevelSignals&&(r=i.topLevelSignals(t,o,r)),vO(o,u=>{u.topLevelSignals&&(r=u.topLevelSignals(t,o,r))})}),n&&r.filter(i=>i.name==="unit").length===0&&r.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),QSe(r)}function Bbt(t,r){let n=[...r];return pb(t,o=>{let i={name:o.name+sg};if(o.init){let a=o.project.items.map(u=>{let{signals:c}=u;return Pt(u,["signals"])}),l=o.init.map(u=>G2(u,!1));i.values=o.type==="interval"?[{unit:qf(t,{escape:!1}),fields:a,values:l}]:l.map(u=>({unit:qf(t,{escape:!1}),fields:a,values:u}))}n.filter(a=>a.name===o.name+sg).length||n.push(i)}),n}function ZSe(t,r){return pb(t,(n,o)=>{r=o.marks?o.marks(t,n,r):r,vO(n,i=>{i.marks&&(r=i.marks(t,n,r))})}),r}function $bt(t,r){for(let n of t.children)no(n)&&(r=ZSe(n,r));return r}function zbt(t,r){let n=r.selection,o=t.getSelectionComponent(n,kn(n));return{signal:kee(o,r)}}function QSe(t){return t.map(r=>(r.on&&!r.on.length&&delete r.on,r))}var GA=N(()=>{"use strict";So();T2();ir();Wf();VF();bt();ps();KSe();UA()});function _Cr(t,r,n,o){let i=n.channel,s=n.signals.visual,a=n.signals.data,l=uh.has(r),u=Jr(t.scaleName(i)),c=t.getScaleComponent(i),f=c?c.get("type"):void 0,d=g=>`scale(${u}, ${g})`,p=t.getSizeSignalRef(i===to?"width":"height").signal,h=`${i}(unit)`,m=Gbt(r,(g,y)=>[...g,{events:y.between[0],update:`[${h}, ${h}]`},{events:y,update:`[${s}[0], clamp(${h}, 0, ${p})]`}]);return m.push({events:{signal:r.name+JSe},update:xa(f)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),l?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},o?{init:G2(o,!0,d)}:{value:[]}),{on:m}),Object.assign(Object.assign({name:a},o?{init:G2(o)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]})]}function Gbt(t,r){return t.events.reduce((n,o)=>o.between?r(n,o):(st(`${o} is not an ordered event stream for interval selections.`),n),[])}var WA,JSe,wCr,Vbt,Aee=N(()=>{"use strict";So();ir();Wf();Ir();cn();Ci();bt();GA();bO();h6();WA="_brush",JSe="_scale_trigger",wCr={signals:(t,r)=>{let n=r.name,o=n+o1,i=uh.has(r),s=[],a=[],l=[];if(r.translate&&!i){let f=`!event.item || event.item.mark.name !== ${Jr(n+WA)}`;Gbt(r,(d,p)=>{var h;let m=Mn((h=p.between[0].filter)!==null&&h!==void 0?h:p.between[0].filter=[]);return m.indexOf(f)<0&&m.push(f),d})}r.project.items.forEach((f,d)=>{let p=f.channel;if(p!==to&&p!==gi){st("Interval selections only support x and y encoding channels.");return}let h=r.init?r.init[d]:null,m=_Cr(t,r,f,h),g=f.signals.data,y=f.signals.visual,b=Jr(t.scaleName(p)),x=t.getScaleComponent(p).get("type"),v=xa(x)?"+":"";s.push(...m),a.push(g),l.push({scaleName:t.scaleName(p),expr:`(!isArray(${g}) || (${v}invert(${b}, ${y})[0] === ${v}${g}[0] && ${v}invert(${b}, ${y})[1] === ${v}${g}[1]))`})}),i||s.push({name:n+JSe,value:{},on:[{events:l.map(f=>({scale:f.scaleName})),update:l.map(f=>f.expr).join(" && ")+` ? ${n+JSe} : {}`}]});let u=r.init,c=`unit: ${qf(t)}, fields: ${o}, values`;return s.concat(Object.assign(Object.assign({name:n+vl},u?{init:`{${c}: ${G2(u)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+` ? {${c}: [${a}]} : null`}]}))},modifyExpr:(t,r)=>r.name+vl+", "+(r.resolve==="global"?"true":`{unit: ${qf(t)}}`),marks:(t,r,n)=>{let o=r.name,{x:i,y:s}=r.project.hasChannel,a=i&&i.signals.visual,l=s&&s.signals.visual,u=`data(${Jr(r.name+sg)})`;if(uh.has(r))return n;let c={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${l}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(r.resolve==="global")for(let y of nt(c))c[y]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${qf(t)}`},c[y]),{value:0}];let f=r.mark,{fill:d,fillOpacity:p,cursor:h}=f,m=Pt(f,["fill","fillOpacity","cursor"]),g=nt(m).reduce((y,b)=>(y[b]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${l}[0] !== ${l}[1]`].filter(x=>x).join(" && "),value:m[b]},{value:null}],y),{});return[{name:o+WA+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:p}},update:c}},...n,{name:o+WA,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),g)}}]}},Vbt=wCr});function eCe(t,r){let n=r.name,o=n+o1,i=r.project,s="(item().isVoronoi ? datum.datum : datum)",a=i.items.map(c=>{let f=t.fieldDef(c.channel);return f&&f.bin?`[${s}[${Jr(t.vgField(c.channel,{}))}], ${s}[${Jr(t.vgField(c.channel,{binSuffix:"end"}))}]]`:`${s}[${Jr(c.field)}]`}).join(", "),l=`unit: ${qf(t)}, fields: ${o}, values`,u=r.events;return[{name:n+vl,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${l}: [${a}]} : null`,force:!0}]:[]}]}var SCr,Wbt,tCe=N(()=>{"use strict";ir();Wf();bO();SCr={signals:eCe,modifyExpr:(t,r)=>r.name+vl+", "+(r.resolve==="global"?"null":`{unit: ${qf(t)}}`)},Wbt=SCr});var CCr,qbt,Hbt=N(()=>{"use strict";Wf();tCe();CCr={signals:eCe,modifyExpr:(t,r)=>r.name+vl+", "+(r.resolve==="global"?"true":`{unit: ${qf(t)}}`)},qbt=CCr});function pb(t,r){let n=t.component.selection;if(n){for(let o of th(n))if(r(o,ECr[o.type])===!0)break}}function TCr(t){let r=t.parent;for(;r&&!wl(r);)r=r.parent;return r}function qf(t,{escape:r}={escape:!0}){let n=r?Jr(t.name):t.name,o=TCr(t);if(o){let{facet:i}=o;for(let s of gl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Jr(o.vgField(s))}])`)}return n}function m6(t){let r=!1;return pb(t,n=>{r=r||n.project.items.some(o=>o.field===e1)}),r}var sg,vl,Ubt,Tee,ECr,Wf=N(()=>{"use strict";ir();Ir();iO();bt();ps();Aee();tCe();Hbt();sg="_store",vl="_tuple",Ubt="_modify",Tee="vlSelectionResolve",ECr={single:qbt,multi:Wbt,interval:Vbt}});function Hf(t){this.type=t}function ACr(t){switch(t.type){case Qbt:return t.elements;case Jbt:case rxt:return[t.left,t.right];case ext:return[t.callee].concat(t.arguments);case txt:return[t.test,t.consequent,t.alternate];case nxt:return[t.object,t.property];case oxt:return t.properties;case Kbt:return[t.key,t.value];case ixt:return[t.argument];case Zbt:case Xbt:case Ybt:default:return[]}}var Ybt,Xbt,Kbt,Zbt,Qbt,Jbt,ext,txt,rxt,nxt,oxt,ixt,rCe=N(()=>{"use strict";Ybt="RawCode",Xbt="Literal",Kbt="Property",Zbt="Identifier",Qbt="ArrayExpression",Jbt="BinaryExpression",ext="CallExpression",txt="ConditionalExpression",rxt="LogicalExpression",nxt="MemberExpression",oxt="ObjectExpression",ixt="UnaryExpression";Hf.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=ACr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1}});function Fee(t,r){if(!t)throw new Error("ASSERT: "+r)}function i1(t){return t>=48&&t<=57}function lCe(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function y6(t){return"01234567".indexOf(t)>=0}function HCr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function x6(t){return t===10||t===13||t===8232||t===8233}function _6(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&WCr.test(String.fromCharCode(t))}function Dee(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&qCr.test(String.fromCharCode(t))}function mxt(){for(var t;dt<qu&&(t=yr.charCodeAt(dt),HCr(t)||x6(t));)++dt}function aCe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)dt<qu&&lCe(yr[dt])?(o=yr[dt++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):Co({},Ql,Wu);return String.fromCharCode(i)}function XCr(){var t,r,n,o;for(t=yr[dt],r=0,t==="}"&&Co({},Ql,Wu);dt<qu&&(t=yr[dt++],!!lCe(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&Co({},Ql,Wu),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function gxt(){var t,r;for(t=yr.charCodeAt(dt++),r=String.fromCharCode(t),t===92&&(yr.charCodeAt(dt)!==117&&Co({},Ql,Wu),++dt,t=aCe("u"),(!t||t==="\\"||!_6(t.charCodeAt(0)))&&Co({},Ql,Wu),r=t);dt<qu&&(t=yr.charCodeAt(dt),!!Dee(t));)++dt,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),yr.charCodeAt(dt)!==117&&Co({},Ql,Wu),++dt,t=aCe("u"),(!t||t==="\\"||!Dee(t.charCodeAt(0)))&&Co({},Ql,Wu),r+=t);return r}function KCr(){var t,r;for(t=dt++;dt<qu;){if(r=yr.charCodeAt(dt),r===92)return dt=t,gxt();if(Dee(r))++dt;else break}return yr.slice(t,dt)}function ZCr(){var t,r,n;return t=dt,r=yr.charCodeAt(dt)===92?gxt():KCr(),r.length===1?n=qA:YCr.hasOwnProperty(r)?n=W2:r==="null"?n=Mee:r==="true"||r==="false"?n=Nee:n=qA,{type:n,value:r,start:t,end:dt}}function oCe(){var t=dt,r=yr.charCodeAt(dt),n,o=yr[dt],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++dt,{type:Yf,value:String.fromCharCode(r),start:t,end:dt};default:if(n=yr.charCodeAt(dt+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return dt+=2,{type:Yf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:dt};case 33:case 61:return dt+=2,yr.charCodeAt(dt)===61&&++dt,{type:Yf,value:yr.slice(t,dt),start:t,end:dt}}}if(a=yr.substr(dt,4),a===">>>=")return dt+=4,{type:Yf,value:a,start:t,end:dt};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return dt+=3,{type:Yf,value:s,start:t,end:dt};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return dt+=2,{type:Yf,value:i,start:t,end:dt};if("<>=!+-*%&|^/".indexOf(o)>=0)return++dt,{type:Yf,value:o,start:t,end:dt};Co({},Ql,Wu)}function QCr(t){for(var r="";dt<qu&&lCe(yr[dt]);)r+=yr[dt++];return r.length===0&&Co({},Ql,Wu),_6(yr.charCodeAt(dt))&&Co({},Ql,Wu),{type:YA,value:parseInt("0x"+r,16),start:t,end:dt}}function JCr(t){for(var r="0"+yr[dt++];dt<qu&&y6(yr[dt]);)r+=yr[dt++];return(_6(yr.charCodeAt(dt))||i1(yr.charCodeAt(dt)))&&Co({},Ql,Wu),{type:YA,value:parseInt(r,8),octal:!0,start:t,end:dt}}function sxt(){var t,r,n;if(n=yr[dt],Fee(i1(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=dt,t="",n!=="."){if(t=yr[dt++],n=yr[dt],t==="0"){if(n==="x"||n==="X")return++dt,QCr(r);if(y6(n))return JCr(r);n&&i1(n.charCodeAt(0))&&Co({},Ql,Wu)}for(;i1(yr.charCodeAt(dt));)t+=yr[dt++];n=yr[dt]}if(n==="."){for(t+=yr[dt++];i1(yr.charCodeAt(dt));)t+=yr[dt++];n=yr[dt]}if(n==="e"||n==="E")if(t+=yr[dt++],n=yr[dt],(n==="+"||n==="-")&&(t+=yr[dt++]),i1(yr.charCodeAt(dt)))for(;i1(yr.charCodeAt(dt));)t+=yr[dt++];else Co({},Ql,Wu);return _6(yr.charCodeAt(dt))&&Co({},Ql,Wu),{type:YA,value:parseFloat(t),start:r,end:dt}}function eEr(){var t="",r,n,o,i,s=!1;for(r=yr[dt],Fee(r==="'"||r==='"',"String literal must starts with a quote"),n=dt,++dt;dt<qu;)if(o=yr[dt++],o===r){r="";break}else if(o==="\\")if(o=yr[dt++],!o||!x6(o.charCodeAt(0)))switch(o){case"u":case"x":yr[dt]==="{"?(++dt,t+=XCr()):t+=aCe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:y6(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),dt<qu&&y6(yr[dt])&&(s=!0,i=i*8+"01234567".indexOf(yr[dt++]),"0123".indexOf(o)>=0&&dt<qu&&y6(yr[dt])&&(i=i*8+"01234567".indexOf(yr[dt++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&yr[dt]===`
`&&++dt;else{if(x6(o.charCodeAt(0)))break;t+=o}return r!==""&&Co({},Ql,Wu),{type:w6,value:t,octal:s,start:n,end:dt}}function tEr(t,r){var n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(o,i){if(parseInt(i,16)<=1114111)return"x";Co({},sCe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Co({},sCe)}try{return new RegExp(t,r)}catch{return null}}function rEr(){var t,r,n,o,i;for(t=yr[dt],Fee(t==="/","Regular expression literal must start with a slash"),r=yr[dt++],n=!1,o=!1;dt<qu;)if(t=yr[dt++],r+=t,t==="\\")t=yr[dt++],x6(t.charCodeAt(0))&&Co({},nCe),r+=t;else if(x6(t.charCodeAt(0)))Co({},nCe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||Co({},nCe),i=r.substr(1,r.length-2),{value:i,literal:r}}function nEr(){var t,r,n;for(r="",n="";dt<qu&&(t=yr[dt],!!Dee(t.charCodeAt(0)));)++dt,t==="\\"&&dt<qu?Co({},Ql,Wu):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&Co({},sCe,n),{value:n,literal:r}}function oEr(){var t,r,n,o;return Lo=null,mxt(),t=dt,r=rEr(),n=nEr(),o=tEr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:dt}}function iEr(t){return t.type===qA||t.type===W2||t.type===Nee||t.type===Mee}function yxt(){var t;return mxt(),dt>=qu?{type:v6,start:dt,end:dt}:(t=yr.charCodeAt(dt),_6(t)?ZCr():t===40||t===41||t===59?oCe():t===39||t===34?eEr():t===46?i1(yr.charCodeAt(dt+1))?sxt():oCe():i1(t)?sxt():oCe())}function Xf(){var t;return t=Lo,dt=t.end,Lo=yxt(),dt=t.end,t}function bxt(){var t;t=dt,Lo=yxt(),dt=t}function sEr(t){var r=new Hf(ICr);return r.elements=t,r}function axt(t,r,n){var o=new Hf(t==="||"||t==="&&"?OCr:DCr);return o.operator=t,o.left=r,o.right=n,o}function aEr(t,r){var n=new Hf(NCr);return n.callee=t,n.arguments=r,n}function lEr(t,r,n){var o=new Hf(MCr);return o.test=t,o.consequent=r,o.alternate=n,o}function uCe(t){var r=new Hf(pxt);return r.name=t,r}function g6(t){var r=new Hf(FCr);return r.value=t.value,r.raw=yr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function lxt(t,r,n){var o=new Hf(RCr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function uEr(t){var r=new Hf(PCr);return r.properties=t,r}function uxt(t,r,n){var o=new Hf(LCr);return o.key=r,o.value=n,o.kind=t,o}function cEr(t,r){var n=new Hf(jCr);return n.operator=t,n.argument=r,n.prefix=!0,n}function Co(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,function(s,a){return Fee(a<o.length,"Message reference must be in range"),o[a]});throw n=new Error(i),n.index=dt,n.description=i,n}function Oee(t){t.type===v6&&Co(t,VCr),t.type===YA&&Co(t,BCr),t.type===w6&&Co(t,$Cr),t.type===qA&&Co(t,zCr),t.type===W2&&Co(t,UCr),Co(t,Ql,t.value)}function Hu(t){var r=Xf();(r.type!==Yf||r.value!==t)&&Oee(r)}function Vi(t){return Lo.type===Yf&&Lo.value===t}function iCe(t){return Lo.type===W2&&Lo.value===t}function fEr(){var t=[];for(dt=Lo.start,Hu("[");!Vi("]");)Vi(",")?(Xf(),t.push(null)):(t.push(HA()),Vi("]")||Hu(","));return Xf(),sEr(t)}function cxt(){var t;return dt=Lo.start,t=Xf(),t.type===w6||t.type===YA?(t.octal&&Co(t,hxt),g6(t)):uCe(t.value)}function dEr(){var t,r,n,o;if(dt=Lo.start,t=Lo,t.type===qA)return n=cxt(),Hu(":"),o=HA(),uxt("init",n,o);if(t.type===v6||t.type===Yf)Oee(t);else return r=cxt(),Hu(":"),o=HA(),uxt("init",r,o)}function pEr(){var t=[],r,n,o,i={},s=String;for(dt=Lo.start,Hu("{");!Vi("}");)r=dEr(),r.key.type===pxt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?Co({},GCr):i[o]=!0,t.push(r),Vi("}")||Hu(",");return Hu("}"),uEr(t)}function hEr(){var t;return Hu("("),t=cCe(),Hu(")"),t}function gEr(){var t,r,n;if(Vi("("))return hEr();if(Vi("["))return fEr();if(Vi("{"))return pEr();if(t=Lo.type,dt=Lo.start,t===qA||mEr[Lo.value])n=uCe(Xf().value);else if(t===w6||t===YA)Lo.octal&&Co(Lo,hxt),n=g6(Xf());else{if(t===W2)throw new Error(b6);t===Nee?(r=Xf(),r.value=r.value==="true",n=g6(r)):t===Mee?(r=Xf(),r.value=null,n=g6(r)):Vi("/")||Vi("/=")?(n=g6(oEr()),bxt()):Oee(Xf())}return n}function yEr(){var t=[];if(Hu("("),!Vi(")"))for(;dt<qu&&(t.push(HA()),!Vi(")"));)Hu(",");return Hu(")"),t}function bEr(){var t;return dt=Lo.start,t=Xf(),iEr(t)||Oee(t),uCe(t.value)}function xEr(){return Hu("."),bEr()}function vEr(){var t;return Hu("["),t=cCe(),Hu("]"),t}function wEr(){var t,r,n;for(t=gEr();;)if(Vi("."))n=xEr(),t=lxt(".",t,n);else if(Vi("("))r=yEr(),t=aEr(t,r);else if(Vi("["))n=vEr(),t=lxt("[",t,n);else break;return t}function fxt(){var t=wEr();if(Lo.type===Yf&&(Vi("++")||Vi("--")))throw new Error(b6);return t}function Iee(){var t,r;if(Lo.type!==Yf&&Lo.type!==W2)r=fxt();else{if(Vi("++")||Vi("--"))throw new Error(b6);if(Vi("+")||Vi("-")||Vi("~")||Vi("!"))t=Xf(),r=Iee(),r=cEr(t.value,r);else{if(iCe("delete")||iCe("void")||iCe("typeof"))throw new Error(b6);r=fxt()}}return r}function dxt(t){var r=0;if(t.type!==Yf&&t.type!==W2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function _Er(){var t,r,n,o,i,s,a,l,u,c;if(t=Lo,u=Iee(),o=Lo,i=dxt(o),i===0)return u;for(o.prec=i,Xf(),r=[t,Lo],a=Iee(),s=[u,o,a];(i=dxt(Lo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=axt(l,u,a),s.push(n);o=Xf(),o.prec=i,s.push(o),r.push(Lo),n=Iee(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=axt(s[c-1].value,s[c-2],n),c-=2;return n}function HA(){var t,r,n;return t=_Er(),Vi("?")&&(Xf(),r=HA(),Hu(":"),n=HA(),t=lEr(t,r,n)),t}function cCe(){var t=HA();if(Vi(","))throw new Error(b6);return t}function fCe(t){yr=t,dt=0,qu=yr.length,Lo=null,bxt();var r=cCe();if(Lo.type!==v6)throw new Error("Unexpect token after expression.");return r}var hb,yr,dt,qu,Lo,Nee,v6,qA,W2,Mee,YA,Yf,w6,kCr,ICr,DCr,NCr,MCr,pxt,FCr,OCr,RCr,PCr,LCr,jCr,Ql,BCr,$Cr,zCr,UCr,VCr,sCe,nCe,hxt,GCr,Wu,b6,WCr,qCr,YCr,mEr,xxt=N(()=>{"use strict";rCe();Nee=1,v6=2,qA=3,W2=4,Mee=5,YA=6,Yf=7,w6=8,kCr=9;hb={};hb[Nee]="Boolean";hb[v6]="<end>";hb[qA]="Identifier";hb[W2]="Keyword";hb[Mee]="Null";hb[YA]="Numeric";hb[Yf]="Punctuator";hb[w6]="String";hb[kCr]="RegularExpression";ICr="ArrayExpression",DCr="BinaryExpression",NCr="CallExpression",MCr="ConditionalExpression",pxt="Identifier",FCr="Literal",OCr="LogicalExpression",RCr="MemberExpression",PCr="ObjectExpression",LCr="Property",jCr="UnaryExpression",Ql="Unexpected token %0",BCr="Unexpected number",$Cr="Unexpected string",zCr="Unexpected identifier",UCr="Unexpected reserved word",VCr="Unexpected end of input",sCe="Invalid regular expression",nCe="Invalid regular expression: missing /",hxt="Octal literals are not allowed in strict mode.",GCr="Duplicate data property in object literal not allowed in strict mode",Wu="ILLEGAL",b6="Disabled.",WCr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),qCr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");YCr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};mEr={if:1}});var dCe=N(()=>{"use strict"});function wO(t,r,n){return t.fields=r||[],t.fname=n,t}function SEr(t){return t.length===1?CEr(t[0]):EEr(t)}function S6(t){throw Error(t)}function TEr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||S6("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&S6("Access path missing closing bracket: "+t),o&&S6("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function AEr(t,r,n){let o=TEr(t);return t=o.length===1?o[0]:t,wO((n&&n.get||SEr)(o),[t],r||t)}var CEr,EEr,_si,Ssi,Csi,Esi,Tsi,Asi,ksi,pCe=N(()=>{"use strict";CEr=t=>function(r){return r[t]},EEr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};_si=AEr("id"),Ssi=wO(t=>t,[],"identity"),Csi=wO(()=>0,[],"zero"),Esi=wO(()=>1,[],"one"),Tsi=wO(()=>!0,[],"true"),Asi=wO(()=>!1,[],"false"),ksi=Array.isArray});var hCe=N(()=>{"use strict";pCe()});var vxt=N(()=>{"use strict";dCe();hCe();pCe()});var wxt=N(()=>{"use strict";rCe();xxt();vxt();hCe();dCe()});function mCe(t){let r=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(r.push(...mCe(t.object)),r.push(...mCe(t.property))),r)}function _xt(t){return t.object.type==="MemberExpression"?_xt(t.object):t.object.name==="datum"}function Ree(t){let r=fCe(t),n=new Set;return r.visit(o=>{o.type==="MemberExpression"&&_xt(o)&&n.add(mCe(o).slice(1).join("."))}),n}var gCe=N(()=>{"use strict";wxt()});var mb,C6=N(()=>{"use strict";bt();mee();ro();gCe();mb=class t extends Dr{constructor(r,n,o){super(r),this.model=n,this.filter=o,this.expr=VA(this.model,this.filter,this),this._dependentFields=Ree(this.expr)}clone(){return new t(null,this.model,sr(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}});function Sxt(t,r){var n;let o={},i=t.config.selection;for(let s of nt(r??{})){let a=sr(r[s]),l=i[a.type],{fields:u,encodings:c}=l,f=Pt(l,["fields","encodings"]);for(let h in f)h==="encodings"&&a.fields||h==="fields"&&a.encodings||(h==="mark"&&(a[h]=Object.assign(Object.assign({},f[h]),a[h])),(a[h]===void 0||a[h]===!0)&&(a[h]=(n=f[h])!==null&&n!==void 0?n:a[h]));let d=kn(s),p=o[d]=Object.assign(Object.assign({},a),{name:d,events:pr(a.on)?Df(a.on,"scope"):sr(a.on)});vO(p,h=>{h.has(p)&&h.parse&&h.parse(t,p,a,r[s])})}return o}function hee(t,r,n,o="datum"){let i=[];function s(l){let u=kn(l),c=t.getSelectionComponent(u,l),f=Jr(u+sg);if(c.project.timeUnit){let d=n??t.component.data.raw,p=c.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}return c.empty!=="none"&&i.push(f),`vlSelectionTest(${f}, ${o}`+(c.resolve==="global"?")":`, ${Jr(c.resolve)})`)}let a=TA(r,s);return(i.length?"!("+i.map(l=>`length(data(${l}))`).join(" || ")+") || ":"")+`(${a})`}function kee(t,r){let n=r.encoding,o=r.field;if(!n&&!o)o=t.project.items[0].field,t.project.items.length>1&&st(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Jr(o)}.`);else if(n&&!o){let i=t.project.items.filter(s=>s.channel===n);!i.length||i.length>1?(o=t.project.items[0].field,st((i.length?"Multiple ":"No ")+`matching ${Jr(n)} encoding found for selection ${Jr(r.selection)}. Using "field": ${Jr(o)}.`)):o=i[0].field}return`${t.name}[${Jr(o)}]`}function Cxt(t,r){pb(t,n=>{let o=n.name,i=t.getName(`lookup_${o}`);t.component.data.outputNodes[i]=n.materialized=new ds(new mb(r,t,{selection:o}),i,"lookup",t.component.data.outputNodeRefCounts)})}var UA=N(()=>{"use strict";So();T2();ir();Wf();cn();bt();ro();C6();KSe()});function VA(t,r,n){return TA(r,o=>pr(o)?o:A0t(o)?hee(t,o.selection,n):EJ(o))}var mee=N(()=>{"use strict";ir();RA();bt();UA()});function DEr(t,r){if(t)return Bt(t)&&!ig(t)?t.map(n=>aSe(n,r)).join(", "):t}function yCe(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function _O(t,r,n,o={header:!1}){var i,s;let a=t.combine(),{disable:l,orient:u,scale:c,labelExpr:f,title:d,zindex:p}=a,h=Pt(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!l){for(let m in h){let g=Tgt[m],y=h[m];if(g&&g!==r&&g!=="both")delete h[m];else if(DF(y)){let{condition:b}=y,x=Pt(y,["condition"]),v=Mn(b),w=N2e[m];if(w){let{vgProp:_,part:S}=w,C=[...v.map(E=>{let{test:T}=E,I=Pt(E,["test"]);return Object.assign({test:VA(null,T)},I)}),x];yCe(h,S,_,C),delete h[m]}else if(w===null){let _={signal:v.map(S=>{let{test:C}=S,E=Pt(S,["test"]);return`${VA(null,C)} ? ${uSe(E)} : `}).join("")+uSe(x)};h[m]=_}}else if(rr(y)){let b=N2e[m];if(b){let{vgProp:x,part:v}=b;yCe(h,v,x,y),delete h[m]}}}if(r==="grid"){if(!h.grid)return;if(h.encode){let{grid:m}=h.encode;h.encode=Object.assign({},m?{grid:m}:{}),bn(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:c,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Fn(p,0)})}else{if(!o.header&&t.mainExtracted)return;if(f!==void 0){let g=f;!((s=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&rr(h.encode.labels.update.text)&&(g=Ky(f,"datum.label",h.encode.labels.update.text.signal)),yCe(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(let g of lJ)t.hasAxisPart(g)||delete h.encode[g];bn(h.encode)&&delete h.encode}let m=DEr(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:u,grid:!1},m?{title:m}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:Fn(p,0)})}}}function Pee(t){let{axes:r}=t.component,n=[];for(let o of Ts)if(r[o]){for(let i of r[o])if(!i.get("disable")&&!i.get("gridScale")){let s=o==="x"?"height":"width",a=t.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function Ext(t,r){let{x:n=[],y:o=[]}=t;return[...n.map(i=>_O(i,"grid",r)),...o.map(i=>_O(i,"grid",r)),...n.map(i=>_O(i,"main",r)),...o.map(i=>_O(i,"main",r))].filter(i=>i)}var E6=N(()=>{"use strict";So();ir();L$();Ir();Mr();K$();bt();ho();Po();mee()});var bCe,xCe,Txt,Axt,kxt=N(()=>{"use strict";bt();bCe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},xCe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Txt=nt(bCe),Axt=nt(xCe)});function Ixt(t,r,n,o){return Object.assign.apply(null,[{},...t.map(i=>{if(i==="axisOrient"){let s=n==="x"?"bottom":"left",a=r[n==="x"?"axisBottom":"axisLeft"]||{},l=r[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...nt(a),...nt(l)]),c={};for(let f of u.values())c[f]={signal:`${o.signal} === "${s}" ? ${L2(a[f])} : ${L2(l[f])}`};return c}return r[i]})])}function Dxt(t,r,n,o){let i=r==="band"?["axisDiscrete","axisBand"]:r==="point"?["axisDiscrete","axisPoint"]:L0t(r)?["axisQuantitative"]:r==="time"||r==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",a=rr(n)?"axisOrient":"axis"+AA(n),l=[...i,...i.map(c=>s+c.substr(4))],u=["axis",a,s];return{vlOnlyAxisConfig:Ixt(l,o,t,n),vgAxisConfig:Ixt(u,o,t,n),axisConfigStyle:NEr([...u,...l],o)}}function NEr(t,r){var n;let o=[{}];for(let i of t){let s=(n=r[i])===null||n===void 0?void 0:n.style;if(s){s=Mn(s);for(let a of s)o.push(r.style[a])}}return Object.assign.apply(null,o)}function T6(t,r,n,o={}){var i;let s=fSe(t,n,r.style);if(s!==void 0)return{configFrom:"style",configValue:s};for(let a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=o[a])===null||i===void 0?void 0:i[t])!==void 0)return{configFrom:a,configValue:o[a][t]};return{}}var vCe=N(()=>{"use strict";ir();Ci();bt();ho();Po()});function MEr(t,r){return!es(t)&&At(r)&&!Sn(r?.bin)}function FEr(t,r){let n=r==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function Nxt(t,r,n,o,i){let s=r?.labelAngle;if(s!==void 0)return rr(s)?s:kA(s);{let{configValue:a}=T6("labelAngle",t.config,r?.style,i);return a!==void 0?kA(a):n===to&&qt([q$,W$],o.type)?270:void 0}}function wCe(t){return`(((${t.signal} % 360) + 360) % 360)`}function SCe(t,r,n,o){if(t!==void 0)if(n==="x"){if(rr(t)){let i=wCe(t),s=rr(r)?`(${r.signal} === "top")`:r==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(rr(r)){let i=t<=45||315<=t?"===":"!==";return{signal:`${r.signal} ${i} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(r==="top")?"bottom":"top"}else{if(rr(t)){let i=wCe(t),s=rr(r)?`(${r.signal} === "left")`:r==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${o?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return o?"middle":null;if(rr(r)){let i=45<=t&&t<=135?"===":"!==";return{signal:`${r.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(r==="left")?"top":"bottom"}}function CCe(t,r,n){if(t===void 0)return;let o=n==="x",i=o?0:90,s=o?"bottom":"left";if(rr(t)){let a=wCe(t),l=rr(r)?`(${r.signal} === "${s}")`:r===s;return{signal:`(${i?"("+a+" + 90)":a} % 180 === 0) ? ${o?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${l} ? "left" : "right"`}}if((t+i)%180===0)return o?null:"center";if(rr(r)){let a=i<t&&t<180+i?"===":"!==";return{signal:`${`${r.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<t&&t<180+i)==(r===s)?"left":"right"}function OEr(t,r){if(r==="x"&&qt(["quantitative","temporal"],t))return!0}function REr(t,r){if(t!=="nominal")return r==="log"?"greedy":!0}function Mxt(t){return t==="x"?"bottom":"left"}function PEr({fieldOrDatumDef:t,scaleType:r,size:n,values:o}){var i;if(!o&&!es(r)&&r!=="log"){if(At(t)){if(Sn(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&qt(["month","hours","day","quarter"],(i=fs(t.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ECe(t,r){let n=r==="x"?"x2":"y2",o=t.fieldDef(r),i=t.fieldDef(n),s=o?o.title:void 0,a=i?i.title:void 0;if(s&&a)return pSe(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function LEr(t,r){let n=t.values;if(Bt(n))return BJ(r,n);if(rr(n))return n}function jEr(t,r){return t==="rect"&&iSe(r)?1:0}var _Ce,TCe=N(()=>{"use strict";ir();Kl();Ir();Mr();Ci();eb();tp();bt();ho();Po();ab();vCe();_Ce={scale:({model:t,channel:r})=>t.scaleName(r),format:({fieldOrDatumDef:t,config:r,axis:n})=>{let{format:o,formatType:i}=n;return IJ(t,t.type,o,i,r,!0)},formatType:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return DJ(o,r,n)},grid:({fieldOrDatumDef:t,axis:r,scaleType:n})=>{var o;return At(t)&&Ji(t.bin)?!1:(o=r.grid)!==null&&o!==void 0?o:MEr(n,t)},gridScale:({model:t,channel:r})=>FEr(t,r),labelAlign:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelAlign||CCe(r,n,o),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelBaseline||SCe(r,n,o),labelFlush:({axis:t,fieldOrDatumDef:r,channel:n})=>{var o;return(o=t.labelFlush)!==null&&o!==void 0?o:OEr(r.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{var o;return(o=t.labelOverlap)!==null&&o!==void 0?o:REr(r.type,n)},orient:({orient:t})=>t,tickCount:({channel:t,model:r,axis:n,fieldOrDatumDef:o,scaleType:i})=>{var s;let a=t==="x"?"width":t==="y"?"height":void 0,l=a?r.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:PEr({fieldOrDatumDef:o,scaleType:i,size:l,values:n.values})},title:({axis:t,model:r,channel:n})=>{if(t.title!==void 0)return t.title;let o=ECe(r,n);if(o!==void 0)return o;let i=r.typedFieldDef(n),s=n==="x"?"x2":"y2",a=r.fieldDef(s);return dSe(i?[nSe(i)]:[],At(a)?[nSe(a)]:[])},values:({axis:t,fieldOrDatumDef:r})=>LEr(t,r),zindex:({axis:t,fieldOrDatumDef:r,mark:n})=>{var o;return(o=t.zindex)!==null&&o!==void 0?o:jEr(n,r)}}});function gb(t,r,n){return vt(t,Object.assign({prefix:r,suffix:"sort_index"},n??{}))}var XA,KA=N(()=>{"use strict";Mr();RA();og();bt();ro();gCe();XA=class t extends Dr{constructor(r,n){super(r),this.transform=n,this._dependentFields=Ree(this.transform.calculate)}clone(){return new t(null,sr(this.transform))}static parseAllForSortIndex(r,n){return n.forEachFieldDef((o,i)=>{if(KF(o)&&MJ(o.sort)){let{field:s,timeUnit:a}=o,l=o.sort,u=l.map((c,f)=>`${EJ({field:s,timeUnit:a,equal:c})} ? ${f} : `).join("")+l.length;r=new t(r,{calculate:u,as:gb(o,i,{forAs:!0})})}}),r}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Tr(this.transform)}`}}});function SO(t,r){return qt(["top","bottom"],r)?"column":qt(["left","right"],r)||t==="row"?"row":"column"}function s1(t,r,n,o){let i=o==="row"?n.headerRow:o==="column"?n.headerColumn:n.headerFacet;return Fn((r?.header||{})[t],i[t],n.header[t])}function A6(t,r,n,o){let i={};for(let s of t){let a=s1(s,r,n,o);a!==void 0&&(i[s]=a)}return i}var Lee=N(()=>{"use strict";bt()});var CO,EO,k6=N(()=>{"use strict";CO=["row","column"],EO=["header","footer"]});function Fxt(t,r){let n=t.component.layoutHeaders[r].title,o=t.config?t.config:void 0,i=t.component.layoutHeaders[r].facetFieldDef?t.component.layoutHeaders[r].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:l}=A6(["titleAnchor","titleAngle","titleOrient"],i,o,r),u=SO(r,l),c=kA(a);return{name:`${r}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},r==="row"?{orient:"left"}:{}),{style:"guide-title"}),Rxt(c,u)),Oxt(u,c,s)),jxt(o,i,r,Txt,bCe))}}function Oxt(t,r,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let o=CCe(r,t==="row"?"left":"top",t==="row"?"y":"x");return o?{align:o}:{}}function Rxt(t,r){let n=SCe(t,r==="row"?"left":"top",r==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Pxt(t,r){let n=t.component.layoutHeaders[r],o=[];for(let i of EO)if(n[i])for(let s of n[i]){let a=$Er(t,r,i,n,s);a!=null&&o.push(a)}return o}function BEr(t,r){var n;let{sort:o}=t;return xl(o)?{field:vt(o,{expr:"datum"}),order:(n=o.order)!==null&&n!==void 0?n:"ascending"}:Bt(o)?{field:gb(t,r,{expr:"datum"}),order:"ascending"}:{field:vt(t,{expr:"datum"}),order:o??"ascending"}}function jee(t,r,n){let{format:o,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:l,labelExpr:u}=A6(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,r),c=YF({fieldOrDatumDef:t,format:o,formatType:i,expr:"parent",config:n}).signal,f=SO(r,l);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?Ky(Ky(u,"datum.label",c),"datum.value",vt(t,{expr:"parent"})):c}},r==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Rxt(s,f)),Oxt(f,s,a)),jxt(n,t,r,Axt,xCe))}function $Er(t,r,n,o,i){if(i){let s=null,{facetFieldDef:a}=o,l=t.config?t.config:void 0;if(a&&i.labels){let{labelOrient:d}=A6(["labelOrient"],a,l,r);(r==="row"&&!qt(["top","bottom"],d)||r==="column"&&!qt(["left","right"],d))&&(s=jee(a,r,l))}let u=wl(t)&&!lb(t.facet),c=i.axes,f=c?.length>0;if(s||f){let d=r==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${r}_${n}`),type:"group",role:`${r}-${n}`},o.facetFieldDef?{from:{data:t.getName(r+"_domain")},sort:BEr(a,r)}:{}),f&&u?{from:{data:t.getName(`facet_domain_${r}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{}),f?{axes:c}:{})}}return null}function UEr(t,r){return zEr[r][t]}function Lxt(t,r){let n={};for(let o of gl){let i=t[o];if(i?.facetFieldDef){let{titleAnchor:s,titleOrient:a}=A6(["titleAnchor","titleOrient"],i.facetFieldDef,r,o),l=SO(o,a),u=UEr(s,l);u!==void 0&&(n[l]=u)}}return bn(n)?void 0:n}function jxt(t,r,n,o,i){let s={};for(let a of o){if(!i[a])continue;let l=s1(a,r,t,n);l!==void 0&&(s[i[a]]=l)}return s}var zEr,ACe=N(()=>{"use strict";ir();Ir();Mr();kxt();og();Jv();bt();TCe();KA();ab();ps();Lee();k6();zEr={column:{start:0,end:1},row:{start:1,end:0}}});function TO(t){return[...Bee(t,"width"),...Bee(t,"height"),...Bee(t,"childWidth"),...Bee(t,"childHeight")]}function Bee(t,r){let n=r==="width"?"x":"y",o=t.component.layoutSize.get(r);if(!o||o==="merged")return[];let i=t.getSizeSignalRef(r).signal;if(o==="step"){let s=t.getScaleComponent(n);if(s){let a=s.get("type"),l=s.get("range");if(es(a)&&zu(l)){let u=t.scaleName(n);return wl(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[Bxt(u,l)]:[Bxt(u,l),{name:i,update:kCe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(o=="container"){let s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",l=o6(t.config.view,s?"width":"height"),u=`isFinite(${a}) ? ${a} : ${l}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:o}]}function Bxt(t,r){return{name:t+"_step",value:r.step}}function kCe(t,r,n){let o=r.get("type"),i=r.get("padding"),s=Fn(r.get("paddingOuter"),i),a=r.get("paddingInner");return a=o==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${a}, ${s}) * ${t}_step`}var I6=N(()=>{"use strict";B2();Ci();bt();ho();ps()});function $ee(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}var ICe=N(()=>{"use strict"});function zee(t,r){return nt(t).reduce((n,o)=>{let i=t[o];return Object.assign(Object.assign({},n),sh(r,i,o,s=>rr(s)?s:{value:s.value}))},{})}var DCe=N(()=>{"use strict";bt();ho();zc()});function $xt(t,r){if(ch(r)||wl(r))return"shared";if(kO(r))return bl(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function AO(t,r){let n=t.scale[r],o=bl(r)?"axis":"legend";return n==="independent"?(t[o][r]==="shared"&&st(it.independentScaleMeansIndependentGuide(r)),"independent"):t[o][r]||"shared"}var D6=N(()=>{"use strict";Ir();cn();ps()});var VEr,NCe,Uee,zxt=N(()=>{"use strict";t6();bt();$c();VEr=Object.assign(Object.assign({},SSe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),NCe=nt(VEr),Uee=class extends Vu{}});function GEr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i,legendType:s}){var a,l,u,c,f;if(s!=="symbol")return;let{markDef:d,encoding:p,config:h,mark:m}=n,g=d.filled&&m!=="trail",y=Object.assign(Object.assign({},nyt({},n,Ngt)),gO(n,{filled:g})),b=(a=Uxt(p.opacity))!==null&&a!==void 0?a:d.opacity;if(y.fill){if(o==="fill"||g&&o===Es)delete y.fill;else if(y.fill.field)i.get("symbolFillColor")?delete y.fill:(y.fill=mo((l=h.legend.symbolBaseFillColor)!==null&&l!==void 0?l:"black"),y.fillOpacity=mo(b??1));else if(Bt(y.fill)){let x=(f=(c=Vee((u=p.fill)!==null&&u!==void 0?u:p.color))!==null&&c!==void 0?c:d.fill)!==null&&f!==void 0?f:g&&d.color;x&&(y.fill=mo(x))}}if(y.stroke){if(o==="stroke"||!g&&o===Es)delete y.stroke;else if(y.stroke.field)delete y.stroke;else if(Bt(y.stroke)){let x=Fn(Vee(p.stroke||p.color),d.stroke,g?d.color:void 0);x&&(y.stroke={value:x})}}if(o!==jc){let x=At(r)&&Gxt(n,i,r);x?y.opacity=[Object.assign({test:x},mo(b??1)),mo(h.legend.unselectedOpacity)]:b&&(y.opacity=mo(b))}return y=Object.assign(Object.assign({},y),t),bn(y)?void 0:y}function WEr(t,{model:r,legendType:n}){if(n!=="gradient")return;let o={},i=Uxt(r.encoding.opacity)||r.markDef.opacity;return i&&(o.opacity=mo(i)),o=Object.assign(Object.assign({},o),t),bn(o)?void 0:o}function qEr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i}){let s=n.legend(o)||{},a=n.config,l=At(r)?Gxt(n,i,r):void 0,u=l?[{test:l,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:f}=s,d=sb(f)?Y$({fieldOrDatumDef:r,field:"datum.value",format:c,formatType:f,config:a}):void 0,p=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),d?{text:d}:{}),t);return bn(p)?void 0:p}function HEr(t,{legendCmpt:r}){let n=r.get("selections");return n?.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function Uxt(t){return Vxt(t,(r,n)=>Math.max(r,n.value))}function Vee(t){return Vxt(t,(r,n)=>Fn(r,n.value))}function Vxt(t,r){if(K0t(t))return Mn(t.condition).reduce(r,t.value);if(Uu(t))return t.value}function Gxt(t,r,n){let o=r.get("selections");if(!o?.length)return;let i=Jr(n.field);return o.map(s=>`(!length(data(${Jr(kn(s)+sg)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}var MCe,FCe=N(()=>{"use strict";ir();Ir();Mr();ba();bt();Po();ab();zc();Wf();MCe={symbols:GEr,gradient:WEr,labels:qEr,entries:HEr}});function YEr(t,r){let n=t.values;if(Bt(n))return BJ(r,n);if(rr(n))return n}function XEr(t,r,n,o){var i;if(r!=="shape"){let s=(i=Vee(n))!==null&&i!==void 0?i:o;if(s)return s}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function qxt(t){let{legend:r}=t;return Fn(r.type,KEr(t))}function KEr({channel:t,timeUnit:r,scaleType:n}){if(Kv(t)){if(qt(["quarter","month","day"],r))return"symbol";if(Bf(n))return"gradient"}return"symbol"}function Hxt({legendConfig:t,legendType:r,orient:n,legend:o}){var i,s;return(s=(i=o.direction)!==null&&i!==void 0?i:t[r?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:ZEr(n,r)}function ZEr(t,r){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return r==="gradient"?"horizontal":void 0}}function QEr({legendConfig:t,model:r,direction:n,orient:o,scaleType:i}){let{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:l,gradientVerticalMinLength:u}=t;if(Bf(i))return n==="horizontal"?o==="top"||o==="bottom"?Wxt(r,"width",a,s):a:Wxt(r,"height",u,l)}function Wxt(t,r,n,o){return{signal:`clamp(${t.getSizeSignalRef(r).signal}, ${n}, ${o})`}}function JEr(t){if(qt(["quantile","threshold","log"],t))return"greedy"}var OCe,Yxt=N(()=>{"use strict";ir();Ir();Mr();Ci();bt();ho();ab();FCe();OCe={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:r,config:n})=>{let{format:o,formatType:i}=r;return IJ(t,t.type,o,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return DJ(o,r,n)},gradientLength:t=>{var r,n;let{legend:o,legendConfig:i}=t;return(n=(r=o.gradientLength)!==null&&r!==void 0?r:i.gradientLength)!==null&&n!==void 0?n:QEr(t)},labelOverlap:({legend:t,legendConfig:r,scaleType:n})=>{var o,i;return(i=(o=t.labelOverlap)!==null&&o!==void 0?o:r.labelOverlap)!==null&&i!==void 0?i:JEr(n)},symbolType:({legend:t,markDef:r,channel:n,encoding:o})=>{var i;return(i=t.symbolType)!==null&&i!==void 0?i:XEr(r.type,n,o.shape,r.shape)},title:({fieldOrDatumDef:t,config:r})=>ih(t,r,{allowDisabling:!0}),type:({legendType:t,scaleType:r,channel:n})=>{if(Kv(n)&&Bf(r)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:r})=>YEr(r,t)}});function RCe(t){let r=no(t)?eTr(t):oTr(t);return t.component.legends=r,r}function eTr(t){let{encoding:r}=t,n={};for(let o of[Es,...QJ]){let i=Io(r[o]);!i||!t.getScaleComponent(o)||o===cs&&At(i)&&i.type===ng||(n[o]=nTr(t,o))}return n}function tTr(t,r){let n=t.scaleName(r);if(t.mark==="trail"){if(r==="color")return{stroke:n};if(r==="size")return{strokeWidth:n}}return r==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[r]:n}}function rTr(t,r,n,o){switch(r){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(r==="title"&&t===o?.title)return!0}return t===(n||{})[r]}function nTr(t,r){var n,o,i;let s=t.legend(r),{markDef:a,encoding:l,config:u}=t,c=u.legend,f=new Uee({},tTr(t,r));Ebt(t,r,f);let d=s!==void 0?!s:c.disable;if(f.set("disable",d,s!==void 0),d)return f;s=s||{};let p=t.getScaleComponent(r).get("type"),h=Io(l[r]),m=At(h)?(n=fs(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=s.orient||u.legend.orient||"right",y=qxt({legend:s,channel:r,timeUnit:m,scaleType:p}),b=Hxt({legend:s,legendType:y,orient:g,legendConfig:c}),x={legend:s,channel:r,model:t,markDef:a,encoding:l,fieldOrDatumDef:h,legendConfig:c,config:u,scaleType:p,orient:g,legendType:y,direction:b};for(let C of NCe){let E=C in OCe?OCe[C](x):s[C];if(E!==void 0){let T=rTr(E,C,s,t.fieldDef(r));(T||u.legend[C]===void 0)&&f.set(C,E,T)}}let v=(o=s?.encoding)!==null&&o!==void 0?o:{},w=f.get("selections"),_={},S={fieldOrDatumDef:h,model:t,channel:r,legendCmpt:f,legendType:y};for(let C of["labels","legend","title","symbols","gradient","entries"]){let E=zee((i=v[C])!==null&&i!==void 0?i:{},t),T=C in MCe?MCe[C](E,S):E;T!==void 0&&!bn(T)&&(_[C]=Object.assign(Object.assign(Object.assign({},w?.length&&At(h)?{name:`${kn(h.field)}_legend_${C}`}:{}),w?.length?{interactive:!!w}:{}),{update:T}))}return bn(_)||f.set("encode",_,!!s?.encoding),f}function oTr(t){let{legends:r,resolve:n}=t.component;for(let o of t.children){RCe(o);for(let i of nt(o.component.legends))n.legend[i]=AO(t.component.resolve,i),n.legend[i]==="shared"&&(r[i]=PCe(r[i],o.component.legends[i]),r[i]||(n.legend[i]="independent",delete r[i]))}for(let o of nt(r))for(let i of t.children)i.component.legends[o]&&n.legend[o]==="shared"&&delete i.component.legends[o];return r}function PCe(t,r){var n,o,i,s;if(!t)return r.clone();let a=t.getWithExplicit("orient"),l=r.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;let u=!1;for(let c of NCe){let f=Vf(t.getWithExplicit(c),r.getWithExplicit(c),c,"legend",(d,p)=>{switch(c){case"symbolType":return iTr(d,p);case"title":return UJ(d,p);case"type":return u=!0,Gu("symbol")}return uO(d,p,c,"legend")});t.setWithExplicit(c,f)}return u&&(!((o=(n=t.implicit)===null||n===void 0?void 0:n.encode)===null||o===void 0)&&o.gradient&&nJ(t.implicit,["encode","gradient"]),!((s=(i=t.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&nJ(t.explicit,["encode","gradient"])),t}function iTr(t,r){return r.value==="circle"?r:t}var LCe=N(()=>{"use strict";Ir();Mr();t6();eb();tp();bt();Po();DCe();ps();D6();XSe();$c();zxt();FCe();Yxt()});function Xxt(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function Gee(t){let r=t.component.legends,n={};for(let i of nt(r)){let s=t.getScaleComponent(i),a=mi(s.get("domains"));if(n[a])for(let l of n[a])PCe(l,r[i])||n[a].push(r[i]);else n[a]=[r[i].clone()]}return th(n).flat().map(i=>sTr(i,t.config)).filter(i=>i!==void 0)}function sTr(t,r){var n,o,i;let s=t.combine(),{disable:a,labelExpr:l,selections:u}=s,c=Pt(s,["disable","labelExpr","selections"]);if(!a){if(r.aria===!1&&c.aria==null&&(c.aria=!1),!((n=c.encode)===null||n===void 0)&&n.symbols){let f=c.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!c.stroke&&(f.stroke={value:"transparent"});for(let d of QJ)c[d]&&delete f[d]}if(c.title||delete c.title,l!==void 0){let f=l;!((i=(o=c.encode)===null||o===void 0?void 0:o.labels)===null||i===void 0)&&i.update&&rr(c.encode.labels.update.text)&&(f=Ky(l,"datum.label",c.encode.labels.update.text.signal)),Xxt(c,"labels","text",{signal:f})}for(let f in c){let d=c[f];if(rr(d)){let p=wyt[f];if(p){let{vgProp:h,part:m}=p;Xxt(c,m,h,d),delete c[f]}}}return c}}var jCe=N(()=>{"use strict";So();t6();bt();ho();LCe()});function Kxt(t){return ch(t)||kO(t)?aTr(t):Zxt(t)}function aTr(t){return t.children.reduce((r,n)=>r.concat(n.assembleProjections()),Zxt(t))}function Zxt(t){let r=t.component.projection;if(!r||r.merged)return[];let n=r.combine(),{name:o}=n;if(r.data){let i={signal:`[${r.size.map(a=>a.signal).join(", ")}]`},s=r.data.reduce((a,l)=>{let u=rr(l)?l.signal:`data('${t.lookupDataSource(l)}')`;return qt(a,u)||a.push(u),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:o,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:o},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var Qxt=N(()=>{"use strict";bt();ho();ps()});var Jxt,evt=N(()=>{"use strict";Jxt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"]});var N6,tvt=N(()=>{"use strict";$c();N6=class extends Vu{constructor(r,n,o,i){super(Object.assign({},n),{name:r}),this.specifiedProjection=n,this.size=o,this.data=i,this.merged=!1}get isFit(){return!!this.data}}});function BCe(t){t.component.projection=no(t)?lTr(t):fTr(t)}function lTr(t){var r;if(t.hasProjection){let n=t.specifiedProjection,o=!(n&&(n.scale!=null||n.translate!=null)),i=o?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=o?uTr(t):void 0;return new N6(t.projectionName(!0),Object.assign(Object.assign({},(r=t.config.projection)!==null&&r!==void 0?r:{}),n??{}),i,s)}}function uTr(t){let r=[],{encoding:n}=t;for(let o of[[Lc,Pc],[Yl,Lu]])(Io(n[o[0]])||Io(n[o[1]]))&&r.push({signal:t.getName(`geojson_${r.length}`)});return t.channelHasField(cs)&&t.typedFieldDef(cs).type===ng&&r.push({signal:t.getName(`geojson_${r.length}`)}),r.length===0&&r.push(t.requestDataName(zs)),r}function cTr(t,r){let n=A2e(Jxt,i=>!!(!Hd(t.explicit,i)&&!Hd(r.explicit,i)||Hd(t.explicit,i)&&Hd(r.explicit,i)&&mi(t.get(i))===mi(r.get(i))));if(mi(t.size)===mi(r.size)){if(n)return t;if(mi(t.explicit)===mi({}))return r;if(mi(r.explicit)===mi({}))return t}return null}function fTr(t){if(t.children.length===0)return;let r;for(let o of t.children)BCe(o);let n=A2e(t.children,o=>{let i=o.component.projection;if(i)if(r){let s=cTr(r,i);return s&&(r=s),!!s}else return r=i,!0;else return!0});if(r&&n){let o=t.projectionName(!0),i=new N6(o,r.specifiedProjection,r.size,sr(r.data));for(let s of t.children){let a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),o),a.merged=!0)}return i}}var rvt=N(()=>{"use strict";ir();Ir();Mr();db();evt();tp();bt();ps();tvt()});function dTr(t,r,n,o){var i,s;if(ob(r,n)){let a=no(t)?(s=(i=t.axis(n))!==null&&i!==void 0?i:t.legend(n))!==null&&s!==void 0?s:{}:{},l=vt(r,{expr:"datum"}),u=vt(r,{expr:"datum",binSuffix:"end"});return{formulaAs:vt(r,{binSuffix:"range",forAs:!0}),formula:XF(l,u,a.format,a.formatType,o)}}return{}}function ovt(t,r){return`${xJ(t)}_${r}`}function pTr(t,r){return{signal:t.getName(`${r}_bins`),extentSignal:t.getName(`${r}_extent`)}}function IO(t,r,n){var o;let i=(o=zF(n,void 0))!==null&&o!==void 0?o:{},s=ovt(i,r);return t.getName(`${s}_bins`)}function hTr(t){return"as"in t}function nvt(t,r,n){let o,i;hTr(t)?o=pr(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:o=[vt(t,{forAs:!0}),vt(t,{binSuffix:"end",forAs:!0})];let s=Object.assign({},zF(r,void 0)),a=ovt(s,t.field),{signal:l,extentSignal:u}=pTr(n,a);if($F(s.extent)){let f=s.extent,d=f.selection;i=kee(n.getSelectionComponent(kn(d),d),f),delete s.extent}let c=Object.assign(Object.assign(Object.assign({bin:s,field:t.field,as:[o]},l?{signal:l}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:a,binComponent:c}}var ag,ZA=N(()=>{"use strict";So();ir();Kl();Mr();bt();ab();ps();UA();ro();ag=class t extends Dr{constructor(r,n){super(r),this.bins=n}clone(){return new t(null,sr(this.bins))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{if(va(s)&&Sn(s.bin)){let{key:l,binComponent:u}=nvt(s,s.bin,n);i[l]=Object.assign(Object.assign(Object.assign({},u),i[l]),dTr(n,s,a,n.config))}return i},{});return bn(o)?null:new t(r,o)}static makeFromTransform(r,n,o){let{key:i,binComponent:s}=nvt(n,n.bin,o);return new t(r,{[i]:s})}merge(r,n){for(let o of nt(r.bins))o in this.bins?(n(r.bins[o].signal,this.bins[o].signal),this.bins[o].as=Yd([...this.bins[o].as,...r.bins[o].as],Tr)):this.bins[o]=r.bins[o];for(let o of r.children)r.removeChild(o),o.parent=this;r.remove()}producedFields(){return new Set(th(this.bins).map(r=>r.as).flat(2))}dependentFields(){return new Set(th(this.bins).map(r=>r.field))}hash(){return`Bin ${Tr(this.bins)}`}assemble(){return th(this.bins).flatMap(r=>{let n=[],[o,...i]=r.as,s=r.bin,{extent:a}=s,l=Pt(s,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:Mf(r.field),as:o,signal:r.signal},$F(a)?{extent:null}:{extent:a}),r.span?{span:{signal:`span(${r.span})`}}:{}),l);!a&&r.extentSignal&&(n.push({type:"extent",field:Mf(r.field),signal:r.extentSignal}),u.extent={signal:r.extentSignal}),n.push(u);for(let c of i)for(let f=0;f<2;f++)n.push({type:"formula",expr:vt({field:o[f]},{expr:"datum"}),as:c[f]});return r.formula&&n.push({type:"formula",expr:r.formula,as:r.formulaAs}),n})}}});var rp,DO=N(()=>{"use strict";db();bt();ro();rp=class extends Dr{constructor(r){super(null),r=r??{name:"source"};let n;if(fb(r)||(n=r.format?Object.assign({},Nf(r.format,["parse"])):{}),cO(r))this._data={values:r.values};else if($2(r)){if(this._data={url:r.url},!n.type){let o=/(?:\.([^.]+))?$/.exec(r.url)[1];qt(["json","csv","tsv","dsv","topojson"],o)||(o="json"),n.type=o}}else PSe(r)?this._data={values:[{type:"Sphere"}]}:(pee(r)||fb(r))&&(this._data={});this._generator=fb(r),r.name&&(this._name=r.name),n&&!bn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(r){this._name=r}set parent(r){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}});function Wee(t){for(let r of t){for(let n of r.children)if(n.parent!==r)return console.error("Dataflow graph is inconsistent.",r,n),!1;if(!Wee(r.children))return!1}return!0}var ivt=N(()=>{"use strict";bt();ro();DO()});var q2,qee=N(()=>{"use strict";bt();ro();q2=class t extends Dr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Tr(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}});var H2,Hee=N(()=>{"use strict";bt();ro();H2=class t extends Dr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){var r;return new Set([(r=this.params.as)!==null&&r!==void 0?r:"data"])}hash(){return`Hash ${Tr(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}});function M6(t){return t instanceof rp||t instanceof q2||t instanceof H2}var Yee,np,NO,$Ce=N(()=>{"use strict";DO();qee();Hee();Yee=class{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}},np=class extends Yee{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:r,mutatedFlag:n}){r&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(r){if(M6(r))return!1;let n=r.parent,{continueFlag:o}=this.run(r);return o&&this.optimizeNextFromLeaves(n),this.mutatedFlag}},NO=class extends Yee{}});function mTr(t,r,n,o){let i=no(o)?o.encoding[yl(r)]:void 0;if(va(n)&&no(o)&&QF(r,n,i,o.stack,o.markDef,o.config))t.add(vt(n,{})),t.add(vt(n,{suffix:"end"})),n.bin&&ob(n,r)&&t.add(vt(n,{binSuffix:"range"}));else if(Hgt(r)){let s=qgt(r);t.add(o.getName(s))}else t.add(vt(n));return t}function gTr(t,r){var n;for(let o of nt(r)){let i=r[o];for(let s of nt(i))o in t?t[o][s]=new Set([...(n=t[o][s])!==null&&n!==void 0?n:[],...i[s]]):t[o]={[s]:i[s]}}}var fh,Xee=N(()=>{"use strict";Yv();Ir();Mr();cn();bt();ps();ro();fh=class t extends Dr{constructor(r,n,o){super(r),this.dimensions=n,this.measures=o}clone(){return new t(null,new Set(this.dimensions),sr(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(r,n){let o=!1;n.forEachFieldDef(a=>{a.aggregate&&(o=!0)});let i={},s=new Set;return!o||(n.forEachFieldDef((a,l)=>{var u,c,f,d;let{aggregate:p,field:h}=a;if(p)if(p==="count")i["*"]=(u=i["*"])!==null&&u!==void 0?u:{},i["*"].count=new Set([vt(a,{forAs:!0})]);else{if(rh(p)||Jm(p)){let m=rh(p)?"argmin":"argmax",g=p[m];i[g]=(c=i[g])!==null&&c!==void 0?c:{},i[g][m]=new Set([vt({op:m,field:g},{forAs:!0})])}else i[h]=(f=i[h])!==null&&f!==void 0?f:{},i[h][p]=new Set([vt(a,{forAs:!0})]);$u(l)&&n.scaleDomain(l)==="unaggregated"&&(i[h]=(d=i[h])!==null&&d!==void 0?d:{},i[h].min=new Set([vt({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([vt({field:h,aggregate:"max"},{forAs:!0})]))}else mTr(s,l,a,n)}),s.size+nt(i).length===0)?null:new t(r,s,i)}static makeFromTransform(r,n){var o,i,s;let a=new Set,l={};for(let u of n.aggregate){let{op:c,field:f,as:d}=u;c&&(c==="count"?(l["*"]=(o=l["*"])!==null&&o!==void 0?o:{},l["*"].count=new Set([d||vt(u,{forAs:!0})])):(l[f]=(i=l[f])!==null&&i!==void 0?i:{},l[f][c]=new Set([d||vt(u,{forAs:!0})])))}for(let u of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(u);return a.size+nt(l).length===0?null:new t(r,a,l)}merge(r){return Sgt(this.dimensions,r.dimensions)?(gTr(this.measures,r.measures),!0):(d0t("different dimensions, cannot merge"),!1)}addDimensions(r){r.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...nt(this.measures)])}producedFields(){let r=new Set;for(let n of nt(this.measures))for(let o of nt(this.measures[n])){let i=this.measures[n][o];i.size===0?r.add(`${o}_${n}`):i.forEach(r.add,r)}return r}hash(){return`Aggregate ${Tr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let r=[],n=[],o=[];for(let s of nt(this.measures))for(let a of nt(this.measures[s]))for(let l of this.measures[s][a])o.push(l),r.push(a),n.push(s==="*"?null:Mf(s));return{type:"aggregate",groupby:[...this.dimensions].map(Mf),ops:r,fields:n,as:o}}}});var lg,Kee=N(()=>{"use strict";ir();Kl();Ir();Mr();cn();Ci();og();bt();ho();k6();FO();KA();ro();lg=class extends Dr{constructor(r,n,o,i){super(r),this.model=n,this.name=o,this.data=i;for(let s of gl){let a=n.facet[s];if(a){let{bin:l,sort:u}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[vt(a),...Sn(l)?[vt(a,{binSuffix:"end"})]:[]]},xl(u)?{sortField:u}:Bt(u)?{sortIndexField:gb(a,s)}:{})}}this.childModel=n.child}hash(){let r="Facet";for(let n of gl)this[n]&&(r+=` ${n.charAt(0)}:${Tr(this[n])}`);return r}get fields(){var r;let n=[];for(let o of gl)!((r=this[o])===null||r===void 0)&&r.fields&&n.push(...this[o].fields);return n}dependentFields(){let r=new Set(this.fields);for(let n of gl)this[n]&&(this[n].sortField&&r.add(this[n].sortField.field),this[n].sortIndexField&&r.add(this[n].sortIndexField));return r}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let r={};for(let n of Ts){let o=this.childModel.component.scales[n];if(o&&!o.merged){let i=o.get("type"),s=o.get("range");if(es(i)&&zu(s)){let a=Y2(this.childModel,n),l=MO(a);l?r[n]=l:st(`Unknown field for ${n}. Cannot calculate view size.`)}}}return r}assembleRowColumnHeaderData(r,n,o){let i={row:"y",column:"x"}[r],s=[],a=[],l=[];o&&o[i]&&(n?(s.push(`distinct_${o[i]}`),a.push("max")):(s.push(o[i]),a.push("distinct")),l.push(`distinct_${o[i]}`));let{sortField:u,sortIndexField:c}=this[r];if(u){let{op:f=P2,field:d}=u;s.push(d),a.push(f),l.push(vt(u,{forAs:!0}))}else c&&(s.push(c),a.push("max"),l.push(c));return{name:this[r].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[r].fields},s.length?{fields:s,ops:a,as:l}:{})]}}assembleFacetHeaderData(r){var n,o;let{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],l={};for(let f of CO){for(let d of EO){let p=(n=s[f]&&s[f][d])!==null&&n!==void 0?n:[];for(let h of p)if(((o=h.axes)===null||o===void 0?void 0:o.length)>0){l[f]=!0;break}}if(l[f]){let d=`length(data("${this.facet.name}"))`,p=f==="row"?i?{signal:`ceil(${d} / ${i})`}:1:i?{signal:`min(${d}, ${i})`}:{signal:d};a.push({name:`${this.facet.name}_${f}`,transform:[{type:"sequence",start:0,stop:p}]})}}let{row:u,column:c}=l;return(u||c)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,r)),a}assemble(){var r,n;let o=[],i=null,s=this.getChildIndependentFieldsWithStep(),{column:a,row:l,facet:u}=this;if(a&&l&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;let c=[].concat((r=s.x)!==null&&r!==void 0?r:[],(n=s.y)!==null&&n!==void 0?n:[]),f=c.map(()=>"distinct");o.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:c,ops:f}]})}for(let c of[Rf,Of])this[c]&&o.push(this.assembleRowColumnHeaderData(c,i,s));if(u){let c=this.assembleFacetHeaderData(s);c&&o.push(...c)}return o}}});function svt(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.slice(1,-1):t}function yTr(t,r){let n=oJ(t);if(r==="number")return`toNumber(${n})`;if(r==="boolean")return`toBoolean(${n})`;if(r==="string")return`toString(${n})`;if(r==="date")return`toDate(${n})`;if(r==="flatten")return n;if(r.indexOf("date:")===0){let o=svt(r.slice(5,r.length));return`timeParse(${n},'${o}')`}else if(r.indexOf("utc:")===0){let o=svt(r.slice(4,r.length));return`utcParse(${n},'${o}')`}else return st(it.unrecognizedParse(r)),null}function avt(t){let r={};return F$(t.filter,n=>{var o;if(H2e(n)){let i=null;_J(n)?i=n.equal:SJ(n)?i=n.range[0]:CJ(n)&&(i=((o=n.oneOf)!==null&&o!==void 0?o:n.in)[0]),i&&(Jy(i)?r[n.field]="date":_o(i)?r[n.field]="number":pr(i)&&(r[n.field]="string")),n.timeUnit&&(r[n.field]="date")}}),r}function lvt(t){let r={};function n(o){ZF(o)?r[o.field]="date":o.type==="quantitative"&&Ugt(o.aggregate)?r[o.field]="number":IF(o.field)>1?o.field in r||(r[o.field]="flatten"):KF(o)&&xl(o.sort)&&IF(o.sort.field)>1&&(o.sort.field in r||(r[o.sort.field]="flatten"))}if((no(t)||wl(t))&&t.forEachFieldDef((o,i)=>{if(va(o))n(o);else{let s=ep(i),a=t.fieldDef(s);n(Object.assign(Object.assign({},o),{type:a.type}))}}),no(t)){let{mark:o,markDef:i,encoding:s}=t;if(Ff(o)&&!t.encoding.order){let a=i.orient==="horizontal"?"y":"x",l=s[a];At(l)&&l.type==="quantitative"&&!(l.field in r)&&(r[l.field]="number")}}return r}function uvt(t){let r={};if(no(t)&&t.component.selection)for(let n of nt(t.component.selection)){let o=t.component.selection[n];for(let i of o.project.items)!i.channel&&IF(i.field)>1&&(r[i.field]="flatten")}return r}var _l,Zee=N(()=>{"use strict";ir();Yv();Ir();Mr();db();VF();cn();tJ();ba();RA();og();bt();ps();$c();ro();_l=class t extends Dr{constructor(r,n){super(r),this._parse=n}clone(){return new t(null,sr(this._parse))}hash(){return`Parse ${Tr(this._parse)}`}static makeExplicit(r,n,o){let i={},s=n.data;return!fb(s)&&s&&s.format&&s.format.parse&&(i=s.format.parse),this.makeWithAncestors(r,i,{},o)}static makeWithAncestors(r,n,o,i){for(let l of nt(o)){let u=i.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===o[l]||u.value==="derived"||o[l]==="flatten"?delete o[l]:st(it.differentParse(l,o[l],u.value)))}for(let l of nt(n)){let u=i.get(l);u!==void 0&&(u===n[l]?delete n[l]:st(it.differentParse(l,n[l],u)))}let s=new Vu(n,o);i.copyAll(s);let a={};for(let l of nt(s.combine())){let u=s.get(l);u!==null&&(a[l]=u)}return nt(a).length===0||i.parseNothing?null:new t(r,a)}get parse(){return this._parse}merge(r){this._parse=Object.assign(Object.assign({},this._parse),r.parse),r.remove()}assembleFormatParse(){let r={};for(let n of nt(this._parse)){let o=this._parse[n];IF(n)===1&&(r[n]=o)}return r}producedFields(){return new Set(nt(this._parse))}dependentFields(){return new Set(nt(this._parse))}assembleTransforms(r=!1){return nt(this._parse).filter(n=>r?IF(n)>1:!0).map(n=>{let o=yTr(n,this._parse[n]);return o?{type:"formula",expr:o,as:iJ(n)}:null}).filter(n=>n!==null)}}});var ug,Qee=N(()=>{"use strict";iO();ro();ug=class t extends Dr{clone(){return new t(null)}constructor(r){super(r)}dependentFields(){return new Set}producedFields(){return new Set([e1])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:e1}}}});var cg,F6=N(()=>{"use strict";Mr();bt();bt();ro();cg=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}addDimensions(r){this.transform.groupby=Yd(this.transform.groupby.concat(r),n=>n)}dependentFields(){let r=new Set;return this.transform.groupby&&this.transform.groupby.forEach(r.add,r),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`JoinAggregateTransform ${Tr(this.transform)}`}assemble(){let r=[],n=[],o=[];for(let s of this.transform.joinaggregate)n.push(s.op),o.push(this.getDefaultName(s)),r.push(s.field===void 0?null:s.field);let i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:o,ops:n,fields:r},i!==void 0?{groupby:i}:{})}}});function bTr(t){return t.stack.stackBy.reduce((r,n)=>{let o=n.fieldDef,i=vt(o);return i&&r.push(i),r},[])}function xTr(t){return Bt(t)&&t.every(r=>pr(r))&&t.length>1}var yb,Jee=N(()=>{"use strict";ir();Mr();bt();Po();ro();yb=class t extends Dr{constructor(r,n){super(r),this._stack=n}clone(){return new t(null,sr(this._stack))}static makeFromTransform(r,n){let{stack:o,groupby:i,as:s,offset:a="zero"}=n,l=[],u=[];if(n.sort!==void 0)for(let d of n.sort)l.push(d.field),u.push(Fn(d.order,"ascending"));let c={field:l,order:u},f;return xTr(s)?f=s:pr(s)?f=[s,s+"_end"]:f=[n.stack+"_start",n.stack+"_end"],new t(r,{stackField:o,groupby:i,offset:a,sort:c,facetby:[],as:f})}static makeFromEncoding(r,n){let o=n.stack,{encoding:i}=n;if(!o)return null;let{groupbyChannel:s,fieldChannel:a,offset:l,impute:u}=o,c;if(s){let h=i[s];c=Zl(h)}let f=bTr(n),d=n.encoding.order,p;return Bt(d)||At(d)?p=zJ(d):p=f.reduce((h,m)=>(h.field.push(m),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new t(r,{dimensionFieldDef:c,stackField:n.vgField(a),facetby:[],stackby:f,sort:p,offset:l,impute:u,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(r){this._stack.facetby.push(...r)}dependentFields(){let r=new Set;return r.add(this._stack.stackField),this.getGroupbyFields().forEach(r.add,r),this._stack.facetby.forEach(r.add,r),this._stack.sort.field.forEach(r.add,r),r}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Tr(this._stack)}`}getGroupbyFields(){let{dimensionFieldDef:r,impute:n,groupby:o}=this._stack;return r?r.bin?n?[vt(r,{binSuffix:"mid"})]:[vt(r,{}),vt(r,{binSuffix:"end"})]:[vt(r)]:o??[]}assemble(){let r=[],{facetby:n,dimensionFieldDef:o,stackField:i,stackby:s,sort:a,offset:l,impute:u,as:c}=this._stack;if(u&&o){let{band:f=.5,bin:d}=o;d&&r.push({type:"formula",expr:`${f}*`+vt(o,{expr:"datum"})+`+${1-f}*`+vt(o,{expr:"datum",binSuffix:"end"}),as:vt(o,{binSuffix:"mid",forAs:!0})}),r.push({type:"impute",field:i,groupby:[...s,...n],key:vt(o,{binSuffix:"mid"}),method:"value",value:0})}return r.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:l}),r}}});var a1,ete=N(()=>{"use strict";Yv();Mr();bt();bt();ro();a1=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}addDimensions(r){this.transform.groupby=Yd(this.transform.groupby.concat(r),n=>n)}dependentFields(){var r,n;let o=new Set;return((r=this.transform.groupby)!==null&&r!==void 0?r:[]).forEach(o.add,o),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>o.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(o.add,o),o}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`WindowTransform ${Tr(this.transform)}`}assemble(){var r;let n=[],o=[],i=[],s=[];for(let p of this.transform.window)o.push(p.op),i.push(this.getDefaultName(p)),s.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);let a=this.transform.frame,l=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&o.every(p=>FF(p)))return Object.assign({type:"joinaggregate",as:i,ops:o,fields:n},l!==void 0?{groupby:l}:{});let u=[],c=[];if(this.transform.sort!==void 0)for(let p of this.transform.sort)u.push(p.field),c.push((r=p.order)!==null&&r!==void 0?r:"ascending");let f={field:u,order:c},d=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:o,fields:n,sort:f},d!==void 0?{ignorePeers:d}:{}),l!==void 0?{groupby:l}:{}),a!==void 0?{frame:a}:{})}}});function vTr(t){function r(n){if(!(n instanceof lg)){let o=n.clone();if(o instanceof ds){let i=O6+o.getSource();o.setSource(i),t.model.component.data.outputNodes[i]=o}else(o instanceof fh||o instanceof yb||o instanceof a1||o instanceof cg)&&o.addDimensions(t.fields);for(let i of n.children.flatMap(r))i.parent=o;return[o]}return n.children.flatMap(r)}return r}function ste(t){if(t instanceof lg)if(t.numChildren()===1&&!(t.children[0]instanceof ds)){let r=t.children[0];(r instanceof fh||r instanceof yb||r instanceof a1||r instanceof cg)&&r.addDimensions(t.fields),r.swapWithParent(),ste(t)}else{let r=t.model.component.data.main;cvt(r);let n=vTr(t),o=t.children.map(n).flat();for(let i of o)i.parent=r}else t.children.map(ste)}function cvt(t){if(t instanceof ds&&t.type===zs&&t.numChildren()===1){let r=t.children[0];r instanceof lg||(r.swapWithParent(),cvt(t))}}var tte,rte,nte,ote,ite,ate,lte,ute,cte,fte,dte,fvt=N(()=>{"use strict";db();bt();Wf();Xee();ZA();ro();Kee();C6();Zee();Qee();F6();pte();$Ce();Jee();d6();ete();tte=class extends np{run(r){let n=r.parent;if(r instanceof _l){if(M6(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof _l)this.setMutated(),n.merge(r);else{if(I2e(n.producedFields(),r.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),r.swapWithParent()}}return this.setContinue(),this.flags}},rte=class extends NO{mergeNodes(r,n){let o=n.shift();for(let i of n)r.removeChild(i),i.parent=o,i.remove()}run(r){let n=r.children.map(i=>i.hash()),o={};for(let i=0;i<n.length;i++)o[n[i]]===void 0?o[n[i]]=[r.children[i]]:o[n[i]].push(r.children[i]);for(let i of nt(o))o[i].length>1&&(this.setMutated(),this.mergeNodes(r,o[i]));for(let i of r.children)this.run(i);return this.mutatedFlag}},nte=class extends np{run(r){return r instanceof ds||r.numChildren()>0||r instanceof lg?this.flags:(this.setMutated(),r.remove(),this.flags)}},ote=class extends np{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(r){if(this.setContinue(),r instanceof lh){let n=r.producedFields();k2e(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=r}return this.flags}reset(){this.fields.clear()}},ite=class extends np{run(r){this.setContinue();let o=r.parent.children.filter(s=>s instanceof lh),i=o.pop();for(let s of o)this.setMutated(),i.merge(s);return this.flags}};ate=class extends NO{constructor(){super()}run(r){r instanceof ds&&!r.isRequired()&&(this.setMutated(),r.remove());for(let n of r.children)this.run(n);return this.mutatedFlag}},lte=class extends NO{constructor(r){super(),this.requiresSelectionId=r&&m6(r)}run(r){r instanceof ug&&(this.requiresSelectionId&&(M6(r.parent)||r.parent instanceof fh||r.parent instanceof _l)||(this.setMutated(),r.remove()));for(let n of r.children)this.run(n);return this.mutatedFlag}},ute=class extends np{run(r){let n=r.parent,o=[...n.children],i=n.children.filter(s=>s instanceof _l);if(n.numChildren()>1&&i.length>=1){let s={},a=new Set;for(let l of i){let u=l.parse;for(let c of nt(u))c in s?s[c]!==u[c]&&a.add(c):s[c]=u[c]}for(let l of a)delete s[l];if(!bn(s)){this.setMutated();let l=new _l(n,s);for(let u of o){if(u instanceof _l)for(let c of nt(s))delete u.parse[c];n.removeChild(u),u.parent=l,u instanceof _l&&nt(u.parse).length===0&&u.remove()}}}return this.setContinue(),this.flags}},cte=class extends np{run(r){let n=r.parent,o=n.children.filter(s=>s instanceof fh),i={};for(let s of o){let a=Tr(s.groupBy);a in i||(i[a]=[]),i[a].push(s)}for(let s of nt(i)){let a=i[s];if(a.length>1){let l=a.pop();for(let u of a)l.merge(u)&&(n.removeChild(u),u.parent=l,u.remove(),this.setMutated())}}return this.setContinue(),this.flags}},fte=class extends np{constructor(r){super(),this.model=r}run(r){let n=r.parent,o=!(M6(n)||n instanceof mb||n instanceof _l||n instanceof ug),i=[],s=[];for(let a of n.children)a instanceof ag&&(o&&!I2e(n.producedFields(),a.dependentFields())?i.push(a):s.push(a));if(i.length>0){let a=i.pop();for(let l of i)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof ag?n.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){let a=s.pop();for(let l of s)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}},dte=class extends np{run(r){let n=r.parent,o=[...n.children];if(!k2(o,l=>l instanceof ds)||n.numChildren()<=1)return this.setContinue(),this.flags;let s=[],a;for(let l of o)if(l instanceof ds){let u=l;for(;u.numChildren()===1;){let c=u.children[0];if(c instanceof ds)u=c;else break}s.push(...u.children),a?(n.removeChild(l),l.parent=a.parent,a.parent.removeChild(a),a.parent=u,this.setMutated()):a=u}else s.push(l);if(s.length){this.setMutated();for(let l of s)l.parent.removeChild(l),l.parent=a}return this.setContinue(),this.flags}}});function X2(t){let r=[];function n(o){if(o.numChildren()===0)r.push(o);else for(let i of o.children)n(i)}for(let o of t)n(o);return r}function _Tr(t){return t}function fg(t,r){return r.map(o=>{if(t instanceof np){let i=t.optimizeNextFromLeaves(o);return t.reset(),i}else return t.run(o)}).some(_Tr)}function dvt(t,r){let n=t.sources,o=new Set;return o.add(fg(new ate,n)),o.add(fg(new lte(r),n)),n=n.filter(i=>i.numChildren()>0),o.add(fg(new nte,X2(n))),n=n.filter(i=>i.numChildren()>0),o.add(fg(new tte,X2(n))),o.add(fg(new fte(r),X2(n))),o.add(fg(new ote,X2(n))),o.add(fg(new ute,X2(n))),o.add(fg(new cte,X2(n))),o.add(fg(new ite,X2(n))),o.add(fg(new rte,n)),o.add(fg(new dte,X2(n))),t.sources=n,o.has(!0)}function pvt(t,r){Wee(t.sources);let n=0,o=0;for(let i=0;i<hte&&dvt(t,r);i++)n++;t.sources.map(ste);for(let i=0;i<hte&&dvt(t,r);i++)o++;Wee(t.sources),Math.max(n,o)===hte&&st(`Maximum optimization runs(${hte}) reached.`)}var O6,hte,pte=N(()=>{"use strict";cn();ivt();$Ce();fvt();O6="scale_",hte=5});var Yu,mte=N(()=>{"use strict";Yu=class t{constructor(r){Object.defineProperty(this,"signal",{enumerable:!0,get:r})}static fromName(r,n){return new t(()=>r(n))}}});function GCe(t){no(t)?STr(t):CTr(t)}function STr(t){let r=t.component.scales;for(let n of nt(r)){let o=TTr(t,n);if(r[n].setWithExplicit("domains",o),kTr(t,n),t.component.data.isFaceted){let s=t;for(;!wl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(let l of o.value)Zv(l)&&(l.data=O6+l.data.replace(O6,""))}}}function CTr(t){for(let n of t.children)GCe(n);let r=t.component.scales;for(let n of nt(r)){let o,i=null;for(let s of t.children){let a=s.component.scales[n];if(a){o===void 0?o=a.getWithExplicit("domains"):o=Vf(o,a.getWithExplicit("domains"),"domains","scale",VCe);let l=a.get("selectionExtent");i&&l&&i.selection!==l.selection&&st("The same selection must be used to override scale domains in a layered view."),i=l}}r[n].setWithExplicit("domains",o),i&&r[n].set("selectionExtent",i,!0)}}function ETr(t,r,n,o){if(t==="unaggregated"){let{valid:i,reason:s}=hvt(r,n);if(!i){st(s);return}}else if(t===void 0&&o.useUnaggregatedDomain){let{valid:i}=hvt(r,n);if(i)return"unaggregated"}return t}function TTr(t,r){let n=t.getScaleComponent(r).get("type"),{encoding:o}=t,i=ETr(t.scaleDomain(r),t.typedFieldDef(r),n,t.config.scale);return i!==t.scaleDomain(r)&&(t.specifiedScales[r]=Object.assign(Object.assign({},t.specifiedScales[r]),{domain:i})),r==="x"&&Io(o.x2)?Io(o.x)?Vf(K2(n,i,t,"x"),K2(n,i,t,"x2"),"domain","scale",VCe):K2(n,i,t,"x2"):r==="y"&&Io(o.y2)?Io(o.y)?Vf(K2(n,i,t,"y"),K2(n,i,t,"y2"),"domain","scale",VCe):K2(n,i,t,"y2"):K2(n,i,t,r)}function ATr(t,r,n){return t.map(o=>({signal:`{data: ${G$(o,{timeUnit:n,type:r})}}`}))}function zCe(t,r,n){var o;let i=(o=fs(n))===null||o===void 0?void 0:o.unit;return r==="temporal"||i?ATr(t,r,i):[t]}function K2(t,r,n,o){let{encoding:i}=n,s=Io(i[o]),{type:a}=s,l=s.timeUnit;if($0t(r)){let d=K2(t,void 0,n,o),p=zCe(r.unionWith,a,l);return n1([...d.value,...p])}else{if(rr(r))return n1([r]);if(r&&r!=="unaggregated"&&!K2e(r))return n1(zCe(r,a,l))}let u=n.stack;if(u&&o===u.fieldChannel){if(u.offset==="normalize")return Gu([[0,1]]);let d=n.requestDataName(zs);return Gu([{data:d,field:n.vgField(o,{suffix:"start"})},{data:d,field:n.vgField(o,{suffix:"end"})}])}let c=$u(o)&&At(s)?ITr(n,o,t):void 0;if($f(s)){let d=zCe([s.datum],a,l);return Gu(d)}let f=s;if(r==="unaggregated"){let d=n.requestDataName(zs),{field:p}=s;return Gu([{data:d,field:vt({field:p,aggregate:"min"})},{data:d,field:vt({field:p,aggregate:"max"})}])}else if(Sn(f.bin)){if(es(t))return t==="bin-ordinal"?Gu([]):Gu([{data:P$(c)?n.requestDataName(zs):n.requestDataName(fO),field:n.vgField(o,ob(f,o)?{binSuffix:"range"}:{}),sort:c===!0||!wo(c)?{field:n.vgField(o,{}),op:"min"}:c}]);{let{bin:d}=f;if(Sn(d)){let p=IO(n,f.field,d);return Gu([new Yu(()=>{let h=n.getSignalName(p);return`[${h}.start, ${h}.stop]`})])}else return Gu([{data:n.requestDataName(zs),field:n.vgField(o,{})}])}}else if(f.timeUnit&&qt(["time","utc"],t)&&QF(o,f,no(n)?n.encoding[yl(o)]:void 0,n.stack,n.markDef,n.config)){let d=n.requestDataName(zs);return Gu([{data:d,field:n.vgField(o)},{data:d,field:n.vgField(o,{suffix:"end"})}])}else return c?Gu([{data:P$(c)?n.requestDataName(zs):n.requestDataName(fO),field:n.vgField(o),sort:c}]):Gu([{data:n.requestDataName(zs),field:n.vgField(o)}])}function UCe(t,r){let{op:n,field:o,order:i}=t;return Object.assign(Object.assign({op:n??(r?"sum":P2)},o?{field:Mf(o)}:{}),i?{order:i}:{})}function kTr(t,r){var n;let o=t.component.scales[r],i=t.specifiedScales[r].domain,s=(n=t.fieldDef(r))===null||n===void 0?void 0:n.bin,a=K2e(i)&&i,l=M2(s)&&$F(s.extent)&&s.extent;(a||l)&&o.set("selectionExtent",a??l,!0)}function ITr(t,r,n){if(!es(n))return;let o=t.fieldDef(r),i=o.sort;if(MJ(i))return{op:"min",field:gb(o,r),order:"ascending"};let{stack:s}=t,a=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(l=>l.fieldDef.field)]:void 0;if(xl(i)){let l=s&&!qt(a,i.field);return UCe(i,l)}else if(NJ(i)){let{encoding:l,order:u}=i,c=t.fieldDef(l),{aggregate:f,field:d}=c,p=s&&!qt(a,d);if(rh(f)||Jm(f))return UCe({field:vt(c),order:u},p);if(FF(f)||!f)return UCe({op:f,field:d,order:u},p)}else{if(i==="descending")return{op:"min",field:t.vgField(r),order:"descending"};if(qt(["ascending",void 0],i))return!0}}function hvt(t,r){let{aggregate:n,type:o}=t;return n?pr(n)&&!Ggt[n]?{valid:!1,reason:it.unaggregateDomainWithNonSharedDomainOp(n)}:o==="quantitative"&&r==="log"?{valid:!1,reason:it.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:it.unaggregateDomainHasNoEffectForRawField(t)}}function VCe(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingDomainProperty(n,o,t.value,r.value)),{explicit:t.explicit,value:[...t.value,...r.value]}}function DTr(t){let r=Yd(t.map(a=>{if(Zv(a)){let{sort:l}=a;return Pt(a,["sort"])}return a}),Tr),n=Yd(t.map(a=>{if(Zv(a)){let l=a.sort;return l!==void 0&&!P$(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(a=>a!==void 0),Tr);if(r.length===0)return;if(r.length===1){let a=t[0];if(Zv(a)&&n.length>0){let l=n[0];if(n.length>1)st(it.MORE_THAN_ONE_SORT),l=!0;else if(wo(l)&&"field"in l){let u=l.field;a.field===u&&(l=l.order?{order:l.order}:!0)}return Object.assign(Object.assign({},a),{sort:l})}return a}let o=Yd(n.map(a=>P$(a)||!("op"in a)||a.op in zgt?a:(st(it.domainSortDropped(a)),!0)),Tr),i;o.length===1?i=o[0]:o.length>1&&(st(it.MORE_THAN_ONE_SORT),i=!0);let s=Yd(t.map(a=>Zv(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:r.map(l=>l.field)},i?{sort:i}:{}):Object.assign({fields:r},i?{sort:i}:{})}function MO(t){if(Zv(t)&&pr(t.field))return t.field;if(S0t(t)){let r;for(let n of t.fields)if(Zv(n)&&pr(n.field)){if(!r)r=n.field;else if(r!==n.field)return st(it.FACETED_INDEPENDENT_DIFFERENT_SOURCES),r}return st(it.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),r}else if(C0t(t)){st(it.FACETED_INDEPENDENT_SAME_SOURCE);let r=t.fields[0];return pr(r)?r:void 0}}function Y2(t,r){let o=t.component.scales[r].get("domains").map(i=>(Zv(i)&&(i.data=t.lookupDataSource(i.data)),i));return DTr(o)}var FO=N(()=>{"use strict";So();ir();Yv();Kl();Ir();Mr();db();cn();Ci();og();eb();bt();ho();ZA();KA();pte();ps();mte();$c()});function WCe(t){return ch(t)||kO(t)?t.children.reduce((r,n)=>r.concat(WCe(n)),mvt(t)):mvt(t)}function mvt(t){return nt(t.component.scales).reduce((r,n)=>{let o=t.component.scales[n];if(o.merged)return r;let i=o.combine(),{name:s,type:a,selectionExtent:l,domains:u,range:c,reverse:f}=i,d=Pt(i,["name","type","selectionExtent","domains","range","reverse"]),p=NTr(i.range,s,n),h;l&&(h=zbt(t,l));let m=Y2(t,n);return r.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},m?{domain:m}:{}),h?{domainRaw:h}:{}),{range:p}),f!==void 0?{reverse:f}:{}),d)),r},[])}function NTr(t,r,n){return bl(n)&&zu(t)?{step:{signal:r+"_step"}}:t}var gvt=N(()=>{"use strict";So();Ir();bt();ho();ps();GA();FO()});var R6,yvt=N(()=>{"use strict";ir();bt();$c();R6=class extends Vu{constructor(r,n){super({},{name:r}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:k2(this.get("domains"),r=>Bt(r)&&r.length===2&&r[0]<=0&&r[1]>=0)}}});function wvt(t){return t==="x"?"width":t==="y"?"height":void 0}function _vt(t){let r=t.component.scales;for(let n of N2){let o=r[n];if(!o)continue;let i=FTr(n,t);o.setWithExplicit("range",i)}}function bvt(t,r){let n=t.fieldDef(r);if(n&&n.bin&&Sn(n.bin)){let o=IO(t,n.field,n.bin),i=wvt(r),s=t.getName(i);return new Yu(()=>{let a=t.getSignalName(o),l=`(${a}.stop - ${a}.start) / ${a}.step`;return`${t.getSignalName(s)} / (${l})`})}}function FTr(t,r){let n=r.specifiedScales[t],{size:o}=r,s=r.getScaleComponent(t).get("type");for(let a of MTr)if(n[a]!==void 0){let l=TJ(s,a),u=AJ(t,a);if(!l)st(it.scalePropertyNotWorkWithScaleType(s,a,t));else if(u)st(u);else switch(a){case"range":return Bt(n.range)&&bl(t)?n1(n.range.map(c=>{if(c==="width"||c==="height"){let f=r.getName(c),d=r.getSignalName.bind(r);return Yu.fromName(d,f)}return c})):n1(n.range);case"scheme":return n1(OTr(n[a]))}}if(t===to||t===gi){let a=t===to?"width":"height",l=o[a];if(Uf(l)){if(es(s))return n1({step:l.step});st(it.stepDropped(a))}}return Gu(RTr(t,r))}function OTr(t){return B0t(t)?Object.assign({scheme:t.name},Nf(t,["name"])):{scheme:t}}function RTr(t,r){let{size:n,config:o,mark:i,encoding:s}=r,a=r.getSignalName.bind(r),{type:l}=Io(s[t]),c=r.getScaleComponent(t).get("type"),{domain:f,domainMid:d}=r.specifiedScales[t];switch(t){case to:case gi:{if(qt(["point","band"],c)){if(t===to&&!n.width){let m=$A(o.view,"width");if(Uf(m))return m}else if(t===gi&&!n.height){let m=$A(o.view,"height");if(Uf(m))return m}}let p=wvt(t),h=r.getName(p);return t===gi&&xa(c)?[Yu.fromName(a,h),0]:[0,Yu.fromName(a,h)]}case jf:{let p=r.component.scales[t].get("zero"),h=Svt(i,p,o),m=jTr(i,n,r,o);return WF(c)?LTr(h,m,PTr(c,o,f,t)):[h,m]}case Rc:return[0,Math.PI*2];case rg:return[0,360];case Lf:return[0,new Yu(()=>{let p=r.getSignalName("width"),h=r.getSignalName("height");return`min(${p},${h})/2`})];case Qd:return[o.scale.minStrokeWidth,o.scale.maxStrokeWidth];case Jd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case cs:return"symbol";case Es:case ju:case Bu:return c==="ordinal"?l==="nominal"?"category":"ordinal":d!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case jc:case Kd:case Zd:return[o.scale.minOpacity,o.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${t}`)}function PTr(t,r,n,o){switch(t){case"quantile":return r.scale.quantileCount;case"quantize":return r.scale.quantizeCount;case"threshold":return n!==void 0&&Bt(n)?n.length+1:(st(it.domainRequiredForThresholdScale(o)),3)}}function LTr(t,r,n){let o=()=>{let i=L2(r),s=L2(t),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return rr(r)?new Yu(o):{signal:o()}}function Svt(t,r,n){if(r)return rr(r)?{signal:`${r.signal} ? 0 : ${Svt(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(it.incompatibleChannel("size",t))}function jTr(t,r,n,o){let i={x:bvt(n,"x"),y:bvt(n,"y")};switch(t){case"bar":case"tick":{if(o.scale.maxBandSize!==void 0)return o.scale.maxBandSize;let s=vvt(r,i,o.view);return _o(s)?s-1:new Yu(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return o.scale.maxStrokeWidth;case"text":return o.scale.maxFontSize;case"point":case"square":case"circle":{if(o.scale.maxSize)return o.scale.maxSize;let s=vvt(r,i,o.view);return _o(s)?Math.pow(xvt*s,2):new Yu(()=>`pow(${xvt} * ${s.signal}, 2)`)}}throw new Error(it.incompatibleChannel("size",t))}function vvt(t,r,n){let o=Uf(t.width)?t.width.step:BA(n,"width"),i=Uf(t.height)?t.height.step:BA(n,"height");return r.x||r.y?new Yu(()=>`min(${[r.x?r.x.signal:o,r.y?r.y.signal:i].join(", ")})`):Math.min(o,i)}var MTr,xvt,Cvt=N(()=>{"use strict";ir();Kl();Ir();Mr();B2();cn();Ci();jA();bt();ho();ZA();mte();$c();Po();MTr=["range","scheme"];xvt=.95});function qCe(t,r){no(t)?BTr(t,r):Tvt(t,r)}function BTr(t,r){let n=t.component.scales,{config:o,encoding:i,markDef:s,specifiedScales:a}=t;for(let l of nt(n)){let u=a[l],c=n[l],f=t.getScaleComponent(l),d=Io(i[l]),p=u[r],h=f.get("type"),m=f.get("padding"),g=f.get("paddingInner"),y=TJ(h,r),b=AJ(l,r);if(p!==void 0&&(y?b&&st(b):st(it.scalePropertyNotWorkWithScaleType(h,r,l))),y&&b===void 0)if(p!==void 0)c.copyKeyFromObject(r,u);else{let x=r in Evt?Evt[r]({model:t,channel:l,fieldOrDatumDef:d,scaleType:h,scalePadding:m,scalePaddingInner:g,domain:u.domain,markDef:s,config:o}):o.scale[r];x!==void 0&&c.set(r,x,!1)}}}function HCe(t){no(t)?_vt(t):Tvt(t,"range")}function Tvt(t,r){let n=t.component.scales;for(let o of t.children)r==="range"?HCe(o):qCe(o,r);for(let o of nt(n)){let i;for(let s of t.children){let a=s.component.scales[o];if(a){let l=a.getWithExplicit(r);i=Vf(i,l,r,"scale",fee((u,c)=>{switch(r){case"range":return u.step&&c.step?u.step-c.step:0}return 0}))}}n[o].setWithExplicit(r,i)}}function $Tr(t,r){let n=r.bin;if(Sn(n)){let o=IO(t,r.field,n);return new Yu(()=>t.getSignalName(o))}else if(Ji(n)&&M2(n)&&n.step!==void 0)return{step:n.step}}function zTr(t,r){if(qt([Es,ju,Bu],t)&&r!=="nominal")return"hcl"}function UTr(t,r,n){var o;if(!(!((o=Zl(n))===null||o===void 0)&&o.bin||qt([Ui.TIME,Ui.UTC],t)))return r in Qy?!0:void 0}function VTr(t,r,n,o,i,s){if(t in Qy){if(Bf(r)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:l}=i;if(a==="bar"&&!(At(o)&&(o.bin||o.timeUnit))&&(l==="vertical"&&t==="x"||l==="horizontal"&&t==="y"))return s.continuousBandSize}if(r===Ui.POINT)return n.pointPadding}}function GTr(t,r,n,o){if(t===void 0&&r in Qy){let{bandPaddingInner:i,barBandPaddingInner:s,rectBandPaddingInner:a}=o;return Fn(i,n==="bar"?s:a)}}function WTr(t,r,n,o,i,s){if(t===void 0&&r in Qy&&n===Ui.BAND){let{bandPaddingOuter:a}=s;return Fn(a,rr(i)?{signal:`${i.signal}/2`}:i/2)}}function qTr(t,r,n,o){if(n==="x"&&o.xReverse!==void 0)return xa(t)&&r==="descending"?rr(o.xReverse)?{signal:`!${o.xReverse.signal}`}:!o.xReverse:o.xReverse;if(xa(t)&&r==="descending")return!0}function HTr(t,r,n,o,i){if(!!n&&n!=="unaggregated"&&xa(i)){if(Bt(n)){let a=n[0],l=n[n.length-1];if(a<=0&&l>=0)return!0}return!1}if(t==="size"&&r.type==="quantitative"&&!WF(i))return!0;if(!(At(r)&&r.bin)&&qt([...Ts,...t0t],t)){let{orient:a,type:l}=o;return!(qt(["bar","area","line","trail"],l)&&(a==="horizontal"&&t==="y"||a==="vertical"&&t==="x"))}return!1}var Evt,Avt=N(()=>{"use strict";ir();Kl();Ir();Mr();cn();Ci();bt();bt();ho();ZA();ps();mte();$c();Cvt();Evt={bins:({model:t,fieldOrDatumDef:r})=>At(r)?$Tr(t,r):void 0,interpolate:({channel:t,fieldOrDatumDef:r})=>zTr(t,r.type),nice:({scaleType:t,channel:r,fieldOrDatumDef:n})=>UTr(t,r,n),padding:({channel:t,scaleType:r,fieldOrDatumDef:n,markDef:o,config:i})=>VTr(t,r,i.scale,n,o,i.bar),paddingInner:({scalePadding:t,channel:r,markDef:n,config:o})=>GTr(t,r,n.type,o.scale),paddingOuter:({scalePadding:t,channel:r,scaleType:n,markDef:o,scalePaddingInner:i,config:s})=>WTr(t,r,n,o.type,i,s.scale),reverse:({fieldOrDatumDef:t,scaleType:r,channel:n,config:o})=>{let i=At(t)?t.sort:void 0;return qTr(r,i,n,o.scale)},zero:({channel:t,fieldOrDatumDef:r,domain:n,markDef:o,scaleType:i})=>HTr(t,r,n,o,i)}});function kvt(t,r,n,o){let i=YTr(r,n,o),{type:s}=t;return $u(r)?s!==void 0?J2e(r,s)?At(n)&&!Q2e(s,n.type)?(st(it.scaleTypeNotWorkWithFieldDef(s,i)),i):s:(st(it.scaleTypeNotWorkWithChannel(r,s,i)),i):i:null}function YTr(t,r,n){var o;switch(r.type){case"nominal":case"ordinal":if(Kv(t)||BF(t)==="discrete")return t==="shape"&&r.type==="ordinal"&&st(it.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in Qy){if(qt(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&t in bJ)return"band";return r.band!==void 0||LJ(r)&&(!((o=r.axis)===null||o===void 0)&&o.tickBand)?"band":"point";case"temporal":return Kv(t)?"time":BF(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"temporal")),"ordinal"):At(r)&&r.timeUnit&&fs(r.timeUnit).utc?"utc":"time";case"quantitative":return Kv(t)?At(r)&&Sn(r.bin)?"bin-ordinal":"linear":BF(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(it.invalidFieldType(r.type))}var Ivt=N(()=>{"use strict";Kl();Ir();Mr();cn();Ci();eb();bt();Ir()});function Dvt(t,{ignoreRange:r}={}){Nvt(t),GCe(t);for(let n of z0t)qCe(t,n);r||HCe(t)}function Nvt(t){no(t)?t.component.scales=XTr(t):t.component.scales=ZTr(t)}function XTr(t){let{encoding:r,mark:n}=t;return N2.reduce((o,i)=>{let s=Io(r[i]);if(s&&n===cJ&&i===cs&&s.type===ng)return o;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a=a??{};let l=kvt(a,i,s,n);o[i]=new R6(t.scaleName(i+"",!0),{value:l,explicit:a.type===l})}return o},{})}function ZTr(t){var r;let n=t.component.scales={},o={},i=t.component.resolve;for(let s of t.children){Nvt(s);for(let a of nt(s.component.scales))if(i.scale[a]=(r=i.scale[a])!==null&&r!==void 0?r:$xt(a,t),i.scale[a]==="shared"){let l=o[a],u=s.component.scales[a].getWithExplicit("type");l?R0t(l.value,u.value)?o[a]=Vf(l,u,"type","scale",KTr):(i.scale[a]="independent",delete o[a]):o[a]=u}}for(let s of nt(o)){let a=t.scaleName(s,!0),l=o[s];n[s]=new R6(a,l);for(let u of t.children){let c=u.component.scales[s];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return n}var KTr,Mvt=N(()=>{"use strict";Ir();Mr();ba();Ci();tp();bt();ps();D6();$c();yvt();FO();Avt();Ivt();KTr=fee((t,r)=>X2e(t)-X2e(r))});function no(t){return t?.type==="unit"}function wl(t){return t?.type==="facet"}function kO(t){return t?.type==="concat"}function ch(t){return t?.type==="layer"}var P6,QA,OO,ps=N(()=>{"use strict";So();Ir();Mr();Bc();cn();Ci();aO();jA();K$();s6();bt();ho();E6();Po();ACe();k6();I6();ICe();jCe();LCe();Qxt();rvt();gvt();FO();Mvt();$c();P6=class{constructor(){this.nameMap={}}rename(r,n){this.nameMap[r]=n}has(r){return this.nameMap[r]!==void 0}get(r){for(;this.nameMap[r]&&r!==this.nameMap[r];)r=this.nameMap[r];return r}};QA=class{constructor(r,n,o,i,s,a,l){var u,c;this.type=n,this.parent=o,this.config=s,this.view=l,this.children=[],this.correctDataNames=f=>(f.from&&f.from.data&&(f.from.data=this.lookupDataSource(f.from.data)),f.from&&f.from.facet&&f.from.facet.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f),this.parent=o,this.config=s,this.name=(u=r.name)!==null&&u!==void 0?u:i,this.title=ig(r.title)?{text:r.title}:r.title,this.scaleNameMap=o?o.scaleNameMap:new P6,this.projectionNameMap=o?o.projectionNameMap:new P6,this.signalNameMap=o?o.signalNameMap:new P6,this.data=r.data,this.description=r.description,this.transforms=hbt((c=r.transform)!==null&&c!==void 0?c:[]),this.layout=n==="layer"||n==="unit"?{}:Cyt(r,n,s),this.component={data:{sources:o?o.component.data.sources:[],outputNodes:o?o.component.data.outputNodes:{},outputNodeRefCounts:o?o.component.data.outputNodeRefCounts:{},isFaceted:Qv(r)||o&&o.component.data.isFaceted&&r.data===void 0},layoutSize:new Vu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?sr(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Dvt(this)}parseProjection(){BCe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){RCe(this)}assembleGroupStyle(){var r,n;if(this.type==="unit"||this.type==="layer")return(n=(r=this.view)===null||r===void 0?void 0:r.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(r){let{style:n}=r,o=Pt(r,["style"]),i={};for(let s of nt(o)){let a=o[s];a!==void 0&&(i[s]=mo(a))}return i}assembleGroupEncodeEntry(r){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!r&&(this.description&&(n.description=mo(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):bn(n)?void 0:n}assembleLayout(){if(!this.layout)return;let r=this.layout,{spacing:n}=r,o=Pt(r,["spacing"]),{component:i,config:s}=this,a=Lxt(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),o),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:r}=this.component,n=[];for(let o of gl)r[o].title&&n.push(Fxt(this,o));for(let o of CO)n=n.concat(Pxt(this,o));return n}assembleAxes(){return Ext(this.component.axes,this.config)}assembleLegends(){return Gee(this)}assembleProjections(){return Kxt(this)}assembleTitle(){var r,n,o;let i=(r=this.title)!==null&&r!==void 0?r:{},{encoding:s}=i,a=Pt(i,["encoding"]),l=Object.assign(Object.assign(Object.assign({},$J(this.config.title).nonMark),a),s?{encode:{update:s}}:{});if(l.text)return qt(["unit","layer"],this.type)?qt(["middle",void 0],l.anchor)&&(l.frame=(n=l.frame)!==null&&n!==void 0?n:"group"):l.anchor=(o=l.anchor)!==null&&o!==void 0?o:"start",bn(l)?void 0:l}assembleGroup(r=[]){let n={};r=r.concat(this.assembleSignals()),r.length>0&&(n.signals=r);let o=this.assembleLayout();o&&(n.layout=o),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||wl(this.parent)?WCe(this):[];i.length>0&&(n.scales=i);let s=this.assembleAxes();s.length>0&&(n.axes=s);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(r){return kn((this.name?this.name+"_":"")+r)}requestDataName(r){var n;let o=this.getName(r),i=this.component.data.outputNodeRefCounts;return i[o]=((n=i[o])!==null&&n!==void 0?n:0)+1,o}getSizeSignalRef(r){if(wl(this.parent)){let n=$ee(r),o=D2(n),i=this.component.scales[o];if(i&&!i.merged){let s=i.get("type"),a=i.get("range");if(es(s)&&zu(a)){let l=i.get("name"),u=Y2(this,o),c=MO(u);if(c){let f=vt({aggregate:"distinct",field:c},{expr:"datum"});return{signal:kCe(l,i,f)}}else return st(`Unknown field for ${o}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(r))}}lookupDataSource(r){let n=this.component.data.outputNodes[r];return n?n.getSource():r}getSignalName(r){return this.signalNameMap.get(r)}renameSignal(r,n){this.signalNameMap.rename(r,n)}renameScale(r,n){this.scaleNameMap.rename(r,n)}renameProjection(r,n){this.projectionNameMap.rename(r,n)}scaleName(r,n){if(n)return this.getName(r);if(mJ(r)&&$u(r)&&this.component.scales[r]||this.scaleNameMap.has(this.getName(r)))return this.scaleNameMap.get(this.getName(r))}projectionName(r){if(r)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(r){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[r];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(r):void 0}getSelectionComponent(r,n){let o=this.component.selection[r];if(!o&&this.parent&&(o=this.parent.getSelectionComponent(r,n)),!o)throw new Error(it.selectionNotFound(n));return o}hasAxisOrientSignalRef(){var r,n;return((r=this.component.axes.x)===null||r===void 0?void 0:r.some(o=>o.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(o=>o.hasOrientSignalRef()))}},OO=class extends QA{vgField(r,n={}){let o=this.fieldDef(r);if(o)return vt(o,n)}reduceFieldDef(r,n){return VJ(this.getMapping(),(o,i,s)=>{let a=Zl(i);return a?r(o,a,s):o},n)}forEachFieldDef(r,n){Q$(this.getMapping(),(o,i)=>{let s=Zl(o);s&&r(s,i)},n)}}});var RO,YCe=N(()=>{"use strict";So();bt();ro();RO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(s=a[1])!==null&&s!==void 0?s:"density"]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.density,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{density:n}=r,o=Pt(r,["density"]);return Object.assign({type:"kde",field:n},o)}}});var PO,XCe=N(()=>{"use strict";Ir();Mr();ba();Ci();bt();Po();ro();PO=class t extends Dr{constructor(r,n){super(r),this.filter=n}clone(){return new t(null,Object.assign({},this.filter))}static make(r,n){let{config:o,mark:i,markDef:s}=n;if(ln("invalid",s,o)!=="filter")return null;let l=n.reduceFieldDef((u,c,f)=>{let d=$u(f)&&n.getScaleComponent(f);if(d){let p=d.get("type");xa(p)&&c.aggregate!=="count"&&!Ff(i)&&(u[c.field]=c)}return u},{});return nt(l).length?new t(r,l):null}dependentFields(){return new Set(nt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Tr(this.filter)}`}assemble(){let r=nt(this.filter).reduce((n,o)=>{let i=this.filter[o],s=vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return r.length>0?{type:"filter",expr:r.join(" && ")}:null}}});var LO,KCe=N(()=>{"use strict";bt();ro();LO=class t extends Dr{constructor(r,n){super(r),this.transform=n,this.transform=sr(n);let{flatten:o,as:i=[]}=this.transform;this.transform.as=o.map((s,a)=>{var l;return(l=i[a])!==null&&l!==void 0?l:s})}clone(){return new t(this.parent,sr(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Tr(this.transform)}`}assemble(){let{flatten:r,as:n}=this.transform;return{type:"flatten",fields:r,as:n}}}});var jO,ZCe=N(()=>{"use strict";bt();ro();jO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,sr(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Tr(this.transform)}`}assemble(){let{fold:r,as:n}=this.transform;return{type:"fold",fields:r,as:n}}}});var BO,QCe=N(()=>{"use strict";ir();Ir();Mr();tp();bt();ro();BO=class t extends Dr{constructor(r,n,o,i){super(r),this.fields=n,this.geojson=o,this.signal=i}clone(){return new t(null,sr(this.fields),this.geojson,this.signal)}static parseAll(r,n){if(n.component.projection&&!n.component.projection.isFit)return r;let o=0;for(let i of[[Lc,Pc],[Yl,Lu]]){let s=i.map(a=>{let l=Io(n.encoding[a]);return At(l)?l.field:$f(l)?{expr:`${l.datum}`}:Uu(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(r=new t(r,s,null,n.getName(`geojson_${o++}`)))}if(n.channelHasField(cs)){let i=n.typedFieldDef(cs);i.type===ng&&(r=new t(r,null,i.field,n.getName(`geojson_${o++}`)))}return r}dependentFields(){var r;let n=((r=this.fields)!==null&&r!==void 0?r:[]).filter(pr);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Tr(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}});var $O,JCe=N(()=>{"use strict";ir();Ir();Mr();bt();ro();$O=class t extends Dr{constructor(r,n,o,i){super(r),this.projection=n,this.fields=o,this.as=i}clone(){return new t(null,this.projection,sr(this.fields),sr(this.as))}static parseAll(r,n){if(!n.projectionName())return r;for(let o of[[Lc,Pc],[Yl,Lu]]){let i=o.map(a=>{let l=Io(n.encoding[a]);return At(l)?l.field:$f(l)?{expr:`${l.datum}`}:Uu(l)?{expr:`${l.value}`}:void 0}),s=o[0]===Yl?"2":"";(i[0]||i[1])&&(r=new t(r,n.projectionName(),i,[n.getName("x"+s),n.getName("y"+s)]))}return r}dependentFields(){return new Set(this.fields.filter(pr))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Tr(this.fields)} ${Tr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}});var JA,eEe=N(()=>{"use strict";Mr();Bc();s6();bt();ro();JA=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.impute,this.transform.key,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(r){let{start:n=0,stop:o,step:i}=r;return{signal:`sequence(${[n,o,...i?[i]:[]].join(",")})`}}static makeFromTransform(r,n){return new t(r,n)}static makeFromEncoding(r,n){let o=n.encoding,i=o.x,s=o.y;if(At(i)&&At(s)){let a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;let l=i.impute?s:s.impute?i:void 0,{method:u,value:c,frame:f,keyvals:d}=a.impute,p=GJ(n.mark,o);return new t(r,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:l.field},u?{method:u}:{}),c!==void 0?{value:c}:{}),f?{frame:f}:{}),d!==void 0?{keyvals:d}:{}),p.length?{groupby:p}:{}))}return null}hash(){return`Impute ${Tr(this.transform)}`}assemble(){let{impute:r,key:n,keyvals:o,method:i,groupby:s,value:a,frame:l=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:r,key:n},o?{keyvals:Yyt(o)?this.processSequence(o):o}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let c=Object.assign({type:"window",as:[`imputed_${r}_value`],ops:[i],fields:[r],frame:l,ignorePeers:!1},s?{groupby:s}:{}),f={type:"formula",expr:`datum.${r} === null ? datum.imputed_${r}_value : datum.${r}`,as:r};return[u,c,f]}else return[u]}}});var zO,tEe=N(()=>{"use strict";So();bt();ro();zO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.loess,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{loess:n,on:o}=r,i=Pt(r,["loess","on"]);return Object.assign({type:"loess",x:o,y:n},i)}}});var UO,rEe=N(()=>{"use strict";ir();cn();s6();bt();ro();VO();DO();UO=class t extends Dr{constructor(r,n,o){super(r),this.transform=n,this.secondary=o}clone(){return new t(null,sr(this.transform),this.secondary)}static make(r,n,o,i){let s=n.component.data.sources,{from:a}=o,l=null;if(Kyt(a)){let u=nEe(a.data,s);u||(u=new rp(a.data),s.push(u));let c=n.getName(`lookup_${i}`);l=new ds(u,c,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=l}else if(Zyt(a)){let u=a.selection;if(o=Object.assign({as:u},o),l=n.getSelectionComponent(kn(u),u).materialized,!l)throw new Error(it.noSameUnitLookup(u))}return new t(r,o,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Mn(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Tr({transform:this.transform,secondary:this.secondary})}`}assemble(){let r;if(this.transform.from.fields)r=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Mn(this.transform.as)}:{});else{let n=this.transform.as;pr(n)||(st(it.NO_FIELDS_NEEDS_AS),n="_lookup"),r={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},r),this.transform.default?{default:this.transform.default}:{})}}});var GO,oEe=N(()=>{"use strict";So();bt();ro();GO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.quantile,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{quantile:n}=r,o=Pt(r,["quantile"]);return Object.assign({type:"quantile",field:n},o)}}});var WO,iEe=N(()=>{"use strict";So();bt();ro();WO=class t extends Dr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=sr(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new t(null,sr(this.transform))}dependentFields(){var r;return new Set([this.transform.regression,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Tr(this.transform)}`}assemble(){let r=this.transform,{regression:n,on:o}=r,i=Pt(r,["regression","on"]);return Object.assign({type:"regression",x:o,y:n},i)}}});var qO,sEe=N(()=>{"use strict";bt();ro();qO=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}addDimensions(r){var n;this.transform.groupby=Yd(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(r),o=>o)}producedFields(){}dependentFields(){var r;return new Set([this.transform.pivot,this.transform.value,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}hash(){return`PivotTransform ${Tr(this.transform)}`}assemble(){let{pivot:r,value:n,groupby:o,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:r,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),o!==void 0?{groupby:o}:{})}}});var HO,aEe=N(()=>{"use strict";bt();ro();HO=class t extends Dr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,sr(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Tr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}});function Fvt(t){let r=0;function n(o,i){var s;if(o instanceof rp&&!o.isGenerator&&!$2(o.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),o instanceof _l&&(o.parent instanceof rp&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:o.assembleFormatParse()}),i.transform.push(...o.assembleTransforms(!0))):i.transform.push(...o.assembleTransforms())),o instanceof lg){i.name||(i.name=`data_${r++}`),!i.source||i.transform.length>0?(t.push(i),o.data=i.name):o.data=i.source;for(let a of o.assemble())t.push(a);return}switch((o instanceof q2||o instanceof H2||o instanceof PO||o instanceof mb||o instanceof XA||o instanceof $O||o instanceof BO||o instanceof fh||o instanceof UO||o instanceof a1||o instanceof cg||o instanceof jO||o instanceof LO||o instanceof RO||o instanceof zO||o instanceof GO||o instanceof WO||o instanceof ug||o instanceof HO||o instanceof qO)&&i.transform.push(o.assemble()),(o instanceof ag||o instanceof lh||o instanceof JA||o instanceof yb)&&i.transform.push(...o.assemble()),o instanceof ds&&(i.source&&i.transform.length===0?o.setSource(i.source):o.parent instanceof ds?o.setSource(i.name):(i.name||(i.name=`data_${r++}`),o.setSource(i.name),o.numChildren()===1&&(t.push(i),i={name:null,source:i.name,transform:[]}))),o.numChildren()){case 0:o instanceof ds&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(o.children[0],i);break;default:{i.name||(i.name=`data_${r++}`);let a=i.name;!i.source||i.transform.length>0?t.push(i):a=i.source;for(let l of o.children)n(l,{name:null,source:a,transform:[]});break}}}return n}function Ovt(t){let r=[],n=Fvt(r);for(let o of t.children)n(o,{source:t.name,name:null,transform:[]});return r}function Rvt(t,r){var n,o;let i=[],s=Fvt(i),a=0;for(let u of t.sources){u.hasName()||(u.dataName=`source_${a++}`);let c=u.assemble();s(u,c)}for(let u of i)u.transform.length===0&&delete u.transform;let l=0;for(let[u,c]of i.entries())((n=c.transform)!==null&&n!==void 0?n:[]).length===0&&!c.source&&i.splice(l++,0,i.splice(u,1)[0]);for(let u of i)for(let c of(o=u.transform)!==null&&o!==void 0?o:[])c.type==="lookup"&&(c.from=t.outputNodes[c.from].getSource());for(let u of i)u.name in r&&(u.values=r[u.name]);return i}var lEe=N(()=>{"use strict";db();Xee();ZA();KA();ro();YCe();Kee();C6();XCe();KCe();ZCe();Zee();QCe();JCe();qee();Qee();eEe();F6();tEe();rEe();oEe();iEe();sEe();aEe();Hee();DO();Jee();d6();ete()});function QTr(t){return t==="top"||t==="left"||rr(t)?"header":"footer"}function Lvt(t){for(let r of gl)JTr(t,r);Pvt(t,"x"),Pvt(t,"y")}function JTr(t,r){var n;let{facet:o,config:i,child:s,component:a}=t;if(t.channelHasField(r)){let l=o[r],u=s1("title",null,i,r),c=ih(l,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});s.component.layoutHeaders[r].title&&(c=Bt(c)?c.join(", "):c,c+=" / "+s.component.layoutHeaders[r].title,s.component.layoutHeaders[r].title=null);let f=s1("labelOrient",l,i,r),d=(n=l.header)!==null&&n!==void 0?n:{},p=Fn(d.labels,i.header.labels,!0),h=qt(["bottom","right"],f)?"footer":"header";a.layoutHeaders[r]={title:c,facetFieldDef:l,[h]:r==="facet"?[]:[jvt(t,r,p)]}}}function jvt(t,r,n){let o=r==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(o)?t.child.getSizeSignalRef(o):void 0,axes:[]}}function Pvt(t,r){var n;let{child:o}=t;if(o.component.axes[r]){let{layoutHeaders:i,resolve:s}=t.component;if(s.axis[r]=AO(s,r),s.axis[r]==="shared"){let a=r==="x"?"column":"row",l=i[a];for(let u of o.component.axes[r]){let c=QTr(u.get("orient"));l[c]=(n=l[c])!==null&&n!==void 0?n:[jvt(t,a,!1)];let f=_O(u,"main",t.config,{header:!0});f&&l[c][0].axes.push(f),u.mainExtracted=!0}}}}var Bvt=N(()=>{"use strict";ir();Ir();Mr();bt();ho();E6();D6();Lee()});function $vt(t){yte(t),gte(t,"width"),gte(t,"height")}function zvt(t){yte(t);let r=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";gte(t,r),gte(t,n)}function yte(t){for(let r of t.children)r.parseLayoutSize()}function gte(t,r){let n=$ee(r),o=D2(n),i=t.component.resolve,s=t.component.layoutSize,a;for(let l of t.children){let u=l.component.layoutSize.getWithExplicit(n),c=i.scale[o];if(c==="independent"&&u.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==u.value){a=void 0;break}a=Vf(a,u,n,"")}else a=u}if(a){for(let l of t.children)t.renameSignal(l.getName(n),t.getName(r)),l.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(r,a)}else s.setWithExplicit(r,{explicit:!1,value:void 0})}function Uvt(t){let{size:r,component:n}=t;for(let o of Ts){let i=Xl(o);if(r[i]){let s=r[i];n.layoutSize.set(i,Uf(s)?"step":s,!0)}else{let s=eAr(t,i);n.layoutSize.set(i,s,!1)}}}function eAr(t,r){let n=r==="width"?"x":"y",o=t.config,i=t.getScaleComponent(n);if(i){let s=i.get("type"),a=i.get("range");if(es(s)){let l=$A(o.view,r);return zu(a)||Uf(l)?"step":l}else return o6(o.view,r)}else{if(t.hasProjection||t.mark==="arc")return o6(o.view,r);{let s=$A(o.view,r);return Uf(s)?s.step:s}}}var L6=N(()=>{"use strict";Ir();B2();Ci();jA();ho();$c();ICe()});function bte(t,r,n){return vt(r,Object.assign({suffix:`by_${vt(t)}`},n??{}))}var xte,uEe=N(()=>{"use strict";ir();Kl();Ir();Mr();Bc();cn();Ci();og();Jv();bt();ho();vte();lEe();KA();VO();ACe();Lee();k6();Bvt();L6();ps();FO();GA();xte=class t extends OO{constructor(r,n,o,i){super(r,"facet",n,o,i,r.resolve),this.child=YO(r.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(r.facet,i)}initFacet(r,n){return lb(r)?VJ(r,(o,i,s)=>qt([Of,Rf],s)?i.field===void 0?(st(it.emptyFieldDef(i,s)),o):(o[s]=X$(i,s,n),o):(st(it.incompatibleChannel(s,"facet")),o),{}):{facet:X$(r,"facet",n)}}channelHasField(r){return!!this.facet[r]}fieldDef(r){return this.facet[r]}parseData(){this.component.data=Z2(this),this.child.parseData()}parseLayoutSize(){yte(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Lvt(this)}assembleSelectionTopLevelSignals(r){return this.child.assembleSelectionTopLevelSignals(r)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(r){return this.child.assembleSelectionData(r)}getHeaderLayoutMixins(){var r,n,o;let i={};for(let s of gl)for(let a of EO){let l=this.component.layoutHeaders[s],u=l[a],{facetFieldDef:c}=l;if(c){let f=s1("titleOrient",c,this.config,s);if(qt(["right","bottom"],f)){let d=SO(s,f);i.titleAnchor=(r=i.titleAnchor)!==null&&r!==void 0?r:{},i.titleAnchor[d]="end"}}if(u?.[0]){let f=s==="row"?"height":"width",d=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(f)&&(i[d]=(n=i[d])!==null&&n!==void 0?n:{},i[d][s]=.5),l.title&&(i.offset=(o=i.offset)!==null&&o!==void 0?o:{},i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){let{column:r,row:n}=this.facet,o=r?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!r&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),o?{columns:o}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof t))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(r){return this.parent&&this.parent instanceof t?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vt(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(r)):super.assembleGroup(r)}getCardinalityAggregateForChild(){let r=[],n=[],o=[];if(this.child instanceof t){if(this.child.channelHasField("column")){let i=vt(this.child.facet.column);r.push(i),n.push("distinct"),o.push(`distinct_${i}`)}}else for(let i of Ts){let s=this.child.component.scales[i];if(s&&!s.merged){let a=s.get("type"),l=s.get("range");if(es(a)&&zu(l)){let u=Y2(this.child,i),c=MO(u);c?(r.push(c),n.push("distinct"),o.push(`distinct_${c}`)):st(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:r,ops:n,as:o}}assembleFacet(){let{name:r,data:n}=this.component.data.facetRoot,{row:o,column:i}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(let f of gl){let d=this.facet[f];if(d){u.push(vt(d));let{bin:p,sort:h}=d;if(Sn(p)&&u.push(vt(d,{binSuffix:"end"})),xl(h)){let{field:m,op:g=P2}=h,y=bte(d,h);o&&i?(s.push(y),a.push("max"),l.push(y)):(s.push(m),a.push(g),l.push(y))}else if(Bt(h)){let m=gb(d,f);s.push(m),a.push("max"),l.push(m)}}}let c=!!o&&!!i;return Object.assign({name:r,data:n,groupby:u},c||s.length>0?{aggregate:Object.assign(Object.assign({},c?{cross:c}:{}),s.length?{fields:s,ops:a,as:l}:{})}:{})}facetSortFields(r){let{facet:n}=this,o=n[r];return o?xl(o.sort)?[bte(o,o.sort,{expr:"datum"})]:Bt(o.sort)?[gb(o,r,{expr:"datum"})]:[vt(o,{expr:"datum"})]:[]}facetSortOrder(r){let{facet:n}=this,o=n[r];if(o){let{sort:i}=o;return[(xl(i)?i.order:!Bt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:r,config:n}=this;if(r.facet)return jee(r.facet,"facet",n);let o={row:["top","bottom"],column:["left","right"]};for(let i of CO)if(r[i]){let s=s1("labelOrient",r[i],n,i);if(qt(o[i],s))return jee(r[i],i,n)}}assembleMarks(){let{child:r}=this,n=this.component.data.facetRoot,o=Ovt(n),i=r.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||r.assembleTitle(),a=r.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:gl.map(u=>this.facetSortFields(u)).flat(),order:gl.map(u=>this.facetSortOrder(u)).flat()}}),o.length>0?{data:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup(Lbt(this,[])))]}getMapping(){return this.facet}}});function Vvt(t,r){let{row:n,column:o}=r;if(n&&o){let i=null;for(let s of[n,o])if(xl(s.sort)){let{field:a,op:l=P2}=s.sort;t=i=new cg(t,{joinaggregate:[{op:l,field:a,as:bte(s,s.sort,{forAs:!0})}],groupby:[vt(s)]})}return i}return null}var Gvt=N(()=>{"use strict";Mr();og();uEe();F6()});function nEe(t,r){var n,o,i,s,a,l,u,c,f,d;for(let p of r){let h=p.data;if(!(t.name&&p.hasName()&&t.name!==p.dataName)&&!(!((n=t.format)===null||n===void 0)&&n.mesh&&(!((o=h.format)===null||o===void 0)&&o.feature))&&!((!((i=t.format)===null||i===void 0)&&i.feature||!((s=h.format)===null||s===void 0)&&s.feature)&&((a=t.format)===null||a===void 0?void 0:a.feature)!==((l=h.format)===null||l===void 0?void 0:l.feature))&&!((!((u=t.format)===null||u===void 0)&&u.mesh||!((c=h.format)===null||c===void 0)&&c.mesh)&&((f=t.format)===null||f===void 0?void 0:f.mesh)!==((d=h.format)===null||d===void 0?void 0:d.mesh))){if(cO(t)&&cO(h)){if(Hv(t.values,h.values))return p}else if($2(t)&&$2(h)){if(t.url===h.url)return p}else if(pee(t)&&t.name===p.dataName)return p}}return null}function tAr(t,r){if(t.data||!t.parent){if(t.data===null){let o=new rp({values:[]});return r.push(o),o}let n=nEe(t.data,r);if(n)return fb(t.data)||(n.data.format=_gt({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{let o=new rp(t.data);return r.push(o),o}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function rAr(t,r,n){var o,i;let s=0;for(let a of r.transforms){let l,u;if(abt(a))u=t=new XA(t,a),l="derived";else if(LSe(a)){let c=avt(a);u=t=(o=_l.makeWithAncestors(t,{},c,n))!==null&&o!==void 0?o:t,t=new mb(t,r,a.filter)}else if(lbt(a))u=t=ag.makeFromTransform(t,a,r),l="number";else if(cbt(a))l="date",n.getWithExplicit(a.field).value===void 0&&(t=new _l(t,{[a.field]:l}),n.set(a.field,l,!1)),u=t=lh.makeFromTransform(t,a);else if(fbt(a))u=t=fh.makeFromTransform(t,a),l="number",m6(r)&&(t=new ug(t));else if(Xyt(a))u=t=UO.make(t,r,a,s++),l="derived";else if(obt(a))u=t=new a1(t,a),l="number";else if(ibt(a))u=t=new cg(t,a),l="number";else if(dbt(a))u=t=yb.makeFromTransform(t,a),l="derived";else if(pbt(a))u=t=new jO(t,a),l="derived";else if(sbt(a))u=t=new LO(t,a),l="derived";else if(Qyt(a))u=t=new qO(t,a),l="derived";else if(nbt(a))t=new HO(t,a);else if(ubt(a))u=t=JA.makeFromTransform(t,a),l="derived";else if(Jyt(a))u=t=new RO(t,a),l="derived";else if(ebt(a))u=t=new GO(t,a),l="derived";else if(tbt(a))u=t=new WO(t,a),l="derived";else if(rbt(a))u=t=new zO(t,a),l="derived";else{st(it.invalidTransformIgnored(a));continue}if(u&&l!==void 0)for(let c of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(c,l,!1)}return t}function Z2(t){var r,n,o,i,s,a,l,u,c,f;let d=tAr(t,t.component.data.sources),{outputNodes:p,outputNodeRefCounts:h}=t.component.data,m=t.parent?t.parent.component.data.ancestorParse.clone():new dee,g=t.data;fb(g)?(RSe(g)?d=new H2(d,g.sequence):i6(g)&&(d=new q2(d,g.graticule)),m.parseNothing=!0):((r=g?.format)===null||r===void 0?void 0:r.parse)===null&&(m.parseNothing=!0),d=(n=_l.makeExplicit(d,t,m))!==null&&n!==void 0?n:d,d=new ug(d);let y=t.parent&&ch(t.parent);(no(t)||wl(t))&&y&&(d=(o=ag.makeFromEncoding(d,t))!==null&&o!==void 0?o:d),t.transforms.length>0&&(d=rAr(d,t,m));let b=uvt(t),x=lvt(t);d=(i=_l.makeWithAncestors(d,{},Object.assign(Object.assign({},b),x),m))!==null&&i!==void 0?i:d,no(t)&&(d=BO.parseAll(d,t),d=$O.parseAll(d,t)),(no(t)||wl(t))&&(y||(d=(s=ag.makeFromEncoding(d,t))!==null&&s!==void 0?s:d),d=(a=lh.makeFromEncoding(d,t))!==null&&a!==void 0?a:d,d=XA.parseAllForSortIndex(d,t));let v=t.getName(fO),w=new ds(d,v,fO,h);if(p[v]=w,d=w,no(t)){let E=fh.makeFromEncoding(d,t);E&&(d=E,m6(t)&&(d=new ug(d))),d=(l=JA.makeFromEncoding(d,t))!==null&&l!==void 0?l:d,d=(u=yb.makeFromEncoding(d,t))!==null&&u!==void 0?u:d}no(t)&&(d=(c=PO.make(d,t))!==null&&c!==void 0?c:d);let _=t.getName(zs),S=new ds(d,_,zs,h);p[_]=S,d=S,no(t)&&Cxt(t,S);let C=null;if(wl(t)){let E=t.getName("facet");d=(f=Vvt(d,t.facet))!==null&&f!==void 0?f:d,C=new lg(d,t,E,S.getSource()),p[E]=C}return Object.assign(Object.assign({},t.component.data),{outputNodes:p,outputNodeRefCounts:h,raw:w,main:S,facetRoot:C,ancestorParse:m})}var VO=N(()=>{"use strict";Hyt();db();cn();s6();bt();ps();Wf();UA();Xee();ZA();KA();ro();YCe();Kee();C6();XCe();KCe();ZCe();Zee();QCe();JCe();qee();Qee();eEe();F6();Gvt();tEe();rEe();sEe();oEe();iEe();aEe();Hee();DO();Jee();d6();ete()});var wte,Wvt=N(()=>{"use strict";cn();aO();bt();vte();VO();I6();L6();ps();wte=class extends QA{constructor(r,n,o,i){var s,a,l,u;super(r,"concat",n,o,i,r.resolve),(((a=(s=r.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((u=(l=r.resolve)===null||l===void 0?void 0:l.axis)===null||u===void 0?void 0:u.y)==="shared")&&st(it.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(r).map((c,f)=>YO(c,this,this.getName("concat_"+f),void 0,i))}parseData(){this.component.data=Z2(this);for(let r of this.children)r.parseData()}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){for(let r of this.children)r.parseAxesAndHeaders()}getChildren(r){return j2(r)?r.vconcat:sO(r)?r.hconcat:r.concat}parseLayoutSize(){zvt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.forEach(r=>r.assembleSignals()),[]}assembleLayoutSignals(){let r=TO(this);for(let n of this.children)r.push(...n.assembleLayoutSignals());return r}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleMarks(){return this.children.map(r=>{let n=r.assembleTitle(),o=r.assembleGroupStyle(),i=r.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:r.getName("group")},n?{title:n}:{}),o?{style:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup())})}assembleDefaultLayout(){let r=this.layout.columns;return Object.assign(Object.assign({},r!=null?{columns:r}:{}),{bounds:"full",align:"each"})}}});function nAr(t){return t===!1||t===null}var oAr,cEe,_te,qvt=N(()=>{"use strict";L$();bt();$c();ho();oAr=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},M2e),{labelExpr:1,encode:1}),cEe=nt(oAr),_te=class t extends Vu{constructor(r={},n={},o=!1){super(),this.explicit=r,this.implicit=n,this.mainExtracted=o}clone(){return new t(sr(this.explicit),sr(this.implicit),this.mainExtracted)}hasAxisPart(r){return r==="axis"?!0:r==="grid"||r==="title"?!!this.get(r):!nAr(this.get(r))}hasOrientSignalRef(){return rr(this.explicit.orient)}}});function Hvt(t,r,n){var o;let{encoding:i,config:s}=t,a=(o=Io(i[r]))!==null&&o!==void 0?o:Io(i[yl(r)]),l=t.axis(r)||{},{format:u,formatType:c}=l;return sb(c)?Object.assign({text:Y$({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:s})},n):n}var Yvt=N(()=>{"use strict";Ir();Mr();ab()});function Xvt(t){return Ts.reduce((r,n)=>(t.component.scales[n]&&(r[n]=[fAr(n,t)]),r),{})}function Kvt(t){var r;let{axes:n,resolve:o}=t.component,i={top:0,bottom:0,right:0,left:0};for(let s of t.children){s.parseAxesAndHeaders();for(let a of nt(s.component.axes))o.axis[a]=AO(t.component.resolve,a),o.axis[a]==="shared"&&(n[a]=aAr(n[a],s.component.axes[a]),n[a]||(o.axis[a]="independent",delete n[a]))}for(let s of Ts){for(let a of t.children)if(a.component.axes[s]){if(o.axis[s]==="independent"){n[s]=((r=n[s])!==null&&r!==void 0?r:[]).concat(a.component.axes[s]);for(let l of a.component.axes[s]){let{value:u,explicit:c}=l.getWithExplicit("orient");if(!rr(u)){if(i[u]>0&&!c){let f=sAr[u];i[u]>i[f]&&l.set("orient",f,!1)}i[u]++}}}delete a.component.axes[s]}if(o.axis[s]==="independent"&&n[s]&&n[s].length>1)for(let a of n[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function aAr(t,r){if(t){if(t.length!==r.length)return;let n=t.length;for(let o=0;o<n;o++){let i=t[o],s=r[o];if(!!i!=!!s)return;if(i&&s){let a=i.getWithExplicit("orient"),l=s.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;t[o]=lAr(i,s)}}}else return r.map(n=>n.clone());return t}function lAr(t,r){for(let n of cEe){let o=Vf(t.getWithExplicit(n),r.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return UJ(i,s);case"gridScale":return{explicit:i.explicit,value:Fn(i.value,s.value)}}return uO(i,s,n,"axis")});t.setWithExplicit(n,o)}return t}function uAr(t,r,n,o,i){if(r==="disable")return n!==void 0;switch(n=n||{},r){case"titleAngle":case"labelAngle":return t===(rr(n.labelAngle)?n.labelAngle:kA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===ECe(o,i))return!0}return t===n[r]}function fAr(t,r){var n,o,i;let s=r.axis(t),a=new _te,l=Io(r.encoding[t]),{mark:u,config:c}=r,f=s?.orient||((n=c[t==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((o=c.axis)===null||o===void 0?void 0:o.orient)||Mxt(t),d=r.getScaleComponent(t).get("type"),p=Dxt(t,d,f,r.config),h=s!==void 0?!s:T6("disable",c,s?.style,p).configValue;if(a.set("disable",h,s!==void 0),h)return a;s=s||{};let m=Nxt(r,s,t,l,p),g={fieldOrDatumDef:l,axis:s,channel:t,model:r,scaleType:d,orient:f,labelAngle:m,mark:u,config:c};for(let x of cEe){let v=x in _Ce?_Ce[x](g):F2e(x)?s[x]:void 0,w=v!==void 0,_=uAr(v,x,s,r,t);if(w&&_)a.set(x,v,_);else{let{configValue:S=void 0,configFrom:C=void 0}=F2e(x)&&x!=="values"?T6(x,r.config,s.style,p):{},E=S!==void 0;w&&!E?a.set(x,v,_):(C!=="vgAxisConfig"||cAr.has(x)&&E||DF(S)||rr(S))&&a.set(x,S,!1)}}let y=(i=s.encoding)!==null&&i!==void 0?i:{},b=lJ.reduce((x,v)=>{var w;if(!a.hasAxisPart(v))return x;let _=zee((w=y[v])!==null&&w!==void 0?w:{},r),S=v==="labels"?Hvt(r,t,_):_;return S!==void 0&&!bn(S)&&(x[v]={update:S}),x},{});return bn(b)||a.set("encode",b,!!s.encoding||s.labelAngle!==void 0),a}var sAr,cAr,fEe=N(()=>{"use strict";L$();Ir();Mr();bt();ho();Po();DCe();D6();$c();qvt();vCe();Yvt();TCe();sAr={bottom:"top",top:"bottom",left:"right",right:"left"};cAr=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"])});function Zvt({encoding:t,size:r}){for(let n of Ts){let o=Xl(n);Uf(r[o])&&zf(t[n])&&(delete r[o],st(it.stepDropped(o)))}return r}var Qvt=N(()=>{"use strict";Ir();Mr();cn();jA()});function Jvt(t,r,n,{graticule:o}){let i=Hl(t)?Object.assign({},t):{type:t},s=ln("orient",i,n);if(i.orient=mAr(i.type,r,s),s!==void 0&&s!==i.orient&&st(it.orientOverridden(i.orient,s)),i.type==="bar"&&i.orient){let c=ln("cornerRadiusEnd",i,n);if(c!==void 0){let f=i.orient==="horizontal"&&r.x2||i.orient==="vertical"&&r.y2?["cornerRadius"]:Ogt[i.orient];for(let d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return ln("opacity",i,n)===void 0&&(i.opacity=pAr(i.type,r)),i.filled===void 0&&(i.filled=o?!1:hAr(i,n)),ln("cursor",i,n)===void 0&&(i.cursor=dAr(i,r,n)),i}function dAr(t,r,n){return r.href||t.href||ln("href",t,n)?"pointer":t.cursor}function pAr(t,r){if(qt([NF,j$,B$,$$],t)&&!rO(r))return .7}function hAr(t,r){let n=ub("filled",t,r),o=t.type;return Fn(n,o!==NF&&o!==NA&&o!==MF)}function mAr(t,r,n){switch(t){case NF:case B$:case $$:case uJ:case Igt:case kgt:return}let{x:o,y:i,x2:s,y2:a}=r;switch(t){case DA:if(At(o)&&(Ji(o.bin)||At(i)&&i.aggregate&&!o.aggregate))return"vertical";if(At(i)&&(Ji(i.bin)||At(o)&&o.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s&&(At(o)&&o.type===oh&&!Sn(o.bin)||PJ(o)))return"horizontal";if(!a&&(At(i)&&i.type===oh&&!Sn(i.bin)||PJ(i)))return"vertical"}case MF:if(s&&!(At(o)&&Ji(o.bin))&&a&&!(At(i)&&Ji(i.bin)))return;case IA:if(a)return At(i)&&Ji(i.bin)?"horizontal":"vertical";if(s)return At(o)&&Ji(o.bin)?"vertical":"horizontal";if(t===MF){if(o&&!i)return"vertical";if(i&&!o)return"horizontal"}case NA:case j$:{let l=zf(o),u=zf(i);if(l&&!u)return t!=="tick"?"horizontal":"vertical";if(!l&&u)return t!=="tick"?"vertical":"horizontal";if(l&&u){let c=o,f=i,d=c.type===rb,p=f.type===rb;return d&&!p?t!=="tick"?"vertical":"horizontal":!d&&p?t!=="tick"?"horizontal":"vertical":!c.aggregate&&f.aggregate?t!=="tick"?"vertical":"horizontal":c.aggregate&&!f.aggregate?t!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}var e1t=N(()=>{"use strict";Kl();Mr();Bc();cn();ba();tp();bt();Po()});var t1t,r1t=N(()=>{"use strict";zc();t1t={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),ts("x",t,{defaultPos:"mid"})),ts("y",t,{defaultPos:"mid"})),Gf(t,"radius","arc")),Gf(t,"theta","arc"))}});var n1t,o1t=N(()=>{"use strict";zc();n1t={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),V2("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),V2("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),yO(t))}});var i1t,s1t=N(()=>{"use strict";zc();i1t={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Gf(t,"x","bar")),Gf(t,"y","bar"))}});var a1t,l1t=N(()=>{"use strict";Mr();tp();zc();a1t={vgMark:"shape",encodeEntry:t=>Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{let{encoding:r}=t,n=r.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&At(n)&&n.type===ng?{field:vt(n,{expr:"datum"})}:{})]}}});var u1t,c1t=N(()=>{"use strict";zc();u1t={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Gf(t,"x","image")),Gf(t,"y","image")),z2(t,"url"))}});var f1t,d1t,p1t=N(()=>{"use strict";zc();f1t={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),ts("x",t,{defaultPos:"mid"})),ts("y",t,{defaultPos:"mid"})),Qo("size",t,{vgChannel:"strokeWidth"})),yO(t))},d1t={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),ts("x",t,{defaultPos:"mid"})),ts("y",t,{defaultPos:"mid"})),Qo("size",t)),yO(t))}});function dEe(t,r){let{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),ts("x",t,{defaultPos:"mid"})),ts("y",t,{defaultPos:"mid"})),Qo("size",t)),Qo("angle",t)),gAr(t,n,r))}function gAr(t,r,n){return n?{shape:{value:n}}:Qo("shape",t)}var h1t,m1t,g1t,y1t=N(()=>{"use strict";zc();h1t={vgMark:"symbol",encodeEntry:t=>dEe(t)},m1t={vgMark:"symbol",encodeEntry:t=>dEe(t,"circle")},g1t={vgMark:"symbol",encodeEntry:t=>dEe(t,"square")}});var b1t,x1t=N(()=>{"use strict";zc();b1t={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Gf(t,"x","rect")),Gf(t,"y","rect"))}});var v1t,w1t=N(()=>{"use strict";zc();v1t={vgMark:"rule",encodeEntry:t=>{let{markDef:r}=t,n=r.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),V2("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),V2("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Qo("size",t,{vgChannel:"strokeWidth"}))}}});function yAr(t,r,n){if(ln("align",t,n)===void 0)return"center"}function bAr(t,r,n){if(ln("baseline",t,n)===void 0)return"middle"}var _1t,S1t=N(()=>{"use strict";Po();zc();_1t={vgMark:"text",encodeEntry:t=>{let{config:r,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),ts("x",t,{defaultPos:"mid"})),ts("y",t,{defaultPos:"mid"})),z2(t)),Qo("size",t,{vgChannel:"fontSize"})),Qo("angle",t)),wee("align",yAr(t.markDef,n,r))),wee("baseline",bAr(t.markDef,n,r))),ts("radius",t,{defaultPos:null,isMidPoint:!0})),ts("theta",t,{defaultPos:null,isMidPoint:!0}))}}});function xAr(t){var r;let{config:n,markDef:o}=t,{orient:i}=o,s=i==="horizontal"?"width":"height",a=t.getScaleComponent(i==="horizontal"?"x":"y"),l=(r=ln("size",o,n,{vgChannel:s}))!==null&&r!==void 0?r:n.tick.bandSize;if(l!==void 0)return l;{let u=a?a.get("range"):void 0;return u&&zu(u)&&_o(u.step)?u.step*3/4:BA(n.view,s)*3/4}}var C1t,E1t=N(()=>{"use strict";ir();B2();ho();Po();zc();C1t={vgMark:"rect",encodeEntry:t=>{let{config:r,markDef:n}=t,o=n.orient,i=o==="horizontal"?"width":"height",s=o==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rs(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ts("x",t,{defaultPos:"mid",vgChannel:"xc"})),ts("y",t,{defaultPos:"mid",vgChannel:"yc"})),Qo("size",t,{defaultValue:xAr(t),vgChannel:i})),{[s]:mo(ln("thickness",n,r))})}}});function k1t(t){return qt([NA,IA,Dgt],t.mark)?vAr(t):qt([DA],t.mark)?wAr(t):Cte(t)}function vAr(t){let r=GJ(t.mark,t.encoding),n=Cte(t,{fromPrefix:r.length>0?T1t:""});return r.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:T1t+t.requestDataName(zs),data:t.requestDataName(zs),groupby:r}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}function wAr(t){let r=wJ.some(n=>ln(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&r){let[n]=Cte(t,{fromPrefix:A1t}),o=t.scaleName(t.stack.fieldChannel),i=(d={})=>t.vgField(t.stack.fieldChannel,d),s=(d,p)=>{let h=[i({prefix:"min",suffix:"start",expr:p}),i({prefix:"max",suffix:"start",expr:p}),i({prefix:"min",suffix:"end",expr:p}),i({prefix:"max",suffix:"end",expr:p})];return`${d}(${h.map(m=>`scale('${o}',${m})`).join(",")})`},a,l;t.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},A2(n.encode.update,["y","yc","y2","height",...wJ])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),l={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},Nf(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},A2(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),l={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},Nf(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let d of wJ){let p=ub(d,t.markDef,t.config);n.encode.update[d]?(a[d]=n.encode.update[d],delete n.encode.update[d]):p&&(a[d]=mo(p)),p&&(n.encode.update[d]={value:0})}let u=t.fieldDef(t.stack.groupbyChannel),c=vt(u)?[vt(u)]:[];return(u?.bin||u?.timeUnit)&&c.push(vt(u,{binSuffix:"end"})),a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,p)=>{if(n.encode.update[p])return Object.assign(Object.assign({},d),{[p]:n.encode.update[p]});{let h=ub(p,t.markDef,t.config);return h!==void 0?Object.assign(Object.assign({},d),{[p]:mo(h)}):d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(zs),name:A1t+t.requestDataName(zs),groupby:c,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:l},marks:[n]}]}]}else return Cte(t)}function _Ar(t){let{encoding:r,stack:n,mark:o,markDef:i,config:s}=t,a=r.order;if(!(!Bt(a)&&Uu(a)&&T2e(a.value)||!a&&T2e(ln("order",i,s)))){if((Bt(a)||At(a))&&!n)return zJ(a,{expr:"datum"});if(Ff(o)){let l=i.orient==="horizontal"?"y":"x",u=r[l];if(At(u)){let c=u.sort;if(Bt(c))return{field:vt(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(xl(c))return{field:vt({aggregate:rO(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(NJ(c)){let f=t.fieldDef(c.encoding);return{field:vt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:vt(u,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function Cte(t,r={fromPrefix:""}){let{mark:n,markDef:o,config:i}=t,s=Fn(o.clip,SAr(t),CAr(t)),a=cSe(o),l=t.encoding.key,u=_Ar(t),c=EAr(t),f=ln("aria",o,i),d=Ste[n].postEncodingTransform?Ste[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:Ste[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:r.fromPrefix+t.requestDataName(zs)},encode:{update:Ste[n].encodeEntry(t)}}),d?{transform:d}:{})]}function SAr(t){let r=t.getScaleComponent("x"),n=t.getScaleComponent("y");return r&&r.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function CAr(t){let r=t.component.projection;return r&&!r.isFit?!0:void 0}function EAr(t){if(!t.component.selection)return null;let r=nt(t.component.selection).length,n=r,o=t.parent;for(;o&&n===0;)n=nt(o.component.selection).length,o=o.parent;return n?{interactive:r>0}:null}var Ste,T1t,A1t,I1t=N(()=>{"use strict";ir();Mr();db();Bc();ba();og();bt();ho();Po();r1t();o1t();s1t();l1t();c1t();p1t();y1t();x1t();w1t();S1t();E1t();Ste={arc:t1t,area:n1t,bar:i1t,circle:m1t,geoshape:a1t,image:u1t,line:f1t,point:h1t,rect:b1t,rule:v1t,square:g1t,text:_1t,tick:C1t,trail:d1t};T1t="faceted_path_";A1t="stack_group_"});var XO,pEe=N(()=>{"use strict";Ir();Mr();db();Bc();Bc();ba();jA();DSe();E6();fEe();VO();I6();Qvt();L6();e1t();I1t();ps();GA();UA();XO=class extends OO{constructor(r,n,o,i={},s){var a,l;super(r,"unit",n,o,s,void 0,ESe(r)?r.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];let u=Hl(r.mark)?r.mark.type:r.mark;this.markDef=Jvt(r.mark,(a=r.encoding)!==null&&a!==void 0?a:{},s,{graticule:r.data&&i6(r.data)});let c=this.encoding=oyt((l=r.encoding)!==null&&l!==void 0?l:{},this.markDef,s);this.size=Zvt({encoding:c,size:ESe(r)?Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{}):i}),this.stack=oee(u,c),this.specifiedScales=this.initScales(u,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegend(c),this.specifiedProjection=r.projection,this.selection=r.selection}get hasProjection(){let{encoding:r}=this,n=this.mark===cJ,o=r&&Ygt.some(i=>Or(r[i]));return n||o}scaleDomain(r){let n=this.specifiedScales[r];return n?n.domain:void 0}axis(r){return this.specifiedAxes[r]}legend(r){return this.specifiedLegends[r]}initScales(r,n){return N2.reduce((o,i)=>{var s;let a=Io(n[i]);return a&&(o[i]=(s=a.scale)!==null&&s!==void 0?s:{}),o},{})}initAxes(r){return Ts.reduce((n,o)=>{let i=r[o];if(Or(i)||o===to&&Or(r.x2)||o===gi&&Or(r.y2)){let s=Or(i)?i.axis:void 0;n[o]=s&&Object.assign({},s)}return n},{})}initLegend(r){return n0t.reduce((n,o)=>{let i=Io(r[o]);if(i&&i0t(o)){let s=i.legend;n[o]=s&&Object.assign({},s)}return n},{})}parseData(){this.component.data=Z2(this)}parseLayoutSize(){Uvt(this)}parseSelections(){this.component.selection=Sxt(this,this.selection)}parseMarkGroup(){this.component.mark=k1t(this)}parseAxesAndHeaders(){this.component.axes=Xvt(this)}assembleSelectionTopLevelSignals(r){return jbt(this,r)}assembleSignals(){return[...Pee(this),...Pbt(this,[])]}assembleSelectionData(r){return Bbt(this,r)}assembleLayout(){return null}assembleLayoutSignals(){return TO(this)}assembleMarks(){var r;let n=(r=this.component.mark)!==null&&r!==void 0?r:[];return(!this.parent||!ch(this.parent))&&(n=ZSe(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(r){return cb(this.encoding,r)}fieldDef(r){let n=this.encoding[r];return Zl(n)}typedFieldDef(r){let n=this.fieldDef(r);return va(n)?n:null}}});var Ete,D1t=N(()=>{"use strict";cn();aO();bt();E6();fEe();VO();I6();L6();jCe();ps();GA();pEe();Ete=class t extends QA{constructor(r,n,o,i,s){super(r,"layer",n,o,s,r.resolve,r.view);let a=Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{});this.children=r.layer.map((l,u)=>{if(r1(l))return new t(l,this,this.getName("layer_"+u),a,s);if(La(l))return new XO(l,this,this.getName("layer_"+u),a,s);throw new Error(it.invalidSpec(l))})}parseData(){this.component.data=Z2(this);for(let r of this.children)r.parseData()}parseLayoutSize(){$vt(this)}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){Kvt(this)}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleSignals()),Pee(this))}assembleLayoutSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleLayoutSignals()),TO(this))}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleTitle(){let r=super.assembleTitle();if(r)return r;for(let n of this.children)if(r=n.assembleTitle(),r)return r}assembleLayout(){return null}assembleMarks(){return $bt(this,this.children.flatMap(r=>r.assembleMarks()))}assembleLegends(){return this.children.reduce((r,n)=>r.concat(n.assembleLegends()),Gee(this))}}});function YO(t,r,n,o,i){if(Qv(t))return new xte(t,r,n,i);if(r1(t))return new Ete(t,r,n,o,i);if(La(t))return new XO(t,r,n,o,i);if(CSe(t))return new wte(t,r,n,i);throw new Error(it.invalidSpec(t))}var vte=N(()=>{"use strict";cn();aO();Wvt();uEe();D1t();pEe()});function N1t(t,r={}){r.logger&&c0t(r.logger),r.fieldTitle&&sSe(r.fieldTitle);try{let n=ree(D$(r.config,t.config)),o=cee(t,n),i=YO(o,null,"",void 0,n);return i.parse(),pvt(i.component.data,i),{spec:AAr(i,TAr(t,o.autosize,n,i),t.datasets,t.usermeta),normalized:o}}finally{r.logger&&f0t(),r.fieldTitle&&ryt()}}function TAr(t,r,n,o){let i=o.component.layoutSize.get("width"),s=o.component.layoutSize.get("height");if(r===void 0?(r={type:"pad"},o.hasAxisOrientSignalRef()&&(r.resize=!0)):pr(r)&&(r={type:r}),i&&s&&Gyt(r.type)){if(i==="step"&&s==="step")st(it.droppingFit()),r.type="pad";else if(i==="step"||s==="step"){let a=i==="step"?"width":"height";st(it.droppingFit(D2(a)));let l=a==="width"?"height":"width";r.type=Wyt(l)}}return Object.assign(Object.assign(Object.assign({},nt(r).length===1&&r.type?r.type==="pad"?{}:{autosize:r.type}:{autosize:r}),OSe(n)),OSe(t))}function AAr(t,r,n={},o){let i=t.config?Ayt(t.config):void 0,s=[].concat(t.assembleSelectionData([]),Rvt(t.component.data,n)),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0),f=t.assembleLayoutSignals();return f=f.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(r[d.name]=+d.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),r),l?{title:l}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:s}),a.length>0?{projections:a}:{}),t.assembleGroup([...f,...t.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),o?{usermeta:o}:{})}var M1t=N(()=>{"use strict";ir();Ir();Mr();B2();cn();FSe();qyt();bt();vte();lEe();pte()});function F1t(t,r){return kAr.map(t,{config:r})}var hEe,kAr,O1t=N(()=>{"use strict";Bc();ISe();hEe=class extends lO{mapUnit(r,{config:n}){if(r.encoding){let{encoding:o,transform:i}=r,{bins:s,timeUnits:a,aggregate:l,groupby:u,encoding:c}=nO(o,n),f=[...i||[],...s,...a,...l.length===0?[]:[{aggregate:l,groupby:u}]];return Object.assign(Object.assign(Object.assign({},r),f.length>0?{transform:f}:{}),{encoding:c})}else return r}},kAr=new hEe});var mEe={};fn(mEe,{compile:()=>N1t,extractTransforms:()=>F1t,normalize:()=>cee,version:()=>IAr});var IAr,R1t=N(()=>{"use strict";Nmt();FSe();M1t();O1t();IAr=Mmt.version});function DAr(t){let[r,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:r,version:n}}var gEe,P1t=N(()=>{"use strict";gEe=DAr});var SEe={};fn(SEe,{carbong10:()=>kkr,carbong100:()=>Dkr,carbong90:()=>Ikr,carbonwhite:()=>Akr,dark:()=>KAr,excel:()=>ZAr,fivethirtyeight:()=>ekr,ggplot2:()=>tkr,googlecharts:()=>pkr,latimes:()=>ikr,powerbi:()=>Skr,quartz:()=>skr,urbaninstitute:()=>dkr,version:()=>Nkr,vox:()=>akr});function Dte({theme:t,background:r}){let n=["white","g10"].includes(t)?"light":"dark",o=Ite.gridBg[t],i=Ite.textPrimary[t],s=Ite.textSecondary[t],a=n==="dark"?Ekr:Tkr,l=n==="dark"?"#d4bbff":"#6929c4";return{background:r,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:o,stroke:o},group:{fill:o},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:vEe,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Ckr,labelFontWeight:wEe,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Ite.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:vEe,fill:s,fontWeight:wEe},"guide-title":{font:vEe,fill:s,fontWeight:wEe}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var NAr,MAr,FAr,OAr,RAr,PAr,LAr,jAr,BAr,$Ar,zAr,UAr,VAr,GAr,WAr,qAr,HAr,YAr,XAr,KO,L1t,KAr,ek,ZAr,tk,yEe,QAr,JAr,j1t,B1t,ekr,rk,tkr,rkr,nkr,$1t,z1t,okr,nk,bEe,U1t,V1t,j6,ikr,ok,Tte,skr,ik,akr,dh,G1t,lkr,Ate,xEe,ukr,ckr,fkr,B6,dkr,sk,W1t,kte,pkr,_Ee,q1t,H1t,Y1t,$6,X1t,K1t,z6,Z1t,hkr,dg,mkr,gkr,ykr,bkr,xkr,vkr,wkr,J1t,ewt,Q1t,_kr,Skr,vEe,Ckr,wEe,Ite,Ekr,Tkr,Akr,kkr,Ikr,Dkr,Nkr,twt=N(()=>{"use strict";NAr="vega-themes",MAr="2.15.0",FAr="Themes for stylized Vega and Vega-Lite visualizations.",OAr=["vega","vega-lite","themes","style"],RAr="BSD-3-Clause",PAr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},LAr=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],jAr="build/vega-themes.js",BAr="build/vega-themes.module.js",$Ar="build/vega-themes.min.js",zAr="build/vega-themes.min.js",UAr="build/vega-themes.module.d.ts",VAr={type:"git",url:"https://github.com/vega/vega-themes.git"},GAr=["src","build"],WAr={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},qAr={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},HAr={vega:"*","vega-lite":"*"},YAr={},XAr={name:NAr,version:MAr,description:FAr,keywords:OAr,license:RAr,author:PAr,contributors:LAr,main:jAr,module:BAr,unpkg:$Ar,jsdelivr:zAr,types:UAr,repository:VAr,files:GAr,scripts:WAr,devDependencies:qAr,peerDependencies:HAr,dependencies:YAr},KO="#fff",L1t="#888",KAr={background:"#333",view:{stroke:L1t},title:{color:KO,subtitleColor:KO},style:{"guide-label":{fill:KO},"guide-title":{fill:KO}},axis:{domainColor:KO,gridColor:L1t,tickColor:KO}},ek="#4572a7",ZAr={background:"#fff",arc:{fill:ek},area:{fill:ek},line:{stroke:ek,strokeWidth:2},path:{stroke:ek},rect:{fill:ek},shape:{stroke:ek},symbol:{fill:ek,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},tk="#30a2da",yEe="#cbcbcb",QAr="#999",JAr="#333",j1t="#f0f0f0",B1t="#333",ekr={arc:{fill:tk},area:{fill:tk},axis:{domainColor:yEe,grid:!0,gridColor:yEe,gridWidth:1,labelColor:QAr,labelFontSize:10,titleColor:JAr,tickColor:yEe,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:j1t,group:{fill:j1t},legend:{labelColor:B1t,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:B1t,titleFontSize:14,titlePadding:10},line:{stroke:tk,strokeWidth:2},path:{stroke:tk,strokeWidth:.5},rect:{fill:tk},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:tk},bar:{binSpacing:2,fill:tk,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},rk="#000",tkr={group:{fill:"#e5e5e5"},arc:{fill:rk},area:{fill:rk},line:{stroke:rk},path:{stroke:rk},rect:{fill:rk},shape:{stroke:rk},symbol:{fill:rk,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},rkr=22,nkr="normal",$1t="Benton Gothic, sans-serif",z1t=11.5,okr="normal",nk="#82c6df",bEe="Benton Gothic Bold, sans-serif",U1t="normal",V1t=13,j6={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ikr={background:"#ffffff",title:{anchor:"start",color:"#000000",font:bEe,fontSize:rkr,fontWeight:nkr},arc:{fill:nk},area:{fill:nk},line:{stroke:nk,strokeWidth:2},path:{stroke:nk},rect:{fill:nk},shape:{stroke:nk},symbol:{fill:nk,size:30},axis:{labelFont:$1t,labelFontSize:z1t,labelFontWeight:okr,titleFont:bEe,titleFontSize:V1t,titleFontWeight:U1t},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:$1t,labelFontSize:z1t,symbolType:"square",titleFont:bEe,titleFontSize:V1t,titleFontWeight:U1t},range:{category:j6["category-6"],diverging:j6["fireandice-6"],heatmap:j6["fire-7"],ordinal:j6["fire-7"],ramp:j6["fire-7"]}},ok="#ab5787",Tte="#979797",skr={background:"#f9f9f9",arc:{fill:ok},area:{fill:ok},line:{stroke:ok},path:{stroke:ok},rect:{fill:ok},shape:{stroke:ok},symbol:{fill:ok,size:30},axis:{domainColor:Tte,domainWidth:.5,gridWidth:.2,labelColor:Tte,tickColor:Tte,tickWidth:.2,titleColor:Tte},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ik="#3e5c69",akr={background:"#fff",arc:{fill:ik},area:{fill:ik},line:{stroke:ik},path:{stroke:ik},rect:{fill:ik},shape:{stroke:ik},symbol:{fill:ik},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},dh="#1696d2",G1t="#000000",lkr="#FFFFFF",Ate="Lato",xEe="Lato",ukr="Lato",ckr="#DEDDDD",fkr=18,B6={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},dkr={background:lkr,title:{anchor:"start",fontSize:fkr,font:Ate},axisX:{domain:!0,domainColor:G1t,domainWidth:1,grid:!1,labelFontSize:12,labelFont:xEe,labelAngle:0,tickColor:G1t,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Ate},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:ckr,gridWidth:1,labelFontSize:12,labelFont:xEe,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Ate,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:xEe,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Ate,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:B6["six-groups-cat-1"],diverging:B6["diverging-colors"],heatmap:B6["diverging-colors"],ordinal:B6["six-groups-seq"],ramp:B6["shades-blue"]},area:{fill:dh},rect:{fill:dh},line:{color:dh,stroke:dh,strokeWidth:5},trail:{color:dh,stroke:dh,strokeWidth:0,size:1},path:{stroke:dh,strokeWidth:.5},point:{filled:!0},text:{font:ukr,color:dh,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:dh,stroke:null}},arc:{fill:dh},shape:{stroke:dh},symbol:{fill:dh,size:30}},sk="#3366CC",W1t="#ccc",kte="Arial, sans-serif",pkr={arc:{fill:sk},area:{fill:sk},path:{stroke:sk},rect:{fill:sk},shape:{stroke:sk},symbol:{stroke:sk},circle:{fill:sk},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:kte,fontSize:12},"guide-title":{font:kte,fontSize:12},"group-title":{font:kte,fontSize:12}},title:{font:kte,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:W1t,tickColor:W1t,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},_Ee=t=>t*(1/3+1),q1t=_Ee(9),H1t=_Ee(10),Y1t=_Ee(12),$6="Segoe UI",X1t="wf_standard-font, helvetica, arial, sans-serif",K1t="#252423",z6="#605E5C",Z1t="transparent",hkr="#C8C6C4",dg="#118DFF",mkr="#12239E",gkr="#E66C37",ykr="#6B007B",bkr="#E044A7",xkr="#744EC2",vkr="#D9B300",wkr="#D64550",J1t=dg,ewt="#DEEFFF",Q1t=[ewt,J1t],_kr=[ewt,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",J1t],Skr={view:{stroke:Z1t},background:Z1t,font:$6,header:{titleFont:X1t,titleFontSize:Y1t,titleColor:K1t,labelFont:$6,labelFontSize:H1t,labelColor:z6},axis:{ticks:!1,grid:!1,domain:!1,labelColor:z6,labelFontSize:q1t,titleFont:X1t,titleColor:K1t,titleFontSize:Y1t,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:hkr,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:dg},line:{stroke:dg,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:$6,fontSize:q1t,fill:z6},arc:{fill:dg},area:{fill:dg,line:!0,opacity:.6},path:{stroke:dg},rect:{fill:dg},point:{fill:dg,filled:!0,size:75},shape:{stroke:dg},symbol:{fill:dg,strokeWidth:1.5,size:50},legend:{titleFont:$6,titleFontWeight:"bold",titleColor:z6,labelFont:$6,labelFontSize:H1t,labelColor:z6,symbolType:"circle",symbolSize:75},range:{category:[dg,mkr,gkr,ykr,bkr,xkr,vkr,wkr],diverging:Q1t,heatmap:Q1t,ordinal:_kr}},vEe='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Ckr='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',wEe=400,Ite={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Ekr=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Tkr=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];Akr=Dte({theme:"white",background:"#ffffff"}),kkr=Dte({theme:"g10",background:"#f4f4f4"}),Ikr=Dte({theme:"g90",background:"#262626"}),Dkr=Dte({theme:"g100",background:"#161616"}),Nkr=XAr.version});function eIr(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function tIr(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return Qkr.toString().replace(nwt,t)}function rIr(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}function nIr(t,r,n){if(Hr(t))return`[${t.map(o=>r(Jn(o)?o:rwt(o,n))).join(", ")}]`;if(un(t)){let o="",i=t,{title:s,image:a}=i,l=rIr(i,["title","image"]);s&&(o+=`<h2>${r(s)}</h2>`),a&&(o+=`<img src="${r(a)}">`);let u=Object.keys(l);if(u.length>0){o+="<table>";for(let c of u){let f=l[c];f!==void 0&&(un(f)&&(f=rwt(f,n)),o+=`<tr><td class="key">${r(c)}:</td><td class="value">${r(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return r(t)}function oIr(t){let r=[];return function(n,o){if(typeof o!="object"||o===null)return o;let i=r.indexOf(this)+1;return r.length=i,r.length>t?"[Object]":r.indexOf(o)>=0?"[Circular]":(r.push(o),o)}}function rwt(t,r){return JSON.stringify(t,oIr(r))}function iIr(t,r,n,o){let i=t.clientX+n;i+r.width>window.innerWidth&&(i=+t.clientX-n-r.width);let s=t.clientY+o;return s+r.height>window.innerHeight&&(s=+t.clientY-o-r.height),{x:i,y:s}}var Mkr,Fkr,Okr,Rkr,Pkr,Lkr,jkr,Bkr,$kr,zkr,Ukr,Vkr,Gkr,Wkr,qkr,Hkr,Ykr,Xkr,Kkr,Zkr,Qkr,nwt,Jkr,Nte,hbi,owt=N(()=>{"use strict";Ls();Mkr="vega-tooltip",Fkr="0.25.1",Okr="A tooltip plugin for Vega-Lite and Vega visualizations.",Rkr=["vega-lite","vega","tooltip"],Pkr={type:"git",url:"https://github.com/vega/vega-tooltip.git"},Lkr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},jkr=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],Bkr="BSD-3-Clause",$kr={url:"https://github.com/vega/vega-tooltip/issues"},zkr="https://github.com/vega/vega-tooltip#readme",Ukr="build/vega-tooltip.js",Vkr="build/vega-tooltip.module.js",Gkr="build/vega-tooltip.min.js",Wkr="build/vega-tooltip.min.js",qkr="build/vega-tooltip.module.d.ts",Hkr=["src","build","types"],Ykr={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"beemo jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"beemo create-config && yarn copy:data",prettierbase:"beemo prettier '*.{css,scss,html}'",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check"},Xkr={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@wessberg/rollup-plugin-ts":"^1.3.8","browser-sync":"^2.26.14",concurrently:"^6.0.0","gh-pages":"^3.1.0","node-sass":"^5.0.0",path:"^0.12.7",rollup:"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"~4.2.2","vega-datasets":"^2.2.0","vega-lite-dev-config":"^0.16.1","vega-typings":"^0.19.2"},Kkr={"vega-util":"^1.16.0"},Zkr={name:Mkr,version:Fkr,description:Okr,keywords:Rkr,repository:Pkr,author:Lkr,collaborators:jkr,license:Bkr,bugs:$kr,homepage:zkr,main:Ukr,module:Vkr,unpkg:Gkr,jsdelivr:Wkr,types:qkr,files:Hkr,scripts:Ykr,devDependencies:Xkr,dependencies:Kkr},Qkr=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,nwt="vg-tooltip-element",Jkr={offsetX:10,offsetY:10,id:nwt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:eIr,maxDepth:2};Nte=class{constructor(r){this.options=Object.assign(Object.assign({},Jkr),r);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let o=document.createElement("style");o.setAttribute("id",this.options.styleId),o.innerHTML=tIr(n);let i=document.head;i.childNodes.length>0?i.insertBefore(o,i.childNodes[0]):i.appendChild(o)}}tooltipHandler(r,n,o,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=nIr(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:a,y:l}=iIr(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${l}px; left: ${a}px`)}},hbi=Zkr.version});var ak={};fn(ak,{DEFAULT_ACTIONS:()=>cwt,default:()=>bIr,guessMode:()=>fwt,vega:()=>l1,vegaLite:()=>ZO});function Ote(t,r,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{c(o.next(f))}catch(d){a(d)}}function u(f){try{c(o.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(l,u)}c((o=o.apply(t,r||[])).next())})}function sIr(t,r,n){let o=t.open(r),i=1e4,s=250,{origin:a}=new URL(r),l=~~(i/s);function u(f){f.source===o&&(l=0,t.removeEventListener("message",u,!1))}t.addEventListener("message",u,!1);function c(){l<=0||(o.postMessage(n,a),setTimeout(c,s),l-=1)}setTimeout(c,s)}function uwt(t,...r){for(let n of r)lIr(t,n);return t}function lIr(t,r){for(let n of Object.keys(r))ZP(t,n,r[n],!0)}function pIr(t){return typeof t=="function"}function iwt(t,r,n,o){let i=`<html><head>${r}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+s),a.document.title=`${U6[o]} JSON Source`}function fwt(t,r){var n;if(t.$schema){let o=gEe(t.$schema);r&&r!==o.library&&console.warn(`The given visualization spec is written in ${U6[o.library]}, but mode argument sets ${(n=U6[r])!==null&&n!==void 0?n:r}.`);let i=o.library;return(0,EEe.satisfies)(Rte[i],`^${o.version.slice(1)}`)||console.warn(`The input spec uses ${U6[i]} ${o.version}, but the current version of ${U6[i]} is v${Rte[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":r??"vega"}function hIr(t){return!!(t&&"load"in t)}function swt(t){return hIr(t)?t:l1.loader(t)}function awt(t){var r;return(r=t.usermeta&&t.usermeta.embedOptions)!==null&&r!==void 0?r:{}}function mIr(t,r,n={}){var o,i,s;return Ote(this,void 0,void 0,function*(){let a,l;Jn(r)?(l=swt(n.loader),a=JSON.parse(yield l.load(r))):a=r;let u=awt(a).loader;(!l||u)&&(l=swt((o=n.loader)!==null&&o!==void 0?o:u));let c=yield lwt(awt(a),l),f=yield lwt(n,l),d=Object.assign(Object.assign({},uwt(f,c)),{config:JD((i=f.config)!==null&&i!==void 0?i:{},(s=c.config)!==null&&s!==void 0?s:{})});return yield yIr(t,a,d,l)})}function lwt(t,r){var n;return Ote(this,void 0,void 0,function*(){let o=Jn(t.config)?JSON.parse(yield r.load(t.config)):(n=t.config)!==null&&n!==void 0?n:{},i=Jn(t.patch)?JSON.parse(yield r.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),o?{config:o}:{})})}function gIr(t){var r;let n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(r=document.head)!==null&&r!==void 0?r:document.body}}function yIr(t,r,n={},o){var i,s,a,l,u,c;return Ote(this,void 0,void 0,function*(){let f=n.theme?JD(SEe[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,d=Vce(n.actions)?n.actions:uwt({},cwt,(s=n.actions)!==null&&s!==void 0?s:{}),p=Object.assign(Object.assign({},uIr),n.i18n),h=(a=n.renderer)!==null&&a!==void 0?a:"canvas",m=(l=n.logLevel)!==null&&l!==void 0?l:l1.Warn,g=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization",y=typeof t=="string"?document.querySelector(t):t;if(!y)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){let k="vega-embed-style",{root:F,rootContainer:D}=gIr(y);if(!F.getElementById(k)){let L=document.createElement("style");L.id=k,L.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?aIr.toString():n.defaultStyle,D.appendChild(L)}}let b=fwt(r,n.mode),x=cIr[b](r,f);if(b==="vega-lite"&&x.$schema){let k=gEe(x.$schema);(0,EEe.satisfies)(Rte.vega,`^${k.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${k.version}, but current version is v${Rte.vega}.`)}y.classList.add("vega-embed"),d&&y.classList.add("has-actions"),y.innerHTML="";let v=y;if(d){let k=document.createElement("div");k.classList.add(dIr),y.appendChild(k),v=k}let w=n.patch;w&&(w instanceof Function?x=w(x):x=KD(x,w,!0,!1).newDocument),n.formatLocale&&l1.formatLocale(n.formatLocale),n.timeFormatLocale&&l1.timeFormatLocale(n.timeFormatLocale);let{ast:_}=n,S=l1.parse(x,b==="vega-lite"?{}:f,{ast:_}),C=new(n.viewClass||l1.View)(S,Object.assign({loader:o,logLevel:m,renderer:h},_?{expr:l1.expressionInterpreter}:{}));if(n.tooltip!==!1){let k;pIr(n.tooltip)?k=n.tooltip:k=new Nte(n.tooltip===!0?{}:n.tooltip).call,C.tooltip(k)}let{hover:E}=n;if(E===void 0&&(E=b==="vega"),E){let{hoverSet:k,updateSet:F}=typeof E=="boolean"?{}:E;C.hover(k,F)}n&&(n.width!=null&&C.width(n.width),n.height!=null&&C.height(n.height),n.padding!=null&&C.padding(n.padding)),yield C.initialize(v,n.bind).runAsync();let T;if(d!==!1){let k=y;if(n.defaultStyle!==!1){let D=document.createElement("details");D.title=p.CLICK_TO_VIEW_ACTIONS,y.append(D),k=D;let L=document.createElement("summary");L.innerHTML=fIr,D.append(L),T=P=>{D.contains(P.target)||D.removeAttribute("open")},document.addEventListener("click",T)}let F=document.createElement("div");if(k.append(F),F.classList.add("vega-actions"),d===!0||d.export!==!1){for(let D of["svg","png"])if(d===!0||d.export===!0||d.export[D]){let L=p[`${D.toUpperCase()}_ACTION`],P=document.createElement("a");P.text=L,P.href="#",P.target="_blank",P.download=`${g}.${D}`,P.addEventListener("mousedown",function(R){return Ote(this,void 0,void 0,function*(){R.preventDefault();let V=yield C.toImageURL(D,n.scaleFactor);this.href=V})}),F.append(P)}}if(d===!0||d.source!==!1){let D=document.createElement("a");D.text=p.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(L){var P,R;iwt((0,Fte.default)(r),(P=n.sourceHeader)!==null&&P!==void 0?P:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"",b),L.preventDefault()}),F.append(D)}if(b==="vega-lite"&&(d===!0||d.compiled!==!1)){let D=document.createElement("a");D.text=p.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(L){var P,R;iwt((0,Fte.default)(x),(P=n.sourceHeader)!==null&&P!==void 0?P:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"","vega"),L.preventDefault()}),F.append(D)}if(d===!0||d.editor!==!1){let D=(c=n.editorUrl)!==null&&c!==void 0?c:"https://vega.github.io/editor/",L=document.createElement("a");L.text=p.EDITOR_ACTION,L.href="#",L.addEventListener("click",function(P){sIr(window,D,{config:f,mode:b,renderer:h,spec:(0,Fte.default)(r)}),P.preventDefault()}),F.append(L)}}function I(){T&&document.removeEventListener("click",T),C.finalize()}return{view:C,spec:r,vgSpec:x,finalize:I}})}var Fte,EEe,aIr,CEe,l1,ZO,Mte,cwt,uIr,U6,Rte,cIr,fIr,dIr,bIr,lk=N(()=>{"use strict";cGe();Fte=Al(dGe()),EEe=Al(nqe());h2e();h2e();R1t();P1t();twt();owt();aIr=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(t,r){return this.substr(!r||r<0?0:+r,t.length)===t});l1=p2e,ZO=mEe,Mte=typeof window<"u"?window:void 0;ZO===void 0&&(!((CEe=Mte?.vl)===null||CEe===void 0)&&CEe.compile)&&(ZO=Mte.vl);cwt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},uIr={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},U6={vega:"Vega","vega-lite":"Vega-Lite"},Rte={vega:l1.version,"vega-lite":ZO?ZO.version:"not available"},cIr={vega:t=>t,"vega-lite":(t,r)=>ZO.compile(t,{config:r}).spec},fIr=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,dIr="chart-wrapper";bIr=mIr});var Pte=mt((vbi,pwt)=>{"use strict";var dwt=Object.getOwnPropertySymbols,xIr=Object.prototype.hasOwnProperty,vIr=Object.prototype.propertyIsEnumerable;function wIr(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function _Ir(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}pwt.exports=_Ir()?Object.assign:function(t,r){for(var n,o=wIr(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)xIr.call(n,a)&&(o[a]=n[a]);if(dwt){i=dwt(n);for(var l=0;l<i.length;l++)vIr.call(n,i[l])&&(o[i[l]]=n[i[l]])}}return o}});var bwt=mt(AEe=>{"use strict";Object.defineProperty(AEe,"__esModule",{value:!0});AEe.StyleSheet=ywt;var SIr=Pte(),CIr=EIr(SIr);function EIr(t){return t&&t.__esModule?t:{default:t}}function TIr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function TEe(t){return t[t.length-1]}function hwt(t){if(t.sheet)return t.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===t)return document.styleSheets[r]}var uk=typeof window<"u",gwt=!1,AIr=!1,kIr=function(){if(uk){var t=document.createElement("div");return t.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",t.getElementsByTagName("i").length===1}}();function mwt(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function ywt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.speedy,n=r===void 0?!gwt&&!AIr:r,o=t.maxLength,i=o===void 0?uk&&kIr?4e3:65e3:o;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,CIr.default)(ywt.prototype,{getSheet:function(){return hwt(TEe(this.tags))},inject:function(){var r=this;if(this.injected)throw new Error("already injected stylesheet!");uk?this.tags[0]=mwt():this.sheet={cssRules:[],insertRule:function(o){r.sheet.cssRules.push({cssText:o})}},this.injected=!0},speedy:function(r){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+r+") earlier in your app, or call flush() before speedy("+r+")");this.isSpeedy=!!r},_insert:function(r){try{var n=this.getSheet();n.insertRule(r,r.indexOf("@import")!==-1?0:n.cssRules.length)}catch{gwt&&console.warn("whoops, illegal rule inserted",r)}},insert:function(r){if(uk)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(r);else if(r.indexOf("@import")!==-1){var n=TEe(this.tags);n.insertBefore(document.createTextNode(r),n.firstChild)}else TEe(this.tags).appendChild(document.createTextNode(r));else this.sheet.insertRule(r,r.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,uk&&this.ctr%this.maxLength===0&&this.tags.push(mwt()),this.ctr-1},delete:function(r){return this.replace(r,"")},flush:function(){uk?(this.tags.forEach(function(r){return r.parentNode.removeChild(r)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!uk)return this.sheet.cssRules;var r=[];return this.tags.forEach(function(n){return r.splice.apply(r,[r.length,0].concat(TIr(Array.from(hwt(n).cssRules))))}),r}})});var vwt=mt((_bi,xwt)=>{"use strict";var IIr=/-(.)/g;function DIr(t){return t.replace(IIr,function(r,n){return n.toUpperCase()})}xwt.exports=DIr});var _wt=mt((Sbi,wwt)=>{"use strict";var NIr=vwt(),MIr=/^-ms-/;function FIr(t){return NIr(t.replace(MIr,"ms-"))}wwt.exports=FIr});var Swt=mt(kEe=>{"use strict";Object.defineProperty(kEe,"__esModule",{value:!0});var Lte={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function OIr(t,r){return t+r.charAt(0).toUpperCase()+r.substring(1)}var RIr=["Webkit","ms","Moz","O"];Object.keys(Lte).forEach(function(t){RIr.forEach(function(r){Lte[OIr(r,t)]=Lte[t]})});var PIr={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},LIr={isUnitlessNumber:Lte,shorthandPropertyExpansions:PIr};kEe.default=LIr});var Ewt=mt((Ebi,Cwt)=>{"use strict";function jte(t){return function(){return t}}var ck=function(){};ck.thatReturns=jte;ck.thatReturnsFalse=jte(!1);ck.thatReturnsTrue=jte(!0);ck.thatReturnsNull=jte(null);ck.thatReturnsThis=function(){return this};ck.thatReturnsArgument=function(t){return t};Cwt.exports=ck});var IEe=mt((Tbi,Twt)=>{"use strict";var jIr=Ewt(),BIr=jIr;Twt.exports=BIr});var Iwt=mt(DEe=>{"use strict";Object.defineProperty(DEe,"__esModule",{value:!0});var $Ir=Swt(),zIr=kwt($Ir),UIr=IEe(),Abi=kwt(UIr);function kwt(t){return t&&t.__esModule?t:{default:t}}var Awt=zIr.default.isUnitlessNumber;function VIr(t,r,n){var o=r==null||typeof r=="boolean"||r==="";if(o)return"";var i=isNaN(r);if(i||r===0||Awt.hasOwnProperty(t)&&Awt[t])return""+r;if(typeof r=="string"){if(0&&n&&r!=="0"){var s,a,l;if(a)var u}r=r.trim()}return r+"px"}DEe.default=VIr});var Nwt=mt((Ibi,Dwt)=>{"use strict";var GIr=/([A-Z])/g;function WIr(t){return t.replace(GIr,"-$1").toLowerCase()}Dwt.exports=WIr});var Fwt=mt((Dbi,Mwt)=>{"use strict";var qIr=Nwt(),HIr=/^ms-/;function YIr(t){return qIr(t).replace(HIr,"-ms-")}Mwt.exports=YIr});var Rwt=mt((Nbi,Owt)=>{"use strict";function XIr(t){var r={};return function(n){return r.hasOwnProperty(n)||(r[n]=t.call(this,n)),r[n]}}Owt.exports=XIr});var NEe=mt(G6=>{"use strict";Object.defineProperty(G6,"__esModule",{value:!0});G6.processStyleName=void 0;G6.createMarkupForStyles=iDr;var KIr=_wt(),Mbi=V6(KIr),ZIr=Iwt(),QIr=V6(ZIr),JIr=Fwt(),eDr=V6(JIr),tDr=Rwt(),rDr=V6(tDr),nDr=IEe(),Fbi=V6(nDr);function V6(t){return t&&t.__esModule?t:{default:t}}var oDr=G6.processStyleName=(0,rDr.default)(eDr.default);function iDr(t,r){var n="";for(var o in t){var i=o.indexOf("--")===0;if(t.hasOwnProperty(o)&&o!=="label"){var s=t[o];s!=null&&(i?n+=o+":"+s+";":(n+=oDr(o)+":",n+=(0,QIr.default)(o,s,r)+";"))}}return n||null}});var Lwt=mt(FEe=>{"use strict";Object.defineProperty(FEe,"__esModule",{value:!0});var Pwt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};FEe.default=MEe;function sDr(t){return t==null||t===!1||(typeof t>"u"?"undefined":Pwt(t))==="object"&&Object.keys(t).length===0}function aDr(t){if(sDr(t))return null;if((typeof t>"u"?"undefined":Pwt(t))!=="object")return t;for(var r={},n=Object.keys(t),o=!1,i=0;i<n.length;i++){var s=t[n[i]],a=MEe(s);(a===null||a!==s)&&(o=!0),a!==null&&(r[n[i]]=a)}return Object.keys(r).length===0?null:o?r:t}function lDr(t){var r=!1,n=[];return t.forEach(function(o){var i=MEe(o);(i===null||i!==o)&&(r=!0),i!==null&&n.push(i)}),n.length==0?null:r?n:t}function MEe(t){return Array.isArray(t)?lDr(t):aDr(t)}});var $wt=mt((Bte,Bwt)=>{"use strict";Object.defineProperty(Bte,"__esModule",{value:!0});var Kt=["Webkit"],jwt=["Moz"],Us=["ms"],pg=["Webkit","Moz"],bb=["Webkit","ms"],W6=["Webkit","Moz","ms"];Bte.default={plugins:[],prefixMap:{appearance:pg,userSelect:W6,textEmphasisPosition:Kt,textEmphasis:Kt,textEmphasisStyle:Kt,textEmphasisColor:Kt,boxDecorationBreak:Kt,clipPath:Kt,maskImage:Kt,maskMode:Kt,maskRepeat:Kt,maskPosition:Kt,maskClip:Kt,maskOrigin:Kt,maskSize:Kt,maskComposite:Kt,mask:Kt,maskBorderSource:Kt,maskBorderMode:Kt,maskBorderSlice:Kt,maskBorderWidth:Kt,maskBorderOutset:Kt,maskBorderRepeat:Kt,maskBorder:Kt,maskType:Kt,textDecorationStyle:Kt,textDecorationSkip:Kt,textDecorationLine:Kt,textDecorationColor:Kt,filter:Kt,fontFeatureSettings:Kt,breakAfter:W6,breakBefore:W6,breakInside:W6,columnCount:pg,columnFill:pg,columnGap:pg,columnRule:pg,columnRuleColor:pg,columnRuleStyle:pg,columnRuleWidth:pg,columns:pg,columnSpan:pg,columnWidth:pg,writingMode:bb,flex:Kt,flexBasis:Kt,flexDirection:Kt,flexGrow:Kt,flexFlow:Kt,flexShrink:Kt,flexWrap:Kt,alignContent:Kt,alignItems:Kt,alignSelf:Kt,justifyContent:Kt,order:Kt,transform:Kt,transformOrigin:Kt,transformOriginX:Kt,transformOriginY:Kt,backfaceVisibility:Kt,perspective:Kt,perspectiveOrigin:Kt,transformStyle:Kt,transformOriginZ:Kt,animation:Kt,animationDelay:Kt,animationDirection:Kt,animationFillMode:Kt,animationDuration:Kt,animationIterationCount:Kt,animationName:Kt,animationPlayState:Kt,animationTimingFunction:Kt,backdropFilter:Kt,fontKerning:Kt,scrollSnapType:bb,scrollSnapPointsX:bb,scrollSnapPointsY:bb,scrollSnapDestination:bb,scrollSnapCoordinate:bb,shapeImageThreshold:Kt,shapeImageMargin:Kt,shapeImageOutside:Kt,hyphens:W6,flowInto:bb,flowFrom:bb,regionFragment:bb,textAlignLast:jwt,tabSize:jwt,wrapFlow:Us,wrapThrough:Us,wrapMargin:Us,gridTemplateColumns:Us,gridTemplateRows:Us,gridTemplateAreas:Us,gridTemplate:Us,gridAutoColumns:Us,gridAutoRows:Us,gridAutoFlow:Us,grid:Us,gridRowStart:Us,gridColumnStart:Us,gridRowEnd:Us,gridRow:Us,gridColumn:Us,gridColumnEnd:Us,gridColumnGap:Us,gridRowGap:Us,gridArea:Us,gridGap:Us,textSizeAdjust:bb,borderImage:Kt,borderImageOutset:Kt,borderImageRepeat:Kt,borderImageSlice:Kt,borderImageSource:Kt,borderImageWidth:Kt,transitionDelay:Kt,transitionDuration:Kt,transitionProperty:Kt,transitionTimingFunction:Kt}};Bwt.exports=Bte.default});var OEe=mt(($te,zwt)=>{"use strict";Object.defineProperty($te,"__esModule",{value:!0});$te.default=uDr;function uDr(t){return t.charAt(0).toUpperCase()+t.slice(1)}zwt.exports=$te.default});var Vwt=mt((zte,Uwt)=>{"use strict";Object.defineProperty(zte,"__esModule",{value:!0});zte.default=pDr;var cDr=OEe(),fDr=dDr(cDr);function dDr(t){return t&&t.__esModule?t:{default:t}}function pDr(t,r,n){if(t.hasOwnProperty(r))for(var o=t[r],i=0,s=o.length;i<s;++i)n[o[i]+(0,fDr.default)(r)]=n[r]}Uwt.exports=zte.default});var Wwt=mt((Ute,Gwt)=>{"use strict";Object.defineProperty(Ute,"__esModule",{value:!0});Ute.default=hDr;function hDr(t,r,n,o,i){for(var s=0,a=t.length;s<a;++s){var l=t[s](r,n,o,i);if(l)return l}}Gwt.exports=Ute.default});var Hwt=mt((Vte,qwt)=>{"use strict";Object.defineProperty(Vte,"__esModule",{value:!0});Vte.default=yDr;var mDr=["-webkit-","-moz-",""],gDr={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function yDr(t,r){if(t==="cursor"&&gDr.hasOwnProperty(r))return mDr.map(function(n){return n+r})}qwt.exports=Vte.default});var QO=mt((Gte,Ywt)=>{"use strict";Object.defineProperty(Gte,"__esModule",{value:!0});Gte.default=xDr;var bDr=/-webkit-|-moz-|-ms-/;function xDr(t){return typeof t=="string"&&bDr.test(t)}Ywt.exports=Gte.default});var Kwt=mt((Wte,Xwt)=>{"use strict";Object.defineProperty(Wte,"__esModule",{value:!0});Wte.default=CDr;var vDr=QO(),wDr=_Dr(vDr);function _Dr(t){return t&&t.__esModule?t:{default:t}}var SDr=["-webkit-",""];function CDr(t,r){if(typeof r=="string"&&!(0,wDr.default)(r)&&r.indexOf("cross-fade(")>-1)return SDr.map(function(n){return r.replace(/cross-fade\(/g,n+"cross-fade(")})}Xwt.exports=Wte.default});var Qwt=mt((qte,Zwt)=>{"use strict";Object.defineProperty(qte,"__esModule",{value:!0});qte.default=IDr;var EDr=QO(),TDr=ADr(EDr);function ADr(t){return t&&t.__esModule?t:{default:t}}var kDr=["-webkit-",""];function IDr(t,r){if(typeof r=="string"&&!(0,TDr.default)(r)&&r.indexOf("filter(")>-1)return kDr.map(function(n){return r.replace(/filter\(/g,n+"filter(")})}Zwt.exports=qte.default});var t_t=mt((Hte,e_t)=>{"use strict";Object.defineProperty(Hte,"__esModule",{value:!0});Hte.default=DDr;var Jwt={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function DDr(t,r){if(t==="display"&&Jwt.hasOwnProperty(r))return Jwt[r]}e_t.exports=Hte.default});var o_t=mt((Yte,n_t)=>{"use strict";Object.defineProperty(Yte,"__esModule",{value:!0});Yte.default=MDr;var NDr={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r_t={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function MDr(t,r,n){t==="flexDirection"&&typeof r=="string"&&(r.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",r.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),r_t.hasOwnProperty(t)&&(n[r_t[t]]=NDr[r]||r)}n_t.exports=Yte.default});var s_t=mt((Xte,i_t)=>{"use strict";Object.defineProperty(Xte,"__esModule",{value:!0});Xte.default=jDr;var FDr=QO(),ODr=RDr(FDr);function RDr(t){return t&&t.__esModule?t:{default:t}}var PDr=["-webkit-","-moz-",""],LDr=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function jDr(t,r){if(typeof r=="string"&&!(0,ODr.default)(r)&&LDr.test(r))return PDr.map(function(n){return n+r})}i_t.exports=Xte.default});var l_t=mt((Kte,a_t)=>{"use strict";Object.defineProperty(Kte,"__esModule",{value:!0});Kte.default=VDr;var BDr=QO(),$Dr=zDr(BDr);function zDr(t){return t&&t.__esModule?t:{default:t}}var UDr=["-webkit-",""];function VDr(t,r){if(typeof r=="string"&&!(0,$Dr.default)(r)&&r.indexOf("image-set(")>-1)return UDr.map(function(n){return r.replace(/image-set\(/g,n+"image-set(")})}a_t.exports=Kte.default});var c_t=mt((Zte,u_t)=>{"use strict";Object.defineProperty(Zte,"__esModule",{value:!0});Zte.default=GDr;function GDr(t,r){if(t==="position"&&r==="sticky")return["-webkit-sticky","sticky"]}u_t.exports=Zte.default});var d_t=mt((Qte,f_t)=>{"use strict";Object.defineProperty(Qte,"__esModule",{value:!0});Qte.default=YDr;var WDr=["-webkit-","-moz-",""],qDr={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},HDr={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function YDr(t,r){if(qDr.hasOwnProperty(t)&&HDr.hasOwnProperty(r))return WDr.map(function(n){return n+r})}f_t.exports=Qte.default});var p_t={};fn(p_t,{default:()=>JDr});function ZDr(t){return"-"+t.toLowerCase()}function QDr(t){if(REe.hasOwnProperty(t))return REe[t];var r=t.replace(XDr,ZDr);return REe[t]=KDr.test(r)?"-"+r:r}var XDr,KDr,REe,JDr,h_t=N(()=>{"use strict";XDr=/[A-Z]/g,KDr=/^ms-/,REe={};JDr=QDr});var g_t=mt((Jte,m_t)=>{"use strict";Object.defineProperty(Jte,"__esModule",{value:!0});Jte.default=nNr;var eNr=(h_t(),kl(p_t)),tNr=rNr(eNr);function rNr(t){return t&&t.__esModule?t:{default:t}}function nNr(t){return(0,tNr.default)(t)}m_t.exports=Jte.default});var x_t=mt((ere,b_t)=>{"use strict";Object.defineProperty(ere,"__esModule",{value:!0});ere.default=dNr;var oNr=g_t(),iNr=PEe(oNr),sNr=QO(),aNr=PEe(sNr),lNr=OEe(),y_t=PEe(lNr);function PEe(t){return t&&t.__esModule?t:{default:t}}var uNr={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},cNr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function fNr(t,r){if((0,aNr.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=n.length;o<i;++o){var s=n[o],a=[s];for(var l in r){var u=(0,iNr.default)(l);if(s.indexOf(u)>-1&&u!=="order")for(var c=r[l],f=0,d=c.length;f<d;++f)a.unshift(s.replace(u,cNr[c[f]]+u))}n[o]=a.join(",")}return n.join(",")}function dNr(t,r,n,o){if(typeof r=="string"&&uNr.hasOwnProperty(t)){var i=fNr(r,o),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-moz-|-ms-/.test(l)}).join(",");if(t.indexOf("Webkit")>-1)return s;var a=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-webkit-|-ms-/.test(l)}).join(",");return t.indexOf("Moz")>-1?a:(n["Webkit"+(0,y_t.default)(t)]=s,n["Moz"+(0,y_t.default)(t)]=a,i)}}b_t.exports=ere.default});var w_t=mt(LEe=>{"use strict";Object.defineProperty(LEe,"__esModule",{value:!0});LEe.default=$Nr;var pNr=$wt(),hNr=op(pNr),mNr=Vwt(),gNr=op(mNr),yNr=Wwt(),bNr=op(yNr),xNr=Hwt(),vNr=op(xNr),wNr=Kwt(),_Nr=op(wNr),SNr=Qwt(),CNr=op(SNr),ENr=t_t(),TNr=op(ENr),ANr=o_t(),kNr=op(ANr),INr=s_t(),DNr=op(INr),NNr=l_t(),MNr=op(NNr),FNr=c_t(),ONr=op(FNr),RNr=d_t(),PNr=op(RNr),LNr=x_t(),jNr=op(LNr);function op(t){return t&&t.__esModule?t:{default:t}}var BNr=[_Nr.default,vNr.default,CNr.default,kNr.default,DNr.default,MNr.default,ONr.default,PNr.default,jNr.default,TNr.default],v_t=hNr.default.prefixMap;function $Nr(t){for(var r in t){var n=t[r],o=(0,bNr.default)(BNr,r,n,t,v_t);o&&(t[r]=o),(0,gNr.default)(v_t,r,t)}return t}});var C_t=mt(JO=>{"use strict";Object.defineProperty(JO,"__esModule",{value:!0});var jEe=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};JO.PluginSet=S_t;JO.fallbacks=qNr;JO.contentWrap=YNr;JO.prefixes=XNr;var zNr=Pte(),BEe=__t(zNr),UNr=NEe(),VNr=w_t(),GNr=__t(VNr);function __t(t){return t&&t.__esModule?t:{default:t}}var WNr=function(t){return t==="development"||!t}("production");function S_t(t){this.fns=t||[]}(0,BEe.default)(S_t.prototype,{add:function(){for(var r=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach(function(s){r.fns.indexOf(s)>=0?WNr&&console.warn("adding the same plugin again, ignoring"):r.fns=[s].concat(r.fns)})},remove:function(r){this.fns=this.fns.filter(function(n){return n!==r})},clear:function(){this.fns=[]},transform:function(r){return this.fns.reduce(function(n,o){return o(n)},r)}});function qNr(t){var r=Object.keys(t.style).map(function(i){return Array.isArray(t.style[i])}).indexOf(!0)>=0;if(r){var n=t.style,o=Object.keys(n).reduce(function(i,s){return i[s]=Array.isArray(n[s])?n[s].join("; "+(0,UNr.processStyleName)(s)+": "):n[s],i},{});return(0,BEe.default)({},t,{style:o})}return t}var HNr=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function YNr(t){if(t.style.content){var r=t.style.content;return HNr.indexOf(r)>=0||/^(attr|calc|counters?|url)\(/.test(r)||r.charAt(0)===r.charAt(r.length-1)&&(r.charAt(0)==='"'||r.charAt(0)==="'")?t:jEe({},t,{style:jEe({},t.style,{content:'"'+r+'"'})})}return t}function XNr(t){return(0,BEe.default)({},t,{style:(0,GNr.default)(jEe({},t.style))})}});var T_t=mt($Ee=>{"use strict";Object.defineProperty($Ee,"__esModule",{value:!0});$Ee.default=KNr;function KNr(t,r){for(var n=1540483477,o=24,i=r^t.length,s=t.length,a=0;s>=4;){var l=ZNr(t,a);l=fk(l,n),l^=l>>>o,l=fk(l,n),i=fk(i,n),i^=l,a+=4,s-=4}switch(s){case 3:i^=E_t(t,a),i^=t.charCodeAt(a+2)<<16,i=fk(i,n);break;case 2:i^=E_t(t,a),i=fk(i,n);break;case 1:i^=t.charCodeAt(a),i=fk(i,n);break}return i^=i>>>13,i=fk(i,n),i^=i>>>15,i>>>0}function ZNr(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)+(t.charCodeAt(r++)<<16)+(t.charCodeAt(r)<<24)}function E_t(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)}function fk(t,r){t=t|0,r=r|0;var n=t&65535,o=t>>>16,i=n*r+((o*r&65535)<<16)|0;return i}});var eR=mt(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.compose=Lt.merge=Lt.$=Lt.style=Lt.presets=Lt.keyframes=Lt.fontFace=Lt.insertGlobal=Lt.insertRule=Lt.plugins=Lt.styleSheet=void 0;Lt.speedy=iMr;Lt.simulations=aMr;Lt.simulate=lMr;Lt.cssLabels=uMr;Lt.isLikeRule=qEe;Lt.idFor=HEe;Lt.css=Sl;Lt.rehydrate=SMr;Lt.flush=CMr;Lt.select=YEe;Lt.parent=TMr;Lt.media=AMr;Lt.pseudo=rn;Lt.active=kMr;Lt.any=IMr;Lt.checked=DMr;Lt.disabled=NMr;Lt.empty=MMr;Lt.enabled=FMr;Lt._default=OMr;Lt.first=RMr;Lt.firstChild=PMr;Lt.firstOfType=LMr;Lt.fullscreen=jMr;Lt.focus=BMr;Lt.hover=$Mr;Lt.indeterminate=zMr;Lt.inRange=UMr;Lt.invalid=VMr;Lt.lastChild=GMr;Lt.lastOfType=WMr;Lt.left=qMr;Lt.link=HMr;Lt.onlyChild=YMr;Lt.onlyOfType=XMr;Lt.optional=KMr;Lt.outOfRange=ZMr;Lt.readOnly=QMr;Lt.readWrite=JMr;Lt.required=eFr;Lt.right=tFr;Lt.root=rFr;Lt.scope=nFr;Lt.target=oFr;Lt.valid=iFr;Lt.visited=sFr;Lt.dir=aFr;Lt.lang=lFr;Lt.not=uFr;Lt.nthChild=cFr;Lt.nthLastChild=fFr;Lt.nthLastOfType=dFr;Lt.nthOfType=pFr;Lt.after=hFr;Lt.before=mFr;Lt.firstLetter=gFr;Lt.firstLine=yFr;Lt.selection=bFr;Lt.backdrop=xFr;Lt.placeholder=vFr;Lt.cssFor=wFr;Lt.attribsFor=_Fr;var QNr=Pte(),JNr=GEe(QNr),eMr=bwt(),VEe=NEe(),tMr=Lwt(),Q2=GEe(tMr),u1=C_t(),rMr=T_t(),nMr=GEe(rMr);function GEe(t){return t&&t.__esModule?t:{default:t}}function oMr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function H6(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var ip=Lt.styleSheet=new eMr.StyleSheet;ip.inject();function iMr(t){return ip.speedy(t)}var Y6=Lt.plugins=ip.plugins=new u1.PluginSet([u1.prefixes,u1.contentWrap,u1.fallbacks]);Y6.media=new u1.PluginSet;Y6.fontFace=new u1.PluginSet;Y6.keyframes=new u1.PluginSet([u1.prefixes,u1.fallbacks]);var X6=!1,sMr=!1,are=typeof window<"u",WEe=X6,A_t=!1,k_t=!1;function aMr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;WEe=!!t}function lMr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,Q2.default)(r),r?WEe?r.reduce(function(o,i){return o["data-simulate-"+nre(i)]="",o},{}):(A_t||(console.warn("can't simulate without once calling simulations(true)"),A_t=!0),!X6&&!sMr&&!k_t&&(console.warn("don't use simulation outside dev"),k_t=!0),{}):{}}var K6=X6;function uMr(t){K6=!!t}function nre(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,r)}function Z6(t){var r=JSON.stringify(t),n=(0,nMr.default)(r).toString(36);return t.label&&t.label.length>0&&X6?nre(t.label.join("."),"-")+"-"+n:n}function qEe(t){var r=Object.keys(t).filter(function(n){return n!=="toString"});return r.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(r[0])}function HEe(t){var r=Object.keys(t).filter(function(i){return i!=="toString"});if(r.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,o=n.exec(r[0]);if(!o)throw new Error("not a rule");return o[1]}var cMr=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function zEe(t){if(t.indexOf(",")===-1)return[t];for(var r=[],n=[],o=0,i;i=cMr.exec(t);)switch(i[0]){case"(":o++;break;case")":o--;break;case",":if(o)break;r.push(i.index)}for(i=r.length;i--;)n.unshift(t.slice(r[i]+1)),t=t.slice(0,r[i]);return n.unshift(t),n}function I_t(t,r){if(!t)return r.replace(/\&/g,"");if(!r)return".css-"+t+",[data-css-"+t+"]";var n=zEe(r).map(function(o){return o.indexOf("&")>=0?[o.replace(/\&/mg,".css-"+t),o.replace(/\&/mg,"[data-css-"+t+"]")].join(","):".css-"+t+o+",[data-css-"+t+"]"+o}).join(",");return WEe&&/^\&\:/.exec(r)&&!/\s/.exec(r)&&(n+=",.css-"+t+"[data-simulate-"+nre(r)+"],[data-css-"+t+"][data-simulate-"+nre(r)+"]"),n}function UEe(t){var r=t.selector,n=t.style,o=Y6.transform({selector:r,style:n});return o.selector+"{"+(0,VEe.createMarkupForStyles)(o.style)+"}"}function ore(t){var r=void 0,n=void 0,o=void 0,i=void 0;return Object.keys(t).forEach(function(s){s.indexOf("&")>=0?(n=n||{},n[s]=t[s]):s.indexOf("@media")===0?(o=o||{},o[s]=ore(t[s])):s.indexOf("@supports")===0?(i=i||{},i[s]=ore(t[s])):s==="label"?t.label.length>0&&(r=r||{},r.label=K6?t.label.join("."):""):(r=r||{},r[s]=t[s])}),{plain:r,selects:n,medias:o,supports:i}}function ire(t,r){var n=[],o=r.plain,i=r.selects,s=r.medias,a=r.supports;return o&&n.push(UEe({style:o,selector:I_t(t)})),i&&Object.keys(i).forEach(function(l){return n.push(UEe({style:i[l],selector:I_t(t,l)}))}),s&&Object.keys(s).forEach(function(l){return n.push(l+"{"+ire(t,s[l]).join("")+"}")}),a&&Object.keys(a).forEach(function(l){return n.push(l+"{"+ire(t,a[l]).join("")+"}")}),n}var hg=ip.inserted={};function fMr(t){if(!hg[t.id]){hg[t.id]=!0;var r=ore(t.style),n=ire(t.id,r);hg[t.id]=are?!0:n,n.forEach(function(o){return ip.insert(o)})}}var q6=ip.registered={};function lre(t){q6[t.id]||(q6[t.id]=t)}function dMr(t){if(qEe(t)){var r=q6[HEe(t)];if(r==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return r}return t}var rre={};function pMr(t){if(lre(t),fMr(t),rre[t.id])return rre[t.id];var r=H6({},"data-css-"+t.id,K6&&t.label||"");return Object.defineProperty(r,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),rre[t.id]=r,r}function hMr(t){for(var r=[":",".","[",">"," "],n=!1,o=t.charAt(0),i=0;i<r.length;i++)if(o===r[i]){n=!0;break}return n||t.indexOf("&")>=0}function D_t(t,r){var n=zEe(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),o=zEe(r).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return o.reduce(function(i,s){return i.concat(n.map(function(a){return s.replace(/\&/g,a)}))},[]).join(",")}function mMr(t,r){return t?"@media "+t.substring(6)+" and "+r.substring(6):r}function gMr(t){return t.indexOf("@media")===0}function yMr(t){return t.indexOf("@supports")===0}function bMr(t,r){return t?"@supports "+t.substring(9)+" and "+r.substring(9):r}function O_t(t){for(var r=[],n=0;n<t.length;n++)Array.isArray(t[n])?r=r.concat(O_t(t[n])):r=r.concat(t[n]);return r}var N_t={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function dk(t,r){var n=r.selector,o=n===void 0?"":n,i=r.mq,s=i===void 0?"":i,a=r.supp,l=a===void 0?"":a,u=r.src,c=u===void 0?{}:u;Array.isArray(c)||(c=[c]),c=O_t(c),c.forEach(function(f){if(qEe(f)){var d=dMr(f);if(d.type!=="css")throw new Error("cannot merge this rule");f=d.style}f=(0,Q2.default)(f),f&&f.composes&&dk(t,{selector:o,mq:s,supp:l,src:f.composes}),Object.keys(f||{}).forEach(function(p){if(hMr(p))N_t[p]&&N_t[p].forEach(function(m){return dk(t,{selector:D_t(o,m),mq:s,supp:l,src:f[p]})}),dk(t,{selector:D_t(o,p),mq:s,supp:l,src:f[p]});else if(gMr(p))dk(t,{selector:o,mq:mMr(s,p),supp:l,src:f[p]});else if(yMr(p))dk(t,{selector:o,mq:s,supp:bMr(l,p),src:f[p]});else if(p!=="composes"){var h=t;l&&(h[l]=h[l]||{},h=h[l]),s&&(h[s]=h[s]||{},h=h[s]),o&&(h[o]=h[o]||{},h=h[o]),p==="label"?K6&&(t.label=t.label.concat(f.label)):h[p]=f[p]}})})}function M_t(t){var r={label:[]};dk(r,{src:t});var n={id:Z6(r),style:r,label:K6?r.label.join("."):"",type:"css"};return pMr(n)}var sre={};Object.defineProperty(sre,"toString",{enumerable:!1,value:function(){return"css-nil"}});var tre=typeof WeakMap<"u"?[sre,new WeakMap,new WeakMap,new WeakMap]:[sre],F_t=!1;function xMr(t){return function(r){if(tre[r.length]){for(var n=tre[r.length],o=0;o<r.length-1;)n.has(r[o])||n.set(r[o],new WeakMap),n=n.get(r[o]),o++;if(n.has(r[r.length-1])){var i=n.get(r[o]);if(q6[i.toString().substring(4)])return i}}var s=t(r);if(tre[r.length]){for(var a=0,l=tre[r.length];a<r.length-1;)l=l.get(r[a]),a++;try{l.set(r[a],s)}catch{if(X6&&!F_t){var u;F_t=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(oMr(r))),console.warn("this should NOT happen, please file a bug on the github repo.")}}}return s}}var vMr=typeof WeakMap<"u"?xMr(M_t):M_t;function Sl(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r[0]&&r[0].length&&r[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return r=(0,Q2.default)(r),r?vMr(r):sre}Sl.insert=function(t){var r={id:Z6(t),css:t,type:"raw"};lre(r),hg[r.id]||(ip.insert(r.css),hg[r.id]=are?!0:[r.css])};var Bbi=Lt.insertRule=Sl.insert;Sl.global=function(t,r){if(r=(0,Q2.default)(r),r)return Sl.insert(UEe({selector:t,style:r}))};var $bi=Lt.insertGlobal=Sl.global;function wMr(t){if(!hg[t.id]){var r=Object.keys(t.keyframes).map(function(o){var i=Y6.keyframes.transform({id:t.id,name:o,style:t.keyframes[o]});return i.name+"{"+(0,VEe.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(o){return"@"+o+"keyframes "+(t.name+"_"+t.id)+"{"+r+"}"});n.forEach(function(o){return ip.insert(o)}),hg[t.id]=are?!0:n}}Sl.keyframes=function(t,r){r||(r=t,t="animation"),r=(0,Q2.default)(r)||{};var n={id:Z6({name:t,kfs:r}),type:"keyframes",name:t,keyframes:r};return lre(n),wMr(n),t+"_"+n.id};Sl.fontFace=function(t){t=(0,Q2.default)(t);var r={id:Z6(t),type:"font-face",font:t};return lre(r),_Mr(r),t.fontFamily};var zbi=Lt.fontFace=Sl.fontFace,Ubi=Lt.keyframes=Sl.keyframes;function _Mr(t){if(!hg[t.id]){var r="@font-face{"+(0,VEe.createMarkupForStyles)(t.font)+"}";ip.insert(r),hg[t.id]=are?!0:[r]}}function SMr(t){(0,JNr.default)(hg,t.reduce(function(r,n){return r[n]=!0,r},{}))}function CMr(){hg=ip.inserted={},q6=ip.registered={},rre={},ip.flush(),ip.inject()}var Vbi=Lt.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"},EMr=Lt.style=Sl;function YEe(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t?Sl(H6({},t,n)):EMr(n)}var Gbi=Lt.$=YEe;function TMr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Sl(H6({},t+" &",n))}var Wbi=Lt.merge=Sl,qbi=Lt.compose=Sl;function AMr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Sl(H6({},"@media "+t,n))}function rn(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Sl(H6({},t,n))}function kMr(t){return rn(":active",t)}function IMr(t){return rn(":any",t)}function DMr(t){return rn(":checked",t)}function NMr(t){return rn(":disabled",t)}function MMr(t){return rn(":empty",t)}function FMr(t){return rn(":enabled",t)}function OMr(t){return rn(":default",t)}function RMr(t){return rn(":first",t)}function PMr(t){return rn(":first-child",t)}function LMr(t){return rn(":first-of-type",t)}function jMr(t){return rn(":fullscreen",t)}function BMr(t){return rn(":focus",t)}function $Mr(t){return rn(":hover",t)}function zMr(t){return rn(":indeterminate",t)}function UMr(t){return rn(":in-range",t)}function VMr(t){return rn(":invalid",t)}function GMr(t){return rn(":last-child",t)}function WMr(t){return rn(":last-of-type",t)}function qMr(t){return rn(":left",t)}function HMr(t){return rn(":link",t)}function YMr(t){return rn(":only-child",t)}function XMr(t){return rn(":only-of-type",t)}function KMr(t){return rn(":optional",t)}function ZMr(t){return rn(":out-of-range",t)}function QMr(t){return rn(":read-only",t)}function JMr(t){return rn(":read-write",t)}function eFr(t){return rn(":required",t)}function tFr(t){return rn(":right",t)}function rFr(t){return rn(":root",t)}function nFr(t){return rn(":scope",t)}function oFr(t){return rn(":target",t)}function iFr(t){return rn(":valid",t)}function sFr(t){return rn(":visited",t)}function aFr(t,r){return rn(":dir("+t+")",r)}function lFr(t,r){return rn(":lang("+t+")",r)}function uFr(t,r){var n=t.split(",").map(function(o){return o.trim()}).map(function(o){return":not("+o+")"});return n.length===1?rn(":not("+t+")",r):YEe(n.join(""),r)}function cFr(t,r){return rn(":nth-child("+t+")",r)}function fFr(t,r){return rn(":nth-last-child("+t+")",r)}function dFr(t,r){return rn(":nth-last-of-type("+t+")",r)}function pFr(t,r){return rn(":nth-of-type("+t+")",r)}function hFr(t){return rn("::after",t)}function mFr(t){return rn("::before",t)}function gFr(t){return rn("::first-letter",t)}function yFr(t){return rn("::first-line",t)}function bFr(t){return rn("::selection",t)}function xFr(t){return rn("::backdrop",t)}function vFr(t){return Sl({"::placeholder":t})}function wFr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,Q2.default)(r),r?r.map(function(o){var i={label:[]};return dk(i,{src:o}),ire(Z6(i),ore(i)).join("")}).join(""):""}function _Fr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r=(0,Q2.default)(r);var o=r?r.map(function(i){HEe(i);var s=Object.keys(i)[0],a=i[s];return s+'="'+(a||"")+'"'}).join(" "):"";return o}});var XEe=mt(ure=>{"use strict";Object.defineProperty(ure,"__esModule",{value:!0});function SFr(t){return t.name!=null}ure.isSurfaceInfo=SFr;function CFr(t){return t.drawArea instanceof HTMLElement}ure.isSurface=CFr});var mre={};fn(mre,{Component:()=>Q6,cloneElement:()=>j_t,createElement:()=>cre,default:()=>LFr,h:()=>cre,options:()=>Kf,render:()=>Y_t,rerender:()=>JEe});function EFr(){}function cre(t,r){var n=R_t,o,i,s,a;for(a=arguments.length;a-- >2;)tR.push(arguments[a]);for(r&&r.children!=null&&(tR.length||tR.push(r.children),delete r.children);tR.length;)if((i=tR.pop())&&i.pop!==void 0)for(a=i.length;a--;)tR.push(i[a]);else typeof i=="boolean"&&(i=null),(s=typeof t!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&o?n[n.length-1]+=i:n===R_t?n=[i]:n.push(i),o=s;var l=new EFr;return l.nodeName=t,l.children=n,l.attributes=r??void 0,l.key=r?.key,Kf.vnode!==void 0&&Kf.vnode(l),l}function eS(t,r){for(var n in r)t[n]=r[n];return t}function j_t(t,r){return cre(t.nodeName,eS(eS({},t.attributes),r),arguments.length>2?[].slice.call(arguments,2):t.children)}function B_t(t){!t._dirty&&(t._dirty=!0)&&KEe.push(t)==1&&(Kf.debounceRendering||TFr)(JEe)}function JEe(){var t,r=KEe;for(KEe=[];t=r.pop();)t._dirty&&pre(t)}function kFr(t,r,n){return typeof r=="string"||typeof r=="number"?t.splitText!==void 0:typeof r.nodeName=="string"?!t._componentConstructor&&$_t(t,r.nodeName):n||t._componentConstructor===r.nodeName}function $_t(t,r){return t.normalizedNodeName===r||t.nodeName.toLowerCase()===r.toLowerCase()}function z_t(t){var r=eS({},t.attributes);r.children=t.children;var n=t.nodeName.defaultProps;if(n!==void 0)for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}function IFr(t,r){var n=r?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function eTe(t){var r=t.parentNode;r&&r.removeChild(t)}function P_t(t,r,n,o,i){if(r==="className"&&(r="class"),r!=="key")if(r==="ref")n&&n(null),o&&o(t);else if(r==="class"&&!i)t.className=o||"";else if(r==="style"){if((!o||typeof o=="string"||typeof n=="string")&&(t.style.cssText=o||""),o&&typeof o=="object"){if(typeof n!="string")for(var s in n)s in o||(t.style[s]="");for(var s in o)t.style[s]=typeof o[s]=="number"&&AFr.test(s)===!1?o[s]+"px":o[s]}}else if(r==="dangerouslySetInnerHTML")o&&(t.innerHTML=o.__html||"");else if(r[0]=="o"&&r[1]=="n"){var a=r!==(r=r.replace(/Capture$/,""));r=r.toLowerCase().substring(2),o?n||t.addEventListener(r,L_t,a):t.removeEventListener(r,L_t,a),(t._listeners||(t._listeners={}))[r]=o}else if(r!=="list"&&r!=="type"&&!i&&r in t)DFr(t,r,o??""),(o==null||o===!1)&&t.removeAttribute(r);else{var l=i&&r!==(r=r.replace(/^xlink:?/,""));o==null||o===!1?l?t.removeAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase()):t.removeAttribute(r):typeof o!="function"&&(l?t.setAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase(),o):t.setAttribute(r,o))}}function DFr(t,r,n){try{t[r]=n}catch{}}function L_t(t){return this._listeners[t.type](Kf.event&&Kf.event(t)||t)}function V_t(){for(var t;t=U_t.pop();)Kf.afterMount&&Kf.afterMount(t),t.componentDidMount&&t.componentDidMount()}function G_t(t,r,n,o,i,s){ZEe++||(J2=i!=null&&i.ownerSVGElement!==void 0,fre=t!=null&&!("__preactattr_"in t));var a=W_t(t,r,n,o,s);return i&&a.parentNode!==i&&i.appendChild(a),--ZEe||(fre=!1,s||V_t()),a}function W_t(t,r,n,o,i){var s=t,a=J2;if((r==null||typeof r=="boolean")&&(r=""),typeof r=="string"||typeof r=="number")return t&&t.splitText!==void 0&&t.parentNode&&(!t._component||i)?t.nodeValue!=r&&(t.nodeValue=r):(s=document.createTextNode(r),t&&(t.parentNode&&t.parentNode.replaceChild(s,t),pk(t,!0))),s.__preactattr_=!0,s;var l=r.nodeName;if(typeof l=="function")return RFr(t,r,n,o);if(J2=l==="svg"?!0:l==="foreignObject"?!1:J2,l=String(l),(!t||!$_t(t,l))&&(s=IFr(l,J2),t)){for(;t.firstChild;)s.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(s,t),pk(t,!0)}var u=s.firstChild,c=s.__preactattr_,f=r.children;if(c==null){c=s.__preactattr_={};for(var d=s.attributes,p=d.length;p--;)c[d[p].name]=d[p].value}return!fre&&f&&f.length===1&&typeof f[0]=="string"&&u!=null&&u.splitText!==void 0&&u.nextSibling==null?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||u!=null)&&NFr(s,f,n,o,fre||c.dangerouslySetInnerHTML!=null),MFr(s,r.attributes,c),J2=a,s}function NFr(t,r,n,o,i){var s=t.childNodes,a=[],l={},u=0,c=0,f=s.length,d=0,p=r?r.length:0,h,m,g,y,b;if(f!==0)for(var x=0;x<f;x++){var v=s[x],w=v.__preactattr_,_=p&&w?v._component?v._component.__key:w.key:null;_!=null?(u++,l[_]=v):(w||(v.splitText!==void 0?!i||v.nodeValue.trim():i))&&(a[d++]=v)}if(p!==0)for(var x=0;x<p;x++){y=r[x],b=null;var _=y.key;if(_!=null)u&&l[_]!==void 0&&(b=l[_],l[_]=void 0,u--);else if(!b&&c<d){for(h=c;h<d;h++)if(a[h]!==void 0&&kFr(m=a[h],y,i)){b=m,a[h]=void 0,h===d-1&&d--,h===c&&c++;break}}b=W_t(b,y,n,o),g=s[x],b&&b!==t&&b!==g&&(g==null?t.appendChild(b):b===g.nextSibling?eTe(g):t.insertBefore(b,g))}if(u)for(var x in l)l[x]!==void 0&&pk(l[x],!1);for(;c<=d;)(b=a[d--])!==void 0&&pk(b,!1)}function pk(t,r){var n=t._component;n?hre(n):(t.__preactattr_!=null&&t.__preactattr_.ref&&t.__preactattr_.ref(null),(r===!1||t.__preactattr_==null)&&eTe(t),q_t(t))}function q_t(t){for(t=t.lastChild;t;){var r=t.previousSibling;pk(t,!0),t=r}}function MFr(t,r,n){var o;for(o in n)!(r&&r[o]!=null)&&n[o]!=null&&P_t(t,o,n[o],n[o]=void 0,J2);for(o in r)o!=="children"&&o!=="innerHTML"&&(!(o in n)||r[o]!==(o==="value"||o==="checked"?t[o]:n[o]))&&P_t(t,o,n[o],n[o]=r[o],J2)}function FFr(t){var r=t.constructor.name;(QEe[r]||(QEe[r]=[])).push(t)}function H_t(t,r,n){var o=QEe[t.name],i;if(t.prototype&&t.prototype.render?(i=new t(r,n),Q6.call(i,r,n)):(i=new Q6(r,n),i.constructor=t,i.render=OFr),o){for(var s=o.length;s--;)if(o[s].constructor===t){i.nextBase=o[s].nextBase,o.splice(s,1);break}}return i}function OFr(t,r,n){return this.constructor(t,n)}function dre(t,r,n,o,i){t._disable||(t._disable=!0,(t.__ref=r.ref)&&delete r.ref,(t.__key=r.key)&&delete r.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(r,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=r,t._disable=!1,n!==0&&(n===1||Kf.syncComponentUpdates!==!1||!t.base?pre(t,1,i):B_t(t)),t.__ref&&t.__ref(t))}function pre(t,r,n,o){if(!t._disable){var i=t.props,s=t.state,a=t.context,l=t.prevProps||i,u=t.prevState||s,c=t.prevContext||a,f=t.base,d=t.nextBase,p=f||d,h=t._component,m=!1,g,y,b;if(f&&(t.props=l,t.state=u,t.context=c,r!==2&&t.shouldComponentUpdate&&t.shouldComponentUpdate(i,s,a)===!1?m=!0:t.componentWillUpdate&&t.componentWillUpdate(i,s,a),t.props=i,t.state=s,t.context=a),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!m){g=t.render(i,s,a),t.getChildContext&&(a=eS(eS({},a),t.getChildContext()));var x=g&&g.nodeName,v,w;if(typeof x=="function"){var _=z_t(g);y=h,y&&y.constructor===x&&_.key==y.__key?dre(y,_,1,a,!1):(v=y,t._component=y=H_t(x,_,a),y.nextBase=y.nextBase||d,y._parentComponent=t,dre(y,_,0,a,!1),pre(y,1,n,!0)),w=y.base}else b=p,v=h,v&&(b=t._component=null),(p||r===1)&&(b&&(b._component=null),w=G_t(b,g,a,n||!f,p&&p.parentNode,!0));if(p&&w!==p&&y!==h){var S=p.parentNode;S&&w!==S&&(S.replaceChild(w,p),v||(p._component=null,pk(p,!1)))}if(v&&hre(v),t.base=w,w&&!o){for(var C=t,E=t;E=E._parentComponent;)(C=E).base=w;w._component=C,w._componentConstructor=C.constructor}}if(!f||n?U_t.unshift(t):m||(t.componentDidUpdate&&t.componentDidUpdate(l,u,c),Kf.afterUpdate&&Kf.afterUpdate(t)),t._renderCallbacks!=null)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);!ZEe&&!o&&V_t()}}function RFr(t,r,n,o){for(var i=t&&t._component,s=i,a=t,l=i&&t._componentConstructor===r.nodeName,u=l,c=z_t(r);i&&!u&&(i=i._parentComponent);)u=i.constructor===r.nodeName;return i&&u&&(!o||i._component)?(dre(i,c,3,n,o),t=i.base):(s&&!l&&(hre(s),t=a=null),i=H_t(r.nodeName,c,n),t&&!i.nextBase&&(i.nextBase=t,a=null),dre(i,c,1,n,o),t=i.base,a&&t!==a&&(a._component=null,pk(a,!1))),t}function hre(t){Kf.beforeUnmount&&Kf.beforeUnmount(t);var r=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?hre(n):r&&(r.__preactattr_&&r.__preactattr_.ref&&r.__preactattr_.ref(null),t.nextBase=r,eTe(r),FFr(t),q_t(r)),t.__ref&&t.__ref(null)}function Q6(t,r){this._dirty=!0,this.context=r,this.props=t,this.state=this.state||{}}function Y_t(t,r,n){return G_t(n,t,{},!1,r,!1)}var Kf,tR,R_t,TFr,AFr,KEe,U_t,ZEe,J2,fre,QEe,PFr,LFr,gre=N(()=>{"use strict";Kf={},tR=[],R_t=[];TFr=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;AFr=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,KEe=[];U_t=[],ZEe=0,J2=!1,fre=!1;QEe={};eS(Q6.prototype,{setState:function(r,n){var o=this.state;this.prevState||(this.prevState=eS({},o)),eS(o,typeof r=="function"?r(o,this.props):r),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),B_t(this)},forceUpdate:function(r){r&&(this._renderCallbacks=this._renderCallbacks||[]).push(r),pre(this,2)},render:function(){}});PFr={h:cre,createElement:cre,cloneElement:j_t,Component:Q6,render:Y_t,rerender:JEe,options:Kf},LFr=PFr});var X_t=mt(rTe=>{"use strict";Object.defineProperty(rTe,"__esModule",{value:!0});var yre=(gre(),kl(mre)),tTe=eR(),jFr=(()=>{class t extends yre.Component{componentDidMount(){let{name:n,tab:o}=this.props;this.props.registerSurface(n,o,this)}componentDidUpdate(){return!1}render(){let{name:n,visible:o,styles:i}=this.props,s=Object.assign({},t.defaultStyles,i),{width:a,height:l}=s,{maxHeight:u,maxWidth:c}=s;u=l===t.defaultStyles.height?u:l,c=a===t.defaultStyles.width?c:a;let f=tTe.css({display:o?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:a,maxHeight:u,maxWidth:c,overflow:"auto"}),d=tTe.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),p=tTe.css({boxSizing:"border-box"});return yre.h("div",{className:`${f} tf-surface`,ref:h=>this.container=h,"data-visible":o},yre.h("div",{className:`${d} tf-label`,ref:h=>this.label=h},n),yre.h("div",{className:`${p} tf-draw-area`,ref:h=>this.drawArea=h}))}}return t.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t})();rTe.SurfaceComponent=jFr});var Z_t=mt(iTe=>{"use strict";Object.defineProperty(iTe,"__esModule",{value:!0});var J6=(gre(),kl(mre)),K_t=eR(),nTe=class extends J6.Component{render(){let{tabNames:r,activeTab:n,handleClick:o}=this.props,i=r.length>0?r.map(a=>J6.h(oTe,{key:a,id:a,handleClick:o,isActive:a===n},a)):null,s=K_t.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return J6.h("div",{className:`${s} visor-tabs`},i)}};iTe.Tabs=nTe;var oTe=class extends J6.Component{render(){let{children:r,isActive:n,handleClick:o,id:i}=this.props,s=K_t.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return J6.h("a",{className:`${s} tf-tab`,"data-isactive":n,onClick:()=>o(i)},r)}}});var Q_t=mt(aTe=>{"use strict";Object.defineProperty(aTe,"__esModule",{value:!0});var mg=(gre(),kl(mre)),hk=eR(),BFr=X_t(),$Fr=Z_t(),sTe=class t extends mg.Component{static render(r,n,o){return mg.render(mg.h(t,Object.assign({},o)),r,n)}constructor(r){super(r),this.surfaces=new Map;let n=r.startOpen==null?!0:r.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(r,n){let o=this.surfaceId(r,n),i;if(this.surfaces.has(o))i=this.surfaces.get(o);else throw Error(`Surface not found with id: ${o}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(r,n){return r+n}setTabs(r){let n=r.map(s=>s.tab),o=this.state.tabs,i;for(let s of n)o.has(s)||(o.add(s),i=s);i!=null&&this.setState({tabs:o,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(r,n,o){let i=this.surfaceId(r,n);this.surfaces.set(i,o)}keyHandler(r){r.keyCode===192&&(r.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(r){this.setState({activeTab:r})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(r){this.setTabs(r.surfaceList)}render(){let{isOpen:r,isFullscreen:n,activeTab:o}=this.state,{surfaceList:i}=this.props,s=Array.from(this.getTabs().values()),u=n?"90vw":"550px",c=hk.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),f=hk.css({right:"0"}),d=hk.css({right:`calc(-${u} - 10px)`}),p=r?f:d,h=hk.css({});return mg.h("div",{className:`${c} ${p} visor`,"data-isopen":r,"data-isfullscreen":n},mg.h(zFr,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),mg.h($Fr.Tabs,{tabNames:s,activeTab:o,handleClick:this.setActiveTab.bind(this)}),mg.h("div",{className:`${h} visor-surfaces`},i.map(m=>mg.h(BFr.SurfaceComponent,{key:m.name+m.tab,name:m.name,tab:m.tab,styles:m.styles,registerSurface:this.registerSurface.bind(this),visible:o===m.tab}))))}};aTe.VisorComponent=sTe;function zFr(t){let{isFullScreen:r,fullScreenHandler:n,closeHandler:o}=t,i=hk.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=hk.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),a=hk.css({marginLeft:"auto"});return mg.h("div",{className:`${i} visor-controls`},mg.h("button",{className:`${s}`,onClick:n},r?"Minimize":"Maximize"),mg.h("button",{className:`${s} ${a}`,onClick:o},"Hide"))}});var uTe=mt(vre=>{"use strict";Object.defineProperty(vre,"__esModule",{value:!0});var UFr=Q_t(),bre,VFr="Visor",lTe="tfjs-visor-container";function GFr(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(lTe)&&bre!=null)return bre;let t=document.getElementById(lTe);t==null&&(t=document.createElement("div"),t.id=lTe,document.body.appendChild(t));let r;function n(s,a){let l=null;return r=UFr.VisorComponent.render(s,r,{ref:u=>l=u,surfaceList:Array.from(a.values())}),l}let o=new Map,i=n(t,o);return bre=new xre(i,t,o,n),bre}vre.visor=GFr;var xre=class{constructor(r,n,o,i){this.visorComponent=r,this.el=n,this.surfaceList=o,this.renderVisor=i}surface(r){let{name:n}=r,o=r.tab==null?VFr:r.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");let i=Object.assign({},r,{tab:o}),s=`${n}-${o}`;return this.surfaceList.has(s)||this.surfaceList.set(s,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,o)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(r){if(!this.visorComponent.state.tabs.has(r))throw new Error(`Tab '${r}' does not exist`);this.visorComponent.setState({activeTab:r})}};vre.Visor=xre});var ph=mt(mk=>{"use strict";var WFr=mk&&mk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(mk,"__esModule",{value:!0});var J_t=XEe(),qFr=uTe();function HFr(t){if(t instanceof HTMLElement)return t;if(J_t.isSurface(t))return t.drawArea;if(J_t.isSurfaceInfo(t))return qFr.visor().surface({name:t.name,tab:t.tab,styles:t.styles}).drawArea;throw new Error("Not a drawable")}mk.getDrawArea=HFr;function YFr(t,r){let n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(r);if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(t[s]!==r[s])return!1}return!0}mk.shallowEquals=YFr;function XFr(){return WFr(this,void 0,void 0,function*(){yield new Promise(t=>requestAnimationFrame(t))})}mk.nextFrame=XFr});var c1=mt(ez=>{"use strict";Object.defineProperty(ez,"__esModule",{value:!0});var e2t=eR(),KFr=ph(),ZFr={prepend:!1};function QFr(t,r,n={}){let o=KFr.getDrawArea(t),i=e2t.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=e2t.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),a=Object.assign({},ZFr,n),l=o.querySelector(`div[data-name=${r}]`);if(!l){if(l=document.createElement("div"),l.setAttribute("class",`${i}`),l.dataset.name=r,a.title){let u=document.createElement("div");u.setAttribute("class",`subsurface-title ${s}`),u.innerText=a.title,l.appendChild(u)}a.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l}ez.subSurface=QFr;function JFr(t){let n=0,o=t;for(;o&&o.clientWidth===0;)o=o.parentElement,n=50;return o.clientWidth-n}ez.getDefaultWidth=JFr;function eOr(t){return t.clientHeight===0?200:t.clientHeight}ez.getDefaultHeight=eOr});var r2t=mt(gk=>{"use strict";var tOr=gk&&gk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},rOr=gk&&gk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gk,"__esModule",{value:!0});var nOr=rOr((lk(),kl(ak))),t2t=c1(),wre=ph();function oOr(t,r,n={}){return tOr(this,void 0,void 0,function*(){let o=wre.getDrawArea(t),i=r,s=Object.assign({},iOr,n);if(cTe.has(o)){let y=cTe.get(o);if(wre.shallowEquals(s,y.lastOptions)){yield wre.nextFrame();let b=y.view,x=b.changeset().remove(()=>!0).insert(i);yield b.change("values",x).runAsync();return}}let{xLabel:a,yLabel:l,xType:u,yType:c}=s,f=null;a!=null&&(f={title:a});let d=null;l!=null&&(d={title:l});let p={actions:!1,mode:"vega-lite",defaultStyle:!1},h;s.color!=null?Array.isArray(s.color)?h={field:"index",type:"nominal",scale:{range:s.color}}:h={value:s.color}:h={value:"#4C78A0"};let m={width:s.width||t2t.getDefaultWidth(o),height:s.height||t2t.getDefaultHeight(o),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:s.fontSize,titleFontSize:s.fontSize},text:{fontSize:s.fontSize},legend:{labelFontSize:s.fontSize,titleFontSize:s.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:u,axis:f},y:{field:"value",type:c,axis:d},color:h}};yield wre.nextFrame();let g=yield nOr.default(o,m,p);cTe.set(o,{view:g.view,lastOptions:s})})}gk.barchart=oOr;var iOr={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},cTe=new Map});var o2t=mt(yk=>{"use strict";var sOr=yk&&yk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},aOr=yk&&yk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yk,"__esModule",{value:!0});var lOr=aOr((lk(),kl(ak))),n2t=c1(),uOr=ph();function cOr(t,r,n={}){return sOr(this,void 0,void 0,function*(){let o=Object.assign({},fOr,n),i=uOr.getDrawArea(t),s=[],a=r.values,l=r.tickLabels||[],u=l.length===0,c=!0;for(let h=0;h<a.length;h++){let m=u?`Class ${h}`:l[h];u&&l.push(m);for(let g=0;g<a[h].length;g++){let y=u?`Class ${g}`:l[g],b=a[h][g];h===g&&!o.shadeDiagonal?s.push({label:m,prediction:y,count:b,noFill:!0}):(s.push({label:m,prediction:y,count:b,scaleCount:b}),b!==0&&(c=!1))}}if(!o.shadeDiagonal&&c)for(let h of s)h.noFill===!0&&(h.noFill=!1,h.scaleCount=h.count);let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||n2t.getDefaultWidth(i),height:o.height||n2t.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:s},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:l}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:l}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};o.shadeDiagonal===!1&&d.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&d.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});let p=typeof o.colorMap=="string"?{scheme:o.colorMap}:o.colorMap;d.layer[0].encoding.color.scale.range=p,yield lOr.default(i,d,f)})}yk.confusionMatrix=cOr;var fOr={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}});var tz=mt(rR=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});function i2t(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}rR.assert=i2t;function dOr(t,r,n=""){i2t(s2t(t,r),n+` Shapes ${t} and ${r} must match`)}rR.assertShapesMatch=dOr;function s2t(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}rR.arraysEqual=s2t;rR.DECIMAL_PLACES_TO_CHECK=4});var c2t=mt(f1=>{"use strict";var u2t=f1&&f1.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},pOr=f1&&f1.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r},hOr=f1&&f1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f1,"__esModule",{value:!0});var rz=pOr((re(),kl(Mo))),mOr=hOr((lk(),kl(ak))),a2t=c1(),nz=tz(),gOr=ph();function yOr(t,r,n={}){return u2t(this,void 0,void 0,function*(){let o=Object.assign({},xOr,n),i=gOr.getDrawArea(t),s=r.values;o.rowMajor&&(s=yield bOr(r.values));let{xTickLabels:a,yTickLabels:l}=r;a!=null&&l2t(s,a,0),l!=null&&l2t(s,l,1);let u="@tfidx@",c=[];if(s instanceof rz.Tensor){nz.assert(s.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let g=yield s.data(),[y,b]=s.shape;for(let x=0;x<y;x++){let v=a?`${a[x]}${u}${x}`:x;for(let w=0;w<b;w++){let _=l?`${l[w]}${u}${w}`:w,S=x*b+w,C=g[S];c.push({x:v,y:_,value:C})}}}else{let g=s;for(let y=0;y<g.length;y++){let b=a?`${a[y]}${u}${y}`:y;for(let x=0;x<g[y].length;x++){let v=l?`${l[x]}${u}${x}`:x,w=g[y][x];c.push({x:b,y:v,value:w})}}}let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||a2t.getDefaultWidth(i),height:o.height||a2t.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:c},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},p=`${u}\\d+$`,h=new RegExp(p);a&&(d.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),l&&(d.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),(a||l)&&(f.tooltip={sanitize:g=>String(g).replace(h,"")});let m;switch(o.colorMap){case"blues":m=["#f7fbff","#4292c6"];break;case"greyscale":m=["#000000","#ffffff"];break;case"viridis":default:m="viridis";break}if(m!=="viridis"){let g=d.encoding.fill;g.scale={range:m}}if(o.domain){let g=d.encoding.fill;g.scale!=null?g.scale=Object.assign({},g.scale,{domain:o.domain}):g.scale={domain:o.domain}}yield mOr.default(i,d,f)})}f1.heatmap=yOr;function bOr(t){return u2t(this,void 0,void 0,function*(){let r,n;t instanceof rz.Tensor?(r=t.shape,n=t.transpose()):(r=[t.length,t[0].length],n=rz.tidy(()=>rz.tensor2d(t).transpose())),nz.assert(n.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let o=yield n.array();n.dispose();let i=[o.length,o[0].length];return nz.assert(r[0]===i[1]&&r[1]===i[0],`Unexpected transposed shape. Original ${r} : Transposed ${i}`),o})}function l2t(t,r,n){let o=t instanceof rz.Tensor?t.shape:[t.length,t[0].length];n===0?nz.assert(o[0]===r.length,`Length of xTickLabels (${r.length}) must match number of rows (${o[0]})`):n===1&&nz.assert(o[1]===r.length,`Length of yTickLabels (${r.length}) must match number of columns (${o[1]})`)}var xOr={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}});var oz=mt(d1=>{"use strict";var _re=d1&&d1.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(d1,"__esModule",{value:!0});var bk=(re(),kl(Mo)),tS=tz();function vOr(t){if(!Array.isArray(t))throw new Error("input must be an array");if(t.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};let r=t.length,n=-1/0,o=1/0,i=0,s=0,a=0;for(let u=0;u<r;u++){let c=t[u];c>n&&(n=c),c<o&&(o=c),c===0&&(i+=1),isNaN(c)?s+=1:isFinite(c)||(a+=1)}let l={numVals:r,numZeros:i,numNans:s,max:n,min:o,numInfs:a};return l.max===-1/0&&(l.max=NaN),l.min===1/0&&(l.min=NaN),l}d1.arrayStats=vOr;function wOr(t){return _re(this,void 0,void 0,function*(){let[r,n,o]=bk.tidy(()=>{let i=bk.scalar(0,t.dtype),s=t.min(),a=t.max(),l=t.equal(i).sum();return[s,a,l]});return Promise.all([t.data(),r.data(),n.data(),o.data()]).then(([i,s,a,l])=>{let u=i.length,c=0,f=0;for(let m=0;m<u;m++){let g=i[m];isNaN(g)?c+=1:isFinite(g)||(f+=1)}let d=s[0],p=a[0];return c===u&&(d=NaN,p=NaN),{numVals:u,numZeros:l[0],numNans:c,min:d,max:p,numInfs:f}})})}d1.tensorStats=wOr;function _Or(t,r,n,o){return _re(this,void 0,void 0,function*(){tS.assert(t.rank===1,"labels must be a 1D tensor"),tS.assert(r.rank===1,"predictions must be a 1D tensor"),tS.assert(t.size===r.size,"labels and predictions must be the same length"),o!=null&&tS.assert(o.size===r.size,"labels and predictions must be the same length");let i=t.cast("int32"),s=r.cast("int32");n==null&&(n=bk.tidy(()=>bk.maximum(i.max(),s.max()).cast("int32").dataSync()[0]+1));let a=Promise.resolve(null);return o!=null&&(a=o.data()),Promise.all([i.data(),s.data(),a]).then(([l,u,c])=>{let f=Array(n).fill(0);for(let d=0;d<n;d++)f[d]=Array(n).fill(0);for(let d=0;d<l.length;d++){let p=l[d],h=u[d];c!=null?f[p][h]+=c[d]:f[p][h]+=1}return f})})}d1.confusionMatrix=_Or;function SOr(t,r){return _re(this,void 0,void 0,function*(){tS.assertShapesMatch(t.shape,r.shape,"Error computing accuracy.");let n=t.equal(r),o=n.mean(),i=(yield o.data())[0];return bk.dispose([n,o]),i})}d1.accuracy=SOr;function COr(t,r,n){return _re(this,void 0,void 0,function*(){return tS.assert(t.rank===1,"labels must be a 1D tensor"),tS.assert(r.rank===1,"predictions must be a 1D tensor"),tS.assert(t.size===r.size,"labels and predictions must be the same length"),n==null&&(n=bk.tidy(()=>bk.maximum(t.max(),r.max()).dataSync()[0]+1)),Promise.all([t.data(),r.data()]).then(([o,i])=>{let s=Array(n).fill(0),a=Array(n).fill(0);for(let u=0;u<o.length;u++){let c=o[u],f=i[u];s[c]+=1,c===f&&(a[c]+=1)}let l=[];for(let u=0;u<s.length;u++)l.push({count:s[u],accuracy:s[u]===0?0:a[u]/s[u]});return l})})}d1.perClassAccuracy=COr});var Sre,iz,Cre=N(()=>{"use strict";Sre="http://www.w3.org/1999/xhtml",iz={svg:"http://www.w3.org/2000/svg",xhtml:Sre,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}});function nR(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),iz.hasOwnProperty(r)?{space:iz[r],local:t}:t}var Ere=N(()=>{"use strict";Cre()});function EOr(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===Sre&&r.documentElement.namespaceURI===Sre?r.createElement(t):r.createElementNS(n,t)}}function TOr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rS(t){var r=nR(t);return(r.local?TOr:EOr)(r)}var sz=N(()=>{"use strict";Ere();Cre()});function AOr(){}function oR(t){return t==null?AOr:function(){return this.querySelector(t)}}var Tre=N(()=>{"use strict"});function f2t(t){typeof t!="function"&&(t=oR(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=new Array(a),u,c,f=0;f<a;++f)(u=s[f])&&(c=t.call(u,u.__data__,f,s))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new Gi(o,this._parents)}var d2t=N(()=>{"use strict";hh();Tre()});function kOr(){return[]}function Are(t){return t==null?kOr:function(){return this.querySelectorAll(t)}}var fTe=N(()=>{"use strict"});function p2t(t){typeof t!="function"&&(t=Are(t));for(var r=this._groups,n=r.length,o=[],i=[],s=0;s<n;++s)for(var a=r[s],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(o.push(t.call(u,u.__data__,c,a)),i.push(u));return new Gi(o,i)}var h2t=N(()=>{"use strict";hh();fTe()});var g2t,iR,m2t,kre,dTe=N(()=>{"use strict";g2t=function(t){return function(){return this.matches(t)}};typeof document<"u"&&(iR=document.documentElement,iR.matches||(m2t=iR.webkitMatchesSelector||iR.msMatchesSelector||iR.mozMatchesSelector||iR.oMatchesSelector,g2t=function(t){return function(){return m2t.call(this,t)}}));kre=g2t});function y2t(t){typeof t!="function"&&(t=kre(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=[],u,c=0;c<a;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&l.push(u);return new Gi(o,this._parents)}var b2t=N(()=>{"use strict";hh();dTe()});function Ire(t){return new Array(t.length)}var pTe=N(()=>{"use strict"});function x2t(){return new Gi(this._enter||this._groups.map(Ire),this._parents)}function az(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}var hTe=N(()=>{"use strict";pTe();hh();az.prototype={constructor:az,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}});function v2t(t){return function(){return t}}var w2t=N(()=>{"use strict"});function IOr(t,r,n,o,i,s){for(var a=0,l,u=r.length,c=s.length;a<c;++a)(l=r[a])?(l.__data__=s[a],o[a]=l):n[a]=new az(t,s[a]);for(;a<u;++a)(l=r[a])&&(i[a]=l)}function DOr(t,r,n,o,i,s,a){var l,u,c={},f=r.length,d=s.length,p=new Array(f),h;for(l=0;l<f;++l)(u=r[l])&&(p[l]=h=_2t+a.call(u,u.__data__,l,r),h in c?i[l]=u:c[h]=u);for(l=0;l<d;++l)h=_2t+a.call(t,s[l],l,s),(u=c[h])?(o[l]=u,u.__data__=s[l],c[h]=null):n[l]=new az(t,s[l]);for(l=0;l<f;++l)(u=r[l])&&c[p[l]]===u&&(i[l]=u)}function S2t(t,r){if(!t)return h=new Array(this.size()),c=-1,this.each(function(S){h[++c]=S}),h;var n=r?DOr:IOr,o=this._parents,i=this._groups;typeof t!="function"&&(t=v2t(t));for(var s=i.length,a=new Array(s),l=new Array(s),u=new Array(s),c=0;c<s;++c){var f=o[c],d=i[c],p=d.length,h=t.call(f,f&&f.__data__,c,o),m=h.length,g=l[c]=new Array(m),y=a[c]=new Array(m),b=u[c]=new Array(p);n(f,d,g,y,b,h,r);for(var x=0,v=0,w,_;x<m;++x)if(w=g[x]){for(x>=v&&(v=x+1);!(_=y[v])&&++v<m;);w._next=_||null}}return a=new Gi(a,o),a._enter=l,a._exit=u,a}var _2t,C2t=N(()=>{"use strict";hh();hTe();w2t();_2t="$"});function E2t(){return new Gi(this._exit||this._groups.map(Ire),this._parents)}var T2t=N(()=>{"use strict";pTe();hh()});function A2t(t){for(var r=this._groups,n=t._groups,o=r.length,i=n.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var u=r[l],c=n[l],f=u.length,d=a[l]=new Array(f),p,h=0;h<f;++h)(p=u[h]||c[h])&&(d[h]=p);for(;l<o;++l)a[l]=r[l];return new Gi(a,this._parents)}var k2t=N(()=>{"use strict";hh()});function I2t(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var o=t[r],i=o.length-1,s=o[i],a;--i>=0;)(a=o[i])&&(s&&s!==a.nextSibling&&s.parentNode.insertBefore(a,s),s=a);return this}var D2t=N(()=>{"use strict"});function N2t(t){t||(t=NOr);function r(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s){for(var a=n[s],l=a.length,u=i[s]=new Array(l),c,f=0;f<l;++f)(c=a[f])&&(u[f]=c);u.sort(r)}return new Gi(i,this._parents).order()}function NOr(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var M2t=N(()=>{"use strict";hh()});function F2t(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}var O2t=N(()=>{"use strict"});function R2t(){var t=new Array(this.size()),r=-1;return this.each(function(){t[++r]=this}),t}var P2t=N(()=>{"use strict"});function L2t(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,s=o.length;i<s;++i){var a=o[i];if(a)return a}return null}var j2t=N(()=>{"use strict"});function B2t(){var t=0;return this.each(function(){++t}),t}var $2t=N(()=>{"use strict"});function z2t(){return!this.node()}var U2t=N(()=>{"use strict"});function V2t(t){for(var r=this._groups,n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length,l;s<a;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}var G2t=N(()=>{"use strict"});function MOr(t){return function(){this.removeAttribute(t)}}function FOr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function OOr(t,r){return function(){this.setAttribute(t,r)}}function ROr(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function POr(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function LOr(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function W2t(t,r){var n=nR(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((r==null?n.local?FOr:MOr:typeof r=="function"?n.local?LOr:POr:n.local?ROr:OOr)(n,r))}var q2t=N(()=>{"use strict";Ere()});function sR(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}var Dre=N(()=>{"use strict"});function jOr(t){return function(){this.style.removeProperty(t)}}function BOr(t,r,n){return function(){this.style.setProperty(t,r,n)}}function $Or(t,r,n){return function(){var o=r.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function H2t(t,r,n){return arguments.length>1?this.each((r==null?jOr:typeof r=="function"?$Or:BOr)(t,r,n??"")):mTe(this.node(),t)}function mTe(t,r){return t.style.getPropertyValue(r)||sR(t).getComputedStyle(t,null).getPropertyValue(r)}var gTe=N(()=>{"use strict";Dre()});function zOr(t){return function(){delete this[t]}}function UOr(t,r){return function(){this[t]=r}}function VOr(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Y2t(t,r){return arguments.length>1?this.each((r==null?zOr:typeof r=="function"?VOr:UOr)(t,r)):this.node()[t]}var X2t=N(()=>{"use strict"});function K2t(t){return t.trim().split(/^|\s+/)}function yTe(t){return t.classList||new Z2t(t)}function Z2t(t){this._node=t,this._names=K2t(t.getAttribute("class")||"")}function Q2t(t,r){for(var n=yTe(t),o=-1,i=r.length;++o<i;)n.add(r[o])}function J2t(t,r){for(var n=yTe(t),o=-1,i=r.length;++o<i;)n.remove(r[o])}function GOr(t){return function(){Q2t(this,t)}}function WOr(t){return function(){J2t(this,t)}}function qOr(t,r){return function(){(r.apply(this,arguments)?Q2t:J2t)(this,t)}}function eSt(t,r){var n=K2t(t+"");if(arguments.length<2){for(var o=yTe(this.node()),i=-1,s=n.length;++i<s;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof r=="function"?qOr:r?GOr:WOr)(n,r))}var tSt=N(()=>{"use strict";Z2t.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}});function HOr(){this.textContent=""}function YOr(t){return function(){this.textContent=t}}function XOr(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function rSt(t){return arguments.length?this.each(t==null?HOr:(typeof t=="function"?XOr:YOr)(t)):this.node().textContent}var nSt=N(()=>{"use strict"});function KOr(){this.innerHTML=""}function ZOr(t){return function(){this.innerHTML=t}}function QOr(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function oSt(t){return arguments.length?this.each(t==null?KOr:(typeof t=="function"?QOr:ZOr)(t)):this.node().innerHTML}var iSt=N(()=>{"use strict"});function JOr(){this.nextSibling&&this.parentNode.appendChild(this)}function sSt(){return this.each(JOr)}var aSt=N(()=>{"use strict"});function eRr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lSt(){return this.each(eRr)}var uSt=N(()=>{"use strict"});function cSt(t){var r=typeof t=="function"?t:rS(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}var fSt=N(()=>{"use strict";sz()});function tRr(){return null}function dSt(t,r){var n=typeof t=="function"?t:rS(t),o=r==null?tRr:typeof r=="function"?r:oR(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}var pSt=N(()=>{"use strict";sz();Tre()});function rRr(){var t=this.parentNode;t&&t.removeChild(this)}function hSt(){return this.each(rRr)}var mSt=N(()=>{"use strict"});function nRr(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function oRr(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function gSt(t){return this.select(t?oRr:nRr)}var ySt=N(()=>{"use strict"});function bSt(t){return arguments.length?this.property("__data__",t):this.node().__data__}var xSt=N(()=>{"use strict"});function iRr(t,r,n){return t=_St(t,r,n),function(o){var i=o.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,o)}}function _St(t,r,n){return function(o){var i=gg;gg=o;try{t.call(this,this.__data__,r,n)}finally{gg=i}}}function sRr(t){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");return o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),{type:r,name:n}})}function aRr(t){return function(){var r=this.__on;if(r){for(var n=0,o=-1,i=r.length,s;n<i;++n)s=r[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):r[++o]=s;++o?r.length=o:delete this.__on}}}function lRr(t,r,n){var o=wSt.hasOwnProperty(t.type)?iRr:_St;return function(i,s,a){var l=this.__on,u,c=o(r,s,a);if(l){for(var f=0,d=l.length;f<d;++f)if((u=l[f]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),u.value=r;return}}this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:r,listener:c,capture:n},l?l.push(u):this.__on=[u]}}function SSt(t,r,n){var o=sRr(t+""),i,s=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(i=0,f=l[u];i<s;++i)if((a=o[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=r?lRr:aRr,n==null&&(n=!1),i=0;i<s;++i)this.each(l(o[i],r,n));return this}function CSt(t,r,n,o){var i=gg;t.sourceEvent=gg,gg=t;try{return r.apply(n,o)}finally{gg=i}}var wSt,gg,vSt,Nre=N(()=>{"use strict";wSt={},gg=null;typeof document<"u"&&(vSt=document.documentElement,"onmouseenter"in vSt||(wSt={mouseenter:"mouseover",mouseleave:"mouseout"}))});function ESt(t,r,n){var o=sR(t),i=o.CustomEvent;typeof i=="function"?i=new i(r,n):(i=o.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),t.dispatchEvent(i)}function uRr(t,r){return function(){return ESt(this,t,r)}}function cRr(t,r){return function(){return ESt(this,t,r.apply(this,arguments))}}function TSt(t,r){return this.each((typeof r=="function"?cRr:uRr)(t,r))}var ASt=N(()=>{"use strict";Dre()});function Gi(t,r){this._groups=t,this._parents=r}function kSt(){return new Gi([[document.documentElement]],lz)}var lz,ISt,hh=N(()=>{"use strict";d2t();h2t();b2t();C2t();hTe();T2t();k2t();D2t();M2t();O2t();P2t();j2t();$2t();U2t();G2t();q2t();gTe();X2t();tSt();nSt();iSt();aSt();uSt();fSt();pSt();mSt();ySt();xSt();Nre();ASt();lz=[null];Gi.prototype=kSt.prototype={constructor:Gi,select:f2t,selectAll:p2t,filter:y2t,data:S2t,enter:x2t,exit:E2t,merge:A2t,order:I2t,sort:N2t,call:F2t,nodes:R2t,node:L2t,size:B2t,empty:z2t,each:V2t,attr:W2t,style:H2t,property:Y2t,classed:eSt,text:rSt,html:oSt,raise:sSt,lower:lSt,append:cSt,insert:dSt,remove:hSt,clone:gSt,datum:bSt,on:SSt,dispatch:TSt};ISt=kSt});function Mre(t){return typeof t=="string"?new Gi([[document.querySelector(t)]],[document.documentElement]):new Gi([[t]],lz)}var bTe=N(()=>{"use strict";hh()});function DSt(t){return Mre(rS(t).call(document.documentElement))}var NSt=N(()=>{"use strict";sz();bTe()});function Fre(){return new xTe}function xTe(){this._="@"+(++fRr).toString(36)}var fRr,MSt=N(()=>{"use strict";fRr=0;xTe.prototype=Fre.prototype={constructor:xTe,get:function(t){for(var r=this._;!(r in t);)if(!(t=t.parentNode))return;return t[r]},set:function(t,r){return t[this._]=r},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}});function aR(){for(var t=gg,r;r=t.sourceEvent;)t=r;return t}var Ore=N(()=>{"use strict";Nre()});function nS(t,r){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=r.clientX,o.y=r.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}var i=t.getBoundingClientRect();return[r.clientX-i.left-t.clientLeft,r.clientY-i.top-t.clientTop]}var uz=N(()=>{"use strict"});function FSt(t){var r=aR();return r.changedTouches&&(r=r.changedTouches[0]),nS(t,r)}var OSt=N(()=>{"use strict";Ore();uz()});function RSt(t){return typeof t=="string"?new Gi([document.querySelectorAll(t)],[document.documentElement]):new Gi([t??[]],lz)}var PSt=N(()=>{"use strict";hh()});function LSt(t,r,n){arguments.length<3&&(n=r,r=aR().changedTouches);for(var o=0,i=r?r.length:0,s;o<i;++o)if((s=r[o]).identifier===n)return nS(t,s);return null}var jSt=N(()=>{"use strict";Ore();uz()});function BSt(t,r){r==null&&(r=aR().touches);for(var n=0,o=r?r.length:0,i=new Array(o);n<o;++n)i[n]=nS(t,r[n]);return i}var $St=N(()=>{"use strict";Ore();uz()});var zSt={};fn(zSt,{clientPoint:()=>nS,create:()=>DSt,creator:()=>rS,customEvent:()=>CSt,event:()=>gg,local:()=>Fre,matcher:()=>kre,mouse:()=>FSt,namespace:()=>nR,namespaces:()=>iz,select:()=>Mre,selectAll:()=>RSt,selection:()=>ISt,selector:()=>oR,selectorAll:()=>Are,style:()=>mTe,touch:()=>LSt,touches:()=>BSt,window:()=>sR});var USt=N(()=>{"use strict";NSt();sz();MSt();dTe();OSt();Ere();Cre();uz();bTe();PSt();hh();Tre();fTe();gTe();jSt();$St();Dre();Nre()});var cz=mt(wTe=>{"use strict";Object.defineProperty(wTe,"__esModule",{value:!0});var dRr=(ET(),kl(h0e)),VSt=(USt(),kl(zSt)),vTe=eR(),pRr=ph();function hRr(t,r,n={}){if(r&&r.headers==null)throw new Error('Data to render must have a "headers" property');if(r&&r.values==null)throw new Error('Data to render must have a "values" property');let o=pRr.getDrawArea(t),i=Object.assign({},mRr,n),s=VSt.select(o).select("table.tf-table"),a=vTe.css({fontSize:i.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(s.size()===0&&(s=VSt.select(o).append("table"),s.attr("class",` ${a} tf-table`),s.append("thead").append("tr"),s.append("tbody")),s.size()!==1)throw new Error("Error inserting table");let l=vTe.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),u=s.select("thead").select("tr").selectAll("th").data(r.headers),c=u.enter().append("th").attr("class",`${l}`);u.merge(c).html(y=>y),u.exit().remove();let f=dRr.format(",.4~f"),d=s.select("tbody").selectAll("tr").data(r.values),p=d.enter().append("tr"),h=vTe.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),m=d.merge(p).selectAll("td").data(y=>y),g=m.enter().append("td").attr("class",`${h}`);m.merge(g).html(y=>typeof y=="number"?f(y):y),m.exit().remove(),d.exit().remove()}wTe.table=hRr;var mRr={fontSize:14}});var Pre=mt(xk=>{"use strict";var gRr=xk&&xk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},yRr=xk&&xk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xk,"__esModule",{value:!0});var GSt=(ET(),kl(h0e)),bRr=yRr((lk(),kl(ak))),Rre=c1(),xRr=oz(),vRr=cz(),wRr={maxBins:12,fontSize:11};function _Rr(t,r,n={}){return gRr(this,void 0,void 0,function*(){let o=CRr(r),i=Object.assign({},wRr,n),s={actions:!1,mode:"vega-lite",defaultStyle:!1},a=Rre.subSurface(t,"histogram");if(n.stats!==!1){let c=Rre.subSurface(t,"stats",{prepend:!0}),f;n.stats?f=n.stats:f=xRr.arrayStats(o.map(d=>d.value)),SRr(f,c,{fontSize:i.fontSize})}if(o.length===0)return;let l=[];for(let c=0;c<o.length;c++){let f=o[c].value;f!=null&&isFinite(f)&&l.push(o[c])}let u={width:i.width||Rre.getDefaultWidth(a),height:i.height||Rre.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:l},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return bRr.default(a,u,s)})}xk.histogram=_Rr;function SRr(t,r,n){let o=GSt.format(",.4~f"),i=GSt.format(".4~p"),s=[],a=[];if(t.numVals!=null&&(s.push("Num Vals"),a.push(o(t.numVals))),t.min!=null&&(s.push("Min"),a.push(o(t.min))),t.max!=null&&(s.push("Max"),a.push(o(t.max))),t.numZeros!=null){s.push("# Zeros");let l="";t.numVals&&(l=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),a.push(`${o(t.numZeros)} ${l}`)}if(t.numNans!=null){s.push("# NaNs");let l="";t.numVals&&(l=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),a.push(`${o(t.numNans)} ${l}`)}if(t.numInfs!=null){s.push("# Infinity");let l="";t.numVals&&(l=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),a.push(`${o(t.numInfs)} ${l}`)}vRr.table(r,{headers:s,values:[a]},n)}function CRr(t){if(t.length==null)throw new Error("input data must be an array");if(t.length===0)return[];if(typeof t[0]=="object"){if(t[0].value==null)throw new Error("input data must have a value field");return t}else{let r=Array(t.length);for(let n=0;n<t.length;n++)r[n]={value:t[n]};return r}}});var _Te=mt(vk=>{"use strict";var ERr=vk&&vk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},TRr=vk&&vk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vk,"__esModule",{value:!0});var ARr=TRr((lk(),kl(ak))),WSt=c1(),qSt=tz(),kRr=ph();function IRr(t,r,n={}){return ERr(this,void 0,void 0,function*(){let o=Array.isArray(r.values[0])?r.values:[r.values],i=o[0].length,s=r.series?r.series:o.map((g,y)=>`Series ${y+1}`);qSt.assert(s.length===o.length,"Must have an equal number of series labels as there are data series"),n.seriesColors!=null&&qSt.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=[];for(let g=0;g<i;g++){let y={x:g};s.forEach((b,x)=>{let v=o[x][g].y;y[b]=v,y[`${b}-name`]=b}),a.push(y)}let l=Object.assign({},DRr,n),u=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},c={x:{field:"x",type:l.xType,title:l.xLabel},tooltip:[{field:"x",type:"quantitative"},...s.map(g=>({field:g,type:"quantitative"}))]},f=s.map(g=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:g,type:l.yType,title:l.yLabel,scale:u()},color:{field:`${g}-name`,type:"nominal",legend:{values:s,title:null},scale:{range:l.seriesColors}}}})),d={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},p=kRr.getDrawArea(t),h={width:l.width||WSt.getDefaultWidth(p),height:l.height||WSt.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:a},encoding:c,layer:[...f,d]},m={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield ARr.default(p,h,m),Promise.resolve()})}vk.linechart=IRr;var DRr={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var YSt=mt(wk=>{"use strict";var NRr=wk&&wk.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},MRr=wk&&wk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wk,"__esModule",{value:!0});var FRr=MRr((lk(),kl(ak))),HSt=c1(),ORr=tz(),RRr=ph();function PRr(t,r,n={}){return NRr(this,void 0,void 0,function*(){let o=r.values,i=r.series==null?[]:r.series;o=Array.isArray(o[0])?o:[o];let s=[];o.forEach((p,h)=>{let m=i[h]!=null?i[h]:`Series ${h+1}`,g=p.map(y=>Object.assign({},y,{series:m}));s.push(...g)}),n.seriesColors!=null&&ORr.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=RRr.getDrawArea(t),l=Object.assign({},LRr,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},c=()=>{if(l.zoomToFit)return{zero:!1};if(l.xAxisDomain!=null)return{domain:l.xAxisDomain}},f=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},d={width:l.width||HSt.getDefaultWidth(a),height:l.height||HSt.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:s},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:l.xType,title:l.xLabel,scale:c()},y:{field:"y",type:l.yType,title:l.yLabel,scale:f()},color:{field:"series",type:"nominal",scale:{range:l.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield FRr.default(a,d,u),Promise.resolve()})}wk.scatterplot=PRr;var LRr={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var eCt=mt(lR=>{"use strict";var ZSt=lR&&lR.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(lR,"__esModule",{value:!0});var jRr=_Te(),STe=ph(),QSt=c1();function JSt(t,r,n,o={}){return ZSt(this,void 0,void 0,function*(){let i=STe.getDrawArea(t),s={};for(let c of n)if(/val_/.test(c)){let f=c.replace("val_","");XSt(s,f);let d=KSt(r,c,n.indexOf(c));s[f].series.push(c),s[f].values.push(d)}else{let f=KSt(r,c,n.indexOf(c));XSt(s,c),s[c].series.push(c),s[c].values.push(f)}let a=Object.keys(s),l=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},o),u=[];for(let c of a){let f=QSt.subSurface(i,c),d=s[c].series,p=s[c].values;d.every(m=>!!m.match("acc"))&&(l.zoomToFitAccuracy?l.zoomToFit=!0:(l.yAxisDomain=[0,1],delete l.zoomToFit));let h=jRr.linechart(f,{values:p,series:d},l);u.push(h)}yield Promise.all(u)})}lR.history=JSt;function XSt(t,r){t[r]==null&&(t[r]={series:[],values:[]})}function KSt(t,r,n){if(Array.isArray(t)){let o=Array.isArray(t[0])?t[n]:t,i=[];for(let s=0;s<o.length;s++){let a=o[s];i.push({x:s,y:a[r]})}return i}else return t.history[r].map((o,i)=>({x:i,y:o}))}function BRr(t,r,n={}){let o={},i=n.callbacks||["onEpochEnd","onBatchEnd"],s=STe.getDrawArea(t),a=Object.assign({},n);delete a.callbacks;function l(c){return(f,d)=>ZSt(this,void 0,void 0,function*(){/batch/i.test(c)?a.xLabel="Batch":/epoch/i.test(c)&&(a.xLabel="Epoch");let p=[],h=[];for(let g of r)if(d[g]!=null){h.push(g);let y=$Rr(o,c,g);y.push({[g]:d[g]}),p.push(y)}let m=QSt.subSurface(s,c,{title:c});JSt(m,p,h,a),yield STe.nextFrame()})}let u={};return i.forEach(c=>{u[c]=l(c)}),u}lR.fitCallbacks=BRr;function $Rr(t,r,n){return t[r]==null&&(t[r]={}),t[r][n]==null&&(t[r][n]=[]),t[r][n]}});var nCt=mt(uR=>{"use strict";var Lre=uR&&uR.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(uR,"__esModule",{value:!0});var zRr=Pre(),tCt=ph(),rCt=cz(),CTe=c1(),URr=oz();function VRr(t,r){return Lre(this,void 0,void 0,function*(){let n=tCt.getDrawArea(t),o=WRr(r),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=o.layers.map(a=>[a.name,a.outputShape,a.parameters,a.trainable]);rCt.table(n,{headers:i,values:s})})}uR.modelSummary=VRr;function GRr(t,r){return Lre(this,void 0,void 0,function*(){let n=tCt.getDrawArea(t),o=yield HRr(r),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],s=CTe.subSurface(n,"layer-weights-info"),a=o.map(f=>[f.name,f.shape,f.stats.min,f.stats.max,f.weight.size,f.stats.numZeros,f.stats.numNans,f.stats.numInfs]);rCt.table(s,{headers:i,values:a});let l=CTe.subSurface(n,"select-layer"),u=CTe.subSurface(n,"param-distribution"),c=f=>Lre(this,void 0,void 0,function*(){let p=yield o.filter(h=>h.name===f)[0].weight.data();zRr.histogram(u,p,{height:150,width:460,stats:!1})});YRr(o.map(f=>f.name),l,c)})}uR.layer=GRr;function WRr(t){return{layers:t.layers.map(qRr)}}function qRr(t){let r;return Array.isArray(t.outputShape[0])?r=`[${t.outputShape.map(o=>ETe(o)).join(", ")}]`:r=ETe(t.outputShape),{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:r}}function HRr(t){return Lre(this,void 0,void 0,function*(){let r=t.getWeights(),n=t.weights,o=r.map(URr.tensorStats),i=yield Promise.all(o),s=r.map(a=>a.shape);return r.map((a,l)=>({name:n[l].name,stats:i[l],shape:ETe(s[l]),weight:a}))})}function ETe(t){let r=t.slice();return r.length===0?"Scalar":(r[0]===null&&(r[0]="batch"),`[${r.join(",")}]`)}function YRr(t,r,n){let s=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${t.map(u=>`<option value=${u}>${u}</option>`)}
    </select>
  `}</div>`;r.innerHTML=s;let a=r.querySelector("button"),l=r.querySelector("select");a.addEventListener("click",()=>{n(l.selectedOptions[0].label)})}});var oCt=mt(fz=>{"use strict";var XRr=fz&&fz.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(fz,"__esModule",{value:!0});var KRr=ph(),ZRr=cz();function QRr(t,r,n){return XRr(this,void 0,void 0,function*(){let o=KRr.getDrawArea(t),i=["Class","Accuracy","# Samples"],s=[];for(let a=0;a<r.length;a++){let l=n?n[a]:a.toString(),u=r[a];s.push([l,u.accuracy,u.count])}return ZRr.table(o,{headers:i,values:s})})}fz.perClassAccuracy=QRr});var iCt=mt(dz=>{"use strict";var JRr=dz&&dz.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(dz,"__esModule",{value:!0});var e3r=Pre(),t3r=ph(),r3r=oz();function n3r(t,r){return JRr(this,void 0,void 0,function*(){let n=t3r.getDrawArea(t),o=yield r3r.tensorStats(r),i=yield r.data();e3r.histogram(n,i,{height:150,stats:o})})}dz.valuesDistribution=n3r});var sCt=mt(TTe=>{"use strict";Object.defineProperty(TTe,"__esModule",{value:!0});var o3r="1.5.1";TTe.version=o3r});var uCt=mt(p1=>{"use strict";function i3r(t){for(var r in t)p1.hasOwnProperty(r)||(p1[r]=t[r])}Object.defineProperty(p1,"__esModule",{value:!0});re();oae();var s3r=r2t(),a3r=o2t(),l3r=c2t(),u3r=Pre(),c3r=_Te(),f3r=YSt(),d3r=cz(),aCt=eCt(),lCt=nCt(),p3r=oCt(),h3r=iCt(),ATe=oz(),m3r=sCt();p1.version_vis=m3r.version;var g3r={barchart:s3r.barchart,table:d3r.table,histogram:u3r.histogram,linechart:c3r.linechart,scatterplot:f3r.scatterplot,confusionMatrix:a3r.confusionMatrix,heatmap:l3r.heatmap};p1.render=g3r;var y3r={accuracy:ATe.accuracy,perClassAccuracy:ATe.perClassAccuracy,confusionMatrix:ATe.confusionMatrix};p1.metrics=y3r;var b3r={history:aCt.history,fitCallbacks:aCt.fitCallbacks,perClassAccuracy:p3r.perClassAccuracy,valuesDistribution:h3r.valuesDistribution,layer:lCt.layer,modelSummary:lCt.modelSummary};p1.show=b3r;var x3r=uTe();p1.visor=x3r.visor;i3r(XEe())});var hz=mt((pz,kTe)=>{"use strict";(function(r,n){typeof pz=="object"&&typeof kTe=="object"?kTe.exports=n():typeof define=="function"&&define.amd?define("Matter",[],n):typeof pz=="object"?pz.Matter=n():r.Matter=n()})(pz,function(){return function(t){var r={};function n(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=r,n.d=function(o,i,s){n.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:s})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,i){if(i&1&&(o=n(o)),i&8||i&4&&typeof o=="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),i&2&&typeof o!="string")for(var a in o)n.d(s,a,(function(l){return o[l]}).bind(null,a));return s},n.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(i,"a",i),i},n.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},n.p="",n(n.s=20)}([function(t,r){var n={};t.exports=n,function(){n._baseDelta=1e3/60,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(i,s){var a,l,u;typeof s=="boolean"?(a=2,u=s):(a=1,u=!0);for(var c=a;c<arguments.length;c++){var f=arguments[c];if(f)for(var d in f)u&&f[d]&&f[d].constructor===Object&&(!i[d]||i[d].constructor===Object)?(i[d]=i[d]||{},n.extend(i[d],u,f[d])):i[d]=f[d]}return i},n.clone=function(i,s){return n.extend({},s,i)},n.keys=function(i){if(Object.keys)return Object.keys(i);var s=[];for(var a in i)s.push(a);return s},n.values=function(i){var s=[];if(Object.keys){for(var a=Object.keys(i),l=0;l<a.length;l++)s.push(i[a[l]]);return s}for(var u in i)s.push(i[u]);return s},n.get=function(i,s,a,l){s=s.split(".").slice(a,l);for(var u=0;u<s.length;u+=1)i=i[s[u]];return i},n.set=function(i,s,a,l,u){var c=s.split(".").slice(l,u);return n.get(i,s,0,-1)[c[c.length-1]]=a,a},n.shuffle=function(i){for(var s=i.length-1;s>0;s--){var a=Math.floor(n.random()*(s+1)),l=i[s];i[s]=i[a],i[a]=l}return i},n.choose=function(i){return i[Math.floor(n.random()*i.length)]},n.isElement=function(i){return typeof HTMLElement<"u"?i instanceof HTMLElement:!!(i&&i.nodeType&&i.nodeName)},n.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"},n.isFunction=function(i){return typeof i=="function"},n.isPlainObject=function(i){return typeof i=="object"&&i.constructor===Object},n.isString=function(i){return toString.call(i)==="[object String]"},n.clamp=function(i,s,a){return i<s?s:i>a?a:i},n.sign=function(i){return i<0?-1:1},n.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(i,s){return i=typeof i<"u"?i:0,s=typeof s<"u"?s:1,i+o()*(s-i)};var o=function(){return n._seed=(n._seed*9301+49297)%233280,n._seed/233280};n.colorToNumber=function(i){return i=i.replace("#",""),i.length==3&&(i=i.charAt(0)+i.charAt(0)+i.charAt(1)+i.charAt(1)+i.charAt(2)+i.charAt(2)),parseInt(i,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var i=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[i]||(n.warn(i),n._warnedOnce[i]=!0)},n.deprecated=function(i,s,a){i[s]=n.chain(function(){n.warnOnce("\u{1F505} deprecated \u{1F505}",a)},i[s])},n.nextId=function(){return n._nextId++},n.indexOf=function(i,s){if(i.indexOf)return i.indexOf(s);for(var a=0;a<i.length;a++)if(i[a]===s)return a;return-1},n.map=function(i,s){if(i.map)return i.map(s);for(var a=[],l=0;l<i.length;l+=1)a.push(s(i[l]));return a},n.topologicalSort=function(i){var s=[],a=[],l=[];for(var u in i)!a[u]&&!l[u]&&n._topologicalSort(u,a,l,i,s);return s},n._topologicalSort=function(i,s,a,l,u){var c=l[i]||[];a[i]=!0;for(var f=0;f<c.length;f+=1){var d=c[f];a[d]||s[d]||n._topologicalSort(d,s,a,l,u)}a[i]=!1,s[i]=!0,u.push(i)},n.chain=function(){for(var i=[],s=0;s<arguments.length;s+=1){var a=arguments[s];a._chained?i.push.apply(i,a._chained):i.push(a)}var l=function(){for(var u,c=new Array(arguments.length),f=0,d=arguments.length;f<d;f++)c[f]=arguments[f];for(f=0;f<i.length;f+=1){var p=i[f].apply(u,c);typeof p<"u"&&(u=p)}return u};return l._chained=i,l},n.chainPathBefore=function(i,s,a){return n.set(i,s,n.chain(a,n.get(i,s)))},n.chainPathAfter=function(i,s,a){return n.set(i,s,n.chain(n.get(i,s),a))},n.setDecomp=function(i){n._decomp=i},n.getDecomp=function(){var i=n._decomp;try{!i&&typeof window<"u"&&(i=window.decomp),!i&&typeof global<"u"&&(i=global.decomp)}catch{i=null}return i}}()},function(t,r){var n={};t.exports=n,function(){n.create=function(o){var i={min:{x:0,y:0},max:{x:0,y:0}};return o&&n.update(i,o),i},n.update=function(o,i,s){o.min.x=1/0,o.max.x=-1/0,o.min.y=1/0,o.max.y=-1/0;for(var a=0;a<i.length;a++){var l=i[a];l.x>o.max.x&&(o.max.x=l.x),l.x<o.min.x&&(o.min.x=l.x),l.y>o.max.y&&(o.max.y=l.y),l.y<o.min.y&&(o.min.y=l.y)}s&&(s.x>0?o.max.x+=s.x:o.min.x+=s.x,s.y>0?o.max.y+=s.y:o.min.y+=s.y)},n.contains=function(o,i){return i.x>=o.min.x&&i.x<=o.max.x&&i.y>=o.min.y&&i.y<=o.max.y},n.overlaps=function(o,i){return o.min.x<=i.max.x&&o.max.x>=i.min.x&&o.max.y>=i.min.y&&o.min.y<=i.max.y},n.translate=function(o,i){o.min.x+=i.x,o.max.x+=i.x,o.min.y+=i.y,o.max.y+=i.y},n.shift=function(o,i){var s=o.max.x-o.min.x,a=o.max.y-o.min.y;o.min.x=i.x,o.max.x=i.x+s,o.min.y=i.y,o.max.y=i.y+a}}()},function(t,r){var n={};t.exports=n,function(){n.create=function(o,i){return{x:o||0,y:i||0}},n.clone=function(o){return{x:o.x,y:o.y}},n.magnitude=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},n.magnitudeSquared=function(o){return o.x*o.x+o.y*o.y},n.rotate=function(o,i,s){var a=Math.cos(i),l=Math.sin(i);s||(s={});var u=o.x*a-o.y*l;return s.y=o.x*l+o.y*a,s.x=u,s},n.rotateAbout=function(o,i,s,a){var l=Math.cos(i),u=Math.sin(i);a||(a={});var c=s.x+((o.x-s.x)*l-(o.y-s.y)*u);return a.y=s.y+((o.x-s.x)*u+(o.y-s.y)*l),a.x=c,a},n.normalise=function(o){var i=n.magnitude(o);return i===0?{x:0,y:0}:{x:o.x/i,y:o.y/i}},n.dot=function(o,i){return o.x*i.x+o.y*i.y},n.cross=function(o,i){return o.x*i.y-o.y*i.x},n.cross3=function(o,i,s){return(i.x-o.x)*(s.y-o.y)-(i.y-o.y)*(s.x-o.x)},n.add=function(o,i,s){return s||(s={}),s.x=o.x+i.x,s.y=o.y+i.y,s},n.sub=function(o,i,s){return s||(s={}),s.x=o.x-i.x,s.y=o.y-i.y,s},n.mult=function(o,i){return{x:o.x*i,y:o.y*i}},n.div=function(o,i){return{x:o.x/i,y:o.y/i}},n.perp=function(o,i){return i=i===!0?-1:1,{x:i*-o.y,y:i*o.x}},n.neg=function(o){return{x:-o.x,y:-o.y}},n.angle=function(o,i){return Math.atan2(i.y-o.y,i.x-o.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]}()},function(t,r,n){var o={};t.exports=o;var i=n(2),s=n(0);(function(){o.create=function(a,l){for(var u=[],c=0;c<a.length;c++){var f=a[c],d={x:f.x,y:f.y,index:c,body:l,isInternal:!1};u.push(d)}return u},o.fromPath=function(a,l){var u=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,c=[];return a.replace(u,function(f,d,p){c.push({x:parseFloat(d),y:parseFloat(p)})}),o.create(c,l)},o.centre=function(a){for(var l=o.area(a,!0),u={x:0,y:0},c,f,d,p=0;p<a.length;p++)d=(p+1)%a.length,c=i.cross(a[p],a[d]),f=i.mult(i.add(a[p],a[d]),c),u=i.add(u,f);return i.div(u,6*l)},o.mean=function(a){for(var l={x:0,y:0},u=0;u<a.length;u++)l.x+=a[u].x,l.y+=a[u].y;return i.div(l,a.length)},o.area=function(a,l){for(var u=0,c=a.length-1,f=0;f<a.length;f++)u+=(a[c].x-a[f].x)*(a[c].y+a[f].y),c=f;return l?u/2:Math.abs(u)/2},o.inertia=function(a,l){for(var u=0,c=0,f=a,d,p,h=0;h<f.length;h++)p=(h+1)%f.length,d=Math.abs(i.cross(f[p],f[h])),u+=d*(i.dot(f[p],f[p])+i.dot(f[p],f[h])+i.dot(f[h],f[h])),c+=d;return l/6*(u/c)},o.translate=function(a,l,u){u=typeof u<"u"?u:1;var c=a.length,f=l.x*u,d=l.y*u,p;for(p=0;p<c;p++)a[p].x+=f,a[p].y+=d;return a},o.rotate=function(a,l,u){if(l!==0){var c=Math.cos(l),f=Math.sin(l),d=u.x,p=u.y,h=a.length,m,g,y,b;for(b=0;b<h;b++)m=a[b],g=m.x-d,y=m.y-p,m.x=d+(g*c-y*f),m.y=p+(g*f+y*c);return a}},o.contains=function(a,l){for(var u=l.x,c=l.y,f=a.length,d=a[f-1],p,h=0;h<f;h++){if(p=a[h],(u-d.x)*(p.y-d.y)+(c-d.y)*(d.x-p.x)>0)return!1;d=p}return!0},o.scale=function(a,l,u,c){if(l===1&&u===1)return a;c=c||o.centre(a);for(var f,d,p=0;p<a.length;p++)f=a[p],d=i.sub(f,c),a[p].x=c.x+d.x*l,a[p].y=c.y+d.y*u;return a},o.chamfer=function(a,l,u,c,f){typeof l=="number"?l=[l]:l=l||[8],u=typeof u<"u"?u:-1,c=c||2,f=f||14;for(var d=[],p=0;p<a.length;p++){var h=a[p-1>=0?p-1:a.length-1],m=a[p],g=a[(p+1)%a.length],y=l[p<l.length?p:l.length-1];if(y===0){d.push(m);continue}var b=i.normalise({x:m.y-h.y,y:h.x-m.x}),x=i.normalise({x:g.y-m.y,y:m.x-g.x}),v=Math.sqrt(2*Math.pow(y,2)),w=i.mult(s.clone(b),y),_=i.normalise(i.mult(i.add(b,x),.5)),S=i.sub(m,i.mult(_,v)),C=u;u===-1&&(C=Math.pow(y,.32)*1.75),C=s.clamp(C,c,f),C%2===1&&(C+=1);for(var E=Math.acos(i.dot(b,x)),T=E/C,I=0;I<C;I++)d.push(i.add(i.rotate(w,T*I),S))}return d},o.clockwiseSort=function(a){var l=o.mean(a);return a.sort(function(u,c){return i.angle(l,u)-i.angle(l,c)}),a},o.isConvex=function(a){var l=0,u=a.length,c,f,d,p;if(u<3)return null;for(c=0;c<u;c++)if(f=(c+1)%u,d=(c+2)%u,p=(a[f].x-a[c].x)*(a[d].y-a[f].y),p-=(a[f].y-a[c].y)*(a[d].x-a[f].x),p<0?l|=1:p>0&&(l|=2),l===3)return!1;return l!==0?!0:null},o.hull=function(a){var l=[],u=[],c,f;for(a=a.slice(0),a.sort(function(d,p){var h=d.x-p.x;return h!==0?h:d.y-p.y}),f=0;f<a.length;f+=1){for(c=a[f];u.length>=2&&i.cross3(u[u.length-2],u[u.length-1],c)<=0;)u.pop();u.push(c)}for(f=a.length-1;f>=0;f-=1){for(c=a[f];l.length>=2&&i.cross3(l[l.length-2],l[l.length-1],c)<=0;)l.pop();l.push(c)}return l.pop(),u.pop(),l.concat(u)}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(2),a=n(7),l=n(0),u=n(1),c=n(11);(function(){o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=1e3/60,o.create=function(d){var p={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},h=l.extend(p,d);return f(h,d),h},o.nextGroup=function(d){return d?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var f=function(d,p){p=p||{},o.set(d,{bounds:d.bounds||u.create(d.vertices),positionPrev:d.positionPrev||s.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d}),i.rotate(d.vertices,d.angle,d.position),c.rotate(d.axes,d.angle),u.update(d.bounds,d.vertices,d.velocity),o.set(d,{axes:p.axes||d.axes,area:p.area||d.area,mass:p.mass||d.mass,inertia:p.inertia||d.inertia});var h=d.isStatic?"#14151f":l.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=d.isStatic?"#555":"#ccc",g=d.isStatic&&d.render.fillStyle===null?1:0;d.render.fillStyle=d.render.fillStyle||h,d.render.strokeStyle=d.render.strokeStyle||m,d.render.lineWidth=d.render.lineWidth||g,d.render.sprite.xOffset+=-(d.bounds.min.x-d.position.x)/(d.bounds.max.x-d.bounds.min.x),d.render.sprite.yOffset+=-(d.bounds.min.y-d.position.y)/(d.bounds.max.y-d.bounds.min.y)};o.set=function(d,p,h){var m;typeof p=="string"&&(m=p,p={},p[m]=h);for(m in p)if(Object.prototype.hasOwnProperty.call(p,m))switch(h=p[m],m){case"isStatic":o.setStatic(d,h);break;case"isSleeping":a.set(d,h);break;case"mass":o.setMass(d,h);break;case"density":o.setDensity(d,h);break;case"inertia":o.setInertia(d,h);break;case"vertices":o.setVertices(d,h);break;case"position":o.setPosition(d,h);break;case"angle":o.setAngle(d,h);break;case"velocity":o.setVelocity(d,h);break;case"angularVelocity":o.setAngularVelocity(d,h);break;case"speed":o.setSpeed(d,h);break;case"angularSpeed":o.setAngularSpeed(d,h);break;case"parts":o.setParts(d,h);break;case"centre":o.setCentre(d,h);break;default:d[m]=h}},o.setStatic=function(d,p){for(var h=0;h<d.parts.length;h++){var m=d.parts[h];m.isStatic=p,p?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},o.setMass=function(d,p){var h=d.inertia/(d.mass/6);d.inertia=h*(p/6),d.inverseInertia=1/d.inertia,d.mass=p,d.inverseMass=1/d.mass,d.density=d.mass/d.area},o.setDensity=function(d,p){o.setMass(d,p*d.area),d.density=p},o.setInertia=function(d,p){d.inertia=p,d.inverseInertia=1/d.inertia},o.setVertices=function(d,p){p[0].body===d?d.vertices=p:d.vertices=i.create(p,d),d.axes=c.fromVertices(d.vertices),d.area=i.area(d.vertices),o.setMass(d,d.density*d.area);var h=i.centre(d.vertices);i.translate(d.vertices,h,-1),o.setInertia(d,o._inertiaScale*i.inertia(d.vertices,d.mass)),i.translate(d.vertices,d.position),u.update(d.bounds,d.vertices,d.velocity)},o.setParts=function(d,p,h){var m;for(p=p.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,m=0;m<p.length;m++){var g=p[m];g!==d&&(g.parent=d,d.parts.push(g))}if(d.parts.length!==1){if(h=typeof h<"u"?h:!0,h){var y=[];for(m=0;m<p.length;m++)y=y.concat(p[m].vertices);i.clockwiseSort(y);var b=i.hull(y),x=i.centre(b);o.setVertices(d,b),i.translate(d.vertices,x)}var v=o._totalProperties(d);d.area=v.area,d.parent=d,d.position.x=v.centre.x,d.position.y=v.centre.y,d.positionPrev.x=v.centre.x,d.positionPrev.y=v.centre.y,o.setMass(d,v.mass),o.setInertia(d,v.inertia),o.setPosition(d,v.centre)}},o.setCentre=function(d,p,h){h?(d.positionPrev.x+=p.x,d.positionPrev.y+=p.y,d.position.x+=p.x,d.position.y+=p.y):(d.positionPrev.x=p.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=p.y-(d.position.y-d.positionPrev.y),d.position.x=p.x,d.position.y=p.y)},o.setPosition=function(d,p,h){var m=s.sub(p,d.position);h?(d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.velocity.x=m.x,d.velocity.y=m.y,d.speed=s.magnitude(m)):(d.positionPrev.x+=m.x,d.positionPrev.y+=m.y);for(var g=0;g<d.parts.length;g++){var y=d.parts[g];y.position.x+=m.x,y.position.y+=m.y,i.translate(y.vertices,m),u.update(y.bounds,y.vertices,d.velocity)}},o.setAngle=function(d,p,h){var m=p-d.angle;h?(d.anglePrev=d.angle,d.angularVelocity=m,d.angularSpeed=Math.abs(m)):d.anglePrev+=m;for(var g=0;g<d.parts.length;g++){var y=d.parts[g];y.angle+=m,i.rotate(y.vertices,m,d.position),c.rotate(y.axes,m),u.update(y.bounds,y.vertices,d.velocity),g>0&&s.rotateAbout(y.position,m,d.position,y.position)}},o.setVelocity=function(d,p){var h=d.deltaTime/o._baseDelta;d.positionPrev.x=d.position.x-p.x*h,d.positionPrev.y=d.position.y-p.y*h,d.velocity.x=(d.position.x-d.positionPrev.x)/h,d.velocity.y=(d.position.y-d.positionPrev.y)/h,d.speed=s.magnitude(d.velocity)},o.getVelocity=function(d){var p=o._baseDelta/d.deltaTime;return{x:(d.position.x-d.positionPrev.x)*p,y:(d.position.y-d.positionPrev.y)*p}},o.getSpeed=function(d){return s.magnitude(o.getVelocity(d))},o.setSpeed=function(d,p){o.setVelocity(d,s.mult(s.normalise(o.getVelocity(d)),p))},o.setAngularVelocity=function(d,p){var h=d.deltaTime/o._baseDelta;d.anglePrev=d.angle-p*h,d.angularVelocity=(d.angle-d.anglePrev)/h,d.angularSpeed=Math.abs(d.angularVelocity)},o.getAngularVelocity=function(d){return(d.angle-d.anglePrev)*o._baseDelta/d.deltaTime},o.getAngularSpeed=function(d){return Math.abs(o.getAngularVelocity(d))},o.setAngularSpeed=function(d,p){o.setAngularVelocity(d,l.sign(o.getAngularVelocity(d))*p)},o.translate=function(d,p,h){o.setPosition(d,s.add(d.position,p),h)},o.rotate=function(d,p,h,m){if(!h)o.setAngle(d,d.angle+p,m);else{var g=Math.cos(p),y=Math.sin(p),b=d.position.x-h.x,x=d.position.y-h.y;o.setPosition(d,{x:h.x+(b*g-x*y),y:h.y+(b*y+x*g)},m),o.setAngle(d,d.angle+p,m)}},o.scale=function(d,p,h,m){var g=0,y=0;m=m||d.position;for(var b=0;b<d.parts.length;b++){var x=d.parts[b];i.scale(x.vertices,p,h,m),x.axes=c.fromVertices(x.vertices),x.area=i.area(x.vertices),o.setMass(x,d.density*x.area),i.translate(x.vertices,{x:-x.position.x,y:-x.position.y}),o.setInertia(x,o._inertiaScale*i.inertia(x.vertices,x.mass)),i.translate(x.vertices,{x:x.position.x,y:x.position.y}),b>0&&(g+=x.area,y+=x.inertia),x.position.x=m.x+(x.position.x-m.x)*p,x.position.y=m.y+(x.position.y-m.y)*h,u.update(x.bounds,x.vertices,d.velocity)}d.parts.length>1&&(d.area=g,d.isStatic||(o.setMass(d,d.density*g),o.setInertia(d,y))),d.circleRadius&&(p===h?d.circleRadius*=p:d.circleRadius=null)},o.update=function(d,p){p=(typeof p<"u"?p:1e3/60)*d.timeScale;var h=p*p,m=o._timeCorrection?p/(d.deltaTime||p):1,g=1-d.frictionAir*(p/l._baseDelta),y=(d.position.x-d.positionPrev.x)*m,b=(d.position.y-d.positionPrev.y)*m;d.velocity.x=y*g+d.force.x/d.mass*h,d.velocity.y=b*g+d.force.y/d.mass*h,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.deltaTime=p,d.angularVelocity=(d.angle-d.anglePrev)*g*m+d.torque/d.inertia*h,d.anglePrev=d.angle,d.angle+=d.angularVelocity;for(var x=0;x<d.parts.length;x++){var v=d.parts[x];i.translate(v.vertices,d.velocity),x>0&&(v.position.x+=d.velocity.x,v.position.y+=d.velocity.y),d.angularVelocity!==0&&(i.rotate(v.vertices,d.angularVelocity,d.position),c.rotate(v.axes,d.angularVelocity),x>0&&s.rotateAbout(v.position,d.angularVelocity,d.position,v.position)),u.update(v.bounds,v.vertices,d.velocity)}},o.updateVelocities=function(d){var p=o._baseDelta/d.deltaTime,h=d.velocity;h.x=(d.position.x-d.positionPrev.x)*p,h.y=(d.position.y-d.positionPrev.y)*p,d.speed=Math.sqrt(h.x*h.x+h.y*h.y),d.angularVelocity=(d.angle-d.anglePrev)*p,d.angularSpeed=Math.abs(d.angularVelocity)},o.applyForce=function(d,p,h){var m={x:p.x-d.position.x,y:p.y-d.position.y};d.force.x+=h.x,d.force.y+=h.y,d.torque+=m.x*h.y-m.y*h.x},o._totalProperties=function(d){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},h=d.parts.length===1?0:1;h<d.parts.length;h++){var m=d.parts[h],g=m.mass!==1/0?m.mass:1;p.mass+=g,p.area+=m.area,p.inertia+=m.inertia,p.centre=s.add(p.centre,s.mult(m.position,g))}return p.centre=s.div(p.centre,p.mass),p}})()},function(t,r,n){var o={};t.exports=o;var i=n(0);(function(){o.on=function(s,a,l){for(var u=a.split(" "),c,f=0;f<u.length;f++)c=u[f],s.events=s.events||{},s.events[c]=s.events[c]||[],s.events[c].push(l);return l},o.off=function(s,a,l){if(!a){s.events={};return}typeof a=="function"&&(l=a,a=i.keys(s.events).join(" "));for(var u=a.split(" "),c=0;c<u.length;c++){var f=s.events[u[c]],d=[];if(l&&f)for(var p=0;p<f.length;p++)f[p]!==l&&d.push(f[p]);s.events[u[c]]=d}},o.trigger=function(s,a,l){var u,c,f,d,p=s.events;if(p&&i.keys(p).length>0){l||(l={}),u=a.split(" ");for(var h=0;h<u.length;h++)if(c=u[h],f=p[c],f){d=i.clone(l,!1),d.name=c,d.source=s;for(var m=0;m<f.length;m++)f[m].apply(s,[d])}}}})()},function(t,r,n){var o={};t.exports=o;var i=n(5),s=n(0),a=n(1),l=n(4);(function(){o.create=function(u){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},u)},o.setModified=function(u,c,f,d){if(u.isModified=c,c&&u.cache&&(u.cache.allBodies=null,u.cache.allConstraints=null,u.cache.allComposites=null),f&&u.parent&&o.setModified(u.parent,c,f,d),d)for(var p=0;p<u.composites.length;p++){var h=u.composites[p];o.setModified(h,c,f,d)}},o.add=function(u,c){var f=[].concat(c);i.trigger(u,"beforeAdd",{object:c});for(var d=0;d<f.length;d++){var p=f[d];switch(p.type){case"body":if(p.parent!==p){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(u,p);break;case"constraint":o.addConstraint(u,p);break;case"composite":o.addComposite(u,p);break;case"mouseConstraint":o.addConstraint(u,p.constraint);break}}return i.trigger(u,"afterAdd",{object:c}),u},o.remove=function(u,c,f){var d=[].concat(c);i.trigger(u,"beforeRemove",{object:c});for(var p=0;p<d.length;p++){var h=d[p];switch(h.type){case"body":o.removeBody(u,h,f);break;case"constraint":o.removeConstraint(u,h,f);break;case"composite":o.removeComposite(u,h,f);break;case"mouseConstraint":o.removeConstraint(u,h.constraint);break}}return i.trigger(u,"afterRemove",{object:c}),u},o.addComposite=function(u,c){return u.composites.push(c),c.parent=u,o.setModified(u,!0,!0,!1),u},o.removeComposite=function(u,c,f){var d=s.indexOf(u.composites,c);if(d!==-1&&o.removeCompositeAt(u,d),f)for(var p=0;p<u.composites.length;p++)o.removeComposite(u.composites[p],c,!0);return u},o.removeCompositeAt=function(u,c){return u.composites.splice(c,1),o.setModified(u,!0,!0,!1),u},o.addBody=function(u,c){return u.bodies.push(c),o.setModified(u,!0,!0,!1),u},o.removeBody=function(u,c,f){var d=s.indexOf(u.bodies,c);if(d!==-1&&o.removeBodyAt(u,d),f)for(var p=0;p<u.composites.length;p++)o.removeBody(u.composites[p],c,!0);return u},o.removeBodyAt=function(u,c){return u.bodies.splice(c,1),o.setModified(u,!0,!0,!1),u},o.addConstraint=function(u,c){return u.constraints.push(c),o.setModified(u,!0,!0,!1),u},o.removeConstraint=function(u,c,f){var d=s.indexOf(u.constraints,c);if(d!==-1&&o.removeConstraintAt(u,d),f)for(var p=0;p<u.composites.length;p++)o.removeConstraint(u.composites[p],c,!0);return u},o.removeConstraintAt=function(u,c){return u.constraints.splice(c,1),o.setModified(u,!0,!0,!1),u},o.clear=function(u,c,f){if(f)for(var d=0;d<u.composites.length;d++)o.clear(u.composites[d],c,!0);return c?u.bodies=u.bodies.filter(function(p){return p.isStatic}):u.bodies.length=0,u.constraints.length=0,u.composites.length=0,o.setModified(u,!0,!0,!1),u},o.allBodies=function(u){if(u.cache&&u.cache.allBodies)return u.cache.allBodies;for(var c=[].concat(u.bodies),f=0;f<u.composites.length;f++)c=c.concat(o.allBodies(u.composites[f]));return u.cache&&(u.cache.allBodies=c),c},o.allConstraints=function(u){if(u.cache&&u.cache.allConstraints)return u.cache.allConstraints;for(var c=[].concat(u.constraints),f=0;f<u.composites.length;f++)c=c.concat(o.allConstraints(u.composites[f]));return u.cache&&(u.cache.allConstraints=c),c},o.allComposites=function(u){if(u.cache&&u.cache.allComposites)return u.cache.allComposites;for(var c=[].concat(u.composites),f=0;f<u.composites.length;f++)c=c.concat(o.allComposites(u.composites[f]));return u.cache&&(u.cache.allComposites=c),c},o.get=function(u,c,f){var d,p;switch(f){case"body":d=o.allBodies(u);break;case"constraint":d=o.allConstraints(u);break;case"composite":d=o.allComposites(u).concat(u);break}return d?(p=d.filter(function(h){return h.id.toString()===c.toString()}),p.length===0?null:p[0]):null},o.move=function(u,c,f){return o.remove(u,c),o.add(f,c),u},o.rebase=function(u){for(var c=o.allBodies(u).concat(o.allConstraints(u)).concat(o.allComposites(u)),f=0;f<c.length;f++)c[f].id=s.nextId();return u},o.translate=function(u,c,f){for(var d=f?o.allBodies(u):u.bodies,p=0;p<d.length;p++)l.translate(d[p],c);return u},o.rotate=function(u,c,f,d){for(var p=Math.cos(c),h=Math.sin(c),m=d?o.allBodies(u):u.bodies,g=0;g<m.length;g++){var y=m[g],b=y.position.x-f.x,x=y.position.y-f.y;l.setPosition(y,{x:f.x+(b*p-x*h),y:f.y+(b*h+x*p)}),l.rotate(y,c)}return u},o.scale=function(u,c,f,d,p){for(var h=p?o.allBodies(u):u.bodies,m=0;m<h.length;m++){var g=h[m],y=g.position.x-d.x,b=g.position.y-d.y;l.setPosition(g,{x:d.x+y*c,y:d.y+b*f}),l.scale(g,c,f)}return u},o.bounds=function(u){for(var c=o.allBodies(u),f=[],d=0;d<c.length;d+=1){var p=c[d];f.push(p.bounds.min,p.bounds.max)}return a.create(f)}})()},function(t,r,n){var o={};t.exports=o;var i=n(4),s=n(5),a=n(0);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(l,u){for(var c=u/a._baseDelta,f=o._motionSleepThreshold,d=0;d<l.length;d++){var p=l[d],h=i.getSpeed(p),m=i.getAngularSpeed(p),g=h*h+m*m;if(p.force.x!==0||p.force.y!==0){o.set(p,!1);continue}var y=Math.min(p.motion,g),b=Math.max(p.motion,g);p.motion=o._minBias*y+(1-o._minBias)*b,p.sleepThreshold>0&&p.motion<f?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/c&&o.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},o.afterCollisions=function(l){for(var u=o._motionSleepThreshold,c=0;c<l.length;c++){var f=l[c];if(f.isActive){var d=f.collision,p=d.bodyA.parent,h=d.bodyB.parent;if(!(p.isSleeping&&h.isSleeping||p.isStatic||h.isStatic)&&(p.isSleeping||h.isSleeping)){var m=p.isSleeping&&!p.isStatic?p:h,g=m===p?h:p;!m.isStatic&&g.motion>u&&o.set(m,!1)}}}},o.set=function(l,u){var c=l.isSleeping;u?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,c||s.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,c&&s.trigger(l,"sleepEnd"))}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(9);(function(){var a=[],l={overlap:0,axis:null},u={overlap:0,axis:null};o.create=function(c,f){return{pair:null,collided:!1,bodyA:c,bodyB:f,parentA:c.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},o.collides=function(c,f,d){if(o._overlapAxes(l,c.vertices,f.vertices,c.axes),l.overlap<=0||(o._overlapAxes(u,f.vertices,c.vertices,f.axes),u.overlap<=0))return null;var p=d&&d.table[s.id(c,f)],h;p?h=p.collision:(h=o.create(c,f),h.collided=!0,h.bodyA=c.id<f.id?c:f,h.bodyB=c.id<f.id?f:c,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent),c=h.bodyA,f=h.bodyB;var m;l.overlap<u.overlap?m=l:m=u;var g=h.normal,y=h.supports,b=m.axis,x=b.x,v=b.y;x*(f.position.x-c.position.x)+v*(f.position.y-c.position.y)<0?(g.x=x,g.y=v):(g.x=-x,g.y=-v),h.tangent.x=-g.y,h.tangent.y=g.x,h.depth=m.overlap,h.penetration.x=g.x*h.depth,h.penetration.y=g.y*h.depth;var w=o._findSupports(c,f,g,1),_=0;if(i.contains(c.vertices,w[0])&&(y[_++]=w[0]),i.contains(c.vertices,w[1])&&(y[_++]=w[1]),_<2){var S=o._findSupports(f,c,g,-1);i.contains(f.vertices,S[0])&&(y[_++]=S[0]),_<2&&i.contains(f.vertices,S[1])&&(y[_++]=S[1])}return _===0&&(y[_++]=w[0]),y.length=_,h},o._overlapAxes=function(c,f,d,p){var h=f.length,m=d.length,g=f[0].x,y=f[0].y,b=d[0].x,x=d[0].y,v=p.length,w=Number.MAX_VALUE,_=0,S,C,E,T,I,k;for(I=0;I<v;I++){var F=p[I],D=F.x,L=F.y,P=g*D+y*L,R=b*D+x*L,V=P,G=R;for(k=1;k<h;k+=1)T=f[k].x*D+f[k].y*L,T>V?V=T:T<P&&(P=T);for(k=1;k<m;k+=1)T=d[k].x*D+d[k].y*L,T>G?G=T:T<R&&(R=T);if(C=V-R,E=G-P,S=C<E?C:E,S<w&&(w=S,_=I,S<=0))break}c.axis=p[_],c.overlap=w},o._projectToAxis=function(c,f,d){for(var p=f[0].x*d.x+f[0].y*d.y,h=p,m=1;m<f.length;m+=1){var g=f[m].x*d.x+f[m].y*d.y;g>h?h=g:g<p&&(p=g)}c.min=p,c.max=h},o._findSupports=function(c,f,d,p){var h=f.vertices,m=h.length,g=c.position.x,y=c.position.y,b=d.x*p,x=d.y*p,v=Number.MAX_VALUE,w,_,S,C,E;for(E=0;E<m;E+=1)_=h[E],C=b*(g-_.x)+x*(y-_.y),C<v&&(v=C,w=_);return S=h[(m+w.index-1)%m],v=b*(g-S.x)+x*(y-S.y),_=h[(w.index+1)%m],b*(g-_.x)+x*(y-_.y)<v?(a[0]=w,a[1]=_,a):(a[0]=w,a[1]=S,a)}})()},function(t,r,n){var o={};t.exports=o;var i=n(16);(function(){o.create=function(s,a){var l=s.bodyA,u=s.bodyB,c={id:o.id(l,u),bodyA:l,bodyB:u,collision:s,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:l.isSensor||u.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(c,s,a),c},o.update=function(s,a,l){var u=s.contacts,c=a.supports,f=s.activeContacts,d=a.parentA,p=a.parentB,h=d.vertices.length;s.isActive=!0,s.timeUpdated=l,s.collision=a,s.separation=a.depth,s.inverseMass=d.inverseMass+p.inverseMass,s.friction=d.friction<p.friction?d.friction:p.friction,s.frictionStatic=d.frictionStatic>p.frictionStatic?d.frictionStatic:p.frictionStatic,s.restitution=d.restitution>p.restitution?d.restitution:p.restitution,s.slop=d.slop>p.slop?d.slop:p.slop,a.pair=s,f.length=0;for(var m=0;m<c.length;m++){var g=c[m],y=g.body===d?g.index:h+g.index,b=u[y];b?f.push(b):f.push(u[y]=i.create(g))}},o.setActive=function(s,a,l){a?(s.isActive=!0,s.timeUpdated=l):(s.isActive=!1,s.activeContacts.length=0)},o.id=function(s,a){return s.id<a.id?"A"+s.id+"B"+a.id:"A"+a.id+"B"+s.id}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(2),a=n(7),l=n(1),u=n(11),c=n(0);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(f){var d=f;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var p=d.bodyA?s.add(d.bodyA.position,d.pointA):d.pointA,h=d.bodyB?s.add(d.bodyB.position,d.pointB):d.pointB,m=s.magnitude(s.sub(p,h));d.length=typeof d.length<"u"?d.length:m,d.id=d.id||c.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return d.length===0&&d.stiffness>.1?(g.type="pin",g.anchors=!1):d.stiffness<.9&&(g.type="spring"),d.render=c.extend(g,d.render),d},o.preSolveAll=function(f){for(var d=0;d<f.length;d+=1){var p=f[d],h=p.constraintImpulse;p.isStatic||h.x===0&&h.y===0&&h.angle===0||(p.position.x+=h.x,p.position.y+=h.y,p.angle+=h.angle)}},o.solveAll=function(f,d){for(var p=c.clamp(d/c._baseDelta,0,1),h=0;h<f.length;h+=1){var m=f[h],g=!m.bodyA||m.bodyA&&m.bodyA.isStatic,y=!m.bodyB||m.bodyB&&m.bodyB.isStatic;(g||y)&&o.solve(f[h],p)}for(h=0;h<f.length;h+=1)m=f[h],g=!m.bodyA||m.bodyA&&m.bodyA.isStatic,y=!m.bodyB||m.bodyB&&m.bodyB.isStatic,!g&&!y&&o.solve(f[h],p)},o.solve=function(f,d){var p=f.bodyA,h=f.bodyB,m=f.pointA,g=f.pointB;if(!(!p&&!h)){p&&!p.isStatic&&(s.rotate(m,p.angle-f.angleA,m),f.angleA=p.angle),h&&!h.isStatic&&(s.rotate(g,h.angle-f.angleB,g),f.angleB=h.angle);var y=m,b=g;if(p&&(y=s.add(p.position,m)),h&&(b=s.add(h.position,g)),!(!y||!b)){var x=s.sub(y,b),v=s.magnitude(x);v<o._minLength&&(v=o._minLength);var w=(v-f.length)/v,_=f.stiffness>=1||f.length===0,S=_?f.stiffness*d:f.stiffness*d*d,C=f.damping*d,E=s.mult(x,w*S),T=(p?p.inverseMass:0)+(h?h.inverseMass:0),I=(p?p.inverseInertia:0)+(h?h.inverseInertia:0),k=T+I,F,D,L,P,R;if(C>0){var V=s.create();L=s.div(x,v),R=s.sub(h&&s.sub(h.position,h.positionPrev)||V,p&&s.sub(p.position,p.positionPrev)||V),P=s.dot(L,R)}p&&!p.isStatic&&(D=p.inverseMass/T,p.constraintImpulse.x-=E.x*D,p.constraintImpulse.y-=E.y*D,p.position.x-=E.x*D,p.position.y-=E.y*D,C>0&&(p.positionPrev.x-=C*L.x*P*D,p.positionPrev.y-=C*L.y*P*D),F=s.cross(m,E)/k*o._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle-=F,p.angle-=F),h&&!h.isStatic&&(D=h.inverseMass/T,h.constraintImpulse.x+=E.x*D,h.constraintImpulse.y+=E.y*D,h.position.x+=E.x*D,h.position.y+=E.y*D,C>0&&(h.positionPrev.x+=C*L.x*P*D,h.positionPrev.y+=C*L.y*P*D),F=s.cross(g,E)/k*o._torqueDampen*h.inverseInertia*(1-f.angularStiffness),h.constraintImpulse.angle+=F,h.angle+=F)}}},o.postSolveAll=function(f){for(var d=0;d<f.length;d++){var p=f[d],h=p.constraintImpulse;if(!(p.isStatic||h.x===0&&h.y===0&&h.angle===0)){a.set(p,!1);for(var m=0;m<p.parts.length;m++){var g=p.parts[m];i.translate(g.vertices,h),m>0&&(g.position.x+=h.x,g.position.y+=h.y),h.angle!==0&&(i.rotate(g.vertices,h.angle,p.position),u.rotate(g.axes,h.angle),m>0&&s.rotateAbout(g.position,h.angle,p.position,g.position)),l.update(g.bounds,g.vertices,p.velocity)}h.angle*=o._warming,h.x*=o._warming,h.y*=o._warming}}},o.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},o.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}}})()},function(t,r,n){var o={};t.exports=o;var i=n(2),s=n(0);(function(){o.fromVertices=function(a){for(var l={},u=0;u<a.length;u++){var c=(u+1)%a.length,f=i.normalise({x:a[c].y-a[u].y,y:a[u].x-a[c].x}),d=f.y===0?1/0:f.x/f.y;d=d.toFixed(3).toString(),l[d]=f}return s.values(l)},o.rotate=function(a,l){if(l!==0)for(var u=Math.cos(l),c=Math.sin(l),f=0;f<a.length;f++){var d=a[f],p;p=d.x*u-d.y*c,d.y=d.x*c+d.y*u,d.x=p}}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(0),a=n(4),l=n(1),u=n(2);(function(){o.rectangle=function(c,f,d,p,h){h=h||{};var m={label:"Rectangle Body",position:{x:c,y:f},vertices:i.fromPath("L 0 0 L "+d+" 0 L "+d+" "+p+" L 0 "+p)};if(h.chamfer){var g=h.chamfer;m.vertices=i.chamfer(m.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete h.chamfer}return a.create(s.extend({},m,h))},o.trapezoid=function(c,f,d,p,h,m){m=m||{},h*=.5;var g=(1-h*2)*d,y=d*h,b=y+g,x=b+y,v;h<.5?v="L 0 0 L "+y+" "+-p+" L "+b+" "+-p+" L "+x+" 0":v="L 0 0 L "+b+" "+-p+" L "+x+" 0";var w={label:"Trapezoid Body",position:{x:c,y:f},vertices:i.fromPath(v)};if(m.chamfer){var _=m.chamfer;w.vertices=i.chamfer(w.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete m.chamfer}return a.create(s.extend({},w,m))},o.circle=function(c,f,d,p,h){p=p||{};var m={label:"Circle Body",circleRadius:d};h=h||25;var g=Math.ceil(Math.max(10,Math.min(h,d)));return g%2===1&&(g+=1),o.polygon(c,f,g,d,s.extend({},m,p))},o.polygon=function(c,f,d,p,h){if(h=h||{},d<3)return o.circle(c,f,p,h);for(var m=2*Math.PI/d,g="",y=m*.5,b=0;b<d;b+=1){var x=y+b*m,v=Math.cos(x)*p,w=Math.sin(x)*p;g+="L "+v.toFixed(3)+" "+w.toFixed(3)+" "}var _={label:"Polygon Body",position:{x:c,y:f},vertices:i.fromPath(g)};if(h.chamfer){var S=h.chamfer;_.vertices=i.chamfer(_.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete h.chamfer}return a.create(s.extend({},_,h))},o.fromVertices=function(c,f,d,p,h,m,g,y){var b=s.getDecomp(),x,v,w,_,S,C,E,T,I,k,F;for(x=!!(b&&b.quickDecomp),p=p||{},w=[],h=typeof h<"u"?h:!1,m=typeof m<"u"?m:.01,g=typeof g<"u"?g:10,y=typeof y<"u"?y:.01,s.isArray(d[0])||(d=[d]),k=0;k<d.length;k+=1)if(C=d[k],_=i.isConvex(C),S=!_,S&&!x&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),_||!x)_?C=i.clockwiseSort(C):C=i.hull(C),w.push({position:{x:c,y:f},vertices:C});else{var D=C.map(function(M){return[M.x,M.y]});b.makeCCW(D),m!==!1&&b.removeCollinearPoints(D,m),y!==!1&&b.removeDuplicatePoints&&b.removeDuplicatePoints(D,y);var L=b.quickDecomp(D);for(E=0;E<L.length;E++){var P=L[E],R=P.map(function(M){return{x:M[0],y:M[1]}});g>0&&i.area(R)<g||w.push({position:i.centre(R),vertices:R})}}for(E=0;E<w.length;E++)w[E]=a.create(s.extend(w[E],p));if(h){var V=5;for(E=0;E<w.length;E++){var G=w[E];for(T=E+1;T<w.length;T++){var U=w[T];if(l.overlaps(G.bounds,U.bounds)){var H=G.vertices,X=U.vertices;for(I=0;I<G.vertices.length;I++)for(F=0;F<U.vertices.length;F++){var fe=u.magnitudeSquared(u.sub(H[(I+1)%H.length],X[F])),$=u.magnitudeSquared(u.sub(H[I],X[(F+1)%X.length]));fe<V&&$<V&&(H[I].isInternal=!0,X[F].isInternal=!0)}}}}}return w.length>1?(v=a.create(s.extend({parts:w.slice(0)},p)),a.setPosition(v,{x:c,y:f}),v):w[0]}})()},function(t,r,n){var o={};t.exports=o;var i=n(0),s=n(8);(function(){o.create=function(a){var l={bodies:[],pairs:null};return i.extend(l,a)},o.setBodies=function(a,l){a.bodies=l.slice(0)},o.clear=function(a){a.bodies=[]},o.collisions=function(a){var l=[],u=a.pairs,c=a.bodies,f=c.length,d=o.canCollide,p=s.collides,h,m;for(c.sort(o._compareBoundsX),h=0;h<f;h++){var g=c[h],y=g.bounds,b=g.bounds.max.x,x=g.bounds.max.y,v=g.bounds.min.y,w=g.isStatic||g.isSleeping,_=g.parts.length,S=_===1;for(m=h+1;m<f;m++){var C=c[m],E=C.bounds;if(E.min.x>b)break;if(!(x<E.min.y||v>E.max.y)&&!(w&&(C.isStatic||C.isSleeping))&&d(g.collisionFilter,C.collisionFilter)){var T=C.parts.length;if(S&&T===1){var I=p(g,C,u);I&&l.push(I)}else for(var k=_>1?1:0,F=T>1?1:0,D=k;D<_;D++)for(var L=g.parts[D],y=L.bounds,P=F;P<T;P++){var R=C.parts[P],E=R.bounds;if(!(y.min.x>E.max.x||y.max.x<E.min.x||y.max.y<E.min.y||y.min.y>E.max.y)){var I=p(L,R,u);I&&l.push(I)}}}}}return l},o.canCollide=function(a,l){return a.group===l.group&&a.group!==0?a.group>0:(a.mask&l.category)!==0&&(l.mask&a.category)!==0},o._compareBoundsX=function(a,l){return a.bounds.min.x-l.bounds.min.x}})()},function(t,r,n){var o={};t.exports=o;var i=n(0);(function(){o.create=function(s){var a={};return s||i.log("Mouse.create: element was undefined, defaulting to document.body","warn"),a.element=s||document.body,a.absolute={x:0,y:0},a.position={x:0,y:0},a.mousedownPosition={x:0,y:0},a.mouseupPosition={x:0,y:0},a.offset={x:0,y:0},a.scale={x:1,y:1},a.wheelDelta=0,a.button=-1,a.pixelRatio=parseInt(a.element.getAttribute("data-pixel-ratio"),10)||1,a.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},a.mousemove=function(l){var u=o._getRelativeMousePosition(l,a.element,a.pixelRatio),c=l.changedTouches;c&&(a.button=0,l.preventDefault()),a.absolute.x=u.x,a.absolute.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mousemove=l},a.mousedown=function(l){var u=o._getRelativeMousePosition(l,a.element,a.pixelRatio),c=l.changedTouches;c?(a.button=0,l.preventDefault()):a.button=l.button,a.absolute.x=u.x,a.absolute.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mousedownPosition.x=a.position.x,a.mousedownPosition.y=a.position.y,a.sourceEvents.mousedown=l},a.mouseup=function(l){var u=o._getRelativeMousePosition(l,a.element,a.pixelRatio),c=l.changedTouches;c&&l.preventDefault(),a.button=-1,a.absolute.x=u.x,a.absolute.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mouseupPosition.x=a.position.x,a.mouseupPosition.y=a.position.y,a.sourceEvents.mouseup=l},a.mousewheel=function(l){a.wheelDelta=Math.max(-1,Math.min(1,l.wheelDelta||-l.detail)),l.preventDefault()},o.setElement(a,a.element),a},o.setElement=function(s,a){s.element=a,a.addEventListener("mousemove",s.mousemove),a.addEventListener("mousedown",s.mousedown),a.addEventListener("mouseup",s.mouseup),a.addEventListener("mousewheel",s.mousewheel),a.addEventListener("DOMMouseScroll",s.mousewheel),a.addEventListener("touchmove",s.mousemove),a.addEventListener("touchstart",s.mousedown),a.addEventListener("touchend",s.mouseup)},o.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},o.setOffset=function(s,a){s.offset.x=a.x,s.offset.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},o.setScale=function(s,a){s.scale.x=a.x,s.scale.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},o._getRelativeMousePosition=function(s,a,l){var u=a.getBoundingClientRect(),c=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:c.scrollLeft,d=window.pageYOffset!==void 0?window.pageYOffset:c.scrollTop,p=s.changedTouches,h,m;return p?(h=p[0].pageX-u.left-f,m=p[0].pageY-u.top-d):(h=s.pageX-u.left-f,m=s.pageY-u.top-d),{x:h/(a.clientWidth/(a.width||a.clientWidth)*l),y:m/(a.clientHeight/(a.height||a.clientHeight)*l)}}})()},function(t,r,n){var o={};t.exports=o;var i=n(0);(function(){o._registry={},o.register=function(s){if(o.isPlugin(s)||i.warn("Plugin.register:",o.toString(s),"does not implement all required fields."),s.name in o._registry){var a=o._registry[s.name],l=o.versionParse(s.version).number,u=o.versionParse(a.version).number;l>u?(i.warn("Plugin.register:",o.toString(a),"was upgraded to",o.toString(s)),o._registry[s.name]=s):l<u?i.warn("Plugin.register:",o.toString(a),"can not be downgraded to",o.toString(s)):s!==a&&i.warn("Plugin.register:",o.toString(s),"is already registered to different plugin object")}else o._registry[s.name]=s;return s},o.resolve=function(s){return o._registry[o.dependencyParse(s).name]},o.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},o.isPlugin=function(s){return s&&s.name&&s.version&&s.install},o.isUsed=function(s,a){return s.used.indexOf(a)>-1},o.isFor=function(s,a){var l=s.for&&o.dependencyParse(s.for);return!s.for||a.name===l.name&&o.versionSatisfies(a.version,l.range)},o.use=function(s,a){if(s.uses=(s.uses||[]).concat(a||[]),s.uses.length===0){i.warn("Plugin.use:",o.toString(s),"does not specify any dependencies to install.");return}for(var l=o.dependencies(s),u=i.topologicalSort(l),c=[],f=0;f<u.length;f+=1)if(u[f]!==s.name){var d=o.resolve(u[f]);if(!d){c.push("\u274C "+u[f]);continue}o.isUsed(s,d.name)||(o.isFor(d,s)||(i.warn("Plugin.use:",o.toString(d),"is for",d.for,"but installed on",o.toString(s)+"."),d._warned=!0),d.install?d.install(s):(i.warn("Plugin.use:",o.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(c.push("\u{1F536} "+o.toString(d)),delete d._warned):c.push("\u2705 "+o.toString(d)),s.used.push(d.name))}c.length>0&&i.info(c.join("  "))},o.dependencies=function(s,a){var l=o.dependencyParse(s),u=l.name;if(a=a||{},!(u in a)){s=o.resolve(s)||s,a[u]=i.map(s.uses||[],function(f){o.isPlugin(f)&&o.register(f);var d=o.dependencyParse(f),p=o.resolve(f);return p&&!o.versionSatisfies(p.version,d.range)?(i.warn("Plugin.dependencies:",o.toString(p),"does not satisfy",o.toString(d),"used by",o.toString(l)+"."),p._warned=!0,s._warned=!0):p||(i.warn("Plugin.dependencies:",o.toString(f),"used by",o.toString(l),"could not be resolved."),s._warned=!0),d.name});for(var c=0;c<a[u].length;c+=1)o.dependencies(a[u][c],a);return a}},o.dependencyParse=function(s){if(i.isString(s)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return a.test(s)||i.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},o.versionParse=function(s){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(s)||i.warn("Plugin.versionParse:",s,"is not a valid version or range.");var l=a.exec(s),u=Number(l[4]),c=Number(l[5]),f=Number(l[6]);return{isRange:!!(l[1]||l[2]),version:l[3],range:s,operator:l[1]||l[2]||"",major:u,minor:c,patch:f,parts:[u,c,f],prerelease:l[7],number:u*1e8+c*1e4+f}},o.versionSatisfies=function(s,a){a=a||"*";var l=o.versionParse(a),u=o.versionParse(s);if(l.isRange){if(l.operator==="*"||s==="*")return!0;if(l.operator===">")return u.number>l.number;if(l.operator===">=")return u.number>=l.number;if(l.operator==="~")return u.major===l.major&&u.minor===l.minor&&u.patch>=l.patch;if(l.operator==="^")return l.major>0?u.major===l.major&&u.number>=l.number:l.minor>0?u.minor===l.minor&&u.patch>=l.patch:u.patch===l.patch}return s===a||s==="*"}})()},function(t,r){var n={};t.exports=n,function(){n.create=function(o){return{vertex:o,normalImpulse:0,tangentImpulse:0}}}()},function(t,r,n){var o={};t.exports=o;var i=n(7),s=n(18),a=n(13),l=n(19),u=n(5),c=n(6),f=n(10),d=n(0),p=n(4);(function(){o.create=function(h){h=h||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=d.extend(m,h);return g.world=h.world||c.create({label:"World"}),g.pairs=h.pairs||l.create(),g.detector=h.detector||a.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},o.update=function(h,m){var g=d.now(),y=h.world,b=h.detector,x=h.pairs,v=h.timing,w=v.timestamp,_;m=typeof m<"u"?m:d._baseDelta,m*=v.timeScale,v.timestamp+=m,v.lastDelta=m;var S={timestamp:v.timestamp,delta:m};u.trigger(h,"beforeUpdate",S);var C=c.allBodies(y),E=c.allConstraints(y);for(y.isModified&&(a.setBodies(b,C),c.setModified(y,!1,!1,!0)),h.enableSleeping&&i.update(C,m),o._bodiesApplyGravity(C,h.gravity),m>0&&o._bodiesUpdate(C,m),f.preSolveAll(C),_=0;_<h.constraintIterations;_++)f.solveAll(E,m);f.postSolveAll(C),b.pairs=h.pairs;var T=a.collisions(b);l.update(x,T,w),h.enableSleeping&&i.afterCollisions(x.list),x.collisionStart.length>0&&u.trigger(h,"collisionStart",{pairs:x.collisionStart});var I=d.clamp(20/h.positionIterations,0,1);for(s.preSolvePosition(x.list),_=0;_<h.positionIterations;_++)s.solvePosition(x.list,m,I);for(s.postSolvePosition(C),f.preSolveAll(C),_=0;_<h.constraintIterations;_++)f.solveAll(E,m);for(f.postSolveAll(C),s.preSolveVelocity(x.list),_=0;_<h.velocityIterations;_++)s.solveVelocity(x.list,m);return o._bodiesUpdateVelocities(C),x.collisionActive.length>0&&u.trigger(h,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&u.trigger(h,"collisionEnd",{pairs:x.collisionEnd}),o._bodiesClearForces(C),u.trigger(h,"afterUpdate",S),h.timing.lastElapsed=d.now()-g,h},o.merge=function(h,m){if(d.extend(h,m),m.world){h.world=m.world,o.clear(h);for(var g=c.allBodies(h.world),y=0;y<g.length;y++){var b=g[y];i.set(b,!1),b.id=d.nextId()}}},o.clear=function(h){l.clear(h.pairs),a.clear(h.detector)},o._bodiesClearForces=function(h){for(var m=h.length,g=0;g<m;g++){var y=h[g];y.force.x=0,y.force.y=0,y.torque=0}},o._bodiesApplyGravity=function(h,m){var g=typeof m.scale<"u"?m.scale:.001,y=h.length;if(!(m.x===0&&m.y===0||g===0))for(var b=0;b<y;b++){var x=h[b];x.isStatic||x.isSleeping||(x.force.y+=x.mass*m.y*g,x.force.x+=x.mass*m.x*g)}},o._bodiesUpdate=function(h,m){for(var g=h.length,y=0;y<g;y++){var b=h[y];b.isStatic||b.isSleeping||p.update(b,m)}},o._bodiesUpdateVelocities=function(h){for(var m=h.length,g=0;g<m;g++)p.updateVelocities(h[g])}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(0),a=n(1);(function(){o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(l){var u,c,f,d=l.length;for(u=0;u<d;u++)c=l[u],c.isActive&&(f=c.activeContacts.length,c.collision.parentA.totalContacts+=f,c.collision.parentB.totalContacts+=f)},o.solvePosition=function(l,u,c){var f,d,p,h,m,g,y,b,x=o._positionDampen*(c||1),v=s.clamp(u/s._baseDelta,0,1),w=l.length;for(f=0;f<w;f++)d=l[f],!(!d.isActive||d.isSensor)&&(p=d.collision,h=p.parentA,m=p.parentB,g=p.normal,d.separation=g.x*(m.positionImpulse.x+p.penetration.x-h.positionImpulse.x)+g.y*(m.positionImpulse.y+p.penetration.y-h.positionImpulse.y));for(f=0;f<w;f++)d=l[f],!(!d.isActive||d.isSensor)&&(p=d.collision,h=p.parentA,m=p.parentB,g=p.normal,b=d.separation-d.slop*v,(h.isStatic||m.isStatic)&&(b*=2),h.isStatic||h.isSleeping||(y=x/h.totalContacts,h.positionImpulse.x+=g.x*b*y,h.positionImpulse.y+=g.y*b*y),m.isStatic||m.isSleeping||(y=x/m.totalContacts,m.positionImpulse.x-=g.x*b*y,m.positionImpulse.y-=g.y*b*y))},o.postSolvePosition=function(l){for(var u=o._positionWarming,c=l.length,f=i.translate,d=a.update,p=0;p<c;p++){var h=l[p],m=h.positionImpulse,g=m.x,y=m.y,b=h.velocity;if(h.totalContacts=0,g!==0||y!==0){for(var x=0;x<h.parts.length;x++){var v=h.parts[x];f(v.vertices,m),d(v.bounds,v.vertices,b),v.position.x+=g,v.position.y+=y}h.positionPrev.x+=g,h.positionPrev.y+=y,g*b.x+y*b.y<0?(m.x=0,m.y=0):(m.x*=u,m.y*=u)}}},o.preSolveVelocity=function(l){var u=l.length,c,f;for(c=0;c<u;c++){var d=l[c];if(!(!d.isActive||d.isSensor)){var p=d.activeContacts,h=p.length,m=d.collision,g=m.parentA,y=m.parentB,b=m.normal,x=m.tangent;for(f=0;f<h;f++){var v=p[f],w=v.vertex,_=v.normalImpulse,S=v.tangentImpulse;if(_!==0||S!==0){var C=b.x*_+x.x*S,E=b.y*_+x.y*S;g.isStatic||g.isSleeping||(g.positionPrev.x+=C*g.inverseMass,g.positionPrev.y+=E*g.inverseMass,g.anglePrev+=g.inverseInertia*((w.x-g.position.x)*E-(w.y-g.position.y)*C)),y.isStatic||y.isSleeping||(y.positionPrev.x-=C*y.inverseMass,y.positionPrev.y-=E*y.inverseMass,y.anglePrev-=y.inverseInertia*((w.x-y.position.x)*E-(w.y-y.position.y)*C))}}}}},o.solveVelocity=function(l,u){var c=u/s._baseDelta,f=c*c,d=f*c,p=-o._restingThresh*c,h=o._restingThreshTangent,m=o._frictionNormalMultiplier*c,g=o._frictionMaxStatic,y=l.length,b,x,v,w;for(v=0;v<y;v++){var _=l[v];if(!(!_.isActive||_.isSensor)){var S=_.collision,C=S.parentA,E=S.parentB,T=C.velocity,I=E.velocity,k=S.normal.x,F=S.normal.y,D=S.tangent.x,L=S.tangent.y,P=_.activeContacts,R=P.length,V=1/R,G=C.inverseMass+E.inverseMass,U=_.friction*_.frictionStatic*m;for(T.x=C.position.x-C.positionPrev.x,T.y=C.position.y-C.positionPrev.y,I.x=E.position.x-E.positionPrev.x,I.y=E.position.y-E.positionPrev.y,C.angularVelocity=C.angle-C.anglePrev,E.angularVelocity=E.angle-E.anglePrev,w=0;w<R;w++){var H=P[w],X=H.vertex,fe=X.x-C.position.x,$=X.y-C.position.y,M=X.x-E.position.x,z=X.y-E.position.y,q=T.x-$*C.angularVelocity,ee=T.y+fe*C.angularVelocity,ae=I.x-z*E.angularVelocity,Q=I.y+M*E.angularVelocity,le=q-ae,ie=ee-Q,K=k*le+F*ie,ge=D*le+L*ie,ne=_.separation+K,ye=Math.min(ne,1);ye=ne<0?0:ye;var xe=ye*U;ge<-xe||ge>xe?(x=ge>0?ge:-ge,b=_.friction*(ge>0?1:-1)*d,b<-x?b=-x:b>x&&(b=x)):(b=ge,x=g);var De=fe*F-$*k,Te=M*F-z*k,Fe=V/(G+C.inverseInertia*De*De+E.inverseInertia*Te*Te),$e=(1+_.restitution)*K*Fe;if(b*=Fe,K<p)H.normalImpulse=0;else{var at=H.normalImpulse;H.normalImpulse+=$e,H.normalImpulse>0&&(H.normalImpulse=0),$e=H.normalImpulse-at}if(ge<-h||ge>h)H.tangentImpulse=0;else{var We=H.tangentImpulse;H.tangentImpulse+=b,H.tangentImpulse<-x&&(H.tangentImpulse=-x),H.tangentImpulse>x&&(H.tangentImpulse=x),b=H.tangentImpulse-We}var jt=k*$e+D*b,_t=F*$e+L*b;C.isStatic||C.isSleeping||(C.positionPrev.x+=jt*C.inverseMass,C.positionPrev.y+=_t*C.inverseMass,C.anglePrev+=(fe*_t-$*jt)*C.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=jt*E.inverseMass,E.positionPrev.y-=_t*E.inverseMass,E.anglePrev-=(M*_t-z*jt)*E.inverseInertia)}}}}})()},function(t,r,n){var o={};t.exports=o;var i=n(9),s=n(0);(function(){o.create=function(a){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},o.update=function(a,l,u){var c=a.list,f=c.length,d=a.table,p=l.length,h=a.collisionStart,m=a.collisionEnd,g=a.collisionActive,y,b,x,v;for(h.length=0,m.length=0,g.length=0,v=0;v<f;v++)c[v].confirmedActive=!1;for(v=0;v<p;v++)y=l[v],x=y.pair,x?(x.isActive?g.push(x):h.push(x),i.update(x,y,u),x.confirmedActive=!0):(x=i.create(y,u),d[x.id]=x,h.push(x),c.push(x));var w=[];for(f=c.length,v=0;v<f;v++)x=c[v],x.confirmedActive||(i.setActive(x,!1,u),m.push(x),!x.collision.bodyA.isSleeping&&!x.collision.bodyB.isSleeping&&w.push(v));for(v=0;v<w.length;v++)b=w[v]-v,x=c[b],c.splice(b,1),delete d[x.id]},o.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(t,r,n){var o=t.exports=n(21);o.Axes=n(11),o.Bodies=n(12),o.Body=n(4),o.Bounds=n(1),o.Collision=n(8),o.Common=n(0),o.Composite=n(6),o.Composites=n(22),o.Constraint=n(10),o.Contact=n(16),o.Detector=n(13),o.Engine=n(17),o.Events=n(5),o.Grid=n(23),o.Mouse=n(14),o.MouseConstraint=n(24),o.Pair=n(9),o.Pairs=n(19),o.Plugin=n(15),o.Query=n(25),o.Render=n(26),o.Resolver=n(18),o.Runner=n(27),o.SAT=n(28),o.Sleeping=n(7),o.Svg=n(29),o.Vector=n(2),o.Vertices=n(3),o.World=n(30),o.Engine.run=o.Runner.run,o.Common.deprecated(o.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(t,r,n){var o={};t.exports=o;var i=n(15),s=n(0);(function(){o.name="matter-js",o.version="0.19.0",o.uses=[],o.used=[],o.use=function(){i.use(o,Array.prototype.slice.call(arguments))},o.before=function(a,l){return a=a.replace(/^Matter./,""),s.chainPathBefore(o,a,l)},o.after=function(a,l){return a=a.replace(/^Matter./,""),s.chainPathAfter(o,a,l)}})()},function(t,r,n){var o={};t.exports=o;var i=n(6),s=n(10),a=n(0),l=n(4),u=n(12),c=a.deprecated;(function(){o.stack=function(f,d,p,h,m,g,y){for(var b=i.create({label:"Stack"}),x=f,v=d,w,_=0,S=0;S<h;S++){for(var C=0,E=0;E<p;E++){var T=y(x,v,E,S,w,_);if(T){var I=T.bounds.max.y-T.bounds.min.y,k=T.bounds.max.x-T.bounds.min.x;I>C&&(C=I),l.translate(T,{x:k*.5,y:I*.5}),x=T.bounds.max.x+m,i.addBody(b,T),w=T,_+=1}else x+=m}v+=C+g,x=f}return b},o.chain=function(f,d,p,h,m,g){for(var y=f.bodies,b=1;b<y.length;b++){var x=y[b-1],v=y[b],w=x.bounds.max.y-x.bounds.min.y,_=x.bounds.max.x-x.bounds.min.x,S=v.bounds.max.y-v.bounds.min.y,C=v.bounds.max.x-v.bounds.min.x,E={bodyA:x,pointA:{x:_*d,y:w*p},bodyB:v,pointB:{x:C*h,y:S*m}},T=a.extend(E,g);i.addConstraint(f,s.create(T))}return f.label+=" Chain",f},o.mesh=function(f,d,p,h,m){var g=f.bodies,y,b,x,v,w;for(y=0;y<p;y++){for(b=1;b<d;b++)x=g[b-1+y*d],v=g[b+y*d],i.addConstraint(f,s.create(a.extend({bodyA:x,bodyB:v},m)));if(y>0)for(b=0;b<d;b++)x=g[b+(y-1)*d],v=g[b+y*d],i.addConstraint(f,s.create(a.extend({bodyA:x,bodyB:v},m))),h&&b>0&&(w=g[b-1+(y-1)*d],i.addConstraint(f,s.create(a.extend({bodyA:w,bodyB:v},m)))),h&&b<d-1&&(w=g[b+1+(y-1)*d],i.addConstraint(f,s.create(a.extend({bodyA:w,bodyB:v},m))))}return f.label+=" Mesh",f},o.pyramid=function(f,d,p,h,m,g,y){return o.stack(f,d,p,h,m,g,function(b,x,v,w,_,S){var C=Math.min(h,Math.ceil(p/2)),E=_?_.bounds.max.x-_.bounds.min.x:0;if(!(w>C)){w=C-w;var T=w,I=p-1-w;if(!(v<T||v>I)){S===1&&l.translate(_,{x:(v+(p%2===1?1:-1))*E,y:0});var k=_?v*E:0;return y(f+k+v*m,x,v,w,_,S)}}})},o.newtonsCradle=function(f,d,p,h,m){for(var g=i.create({label:"Newtons Cradle"}),y=0;y<p;y++){var b=1.9,x=u.circle(f+y*(h*b),d+m,h,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),v=s.create({pointA:{x:f+y*(h*b),y:d},bodyB:x});i.addBody(g,x),i.addConstraint(g,v)}return g},c(o,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),o.car=function(f,d,p,h,m){var g=l.nextGroup(!0),y=20,b=-p*.5+y,x=p*.5-y,v=0,w=i.create({label:"Car"}),_=u.rectangle(f,d,p,h,{collisionFilter:{group:g},chamfer:{radius:h*.5},density:2e-4}),S=u.circle(f+b,d+v,m,{collisionFilter:{group:g},friction:.8}),C=u.circle(f+x,d+v,m,{collisionFilter:{group:g},friction:.8}),E=s.create({bodyB:_,pointB:{x:b,y:v},bodyA:S,stiffness:1,length:0}),T=s.create({bodyB:_,pointB:{x,y:v},bodyA:C,stiffness:1,length:0});return i.addBody(w,_),i.addBody(w,S),i.addBody(w,C),i.addConstraint(w,E),i.addConstraint(w,T),w},c(o,"car","Composites.car \u27A4 moved to car example"),o.softBody=function(f,d,p,h,m,g,y,b,x,v){x=a.extend({inertia:1/0},x),v=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},v);var w=o.stack(f,d,p,h,m,g,function(_,S){return u.circle(_,S,b,x)});return o.mesh(w,p,h,y,v),w.label="Soft Body",w},c(o,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(t,r,n){var o={};t.exports=o;var i=n(9),s=n(0),a=s.deprecated;(function(){o.create=function(l){var u={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(u,l)},o.update=function(l,u,c,f){var d,p,h,m=c.world,g=l.buckets,y,b,x=!1;for(d=0;d<u.length;d++){var v=u[d];if(!(v.isSleeping&&!f)&&!(m.bounds&&(v.bounds.max.x<m.bounds.min.x||v.bounds.min.x>m.bounds.max.x||v.bounds.max.y<m.bounds.min.y||v.bounds.min.y>m.bounds.max.y))){var w=o._getRegion(l,v);if(!v.region||w.id!==v.region.id||f){(!v.region||f)&&(v.region=w);var _=o._regionUnion(w,v.region);for(p=_.startCol;p<=_.endCol;p++)for(h=_.startRow;h<=_.endRow;h++){b=o._getBucketId(p,h),y=g[b];var S=p>=w.startCol&&p<=w.endCol&&h>=w.startRow&&h<=w.endRow,C=p>=v.region.startCol&&p<=v.region.endCol&&h>=v.region.startRow&&h<=v.region.endRow;!S&&C&&C&&y&&o._bucketRemoveBody(l,y,v),(v.region===w||S&&!C||f)&&(y||(y=o._createBucket(g,b)),o._bucketAddBody(l,y,v))}v.region=w,x=!0}}}x&&(l.pairsList=o._createActivePairsList(l))},a(o,"update","Grid.update \u27A4 replaced by Matter.Detector"),o.clear=function(l){l.buckets={},l.pairs={},l.pairsList=[]},a(o,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),o._regionUnion=function(l,u){var c=Math.min(l.startCol,u.startCol),f=Math.max(l.endCol,u.endCol),d=Math.min(l.startRow,u.startRow),p=Math.max(l.endRow,u.endRow);return o._createRegion(c,f,d,p)},o._getRegion=function(l,u){var c=u.bounds,f=Math.floor(c.min.x/l.bucketWidth),d=Math.floor(c.max.x/l.bucketWidth),p=Math.floor(c.min.y/l.bucketHeight),h=Math.floor(c.max.y/l.bucketHeight);return o._createRegion(f,d,p,h)},o._createRegion=function(l,u,c,f){return{id:l+","+u+","+c+","+f,startCol:l,endCol:u,startRow:c,endRow:f}},o._getBucketId=function(l,u){return"C"+l+"R"+u},o._createBucket=function(l,u){var c=l[u]=[];return c},o._bucketAddBody=function(l,u,c){var f=l.pairs,d=i.id,p=u.length,h;for(h=0;h<p;h++){var m=u[h];if(!(c.id===m.id||c.isStatic&&m.isStatic)){var g=d(c,m),y=f[g];y?y[2]+=1:f[g]=[c,m,1]}}u.push(c)},o._bucketRemoveBody=function(l,u,c){var f=l.pairs,d=i.id,p;u.splice(s.indexOf(u,c),1);var h=u.length;for(p=0;p<h;p++){var m=f[d(c,u[p])];m&&(m[2]-=1)}},o._createActivePairsList=function(l){var u,c=l.pairs,f=s.keys(c),d=f.length,p=[],h;for(h=0;h<d;h++)u=c[f[h]],u[2]>0?p.push(u):delete c[f[h]];return p}})()},function(t,r,n){var o={};t.exports=o;var i=n(3),s=n(7),a=n(14),l=n(5),u=n(13),c=n(10),f=n(6),d=n(0),p=n(1);(function(){o.create=function(h,m){var g=(h?h.mouse:null)||(m?m.mouse:null);g||(h&&h.render&&h.render.canvas?g=a.create(h.render.canvas):m&&m.element?g=a.create(m.element):(g=a.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=c.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),b={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},x=d.extend(b,m);return l.on(h,"beforeUpdate",function(){var v=f.allBodies(h.world);o.update(x,v),o._triggerEvents(x)}),x},o.update=function(h,m){var g=h.mouse,y=h.constraint,b=h.body;if(g.button===0){if(y.bodyB)s.set(y.bodyB,!1),y.pointA=g.position;else for(var x=0;x<m.length;x++)if(b=m[x],p.contains(b.bounds,g.position)&&u.canCollide(b.collisionFilter,h.collisionFilter))for(var v=b.parts.length>1?1:0;v<b.parts.length;v++){var w=b.parts[v];if(i.contains(w.vertices,g.position)){y.pointA=g.position,y.bodyB=h.body=b,y.pointB={x:g.position.x-b.position.x,y:g.position.y-b.position.y},y.angleB=b.angle,s.set(b,!1),l.trigger(h,"startdrag",{mouse:g,body:b});break}}}else y.bodyB=h.body=null,y.pointB=null,b&&l.trigger(h,"enddrag",{mouse:g,body:b})},o._triggerEvents=function(h){var m=h.mouse,g=m.sourceEvents;g.mousemove&&l.trigger(h,"mousemove",{mouse:m}),g.mousedown&&l.trigger(h,"mousedown",{mouse:m}),g.mouseup&&l.trigger(h,"mouseup",{mouse:m}),a.clearSourceEvents(m)}})()},function(t,r,n){var o={};t.exports=o;var i=n(2),s=n(8),a=n(1),l=n(12),u=n(3);(function(){o.collides=function(c,f){for(var d=[],p=f.length,h=c.bounds,m=s.collides,g=a.overlaps,y=0;y<p;y++){var b=f[y],x=b.parts.length,v=x===1?0:1;if(g(b.bounds,h))for(var w=v;w<x;w++){var _=b.parts[w];if(g(_.bounds,h)){var S=m(_,c);if(S){d.push(S);break}}}}return d},o.ray=function(c,f,d,p){p=p||1e-100;for(var h=i.angle(f,d),m=i.magnitude(i.sub(f,d)),g=(d.x+f.x)*.5,y=(d.y+f.y)*.5,b=l.rectangle(g,y,m,p,{angle:h}),x=o.collides(b,c),v=0;v<x.length;v+=1){var w=x[v];w.body=w.bodyB=w.bodyA}return x},o.region=function(c,f,d){for(var p=[],h=0;h<c.length;h++){var m=c[h],g=a.overlaps(m.bounds,f);(g&&!d||!g&&d)&&p.push(m)}return p},o.point=function(c,f){for(var d=[],p=0;p<c.length;p++){var h=c[p];if(a.contains(h.bounds,f))for(var m=h.parts.length===1?0:1;m<h.parts.length;m++){var g=h.parts[m];if(a.contains(g.bounds,f)&&u.contains(g.vertices,f)){d.push(h);break}}}return d}})()},function(t,r,n){var o={};t.exports=o;var i=n(4),s=n(0),a=n(6),l=n(1),u=n(5),c=n(2),f=n(14);(function(){var d,p;typeof window<"u"&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(s.now())},1e3/60)},p=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o._goodFps=30,o._goodDelta=1e3/60,o.create=function(v){var w={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},_=s.extend(w,v);return _.canvas&&(_.canvas.width=_.options.width||_.canvas.width,_.canvas.height=_.options.height||_.canvas.height),_.mouse=v.mouse,_.engine=v.engine,_.canvas=_.canvas||g(_.options.width,_.options.height),_.context=_.canvas.getContext("2d"),_.textures={},_.bounds=_.bounds||{min:{x:0,y:0},max:{x:_.canvas.width,y:_.canvas.height}},_.controller=o,_.options.showBroadphase=!1,_.options.pixelRatio!==1&&o.setPixelRatio(_,_.options.pixelRatio),s.isElement(_.element)&&_.element.appendChild(_.canvas),_},o.run=function(v){(function w(_){v.frameRequestId=d(w),h(v,_),o.world(v,_),(v.options.showStats||v.options.showDebug)&&o.stats(v,v.context,_),(v.options.showPerformance||v.options.showDebug)&&o.performance(v,v.context,_)})()},o.stop=function(v){p(v.frameRequestId)},o.setPixelRatio=function(v,w){var _=v.options,S=v.canvas;w==="auto"&&(w=y(S)),_.pixelRatio=w,S.setAttribute("data-pixel-ratio",w),S.width=_.width*w,S.height=_.height*w,S.style.width=_.width+"px",S.style.height=_.height+"px"},o.lookAt=function(v,w,_,S){S=typeof S<"u"?S:!0,w=s.isArray(w)?w:[w],_=_||{x:0,y:0};for(var C={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},E=0;E<w.length;E+=1){var T=w[E],I=T.bounds?T.bounds.min:T.min||T.position||T,k=T.bounds?T.bounds.max:T.max||T.position||T;I&&k&&(I.x<C.min.x&&(C.min.x=I.x),k.x>C.max.x&&(C.max.x=k.x),I.y<C.min.y&&(C.min.y=I.y),k.y>C.max.y&&(C.max.y=k.y))}var F=C.max.x-C.min.x+2*_.x,D=C.max.y-C.min.y+2*_.y,L=v.canvas.height,P=v.canvas.width,R=P/L,V=F/D,G=1,U=1;V>R?U=V/R:G=R/V,v.options.hasBounds=!0,v.bounds.min.x=C.min.x,v.bounds.max.x=C.min.x+F*G,v.bounds.min.y=C.min.y,v.bounds.max.y=C.min.y+D*U,S&&(v.bounds.min.x+=F*.5-F*G*.5,v.bounds.max.x+=F*.5-F*G*.5,v.bounds.min.y+=D*.5-D*U*.5,v.bounds.max.y+=D*.5-D*U*.5),v.bounds.min.x-=_.x,v.bounds.max.x-=_.x,v.bounds.min.y-=_.y,v.bounds.max.y-=_.y,v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),f.setOffset(v.mouse,v.bounds.min))},o.startViewTransform=function(v){var w=v.bounds.max.x-v.bounds.min.x,_=v.bounds.max.y-v.bounds.min.y,S=w/v.options.width,C=_/v.options.height;v.context.setTransform(v.options.pixelRatio/S,0,0,v.options.pixelRatio/C,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},o.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},o.world=function(v,w){var _=s.now(),S=v.engine,C=S.world,E=v.canvas,T=v.context,I=v.options,k=v.timing,F=a.allBodies(C),D=a.allConstraints(C),L=I.wireframes?I.wireframeBackground:I.background,P=[],R=[],V,G={timestamp:S.timing.timestamp};if(u.trigger(v,"beforeRender",G),v.currentBackground!==L&&x(v,L),T.globalCompositeOperation="source-in",T.fillStyle="transparent",T.fillRect(0,0,E.width,E.height),T.globalCompositeOperation="source-over",I.hasBounds){for(V=0;V<F.length;V++){var U=F[V];l.overlaps(U.bounds,v.bounds)&&P.push(U)}for(V=0;V<D.length;V++){var H=D[V],X=H.bodyA,fe=H.bodyB,$=H.pointA,M=H.pointB;X&&($=c.add(X.position,H.pointA)),fe&&(M=c.add(fe.position,H.pointB)),!(!$||!M)&&(l.contains(v.bounds,$)||l.contains(v.bounds,M))&&R.push(H)}o.startViewTransform(v),v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),f.setOffset(v.mouse,v.bounds.min))}else R=D,P=F,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!I.wireframes||S.enableSleeping&&I.showSleeping?o.bodies(v,P,T):(I.showConvexHulls&&o.bodyConvexHulls(v,P,T),o.bodyWireframes(v,P,T)),I.showBounds&&o.bodyBounds(v,P,T),(I.showAxes||I.showAngleIndicator)&&o.bodyAxes(v,P,T),I.showPositions&&o.bodyPositions(v,P,T),I.showVelocity&&o.bodyVelocity(v,P,T),I.showIds&&o.bodyIds(v,P,T),I.showSeparations&&o.separations(v,S.pairs.list,T),I.showCollisions&&o.collisions(v,S.pairs.list,T),I.showVertexNumbers&&o.vertexNumbers(v,P,T),I.showMousePosition&&o.mousePosition(v,v.mouse,T),o.constraints(R,T),I.hasBounds&&o.endViewTransform(v),u.trigger(v,"afterRender",G),k.lastElapsed=s.now()-_},o.stats=function(v,w,_){for(var S=v.engine,C=S.world,E=a.allBodies(C),T=0,I=55,k=44,F=0,D=0,L=0;L<E.length;L+=1)T+=E[L].parts.length;var P={Part:T,Body:E.length,Cons:a.allConstraints(C).length,Comp:a.allComposites(C).length,Pair:S.pairs.list.length};w.fillStyle="#0e0f19",w.fillRect(F,D,I*5.5,k),w.font="12px Arial",w.textBaseline="top",w.textAlign="right";for(var R in P){var V=P[R];w.fillStyle="#aaa",w.fillText(R,F+I,D+8),w.fillStyle="#eee",w.fillText(V,F+I,D+26),F+=I}},o.performance=function(v,w){var _=v.engine,S=v.timing,C=S.deltaHistory,E=S.elapsedHistory,T=S.timestampElapsedHistory,I=S.engineDeltaHistory,k=S.engineElapsedHistory,F=_.timing.lastDelta,D=m(C),L=m(E),P=m(I),R=m(k),V=m(T),G=V/D||0,U=1e3/D||0,H=4,X=12,fe=60,$=34,M=10,z=69;w.fillStyle="#0e0f19",w.fillRect(0,50,X*4+fe*5+22,$),o.status(w,M,z,fe,H,C.length,Math.round(U)+" fps",U/o._goodFps,function(q){return C[q]/D-1}),o.status(w,M+X+fe,z,fe,H,I.length,F.toFixed(2)+" dt",o._goodDelta/F,function(q){return I[q]/P-1}),o.status(w,M+(X+fe)*2,z,fe,H,k.length,R.toFixed(2)+" ut",1-R/o._goodFps,function(q){return k[q]/R-1}),o.status(w,M+(X+fe)*3,z,fe,H,E.length,L.toFixed(2)+" rt",1-L/o._goodFps,function(q){return E[q]/L-1}),o.status(w,M+(X+fe)*4,z,fe,H,T.length,G.toFixed(2)+" x",G*G*G,function(q){return(T[q]/C[q]/G||0)-1})},o.status=function(v,w,_,S,C,E,T,I,k){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(w,_+7,S,1),v.beginPath(),v.moveTo(w,_+7-C*s.clamp(.4*k(0),-2,2));for(var F=0;F<S;F+=1)v.lineTo(w+F,_+7-(F<E?C*s.clamp(.4*k(F),-2,2):0));v.stroke(),v.fillStyle="hsl("+s.clamp(25+95*I,0,120)+",100%,60%)",v.fillRect(w,_-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(T,w+S,_-5)},o.constraints=function(v,w){for(var _=w,S=0;S<v.length;S++){var C=v[S];if(!(!C.render.visible||!C.pointA||!C.pointB)){var E=C.bodyA,T=C.bodyB,I,k;if(E?I=c.add(E.position,C.pointA):I=C.pointA,C.render.type==="pin")_.beginPath(),_.arc(I.x,I.y,3,0,2*Math.PI),_.closePath();else{if(T?k=c.add(T.position,C.pointB):k=C.pointB,_.beginPath(),_.moveTo(I.x,I.y),C.render.type==="spring")for(var F=c.sub(k,I),D=c.perp(c.normalise(F)),L=Math.ceil(s.clamp(C.length/5,12,20)),P,R=1;R<L;R+=1)P=R%2===0?1:-1,_.lineTo(I.x+F.x*(R/L)+D.x*P*4,I.y+F.y*(R/L)+D.y*P*4);_.lineTo(k.x,k.y)}C.render.lineWidth&&(_.lineWidth=C.render.lineWidth,_.strokeStyle=C.render.strokeStyle,_.stroke()),C.render.anchors&&(_.fillStyle=C.render.strokeStyle,_.beginPath(),_.arc(I.x,I.y,3,0,2*Math.PI),_.arc(k.x,k.y,3,0,2*Math.PI),_.closePath(),_.fill())}}},o.bodies=function(v,w,_){var S=_,C=v.engine,E=v.options,T=E.showInternalEdges||!E.wireframes,I,k,F,D;for(F=0;F<w.length;F++)if(I=w[F],!!I.render.visible){for(D=I.parts.length>1?1:0;D<I.parts.length;D++)if(k=I.parts[D],!!k.render.visible){if(E.showSleeping&&I.isSleeping?S.globalAlpha=.5*k.render.opacity:k.render.opacity!==1&&(S.globalAlpha=k.render.opacity),k.render.sprite&&k.render.sprite.texture&&!E.wireframes){var L=k.render.sprite,P=b(v,L.texture);S.translate(k.position.x,k.position.y),S.rotate(k.angle),S.drawImage(P,P.width*-L.xOffset*L.xScale,P.height*-L.yOffset*L.yScale,P.width*L.xScale,P.height*L.yScale),S.rotate(-k.angle),S.translate(-k.position.x,-k.position.y)}else{if(k.circleRadius)S.beginPath(),S.arc(k.position.x,k.position.y,k.circleRadius,0,2*Math.PI);else{S.beginPath(),S.moveTo(k.vertices[0].x,k.vertices[0].y);for(var R=1;R<k.vertices.length;R++)!k.vertices[R-1].isInternal||T?S.lineTo(k.vertices[R].x,k.vertices[R].y):S.moveTo(k.vertices[R].x,k.vertices[R].y),k.vertices[R].isInternal&&!T&&S.moveTo(k.vertices[(R+1)%k.vertices.length].x,k.vertices[(R+1)%k.vertices.length].y);S.lineTo(k.vertices[0].x,k.vertices[0].y),S.closePath()}E.wireframes?(S.lineWidth=1,S.strokeStyle="#bbb",S.stroke()):(S.fillStyle=k.render.fillStyle,k.render.lineWidth&&(S.lineWidth=k.render.lineWidth,S.strokeStyle=k.render.strokeStyle,S.stroke()),S.fill())}S.globalAlpha=1}}},o.bodyWireframes=function(v,w,_){var S=_,C=v.options.showInternalEdges,E,T,I,k,F;for(S.beginPath(),I=0;I<w.length;I++)if(E=w[I],!!E.render.visible)for(F=E.parts.length>1?1:0;F<E.parts.length;F++){for(T=E.parts[F],S.moveTo(T.vertices[0].x,T.vertices[0].y),k=1;k<T.vertices.length;k++)!T.vertices[k-1].isInternal||C?S.lineTo(T.vertices[k].x,T.vertices[k].y):S.moveTo(T.vertices[k].x,T.vertices[k].y),T.vertices[k].isInternal&&!C&&S.moveTo(T.vertices[(k+1)%T.vertices.length].x,T.vertices[(k+1)%T.vertices.length].y);S.lineTo(T.vertices[0].x,T.vertices[0].y)}S.lineWidth=1,S.strokeStyle="#bbb",S.stroke()},o.bodyConvexHulls=function(v,w,_){var S=_,C,E,T,I,k;for(S.beginPath(),T=0;T<w.length;T++)if(C=w[T],!(!C.render.visible||C.parts.length===1)){for(S.moveTo(C.vertices[0].x,C.vertices[0].y),I=1;I<C.vertices.length;I++)S.lineTo(C.vertices[I].x,C.vertices[I].y);S.lineTo(C.vertices[0].x,C.vertices[0].y)}S.lineWidth=1,S.strokeStyle="rgba(255,255,255,0.2)",S.stroke()},o.vertexNumbers=function(v,w,_){var S=_,C,E,T;for(C=0;C<w.length;C++){var I=w[C].parts;for(T=I.length>1?1:0;T<I.length;T++){var k=I[T];for(E=0;E<k.vertices.length;E++)S.fillStyle="rgba(255,255,255,0.2)",S.fillText(C+"_"+E,k.position.x+(k.vertices[E].x-k.position.x)*.8,k.position.y+(k.vertices[E].y-k.position.y)*.8)}}},o.mousePosition=function(v,w,_){var S=_;S.fillStyle="rgba(255,255,255,0.8)",S.fillText(w.position.x+"  "+w.position.y,w.position.x+5,w.position.y-5)},o.bodyBounds=function(v,w,_){var S=_,C=v.engine,E=v.options;S.beginPath();for(var T=0;T<w.length;T++){var I=w[T];if(I.render.visible)for(var k=w[T].parts,F=k.length>1?1:0;F<k.length;F++){var D=k[F];S.rect(D.bounds.min.x,D.bounds.min.y,D.bounds.max.x-D.bounds.min.x,D.bounds.max.y-D.bounds.min.y)}}E.wireframes?S.strokeStyle="rgba(255,255,255,0.08)":S.strokeStyle="rgba(0,0,0,0.1)",S.lineWidth=1,S.stroke()},o.bodyAxes=function(v,w,_){var S=_,C=v.engine,E=v.options,T,I,k,F;for(S.beginPath(),I=0;I<w.length;I++){var D=w[I],L=D.parts;if(D.render.visible)if(E.showAxes)for(k=L.length>1?1:0;k<L.length;k++)for(T=L[k],F=0;F<T.axes.length;F++){var P=T.axes[F];S.moveTo(T.position.x,T.position.y),S.lineTo(T.position.x+P.x*20,T.position.y+P.y*20)}else for(k=L.length>1?1:0;k<L.length;k++)for(T=L[k],F=0;F<T.axes.length;F++)S.moveTo(T.position.x,T.position.y),S.lineTo((T.vertices[0].x+T.vertices[T.vertices.length-1].x)/2,(T.vertices[0].y+T.vertices[T.vertices.length-1].y)/2)}E.wireframes?(S.strokeStyle="indianred",S.lineWidth=1):(S.strokeStyle="rgba(255, 255, 255, 0.4)",S.globalCompositeOperation="overlay",S.lineWidth=2),S.stroke(),S.globalCompositeOperation="source-over"},o.bodyPositions=function(v,w,_){var S=_,C=v.engine,E=v.options,T,I,k,F;for(S.beginPath(),k=0;k<w.length;k++)if(T=w[k],!!T.render.visible)for(F=0;F<T.parts.length;F++)I=T.parts[F],S.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),S.closePath();for(E.wireframes?S.fillStyle="indianred":S.fillStyle="rgba(0,0,0,0.5)",S.fill(),S.beginPath(),k=0;k<w.length;k++)T=w[k],T.render.visible&&(S.arc(T.positionPrev.x,T.positionPrev.y,2,0,2*Math.PI,!1),S.closePath());S.fillStyle="rgba(255,165,0,0.8)",S.fill()},o.bodyVelocity=function(v,w,_){var S=_;S.beginPath();for(var C=0;C<w.length;C++){var E=w[C];if(E.render.visible){var T=i.getVelocity(E);S.moveTo(E.position.x,E.position.y),S.lineTo(E.position.x+T.x,E.position.y+T.y)}}S.lineWidth=3,S.strokeStyle="cornflowerblue",S.stroke()},o.bodyIds=function(v,w,_){var S=_,C,E;for(C=0;C<w.length;C++)if(w[C].render.visible){var T=w[C].parts;for(E=T.length>1?1:0;E<T.length;E++){var I=T[E];S.font="12px Arial",S.fillStyle="rgba(255,255,255,0.5)",S.fillText(I.id,I.position.x+10,I.position.y-10)}}},o.collisions=function(v,w,_){var S=_,C=v.options,E,T,I,k,F,D,L;for(S.beginPath(),D=0;D<w.length;D++)if(E=w[D],!!E.isActive)for(T=E.collision,L=0;L<E.activeContacts.length;L++){var P=E.activeContacts[L],R=P.vertex;S.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(C.wireframes?S.fillStyle="rgba(255,255,255,0.7)":S.fillStyle="orange",S.fill(),S.beginPath(),D=0;D<w.length;D++)if(E=w[D],!!E.isActive&&(T=E.collision,E.activeContacts.length>0)){var V=E.activeContacts[0].vertex.x,G=E.activeContacts[0].vertex.y;E.activeContacts.length===2&&(V=(E.activeContacts[0].vertex.x+E.activeContacts[1].vertex.x)/2,G=(E.activeContacts[0].vertex.y+E.activeContacts[1].vertex.y)/2),T.bodyB===T.supports[0].body||T.bodyA.isStatic===!0?S.moveTo(V-T.normal.x*8,G-T.normal.y*8):S.moveTo(V+T.normal.x*8,G+T.normal.y*8),S.lineTo(V,G)}C.wireframes?S.strokeStyle="rgba(255,165,0,0.7)":S.strokeStyle="orange",S.lineWidth=1,S.stroke()},o.separations=function(v,w,_){var S=_,C=v.options,E,T,I,k,F,D,L;for(S.beginPath(),D=0;D<w.length;D++)if(E=w[D],!!E.isActive){T=E.collision,k=T.bodyA,F=T.bodyB;var P=1;!F.isStatic&&!k.isStatic&&(P=.5),F.isStatic&&(P=0),S.moveTo(F.position.x,F.position.y),S.lineTo(F.position.x-T.penetration.x*P,F.position.y-T.penetration.y*P),P=1,!F.isStatic&&!k.isStatic&&(P=.5),k.isStatic&&(P=0),S.moveTo(k.position.x,k.position.y),S.lineTo(k.position.x+T.penetration.x*P,k.position.y+T.penetration.y*P)}C.wireframes?S.strokeStyle="rgba(255,165,0,0.5)":S.strokeStyle="orange",S.stroke()},o.inspector=function(v,w){var _=v.engine,S=v.selected,C=v.render,E=C.options,T;if(E.hasBounds){var I=C.bounds.max.x-C.bounds.min.x,k=C.bounds.max.y-C.bounds.min.y,F=I/C.options.width,D=k/C.options.height;w.scale(1/F,1/D),w.translate(-C.bounds.min.x,-C.bounds.min.y)}for(var L=0;L<S.length;L++){var P=S[L].data;switch(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.9)",w.setLineDash([1,2]),P.type){case"body":T=P.bounds,w.beginPath(),w.rect(Math.floor(T.min.x-3),Math.floor(T.min.y-3),Math.floor(T.max.x-T.min.x+6),Math.floor(T.max.y-T.min.y+6)),w.closePath(),w.stroke();break;case"constraint":var R=P.pointA;P.bodyA&&(R=P.pointB),w.beginPath(),w.arc(R.x,R.y,10,0,2*Math.PI),w.closePath(),w.stroke();break}w.setLineDash([]),w.translate(-.5,-.5)}v.selectStart!==null&&(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.6)",w.fillStyle="rgba(255,165,0,0.1)",T=v.selectBounds,w.beginPath(),w.rect(Math.floor(T.min.x),Math.floor(T.min.y),Math.floor(T.max.x-T.min.x),Math.floor(T.max.y-T.min.y)),w.closePath(),w.stroke(),w.fill(),w.translate(-.5,-.5)),E.hasBounds&&w.setTransform(1,0,0,1,0,0)};var h=function(v,w){var _=v.engine,S=v.timing,C=S.historySize,E=_.timing.timestamp;S.delta=w-S.lastTime||o._goodDelta,S.lastTime=w,S.timestampElapsed=E-S.lastTimestamp||0,S.lastTimestamp=E,S.deltaHistory.unshift(S.delta),S.deltaHistory.length=Math.min(S.deltaHistory.length,C),S.engineDeltaHistory.unshift(_.timing.lastDelta),S.engineDeltaHistory.length=Math.min(S.engineDeltaHistory.length,C),S.timestampElapsedHistory.unshift(S.timestampElapsed),S.timestampElapsedHistory.length=Math.min(S.timestampElapsedHistory.length,C),S.engineElapsedHistory.unshift(_.timing.lastElapsed),S.engineElapsedHistory.length=Math.min(S.engineElapsedHistory.length,C),S.elapsedHistory.unshift(S.lastElapsed),S.elapsedHistory.length=Math.min(S.elapsedHistory.length,C)},m=function(v){for(var w=0,_=0;_<v.length;_+=1)w+=v[_];return w/v.length||0},g=function(v,w){var _=document.createElement("canvas");return _.width=v,_.height=w,_.oncontextmenu=function(){return!1},_.onselectstart=function(){return!1},_},y=function(v){var w=v.getContext("2d"),_=window.devicePixelRatio||1,S=w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1;return _/S},b=function(v,w){var _=v.textures[w];return _||(_=v.textures[w]=new Image,_.src=w,_)},x=function(v,w){var _=w;/(jpg|gif|png)$/.test(w)&&(_="url("+w+")"),v.canvas.style.background=_,v.canvas.style.backgroundSize="contain",v.currentBackground=w}})()},function(t,r,n){var o={};t.exports=o;var i=n(5),s=n(17),a=n(0);(function(){var l,u;if(typeof window<"u"&&(l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!l){var c;l=function(f){c=setTimeout(function(){f(a.now())},1e3/60)},u=function(){clearTimeout(c)}}o.create=function(f){var d={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},p=a.extend(d,f);return p.delta=p.delta||1e3/p.fps,p.deltaMin=p.deltaMin||1e3/p.fps,p.deltaMax=p.deltaMax||1e3/(p.fps*.5),p.fps=1e3/p.delta,p},o.run=function(f,d){return typeof f.positionIterations<"u"&&(d=f,f=o.create()),function p(h){f.frameRequestId=l(p),h&&f.enabled&&o.tick(f,d,h)}(),f},o.tick=function(f,d,p){var h=d.timing,m;f.isFixed?m=f.delta:(m=p-f.timePrev||f.delta,f.timePrev=p,f.deltaHistory.push(m),f.deltaHistory=f.deltaHistory.slice(-f.deltaSampleSize),m=Math.min.apply(null,f.deltaHistory),m=m<f.deltaMin?f.deltaMin:m,m=m>f.deltaMax?f.deltaMax:m,f.delta=m);var g={timestamp:h.timestamp};i.trigger(f,"beforeTick",g),f.frameCounter+=1,p-f.counterTimestamp>=1e3&&(f.fps=f.frameCounter*((p-f.counterTimestamp)/1e3),f.counterTimestamp=p,f.frameCounter=0),i.trigger(f,"tick",g),i.trigger(f,"beforeUpdate",g),s.update(d,m),i.trigger(f,"afterUpdate",g),i.trigger(f,"afterTick",g)},o.stop=function(f){u(f.frameRequestId)},o.start=function(f,d){o.run(f,d)}})()},function(t,r,n){var o={};t.exports=o;var i=n(8),s=n(0),a=s.deprecated;(function(){o.collides=function(l,u){return i.collides(l,u)},a(o,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(t,r,n){var o={};t.exports=o;var i=n(1),s=n(0);(function(){o.pathToVertices=function(a,l){typeof window<"u"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,c,f,d,p,h,m,g,y,b,x=[],v,w,_=0,S=0,C=0;l=l||15;var E=function(I,k,F){var D=F%2===1&&F>1;if(!y||I!=y.x||k!=y.y){y&&D?(v=y.x,w=y.y):(v=0,w=0);var L={x:v+I,y:w+k};(D||!y)&&(y=L),x.push(L),S=v+I,C=w+k}},T=function(I){var k=I.pathSegTypeAsLetter.toUpperCase();if(k!=="Z"){switch(k){case"M":case"L":case"T":case"C":case"S":case"Q":S=I.x,C=I.y;break;case"H":S=I.x;break;case"V":C=I.y;break}E(S,C,I.pathSegType)}};for(o._svgPathToAbsolute(a),f=a.getTotalLength(),h=[],u=0;u<a.pathSegList.numberOfItems;u+=1)h.push(a.pathSegList.getItem(u));for(m=h.concat();_<f;){if(b=a.getPathSegAtLength(_),p=h[b],p!=g){for(;m.length&&m[0]!=p;)T(m.shift());g=p}switch(p.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=a.getPointAtLength(_),E(d.x,d.y,0);break}_+=l}for(u=0,c=m.length;u<c;++u)T(m[u]);return x},o._svgPathToAbsolute=function(a){for(var l,u,c,f,d,p,h=a.pathSegList,m=0,g=0,y=h.numberOfItems,b=0;b<y;++b){var x=h.getItem(b),v=x.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in x&&(m=x.x),"y"in x&&(g=x.y);else switch("x1"in x&&(c=m+x.x1),"x2"in x&&(d=m+x.x2),"y1"in x&&(f=g+x.y1),"y2"in x&&(p=g+x.y2),"x"in x&&(m+=x.x),"y"in x&&(g+=x.y),v){case"m":h.replaceItem(a.createSVGPathSegMovetoAbs(m,g),b);break;case"l":h.replaceItem(a.createSVGPathSegLinetoAbs(m,g),b);break;case"h":h.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(m),b);break;case"v":h.replaceItem(a.createSVGPathSegLinetoVerticalAbs(g),b);break;case"c":h.replaceItem(a.createSVGPathSegCurvetoCubicAbs(m,g,c,f,d,p),b);break;case"s":h.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(m,g,d,p),b);break;case"q":h.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(m,g,c,f),b);break;case"t":h.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(m,g),b);break;case"a":h.replaceItem(a.createSVGPathSegArcAbs(m,g,x.r1,x.r2,x.angle,x.largeArcFlag,x.sweepFlag),b);break;case"z":case"Z":m=l,g=u;break}(v=="M"||v=="m")&&(l=m,u=g)}}})()},function(t,r,n){var o={};t.exports=o;var i=n(6),s=n(0);(function(){o.create=i.create,o.add=i.add,o.remove=i.remove,o.clear=i.clear,o.addComposite=i.addComposite,o.addBody=i.addBody,o.addConstraint=i.addConstraint})()}])})});var Ine=class{};var Uk=class t{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?typeof r=="string"?this.lazyInit=()=>{this.headers=new Map,r.split(`
`).forEach(n=>{let o=n.indexOf(":");if(o>0){let i=n.slice(0,o),s=i.toLowerCase(),a=n.slice(o+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&r instanceof Headers?(this.headers=new Map,r.forEach((n,o)=>{this.setHeaderEntries(o,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(r).forEach(([n,o])=>{this.setHeaderEntries(n,o)})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();let n=this.headers.get(r.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,n){return this.clone({name:r,value:n,op:"a"})}set(r,n){return this.clone({name:r,value:n,op:"s"})}delete(r,n){return this.clone({name:r,value:n,op:"d"})}maybeSetNormalizedName(r,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,r)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(n=>{this.headers.set(n,r.headers.get(n)),this.normalizedNames.set(n,r.normalizedNames.get(n))})}clone(r){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([r]),n}applyUpdate(r){let n=r.name.toLowerCase();switch(r.op){case"a":case"s":let o=r.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(r.name,n);let i=(r.op==="a"?this.headers.get(n):void 0)||[];i.push(...o),this.headers.set(n,i);break;case"d":let s=r.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(l=>s.indexOf(l)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(r,n){let o=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=r.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(r,i)}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>r(this.normalizedNames.get(n),this.headers.get(n)))}};var Dne=class{encodeKey(r){return Mke(r)}encodeValue(r){return Mke(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}};function LEt(t,r){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[a,l]=s==-1?[r.decodeKey(i),""]:[r.decodeKey(i.slice(0,s)),r.decodeValue(i.slice(s+1))],u=n.get(a)||[];u.push(l),n.set(a,u)}),n}var jEt=/%(\d[a-f0-9])/gi,BEt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Mke(t){return encodeURIComponent(t).replace(jEt,(r,n)=>BEt[n]??r)}function zz(t){return`${t}`}var k1=class t{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new Dne,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=LEt(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(n=>{let o=r.fromObject[n],i=Array.isArray(o)?o.map(zz):[zz(o)];this.map.set(n,i)})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();let n=this.map.get(r);return n?n[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,n){return this.clone({param:r,value:n,op:"a"})}appendAll(r){let n=[];return Object.keys(r).forEach(o=>{let i=r[o];Array.isArray(i)?i.forEach(s=>{n.push({param:o,value:s,op:"a"})}):n.push({param:o,value:i,op:"a"})}),this.clone(n)}set(r,n){return this.clone({param:r,value:n,op:"s"})}delete(r,n){return this.clone({param:r,value:n,op:"d"})}toString(){return this.init(),this.keys().map(r=>{let n=this.encoder.encodeKey(r);return this.map.get(r).map(o=>n+"="+this.encoder.encodeValue(o)).join("&")}).filter(r=>r!=="").join("&")}clone(r){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(r),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":let n=(r.op==="a"?this.map.get(r.param):void 0)||[];n.push(zz(r.value)),this.map.set(r.param,n);break;case"d":if(r.value!==void 0){let o=this.map.get(r.param)||[],i=o.indexOf(zz(r.value));i!==-1&&o.splice(i,1),o.length>0?this.map.set(r.param,o):this.map.delete(r.param)}else{this.map.delete(r.param);break}}}),this.cloneFrom=this.updates=null)}};var Nne=class{constructor(){this.map=new Map}set(r,n){return this.map.set(r,n),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}};function $Et(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Fke(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Oke(t){return typeof Blob<"u"&&t instanceof Blob}function Rke(t){return typeof FormData<"u"&&t instanceof FormData}function zEt(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var jR=class t{constructor(r,n,o,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase();let s;if($Et(this.method)||i?(this.body=o!==void 0?o:null,s=i):s=o,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Uk,this.context??=new Nne,!this.params)this.params=new k1,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let l=n.indexOf("?"),u=l===-1?"?":l<n.length-1?"&":"";this.urlWithParams=n+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Fke(this.body)||Oke(this.body)||Rke(this.body)||zEt(this.body)?this.body:this.body instanceof k1?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Rke(this.body)?null:Oke(this.body)?this.body.type||null:Fke(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof k1?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(r={}){let n=r.method||this.method,o=r.url||this.url,i=r.responseType||this.responseType,s=r.transferCache??this.transferCache,a=r.body!==void 0?r.body:this.body,l=r.withCredentials??this.withCredentials,u=r.reportProgress??this.reportProgress,c=r.headers||this.headers,f=r.params||this.params,d=r.context??this.context;return r.setHeaders!==void 0&&(c=Object.keys(r.setHeaders).reduce((p,h)=>p.set(h,r.setHeaders[h]),c)),r.setParams&&(f=Object.keys(r.setParams).reduce((p,h)=>p.set(h,r.setParams[h]),f)),new t(n,o,a,{params:f,headers:c,context:d,reportProgress:u,responseType:i,withCredentials:l,transferCache:s})}},Pke=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Pke||{}),Mne=class{constructor(r,n=200,o="OK"){this.headers=r.headers||new Uk,this.status=r.status!==void 0?r.status:n,this.statusText=r.statusText||o,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}};var Fne=class t extends Mne{constructor(r={}){super(r),this.type=Pke.Response,this.body=r.body!==void 0?r.body:null}clone(r={}){return new t({body:r.body!==void 0?r.body:this.body,headers:r.headers||this.headers,status:r.status!==void 0?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}};function kne(t,r){return{body:r,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Lke=(()=>{let r=class r{constructor(o){this.handler=o}request(o,i,s={}){let a;if(o instanceof jR)a=o;else{let c;s.headers instanceof Uk?c=s.headers:c=new Uk(s.headers);let f;s.params&&(s.params instanceof k1?f=s.params:f=new k1({fromObject:s.params})),a=new jR(o,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let l=kr(a).pipe(S1(c=>this.handler.handle(c)));if(o instanceof jR||s.observe==="events")return l;let u=l.pipe(Ds(c=>c instanceof Fne));switch(s.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return u.pipe(dn(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(dn(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(dn(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(dn(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(o,i={}){return this.request("DELETE",o,i)}get(o,i={}){return this.request("GET",o,i)}head(o,i={}){return this.request("HEAD",o,i)}jsonp(o,i){return this.request("JSONP",o,{params:new k1().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,i={}){return this.request("OPTIONS",o,i)}patch(o,i,s={}){return this.request("PATCH",o,kne(s,i))}post(o,i,s={}){return this.request("POST",o,kne(s,i))}put(o,i,s={}){return this.request("PUT",o,kne(s,i))}};r.\u0275fac=function(i){return new(i||r)(Et(Ine))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();var Pne=class extends _ke{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lne=class t extends Pne{static makeCurrent(){wke(new t)}onAndCancel(r,n,o){return r.addEventListener(n,o),()=>{r.removeEventListener(n,o)}}dispatchEvent(r,n){r.dispatchEvent(n)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,n){return n=n||this.getDefaultDocument(),n.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,n){return n==="window"?window:n==="document"?r:n==="body"?r.body:null}getBaseHref(r){let n=GEt();return n==null?null:WEt(n)}resetBaseElement(){BR=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return Tke(document.cookie,r)}},BR=null;function GEt(){return BR=BR||document.querySelector("base"),BR?BR.getAttribute("href"):null}function WEt(t){return new URL(t,document.baseURI).pathname}var qEt=(()=>{let r=class r{build(){return new XMLHttpRequest}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),jne=new En(""),zke=(()=>{let r=class r{constructor(o,i){this._zone=i,this._eventNameToPlugin=new Map,o.forEach(s=>{s.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,i,s){return this._findPluginFor(i).addEventListener(o,i,s)}getZone(){return this._zone}_findPluginFor(o){let i=this._eventNameToPlugin.get(o);if(i)return i;if(i=this._plugins.find(a=>a.supports(o)),!i)throw new is(5101,!1);return this._eventNameToPlugin.set(o,i),i}};r.\u0275fac=function(i){return new(i||r)(Et(jne),Et(Cn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),Uz=class{constructor(r){this._doc=r}},One="ng-app-id",Uke=(()=>{let r=class r{constructor(o,i,s,a={}){this.doc=o,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ane(a),this.resetHostNodes()}addStyles(o){for(let i of o)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(o){for(let i of o)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(i=>i.remove()),o.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let i of this.getAllStyles())this.addStyleToHost(o,i)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let i of this.hostNodes)this.addStyleToHost(i,o)}onStyleRemoved(o){let i=this.styleRef;i.get(o)?.elements?.forEach(s=>s.remove()),i.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${One}="${this.appId}"]`);if(o?.length){let i=new Map;return o.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(o,i){let s=this.styleRef;if(s.has(o)){let a=s.get(o);return a.usage+=i,a.usage}return s.set(o,{usage:i,elements:[]}),i}getStyleElement(o,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===o)return s.delete(i),a.removeAttribute(One),a;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(One,this.appId),o.appendChild(l),l}}addStyleToHost(o,i){let s=this.getStyleElement(o,i),a=this.styleRef,l=a.get(i)?.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(Rz),Et(FR,8),Et(fS))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),Rne={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$ne=/%COMP%/g,Vke="%COMP%",HEt=`_nghost-${Vke}`,YEt=`_ngcontent-${Vke}`,XEt=!0,KEt=new En("",{providedIn:"root",factory:()=>XEt});function ZEt(t){return YEt.replace($ne,t)}function QEt(t){return HEt.replace($ne,t)}function Gke(t,r){return r.map(n=>n.replace($ne,t))}var Vz=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f=null){this.eventManager=o,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=u,this.ngZone=c,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Ane(u),this.defaultRenderer=new $R(o,l,c,this.platformIsServer)}createRenderer(o,i){if(!o||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===NR.ShadowDom&&(i=Is(Gt({},i),{encapsulation:NR.Emulated}));let s=this.getOrCreateRenderer(o,i);return s instanceof Gz?s.applyToHost(o):s instanceof zR&&s.applyStyles(),s}getOrCreateRenderer(o,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let l=this.doc,u=this.ngZone,c=this.eventManager,f=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case NR.Emulated:a=new Gz(c,f,i,this.appId,d,l,u,p);break;case NR.ShadowDom:return new Bne(c,f,o,i,l,u,this.nonce,p);default:a=new zR(c,f,i,d,l,u,p);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};r.\u0275fac=function(i){return new(i||r)(Et(zke),Et(Uke),Et(Rz),Et(KEt),Et(yn),Et(fS),Et(Cn),Et(FR))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),$R=class{constructor(r,n,o,i){this.eventManager=r,this.doc=n,this.ngZone=o,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(r,n){return n?this.doc.createElementNS(Rne[n]||n,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,n){(jke(r)?r.content:r).appendChild(n)}insertBefore(r,n,o){r&&(jke(r)?r.content:r).insertBefore(n,o)}removeChild(r,n){r&&r.removeChild(n)}selectRootElement(r,n){let o=typeof r=="string"?this.doc.querySelector(r):r;if(!o)throw new is(-5104,!1);return n||(o.textContent=""),o}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,n,o,i){if(i){n=i+":"+n;let s=Rne[i];s?r.setAttributeNS(s,n,o):r.setAttribute(n,o)}else r.setAttribute(n,o)}removeAttribute(r,n,o){if(o){let i=Rne[o];i?r.removeAttributeNS(i,n):r.removeAttribute(`${o}:${n}`)}else r.removeAttribute(n)}addClass(r,n){r.classList.add(n)}removeClass(r,n){r.classList.remove(n)}setStyle(r,n,o,i){i&(OR.DashCase|OR.Important)?r.style.setProperty(n,o,i&OR.Important?"important":""):r.style[n]=o}removeStyle(r,n,o){o&OR.DashCase?r.style.removeProperty(n):r.style[n]=""}setProperty(r,n,o){r!=null&&(r[n]=o)}setValue(r,n){r.nodeValue=n}listen(r,n,o){if(typeof r=="string"&&(r=Tne().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${n}`);return this.eventManager.addEventListener(r,n,this.decoratePreventDefault(o))}decoratePreventDefault(r){return n=>{if(n==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(n)):r(n))===!1&&n.preventDefault()}}};function jke(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Bne=class extends $R{constructor(r,n,o,i,s,a,l,u){super(r,s,a,u),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Gke(i.id,i.styles);for(let f of c){let d=document.createElement("style");l&&d.setAttribute("nonce",l),d.textContent=f,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,n){return super.appendChild(this.nodeOrShadowRoot(r),n)}insertBefore(r,n,o){return super.insertBefore(this.nodeOrShadowRoot(r),n,o)}removeChild(r,n){return super.removeChild(this.nodeOrShadowRoot(r),n)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zR=class extends $R{constructor(r,n,o,i,s,a,l,u){super(r,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Gke(u,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gz=class extends zR{constructor(r,n,o,i,s,a,l,u){let c=i+"-"+o.id;super(r,n,o,s,a,l,u,c),this.contentAttr=ZEt(c),this.hostAttr=QEt(c)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,n){let o=super.createElement(r,n);return super.setAttribute(o,this.contentAttr,""),o}},JEt=(()=>{let r=class r extends Uz{constructor(o){super(o)}supports(o){return!0}addEventListener(o,i,s){return o.addEventListener(i,s,!1),()=>this.removeEventListener(o,i,s)}removeEventListener(o,i,s){return o.removeEventListener(i,s)}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),Bke=["alt","control","meta","shift"],eTt={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tTt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rTt=(()=>{let r=class r extends Uz{constructor(o){super(o)}supports(o){return r.parseEventName(o)!=null}addEventListener(o,i,s){let a=r.parseEventName(i),l=r.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tne().onAndCancel(o,a.domEventName,l))}static parseEventName(o){let i=o.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=r._normalizeKey(i.pop()),l="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),l="code."),Bke.forEach(f=>{let d=i.indexOf(f);d>-1&&(i.splice(d,1),l+=f+".")}),l+=a,i.length!=0||a.length===0)return null;let c={};return c.domEventName=s,c.fullKey=l,c}static matchEventFullKeyCode(o,i){let s=eTt[o.key]||o.key,a="";return i.indexOf("code.")>-1&&(s=o.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Bke.forEach(l=>{if(l!==s){let u=tTt[l];u(o)&&(a+=l+".")}}),a+=s,a===i)}static eventCallback(o,i,s){return a=>{r.matchEventFullKeyCode(a,o)&&s.runGuarded(()=>i(a))}}static _normalizeKey(o){return o==="esc"?"escape":o}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();function Wke(t,r){return bke(Gt({rootComponent:t},nTt(r)))}function nTt(t){return{appProviders:[...lTt,...t?.providers??[]],platformProviders:aTt}}function oTt(){Lne.makeCurrent()}function iTt(){return new cS}function sTt(){return QAe(document),document}var aTt=[{provide:fS,useValue:kke},{provide:JAe,useValue:oTt,multi:!0},{provide:yn,useFactory:sTt,deps:[]}];var lTt=[{provide:ZAe,useValue:"root"},{provide:cS,useFactory:iTt,deps:[]},{provide:jne,useClass:JEt,multi:!0,deps:[yn,Cn,fS]},{provide:jne,useClass:rTt,multi:!0,deps:[yn]},Vz,Uke,zke,{provide:Lz,useExisting:Vz},{provide:Nke,useClass:qEt,deps:[]},[]];var qke=(()=>{let r=class r{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var zne=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:function(i){let s=null;return i?s=new(i||r):s=Et(uTt),s},providedIn:"root"});let t=r;return t})(),uTt=(()=>{let r=class r extends zne{constructor(o){super(),this._doc=o}sanitize(o,i){if(i==null)return null;switch(o){case nd.NONE:return i;case nd.HTML:return Pk(i,"HTML")?Rk(i):ske(this._doc,String(i)).toString();case nd.STYLE:return Pk(i,"Style")?Rk(i):i;case nd.SCRIPT:if(Pk(i,"Script"))return Rk(i);throw new is(5200,!1);case nd.URL:return Pk(i,"URL")?Rk(i):ike(String(i));case nd.RESOURCE_URL:if(Pk(i,"ResourceURL"))return Rk(i);throw new is(5201,!1);default:throw new is(5202,!1)}}bypassSecurityTrustHtml(o){return eke(o)}bypassSecurityTrustStyle(o){return tke(o)}bypassSecurityTrustScript(o){return rke(o)}bypassSecurityTrustUrl(o){return nke(o)}bypassSecurityTrustResourceUrl(o){return oke(o)}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var vn="primary",o3=Symbol("RouteTitle"),qne=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n[0]:n}return null}getAll(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Yk(t){return new qne(t)}function cTt(t,r,n){let o=n.path.split("/");if(o.length>t.length||n.pathMatch==="full"&&(r.hasChildren()||o.length<t.length))return null;let i={};for(let s=0;s<o.length;s++){let a=o[s],l=t[s];if(a[0]===":")i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:t.slice(0,o.length),posParams:i}}function fTt(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!Cg(t[n],r[n]))return!1;return!0}function Cg(t,r){let n=t?Hne(t):void 0,o=r?Hne(r):void 0;if(!n||!o||n.length!=o.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!oIe(t[i],r[i]))return!1;return!0}function Hne(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function oIe(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;let n=[...t].sort(),o=[...r].sort();return n.every((i,s)=>o[s]===i)}else return t===r}function iIe(t){return t.length>0?t[t.length-1]:null}function M1(t){return dne(t)?t:gke(t)?Xu(Promise.resolve(t)):kr(t)}var dTt={exact:aIe,subset:lIe},sIe={exact:pTt,subset:hTt,ignored:()=>!0};function Yke(t,r,n){return dTt[n.paths](t.root,r.root,n.matrixParams)&&sIe[n.queryParams](t.queryParams,r.queryParams)&&!(n.fragment==="exact"&&t.fragment!==r.fragment)}function pTt(t,r){return Cg(t,r)}function aIe(t,r,n){if(!bS(t.segments,r.segments)||!Hz(t.segments,r.segments,n)||t.numberOfChildren!==r.numberOfChildren)return!1;for(let o in r.children)if(!t.children[o]||!aIe(t.children[o],r.children[o],n))return!1;return!0}function hTt(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(n=>oIe(t[n],r[n]))}function lIe(t,r,n){return uIe(t,r,r.segments,n)}function uIe(t,r,n,o){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!bS(i,n)||r.hasChildren()||!Hz(i,n,o))}else if(t.segments.length===n.length){if(!bS(t.segments,n)||!Hz(t.segments,n,o))return!1;for(let i in r.children)if(!t.children[i]||!lIe(t.children[i],r.children[i],o))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!bS(t.segments,i)||!Hz(t.segments,i,o)||!t.children[vn]?!1:uIe(t.children[vn],r,s,o)}}function Hz(t,r,n){return r.every((o,i)=>sIe[n](t[i].parameters,o.parameters))}var I1=class{constructor(r=new To([],{}),n={},o=null){this.root=r,this.queryParams=n,this.fragment=o}get queryParamMap(){return this._queryParamMap??=Yk(this.queryParams),this._queryParamMap}toString(){return yTt.serialize(this)}},To=class{constructor(r,n){this.segments=r,this.children=n,this.parent=null,Object.values(n).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yz(this)}},yS=class{constructor(r,n){this.path=r,this.parameters=n}get parameterMap(){return this._parameterMap??=Yk(this.parameters),this._parameterMap}toString(){return fIe(this)}};function mTt(t,r){return bS(t,r)&&t.every((n,o)=>Cg(n.parameters,r[o].parameters))}function bS(t,r){return t.length!==r.length?!1:t.every((n,o)=>n.path===r[o].path)}function gTt(t,r){let n=[];return Object.entries(t.children).forEach(([o,i])=>{o===vn&&(n=n.concat(r(i,o)))}),Object.entries(t.children).forEach(([o,i])=>{o!==vn&&(n=n.concat(r(i,o)))}),n}var i3=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>new Xk,providedIn:"root"});let t=r;return t})(),Xk=class{parse(r){let n=new Xne(r);return new I1(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(r){let n=`/${UR(r.root,!0)}`,o=vTt(r.queryParams),i=typeof r.fragment=="string"?`#${bTt(r.fragment)}`:"";return`${n}${o}${i}`}},yTt=new Xk;function Yz(t){return t.segments.map(r=>fIe(r)).join("/")}function UR(t,r){if(!t.hasChildren())return Yz(t);if(r){let n=t.children[vn]?UR(t.children[vn],!1):"",o=[];return Object.entries(t.children).forEach(([i,s])=>{i!==vn&&o.push(`${i}:${UR(s,!1)}`)}),o.length>0?`${n}(${o.join("//")})`:n}else{let n=gTt(t,(o,i)=>i===vn?[UR(t.children[vn],!1)]:[`${i}:${UR(o,!1)}`]);return Object.keys(t.children).length===1&&t.children[vn]!=null?`${Yz(t)}/${n[0]}`:`${Yz(t)}/(${n.join("//")})`}}function cIe(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wz(t){return cIe(t).replace(/%3B/gi,";")}function bTt(t){return encodeURI(t)}function Yne(t){return cIe(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xz(t){return decodeURIComponent(t)}function Xke(t){return Xz(t.replace(/\+/g,"%20"))}function fIe(t){return`${Yne(t.path)}${xTt(t.parameters)}`}function xTt(t){return Object.entries(t).map(([r,n])=>`;${Yne(r)}=${Yne(n)}`).join("")}function vTt(t){let r=Object.entries(t).map(([n,o])=>Array.isArray(o)?o.map(i=>`${Wz(n)}=${Wz(i)}`).join("&"):`${Wz(n)}=${Wz(o)}`).filter(n=>n);return r.length?`?${r.join("&")}`:""}var wTt=/^[^\/()?;#]+/;function Une(t){let r=t.match(wTt);return r?r[0]:""}var _Tt=/^[^\/()?;=#]+/;function STt(t){let r=t.match(_Tt);return r?r[0]:""}var CTt=/^[^=?&#]+/;function ETt(t){let r=t.match(CTt);return r?r[0]:""}var TTt=/^[^&#]+/;function ATt(t){let r=t.match(TTt);return r?r[0]:""}var Xne=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new To([],{}):new To([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(r.length>0||Object.keys(n).length>0)&&(o[vn]=new To(r,n)),o}parseSegment(){let r=Une(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new is(4009,!1);return this.capture(r),new yS(Xz(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let n=STt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let i=Une(this.remaining);i&&(o=i,this.capture(o))}r[Xz(n)]=Xz(o)}parseQueryParam(r){let n=ETt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let a=ATt(this.remaining);a&&(o=a,this.capture(o))}let i=Xke(n),s=Xke(o);if(r.hasOwnProperty(i)){let a=r[i];Array.isArray(a)||(a=[a],r[i]=a),a.push(s)}else r[i]=s}parseParens(r){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Une(this.remaining),i=this.remaining[o.length];if(i!=="/"&&i!==")"&&i!==";")throw new is(4010,!1);let s;o.indexOf(":")>-1?(s=o.slice(0,o.indexOf(":")),this.capture(s),this.capture(":")):r&&(s=vn);let a=this.parseChildren();n[s]=Object.keys(a).length===1?a[vn]:new To([],a),this.consumeOptional("//")}return n}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new is(4011,!1)}};function dIe(t){return t.segments.length>0?new To([],{[vn]:t}):t}function pIe(t){let r={};for(let[o,i]of Object.entries(t.children)){let s=pIe(i);if(o===vn&&s.segments.length===0&&s.hasChildren())for(let[a,l]of Object.entries(s.children))r[a]=l;else(s.segments.length>0||s.hasChildren())&&(r[o]=s)}let n=new To(t.segments,r);return kTt(n)}function kTt(t){if(t.numberOfChildren===1&&t.children[vn]){let r=t.children[vn];return new To(t.segments.concat(r.segments),r.children)}return t}function YR(t){return t instanceof I1}function ITt(t,r,n=null,o=null){let i=hIe(t);return mIe(i,r,n,o)}function hIe(t){let r;function n(s){let a={};for(let u of s.children){let c=n(u);a[u.outlet]=c}let l=new To(s.url,a);return s===t&&(r=l),l}let o=n(t.root),i=dIe(o);return r??i}function mIe(t,r,n,o){let i=t;for(;i.parent;)i=i.parent;if(r.length===0)return Vne(i,i,i,n,o);let s=DTt(r);if(s.toRoot())return Vne(i,i,new To([],{}),n,o);let a=NTt(s,i,t),l=a.processChildren?WR(a.segmentGroup,a.index,s.commands):yIe(a.segmentGroup,a.index,s.commands);return Vne(i,a.segmentGroup,l,n,o)}function Kz(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function XR(t){return typeof t=="object"&&t!=null&&t.outlets}function Vne(t,r,n,o,i){let s={};o&&Object.entries(o).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let a;t===r?a=n:a=gIe(t,r,n);let l=dIe(pIe(a));return new I1(l,s,i)}function gIe(t,r,n){let o={};return Object.entries(t.children).forEach(([i,s])=>{s===r?o[i]=n:o[i]=gIe(s,r,n)}),new To(t.segments,o)}var Zz=class{constructor(r,n,o){if(this.isAbsolute=r,this.numberOfDoubleDots=n,this.commands=o,r&&o.length>0&&Kz(o[0]))throw new is(4003,!1);let i=o.find(XR);if(i&&i!==iIe(o))throw new is(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DTt(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Zz(!0,0,t);let r=0,n=!1,o=t.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([u,c])=>{l[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?n=!0:l===".."?r++:l!=""&&i.push(l))}),i):[...i,s]},[]);return new Zz(n,r,o)}var Wk=class{constructor(r,n,o){this.segmentGroup=r,this.processChildren=n,this.index=o}};function NTt(t,r,n){if(t.isAbsolute)return new Wk(r,!0,0);if(!n)return new Wk(r,!1,NaN);if(n.parent===null)return new Wk(n,!0,0);let o=Kz(t.commands[0])?0:1,i=n.segments.length-1+o;return MTt(n,i,t.numberOfDoubleDots)}function MTt(t,r,n){let o=t,i=r,s=n;for(;s>i;){if(s-=i,o=o.parent,!o)throw new is(4005,!1);i=o.segments.length}return new Wk(o,!1,i-s)}function FTt(t){return XR(t[0])?t[0].outlets:{[vn]:t}}function yIe(t,r,n){if(t??=new To([],{}),t.segments.length===0&&t.hasChildren())return WR(t,r,n);let o=OTt(t,r,n),i=n.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){let s=new To(t.segments.slice(0,o.pathIndex),{});return s.children[vn]=new To(t.segments.slice(o.pathIndex),t.children),WR(s,0,i)}else return o.match&&i.length===0?new To(t.segments,{}):o.match&&!t.hasChildren()?Kne(t,r,n):o.match?WR(t,0,i):Kne(t,r,n)}function WR(t,r,n){if(n.length===0)return new To(t.segments,{});{let o=FTt(n),i={};if(Object.keys(o).some(s=>s!==vn)&&t.children[vn]&&t.numberOfChildren===1&&t.children[vn].segments.length===0){let s=WR(t.children[vn],r,n);return new To(t.segments,s.children)}return Object.entries(o).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=yIe(t.children[s],r,a))}),Object.entries(t.children).forEach(([s,a])=>{o[s]===void 0&&(i[s]=a)}),new To(t.segments,i)}}function OTt(t,r,n){let o=0,i=r,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(o>=n.length)return s;let a=t.segments[i],l=n[o];if(XR(l))break;let u=`${l}`,c=o<n.length-1?n[o+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!Zke(u,c,a))return s;o+=2}else{if(!Zke(u,{},a))return s;o++}i++}return{match:!0,pathIndex:i,commandIndex:o}}function Kne(t,r,n){let o=t.segments.slice(0,r),i=0;for(;i<n.length;){let s=n[i];if(XR(s)){let u=RTt(s.outlets);return new To(o,u)}if(i===0&&Kz(n[0])){let u=t.segments[r];o.push(new yS(u.path,Kke(n[0]))),i++;continue}let a=XR(s)?s.outlets[vn]:`${s}`,l=i<n.length-1?n[i+1]:null;a&&l&&Kz(l)?(o.push(new yS(a,Kke(l))),i+=2):(o.push(new yS(a,{})),i++)}return new To(o,{})}function RTt(t){let r={};return Object.entries(t).forEach(([n,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[n]=Kne(new To([],{}),0,o))}),r}function Kke(t){let r={};return Object.entries(t).forEach(([n,o])=>r[n]=`${o}`),r}function Zke(t,r,n){return t==n.path&&Cg(r,n.parameters)}var qR="imperative",Ga=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ga||{}),ap=class{constructor(r,n){this.id=r,this.url=n}},Kk=class extends ap{constructor(r,n,o="imperative",i=null){super(r,n),this.type=Ga.NavigationStart,this.navigationTrigger=o,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ch=class extends ap{constructor(r,n,o){super(r,n),this.urlAfterRedirects=o,this.type=Ga.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cd=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(cd||{}),Qz=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Qz||{}),Eb=class extends ap{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=Ga.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},D1=class extends ap{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=Ga.NavigationSkipped}},KR=class extends ap{constructor(r,n,o,i){super(r,n),this.error=o,this.target=i,this.type=Ga.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jz=class extends ap{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Ga.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zne=class extends ap{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Ga.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qne=class extends ap{constructor(r,n,o,i,s){super(r,n),this.urlAfterRedirects=o,this.state=i,this.shouldActivate=s,this.type=Ga.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jne=class extends ap{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Ga.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eoe=class extends ap{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=Ga.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},toe=class{constructor(r){this.route=r,this.type=Ga.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},roe=class{constructor(r){this.route=r,this.type=Ga.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},noe=class{constructor(r){this.snapshot=r,this.type=Ga.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ooe=class{constructor(r){this.snapshot=r,this.type=Ga.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ioe=class{constructor(r){this.snapshot=r,this.type=Ga.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},soe=class{constructor(r){this.snapshot=r,this.type=Ga.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e8=class{constructor(r,n,o){this.routerEvent=r,this.position=n,this.anchor=o,this.type=Ga.Scroll}toString(){let r=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${r}')`}},ZR=class{},Zk=class{constructor(r,n){this.url=r,this.navigationBehaviorOptions=n}};var aoe=class{constructor(r){this.injector=r,this.outlet=null,this.route=null,this.children=new s3(this.injector),this.attachRef=null}},s3=(()=>{let r=class r{constructor(o){this.parentInjector=o,this.contexts=new Map}onChildOutletCreated(o,i){let s=this.getOrCreateContext(o);s.outlet=i,this.contexts.set(o,s)}onChildOutletDestroyed(o){let i=this.getContext(o);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let i=this.getContext(o);return i||(i=new aoe(this.parentInjector),this.contexts.set(o,i)),i}getContext(o){return this.contexts.get(o)||null}};r.\u0275fac=function(i){return new(i||r)(Et(Sb))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),t8=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let n=this.pathFromRoot(r);return n.length>1?n[n.length-2]:null}children(r){let n=loe(r,this._root);return n?n.children.map(o=>o.value):[]}firstChild(r){let n=loe(r,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(r){let n=uoe(r,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return uoe(r,this._root).map(n=>n.value)}};function loe(t,r){if(t===r.value)return r;for(let n of r.children){let o=loe(t,n);if(o)return o}return null}function uoe(t,r){if(t===r.value)return[r];for(let n of r.children){let o=uoe(t,n);if(o.length)return o.unshift(r),o}return[]}var ud=class{constructor(r,n){this.value=r,this.children=n}toString(){return`TreeNode(${this.value})`}};function Gk(t){let r={};return t&&t.children.forEach(n=>r[n.value.outlet]=n),r}var r8=class extends t8{constructor(r,n){super(r),this.snapshot=n,boe(this,r)}toString(){return this.snapshot.toString()}};function bIe(t){let r=PTt(t),n=new Ua([new yS("",{})]),o=new Ua({}),i=new Ua({}),s=new Ua({}),a=new Ua(""),l=new N1(n,o,s,a,i,vn,t,r.root);return l.snapshot=r.root,new r8(new ud(l,[]),r)}function PTt(t){let r={},n={},o={},i="",s=new qk([],r,o,i,n,vn,t,null,{});return new o8("",new ud(s,[]))}var N1=class{constructor(r,n,o,i,s,a,l,u){this.urlSubject=r,this.paramsSubject=n,this.queryParamsSubject=o,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(dn(c=>c[o3]))??kr(void 0),this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(dn(r=>Yk(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(dn(r=>Yk(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function n8(t,r,n="emptyOnly"){let o,{routeConfig:i}=t;return r!==null&&(n==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?o={params:Gt(Gt({},r.params),t.params),data:Gt(Gt({},r.data),t.data),resolve:Gt(Gt(Gt(Gt({},t.data),r.data),i?.data),t._resolvedData)}:o={params:Gt({},t.params),data:Gt({},t.data),resolve:Gt(Gt({},t.data),t._resolvedData??{})},i&&vIe(i)&&(o.resolve[o3]=i.title),o}var qk=class{get title(){return this.data?.[o3]}constructor(r,n,o,i,s,a,l,u,c){this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yk(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yk(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(o=>o.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${n}')`}},o8=class extends t8{constructor(r,n){super(n),this.url=r,boe(this,n)}toString(){return xIe(this._root)}};function boe(t,r){r.value._routerState=t,r.children.forEach(n=>boe(t,n))}function xIe(t){let r=t.children.length>0?` { ${t.children.map(xIe).join(", ")} } `:"";return`${t.value}${r}`}function Gne(t){if(t.snapshot){let r=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Cg(r.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),r.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Cg(r.params,n.params)||t.paramsSubject.next(n.params),fTt(r.url,n.url)||t.urlSubject.next(n.url),Cg(r.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function coe(t,r){let n=Cg(t.params,r.params)&&mTt(t.url,r.url),o=!t.parent!=!r.parent;return n&&!o&&(!t.parent||coe(t.parent,r.parent))}function vIe(t){return typeof t.title=="string"||t.title===null}var xoe=(()=>{let r=class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=vn,this.activateEvents=new Hs,this.deactivateEvents=new Hs,this.attachEvents=new Hs,this.detachEvents=new Hs,this.parentContexts=Zt(s3),this.location=Zt(jk),this.changeDetector=Zt(ld),this.inputBinder=Zt(u8,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:i,previousValue:s}=o.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new is(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new is(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new is(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,i){this.activated=o,this._activatedRoute=i,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,i){if(this.isActivated)throw new is(4013,!1);this._activatedRoute=o;let s=this.location,l=o.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new foe(o,u,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=Va({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T1]});let t=r;return t})(),foe=class t{__ngOutletInjector(r){return new t(this.route,this.childContexts,r)}constructor(r,n,o){this.route=r,this.childContexts=n,this.parent=o}get(r,n){return r===N1?this.route:r===s3?this.childContexts:this.parent.get(r,n)}},u8=new En(""),Qke=(()=>{let r=class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){let{activatedRoute:i}=o,s=Fk([i.queryParams,i.params,i.data]).pipe(ed(([a,l,u],c)=>(u=Gt(Gt(Gt({},a),l),u),c===0?kr(u):Promise.resolve(u)))).subscribe(a=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(o);return}let l=vke(i.component);if(!l){this.unsubscribeFromRouteData(o);return}for(let{templateName:u}of l.inputs)o.activatedComponentRef.setInput(u,a[u])});this.outletDataSubscriptions.set(o,s)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();function LTt(t,r,n){let o=QR(t,r._root,n?n._root:void 0);return new r8(o,r)}function QR(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){let o=n.value;o._futureSnapshot=r.value;let i=jTt(t,r,n);return new ud(o,i)}else{if(t.shouldAttach(r.value)){let s=t.retrieve(r.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=r.value,a.children=r.children.map(l=>QR(t,l)),a}}let o=BTt(r.value),i=r.children.map(s=>QR(t,s));return new ud(o,i)}}function jTt(t,r,n){return r.children.map(o=>{for(let i of n.children)if(t.shouldReuseRoute(o.value,i.value.snapshot))return QR(t,o,i);return QR(t,o)})}function BTt(t){return new N1(new Ua(t.url),new Ua(t.params),new Ua(t.queryParams),new Ua(t.fragment),new Ua(t.data),t.outlet,t.component,t)}var JR=class{constructor(r,n){this.redirectTo=r,this.navigationBehaviorOptions=n}},wIe="ngNavigationCancelingError";function i8(t,r){let{redirectTo:n,navigationBehaviorOptions:o}=YR(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=_Ie(!1,cd.Redirect);return i.url=n,i.navigationBehaviorOptions=o,i}function _Ie(t,r){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[wIe]=!0,n.cancellationCode=r,n}function $Tt(t){return SIe(t)&&YR(t.url)}function SIe(t){return!!t&&t[wIe]}var zTt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ki({type:r,selectors:[["ng-component"]],standalone:!0,features:[Ii],decls:1,vars:0,template:function(i,s){i&1&&Ks(0,"router-outlet")},dependencies:[xoe],encapsulation:2});let t=r;return t})();function UTt(t,r){return t.providers&&!t._injector&&(t._injector=wne(t.providers,r,`Route: ${t.path}`)),t._injector??r}function voe(t){let r=t.children&&t.children.map(voe),n=r?Is(Gt({},t),{children:r}):Gt({},t);return!n.component&&!n.loadComponent&&(r||n.loadChildren)&&n.outlet&&n.outlet!==vn&&(n.component=zTt),n}function Sh(t){return t.outlet||vn}function VTt(t,r){let n=t.filter(o=>Sh(o)===r);return n.push(...t.filter(o=>Sh(o)!==r)),n}function a3(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let r=t.parent;r;r=r.parent){let n=r.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var GTt=(t,r,n,o)=>dn(i=>(new doe(r,i.targetRouterState,i.currentRouterState,n,o).activate(t),i)),doe=class{constructor(r,n,o,i,s){this.routeReuseStrategy=r,this.futureState=n,this.currState=o,this.forwardEvent=i,this.inputBindingEnabled=s}activate(r){let n=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,o,r),Gne(this.futureState.root),this.activateChildRoutes(n,o,r)}deactivateChildRoutes(r,n,o){let i=Gk(n);r.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],o),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,o)})}deactivateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(i===s)if(i.component){let a=o.getContext(i.outlet);a&&this.deactivateChildRoutes(r,n,a.children)}else this.deactivateChildRoutes(r,n,o);else s&&this.deactivateRouteAndItsChildren(n,o)}deactivateRouteAndItsChildren(r,n){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,n):this.deactivateRouteAndOutlet(r,n)}detachAndStoreRouteSubtree(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=Gk(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(o&&o.outlet){let a=o.outlet.detach(),l=o.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:a,route:r,contexts:l})}}deactivateRouteAndOutlet(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=Gk(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(r,n,o){let i=Gk(n);r.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],o),this.forwardEvent(new soe(s.value.snapshot))}),r.children.length&&this.forwardEvent(new ooe(r.value.snapshot))}activateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(Gne(i),i===s)if(i.component){let a=o.getOrCreateContext(i.outlet);this.activateChildRoutes(r,n,a.children)}else this.activateChildRoutes(r,n,o);else if(i.component){let a=o.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Gne(l.route.value),this.activateChildRoutes(r,null,a.children)}else{let l=a3(i.snapshot);a.attachRef=null,a.route=i,a.injector=l??a.injector,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(r,null,a.children)}}else this.activateChildRoutes(r,null,o)}},s8=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},Hk=class{constructor(r,n){this.component=r,this.route=n}};function WTt(t,r,n){let o=t._root,i=r?r._root:null;return VR(o,i,n,[o.value])}function qTt(t){let r=t.routeConfig?t.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:t,guards:r}}function Jk(t,r){let n=Symbol(),o=r.get(t,n);return o===n?typeof t=="function"&&!KAe(t)?t:r.get(t):o}function VR(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Gk(r);return t.children.forEach(a=>{HTt(a,s[a.value.outlet],n,o.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,l])=>HR(l,n.getContext(a),i)),i}function HTt(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,a=r?r.value:null,l=n?n.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=YTt(a,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new s8(o)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?VR(t,r,l?l.children:null,o,i):VR(t,r,n,o,i),u&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Hk(l.outlet.component,a))}else a&&HR(r,l,i),i.canActivateChecks.push(new s8(o)),s.component?VR(t,null,l?l.children:null,o,i):VR(t,null,n,o,i);return i}function YTt(t,r,n){if(typeof n=="function")return n(t,r);switch(n){case"pathParamsChange":return!bS(t.url,r.url);case"pathParamsOrQueryParamsChange":return!bS(t.url,r.url)||!Cg(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!coe(t,r)||!Cg(t.queryParams,r.queryParams);case"paramsChange":default:return!coe(t,r)}}function HR(t,r,n){let o=Gk(t),i=t.value;Object.entries(o).forEach(([s,a])=>{i.component?r?HR(a,r.children.getContext(s),n):HR(a,null,n):HR(a,r,n)}),i.component?r&&r.outlet&&r.outlet.isActivated?n.canDeactivateChecks.push(new Hk(r.outlet.component,i)):n.canDeactivateChecks.push(new Hk(null,i)):n.canDeactivateChecks.push(new Hk(null,i))}function l3(t){return typeof t=="function"}function XTt(t){return typeof t=="boolean"}function KTt(t){return t&&l3(t.canLoad)}function ZTt(t){return t&&l3(t.canActivate)}function QTt(t){return t&&l3(t.canActivateChild)}function JTt(t){return t&&l3(t.canDeactivate)}function eAt(t){return t&&l3(t.canMatch)}function CIe(t){return t instanceof GAe||t?.name==="EmptyError"}var qz=Symbol("INITIAL_VALUE");function Qk(){return ed(t=>Fk(t.map(r=>r.pipe(Uc(1),E1(qz)))).pipe(dn(r=>{for(let n of r)if(n!==!0){if(n===qz)return qz;if(n===!1||tAt(n))return n}return!0}),Ds(r=>r!==qz),Uc(1)))}function tAt(t){return YR(t)||t instanceof JR}function rAt(t,r){return Jf(n=>{let{targetSnapshot:o,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return a.length===0&&s.length===0?kr(Is(Gt({},n),{guardsResult:!0})):nAt(a,o,i,t).pipe(Jf(l=>l&&XTt(l)?oAt(o,s,t,r):kr(l)),dn(l=>Is(Gt({},n),{guardsResult:l})))})}function nAt(t,r,n,o){return Xu(t).pipe(Jf(i=>uAt(i.component,i.route,n,r,o)),C1(i=>i!==!0,!0))}function oAt(t,r,n,o){return Xu(r).pipe(S1(i=>Dz(sAt(i.route.parent,o),iAt(i.route,o),lAt(t,i.path,n),aAt(t,i.route,n))),C1(i=>i!==!0,!0))}function iAt(t,r){return t!==null&&r&&r(new ioe(t)),kr(!0)}function sAt(t,r){return t!==null&&r&&r(new noe(t)),kr(!0)}function aAt(t,r,n){let o=r.routeConfig?r.routeConfig.canActivate:null;if(!o||o.length===0)return kr(!0);let i=o.map(s=>pne(()=>{let a=a3(r)??n,l=Jk(s,a),u=ZTt(l)?l.canActivate(r,t):_g(a,()=>l(r,t));return M1(u).pipe(C1())}));return kr(i).pipe(Qk())}function lAt(t,r,n){let o=r[r.length-1],s=r.slice(0,r.length-1).reverse().map(a=>qTt(a)).filter(a=>a!==null).map(a=>pne(()=>{let l=a.guards.map(u=>{let c=a3(a.node)??n,f=Jk(u,c),d=QTt(f)?f.canActivateChild(o,t):_g(c,()=>f(o,t));return M1(d).pipe(C1())});return kr(l).pipe(Qk())}));return kr(s).pipe(Qk())}function uAt(t,r,n,o,i){let s=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!s||s.length===0)return kr(!0);let a=s.map(l=>{let u=a3(r)??i,c=Jk(l,u),f=JTt(c)?c.canDeactivate(t,r,n,o):_g(u,()=>c(t,r,n,o));return M1(f).pipe(C1())});return kr(a).pipe(Qk())}function cAt(t,r,n,o){let i=r.canLoad;if(i===void 0||i.length===0)return kr(!0);let s=i.map(a=>{let l=Jk(a,t),u=KTt(l)?l.canLoad(r,n):_g(t,()=>l(r,n));return M1(u)});return kr(s).pipe(Qk(),EIe(o))}function EIe(t){return VAe(xi(r=>{if(typeof r!="boolean")throw i8(t,r)}),dn(r=>r===!0))}function fAt(t,r,n,o){let i=r.canMatch;if(!i||i.length===0)return kr(!0);let s=i.map(a=>{let l=Jk(a,t),u=eAt(l)?l.canMatch(r,n):_g(t,()=>l(r,n));return M1(u)});return kr(s).pipe(Qk(),EIe(o))}var e3=class{constructor(r){this.segmentGroup=r||null}},t3=class extends Error{constructor(r){super(),this.urlTree=r}};function Vk(t){return sS(new e3(t))}function dAt(t){return sS(new is(4e3,!1))}function pAt(t){return sS(_Ie(!1,cd.GuardRejected))}var poe=class{constructor(r,n){this.urlSerializer=r,this.urlTree=n}lineralizeSegments(r,n){let o=[],i=n.root;for(;;){if(o=o.concat(i.segments),i.numberOfChildren===0)return kr(o);if(i.numberOfChildren>1||!i.children[vn])return dAt(`${r.redirectTo}`);i=i.children[vn]}}applyRedirectCommands(r,n,o,i,s){if(typeof n!="string"){let l=n,{queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,params:h,data:m,title:g}=i,y=_g(s,()=>l({params:h,data:m,queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,title:g}));if(y instanceof I1)throw new t3(y);n=y}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),r,o);if(n[0]==="/")throw new t3(a);return a}applyRedirectCreateUrlTree(r,n,o,i){let s=this.createSegmentGroup(r,n.root,o,i);return new I1(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(r,n){let o={};return Object.entries(r).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);o[i]=n[l]}else o[i]=s}),o}createSegmentGroup(r,n,o,i){let s=this.createSegments(r,n.segments,o,i),a={};return Object.entries(n.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(r,u,o,i)}),new To(s,a)}createSegments(r,n,o,i){return n.map(s=>s.path[0]===":"?this.findPosParam(r,s,i):this.findOrReturn(s,o))}findPosParam(r,n,o){let i=o[n.path.substring(1)];if(!i)throw new is(4001,!1);return i}findOrReturn(r,n){let o=0;for(let i of n){if(i.path===r.path)return n.splice(o),i;o++}return r}},hoe={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hAt(t,r,n,o,i){let s=woe(t,r,n);return s.matched?(o=UTt(r,o),fAt(o,r,n,i).pipe(dn(a=>a===!0?s:Gt({},hoe)))):kr(s)}function woe(t,r,n){if(r.path==="**")return mAt(n);if(r.path==="")return r.pathMatch==="full"&&(t.hasChildren()||n.length>0)?Gt({},hoe):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(r.matcher||cTt)(n,t,r);if(!i)return Gt({},hoe);let s={};Object.entries(i.posParams??{}).forEach(([l,u])=>{s[l]=u.path});let a=i.consumed.length>0?Gt(Gt({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function mAt(t){return{matched:!0,parameters:t.length>0?iIe(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Jke(t,r,n,o){return n.length>0&&bAt(t,n,o)?{segmentGroup:new To(r,yAt(o,new To(n,t.children))),slicedSegments:[]}:n.length===0&&xAt(t,n,o)?{segmentGroup:new To(t.segments,gAt(t,n,o,t.children)),slicedSegments:n}:{segmentGroup:new To(t.segments,t.children),slicedSegments:n}}function gAt(t,r,n,o){let i={};for(let s of n)if(c8(t,r,s)&&!o[Sh(s)]){let a=new To([],{});i[Sh(s)]=a}return Gt(Gt({},o),i)}function yAt(t,r){let n={};n[vn]=r;for(let o of t)if(o.path===""&&Sh(o)!==vn){let i=new To([],{});n[Sh(o)]=i}return n}function bAt(t,r,n){return n.some(o=>c8(t,r,o)&&Sh(o)!==vn)}function xAt(t,r,n){return n.some(o=>c8(t,r,o))}function c8(t,r,n){return(t.hasChildren()||r.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vAt(t,r,n,o){return Sh(t)!==o&&(o===vn||!c8(r,n,t))?!1:woe(r,t,n).matched}function wAt(t,r,n){return r.length===0&&!t.children[n]}var moe=class{};function _At(t,r,n,o,i,s,a="emptyOnly"){return new goe(t,r,n,o,i,a,s).recognize()}var SAt=31,goe=class{constructor(r,n,o,i,s,a,l){this.injector=r,this.configLoader=n,this.rootComponentType=o,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new poe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new is(4002,`'${r.segmentGroup}'`)}recognize(){let r=Jke(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(dn(({children:n,rootSnapshot:o})=>{let i=new ud(o,n),s=new o8("",i),a=ITt(o,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(r){let n=new qk([],Object.freeze({}),Object.freeze(Gt({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),vn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,r,vn,n).pipe(dn(o=>({children:o,rootSnapshot:n})),_1(o=>{if(o instanceof t3)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof e3?this.noMatchError(o):o}))}processSegmentGroup(r,n,o,i,s){return o.segments.length===0&&o.hasChildren()?this.processChildren(r,n,o,s):this.processSegment(r,n,o,o.segments,i,!0,s).pipe(dn(a=>a instanceof ud?[a]:[]))}processChildren(r,n,o,i){let s=[];for(let a of Object.keys(o.children))a==="primary"?s.unshift(a):s.push(a);return Xu(s).pipe(S1(a=>{let l=o.children[a],u=VTt(n,a);return this.processSegmentGroup(r,u,l,a,i)}),HAe((a,l)=>(a.push(...l),a)),mne(null),qAe(),Jf(a=>{if(a===null)return Vk(o);let l=TIe(a);return CAt(l),kr(l)}))}processSegment(r,n,o,i,s,a,l){return Xu(n).pipe(S1(u=>this.processSegmentAgainstRoute(u._injector??r,n,u,o,i,s,a,l).pipe(_1(c=>{if(c instanceof e3)return kr(null);throw c}))),C1(u=>!!u),_1(u=>{if(CIe(u))return wAt(o,i,s)?kr(new moe):Vk(o);throw u}))}processSegmentAgainstRoute(r,n,o,i,s,a,l,u){return vAt(o,i,s,a)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(r,i,o,s,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(r,i,n,o,s,a,u):Vk(i):Vk(i)}expandSegmentAgainstRouteUsingRedirect(r,n,o,i,s,a,l){let{matched:u,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:p}=woe(n,i,s);if(!u)return Vk(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SAt&&(this.allowRedirects=!1));let h=new qk(s,c,Object.freeze(Gt({},this.urlTree.queryParams)),this.urlTree.fragment,eIe(i),Sh(i),i.component??i._loadedComponent??null,i,tIe(i)),m=n8(h,l,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let g=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,d,h,r);return this.applyRedirects.lineralizeSegments(i,g).pipe(Jf(y=>this.processSegment(r,o,n,y.concat(p),a,!1,l)))}matchSegmentAgainstRoute(r,n,o,i,s,a){let l=hAt(n,o,i,r,this.urlSerializer);return o.path==="**"&&(n.children={}),l.pipe(ed(u=>u.matched?(r=o._injector??r,this.getChildConfig(r,o,i).pipe(ed(({routes:c})=>{let f=o._loadedInjector??r,{parameters:d,consumedSegments:p,remainingSegments:h}=u,m=new qk(p,d,Object.freeze(Gt({},this.urlTree.queryParams)),this.urlTree.fragment,eIe(o),Sh(o),o.component??o._loadedComponent??null,o,tIe(o)),g=n8(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:y,slicedSegments:b}=Jke(n,p,h,c);if(b.length===0&&y.hasChildren())return this.processChildren(f,c,y,m).pipe(dn(v=>new ud(m,v)));if(c.length===0&&b.length===0)return kr(new ud(m,[]));let x=Sh(o)===s;return this.processSegment(f,c,y,b,x?vn:s,!0,m).pipe(dn(v=>new ud(m,v instanceof ud?[v]:[])))}))):Vk(n)))}getChildConfig(r,n,o){return n.children?kr({routes:n.children,injector:r}):n.loadChildren?n._loadedRoutes!==void 0?kr({routes:n._loadedRoutes,injector:n._loadedInjector}):cAt(r,n,o,this.urlSerializer).pipe(Jf(i=>i?this.configLoader.loadChildren(r,n).pipe(xi(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):pAt(n))):kr({routes:[],injector:r})}};function CAt(t){t.sort((r,n)=>r.value.outlet===vn?-1:n.value.outlet===vn?1:r.value.outlet.localeCompare(n.value.outlet))}function EAt(t){let r=t.value.routeConfig;return r&&r.path===""}function TIe(t){let r=[],n=new Set;for(let o of t){if(!EAt(o)){r.push(o);continue}let i=r.find(s=>o.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...o.children),n.add(i)):r.push(o)}for(let o of n){let i=TIe(o.children);r.push(new ud(o.value,i))}return r.filter(o=>!n.has(o))}function eIe(t){return t.data||{}}function tIe(t){return t.resolve||{}}function TAt(t,r,n,o,i,s){return Jf(a=>_At(t,r,n,o,a.extractedUrl,i,s).pipe(dn(({state:l,tree:u})=>Is(Gt({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function AAt(t,r){return Jf(n=>{let{targetSnapshot:o,guards:{canActivateChecks:i}}=n;if(!i.length)return kr(n);let s=new Set(i.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let c of AIe(u))a.add(c);let l=0;return Xu(a).pipe(S1(u=>s.has(u)?kAt(u,o,t,r):(u.data=n8(u,u.parent,t).resolve,kr(void 0))),xi(()=>l++),gne(1),Jf(u=>l===a.size?kr(n):w1))})}function AIe(t){let r=t.children.map(n=>AIe(n)).flat();return[t,...r]}function kAt(t,r,n,o){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!vIe(i)&&(s[o3]=i.title),IAt(s,t,r,o).pipe(dn(a=>(t._resolvedData=a,t.data=n8(t,t.parent,n).resolve,null)))}function IAt(t,r,n,o){let i=Hne(t);if(i.length===0)return kr({});let s={};return Xu(i).pipe(Jf(a=>DAt(t[a],r,n,o).pipe(C1(),xi(l=>{if(l instanceof JR)throw i8(new Xk,l);s[a]=l}))),gne(1),DR(s),_1(a=>CIe(a)?w1:sS(a)))}function DAt(t,r,n,o){let i=a3(r)??o,s=Jk(t,i),a=s.resolve?s.resolve(r,n):_g(i,()=>s(r,n));return M1(a)}function Wne(t){return ed(r=>{let n=t(r);return n?Xu(n).pipe(dn(()=>r)):kr(r)})}var kIe=(()=>{let r=class r{buildTitle(o){let i,s=o.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===vn);return i}getResolvedTitleForRoute(o){return o.data[o3]}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(NAt),providedIn:"root"});let t=r;return t})(),NAt=(()=>{let r=class r extends kIe{constructor(o){super(),this.title=o}updateTitle(o){let i=this.buildTitle(o);i!==void 0&&this.title.setTitle(i)}};r.\u0275fac=function(i){return new(i||r)(Et(qke))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),u3=new En("",{providedIn:"root",factory:()=>({})}),r3=new En(""),_oe=(()=>{let r=class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Zt($z)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return kr(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let i=M1(o.loadComponent()).pipe(dn(IIe),xi(a=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=a}),lS(()=>{this.componentLoaders.delete(o)})),s=new fne(i,()=>new Xn).pipe(cne());return this.componentLoaders.set(o,s),s}loadChildren(o,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return kr({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=MAt(i,this.compiler,o,this.onLoadEndListener).pipe(lS(()=>{this.childrenLoaders.delete(i)})),l=new fne(a,()=>new Xn).pipe(cne());return this.childrenLoaders.set(i,l),l}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function MAt(t,r,n,o){return M1(t.loadChildren()).pipe(dn(IIe),Jf(i=>i instanceof dke||Array.isArray(i)?kr(i):Xu(r.compileModuleAsync(i))),dn(i=>{o&&o(t);let s,a,l=!1;return Array.isArray(i)?(a=i,l=!0):(s=i.create(n).injector,a=s.get(r3,[],{optional:!0,self:!0}).flat()),{routes:a.map(voe),injector:s}}))}function FAt(t){return t&&typeof t=="object"&&"default"in t}function IIe(t){return FAt(t)?t.default:t}var Soe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(OAt),providedIn:"root"});let t=r;return t})(),OAt=(()=>{let r=class r{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,i){return o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),DIe=new En(""),NIe=new En("");function RAt(t,r,n){let o=t.get(NIe),i=t.get(yn);return t.get(Cn).runOutsideAngular(()=>{if(!i.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,a=new Promise(c=>{s=c}),l=i.startViewTransition(()=>(s(),PAt(t))),{onViewTransitionCreated:u}=o;return u&&_g(t,()=>u({transition:l,from:r,to:n})),a})}function PAt(t){return new Promise(r=>{_h(r,{injector:t})})}var LAt=new En(""),Coe=(()=>{let r=class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xn,this.transitionAbortSubject=new Xn,this.configLoader=Zt(_oe),this.environmentInjector=Zt(Sb),this.urlSerializer=Zt(i3),this.rootContexts=Zt(s3),this.location=Zt(hS),this.inputBindingEnabled=Zt(u8,{optional:!0})!==null,this.titleStrategy=Zt(kIe),this.options=Zt(u3,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Zt(Soe),this.createViewTransition=Zt(DIe,{optional:!0}),this.navigationErrorHandler=Zt(LAt,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>kr(void 0),this.rootComponentType=null;let o=s=>this.events.next(new toe(s)),i=s=>this.events.next(new roe(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let i=++this.navigationId;this.transitions?.next(Is(Gt(Gt({},this.transitions.value),o),{id:i}))}setupNavigations(o,i,s){return this.transitions=new Ua({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:qR,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ds(a=>a.id!==0),dn(a=>Is(Gt({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),ed(a=>{let l=!1,u=!1;return kr(a).pipe(ed(c=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",cd.SupersededByNewNavigation),w1;this.currentTransition=a,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Is(Gt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!f&&d!=="reload"){let p="";return this.events.next(new D1(c.id,this.urlSerializer.serialize(c.rawUrl),p,Qz.IgnoredSameUrlNavigation)),c.resolve(!1),w1}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return kr(c).pipe(ed(p=>{let h=this.transitions?.getValue();return this.events.next(new Kk(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),h!==this.transitions?.getValue()?w1:Promise.resolve(p)}),TAt(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),xi(p=>{a.targetSnapshot=p.targetSnapshot,a.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Is(Gt({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let h=new Jz(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:h,source:m,restoredState:g,extras:y}=c,b=new Kk(p,this.urlSerializer.serialize(h),m,g);this.events.next(b);let x=bIe(this.rootComponentType).snapshot;return this.currentTransition=a=Is(Gt({},c),{targetSnapshot:x,urlAfterRedirects:h,extras:Is(Gt({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,kr(a)}else{let p="";return this.events.next(new D1(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Qz.IgnoredByUrlHandlingStrategy)),c.resolve(!1),w1}}),xi(c=>{let f=new Zne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),dn(c=>(this.currentTransition=a=Is(Gt({},c),{guards:WTt(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),a)),rAt(this.environmentInjector,c=>this.events.next(c)),xi(c=>{if(a.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw i8(this.urlSerializer,c.guardsResult);let f=new Qne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),Ds(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",cd.GuardRejected),!1)),Wne(c=>{if(c.guards.canActivateChecks.length)return kr(c).pipe(xi(f=>{let d=new Jne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}),ed(f=>{let d=!1;return kr(f).pipe(AAt(this.paramsInheritanceStrategy,this.environmentInjector),xi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(f,"",cd.NoDataFromResolver)}}))}),xi(f=>{let d=new eoe(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}))}),Wne(c=>{let f=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(xi(h=>{d.component=h}),dn(()=>{})));for(let h of d.children)p.push(...f(h));return p};return Fk(f(c.targetSnapshot.root)).pipe(mne(null),Uc(1))}),Wne(()=>this.afterPreactivation()),ed(()=>{let{currentSnapshot:c,targetSnapshot:f}=a,d=this.createViewTransition?.(this.environmentInjector,c.root,f.root);return d?Xu(d).pipe(dn(()=>a)):kr(a)}),dn(c=>{let f=LTt(o.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=a=Is(Gt({},c),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,a}),xi(()=>{this.events.next(new ZR)}),GTt(this.rootContexts,o.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Uc(1),xi({next:c=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ch(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{l=!0}}),Ns(this.transitionAbortSubject.pipe(xi(c=>{throw c}))),lS(()=>{!l&&!u&&this.cancelNavigationTransition(a,"",cd.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),_1(c=>{if(u=!0,SIe(c))this.events.next(new Eb(a.id,this.urlSerializer.serialize(a.extractedUrl),c.message,c.cancellationCode)),$Tt(c)?this.events.next(new Zk(c.url,c.navigationBehaviorOptions)):a.resolve(!1);else{let f=new KR(a.id,this.urlSerializer.serialize(a.extractedUrl),c,a.targetSnapshot??void 0);try{let d=_g(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(d instanceof JR){let{message:p,cancellationCode:h}=i8(this.urlSerializer,d);this.events.next(new Eb(a.id,this.urlSerializer.serialize(a.extractedUrl),p,h)),this.events.next(new Zk(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(f);let p=o.errorHandler(c);a.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(d)}}return w1}))}))}cancelNavigationTransition(o,i,s){let a=new Eb(o.id,this.urlSerializer.serialize(o.extractedUrl),i,s);this.events.next(a),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function jAt(t){return t!==qR}var BAt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt($At),providedIn:"root"});let t=r;return t})(),yoe=class{shouldDetach(r){return!1}store(r,n){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,n){return r.routeConfig===n.routeConfig}},$At=(()=>{let r=class r extends yoe{};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=uS(r)))(s||r)}})(),r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),MIe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:()=>Zt(zAt),providedIn:"root"});let t=r;return t})(),zAt=(()=>{let r=class r extends MIe{constructor(){super(...arguments),this.location=Zt(hS),this.urlSerializer=Zt(i3),this.options=Zt(u3,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Zt(Soe),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new I1,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=bIe(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(i=>{i.type==="popstate"&&o(i.url,i.state)})}handleRouterEvent(o,i){if(o instanceof Kk)this.stateMemento=this.createStateMemento();else if(o instanceof D1)this.rawUrlTree=i.initialUrl;else if(o instanceof Jz){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else o instanceof ZR?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):o instanceof Eb&&(o.code===cd.GuardRejected||o.code===cd.NoDataFromResolver)?this.restoreHistory(i):o instanceof KR?this.restoreHistory(i,!0):o instanceof Ch&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,i){let s=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,l=Gt(Gt({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",l)}else{let a=Gt(Gt({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(o,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===o.finalUrl&&a===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,i){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:i}:{navigationId:o}}};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=uS(r)))(s||r)}})(),r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),GR=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(GR||{});function FIe(t,r){t.events.pipe(Ds(n=>n instanceof Ch||n instanceof Eb||n instanceof KR||n instanceof D1),dn(n=>n instanceof Ch||n instanceof D1?GR.COMPLETE:(n instanceof Eb?n.code===cd.Redirect||n.code===cd.SupersededByNewNavigation:!1)?GR.REDIRECTING:GR.FAILED),Ds(n=>n!==GR.REDIRECTING),Uc(1)).subscribe(()=>{r()})}function UAt(t){throw t}var VAt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GAt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Eg=(()=>{let r=class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Zt(Bz),this.stateManager=Zt(MIe),this.options=Zt(u3,{optional:!0})||{},this.pendingTasks=Zt(pke),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Zt(Coe),this.urlSerializer=Zt(i3),this.location=Zt(hS),this.urlHandlingStrategy=Zt(Soe),this._events=new Xn,this.errorHandler=this.options.errorHandler||UAt,this.navigated=!1,this.routeReuseStrategy=Zt(BAt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Zt(r3,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Zt(u8,{optional:!0}),this.eventsSubscription=new _b,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof Eb&&i.code!==cd.Redirect&&i.code!==cd.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ch)this.navigated=!0;else if(i instanceof Zk){let l=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=Gt({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jAt(s.source)},l);this.scheduleNavigation(u,qR,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}qAt(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qR,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",i)},0)})}navigateToSyncWithBrowser(o,i,s){let a={replaceUrl:!0},l=s?.navigationId?s:null;if(s){let c=Gt({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(a.state=c)}let u=this.parseUrl(o);this.scheduleNavigation(u,i,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(voe),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,i={}){let{relativeTo:s,queryParams:a,fragment:l,queryParamsHandling:u,preserveFragment:c}=i,f=c?this.currentUrlTree.fragment:l,d=null;switch(u){case"merge":d=Gt(Gt({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let h=s?s.snapshot:this.routerState.snapshot.root;p=hIe(h)}catch{(typeof o[0]!="string"||o[0][0]!=="/")&&(o=[]),p=this.currentUrlTree.root}return mIe(p,o,d,f??null)}navigateByUrl(o,i={skipLocationChange:!1}){let s=YR(o)?o:this.parseUrl(o),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,qR,null,i)}navigate(o,i={skipLocationChange:!1}){return WAt(o),this.navigateByUrl(this.createUrlTree(o,i),i)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,i){let s;if(i===!0?s=Gt({},VAt):i===!1?s=Gt({},GAt):s=i,YR(o))return Yke(this.currentUrlTree,o,s);let a=this.parseUrl(o);return Yke(this.currentUrlTree,a,s)}removeEmptyProps(o){return Object.entries(o).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(o,i,s,a,l){if(this.disposed)return Promise.resolve(!1);let u,c,f;l?(u=l.resolve,c=l.reject,f=l.promise):f=new Promise((p,h)=>{u=p,c=h});let d=this.pendingTasks.add();return FIe(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:a,resolve:u,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function WAt(t){for(let r=0;r<t.length;r++)if(t[r]==null)throw new is(4008,!1)}function qAt(t){return!(t instanceof ZR)&&!(t instanceof Zk)}var a8=(()=>{let r=class r{constructor(o,i,s,a,l,u){this.router=o,this.route=i,this.tabIndexAttribute=s,this.renderer=a,this.el=l,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Xn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=o.events.subscribe(f=>{f instanceof Ch&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(o){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",o)}ngOnChanges(o){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(o){o!=null?(this.commands=Array.isArray(o)?o:[o],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(o,i,s,a,l){let u=this.urlTree;if(u===null||this.isAnchorElement&&(o!==0||i||s||a||l||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let o=this.urlTree;this.href=o!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(o)):null;let i=this.href===null?null:ake(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(o,i){let s=this.renderer,a=this.el.nativeElement;i!==null?s.setAttribute(a,o,i):s.removeAttribute(a,o)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};r.\u0275fac=function(i){return new(i||r)(vr(Eg),vr(N1),Ok("tabindex"),vr(vne),vr(No),vr(PR))},r.\u0275dir=Va({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&nu("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),i&2&&id("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",su],skipLocationChange:[2,"skipLocationChange","skipLocationChange",su],replaceUrl:[2,"replaceUrl","replaceUrl",su],routerLink:"routerLink"},standalone:!0,features:[od,T1]});let t=r;return t})(),OIe=(()=>{let r=class r{get isActive(){return this._isActive}constructor(o,i,s,a,l){this.router=o,this.element=i,this.renderer=s,this.cdr=a,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Hs,this.routerEventsSubscription=o.events.subscribe(u=>{u instanceof Ch&&this.update()})}ngAfterContentInit(){kr(this.links.changes,kr(null)).pipe(AR()).subscribe(o=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let o=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Xu(o).pipe(AR()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(o){let i=Array.isArray(o)?o:o.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(o){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let o=this.hasActiveLinks();this.classes.forEach(i=>{o?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),o&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==o&&(this._isActive=o,this.cdr.markForCheck(),this.isActiveChange.emit(o))})}isLinkActive(o){let i=HAt(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let a=s.urlTree;return a?o.isActive(a,i):!1}}hasActiveLinks(){let o=this.isLinkActive(this.router);return this.link&&o(this.link)||this.links.some(o)}};r.\u0275fac=function(i){return new(i||r)(vr(Eg),vr(No),vr(vne),vr(ld),vr(a8,8))},r.\u0275dir=Va({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,a){if(i&1&&A1(a,a8,5),i&2){let l;Zs(l=Qs())&&(s.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[T1]});let t=r;return t})();function HAt(t){return!!t.paths}var l8=class{};var YAt=(()=>{let r=class r{constructor(o,i,s,a,l){this.router=o,this.injector=s,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ds(o=>o instanceof Ch),S1(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,i){let s=[];for(let a of i){a.providers&&!a._injector&&(a._injector=wne(a.providers,o,`Route: ${a.path}`));let l=a._injector??o,u=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&s.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&s.push(this.processRoutes(u,a.children??a._loadedRoutes))}return Xu(s).pipe(AR())}preloadConfig(o,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(o,i):s=kr(null);let a=s.pipe(Jf(l=>l===null?kr(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??o,l.routes))));if(i.loadComponent&&!i._loadedComponent){let l=this.loader.loadComponent(i);return Xu([a,l]).pipe(AR())}else return a})}};r.\u0275fac=function(i){return new(i||r)(Et(Eg),Et($z),Et(Sb),Et(l8),Et(_oe))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),RIe=new En(""),XAt=(()=>{let r=class r{constructor(o,i,s,a,l={}){this.urlSerializer=o,this.transitions=i,this.viewportScroller=s,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=Zt(Sb),l.scrollPositionRestoration||="disabled",l.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof Kk?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof Ch?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof D1&&o.code===Qz.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof e8&&(o.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(o.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,i){this.zone.runOutsideAngular(()=>je(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),_h(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new e8(o,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};r.\u0275fac=function(i){Lk()},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})();function PIe(t,...r){return MR([{provide:r3,multi:!0,useValue:t},[],{provide:N1,useFactory:LIe,deps:[Eg]},{provide:Ene,multi:!0,useFactory:jIe},r.map(n=>n.\u0275providers)])}function LIe(t){return t.routerState.root}function c3(t,r){return{\u0275kind:t,\u0275providers:r}}function jIe(){let t=Zt(Vc);return r=>{let n=t.get(Bk);if(r!==n.components[0])return;let o=t.get(Eg),i=t.get(BIe);t.get(Eoe)===1&&o.initialNavigation(),t.get($Ie,null,bne.Optional)?.setUpPreloading(),t.get(RIe,null,bne.Optional)?.init(),o.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BIe=new En("",{factory:()=>new Xn}),Eoe=new En("",{providedIn:"root",factory:()=>1});function KAt(){return c3(2,[{provide:Eoe,useValue:0},{provide:Cne,multi:!0,deps:[Vc],useFactory:r=>{let n=r.get(Ske,Promise.resolve());return()=>n.then(()=>new Promise(o=>{let i=r.get(Eg),s=r.get(BIe);FIe(i,()=>{o(!0)}),r.get(Coe).afterPreactivation=()=>(o(!0),s.closed?kr(void 0):s),i.initialNavigation()}))}}])}function ZAt(){return c3(3,[{provide:Cne,multi:!0,useFactory:()=>{let r=Zt(Eg);return()=>{r.setUpLocationChangeListener()}}},{provide:Eoe,useValue:2}])}var $Ie=new En("");function QAt(t){return c3(0,[{provide:$Ie,useExisting:YAt},{provide:l8,useExisting:t}])}function JAt(){return c3(8,[Qke,{provide:u8,useExisting:Qke}])}function ekt(t){let r=[{provide:DIe,useValue:RAt},{provide:NIe,useValue:Gt({skipNextTransition:!!t?.skipInitialTransition},t)}];return c3(9,r)}var rIe=new En("ROUTER_FORROOT_GUARD"),tkt=[hS,{provide:i3,useClass:Xk},Eg,s3,{provide:N1,useFactory:LIe,deps:[Eg]},_oe,[]],zIe=(()=>{let r=class r{constructor(o){}static forRoot(o,i){return{ngModule:r,providers:[tkt,[],{provide:r3,multi:!0,useValue:o},{provide:rIe,useFactory:ikt,deps:[[Eg,new Fz,new xne]]},{provide:u3,useValue:i||{}},i?.useHash?nkt():okt(),rkt(),i?.preloadingStrategy?QAt(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?skt(i):[],i?.bindToComponentInputs?JAt().\u0275providers:[],i?.enableViewTransitions?ekt().\u0275providers:[],akt()]}}static forChild(o){return{ngModule:r,providers:[{provide:r3,multi:!0,useValue:o}]}}};r.\u0275fac=function(i){return new(i||r)(Et(rIe,8))},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})();function rkt(){return{provide:RIe,useFactory:()=>{let t=Zt(Dke),r=Zt(Cn),n=Zt(u3),o=Zt(Coe),i=Zt(i3);return n.scrollOffset&&t.setOffset(n.scrollOffset),new XAt(i,o,t,r,n)}}}function nkt(){return{provide:PR,useClass:Eke}}function okt(){return{provide:PR,useClass:Cke}}function ikt(t){return"guarded"}function skt(t){return[t.initialNavigation==="disabled"?ZAt().\u0275providers:[],t.initialNavigation==="enabledBlocking"?KAt().\u0275providers:[]]}var nIe=new En("");function akt(){return[{provide:nIe,useFactory:jIe},{provide:Ene,multi:!0,useExisting:nIe}]}re();Ee();pn();fr();tD();var I7={kernelName:Ab,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,hp(rt(n,"float32"),-1))}}};Ee();pn();Kn();oa();Vo();Lh();ys();io();var y3e={kernelName:Ig,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=qr(rt(n,"float32")),i=Zn(wt(Ot(1),o));return Zr(Tt(t,i))}}}};Ee();pn();Kn();Lh();ys();io();var b3e={kernelName:Dg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Zn(wt(qr(rt(n,"float32")),1));return Tt(t,o)}}}};Ee();ko();Yt();Di();var x3e={kernelName:lp,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=t,u=oo(n.shape,i);return u.length>0&&(l=It(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=oo(o.shape,i);return u.length>0&&(l=It(l,u)),Se(l,o.shape)}}}};Ee();var v3e={kernelName:kb,saveAllInputs:!0,gradFunc:(t,r)=>{let n={};return r.forEach((o,i)=>{n[i]=()=>t.clone()}),n}};Ee();Uo();var w3e={kernelName:Ib,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>ar(n)}}};Ee();Uo();var _3e={kernelName:Db,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>ar(n)}}};Ee();pn();Kn();Vo();Lh();ys();io();var S3e={kernelName:Ng,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Zn(wt(Ot(1),qr(rt(n,"float32")))))}}};Ee();zo();pn();Kn();Vo();Lh();ys();var C3e={kernelName:Mg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Zn(Ke(Ot(1),qr(rt(n,"float32"))));return Tt(t,o)}}}};Ee();zo();ko();Kn();fr();oa();Yt();ys();Di();var E3e={kernelName:Rg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Ke(qr(n),qr(o)),u=we(t,Tt(o,l)),c=oo(n.shape,i);return c.length>0&&(u=It(u,c)),Se(u,n.shape)},b:()=>{let l=Ke(qr(n),qr(o)),u=Zr(we(t,Tt(n,l))),c=oo(o.shape,i);return c.length>0&&(u=It(u,c)),Se(u,o.shape)}}}};Ee();zo();pn();Kn();ys();var T3e={kernelName:Fg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Ke(qr(rt(n,"float32")),1))}}};Ee();pn();Kn();ys();io();Vo();var A3e={kernelName:Og,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,wt(Ot(1),qr(rt(n,"float32"))))}}};Ee();ze();Ee();Le();Ze();Fs();Ne();Yt();function x3t(t,r,n,o,i,s){let a=J(t,"dy","avgPool3dGrad"),l=J(r,"input","avgPool3dGrad"),u=a,c=l,f=!1;l.rank===4&&(f=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),pe(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),pe(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),go("avgPool3dGrad",i,s);let d={dy:u,input:c},p={filterSize:n,strides:o,pad:i,dimRoundingMode:s},h=ue.runKernel(ES,d,p);return f?Se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var k3e=se({avgPool3dGrad_:x3t});var I3e={kernelName:Mb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>k3e(t,o,i,s,a,l)}}};Ee();ze();Ee();Le();Ze();Ne();Yt();function v3t(t,r,n,o,i){let s=J(t,"dy","avgPoolGrad"),a=J(r,"input","avgPoolGrad");pe(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let l=a,u=s,c=!1;a.rank===3&&(c=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),pe(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),pe(l.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${l.rank}.`);let f={dy:u,input:l},d={filterSize:n,strides:o,pad:i},p=ue.runKernel(CS,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var D3e=se({avgPoolGrad_:v3t});var N3e={kernelName:Nb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a}=n;return{x:()=>D3e(t,o,i,s,a)}}};Ee();Oh();var M3e={kernelName:Fb,inputsToSave:["a","b"],gradFunc:(t,r,n)=>{let[o,i]=r,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>Vr(t,i,!1,!0),b:()=>Vr(o,t,!0,!1)}:!s&&a?{a:()=>Vr(t,i,!1,!1),b:()=>Vr(t,o,!0,!1)}:s&&!a?{a:()=>Vr(i,t,!1,!0),b:()=>Vr(o,t,!1,!1)}:{a:()=>Vr(i,t,!0,!0),b:()=>Vr(t,o,!0,!0)}}};Ee();U3();var F3e={kernelName:Ob,gradFunc:(t,r,n)=>{let{blockShape:o,crops:i}=n;return{x:()=>mw(t,o,i)}}};Ee();Di();var O3e={kernelName:Roe,gradFunc:(t,r,n)=>{let o=n,i=o.inputShape,s=o.shape,a=Array.from(s);for(let u=i.length-1;u>=0;u--)if(i[u]===s[u])a[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);let l=[];for(let u=0;u<a.length;u++)a[u]>1&&l.push(u);return{x:()=>It(t,l,!0)}}};Ee();var R3e={kernelName:Th,gradFunc:t=>({x:()=>t.clone()})};Ee();Uo();var P3e={kernelName:Pg,gradFunc:t=>({x:()=>ar(t)})};Ee();VC();uw();GC();gd();Uo();var L3e={kernelName:Lg,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>yo(Ya(fu(o,i),Xc(o,s)),t,ar(t))}}};Ee();var j3e={kernelName:Rb,inputsToSave:["x"],gradFunc:I7.gradFunc};Ee();ZC();Ze();var B3e={kernelName:Pb,saveAllInputs:!0,gradFunc:(t,r,n)=>{let o=r.map(u=>u.shape),{axis:i}=n,s=gs(i,r[0].shape)[0],a=o.map(u=>u[s]);return xs(t,a,s).map(u=>()=>u)}};Ee();i7();J8();Fs();Ze();var $3e={kernelName:Lb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{dilations:s,strides:a,pad:l,dataFormat:u}=n;return pe(pd(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>NI(o.shape,t,i,a,l,u),filter:()=>sD(o,t,i.shape,a,l,u)}}};Ee();$C();i7();var z3e={kernelName:jb,inputsToSave:["dy","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u}=n;return{dy:()=>nc(t,i,s,a,l,1,u),filter:()=>sD(t,o,i.shape,s,a,l,u)}}};Ee();ze();Ee();Ze();Ne();Yt();function w3t(t,r,n,o,i){let s=t;t.rank===4&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=r;a.rank===4&&(a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),pe(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),pe(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),pe(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),pe(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),pe(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);let l={x:s,dy:a},u={strides:o,pad:i,filterShape:n};return ue.runKernel(DS,l,u)}var U3e=se({conv3DBackpropFilter_:w3t});Iie();Fs();Ze();var V3e={kernelName:Bb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s}=n;pe(pd(o),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let[a,l]=r;return{x:()=>tU(a.shape,t,l,i,s),filter:()=>U3e(a,t,l.shape,i,s)}}};Ee();pn();fr();oa();fse();var G3e={kernelName:jg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(Zr(XI(rt(n,"float32"))),t)}}};Ee();pn();fr();dse();var W3e={kernelName:Bg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(KI(rt(n,"float32")),t)}}};Ee();Ph();iU();Ox();var q3e={kernelName:$b,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{let l=jie([i],o.rank),u=OI(t,i,s,!a);return l!=null&&(u=Gr(u,l)),u}}}};Ee();Fs();_se();Sse();Ze();var H3e={kernelName:zb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s,dimRoundingMode:a}=n,l=o??[1,1];pe(pd(l),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${l}'`);let[u,c]=r;return pe(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),pe(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),pe(u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),pe(Ca(i,l),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${l}'.`),go("depthwiseConv2d",s,a),{x:()=>a7(u.shape,t,c,i,s,l,a),filter:()=>s7(u,t,c.shape,i,s,l,a)}}};ze();Ee();var Y3e={kernelName:Ub,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,s={x:o,filter:i,dy:t},a={x:o,filter:i,dy:t};return{x:()=>ue.runKernel(iI,s,n),filter:()=>ue.runKernel(sI,a,n)}}};ze();Ee();var X3e={kernelName:zg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r,o={dy:t,y:n};return{x:()=>ue.runKernel($S,o)}}};Ee();I0();fr();oa();ys();var K3e={kernelName:Ug,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(_i(Zr(qr(n))),2/Math.sqrt(Math.PI));return{x:()=>we(t,o)}}};Ee();fr();var Z3e={kernelName:Vg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,n)}}};Ee();Yt();var Q3e={kernelName:Vb,inputsToSave:["input"],gradFunc:(t,r)=>{let[n]=r;return{input:()=>Se(t,n.shape)}}};Ee();I0();fr();var J3e={kernelName:Gg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,_i(n))}}};Ee();Uo();var ePe={kernelName:Wg,gradFunc:t=>({x:()=>ar(t)})};Ee();ko();pn();Kn();fr();oa();Yt();ys();Di();var tPe={kernelName:qg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Tt(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);u.length>0&&(l=Se(It(l,u),o.shape));let c=qr(o);return Zr(Tt(l,rt(c,"float32")))}}}};Ee();zo();ko();fr();Yt();lse();Vo();io();Di();jI();var rPe={kernelName:Gb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,r,n)=>{let{varianceEpsilon:o}=n,[i,s,a,l]=r,u=l??Ot(1),c=oo(s.shape,i.shape),f=[];if(s.rank===1){for(let w=0;w<i.shape.length-1;++w)f.push(i.shape[w]);f.push(1)}let d=wt(i,s),p=we(t,u),h=qI(Ke(a,Ot(o))),m=we(we(we(h,h),h),Ot(-.5));return{x:()=>s.rank===1?Se(we(we(t,Ea(Se(h,[1,1,1,s.shape[0]]),f)),u),i.shape):Se(we(we(t,h),u),i.shape),mean:()=>{let w=we(we(h,Ot(-1)),p);return s.rank===1&&(w=It(w,c)),Se(w,s.shape)},variance:()=>{let w=we(we(m,d),p);return s.rank===1&&(w=It(w,c)),Se(w,s.shape)},scale:()=>{let w=we(d,h),_=we(t,w);return s.rank===1&&(_=It(_,c)),Se(_,s.shape)},offset:()=>{let w=t;return s.rank===1&&(w=It(w,c)),Se(w,s.shape)}}}};Ee();Ph();Yt();vw();Ox();t7();Ze();var iPe={kernelName:Wb,inputsToSave:["x","indices"],gradFunc:(t,r,n)=>{let[o,i]=r,{axis:s,batchDims:a}=n,l=gs(s,o.shape)[0],u=(c,f,d)=>()=>{let p=c.shape,h=f.size,m=p.slice(0,l),g=m.length,y=p.slice(s,p.length).slice(1),b=y.length,x=nPe(0,g),v=nPe(g+1,g+1+b),w=oPe([m,[h],y]),_=Se(d,w),S=Se(f,[h]),C=oPe([[g],x,v]),E=Gr(_,C),T=oD(E,S,c.shape[l]),I=N3(C);return T=Gr(T,I),T};if(a===1){let c=o.shape[0],f=o.split(c,0);return{x:()=>as(f.map((h,m)=>u(h,i.slice(m,1),t.slice(m,1))())).reshape(o.shape),indices:()=>i}}else return{x:u(o,i,t),indices:()=>i}}};function nPe(t,r){let n=[];for(let o=t;o<r;++o)n.push(o);return n}function oPe(t){let r=[];for(let n=0;n<t.length;++n)for(let o=0;o<t[n].length;++o)r.push(t[n][o]);return r}Ee();Uo();var sPe={kernelName:Hg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>ar(n),b:()=>ar(o)}}};Ee();pn();var aPe={kernelName:Ah,gradFunc:t=>({x:()=>rt(t,"float32")})};Ee();Uo();var lPe={kernelName:Yg,gradFunc:t=>({x:()=>ar(t)})};Ee();Uo();var uPe={kernelName:Xg,gradFunc:t=>({x:()=>ar(t)})};Ee();Uo();var cPe={kernelName:Kg,gradFunc:t=>({x:()=>ar(t)})};Ee();M0();fr();gd();var fPe={kernelName:qb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{alpha:i}=n,s=si(o,0);return{x:()=>yo(s,t,we(t,i))}}};Ee();zo();Kn();var dPe={kernelName:Qg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Ke(n,1))}}};Ee();pn();Kn();var pPe={kernelName:Zg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,rt(n,"float32"))}}};Ee();I0();fr();io();Di();var hPe={kernelName:Poe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n;return{logits:()=>{let a=_i(o);return wt(t,we(It(t,i,!0),a))}}}};Ee();ze();Ee();Ne();function _3t(t,r,n,o=5,i=1,s=1,a=.5){let l={x:t,y:r,dy:n},u={depthRadius:o,bias:i,alpha:s,beta:a};return ue.runKernel(YS,l,u)}var mPe=se({localResponseNormalizationBackprop_:_3t});var gPe={kernelName:Hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{depthRadius:s,bias:a,alpha:l,beta:u}=n;return{x:()=>mPe(o,i,t,s,a,l,u)}}};Ee();Ze();Ph();pn();D3();fr();Yt();function D7(t,r,n,o){return r.rank<n.rank&&(r=Se(r,pp(r.shape,o))),t.rank<n.rank&&(t=Se(t,pp(t.shape,o))),{x:()=>we(t,rt(Dl(n,r),t.dtype))}}var eae={kernelName:Yb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{reductionIndices:i}=o,s=r[0],a=r[1],l=gs(i,s.shape),u=D7(t,a,s,l);return{x:()=>u.x()}}};Ee();pn();VC();R3();fr();var yPe={kernelName:Jg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(fu(n,o),"float32")),b:()=>we(t,rt(kx(n,o),"float32"))}}};Ee();ze();Ee();Le();Ze();Fs();Ne();Yt();function S3t(t,r,n,o,i,s,a){let l=J(t,"dy","maxPool3dGrad"),u=J(r,"input","maxPool3dGrad"),c=J(n,"output","maxPool3dGrad"),f=l,d=u,p=c,h=!1;u.rank===4&&(h=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=Se(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),pe(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),pe(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),pe(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),go("maxPool3dGrad",s,a);let m={dy:f,input:d,output:p},g={filterSize:o,strides:i,pad:s,dimRoundingMode:a},y=ue.runKernel(KS,m,g);return h?Se(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var bPe=se({maxPool3dGrad_:S3t});var xPe={kernelName:Kb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=n;return{x:()=>bPe(t,o,i,s,a,l,u)}}};Ee();ze();Ee();Le();Ze();Fs();Ne();function C3t(t,r,n,o,i,s,a){let l=J(t,"dy","maxPoolGrad"),u=J(r,"input","maxPoolGrad"),c=J(n,"output","maxPoolGrad");pe(u.rank===l.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${l.rank})`),pe(l.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),pe(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),go("maxPoolGrad",s,a);let f={dy:l,input:u,output:c},d={filterSize:o,strides:i,pad:s,dimRoundingMode:a};return ue.runKernel(XS,f,d)}var vPe=se({maxPoolGrad_:C3t});var wPe={kernelName:Xb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l}=n;return{x:()=>vPe(t,o,i,s,a,l)}}};Ee();Ph();Kn();fr();WC();Yt();Ze();var _Pe={kernelName:Zb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=gs(i,o.shape),l=Lie(o.shape,s)[1],u=on(l);return{x:()=>{let f=o.shape.slice();s.forEach(h=>{f[h]=1});let d=Se(t,f);return Tt(we(d,Hi(o.shape,"float32")),u)}}}};Ee();Ze();var SPe={kernelName:Qb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{axis:i}=o,[s,a]=r,l=gs(i,s.shape),u=D7(t,a,s,l);return{x:()=>u.x()}}};Ee();pn();M0();uw();fr();var CPe={kernelName:e0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(Xc(n,o),"float32")),b:()=>we(t,rt(si(n,o),"float32"))}}};Ee();rc();var EPe={kernelName:Jb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>zr(t,s,o.shape)}}};Ee();ko();Kn();hU();fr();oa();Yt();Di();var TPe={kernelName:t0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=oo(n.shape,i);return l.length>0?Se(It(t,l),n.shape):t},b:()=>{let l=we(t,Zr(D0(Tt(n,o)))),u=oo(o.shape,i);return u.length>0?Se(It(l,u),o.shape):l}}}};Ee();ko();pn();fr();Yt();Di();var APe={kernelName:r0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=we(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);return u.length>0?Se(It(l,u),o.shape):l}}}};Ee();oa();var kPe={kernelName:ex,gradFunc:t=>({x:()=>Zr(t)})};Ee();UI();var IPe={kernelName:rx,inputsToSave:["indices"],gradFunc:(t,r)=>{let n=r[0];return{indices:()=>xo(n.shape,"float32")}}};Ee();Uo();var DPe={kernelName:tx,gradFunc:t=>({x:()=>ar(t)})};Ee();iD();var NPe={kernelName:nx,saveAllInputs:!0,gradFunc:(t,r,n)=>{let{axis:o}=n;return Xa(t,o).map(s=>()=>s)}};Ee();rc();var tae={kernelName:ox,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>zr(t,s,o.shape)}}};Ee();ko();pn();M0();BI();fr();sw();Yt();Vo();io();Di();gd();Uo();var MPe={kernelName:n0,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,r)=>{let[n,o,i]=r,s=n,a=o,l=jr(s.shape,a.shape);return{a:()=>{let f=rt(a,"float32"),d=we(t,we(f,Ha(s,wt(f,Ot(1))))),p=oo(s.shape,l);return p.length>0&&(d=It(d,p)),Se(d,s.shape)},b:()=>{let f=si(s,0),d=yo(f,na(s),ar(s)),p=we(t,we(i,d)),h=oo(a.shape,l);return h.length>0&&(p=It(p,h)),Se(p,a.shape)}}}};Ee();ko();M0();fr();Yt();Di();gd();Uo();var FPe={kernelName:ix,inputsToSave:["x","alpha"],gradFunc:(t,r)=>{let[n,o]=r,i=si(n,0);return{x:()=>yo(i,t,we(t,o)),alpha:()=>{let s=yo(i,ar(t),we(t,n)),a=oo(o.shape,t.shape);return a.length>0&&(s=It(s,a)),Se(s,o.shape)}}}};Jse();Ee();oU();fr();Yt();Ox();function E3t(t,r,n){let o=t.shape.slice();o[n]=1;let i=Se(r,o),s=zC(t,n,!0,!1),a=zC(t,n,!0,!0),l=we(s,a);return we(i,l)}function T3t(t,r,n){let o=t.shape.length,i=o-n.length,s=ce.getAxesPermutation(n,o),a=t;s!=null&&(a=Gr(t,s));let l=a.shape.slice(),c=l.splice(o-n.length,n.length).reduce((p,h)=>p*h,1);l.push(c);let f=a.reshape(l),d=E3t(f,r,i);if(d=d.reshape(a.shape),s!=null){let p=ce.getUndoAxesPermutation(s);d=Gr(d,p)}return d}var OPe={kernelName:sx,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=[];return i==null?s=o.shape.map((a,l)=>l):typeof i=="number"?s=[i]:s=i,{x:()=>T3t(o,t,s)}}};Ee();ko();pn();Kn();fr();oa();Yt();ys();Di();var RPe={kernelName:$g,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Tt(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);u.length>0&&(l=Se(It(l,u),o.shape));let c=qr(o);return Zr(Tt(l,rt(c,"float32")))}}}};Ee();Kn();oa();ys();var PPe={kernelName:o0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,Zr(qr(n)))}}};Ee();pn();uw();fr();tD();var LPe={kernelName:s0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(Xc(n,6),hp(n));return{x:()=>we(t,rt(o,"float32"))}}};Ee();pn();fr();tD();var jPe={kernelName:i0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,rt(hp(n),"float32"))}}};Ee();Yt();var BPe={kernelName:ax,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Se(t,n.shape)}}};ze();Ee();var $Pe={kernelName:ux,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(lC,i,n)}}};ze();Ee();var zPe={kernelName:lx,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(aC,i,n)}}};Ee();Nx();Ze();var UPe={kernelName:cx,gradFunc:(t,r,n)=>{let{dims:o}=n,i=gs(o,t.shape);return{x:()=>bs(t,i)}}};Ee();Uo();var VPe={kernelName:a0,gradFunc:t=>({x:()=>ar(t)})};Ee();Kn();fr();oa();sw();var GPe={kernelName:l0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Zr(Tt(t,we(Ha(n,1.5),2)))}}};Ee();pn();L3();fr();Uo();var WPe={kernelName:fx,inputsToSave:["condition"],gradFunc:(t,r)=>{let[n]=r;return{condition:()=>rt(ar(n),"float32"),t:()=>we(t,rt(n,t.dtype)),e:()=>we(t,rt(dw(n),t.dtype))}}};Ee();pn();I0();M0();fr();Vo();Kse();gd();var qPe={kernelName:u0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=si(n,Ot(0)),i=Ot(Yse),s=Ot(Xse),a=we(t,s),l=we(we(t,i),_i(rt(n,"float32")));return yo(o,a,l)}}}};Ee();fr();Vo();io();var HPe={kernelName:p0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(n,wt(Ot(1),n)))}}};Ee();Uo();var YPe={kernelName:d0,gradFunc:t=>({x:()=>ar(t)})};Ee();pn();nU();fr();var XPe={kernelName:c0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(ow(rt(n,"float32")),t)}}};Ee();pn();Die();fr();var KPe={kernelName:f0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(FI(rt(n,"float32")),t)}}};Ee();hw();A7();var ZPe={kernelName:dx,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{begin:i,size:s}=n,a=o.shape,[l,u]=Gse(o,i,s),c=[];for(let f=0;f<t.rank;f++)c.push([l[f],a[f]-l[f]-u[f]]);return{x:()=>du(t,c)}}};Ee();fr();io();Di();var QPe={kernelName:gx,outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{dim:i}=n,s=!0,a=we(t,o);return{logits:()=>wt(a,we(It(a,[i],s),o))}}};Ee();fr();AI();var JPe={kernelName:h0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,Il(n))}}};Ee();A3();var rae={kernelName:hx,gradFunc:(t,r,n)=>{let{blockShape:o,paddings:i}=n;return{x:()=>nw(t,o,i)}}};Ee();md();var nae={kernelName:mx,gradFunc:(t,r,n)=>{let{axis:o}=n;return{x:()=>On(t,o)}}};Ee();pn();Kn();fr();Lh();var eLe={kernelName:m0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,we(Zn(rt(n,"float32")),2))}}};Ee();pn();fr();var tLe={kernelName:yC,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(rt(n,"float32"),2))}}};Ee();fr();Vo();io();var rLe={kernelName:g0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Ot(2);return{a:()=>we(t,we(i,wt(n,o))),b:()=>we(t,we(i,wt(o,n)))}}};Ee();Uo();var nLe={kernelName:v0,gradFunc:t=>({x:()=>ar(t)})};Ee();ko();oa();Yt();Di();var oLe={kernelName:y0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=t,u=oo(n.shape,i);return u.length>0&&(l=It(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=oo(o.shape,i);return u.length>0&&(l=It(l,u)),Se(Zr(l),o.shape)}}}};Ee();fr();WC();Yt();Ze();var iLe={kernelName:px,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,i=o.shape.slice(),{axis:s}=n;gs(s,o.shape).forEach(c=>{i[c]=1});let l=Se(t,i),u=we(l,Hi(o.shape,"float32"));return{x:()=>u}}};Ee();nU();Kn();ys();var sLe={kernelName:b0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Tt(t,qr(ow(n)))}}};Ee();fr();Vo();ys();io();var aLe={kernelName:x0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(wt(Ot(1),qr(n)),t)}}};Ee();zo();rc();Uo();var lLe={kernelName:kh,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{reps:i}=n;return{x:()=>{let a=ar(o);if(o.rank===1)for(let l=0;l<i[0];++l)a=Ke(a,zr(t,[l*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)a=Ke(a,zr(t,[l*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)a=Ke(a,zr(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else if(o.rank===4)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)for(let f=0;f<i[3];++f)a=Ke(a,zr(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2],f*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${o.rank} tensors yet.`);return a}}}};Ee();Ph();Ox();var uLe={kernelName:Ih,gradFunc:(t,r,n)=>{let o=n,{perm:i}=o,s=N3(i);return{x:()=>Gr(t,s)}}};Ee();vw();var cLe={kernelName:yx,gradFunc:(t,r,n)=>{let o=n,{axis:i}=o;return{value:()=>as(t,i)}}};Ee();LI();F3();VC();GC();B3();WC();Vo();gd();Uo();var fLe={kernelName:bx,inputsToSave:["segmentIds"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>A3t(t,n)}}};function A3t(t,r){let n=ic(r,ar(r)),o=N0(t,n),i=fu(r,Ot(0,"int32")),s=o.rank-i.rank;for(let l=0;l<s;++l)i=Ni(i,l+1);i=Ya(i,Hi(o.shape,"bool"));let a=ar(o);return yo(i,o,a)}Ee();Uo();var dLe={kernelName:xx,gradFunc:t=>({x:()=>ar(t)})};m3();var k3t=[I7,y3e,b3e,x3e,v3e,w3e,_3e,S3e,C3e,E3e,T3e,A3e,I3e,N3e,M3e,F3e,O3e,R3e,P3e,L3e,j3e,B3e,z3e,$3e,V3e,G3e,W3e,q3e,H3e,Y3e,RPe,X3e,K3e,Z3e,Q3e,J3e,tPe,ePe,rPe,iPe,sPe,aPe,lPe,uPe,cPe,fPe,dPe,pPe,hPe,gPe,eae,eae,yPe,xPe,wPe,_Pe,SPe,CPe,EPe,TPe,APe,kPe,IPe,DPe,NPe,tae,tae,MPe,FPe,OPe,PPe,LPe,jPe,BPe,$Pe,zPe,UPe,VPe,GPe,WPe,qPe,HPe,YPe,XPe,KPe,ZPe,QPe,JPe,rae,rae,nae,nae,eLe,rLe,tLe,nLe,oLe,iLe,sLe,aLe,lLe,uLe,cLe,fLe,dLe];for(let t of k3t)Loe(t);oae();re();re();re();var xd=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},pu=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},Ie=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},wr=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},N7=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}};var rP=class{constructor(r){this.maxEntries=r||100,this.cache=new Map}get(r){let n;return this.cache.has(r)&&(n=this.cache.get(r),this.cache.delete(r),this.cache.set(r,n)),n}put(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxEntries){let o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(r,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(r){if(r<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${r}.`);if(this.maxEntries>r)for(let n=0;n<this.maxEntries-r;n++){let o=this.cache.keys().next().value;this.cache.delete(o)}this.maxEntries=r}};re();function yp(t,r){if(Array.isArray(t)){let n=[];for(let o=0;o<r;o++)n=n.concat(t);return n}else{let n=new Array(r);return n.fill(t),n}}function vd(t,r){if(!t)throw new N7(r)}function sae(t,r){let n=0;for(let o of t)o===r&&n++;return n}function ia(t){return t.length===1?t[0]:t}function Rn(t){return Array.isArray(t)?t:[t]}function bp(t){let n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Px(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(r,n)=>n.toUpperCase())}var gp={};function cD(t){if(t==null)return null;let r={};return r.className=t.getClassName(),r.config=t.getConfig(),r}function iae(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(r=>iae(r));else{let r=Object.keys(t);for(let n of r){let o=t[n];o!=null&&typeof o=="object"&&(!Array.isArray(o)&&o.type==="ndarray"&&typeof o.value=="number"?t[n]=o.value:iae(o))}}}function L0(t,r={},n={},o="object",i=!1){if(typeof t=="string"){let s=t,a;if(s in n)a=n[s];else if(s in gp)a=gp[s];else if(a=r[s],a==null)throw new Ie(`Unknown ${o}: ${t}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{let s=t;if(s.className==null||s.config==null)throw new Ie(`${o}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);let a=s.className,l,u;if(a in n?[l,u]=n[a]:a in gp?[l,u]=gp.className:a in r&&([l,u]=r[a]),l==null)throw new Ie(`Unknown ${o}: ${a}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){let c={};for(let h of Object.keys(gp))c[h]=gp[h];for(let h of Object.keys(n))c[h]=n[h];let f=s.config;f.customObjects=c;let d=Object.assign({},gp);for(let h of Object.keys(n))gp[h]=n[h];iae(s.config);let p=u(l,s.config,n,i);return gp=Object.assign({},d),p}else{let c=Object.assign({},gp);for(let d of Object.keys(n))gp[d]=n[d];let f=new l(s.config);return gp=Object.assign({},c),f}}}function D3t(t,r){return t<r?-1:t>r?1:0}function nP(t,r){return-1*D3t(t,r)}function xp(t){if(t==null)return t;let r=[];for(let n of t)r.indexOf(n)===-1&&r.push(n);return r}function U4e(t){if(t==null)throw new Ie(`Invalid value in obj: ${JSON.stringify(t)}`);for(let r in t)if(t.hasOwnProperty(r))return!1;return!0}function j0(t,r,n){if(n!=null&&t.indexOf(n)<0)throw new Ie(`${n} is not a valid ${r}.  Valid values are ${t} or null/undefined.`)}function M7(t,r,n=0,o=1/0){return vd(n>=0),vd(o>=n),Array.isArray(t)&&t.length>=n&&t.length<=o&&t.every(i=>typeof i===r)}function Fi(t,r){Array.isArray(t)?(Y.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((n,o)=>Fi(n,`element ${o+1} of ${r}`))):Y.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got ${V4e(t)}.`)}function V4e(t){return t===null?"null":Array.isArray(t)?"["+t.map(r=>V4e(r)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function G4e(t,r,n){let o=n!=null?n():Y.now(),i;return(...a)=>{let l=n!=null?n():Y.now();return l-o<r||(o=l,i=t(...a)),i}}function F7(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}re();var N3t=0;function R7(){return N3t++}var O7={};function Dw(t=""){return t in O7||(O7[t]=0),O7[t]+=1,t+O7[t].toString()}re();var W4e=["channelsFirst","channelsLast"],q4e=["nearest","bilinear"],H4e=["valid","same","causal"],Y4e=["max","avg"],X4e=["sum","mul","concat","ave"];var fD=new Map;function Go(t){j0(W4e,"DataFormat",t)}function Z4e(t){j0(q4e,"InterpolationFormat",t)}function hu(t){j0(H4e,"PaddingMode",t)}function aae(t){j0(Y4e,"PoolMode",t)}var oP=[],K4e="/";function Uh(t,r){oP.push(t);try{let n=r();return oP.pop(),n}catch(n){throw oP.pop(),n}}function M3t(){return oP.length===0?"":oP.join(K4e)+K4e}function P7(t){if(!Q4e(t))throw new Error("Not a valid tensor name: '"+t+"'");return M3t()+t}function L7(t){if(!Q4e(t))throw new Error("Not a valid tensor name: '"+t+"'");fD.has(t)||fD.set(t,0);let r=fD.get(t);if(fD.set(t,fD.get(t)+1),r>0){let n=`${t}_${r}`;return fD.set(n,1),n}else return t}var F3t=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Q4e(t){return!!t.match(F3t)}re();re();re();function J4e(t){return t===parseInt(t.toString(),10)}function vp(t,r,n){r==null&&(r=0),n==null&&(n=t.length);let o=1;for(let i=r;i<n;++i)o*=t[i];return o}function oE(t){if(t.length===0)return Number.NaN;let r=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o<r&&(r=o)}return r}function Vh(t){if(t.length===0)return Number.NaN;let r=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o>r&&(r=o)}return r}function mu(t,r){if(r<t)throw new Ie(`end (${r}) < begin (${t}) is forbidden.`);let n=[];for(let o=t;o<r;++o)n.push(o);return n}re();var lae;function ls(){return lae==null&&(lae=S3().epsilon()),lae}function gu(){return"channelsLast"}function Ml(t,r){return rt(t,r)}function jx(t,r=-1){let n=t.shape.slice();return r<0&&(r=n.length+r+1),n.splice(r,0,1),Se(t,n)}function e5e(t,r){return Pe(()=>{if(t.shape.length!==2)throw new Ie(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let n=jx(t,1);return B7(n,[1,r,1])})}function t5e(t){let r=[vp(t.shape)];return Se(t,r)}function r5e(t){if(t.rank<=1)throw new Ie(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let r=[t.shape[0],vp(t.shape,1)];return Se(t,r)}function Lx(t,r,n){return Pe(()=>{switch(t.rank){case 1:return ZI(t,r,n);case 2:return q3(t,[r,0],[n,t.shape[1]]);case 3:return QI(t,[r,0,0],[n,t.shape[1],t.shape[2]]);case 4:return KC(t,[r,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return zr(t,[r,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return zr(t,[r,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Ie(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function uae(t,r,n){return Pe(()=>{switch(t.rank){case 1:return ZI(t,r,n);case 2:return q3(t,[0,r],[t.shape[0],n]);case 3:return QI(t,[0,0,r],[t.shape[0],t.shape[1],n]);case 4:return KC(t,[0,0,0,r],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function iP(t,r,n,o){return Pe(()=>{switch(t.rank){case 1:return ZI(t,r,n);case 2:switch(o){case 1:return Lx(t,r,n);case 2:return uae(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 3:switch(o){case 1:return Lx(t,r,n);case 2:return QI(t,[0,r,0],[t.shape[0],n,t.shape[2]]);case 3:return uae(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 4:switch(o){case 1:return Lx(t,r,n);case 2:return KC(t,[0,r,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return KC(t,[0,0,r,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return uae(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function dD(t,r=-1){let n;return r<0&&(n=t[0].rank,n!==0?r=n:r=0),r===t[0].rank&&(r=-1),On(t,r)}function fae(t,r){switch(t.rank){case 1:return X8([t,r]);case 2:return K8([t,r],0);case 3:return Z8([t,r],0);case 4:return Q8([t,r],0);default:throw new Ie(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function B7(t,r){if(Array.isArray(r)||(r=[r]),t.rank!==r.length)throw new Ie(`The length of input n (${r.length}) does not match the number of dimensions in input x (${t.rank})`);return Ea(t,r)}function pD(t,r=0,n=1,o,i){return XC(t,r,n,o,i)}function wp(t,r,n,o){if(t.rank<2||r.rank<2)throw new wr(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${r.shape}`);if(r.rank>=3){let i=t.shape.slice(-1)[0],s=r.shape.slice(-2)[0];if(i!==s)throw new wr(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${r.shape}`)}if(t.rank===2&&r.rank===2)return _w.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?cae(t.rank,o,gu()):null,activation:n});{let i=t.shape.slice(),s=i.pop();t=Se(t,[-1,s]);let a=r.shape.slice(),l=a.pop(),u=a.pop(),c=[...a,l],f=Array.from({length:r.rank},(m,g)=>g===0?r.rank-2:g<=r.rank-2?g-1:g);r=Se(Gr(r,f),[u,-1]);let d=[...i,...c];return Se(_w.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?cae(t.rank,o,gu()):null,activation:n}),d)}}function $7(t,r,n){return Pe(()=>(Array.isArray(r)?r=ai(r,"int32"):r=rt(r,"int32"),N0(t,r,n)))}function iE(t){return we(t,t)}function cae(t,r,n){let o=r.shape;if(r.rank!==1&&r.rank!==t)throw new Ie(`Unexpected bias dimensions: ${r.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1,1]):Se(r,[1,o[3],o[0],o[1],o[2]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===4){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1]):Se(r,[1,o[2],o[0],o[1]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===3){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1]):Se(r,[1,o[1],o[0]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,o[0]]):Se(r,[1].concat(o))}else if(t<3)return r;throw new Ie(`Unsupported input rank by biasAdd: ${r.rank}`)}function yu(t,r,n){return Pe(()=>(n==null&&(n=gu()),Go(n),Ke(t,cae(t.rank,r,n))))}function n5e(t,r=1){if(r!==1)throw new wr(`Support for alpha values other than 1 (${r}) is not implemented yet.`);return k0(t)}function o5e(t){return Pe(()=>Tt(t,Ke(Ao(t),1)))}function z7(t,r,n,o){return Pe(()=>vse(t,r,n,o))}function i5e(t){return Pe(()=>{let r=Ke(.5,we(.2,t));return ta(r,0,1)})}function Nw(t,r,n=!1){return n?t():r()}var s5e=["fanIn","fanOut","fanAvg"],a5e=["normal","uniform","truncatedNormal"];function O3t(t){j0(s5e,"FanMode",t)}function R3t(t){j0(a5e,"Distribution",t)}var bu=class extends tt.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},c5e=(()=>{class t extends bu{apply(n,o){return xo(n,o)}}return t.className="Zeros",t})();tt.registerClass(c5e);var U7=(()=>{class t extends bu{apply(n,o){return Hi(n,o)}}return t.className="Ones",t})();tt.registerClass(U7);var f5e=(()=>{class t extends bu{constructor(n){if(super(),typeof n!="object")throw new Ie(`Expected argument of type ConstantConfig but got ${n}`);if(n.value===void 0)throw new Ie(`config must have value set but got ${n}`);this.value=n.value}apply(n,o){return Pe(()=>we(Ot(this.value),Hi(n,o)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();tt.registerClass(f5e);var d5e=(()=>{class t extends bu{constructor(n){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=n.minval||this.DEFAULT_MINVAL,this.maxval=n.maxval||this.DEFAULT_MAXVAL,this.seed=n.seed}apply(n,o){return Kc(n,this.minval,this.maxval,o,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();tt.registerClass(d5e);var p5e=(()=>{class t extends bu{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new wr(`randomNormal does not support dType ${o}.`);return pD(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();tt.registerClass(p5e);var h5e=(()=>{class t extends bu{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new wr(`truncatedNormal does not support dType ${o}.`);return nD(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();tt.registerClass(h5e);var m5e=(()=>{class t extends bu{constructor(n){super(),this.gain=n.gain!=null?n.gain:1}apply(n,o){return Pe(()=>{if(n.length!==2||n[0]!==n[1])throw new Ie("Identity matrix initializer can only be used for 2D square matrices.");return we(this.gain,UC(n[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();tt.registerClass(m5e);function P3t(t,r="channelsLast"){let n,o;if(Go(r),t.length===2)n=t[0],o=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(r==="channelsFirst"){let i=vp(t,2);n=t[1]*i,o=t[0]*i}else if(r==="channelsLast"){let i=vp(t,0,t.length-2);n=t[t.length-2]*i,o=t[t.length-1]*i}}else{let i=vp(t);n=Math.sqrt(i),o=Math.sqrt(i)}return[n,o]}var Jc=(()=>{class t extends bu{constructor(n){if(super(),n.scale<0)throw new Ie(`scale must be a positive float. Got: ${n.scale}`);this.scale=n.scale==null?1:n.scale,this.mode=n.mode==null?"fanIn":n.mode,O3t(this.mode),this.distribution=n.distribution==null?"normal":n.distribution,R3t(this.distribution),this.seed=n.seed}apply(n,o){let i=P3t(n),s=i[0],a=i[1],l=this.scale;if(this.mode==="fanIn"?l/=Math.max(1,s):this.mode==="fanOut"?l/=Math.max(1,a):l/=Math.max(1,(s+a)/2),this.distribution==="normal"){let u=Math.sqrt(l);if(o=o||"float32",o!=="float32"&&o!=="int32")throw new wr(`${this.getClassName()} does not support dType ${o}.`);return nD(n,0,u,o,this.seed)}else{let u=Math.sqrt(3*l);return Kc(n,-u,u,o,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();tt.registerClass(Jc);var dae=(()=>{class t extends Jc{constructor(n){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Jc.className}}return t.className="GlorotUniform",t})();tt.registerClass(dae);var pae=(()=>{class t extends Jc{constructor(n){super({scale:1,mode:"fanAvg",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Jc.className}}return t.className="GlorotNormal",t})();tt.registerClass(pae);var hae=(()=>{class t extends Jc{constructor(n){super({scale:2,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Jc.className}}return t.className="HeNormal",t})();tt.registerClass(hae);var mae=(()=>{class t extends Jc{constructor(n){super({scale:2,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Jc.className}}return t.className="HeUniform",t})();tt.registerClass(mae);var gae=(()=>{class t extends Jc{constructor(n){super({scale:1,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Jc.className}}return t.className="LeCunNormal",t})();tt.registerClass(gae);var yae=(()=>{class t extends Jc{constructor(n){super({scale:1,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Jc.className}}return t.className="LeCunUniform",t})();tt.registerClass(yae);var g5e=(()=>{class t extends bu{constructor(n){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=n.gain==null?this.DEFAULT_GAIN:n.gain,this.seed=n.seed}apply(n,o){return Pe(()=>{if(n.length<2)throw new wr("Shape must be at least 2D.");if(o!=="int32"&&o!=="float32"&&o!==void 0)throw new TypeError(`Unsupported data type ${o}.`);o=o;let i=Y.sizeFromShape(n.slice(0,-1)),s=n[n.length-1],a=i*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);let l=[Math.max(s,i),Math.min(s,i)],u=pD(l,0,1,o,this.seed),c=Ise.qr(u,!1),f=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(s,i)*Math.min(s,i)],[Math.min(s,i)+1]);return f=we(f,p.sign()),i<s&&(f=f.transpose()),we(Ot(this.gain),f.reshape(n))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();tt.registerClass(g5e);var l5e={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function u5e(t,r={}){return L0(t,tt.SerializationMap.getMap().classNameMap,r,"initializer")}function vo(t){return cD(t)}function Qn(t){if(typeof t=="string"){let r=t in l5e?l5e[t]:t;if(r==="GlorotNormal")return new pae;if(r==="GlorotUniform")return new dae;if(r==="HeNormal")return new hae;if(r==="HeUniform")return new mae;if(r==="LeCunNormal")return new gae;if(r==="LeCunUniform")return new yae;{let n={};return n.className=r,n.config={},u5e(n)}}else return t instanceof bu?t:u5e(t)}function V7(t){return Array.isArray(t)&&Array.isArray(t[0])}function hD(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function lr(t){let r;if(Array.isArray(t)){if(t.length!==1)throw new Ie(`Expected Tensor length to be 1; got ${t.length}`);r=t[0]}else r=t;return r}function Wr(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Ie(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function mD(t){let r=0;for(let n of t)n.shape.length===0?r+=1:r+=n.shape.reduce((o,i)=>o*i);return r}re();re();var b5e="Variable",sP=class{constructor(r,n="float32",o=b5e,i=!0,s=null){this.dtype=n??"float32",this.shape=r.shape,this.id=R7(),o=o??b5e,this.originalName=P7(o),this.name=L7(this.originalName),this.trainable_=i,this.constraint=s,this.val=r7(r,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(r){return this.assertNotDisposed(),j3t(this.val,r),this.val.id!==r.id&&(this.val.assign(r),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(r){this.trainable_=r,this.val.trainable=r}};function j3t(t,r){if(t.shape.toString()!==r.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(r.shape))}function aP(t){return t.map(r=>r.read())}function gD(t){t.forEach(r=>{r[0].write(r[1])})}var so=class{constructor(r){this.dtype=r.dtype,this.shape=r.shape,r.shape!=null?this.ndim=r.shape.length:this.ndim=r.ndim,this.maxNDim=r.maxNDim,this.minNDim=r.minNDim,this.axes=r.axes||{}}},Fl=class{constructor(r,n,o,i,s,a,l){this.dtype=r,this.shape=n,this.sourceLayer=o,this.inputs=i,this.callArgs=s,this.outputTensorIndex=l,this.id=R7(),a!=null&&(this.originalName=P7(a),this.name=L7(this.originalName)),this.rank=n.length}},B3t=0,Bx=class{constructor(r,n){this.callArgs=n,this.id=B3t++,this.outboundLayer=r.outboundLayer,this.inboundLayers=r.inboundLayers,this.nodeIndices=r.nodeIndices,this.tensorIndices=r.tensorIndices,this.inputTensors=r.inputTensors,this.outputTensors=r.outputTensors,this.inputMasks=r.inputMasks,this.outputMasks=r.outputMasks,this.inputShapes=r.inputShapes,this.outputShapes=r.outputShapes;for(let o of r.inboundLayers)o?.outboundNodes.push(this);r.outboundLayer.inboundNodes.push(this)}getConfig(){let r=[];for(let n of this.inboundLayers)n!=null?r.push(n.name):r.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:r,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},$3t=0,hr=class extends tt.Serializable{constructor(r={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=$3t++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=r.name;if(!n){let o=this.getClassName();n=bp(o)+"_"+Dw(o)}if(this.name=n,this.trainable_=r.trainable==null?!0:r.trainable,r.inputShape!=null||r.batchInputShape!=null){let o;if(r.batchInputShape!=null)o=r.batchInputShape;else if(r.inputShape!=null){let s=null;r.batchSize!=null&&(s=r.batchSize),o=[s].concat(r.inputShape)}this.batchInputShape=o;let i=r.dtype;i==null&&(i=r.inputDType),i==null&&(i="float32"),this.dtype=i}r.weights!=null?this.initialWeights=r.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(r,n){return r.name+"_ib-"+n.toString()}getNodeAtIndex(r,n){if(this.inboundNodes.length===0)throw new pu(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=r)throw new Ie(`Asked to get ${n} at node ${r}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[r]}getInputAt(r){return ia(this.getNodeAtIndex(r,"input").inputTensors)}getOutputAt(r){return ia(this.getNodeAtIndex(r,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new xd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new xd(`Layer ${this.name} is not connected, no input to return.`);return ia(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new xd(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new xd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ia(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(r=>r())}get updates(){return this._updates}get built(){return this._built}set built(r){this._built=r}get trainable(){return this.trainable_}set trainable(r){this._trainableWeights.forEach(n=>n.trainable=r),this.trainable_=r}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(r=>r.trainable):[]}set trainableWeights(r){this._trainableWeights=r}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(r=>!r.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(r){this._nonTrainableWeights=r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(r){let n=Rn(r);if(this.inputSpec==null||this.inputSpec.length===0)return;let o=Rn(this.inputSpec);if(n.length!==o.length)throw new Ie(`Layer ${this.name} expects ${o.length} inputs, but it received ${n.length} input tensors. Input received: ${r}`);for(let i=0;i<n.length;i++){let s=n[i],a=o[i];if(a==null)continue;let l=s.rank;if(a.ndim!=null&&l!==a.ndim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${l}`);if(a.maxNDim!=null&&l>a.maxNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${l}`);if(a.minNDim!=null&&l<a.minNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${l}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new Ie(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){let u=s.shape;for(let c in a.axes){let f=Number(c),d=a.axes[c],p=f>=0?u[f]:u[u.length+f];if(d!=null&&[d,null].indexOf(p)===-1)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${d} but got shape ${u}.`)}}if(a.shape!=null)for(let u=0;u<a.shape.length;++u){let c=a.shape[u],f=s.shape[u];if(c!=null&&f!=null&&c!==f)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(r,n){return r}invokeCallHook(r,n){this._callHook!=null&&this._callHook(r,n)}setCallHook(r){this._callHook=r}clearCallHook(){this._callHook=null}apply(r,n){n=n||{},this.assertNotDisposed();let o=Rn(r),i=V3t(r),s=G3t(r);if(i===s)throw new Ie("Arguments to apply() must be all SymbolicTensors or all Tensors");return Uh(this.name,()=>{if(!this.built){this.assertInputCompatibility(r);let a=[];for(let l of Rn(r))a.push(l.shape);this.build(ia(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(r),s){let a=this.call(r,n);this.supportsMasking&&this.setMaskMetadata(r,a);let l=Rn(a),u=[];for(let c of l)o.indexOf(c)!==-1&&(c=c.clone()),u.push(c);if(a=ia(u),this.activityRegularizer!=null)throw new wr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{let a=z3t(r),l=this.computeOutputShape(a),u,c=U3t(r);if(this.warnOnIncompatibleInputShape(Array.isArray(r)?a[0]:a),l!=null&&l.length>0&&Array.isArray(l[0])?u=l.map((f,d)=>new Fl(c,f,this,Rn(r),n,this.name,d)):u=new Fl(c,l,this,Rn(r),n,this.name),this.addInboundNode(r,u,null,null,a,l,n),this._refCount++,this.activityRegularizer!=null)throw new wr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(r){if(this.batchInputShape!=null)if(r.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(r)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((o,i)=>{o!=null&&r[i]!=null&&r[i]!==o&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(r)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new xd(`The layer ${this.name} has never been called and thus has no defined output shape.`);let r=[];for(let n of this.inboundNodes){let o=JSON.stringify(n.outputShapes);r.indexOf(o)===-1&&r.push(o)}if(r.length===1){let n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new xd(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new pu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return mD(this.weights)}build(r){this.built=!0}getWeights(r=!1){return aP(r?this.trainableWeights:this.weights)}setWeights(r){Pe(()=>{let n=this.weights;if(n.length!==r.length)throw new Ie(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${r.length}, but the layer was expecting ${n.length} weights. Provided weights: ${r}...`);if(n.length===0)return;let o=[],i=aP(n);for(let s=0;s<i.length;++s){let a=i[s],l=n[s],u=r[s];if(!Y.arraysEqual(a.shape,u.shape))throw new Ie(`Layer weight shape ${a.shape} not compatible with provided weight shape ${u.shape}`);o.push([l,u])}gD(o)})}addWeight(r,n,o,i,s,a,l,u){if(this._addedWeightNames.indexOf(r)!==-1)throw new Ie(`Duplicate weight name ${r} for layer ${this.name}`);this._addedWeightNames.push(r),o==null&&(o="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():Qn("zeros"));let c=i.apply(n,o),f=new sP(c,o,r,a,l);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(f.read())),a==null&&(a=!0),a?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(r){this.fastWeightInitDuringBuild=r}addLoss(r){r==null||Array.isArray(r)&&r.length===0||(r=Rn(r),this._losses!==void 0&&this._losses!==null&&this.losses.push(...r))}computeOutputShape(r){return r}computeMask(r,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(o=>{if(o!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(r,n,o){if(!this.supportsMasking)return;let i=this.computeMask(r,o),s=Rn(n),a=Rn(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let l=0;l<s.length;l++)s[l].kerasMask=a[l]}addInboundNode(r,n,o,i,s,a,l=null){let u=Rn(r);n=Rn(n),o=Rn(o),i=Rn(i),s=hD(s),a=hD(a);let c=[],f=[],d=[];for(let p of u)c.push(p.sourceLayer),f.push(p.nodeIndex),d.push(p.tensorIndex);new Bx({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:d,inputTensors:u,outputTensors:n,inputMasks:o,outputMasks:i,inputShapes:s,outputShapes:a},l);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){let r={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(r.batchInputShape=this.batchInputShape),this.dtype!=null&&(r.dtype=this.dtype),r}disposeWeights(){return this.weights.forEach(r=>r.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let r=0;return--this._refCount===0&&(r=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:r}}};function z3t(t){t=Rn(t);let r=[];for(let n of t)r.push(n.shape);return ia(r)}function U3t(t){return"float32"}function bae(t,r,n){if((r==null||n!=null&&n>0)&&(r=t.sourceLayer,n=t.nodeIndex),r.inboundNodes.length===0)return[t];{let o=r.inboundNodes[n];if(o.inboundLayers.length===0)return o.inputTensors;{let i=[];for(let s=0;s<o.inboundLayers.length;s++){let a=o.inputTensors[s],l=o.inboundLayers[s],u=o.nodeIndices[s],c=bae(a,l,u);for(let f of c)i.indexOf(f)===-1&&i.push(f)}return i}}}function V3t(t){let r=!0;for(let n of Rn(t))if(!(n instanceof Fl)){r=!1;break}return r}function G3t(t){let r=!0;for(let n of Rn(t))if(n instanceof Fl){r=!1;break}return r}var Mw=(()=>{class t extends hr{constructor(n){if(super({dtype:n.dtype,name:n.name!=null?n.name:Dw("input").toString()}),n.batchSize==null&&(n.batchSize=null),n.sparse==null&&(n.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=n.sparse,n.inputShape!=null&&n.batchInputShape!=null)throw new Ie("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let o=n.batchInputShape;if(o==null){if(n.inputShape==null)throw new Ie("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");o=[n.batchSize].concat(n.inputShape)}else if(n.batchSize!=null)throw new Ie("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let i=n.dtype||"float32";this.batchInputShape=o,this.dtype=i,this.inputSpec=[{shape:o}];let s=new Fl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Bx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[o],outputShapes:[o]})}apply(n,o){throw new Ie(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();tt.registerClass(Mw);function G7(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Ie("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let r=t.batchShape;t.shape!=null&&r==null&&(r=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Mw({batchInputShape:r,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function W3t(t,r){if(t.dtype==null||t.dtype===r.dtype)return r;try{return rt(r,t.dtype)}catch{throw new Ie(`The dtype of the feed (${r.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var B0=class t{constructor(r){if(this.id2Value={},this.id2Mask={},this.name2Id={},r instanceof t)for(let n in r.id2Value)this.id2Value[n]=r.id2Value[n],n in r.id2Mask&&(this.id2Mask[n]=r.id2Mask[n]);else{if(r==null)return;for(let n of r)this.add(n.key,n.value)}}add(r,n,o){if(this.id2Value[r.id]==null)this.id2Value[r.id]=W3t(r,n),this.name2Id[r.name]=r.id,o!=null&&(this.id2Mask[r.id]=o);else throw new Ie(`Duplicate key: name=${r.name}, id=${r.id}`);return this}addFeed(r){this.add(r.key,r.value)}hasKey(r){return this.id2Value[r.id]!=null}names(){return Object.keys(this.name2Id)}getValue(r){if(r instanceof Fl){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Value[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Value[n]}}getMask(r){if(r instanceof Fl){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Mask[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Cr(this.id2Mask)}},W7=new rP,q7=new rP;function v5e(t){W7?.setMaxEntries(t),q7?.setMaxEntries(t)}function sE(t,r,n,o){let i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],l=a.map(m=>m.name),u=[],c=r.names();for(let m of l)c.indexOf(m)!==-1?u.push(r.getValue(m)):u.push(null);o!=null&&(o.maxNumTensors=-1/0,o.minNumTensors=1/0);let f=l.join(",")+"|"+r.names().sort().join(","),d=W7.get(f),p;if(d==null){let m=q3t(a,r);d=m.sorted,p=m.recipientCounts,W7.put(f,d),q7.put(f,p)}p={},i||Object.assign(p,q7.get(f));let h=new B0(r);for(let m=0;m<d.length;++m){if(o!=null){let T=bI().numTensors;T>o.maxNumTensors&&(o.maxNumTensors=T),T<o.minNumTensors&&(o.minNumTensors=T)}let g=d[m],y=g.sourceLayer;if(y instanceof Mw)continue;let b=[],x=[],v=[],w=!1;for(let T of g.inputs){let I=h.getValue(T),k=h.getMask(T);b.push(I),x.push(k),k!=null&&(w=!0),i||(p[T.name]--,p[T.name]===0&&!r.hasKey(T)&&l.indexOf(T.name)===-1&&!I.isDisposed&&T.sourceLayer.stateful!==!0&&v.push(I))}w&&(n=n||{},n.mask=x[0]);let _=Rn(y.apply(b,n)),S=null;y.supportsMasking&&(S=y.computeMask(b,x));let C=Y3t(g),E=Array.isArray(C)?C:[C];for(let T=0;T<E.length;++T){h.hasKey(E[T])||h.add(E[T],_[T],Array.isArray(S)?S[0]:S);let I=l.indexOf(E[T].name);I!==-1&&(u[I]=_[T])}i||Cr(v)}return h.disposeMasks(),s?u:u[0]}function q3t(t,r){Y.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],o={};if(t.length===1){let i=x5e(t[0],r);n=i.sorted,o=i.recipientMap}else{let i=new Set;for(let s of t){let{sorted:a,recipientMap:l}=x5e(s,r);for(let u of a)i.has(u.name)||(n.push(u),i.add(u.name));for(let u in l)o[u]==null&&(o[u]=new Set),l[u].forEach(c=>o[u].add(c))}}return{sorted:n,recipientCounts:H3t(o)}}function H3t(t){let r={};for(let n in t)r[n]=t[n].size;return r}function x5e(t,r){let n=new Set,o=[],i={};for(let l of r.names())n.add(l);let s=[],a=[];for(s.push(t);s.length>0;){let l=s[s.length-1];if(n.has(l.name)){s.pop();continue}let u=a[a.length-1]===s.length-1;if(l.inputs.length===0||u)s.pop(),o.push(l),n.add(l.name),u&&a.pop();else{a.push(s.length-1);for(let c of l.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(l.name),!n.has(c.name)&&s.push(c)}}return{sorted:o,recipientMap:i}}function Y3t(t){let r;if(t.sourceLayer.inboundNodes.length===1)r=t.sourceLayer.output;else{let n=null;for(let o=0;o<t.sourceLayer.inboundNodes.length;++o)for(let i of t.sourceLayer.inboundNodes[o].outputTensors)if(i.id===t.id){n=o;break}r=t.sourceLayer.getOutputAt(n)}return r}var X3t=Me();X3t.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,v5e);re();re();re();function xae(t,r){return Pe(()=>Zn(It(we(t,t),r,!0)))}var aE=class extends tt.Serializable{getConfig(){return{}}},S5e=(()=>{class t extends aE{constructor(n){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>{let o=xae(n,this.axis),i=ta(o,0,this.maxValue);return we(n,Tt(i,Ke(ls(),o)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();tt.registerClass(S5e);var C5e=(()=>{class t extends aE{constructor(n){super(),this.defaultAxis=0,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>Tt(n,Ke(ls(),xae(n,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();tt.registerClass(C5e);var E5e=(()=>{class t extends aE{apply(n){return Ta(n)}}return t.className="NonNeg",t})();tt.registerClass(E5e);var T5e=(()=>{class t extends aE{constructor(n){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=n.minValue!=null?n.minValue:this.defaultMinValue,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.rate=n.rate!=null?n.rate:this.defaultRate,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return Pe(()=>{let o=xae(n,this.axis),i=Ke(we(this.rate,ta(o,this.minValue,this.maxValue)),we(1-this.rate,o));return we(n,Tt(i,Ke(ls(),o)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();tt.registerClass(T5e);var w5e={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function li(t){return cD(t)}function _5e(t,r={}){return L0(t,tt.SerializationMap.getMap().classNameMap,r,"constraint")}function ui(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in w5e?w5e[t]:t,config:{}};return _5e(n)}else return t instanceof aE?t:_5e(t)}var Hh={};fn(Hh,{Layer:()=>hr,RNN:()=>$0,RNNCell:()=>Ux,activation:()=>MLt,add:()=>zLt,alphaDropout:()=>Cjt,average:()=>ULt,averagePooling1d:()=>Lle,averagePooling2d:()=>jle,averagePooling3d:()=>Ble,avgPool1d:()=>ZLt,avgPool2d:()=>JLt,avgPool3d:()=>tjt,avgPooling1d:()=>QLt,avgPooling2d:()=>ejt,avgPooling3d:()=>rjt,batchNormalization:()=>YLt,bidirectional:()=>gjt,categoryEncoding:()=>Ijt,centerCrop:()=>Ajt,concatenate:()=>VLt,conv1d:()=>SLt,conv2d:()=>CLt,conv2dTranspose:()=>ELt,conv3d:()=>TLt,conv3dTranspose:()=>ALt,convLstm2d:()=>djt,convLstm2dCell:()=>pjt,cropping2D:()=>ILt,dense:()=>FLt,depthwiseConv2d:()=>NLt,dot:()=>HLt,dropout:()=>OLt,elu:()=>yLt,embedding:()=>$Lt,flatten:()=>PLt,gaussianDropout:()=>Sjt,gaussianNoise:()=>_jt,globalAveragePooling1d:()=>njt,globalAveragePooling2d:()=>ojt,globalMaxPool1d:()=>bjt,globalMaxPool2d:()=>xjt,globalMaxPooling1d:()=>eBe,globalMaxPooling2d:()=>tBe,gru:()=>sjt,gruCell:()=>ajt,input:()=>Iae,inputLayer:()=>gLt,layerNormalization:()=>XLt,leakyReLU:()=>xLt,lstm:()=>ljt,lstmCell:()=>ujt,masking:()=>Ejt,maxPool1d:()=>vjt,maxPool2d:()=>wjt,maxPooling1d:()=>rBe,maxPooling2d:()=>nBe,maxPooling3d:()=>ijt,maximum:()=>GLt,minimum:()=>WLt,multiply:()=>qLt,permute:()=>BLt,prelu:()=>vLt,randomWidth:()=>Djt,reLU:()=>bLt,repeatVector:()=>LLt,rescaling:()=>Tjt,reshape:()=>jLt,resizing:()=>kjt,rnn:()=>hjt,separableConv2d:()=>kLt,simpleRNN:()=>cjt,simpleRNNCell:()=>fjt,softmax:()=>wLt,spatialDropout1d:()=>RLt,stackedRNNCells:()=>mjt,thresholdedReLU:()=>_Lt,timeDistributed:()=>yjt,upSampling2d:()=>DLt,zeroPadding2d:()=>KLt});re();re();function $x(t){return je(this,null,function*(){if(t==null)return;let r=[],n=[],o=[];for(let i in t){let s=t[i];if(typeof s!="number"){let a=s;r.push(a.data()),n.push(i),o.push(a)}}if(r.length>0){let i=yield Promise.all(r);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Cr(o)}})}function H7(t){if(t!=null)for(let r in t){let n=t[r];typeof n!="number"&&n.dispose()}}var Q3t=125,Fw=class{constructor(){this.validationData=null}setParams(r){this.params=r}onEpochBegin(r,n){return je(this,null,function*(){})}onEpochEnd(r,n){return je(this,null,function*(){})}onBatchBegin(r,n){return je(this,null,function*(){})}onBatchEnd(r,n){return je(this,null,function*(){})}onTrainBegin(r){return je(this,null,function*(){})}onTrainEnd(r){return je(this,null,function*(){})}setModel(r){}},Y7=class{constructor(r,n=10){r==null&&(r=[]),this.callbacks=r,this.queueLength=n}append(r){this.callbacks.push(r)}setParams(r){for(let n of this.callbacks)n.setParams(r)}setModel(r){for(let n of this.callbacks)n.setModel(r)}onEpochBegin(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochBegin(r,n)})}onEpochEnd(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochEnd(r,n)})}onBatchBegin(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchBegin(r,n)})}onBatchEnd(r,n){return je(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchEnd(r,n)})}onTrainBegin(r){return je(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainBegin(r)})}onTrainEnd(r){return je(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainEnd(r)})}},vae=class extends Fw{constructor(){super()}onEpochBegin(r){return je(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(r,n){return je(this,null,function*(){n==null&&(n={});let o=n.size==null?0:n.size;this.seen+=o;for(let i in n){let s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*o;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;let l=Pe(()=>Ke(this.totals[i],we(s,o)));this.totals[i]=l,a?.dispose()}}})}onEpochEnd(r,n){return je(this,null,function*(){if(n!=null)for(let o of this.params.metrics)this.totals[o]!=null&&(typeof this.totals[o]=="number"?n[o]=this.totals[o]/this.seen:Pe(()=>{let i=we(Tt(1,this.seen),this.totals[o]);n[o]=i,this.totals[o].dispose(),Ms(n[o])}))})}},X7=class extends Fw{onTrainBegin(r){return je(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(r,n){return je(this,null,function*(){n==null&&(n={}),this.epoch.push(r);for(let o in n)this.history[o]==null&&(this.history[o]=[]),this.history[o].push(n[o])})}syncData(){return je(this,null,function*(){let r=[],n=[],o=[];for(let s in this.history){let a=this.history[s];for(let l=0;l<a.length;++l)if(typeof a[l]!="number"){let u=a[l];r.push(u.data()),n.push(s),o.push(l)}}let i=yield Promise.all(r);for(let s=0;s<i.length;++s)this.history[n[s]][o[s]].dispose(),this.history[n[s]][o[s]]=i[s][0]})}},K7=class extends Fw{constructor(r,n){if(super(),this.currentEpoch=0,this.nowFunc=r.nowFunc,this.nextFrameFunc=r.nextFrameFunc||uD,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Q3t),this.yieldEvery==="never"&&r.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Y.isNumber(this.yieldEvery)&&(this.maybeWait=G4e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=r.onTrainBegin,this.trainEnd=r.onTrainEnd,this.epochBegin=r.onEpochBegin,this.epochEnd=r.onEpochEnd,this.batchBegin=r.onBatchBegin,this.batchEnd=r.onBatchEnd,this.yield=r.onYield}maybeWait(r,n,o){return je(this,null,function*(){let i=[];this.yield!=null&&(yield $x(o),i.push(this.yield(r,n,o))),i.push(this.nextFrameFunc()),yield Promise.all(i)})}onEpochBegin(r,n){return je(this,null,function*(){this.currentEpoch=r,this.epochBegin!=null&&(yield $x(n),yield this.epochBegin(r,n))})}onEpochEnd(r,n){return je(this,null,function*(){let o=[];this.epochEnd!=null&&(yield $x(n),o.push(this.epochEnd(r,n))),this.yieldEvery==="epoch"&&o.push(this.nextFrameFunc()),yield Promise.all(o)})}onBatchBegin(r,n){return je(this,null,function*(){this.batchBegin!=null&&(yield $x(n),yield this.batchBegin(r,n))})}onBatchEnd(r,n){return je(this,null,function*(){let o=[];this.batchEnd!=null&&(yield $x(n),o.push(this.batchEnd(r,n))),this.yieldEvery==="batch"?o.push(this.nextFrameFunc()):Y.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,r,n)),yield Promise.all(o)})}onTrainBegin(r){return je(this,null,function*(){this.trainBegin!=null&&(yield $x(r),yield this.trainBegin(r))})}onTrainEnd(r){return je(this,null,function*(){this.trainEnd!=null&&(yield $x(r),yield this.trainEnd(r))})}};function Z7(t,r){return t==null&&(t={}),t instanceof Fw?[t]:Array.isArray(t)&&t[0]instanceof Fw?t:Rn(t).map(o=>new K7(o,r))}var A5e=(()=>{class t{constructor(){}static registerCallbackConstructor(n,o){Y.assert(n>=0&&Number.isInteger(n),()=>`Verbosity level is expected to be an integer >= 0, but got ${n}`),t.checkForDuplicate(o),t.constructors[n]==null&&(t.constructors[n]=[]),t.constructors[n].push(o)}static checkForDuplicate(n){for(let o in t.constructors)t.constructors[+o].forEach(s=>{if(s===n)throw new Ie("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(n){let o=[];for(let i in t.constructors){let s=+i;n>=s&&o.push(...t.constructors[s])}return o.map(i=>new i)}}return t.constructors={},t})();function Q7(t,r,n,o,i,s,a,l,u){let c=new X7,f=[new vae,...A5e.createCallbacks(r)];t!=null&&f.push(...t),f.push(c);let d=new Y7(f);return d.setParams({epochs:n,initialEpoch:o,samples:i,steps:s,batchSize:a,verbose:r,doValidation:l,metrics:u}),{callbackList:d,history:c}}re();re();re();function ac(t,r={},n=!1){return L0(t,tt.SerializationMap.getMap().classNameMap,r,"layer",n)}re();re();function lP(t,r){return Pe(()=>{t.dtype!=="float32"&&(t=rt(t,"float32"));let n=It(iE(t),r,!0),o=dp(n.shape,ls()),i=Zn(ic(n,o));return Tt(t,i)})}function lE(t,r){return Pe(()=>bo(iE(wt(r,t)),-1))}function cP(t,r){return Pe(()=>bo(Ao(wt(r,t)),-1))}function fP(t,r){return Pe(()=>{let n=wt(t,r),o=ta(Ao(t),ls(),Number.MAX_VALUE),i=Ao(Tt(n,o));return we(100,bo(i,-1))})}function J3t(t,r){return Pe(()=>{let n=ta(r,ls(),Number.MAX_VALUE),o=na(Ke(1,n)),i=ta(t,ls(),Number.MAX_VALUE),s=na(Ke(1,i));return bo(iE(wt(o,s)),-1)})}function ePt(t,r){return Pe(()=>{let n=ic(0,wt(1,we(t,r)));return bo(iE(n),-1)})}function tPt(t,r){return Pe(()=>{let n=ic(0,wt(1,we(t,r)));return bo(n,-1)})}function rPt(t,r){return Pe(()=>{let n=It(we(t,r),-1),o=ra(we(wt(1,t),r),-1);return ic(0,Ke(1,wt(o,n)))})}function nPt(t,r){return Pe(()=>{let n=Math.log(2),o=wt(r,t),i=wt(Ke(o,jh(we(-2,o))),n);return bo(i,-1)})}function uE(t,r,n=!1){return Pe(()=>{if(n)r=yw(r);else{let o=It(r,r.shape.length-1,!0);r=Tt(r,o)}return r=ta(r,ls(),1-ls()),Zr(It(we(rt(t,"float32"),na(r)),r.shape.length-1))})}function yD(t,r,n=!1){return Pe(()=>{let o=rt(D0(t5e(t)),"int32");r=ta(r,ls(),1-ls());let i=r.shape,s=Se(F0(o,i[i.length-1]),i);return uE(s,r,n)})}function oPt(t,r){if(!Y.arraysEqual(t.shape,r.shape))throw new Ie(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(r.shape)}`);return Pe(()=>{let n=Ta(r),o=Zr(Ao(r));return Ke(wt(n,we(r,t)),cw(_i(o)))})}function bD(t,r){return Pe(()=>{let n;return n=ta(r,ls(),1-ls()),n=na(Tt(n,wt(1,n))),bo(oPt(t,n),-1)})}function iPt(t,r){return Pe(()=>{let n=ta(t,ls(),1),o=ta(r,ls(),1);return It(we(t,na(Tt(n,o))),-1)})}function sPt(t,r){return Pe(()=>{let n=na(Ke(ls(),r));return bo(wt(r,we(t,n)),-1)})}function J7(t,r){return Pe(()=>{let n=lP(t,-1),o=lP(r,-1),i=we(n,o);return Zr(It(i,-1))})}var uP={meanSquaredError:lE,meanAbsoluteError:cP,meanAbsolutePercentageError:fP,meanSquaredLogarithmicError:J3t,squaredHinge:ePt,hinge:tPt,categoricalHinge:rPt,logcosh:nPt,categoricalCrossentropy:uE,sparseCategoricalCrossentropy:yD,binaryCrossentropy:bD,kullbackLeiblerDivergence:iPt,poisson:sPt,cosineProximity:J7};function e9(t){if(typeof t=="string"){if(t in uP)return uP[t];let r=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ie(r)}else return t}re();re();function r9(t,r){return Pe(()=>{let n=we(.5,Os(r)),o=Ml(si(r,n),t.dtype);return bo(Dl(t,o),-1)})}function n9(t,r){return Pe(()=>Ml(Dl(cu(t,-1),cu(r,-1)),"float32"))}function aPt(t,r){return Pe(()=>rt(It(Ya(Dl(t,1),Dl(r,1))),"float32"))}function lPt(t,r){return Pe(()=>rt(It(Ya(Dl(t,0),Dl(r,1))),"float32"))}function I5e(t,r){return Pe(()=>{let n=aPt(t,r),o=lPt(t,r),i=Ke(n,o);return rt(yo(si(i,0),Tt(n,i),0),"float32")})}function wae(t,r){return bD(t,r)}function _ae(t,r){return t.rank===r.rank&&(t=Zc(t,[t.rank-1])),r=cu(r,-1),r.dtype!==t.dtype&&(r=rt(r,t.dtype)),rt(Dl(t,r),"float32")}var uPt=lE,cPt=lE,fPt=cP,dPt=cP,pPt=fP,hPt=fP,o9=uE,mPt=J7,Sae=yD,t9={binaryAccuracy:r9,categoricalAccuracy:n9,precision:I5e,categoricalCrossentropy:o9,sparseCategoricalCrossentropy:Sae,mse:uPt,MSE:cPt,mae:fPt,MAE:dPt,mape:pPt,MAPE:hPt,cosine:mPt};function D5e(t){if(typeof t=="string"&&t in t9)return t9[t];if(typeof t!="string"&&t!=null)return t;throw new Ie(`Unknown metric ${t}`)}function dP(t){if(vd(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let r;for(let n of Object.keys(uP))if(uP[n]===t){r=n;break}if(r!==void 0)return r;for(let n of Object.keys(t9))if(t9[n]===t){r=n;break}return r!==void 0?r:t.name}}re();function M5e(t){let r={Adagrad:()=>Qc.adagrad(.01),Adadelta:()=>Qc.adadelta(1,.95,ls()),Adam:()=>Qc.adam(.001,.9,.999,ls()),Adamax:()=>Qc.adamax(.002,.9,.999,ls(),0),RMSProp:()=>Qc.rmsprop(.001,.9,0,ls()),SGD:()=>Qc.sgd(.01)};if(r.adagrad=r.Adagrad,r.adadelta=r.Adadelta,r.adam=r.Adam,r.adamax=r.Adamax,r.rmsprop=r.RMSProp,r.sgd=r.SGD,t in r)return r[t]();throw new Ie(`Unknown Optimizer ${t}`)}function Eae(t,r,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Cae(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let o=JSON.stringify(t);o.length>1048576&&console.warn(`User-defined metadata of model "${r}" is too large in size (length=${o.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function Cae(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let r=Object.keys(t);for(let n of r)if(typeof n!="string"||!Cae(t[n]))return!1;return!0}else if(Array.isArray(t)){for(let r of t)if(!Cae(r))return!1;return!0}else return!1;else{let r=typeof t;return r==="string"||r==="number"||r==="boolean"}}function F5e(t,r,n,o=console.log){let i=bPt(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(r=r||90,n=n||[.32,.61,.89,1]):(r=r||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(r*f)));let a;if(!i){s.push("Receives inputs"),a=[];for(let f in t.nodesByDepth)a.push(...t.nodesByDepth[f])}o("_".repeat(r)),i9(s,n,o),o("=".repeat(r));let l=t.layers;for(let f=0;f<l.length;++f)i?xPt(l[f],n,o):vPt(l[f],n,a,o),o((f===l.length-1?"=":"_").repeat(r));t.checkTrainableWeightsConsistency();let u=yPt(t),c=mD(t.nonTrainableWeights);o(`Total params: ${u+c}`),o(`Trainable params: ${u}`),o(`Non-trainable params: ${c}`),o("_".repeat(r))}function yPt(t){let r;return t.collectedTrainableWeights!=null?r=mD(t.collectedTrainableWeights):r=mD(t.trainableWeights),r}function bPt(t){let r=!0,n=[],o=[];for(let i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(let i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){r=!1;break}o.push(...i)}if(r)for(let i of t.layers){let s=!1;for(let a of i.inboundNodes)if(o.indexOf(a)!==-1)if(s){r=!1;break}else s=!0;if(!r)break}return r}function i9(t,r,n=console.log){let o="";for(let i=0;i<t.length;++i)i>0&&(o=o.slice(0,o.length-1)+" "),o+=t[i],o=o.slice(0,r[i]),o+=" ".repeat(r[i]-o.length);n(o)}function xPt(t,r,n){let o,i;try{i=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=t.name,a=t.getClassName(),l=[`${s} (${a})`,i,o,t.countParams().toString()];i9(l,r,n)}function vPt(t,r,n,o){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}let a=[];for(let d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,m=d.nodeIndices[p],g=d.tensorIndices[p];a.push(`${h}[${m}][${g}]`)}let l=t.name,u=t.getClassName(),c=a.length===0?"":a[0],f=[`${l} (${u})`,s,i,t.countParams().toString(),c];i9(f,r,o);for(let d=1;d<a.length;++d)i9(["","","","",a[d]],r,o)}function O5e(t,r,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&r===0&&typeof n=="string"}function xD(t,r){if(t===null)return null;if(typeof t=="string")return Px(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];O5e(r,i,s)?n.push(s):n.push(xD(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o];if(o==="name"&&typeof i=="string")n[o]=i;else{let s=Px(o);n[s]=xD(i,s)}}return n}}function s9(t,r){if(t==null)return null;if(typeof t=="string")return bp(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];O5e(r,i,s)?n.push(s):n.push(s9(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o],s=bp(o);(o==="name"||o==="className")&&typeof i=="string"?n[s]=i:n[s]=s9(i,o)}return n}}var vD="4.19.0";re();var wPt=t=>{let r=Object.keys(t);if(r.length===0)return!1;let n=r[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},a9=class t extends hr{constructor(r){if(super({}),this.containerNodes=new Set,this.name=r.name,this.name==null){let x=this.getClassName().toLowerCase();this.name=Dw(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(r.inputs)?this.inputs=r.inputs.slice():this.inputs=[r.inputs],Array.isArray(r.outputs)?this.outputs=r.outputs.slice():this.outputs=[r.outputs],xp(this.inputs).length!==this.inputs.length)throw new Ie(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);xp(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let x of this.outputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(_)}for(let x of this.inputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;vd(w===0,"input layer has >1 nodes"),vd(_===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){let v=this.inputLayers[x];if(!(v instanceof Mw))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${r.inputs}. Input ${x} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(let x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);let n={},o={},i={},s={},a={},l=[],u=(x,v,w,_,S,C)=>{(_==null||S==null||C==null)&&(_=x.sourceLayer,S=x.nodeIndex,C=x.tensorIndex);let E=_.inboundNodes[S];if(w.indexOf(E)!==-1)throw new pu(`The tensor ${x.name} at layer "${_.name}" is part of a cycle.`);if(v.indexOf(E)!==-1)return;this.containerNodes.add(t.nodeKey(_,S)),_.id in a||(a[_.id]=Object.keys(a).length),w.indexOf(E)===-1&&w.push(E);let T=E.inboundLayers.length;for(let I=0;I<T;I++){let k=E.inputTensors[I],F=E.inboundLayers[I],D=E.nodeIndices[I],L=E.tensorIndices[I];u(k,v,w,F,D,L)}for(v.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);l.push(E)},c=[],f=[];for(let x of this.outputs)u(x,c,f);let d=l.slice().reverse();for(let x of d){o[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id],w=i[x.outboundLayer.id]==null?0:i[x.outboundLayer.id];v=Math.max(v,w),i[x.outboundLayer.id]=v,s[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let _=0;_<x.inboundLayers.length;_++){let S=x.inboundLayers[_],C=x.nodeIndices[_],E=S.inboundNodes[C],T=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(v+1,T),o[E.id]=E}}let p={};for(let x in n){let v=n[x];v in p||(p[v]=[]),p[v].push(o[x])}let h={};for(let x in i){let v=i[x];v in h||(h[v]=[]),h[v].push(s[x])}let m=Object.keys(h).map(x=>parseInt(x,10)).sort(nP);this.layers=[];for(let x of m){let v=h[x];v.sort((w,_)=>{let S=a[w.id],C=a[_.id];return S<C?-1:S>C?1:0});for(let w of v)w instanceof t&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=h,m=Object.keys(p).map(x=>parseInt(x,10)).sort(nP);let g=this.inputs.slice(),y=[];for(let x of m)for(let v of p[x]){let w=v.outboundLayer;if(w!=null){for(let _ of v.inputTensors)if(g.indexOf(_)===-1)throw new pu(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${w.name}". The following previous layers were accessed without issue: ${y}`);for(let _ of v.outputTensors)g.push(_);y.push(w.name)}}this.nodesByDepth=p;let b=this.layers.map(x=>x.name);for(let x of b){let v=b.filter(w=>w===x).length;if(v!==1)throw new pu(`The name "${x}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new Bx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let r={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let n of this.layers)r.numDisposedVariables+=n.dispose().numDisposedVariables;for(let n of this.internalContainerRefs)r.numDisposedVariables+=n.dispose().numDisposedVariables}return r.refCountAfterDispose=this._refCount,r}get trainable(){return this.trainable_}set trainable(r){this.layers.forEach(n=>{n._trainableWeights.forEach(o=>o.trainable=r)}),this.trainable_=r}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ie("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let r=[];for(let n of this.layers)r=r.concat(n.trainableWeights);return r}get nonTrainableWeights(){let r=[];for(let n of this.layers)r.push(...n.nonTrainableWeights);if(!this.trainable){let n=[];for(let o of this.layers)n.push(...o.trainableWeights);return n.concat(r)}return r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(r,n=!0){let o={},i=0,s=wPt(r);s&&this.parseWeights(r);for(let l of this.layers)for(let[u,c]of l.weights.entries()){let f=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${u}`:c.originalName;if(o[f]!=null)throw new Ie(`Duplicate weight name: ${f}`);o[f]=c,i++}let a=[];for(let l in r){let u=l;if(o[l]==null){let c=l.split("/");u=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(o[u]!=null)a.push([o[u],r[l]]);else if(n)throw new Ie(`Provided weight data has no target variable: ${l}`);delete o[u]}if(n){let l=[];for(let u in o)l.push(u);if(l.length>0)throw new Ie(`${l.length} of ${i} weights are not set: ${l}`)}gD(a)}parseWeights(r){for(let n in Object.keys(r)){let o=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=o.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(r[s]=r[n],delete r[n])}}updatedConfig(){let r=this.getConfig(),n={};return n.className=this.getClassName(),n.config=r,n.kerasVersion=`tfjs-layers ${vD}`,n.backend="TensorFlow.js",n}toJSON(r,n=!0){let o=s9(this.updatedConfig());return n?JSON.stringify(o):o}call(r,n){return Pe(()=>{r=Rn(r);let o=new B0;for(let i=0;i<this.inputs.length;++i)o.add(this.inputs[i],r[i]);return sE(this.outputs,o,n)})}computeMask(r,n){return Pe(()=>{r=Rn(r);let o;return n==null?o=yp(null,r.length):o=Rn(n),this.runInternalGraph(r,o)[1]})}computeOutputShape(r){let n=hD(r);if(n.length!==this.inputLayers.length)throw new Ie(`Invalid inputShape argument ${r}: model has ${this.inputLayers.length} tensor inputs.`);let o={};for(let l=0;l<n.length;l++){let u=this.inputLayers[l],c=n[l],f=u.name+"_0_0";o[f]=c}let i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(nP);if(i.length>1)for(let l of i){let u=this.nodesByDepth[l];for(let c of u){let f=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(f.id)!==-1)continue;let d=[];for(let g=0;g<c.inboundLayers.length;g++){let y=c.inboundLayers[g],b=c.nodeIndices[g],x=c.tensorIndices[g],v=`${y.name}_${b}_${x}`,w=o[v];d.push(w)}let p=f.computeOutputShape(ia(d)),h=hD(p),m=f.inboundNodes.indexOf(c);for(let g=0;g<h.length;g++){let y=`${f.name}_${m}_${g}`;o[y]=h[g]}}}let s=[],a=[];for(let l=0;l<this.outputLayers.length;l++){let u=this.outputLayers[l],c=this.outputLayersNodeIndices[l],f=this.outputLayersTensorIndices[l],d=`${u.name}_${c}_${f}`;a.push(d)}for(let l=0;l<a.length;l++){let u=a[l];vd(u in o),s.push(o[u])}return ia(s)}runInternalGraph(r,n){n==null&&(n=yp(null,r.length));let o={};for(let u=0;u<this.inputs.length;++u){let c=this.inputs[u],f=r[u],d=n[u];o[c.id]=[f,d]}let i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(nP);for(let u of i){let c=this.nodesByDepth[u];for(let f of c){let d=f.outboundLayer,p=f.inputTensors,h=f.outputTensors,m=new Array;for(let g of p)g.id in o&&m.push(o[g.id]);if(m.length===p.length){let g={},y,b,x,v;if(f.callArgs!=null&&(g=f.callArgs),m.length===1){let[w,_]=m[0];g.mask==null&&(g.mask=_),x=Rn(d.call(w,g)),v=Rn(d.computeMask(w,_)),y=[w],b=[_]}else y=m.map(w=>w[0]),b=m.map(w=>w[1]),g.mask==null&&(g.mask=b),x=Rn(d.call(y,g)),v=Rn(d.computeMask(y,b));if(d.activityRegularizer)throw new wr("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<h.length;++w){let _=h[w],S=x[w],C=v[w];o[_.id]=[S,C]}}}}let s=[],a=[],l=[];for(let u of this.outputs){vd(u.id in o,`Could not compute output ${u.name} : ${u.id}`);let[c,f]=o[u.id];l.push(c.shape),s.push(c),a.push(f)}return[s,a,l]}buildNodeConversionMap(r){let n={},o;for(let i of this.layers){o=i instanceof t?1:0;for(let s=0;s<i.inboundNodes.length;s++){let a=t.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=o,o+=1)}}return n}getLayer(r,n){if(n!=null)return this.findLayer(n);if(r==null)throw new Ie("Provide either a layer name or layer index");if(typeof r=="number")return this.findLayer(r);for(let o of this.layers)if(o.name===r)return o;throw new Ie(`No such layer: ${r}`)}findLayer(r){if(this.layers.length<=r)throw new Ie(`Was asked to retrieve layer at index ${r}, but model only has ${this.layers.length} layer(s).`);return this.layers[r]}calculateLosses(){return Pe(()=>{let r=[];for(let n of this.layers)for(let o=0;o<n.inboundNodes.length;++o){let i=t.nodeKey(n,o);this.containerNodes.has(i)&&r.push(...n.calculateLosses())}return r})}getConfig(){let r={name:this.name},n=this.buildNodeConversionMap(this.layers),o=[];for(let a of this.layers){let l=a.getClassName(),u=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){let p=a.inboundNodes[d],h=t.nodeKey(a,d),m={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),m=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(p.inboundLayers.length>0){let g=[];for(let y=0;y<p.inboundLayers.length;y++){let b=p.inboundLayers[y],x=p.nodeIndices[y],v=p.tensorIndices[y],w=t.nodeKey(b,x),_=n[w];_==null&&(_=0),g.push([b.name,_,v,m])}c.push(g)}}}let f={};f.name=a.name,f.className=l,f.config=u,f.inboundNodes=c,o.push(f)}r.layers=o;let i=[];for(let a=0;a<this.inputLayers.length;a++){let l=this.inputLayers[a],u=this.inputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.inputLayersTensorIndices[a];i.push([l.name,f,d])}r.inputLayers=i;let s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.outputLayersTensorIndices[a];s.push([l.name,f,d])}return r.outputLayers=s,r}static fromConfig(r,n,o={},i=!1){let s={},a={};function l(y,b){y.name in a?a[y.name].push(b):a[y.name]=[b]}function u(y,b){let x=[],v;for(let w of b){let _=w[0],S=w[1],C=w[2];if(v=w[3]==null?{}:w[3],!(_ in s)){l(y,b);return}let E=s[_];if(E.inboundNodes.length<=S){l(y,b);return}let T=E.inboundNodes[S];x.push(T.outputTensors[C])}x.length>0&&y.apply(ia(x),v)}function c(y){let b=y.name,x=ac(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(i),s[b]=x,y.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new Ie(`Corrupted configuration, expected array for nodeData: ${w}`);l(x,w)})}let f=n.name,d=n.layers;for(let y of d)c(y);for(;!U4e(a);)for(let y of d){let b=s[y.name];if(b.name in a){let x=a[b.name];delete a[b.name];for(let v of x)u(b,v)}}let p=[],h=[],m=n.inputLayers;for(let y of m){let b=y[0],x=y[1],v=y[2];vd(b in s);let _=s[b].inboundNodes[x].outputTensors;p.push(_[v])}let g=n.outputLayers;for(let y of g){let b=y[0],x=y[1],v=y[2];vd(b in s);let _=s[b].inboundNodes[x].outputTensors;h.push(_[v])}return new r({inputs:p,outputs:h,name:f})}get stateful(){if(this._stateful)throw new Ie("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let r of this.layers)if(r.stateful)return!0;return!1}resetStates(){Pe(()=>{this.layers.forEach(r=>{r.stateful&&r.resetStates()})})}};re();re();re();function _Pt(t,r,n){let o=r.length;if(t==null||Array.isArray(t)&&t.length===0)return r.map(i=>null);if(o===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&r[0]in t?[t[r[0]]]:[t];if(Array.isArray(t)){if(t.length!==o)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${o} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let i=[];return r.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${o}) outputs, so ${n} must be either an array with ${o} elements or an object with ${r} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function l9(t,r){return _Pt(t,r,"classWeight")}function u9(t,r,n,o){return je(this,null,function*(){if(r!=null||o!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let i=Pe(()=>{if(t.shape.length===1)return tc(t);if(t.shape.length===2){if(t.shape[1]>1)return cu(t,1);if(t.shape[1]===1)return Se(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(yield i.data());Cr(i);let a=[];return s.forEach(l=>{if(n[l]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${l} exists in the data but not in classWeight`);a.push(n[l])}),ai(a,"float32")}else return null})}function R5e(t,r){return we(t,r)}var SPt=32;function j5e(t,r){let n,o,i=r;n=i.xs,o=i.ys,Y.assert(n!=null&&o!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${r}`);let s=P5e("input",t.inputNames,n),a=P5e("output",t.outputNames,o),l=s[0].shape[0];Y.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y.assert(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<s.length;u++)Y.assert(s[u].shape[0]===l,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${s[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);for(let u=0;u<a.length;u++)Y.assert(a[u].shape[0]===l,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${a[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function P5e(t,r,n){if(n instanceof tn)return[n];if(Array.isArray(n))return Y.assert(n.length===r.length,()=>`Received an array of ${n.length} Tensors, but expected ${r.length} to match the ${t} keys ${r}.`),n;{let o=[];for(let i of r){if(n[i]==null)throw new Ie(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);o.push(n[i])}return o}}function CPt(t){if(t.length===3)throw new wr("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function B5e(t,r,n){return je(this,null,function*(){let o=n.batchesPerEpoch!=null;if(Y.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y.assert(!o||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let i=n.validationData!=null,s,a;if(i)if(L5e(n.validationData))Y.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let y=CPt(n.validationData);s=y.xs,a=y.ys}let l=t.makeTrainFunction(),u=t.getDedupedMetricsNames(),c;i?c=u.slice().concat(u.map(y=>"val_"+y)):c=u.slice();let f=Z7(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:h}=Q7(f,d,n.epochs,null,null,EPt(r,n),null,i,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=yield r.iterator();for(;m<n.epochs;){let y={};yield p.onEpochBegin(m);let b=0,x=0;for(o||(g=yield r.iterator());!o||b<n.batchesPerEpoch;){let v=yield g.next();if(o&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){let{xs:w,ys:_}=j5e(t,v.value),S={};S.batch=x,S.size=w[0].shape[0],yield p.onBatchBegin(x,S);let C=[];if(n.classWeight!=null){let I=l9(n.classWeight,t.outputNames);for(let k=0;k<I.length;++k)C.push(yield u9(_[k],null,I[k]))}let E=w.concat(_).concat(C),T=l(E);Cr(E);for(let I=0;I<u.length;++I){let k=u[I],F=T[I];S[k]=F,Ms(F)}yield p.onBatchEnd(x,S),H7(S),x++,b++}if(o?b>=n.batchesPerEpoch:v.done){if(i){let w;L5e(n.validationData)?w=Rn(yield t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=Rn(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?SPt:n.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)y[`val_${t.metricsNames[_]}`]=w[_]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(m,y),m++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function EPt(t,r){let n=null;return r.batchesPerEpoch!=null?n=r.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function L5e(t){return typeof t.iterator=="function"}function TPt(t){return typeof t.next=="function"}function $5e(t,r,n){return je(this,null,function*(){n=n||{};let o=n.batches!=null,i=t.testFunction,s=[];if(n.verbose>0)throw new wr("Verbose mode is not implemented yet.");Y.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let a=TPt(r)?r:yield r.iterator(),l=0,u=0;for(;!o||u<n.batches;){let c=yield a.next();if(s=Pe(()=>{if(c.value){let{xs:f,ys:d}=j5e(t,c.value),p=f.concat(d),h=Pe(()=>i(p));if(Cr(p),u===0)for(let g=0;g<h.length;++g)s.push(Ot(0));let m=p[0].shape[0];for(let g=0;g<h.length;++g){let y=h[g],b=s[g];s[g]=Pe(()=>Ke(s[g],we(m,y))),u>0&&Cr(b)}Cr(h),l+=m,++u}return s}),c.done){o&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){let f=s[c];s[c]=Tt(s[c],l),Cr(f)}return ia(s)})}re();re();function c9(t){Y.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function wD(t,r,n){return t==null?[null]:Array.isArray(t)?t.map(o=>Lx(o,r,n-r)):Lx(t,r,n-r)}function f9(t,r){return Pe(()=>t==null?null:Array.isArray(t)?t.map(n=>f9(n,r)):$7(t,r.dtype==="int32"?r:rt(r,"int32")))}function d9(t,r){let n=[],o=0,i=null;for(;o<t;)i=o+r,i>=t&&(i=t),n.push([o,i]),o=i;return n}function Tae(t){let r=[];t instanceof tn&&(t=[t]);for(let n=0;n<t.length;++n){let o=t[n];if(o.rank===1)r.push(jx(o,1));else{if(o.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");r.push(o)}}return r}function _p(t,r){if(t==null)return;let n=[];if(r instanceof tn)n.push(r.id);else if(Array.isArray(r))r.forEach(i=>n.push(i.id));else if(r!=null)for(let i in r){let s=r[i];n.push(s.id)}let o=[];if(t instanceof tn)n.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&o.push(i)});else if(t!=null)for(let i in t){let s=t[i];n.indexOf(s.id)===-1&&o.push(s)}o.forEach(i=>{i.isDisposed||i.dispose()})}function APt(t){return t instanceof tn}function Aae(t){return Array.isArray(t)}function z5e(t){return!APt(t)&&!Aae(t)}function U5e(t,r,n,o=!0,i=""){if(r==null||r.length===0){if(t!=null){let a=!1;if(Aae(t)&&t.length>0)a=!0;else if(z5e(t)){for(let l in t)if(t.hasOwnProperty(l)){a=!0;break}}else a=!0;if(a)throw new Ie(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return r.map(a=>null);let s;if(z5e(t)){t=t,s=[];for(let a of r){if(t[a]==null)throw new Ie(`No data provided for "${a}". Need data for each key in: ${r}`);s.push(t[a])}}else if(Aae(t)){if(t=t,t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${r.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,r.length>1)throw new Ie(`The model ${i} expects ${r.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=Tae(s),n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s). but got array with shape ${l.shape}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f>=0&&c!==f)throw new Ie(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${l.shape[0]} examples, each with shape [${l.shape.slice(1,l.shape.length)}] (tensor shape [${l.shape}])`)}}return s}function kPt(t,r,n){let o=xp(t.map(s=>s.shape[0]));o.sort();let i=xp(r.map(s=>s.shape[0]));if(i.sort(),o.length>1)throw new Ie(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new Ie(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(r.map(s=>s.shape))}`);if(o.length>0&&i.length>0&&!Y.arraysEqual(o,i))throw new Ie(`Input Tensors should have the same number of samples as target Tensors. Found ${o[0]} input sample(s) and ${i[0]} target sample(s).`)}function IPt(t,r,n){let o=[lE,bD,uE];for(let i=0;i<t.length;++i){let s=t[i],a=r[i],l=n[i];if(a!=null){if(a===uE&&s.shape[s.shape.length-1]===1)throw new Ie(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(o.indexOf(a)!==-1){let u=s.shape.slice(1),c=l.slice(1);for(let f=0;f<u.length;++f){let d=u[f],p=c[f];if(p!=null&&d!==p)throw new Ie(`A target Tensor with shape ${s.shape} was passed for an output of shape ${l}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function V5e(t,r,n,o=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${r.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(r.length>1)throw new Ie(`The model expects ${r.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(l.shape)}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f!==c)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(l.shape)}.`)}}}function DPt(t,r){if(t==null||Array.isArray(t)&&t.length===0)return r.map(o=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return r.map(o=>n);{let o=[];for(let i of r){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),o.push(s)}return o}}var NPt="layers-model",zx=(()=>{class t extends a9{constructor(n){super(n),this.isTraining=!1}summary(n,o,i=console.log){if(!this.built)throw new Ie("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");F5e(this,n,o,i)}compile(n){if(n.loss==null&&(n.loss=[]),this.loss=n.loss,typeof n.optimizer=="string")this.optimizer_=M5e(n.optimizer),this.isOptimizerOwned=!0;else{if(!(n.optimizer instanceof Aa))throw new Ie("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=n.optimizer,this.isOptimizerOwned=!1}let o=[];if(!Array.isArray(n.loss)&&typeof n.loss!="string"&&typeof n.loss!="function"){n.loss=n.loss;for(let l in n.loss)if(this.outputNames.indexOf(l)===-1)throw new Ie(`Unknown entry in loss dictionary: "${l}". Only expected the following keys: ${this.outputNames}`);for(let l of this.outputNames)n.loss[l]==null&&console.warn(`Output "${l}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${l} during training`),o.push(e9(n.loss[l]))}else if(Array.isArray(n.loss)){if(n.loss.length!==this.outputs.length)throw new Ie(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${n.loss}.`);o=n.loss.map(u=>e9(u))}else{let l=e9(n.loss);this.outputs.forEach(u=>{o.push(l)})}this.lossFunctions=o,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let l=0;l<this.outputs.length;++l){let u=this.internalOutputShapes[l],c=this.outputNames[l];this.feedOutputNames.push(c),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[l])}let i=[];this.metrics=n.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Uh("loss",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=this.lossFunctions[l];this.outputs.length>1&&(this.metricsTensors.push([u,l]),this.metricsNames.push(this.outputNames[l]+"_loss"))}});let s=DPt(n.metrics,this.outputNames),a=(l,u,c)=>{this.outputNames.length>1&&(u=this.outputNames[l]+"_"+u),this.metricsNames.push(u),this.metricsTensors.push([c,l])};Uh("metric",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=s[l];(f=>{let d="",p,h,m;for(let g of f){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let b=this.internalOutputShapes[l];b[b.length-1]===1||this.lossFunctions[l]===bD?["accuracy","acc"].indexOf(g)!==-1?h=r9:["crossentropy","ce"].indexOf(g)!==-1&&(h=wae):this.lossFunctions[l]===yD?["accuracy","acc"].indexOf(g)!==-1?h=_ae:["crossentropy","ce"].indexOf(g)!==-1&&(h=Sae):["accuracy","acc"].indexOf(g)!==-1?h=n9:["crossentropy","ce"].indexOf(g)!==-1&&(h=o9);let x;["accuracy","acc"].indexOf(g)!==-1?x="acc":["crossentropy","ce"].indexOf(g)!==-1&&(x="ce"),m=h,p=d+x}else m=D5e(g),p=d+dP(g);let y;Uh(p,()=>{y=m}),a(l,p,y)}})(u)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(n,o,i={}){let s=i.batchSize==null?32:i.batchSize;c9(s);let l=this.standardizeUserDataXY(n,o,!0,s);try{let u=l[0].concat(l[1]);this.makeTestFunction();let c=this.testFunction,f=this.testLoop(c,u,s,i.verbose,i.steps);return ia(f)}finally{_p(l[0],n),_p(l[1],o)}}evaluateDataset(n,o){return je(this,null,function*(){return this.makeTestFunction(),$5e(this,n,o)})}checkNumSamples(n,o,i,s="steps"){let a;if(i!=null){if(a=null,o!=null)throw new Ie(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${o}`)}else if(n!=null)Array.isArray(n)?a=n[0].shape[0]:a=n.shape[0];else throw new Ie(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(n,o){if(Array.isArray(o)&&o.length===0)throw new Ie("`outputs` is an empty Array, which is not allowed.");let i=Array.isArray(o),s=i?o:[o],a=this.retrieveSymbolicTensors(s),l=new B0;if(n instanceof tn&&(n=[n]),Array.isArray(n)){if(n.length!==this.inputs.length)throw new Ie(`The number of inputs provided (${n.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)l.add(this.inputs[c],n[c])}else for(let c of this.inputs){let f=n[c.name];if(f==null)throw new Ie(`No value is provided for the model's input ${c.name}`);l.add(c,f)}let u=sE(a,l);return i?u:u[0]}retrieveSymbolicTensors(n){let o=yp(null,n.length),i=n.length;for(let s of this.layers){let a=Array.isArray(s.output)?s.output:[s.output],l=a.map(u=>u.name);for(let u=0;u<n.length;++u){let c=l.indexOf(n[u]);if(c!==-1&&(o[u]=a[c],i--),i===0)break}if(i===0)break}if(i>0){let s=[];throw o.forEach((a,l)=>{a==null&&s.push(n[l])}),new Ie(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return o}predictLoop(n,o=32,i=!1){return Pe(()=>{let s=this.checkNumSamples(n);if(i)throw new wr("Verbose predictLoop() is not implemented yet.");let a=d9(s,o),l=this.outputs.map(u=>[]);for(let u=0;u<a.length;++u)Pe(()=>{let f=a[u][0],d=a[u][1],p=wD(n,f,d),h=[];if(Array.isArray(p))for(let g=0;g<p.length;++g)h.push({key:this.inputs[g],value:p[g]});else h.push({key:this.inputs[0],value:p});let m=new B0(h);return sE(this.outputs,m)}).forEach((f,d)=>l[d].push(f));return ia(l.map(u=>On(u,0)))})}predict(n,o={}){let i=Tae(n);V5e(i,this.inputNames,this.feedInputShapes,!1);try{let s=o.batchSize==null?32:o.batchSize;return c9(s),this.predictLoop(i,s)}finally{_p(i,n)}}predictOnBatch(n){V5e(n,this.inputNames,this.feedInputShapes,!0);let o=(Array.isArray(n)?n[0]:n).shape[0];return this.predictLoop(n,o)}standardizeUserDataXY(n,o,i=!0,s){if(this.optimizer_==null)throw new pu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let l=0;l<this.feedOutputShapes.length;++l){let u=this.feedOutputShapes[l];this.feedLossFns[l]===yD?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(n=U5e(n,this.feedInputNames,this.feedInputShapes,!1,"input"),o=U5e(o,this.feedOutputNames,a,!1,"target"),kPt(n,o,null),IPt(o,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&n[0].shape[0]%s!==0)throw new Ie(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${n[0].shape[0]} sample(s).`);return[n,o]}standardizeUserData(n,o,i,s,a=!0,l){return je(this,null,function*(){let[u,c]=this.standardizeUserDataXY(n,o,a,l);if(i!=null)throw new Error("sample weight is not supported yet.");let f=null;if(s!=null){let d=l9(s,this.outputNames);f=[];for(let p=0;p<d.length;++p)f.push(yield u9(c[p],null,d[p]))}return[u,c,f]})}testLoop(n,o,i,s=0,a){return Pe(()=>{let l=this.checkNumSamples(o,i,a,"steps"),u=[];if(s>0)throw new wr("Verbose mode is not implemented yet.");if(a!=null)throw new wr("steps mode in testLoop() is not implemented yet");{let c=d9(l,i),f=ai(mu(0,l));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],m=Lx(f,p,h-p),g=f9(o,m),y=n(g);if(d===0)for(let b=0;b<y.length;++b)u.push(Ot(0));for(let b=0;b<y.length;++b){let x=y[b];u[b]=Ke(u[b],we(h-p,x))}}for(let d=0;d<u.length;++d)u[d]=Tt(u[d],l)}return u})}getDedupedMetricsNames(){let n=this.metricsNames,o=[];for(let i=0;i<n.length;++i){let s=n[i],a=s;if(sae(n,s)>1){let l=sae(n.slice(0,i),s);a+=`_${l}`}o.push(a)}return o}makeTrainFunction(){return n=>{let o=[],i=n.slice(0,this.inputs.length),s=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=n.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),l=[],u=()=>{let p=[];for(let y=0;y<this.inputs.length;++y)p.push({key:this.inputs[y],value:i[y]});let h=new B0(p),m=sE(this.outputs,h,{training:!0}),g;for(let y=0;y<this.lossFunctions.length;++y){let b=this.lossFunctions[y],x=b(s[y],m[y]);a[y]!=null&&(x=R5e(x,a[y]));let v=bo(x);o.push(v),y===0?g=x:g=Ke(g,x)}for(let y=0;y<this.metricsTensors.length;++y){let b;if(this.outputs.length>1&&y<this.outputs.length)b=o[y];else{let x=this.metricsTensors[y][0],v=this.metricsTensors[y][1];b=bo(x(s[v],m[v]))}Ms(b),l.push(b)}return g=bo(g),this.calculateLosses().forEach(y=>{g=Ke(g,y)}),g},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(u,!0,c)].concat(l)}}makeTestFunction(){this.testFunction=n=>Pe(()=>{let o=[],i,s=n.slice(0,this.inputs.length),a=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),l=[];for(let f=0;f<this.inputs.length;++f)l.push({key:this.inputs[f],value:s[f]});let u=new B0(l),c=sE(this.outputs,u);for(let f=0;f<this.lossFunctions.length;++f){let d=this.lossFunctions[f],p=bo(d(a[f],c[f]));f===0?i=p:i=Ke(i,p),o.push(i)}for(let f=0;f<this.metricsTensors.length;++f){let d=this.metricsTensors[f][0],p=this.metricsTensors[f][1],h=bo(d(a[p],c[p]));o.push(h)}return o})}fit(s,a){return je(this,arguments,function*(n,o,i={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let l,u,c,f,d,p,h,m,g;try{let y=i.batchSize==null?32:i.batchSize;c9(y);let x=yield this.standardizeUserData(n,o,i.sampleWeight,i.classWeight,!1,y);l=x[0],u=x[1],g=x[2];let v=!1,w;if(i.validationData!=null&&i.validationData.length>0){if(v=!0,i.validationData.length===2)d=i.validationData[0],p=i.validationData[1];else throw i.validationData.length===3?new wr("validationData including sample weights is not supported yet."):new Ie(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${i.validationData} is invalid.`);let D=yield this.standardizeUserData(d,p,null,null,!0,y);h=D[0],m=D[1],w=h.concat(m)}else if(i.validationSplit!=null&&i.validationSplit>0&&i.validationSplit<1){v=!0;let F=Math.floor(l[0].shape[0]*(1-i.validationSplit)),D=l[0].shape[0];h=wD(l,F,D),c=l,l=wD(l,0,F),m=wD(u,F,D),f=u,u=wD(u,0,F),w=h.concat(m)}else i.validationSteps!=null&&(v=!0);let _=l.concat(u).concat(g);this.checkTrainableWeightsConsistency();let S=this.makeTrainFunction(),C=this.getDedupedMetricsNames(),E,T;v?(this.makeTestFunction(),E=this.testFunction,T=C.slice().concat(C.map(F=>"val_"+F))):(E=null,w=[],T=C.slice());let I=Z7(i.callbacks,i.yieldEvery);return yield this.fitLoop(S,_,C,y,i.epochs,i.verbose,I,E,w,i.shuffle,T,i.initialEpoch,null,null)}finally{this.isTraining=!1,_p(l,n),_p(u,o),_p(c,n),_p(f,o),_p(h,d),_p(m,p),g!=null&&Cr(g)}})}fitLoop(n,o,i,s,a,l,u,c,f,d,p,h,m,g){return je(this,null,function*(){s==null&&(s=32),a==null&&(a=1),d==null&&(d=!0),h==null&&(h=0);let y=!1;if(c!=null&&f!=null&&(y=!0),g!=null&&(y=!0,m==null))throw new Ie("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let b=this.checkNumSamples(o,s,m,"steps_per_epoch"),x;b!=null&&(x=mu(0,b)),l==null&&(l=1);let{callbackList:v,history:w}=Q7(u,l,a,h,b,m,s,y,p);v.setModel(this),this.history=w,yield v.onTrainBegin(),this.stopTraining_=!1;for(let _=h;_<a;++_){yield v.onEpochBegin(_);let S={};if(m!=null)throw new wr("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new wr("batch shuffling is not implemneted yet");d&&Y.shuffle(x);let C=ai(x),E=d9(b,s);for(let T=0;T<E.length;++T){let I={};if(yield v.onBatchBegin(T,I),Pe(()=>{let k=E[T][0],F=E[T][1],D=Lx(C,k,F-k);I.batch=T,I.size=F-k;let L=f9(o,D),P=n(L);for(let R=0;R<i.length;++R){let V=i[R],G=P[R];I[V]=G,Ms(G)}if(T===E.length-1&&y){let R=this.testLoop(c,f,s);for(let V=0;V<i.length;++V){let G=i[V],U=R[V];Ms(U),S["val_"+G]=U}}}),yield v.onBatchEnd(T,I),H7(I),this.stopTraining_)break}C.dispose()}if(yield v.onEpochEnd(_,S),this.stopTraining_)break}return yield v.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(n,o){return je(this,null,function*(){return B5e(this,n,o)})}trainOnBatch(n,o){return je(this,null,function*(){let i=yield this.standardizeUserData(n,o),s=i[0],a=i[1],u=this.makeTrainFunction()(s.concat(a)),c=[];for(let f of u){let d=yield f.data();c.push(d[0])}return Cr(u),_p(i[0],n),_p(i[1],o),ia(c)})}getNamedWeights(n){let o=[],i=n!=null&&n.trainableOnly,s=i?this.trainableWeights:this.weights,a=this.getWeights(i);for(let l=0;l<s.length;++l)i&&!s[l].trainable||o.push({name:s[l].originalName,tensor:a[l]});return o}set stopTraining(n){this.stopTraining_=n}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(n){this.optimizer_!==n&&(this.optimizer_=n,this.isOptimizerOwned=!1)}dispose(){let n=super.dispose();if(n.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let o=bI().numTensors;this.optimizer_.dispose(),n.numDisposedVariables+=o-bI().numTensors}return n}getLossIdentifiers(){let n;if(typeof this.loss=="string")n=bp(this.loss);else if(Array.isArray(this.loss)){for(let o of this.loss)if(typeof o!="string")throw new Error("Serialization of non-string loss is not supported.");n=this.loss.map(o=>bp(o))}else{let o=Object.keys(this.loss);n={};let i=this.loss;for(let s of o)if(typeof i[s]=="string")n[s]=bp(i[s]);else throw new Error("Serialization of non-string loss is not supported.")}return n}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[bp(dP(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(n=>bp(dP(n)));{let n={};for(let o in this.metrics)n[o]=bp(dP(this.metrics[o]));return n}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(n){if(n.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(n.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(n.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let o=xD(n.optimizer_config),i=ac(o),s;if(typeof n.loss=="string")s=Px(n.loss);else if(Array.isArray(n.loss))s=n.loss.map(l=>Px(l));else if(n.loss!=null){s={};for(let l in n.loss)s[l]=Px(n.loss[l])}let a;if(Array.isArray(n.metrics))a=n.metrics.map(l=>Px(l));else if(n.metrics!=null){a={};for(let l in n.metrics)a[l]=Px(n.metrics[l])}this.compile({loss:s,metrics:a,optimizer:i})}save(n,o){return je(this,null,function*(){if(typeof n=="string"){let f=bd.getSaveHandlers(n);if(f.length===0)throw new Ie(`Cannot find any save handlers for URL '${n}'`);if(f.length>1)throw new Ie(`Found more than one (${f.length}) save handlers for URL '${n}'`);n=f[0]}if(n.save==null)throw new Ie("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let i=yield bd.encodeWeights(this.getNamedWeights(o)),u={modelTopology:this.toJSON(null,!1),format:NPt,generatedBy:`TensorFlow.js tfjs-layers v${vD}`,convertedBy:null};if((o==null?!1:o.includeOptimizer)&&this.optimizer!=null){u.trainingConfig=this.getTrainingConfig();let f="optimizer",{data:d,specs:p}=yield bd.encodeWeights(yield this.optimizer.getWeights(),f);i.specs.push(...p),i.data=bd.concatenateArrayBuffers([i.data,d])}return this.userDefinedMetadata!=null&&(Eae(this.userDefinedMetadata,this.name,!0),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=i.data,u.weightSpecs=i.specs,n.save(u)})}setUserDefinedMetadata(n){Eae(n,this.name),this.userDefinedMetadata=n}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();tt.registerClass(zx);var MPt=(()=>{class t extends zx{}return t.className="Functional",t})();tt.registerClass(MPt);re();function p9(t,r){return je(this,null,function*(){if(r==null&&(r={}),typeof t=="string"){let n=bd.getLoadHandlers(t,r);if(n.length===0)n.push(bd.browserHTTPRequest(t,r));else if(n.length>1)throw new Ie(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return FPt(t,void 0,r)})}function FPt(t,r,n){return je(this,null,function*(){if(n==null&&(n={}),t.load==null)throw new Ie("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let o=yield t.load(),i=o.modelTopology;i.model_config!=null&&(i=i.model_config);let s=n.strict==null?!0:n.strict,a=o.weightData!=null&&o.weightSpecs!=null&&s,l=ac(xD(i),r,a),u=o.trainingConfig;if(u!=null&&l.loadTrainingConfig(u),o.userDefinedMetadata!=null&&l.setUserDefinedMetadata(o.userDefinedMetadata),o.weightData!=null){if(o.weightSpecs==null)throw new Ie("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:f}=OPt(o.weightData,o.weightSpecs);l.loadWeights(c,s),l.optimizer!=null&&f.length>0&&(yield l.optimizer.setWeights(f)),Cr(c),Cr(f.map(d=>d.tensor))}return l})}function OPt(t,r){let n=bd.decodeWeights(t,r),o={},i=[];return r.forEach(s=>{s.group==="optimizer"?i.push({name:s.name,tensor:n[s.name]}):o[s.name]=n[s.name]}),{modelWeights:o,optimizerWeights:i}}var h9=(()=>{class t extends zx{constructor(n){if(super({inputs:[],outputs:[]}),n=n||{},this.trainable=!0,this.built=!1,this.name=n.name!=null?n.name:Dw("sequential_"),n.layers!=null)for(let o of n.layers)this.add(o)}checkShape(n){if(n.inboundNodes[0].outputTensors[0].shape.some(i=>i<0))throw new Ie(`Negative dimension size caused by adding layer ${n.name} with input shape [${n.inboundNodes[0].inputTensors[0].shape}]`)}add(n){let o=n instanceof t||n instanceof zx,i;if(o){if(i=n,i.outputs.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(i.inputs.length!==1)throw new Ie("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(n.inboundNodes.length===0){if(n.batchInputShape==null)throw new Ie("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let s=G7({batchShape:n.batchInputShape,dtype:n.dtype,name:n.name+"_input"});n.apply(s)}if(o)this.outputs=i.outputs,this.inputs=i.inputs;else{if(n.inboundNodes.length!==1)throw new Ie(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${n.name} which has ${n.inboundNodes.length} pre-existing inbound connections.`);if(n.inboundNodes[0].outputTensors.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[n.inboundNodes[0].outputTensors[0]],this.inputs=bae(this.outputs[0])}this.inboundNodes=[],new Bx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:yp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{let s=n.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(n),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let n=this.layers.length-1;this.layers[n].outboundNodes=[],this.outputs=[this.layers[n].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(n,o){return this.model==null&&this.build(),this.model.call(n,o)}build(n){if(Wr(n),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new zx({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(n,o,i=console.log){this.built||this.build(),super.summary(n,o,i)}setWeights(n){this.model==null&&this.build(),this.model.setWeights(n)}evaluate(n,o,i={}){if(!this.built)throw new pu("The model needs to be compiled before being used.");return this.model.evaluate(n,o,i)}evaluateDataset(n,o){return je(this,null,function*(){if(!this.built)throw new pu("The model needs to be compiled before being used.");return this.model.evaluateDataset(n,o)})}predict(n,o={}){return this.model==null&&this.build(),this.model.predict(n,o)}predictOnBatch(n){return this.model==null&&this.build(),this.model.predictOnBatch(n)}compile(n){this.build(),this.model.compile(n),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(n){this.model.optimizer=n}fit(s,a){return je(this,arguments,function*(n,o,i={}){if(!this.built)throw new pu("The model needs to be compiled before being used.");return this.model.fit(n,o,i)})}fitDataset(n,o){return je(this,null,function*(){if(!this.built)throw new pu("The model needs to be compiled before being used.");return this.model.fitDataset(n,o)})}trainOnBatch(n,o){return je(this,null,function*(){return this.model.trainOnBatch(n,o)})}static fromConfig(n,o,i={},s=!1){let a,l={};if(o instanceof Array){if(o[0].className==null||o[0].className==="Merge")throw new Ie("Legacy serialization format not supported yet.");a=o}else Y.assert(o.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=o.layers,delete o.layers,l=o;let u=new n(l);if(!(u instanceof t))throw new wr(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(let c of a){let d=ac(c,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),u.add(d)}return u}set stopTraining(n){if(this.model==null)throw new Ie("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=n}get stopTraining(){if(this.model==null)throw new Ie("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let n=[];for(let o of this.layers){let i={};i.className=o.getClassName(),i.config=o.getConfig(),n.push(i)}return{name:this.name,layers:n}}}return t.className="Sequential",t})();tt.registerClass(h9);function kae(t){return new h9(t)}function Iae(t){return G7(t)}re();re();re();var Ia=class extends tt.Serializable{getConfig(){return{}}},RPt=(()=>{class t extends Ia{apply(n,o=1){return n5e(n,o)}}return t.className="elu",t})();tt.registerClass(RPt);var PPt=(()=>{class t extends Ia{apply(n){return HI(n)}}return t.className="selu",t})();tt.registerClass(PPt);var LPt=(()=>{class t extends Ia{apply(n){return Ta(n)}}return t.className="relu",t})();tt.registerClass(LPt);var jPt=(()=>{class t extends Ia{apply(n){return Pe(()=>yd(6,Ta(n)))}}return t.className="relu6",t})();tt.registerClass(jPt);var BPt=(()=>{class t extends Ia{apply(n){return n}}return t.className="linear",t})();tt.registerClass(BPt);var $Pt=(()=>{class t extends Ia{apply(n){return Il(n)}}return t.className="sigmoid",t})();tt.registerClass($Pt);var zPt=(()=>{class t extends Ia{apply(n){return i5e(n)}}return t.className="hardSigmoid",t})();tt.registerClass(zPt);var UPt=(()=>{class t extends Ia{apply(n){return jh(n)}}return t.className="softplus",t})();tt.registerClass(UPt);var VPt=(()=>{class t extends Ia{apply(n){return o5e(n)}}return t.className="softsign",t})();tt.registerClass(VPt);var GPt=(()=>{class t extends Ia{apply(n){return Rh(n)}}return t.className="tanh",t})();tt.registerClass(GPt);var Nae=(()=>{class t extends Ia{apply(n,o=-1){return yw(n,o)}}return t.className="softmax",t})();tt.registerClass(Nae);var WPt=(()=>{class t extends Ia{apply(n,o=-1){return $I(n,o)}}return t.className="logSoftmax",t})();tt.registerClass(WPt);var qPt=(()=>{class t extends Ia{apply(n){return Pe(()=>Pe(()=>{let o=Math.sqrt(2),i=we(.5,Ke(1,RI(Tt(n,o))));return we(n,i)}))}}return t.className="gelu",t})();tt.registerClass(qPt);var HPt=(()=>{class t extends Ia{apply(n){return Pe(()=>we(.5,we(n,Ke(1,Rh(we(Zn(Tt(2,Math.PI)),Ke(n,we(.044715,Ha(n,3)))))))))}}return t.className="gelu_new",t})();tt.registerClass(HPt);var YPt=(()=>{class t extends Ia{apply(n){return Pe(()=>we(n,Rh(jh(n))))}}return t.className="mish",t})();tt.registerClass(YPt);var XPt=(()=>{class t extends Ia{apply(n,o=1){return Pe(()=>we(Il(we(n,o)),n))}}return t.className="swish",t})();tt.registerClass(XPt);function Gh(t){return t.getClassName()}function Dae(t,r={}){return L0(t,tt.SerializationMap.getMap().classNameMap,r,"activation")}function Wh(t){if(t==null){let r={};return r.className="linear",r.config={},Dae(r)}if(typeof t=="string"){let r={};return r.className=t,r.config={},Dae(r)}else return t instanceof Ia?t:Dae(t)}re();re();function KPt(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var m9=class extends tt.Serializable{},q5e=(()=>{class t extends m9{constructor(n){super(),KPt(n),this.l1=n==null||n.l1==null?.01:n.l1,this.l2=n==null||n.l2==null?.01:n.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(n){return Pe(()=>{let o=xo([1]);return this.hasL1&&(o=Ke(o,It(we(this.l1,Ao(n))))),this.hasL2&&(o=Ke(o,It(we(this.l2,iE(n))))),Se(o,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(n,o){return new n({l1:o.l1,l2:o.l2})}}return t.className="L1L2",t})();tt.registerClass(q5e);var G5e={l1l2:"L1L2"};function $n(t){return cD(t)}function W5e(t,r={}){return L0(t,tt.SerializationMap.getMap().classNameMap,r,"regularizer")}function ao(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in G5e?G5e[t]:t,config:{}};return W5e(n)}else return t instanceof m9?t:W5e(t)}var Mae=(()=>{class t extends hr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null&&(this.maxValue=n.maxValue)}call(n,o){n=lr(n);let i=Ta(n);return this.maxValue!=null&&(i=ta(i,0,this.maxValue)),i}computeOutputShape(n){return n}getConfig(){let n={maxValue:this.maxValue},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ReLU",t})();tt.registerClass(Mae);var Fae=(()=>{class t extends hr{constructor(n){super(n??{}),this.DEFAULT_ALPHA=.3,n==null&&(n={}),this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=lr(n);return lw(i,this.alpha)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LeakyReLU",t})();tt.registerClass(Fae);var Oae=(()=>{class t extends hr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",n==null&&(n={}),this.supportsMasking=!0,this.alphaInitializer=Qn(n.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ao(n.alphaRegularizer),this.alphaConstraint=ui(n.alphaConstraint),n.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(n.sharedAxes))this.sharedAxes=n.sharedAxes;else if(typeof n.sharedAxes=="number")this.sharedAxes=[n.sharedAxes];else throw new Ie(`Expected sharedAxes to be a number or an array of numbers, but got ${n.sharedAxes}`)}build(n){n=Wr(n);let o=n.slice(1);if(this.sharedAxes!=null)for(let s of this.sharedAxes)o[s-1]=1;this.alpha=this.addWeight("alpha",o,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let i={};if(this.sharedAxes!=null)for(let s=1;s<n.length;++s)i[s]=n[s];this.inputSpec=[new so({ndim:n.length,axes:i})],this.built=!0}call(n,o){return n=lr(n),gw(n,this.alpha.read())}getConfig(){let n={alphaInitializer:vo(this.alphaInitializer),alphaRegularizer:$n(this.alphaRegularizer),alphaConstraint:li(this.alphaConstraint),sharedAxes:this.sharedAxes},o=super.getConfig();return Object.assign(n,o),n}}return t.className="PReLU",t})();tt.registerClass(Oae);var Rae=(()=>{class t extends hr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA=1,n==null&&(n={}),n.alpha!=null&&n.alpha!==this.DEFAULT_ALPHA)throw new wr(`Non-default alpha value (${n.alpha}) is not supported by the ELU layer yet.`);this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=lr(n);return k0(i)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ELU",t})();tt.registerClass(Rae);var Pae=(()=>{class t extends hr{constructor(n){super(n??{}),this.DEFAULT_THETA=1,n==null&&(n={}),this.theta=n.theta==null?this.DEFAULT_THETA:n.theta}call(n,o){let i=lr(n);return we(i,rt(si(i,this.theta),"float32"))}computeOutputShape(n){return n}getConfig(){let n={theta:this.theta},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ThresholdedReLU",t})();tt.registerClass(Pae);var Lae=(()=>{class t extends hr{constructor(n){super(n??{}),this.DEFAULT_AXIS=1,n==null&&(n={}),this.softmax=new Nae().apply,this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis}call(n,o){return Pe(()=>{let i=lr(n),s=o.mask;if(s!=null){let a=we(wt(Hi(i.shape),rt(s,i.dtype)),Ot(-1e9));i=Ke(i,a)}return this.axis instanceof Array?this.axis.length>1?_i(wt(i,fw(i,this.axis,!0))):this.softmax(i,this.axis[0]):this.softmax(i,this.axis)})}computeOutputShape(n){return n}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Softmax",t})();tt.registerClass(Lae);re();re();function Ow(t,r,n){if(typeof t=="number")return yp(t,r);if(t.length!==r)throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${t.length} elements.`);for(let o=0;o<r;++o){let i=t[o];if(!J4e(i))throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function lc(t,r,n,o,i=1){if(t==null)return t;let s=r+(r-1)*(i-1),a;return n==="same"?a=t:a=t-s+1,Math.floor((a+o-1)/o)}function qh(t,r,n,o){if(t==null)return null;if(o==="valid")t=t*r+Vh([n-r,0]);else if(o==="same")t=t*r;else throw new Ie(`Unsupport padding mode: ${o}.`);return t}function hP(t,r){return Pe(()=>(Go(r),r==="channelsFirst"?Gr(t,[0,2,3,1]):t))}function jae(t,r){return Pe(()=>(Go(r),r==="channelsFirst"?Gr(t,[0,2,3,4,1]):t))}function QPt(t,r,n,o=1,i="valid",s,a=1){return Pe(()=>{if(s==null&&(s=gu()),Go(s),t.shape.length!==3)throw new Ie(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(r.shape.length!==3)throw new Ie(`The kernel for a conv1dWithBias operation should be 3, but is ${r.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ie(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=Gr(t,[0,2,1])),i==="causal")throw new wr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=DI(t,r,o,i==="same"?"same":"valid","NWC",a);return n!=null&&(l=yu(l,n)),l})}function H5e(t,r,n,o=[1,1],i="valid",s,a,l=null){return Pe(()=>{if(s==null&&(s=gu()),Go(s),t.rank!==3&&t.rank!==4)throw new Ie(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(r.rank!==3&&r.rank!==4)throw new Ie(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=hP(t,s);if(i==="causal")throw new wr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=_w.conv2d({x:u,filter:r,strides:o,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:l}),s==="channelsFirst"&&(u=Gr(u,[0,3,1,2])),u})}function JPt(t,r,n,o=[1,1,1],i="valid",s,a){return Pe(()=>{if(s==null&&(s=gu()),Go(s),t.rank!==4&&t.rank!==5)throw new Ie(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(r.rank!==4&&r.rank!==5)throw new Ie(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let l=jae(t,s);if(i==="causal")throw new wr("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=eU(l,r,o,i==="same"?"same":"valid","NDHWC",a),n!=null&&(l=yu(l,n)),s==="channelsFirst"&&(l=Gr(l,[0,4,1,2,3])),l})}var pP=class t extends hr{constructor(r,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(n),this.rank=r,Fi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new wr(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Ow(n.kernelSize,r,"kernelSize"),this.strides=Ow(n.strides==null?1:n.strides,r,"strides"),this.padding=n.padding==null?"valid":n.padding,hu(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Go(this.dataFormat),this.activation=Wh(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ui(n.biasConstraint),this.biasRegularizer=ao(n.biasRegularizer),this.activityRegularizer=ao(n.activityRegularizer),this.dilationRate=Ow(n.dilationRate==null?1:n.dilationRate,r,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ie(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ie(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ie(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(r){if(vd("kernelSize"in r,"required key 'kernelSize' not in config"),typeof r.kernelSize!="number"&&!M7(r.kernelSize,"number",1,3))throw new Ie(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(r.kernelSize)}.`)}getConfig(){let r={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Gh(this.activation),useBias:this.useBias,biasInitializer:vo(this.biasInitializer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),biasConstraint:li(this.biasConstraint)},n=super.getConfig();return Object.assign(r,n),r}},_D=class t extends pP{constructor(r,n){super(r,n),this.kernel=null,t.verifyArgs(n),this.filters=n.filters,Fi(this.filters,"filters"),this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ui(n.kernelConstraint),this.kernelRegularizer=ao(n.kernelRegularizer)}build(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?1:r.length-1;if(r[n]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${r[n]}`);let o=r[n],i=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:o}}],this.built=!0}call(r,n){return Pe(()=>{r=lr(r);let o,i=this.bias==null?null:this.bias.read(),s=F7(this.activation.getClassName());if(s!=null&&this.rank===2)o=H5e(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)o=QPt(r,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)o=H5e(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)o=JPt(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new wr("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(o=this.activation.apply(o))}return o})}computeOutputShape(r){r=Wr(r);let n=[],o=this.dataFormat==="channelsLast"?r.slice(1,r.length-1):r.slice(2);for(let s=0;s<o.length;++s){let a=lc(o[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[r[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){let r={filters:this.filters,kernelInitializer:vo(this.kernelInitializer),kernelRegularizer:$n(this.kernelRegularizer),kernelConstraint:li(this.kernelConstraint)},n=super.getConfig();return Object.assign(r,n),r}static verifyArgs(r){if(!("filters"in r)||typeof r.filters!="number"||r.filters<1)throw new Ie(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(r.filters)}`)}},g9=(()=>{class t extends _D{constructor(n){super(2,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!M7(n.kernelSize,"number",1,2))throw new Ie(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv2D",t})();tt.registerClass(g9);var y9=(()=>{class t extends _D{constructor(n){super(3,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!(Array.isArray(n.kernelSize)&&(n.kernelSize.length===1||n.kernelSize.length===3)))throw new Ie(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv3D",t})();tt.registerClass(y9);var Bae=(()=>{class t extends g9{constructor(n){if(super(n),this.inputSpec=[new so({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Wr(n),n.length!==4)throw new Ie("Input should have rank 4; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new so({ndim:4,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{let i=lr(n);if(i.shape.length!==4)throw new Ie(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u;this.dataFormat==="channelsFirst"?(l=2,u=3):(l=1,u=2);let c=s[l],f=s[u],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],m=this.strides[1],g=qh(c,h,d,this.padding),y=qh(f,m,p,this.padding),b=[a,g,y,this.filters];this.dataFormat!=="channelsLast"&&(i=Gr(i,[0,2,3,1]));let x=MI(i,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Gr(x,[0,3,1,2])),this.bias!=null&&(x=yu(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(n){n=Wr(n);let o=n.slice(),i,s,a;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3):(i=3,s=1,a=2);let l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],f=this.strides[1];return o[i]=this.filters,o[s]=qh(o[s],c,l,this.padding),o[a]=qh(o[a],f,u,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv2DTranspose",t})();tt.registerClass(Bae);var $ae=(()=>{class t extends y9{constructor(n){if(super(n),this.inputSpec=[new so({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Wr(n),n.length!==5)throw new Ie("Input should have rank 5; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new so({ndim:5,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{let i=lr(n);if(i.shape.length!==5)throw new Ie(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u,c;this.dataFormat==="channelsFirst"?(c=2,l=3,u=4):(c=1,l=2,u=3);let f=s[c],d=s[l],p=s[u],h=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[0],b=this.strides[1],x=this.strides[2],v=qh(f,y,h,this.padding),w=qh(d,b,m,this.padding),_=qh(p,x,g,this.padding),S=[a,v,w,_,this.filters];this.dataFormat!=="channelsLast"&&(i=Gr(i,[0,2,3,4,1]));let C=rU(i,this.kernel.read(),S,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Gr(C,[0,4,1,2,3])),this.bias!==null&&(C=yu(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(n){n=Wr(n);let o=n.slice(),i,s,a,l;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3,l=4):(i=4,s=1,a=2,l=3);let u=this.kernelSize[0],c=this.kernelSize[1],f=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return o[i]=this.filters,o[s]=qh(o[s],d,u,this.padding),o[a]=qh(o[a],p,c,this.padding),o[l]=qh(o[l],h,f,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv3DTranspose",t})();tt.registerClass($ae);var eLt=(()=>{class t extends _D{constructor(n,o){if(super(n,o),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,o.filters==null)throw new Ie("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(o.kernelInitializer!=null||o.kernelRegularizer!=null||o.kernelConstraint!=null)throw new Ie("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(o.padding!=null&&o.padding!=="same"&&o.padding!=="valid")throw new Ie(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(o.padding)}`);this.depthMultiplier=o.depthMultiplier==null?1:o.depthMultiplier,this.depthwiseInitializer=Qn(o.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ao(o.depthwiseRegularizer),this.depthwiseConstraint=ui(o.depthwiseConstraint),this.pointwiseInitializer=Qn(o.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ao(o.pointwiseRegularizer),this.pointwiseConstraint=ui(o.pointwiseConstraint)}build(n){if(n=Wr(n),n.length<this.rank+2)throw new Ie(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(n)}`);let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(n[o])}`);let i=n[o],s=this.kernelSize.concat([i,this.depthMultiplier]),a=[];for(let u=0;u<this.rank;++u)a.push(1);a.push(i*this.depthMultiplier,this.filters);let l=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,l,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,l,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,l,this.biasConstraint):this.bias=null,this.inputSpec=[new so({ndim:this.rank+2,axes:{[o]:i}})],this.built=!0}call(n,o){return Pe(()=>{n=lr(n);let i;if(this.rank===1)throw new wr("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(n=Gr(n,[0,2,3,1])),i=YI(n,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=yu(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),this.dataFormat==="channelsFirst"&&(i=Gr(i,[0,3,1,2])),i})}getConfig(){let n=super.getConfig();return delete n.rank,delete n.kernelInitializer,delete n.kernelRegularizer,delete n.kernelConstraint,n.depthwiseInitializer=vo(this.depthwiseInitializer),n.pointwiseInitializer=vo(this.pointwiseInitializer),n.depthwiseRegularizer=$n(this.depthwiseRegularizer),n.pointwiseRegularizer=$n(this.pointwiseRegularizer),n.depthwiseConstraint=li(this.depthwiseConstraint),n.pointwiseConstraint=li(this.pointwiseConstraint),n}}return t.className="SeparableConv",t})();var zae=(()=>{class t extends eLt{constructor(n){super(2,n)}}return t.className="SeparableConv2D",t})();tt.registerClass(zae);var Uae=(()=>{class t extends _D{constructor(n){super(1,n),t.verifyArgs(n),this.inputSpec=[{ndim:3}]}getConfig(){let n=super.getConfig();return delete n.rank,delete n.dataFormat,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!M7(n.kernelSize,"number",1,1))throw new Ie(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv1D",t})();tt.registerClass(Uae);var Vae=(()=>{class t extends hr{constructor(n){super(n),typeof n.cropping=="number"?this.cropping=[[n.cropping,n.cropping],[n.cropping,n.cropping]]:typeof n.cropping[0]=="number"?this.cropping=[[n.cropping[0],n.cropping[0]],[n.cropping[1],n.cropping[1]]]:this.cropping=n.cropping,this.dataFormat=n.dataFormat===void 0?"channelsLast":n.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(n){return this.dataFormat==="channelsFirst"?[n[0],n[1],n[2]-this.cropping[0][0]-this.cropping[0][1],n[3]-this.cropping[1][0]-this.cropping[1][1]]:[n[0],n[1]-this.cropping[0][0]-this.cropping[0][1],n[2]-this.cropping[1][0]-this.cropping[1][1],n[3]]}call(n,o){return Pe(()=>{if(n=lr(n),this.dataFormat==="channelsLast"){let i=iP(n,this.cropping[0][0],n.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return iP(i,this.cropping[1][0],n.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let i=iP(n,this.cropping[0][0],n.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return iP(i,this.cropping[1][0],n.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let n={cropping:this.cropping,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Cropping2D",t})();tt.registerClass(Vae);var Gae=(()=>{class t extends hr{constructor(n){super(n),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=n.size==null?this.DEFAULT_SIZE:n.size,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Go(this.dataFormat),this.interpolation=n.interpolation==null?"nearest":n.interpolation,Z4e(this.interpolation)}computeOutputShape(n){if(this.dataFormat==="channelsFirst"){let o=n[2]==null?null:this.size[0]*n[2],i=n[3]==null?null:this.size[1]*n[3];return[n[0],n[1],o,i]}else{let o=n[1]==null?null:this.size[0]*n[1],i=n[2]==null?null:this.size[1]*n[2];return[n[0],o,i,n[3]]}}call(n,o){return Pe(()=>{let i=lr(n),s=i.shape;if(this.dataFormat==="channelsFirst"){i=Gr(i,[0,2,3,1]);let a=this.size[0]*s[2],l=this.size[1]*s[3],u=this.interpolation==="nearest"?sc.resizeNearestNeighbor(i,[a,l]):sc.resizeBilinear(i,[a,l]);return Gr(u,[0,3,1,2])}else{let a=this.size[0]*s[1],l=this.size[1]*s[2];return this.interpolation==="nearest"?sc.resizeNearestNeighbor(i,[a,l]):sc.resizeBilinear(i,[a,l])}})}getConfig(){let n={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}}return t.className="UpSampling2D",t})();tt.registerClass(Gae);re();re();function tLt(t,r,n=[1,1],o="valid",i,s){return Pe(()=>{i==null&&(i=gu()),Go(i);let a=hP(t,i);if(t.rank!==4)throw new Ie(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(r.rank!==4)throw new Ie(`depthwiseKernel is required to be 4-D, but is instead ${r.rank}-D`);return a=A0(a,r,n,o==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=Gr(a,[0,3,1,2])),a})}var Wae=(()=>{class t extends pP{constructor(n){super(2,n),this.depthwiseKernel=null,this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Qn(n.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ui(n.depthwiseConstraint),this.depthwiseRegularizer=ao(n.depthwiseRegularizer)}build(n){if(n=Wr(n),n.length<4)throw new Ie(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(n)}.`);let o=this.dataFormat==="channelsFirst"?1:3;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${n[o]}).`);let i=n[o],s=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{n=lr(n);let i=tLt(n,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(i=yu(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),i})}computeOutputShape(n){n=Wr(n);let o=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2],s=this.dataFormat==="channelsFirst"?n[1]*this.depthMultiplier:n[3]*this.depthMultiplier,a=lc(o,this.kernelSize[0],this.padding,this.strides[0]),l=lc(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[n[0],s,a,l]:[n[0],a,l,s]}getConfig(){let n=super.getConfig();return n.depthMultiplier=this.depthMultiplier,n.depthwiseInitializer=vo(this.depthwiseInitializer),n.depthwiseRegularizer=$n(this.depthwiseRegularizer),n.depthwiseConstraint=li(this.depthwiseRegularizer),n}}return t.className="DepthwiseConv2D",t})();tt.registerClass(Wae);re();re();re();re();function qae(t,r,n,o){if(Array.isArray(t)){if(r!=null||n!=null)throw new Ie("When inputs is an array, neither initialState or constants should be provided");o!=null&&(n=t.slice(t.length-o,t.length),t=t.slice(0,t.length-o)),t.length>1&&(r=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return r=i(r),n=i(n),{inputs:t,initialState:r,constants:n}}function Hae(t,r,n,o=!1,i,s,a=!1,l=!1){return Pe(()=>{let u=r.shape.length;if(u<3)throw new Ie(`Input should be at least 3D, but is ${u}D.`);let c=[1,0].concat(mu(2,u));if(r=Gr(r,c),s!=null)throw new wr("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=rt(rt(i,"bool"),"float32"),i.rank===u-1&&(i=Ni(i,-1)),i=Gr(i,c)),o&&(r=bs(r,0),i!=null&&(i=bs(i,0)));let f=[],d,p=n,h=r.shape[0],m=Xa(r),g;i!=null&&(g=Xa(i));for(let b=0;b<h;++b){let x=m[b],v=Pe(()=>t(x,p));if(i==null)d=v[0],p=v[1];else{let w=Pe(()=>{let _=g[b],S=wt(Os(_),_),C=Ke(we(v[0],_),we(p[0],S)),E=p.map((T,I)=>Ke(we(v[1][I],_),we(T,S)));return{output:C,newStates:E}});d=w.output,p=w.newStates}l&&f.push(d)}let y;return l&&(y=as(f,1)),[d,y,p]})}var $0=(()=>{class t extends hr{constructor(n){super(n);let o;if(n.cell==null)throw new Ie("cell property is missing for the constructor of RNN.");if(Array.isArray(n.cell)?o=new v9({cells:n.cell}):o=n.cell,o.stateSize==null)throw new Ie("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=o,this.returnSequences=n.returnSequences==null?!1:n.returnSequences,this.returnState=n.returnState==null?!1:n.returnState,this.goBackwards=n.goBackwards==null?!1:n.goBackwards,this._stateful=n.stateful==null?!1:n.stateful,this.unroll=n.unroll==null?!1:n.unroll,this.supportsMasking=!0,this.inputSpec=[new so({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return mu(0,n).map(o=>null)}else return this.states_}setStates(n){this.states_=n}computeOutputShape(n){V7(n)&&(n=n[0]),n=n;let o=this.cell.stateSize;Array.isArray(o)||(o=[o]);let i=o[0],s;if(this.returnSequences?s=[n[0],n[1],i]:s=[n[0],i],this.returnState){let a=[];for(let l of o)a.push([n[0],l]);return[s].concat(a)}else return s}computeMask(n,o){return Pe(()=>{Array.isArray(o)&&(o=o[0]);let i=this.returnSequences?o:null;if(this.returnState){let s=this.states.map(a=>null);return[i].concat(s)}else return i})}get states(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,o=[];for(let i=0;i<n;++i)o.push(null);return o}else return this.states_}set states(n){this.states_=n}build(n){if(this.numConstants!=null)throw new wr("Constants support is not implemented in RNN yet.");V7(n)&&(n=n[0]),n=n;let i=this.stateful?n[0]:null,s=n.slice(2);this.inputSpec[0]=new so({shape:[i,null,...s]});let a=[n[0]].concat(n.slice(2));this.cell.build(a);let l;if(Array.isArray(this.cell.stateSize)?l=this.cell.stateSize:l=[this.cell.stateSize],this.stateSpec!=null){if(!Y.arraysEqual(this.stateSpec.map(u=>u.shape[u.shape.length-1]),l))throw new Ie(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(u=>new so({shape:[null,u]}));this.stateful&&this.resetStates()}resetStates(n,o=!1){Pe(()=>{if(!this.stateful)throw new xd("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape[0];if(i==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>xo([i,s])):this.states_=[xo([i,this.cell.stateSize])];else if(n==null)Cr(this.states_),this.keptStates!=null&&(Cr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>xo([i,s])):this.states_[0]=xo([i,this.cell.stateSize]);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o===!0?this.keptStates.push(this.states_.slice()):Cr(this.states_);for(let s=0;s<this.states_.length;++s){let a=n[s],l=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,u=[i,l];if(!Y.arraysEqual(a.shape,u))throw new Ie(`State ${s} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>Ms(s.clone()))})}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=qae(n,i,s,this.numConstants);n=a.inputs,i=a.initialState,s=a.constants;let l=[],u=[];if(i!=null){o.initialState=i,l=l.concat(i),this.stateSpec=[];for(let f of i)this.stateSpec.push(new so({shape:f.shape}));u=u.concat(this.stateSpec)}if(s!=null&&(o.constants=s,l=l.concat(s),this.numConstants=s.length),l[0]instanceof Fl){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let h=super.apply(f,o);return this.inputSpec=p,h}else return super.apply(n,o)}call(n,o){return Pe(()=>{let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;n=lr(n),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(n));let l=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==l)throw new Ie(`RNN Layer has ${l} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let u={training:s},f=Hae((g,y)=>{let b=this.cell.call([g].concat(y),u);return[b[0],b.slice(1)]},n,a,this.goBackwards,i,null,this.unroll,this.returnSequences),d=f[0],p=f[1],h=f[2];this.stateful&&this.resetStates(h,s);let m=this.returnSequences?p:d;return this.returnState?[m].concat(h):m})}getInitialState(n){return Pe(()=>{let o=xo(n.shape);return o=It(o,[1,2]),o=jx(o),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>i>1?B7(o,[1,i]):o):this.cell.stateSize>1?[B7(o,[1,this.cell.stateSize])]:[o]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(n)}getConfig(){let n=super.getConfig(),o={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(o.numConstants=this.numConstants);let i=this.cell.getConfig();return this.getClassName()===t.className&&(o.cell={className:this.cell.getClassName(),config:i}),Object.assign(Object.assign(Object.assign({},i),n),o)}static fromConfig(n,o,i={}){let s=o.cell,a=ac(s,i);return new n(Object.assign(o,{cell:a}))}}return t.className="RNN",t})();tt.registerClass($0);var Ux=class extends hr{},b9=(()=>{class t extends Ux{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Fi(this.units,"units"),this.activation=Wh(n.activation==null?this.DEFAULT_ACTIVATION:n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qn(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ao(n.kernelRegularizer),this.recurrentRegularizer=ao(n.recurrentRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.kernelConstraint=ui(n.kernelConstraint),this.recurrentConstraint=ui(n.recurrentConstraint),this.biasConstraint=ui(n.biasConstraint),this.dropout=oE([1,Vh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=oE([1,Vh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Wr(n),this.kernel=this.addWeight("kernel",[n[n.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{if(n=n,n.length!==2)throw new Ie(`SimpleRNNCell expects 2 input Tensors, got ${n.length}.`);let i=n[1];n=n[0];let s=o.training==null?!1:o.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vx({ones:()=>Os(n),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vx({ones:()=>Os(i),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a,l=this.dropoutMask,u=this.recurrentDropoutMask;l!=null?a=wp(we(n,l),this.kernel.read()):a=wp(n,this.kernel.read()),this.bias!=null&&(a=yu(a,this.bias.read())),u!=null&&(i=we(i,u));let c=Ke(a,wp(i,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Gh(this.activation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),recurrentInitializer:vo(this.recurrentInitializer),biasInitializer:vo(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:li(this.kernelConstraint),recurrentConstraint:li(this.recurrentConstraint),biasConstraint:li(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},n),o)}}return t.className="SimpleRNNCell",t})();tt.registerClass(b9);var Yae=(()=>{class t extends $0{constructor(n){n.cell=new b9(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return new n(o)}}return t.className="SimpleRNN",t})();tt.registerClass(Yae);var x9=(()=>{class t extends Ux{constructor(n){if(super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.resetAfter)throw new Ie("GRUCell does not support reset_after parameter set to true.");this.units=n.units,Fi(this.units,"units"),this.activation=Wh(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Wh(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qn(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ao(n.kernelRegularizer),this.recurrentRegularizer=ao(n.recurrentRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.kernelConstraint=ui(n.kernelConstraint),this.recurrentConstraint=ui(n.recurrentConstraint),this.biasConstraint=ui(n.biasConstraint),this.dropout=oE([1,Vh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=oE([1,Vh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Wr(n);let o=n[n.length-1];this.kernel=this.addWeight("kernel",[o,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return Pe(()=>{if(n=n,n.length!==2)throw new Ie(`GRUCell expects 2 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training==null?!1:o.training,s=n[1];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vx({ones:()=>Os(n),rate:this.dropout,training:i,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vx({ones:()=>Os(s),rate:this.recurrentDropout,training:i,count:3,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,u,c,f;0<this.dropout&&this.dropout<1&&(n=we(n,a[0]));let d=wp(n,this.kernel.read());this.useBias&&(d=yu(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,l[0]));let p=this.recurrentKernel.read(),[h,m]=xs(p,[2*this.units,this.units],p.rank-1),g=wp(s,h),[y,b,x]=xs(d,3,d.rank-1),[v,w]=xs(g,2,g.rank-1);u=this.recurrentActivation.apply(Ke(y,v)),c=this.recurrentActivation.apply(Ke(b,w));let _=wp(we(c,s),m);f=this.activation.apply(Ke(x,_));let S=Ke(we(u,s),we(Ke(1,Zr(u)),f));return[S,S]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Gh(this.activation),recurrentActivation:Gh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),recurrentInitializer:vo(this.recurrentInitializer),biasInitializer:vo(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:li(this.kernelConstraint),recurrentConstraint:li(this.recurrentConstraint),biasConstraint:li(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},n),o)}}return t.className="GRUCell",t})();tt.registerClass(x9);var Xae=(()=>{class t extends $0{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new x9(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="GRU",t})();tt.registerClass(Xae);var SD=(()=>{class t extends Ux{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Fi(this.units,"units"),this.activation=Wh(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Wh(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qn(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=n.unitForgetBias,this.kernelRegularizer=ao(n.kernelRegularizer),this.recurrentRegularizer=ao(n.recurrentRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.kernelConstraint=ui(n.kernelConstraint),this.recurrentConstraint=ui(n.recurrentConstraint),this.biasConstraint=ui(n.biasConstraint),this.dropout=oE([1,Vh([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=oE([1,Vh([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){var o;n=Wr(n);let i=n[n.length-1];this.kernel=this.addWeight("kernel",[i,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){let a=this.biasInitializer,l=this.units;s=new(o=class extends bu{apply(c,f){let d=a.apply([l]),p=new U7().apply([l]),h=a.apply([l*2]);return fae(fae(d,p),h)}},o.className="CustomInit",o)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(n,o){return Pe(()=>{let i=o.training==null?!1:o.training;if(n=n,n.length!==3)throw new Ie(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let s=n[1],a=n[2];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vx({ones:()=>Os(n),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vx({ones:()=>Os(s),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));let l=this.dropoutMask,u=this.recurrentDropoutMask,c,f,d,p;0<this.dropout&&this.dropout<1&&(n=we(n,l[0]));let h=wp(n,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,u[0])),h=Ke(h,wp(s,this.recurrentKernel.read())),this.useBias&&(h=yu(h,this.bias.read()));let[m,g,y,b]=xs(h,4,h.rank-1);c=this.recurrentActivation.apply(m),f=this.recurrentActivation.apply(g),d=Ke(we(f,a),we(c,this.activation.apply(y))),p=this.recurrentActivation.apply(b);let x=we(p,this.activation.apply(d));return[x,x,d]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Gh(this.activation),recurrentActivation:Gh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),recurrentInitializer:vo(this.recurrentInitializer),biasInitializer:vo(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$n(this.kernelRegularizer),recurrentRegularizer:$n(this.recurrentRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:li(this.kernelConstraint),recurrentConstraint:li(this.recurrentConstraint),biasConstraint:li(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},n),o)}}return t.className="LSTMCell",t})();tt.registerClass(SD);var Kae=(()=>{class t extends $0{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new SD(n),super(n)}call(n,o){return Pe(()=>{this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="LSTM",t})();tt.registerClass(Kae);var v9=(()=>{class t extends Ux{constructor(n){super(n),this.cells=n.cells}get stateSize(){let n=[];for(let o of this.cells.slice().reverse())Array.isArray(o.stateSize)?n.push(...o.stateSize):n.push(o.stateSize);return n}call(n,o){return Pe(()=>{n=n;let i=n.slice(1),s=[];for(let u of this.cells.slice().reverse())Array.isArray(u.stateSize)?s.push(i.splice(0,u.stateSize.length)):s.push(i.splice(0,1));s.reverse();let a=[],l;for(let u=0;u<this.cells.length;++u){let c=this.cells[u];i=s[u],u===0?l=[n[0]].concat(i):l=[l[0]].concat(i),l=c.call(l,o),a.push(l.slice(1))}i=[];for(let u of a.slice().reverse())i.push(...u);return[l[0]].concat(i)})}build(n){V7(n)&&(n=n[0]),n=n;let o;this.cells.forEach((i,s)=>{Uh(`RNNCell_${s}`,()=>{i.build(n),Array.isArray(i.stateSize)?o=i.stateSize[0]:o=i.stateSize,n=[n[0],o]})}),this.built=!0}getConfig(){let n=super.getConfig(),o=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(o)};return Object.assign(Object.assign({},n),s)}static fromConfig(n,o,i={}){let s=[];for(let a of o.cells)s.push(ac(a,i));return new n({cells:s})}get trainableWeights(){if(!this.trainable)return[];let n=[];for(let o of this.cells)n.push(...o.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let o of this.cells)n.push(...o.nonTrainableWeights);if(!this.trainable){let o=[];for(let i of this.cells)o.push(...i.trainableWeights);return o.concat(n)}return n}getWeights(){let n=[];for(let o of this.cells)n.push(...o.weights);return aP(n)}setWeights(n){let o=[];for(let i of this.cells){let s=i.weights.length,a=n.splice(s);for(let l=0;l<i.weights.length;++l)o.push([i.weights[l],a[l]])}gD(o)}}return t.className="StackedRNNCells",t})();tt.registerClass(v9);function Vx(t){let{ones:r,rate:n,training:o=!1,count:i=1,dropoutFunc:s}=t,a=()=>s!=null?s(r(),n):z7(r(),n),l=()=>Nw(a,r,o);return!i||i<=1?Ms(l().clone()):Array(i).fill(void 0).map(l).map(c=>Ms(c.clone()))}var rLt=function(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n};var nLt=(()=>{class t extends $0{constructor(n){if(n.unroll)throw new wr("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(n.cell))throw new wr("It is not possible at the moment to stack convolutional cells.");super(n),this.inputSpec=[new so({ndim:5})]}call(n,o){return Pe(()=>{if(this.cell.dropoutMask!=null&&(Cr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Cr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),o&&o.constants)throw new Ie("ConvRNN2D cell does not support constants");let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}computeOutputShape(n){let o=this.computeSingleOutputShape(n);return this.returnSequences||(o=[o[0],...o.slice(2)]),this.returnState&&(o=[o,...Array(2).fill([n[0],...o.slice(-3)])]),o}getInitialState(n){return Pe(()=>{let{stateSize:o}=this.cell,i=n.shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)],l=xo(a);return Array.isArray(o)?Array(o.length).fill(l):[l]})}resetStates(n,o=!1){Pe(()=>{if(!this.stateful)throw new xd("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)];if(i[0]==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xo(a)):this.states_=[xo(a)];else if(n==null)Cr(this.states_),this.keptStates!=null&&(Cr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xo(a)):this.states_[0]=xo(a);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o?this.keptStates.push(this.states_.slice()):Cr(this.states_);for(let u=0;u<this.states_.length;++u){let c=n[u],f=a;if(!Y.arraysEqual(c.shape,f))throw new Ie(`State ${u} is incompatible with layer ${this.name}: expected shape=${f}, received shape=${c.shape}`);this.states_[u]=c}}this.states_=this.states_.map(u=>Ms(u.clone()))})}computeSingleOutputShape(n){let{dataFormat:o,filters:i,kernelSize:s,padding:a,strides:l,dilationRate:u}=this.cell,c=o==="channelsFirst",f=n[c?3:2],d=n[c?4:3],p=lc(f,s[0],a,l[0],u[0]),h=lc(d,s[1],a,l[1],u[1]);return[...n.slice(0,2),...c?[i,p,h]:[p,h,i]]}}return t.className="ConvRNN2D",t})(),w9=(()=>{class t extends SD{constructor(n){let{filters:o,kernelSize:i,strides:s,padding:a,dataFormat:l,dilationRate:u}=n;super(Object.assign(Object.assign({},n),{units:o})),this.filters=o,Fi(this.filters,"filters"),this.kernelSize=Ow(i,2,"kernelSize"),this.kernelSize.forEach(c=>Fi(c,"kernelSize")),this.strides=Ow(s||1,2,"strides"),this.strides.forEach(c=>Fi(c,"strides")),this.padding=a||"valid",hu(this.padding),this.dataFormat=l||"channelsLast",Go(this.dataFormat),this.dilationRate=Ow(u||1,2,"dilationRate"),this.dilationRate.forEach(c=>Fi(c,"dilationRate"))}build(n){var o;n=Wr(n);let i=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[i]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${n[i]}`);let s=n[i],a=4,l=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",l,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let u=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let f=this.biasInitializer,d=this.filters;c=new(o=class extends bu{apply(h,m){let g=f.apply([d]),y=Hi([d]),b=f.apply([d*2]);return dD([g,y,b])}},o.className="CustomInit",o)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(n,o){return Pe(()=>{if(n.length!==3)throw new Ie(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training||!1,s=n[0],a=n[1],l=n[2],u=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Vx({ones:()=>Os(s),rate:this.dropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,f=(X,fe,$)=>!fe||!fe[$]?X:we(fe[$],X),d=f(s,c,0),p=f(s,c,1),h=f(s,c,2),m=f(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Vx({ones:()=>Os(a),rate:this.recurrentDropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,y=f(a,g,0),b=f(a,g,1),x=f(a,g,2),v=f(a,g,3),w=3,[_,S,C,E]=xs(this.kernel.read(),u,w),[T,I,k,F]=this.useBias?xs(this.bias.read(),u):[null,null,null,null];d=this.inputConv(d,_,T,this.padding),p=this.inputConv(p,S,I,this.padding),h=this.inputConv(h,C,k,this.padding),m=this.inputConv(m,E,F,this.padding);let[D,L,P,R]=xs(this.recurrentKernel.read(),u,w);y=this.recurrentConv(y,D),b=this.recurrentConv(b,L),x=this.recurrentConv(x,P),v=this.recurrentConv(v,R);let V=this.recurrentActivation.apply(Ke(d,y)),G=this.recurrentActivation.apply(Ke(p,b)),U=Ke(we(G,l),we(V,this.activation.apply(Ke(h,x)))),H=we(this.recurrentActivation.apply(Ke(m,v)),this.activation.apply(U));return[H,H,U]})}getConfig(){let n=super.getConfig(),{units:o}=n,i=rLt(n,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},i),s)}inputConv(n,o,i,s){let a=nc(n,o,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return i?yu(a,i,this.dataFormat):a}recurrentConv(n,o){return nc(n,o,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();tt.registerClass(w9);var Zae=(()=>{class t extends nLt{constructor(n){let o=new w9(n);super(Object.assign(Object.assign({},n),{cell:o}))}static fromConfig(n,o){return new n(o)}}return t.className="ConvLSTM2D",t})();tt.registerClass(Zae);re();var _9=(()=>{class t extends hr{constructor(n){super(n),this.rate=Math.max(Math.min(n.rate,1),0),this.noiseShape=n.noiseShape,this.seed=n.seed,this.supportsMasking=!0}getNoiseShape(n){if(this.noiseShape==null)return this.noiseShape;let o=n.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(this.noiseShape[s]==null?o[s]:this.noiseShape[s]);return i}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);if(0<this.rate&&this.rate<1){let s=o.training==null?!1:o.training,a=this.getNoiseShape(i);return Nw(()=>z7(i,this.rate,a,this.seed),()=>i,s)}return n})}getConfig(){let n={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},o=super.getConfig();return Object.assign(n,o),n}dispose(){return super.dispose()}}return t.className="Dropout",t})();tt.registerClass(_9);var Qae=(()=>{class t extends _9{constructor(n){super(n),this.inputSpec=[{ndim:3}]}getNoiseShape(n){let o=n.shape;return[o[0],1,o[2]]}}return t.className="SpatialDropout1D",t})();tt.registerClass(Qae);var Jae=(()=>{class t extends hr{constructor(n){if(super(n),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.batchInputShape==null&&n.inputShape==null&&n.inputDim!=null){let o=null;n.batchSize!=null&&(o=n.batchSize),this.batchInputShape=[o,n.inputDim]}this.units=n.units,Fi(this.units,"units"),this.activation=Wh(n.activation),n.useBias!=null&&(this.useBias=n.useBias),this.kernelInitializer=Qn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Qn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ui(n.kernelConstraint),this.biasConstraint=ui(n.biasConstraint),this.kernelRegularizer=ao(n.kernelRegularizer),this.biasRegularizer=ao(n.biasRegularizer),this.activityRegularizer=ao(n.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(n){n=Wr(n);let o=n[n.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[o,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:o}}],this.built=!0}computeOutputShape(n){n=Wr(n);let o=n.slice();return o[o.length-1]=this.units,o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n),s=F7(this.activation.getClassName()),a;return s!=null?a=wp(i,this.kernel.read(),s,this.bias?this.bias.read():null):(a=wp(i,this.kernel.read()),this.bias!=null&&(a=yu(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){let n={units:this.units,activation:Gh(this.activation),useBias:this.useBias,kernelInitializer:vo(this.kernelInitializer),biasInitializer:vo(this.biasInitializer),kernelRegularizer:$n(this.kernelRegularizer),biasRegularizer:$n(this.biasRegularizer),activityRegularizer:$n(this.activityRegularizer),kernelConstraint:li(this.kernelConstraint),biasConstraint:li(this.biasConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dense",t})();tt.registerClass(Jae);var ele=(()=>{class t extends hr{constructor(n){n=n||{},super(n),this.inputSpec=[{minNDim:3}],this.dataFormat=n.dataFormat}computeOutputShape(n){n=Wr(n);for(let o of n.slice(1))if(o==null)throw new Ie(`The shape of the input to "Flatten" is not fully defined (got ${n.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[n[0],vp(n,1)]}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);if(this.dataFormat==="channelsFirst"&&i.rank>1){let s=[0];for(let a=2;a<i.rank;++a)s.push(a);s.push(1),i=Gr(i,s)}return r5e(i)})}getConfig(){let n={};this.dataFormat!=null&&(n.dataFormat=this.dataFormat);let o=super.getConfig();return Object.assign(n,o),n}}return t.className="Flatten",t})();tt.registerClass(ele);var tle=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.activation=Wh(n.activation)}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);return this.activation.apply(i)})}getConfig(){let n={activation:Gh(this.activation)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Activation",t})();tt.registerClass(tle);var rle=(()=>{class t extends hr{constructor(n){super(n),this.n=n.n,this.inputSpec=[{ndim:2}]}computeOutputShape(n){return[n[0],this.n,n[1]]}call(n,o){return Pe(()=>(n=lr(n),e5e(n,this.n)))}getConfig(){let n={n:this.n},o=super.getConfig();return Object.assign(n,o),n}}return t.className="RepeatVector",t})();tt.registerClass(rle);var nle=(()=>{class t extends hr{constructor(n){super(n),this.targetShape=n.targetShape;for(let o=0;o<this.targetShape.length;++o)this.isUnknown(this.targetShape[o])&&(this.targetShape[o]=null)}isUnknown(n){return n<0||n==null}fixUnknownDimension(n,o){let i="Total size of new array must be unchanged.",s=o.slice(),a=1,l=null;for(let c=0;c<s.length;++c){let f=s[c];if(this.isUnknown(f))if(l===null)l=c;else throw new Ie("Can only specifiy one unknown dimension.");else a*=f}let u=vp(n);if(l!==null){if(a===0||u%a!==0)throw new Ie(i);s[l]=u/a}else if(u!==a)throw new Ie(i);return s}computeOutputShape(n){let o=!1;for(let i=0;i<n.length;++i)if(this.isUnknown(n[i])){o=!0;break}return o?n.slice(0,1).concat(this.targetShape):n.slice(0,1).concat(this.fixUnknownDimension(n.slice(1),this.targetShape))}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n),s=i.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Se(i,a)})}getConfig(){let n={targetShape:this.targetShape},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Reshape",t})();tt.registerClass(nle);var ole=(()=>{class t extends hr{constructor(n){if(super(n),n.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(n.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${n.dims} instead.`);let o=mu(1,n.dims.length+1);if(!Y.arraysEqual(n.dims.slice().sort(),o))throw new Error("Invalid permutation `dims`: "+JSON.stringify(n.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=n.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new so({ndim:this.dims.length+1})]}computeOutputShape(n){n=Wr(n);let o=n.slice();return this.dims.forEach((i,s)=>{o[s+1]=n[i]}),o}call(n,o){return Gr(lr(n),this.dimsIncludingBatch)}getConfig(){let n={dims:this.dims},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Permute",t})();tt.registerClass(ole);var ile=(()=>{class t extends hr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null?this.maskValue=n.maskValue==null?0:n.maskValue:this.maskValue=0}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={maskValue:this.maskValue};return Object.assign(o,n),o}computeMask(n,o){let i=lr(n);return jC(Bh(i,this.maskValue),-1)}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n),l=jC(Bh(i,this.maskValue),-1,!0);return we(i,rt(l,i.dtype))})}}return t.className="Masking",t})();tt.registerClass(ile);re();var sle=(()=>{class t extends hr{constructor(n){if(super(n),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",n.batchInputShape==null&&n.inputShape==null){let o=null;n.batchSize!=null&&(o=n.batchSize),n.inputLength==null?this.batchInputShape=[o,null]:this.batchInputShape=[o].concat(Rn(n.inputLength))}this.inputDim=n.inputDim,Fi(this.inputDim,"inputDim"),this.outputDim=n.outputDim,Fi(this.outputDim,"outputDim"),this.embeddingsInitializer=Qn(n.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ao(n.embeddingsRegularizer),this.activityRegularizer=ao(n.activityRegularizer),this.embeddingsConstraint=ui(n.embeddingsConstraint),this.maskZero=n.maskZero,this.supportsMasking=n.maskZero,this.inputLength=n.inputLength}build(n){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(n){}computeMask(n,o){return Pe(()=>this.maskZero?(n=lr(n),Bh(n,ar(n))):null)}computeOutputShape(n){if(n=Wr(n),this.inputLength==null)return[...n,this.outputDim];let o=Rn(this.inputLength);if(o.length!==n.length-1)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);{let i=0;for(let s=0;s<o.length;++s){let a=o[s],l=n[s+1];if(a!=null&&l!=null&&a!==l)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);a==null&&(o[i]=l),i++}}return[n[0],...o,this.outputDim]}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);i.dtype!=="int32"&&(i=Ml(i,"int32"));let s=$7(this.embeddings.read(),Se(i,[i.size]));return Se(s,Wr(this.computeOutputShape(i.shape)))})}getConfig(){let n={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:vo(this.embeddingsInitializer),embeddingsRegularizer:$n(this.embeddingsRegularizer),activityRegularizer:$n(this.activityRegularizer),embeddingsConstraint:li(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Embedding",t})();tt.registerClass(sle);re();re();var Gx=class extends hr{constructor(r){super(r||{}),this.supportsMasking=!0}mergeFunction(r){throw new wr}computeElementwiseOpOutputShape(r,n){if(r==null||n==null)return null;if(r.length<n.length)return this.computeElementwiseOpOutputShape(n,r);if(n.length===0)return r;let o=r.slice(0,r.length-n.length);for(let i=0;i<n.length;++i){let s=r[r.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)o.push(null);else if(s===1)o.push(a);else if(a===1)o.push(s);else{if(s!==a)throw new Ie("Operands could not be broadcast together with shapes "+JSON.stringify(r)+" "+JSON.stringify(n));o.push(s)}}return o}build(r){if(Array.isArray(r)&&!Array.isArray(r[0])&&(r=[Wr(r)]),r=r,r.length<2)throw new Ie(`A merge layer should be called on an Array of at least 2 inputs. Got ${r.length} input(s).`);let n=[];for(let s of r)s!=null&&s[0]!==null&&n.push(s[0]);if(n=xp(n),n.length>1)throw new Ie(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(r)}.`);let o=r[0]==null?null:r[0].slice(1);for(let s=1;s<r.length;++s){let a=r[s]==null?null:r[s].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}let i=r.map(s=>s.length);r.indexOf(null)===-1&&xp(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return Pe(()=>{if(r=r,this.reshapeRequired){let o=[],i=r.map(s=>s.rank);if(i.indexOf(null)===-1){let s=Vh(i);for(let a of r){let l=a.rank;for(let u=0;u<s-l;++u)a=jx(a,1);o.push(a)}return this.mergeFunction(o)}else{let s=!1;for(let u of r){let c=u.rank;if(c==null){let f=u.shape,d=f[0],p=f.slice(1).concat([d]),h=Se(u,[d].concat(vp(f.slice(1))));h=Gr(h,[1,0]),h=Se(h,p),o.push(h),s=!0}else if(c>1){let f=mu(1,c).concat([0]);o.push(Gr(u,f)),s=!0}else o.push(u)}let a=this.mergeFunction(o),l=a.rank;if(s){if(l==null){let u=a.shape,c=u.length,f=u[c-1],d=[f].concat(u.slice(0,u.length-1));a=Se(Gr(Se(a,[-1,f]),[1,0]),d)}else if(l>1){let u=[l-1].concat(mu(0,l-1));a=Gr(a,u)}}return a}}else return this.mergeFunction(r)})}computeOutputShape(r){r=r;let n;r[0]==null?n=null:n=r[0].slice(1);for(let i=1;i<r.length;++i){let s=r[i]==null?null:r[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let o=[];for(let i of r)i!=null&&i[0]!==null&&o.push(i[0]);return o=xp(o),o.length===1?n=o.concat(n):n=[null].concat(n),n}computeMask(r,n){return Pe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ie("`mask` should be an Array");if(!Array.isArray(r))throw new Ie("`inputs` should be an Array");if(n.length!==r.length)throw new Ie(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${r.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Ni(i,0));let o=n[0];for(let i=1;i<n.length-1;++i)o=Ya(o,n[i]);return o})}},ale=(()=>{class t extends Gx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return o})}}return t.className="Add",t})();tt.registerClass(ale);var lle=(()=>{class t extends Gx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=we(o,n[i]);return o})}}return t.className="Multiply",t})();tt.registerClass(lle);var ule=(()=>{class t extends Gx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return we(1/n.length,o)})}}return t.className="Average",t})();tt.registerClass(ule);var cle=(()=>{class t extends Gx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=ic(o,n[i]);return o})}}return t.className="Maximum",t})();tt.registerClass(cle);var fle=(()=>{class t extends Gx{constructor(n){super(n)}mergeFunction(n){return Pe(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=yd(o,n[i]);return o})}}return t.className="Minimum",t})();tt.registerClass(fle);var dle=(()=>{class t extends Gx{constructor(n){super(n),this.DEFAULT_AXIS=-1,n==null&&(n={}),this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){if(!(Array.isArray(n)&&Array.isArray(n[0]))||n.length===1)throw new Ie("A `Concatenate` layer should be called on a list of at least 2 inputs");n=n;let o=!0;for(let s of n)if(s!=null){o=!1;break}if(o)return;let i=[];for(let s=0;s<n.length;++s){let a=n[s].slice();a.splice(this.axis,1);let l=!1;for(let u of i)if(Y.arraysEqual(u,a)){l=!0;break}l||i.push(a)}if(i.length>1)throw new Ie("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(n))}mergeFunction(n){return Pe(()=>dD(n,this.axis))}computeOutputShape(n){if(!(Array.isArray(n)&&Array.isArray(n[0])))throw new Ie("A `Concatenate` layer should be called on a list of inputs.");let o=n,i=o[0].slice(),s=this.axis<0?i.length+this.axis:this.axis;for(let a of o.slice(1)){if(i[s]==null||a[s]==null){i[s]=null;break}i[s]+=a[s]}return i}computeMask(n,o){if(o==null)return null;if(!Array.isArray(o))throw new Ie("`mask` should be an array for Concatenate");if(!Array.isArray(n))throw new Ie("`inputs` should be an array for Concatenate");if(o.length!==n.length)throw new Ie(`Mismatch in the length of mask (${o.length}) and the legnth of inputs (${n.length})`);return Pe(()=>{let i=!0;if(o.forEach(l=>{if(l!=null){i=!1;return}}),i)return null;let s=[];for(let l=0;l<n.length;++l)o[l]==null?s.push(rt(Os(n[l]),"bool")):o[l].rank<n[l].rank?s.push(Ni(o[l],-1)):s.push(o[l]);let a=On(s,this.axis);return EI(a,-1,!1)})}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Concatenate",t})();tt.registerClass(dle);function mP(t,r){for(;t<0;)t+=r;return t}function oLt(t,r,n){if(t.shape.length>3||r.shape.length>3)throw new wr("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${r.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||r.dtype==="complex64")throw new wr("batchDot is not implemented for complex64-type Tensors yet.");let o=t.shape.length,i=r.shape.length;n==null&&(n=[o-1,i-2]);let s=n;return Pe(()=>{let a;if(o>i){a=o-i;let u=[];for(let c=0;c<a;++c)u.push(1);r=Se(r,r.shape.concat(u))}else if(i>o){a=i-o;let u=[];for(let c=0;c<a;++c)u.push(1);t=Se(t,t.shape.concat(u))}else a=0;let l;if(t.shape.length===2&&r.shape.length===2)s[0]===s[1]?l=It(we(t,r),s[0]):l=It(we(Gr(t,[1,0]),r),s[1]);else{let u=s[0]!==t.shape.length-1,c=s[1]===r.shape.length-1;l=Vr(t,r,u,c)}if(a>0){let u;o>i?u=o+i-3:u=o-1;let c=[];for(let f=u;f<u+a;++f)c.push(f);l=Zc(l,c)}return l.shape.length===1&&(l=Ni(l,1)),l})}var ple=(()=>{class t extends Gx{constructor(n){super(n),this.axes=n.axes,this.normalize=n.normalize==null?!1:n.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){Y.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0],i=n[1];if(o.length>3||i.length>3)throw new wr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);if(o[s[0]]!==i[s[1]])throw new Ie(`Dimension incompatibility: ${o[s[0]]} !== ${i[s[1]]}`)}mergeFunction(n){if(n.length!==2)throw new Ie(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${n.length} input(s).`);let o=n[0],i=n[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,l)=>mP(a,n[l].shape.length)):s=[mP(this.axes,o.shape.length),mP(this.axes,i.shape.length)],this.normalize&&(o=lP(o,s[0]),i=lP(i,s[1])),oLt(o,i,s)}interpretAxes(n,o){let i;return Array.isArray(this.axes)?i=this.axes:i=[mP(this.axes,n.length),mP(this.axes,o.length)],i}computeOutputShape(n){Y.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0].slice(),i=n[1].slice();if(o.length>3||i.length>3)throw new wr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);o.splice(s[0],1),i.splice(s[1],1),i.splice(0,1);let a=o.concat(i);return a.length===1&&a.push(1),a}computeMask(n,o){return null}getConfig(){let n={axes:this.axes,normalize:this.normalize},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dot",t})();tt.registerClass(ple);re();var hle=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.stddev=n.stddev}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={stddev:this.stddev};return Object.assign(o,n),o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);return Nw(()=>Ke(pD(i.shape,0,this.stddev),i),()=>i,o.training||!1)})}}return t.className="GaussianNoise",t})();tt.registerClass(hle);var mle=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return Pe(()=>{this.invokeCallHook(n,o);let i=lr(n);return this.rate>0&&this.rate<1?Nw(()=>{let a=Math.sqrt(this.rate/(1-this.rate));return we(i,pD(i.shape,1,a))},()=>i,o.training||!1):i})}}return t.className="GaussianDropout",t})();tt.registerClass(mle);var gle=(()=>{class t extends hr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate,this.noiseShape=n.noiseShape}_getNoiseShape(n){return this.noiseShape||lr(n).shape}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return Pe(()=>{if(this.rate<1&&this.rate>0){let i=this._getNoiseShape(n);return Nw(()=>{let a=lr(n),c=-1.6732632423543772*1.0507009873554805,f=fu(Kc(i),this.rate);f=Ml(f,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=Ke(we(a,f),we(Ke(f,-1),c));return Ke(we(h,d),p)},()=>lr(n),o.training||!1)}return n})}}return t.className="AlphaDropout",t})();tt.registerClass(gle);re();re();function gP(t,r,n,o,i,s=.001){let a;if(t.rank===2)a=V8(t,r,n,o,i,s);else if(t.rank===3)a=G8(t,r,n,o,i,s);else if(t.rank===4)a=W8(t,r,n,o,i,s);else throw new wr(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function iLt(t,r,n,o,i=.001){return Pe(()=>{let s=qC(t,o),a=s.mean,l=s.variance;return[gP(t,a,l,n,r,i),a,l]})}function sLt(t,r,n,o,i=.001){return Pe(()=>{let s=qC(t,o),a=s.mean,l=s.variance,u=[];for(let m of mu(0,t.rank))o.indexOf(m)!==-1?u.push(1):u.push(t.shape[m]);let c=Se(a,u),f=Se(l,u),d=r==null?null:Se(r,u),p=n==null?null:Se(n,u);return[gP(t,c,f,p,d,i),a,l]})}function aLt(t,r,n,o,i=.001){return Y.arraysEqual(o.slice().sort(),mu(0,t.rank-1))?iLt(t,r,n,o,i):sLt(t,r,n,o,i)}var yle=(()=>{class t extends hr{constructor(n){n==null&&(n={}),super(n),this.supportsMasking=!0,this.axis=n.axis==null?-1:n.axis,this.momentum=n.momentum==null?.99:n.momentum,this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=Qn(n.betaInitializer||"zeros"),this.gammaInitializer=Qn(n.gammaInitializer||"ones"),this.movingMeanInitializer=Qn(n.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Qn(n.movingVarianceInitializer||"ones"),this.betaConstraint=ui(n.betaConstraint),this.gammaConstraint=ui(n.gammaConstraint),this.betaRegularizer=ao(n.betaRegularizer),this.gammaRegularizer=ao(n.gammaRegularizer)}build(n){n=Wr(n);let o=this.axis>=0?this.axis:this.axis+n.length,i=n[o];if(i==null)throw new Ie(`Axis ${o} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(n)}.`);this.inputSpec=[new so({ndim:n.length,axes:{[o]:i}})];let s=[i];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(n,o){return Pe(()=>{let i=o.training==null?!1:o.training,s=lr(n),a=s.shape,l=a.length,u=mu(0,l),c=this.axis>=0?this.axis:this.axis+l;u.splice(c,1);let f=yp(1,l);f[c]=a[c];let d=u.slice();d.sort();let p=!Y.arraysEqual(d,mu(0,l).slice(0,l-1)),h=()=>{if(p){let v=Se(this.movingMean.read(),f),w=Se(this.movingVariance.read(),f),_=this.center?Se(this.beta.read(),f):null,S=this.scale?Se(this.gamma.read(),f):null;return gP(s,v,w,_,S,this.epsilon)}else return gP(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!i)return h();let[m,g,y]=aLt(s,this.gamma.read(),this.beta.read(),u,this.epsilon),b=(v,w,_)=>{Pe(()=>{let S=1-_,C=v.read(),E=we(wt(C,w),S);v.write(wt(C,E))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,y,this.momentum)})(),m})}getConfig(){let n={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vo(this.betaInitializer),gammaInitializer:vo(this.gammaInitializer),movingMeanInitializer:vo(this.movingMeanInitializer),movingVarianceInitializer:vo(this.movingVarianceInitializer),betaRegularizer:$n(this.betaRegularizer),gammaRegularizer:$n(this.gammaRegularizer),betaConstraint:li(this.betaConstraint),gammaConstraint:li(this.gammaConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BatchNormalization",t})();tt.registerClass(yle);var ble=(()=>{class t extends hr{constructor(n){if(n==null&&(n={}),super(n),this.axis=n.axis==null?-1:n.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let o of this.axis)if(!Number.isInteger(o))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=Qn(n.betaInitializer||"zeros"),this.gammaInitializer=Qn(n.gammaInitializer||"ones"),this.betaRegularizer=ao(n.betaRegularizer),this.gammaRegularizer=ao(n.gammaRegularizer),this.supportsMasking=!0}build(n){n=Wr(n);let o=n.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=o);for(let a of this.axis)if(a<0||a>=o)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==xp(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let i=this.axis.map(a=>n[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(n,o){let i=lr(n),s=i.shape,a=s.length;return Pe(()=>{let{mean:u,variance:c}=qC(i,this.axis,!0),f=yp(1,a);for(let y of this.axis)f[y]=s[y];let d=y=>y!=null&&y.shape.length!==a?Se(y,f):y,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,m=[],g=[];for(let y=0;y<a;++y)this.axis.indexOf(y)!==-1?(m.push(s[y]),g.push(1)):(m.push(1),g.push(s[y]));return u=Ea(u,m),c=Ea(c,m),p!=null&&(p=Ea(p,g)),h!=null&&(h=Ea(h,g)),gP(i,u,c,h,p,this.epsilon)})}getConfig(){let n={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vo(this.betaInitializer),gammaInitializer:vo(this.gammaInitializer),betaRegularizer:$n(this.betaRegularizer),gammaRegularizer:$n(this.gammaRegularizer)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LayerNormalization",t})();tt.registerClass(ble);re();re();function lLt(t,r,n){return Pe(()=>{if(t.rank!==4)throw new Ie(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(r==null&&(r=[[1,1],[1,1]]),r.length!==2||r[0].length!==2||r[1].length!==2)throw new Ie("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=gu()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ie(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let o;return n==="channelsFirst"?o=[[0,0],[0,0],r[0],r[1]]:o=[[0,0],r[0],r[1],[0,0]],du(t,o)})}var xle=(()=>{class t extends hr{constructor(n){if(n==null&&(n={}),super(n),this.dataFormat=n.dataFormat==null?gu():n.dataFormat,n.padding==null)this.padding=[[1,1],[1,1]];else if(typeof n.padding=="number")this.padding=[[n.padding,n.padding],[n.padding,n.padding]];else{if(n.padding=n.padding,n.padding.length!==2)throw new Ie(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${n.padding.length} array.`);let o,i;if(typeof n.padding[0]=="number")o=[n.padding[0],n.padding[0]],i=[n.padding[1],n.padding[1]];else{if(n.padding=n.padding,n.padding[0].length!==2)throw new Ie(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${n.padding[0].length} array.`);if(o=n.padding[0],n.padding[1].length!==2)throw new Ie(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${n.padding[1].length} array.`);i=n.padding[1]}this.padding=[o,i]}this.inputSpec=[new so({ndim:4})]}computeOutputShape(n){n=Wr(n);let o,i;return this.dataFormat==="channelsFirst"?(n[2]!=null&&n[2]>=0?o=n[2]+this.padding[0][0]+this.padding[0][1]:o=null,n[3]!=null&&n[3]>=0?i=n[3]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],n[1],o,i]):(n[1]!=null&&n[1]>=0?o=n[1]+this.padding[0][0]+this.padding[0][1]:o=null,n[2]!=null&&n[2]>=0?i=n[2]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],o,i,n[3]])}call(n,o){return Pe(()=>lLt(lr(n),this.padding,this.dataFormat))}getConfig(){let n={padding:this.padding,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ZeroPadding2D",t})();tt.registerClass(xle);re();re();function k9(t,r,n,o,i,s){return Pe(()=>{Go(i),aae(s),hu(o),n==null&&(n=[1,1]),o==null&&(o="valid"),i==null&&(i=gu()),s==null&&(s="max"),t=hP(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=pw(t,r,n,l):a=rw(t,r,n,l),i==="channelsFirst"&&(a=Gr(a,[0,3,1,2])),a})}function Y5e(t,r,n,o,i,s){return Pe(()=>{Go(i),aae(s),hu(o),n==null&&(n=[1,1,1]),o==null&&(o="valid"),i==null&&(i=gu()),s==null&&(s="max"),t=jae(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=kU(t,r,n,l):a=U8(t,r,n,l),i==="channelsFirst"&&(a=Gr(a,[0,4,1,2,3])),a})}var S9=class extends hr{constructor(r){if(r.poolSize==null&&(r.poolSize=2),super(r),typeof r.poolSize=="number")this.poolSize=[r.poolSize];else if(Array.isArray(r.poolSize)&&r.poolSize.length===1&&typeof r.poolSize[0]=="number")this.poolSize=r.poolSize;else throw new Ie(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.poolSize)}`);if(Fi(this.poolSize,"poolSize"),r.strides==null)this.strides=this.poolSize;else if(typeof r.strides=="number")this.strides=[r.strides];else if(Array.isArray(r.strides)&&r.strides.length===1&&typeof r.strides[0]=="number")this.strides=r.strides;else throw new Ie(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.strides)}`);Fi(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,hu(this.padding),this.inputSpec=[new so({ndim:3})]}computeOutputShape(r){r=Wr(r);let n=lc(r[1],this.poolSize[0],this.padding,this.strides[0]);return[r[0],n,r[2]]}call(r,n){return Pe(()=>{this.invokeCallHook(r,n),r=jx(lr(r),2);let o=this.poolingFunction(lr(r),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Zc(o,[2])})}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(r,n),r}},vle=(()=>{class t extends S9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Go(a),hu(s),k9(n,o,i,s,a,"max")}}return t.className="MaxPooling1D",t})();tt.registerClass(vle);var wle=(()=>{class t extends S9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Go(a),hu(s),k9(n,o,i,s,a,"avg")}}return t.className="AveragePooling1D",t})();tt.registerClass(wle);var C9=class extends hr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==2)throw new Ie(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides];Fi(this.poolSize,"poolSize"),Fi(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Go(this.dataFormat),hu(this.padding),this.inputSpec=[new so({ndim:4})]}computeOutputShape(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2];return n=lc(n,this.poolSize[0],this.padding,this.strides[0]),o=lc(o,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o]:[r[0],n,o,r[3]]}call(r,n){return Pe(()=>(this.invokeCallHook(r,n),this.poolingFunction(lr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},_le=(()=>{class t extends C9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Go(a),hu(s),k9(n,o,i,s,a,"max")}}return t.className="MaxPooling2D",t})();tt.registerClass(_le);var Sle=(()=>{class t extends C9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Go(a),hu(s),k9(n,o,i,s,a,"avg")}}return t.className="AveragePooling2D",t})();tt.registerClass(Sle);var E9=class extends hr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==3)throw new Ie(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides,r.strides];Fi(this.poolSize,"poolSize"),Fi(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Go(this.dataFormat),hu(this.padding),this.inputSpec=[new so({ndim:5})]}computeOutputShape(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2],i=this.dataFormat==="channelsFirst"?r[4]:r[3];return n=lc(n,this.poolSize[0],this.padding,this.strides[0]),o=lc(o,this.poolSize[1],this.padding,this.strides[1]),i=lc(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o,i]:[r[0],n,o,i,r[4]]}call(r,n){return Pe(()=>(this.invokeCallHook(r,n),this.poolingFunction(lr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},Cle=(()=>{class t extends E9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Go(a),hu(s),Y5e(n,o,i,s,a,"max")}}return t.className="MaxPooling3D",t})();tt.registerClass(Cle);var Ele=(()=>{class t extends E9{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Go(a),hu(s),Y5e(n,o,i,s,a,"avg")}}return t.className="AveragePooling3D",t})();tt.registerClass(Ele);var T9=class extends hr{constructor(r){super(r),this.inputSpec=[new so({ndim:3})]}computeOutputShape(r){return[r[0],r[2]]}call(r,n){throw new wr}},Tle=(()=>{class t extends T9{constructor(n){super(n||{})}call(n,o){return Pe(()=>{let i=lr(n);return bo(i,1)})}}return t.className="GlobalAveragePooling1D",t})();tt.registerClass(Tle);var Ale=(()=>{class t extends T9{constructor(n){super(n||{})}call(n,o){return Pe(()=>{let i=lr(n);return ra(i,1)})}}return t.className="GlobalMaxPooling1D",t})();tt.registerClass(Ale);var A9=class extends hr{constructor(r){super(r),this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Go(this.dataFormat),this.inputSpec=[new so({ndim:4})]}computeOutputShape(r){return r=r,this.dataFormat==="channelsLast"?[r[0],r[3]]:[r[0],r[1]]}call(r,n){throw new wr}getConfig(){let r={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},kle=(()=>{class t extends A9{call(n,o){return Pe(()=>{let i=lr(n);return this.dataFormat==="channelsLast"?bo(i,[1,2]):bo(i,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();tt.registerClass(kle);var Ile=(()=>{class t extends A9{call(n,o){return Pe(()=>{let i=lr(n);return this.dataFormat==="channelsLast"?ra(i,[1,2]):ra(i,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();tt.registerClass(Ile);re();re();var I9=class extends hr{constructor(r){super(r),this.layer=r.layer}build(r){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(r){this.layer!=null&&(this.layer.trainable=r)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(r){this.layer.setWeights(r)}getConfig(){let r={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(r,n),r}setFastWeightInitDuringBuild(r){super.setFastWeightInitDuringBuild(r),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(r)}static fromConfig(r,n,o={}){let i=n.layer,s=ac(i,o);delete n.layer;let a={layer:s};return Object.assign(a,n),new r(a)}},Dle=(()=>{class t extends I9{constructor(n){super(n),this.supportsMasking=!0}build(n){if(n=Wr(n),n.length<3)throw new Ie(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(n)}`);this.inputSpec=[{shape:n}];let o=[n[0]].concat(n.slice(2));this.layer.built||(this.layer.build(o),this.layer.built=!0),super.build(n)}computeOutputShape(n){n=Wr(n);let o=[n[0]].concat(n.slice(2)),i=this.layer.computeOutputShape(o),s=n[1];return[i[0],s].concat(i.slice(1))}call(n,o){return Pe(()=>(n=lr(n),Hae((l,u)=>[lr(this.layer.call(l,o)),[]],n,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();tt.registerClass(Dle);function uLt(t){j0(X4e,"BidirectionalMergeMode",t)}var cLt="concat",Nle=(()=>{class t extends I9{constructor(n){super(n);let o=n.layer.getConfig(),i={};i.className=n.layer.getClassName(),i.config=o,this.forwardLayer=ac(i),o.goBackwards=o.goBackwards!==!0;let s={};if(s.className=n.layer.getClassName(),s.config=o,this.backwardLayer=ac(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=n.mergeMode===void 0?cLt:n.mergeMode,uLt(this.mergeMode),n.weights)throw new wr("weights support is not implemented for Bidirectional layer yet.");this._stateful=n.layer.stateful,this.returnSequences=n.layer.returnSequences,this.returnState=n.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=n.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(n){this._trainable=n,this.forwardLayer!=null&&(this.forwardLayer.trainable=n),this.backwardLayer!=null&&(this.backwardLayer.trainable=n)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(n){let o=n.length,i=Math.floor(o/2);this.forwardLayer.setWeights(n.slice(0,i)),this.backwardLayer.setWeights(n.slice(i))}computeOutputShape(n){let o=this.forwardLayer.computeOutputShape(n);Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o;let i,s,a;return this.returnState&&(a=o.slice(1)),i=o[0],i=i,this.mergeMode==="concat"?(i[i.length-1]*=2,s=[i]):this.mergeMode==null?s=[i,i.slice()]:s=[i],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[i].concat(a).concat(a.slice()):ia(s)}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=qae(n,i,s,this.numConstants);if(n=a.inputs,i=a.initialState,s=a.constants,Array.isArray(n)&&(i=n.slice(1),n=n[0]),(i==null||i.length===0)&&s==null)return super.apply(n,o);let l=[],u=[];if(i!=null){let f=i.length;if(f%2>0)throw new Ie("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");o.initialState=i,l.push(...i);let d=i.map(p=>new so({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,f/2),this.backwardLayer.stateSpec=d.slice(f/2),u.push(...d)}if(s!=null)throw new wr("Support for constants in Bidirectional layers is not implemented yet.");let c=l[0]instanceof Fl;for(let f of l)if(f instanceof Fl!==c)throw new Ie("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let h=super.apply(f,o);return this.inputSpec=p,h}else return super.apply(n,o)}call(n,o){return Pe(()=>{let i=o.initialState,s,a;if(i==null)s=this.forwardLayer.call(n,o),a=this.backwardLayer.call(n,o);else{let c=i.slice(0,i.length/2),f=i.slice(i.length/2);s=this.forwardLayer.call(n,Object.assign(o,{initialState:c})),a=this.backwardLayer.call(n,Object.assign(o,{initialState:f}))}let l;this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=bs(a,1));let u;return this.mergeMode==="concat"?u=dD([s,a]):this.mergeMode==="sum"?u=Ke(s,a):this.mergeMode==="ave"?u=we(.5,Ke(s,a)):this.mergeMode==="mul"?u=we(s,a):this.mergeMode==null&&(u=[s,a]),this.returnState?this.mergeMode==null?u.concat(l):[u].concat(l):u})}resetStates(n){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(n){Uh(this.forwardLayer.name,()=>{this.forwardLayer.build(n)}),Uh(this.backwardLayer.name,()=>{this.backwardLayer.build(n)}),this.built=!0}computeMask(n,o){Array.isArray(o)&&(o=o[0]);let i;if(this.returnSequences?this.mergeMode==null?i=[o,o]:i=o:this.mergeMode==null?i=[null,null]:i=null,this.returnState){let a=this.forwardLayer.states.map(l=>null);return Array.isArray(i)?i.concat(a).concat(a):[i].concat(a).concat(a)}else return i}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(n),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(n)}getConfig(){let n={mergeMode:this.mergeMode},o=super.getConfig();return Object.assign(n,o),n}static fromConfig(n,o){let i=ac(o.layer);if(delete o.layer,o.numConstants!=null)throw new wr("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let s=o;return s.layer=i,new n(s)}}return t.className="Bidirectional",t})();tt.registerClass(Nle);re();var Mle=(()=>{class t extends hr{constructor(n){super(n),this.scale=n.scale,n.offset?this.offset=n.offset:this.offset=0}getConfig(){let n={scale:this.scale,offset:this.offset},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return Pe(()=>(n=lr(n),n.dtype!=="float32"&&(n=Ml(n,"float32")),Ke(we(n,this.scale),this.offset)))}}return t.className="Rescaling",t})();tt.registerClass(Mle);re();var{resizeBilinear:fLt,cropAndResize:dLt}=sc,Fle=(()=>{class t extends hr{constructor(n){super(n),this.height=n.height,this.width=n.width}centerCrop(n,o,i,s,a,l,u,c){return Pe(()=>{let f,d=!1,p=o/l,h=i/u,m=(s+o)/l,g=(a+i)/u,y=[p,h,m,g],b=[];n.rank===3?(d=!0,f=as([n])):f=n;for(let S=0;S<f.shape[0];S++)b.push(y);let x=ii(b,[b.length,4]),v=O0(0,b.length,1,"int32"),_=dLt(f,x,v,[s,a],"nearest");return d?Ml(lr(Xa(_)),c):Ml(_,c)})}upsize(n,o,i,s){return Pe(()=>{let a=fLt(n,[o,i]);return Ml(a,s)})}call(n,o){return Pe(()=>{let i=lr(n),s=i.dtype,a=i.shape,l=a[a.length-3],u=a[a.length-2],c=0;l!==this.height&&(c=Math.floor((l-this.height)/2));let f=0;return u!==this.width&&(f=Math.floor((u-this.width)/2),f===0&&(f=1)),c>=0&&f>=0?this.centerCrop(i,c,f,this.height,this.width,l,u,s):this.upsize(n,this.height,this.width,s)})}getConfig(){let n={height:this.height,width:this.width},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Wr(n);let o=n.length-3,i=n.length-2;return n[o]=this.height,n[i]=this.width,n}}return t.className="CenterCrop",t})();tt.registerClass(Fle);re();re();re();re();function X5e(t,r,n,o){let i=lr(t);if(i.dtype!=="int32"&&(i=Ml(i,"int32")),r==="int")return i;let s=i.shape;if(i.rank===0&&(i=Ni(i,-1)),r==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Ni(i,-1)),i.rank>2)throw new Ie(`When outputMode is not int, maximum output rank is 2 Received outputMode ${r} and input shape ${s} which would result in output rank ${i.rank}.`);let a=["multiHot","oneHot"].includes(r),l=i,u;if(typeof o<"u"&&r==="count"?u=k3(l,o,n,a):u=k3(l,[],n,a),r!=="tfIdf")return u;if(o)return we(u,o);throw new Ie("When outputMode is 'tfIdf', weights must be provided.")}var Ole=(()=>{class t extends hr{constructor(n){super(n),this.numTokens=n.numTokens,n.outputMode?this.outputMode=n.outputMode:this.outputMode="multiHot"}getConfig(){let n={numTokens:this.numTokens,outputMode:this.outputMode},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){return n=Wr(n),n==null?[this.numTokens]:this.outputMode==="oneHot"&&n[n.length-1]!==1?(n.push(this.numTokens),n):(n[n.length-1]=this.numTokens,n)}call(n,o){return Pe(()=>{n=lr(n),n.dtype!=="int32"&&(n=Ml(n,"int32"));let i;if(typeof o.countWeights<"u"){if(this.outputMode!=="count")throw new Ie(`countWeights is not used when outputMode !== count.
              Received countWeights=${o.countWeights}`);i=lr(o.countWeights)}let s=ra(n),a=Tx(n),l=si(this.numTokens,s).bufferSync().get(0),u=fu(a,0).bufferSync().get(0);if(!(l&&u))throw new Ie(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return X5e(n,this.outputMode,this.numTokens,i)})}}return t.className="CategoryEncoding",t})();tt.registerClass(Ole);re();var hLt=["bilinear","nearest"],K5e=new Set(hLt),Rle=(()=>{class t extends hr{constructor(n){if(super(n),this.height=n.height,this.width=n.width,n.interpolation)if(K5e.has(n.interpolation))this.interpolation=n.interpolation;else throw new Ie(`Invalid interpolation parameter: ${n.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!n.cropToAspectRatio}computeOutputShape(n){n=Wr(n);let o=n[2];return[this.height,this.width,o]}getConfig(){let n={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return Pe(()=>{let i=[this.height,this.width];if(this.interpolation==="bilinear")return sc.resizeBilinear(n,i,!this.cropToAspectRatio);if(this.interpolation==="nearest")return sc.resizeNearestNeighbor(n,i,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...K5e]} are supported`)})}}return t.className="Resizing",t})();tt.registerClass(Rle);re();var Z5e=(()=>{class t{constructor(n){this.seed=n}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var Q5e=(()=>{class t extends hr{constructor(n){super(n),this.randomGenerator=new Z5e(n.seed)}getConfig(){let n={seed:this.randomGenerator.seed},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BaseRandomLayer",t})();re();var mLt=["bilinear","nearest"],J5e=new Set(mLt),Ple=(()=>{class t extends Q5e{constructor(n){super(n);let{factor:o,interpolation:i="bilinear"}=n;if(this.factor=o,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ie(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ie(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ie(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(i)if(J5e.has(i))this.interpolation=i;else throw new Ie(`Invalid interpolation parameter: ${i} is not implemented`)}getConfig(){let n={factor:this.factor,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Wr(n);let o=n[2];return[this.imgHeight,-1,o]}call(n,o){return Pe(()=>{let i=lr(n);this.imgHeight=i.shape[i.shape.length-3];let s=i.shape[i.shape.length-2];this.widthFactor=Kc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);let l=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return sc.resizeBilinear(n,l);case"nearest":return sc.resizeNearestNeighbor(n,l);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...J5e]} are supported`)}})}}return t.className="RandomWidth",t})();tt.registerClass(Ple);function gLt(t){return new Mw(t)}function yLt(t){return new Rae(t)}function bLt(t){return new Mae(t)}function xLt(t){return new Fae(t)}function vLt(t){return new Oae(t)}function wLt(t){return new Lae(t)}function _Lt(t){return new Pae(t)}function SLt(t){return new Uae(t)}function CLt(t){return new g9(t)}function ELt(t){return new Bae(t)}function TLt(t){return new y9(t)}function ALt(t){return new $ae(t)}function kLt(t){return new zae(t)}function ILt(t){return new Vae(t)}function DLt(t){return new Gae(t)}function NLt(t){return new Wae(t)}function MLt(t){return new tle(t)}function FLt(t){return new Jae(t)}function OLt(t){return new _9(t)}function RLt(t){return new Qae(t)}function PLt(t){return new ele(t)}function LLt(t){return new rle(t)}function jLt(t){return new nle(t)}function BLt(t){return new ole(t)}function $Lt(t){return new sle(t)}function zLt(t){return new ale(t)}function ULt(t){return new ule(t)}function VLt(t){return new dle(t)}function GLt(t){return new cle(t)}function WLt(t){return new fle(t)}function qLt(t){return new lle(t)}function HLt(t){return new ple(t)}function YLt(t){return new yle(t)}function XLt(t){return new ble(t)}function KLt(t){return new xle(t)}function Lle(t){return new wle(t)}function ZLt(t){return Lle(t)}function QLt(t){return Lle(t)}function jle(t){return new Sle(t)}function JLt(t){return jle(t)}function ejt(t){return jle(t)}function Ble(t){return new Ele(t)}function tjt(t){return Ble(t)}function rjt(t){return Ble(t)}function njt(t){return new Tle(t)}function ojt(t){return new kle(t)}function eBe(t){return new Ale(t)}function tBe(t){return new Ile(t)}function rBe(t){return new vle(t)}function nBe(t){return new _le(t)}function ijt(t){return new Cle(t)}function sjt(t){return new Xae(t)}function ajt(t){return new x9(t)}function ljt(t){return new Kae(t)}function ujt(t){return new SD(t)}function cjt(t){return new Yae(t)}function fjt(t){return new b9(t)}function djt(t){return new Zae(t)}function pjt(t){return new w9(t)}function hjt(t){return new $0(t)}function mjt(t){return new v9(t)}function gjt(t){return new Nle(t)}function yjt(t){return new Dle(t)}var bjt=eBe,xjt=tBe,vjt=rBe,wjt=nBe;function _jt(t){return new hle(t)}function Sjt(t){return new mle(t)}function Cjt(t){return new gle(t)}function Ejt(t){return new ile(t)}function Tjt(t){return new Mle(t)}function Ajt(t){return new Fle(t)}function kjt(t){return new Rle(t)}function Ijt(t){return new Ole(t)}function Djt(t){return new Ple(t)}re();var Ojt=Me();Ojt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});re();re();var oBe;(function(t){let r;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(r=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(oBe||(oBe={}));re();re();re();re();re();re();re();re();re();ew();re();var M4t=Al(V3());re();var D4t=Al(V3());re();re();re();var o$n=Symbol("out"),i$n=Symbol("field"),s$n=Symbol("quote"),a$n=Symbol("quoteafterquote"),l$n=Symbol("quoteinquote");re();re();re();re();re();re();re();re();re();function lt(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the CPU backend.`)})}var V4t=ka.whereImpl,sBe=(()=>{class t extends Tg{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new F1(this,dd())}write(n,o,i){this.firstUse&&(this.firstUse=!1,Me().get("IS_NODE")&&ce.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let s={id:this.nextDataId()};return this.data.set(s,{values:n,dtype:i,refCount:1}),s}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&Y.isString(i[0])){let a=i.map(l=>Y.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return{dataId:s,shape:n,dtype:o}}refCount(n){return this.data.has(n)?this.data.get(n).refCount:0}incRef(n){let o=this.data.get(n);o.refCount++}decRef(n){if(this.data.has(n)){let o=this.data.get(n);o.refCount--}}move(n,o,i,s,a){this.data.set(n,{values:o,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}read(n){return je(this,null,function*(){return this.readSync(n)})}readSync(n){let{dtype:o,complexTensorInfos:i}=this.data.get(n);if(o==="complex64"){let s=this.readSync(i.real.dataId),a=this.readSync(i.imag.dataId);return ce.mergeRealAndImagArrays(s,a)}return Y.convertBackendValuesAndArrayBuffer(this.data.get(n).values,o)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>Y.decodeString(s));return er(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return er(n.shape,n.dtype,o)}makeOutput(n,o,i){return dd().makeTensorFromTensorInfo(this.makeTensorInfo(o,i,n),this)}disposeData(n,o=!1){if(this.data.has(n)){if(this.data.get(n).refCount--,!o&&this.data.get(n).refCount>0)return!1;let{complexTensorInfos:i}=this.data.get(n);i!=null&&(this.disposeData(i.real.dataId,!0),this.disposeData(i.imag.dataId,!0)),this.data.delete(n)}return!0}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}time(n){return je(this,null,function*(){let o=Y.now();return n(),{kernelMs:Y.now()-o}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(n){lt([n],"where");let o=this.readSync(n.dataId);return V4t(n.shape,o)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var yue={};fn(yue,{addImpl:()=>Vle,bincountImpl:()=>TD,bincountReduceImpl:()=>N9,bitwiseAndImpl:()=>Gle,castImpl:()=>Ule,ceilImpl:()=>Wle,concatImpl:()=>M9,equalImpl:()=>qle,expImpl:()=>Yle,expm1Impl:()=>Kle,floorDivImpl:()=>Qle,floorImpl:()=>Zle,gatherNdImpl:()=>F9,gatherV2Impl:()=>O9,greaterEqualImpl:()=>eue,greaterImpl:()=>Jle,lessEqualImpl:()=>rue,lessImpl:()=>tue,linSpaceImpl:()=>R9,logImpl:()=>nue,maxImpl:()=>P9,maximumImpl:()=>oue,minimumImpl:()=>iue,multiplyImpl:()=>yP,negImpl:()=>sue,notEqualImpl:()=>aue,prodImpl:()=>lue,raggedGatherImpl:()=>L9,raggedRangeImpl:()=>j9,raggedTensorToTensorImpl:()=>B9,rangeImpl:()=>$9,rsqrtImpl:()=>cue,scatterImpl:()=>Yh,sigmoidImpl:()=>LBe,simpleAbsImpl:()=>zle,sliceImpl:()=>due,sparseFillEmptyRowsImpl:()=>z9,sparseReshapeImpl:()=>U9,sparseSegmentReductionImpl:()=>kD,sqrtImpl:()=>$Be,squaredDifferenceImpl:()=>pue,staticRegexReplaceImpl:()=>hue,stridedSliceImpl:()=>V9,stringNGramsImpl:()=>G9,stringSplitImpl:()=>W9,stringToHashBucketFastImpl:()=>q9,subImpl:()=>gue,tileImpl:()=>H9,topKImpl:()=>Y9,transposeImpl:()=>AD,uniqueImpl:()=>X9});re();function zle(t){let r=new Float32Array(t.length);for(let n=0;n<t.length;++n)r[n]=Math.abs(t[n]);return r}var G4t=t=>{let{x:r}=t.inputs,n=t.backend;lt(r,"abs");let o=new Float32Array(Y.sizeFromShape(r.shape)),i=n.data.get(r.dataId).values;return o=zle(i),n.makeOutput(o,r.shape,r.dtype)},aBe={kernelName:Ab,backendName:"cpu",kernelFunc:G4t};re();re();function hn(t){return(r,n,o,i,s)=>{let a=ce.assertAndGetBroadcastShape(r,n),l=a.length,u=Y.computeStrides(a),c=Y.sizeFromShape(a),f=Y.getTypedArrayFromDType(s,c),d=r.length,p=n.length,h=Y.computeStrides(r),m=Y.computeStrides(n),g=ce.getBroadcastDims(r,a),y=ce.getBroadcastDims(n,a);if(g.length+y.length===0)for(let b=0;b<f.length;++b)f[b]=t(o[b%o.length],i[b%i.length]);else for(let b=0;b<f.length;++b){let x=Y.indexToLoc(b,l,u),v=x.slice(-d);g.forEach(C=>v[C]=0);let w=Y.locToIndex(v,d,h),_=x.slice(-p);y.forEach(C=>_[C]=0);let S=Y.locToIndex(_,p,m);f[b]=t(o[w],i[S])}return[f,a]}}re();re();re();re();function Ps(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=n.makeTensorInfo(o.shape,"complex64"),u=n.data.get(l.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(o.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},l}var lBe={kernelName:kS,backendName:"cpu",kernelFunc:Ps};function CD(t,r,n="float32"){if(n==="complex64"){let i=CD(t,r,"float32"),s=CD(t,r,"float32");return Ps({inputs:{real:i,imag:s},backend:t})}let o=Y.makeZerosTypedArray(Y.sizeFromShape(r),n);return t.makeTensorInfo(r,n,o)}re();function Za(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var uBe={kernelName:Ah,backendName:"cpu",kernelFunc:Za};re();function Sp(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var cBe={kernelName:sC,backendName:"cpu",kernelFunc:Sp};function Ule(t,r,n,o){if(o==="int32"){let i=Int32Array.from(t);return[r,"int32",i]}if(o==="bool"){let i=Y.toTypedArray([0],n),[s,a]=hn((l,u)=>l!==u?1:0)(r,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${o}`)}function Cp(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return Za({inputs:{x:i},backend:n});let f=CD(n,i.shape,i.dtype),d=Cp({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=Ps({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){let f=Sp({inputs:{input:i},backend:n}),d=Cp({inputs:{x:f},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(f),d}if(!Y.hasEncodingLoss(i.dtype,s)){let f=Za({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:s}}let a=n.data.get(i.dataId).values,[l,u,c]=Ule(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}var fBe={kernelName:Th,backendName:"cpu",kernelFunc:Cp};function _n(t,r,n,o){return n==null?({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;lt([a,l],t);let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=a.dtype==="string"?ce.fromUint8ToStringArray(c):c,p=a.dtype==="string"?ce.fromUint8ToStringArray(f):f,h=o||a.dtype,[m,g]=r(a.shape,l.shape,d,p,h);return u.makeTensorInfo(g,h,m)}:({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;if(a.dtype==="complex64"||l.dtype==="complex64"){let c=Cp({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),f=u.data.get(c.dataId),d=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,h=u.data.get(d.dataId).values,m=u.data.get(p.dataId).values,g=Cp({inputs:{x:l},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(g.dataId),b=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,v=u.data.get(b.dataId).values,w=u.data.get(x.dataId).values,[_,S,C]=n(a.shape,l.shape,h,m,v,w),E=u.makeTensorInfo(C,"float32",_),T=u.makeTensorInfo(C,"float32",S),I=Ps({inputs:{real:E,imag:T},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(T),I}else{let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=o||a.dtype,[p,h]=r(a.shape,l.shape,c,f,d);return u.makeTensorInfo(h,d,p)}}}function ED(t){return(r,n,o,i,s,a)=>{let l=ce.assertAndGetBroadcastShape(r,n),u=Y.sizeFromShape(l),c=l.length,f=Y.computeStrides(l),d=Y.getTypedArrayFromDType("float32",u),p=Y.getTypedArrayFromDType("float32",u),h=ce.getBroadcastDims(r,l),m=ce.getBroadcastDims(n,l),g=ce.mergeRealAndImagArrays(o,i),y=ce.mergeRealAndImagArrays(s,a),b=r.length,x=Y.computeStrides(r),v=n.length,w=Y.computeStrides(n);if(h.length+m.length===0)for(let _=0;_<d.length;_++){let S=_%g.length,C=_%y.length,E=t(g[S*2],g[S*2+1],y[C*2],y[C*2+1]);d[_]=E.real,p[_]=E.imag}else for(let _=0;_<d.length;_++){let S=Y.indexToLoc(_,c,f),C=S.slice(-b);h.forEach(F=>C[F]=0);let E=Y.locToIndex(C,b,x),T=S.slice(-v);m.forEach(F=>T[F]=0);let I=Y.locToIndex(T,v,w),k=t(g[E*2],g[E*2+1],y[I*2],y[I*2+1]);d[_]=k.real,p[_]=k.imag}return[d,p,l]}}var Vle=hn((t,r)=>t+r),W4t=ED((t,r,n,o)=>({real:t+n,imag:r+o})),z0=_n(lp,Vle,W4t),dBe={kernelName:lp,backendName:"cpu",kernelFunc:z0};re();function TD(t,r,n,o,i){let s=Y.sizeFromShape(o),a=Y.makeZerosTypedArray(i,n);for(let l=0;l<t.length;l++){let u=t[l];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(s>0?a[u]+=r[l]:a[u]+=1)}return a}function N9(t,r,n,o=!1){let i=t.shape[0],s=t.shape[1],a=er([i,n],r.dtype);for(let l=0;l<i;l++)for(let u=0;u<s;u++){let c=t.get(l,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(o?a.set(1,l,c):r.size>0?a.set(a.get(l,c)+r.get(l,u),l,c):a.set(a.get(l,c)+1,l,c))}return a}re();var Gle=hn((t,r)=>t&r),q4t=_n(R1,Gle),pBe={kernelName:R1,backendName:"cpu",kernelFunc:q4t};re();re();function la(t){return(r,n,o)=>{let i=Y.getArrayFromDType(n,r.length);for(let s=0;s<r.length;++s)i[s]=t(r[s],o);return i}}re();function Er(t,r,n){let o=la(r);return uc(t,o,n)}function uc(t,r,n){return({inputs:o,attrs:i,backend:s})=>{let{x:a}=o;lt(a,t);let l=s,u=l.data.get(a.dataId).values,c;if(a.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=ce.fromUint8ToStringArray(u)}else c=u;let f=n||a.dtype,d=r(c,f,i);return l.makeTensorInfo(a.shape,f,d)}}var Wle=la(t=>Math.ceil(t)),H4t=uc(Pg,Wle),hBe={kernelName:Pg,backendName:"cpu",kernelFunc:H4t};re();function M9(t,r,n,o){let i=Y.getArrayFromDType(n,Y.sizeFromShape(r));if(o&&n!=="string"){let s=0;t.forEach(a=>{let l=Y.sizeFromShape(a.shape);i.set(a.vals,s),s+=l})}else{let s=0;t.forEach(a=>{let l=n==="string"?ce.fromUint8ToStringArray(a.vals):a.vals,u=0;for(let c=0;c<a.shape[0];++c){let f=c*r[1]+s;for(let d=0;d<a.shape[1];++d)i[f+d]=l[u++]}s+=a.shape[1]})}return i}re();var qle=hn((t,r)=>t===r?1:0),Hle=_n(P1,qle,null,"bool"),mBe={kernelName:P1,backendName:"cpu",kernelFunc:Hle};re();var Yle=la(t=>Math.exp(t)),Xle=uc(Vg,Yle,"float32"),gBe={kernelName:Vg,backendName:"cpu",kernelFunc:Xle};re();var Kle=la(t=>Math.expm1(t)),Y4t=uc(Gg,Kle),yBe={kernelName:Gg,backendName:"cpu",kernelFunc:Y4t};re();var Zle=la(t=>Math.floor(t)),X4t=uc(Wg,Zle),bBe={kernelName:Wg,backendName:"cpu",kernelFunc:X4t};re();var Qle=hn((t,r)=>Math.floor(t/r)),K4t=_n(qg,Qle,null,"int32"),xBe={kernelName:qg,backendName:"cpu",kernelFunc:K4t};re();function F9(t,r,n,o,i,s,a,l,u){let c=er([o,s],n);for(let f=0;f<o;f++){let d=[],p=0;for(let h=0;h<i;h++){let m=t[f*i+h];p+=m*a[h],d.push(m)}if(p<0||p>=u/s)throw new Error(`Invalid indices: ${d} does not index into ${l}`);for(let h=0;h<s;h++)c.values[f*s+h]=r.get(...r.indexToLoc(p*s+h))}return c}re();function O9(t,r,n){let o=er(n,t.dtype);for(let i=0;i<o.size;++i){let a=o.indexToLoc(i).slice(),l=a[0],u=a[2],c=r.locToIndex([l,u]);a[2]=r.values[c];let f=t.locToIndex(a);0<=f&&f<t.values.length&&(o.values[i]=t.values[f])}return o}re();var Jle=hn((t,r)=>t>r?1:0),Z4t=_n(L1,Jle,null,"bool"),vBe={kernelName:L1,backendName:"cpu",kernelFunc:Z4t};re();var eue=hn((t,r)=>t>=r?1:0),Q4t=_n(Hg,eue,null,"bool"),wBe={kernelName:Hg,backendName:"cpu",kernelFunc:Q4t};re();var tue=hn((t,r)=>t<r?1:0),J4t=_n(j1,tue,null,"bool"),_Be={kernelName:j1,backendName:"cpu",kernelFunc:J4t};re();var rue=hn((t,r)=>t<=r?1:0),e5t=_n(B1,rue,null,"bool"),SBe={kernelName:B1,backendName:"cpu",kernelFunc:e5t};re();function R9(t,r,n){let o=(r-t)/(n-1),i=Y.makeZerosTypedArray(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+o;return i}re();var nue=la(t=>Math.log(t)),t5t=uc(Zg,nue),CBe={kernelName:Zg,backendName:"cpu",kernelFunc:t5t};re();function P9(t,r,n,o){let i=Y.getTypedArrayFromDType(o,Y.sizeFromShape(n));for(let s=0;s<i.length;++s){let a=s*r,l=t[a];for(let u=0;u<r;++u){let c=t[a+u];(Number.isNaN(c)||c>l)&&(l=c)}i[s]=l}return i}re();var oue=hn((t,r)=>Math.max(t,r)),r5t=_n(Jg,oue),EBe={kernelName:Jg,backendName:"cpu",kernelFunc:r5t};re();var iue=hn((t,r)=>Math.min(t,r)),n5t=_n(e0,iue),TBe={kernelName:e0,backendName:"cpu",kernelFunc:n5t};re();var yP=hn((t,r)=>t*r),o5t=ED((t,r,n,o)=>({real:t*n-r*o,imag:t*o+r*n})),cE=_n(r0,yP,o5t),ABe={kernelName:r0,backendName:"cpu",kernelFunc:cE};re();function sue(t,r,n){let o=Y.createScalarValue(-1,n);return yP([],r,o,t,n)}function i5t(t){let{inputs:r,backend:n}=t,{x:o}=r;lt(o,"neg");let i=n.data.get(o.dataId).values,[s,a]=sue(i,o.shape,o.dtype);return n.makeTensorInfo(a,o.dtype,s)}var kBe={kernelName:ex,backendName:"cpu",kernelFunc:i5t};re();var aue=hn((t,r)=>t!==r?1:0),s5t=_n(V1,aue,null,"bool"),IBe={kernelName:V1,backendName:"cpu",kernelFunc:s5t};re();re();re();function AD(t,r,n,o,i){let s=r.length,a=Y.sizeFromShape(r),l=Y.computeStrides(r),u=Y.computeStrides(i),c=Y.getTypedArrayFromDType(n,Y.sizeFromShape(i));for(let f=0;f<a;++f){let d=Y.indexToLoc(f,s,l),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[o[m]];let h=Y.locToIndex(p,s,u);c[h]=t[f]}return c}function ci(t){let{inputs:r,attrs:n,backend:o}=t,{x:i}=r,{perm:s}=n;lt(i,"transpose");let a=i.shape.length,l=new Array(a);for(let d=0;d<l.length;d++)l[d]=i.shape[s[d]];let u=o.data.get(i.dataId).values,c=AD(u,i.shape,i.dtype,s,l);return{dataId:o.write(c,l,i.dtype),shape:l,dtype:i.dtype}}var DBe={kernelName:Ih,backendName:"cpu",kernelFunc:ci};function lue(t,r,n,o){let[i,s]=ce.computeOutAndReduceShapes(t,o),a=qi(r,"int32"),l=Y.makeZerosTypedArray(Y.sizeFromShape(i),a),u=Y.sizeFromShape(s);for(let c=0;c<l.length;++c){let f=c*u,d=1;for(let p=0;p<u;++p)d*=n[f+p];l[c]=d}return{outVals:l,outShape:i,outDtype:a}}function a5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"prod");let l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=ce.getAxesPermutation(u,l),f=u,d=i,p=[];c!=null&&(d=ci({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),f=ce.getInnerMostAxes(f.length,l));let h=n.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=lue(d.shape,d.dtype,h,f),b=g;return a&&(b=ce.expandShapeToKeepDim(g,u)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,y,m)}var NBe={kernelName:sx,backendName:"cpu",kernelFunc:a5t};re();function l5t(t,r,n){t.forEach((o,i)=>{if(o<0||o>=n){let s=Y.indexToLoc(i,r.length,Y.computeStrides(r)).join(",");throw new Error(`indices[${s}] = ${o} is not in [0, ${n})`)}})}function u5t(t,r){for(let n=0;n<t.length;++n){let o=t[n],i=n===t.length-1?r:t[n+1].length;if(o.length===0)throw new Error("Ragged splits may not be empty");if(o[0]<0)throw new Error("Ragged splits must be non-negative");if(o[o.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<o.length;++s)if(o[s-1]>o[s])throw new Error("Ragged splits must be sorted in ascending order")}}function c5t(t,r,n,o){let i=[],s=0,a=r.length-1+n.length,l=new Array(a).fill(null).map(()=>[0]);u5t(n,o);let u=1;for(let c=0;c<r.length-1;++c){u*=r[c];let f=r[c+1];for(let d=1;d<u+1;++d)l[c].push(d*f)}for(let c=0;c<t.length;++c){let f=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){let h=n[p],m=p+r.length-1;if(m>=0){let g=l[m],y=g[g.length-1]-h[f];for(let b=f;b<d;++b)l[m].push(h[b+1]+y)}f=h[f],d=h[d]}d!==f&&(i.push([f,d]),s+=d-f)}return{outSplits:l,valueSlices:i,numValues:s}}function f5t(t){let r=[];for(let n=0;n<t.length;++n){let o=t[n].length,i=Y.getArrayFromDType("int32",o);r.push(i),t[n].forEach((s,a)=>i[a]=s)}return r}function MBe(t,r){let n=t.slice(0,r);for(;n.length<r;)n.push(1);for(let o=r;o<t.length;o++)n[r-1]*=t[o];return n}function d5t(t,r,n,o,i,s){let a=MBe(r,2)[1],l=MBe(s,2)[1],u=0;for(let c of n)for(let f=c[0];f<c[1];++f){for(let d=0;d<o;++d)i[u*l+d]=t[f*a+d];++u}}function p5t(t,r,n,o,i){let s=r.slice();s[0]=i;let a=Y.getArrayFromDType(n,Y.sizeFromShape(s)),l=t.length,u=l===0?0:l/r[0];return d5t(t,r,o,u,a,s),[a,s]}function L9(t,r,n,o,i,s,a,l){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(r[0].length===0)throw new Error("Split tensors must not be scalars");let u=r[0][0]-1;if(l5t(s,a,u),o.length===0)throw new Error("params.rank must be nonzero");let c=o[0],{outSplits:f,valueSlices:d,numValues:p}=c5t(s,a,t,c),h=f5t(f),m=p5t(n,o,i,d,p);return[h,m[0],m[1]]}re();var FBe=2147483647;function j9(t,r,n,o,i,s,a){if(r.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");let l=r.length===0,u=i.length===0,c=a.length===0,f=[];l||f.push(r[0]),u||f.push(i[0]),c||f.push(a[0]);for(let y=1;y<f.length;++y)if(f[y]!==f[y-1])throw new Error("starts, limits, and deltas must have the same shape");let d=f.length===0?1:f[0],p=Y.getArrayFromDType("int32",d+1);p[0]=0;for(let y=0;y<d;++y){let b=l?t[0]:t[y],x=u?o[0]:o[y],v=c?s[0]:s[y];if(v===0)throw new Error("Requires delta != 0");let w;if(v>0&&x<b||v<0&&x>b)w=0;else if(w=Math.ceil(Math.abs((x-b)/v)),w>FBe)throw new Error(`Requires ((limit - start) / delta) <= ${FBe}`);p[y+1]=p[y]+w}let h=p[d],m=Y.getArrayFromDType(n,h),g=0;for(let y=0;y<d;++y){let b=p[y+1]-p[y],x=l?t[0]:t[y],v=c?s[0]:s[y];for(let w=0;w<b;++w)m[g++]=x,x+=v}return[p,m]}re();var Ep=ce.RowPartitionType,uue=class t{constructor(r,n,o,i,s,a,l,u,c,f){this.shape=r,this.shapeShape=n,this.values=o,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=l,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=ce.getRowPartitionTypesHelper(f),this.raggedRank=ce.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(r){return this.rowPartitionTypes[0]===Ep.FIRST_DIM_SIZE?this.rowPartitionTypes[r+1]:this.rowPartitionTypes[r]}getRowPartitionTensor(r){return this.rowPartitionTypes[0]===Ep.FIRST_DIM_SIZE?this.rowPartitionValues[r+1]:this.rowPartitionValues[r]}getMaxWidth(r){let n=this.getRowPartitionTensor(r-1);switch(this.getRowPartitionTypeByDimension(r-1)){case Ep.VALUE_ROWIDS:return t.getMaxWidthValueRowID(n);case Ep.ROW_SPLITS:return t.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ep[this.getRowPartitionTypeByDimension(r-1)]}`)}}static getMaxWidthRowSplit(r){let n=r.length;if(n===0||n===1)return 0;let o=0;for(let i=0;i<n-1;++i){let s=r[i+1]-r[i];s>o&&(o=s)}return o}static getMaxWidthValueRowID(r){let n=r.length;if(n===0)return 0;let o=0,i=r[0],s=0;for(let a=1;a<n;++a){let l=r[a];l!==i&&(i=l,s=Math.max(a-o,s),o=a)}return Math.max(n-o,s)}tensorShapeFromTensor(r,n,o=!0){if(n.length===0){if(r[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return RBe(r,o)}calculateOutputSize(r){let n=this.valuesShape,o=this.defaultValueShape;ce.validateDefaultValueShape(o,n);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=ce.combineRaggedTensorToTensorShapes(this.raggedRank,i,n);a[0]<0&&(a[0]=r);for(let l=1;l<=this.raggedRank;++l)a[l]<0&&(a[l]=this.getMaxWidth(l));return a}calculateFirstParentOutputIndex(r,n,o){let i=Math.min(r,o),s=[],a=0;for(let l=0;l<i;++l,a+=n)s.push(a);for(let l=i;l<r;++l)s.push(-1);return Y.assert(s.length===r,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(r,n,o,i){let s=r.length,a=[];for(let l=0;l<s-1;++l){let u=r[l+1]-r[l],c=Math.min(i,u),f=n[l];f===-1&&(c=0);for(let d=0;d<c;++d)a.push(f),f+=o;for(let d=0;d<u-c;++d)a.push(-1)}if(s>0&&a.length!==r[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(r,n,o,i){let s=r.length,a=[];if(s===0)return[];let l=0,u=r[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];a.push(c);for(let f=1;f<s;++f){let d=r[f];if(d===u)c>=0&&(++l,l<i?c+=o:c=-1);else{if(l=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==r.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(r,n,o,i){let s=this.getRowPartitionTensor(r),a=this.getRowPartitionTypeByDimension(r);switch(a){case Ep.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,o,i);case Ep.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,o,i);default:throw new Error(`Unsupported partition type: ${Ep[a]}`)}}getFirstDimensionSize(){let r=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case Ep.FIRST_DIM_SIZE:return r[0];case Ep.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ep.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ep[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),o=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*o[u+1];let s=RBe(o,!1),a=Y.getArrayFromDType(this.valuesDType,Y.sizeFromShape(s));if(i[0]*o[0]>0){let u=this.calculateFirstParentOutputIndex(n,i[0],o[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,i[c],o[c]);this.setOutput(this.raggedRank,u,a,s)}return[s,a]}setOutput(r,n,o,i){if(o.length===0)return;let s=this.values,a=o,l=i.slice();l=l.slice(r+1);let u=Y.sizeFromShape(l),c=n.length,f=this.defaultValue;if(f.length!==u&&f.length!==1){let m=this.defaultValueShape;Pe(()=>{let g=Se(f,m);f=T0(g,l).dataSync()})}let d=0,p=0,h=0;for(let m=0;m<=c;++m){let g=m<c?n[m]:-1;if(g===h){++h;continue}if(p<h){let y=s.subarray(d*u),b=a.subarray(p*u),x=(h-p)*u;OBe(b,y,x)}if(m>=c){let y=o.length;g=Math.floor(y/u)}if(g>h)if(this.defaultValue.length===1)a.subarray(h*u,g*u).fill(this.defaultValue[0]),h=g;else for(;g>h;){let y=a.slice(h*u);OBe(y,f,u),++h}g<0?(d=m+1,p=h):(d=m,p=h,h=p+1)}}};function OBe(t,r,n){for(let o=0;o<n;o++)t[o]=r[o]}function RBe(t,r){let n=[];for(let o of t){if(o<0){if(!r)throw new Error(`Dimension ${o} must be >= 0`);if(o<-1)throw new Error(`Dimension ${o} must be >= -1`);o=-1}n.push(o)}return n}function B9(t,r,n,o,i,s,a,l,u,c){return new uue(t,r,n,o,i,s,a,l,u,c).compute()}re();function $9(t,r,n,o){let i=t===r,s=t<r&&n<0,a=r<t&&n>1;if(i||s||a)return Y.makeZerosTypedArray(0,o);let l=Math.abs(Math.ceil((r-t)/n)),u=Y.makeZerosTypedArray(l,o);r<t&&n===1&&(n=-1),u[0]=t;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}re();var cue=la(t=>1/Math.sqrt(t)),h5t=uc(l0,cue),PBe={kernelName:l0,backendName:"cpu",kernelFunc:h5t};re();function Yh(t,r,n,o,i,s,a,l,u,c){let f=[o/i,i],d=t.values,p=r.values;if(o===0)return er(n,r.dtype);let h=u instanceof Tn?u:er(f,r.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let m=0;m<s;m++){let g=[],y=0;for(let b=0;b<a;b++){let x=d[m*a+b];g.push(x),y+=x*l[b]}if(y<0||y>=o/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let b=0;b<i;b++)c?h.values[y*i+b]+=p[m*i+b]:h.values[y*i+b]=r.rank===0?p[0]:p[m*i+b]}return h}re();var LBe=la(t=>1/(1+Math.exp(-t))),fue=Er(p0,t=>1/(1+Math.exp(-t))),jBe={kernelName:p0,backendName:"cpu",kernelFunc:fue};re();function due(t,r,n,o,i){let s=Rs.isSliceContinous(o,r,n),a=Y.sizeFromShape(n),l=Y.computeStrides(o);if(s){let d=Rs.computeFlatOffset(r,l);return i==="string"?t.slice(d,d+a):t.subarray(d,d+a)}let u=i==="string"?ce.fromUint8ToStringArray(t):t,c=er(o,i,u),f=er(n,i);for(let d=0;d<f.size;++d){let p=f.indexToLoc(d),h=p.map((m,g)=>m+r[g]);f.set(c.get(...h),...p)}return i==="string"?ce.fromStringArrayToUint8(f.values):f.values}function Tp(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o;lt(i,"slice");let[l,u]=Rs.parseSliceParams(i,s,a);Rs.assertParamsValid(i,l,u);let c=n.data.get(i.dataId).values,f=due(c,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,f)}var BBe={kernelName:dx,backendName:"cpu",kernelFunc:Tp};re();function z9(t,r,n,o,i,s,a){let l=r[0],u=s[0],c=new Array(u),f=new Array(l),d=r[1];if(u===0){if(l!==0)throw new Error(ce.getSparseFillEmptyRowsIndicesDenseShapeMismatch(l));let y=Y.getArrayFromDType(n,0),b=Y.getArrayFromDType(i,0);return[y,[0,d],b,c,f]}let p=!0,h=0,m=new Array(u).fill(0);for(let y=0;y<l;++y){let b=t[y*d];if(b<0)throw new Error(ce.getSparseFillEmptyRowsNegativeIndexErrorMessage(y,b));if(b>=u)throw new Error(ce.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(y,b,u));++m[b],p=p&&b>=h,h=b}let g=!0;for(let y=0;y<u;++y){let b=m[y]===0;c[y]=b,g=g&&!b,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&p){let y=t,b=o;for(let x=0;x<l;++x)f[x]=x;return[y,[l,d],b,c,f]}else{let y=m[u-1],b=Y.getArrayFromDType(n,y*d),x=Y.getArrayFromDType(i,y),v=new Array(u).fill(0);for(let w=0;w<l;++w){let _=t[w*d],S=v[_],C=(_===0?0:m[_-1])+S;v[_]++;for(let E=0;E<d;++E)b[C*d+E]=t[w*d+E];x[C]=o[w],f[w]=C}for(let w=0;w<u;++w)if(v[w]===0){let S=w===0?0:m[w-1];b[S*d+0]=w;for(let C=1;C<d;++C)b[S*d+C]=0;x[S]=a}return[b,[y,d],x,c,f]}}re();function U9(t,r,n,o,i){let s=Y.sizeFromShape(o),a=r[0],l=i.length,u=[],c=1,f=-1;for(let y=0;y<l;++y){let b=i[y];if(b===-1){if(f!==-1)throw new Error(ce.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(f,y));f=y,u.push(1)}else{if(b<0)throw new Error(ce.getSparseReshapeNegativeOutputDimErrorMessage(y,b));c*=b,u.push(b)}}if(f!==-1){if(c<=0)throw new Error(ce.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let y=Math.trunc(s/c);if(c*y!==s)throw new Error(ce.getSparseReshapeInputOutputMultipleErrorMessage(o,u));u[f]=y}if(Y.sizeFromShape(u)!==s)throw new Error(ce.getSparseReshapeInputOutputMismatchErrorMessage(o,u));let p=o.length,h=[];if(p>0){h[p-1]=1;for(let y=p-2;y>=0;--y)h[y]=h[y+1]*o[y+1]}let m=[];if(l>0){m[l-1]=1;for(let y=l-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}let g=Y.getArrayFromDType(n,a*l);for(let y=0;y<a;++y){let b=0;for(let x=0;x<p;++x)b+=t[y*p+x]*h[x];for(let x=0;x<l;++x)g[y*l+x]=Math.trunc(b/m[x]),b%=m[x]}return[g,[a,l],u]}re();function kD(t,r,n,o,i,s=!1,a=0){let l=o.length,u=[r[0],t.length/r[0]],c=u[1],d=l>0?i[l-1]+1:0;if(d<0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=r.slice();p[0]=d;let h=p.reduce((v,w)=>v*w,1),m=Y.getArrayFromDType(n,h);if(l===0)return d>0&&m.fill(a),[m,p];if(d<=0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,y=1,b=0,x=i[g];for(;;){let v=0;if(y<l){if(v=i[y],x===v){++y;continue}if(x>=v)throw new Error(ce.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(x<0||x>=d)throw new Error(ce.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(x,d));x>b&&m.fill(a,b*c,x*c);for(let w=g;w<y;++w){let _=o[w];if(_<0||_>=u[0])throw new Error(ce.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(w,o[w],u[0]));for(let S=0;S<c;S++)m[x*c+S]+=t[_*c+S]}if(s)for(let w=0;w<c;w++)m[x*c+w]/=y-g;if(g=y,++y,b=x+1,x=v,y>l)break}return b<d&&m.fill(a,b*c,d*c),[m,p]}re();var $Be=la(t=>Math.sqrt(t)),m5t=Er(m0,t=>Math.sqrt(t)),zBe={kernelName:m0,backendName:"cpu",kernelFunc:m5t};re();var pue=hn((t,r)=>{let n=t-r;return n*n}),g5t=_n(g0,pue),UBe={kernelName:g0,backendName:"cpu",kernelFunc:g5t};re();var hue=la((t,r)=>{let{pattern:n,replaceGlobal:o,rewrite:i}=r;return t.replace(new RegExp(n,o?"g":""),i)}),y5t=uc(G1,hue),VBe={kernelName:G1,backendName:"cpu",kernelFunc:y5t};re();function V9(t,r,n,o){let i=er(t,r.dtype);for(let s=0;s<i.size;s++){let a=i.indexToLoc(s),l=new Array(a.length);for(let u=0;u<l.length;u++)l[u]=a[u]*n[u]+o[u];i.set(r.get(...l),...a)}return i}re();var mue=class{constructor(r,n,o,i,s,a){this.separator=Y.encodeString(r),this.nGramWidths=n,this.leftPad=Y.encodeString(o),this.rightPad=Y.encodeString(i),this.padWidth=s,this.preserveShort=a}getPadWidth(r){return Math.min(this.padWidth<0?r-1:this.padWidth,r-1)}getNumNGrams(r,n){let o=this.getPadWidth(n);return Math.max(0,r+2*o-n+1)}createNGrams(r,n,o,i,s,a){for(let l=0;l<s;++l){let u=this.getPadWidth(a),c=Math.max(0,u-l),f=Math.max(0,u-(s-(l+1))),d=a-(c+f),p=n+(c>0?0:l-u),h=0;h+=c*this.leftPad.length;for(let x=0;x<d;++x)h+=r[p+x].length;h+=f*this.rightPad.length;let m=c+f+d-1;h+=m*this.separator.length,o[i+l]=new Uint8Array(h);let g=o[i+l],y=0,b=x=>x.forEach(v=>g[y++]=v);for(let x=0;x<c;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(r[p+x]),b(this.separator);if(d>0){b(r[p+d-1]);for(let x=0;x<f;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<f-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(r,n){let o=r.length,i=n.length;if(i>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<i;++c){let f=n[c]>=u;if(f=f&&n[c]<=o,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${o}]`);u=n[c]}if(u!==o)throw new Error(`Last split value must be data size. Expected ${o}, got ${u}`)}let s=i-1,a=Y.getArrayFromDType("int32",i);if(o===0||i===0){let u=new Array(o);for(let c=0;c<=s;++c)a[c]=0;return[u,a]}a[0]=0;for(let u=1;u<=s;++u){let c=n[u]-n[u-1],f=0;this.nGramWidths.forEach(d=>{f+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&f===0&&(f=1),a[u]=a[u-1]+f}let l=new Array(a[s]);for(let u=0;u<s;++u){let c=n[u],f=a[u];if(this.nGramWidths.forEach(d=>{let p=n[u+1]-n[u],h=this.getNumNGrams(p,d);this.createNGrams(r,c,l,f,h,d),f+=h}),this.preserveShort&&f===a[u]){let d=n[u+1]-n[u];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(r,c,l,f,1,p)}}return[l,a]}};function G9(t,r,n,o,i,s,a,l){return new mue(n,o,i,s,a,l).compute(t,r)}re();function b5t(t,r,n,o){if(!t.length)return;if(r.length===0){for(let s=0;s<t.length;++s)o.push(t.subarray(s,s+1));return}if(r.length===1){let s=r[0],a=t.indexOf(s);for(;a!==-1;){let l=t.subarray(0,a);(!n||l.length!==0)&&o.push(l),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&o.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||r.indexOf(t[s])!==-1){let a=t.subarray(i,s);(!n||a.length!==0)&&o.push(a),i=s+1}}function W9(t,r,n){let o=t.length,i=[],s=0,a=0,l=new Array(o);for(let p=0;p<o;++p){let h=i.length;b5t(t[p],r,n,i);let m=i.length-h;l[p]=m,s+=m,a=Math.max(a,m)}let u=Y.getArrayFromDType("int32",s*2),c=new Array(s),f=[o,a],d=0;for(let p=0;p<o;++p)for(let h=0;h<l[p];++h)u[d*2]=p,u[d*2+1]=h,c[d]=i[d],++d;return[u,c,f]}re();function q9(t,r){let n=Y.getArrayFromDType("int32",t.length);for(let o=0;o<t.length;++o)n[o]=Y.fingerPrint64(t[o]).modulo(r).getLowBitsUnsigned();return n}re();var gue=hn((t,r)=>t-r),x5t=ED((t,r,n,o)=>({real:t-n,imag:r-o})),bP=_n(y0,gue,x5t),GBe={kernelName:y0,backendName:"cpu",kernelFunc:bP};re();function H9(t,r){let n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*r[i];let o=er(n,t.dtype);for(let i=0;i<o.values.length;++i){let s=o.indexToLoc(i),a=new Array(t.rank);for(let u=0;u<a.length;u++)a[u]=s[u]%t.shape[u];let l=t.locToIndex(a);o.values[i]=t.values[l]}return o}re();var xP=(t,r)=>{let n=r.value-t.value;return n===0?t.index-r.index:n};function WBe(t,r,n=0,o=t.length-1){for(;o>n;){if(o-n>600){let l=o-n+1,u=r-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*Math.sign(u-l/2),p=Math.max(n,Math.floor(r-u*f/l+d)),h=Math.min(o,Math.floor(r+(l-u)*f/l+d));WBe(t,r,p,h)}let i=t[r],s=n,a=o;for(Y.swap(t,n,r),xP(t[o],i)>0&&Y.swap(t,n,o);s<a;){for(Y.swap(t,s,a),s++,a--;xP(t[s],i)<0;)s=s+1;for(;xP(t[a],i)>0;)a=a-1}xP(t[n],i)===0?Y.swap(t,n,a):(a=a+1,Y.swap(t,a,o)),a<=r&&(n=a+1),r<=a&&(o=a-1)}}function Y9(t,r,n,o,i){let s=r[r.length-1],[a,l]=[t.length/s,s],u=Y.getTypedArrayFromDType(n,a*o),c=Y.getTypedArrayFromDType("int32",a*o);for(let d=0;d<a;d++){let p=d*l,h=t.subarray(p,p+l),m=new Array(h.length);h.forEach((x,v)=>m[v]={value:x,index:v}),o<m.length&&(WBe(m,o),m=m.slice(0,o)),i&&m.sort(xP);let g=d*o,y=u.subarray(g,g+o),b=c.subarray(g,g+o);for(let x=0;x<o;x++)y[x]=m[x].value,b[x]=m[x].index}let f=r.slice();return f[f.length-1]=o,[er(f,n,u),er(f,"int32",c)]}re();function X9(t,r,n,o){let i=Y.parseAxisParam(r,n)[0],s=[1,n[0],1];for(let m=0;m<i;m++)s[0]*=n[m];s[1]=n[i];for(let m=i+1;m<n.length;m++)s[2]*=n[m];let a=new Map,l=new Int32Array(n[i]),u=new Tn(s,o,t),c=[],f=s[0]===1&&s[2]===1;for(let m=0;m<n[i];m++){let g;if(f)g=t[m].toString();else{let b=[];for(let x=0;x<s[0];x++)for(let v=0;v<s[2];v++)b.push(u.get(x,m,v));g=b.join(",")}let y=a.get(g);if(y!=null)l[m]=y;else{let b=a.size;a.set(g,b),l[m]=b,c.push(m)}}let d=s.slice();d[1]=a.size;let p=new Tn(d,o);c.forEach((m,g)=>{for(let y=0;y<s[0];y++)for(let b=0;b<s[2];b++)p.set(u.get(y,m,b),y,g,b)});let h=n.slice();return h[i]=d[1],{outputValues:p.values,outputShape:h,indices:l}}_3("cpu",()=>new sBe,1);re();re();re();var bue=Er(zg,t=>t>=0?t:Math.exp(t)-1),qBe={kernelName:zg,backendName:"cpu",kernelFunc:bue};re();function xue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o;lt([i],"leakyRelu");let a=Y.sizeFromShape(i.shape),l=n.data.get(i.dataId).values,u=Y.getTypedArrayFromDType("float32",a);for(let c=0;c<l.length;c++)u[c]=l[c]<0?s*l[c]:l[c];return n.makeTensorInfo(i.shape,"float32",u)}var HBe={kernelName:qb,backendName:"cpu",kernelFunc:xue};re();var v5t=hn((t,r)=>t<0?r*t:t);function vue(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r;lt([o,i],"prelu");let s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,[l,u]=v5t(o.shape,i.shape,s,a,"float32");return n.makeTensorInfo(u,"float32",l)}var YBe={kernelName:ix,backendName:"cpu",kernelFunc:vue};re();var wue=Er(i0,t=>Math.max(0,t)),XBe={kernelName:i0,backendName:"cpu",kernelFunc:wue};re();var _ue=Er(s0,t=>Math.min(Math.max(0,t),6)),KBe={kernelName:s0,backendName:"cpu",kernelFunc:_ue};function fE(t,r,n,o,i){if(n==="linear")return Za({inputs:{x:r},backend:t});if(n==="relu")return wue({inputs:{x:r},backend:t});if(n==="elu")return bue({inputs:{x:r},backend:t});if(n==="relu6")return _ue({inputs:{x:r},backend:t});if(n==="prelu")return vue({inputs:{x:r,alpha:o},backend:t});if(n==="leakyrelu")return xue({inputs:{x:r},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return fue({inputs:{x:r},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}re();re();function mn(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=Y.sizeFromShape(i.shape),l=Y.inferFromImplicitShape(s,a),u=Y.sizeFromShape(l);Y.assert(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){let f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;f.shape=l,d.shape=l}return{dataId:i.dataId,shape:l,dtype:i.dtype}}var ZBe={kernelName:ax,backendName:"cpu",kernelFunc:mn};function Sue(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;lt([i,s],"matMul");let u=i.shape.length,c=s.shape.length,f=a?i.shape[u-2]:i.shape[u-1],d=l?s.shape[c-1]:s.shape[c-2],p=a?i.shape[u-1]:i.shape[u-2],h=l?s.shape[c-2]:s.shape[c-1],m=i.shape.slice(0,-2),g=s.shape.slice(0,-2),y=Y.sizeFromShape(m),b=Y.sizeFromShape(g),v=oc.assertAndGetBroadcastShape(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,h]);Y.assert(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${l} must match.`);let w=a?[y,f,p]:[y,p,f],_=l?[b,h,d]:[b,d,h],S=mn({inputs:{x:i},backend:n,attrs:{shape:w}}),C=mn({inputs:{x:s},backend:n,attrs:{shape:_}}),E=a?S.shape[1]:S.shape[2],T=a?S.shape[2]:S.shape[1],I=l?C.shape[1]:C.shape[2],k=Math.max(y,b),F=n.data.get(S.dataId).values,D=n.data.get(C.dataId).values,L=Y.computeStrides(S.shape),P=Y.computeStrides(C.shape),[R,V,G]=a?[L[0],1,L[1]]:[L[0],L[1],1],[U,H,X]=l?[1,P[1],P[0]]:[P[1],1,P[0]],fe=T*I,$=er([k,T,I],S.dtype),M=$.values,z=n.blockSize;for(let q=0;q<k;q++){let ee=q%y,ae=q%b;for(let Q=0;Q<T;Q+=z){let le=Math.min(Q+z,T);for(let ie=0;ie<I;ie+=z){let K=Math.min(ie+z,I);for(let ge=0;ge<E;ge+=z){let ne=Math.min(ge+z,E);for(let ye=Q;ye<le;ye++)for(let xe=ie;xe<K;xe++){let De=0;for(let Te=ge;Te<ne;Te++){let Fe=F[ee*R+ye*V+Te*G],$e=D[Te*U+xe*H+ae*X];De+=Fe*$e}M[q*fe+(ye*I+xe)]+=De}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(v,$.dtype,$.values)}var QBe={kernelName:Fb,backendName:"cpu",kernelFunc:Sue};function w5t(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o,p,h,m,g=[];p=Sue({inputs:{a:i,b:s},attrs:{transposeA:u,transposeB:c},backend:n}),a&&(h=z0({inputs:{a:p,b:a},backend:n}),g.push(p),p=h),f&&(m=fE(n,p,f,l,d),g.push(p),p=m);for(let b of g)n.disposeIntermediateTensorInfo(b);return p}var JBe={kernelName:W1,backendName:"cpu",kernelFunc:w5t};re();var _5t=Er(Ig,t=>Math.acos(t)),e$e={kernelName:Ig,backendName:"cpu",kernelFunc:_5t};re();var S5t=Er(Dg,t=>Math.acosh(t)),t$e={kernelName:Dg,backendName:"cpu",kernelFunc:S5t};re();function C5t(t){let{inputs:r,backend:n}=t,o=r;lt(r,"addN");let i=o.map(l=>n.data.get(l.dataId).values),s=er(o[0].shape,o[0].dtype),a=s.values;for(let l=0;l<o.length;l++){let u=i[l];for(let c=0;c<a.length;c++)a[c]+=u[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}var r$e={kernelName:kb,backendName:"cpu",kernelFunc:C5t};re();function E5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"all");let l=Y.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=ci({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("all",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=Y.sizeFromShape(p),m=Y.makeZerosTypedArray(Y.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];v=v&&_}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var n$e={kernelName:_S,backendName:"cpu",kernelFunc:E5t};re();function T5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"any");let l=Y.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=ci({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("any",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=Y.sizeFromShape(p),m=Y.makeZerosTypedArray(Y.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];v=v||_}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var o$e={kernelName:SS,backendName:"cpu",kernelFunc:T5t};re();function A5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;lt(i,"argMax");let a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=ci({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMax",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=Y.sizeFromShape(f),h=Y.makeZerosTypedArray(p,"int32"),m=Y.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){let b=y*m,x=g[b],v=0;for(let w=0;w<m;++w){let _=g[b+w];_>x&&(x=_,v=w)}h[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",h)}var i$e={kernelName:Ib,backendName:"cpu",kernelFunc:A5t};re();function k5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;lt(i,"argMin");let a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=ci({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMin",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=Y.sizeFromShape(f),h=Y.makeZerosTypedArray(p,"int32"),m=Y.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){let b=y*m,x=g[b],v=0;for(let w=0;w<m;++w){let _=g[b+w];_<x&&(x=_,v=w)}h[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",h)}var s$e={kernelName:Db,backendName:"cpu",kernelFunc:k5t};re();var I5t=Er(Ng,t=>Math.asin(t)),a$e={kernelName:Ng,backendName:"cpu",kernelFunc:I5t};re();var D5t=Er(Mg,t=>Math.asinh(t)),l$e={kernelName:Mg,backendName:"cpu",kernelFunc:D5t};re();var N5t=Er(Fg,t=>Math.atan(t)),u$e={kernelName:Fg,backendName:"cpu",kernelFunc:N5t};re();var M5t=hn((t,r)=>Math.atan2(t,r)),F5t=_n(Rg,M5t),c$e={kernelName:Rg,backendName:"cpu",kernelFunc:F5t};re();var O5t=Er(Og,t=>Math.atanh(t)),f$e={kernelName:Og,backendName:"cpu",kernelFunc:O5t};re();re();function ID(t,r,n,o,i,s){let a=i.strideHeight,l=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,m=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=er(i.outShape,n),y=g.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],x=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let w=0;w<i.batchSize;++w){let _=w*b,S=w*o[0];for(let C=0;C<i.inChannels;++C)for(let E=0;E<i.outHeight;++E){let T=E*a-p,I=Math.max(0,T),k=Math.min(i.inHeight,f+T),F=_+E*x;for(let D=0;D<i.outWidth;++D){let L=D*l-h,P=Math.max(0,L),R=Math.min(i.inWidth,d+L),V=m,G=0,U=0;for(let X=I;X<k;X+=u){let fe=S+X*o[1];for(let $=P;$<R;$+=c){let M=fe+$*o[2],z=t[M+C];s==="max"&&z>V?V=z:s==="avg"&&(G+=z,U++)}if(isNaN(V))break}let H=F+D*v+C;y[H]=s==="avg"?G/U:V}}}return g}function K9(t,r,n,o,i=!1,s=!1){let a=er(o.outShape,"int32"),l=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,f=o.dilationWidth,d=o.effectiveFilterHeight,p=o.effectiveFilterWidth,h=o.padInfo.top,m=o.padInfo.left,g=er(r,n,t);for(let y=0;y<o.batchSize;++y)for(let b=0;b<o.inChannels;++b)for(let x=0;x<o.outHeight;++x){let v=x*l-h,w=v;for(;w<0;)w+=c;let _=Math.min(o.inHeight,d+v);for(let S=0;S<o.outWidth;++S){let C=S*u-m,E=C;for(;E<0;)E+=f;let T=Math.min(o.inWidth,p+C),I=Number.NEGATIVE_INFINITY,k=-1;for(let F=w;F<_;F+=c){let D=F-v;for(let L=E;L<T;L+=f){let P=L-C,R=g.get(y,F,L,b);R>I&&(I=R,i?k=s?((y*o.inHeight+F)*o.inWidth+L)*o.inChannels+b:(F*o.inWidth+L)*o.inChannels+b:k=D*p+P)}}a.set(k,y,x,S,b)}}return a}function Z9(t,r,n,o,i,s){let a=i.strideDepth,l=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=i.padInfo.front,y=i.padInfo.top,b=i.padInfo.left,x=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=er(i.outShape,n),w=v.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let T=0;T<i.batchSize;++T){let I=T*_,k=T*o[0];for(let F=0;F<i.inChannels;++F)for(let D=0;D<i.outDepth;++D){let L=D*a-g,P=L;for(;P<0;)P+=c;let R=Math.min(i.inDepth,p+L),V=I+D*S;for(let G=0;G<i.outHeight;++G){let U=G*l-y,H=U;for(;H<0;)H+=f;let X=Math.min(i.inHeight,h+U),fe=V+G*C;for(let $=0;$<i.outWidth;++$){let M=$*u-b,z=M;for(;z<0;)z+=d;let q=Math.min(i.inWidth,m+M),ee=fe+$*E,ae=x,Q=0,le=0;for(let K=P;K<R;K+=c){let ge=k+K*o[1];for(let ne=H;ne<X;ne+=f){let ye=ge+ne*o[2];for(let xe=z;xe<q;xe+=d){let De=ye+xe*o[3],Te=t[De+F];if(s==="max"&&Te>ae?ae=Te:s==="avg"&&(Q+=Te,le++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}let ie=ee+F;w[ie]=s==="avg"?Q/Math.max(le,1):ae}}}}return v}function d$e(t,r){let n=er(r.outShape,"int32"),o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,a=r.dilationDepth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,h=r.padInfo.top,m=r.padInfo.left;for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outDepth;++b){let x=b*o-p,v=x;for(;v<0;)v+=a;let w=Math.min(r.inDepth,c+x);for(let _=0;_<r.outHeight;++_){let S=_*i-h,C=S;for(;C<0;)C+=l;let E=Math.min(r.inHeight,f+S);for(let T=0;T<r.outWidth;++T){let I=T*s-m,k=I;for(;k<0;)k+=u;let F=Math.min(r.inWidth,d+I),D=Number.NEGATIVE_INFINITY,L=-1;for(let P=v;P<w;P+=a){let R=P-x;for(let V=C;V<E;V+=l){let G=V-S;for(let U=k;U<F;U+=u){let H=U-I,X=t.get(g,P,V,U,y);X>=D&&(D=X,L=R*f*d+G*f+H)}}}n.set(L,g,b,_,T,y)}}}return n}function R5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;lt(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))d=Za({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=Y.computeStrides(i.shape),m=ID(p,i.shape,i.dtype,h,f,"avg");d=n.makeTensorInfo(f.outShape,i.dtype,m.values)}return d}var p$e={kernelName:Nb,backendName:"cpu",kernelFunc:R5t};re();function P5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;lt(i,"avgPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=Z9(d,i.shape,i.dtype,Y.computeStrides(i.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}var h$e={kernelName:Mb,backendName:"cpu",kernelFunc:P5t};re();function L5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;lt([i,s],"avgPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=f.strideDepth,p=f.strideHeight,h=f.strideWidth,m=f.filterDepth,g=f.filterHeight,y=f.filterWidth,b=f.dilationDepth,x=f.dilationHeight,v=f.dilationWidth,w=f.effectiveFilterDepth,_=f.effectiveFilterHeight,S=f.effectiveFilterWidth,C=w-1-f.padInfo.front,E=S-1-f.padInfo.left,T=_-1-f.padInfo.top,I=er(s.shape,"float32"),k=1/(m*g*y),F=n.bufferSync(i);for(let D=0;D<f.batchSize;++D)for(let L=0;L<f.inChannels;++L)for(let P=0;P<f.inDepth;++P)for(let R=0;R<f.inHeight;++R)for(let V=0;V<f.inWidth;++V){let G=P-C,U=R-T,H=V-E,X=0;for(let fe=0;fe<w;fe+=b){let $=(G+fe)/d;if(!($<0||$>=f.outDepth||Math.floor($)!==$))for(let M=0;M<_;M+=x){let z=(U+M)/p;if(!(z<0||z>=f.outHeight||Math.floor(z)!==z))for(let q=0;q<S;q+=v){let ee=(H+q)/h;if(ee<0||ee>=f.outWidth||Math.floor(ee)!==ee)continue;let ae=F.get(D,$,z,ee,L);X+=ae}}}I.set(X*k,D,P,R,V,L)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}var m$e={kernelName:ES,backendName:"cpu",kernelFunc:L5t};re();function j5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;lt([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=f.strideHeight,p=f.strideWidth,h=f.filterHeight,m=f.filterWidth,g=f.dilationHeight,y=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,v=x-1-f.padInfo.left,w=b-1-f.padInfo.top,_=er(a.shape,"float32"),S=1/(h*m),C=n.data.get(i.dataId).values,E=er(i.shape,"float32",C);for(let T=0;T<f.batchSize;++T)for(let I=0;I<f.inChannels;++I)for(let k=0;k<f.inHeight;++k)for(let F=0;F<f.inWidth;++F){let D=k-w,L=F-v,P=0;for(let R=0;R<b;R+=g){let V=(D+R)/d;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let G=0;G<x;G+=y){let U=(L+G)/p;if(U<0||U>=f.outWidth||Math.floor(U)!==U)continue;let H=E.get(T,V,U,I);P+=H}}_.set(P*S,T,k,F,I)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}var g$e={kernelName:CS,backendName:"cpu",kernelFunc:j5t};re();function B5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,scale:s,offset:a,mean:l,variance:u}=r;Y.assert(l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y.assert(a==null||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y.assert(s==null||l.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),lt([i,l,u,s,a],"batchNorm");let{varianceEpsilon:c}=o;c==null&&(c=.001);let f=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),m=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(f.length),y=m.length,b=h.length,x=p.length,v=d.length,w=0,_=0,S=0,C=0;for(let E=0;E<f.length;++E)g[E]=m[w++]+(f[E]-d[_++])*h[S++]/Math.sqrt(p[C++]+c),w>=y&&(w=0),_>=v&&(_=0),S>=b&&(S=0),C>=x&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,g)}var y$e={kernelName:Gb,backendName:"cpu",kernelFunc:B5t};re();function $5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;lt([i],"batchToSpaceND");let l=s.reduce((b,x)=>b*x),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),h=mn({inputs:{x:i},backend:n,attrs:{shape:u}}),m=ci({inputs:{x:h},backend:n,attrs:{perm:c}}),g=mn({inputs:{x:m},backend:n,attrs:{shape:f}}),y=Tp({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var b$e={kernelName:Ob,backendName:"cpu",kernelFunc:$5t};re();function z5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=TD(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var x$e={kernelName:TS,backendName:"cpu",kernelFunc:z5t};re();function U5t(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var v$e={kernelName:AS,backendName:"cpu",kernelFunc:U5t};re();var V5t=Er(Lg,(t,r)=>{let n=r;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),w$e={kernelName:Lg,backendName:"cpu",kernelFunc:V5t};re();var G5t=t=>{let{x:r}=t.inputs,n=t.backend,o=new Float32Array(Y.sizeFromShape(r.shape)),i=n.data.get(r.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values;for(let c=0;c<l.length;c++){let f=l[c],d=u[c];o[c]=Math.hypot(f,d)}return n.makeOutput(o,r.shape,"float32")},_$e={kernelName:Rb,backendName:"cpu",kernelFunc:G5t};re();re();function U0(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var S$e={kernelName:qS,backendName:"cpu",kernelFunc:U0};function Rw(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=Y.parseAxisParam(i,r[0].shape)[0],a=r.map(g=>g.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(g=>g.shape),s);if(Y.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(g=>Y.sizeFromShape(g.shape)>0);if(u.length===1)return Za({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){let g=u.map(w=>Sp({inputs:{input:w},backend:n})),y=u.map(w=>U0({inputs:{input:w},backend:n})),b=Rw({inputs:g,backend:n,attrs:{axis:s}}),x=Rw({inputs:y,backend:n,attrs:{axis:s}}),v=Ps({inputs:{real:b,imag:x},backend:n});return g.forEach(w=>n.disposeIntermediateTensorInfo(w)),y.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),v}let c=u.map(g=>{let b=[-1,Y.sizeFromShape(g.shape.slice(s))];return mn({inputs:{x:g},backend:n,attrs:{shape:b}})}),f=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));l=ce.computeOutShape(c.map(g=>g.shape),1);let d=c[0].shape[0]===1,p=M9(f,l,r[0].dtype,d),h=ce.computeOutShape(u.map(g=>g.shape),s),m=n.makeTensorInfo(h,r[0].dtype,p);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var C$e={kernelName:Pb,backendName:"cpu",kernelFunc:Rw};re();function Cue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o;lt([i,s],"conv2d");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,v=p.dataFormat==="channelsLast",w=new Tn(p.outShape,i.dtype),_=Y.computeStrides(i.shape),S=Y.computeStrides(s.shape),C=_[0],E=v?_[1]:_[2],T=v?_[2]:1,I=v?1:_[1],k=w.strides[0],F=v?w.strides[1]:w.strides[2],D=v?w.strides[2]:1,L=v?1:w.strides[1],P=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,V=w.values;for(let G=0;G<p.batchSize;++G){let U=G*C,H=G*k;for(let X=0;X<p.outHeight;++X){let fe=H+X*F,$=X*p.strideHeight-x;for(let M=0;M<h;++M){let z=$+M*g;if(z<0||z>=p.inHeight)continue;let q=M*S[0],ee=U+z*E;for(let ae=0;ae<p.outWidth;++ae){let Q=fe+ae*D,le=ae*p.strideWidth-b;for(let ie=0;ie<m;++ie){let K=le+ie*y;if(K<0||K>=p.inWidth)continue;let ge=q+ie*S[1],ne=ee+K*T,ye=ge;for(let xe=0;xe<p.inChannels;++xe){let De=P[ne+xe*I];for(let Te=0;Te<p.outChannels;++Te)V[Q+Te*L]+=De*R[ye+Te];ye+=p.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,V)}var E$e={kernelName:Lb,backendName:"cpu",kernelFunc:Cue};re();function W5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o;lt([i,s],"conv2dBackpropFilter");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:y}=p,b=p.dataFormat==="channelsLast",x=new Tn(p.filterShape,"float32"),v=p.padInfo.left,w=p.padInfo.top,_=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=new Tn(i.shape,i.dtype,_),E=new Tn(s.shape,s.dtype,S);for(let T=0;T<g;++T){let I=Math.max(0,Math.ceil((w-T)/h)),k=Math.min(p.outHeight,(p.inHeight+w-T)/h);for(let F=0;F<y;++F){let D=Math.max(0,Math.ceil((v-F)/m)),L=Math.min(p.outWidth,(p.inWidth+v-F)/m);for(let P=0;P<p.inChannels;++P)for(let R=0;R<p.outChannels;++R){let V=0;for(let G=0;G<p.batchSize;++G)for(let U=I;U<k;++U){let H=T+U*h-w;for(let X=D;X<L;++X){let fe=F+X*m-v;b?V+=C.get(G,H,fe,P)*E.get(G,U,X,R):V+=C.get(G,P,H,fe)*E.get(G,R,U,X)}}x.set(V,T,F,P,R)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var T$e={kernelName:IS,backendName:"cpu",kernelFunc:W5t};re();function q5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o;lt([i,s],"conv2dBackpropInput");let d=Y.computeStrides(s.shape),p=Y.computeStrides(i.shape),h=ce.convertConv2DDataFormat(c),m=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,h),g=new Tn(m.inShape,"float32"),y=g.values,b=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,[v,w,_]=d,{batchSize:S,filterHeight:C,filterWidth:E,inChannels:T,inHeight:I,inWidth:k,outChannels:F,outHeight:D,outWidth:L,strideHeight:P,strideWidth:R}=m;h=m.dataFormat;let V=C-1-m.padInfo.top,G=E-1-m.padInfo.left,U=h==="channelsLast",H=g.strides[0],X=U?g.strides[1]:g.strides[2],fe=U?g.strides[2]:1,$=U?1:g.strides[1],M=p[0],z=U?p[1]:p[2],q=U?p[2]:1,ee=U?1:p[1];for(let ae=0;ae<S;++ae)for(let Q=0;Q<T;++Q)for(let le=0;le<I;++le){let ie=le-V,K=Math.max(0,Math.ceil(ie/P)),ge=Math.min(D,(C+ie)/P);for(let ne=0;ne<k;++ne){let ye=ne-G,xe=Math.max(0,Math.ceil(ye/R)),De=Math.min(L,(E+ye)/R),Te=0;for(let $e=K;$e<ge;++$e){let at=$e*P-ie;for(let We=xe;We<De;++We){let jt=We*R-ye,_t=M*ae+z*$e+q*We,kt=v*(C-1-at)+w*(E-1-jt)+_*Q;for(let Rt=0;Rt<F;++Rt){let Mt=b[_t+ee*Rt],Be=x[kt+Rt];Te+=Mt*Be}}}let Fe=H*ae+X*le+fe*ne+$*Q;y[Fe]=Te}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var A$e={kernelName:jb,backendName:"cpu",kernelFunc:q5t};re();function H5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o;lt([i,s],"conv3d");let c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),{filterDepth:f,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:y}=c,b=y.front,x=y.left,v=y.top,w=new Tn(c.outShape,i.dtype),_=n.data.get(i.dataId).values,S=n.data.get(s.dataId).values,C=w.values,E=Y.computeStrides(i.shape),T=Y.computeStrides(s.shape);for(let I=0;I<c.batchSize;++I){let k=I*E[0],F=I*w.strides[0];for(let D=0;D<c.outDepth;++D){let L=F+D*w.strides[1],P=D*c.strideDepth-b;for(let R=0;R<f;++R){let V=P+R*h;if(V<0||V>=c.inDepth)continue;let G=R*T[0],U=k+V*E[1];for(let H=0;H<c.outHeight;++H){let X=L+H*w.strides[2],fe=H*c.strideHeight-v;for(let $=0;$<d;++$){let M=fe+$*m;if(M<0||M>=c.inHeight)continue;let z=G+$*T[1],q=U+M*E[2];for(let ee=0;ee<c.outWidth;++ee){let ae=X+ee*c.outChannels,Q=ee*c.strideWidth-x;for(let le=0;le<p;++le){let ie=Q+le*g;if(ie<0||ie>=c.inWidth)continue;let K=z+le*T[2],ge=q+ie*c.inChannels,ne=K;for(let ye=0;ye<c.inChannels;++ye){let xe=_[ge+ye];for(let De=0;De<c.outChannels;++De)C[ae+De]+=xe*S[ne+De];ne+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var k$e={kernelName:Bb,backendName:"cpu",kernelFunc:H5t};re();function Y5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o;lt([i,s],"conv3dBackpropFilterV2");let c=Y.computeStrides(i.shape),f=Y.computeStrides(s.shape),d=ce.computeConv3DInfo(i.shape,u,a,1,l),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,g=d.filterDepth,y=d.filterHeight,b=d.filterWidth,x=new Tn(d.filterShape,"float32"),v=x.values,[w,_,S,C]=x.strides,E=n.data.get(s.dataId).values,[T,I,k,F]=f,D=n.data.get(i.dataId).values,[L,P,R,V]=c,G=d.padInfo.front,U=d.padInfo.left,H=d.padInfo.top;for(let X=0;X<g;++X){let fe=Math.max(0,Math.ceil((G-X)/p)),$=Math.min(d.outDepth,(d.inDepth+G-X)/p),M=X*w;for(let z=0;z<y;++z){let q=Math.max(0,Math.ceil((H-z)/h)),ee=Math.min(d.outHeight,(d.inHeight+H-z)/h),ae=z*_+M;for(let Q=0;Q<b;++Q){let le=Math.max(0,Math.ceil((U-Q)/m)),ie=Math.min(d.outWidth,(d.inWidth+U-Q)/m),K=Q*S+ae;for(let ge=0;ge<d.inChannels;++ge){let ne=ge*C+K;for(let ye=0;ye<d.outChannels;++ye){let xe=0;for(let De=0;De<d.batchSize;++De){let Te=De*L,Fe=De*T;for(let $e=fe;$e<$;++$e){let We=(X+$e*p-G)*P+Te,jt=$e*I+Fe;for(let _t=q;_t<ee;++_t){let Rt=(z+_t*h-H)*R+We,Mt=_t*k+jt;for(let Be=le;Be<ie;++Be){let Ge=(Q+Be*m-U)*V+Rt,de=Be*F+Mt;xe+=D[Ge+ge]*E[de+ye]}}}}v[ne+ye]=xe}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var I$e={kernelName:DS,backendName:"cpu",kernelFunc:Y5t};re();function X5t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o;lt([i],"conv3dBackpropInputV2");let c=Y.computeStrides(i.shape),f=Y.computeStrides(s.shape),d=ce.computeConv3DInfo(u,s.shape,l,1,a),p=new Tn(d.inShape,"float32"),h=p.values,[m,g,y,b]=p.strides,x=n.data.get(i.dataId).values,[v,w,_,S]=c,C=n.data.get(s.dataId).values,[E,T,I,k]=f,{batchSize:F,filterDepth:D,filterHeight:L,filterWidth:P,inChannels:R,inDepth:V,inHeight:G,inWidth:U,outChannels:H,outDepth:X,outHeight:fe,outWidth:$,strideDepth:M,strideHeight:z,strideWidth:q}=d,ee=D-1-d.padInfo.front,ae=L-1-d.padInfo.top,Q=P-1-d.padInfo.left;for(let le=0;le<F;++le)for(let ie=0;ie<R;++ie)for(let K=0;K<V;++K){let ge=K-ee,ne=Math.max(0,Math.ceil(ge/M)),ye=Math.min(X,(D+ge)/M);for(let xe=0;xe<G;++xe){let De=xe-ae,Te=Math.max(0,Math.ceil(De/z)),Fe=Math.min(fe,(L+De)/z);for(let $e=0;$e<U;++$e){let at=$e-Q,We=Math.max(0,Math.ceil(at/q)),jt=Math.min($,(P+at)/q),_t=0;for(let kt=ne;kt<ye;++kt){let Rt=kt*M-ge;for(let Mt=Te;Mt<Fe;++Mt){let Be=Mt*z-De;for(let ut=We;ut<jt;++ut){let Ge=ut*q-at,de=v*le+w*kt+_*Mt+S*ut,me=E*(D-1-Rt)+T*(L-1-Be)+I*(P-1-Ge)+k*ie;for(let oe=0;oe<H;++oe){let be=x[de+oe],Oe=C[me+oe];_t+=be*Oe}}}}h[m*le+g*K+y*xe+b*$e+ie]=_t}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}var D$e={kernelName:NS,backendName:"cpu",kernelFunc:X5t};re();var K5t=Er(jg,t=>Math.cos(t)),N$e={kernelName:jg,backendName:"cpu",kernelFunc:K5t};re();var Z5t=Er(Bg,t=>Math.cosh(t)),M$e={kernelName:Bg,backendName:"cpu",kernelFunc:Z5t};re();function Q5t(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,[f,d,p,h]=i.shape,m=s.shape[0],[g,y]=l,b=er([m,g,y,h],"float32"),x=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,_=Y.computeStrides(i.shape),S=Y.computeStrides(b.shape);for(let C=0;C<m;C++){let E=C*4,T=x[E],I=x[E+1],k=x[E+2],F=x[E+3],D=v[C];if(D>=f)continue;let L=g>1?(k-T)*(d-1)/(g-1):0,P=y>1?(F-I)*(p-1)/(y-1):0;for(let R=0;R<g;R++){let V=g>1?T*(d-1)+R*L:.5*(T+k)*(d-1);if(V<0||V>d-1){for(let G=0;G<y;G++)for(let U=0;U<h;U++){let H=U+G*S[2]+R*S[1]+C*S[0];b.values[H]=c}continue}if(u==="bilinear"){let G=Math.floor(V),U=Math.ceil(V),H=V-G;for(let X=0;X<y;X++){let fe=y>1?I*(p-1)+X*P:.5*(I+F)*(p-1);if(fe<0||fe>p-1){for(let q=0;q<h;q++){let ee=q+X*S[2]+R*S[1]+C*S[0];b.values[ee]=c}continue}let $=Math.floor(fe),M=Math.ceil(fe),z=fe-$;for(let q=0;q<h;q++){let ee=q+$*_[2]+G*_[1]+D*_[0],ae=w[ee];ee=q+M*_[2]+G*_[1]+D*_[0];let Q=w[ee];ee=q+$*_[2]+U*_[1]+D*_[0];let le=w[ee];ee=q+M*_[2]+U*_[1]+D*_[0];let ie=w[ee],K=ae+(Q-ae)*z,ge=le+(ie-le)*z;ee=q+X*S[2]+R*S[1]+C*S[0],b.values[ee]=K+(ge-K)*H}}}else for(let G=0;G<y;++G){let U=y>1?I*(p-1)+G*P:.5*(I+F)*(p-1);if(U<0||U>p-1){for(let fe=0;fe<h;fe++){let $=fe+G*S[2]+R*S[1]+C*S[0];b.values[$]=c}continue}let H=Math.round(U),X=Math.round(V);for(let fe=0;fe<h;fe++){let $=fe+H*_[2]+X*_[1]+D*_[0],M=fe+G*S[2]+R*S[1]+C*S[0];b.values[M]=w[$]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var F$e={kernelName:FS,backendName:"cpu",kernelFunc:Q5t};re();function J5t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;lt(i,"cumprod");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=ci({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=qi(c.dtype,"int32"),p=Y.makeOnesTypedArray(Y.sizeFromShape(c.shape),d),h=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=l?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){let v=g(b,x);if(x===0)p[v]=a?1:h[v];else{let w=g(b,x-1);p[v]=a?h[w]*p[w]:h[v]*p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=ci({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var O$e={kernelName:MS,backendName:"cpu",kernelFunc:J5t};re();function eBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;lt(i,"cumsum");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=ci({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=qi(c.dtype,"int32"),p=Y.makeZerosTypedArray(Y.sizeFromShape(c.shape),d),h=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=l?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){let v=g(b,x);if(x===0)p[v]=a?0:h[v];else{let w=g(b,x-1);p[v]=a?h[w]+p[w]:h[v]+p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=ci({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var R$e={kernelName:$b,backendName:"cpu",kernelFunc:eBt};re();function tBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=TD(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=N9(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var P$e={kernelName:OS,backendName:"cpu",kernelFunc:tBt};re();function rBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o;Y.assert(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);let l=i.shape[0],u=i.shape[1],c=i.shape[2],f=i.shape[3],d=u*s,p=c*s,h=f/(s*s),m=n.data.get(i.dataId).values,g=new Float32Array(l*d*p*h),y=0;for(let b=0;b<l;++b)for(let x=0;x<d;++x){let v=Math.floor(x/s),w=x%s;for(let _=0;_<p;++_){let S=Math.floor(_/s),C=_%s,E=(w*s+C)*h;for(let T=0;T<h;++T){let k=T+E+f*(S+c*(v+u*b));g[y++]=m[k]}}}return n.makeTensorInfo([l,d,p,h],i.dtype,g)}var L$e={kernelName:RS,backendName:"cpu",kernelFunc:rBt};re();function Eue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;lt([i,s],"depthwiseConv2DNative");let f=Y.computeStrides(i.shape),d=Y.computeStrides(s.shape),p=u;p==null&&(p=[1,1]),Y.assert(ce.eitherStridesOrDilationsAreOne(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);let h=ce.computeConv2DInfo(i.shape,s.shape,a,p,l,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:y,dilationWidth:b,padInfo:x}=h,v=x.left,w=x.top,_=h.outChannels/h.inChannels,S=new Tn(h.outShape,i.dtype),C=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,T=S.values;for(let I=0;I<h.batchSize;++I){let k=I*f[0],F=I*S.strides[0];for(let D=0;D<h.outHeight;++D){let L=F+D*S.strides[1],P=D*h.strideHeight-w;for(let R=0;R<m;++R){let V=P+R*y;if(V<0||V>=h.inHeight)continue;let G=R*d[0],U=k+V*f[1];for(let H=0;H<h.outWidth;++H){let X=L+H*S.strides[2],fe=H*h.strideWidth-v;for(let $=0;$<g;++$){let M=fe+$*b;if(M<0||M>=h.inWidth)continue;let z=G+$*d[1],q=U+M*h.inChannels,ee=X,ae=z;for(let Q=0;Q<h.inChannels;++Q){let le=C[q+Q];for(let ie=0;ie<_;++ie)T[ee+ie]+=le*E[ae+ie];ee+=_,ae+=_}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}var j$e={kernelName:zb,backendName:"cpu",kernelFunc:Eue};re();function nBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o;lt([i,s],"depthwiseConv2dNativeBackpropFilter");let d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=d,y=new Tn(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,v=d.outChannels/d.inChannels,w=n.data.get(i.dataId).values,_=new Tn(i.shape,i.dtype,w),S=n.data.get(s.dataId).values,C=new Tn(s.shape,s.dtype,S);for(let E=0;E<m;++E){let T=Math.max(0,Math.ceil((x-E)/p)),I=Math.min(d.outHeight,(d.inHeight+x-E)/p);for(let k=0;k<g;++k){let F=Math.max(0,Math.ceil((b-k)/h)),D=Math.min(d.outWidth,(d.inWidth+b-k)/h);for(let L=0;L<d.outChannels;++L){let P=Math.trunc(L/v),R=L%v,V=0;for(let G=0;G<d.batchSize;++G)for(let U=T;U<I;++U){let H=E+U*p-x;for(let X=F;X<D;++X){let fe=k+X*h-b;V+=_.get(G,H,fe,P)*C.get(G,U,X,L)}}y.set(V,E,k,P,R)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var B$e={kernelName:PS,backendName:"cpu",kernelFunc:nBt};re();function oBt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o;lt([i,s],"depthwiseConv2DNativeBackpropInput");let d=Y.computeStrides(i.shape),p=Y.computeStrides(s.shape),h=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),m=new Tn(h.inShape,"float32"),g=m.values,[y,b,x]=m.strides,v=n.data.get(i.dataId).values,[w,_,S]=d,C=n.data.get(s.dataId).values,[E,T,I]=p,{batchSize:k,filterHeight:F,filterWidth:D,inChannels:L,inHeight:P,inWidth:R,outChannels:V,outHeight:G,outWidth:U,strideHeight:H,strideWidth:X}=h,fe=F-1-h.padInfo.top,$=D-1-h.padInfo.left,M=V/L;for(let z=0;z<k;++z)for(let q=0;q<L;++q)for(let ee=0;ee<P;++ee){let ae=ee-fe,Q=Math.max(0,Math.ceil(ae/H)),le=Math.min(G,(F+ae)/H);for(let ie=0;ie<R;++ie){let K=ie-$,ge=Math.max(0,Math.ceil(K/X)),ne=Math.min(U,(D+K)/X),ye=0;for(let xe=Q;xe<le;++xe){let De=xe*H-ae;for(let Te=ge;Te<ne;++Te){let Fe=Te*X-K,$e=w*z+_*xe+S*Te,at=E*(F-1-De)+T*(D-1-Fe)+I*q;for(let We=0;We<M;++We){let jt=q*M+We,_t=v[$e+jt],kt=C[at+We];ye+=_t*kt}}}g[y*z+b*ee+x*ie+q]=ye}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var $$e={kernelName:LS,backendName:"cpu",kernelFunc:oBt};re();function iBt(t){let{inputs:r,backend:n}=t,{x:o}=r,i=Y.sizeFromShape(o.shape),s=n.data.get(o.dataId).values,a=er([i,i],o.dtype),l=a.values;for(let c=0;c<s.length;c++)l[c*i+c]=s[c];let u=[...o.shape,...o.shape];return n.makeTensorInfo(u,a.dtype,a.values)}var z$e={kernelName:jS,backendName:"cpu",kernelFunc:iBt};re();var U$e={kernelName:Ub,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i}=t,{strides:s,pad:a,dilations:l}=n,u=r,c=u.data.get(o.dataId).values,f=o.shape.length,d=u.data.get(i.dataId).values,p=i.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:y,outHeight:b,outWidth:x,padInfo:v,strideHeight:w,strideWidth:_,filterHeight:S,filterWidth:C,dilationHeight:E,dilationWidth:T,outShape:I}=ce.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),k=Y.sizeFromShape(I),F=I.length,D=Y.getArrayFromDType(o.dtype,k);for(let P=0;P<h;++P)for(let R=0;R<b;++R){let V=R*w-v.top;for(let G=0;G<x;++G){let U=G*_-v.left;for(let H=0;H<y;++H){let X=Number.MIN_SAFE_INTEGER;for(let $=0;$<S;++$){let M=V+$*E;if(M>=0&&M<m)for(let z=0;z<C;++z){let q=U+z*T;if(q>=0&&q<g){let ee=Y.locToIndex([P,M,q,H],f,Y.computeStrides(o.shape)),ae=Y.locToIndex([$,z,H],p,Y.computeStrides(i.shape)),Q=c[ee]+d[ae];Q>X&&(X=Q)}}}let fe=Y.locToIndex([P,R,G,H],F,Y.computeStrides(I));D[fe]=X}}}return{dataId:u.write(Y.toTypedArray(D,o.dtype),I,o.dtype),shape:I,dtype:o.dtype}}};re();var V$e={kernelName:sI,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=Y.toNestedArray(o.shape,c.data.get(o.dataId).values),d=Y.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:S,dilationHeight:C,dilationWidth:E,outShape:T}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);Y.assert(s.rank===T.length,()=>`Error in ${sI}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);let I=Y.toNestedArray(T,c.data.get(s.dataId).values),k=Y.makeZerosNestedTypedArray(i.shape,i.dtype);for(let D=0;D<p;++D)for(let L=0;L<y;++L){let P=L*v-x.top;for(let R=0;R<b;++R){let V=R*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,H=0,X=0;for(let fe=0;fe<_;++fe){let $=P+fe*C;if($>=0&&$<h)for(let M=0;M<S;++M){let z=V+M*E;if(z>=0&&z<m){let q=f[D][$][z][G]+d[fe][M][G];q>U&&(U=q,H=fe,X=M)}}}k[H][X][G]+=I[D][L][R][G]}}}return{dataId:c.write(Y.toTypedArray(k,o.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};re();var G$e={kernelName:iI,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=Y.toNestedArray(o.shape,c.data.get(o.dataId).values),d=Y.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:S,dilationHeight:C,dilationWidth:E,outShape:T}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);Y.assert(s.rank===T.length,()=>`Error in ${iI}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);let I=Y.toNestedArray(T,c.data.get(s.dataId).values),k=Y.makeZerosNestedTypedArray(o.shape,o.dtype);for(let D=0;D<p;++D)for(let L=0;L<y;++L){let P=L*v-x.top;for(let R=0;R<b;++R){let V=R*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,H=P<0?0:P,X=V<0?0:V;for(let fe=0;fe<_;++fe){let $=P+fe*C;if($>=0&&$<h)for(let M=0;M<S;++M){let z=V+M*E;if(z>=0&&z<m){let q=f[D][$][z][G]+d[fe][M][G];q>U&&(U=q,H=$,X=z)}}}k[D][H][X][G]+=I[D][L][R][G]}}}return{dataId:c.write(Y.toTypedArray(k,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function sBt(t){let{inputs:r,backend:n,attrs:o}=t,{image:i}=r,{canvas:s,options:a}=o,{contextOptions:l,imageOptions:u}=a||{},c=u?.alpha||1,f=l?.contextType||"2d";if(f!=="2d")throw new Error(`Context type ${l.contextType} is not supported by the CPU backend.`);let d=s.getContext(f,l?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${f} type.`);let[p,h]=i.shape.slice(0,2),m=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,y=i.dtype==="float32"?255:1,b=new Uint8ClampedArray(h*p*4);for(let v=0;v<p*h;++v){let w=[0,0,0,255*c];for(let S=0;S<m;S++){let C=g[v*m+S];if(i.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(i.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);m===1?(w[0]=C*y,w[1]=C*y,w[2]=C*y):w[S]=C*y}let _=v*4;b[_+0]=Math.round(w[0]),b[_+1]=Math.round(w[1]),b[_+2]=Math.round(w[2]),b[_+3]=Math.round(w[3])}s.width=h,s.height=p;let x=new ImageData(b,h,p);return d.putImageData(x,0,0),i}var W$e={kernelName:aI,backendName:"cpu",kernelFunc:sBt};re();re();function Wx(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"sum");let l;i.dtype==="bool"?l=Cp({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):l=Za({inputs:{x:i},backend:n});let u=l.shape.length,c=Y.parseAxisParam(s,l.shape),f=ce.getAxesPermutation(c,u),d=c,p=l;f!=null&&(p=ci({inputs:{x:l},backend:n,attrs:{perm:f}}),d=ce.getInnerMostAxes(d.length,u)),ce.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,m]=ce.computeOutAndReduceShapes(p.shape,d),g=ce.upcastType(p.dtype,"int32"),y=CD(n,h,g),b=Y.sizeFromShape(m),x=n.data.get(y.dataId).values,v=n.data.get(p.dataId).values;for(let w=0;w<x.length;++w){let _=w*b,S=0;for(let C=0;C<b;++C)S+=v[_+C];x[w]=S}if(a){let w=ce.expandShapeToKeepDim(y.shape,c),_=y;y=mn({inputs:{x:y},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(_)}return n.disposeIntermediateTensorInfo(l),f!=null&&n.disposeIntermediateTensorInfo(p),y}var q$e={kernelName:px,backendName:"cpu",kernelFunc:Wx};function aBt(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,h=a.length,m=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(h,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=ci({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);Y.arraysEqual(v.shape,w)||(v=mn({inputs:{x:v},backend:n,attrs:{shape:w}}),m.push(v)),p===null?p=v:(p=cE({inputs:{a:v,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=Wx({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var H$e={kernelName:BS,backendName:"cpu",kernelFunc:aBt};re();function lBt(t){let{inputs:r,backend:n}=t,{dy:o,y:i}=r;lt([o,i],"eluGrad");let s=new Float32Array(Y.sizeFromShape(i.shape)),a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;++u){let c=a[u];c>=0?s[u]=l[u]:s[u]=l[u]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}var Y$e={kernelName:$S,backendName:"cpu",kernelFunc:lBt};re();var uBt=ce.ERF_P,cBt=ce.ERF_A1,fBt=ce.ERF_A2,dBt=ce.ERF_A3,pBt=ce.ERF_A4,hBt=ce.ERF_A5,mBt=Er(Ug,t=>{let r=Math.sign(t),n=Math.abs(t),o=1/(1+uBt*n);return r*(1-((((hBt*o+pBt)*o+dBt)*o+fBt)*o+cBt)*o*Math.exp(-n*n))}),X$e={kernelName:Ug,backendName:"cpu",kernelFunc:mBt};re();function DD(t){let{inputs:r,backend:n,attrs:o}=t,{input:i}=r,{dim:s}=o,a=i.shape.length,l=i.shape.slice(),u=s;return s<0&&(Y.assert(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+s+1),l.splice(u,0,1),mn({inputs:{x:i},backend:n,attrs:{shape:l}})}var K$e={kernelName:Vb,backendName:"cpu",kernelFunc:DD};re();re();re();var gBt=hn((t,r)=>t/r),vP=_n($g,gBt),wP={kernelName:$g,backendName:"cpu",kernelFunc:vP};function Q9(t,r,n){let o=t.shape,i=o[0],s=o[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,u=a.complexTensorInfos.imag,c=[i,s],f=Y.sizeFromShape(c),d=Y.getTypedArrayFromDType("float32",f),p=Y.getTypedArrayFromDType("float32",f);for(let y=0;y<i;y++){let b=Tp({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,s]}}),x=Tp({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,s]}}),v=Ps({inputs:{real:b,imag:x},backend:n}),{real:w,imag:_}=yBt(v,r,n),S=ce.mergeRealAndImagArrays(w,_);for(let C=0;C<s;C++){let E=ce.getComplexWithIndex(S,C);d[y*s+C]=E.real,p[y*s+C]=E.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}let h=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",p),g=Ps({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}function yBt(t,r,n){let o=Y.sizeFromShape(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(bBt(o)){let l=Tue(s,a,o,r,n),u=[t.shape[0],t.shape[1]];if(r){let c=n.makeTensorInfo(u,"float32",l.real),f=n.makeTensorInfo(u,"float32",l.imag),d=n.makeTensorInfo([],"float32",Y.createScalarValue(o,"float32")),p=Za({inputs:{x:d},backend:n}),h=wP.kernelFunc({inputs:{a:c,b:d},backend:n}),m=wP.kernelFunc({inputs:{a:f,b:p},backend:n}),g=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return l}else{let l=ce.mergeRealAndImagArrays(s,a),u=xBt(l,o,r);return ce.splitRealAndImagArrays(u)}}function bBt(t){return(t&t-1)===0}function Tue(t,r,n,o,i){if(n===1)return{real:t,imag:r};let s=ce.mergeRealAndImagArrays(t,r),a=n/2,l=ce.complexWithEvenIndex(s),u=l.real,c=l.imag,f=[u.length],d=i.makeTensorInfo(f,"float32",u),p=i.makeTensorInfo(f,"float32",c),h=Ps({inputs:{real:d,imag:p},backend:i}),m=ce.complexWithOddIndex(s),g=m.real,y=m.imag,b=[g.length],x=i.makeTensorInfo(b,"float32",g),v=i.makeTensorInfo(b,"float32",y),w=Ps({inputs:{real:x,imag:v},backend:i}),_=Tue(u,c,a,o,i),S=_.real,C=_.imag,E=[S.length],T=i.makeTensorInfo(E,"float32",S),I=i.makeTensorInfo(E,"float32",C),k=Ps({inputs:{real:T,imag:I},backend:i}),F=Tue(g,y,a,o,i),D=F.real,L=F.imag,P=[D.length],R=i.makeTensorInfo(P,"float32",D),V=i.makeTensorInfo(P,"float32",L),G=Ps({inputs:{real:R,imag:V},backend:i}),U=ce.exponents(n,o),H=[U.real.length],X=i.makeTensorInfo(H,"float32",U.real),fe=i.makeTensorInfo(H,"float32",U.imag),$=Ps({inputs:{real:X,imag:fe},backend:i}),M=cE({inputs:{a:$,b:G},backend:i}),z=z0({inputs:{a:k,b:M},backend:i}),q=bP({inputs:{a:k,b:M},backend:i}),ee=Sp({inputs:{input:z},backend:i}),ae=Sp({inputs:{input:q},backend:i}),Q=U0({inputs:{input:z},backend:i}),le=U0({inputs:{input:q},backend:i}),ie=Rw({inputs:[ee,ae],backend:i,attrs:{axis:0}}),K=Rw({inputs:[Q,le],backend:i,attrs:{axis:0}}),ge=i.data.get(ie.dataId).values,ne=i.data.get(K.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(K),{real:ge,imag:ne}}function xBt(t,r,n){let o=new Float32Array(r*2);for(let i=0;i<r;i++){let s=0,a=0;for(let l=0;l<r;l++){let u=ce.exponent(i*l,r,n),c=ce.getComplexWithIndex(t,l);s+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(s/=r,a/=r),ce.assignToTypedArray(o,s,a,i)}return o}function vBt(t){let{inputs:r,backend:n}=t,{input:o}=r,i=Y.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=mn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=Q9(l,!1,n),c=mn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var Z$e={kernelName:zS,backendName:"cpu",kernelFunc:vBt};re();function _P(t){let{backend:r,attrs:n}=t,{shape:o,value:i,dtype:s}=n,a=s||Y.inferDtype(i),l=Y.getArrayFromDType(a,Y.sizeFromShape(o));return wBt(l,i,a),r.makeTensorInfo(o,a,l)}var Q$e={kernelName:US,backendName:"cpu",kernelFunc:_P};function wBt(t,r,n){t.fill(r)}re();var J$e={kernelName:VS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,i=n,s=Y.getTypedArrayFromDType(o.dtype,Y.sizeFromShape(o.shape)),[a,l,u,c]=o.shape,f=i.data.get(o.dataId).values;for(let p=0;p<a;p++){let h=p*u*l*c;for(let m=0;m<l;m++){let g=m*(u*c);for(let y=0;y<u;y++){let b=y*c;for(let x=0;x<c;x++){let v=Math.round(u-y-1),w=h+g+b+x,_=f[w];if(v>=0&&v<u){let S=v*c,C=h+g+S+x;_=f[C]}s[w]=_}}}}return{dataId:i.write(s,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function _Bt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=Cue({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;if(f==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){let b=mn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=z0({inputs:{a:g,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else g=z0({inputs:{a:g,b:a},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){let y=g;if(f==="NCHW"&&h==="prelu"&&l.shape.length===1&&l.shape[0]!==1){let b=mn({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});g=fE(n,g,h,b,m),n.disposeIntermediateTensorInfo(b)}else g=fE(n,g,h,l,m);n.disposeIntermediateTensorInfo(y)}return g}var e6e={kernelName:q1,backendName:"cpu",kernelFunc:_Bt};re();function SBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=Eue({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;g=z0({inputs:{a:g,b:a},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){let y=g;g=fE(n,g,h,l,m),n.disposeIntermediateTensorInfo(y)}return g}var t6e={kernelName:H1,backendName:"cpu",kernelFunc:SBt};re();function CBt(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=Y.sizeFromShape(o.shape),a=i.shape,l=a[a.length-1],[u,c,f,d]=ce.prepareAndValidate(o,i);if(c===0)return n.makeTensorInfo(u,o.dtype,[]);let p=n.data.get(i.dataId).values,h=n.bufferSync(o),m=F9(p,h,o.dtype,c,l,f,d,o.shape,s);return n.makeTensorInfo(u,o.dtype,m.values)}var r6e={kernelName:GS,backendName:"cpu",kernelFunc:CBt};re();function EBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o;lt([i,s],"gatherV2");let u=Y.parseAxisParam(a,i.shape)[0],c=n.data.get(s.dataId).values,f=i.shape[u];for(let w=0;w<c.length;++w){let _=c[w];Y.assert(_<=f-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${f-1}]`)}let d=l;l==null&&(d=0);let p=Y.sizeFromShape(s.shape),h=ce.segment_util.collectGatherOpShapeInfo(i,s,u,d),m=mn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=mn({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),y=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],b=n.bufferSync(g),x=n.bufferSync(m),v=O9(x,b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,v.dtype,v.values)}var n6e={kernelName:Wb,backendName:"cpu",kernelFunc:EBt};re();function TBt(t){let{inputs:r,backend:n}=t,{input:o}=r,i=Y.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=mn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=Q9(l,!0,n),c=mn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var o6e={kernelName:WS,backendName:"cpu",kernelFunc:TBt};re();var ABt=Er(Yg,t=>Number.isFinite(t)?1:0,"bool"),i6e={kernelName:Yg,backendName:"cpu",kernelFunc:ABt};re();var kBt=Er(Xg,t=>Math.abs(t)===1/0?1:0,"bool"),s6e={kernelName:Xg,backendName:"cpu",kernelFunc:kBt};re();var IBt=Er(Kg,t=>Number.isNaN(t)?1:0,"bool"),a6e={kernelName:Kg,backendName:"cpu",kernelFunc:IBt};re();function DBt(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=R9(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var l6e={kernelName:HS,backendName:"cpu",kernelFunc:DBt};re();var NBt=Er(Qg,t=>Math.log1p(t)),u6e={kernelName:Qg,backendName:"cpu",kernelFunc:NBt};re();var MBt=hn((t,r)=>t&&r),FBt=_n($1,MBt,null,"bool"),c6e={kernelName:$1,backendName:"cpu",kernelFunc:FBt};re();var OBt=Er(z1,t=>t?0:1,"bool"),f6e={kernelName:z1,backendName:"cpu",kernelFunc:OBt};re();var RBt=hn((t,r)=>t||r),PBt=_n(U1,RBt,null,"bool"),d6e={kernelName:U1,backendName:"cpu",kernelFunc:PBt};re();function LBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o;lt(i,"LRN");let c=i.shape[3],f=c-1,d=n.data.get(i.dataId).values,p=Y.sizeFromShape(i.shape),h=new Float32Array(p);function m(g){let y=g%c,b=g-y+Math.max(0,y-s),x=g-y+Math.min(y+s,f),v=0;for(;b<=x;b++){let w=d[b];v+=w*w}return v}for(let g=0;g<p;g++){let y=m(g),b=d[g]*Math.pow(a+l*y,-u);h[g]=b}return n.makeTensorInfo(i.shape,i.dtype,h)}var p6e={kernelName:Hb,backendName:"cpu",kernelFunc:LBt};re();function jBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o;lt(a,"LRNGrad");let d=Y.sizeFromShape(a.shape),p=a.shape[3],h=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,y=new Float32Array(d),b=d;for(let x=0;x<b;x++){let v=x%p,w=x-v+Math.max(0,v-l),_=x-v+Math.min(p,v+l+1),S=0;for(let C=w;C<_;C++)S+=Math.pow(m[C],2);S=c*S+u;for(let C=w;C<_;C++){let E=-2*c*f*m[C]*g[x]/S;x===C&&(E+=Math.pow(S,-f)),E*=h[x],y[C]+=E}}return n.makeTensorInfo(a.shape,i.dtype,y)}var h6e={kernelName:YS,backendName:"cpu",kernelFunc:jBt};re();re();re();function Aue(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=n,u=i.shape,c=u.length,f=Y.parseAxisParam(s,u),d=f,p=ce.getAxesPermutation(d,c),h=l.data.get(i.dataId).values;if(p!=null){let w=new Array(c);for(let _=0;_<w.length;_++)w[_]=u[p[_]];h=AD(h,u,i.dtype,p,w),d=ce.getInnerMostAxes(d.length,c),u=w}lt(i,"max"),ce.assertAxesAreInnerMostDims("max",d,c);let[m,g]=ce.computeOutAndReduceShapes(u,d),y=Y.sizeFromShape(g),b=P9(h,y,m,i.dtype),x=l.write(b,m,i.dtype),v=m;return a&&(v=ce.expandShapeToKeepDim(m,f)),{dataId:x,shape:v,dtype:i.dtype}}var m6e={kernelName:Yb,backendName:"cpu",kernelFunc:Aue};re();function BBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;lt(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))d=Za({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=Y.computeStrides(i.shape),m=ID(p,i.shape,i.dtype,h,f,"max");d=n.makeTensorInfo(f.outShape,i.dtype,m.values)}return d}var g6e={kernelName:Xb,backendName:"cpu",kernelFunc:BBt};re();function $Bt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;lt(i,"maxPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=Z9(d,i.shape,i.dtype,Y.computeStrides(i.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}var y6e={kernelName:Kb,backendName:"cpu",kernelFunc:$Bt};re();function zBt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;lt([i,s],"maxPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=n.bufferSync(s),p=d$e(d,f),h=f.strideDepth,m=f.strideHeight,g=f.strideWidth,y=f.dilationDepth,b=f.dilationHeight,x=f.dilationWidth,v=f.effectiveFilterDepth,w=f.effectiveFilterHeight,_=f.effectiveFilterWidth,S=v-1-f.padInfo.front,C=_-1-f.padInfo.left,E=w-1-f.padInfo.top,T=er(s.shape,"float32"),I=n.bufferSync(i);for(let k=0;k<f.batchSize;++k)for(let F=0;F<f.inChannels;++F)for(let D=0;D<f.inDepth;++D)for(let L=0;L<f.inHeight;++L)for(let P=0;P<f.inWidth;++P){let R=D-S,V=L-E,G=P-C,U=0;for(let H=0;H<v;H+=y){let X=(R+H)/h;if(!(X<0||X>=f.outDepth||Math.floor(X)!==X))for(let fe=0;fe<w;fe+=b){let $=(V+fe)/m;if(!($<0||$>=f.outHeight||Math.floor($)!==$))for(let M=0;M<_;M+=x){let z=(G+M)/g;if(z<0||z>=f.outWidth||Math.floor(z)!==z)continue;let q=v*w*_-1-p.get(k,X,$,z,F),ee=H*w*_+fe*_+M,ae=q===ee?1:0;if(ae===0)continue;let Q=I.get(k,X,$,z,F);U+=Q*ae}}}T.set(U,k,D,L,P,F)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}var b6e={kernelName:KS,backendName:"cpu",kernelFunc:zBt};re();function UBt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;lt([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),h=n.data.get(l.dataId).values,m=er(p.outShape,l.dtype,K9(h,l.shape,l.dtype,p).values),g=p.strideHeight,y=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,v=p.effectiveFilterHeight,w=p.effectiveFilterWidth,_=w-1-p.padInfo.left,S=v-1-p.padInfo.top,C=er(l.shape,"float32"),E=n.data.get(i.dataId).values,T=er(i.shape,"float32",E);for(let I=0;I<p.batchSize;++I)for(let k=0;k<p.inChannels;++k)for(let F=0;F<p.inHeight;++F)for(let D=0;D<p.inWidth;++D){let L=F-S,P=D-_,R=0;for(let V=0;V<v;V+=b){let G=(L+V)/g;if(!(G<0||G>=p.outHeight||Math.floor(G)!==G))for(let U=0;U<w;U+=x){let H=(P+U)/y;if(H<0||H>=p.outWidth||Math.floor(H)!==H)continue;let X=v*w-1-m.get(I,G,H,k),fe=V*w+U,$=X===fe?1:0;if($===0)continue;let M=T.get(I,G,H,k);R+=M*$}}C.set(R,I,F,D,k)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var x6e={kernelName:XS,backendName:"cpu",kernelFunc:UBt};re();re();re();function v6e(t,r,n,o,i){let s=Y.computeStrides(r),a=ID(t,r,n,s,i,"max"),l=K9(t,r,n,i,!0,o);return[a.values,l.values]}var w6e={kernelName:ZS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;lt(o,"MaxPoolWithArgmax");let c=u.data.get(o.dataId).values,f=ce.computePool2DInfo(o.shape,i,s,[1,1],a),[d,p]=v6e(c,o.shape,o.dtype,l,f),h=u.write(d,f.outShape,o.dtype),m=u.write(p,f.outShape,o.dtype);return[{dataId:h,shape:f.outShape,dtype:o.dtype},{dataId:m,shape:f.outShape,dtype:"int32"}]}};re();function VBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=Y.parseAxisParam(s,i.shape),c=ce.computeOutAndReduceShapes(i.shape,l)[1],f=Y.sizeFromShape(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));d.push(p);let h=Cp({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);let m=vP({inputs:{a:h,b:p},backend:n});d.push(m);let g=Wx({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:a}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}var _6e={kernelName:Zb,backendName:"cpu",kernelFunc:VBt};re();function GBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;lt(i,"min");let l=Y.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=ci({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=Y.sizeFromShape(p),m=Y.makeZerosTypedArray(Y.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];(Number.isNaN(_)||_<v)&&(v=_)}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var S6e={kernelName:Qb,backendName:"cpu",kernelFunc:GBt};re();function WBt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,mode:a}=o;lt(i,"mirrorPad");let l=s.map((v,w)=>v[0]+i.shape[w]+v[1]),u=s.map(v=>v[0]),c=s.map((v,w)=>v[0]+i.shape[w]),f=a==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,h=Y.computeStrides(i.shape),m=Y.sizeFromShape(l),g=l.length,y=Y.computeStrides(l),b=Y.getTypedArrayFromDType(i.dtype,m);for(let v=0;v<m;v++){let w=Y.indexToLoc(v,g,y);for(let S=0;S<g;S++)w[S]<u[S]?w[S]=u[S]*2-w[S]-f:w[S]>=c[S]&&(w[S]=(c[S]-1)*2-w[S]+f);w=w.map((S,C)=>S-u[C]);let _=Y.locToIndex(w,p,h);b[v]=d[_]}return{dataId:n.write(b,l,i.dtype),shape:l,dtype:i.dtype}}var C6e={kernelName:Jb,backendName:"cpu",kernelFunc:WBt};re();var qBt=hn((t,r)=>{let n=t%r;return t<0&&r<0||t>=0&&r>=0?n:(n+r)%r}),HBt=_n(t0,qBt),E6e={kernelName:t0,backendName:"cpu",kernelFunc:HBt};re();var A6e=Al(V3());re();function kue(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=i.shape.length,l=s;if(l===-1&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);let u=Y.parseAxisParam([l],i.shape),c=Aue({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),f=ce.expandShapeToKeepDim(c.shape,u),d=mn({inputs:{x:c},backend:n,attrs:{shape:f}}),p=bP({inputs:{a:i,b:d},backend:n}),h=Xle({inputs:{x:p},backend:n}),m=Wx({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),g=mn({inputs:{x:m},backend:n,attrs:{shape:f}}),y=vP({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var T6e={kernelName:gx,backendName:"cpu",kernelFunc:kue};function YBt(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o;lt(i,"multinomial");let u=l?i:kue({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=u.shape[0],f=u.shape[1],d=n.data.get(u.dataId).values,p=[c,s],h=Y.makeZerosTypedArray(Y.sizeFromShape(p),"int32");for(let m=0;m<c;++m){let g=m*f,y=new Float32Array(f-1);y[0]=d[g];for(let v=1;v<y.length;++v)y[v]=y[v-1]+d[g+v];let b=A6e.alea(a.toString()),x=m*s;for(let v=0;v<s;++v){let w=b();h[x+v]=y.length;for(let _=0;_<y.length;_++)if(w<y[_]){h[x+v]=_;break}}}return l||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",h)}var k6e={kernelName:QS,backendName:"cpu",kernelFunc:YBt};re();var XBt=ka.nonMaxSuppressionV3Impl;function KBt(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o;lt(i,"NonMaxSuppression");let c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d}=XBt(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var I6e={kernelName:JS,backendName:"cpu",kernelFunc:KBt};re();var ZBt=ka.nonMaxSuppressionV4Impl;function QBt(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o;lt(i,"NonMaxSuppressionPadded");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:h}=ZBt(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var D6e={kernelName:eC,backendName:"cpu",kernelFunc:QBt};re();var JBt=ka.nonMaxSuppressionV5Impl;function e$t(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o;lt(i,"NonMaxSuppressionWithScore");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=a,h=l,m=u,g=c,{selectedIndices:y,selectedScores:b}=JBt(f,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var N6e={kernelName:tC,backendName:"cpu",kernelFunc:e$t};re();function t$t(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o;lt(i,"oneHot");let c=Y.sizeFromShape(i.shape),f=new Float32Array(c*a);f.fill(u);let d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<a&&(f[p*a+d[p]]=l);return n.makeTensorInfo([...i.shape,a],s,f)}var M6e={kernelName:rx,backendName:"cpu",kernelFunc:t$t};re();re();function SP(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(o.dtype==="complex64"){let i=Sp({inputs:{input:o},backend:n}),s=SP({inputs:{x:i},backend:n}),a=U0({inputs:{input:o},backend:n}),l=SP({inputs:{x:a},backend:n}),u=Ps({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return _P({backend:n,attrs:{shape:o.shape,value:0,dtype:o.dtype}})}var F6e={kernelName:xx,backendName:"cpu",kernelFunc:SP};function O6e(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(o.dtype==="complex64"){let i=Sp({inputs:{input:o},backend:n}),s=O6e({inputs:{x:i},backend:n}),a=U0({inputs:{input:o},backend:n}),l=SP({inputs:{x:a},backend:n}),u=Ps({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return _P({backend:n,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}var R6e={kernelName:tx,backendName:"cpu",kernelFunc:O6e};re();function Iue(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return DD({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{Y.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),Y.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=DD({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=Rw({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var P6e={kernelName:nx,backendName:"cpu",kernelFunc:Iue};re();function r$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;lt(i,"pad");let l=s.map((x,v)=>x[0]+i.shape[v]+x[1]),u=s.map(x=>x[0]),c=n.data.get(i.dataId).values,f=Y.sizeFromShape(i.shape),d=i.shape.length,p=Y.computeStrides(i.shape),h=Y.sizeFromShape(l),m=l.length,g=Y.computeStrides(l),y=Y.getTypedArrayFromDType(i.dtype,h);a!==0&&y.fill(a);for(let x=0;x<f;x++){let w=Y.indexToLoc(x,d,p).map((S,C)=>S+u[C]),_=Y.locToIndex(w,m,g);y[_]=c[x]}return{dataId:n.write(y,l,i.dtype),shape:l,dtype:i.dtype}}var J9={kernelName:ox,backendName:"cpu",kernelFunc:r$t};re();var n$t=hn((t,r)=>Math.pow(t,r)),o$t=_n(n0,n$t),L6e={kernelName:n0,backendName:"cpu",kernelFunc:o$t};re();function i$t(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.data.get(b.dataId).values),c=i.map(b=>b.shape),f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,[p,h,m]=L9(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return g.concat([y])}var j6e={kernelName:rC,backendName:"cpu",kernelFunc:i$t};re();function s$t(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=j9(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var B6e={kernelName:nC,backendName:"cpu",kernelFunc:s$t};re();function a$t(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,p=l.map(y=>n.data.get(y.dataId).values),h=l.map(y=>y.shape),[m,g]=B9(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,h,u);return n.makeTensorInfo(m,s.dtype,g)}var $6e={kernelName:oC,backendName:"cpu",kernelFunc:a$t};re();function l$t(t){let{backend:r,attrs:n}=t,{start:o,stop:i,dtype:s,step:a}=n,l=$9(o,i,a,s);return r.makeTensorInfo([l.length],s,l)}var z6e={kernelName:iC,backendName:"cpu",kernelFunc:l$t};re();var u$t=Er(o0,t=>1/t),U6e={kernelName:o0,backendName:"cpu",kernelFunc:u$t};re();function c$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;lt(i,"resizeBilinear");let u=Y.computeStrides(i.shape),[c,f]=l,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(Y.sizeFromShape([d,c,f,m])),b=[s&&c>1?p-1:p,s&&f>1?h-1:h],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=0,w=b[0]/x[0],_=b[1]/x[1];for(let S=0;S<d;S++)for(let C=0;C<c;C++){let E;a?E=w*(C+.5)-.5:E=w*C;let T=Math.max(0,Math.floor(E)),I=E-T,k=Math.min(p-1,Math.ceil(E)),F=S*u[0]+T*u[1],D=S*u[0]+k*u[1];for(let L=0;L<f;L++){let P;a?P=_*(L+.5)-.5:P=_*L;let R=Math.max(0,Math.floor(P)),V=P-R,G=Math.min(h-1,Math.ceil(P)),U=F+R*u[2],H=D+R*u[2],X=F+G*u[2],fe=D+G*u[2];for(let $=0;$<m;$++){let M=g[U+$],z=g[H+$],q=g[X+$],ee=g[fe+$],ae=M+(q-M)*V,Q=z+(ee-z)*V,le=ae+(Q-ae)*I;y[v++]=le}}}return n.makeTensorInfo([d,c,f,m],"float32",y)}var V6e={kernelName:ux,backendName:"cpu",kernelFunc:c$t};re();function f$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;lt([s,i],"resizeBilinearGrad");let l=Y.computeStrides(i.shape),[u,c,f,d]=i.shape,[,p,h]=s.shape,m=new Float32Array(u*c*f*d),g=[a&&p>1?c-1:c,a&&h>1?f-1:f],y=[a&&p>1?p-1:p,a&&h>1?h-1:h],b=g[0]/y[0],x=g[1]/y[1],v=n.data.get(s.dataId).values,w=0;for(let _=0;_<u;_++){let S=_*l[0];for(let C=0;C<p;C++){let E=C*b,T=Math.floor(E),I=Math.min(Math.ceil(E),c-1),k=S+T*l[1],F=S+I*l[1],D=E-T,L=1-D;for(let P=0;P<h;P++){let R=P*x,V=Math.floor(R),G=Math.min(Math.ceil(R),f-1),U=R-V,H=1-U,X=k+V*l[2],fe=k+G*l[2],$=F+V*l[2],M=F+G*l[2],z=L*H,q=L*U,ee=D*H,ae=D*U;for(let Q=0;Q<d;Q++){let le=v[w++];m[X+Q]+=le*z,m[fe+Q]+=le*q,m[$+Q]+=le*ee,m[M+Q]+=le*ae}}}}return n.makeTensorInfo([u,f,c,d],"float32",m)}var G6e={kernelName:lC,backendName:"cpu",kernelFunc:f$t};re();function d$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;lt(i,"resizeNearestNeighbor");let u=Y.computeStrides(i.shape),[c,f]=l,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(d*c*f*m),b=[s&&c>1?p-1:p,s&&f>1?h-1:h],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=b[0]/x[0],w=b[1]/x[1],_=0;for(let S=0;S<d;S++){let C=S*u[0];for(let E=0;E<c;E++){let T=a?v*(E+.5):v*E,I=Math.min(p-1,s?Math.round(T):Math.floor(T));a&&(I=Math.max(0,I));let k=C+I*u[1];for(let F=0;F<f;F++){let D=a?w*(F+.5):w*F,L=Math.min(h-1,s?Math.round(D):Math.floor(D));a&&(L=Math.max(0,L));let P=k+L*u[2];for(let R=0;R<m;R++){let V=g[P+R];y[_++]=V}}}}return n.makeTensorInfo([d,c,f,m],i.dtype,y)}var W6e={kernelName:lx,backendName:"cpu",kernelFunc:d$t};re();function p$t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;lt([s,i],"resizeNearestNeighborGrad");let l=Y.computeStrides(i.shape),u=Y.computeStrides(s.shape),[c,f,d,p]=i.shape,[,h,m]=s.shape,g=new Float32Array(c*f*d*p),y=n.data.get(s.dataId).values,b=[a&&h>1?f-1:f,a&&m>1?d-1:d],x=[a&&h>1?h-1:h,a&&m>1?m-1:m],v=b[0]/x[0],w=b[1]/x[1],_=1/v,S=1/w,C=Math.ceil(_)*2+2,E=Math.ceil(S)*2+2;for(let T=0;T<c;T++){let I=T*l[0];for(let k=0;k<f;k++){let F=I+k*l[1],D=Math.floor(k*_),L=Math.floor(D-C/2);for(let P=0;P<d;P++){let R=F+P*l[2],V=Math.floor(P*S),G=Math.floor(V-E/2);for(let U=0;U<p;U++){let H=0;for(let X=0;X<C;X++){let fe=X+L;if(fe<0||fe>=h)continue;let $=I+fe*u[1],M=fe*v,z=Math.min(f-1,a?Math.round(M):Math.floor(M));if(k===z)for(let q=0;q<E;q++){let ee=q+G;if(ee<0||ee>=m)continue;let ae=$+ee*u[2],Q=ee*w,le=Math.min(d-1,a?Math.round(Q):Math.floor(Q));P===le&&(H+=y[ae+U])}}g[R+U]=H}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}var q6e={kernelName:aC,backendName:"cpu",kernelFunc:p$t};re();function h$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o;lt(i,"reverse");let a=i.shape.length,l=Y.parseAxisParam(s,i.shape);if(a===0)return Za({inputs:{x:i},backend:n});let u=new Tn(i.shape,i.dtype),c=n.bufferSync(i);for(let f=0;f<u.size;f++){let d=u.indexToLoc(f),p=d.slice();l.forEach(h=>p[h]=i.shape[h]-1-p[h]),u.set(c.get(...p),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}var H6e={kernelName:cx,backendName:"cpu",kernelFunc:h$t};re();var Y6e={kernelName:EC,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=Y.getTypedArrayFromDType(o.dtype,Y.sizeFromShape(o.shape)),[c,f,d,p]=o.shape,[h,m]=ce.getImageCenter(a,f,d),g=255,y=Math.sin(i),b=Math.cos(i),x=l.data.get(o.dataId).values;for(let w=0;w<c;w++){let _=w*d*f*p;for(let S=0;S<f;S++){let C=S*(d*p);for(let E=0;E<d;E++){let T=E*p;for(let I=0;I<p;I++){let k=[c,S,E,I],F=k[2],D=k[1],L=(F-h)*b-(D-m)*y,P=(F-h)*y+(D-m)*b;L=Math.round(L+h),P=Math.round(P+m);let R=s;if(typeof s!="number"&&(I===3?R=g:R=s[I]),L>=0&&L<d&&P>=0&&P<f){let G=P*(d*p),U=L*p,H=_+G+U+I;R=x[H]}let V=_+C+T+I;u[V]=R}}}}return{dataId:l.write(u,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();var m$t=Er(a0,t=>{let r=Math.floor(t);return t-r<.5?Math.floor(t):t-r>.5?Math.ceil(t):r%2===0?r:r+1}),X6e={kernelName:a0,backendName:"cpu",kernelFunc:m$t};re();function g$t(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=!0,h=n.bufferSync(i),m=n.bufferSync(s),g=Yh(h,m,a,d,c,u,l,f,0,p);return n.makeTensorInfo(a,g.dtype,g.values)}var K6e={kernelName:uC,backendName:"cpu",kernelFunc:g$t};re();re();function y$t(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<r?n=i+1:o=i;return o}function b$t(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<=r?n=i+1:o=i;return o}function Z6e(t,r,n,o,i,s){let a=Y.getArrayFromDType("int32",n*i);for(let l=0;l<n;++l){let u=t.slice(l*o,(l+1)*o),c=l*i;for(let f=0;f<i;++f)a[c+f]=s==="left"?y$t(u,r[f+c]):b$t(u,r[f+c])}return a}function x$t(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=Z6e(l,u,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}var Q6e={kernelName:fC,backendName:"cpu",kernelFunc:x$t};re();function v$t(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r;lt([o,i,s],"select");let a=o.shape.length,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=qi(i.dtype,s.dtype),d=Y.makeZerosTypedArray(Y.sizeFromShape(i.shape),f),p=0,h=a===0||a>1||i.shape.length===1?1:Y.sizeFromShape(i.shape.slice(1));for(let m=0;m<l.length;m++)for(let g=0;g<h;g++)l[m]===1?d[p++]=u[m]:d[p++]=c[m];return n.makeTensorInfo(i.shape,f,d)}var J6e={kernelName:fx,backendName:"cpu",kernelFunc:v$t};re();var w$t=ce.SELU_SCALEALPHA,_$t=ce.SELU_SCALE,S$t=Er(u0,t=>t>=0?_$t*t:w$t*(Math.exp(t)-1)),eze={kernelName:u0,backendName:"cpu",kernelFunc:S$t};re();var C$t=Er(d0,t=>t<0?-1:t>0?1:0),tze={kernelName:d0,backendName:"cpu",kernelFunc:C$t};re();var E$t=Er(c0,t=>Math.sin(t)),rze={kernelName:c0,backendName:"cpu",kernelFunc:E$t};re();var T$t=Er(f0,t=>Math.sinh(t)),nze={kernelName:f0,backendName:"cpu",kernelFunc:T$t};re();var A$t=11920928955078125e-23,oze=Math.log(A$t)+2,k$t=Er(h0,t=>{let r=t>-oze,n=t<oze,o=Math.exp(t),i;return n?i=o:r?i=t:i=Math.log(1+o),i}),ize={kernelName:h0,backendName:"cpu",kernelFunc:k$t};re();function I$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;lt([i],"spaceToBatchND");let l=Y.sizeFromShape(s),u=[[0,0]];u.push(...a);for(let S=1+s.length;S<i.shape.length;++S)u.push([0,0]);let c=J9.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),f=ce.getReshaped(c.shape,s,l,!1),d=ce.getPermuted(f.length,s.length,!1),p=ce.getReshapedPermuted(c.shape,s,l,!1),g=mn({inputs:{x:c},backend:n,attrs:{shape:f}}),x=ci({inputs:{x:g},backend:n,attrs:{perm:d}}),_=mn({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),_}var sze={kernelName:hx,backendName:"cpu",kernelFunc:I$t};re();function D$t(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values[0],[d,p,h,m,g]=z9(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var aze={kernelName:dC,backendName:"cpu",kernelFunc:D$t};re();function N$t(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.data.get(i.dataId).values),l=n.data.get(o.dataId).values,u=Array.from(n.data.get(s.dataId).values),[c,f,d]=U9(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var lze={kernelName:pC,backendName:"cpu",kernelFunc:N$t};re();function M$t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=kD(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var uze={kernelName:hC,backendName:"cpu",kernelFunc:M$t};re();function F$t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=kD(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var cze={kernelName:mC,backendName:"cpu",kernelFunc:F$t};re();function O$t(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),h=!1,m=n.bufferSync(i),g;switch(s.dtype){case"bool":{let y=n.bufferSync(s),b=!!n.data.get(a.dataId).values[0];g=Yh(m,y,l,p,f,c,u,d,b,h);break}case"float32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=Yh(m,y,l,p,f,c,u,d,b,h);break}case"int32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=Yh(m,y,l,p,f,c,u,d,b,h);break}case"string":{let y=n.bufferSync(s),b=Y.decodeString(n.data.get(a.dataId).values[0]);g=Yh(m,y,l,p,f,c,u,d,b,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(l,g.dtype,g.values)}var fze={kernelName:gC,backendName:"cpu",kernelFunc:O$t};re();re();function R$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=Y.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=new Array(i.shape.length).fill(0),f=i.shape.slice();return u.map(d=>{let p=[...f];p[l]=d;let h=Tp({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[l]+=d,h})}var dze={kernelName:mx,backendName:"cpu",kernelFunc:R$t};re();var pze={kernelName:yC,backendName:"cpu",kernelFunc:({inputs:t,backend:r})=>{let{x:n}=t,o=r;lt(n,"square");let i=o.data.get(n.dataId).values,s=new Float32Array(i.length);for(let l=0;l<i.length;++l){let u=i[l];s[l]=u*u}return{dataId:o.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};re();var P$t=Er(v0,(t,r)=>{let n=r;return isNaN(t)?NaN:t>0?1:n.alpha}),hze={kernelName:v0,backendName:"cpu",kernelFunc:P$t};re();function L$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o;lt(i,"stridedSlice");let{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Rs.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=mn({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||b){Y.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let S=Rs.computeOutShape(x,v,w),C=Tp({inputs:{x:i},backend:n,attrs:{begin:x,size:S}});_=mn({inputs:{x:C},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(C)}else{let S=n.bufferSync(i),C=V9(h,S,w,x);_=n.makeTensorInfo(m,C.dtype,C.values)}return _}var mze={kernelName:bC,backendName:"cpu",kernelFunc:L$t};re();function j$t(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.data.get(f.dataId).values,h=n.data.get(d.dataId).values,[m,g]=G9(p,h,i,s,a,l,u,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var gze={kernelName:xC,backendName:"cpu",kernelFunc:j$t};re();function B$t(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values[0],[c,f,d]=W9(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var yze={kernelName:vC,backendName:"cpu",kernelFunc:B$t};re();function $$t(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.data.get(s.dataId).values,l=q9(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var bze={kernelName:wC,backendName:"cpu",kernelFunc:$$t};re();var z$t=Er(b0,t=>Math.tan(t)),xze={kernelName:b0,backendName:"cpu",kernelFunc:z$t};re();var U$t=Er(x0,t=>Math.tanh(t)),vze={kernelName:x0,backendName:"cpu",kernelFunc:U$t};re();function V$t(t){let{inputs:r,backend:n}=t,{tensor:o,indices:i,updates:s}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=ce.calculateShapes(s,i,o.shape),d=!1,p=n.bufferSync(i),h=n.bufferSync(s),m=n.bufferSync(o),g=Yh(p,h,o.shape,f,u,l,a,c,m,d);return n.makeTensorInfo(o.shape,g.dtype,g.values)}var wze={kernelName:cC,backendName:"cpu",kernelFunc:V$t};re();function G$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;lt(i,"tile");let a=H9(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}var _ze={kernelName:kh,backendName:"cpu",kernelFunc:G$t};re();function W$t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o;lt(i,"topk");let l=n.data.get(i.dataId).values,[u,c]=Y9(l,i.shape,i.dtype,s,a);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}var Sze={kernelName:_C,backendName:"cpu",kernelFunc:W$t};re();function q$t(t){let{inputs:r,attrs:n,backend:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=n,[f,d,p,h]=i.shape,[m,g]=c??[d,p],y=[f,m,g,h],b=Y.computeStrides(i.shape),x=b[0],v=b[1],w=b[2],_=Y.computeStrides(y),S=_[0],C=_[1],E=_[2],T=Y.getTypedArrayFromDType(i.dtype,Y.sizeFromShape(y));T.fill(u);let I=o.data.get(i.dataId).values,k=o.data.get(s.dataId).values;for(let D=0;D<f;++D){let L=s.shape[0]===1?k:k.subarray(D*8,D*8+8);for(let P=0;P<m;++P)for(let R=0;R<g;++R)for(let V=0;V<h;++V){let G,U=L[6]*R+L[7]*P+1;if(U===0)continue;let H=(L[0]*R+L[1]*P+L[2])/U,X=(L[3]*R+L[4]*P+L[5])/U,fe=Cze(H,p,l),$=Cze(X,d,l);switch(a){case"nearest":G=Z$t(I,d,p,x,v,w,D,$,fe,V,u);break;case"bilinear":G=Q$t(I,d,p,x,v,w,D,$,fe,V,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}let M=D*S+P*C+R*E+V;T[M]=G}return o.makeTensorInfo(y,i.dtype,T)}return{dataId:o.write(T,y,i.dtype),shape:i.shape,dtype:i.dtype}}var Eze={kernelName:SC,backendName:"cpu",kernelFunc:q$t};function Cze(t,r,n){switch(n){case"reflect":return H$t(t,r);case"wrap":return Y$t(t,r);case"nearest":return K$t(t,r);case"constant":default:return X$t(t,r)}}function H$t(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=2*r;n<o&&(n=o*Math.trunc(-n/o)+n),n=n<-r?n+o:-n-1}else if(n>r-1)if(r<=1)n=0;else{let o=2*r;n-=o*Math.trunc(n/o),n>=r&&(n=o-n-1)}return Y.clamp(0,n,r-1)}function Y$t(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=r-1;n+=r*(Math.trunc(-n/o)+1)}else if(n>r-1)if(r<=1)n=0;else{let o=r-1;n-=r*Math.trunc(n/o)}return Y.clamp(0,n,r-1)}function X$t(t,r){return t}function K$t(t,r){return Y.clamp(0,t,r-1)}function CP(t,r,n,o,i,s,a,l,u,c,f){let d=a*o+l*i+u*s+c;return 0<=l&&l<r&&0<=u&&u<n?t[d]:f}function Z$t(t,r,n,o,i,s,a,l,u,c,f){let d=Math.round(l),p=Math.round(u);return CP(t,r,n,o,i,s,a,d,p,c,f)}function Q$t(t,r,n,o,i,s,a,l,u,c,f){let d=Math.floor(l),p=Math.floor(u),h=d+1,m=p+1,g=(m-u)*CP(t,r,n,o,i,s,a,d,p,c,f)+(u-p)*CP(t,r,n,o,i,s,a,d,m,c,f),y=(m-u)*CP(t,r,n,o,i,s,a,h,p,c,f)+(u-p)*CP(t,r,n,o,i,s,a,h,m,c,f);return(h-l)*g+(l-d)*y}re();function J$t(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;lt(s,"unique");let a=o.data.get(s.dataId).values,{outputValues:l,outputShape:u,indices:c}=X9(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var Tze={kernelName:CC,backendName:"cpu",kernelFunc:J$t};re();function e6t(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i.shape.length,l=i.shape[s],u=new Array(a-1),c=0;for(let h=0;h<a;h++)h!==s&&(u[c++]=i.shape[h]);let f=new Array(a).fill(0),d=i.shape.slice();d[s]=1;let p=new Array(l);for(let h=0;h<p.length;h++){f[s]=h;let m=Tp({inputs:{x:i},backend:n,attrs:{begin:f,size:d}});p[h]=mn({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}var Aze={kernelName:yx,backendName:"cpu",kernelFunc:e6t};re();function t6t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o;lt(i,"unsortedSegmentSum");let l=i.shape.length,u=s.shape.length,c=[],f=[],d=l-u,p=s;for(let m=0;m<d;++m){let g=DD({inputs:{input:p},backend:n,attrs:{dim:m+1}});p=g,f.push(g)}for(let m=0;m<a;++m){let g=Y.createScalarValue(m,"int32"),y=n.makeTensorInfo([],"int32",g),b=Hle({inputs:{a:y,b:p},backend:n}),x=Cp({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),v=cE({inputs:{a:x,b:i},backend:n}),w=Wx({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(w),f.push(y),f.push(b),f.push(x),f.push(v),f.push(w)}let h=Iue({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var kze={kernelName:bx,backendName:"cpu",kernelFunc:t6t};var r6t=[JBe,aBe,e$e,t$e,dBe,r$e,n$e,o$e,i$e,s$e,a$e,l$e,u$e,c$e,f$e,p$e,h$e,m$e,g$e,QBe,y$e,b$e,x$e,pBe,v$e,fBe,hBe,w$e,lBe,_$e,C$e,E$e,T$e,A$e,k$e,I$e,D$e,N$e,M$e,F$e,O$e,R$e,P$e,L$e,j$e,B$e,$$e,z$e,U$e,V$e,G$e,W$e,H$e,qBe,Y$e,mBe,X$e,gBe,K$e,yBe,Z$e,Q$e,J$e,bBe,xBe,e6e,t6e,r6e,n6e,vBe,wBe,uBe,o6e,S$e,i6e,s6e,a6e,HBe,_Be,SBe,l6e,CBe,u6e,c6e,f6e,d6e,p6e,h6e,m6e,EBe,g6e,y6e,b6e,x6e,w6e,_6e,S6e,TBe,C6e,E6e,k6e,ABe,kBe,I6e,D6e,N6e,IBe,M6e,R6e,P6e,J9,L6e,YBe,NBe,j6e,B6e,$6e,z6e,cBe,wP,U6e,XBe,KBe,ZBe,V6e,G6e,W6e,q6e,H6e,Y6e,X6e,PBe,K6e,Q6e,J6e,eze,jBe,tze,rze,nze,BBe,T6e,ize,sze,aze,lze,uze,cze,fze,dze,zBe,pze,UBe,VBe,hze,mze,gze,yze,bze,GBe,q$e,xze,vze,wze,_ze,Sze,Eze,DBe,Tze,Aze,kze,F6e];for(let t of r6t)cI(t);re();re();re();re();var dE={},eV={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Ize(t,r){dE[t]=r}function ef(t,r){if(!(t in dE)||r!=null){let o=o6t(t,r);if(o!==null)dE[t]=o;else return console.log("Could not get context for WebGL version",t),null}let n=dE[t];return n==null||n.isContextLost()?(delete dE[t],ef(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),dE[t])}function n6t(t){if(!Me().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function o6t(t,r){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=r??n6t(t);return n.addEventListener("webglcontextlost",o=>{o.preventDefault(),delete dE[t]},!1),Me().getBool("SOFTWARE_WEBGL_ENABLED")&&(eV.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",eV)||n.getContext("experimental-webgl",eV):n.getContext("webgl2",eV)}re();var pE=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(pE||{}),Ol=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Ol||{}),Qa=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(Qa||{});function hE(t,r){return[r,t]}function Dze(t,r){return t*r}function EP(t){let r=Y.sizeFromShape(t),n=Math.ceil(r/4);return Y.sizeToSquarishShape(n)}function V0(t,r){return[Math.max(1,Math.ceil(r/2)),Math.max(1,Math.ceil(t/2))]}function Nze(t,r){let[n,o]=V0(t,r);return n*o*4}function TP(t,r){let n=t,o,i,s,a,l,u,c,f,d,p;return Me().getNumber("WEBGL_VERSION")===2?(o=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,l=n.RED,c=4,f=1,d=n.HALF_FLOAT,p=n.FLOAT,u=n.RGBA8):(o=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,l=t.RGBA,c=4,f=4,d=r!=null?r.HALF_FLOAT_OES:null,p=t.FLOAT,u=t.RGBA),{internalFormatFloat:o,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:l,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:d,textureTypeFloat:p}}function Wt(t,r){let n=r();return Me().getBool("DEBUG")&&i6t(t),n}function i6t(t){let r=t.getError();if(r!==t.NO_ERROR)throw new Error("WebGL Error: "+l6t(t,r))}var s6t=596e-10,a6t=65504;function Mze(t){return!!(Me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||s6t<Math.abs(t)&&Math.abs(t)<a6t)}function l6t(t,r){switch(r){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function AP(t,r){return qx(t,()=>t.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function Fze(t,r){let n=qx(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Oze(t,r){let n=qx(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),Me().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw Oue(r,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var u6t=/ERROR: [0-9]+:([0-9]+):/g;function Oue(t,r){let n=u6t.exec(r);if(n==null){console.log(`Couldn't parse line number in error: ${r}`),console.log(t);return}let o=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((d,p)=>Y.rightPad((p+1).toString(),s)+d),l=0;for(let d=0;d<a.length;d++)l=Math.max(a[d].length,l);let u=a.slice(0,o-1),c=a.slice(o-1,o),f=a.slice(o);console.log(u.join(`
`)),console.log(r.split(`
`)[0]),console.log(`%c ${Y.rightPad(c[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function Rze(t){return qx(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Pze(t,r){if(Wt(t,()=>t.linkProgram(r)),!Me().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(r,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function rV(t,r){if(Wt(t,()=>t.validateProgram(r)),t.getProgramParameter(r,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function Lze(t,r){let n=qx(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function jze(t,r){let n=qx(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function Bze(t){return qx(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function $ze(t,r){let n=Me().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||r<=0){let o=`[${t}x${r}]`;throw new Error("Requested texture size "+o+" is invalid.")}if(t>n||r>n){let o=`[${t}x${r}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+i+".")}}function zze(t){return qx(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Rue(t,r,n,o,i,s,a){let l=t.getAttribLocation(r,n);return l===-1?!1:(Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,o)),Wt(t,()=>t.vertexAttribPointer(l,i,t.FLOAT,!1,s,a)),Wt(t,()=>t.enableVertexAttribArray(l)),!0)}function c6t(t,r,n){d6t(t,n),Wt(t,()=>t.activeTexture(t.TEXTURE0+n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r))}function Uze(t,r,n){return qx(t,()=>t.getUniformLocation(r,n),'uniform "'+n+'" not present in program.')}function Vze(t,r,n){return t.getUniformLocation(r,n)}function Gze(t,r,n,o){Wt(t,()=>c6t(t,r,o)),Wt(t,()=>t.uniform1i(n,o))}function nV(t,r,n){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0))}function Pue(t,r){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,r)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function kP(t){let r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+f6t(t,r))}function f6t(t,r){switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function qx(t,r,n){let o=Wt(t,()=>r());if(o==null)throw new Error(n);return o}function d6t(t,r){let n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,o=r+t.TEXTURE0;if(o<t.TEXTURE0||o>n){let i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Pw(t,r=2){return Y.sizeFromShape(t.slice(0,t.length-r))}function Lw(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function IP(t){let r=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(r=[Pw(t),...Lw(t)]),r}function Wze(t,r=!1){let n=Me().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=Me().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");o===1/0&&Me().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),r&&(n=n*2,o=o*2,t=t.map((l,u)=>u>=t.length-2?Y.nearestLargerEven(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Y.squeezeShape(t).newShape);let i=Y.sizeFromShape(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);let a=s!=null&&Math.max(...s)>o&&Math.min(...s)<=(r?2:1)&&Math.min(...s)>0;if(s==null||a)if(r){let l=Pw(t),u=2,c=2;t.length&&([u,c]=Lw(t)),i=l*(u/2)*(c/2),s=Y.sizeToSquarishShape(i).map(f=>f*2)}else s=Y.sizeToSquarishShape(i);return s}function tV(t){return t%2===0}function mE(t,r){if(t=t.slice(-2),r=r.slice(-2),Y.arraysEqual(t,r)||!t.length||!r.length||t[0]===0||t[1]===0||r[0]===0||r[1]===0)return!0;if(t.length!==r.length){let n=t[t.length-1],o=r[r.length-1];if(n===o||tV(n)&&tV(o)&&(t[0]===1||r[0]===1))return!0}return t[1]===r[1]&&tV(t[0])&&tV(r[0])}var Nue,Mue;function qze(t){if(Nue==null){let r=ef(t);Nue=r.getParameter(r.MAX_TEXTURE_SIZE)}return Nue}function Hze(t){if(Mue==null){let r=ef(t);Mue=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Mue)}function Yze(t){if(t===0)return 0;let r,n=ef(t);return wd(n,"EXT_disjoint_timer_query_webgl2")&&t===2?r=2:wd(n,"EXT_disjoint_timer_query")?r=1:r=0,r}function wd(t,r){return t.getExtension(r)!=null}function Lue(t){try{if(ef(t)!=null)return!0}catch(r){return console.log("Error when getting WebGL context: ",r),!1}return!1}function Xze(t){if(t===0)return!1;let r=ef(t);if(t===1){if(!wd(r,"OES_texture_float"))return!1}else if(!wd(r,"EXT_color_buffer_float"))return!1;return Fue(r)}function Kze(t){if(t===0)return!1;let r=ef(t);if(t===1){if(!wd(r,"OES_texture_float")||!wd(r,"WEBGL_color_buffer_float"))return!1}else{if(wd(r,"EXT_color_buffer_float"))return Fue(r);let o="EXT_color_buffer_half_float";if(wd(r,o)){let i=r.getExtension(o);return p6t(r,i)}return!1}return Fue(r)}function Fue(t){let r=TP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function p6t(t,r){let n=TP(t,r),o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);let l=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(a),l}function Zze(t){return t!==2?!1:ef(t).fenceSync!=null}function G0(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the WebGL backend.`)})}var dr=Me();dr.registerFlag("HAS_WEBGL",()=>dr.getNumber("WEBGL_VERSION")>0);dr.registerFlag("WEBGL_VERSION",()=>Lue(2)?2:Lue(1)?1:0);dr.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);dr.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>dr.get("WEBGL_VERSION")===2);dr.registerFlag("WEBGL_CPU_FORWARD",()=>!0);dr.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);dr.registerFlag("WEBGL_PACK",()=>dr.getBool("HAS_WEBGL"));dr.registerFlag("WEBGL_PACK_NORMALIZATION",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_CLIP",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_REDUCE",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_LAZILY_UNPACK",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_CONV_IM2COL",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>dr.getBool("WEBGL_PACK"));dr.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>qze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Hze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=dr.getNumber("WEBGL_VERSION");return t===0?0:Yze(t)});dr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>dr.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!vx.isMobile());dr.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Xze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>dr.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:dr.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));dr.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Kze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Zze(dr.getNumber("WEBGL_VERSION")));dr.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>dr.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);dr.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});dr.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>vx.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});dr.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);dr.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);dr.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);dr.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);dr.registerFlag("WEBGL_EXP_CONV",()=>!1);dr.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>dr.getBool("IS_TEST"));dr.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);dr.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);dr.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);dr.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);re();re();function fi(){let t,r,n,o,i,s,a,l,u,c;return Me().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",r="in",n="out",o="in",i="texture",s="outputColor",a="out vec4 outputColor;",l=Me().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",r="attribute",n="varying",o="varying",i="texture2D",s="gl_FragColor",a="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:r,varyingVs:n,varyingFs:o,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:l,defineSpecialInf:u,defineRound:c}}re();re();re();function Xh(t,r,n="index"){let o=Y.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / ${i}`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${l};`}).join("")}function gE(t,r,n="index"){let o=Y.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${l};`}).join("")}function h6t(t,r){let n=t.length,o=t.map(s=>`${r}[${s}]`),i=new Array(n-1);i[n-2]=o[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${o[s+1]})`;return i}function Qze(t,r,n="index"){let o=t.map((s,a)=>a),i=h6t(o,r);return i.map((s,a)=>{let l=`int ${t[a]} = ${n} / ${i[a]}`,u=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${l}; ${u};`}).join("")}function ND(t){let r=Y.computeStrides(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${r[0]} + coords.y * ${r[1]} + coords.z;
  }
`}function MD(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var iV=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:Jze}=ce;function e8e(t,r,n){let o=[];if(t.forEach(h=>{let m=Y.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?o.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(o.push(`uniform sampler2D ${h.name};`),o.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){let{uniformShape:g}=sV(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:o.push(`uniform int ${h.name}Shape;`);break;case 2:o.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:o.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:o.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}o.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(r.logicalShape.length){case 1:o.push("uniform int outShape;");break;case 2:o.push("uniform ivec2 outShape;"),o.push("uniform int outShapeStrides;");break;case 3:o.push("uniform ivec3 outShape;"),o.push("uniform ivec2 outShapeStrides;");break;case 4:o.push("uniform ivec4 outShape;"),o.push("uniform ivec3 outShapeStrides;");break;default:break}o.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{o.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let i=o.join(`
`),s=t.map(h=>m6t(h,r,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=r.texShape,l=fi(),u=b6t(l),c,f,d=w6t(l);return r.isPacked?(c=g6t(r.logicalShape,a,n.enableShapeUniforms),f=v6t(l)):(c=y6t(r.logicalShape,a,n.enableShapeUniforms),f=x6t(l)),n.packedInputs&&(d+=E6t),[d,u,f,i,c,s,n.userCode].join(`
`)}function OD(t,r=!1){let n=t.shapeInfo.logicalShape;switch(n.length){case 0:return L6t(t,r);case 1:return B6t(t,r);case 2:return z6t(t,r);case 3:return V6t(t,r);case 4:return W6t(t,r);case 5:return q6t(t);case 6:return H6t(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function t8e(t,r){switch(t.shapeInfo.logicalShape.length){case 0:return P6t(t);case 1:return j6t(t,r);case 2:return $6t(t,r);case 3:return U6t(t,r);default:return G6t(t,r)}}function m6t(t,r,n=!1,o){let i="";n?i+=t8e(t,o):i+=OD(t,o);let s=t.shapeInfo.logicalShape,a=r.logicalShape;return s.length<=a.length&&(n?i+=Y6t(t,r):i+=X6t(t,r)),i}function g6t(t,r,n){switch(t.length){case 0:return r8e();case 1:return T6t(t,r,n);case 2:return O6t(t,r,n);case 3:return k6t(t,r,n);default:return D6t(t,r,n)}}function y6t(t,r,n){switch(t.length){case 0:return r8e();case 1:return A6t(t,r,n);case 2:return R6t(t,r,n);case 3:return I6t(t,r,n);case 4:return N6t(t,r,n);case 5:return M6t(t,r);case 6:return F6t(t,r);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function b6t(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function x6t(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function v6t(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function w6t(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${_6t}
    ${S6t}
    ${C6t}
  `}var _6t=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,S6t=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,C6t=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,E6t=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function r8e(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function T6t(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return o[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${o[1]}.0);
      }
    `:o[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${o[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      return 2 * (resTexRC.x * ${o[1]} + resTexRC.y);
    }
  `}function A6t(t,r,n){return r[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return resTexRC.x * ${r[1]} + resTexRC.y;
    }
  `}function k6t(t,r,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function I6t(t,r,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${gE(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let o=Xh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec3(r, c, d);
    }
  `}function D6t(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2),a=s,l="",u="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],l=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+l,u=`b${c}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      ${l}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${u});
    }
  `}function N6t(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${gE(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let o=Xh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec4(r, c, d, d2);
    }
  `}function M6t(t,r){let n=Xh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${r[0]},
                             ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function F6t(t,r){let n=Xh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function O6t(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(Y.arraysEqual(t,r))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));
      }
    `;let i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));

      int index = resTexRC.x * ${o[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function R6t(t,r,n){return Y.arraysEqual(t,r)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function yE(t){return`offset${t}`}function P6t(t){let r=t.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=fi();return`
    vec4 ${n}() {
      return ${o.texture2D}(${r}, halfCR);
    }
  `}function L6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${o}() {return ${n};}`;let[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${o}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let a=yE(n);if(r)return`
    float ${o}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;let[l,u]=t.shapeInfo.texShape;return`
    float ${o}() {
      vec2 uv = uvFromFlat(${l}, ${u}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function j6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=fi();if(r)return`
    vec4 ${o}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;let a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function B6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${o}(int index) {
        ${RD(t)}
      }
    `;let i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${o}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let l=yE(n);return a===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:r?`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${l});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}function $6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=s[0],l=s[1],u=fi();if(s!=null&&Y.arraysEqual(n,s))return r?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);

        return ${u.texture2D}(${o}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${a}.0);

        return ${u.texture2D}(${o}, uv);
      }
    `;if(r)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `;let c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `}function z6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Y.arraysEqual(n,s)){if(r)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `;let p=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${o}, uv);
    }
  `}let{newShape:a,keptDims:l}=Y.squeezeShape(n),u=a;if(u.length<n.length){let p=PD(t,u),h=["row","col"];return`
      ${OD(p,r)}
      float ${i}(int row, int col) {
        return ${i}(${LD(h,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${RD(t)}
      }
    `;let c=s[0],f=s[1],d=yE(o);return f===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${o}, uv);
    }
  `:c===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${o}, uv);
    }
  `:r?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
        return sampleTexture(${o}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${o}, uv);
  }
`}function U6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){let p=n.slice(1),h=[1,2],m=PD(t,p),g=["b","row","col"];return`
        ${t8e(m,r)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${LD(g,h)});
        }
      `}let l=fi();if(r)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `;let u=a[0],c=a[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${c}, ${d}, ${f}, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `}function V6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[1]*n[2],a=n[2],{newShape:l,keptDims:u}=Y.squeezeShape(n),c=l;if(c.length<n.length){let g=PD(t,c),y=["row","col","depth"];return`
        ${OD(g,r)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${LD(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${RD(t)}
      }
    `;let f=t.shapeInfo.texShape,d=f[0],p=f[1],h=t.shapeInfo.flatOffset;if(p===s&&h==null)return r?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${o}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${o}, uv);
        }
      `;if(p===a&&h==null)return r?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${o}, uv);
    }
  `;let m=yE(o);return r?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${o}Shape[1] * ${o}Shape[2];
      int stride1 = ${o}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
      return sampleTexture(${o}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${o}, uv);
      }
  `}function G6t(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=fi();if(r)return`
    vec4 ${o}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;let s=t.shapeInfo.logicalShape,a=s.length,l=t.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],c=u[0],f=u[1],d=Math.ceil(s[a-1]/2),p=d*Math.ceil(s[a-2]/2),h="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<a-1;g++)h=`int b${g}, `+h,p*=s[a-g-1],m=`b${g} * ${p} + `+m;return`
    vec4 ${o}(${h}) {
      int index = ${m};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function W6t(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[3],a=n[2]*s,l=n[1]*a,{newShape:u,keptDims:c}=Y.squeezeShape(n);if(u.length<n.length){let x=PD(t,u),v=["row","col","depth","depth2"];return`
      ${OD(x,r)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${LD(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${l}, ${a}, ${s}, 1)));
        ${RD(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],m=`int stride2 = ${o}Shape[3];`,g=`int stride1 = ${o}Shape[2] * stride2;`,y=`int stride0 = ${o}Shape[1] * stride1;`;if(h===l&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;if(h===s&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;let b=yE(o);return r?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${b});
      return sampleTexture(${o}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${b});
      return sampleTexture(${o}, uv);
    }
  `}function q6t(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r[4],s=r[3]*i,a=r[2]*s,l=r[1]*a,{newShape:u,keptDims:c}=Y.squeezeShape(r);if(u.length<r.length){let g=PD(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${OD(g)}
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        return ${o}(${LD(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${a}, ${s}, ${i})) +
          depth3;
        ${RD(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===l&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]},
               ${r[2]*r[3]}, ${r[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;let m=yE(n);return`
    float ${o}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function H6t(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Y.squeezeShape(r);if(i.length<r.length){let y=PD(t,i),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${OD(y)}
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${o}(${LD(b,s)});
      }
    `}let a=r[5],l=r[4]*a,u=r[3]*l,c=r[2]*u,f=r[1]*c;if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${u}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${RD(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],m=p[1];if(m===f&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${u}, ${l}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===a&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]*r[4]},
               ${r[2]*r[3]*r[4]},
               ${r[3]*r[4]},
               ${r[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;let g=yE(n);return`
    float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${u} +
          depth2 * ${l} + depth3 * ${a} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function RD(t){let r=t.name,n=Y.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${r};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${r}[i];
      }
    }
  `}function Y6t(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=r.logicalShape.length,l=Jze(t.shapeInfo.logicalShape,r.logicalShape),u=Ur(a),c=a-s,f,d=["x","y","z","w","u","v"];s===0?f="":a<2&&l.length>=1?f="coords = 0;":f=l.map(x=>`coords.${d[x+c]} = 0;`).join(`
`);let p="";a<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((x,v)=>`coords.${d[v+c]}`).join(", ");let h="return outputValue;",g=Y.sizeFromShape(t.shapeInfo.logicalShape)===1,b=Y.sizeFromShape(r.logicalShape)===1;if(s===1&&!g&&!b)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!b)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(l.length){let x=s-2,v=s-1;l.indexOf(x)>-1&&l.indexOf(v)>-1?h="return vec4(outputValue.x);":l.indexOf(x)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${o}(${p});
      ${h}
    }
  `}function X6t(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=r.texShape,a=t.shapeInfo.texShape,l=t.shapeInfo.logicalShape.length,u=r.logicalShape.length;if(!t.shapeInfo.isUniform&&l===u&&t.shapeInfo.flatOffset==null&&Y.arraysEqual(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let c=Ur(u),f=Jze(t.shapeInfo.logicalShape,r.logicalShape),d=u-l,p,h=["x","y","z","w","u","v"];l===0?p="":u<2&&f.length>=1?p="coords = 0;":p=f.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return u<2&&l>0?m="coords":m=t.shapeInfo.logicalShape.map((g,y)=>`coords.${h[y+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${o}(${m});
    }
  `}function Ur(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function sV(t,r,n){let{newShape:o,keptDims:i}=Y.squeezeShape(r),s=r.length,a=t&&s===3&&r[0]===1,l=a?r.slice(1):o,u=!t&&s>1&&!Y.arraysEqual(r,n)&&o.length<s||a;return{useSqueezeShape:u,uniformShape:u?l:r,keptDims:i}}function PD(t,r){let n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=r,n}function LD(t,r){return r.map(n=>t[n]).join(", ")}function o8e(t,r,n,o){let i=n.map((f,d)=>{let p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:r.variableNames[d],shapeInfo:p}}),s=i.map(f=>f.shapeInfo),a={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},l=e8e(i,a,r),u=Oze(t.gl,l),c=t.createProgram(u);return Me().get("ENGINE_COMPILE_ONLY")?{program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},jue(t,r,c)))}function jue(t,r,n){let o=[],i=[],s,a,l,u=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Me().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));let f=!1;for(let d of r.variableNames){let p={name:d,uniform:t.getUniformLocation(n,d,f),offset:t.getUniformLocation(n,`offset${d}`,f)};r.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,f),p.texShape=t.getUniformLocation(n,`${d}TexShape`,f)),o.push(p)}if(r.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",f),l=t.getUniformLocation(n,"outShapeStrides",f),a=t.getUniformLocation(n,"outTexShape",f)),r.customUniforms)for(let d of r.customUniforms)i.push(t.getUniformLocation(n,d.name,f));return{variablesLocations:o,customUniformLocations:i,infLoc:u,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:a}}function n8e(t,r){if(t.length!==r.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${r.length} inputs`);t.forEach((n,o)=>{let i=n.logicalShape,s=r[o],a=s.shape;if(!Y.arraysEqual(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;let l=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!Y.arraysEqual(l,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${l} and ${u} must match`)})}function i8e(t,r,n,o,i){r.program.enableShapeUniforms||(n8e(r.inShapeInfos,n),n8e([r.outShapeInfo],[o]));let s=o.texData.texture,a=o.texData.texShape;o.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(r.webGLProgram),t.bindVertexArray(r.webGLProgram.vao),Me().getNumber("WEBGL_VERSION")===1&&r.infLoc!==null&&t.gl.uniform1f(r.infLoc,1/0),r.nanLoc!==null&&t.gl.uniform1f(r.nanLoc,NaN);for(let u=0;u<n.length;++u){let c=n[u],{uniform:f,offset:d,shape:p,texShape:h}=r.variablesLocations[u];if(p){let{uniformShape:m}=sV(r.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(p,new Int32Array(m));break;case 2:t.gl.uniform2iv(p,new Int32Array(m));break;case 3:t.gl.uniform3iv(p,new Int32Array(m));break;case 4:t.gl.uniform4iv(p,new Int32Array(m));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(Y.sizeFromShape(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(f,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,u)}}let l=r.outShapeLocation;if(l)switch(o.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(o.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(o.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(o.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(o.shape));break;default:break}if(r.outShapeStridesLocation){let u=Y.computeStrides(o.shape);switch(o.shape.length){case 2:t.gl.uniform1iv(r.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(r.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(r.outShapeStridesLocation,new Int32Array(u));break;default:break}}if(r.outTexShapeLocation&&t.gl.uniform2i(r.outTexShapeLocation,o.texData.texShape[0],o.texData.texShape[1]),r.program.customUniforms&&i)for(let u=0;u<r.program.customUniforms.length;++u){let c=r.program.customUniforms[u],f=r.customUniformLocations[u],d=i[u];if(c.type==="float")t.gl.uniform1fv(f,d);else if(c.type==="vec2")t.gl.uniform2fv(f,d);else if(c.type==="vec3")t.gl.uniform3fv(f,d);else if(c.type==="vec4")t.gl.uniform4fv(f,d);else if(c.type==="int")t.gl.uniform1iv(f,d);else if(c.type==="ivec2")t.gl.uniform2iv(f,d);else if(c.type==="ivec3")t.gl.uniform3iv(f,d);else if(c.type==="ivec4")t.gl.uniform4iv(f,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function s8e(t,r,n){let o="";r.concat(n).forEach(a=>{let l=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){let u=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:d}=sV(t.packedInputs,a.shape,u),p="",h="",m="";if(f.length===1&&t.packedInputs){let _=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];p=`${_[0]>1}_${_[1]>1}`}else if(f.length===2&&!t.packedInputs)h=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){let _=Y.computeStrides(f);m=`${_[0]===u[1]}_${_[_.length-1]===u[1]}`}let g=a.shape.length,y=f.length===2&&Y.arraysEqual(a.shape,u),b=Y.sizeFromShape(a.shape)===1,x=ce.getBroadcastDims(a.shape,n.shape),v=!t.packedInputs&&g===n.shape.length&&Y.arraysEqual(u,n.texData.texShape),w=t.packedInputs||f.length>2?"":`${u[0]>1}_${u[1]>1}`;o+=`${g}_${v}_${c?d:""}_${f.length}_${b}_${x}_${y}_${p}_${h}_${m}_${w}_${l}`}else{let u=a.isUniform?"uniform":a.texData.texShape;o+=`${a.shape}_${u}_${l}`}});let i=t.userCode,s=t.constructor.name;return s+="_"+o+"_"+i+`${Me().getNumber("WEBGL_VERSION")}`,s}function zn(t){return Me().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var aV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pE.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=fi();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?gE(["r","c","d"],r):Xh(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};var lV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pE.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=fi();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?gE(["r","c","d"],r):Xh(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};var uV=class{constructor(r){this.variableNames=["A"],this.outTexUsage=Ol.DOWNLOAD;let n=fi();this.outputShape=r,this.userCode=`
      ${iV}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}};var cV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ol.DOWNLOAD;let n=fi();this.outputShape=r,this.userCode=`
      ${iV}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}};var Q6t={R:0,G:1,B:2,A:3},DP=class{constructor(r,n=!1,o="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=fi();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let l=0;l<o.length;l++){let u=o[l];a+=`
          if(offset == ${l}) {
            result = values[${Q6t[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?MD():ND(r)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${o.length});

        flatIndex = idiv(flatIndex, ${o.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}};var fV=class{constructor(r,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=fi();this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){let u=a*2+l;i+=`
          localCoords = coords;
          if(localCoords[2] + ${l} < ${this.enableShapeUniforms?"outShape[2]":`${r[2]}`}) {
          localCoords[2] += ${l};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${r[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${o.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?MD():ND(r)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${o.output} = ${s};
        }
    `}};re();re();function a8e(t){let r=fi(),n=`${r.version}
    precision highp float;
    ${r.attribute} vec3 clipSpacePos;
    ${r.attribute} vec2 uv;
    ${r.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Fze(t,n)}function l8e(t){let r=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Lze(t,r)}function u8e(t){let r=new Uint16Array([0,1,2,2,1,3]);return jze(t,r)}function NP(t,r,n,o,i,s){$ze(r,n);let a=Bze(t),l=t.TEXTURE_2D;return Wt(t,()=>t.bindTexture(l,a)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),Me().getNumber("WEBGL_VERSION")===1?Wt(t,()=>t.texImage2D(l,0,o,r,n,0,i,s,null)):Wt(t,()=>t.texStorage2D(l,1,o,r,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,r]}}function Bue(t){return t.internalFormatFloat}function c8e(t,r,n,o){let[i,s]=hE(r,n);return NP(t,i,s,Bue(o),o.textureFormatFloat,t.FLOAT)}function $ue(t){return t.internalFormatHalfFloat}function f8e(t,r,n,o){let[i,s]=hE(r,n);return NP(t,i,s,$ue(o),o.textureFormatFloat,o.textureTypeHalfFloat)}function zue(t){return t.downloadTextureFormat}function d8e(t,r,n,o){let[i,s]=hE(r,n);return NP(t,i,s,zue(o),t.RGBA,t.UNSIGNED_BYTE)}function Uue(t){return t.internalFormatPackedFloat}function p8e(t,r,n,o){let[i,s]=V0(r,n);return NP(t,i,s,Uue(o),t.RGBA,t.FLOAT)}function Vue(t){return t.internalFormatPackedHalfFloat}function h8e(t,r,n,o){let[i,s]=V0(r,n);return NP(t,i,s,Vue(o),t.RGBA,o.textureTypeHalfFloat)}function m8e(t,r,n){return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Rue(t,r,"clipSpacePos",n,3,20,0)&&Rue(t,r,"uv",n,2,20,12)}function g8e(t,r,n,o,i,s){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r));let a,l,u;i instanceof Uint8Array?(a=new Uint8Array(n*o*4),l=t.UNSIGNED_BYTE,u=t.RGBA):(a=new Float32Array(n*o*4),l=t.FLOAT,u=s.internalFormatPackedFloat),a.set(i),Me().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,o,t.RGBA,l,a)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,o,0,t.RGBA,l,a)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function y8e(t,r,n){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r)),n.data instanceof Uint8Array?Me().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Me().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function b8e(t,r,n,o){let i=t.createBuffer();Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));let l=4*4*r*n;return Wt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,l,t.STREAM_READ)),Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,0)),Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function x8e(t,r,n){let o=t,i=new Float32Array(n);return o.bindBuffer(o.PIXEL_PACK_BUFFER,r),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,i),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),i}function v8e(t,r,n,o){let[i,s]=hE(r,n),a=4,l=new Uint8Array(Dze(r*n,a));return Wt(t,()=>t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function w8e(t,r,n,o,i,s,a,l){let u=t,c=new Float32Array(Nze(s,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,r),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function _8e(t,r,n){let o=new Float32Array(r*n*4);return Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,o)),o}var jD=class{constructor(r){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=Me().getNumber("WEBGL_VERSION");if(r!=null?(this.gl=r,Ize(n,r)):this.gl=ef(n),r=this.gl,Me().getNumber("WEBGL_VERSION")===2){let s=r;this.createVertexArray=()=>Wt(s,()=>s.createVertexArray()),this.bindVertexArray=a=>Wt(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>Wt(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>Wt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(r!=null){let s=r.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Wt(r,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>Wt(r,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Wt(r,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>Wt(r,()=>r.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Me().getNumber("WEBGL_VERSION")===1){let s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=AP(this.gl,s),wd(this.gl,a))this.textureHalfFloatExtension=AP(this.gl,a);else if(Me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),wd(this.gl,i))this.colorBufferHalfFloatExtension=AP(this.gl,i);else if(Me().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",wd(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else if(wd(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=l8e(this.gl),this.indexBuffer=u8e(this.gl),this.framebuffer=zze(this.gl),this.textureConfig=TP(this.gl,this.textureHalfFloatExtension)}get debug(){return Me().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let r=this.gl;Wt(r,()=>r.finish()),Wt(r,()=>r.bindFramebuffer(r.FRAMEBUFFER,null)),Wt(r,()=>r.deleteFramebuffer(this.framebuffer)),Wt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,null)),Wt(r,()=>r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)),Wt(r,()=>r.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(r,n){return this.throwIfDisposed(),c8e(this.gl,r,n,this.textureConfig)}createFloat16MatrixTexture(r,n){return this.throwIfDisposed(),f8e(this.gl,r,n,this.textureConfig)}createUnsignedBytesMatrixTexture(r,n){return this.throwIfDisposed(),d8e(this.gl,r,n,this.textureConfig)}uploadPixelDataToTexture(r,n){this.throwIfDisposed(),y8e(this.gl,r,n)}uploadDenseMatrixToTexture(r,n,o,i){this.throwIfDisposed(),g8e(this.gl,r,n,o,i,this.textureConfig)}createFloat16PackedMatrixTexture(r,n){return this.throwIfDisposed(),h8e(this.gl,r,n,this.textureConfig)}createPackedMatrixTexture(r,n){return this.throwIfDisposed(),p8e(this.gl,r,n,this.textureConfig)}deleteMatrixTexture(r){this.throwIfDisposed(),this.outputTexture===r&&(Pue(this.gl,this.framebuffer),this.outputTexture=null),Wt(this.gl,()=>this.gl.deleteTexture(r))}downloadByteEncodedFloatMatrixFromOutputTexture(r,n,o){return this.downloadMatrixDriver(r,()=>v8e(this.gl,n,o,this.textureConfig))}downloadPackedMatrixFromBuffer(r,n,o,i,s,a){return w8e(this.gl,r,n,o,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(r,n){return x8e(this.gl,r,n)}createBufferFromTexture(r,n,o){this.bindTextureToFrameBuffer(r);let i=b8e(this.gl,n,o,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){let r=this.createFence(this.gl);return this.pollFence(r)}createFence(r){let n,o;if(Me().getBool("WEBGL_FENCE_API_ENABLED")){let i=r,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),o=()=>{let a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),o=()=>this.isQueryAvailable(n,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):o=()=>!0;return{query:n,isFencePassed:o}}downloadMatrixFromPackedTexture(r,n,o){return this.downloadMatrixDriver(r,()=>_8e(this.gl,n,o))}createProgram(r){this.throwIfDisposed();let n=this.gl;this.vertexShader==null&&(this.vertexShader=a8e(n));let o=Rze(n);Wt(n,()=>n.attachShader(o,this.vertexShader)),Wt(n,()=>n.attachShader(o,r)),Pze(n,o);let i=Object.assign(o,{vao:this.createVertexArray()});return this.debug&&rV(n,i),i}buildVao(r){this.setProgram(r),this.bindVertexArray(r.vao);let n=this.gl;Wt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),m8e(n,r,this.vertexBuffer)}deleteProgram(r){this.throwIfDisposed(),r===this.program&&(this.program=null),r!=null&&(Wt(this.gl,()=>this.gl.deleteProgram(r)),this.deleteVertexArray(r.vao))}setProgram(r){this.throwIfDisposed(),this.program=r,this.program!=null&&this.debug&&rV(this.gl,this.program),Wt(this.gl,()=>this.gl.useProgram(r))}getUniformLocation(r,n,o=!0){return this.throwIfDisposed(),o?Uze(this.gl,r,n):Vze(this.gl,r,n)}getAttributeLocation(r,n){return this.throwIfDisposed(),Wt(this.gl,()=>this.gl.getAttribLocation(r,n))}getUniformLocationNoThrow(r,n){return this.throwIfDisposed(),this.gl.getUniformLocation(r,n)}setInputMatrixTexture(r,n,o){this.throwIfDisposed(),this.throwIfNoProgram(),Gze(this.gl,r,n,o)}setOutputMatrixTexture(r,n,o){this.setOutputMatrixTextureDriver(r,o,n)}setOutputPackedMatrixTexture(r,n,o){this.throwIfDisposed();let[i,s]=V0(n,o);this.setOutputMatrixTextureDriver(r,i,s)}setOutputMatrixWriteRegion(r,n,o,i){this.setOutputMatrixWriteRegionDriver(o,r,i,n)}setOutputPackedMatrixWriteRegion(r,n,o,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&rV(this.gl,this.program),kP(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let r=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Wt(r,()=>r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=AP(this.gl,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.createQuery();return o.beginQuery(i.TIME_ELAPSED_EXT,s),s}let r=this.getQueryTimerExtensionWebGL1(),n=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,n),n}endQuery(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,o=this.getQueryTimerExtensionWebGL2();n.endQuery(o.TIME_ELAPSED_EXT);return}let r=this.getQueryTimerExtensionWebGL1();r.endQueryEXT(r.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(r){return je(this,null,function*(){return yield Y.repeatedTry(()=>this.disposed||this.isQueryAvailable(r,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(r,Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(r,n){if(n===0)return null;if(n===2){let o=this.gl;return o.getQueryParameter(r,o.QUERY_RESULT)/1e6}else{let o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(r,n){if(n===0)return!0;if(n===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.getQueryParameter(r,o.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{let o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(r,o.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(r){return new Promise(n=>{this.addItemToPoll(()=>r.isFencePassed(),()=>n())})}pollItems(){let r=ezt(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=r;++n){let{resolveFn:o}=this.itemsToPoll[n];o()}this.itemsToPoll=this.itemsToPoll.slice(r+1)}addItemToPoll(r,n){if(this.itemsToPoll.push({isDoneFn:r,resolveFn:n}),this.itemsToPoll.length>1)return;let o;"setTimeoutCustom"in Me().platform&&(o=Me().platform.setTimeoutCustom.bind(Me().platform)),Y.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,o)}bindTextureToFrameBuffer(r){this.throwIfDisposed(),nV(this.gl,r,this.framebuffer),this.debug&&kP(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(nV(this.gl,this.outputTexture,this.framebuffer),this.debug&&kP(this.gl)):Pue(this.gl,this.framebuffer)}downloadMatrixDriver(r,n){this.bindTextureToFrameBuffer(r);let o=n();return this.unbindTextureToFrameBuffer(),o}setOutputMatrixTextureDriver(r,n,o){this.throwIfDisposed();let i=this.gl;nV(i,r,this.framebuffer),this.debug&&kP(i),this.outputTexture=r,Wt(i,()=>i.viewport(0,0,n,o)),Wt(i,()=>i.scissor(0,0,n,o))}setOutputMatrixWriteRegionDriver(r,n,o,i){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.scissor(r,n,o,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function ezt(t){let r=0;for(;r<t.length&&t[r]();++r);return r-1}var{addImpl:S8e,bincountImpl:dV,bincountReduceImpl:C8e,bitwiseAndImpl:E8e,castImpl:T8e,ceilImpl:A8e,concatImpl:k8e,equalImpl:I8e,expImpl:D8e,expm1Impl:N8e,floorImpl:M8e,gatherNdImpl:F8e,gatherV2Impl:O8e,greaterImpl:R8e,greaterEqualImpl:P8e,lessImpl:L8e,lessEqualImpl:j8e,linSpaceImpl:B8e,logImpl:$8e,maxImpl:z8e,maximumImpl:U8e,minimumImpl:V8e,multiplyImpl:G8e,negImpl:W8e,notEqualImpl:q8e,prodImpl:H8e,raggedGatherImpl:Y8e,raggedRangeImpl:X8e,raggedTensorToTensorImpl:K8e,rangeImpl:Z8e,rsqrtImpl:Q8e,scatterImpl:J8e,sigmoidImpl:eUe,simpleAbsImpl:pV,sliceImpl:tUe,sparseFillEmptyRowsImpl:rUe,sparseReshapeImpl:nUe,sparseSegmentReductionImpl:hV,sqrtImpl:oUe,staticRegexReplaceImpl:iUe,stridedSliceImpl:sUe,stringNGramsImpl:aUe,stringSplitImpl:lUe,stringToHashBucketFastImpl:uUe,subImpl:cUe,tileImpl:fUe,topKImpl:dUe,transposeImpl:bE,uniqueImpl:pUe}=yue;function Gue(t,r){return["x","y","z","w","u","v"].slice(0,r).map(n=>`${t}.${n}`)}function Oi(t,r){return r===1?[t]:Gue(t,r)}function hUe(t,r){if(t===1)return"rc";let n="";for(let o=0;o<t;o++)n+=r[o],o<t-1&&(n+=",");return n}var mV=class{constructor(r){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.enableShapeUniforms=zn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=Oi("rc",this.rank),o=Ur(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(r){let n=[];for(let o=0;o<=1;o++)for(let i=0;i<=1;i++){let s=`${o===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${r[r.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(r){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let o=this.rank-2;o<this.rank;o++)n+=`${r[o]} >= ${this.enableShapeUniforms?`outShape[${o}]`:this.outputShape[o]}`,o<this.rank-1&&(n+="||");return n}getSetup(r){if(this.rank===1)return"";let n=r.slice(-2),o=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${o};
      bool rEdge = rp1 >= ${i};
    `}getOutput(r){let n=this.getSourceCoordsArr(r);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}};var BD=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let o="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),o+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${tzt(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?MD():ND(r)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":r[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":r[2]};

        ${o}

        setOutput(result);
      }
    `}};function tzt(t,r){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${r?Qze(["r","c","d"],"inputShape"):Xh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}re();var gV=class{constructor(r){this.gpgpu=r,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(r,n,o){let i=gUe(n,o),s=yUe(r,i,o);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);let a=mUe(r,i,this.gpgpu.gl,this.gpgpu.textureConfig,o);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let l;return i===Qa.PACKED_2X2_FLOAT32?l=this.gpgpu.createPackedMatrixTexture(r[0],r[1]):i===Qa.PACKED_2X2_FLOAT16?l=this.gpgpu.createFloat16PackedMatrixTexture(r[0],r[1]):i===Qa.UNPACKED_FLOAT32?l=this.gpgpu.createFloat32MatrixTexture(r[0],r[1]):i===Qa.UNPACKED_FLOAT16?l=this.gpgpu.createFloat16MatrixTexture(r[0],r[1]):i===Qa.PACKED_4X1_UNSIGNED_BYTE&&(l=this.gpgpu.createUnsignedBytesMatrixTexture(r[0],r[1])),this.usedTextures[s].push(l),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),l}releaseTexture(r,n,o,i){if(this.freeTextures==null)return;let s=gUe(o,i),a=yUe(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);let l=mUe(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=Me().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(r.texture),this._numBytesAllocated-=l):(this.freeTextures[a].push(r),this.numFreeTextures++,this._numBytesFree+=l),this.numUsedTextures--;let c=this.usedTextures[a],f=c&&c.indexOf(r);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let r=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${r})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let r in this.freeTextures)this.freeTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let r in this.usedTextures)this.usedTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function rzt(t,r){let n=t;if(r===n.R32F)return 4;if(r===n.R16F)return 2;if(r===n.RGBA32F)return 16;if(r===t.RGBA)return 16;if(r===n.RGBA16F)return 8;if(r===n.RGBA8)return 4;throw new Error(`Unknown internal format ${r}`)}function mUe(t,r,n,o,i){let s=nzt(r,o),a;if(i){let[u,c]=V0(t[0],t[1]);a=u*c}else{let[u,c]=hE(t[0],t[1]);a=u*c}let l=rzt(n,s);return a*l}function nzt(t,r){switch(t){case Qa.PACKED_2X2_FLOAT32:return Uue(r);case Qa.PACKED_2X2_FLOAT16:return Vue(r);case Qa.UNPACKED_FLOAT32:return Bue(r);case Qa.UNPACKED_FLOAT16:return $ue(r);case Qa.PACKED_4X1_UNSIGNED_BYTE:return zue(r);default:throw new Error(`Unknown physical texture type ${t}`)}}function ozt(t){return Me().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Qa.PACKED_2X2_FLOAT32:Qa.UNPACKED_FLOAT32:t?Qa.PACKED_2X2_FLOAT16:Qa.UNPACKED_FLOAT16}function gUe(t,r){if(t===Ol.UPLOAD)return Qa.PACKED_2X2_FLOAT32;if(t===Ol.RENDER||t==null)return ozt(r);if(t===Ol.DOWNLOAD||t===Ol.PIXELS)return Qa.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function yUe(t,r,n){return`${t[0]}_${t[1]}_${r}_${n}`}var Da=class{constructor(r,n){this.variableNames=["A"],this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},vs="if (isnan(x)) return x;",bUe="return x;",Wue="return abs(x);";var xUe="return (x >= 0.0) ? x : (exp(x) - 1.0);",vUe=vs+`
  return (x < 0.0) ? 0.0 : x;
`,wUe=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,W0="return x;",_Ue="return 1.0 / (1.0 + exp(-1.0 * x));";var CUe="return x;",EUe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,TUe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AUe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kUe="return 1.0 / (1.0 + exp(-1.0 * x));",cc=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var yV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let n=r.length,o=Oi("rc",n),i=Ur(n),s=hUe(n,o),a=o.slice(-2),l=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${l}));
      }
    `}};var szt=ka.whereImpl,azt=1e-7,lzt=1e-4,bV={};function uzt(t){return t in bV||(bV[t]={}),bV[t]}var czt=Me().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),fzt=600;function dzt(){return Me().global.screen==null?1024:Me().global.screen.height*Me().global.screen.width*window.devicePixelRatio*fzt/1024/1024}var IUe=(()=>{class t extends Tg{nextDataId(){return t.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Me().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let o;if(n!=null){if(n instanceof jD)o=n;else{let i=ef(Me().getNumber("WEBGL_VERSION"),n);o=new jD(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let i=ef(Me().getNumber("WEBGL_VERSION"));o=new jD(i),this.binaryCache=uzt(Me().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=o,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new gV(this.gpgpu),this.numMBBeforeWarning=dzt(),this.texData=new F1(this,dd())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,o,i,s,a,l){let u=this.makeTensorInfo(o,i),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:n,texShape:[s,a]},c.texShape=[s,a];let f=IP(o),d=new DP(f,!1,l),p=this.runWebGLProgram(d,[u],i,[[s,a]]);return p.shape=o,c.texture=null,this.disposeIntermediateTensorInfo(u),p.dataId}write(n,o,i){if((Me().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Me().getBool("DEBUG"))&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let s={id:this.nextDataId()};return this.texData.set(s,{shape:o,dtype:i,values:n,usage:Ol.UPLOAD,refCount:1}),s}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){let o=this.texData.get(n);o.refCount++}decRef(n){if(this.texData.has(n)){let o=this.texData.get(n);o.refCount--}}move(n,o,i,s,a){if(Me().getBool("DEBUG")&&this.checkNumericalProblems(o),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:s,values:o,usage:Ol.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let o=this.texData.get(n),{values:i,dtype:s,complexTensorInfos:a,slice:l,shape:u,isPacked:c}=o;if(l!=null){let h;c?h=new cc(u,W0):h=new Da(u,W0);let m=this.runWebGLProgram(h,[{dataId:n,shape:u,dtype:s}],s),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(i!=null)return this.convertAndCacheOnCPU(n);if(s==="string")return i;let f=this.activeTimers!=null,d;f&&(d=Y.now());let p;if(s==="complex64"){let h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);p=ce.mergeRealAndImagArrays(h,m)}else p=this.getValuesFromTexture(n);return f&&(this.downloadWaitMs+=Y.now()-d),this.convertAndCacheOnCPU(n,p)}read(n){return je(this,null,function*(){if(this.pendingRead.has(n)){let g=this.pendingRead.get(n);return new Promise(y=>g.push(y))}let o=this.texData.get(n),{values:i,shape:s,slice:a,dtype:l,complexTensorInfos:u,isPacked:c}=o;if(a!=null){let g;c?g=new cc(s,W0):g=new Da(s,W0);let y=this.runWebGLProgram(g,[{dataId:n,shape:s,dtype:l}],l),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(i!=null)return this.convertAndCacheOnCPU(n);if(Me().getBool("DEBUG")&&!Me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Me().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let f=null,d;if(l!=="complex64"&&Me().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(n);let g=this.texData.get(d.dataId);f=this.gpgpu.createBufferFromTexture(g.texture.texture,...EP(s))}this.pendingRead.set(n,[]),l!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(l==="complex64"){let g=yield Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),y=g[0],b=g[1];p=ce.mergeRealAndImagArrays(y,b)}else if(f==null)p=this.getValuesFromTexture(n);else{let g=Y.sizeFromShape(s);p=this.gpgpu.downloadFloat32MatrixFromBuffer(f,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),f!=null){let g=this.gpgpu.gl;Wt(g,()=>g.deleteBuffer(f))}let h=this.convertAndCacheOnCPU(n,p),m=this.pendingRead.get(n);return this.pendingRead.delete(n),m.forEach(g=>g(h)),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&dd().removeDataId(n,this),this.pendingDeletes--),h})}readToGPU(n,o={}){let i=this.texData.get(n),{values:s,shape:a,slice:l,dtype:u,isPacked:c,texture:f}=i;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(l!=null){let m;c?m=new cc(a,W0):m=new Da(a,W0);let g=this.runWebGLProgram(m,[{dataId:n,shape:a,dtype:u}],u),y=this.readToGPU(g,o);return this.disposeIntermediateTensorInfo(g),y}if(f==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(n,o.customTexShape),p=dd().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>Y.decodeString(s));return er(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return er(n.shape,n.dtype,o)}checkNumericalProblems(n){if(n!=null)for(let o=0;o<n.length;o++){let i=n[o];if(!Mze(i))throw Me().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:o,dtype:i,isPacked:s}=this.texData.get(n),a=Y.sizeFromShape(o);if(Me().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(n),m=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...EP(o)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),g}let l=Me().getBool("WEBGL_PACK")&&s===!0,u=l?IP(o):o,c=l?new cV(u):new uV(u),f=this.runWebGLProgram(c,[{shape:u,dtype:i,dataId:n}],"float32"),d=this.texData.get(f.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(f),p}timerAvailable(){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){let o=this.activeTimers,i=[],s=!1;this.programTimersStack==null?(this.programTimersStack=i,s=!0):this.activeTimers.push(i),this.activeTimers=i,n();let a=Y.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),l=Y.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=o,s&&(this.programTimersStack=null);let u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return je(this,null,function*(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(a);u.kernelMs=Y.sum(c),u.getExtraProfileInfo=()=>c.map((f,d)=>({name:l[d],ms:f})).map(f=>`${f.name}: ${f.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Y.now(),endMs:null}}endTimer(n){return Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Y.now(),n)}getQueryTime(n){return je(this,null,function*(){if(Me().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(n);let o=n;return o.endMs-o.startMs})}disposeData(n,o=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(o?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!o&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:i}=this.texData.get(n);return i!=null&&(this.disposeData(i.real.dataId,o),this.disposeData(i.imag.dataId,o)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:o,dtype:i,texShape:s,usage:a,isPacked:l,slice:u}=this.texData.get(n),c=u&&u.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(o,s,a,l)));let d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,o=czt){return Me().getBool("WEBGL_CPU_FORWARD")&&n.every(i=>this.texData.get(i.dataId).texture==null&&Y.sizeFromShape(i.shape)<o)}getGPGPUContext(){return this.gpgpu}where(n){ce.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let o=n.dataSync();return szt(n.shape,o)}packedUnaryOp(n,o,i){let s=new cc(n.shape,o),a=this.compileAndRun(s,[n],i);return dd().makeTensorFromTensorInfo(a)}abs(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let s=pV(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,s)}if(Me().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Wue,n.dtype);let o=new Da(n.shape,Wue),i=this.compileAndRun(o,[n]);return dd().makeTensorFromTensorInfo(i)}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&Y.isString(i[0])){let a=i.map(l=>Y.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return this.texData.get(s).usage=null,{dataId:s,shape:n,dtype:o}}makeOutput(n,o,i){return dd().makeTensorFromTensorInfo(this.makeTensorInfo(n,o,i),this)}unpackTensor(n){let o=new yV(n.shape);return this.runWebGLProgram(o,[n],n.dtype)}packTensor(n){let o=new mV(n.shape);return this.runWebGLProgram(o,[n],n.dtype,null,!0)}packedReshape(n,o){let i=[Pw(n.shape),...Lw(n.shape)],s={dtype:n.dtype,shape:i,dataId:n.dataId},a=[Pw(o),...Lw(o)],l=new BD(a,i),u=!0,c=[i],f=this.runWebGLProgram(l,[s],n.dtype,c,u);return{dataId:f.dataId,shape:o,dtype:f.dtype}}decode(n,o){let i=this.texData.get(n),{isPacked:s,shape:a,dtype:l}=i;if(o!=null){let h=Y.sizeFromShape(a),m=o[0]*o[1]*4;Y.assert(h<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let u=IP(a),c;s?c=new lV(u):c=new aV(u);let f=!0,d=[o??EP(u)],p=this.runWebGLProgram(c,[{shape:u,dtype:l,dataId:n}],l,d,f,o);return{dtype:l,shape:a,dataId:p.dataId}}runWebGLProgram(n,o,i,s,a=!1,l){let u=this.makeTensorInfo(n.outputShape,i),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===pE.DENSE){let x=l??EP(n.outputShape);c.texShape=x.map(v=>v*2)}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),Y.sizeFromShape(u.shape)===0)return c.values=Y.getTypedArrayFromDType(u.dtype,0),u;let f=[],d=o.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(x.dataId);if(v.texture==null){if(!n.packedInputs&&Y.sizeFromShape(x.shape)<=Me().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:v.values};n.packedInputs&&(v.isPacked=!0,v.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!v.isPacked!=!!n.packedInputs)x=v.isPacked?this.unpackTensor(x):this.packTensor(x),f.push(x),v=this.texData.get(x.dataId);else if(v.isPacked&&!mE(v.shape,x.shape)){let w=x,_=x.shape;x.shape=v.shape,x=this.packedReshape(x,_),f.push(x),v=this.texData.get(x.dataId),w.shape=_}return{shape:x.shape,texData:v,isUniform:!1}});this.uploadToGPU(u.dataId);let p={shape:u.shape,texData:c,isUniform:!1},h=s8e(n,d,p),m=this.getAndSaveBinary(h,()=>o8e(this.gpgpu,n,d,p)),g=this.activeTimers!=null,y;g&&(y=this.startTimer()),Me().get("ENGINE_COMPILE_ONLY")||i8e(this.gpgpu,m,d,p,s),f.forEach(x=>this.disposeIntermediateTensorInfo(x)),g&&(y=this.endTimer(y),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(y)}));let b=Me().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){let x=Y.now();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!Me().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&a===!1){let x=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),x}return u}compileAndRun(n,o,i,s,a=!1){return i=i||o[0].dtype,this.runWebGLProgram(n,o,i,s,a)}getAndSaveBinary(n,o){return n in this.binaryCache||(this.binaryCache[n]=o()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Me().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(o=>{this.gpgpu.deleteProgram(this.binaryCache[o].webGLProgram),delete this.binaryCache[o]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Pe(()=>{if(!Me().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=Me().getBool("DEBUG");Me().set("DEBUG",!1);let o=this.abs(Ot(1e-8)).dataSync()[0];if(Me().set("DEBUG",n),o>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?azt:lzt}uploadToGPU(n){let o=this.texData.get(n),{shape:i,dtype:s,values:a,texture:l,usage:u,isPacked:c}=o;if(l!=null)return;let f=this.activeTimers!=null,d;f&&(d=Y.now());let p=o.texShape;if(p==null&&(p=Wze(i,c),o.texShape=p),a!=null){let h=IP(i),m,g=p[1],y=p[0],b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(c||!b)&&([g,y]=V0(p[0],p[1])),c?m=new fV(h,b):m=new DP(h,b);let x=b?[y,g]:p,v=this.makeTensorInfo(x,s),w=this.texData.get(v.dataId);b?w.usage=Ol.PIXELS:w.usage=Ol.UPLOAD,w.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),g,y,a);let _=[[y,g]],C=this.runWebGLProgram(m,[v],s,_,!0),E=this.texData.get(C.dataId);o.texShape=E.texShape,o.isPacked=E.isPacked,o.usage=E.usage,Me().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(o.texture=E.texture,o.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(v),f&&(this.uploadWaitMs+=Y.now()-d)}else{let h=this.acquireTexture(p,u,s,c);o.texture=h}}convertAndCacheOnCPU(n,o){let i=this.texData.get(n),{dtype:s}=i;return o!=null&&(i.values=pzt(o,s)),i.values}acquireTexture(n,o,i,s){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,o,s)}computeBytes(n,o){return n[0]*n[1]*Y.bytesPerElement(o)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){return je(this,null,function*(){let n=[];if(this.gpgpu.parallelCompilationExtension){for(let[,o]of Object.entries(this.binaryCache))n.push(this.checkCompletionAsync_(o));return Promise.all(n)}else{for(let[,o]of Object.entries(this.binaryCache)){let i=new Promise(s=>{try{this.checkCompletion_(o),s(!0)}catch(a){throw a}});n.push(i)}return Promise.all(n)}})}checkCompletionAsync_(n){return je(this,null,function*(){return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(n):(yield uD(),this.checkCompletionAsync_(n))})}checkCompletion_(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Oue(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:o,customUniformLocations:i,infLoc:s,nanLoc:a,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=jue(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=o,n.customUniformLocations=i,n.infLoc=s,n.nanLoc=a,n.outShapeLocation=l,n.outShapeStridesLocation=u,n.outTexShapeLocation=c}}createTensorFromGPUData(n,o,i){n.channels=n.channels||"RGBA";let{texture:s,height:a,width:l,channels:u}=n,c=dd().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let f=c.writeTexture(s,o,i,a,l,u);return dd().makeTensorFromDataId(f,o,i,c)}}return t.nextDataId=0,t})();function pzt(t,r){if(r==="float32"||r==="complex64")return t;if(r==="int32"||r==="bool"){let n=r==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let o=0;o<n.length;++o)n[o]=Math.round(t[o]);return n}else throw new Error(`Unknown dtype ${r}`)}vx.isBrowser()&&_3("webgl",()=>new IUe,2);re();re();re();re();re();var $D=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var fc=class{constructor(r,n,o){this.variableNames=["A","B"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.enableShapeUniforms=zn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${r}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};re();var rf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var tf=class{constructor(r,n,o,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ce.assertAndGetBroadcastShape(n,o);let s=this.outputShape.length;this.enableShapeUniforms=zn(s);let a="";if(i)if(s===0||Y.sizeFromShape(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Ur(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let u=Oi("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${r}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}};re();re();function Ri(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var DUe={kernelName:Ah,backendName:"webgl",kernelFunc:Ri};function dc(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.makeTensorInfo(o.shape,"complex64"),a=n.texData.get(s.dataId),l=Ri({inputs:{x:o},backend:n}),u=Ri({inputs:{x:i},backend:n});return a.complexTensorInfos={real:l,imag:u},s}var NUe={kernelName:kS,backendName:"webgl",kernelFunc:dc};re();var que="return (a < 0.) ? b * a : a;",Hue=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function hzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o,a=n.makeTensorInfo([],"float32",Y.createScalarValue(s,"float32")),l=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tf(Hue,i.shape,a.shape):new fc(que,i.shape,a.shape),u=n.runWebGLProgram(l,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),u}var MUe={kernelName:qb,backendName:"webgl",kernelFunc:hzt};re();var Yue="return (a < 0.) ? b * a : a;",Xue=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function mzt(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tf(Xue,o.shape,i.shape):new fc(Yue,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],"float32")}var FUe={kernelName:ix,backendName:"webgl",kernelFunc:mzt};var Ap="if (isnan(x)) return x;";function tr({opSnippet:t,packedOpSnippet:r,cpuKernelImpl:n,dtype:o}){return({inputs:i,backend:s})=>{let{x:a}=i,l=s,u=o||a.dtype;if(l.shouldExecuteOnCPU([a])&&n!=null){let d=l.texData.get(a.dataId),p=n(d.values,u);return l.makeTensorInfo(a.shape,u,p)}let c=Me().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&r!=null,f;return c?f=new cc(a.shape,r):f=new Da(a.shape,t),l.runWebGLProgram(f,[a],u)}}function Pn({opSnippet:t,packedOpSnippet:r,checkOutOfBounds:n=!1,supportsComplex:o=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:l})=>{let{a:u,b:c}=a,f=l;if(o&&u.dtype==="complex64"){let m=f.texData.get(u.dataId),g=f.texData.get(c.dataId),[y,b]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(v=>{let[w,_]=v,S={dataId:w.dataId,dtype:w.dtype,shape:u.shape},C={dataId:_.dataId,dtype:_.dtype,shape:c.shape},E=new fc(t,u.shape,c.shape);return f.runWebGLProgram(E,[S,C],qi(w.dtype,_.dtype))}),x=dc({inputs:{real:y,imag:b},backend:f});return f.disposeIntermediateTensorInfo(y),f.disposeIntermediateTensorInfo(b),x}let d=s||qi(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([u,c]))&&i!=null){let m=f.texData.get(u.dataId).values,g=f.texData.get(c.dataId).values,y=u.dtype==="string"?ce.fromUint8ToStringArray(m):m,b=u.dtype==="string"?ce.fromUint8ToStringArray(g):g,[x,v]=i(u.shape,c.shape,y,b,d),w=f.makeTensorInfo(v,d),_=f.texData.get(w.dataId);return _.values=x,w}let p=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&r!=null,h;return p?h=new tf(r,u.shape,c.shape,n):h=new fc(t,u.shape,c.shape),f.runWebGLProgram(h,[u,c],d)}}function Hx(t,r=!1){if(t==="linear")return r?CUe:bUe;if(t==="relu")return r?TUe:vUe;if(t==="elu")return r?EUe:xUe;if(t==="relu6")return r?AUe:wUe;if(t==="prelu")return r?Xue:Yue;if(t==="leakyrelu")return r?Hue:que;if(t==="sigmoid")return r?kUe:_Ue;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var zD=class{constructor(r,n,o,i=!1,s=!1,a=!1,l=null,u=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=zn(this.outputShape.length);let f=i?r[1]:r[2],d=Math.ceil(f/2),p=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",m=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],y="",b="";l&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${l}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${l}
        }`:y=`vec4 activation(vec4 x) {
          ${l}
        }`,b="result = activation(result);");let x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",w="rc.x";r[0]<n[0]?v=`imod(rc.x, ${r[0]})`:n[0]<r[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}};re();re();var Kue={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},MP=class{constructor(r,n,o){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${r}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var OUe="return a * b;";function FP(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=ce.upcastType(o.dtype,i.dtype);if(o.dtype==="complex64"){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),c=new MP(Kue.REAL,o.shape,i.shape),f=new MP(Kue.IMAG,o.shape,i.shape),d=[{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(f,d,"float32"),m=dc({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([o,i])){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),[c,f]=G8e(o.shape,i.shape,l.values,u.values,s),d=n.makeTensorInfo(f,s),p=n.texData.get(d.dataId);return p.values=c,d}let a;return Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new tf(OUe,o.shape,i.shape):a=new fc(OUe,o.shape,i.shape),n.runWebGLProgram(a,[o,i],s)}var RUe={kernelName:r0,backendName:"webgl",kernelFunc:FP};re();function PUe(t,r,n){let o=[Pw(t.shape),...Lw(t.shape)],i={dtype:t.dtype,shape:o,dataId:t.dataId},s=[Pw(r),...Lw(r)],a=new BD(s,o),l=!0,u=[o],c=n.runWebGLProgram(a,[i],t.dtype,u,l);return{dataId:c.dataId,shape:r,dtype:c.dtype}}function yt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=n,l=Y.sizeFromShape(i.shape),u=Y.inferFromImplicitShape(s,l),c=Y.sizeFromShape(u);Y.assert(l===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);let f=a.texData.get(i.dataId);return f.isPacked&&!mE(i.shape,u)&&!(f.texture!==null&&mE(f.shape,u))?PUe(i,u,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}var LUe={kernelName:ax,backendName:"webgl",kernelFunc:yt};re();re();re();re();var OP=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l=Math.floor(o/4)*4,u=o%4,c="sumValue += dot(values, ones);";if(n!=null){let d=1/n;c=`sumValue += dot(values * ${Y.isInt(d)?d.toPrecision(2):d}, ones);`}let f="";s%o>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${l};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var xV=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l="0.0",u="";n==="prod"?l="1.0":n==="min"?(l="1.0 / 1e-20",u="min"):n==="max"&&(l="-1.0 / 1e-20",u="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");let f=Math.floor(o/4)*4,d=o%4,p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(l="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(l="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${l};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        vec4 minMaxValue = vec4(${l});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function yzt(t){let r=[];for(;r.length===0||r[r.length-1].outSize!==1;){let n=r.length?r[r.length-1].outSize:t[1],o=ce.computeOptimalWindowSize(n);r.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return r}function nf(t,r,n,o){let i=yzt(t.shape),s=t;for(let a=0;a<i.length;a++){let{inSize:l,windowSize:u,outSize:c}=i[a],f,d;n==="mean"?f=a===0?new OP({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},l):new OP({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c}):f=new xV({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},n),d=s,s=o.runWebGLProgram(f,[s],r),d.dataId!==t.dataId&&o.disposeIntermediateTensorInfo(d)}return s}re();var vV=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[n[a]];this.outputShape=o,this.rank=o.length;let i=Ur(this.rank),s=bzt(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}};function bzt(t){let r=t.length;if(r>6)throw Error(`Transpose for rank ${r} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],o=new Array(r);for(let i=0;i<t.length;i++)o[t[i]]=n[i];return o.join()}var wV=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let o=new Array(r.length);for(let f=0;f<o.length;f++)o[f]=r[n[f]];if(this.outputShape=o,this.rank=o.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let i=Ur(this.rank),s=Gue("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=s[f];let l=`vec2(${a.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${o[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${l})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${u}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${o[this.rank-2]}) {
        result[2] = ${c};
        if(${u}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function jw(t,r,n){let o=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wV(t.shape,r):new vV(t.shape,r);return n.runWebGLProgram(o,[t],t.dtype)}function jUe(t,r,n,o){let i=r,s=t.shape.length,a=Y.parseAxisParam(i,t.shape),l=a,u=ce.getAxesPermutation(l,s),c=u!=null,f=t;c&&(f=jw(t,u,o),l=ce.getInnerMostAxes(l.length,s)),ce.assertAxesAreInnerMostDims("sum",l,s);let[d,p]=ce.computeOutAndReduceShapes(f.shape,l),h=d;n&&(h=ce.expandShapeToKeepDim(d,a));let m=Y.sizeFromShape(p),y=Y.sizeFromShape(t.shape)/m,b=yt({inputs:{x:f},attrs:{shape:[y,m]},backend:o}),x=K1(t.dtype),v=nf(b,x,"sum",o),w=yt({inputs:{x:v},attrs:{shape:h},backend:o});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(v),c&&o.disposeIntermediateTensorInfo(f),w}function xE(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;return jUe(i,s,a,n)}var BUe={kernelName:px,backendName:"webgl",kernelFunc:xE};re();function Wo(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{perm:s}=o,a=n,l=i.shape.length,u=new Array(l);for(let f=0;f<u.length;f++)u[f]=i.shape[s[f]];let c;if(a.shouldExecuteOnCPU([i])){let d=a.texData.get(i.dataId).values,p=bE(d,i.shape,i.dtype,s,u);c=a.makeTensorInfo(u,i.dtype);let h=a.texData.get(c.dataId);h.values=p}else c=jw(i,s,a);return c}var $Ue={kernelName:Ih,backendName:"webgl",kernelFunc:Wo};var Zue=1e3;function vE({a:t,b:r,transposeA:n,transposeB:o,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:u=null}){let c=t.shape.length,f=r.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=o?r.shape[f-1]:r.shape[f-2],h=n?t.shape[c-1]:t.shape[c-2],m=o?r.shape[f-2]:r.shape[f-1],g=t.shape.slice(0,-2),y=r.shape.slice(0,-2),b=Y.sizeFromShape(g),x=Y.sizeFromShape(y),w=oc.assertAndGetBroadcastShape(t.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,m]);Y.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${r.shape} and transposeA=${n} and transposeB=${o} must match.`);let _=n?[b,d,h]:[b,h,d],S=o?[x,m,p]:[x,p,m],C=yt({inputs:{x:t},backend:i,attrs:{shape:_}}),E=yt({inputs:{x:r},backend:i,attrs:{shape:S}}),T=[C,E],I=Math.max(b,x),k=n?C.shape[1]:C.shape[2],F=s!=null,D=a!=null,L=u==="leakyrelu",P=u!=null?Hx(u,!0):null,R=F||D||L||P!=null,V;if((h===1||m===1)&&k>Zue&&R===!1){let U=C,H=E;n&&(U=Wo({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),T.push(U)),o&&(H=Wo({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),T.push(H));let X=m!==1,fe=m===1,$=U;X&&($=yt({inputs:{x:U},backend:i,attrs:{shape:[I,k,1]}}),T.push($));let M=m===1?2:1,z=H;fe&&(z=yt({inputs:{x:H},backend:i,attrs:{shape:[I,1,k]}}),T.push(z));let q=FP({inputs:{a:$,b:z},backend:i});V=xE({inputs:{x:q},backend:i,attrs:{axis:M,keepDims:!0}}),T.push(q)}else{let U=qi(t.dtype,r.dtype),H=new zD(_,S,[I,h,m],n,o,F,P,D,L),X=[C,E];if(s!=null&&X.push(s),D&&X.push(a),L){let fe=i.makeTensorInfo([],"float32",Y.createScalarValue(l,"float32"));X.push(fe),T.push(fe)}V=i.runWebGLProgram(H,X,U)}let G=yt({inputs:{x:V},backend:i,attrs:{shape:w}});T.push(V);for(let U of T)i.disposeIntermediateTensorInfo(U);return G}function xzt(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o;return vE({a:i,b:s,transposeA:u,transposeB:c,backend:n,bias:a,preluActivationWeights:l,leakyreluAlpha:d,activation:f})}var zUe={kernelName:W1,backendName:"webgl",kernelFunc:xzt};re();var UUe="return abs(x);";function vzt(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])&&o.dtype!=="complex64"){let s=n.texData.get(o.dataId),a=pV(s.values);return n.makeTensorInfo(o.shape,o.dtype,a)}let i;return Me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new cc(o.shape,UUe):i=new Da(o.shape,UUe),n.runWebGLProgram(i,[o],o.dtype)}var VUe={kernelName:Ab,backendName:"webgl",kernelFunc:vzt};re();var wzt=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,_zt=tr({opSnippet:wzt}),GUe={kernelName:Ig,backendName:"webgl",kernelFunc:_zt};re();var Szt=vs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Czt=tr({opSnippet:Szt}),WUe={kernelName:Dg,backendName:"webgl",kernelFunc:Czt};re();var qUe="return a + b;",Ezt=Pn({opSnippet:qUe,packedOpSnippet:qUe,supportsComplex:!0,cpuKernelImpl:S8e}),HUe={kernelName:lp,backendName:"webgl",kernelFunc:Ezt};re();var _V=class{constructor(r,n){this.outputShape=[],this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`float v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}};var SV=class{constructor(r,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`vec4 v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}};function CV(t){let{inputs:r,backend:n}=t,o=r;if(o.length===1)return Ri({inputs:{x:o[0]},backend:n});if(o.length>Me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(o.length/2),c=CV({inputs:o.slice(0,u),backend:n}),f=CV({inputs:o.slice(u),backend:n});return CV({inputs:[c,f],backend:n})}let i=o.map(u=>u.dtype).reduce((u,c)=>qi(u,c)),s=o.map(u=>u.shape),l=Me().getBool("WEBGL_PACK")?new SV(o[0].shape,s):new _V(o[0].shape,s);return n.runWebGLProgram(l,o,i)}var YUe={kernelName:kb,backendName:"webgl",kernelFunc:CV};re();function Tzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Wo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("all",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=Y.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=nf(g,g.dtype,"all",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var XUe={kernelName:_S,backendName:"webgl",kernelFunc:Tzt};re();function Azt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Wo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("any",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=Y.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=nf(g,g.dtype,"any",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var KUe={kernelName:SS,backendName:"webgl",kernelFunc:Azt};re();re();var EV=class{constructor(r,n,o){this.variableNames=["A"];let{windowSize:i,batchSize:s,outSize:a}=r;o||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];let l=n==="max"?">":"<",u=o?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${l} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};re();var TV=class{constructor(r,n,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y.assert(r.length>2,()=>`Packed arg${o.charAt(0).toUpperCase()+o.slice(1)} supports only inputs with rank above 2.`);let s=r[r.length-1],a=Math.ceil(s/n);this.outputShape=r.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");let l=this.outputShape,u=l.length,c=Ur(u),f=Oi("coords",u),d,p;if(a===1){p=u+1;let E=Ur(p);d=`
        ${E} sourceLocR = ${E}(${f.join()}, 0);
        ++${f[u-1]};
        ${E} sourceLocG = ${E}(${f.join()}, 0);
        ++${f[u-2]};
        ${E} sourceLocA = ${E}(${f.join()}, 0);
        --${f[u-1]};
        ${E} sourceLocB = ${E}(${f.join()}, 0);
        --${f[u-2]};`}else p=u,d=`
        ${c} sourceLocR = coords;
        ++${f[u-1]};
        ${c} sourceLocG = coords;
        ++${f[u-2]};
        ${c} sourceLocA = coords;
        --${f[u-1]};
        ${c} sourceLocB = coords;
        --${f[u-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),m="."+h[p-1],g=h.map(E=>"int "+E),y=Oi("sourceLocR",p-1).concat("inIdx.r"),b=Oi("sourceLocG",p-1).concat("inIdx.g"),x=Oi("sourceLocB",p-1).concat("inIdx.b"),v=Oi("sourceLocA",p-1).concat("inIdx.a"),w=o==="max"?"greaterThan":"lessThan",_=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()})));`,S=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,C=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[u-1]} < ${l[u-1]-1};
        bool hasNextRow = ${f[u-2]} < ${l[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function ZUe(t,r,n,o=null){let i=r.shape[0],s=r.shape[1];o!=null&&(i=o.shape[0],s=o.shape[1]);let a=ce.computeOptimalWindowSize(s),l={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},u=new EV(l,n,o==null),c=[r];o!=null&&c.push(o);let f=t.runWebGLProgram(u,c,"int32");if(f.shape[1]===1)return f;let d=ZUe(t,r,n,f);return t.disposeIntermediateTensorInfo(f),d}function QUe(t,r,n,o=null){let i=o!=null?o.shape:r.shape,s=i[i.length-1],a=ce.computeOptimalWindowSize(s),l=new TV(i,a,n,o==null),u=o==null?[r]:[r,o],c=t.runWebGLProgram(l,u,"int32");if(c.shape.length===r.shape.length){let f=QUe(t,r,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function AV(t,r,n,o){let i=[n];if(ce.assertAxesAreInnerMostDims("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,r.shape.length),!Me().getBool("WEBGL_PACK_REDUCE")||r.shape.length<=2){let s=[],a=t.texData.get(r.dataId),l=a!==null&&a.isPacked,u=r;l&&(u=t.unpackTensor(r),s.push(u));let[c,f]=ce.computeOutAndReduceShapes(u.shape,i),d=Y.sizeFromShape(f),p=yt({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});s.push(p);let h=ZUe(t,p,o);s.push(h);let m=yt({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return QUe(t,r,o)}function kzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Wo({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMax",[a[0]],u.shape.length);let f=AV(n,u,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var JUe={kernelName:Ib,backendName:"webgl",kernelFunc:kzt};re();function Izt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=Y.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Wo({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMin",[a[0]],u.shape.length);let f=AV(n,u,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var e7e={kernelName:Db,backendName:"webgl",kernelFunc:Izt};re();var Dzt=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Nzt=tr({opSnippet:Dzt}),t7e={kernelName:Ng,backendName:"webgl",kernelFunc:Nzt};re();var Mzt=vs+"return log(x + sqrt(x * x + 1.0));",Fzt=tr({opSnippet:Mzt}),r7e={kernelName:Mg,backendName:"webgl",kernelFunc:Fzt};re();var Ozt=vs+`
  return atan(x);
`,Rzt=tr({opSnippet:Ozt}),n7e={kernelName:Fg,backendName:"webgl",kernelFunc:Rzt};re();var Pzt=$D+`
  return atan(a, b);
`,Lzt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rf+`
  return result;
`,jzt=Pn({opSnippet:Pzt,packedOpSnippet:Lzt}),o7e={kernelName:Rg,backendName:"webgl",kernelFunc:jzt};re();var Bzt=vs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,$zt=tr({opSnippet:Bzt}),i7e={kernelName:Og,backendName:"webgl",kernelFunc:$zt};re();var Kh=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left;this.outputShape=r.outShape;let g=n==="avg",y=`((batch  * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + d`,b=`(xR * ${r.inWidth} + xC) * ${r.inChannels} + d`,x="0.0";if(g||(x="-1.0 / 1e-20"),o){let E=">=";this.userCode=`
        const ivec2 strides = ivec2(${l}, ${u});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?y:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let v="max",w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");let _=Math.floor(a/4)*4,S=a%4,C=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${_};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${w});
      }
    `}},Bw=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideDepth,u=r.strideHeight,c=r.strideWidth,f=r.dilationDepth,d=r.dilationHeight,p=r.dilationWidth,h=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,x=r.padInfo.left;this.outputShape=r.outShape;let v=n==="avg",w="0.0";if(v||(w="-1.0 / 1e-20"),o){let I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${l}, ${u}, ${c});
        const ivec3 pads = ivec3(${y}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${r.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${r.inDepth} + xD) * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`((xD * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let _="max",S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");let C=Math.floor(a/4)*4,E=a%4,T=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${l}, ${u}, ${c});
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${C};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${T}
            }
          }
        }
        setOutput(${S});
      }
    `}};function zzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;G0(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))return Ri({inputs:{x:i},backend:n});let d=new Kh(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}var s7e={kernelName:Nb,backendName:"webgl",kernelFunc:zzt};re();function Uzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,u,c),p=new Bw(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}var a7e={kernelName:Mb,backendName:"webgl",kernelFunc:Uzt};re();var kV=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=u-1-r.padInfo.top,d=c-1-r.padInfo.left,p=1/(n*o);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${l}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},IV=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,m=d-1-r.padInfo.front,g=p-1-r.padInfo.top,y=h-1-r.padInfo.left,b=1/(n*o*i);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function Vzt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),h=new IV(p);return n.runWebGLProgram(h,[i],a.dtype)}var l7e={kernelName:ES,backendName:"webgl",kernelFunc:Vzt};re();function Gzt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;G0([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=new kV(f);return n.runWebGLProgram(d,[i],a.dtype)}var u7e={kernelName:CS,backendName:"webgl",kernelFunc:Gzt};re();function Wzt(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;return vE({a:i,b:s,transposeA:a,transposeB:l,backend:n})}var c7e={kernelName:Fb,backendName:"webgl",kernelFunc:Wzt};re();re();var DV=class{constructor(r,n,o,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="0.0";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="1.0";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${l};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};re();var NV=class{constructor(r,n,o,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="vec4(0.0)";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        vec4 offset = ${l};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var qzt=({inputs:t,backend:r,attrs:n})=>{let{x:o,mean:i,variance:s,offset:a,scale:l}=t;Y.assert(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y.assert(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y.assert(l==null||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=[o,i,s],f=null;a!=null&&(f=a.shape,c.push(a));let d=null;l!=null&&(d=l.shape,c.push(l));let p=Me().getBool("WEBGL_PACK_NORMALIZATION")?new NV(o.shape,i.shape,s.shape,f,d,u):new DV(o.shape,i.shape,s.shape,f,d,u);return r.runWebGLProgram(p,c,c[0].dtype)},f7e={kernelName:Gb,backendName:"webgl",kernelFunc:qzt};re();re();var MV=class{constructor(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;let n=Ur(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let o=Hzt(this.rank),i,s=r.map((a,l)=>`sourceLoc.${Que[l]} = start[${l}] + coords.${Que[l]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${o}));
      }
    `}},Que=["x","y","z","w","u","v"];function Hzt(t){if(t===1)return"sourceLoc";if(t<=6)return Que.slice(0,t).map(r=>"sourceLoc."+r).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var FV=class{constructor(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=Ur(this.rank),o=Oi("coords",this.rank),i=Oi("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,l=`
      result.x = ${a};
      if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${o[this.rank-1]};
      if (++${o[this.rank-2]} < ${r[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${r.map((f,d)=>`start[${d}]`).join()});`:r.map((f,d)=>`${i[d]} = ${o[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${l}
        ${u}
        setOutput(result);
      }
    `}};function Yzt(t,r,n,o){let i=o.texData.get(t.dataId),s=o.makeTensorInfo(n,t.dtype),a=o.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let l=Rs.computeFlatOffset(r,Y.computeStrides(t.shape));i.slice&&(l+=i.slice.flatOffset),a.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||t.dataId};let u=o.dataRefCount.get(a.slice.origDataId)||1;return o.dataRefCount.set(a.slice.origDataId,u+1),s}function Zh(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o,[l,u]=Rs.parseSliceParams(i,s,a);if(Rs.assertParamsValid(i,l,u),Y.sizeFromShape(u)===0)return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){let d=n.texData.get(i.dataId),p=tUe(d.values,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,p)}let{isPacked:c}=n.texData.get(i.dataId),f=Rs.isSliceContinous(i.shape,l,u);if(c||!f){let d=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FV(u):new MV(u),p=[l];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),Yzt(i,l,u,n)}var d7e={kernelName:dx,backendName:"webgl",kernelFunc:Zh};var Xzt=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;Y.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((x,v)=>x*v),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),h=[],m=yt({inputs:{x:i},backend:n,attrs:{shape:u}}),g=Wo({inputs:{x:m},backend:n,attrs:{perm:c}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:f}}),b=Zh({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return h.push(m),h.push(g),h.push(y),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},p7e={kernelName:Ob,backendName:"webgl",kernelFunc:Xzt};re();function Kzt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=dV(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var h7e={kernelName:TS,backendName:"webgl",kernelFunc:Kzt};re();var Zzt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Qzt=`
  return float(int(a.r) & int(b.r));
`;function Jzt(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=Me().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([o,i])||a===1){let u=n.texData.get(o.dataId).values,c=n.texData.get(i.dataId).values,[f,d]=E8e(o.shape,i.shape,u,c,o.dtype),p=n.makeTensorInfo(d,o.dtype),h=n.texData.get(p.dataId);return h.values=f,p}let l;return s?l=new tf(Zzt,o.shape,i.shape,!1):l=new fc(Qzt,o.shape,i.shape),n.runWebGLProgram(l,[o,i],o.dtype)}var m7e={kernelName:R1,backendName:"webgl",kernelFunc:Jzt};re();function e8t(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.readSync(o.dataId),a=n.readSync(i.dataId),l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var g7e={kernelName:AS,backendName:"webgl",kernelFunc:e8t};re();re();re();var t8t="return float(a != b);",Jue=Pn({opSnippet:t8t,cpuKernelImpl:q8e,dtype:"bool"}),y7e={kernelName:V1,backendName:"webgl",kernelFunc:Jue};re();function Yx(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Ri({inputs:{x:i.complexTensorInfos.real},backend:n})}var b7e={kernelName:sC,backendName:"webgl",kernelFunc:Yx};var r8t="return float(int(x));";function x7e(t,r){let n=new Da(t.shape,r8t),o=r.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}function ece(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return Ri({inputs:{x:i},backend:n});let a=xo(i.shape),l=ece({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),u=dc({inputs:{real:l,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(l),u}if(i.dtype==="complex64"){let a=Yx({inputs:{input:i},backend:n}),l=ece({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),l}if(!Y.hasEncodingLoss(i.dtype,s)){let a=Ri({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){let a=n.texData.get(i.dataId).values,[l,u,c]=T8e(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}if(s==="int32")return x7e(i,n);if(s==="bool"){let a=n.makeTensorInfo([],"bool",Y.getTypedArrayFromDType("bool",1)),u=Jue({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}var v7e={kernelName:Th,backendName:"webgl",kernelFunc:ece};re();var w7e="return ceil(x);",n8t=tr({opSnippet:w7e,packedOpSnippet:w7e,cpuKernelImpl:A8e}),_7e={kernelName:Pg,backendName:"webgl",kernelFunc:n8t};re();var OV=class{constructor(r){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var RV=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function o8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{clipValueMin:s,clipValueMax:a}=o,l;Me().getBool("WEBGL_PACK_CLIP")?l=new RV(i.shape):l=new OV(i.shape);let u=[[s],[a]];return n.runWebGLProgram(l,[i],i.dtype,u)}var S7e={kernelName:Lg,backendName:"webgl",kernelFunc:o8t};re();var PV=class{constructor(r){this.variableNames=["real","imag"],this.outputShape=r,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function C7e(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}}function i8t(t){let{inputs:r,backend:n}=t,{x:o}=r,i=n.texData.get(o.dataId),s=new PV(o.shape),a=[C7e(o,i.complexTensorInfos.real),C7e(o,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}var E7e={kernelName:Rb,backendName:"webgl",kernelFunc:i8t};re();re();re();var LV=class{constructor(r){this.outputShape=[],this.outputShape=ce.computeOutShape(r,1),this.variableNames=r.map((a,l)=>`T${l}`);let n=new Array(r.length-1);n[0]=r[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+r[a][1];let o=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){let l=n[a-1];o.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${l}));`)}let i=n.length,s=n[n.length-1];o.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${o.join(`
        `)}
      }
    `}};re();var BV=class{constructor(r,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ce.computeOutShape(r,n);let o=this.outputShape,i=o.length,s=Ur(i),a=Oi("coords",i),l=["x","y","z","w","u","v"].slice(0,i);this.variableNames=r.map((g,y)=>`T${y}`);let u=new Array(r.length-1);u[0]=r[0][n];for(let g=1;g<u.length;g++)u[g]=u[g-1]+r[g][n];let c=l[n],f=l.slice(-2),d=l.join(),p=`if (${c} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${f.join()}));
        }`;for(let g=1;g<u.length;g++){let y=u[g-1];p+=`
        if (${c} < ${u[g]}  && ${c} >= ${u[g-1]}) {
          return getChannel(
            getT${g}(${jV(l,c,y)}),
            vec2(${jV(f,c,y)}));
        }`}let h=u.length,m=u[u.length-1];p+=`
        return getChannel(
          getT${h}(${jV(l,c,m)}),
          vec2(${jV(f,c,m)}));`,this.userCode=`
      float getValue(${l.map(g=>"int "+g)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${o[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${o[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${o[i-2]} &&
            ${a[i-1]} < ${o[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}};function jV(t,r,n){let o=t.indexOf(r);return t.map((s,a)=>a===o?`${s} - ${n}`:s).join()}re();function wE(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Ri({inputs:{x:i.complexTensorInfos.imag},backend:n})}var T7e={kernelName:qS,backendName:"webgl",kernelFunc:wE};function UD(t,r,n){let o=t[0].dtype;if(o==="complex64"){let h=t.map(x=>Yx({inputs:{input:x},backend:n})),m=t.map(x=>wE({inputs:{input:x},backend:n})),g=UD(h,r,n),y=UD(m,r,n),b=dc({inputs:{real:g,imag:y},backend:n});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}let i=n.shouldExecuteOnCPU(t);if(o==="string"&&(i=!0),i){let h=t.map(w=>{let S=[-1,Y.sizeFromShape(w.shape.slice(r))];return yt({inputs:{x:w},backend:n,attrs:{shape:S}})}),m=h.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),g=ce.computeOutShape(h.map(w=>w.shape),1),y=h[0].shape[0]===1,b=k8e(m,g,o,y),x=ce.computeOutShape(t.map(w=>w.shape),r),v=n.makeTensorInfo(x,o,b);return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}let s=t.filter(h=>Y.sizeFromShape(h.shape)>0),a=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){let h=a?new Da(t[0].shape,W0):new cc(t[0].shape,W0);return n.runWebGLProgram(h,t,o)}let l=Me().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>l){let h=[];for(let g=0;g<s.length;g+=l){let y=s.slice(g,g+l);h.push(UD(y,r,n))}let m=UD(h,r,n);for(let g of h)n.disposeIntermediateTensorInfo(g);return m}if(a){let h=new BV(s.map(m=>m.shape),r);return n.runWebGLProgram(h,s,o)}let{tensors2D:u,outShape:c}=s8t(s,r,n),f=new LV(u.map(h=>h.shape)),d=n.runWebGLProgram(f,u,o);u.forEach(h=>n.disposeIntermediateTensorInfo(h));let p=yt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function s8t(t,r,n){let o=ce.computeOutShape(t.map(s=>s.shape),r);return{tensors2D:t.map(s=>yt({inputs:{x:s},attrs:{shape:[-1,Y.sizeFromShape(s.shape.slice(r))]},backend:n})),outShape:o}}function tce(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=Y.parseAxisParam(i,r[0].shape)[0],a=r.map(c=>c.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(c=>c.shape),s);if(Y.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(c=>Y.sizeFromShape(c.shape)>0);return u.length===1?Ri({inputs:{x:u[0]},backend:n}):UD(u,s,n)}var A7e={kernelName:Pb,backendName:"webgl",kernelFunc:tce};re();var VD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=r.outShape;let a=r.padInfo.top,l=r.padInfo.left,u=r.strideHeight,c=r.strideWidth,f=r.dilationHeight,d=r.dilationWidth,p=r.filterHeight,h=r.filterWidth,m=Math.floor(r.inChannels/4)*4,g=r.inChannels%4,y=r.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,v=y?3:1,w="",_="";o&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:w=`
          float activation(float x) {
            ${o}
          }
        `,_="result = activation(result);");let S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${r.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${_}
        setOutput(result);
      }
    `}},$V=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let n=r.padInfo.front,o=r.padInfo.top,i=r.padInfo.left,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.filterDepth,p=r.filterHeight,h=r.filterWidth,m=Math.floor(r.inChannels/4)*4,g=r.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${l});
      const ivec3 pads = ivec3(${n}, ${o}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};re();var GD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=zn(this.outputShape.length);let a=r.padInfo.left,l=r.strideWidth,u=r.dilationWidth,c=r.filterHeight,f=r.filterWidth,d=f,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)p+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${r.inChannels}; d1 += 2) {
       `;for(let y=0;y<f;y++)p+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){let b=y*2;if(p+=`
           xC = xCCorner + ${b*u};
           `,l===1){if(b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<f)){let x=a%2===0?Y.nearestLargerEven(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<f&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<f&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${r.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<f&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${r.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",m="";o&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${o}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${o}
         }`:h=`vec4 activation(vec4 x) {
           ${o}
         }`,m="result = activation(result);");let g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}};re();var zV=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=r,this.enableShapeUniforms=zn(this.outputShape.length);let{dataFormat:o}=n,i=fi(),s=o==="channelsLast",a=s?1:2,l=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${r[2]} && pos < ${r[1]}) {`,c="";for(let f=0;f<=1;f++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${f};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${l}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}};function UV(t,r){let n=t.length;return n>=3?r?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!r&&n===1&&t[0]>1?[t[0],1]:null}function VV({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let u=t.shape,c=o.texData.get(t.dataId),f=n.inChannels,d=u[0]*u[1]*u[2],p=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,g=!1,y,b=[];if(s!=null){let w=UV(s.shape,h);w!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:w}}),b.push(s))}if(i!=null){let w=UV(i.shape,h);w!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:w}}),b.push(i))}if(!((d===1||p===1)&&f>Zue)&&c.isPacked&&h&&c.texture!=null&&u[2]%2!==0&&Y.arraysEqual(c.shape.slice(-3),u.slice(-3))){let w=u[0]*u[1]*(u[2]+1),_={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},S=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Y.assert(mE(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);let C=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(C);let E=vE({a:_,b:C,backend:o,transposeA:m,transposeB:g,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a}),T=o.texData.get(E.dataId);Y.assert(T.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=S,T.shape=n.outShape,y=Ri({inputs:{x:E},backend:o}),y.shape=n.outShape,b.push(E)}else{let w=n.outHeight*n.outWidth,_=yt({inputs:{x:t},backend:o,attrs:{shape:h?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),S=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=vE({a:h?_:S,b:h?S:_,transposeA:!h,transposeB:g,backend:o,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a});y=yt({inputs:{x:C},backend:o,attrs:{shape:n.outShape}}),b.push(_),b.push(S),b.push(C)}for(let w of b)o.disposeIntermediateTensorInfo(w);return y}function GV({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let{filterWidth:u,filterHeight:c,inChannels:f,outWidth:d,outHeight:p,dataFormat:h}=n,m=h==="channelsLast",g=u*c*f,y=p*d,b=[n.batchSize,g,y],x=!0,v=!1,w=[];if(s!=null){let G=UV(s.shape,m);G!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:G}}),w.push(s))}if(i!=null){let G=UV(i.shape,m);G!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:G}}),w.push(i))}let _=yt({inputs:{x:r},backend:o,attrs:{shape:[1,g,Y.sizeFromShape(r.shape)/g]}});w.push(_);let S=new zV(b,n),C=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=o.runWebGLProgram(S,[t],"float32",C),T=yt({inputs:{x:E},backend:o,attrs:{shape:b}});w.push(E),w.push(T);let I=i!=null,k=s!=null,F=l==="leakyrelu",D=l?Hx(l,!0):null,L=new zD(m?T.shape:_.shape,m?_.shape:T.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,v,I,D,k,F),P=m?[T,_]:[_,T];if(i&&P.push(i),k&&P.push(s),F){let G=o.makeTensorInfo([],"float32",Y.createScalarValue(a,"float32"));P.push(G),w.push(G)}let R=o.runWebGLProgram(L,P,"float32"),V=yt({inputs:{x:R},backend:o,attrs:{shape:n.outShape}});w.push(R);for(let G of w)o.disposeIntermediateTensorInfo(G);return V}function a8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=VV({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&Me().getBool("WEBGL_EXP_CONV")){let g=new GD(p),y=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(g,[i,s],"float32",y)}else if(Me().getBool("WEBGL_CONV_IM2COL"))h=GV({x:i,filter:s,convInfo:p,backend:n});else{let g=new VD(p);h=n.runWebGLProgram(g,[i,s],"float32")}let m=yt({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),m}var k7e={kernelName:Lb,backendName:"webgl",kernelFunc:a8t};re();var WV=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},qV=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dataFormat==="channelsLast",l=n-1-r.padInfo.top,u=o-1-r.padInfo.left,c=a?1:2,f=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            for (int d2 = 0; d2 < ${r.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},HV=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.padInfo.front,a=r.padInfo.top,l=r.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yF = 0; yF < ${r.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${r.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${r.outHeight}; yR++) {
              int xR = wR + yR * ${o} - ${a};

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${r.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${l};

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},YV=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=n-1-r.padInfo.front,c=o-1-r.padInfo.top,f=i-1-r.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${r.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${o}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${o} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${r.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function l8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),h=new WV(p);return n.runWebGLProgram(h,[i,s],"float32")}var I7e={kernelName:IS,backendName:"webgl",kernelFunc:l8t};re();var XV=class{constructor(r){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=r.inShape,this.enableShapeUniforms=zn(this.outputShape.length);let n=r.filterHeight,o=r.filterWidth,i=n-1-r.padInfo.top,s=o-1-r.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            int wCPerm = ${o} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${r.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${r.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function u8t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(c),p=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,d);if(Me().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],m=new XV(p);return n.runWebGLProgram(m,[i,s],"float32",h)}else{let h=new qV(p);return n.runWebGLProgram(h,[i,s],"float32")}}var D7e={kernelName:jb,backendName:"webgl",kernelFunc:u8t};re();function c8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),f=new $V(c);return n.runWebGLProgram(f,[i,s],"float32")}var N7e={kernelName:Bb,backendName:"webgl",kernelFunc:c8t};re();function f8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o,c=ce.computeConv3DInfo(i.shape,u,a,1,l),f=new HV(c);return n.runWebGLProgram(f,[i,s],"float32")}var M7e={kernelName:DS,backendName:"webgl",kernelFunc:f8t};re();function d8t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o,c=ce.computeConv3DInfo(u,s.shape,l,1,a),f=new YV(c);return n.runWebGLProgram(f,[i,s],"float32")}var F7e={kernelName:NS,backendName:"webgl",kernelFunc:d8t};re();var p8t=Ap+`
  return cos(x);
`,h8t=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${rf}
  return result;
`,m8t=tr({opSnippet:p8t,packedOpSnippet:h8t}),O7e={kernelName:jg,backendName:"webgl",kernelFunc:m8t};re();var g8t=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,y8t=tr({opSnippet:g8t}),R7e={kernelName:Bg,backendName:"webgl",kernelFunc:y8t};re();var KV=class{constructor(r,n,o,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,l,u,c]=r,[f]=n,[d,p]=o;this.outputShape=[f,d,p,c];let h=i==="bilinear"?1:0,[m,g]=[`${l-1}.0`,`${u-1}.0`],[y,b,x]=d>1?[`${(l-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[v,w,_]=p>1?[`${(u-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${w};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var b8t=t=>{let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,f=new KV(i.shape,s.shape,l,u,c);return n.runWebGLProgram(f,[i,s,a],"float32")},P7e={kernelName:FS,backendName:"webgl",kernelFunc:b8t};re();var WD=function(t){return t.Prod="*",t.Sum="+",t}(WD||{}),RP=class{constructor(r,n,o,i){this.op=r,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let s=this.outputShape.length,a=this.op===WD.Prod?"1.0":"0.0",l=o?a:`getX(${L7e(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1],c="",f="";o?(c=i?`end != ${u-1}`:"end != 0",f=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${u}`:"end >= pow2",f=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Ur(s)} coords = getOutputCoords();
        int end = ${j7e(s,"coords",this.op)};
        float val = ${l};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${j7e(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${L7e(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function L7e(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.x, ${r}.y`;if(t===3)return`${r}.x, ${r}.y, ${r}.z`;if(t===4)return`${r}.x, ${r}.y, ${r}.z, ${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function j7e(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.y`;if(t===3)return`${r}.z`;if(t===4)return`${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}re();function ZV(t,r,n,o,i,s){let a=r.shape.length,l=ce.getAxesPermutation([o],a),u=r;l!=null&&(u=Wo({inputs:{x:r},backend:n,attrs:{perm:l}}));let c=ce.getInnerMostAxes(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${r.shape.length-1} but got axis=${o}`);let f=u.shape[c],d=Ri({inputs:{x:u},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){let h=new RP(t,u.shape,!1,s),m=[[p]],g=d;d=n.runWebGLProgram(h,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(i){let p=new RP(t,u.shape,i,s),h=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(l!=null){let p=ce.getUndoAxesPermutation(l),h=Wo({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),h}return d}function x8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return ZV(WD.Prod,i,n,s,a,l)}var B7e={kernelName:MS,backendName:"webgl",kernelFunc:x8t};re();function v8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return ZV(WD.Sum,i,n,s,a,l)}var $7e={kernelName:$b,backendName:"webgl",kernelFunc:v8t};re();function w8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=dV(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=C8e(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var z7e={kernelName:OS,backendName:"webgl",kernelFunc:w8t};re();var QV=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=[],this.outputShape=r,this.blockSize=n,this.dataFormat=o,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function _8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o,l=i.shape[0],u=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],f=a==="NHWC"?i.shape[3]:i.shape[1],d=u*s,p=c*s,h=f/(s*s),m=a==="NHWC"?[l,d,p,h]:[l,h,d,p],g=new QV(m,s,a);return n.runWebGLProgram(g,[i],i.dtype)}var U7e={kernelName:RS,backendName:"webgl",kernelFunc:_8t};re();var qD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=zn(this.outputShape.length);let a=r.filterHeight,l=r.filterWidth,u=r.outChannels/r.inChannels,c="",f="";o&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:c=`
          float activation(float x) {
            ${o}
          }
        `,f="result = activation(result);");let d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${l}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${f}
        setOutput(result);
      }
    `}};re();var HD=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=zn(this.outputShape.length);let a=r.outChannels/r.inChannels,l=r.padInfo.left,u=r.strideWidth,c=r.dilationWidth,f=r.filterHeight,d=r.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)h+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;h+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let b=0;b<d;b++)h+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){let x=b*2;if(h+=`
          xC = xCCorner + ${x*c};
          `,u===1){if(x<d&&(l%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?h+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){let v=l%2===0?Y.nearestLargerEven(c):c;c%2===0&&l%2===1||c%2!==0&&l%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:h+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):v===1?h+=`
                    xC${x+1} = xTexelC${x};
                    `:h+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(l%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(h+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(h+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(h+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",g="";o&&(i?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:m=`vec4 activation(vec4 x) {
          ${o}
        }`,g="result = activation(result);");let y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}};function S8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o,f=u;f==null&&(f=[1,1]),Y.assert(ce.eitherStridesOrDilationsAreOne(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);let d=ce.computeConv2DInfo(i.shape,s.shape,a,f,l,c,!0),p;Me().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new HD(d):p=new qD(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",h)}var V7e={kernelName:zb,backendName:"webgl",kernelFunc:S8t};re();var JV=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.outChannels/r.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},eG=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=n-1-r.padInfo.top,l=o-1-r.padInfo.left,u=r.outChannels/r.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function C8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o,d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),p=new JV(d);return n.runWebGLProgram(p,[i,s],"float32")}var G7e={kernelName:PS,backendName:"webgl",kernelFunc:C8t};re();function E8t(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o,d=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),p=new eG(d);return n.runWebGLProgram(p,[i,s],"float32")}var W7e={kernelName:LS,backendName:"webgl",kernelFunc:E8t};re();var tG=class{constructor(r){this.variableNames=["X"],this.outputShape=[r,r],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function T8t(t){let{inputs:r,backend:n}=t,{x:o}=r,i=[...o.shape,...o.shape],s=Y.sizeFromShape(o.shape),a=yt({inputs:{x:o},backend:n,attrs:{shape:[s]}}),l=new tG(s),u=n.runWebGLProgram(l,[a],a.dtype),c=yt({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),c}var q7e={kernelName:jS,backendName:"webgl",kernelFunc:T8t};re();var rG=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let{inHeight:n,inWidth:o,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:l,filterWidth:u,dilationHeight:c,dilationWidth:f}=r,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${l}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${o}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function A8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeDilation2DInfo(i.shape,s.shape,a,l,"NHWC",u),f,d=new rG(c);f=n.runWebGLProgram(d,[i,s],"float32");let p=yt({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}var H7e={kernelName:Ub,backendName:"webgl",kernelFunc:A8t};re();function k8t(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,h=a.length,m=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(h,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=Wo({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);Y.arraysEqual(v.shape,w)||(v=yt({inputs:{x:v},backend:n,attrs:{shape:w}}),m.push(v)),p===null?p=v:(p=FP({inputs:{a:v,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=xE({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var Y7e={kernelName:BS,backendName:"webgl",kernelFunc:k8t};re();var I8t="return (x >= 0.0) ? x : (exp(x) - 1.0);",D8t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,N8t=tr({opSnippet:I8t,packedOpSnippet:D8t}),X7e={kernelName:zg,backendName:"webgl",kernelFunc:N8t};re();var M8t="return (b >= 0.0) ? a : a * (b + 1.0);",F8t=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,O8t=t=>{let{inputs:r,backend:n}=t,{dy:o,y:i}=r,s=Me().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new tf(F8t,o.shape,i.shape):new fc(M8t,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],o.dtype)},K7e={kernelName:$S,backendName:"webgl",kernelFunc:O8t};re();var R8t=`
  return vec4(equal(a, b));
`,P8t="return float(a == b);",L8t=Pn({opSnippet:P8t,packedOpSnippet:R8t,dtype:"bool",cpuKernelImpl:I8e}),Z7e={kernelName:P1,backendName:"webgl",kernelFunc:L8t};re();var j8t=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ce.ERF_P};
  float a1 = ${ce.ERF_A1};
  float a2 = ${ce.ERF_A2};
  float a3 = ${ce.ERF_A3};
  float a4 = ${ce.ERF_A4};
  float a5 = ${ce.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,B8t=tr({opSnippet:j8t}),Q7e={kernelName:Ug,backendName:"webgl",kernelFunc:B8t};re();var $8t=Ap+`
  return exp(x);
`,z8t=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,rce=tr({opSnippet:$8t,packedOpSnippet:z8t,cpuKernelImpl:D8e,dtype:"float32"}),J7e={kernelName:Vg,backendName:"webgl",kernelFunc:rce};re();function nG(t){let{inputs:r,attrs:n,backend:o}=t,{dim:i}=n,{input:s}=r,a=s.shape.length,l=s.shape.slice(),u=i;return i<0&&(Y.assert(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+i+1),l.splice(u,0,1),yt({inputs:{x:s},backend:o,attrs:{shape:l}})}var e9e={kernelName:Vb,backendName:"webgl",kernelFunc:nG};re();var t9e="return exp(x) - 1.0;",U8t=tr({opSnippet:t9e,packedOpSnippet:t9e,cpuKernelImpl:N8e}),r9e={kernelName:Gg,backendName:"webgl",kernelFunc:U8t};re();re();var PP=class{constructor(r,n,o){this.variableNames=["real","imag"];let i=n[1];this.outputShape=n;let s=o?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=o?`${i}.0`:"1.0",l;if(r==="real")l="return real * expR - imag * expI;";else if(r==="imag")l="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${r}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${l}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function oG(t,r,n){let o=n.texData.get(t.dataId),i=Y.sizeFromShape(t.shape),s=t.shape[t.shape.length-1],a=i/s,l=yt({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),u=l.shape,c=new PP("real",u,r),f=new PP("imag",u,r),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:u},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:u}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(f,d,"float32"),m=dc({inputs:{real:p,imag:h},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h);let g=yt({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),g}function V8t(t){let{inputs:r,backend:n}=t,{input:o}=r;return oG(o,!1,n)}var n9e={kernelName:zS,backendName:"webgl",kernelFunc:V8t};re();var iG=class{constructor(r,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=r,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Xx(t){let{backend:r,attrs:n}=t,{shape:o,value:i}=n,{dtype:s}=n;if(s=s||Y.inferDtype(i),s==="string"){let a=Y.getArrayFromDType(s,Y.sizeFromShape(o));return a.fill(i),r.makeTensorInfo(o,s,a)}else{let a=new iG(o,i),l=[[i]];return r.runWebGLProgram(a,[],s,l)}}var o9e={kernelName:US,backendName:"webgl",kernelFunc:Xx};re();var sG=class{constructor(r){this.variableNames=["Image"],this.outputShape=[];let n=r[2];this.outputShape=r,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var i9e={kernelName:VS,backendName:"webgl",kernelFunc:({inputs:t,backend:r})=>{let{image:n}=t,o=r,i=new sG(n.shape);return o.runWebGLProgram(i,[n],n.dtype)}};re();var s9e="return floor(x);",G8t=tr({opSnippet:s9e,packedOpSnippet:s9e,cpuKernelImpl:M8e}),a9e={kernelName:Wg,backendName:"webgl",kernelFunc:G8t};re();var W8t=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,q8t=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,H8t=Pn({opSnippet:W8t,packedOpSnippet:q8t,dtype:"int32"}),l9e={kernelName:qg,backendName:"webgl",kernelFunc:H8t};re();re();var aG=class{constructor(r){this.variableNames=["A"];let n=fi(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${o}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var lG=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=fi(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${o}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}};var u9e={kernelName:lI,backendName:"webgl",kernelFunc:Y8t},YD,nce=Me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Y8t(t){let{inputs:r,backend:n,attrs:o}=t,{pixels:i}=r,{numChannels:s}=o,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,u],d=[c,u,s];if(l||a){let g=Me().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(YD==null||g!==nce)&&(nce=g,YD=document.createElement("canvas").getContext("2d",{willReadFrequently:nce})),YD.canvas.width=u,YD.canvas.height=c,YD.drawImage(i,0,0,u,c),i=YD.canvas}let p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Ol.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);let h=Me().getBool("WEBGL_PACK")?new lG(d):new aG(d),m=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),m}re();function X8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=ce.convertConv2DDataFormat(f),y=ce.computeConv2DInfo(i.shape,s.shape,u,d,c,p,!1,g),b,x=[],v=a!=null,w=l!=null,_=h==="leakyrelu",S=()=>{let E=[i,s],T=(I,k)=>{if(k==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){let F=yt({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return x.push(F),F}return I};if(v&&E.push(T(a,f)),w&&E.push(T(l,f)),_){let I=n.makeTensorInfo([],"float32",Y.createScalarValue(m,"float32"));E.push(I),x.push(I)}return E};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=VV({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:h,preluActivationWeights:l,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&Me().getBool("WEBGL_EXP_CONV")){let E=h?Hx(h,!0):null,T=new GD(y,v,E,w,_),I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],k=S();b=n.runWebGLProgram(T,k,"float32",I)}else if(Me().getBool("WEBGL_CONV_IM2COL"))b=GV({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:h,preluActivationWeights:l,leakyreluAlpha:m});else{let E=h?Hx(h,!1):null,T=new VD(y,v,E,w,_),I=S();b=n.runWebGLProgram(T,I,"float32")}let C=yt({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return x.push(b),x.forEach(E=>n.disposeIntermediateTensorInfo(E)),C}var c9e={kernelName:q1,backendName:"webgl",kernelFunc:X8t};re();function K8t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dilations:f,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=o,m=[],g=f;g==null&&(g=[1,1]),Y.assert(ce.eitherStridesOrDilationsAreOne(u,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`);let y=ce.computeConv2DInfo(i.shape,s.shape,u,g,c,d,!0),b=Me().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=p?Hx(p,b):null,v=[i,s],w=a!=null,_=l!=null,S=p==="leakyrelu";if(w&&v.push(a),_&&v.push(l),S){let I=n.makeTensorInfo([],"float32",Y.createScalarValue(h,"float32"));v.push(I),m.push(I)}let C;b?C=new HD(y,w,x,_,S):C=new qD(y,w,x,_,S);let E=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],T=n.runWebGLProgram(C,v,"float32",E);return m.forEach(I=>n.disposeIntermediateTensorInfo(I)),T}var f9e={kernelName:H1,backendName:"webgl",kernelFunc:K8t};re();var uG=class{constructor(r,n,o,i){this.sliceDim=r,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=o;let s=Ur(o.length),a=`
    int index;`;for(let l=0;l<this.sliceDim;l++)a+=`
          index = round(getIndices(coords[0], ${l}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[l]};
          flattenIndex += index * ${this.strides[l]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function Z8t(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=i.shape,a=s[s.length-1],l=Y.sizeFromShape(o.shape),[u,c,f,d]=ce.prepareAndValidate(o,i),p=yt({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),h=yt({inputs:{x:o},backend:n,attrs:{shape:[Y.sizeFromShape(o.shape)/f,f]}});if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let b=n.readSync(i.dataId),x=n.bufferSync(o),v=F8e(b,x,o.dtype,c,a,f,d,o.shape,l);return n.makeTensorInfo(u,o.dtype,v.values)}let m=new uG(a,d,[c,f],o.shape),g=n.runWebGLProgram(m,[h,p],h.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}var d9e={kernelName:GS,backendName:"webgl",kernelFunc:Z8t};re();var cG=class{constructor(r,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let o=Ur(this.rank),i=Q8t(r,2);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${r[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}};function Q8t(t,r){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let i=0;i<t.length;i++)i===2?o.push("index"):o.push(`${n[i]}`);return o.join()}function oce(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o,u=Y.parseAxisParam(a,i.shape)[0];if(Me().get("DEBUG")){let x=n.readSync(s.dataId),v=i.shape[u];for(let w=0;w<x.length;++w){let _=x[w];Y.assert(_<=v-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${v-1}]`)}}let c=ce.segment_util.collectGatherOpShapeInfo(i,s,u,l),f=Y.sizeFromShape(s.shape),d=[],p=yt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=yt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});d.push(p),d.push(h);let m=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){let x=n.bufferSync(h),v=n.bufferSync(p),w=O8e(v,x,m);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}let g=new cG(p.shape,m),y=n.runWebGLProgram(g,[p,h],p.dtype);d.push(y);let b=yt({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}var p9e={kernelName:Wb,backendName:"webgl",kernelFunc:oce};re();var J8t="return float(a > b);",eUt=`
  return vec4(greaterThan(a, b));
`,tUt=Pn({opSnippet:J8t,packedOpSnippet:eUt,cpuKernelImpl:R8e,dtype:"bool"}),h9e={kernelName:L1,backendName:"webgl",kernelFunc:tUt};re();var rUt="return float(a >= b);",nUt=`
  return vec4(greaterThanEqual(a, b));
`,oUt=Pn({opSnippet:rUt,packedOpSnippet:nUt,dtype:"bool",cpuKernelImpl:P8e}),m9e={kernelName:Hg,backendName:"webgl",kernelFunc:oUt};re();function iUt(t){let{inputs:r,backend:n}=t,{input:o}=r;return oG(o,!0,n)}var g9e={kernelName:WS,backendName:"webgl",kernelFunc:iUt};re();var sUt="return float(!isnan(x) && !isinf(x));",aUt=tr({opSnippet:sUt,dtype:"bool"}),y9e={kernelName:Yg,backendName:"webgl",kernelFunc:aUt};re();var lUt="return float(isinf(x));",uUt=tr({opSnippet:lUt,dtype:"bool"}),b9e={kernelName:Xg,backendName:"webgl",kernelFunc:uUt};re();var cUt="return float(isnan(x));",fUt=tr({opSnippet:cUt,dtype:"bool"}),x9e={kernelName:Kg,backendName:"webgl",kernelFunc:fUt};re();var dUt="return float(a < b);",pUt=`
  return vec4(lessThan(a, b));
`,hUt=Pn({opSnippet:dUt,packedOpSnippet:pUt,cpuKernelImpl:L8e,dtype:"bool"}),v9e={kernelName:j1,backendName:"webgl",kernelFunc:hUt};re();var mUt="return float(a <= b);",gUt=`
  return vec4(lessThanEqual(a, b));
`,yUt=Pn({opSnippet:mUt,packedOpSnippet:gUt,cpuKernelImpl:j8e,dtype:"bool"}),w9e={kernelName:B1,backendName:"webgl",kernelFunc:yUt};re();function bUt(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=B8e(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var _9e={kernelName:HS,backendName:"webgl",kernelFunc:bUt};re();var xUt=Ap+`
  return x < 0.0 ? 0./0. : log(x);
`,vUt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,wUt=tr({opSnippet:xUt,packedOpSnippet:vUt,cpuKernelImpl:$8e}),S9e={kernelName:Zg,backendName:"webgl",kernelFunc:wUt};re();var _Ut=Ap+`
  return log(1.0 + x);
`,SUt=tr({opSnippet:_Ut}),C9e={kernelName:Qg,backendName:"webgl",kernelFunc:SUt};re();var CUt="return float(a >= 1.0 && b >= 1.0);",EUt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,TUt=Pn({opSnippet:CUt,packedOpSnippet:EUt,dtype:"bool"}),E9e={kernelName:$1,backendName:"webgl",kernelFunc:TUt};re();var AUt="return float(!(x >= 1.0));",kUt=tr({opSnippet:AUt}),T9e={kernelName:z1,backendName:"webgl",kernelFunc:kUt};re();var IUt="return float(a >= 1.0 || b >= 1.0);",DUt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,NUt=Pn({opSnippet:IUt,packedOpSnippet:DUt,dtype:"bool"}),A9e={kernelName:U1,backendName:"webgl",kernelFunc:NUt};re();var fG=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[];let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${l}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}};var dG=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${l}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}};var MUt=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o,c=Me().getBool("WEBGL_PACK_NORMALIZATION")?new dG(i.shape,s,a,l,u):new fG(i.shape,s,a,l,u);return n.runWebGLProgram(c,[i],i.dtype)},k9e={kernelName:Hb,backendName:"webgl",kernelFunc:MUt};re();var pG=class{constructor(r,n,o,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=r,this.depth=r[3],this.depthRadius=n,this.bias=o,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${o});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var FUt=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o,d=new pG(i.shape,l,u,c,f);return n.runWebGLProgram(d,[i,s,a],i.dtype)},I9e={kernelName:YS,backendName:"webgl",kernelFunc:FUt};re();re();re();function D9e(t,r,n,o){let i=Y.sizeFromShape(r),a=Y.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=nf(l,t.dtype,"max",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}function ice(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=n.shouldExecuteOnCPU([i]),h=i;if(d){if(p){let v=n.texData.get(h.dataId).values,w=new Array(l);for(let C=0;C<w.length;C++)w[C]=i.shape[f[C]];let _=bE(v,i.shape,i.dtype,f,w);h=n.makeTensorInfo(w,i.dtype);let S=n.texData.get(h.dataId);S.values=_}else h=jw(i,f,n);c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("max",c,l);let[m,g]=ce.computeOutAndReduceShapes(h.shape,c),y=m;a&&(y=ce.expandShapeToKeepDim(m,u));let b;if(p){let v=n.texData.get(h.dataId).values,w=z8e(v,Y.sizeFromShape(g),y,i.dtype);b=n.makeTensorInfo(y,i.dtype);let _=n.texData.get(b.dataId);_.values=w}else b=D9e(h,g,y,n);return d&&n.disposeIntermediateTensorInfo(h),b}var N9e={kernelName:Yb,backendName:"webgl",kernelFunc:ice};re();var OUt=$D+`
  return max(a, b);
`,RUt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rf+`
  return result;
`,PUt=Pn({opSnippet:OUt,packedOpSnippet:RUt,cpuKernelImpl:U8e}),M9e={kernelName:Jg,backendName:"webgl",kernelFunc:PUt};re();function LUt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;G0(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;Y.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&Y.arraysEqual(f.inShape,f.outShape))return Ri({inputs:{x:i},backend:n});let d=new Kh(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}var F9e={kernelName:Xb,backendName:"webgl",kernelFunc:LUt};re();function jUt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,c,u),p=new Bw(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}var O9e={kernelName:Kb,backendName:"webgl",kernelFunc:jUt};re();var hG=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideHeight,o=r.strideWidth,i=r.dilationHeight,s=r.effectiveFilterHeight,a=r.effectiveFilterWidth,l=s-1-r.padInfo.top,u=a-1-r.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},mG=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.dilationDepth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterDepth,c=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=u-1-r.padInfo.front,p=c-1-r.padInfo.top,h=f-1-r.padInfo.left,m=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function BUt(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),h=new Bw(p,"max",!0),m=n.runWebGLProgram(h,[a],a.dtype),g=new mG(p),y=n.runWebGLProgram(g,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}var R9e={kernelName:KS,backendName:"webgl",kernelFunc:BUt};re();function $Ut(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;G0([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),h=!0,m=new Kh(p,"max",h),g=n.runWebGLProgram(m,[l],l.dtype),y=new hG(p),b=n.runWebGLProgram(y,[i,g],l.dtype);return n.disposeIntermediateTensorInfo(g),b}var P9e={kernelName:XS,backendName:"webgl",kernelFunc:$Ut};re();re();function L9e(t,r,n,o){let i=new Kh(n,"max",!1),s=o.runWebGLProgram(i,[t],"float32");i=new Kh(n,"max",!0,!0,r);let a=o.runWebGLProgram(i,[t],"float32");return[s,a]}var j9e={kernelName:ZS,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;Y.assert(o.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.shape.length}.`);let c=[1,1];Y.assert(ce.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let f=ce.computePool2DInfo(o.shape,i,s,c,a),[d,p]=L9e(o,l,f,u);return[d,p]}};re();re();function B9e(t,r,n,o){let i=Y.sizeFromShape(r),a=Y.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=nf(l,"float32","mean",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}var $9e={kernelName:Zb,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{keepDims:i,axis:s}=r,a=n,l=o.shape.length,u=Y.parseAxisParam(s,o.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=a.shouldExecuteOnCPU([o]),h=[],m=o;if(d){if(p){let w=a.texData.get(m.dataId).values,_=new Array(l);for(let E=0;E<_.length;E++)_[E]=o.shape[f[E]];let S=bE(w,o.shape,o.dtype,f,_);m=a.makeTensorInfo(_,o.dtype);let C=a.texData.get(m.dataId);C.values=S}else m=jw(o,f,a);h.push(m),c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("sum",c,l);let[g,y]=ce.computeOutAndReduceShapes(m.shape,c),b=g;i&&(b=ce.expandShapeToKeepDim(g,u));let x=B9e(m,y,b,a);for(let v of h)a.disposeIntermediateTensorInfo(v);return x}};re();function zUt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=Y.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Wo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=Y.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=nf(g,g.dtype,"min",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var z9e={kernelName:Qb,backendName:"webgl",kernelFunc:zUt};re();var UUt=$D+`
  return min(a, b);
`,VUt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rf+`
  return result;
`,GUt=Pn({opSnippet:UUt,packedOpSnippet:VUt,cpuKernelImpl:V8e}),U9e={kernelName:e0,backendName:"webgl",kernelFunc:GUt};re();var gG=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=n.map((f,d)=>f[0]+r[d]+f[1]);let i=r.length,s=Ur(i),a=n.map(f=>f[0]).join(","),l=n.map((f,d)=>f[0]+r[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=o==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}};var yG=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+r[g]+m[1]);let i=r.length,s=Ur(i),a=n.map(m=>m[0]).join(","),l=n.map((m,g)=>m[0]+r[g]).join(","),u=Oi("rc",i),c=Oi("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=o==="reflect"?0:1,h="";if(i===1){let m=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let m=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${u[i-1]} += 1;
          if(${f}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var WUt=({inputs:t,backend:r,attrs:n})=>{let{x:o}=t,{paddings:i,mode:s}=n,a=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yG(o.shape,i,s):new gG(o.shape,i,s);return r.runWebGLProgram(a,[o],o.dtype)},V9e={kernelName:Jb,backendName:"webgl",kernelFunc:WUt};re();var qUt=`if (b == 0.0) return NAN;
  return mod(a, b);`,HUt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+rf+`
  return result;
`,YUt=Pn({opSnippet:qUt,packedOpSnippet:HUt}),G9e={kernelName:t0,backendName:"webgl",kernelFunc:YUt};re();var bG=class{constructor(r,n,o){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[r,o],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};re();re();var XUt=`
if (a == b) {
  return 1.0;
};
return a / b;`,KUt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,sce=Pn({opSnippet:XUt,packedOpSnippet:KUt,checkOutOfBounds:!0}),W9e={kernelName:$g,backendName:"webgl",kernelFunc:sce};re();var q9e="return a - b;",ace=Pn({opSnippet:q9e,packedOpSnippet:q9e,supportsComplex:!0,cpuKernelImpl:cUe}),H9e={kernelName:y0,backendName:"webgl",kernelFunc:ace};function lce(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=Y.parseAxisParam([s],i.shape),l=ice({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),u=ce.expandShapeToKeepDim(l.shape,a),c=yt({inputs:{x:l},backend:n,attrs:{shape:u}}),f=ace({inputs:{a:i,b:c},backend:n}),d=rce({inputs:{x:f},backend:n}),p=xE({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),h=yt({inputs:{x:p},backend:n,attrs:{shape:u}}),m=sce({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}var Y9e={kernelName:gx,backendName:"webgl",kernelFunc:lce};function ZUt(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o,u=l?i:lce({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=u.shape[0],f=u.shape[1],d=new bG(c,f,s),p=[[a]],h=n.runWebGLProgram(d,[u],"int32",p);return l||n.disposeIntermediateTensorInfo(u),h}var X9e={kernelName:QS,backendName:"webgl",kernelFunc:ZUt};re();var QUt=vs+`
  return -x;
`,JUt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function e7t(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])){let s=n.texData.get(o.dataId),[a,l]=W8e(s.values,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,a)}let i;return Me().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new cc(o.shape,JUt):i=new Da(o.shape,QUt),n.runWebGLProgram(i,[o],o.dtype)}var K9e={kernelName:ex,backendName:"webgl",kernelFunc:e7t};re();var t7t=ka.nonMaxSuppressionV3Impl;function r7t(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d}=t7t(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Z9e={kernelName:JS,backendName:"webgl",kernelFunc:r7t};re();var n7t=ka.nonMaxSuppressionV4Impl;function o7t(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:h}=n7t(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var Q9e={kernelName:eC,backendName:"webgl",kernelFunc:o7t};re();var i7t=ka.nonMaxSuppressionV5Impl;function s7t(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),p=a,h=l,m=u,g=c,{selectedIndices:y,selectedScores:b}=i7t(f,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var J9e={kernelName:tC,backendName:"webgl",kernelFunc:s7t};re();var xG=class{constructor(r,n,o,i){this.variableNames=["indices"],this.outputShape=[r,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${o}),
                      float(index == coords.y)));
      }
    `}};var a7t=t=>{let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o,c=Y.sizeFromShape(i.shape),f=new xG(c,a,l,u),d=yt({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[d],s);n.disposeIntermediateTensorInfo(d);let h=[...i.shape,a],m=yt({inputs:{x:p},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),m},eVe={kernelName:rx,backendName:"webgl",kernelFunc:a7t};re();re();function LP(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="complex64"){let i=Yx({inputs:{input:o},backend:n}),s=LP({inputs:{x:i},backend:n}),a=wE({inputs:{input:o},backend:n}),l=LP({inputs:{x:a},backend:n}),u=dc({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return Xx({attrs:{shape:o.shape,dtype:o.dtype,value:o.dtype==="string"?"":0},backend:n})}var tVe={kernelName:xx,backendName:"webgl",kernelFunc:LP};function rVe(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(o.dtype==="complex64"){let i=Yx({inputs:{input:o},backend:n}),s=rVe({inputs:{x:i},backend:n}),a=wE({inputs:{input:o},backend:n}),l=LP({inputs:{x:a},backend:n}),u=dc({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return Xx({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:n})}var nVe={kernelName:tx,backendName:"webgl",kernelFunc:rVe};re();function l7t(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return nG({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{Y.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),Y.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=nG({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=tce({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var oVe={kernelName:nx,backendName:"webgl",kernelFunc:l7t};re();var vG=class{constructor(r,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+r[f]+c[1]);let i=r.length,s=Ur(i),a=n.map(c=>c[0]).join(","),l=n.map((c,f)=>c[0]+r[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}};var wG=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+r[y]+g[1]);let i=r.length,s=Ur(i),a=n.map(g=>g[0]).join(","),l=n.map((g,y)=>g[0]+r[y]).join(","),u=Oi("rc",i),c=Oi("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${f}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${f}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="";for(let g=0,y=i===1?2:4;g<y;g++)m+=`
        ${p[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var uce=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;if(Y.sizeFromShape(i.shape)===0){let c=s.map((f,d)=>f[0]+i.shape[d]+f[1]);return Xx({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}let l=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wG(i.shape,s,a):new vG(i.shape,s,a),u=[[a]];return n.runWebGLProgram(l,[i],i.dtype,u)},iVe={kernelName:ox,backendName:"webgl",kernelFunc:uce};re();var u7t=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,c7t=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+rf+`
  return result;
`,f7t=Pn({opSnippet:u7t,packedOpSnippet:c7t}),sVe={kernelName:n0,backendName:"webgl",kernelFunc:f7t};re();function d7t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=[],c=Y.parseAxisParam(s,i.shape),f=c,d=ce.getAxesPermutation(f,l),p=i;d!=null&&(p=Wo({inputs:{x:i},backend:n,attrs:{perm:d}}),f=ce.getInnerMostAxes(f.length,l),u.push(p)),ce.assertAxesAreInnerMostDims("prod",f,l);let h;if(n.shouldExecuteOnCPU([p])){let m=n.texData.get(p.dataId).values,{outVals:g,outShape:y,outDtype:b}=H8e(p.shape,p.dtype,m,f);h=n.makeTensorInfo(y,b,g)}else{let[m,g]=ce.computeOutAndReduceShapes(p.shape,f),y=Y.sizeFromShape(g),b=yt({inputs:{x:p},backend:n,attrs:{shape:[-1,y]}}),x=K1(i.dtype),v=nf(b,x,"prod",n);h=yt({inputs:{x:v},backend:n,attrs:{shape:m}}),u.push(b),u.push(v)}if(a){u.push(h);let m=ce.expandShapeToKeepDim(h.shape,c);h=yt({inputs:{x:h},backend:n,attrs:{shape:m}})}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var aVe={kernelName:sx,backendName:"webgl",kernelFunc:d7t};re();function p7t(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.readSync(b.dataId)),c=i.map(b=>b.shape),f=n.readSync(s.dataId),d=n.readSync(a.dataId),[p,h,m]=Y8e(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return g.concat([y])}var lVe={kernelName:rC,backendName:"webgl",kernelFunc:p7t};re();function h7t(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=X8e(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var uVe={kernelName:nC,backendName:"webgl",kernelFunc:h7t};re();function m7t(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=n.readSync(a.dataId),p=l.map(y=>n.readSync(y.dataId)),h=l.map(y=>y.shape),[m,g]=K8e(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,h,u);return n.makeTensorInfo(m,s.dtype,g)}var cVe={kernelName:oC,backendName:"webgl",kernelFunc:m7t};re();var cce=t=>{let{backend:r,attrs:n}=t,{start:o,stop:i,step:s,dtype:a}=n,l=Z8e(o,i,s,a);return r.makeTensorInfo([l.length],a,l)},fVe={kernelName:iC,backendName:"webgl",kernelFunc:cce};re();var g7t="return 1.0 / x;",y7t=tr({opSnippet:g7t}),dVe={kernelName:o0,backendName:"webgl",kernelFunc:y7t};re();var b7t=vs+`
  return (x < 0.0) ? 0.0 : x;
`,x7t=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,v7t=tr({opSnippet:b7t,packedOpSnippet:x7t}),pVe={kernelName:i0,backendName:"webgl",kernelFunc:v7t};re();var w7t=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,_7t=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,S7t=tr({opSnippet:w7t,packedOpSnippet:_7t}),hVe={kernelName:s0,backendName:"webgl",kernelFunc:S7t};re();var _G=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var SG=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function C7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new SG(i.shape,u,c,s,a):new _G(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],"float32")}var mVe={kernelName:ux,backendName:"webgl",kernelFunc:C7t};re();var CG=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function E7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new CG(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var gVe={kernelName:lC,backendName:"webgl",kernelFunc:E7t};re();var EG=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var TG=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function T7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Me().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new TG(i.shape,u,c,s,a):new EG(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],i.dtype)}var yVe={kernelName:lx,backendName:"webgl",kernelFunc:T7t};re();var AG=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${o} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${o} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function A7t(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new AG(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var bVe={kernelName:aC,backendName:"webgl",kernelFunc:A7t};re();var kG=class{constructor(r,n){this.variableNames=["x"];let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);if(this.outputShape=r,o===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${r[0]} - coord - 1));
        }
      `;return}let i=l=>n.indexOf(l)!==-1&&r[l]!==1?`${r[l]} - coords[${l}] - 1`:`coords[${l}]`,s=r.map((l,u)=>i(u)).join(","),a=Ur(o);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};var IG=class{constructor(r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);this.outputShape=r;let i=Oi("rc",o),s=`${i[o-1]} + 1 < ${this.outputShape[o-1]}`,a=`${i[o-2]} + 1 < ${this.outputShape[o-2]}`,l=Ur(o);o===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${r[0]} - rc - 1),
            ${r[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${r[0]} - (rc  + 1) - 1),
                ${r[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${f(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(m){return p(m)}function c(m){return m[o-1]="("+m[o-1]+" + 1)",p(m)}function f(m){return m[o-2]="("+m[o-2]+" + 1)",p(m)}function d(m){return m[o-1]="("+m[o-1]+" + 1)",m[o-2]="("+m[o-2]+" + 1)",p(m)}function p(m){let g=r.map((x,v)=>h(v,m)),y=g.join(","),b=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function h(m,g){return n.indexOf(m)!==-1&&r[m]!==1?`${r[m]} - ${g[m]} - 1`:`${g[m]}`}}};function k7t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o,a=i.shape.length,l=Y.parseAxisParam(s,i.shape);if(a===0)return Ri({inputs:{x:i},backend:n});let u=Me().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new IG(i.shape,l):new kG(i.shape,l);return n.runWebGLProgram(u,[i],i.dtype)}var xVe={kernelName:cx,backendName:"webgl",kernelFunc:k7t};re();re();var DG=class{constructor(r,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let o=r[1],i=r[2];this.outputShape=r;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${o}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var vVe={kernelName:EC,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=new DG(o.shape,s),[c,f]=ce.getImageCenter(a,o.shape[1],o.shape[2]),d=[[c,f,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(u,[o],o.dtype,d)}};re();var I7t=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,D7t=tr({opSnippet:I7t}),wVe={kernelName:a0,backendName:"webgl",kernelFunc:D7t};re();var N7t="return inversesqrt(x);",M7t=tr({opSnippet:N7t,cpuKernelImpl:Q8e}),_Ve={kernelName:l0,backendName:"webgl",kernelFunc:M7t};re();var $w=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let c=Ur(s.length),f=Ur(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,h="";i===1?h="i":i===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${r}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}};var NG=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let c=Ur(s.length),f=Ur(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,h="";i===1?h="i":i===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${r}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}};function F7t(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=[d/c,c];if(d===0)return n.makeTensorInfo(a,i.dtype);let h=yt({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=yt({inputs:{x:s},backend:n,attrs:{shape:[u,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y;Me().getBool("WEBGL_PACK")?y=new NG(u,l,h.shape.length,m.shape.length,f,p):y=new $w(u,l,h.shape.length,m.shape.length,f,p);let b=n.runWebGLProgram(y,[m,h,g],m.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),x}var SVe={kernelName:uC,backendName:"webgl",kernelFunc:F7t};re();re();var MG=class{constructor(r,n,o,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[r,o];let s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,l=Me().getNumber("WEBGL_VERSION")===2?s:a,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${l}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function O7t(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=new MG(i.shape[0],i.shape[1],s.shape[1],a),u=[[i.shape[1]]];return n.runWebGLProgram(l,[i,s],"int32",u)}var CVe={kernelName:fC,backendName:"webgl",kernelFunc:O7t};re();var FG=class{constructor(r,n,o){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(o>4)throw Error(`Where for rank ${o} is not yet supported`);if(o===1)s="resRC",i="resRC";else{let l=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],c=[];for(let f=0;f<n.length;f++)c.push(`${l[f]}`),f<r&&u.push(`${l[f]}`);i=u.join(),s=c.join()}let a=Ur(o);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}};function R7t(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r,a=new FG(o.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[o,i,s],qi(i.dtype,s.dtype))}var EVe={kernelName:fx,backendName:"webgl",kernelFunc:R7t};re();var P7t=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${ce.SELU_SCALEALPHA};
  float scale = ${ce.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,L7t=tr({opSnippet:P7t}),TVe={kernelName:u0,backendName:"webgl",kernelFunc:L7t};re();var j7t=Ap+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,B7t=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$7t=tr({opSnippet:j7t,packedOpSnippet:B7t,cpuKernelImpl:eUe}),AVe={kernelName:p0,backendName:"webgl",kernelFunc:$7t};re();var z7t=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,U7t=tr({opSnippet:z7t}),kVe={kernelName:d0,backendName:"webgl",kernelFunc:U7t};re();var V7t=Ap+`
  return sin(x);
`,G7t=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${rf}
  return result;
`,W7t=tr({opSnippet:V7t,packedOpSnippet:G7t}),IVe={kernelName:c0,backendName:"webgl",kernelFunc:W7t};re();var q7t=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,H7t=tr({opSnippet:q7t}),DVe={kernelName:f0,backendName:"webgl",kernelFunc:H7t};re();var Y7t=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,X7t=tr({opSnippet:Y7t}),NVe={kernelName:h0,backendName:"webgl",kernelFunc:X7t};re();var K7t=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;Y.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((b,x)=>b*x),u=[[0,0]];u.push(...a);for(let b=1+s.length;b<i.shape.length;++b)u.push([0,0]);let c=[],f=uce({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),d=ce.getReshaped(f.shape,s,l,!1),p=ce.getPermuted(d.length,s.length,!1),h=ce.getReshapedPermuted(f.shape,s,l,!1),m=yt({inputs:{x:f},backend:n,attrs:{shape:d}}),g=Wo({inputs:{x:m},backend:n,attrs:{perm:p}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:h}});return c.push(f),c.push(m),c.push(g),c.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},MVe={kernelName:hx,backendName:"webgl",kernelFunc:K7t};re();function Z7t(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.readSync(o.dataId),u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId)[0],[d,p,h,m,g]=rUe(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var FVe={kernelName:dC,backendName:"webgl",kernelFunc:Z7t};re();function Q7t(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.readSync(i.dataId)),l=n.readSync(o.dataId),u=Array.from(n.readSync(s.dataId)),[c,f,d]=nUe(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var OVe={kernelName:pC,backendName:"webgl",kernelFunc:Q7t};re();function J7t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=hV(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var RVe={kernelName:hC,backendName:"webgl",kernelFunc:J7t};re();function e9t(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=hV(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var PVe={kernelName:mC,backendName:"webgl",kernelFunc:e9t};re();function t9t(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),h=!1;if(s.dtype==="string"){let b=n.bufferSync(i),x=n.bufferSync(s),v=Y.decodeString(n.readSync(a.dataId)[0]),w=J8e(b,x,l,p,f,c,u,d,v,h);return n.makeTensorInfo(l,w.dtype,w.values)}let m=new $w(c,u,i.shape.length,s.shape.length,d,[p,1],h),g=n.runWebGLProgram(m,[s,i,a],s.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(g),y}var LVe={kernelName:gC,backendName:"webgl",kernelFunc:t9t};re();function r9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=Y.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=i.shape.length,f=new Array(c).fill(0),d=i.shape.slice();return u.map(p=>{let h=[...d];h[l]=p;let m=Zh({inputs:{x:i},backend:n,attrs:{begin:f,size:h}});return f[l]+=p,m})}var jVe={kernelName:mx,backendName:"webgl",kernelFunc:r9t};re();var BVe="return sqrt(x);",n9t=tr({opSnippet:BVe,packedOpSnippet:BVe,cpuKernelImpl:oUe}),$Ve={kernelName:m0,backendName:"webgl",kernelFunc:n9t};re();var o9t="return x * x;",i9t=tr({opSnippet:o9t}),zVe={kernelName:yC,backendName:"webgl",kernelFunc:i9t};re();var UVe="return (a - b) * (a - b);",s9t=Pn({opSnippet:UVe,packedOpSnippet:UVe}),VVe={kernelName:g0,backendName:"webgl",kernelFunc:s9t};re();function a9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;if(i.dtype!=="string")throw new Error("Input must be of datatype string");let s=n.readSync(i.dataId),a=ce.fromUint8ToStringArray(s),l=iUe(a,"string",o);return n.makeTensorInfo(i.shape,"string",l)}var GVe={kernelName:G1,backendName:"webgl",kernelFunc:a9t};re();function l9t({inputs:t,attrs:r,backend:n}){let{x:o}=t,i=vs+`
    return x > 0.0 ? 1.0 : float(${r.alpha});
  `,s=new Da(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}var WVe={kernelName:v0,backendName:"webgl",kernelFunc:l9t};re();var OG=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=o;let i=o.length,s=Ur(o.length),a=Ur(o.length),l="";if(i===1)l="coords * strides + begin";else{let u=0;l=o.map((c,f)=>(u++,o.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${u-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${r});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${l}));
      }
    `}};function u9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Rs.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=yt({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||b){Y.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let C=Rs.computeOutShape(x,v,w),E=Zh({inputs:{x:i},backend:n,attrs:{begin:x,size:C}});_=yt({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([i])){let E=n.readSync(i.dataId),T=er(i.shape,i.dtype,E),I=sUe(h,T,w,x);_=n.makeTensorInfo(m,i.dtype,I.values)}else{let E=new OG(x,w,h);_=n.runWebGLProgram(E,[i],i.dtype)}let S=yt({inputs:{x:_},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(_),S}var qVe={kernelName:bC,backendName:"webgl",kernelFunc:u9t};re();function c9t(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.readSync(f.dataId),h=n.readSync(d.dataId),[m,g]=aUe(p,h,i,s,a,l,u,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var HVe={kernelName:xC,backendName:"webgl",kernelFunc:c9t};re();function f9t(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.readSync(s.dataId),u=n.readSync(a.dataId)[0],[c,f,d]=lUe(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var YVe={kernelName:vC,backendName:"webgl",kernelFunc:f9t};re();function d9t(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.readSync(s.dataId),l=uUe(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var XVe={kernelName:wC,backendName:"webgl",kernelFunc:d9t};re();var p9t="return tan(x);",h9t=tr({opSnippet:p9t}),KVe={kernelName:b0,backendName:"webgl",kernelFunc:h9t};re();var m9t=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,g9t=tr({opSnippet:m9t}),ZVe={kernelName:x0,backendName:"webgl",kernelFunc:g9t};re();function y9t(t){let{inputs:r,backend:n,attrs:o}=t,{tensor:i,indices:s,updates:a}=r,{}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(a,s,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);let h=yt({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),m=yt({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),g=yt({inputs:{x:i},backend:n,attrs:{shape:p}}),y=new $w(u,l,h.shape.length,m.shape.length,f,p,!1,!0),b=n.runWebGLProgram(y,[m,h,g],g.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}var QVe={kernelName:cC,backendName:"webgl",kernelFunc:y9t};re();var RG=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[a]*n[a];this.outputShape=o,this.rank=o.length;let i=Ur(this.rank),s=b9t(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}};function b9t(t){let r=t.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(r===1)return`imod(resRC, ${t[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],o=[];for(let i=0;i<t.length;i++)o.push(`imod(${n[i]}, ${t[i]})`);return o.join()}function fce(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;if(i.dtype==="string"||i.shape.length>5){let u=n.readSync(i.dataId),c=i.dtype==="string"?u.map(p=>Y.decodeString(p)):u,f=er(i.shape,i.dtype,c),d=fUe(f,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}let a=new RG(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var JVe={kernelName:kh,backendName:"webgl",kernelFunc:fce};re();var PG=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=r,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},LG=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=r,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function _E(t,r){r!==null&&t.disposeIntermediateTensorInfo(r)}function eGe(t){let r=1;for(;r<t;)r*=2;return r}function x9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o,l=Me().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Me().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([i])||f<l||s>u){let I=n.readSync(i.dataId),[k,F]=dUe(I,c,i.dtype,s,a);return[n.makeTensorInfo(k.shape,k.dtype,k.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[i,Xx({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,h=p?n.unpackTensor(i):i,g=Y.sizeFromShape(c)/f,y=yt({inputs:{x:h},attrs:{shape:[g,f]},backend:n});p&&_E(n,h);let b=eGe(s),x=eGe(f),v=null,w=()=>v===null?[y,y]:[y,v],_=(I,k,F)=>{let D=w(),L=new PG(F),R=[[f],[v===null?1:0],[Number.NEGATIVE_INFINITY],[I],[k]],V=v;v=n.runWebGLProgram(L,D,"int32",R),_E(n,V)};for(let I=1;I<b;I*=2){let k=I*2;for(let F=I;F>=1;F/=2)_(k,F,[g,x])}for(let I=x;I>b;I/=2){let k=w(),F=new LG([g,I/2]),L=[[f],[v===null?1:0],[b]],P=v;v=n.runWebGLProgram(F,k,"int32",L),_E(n,P);let R=b/2,V=R*2;for(let G=R;G>=1;G/=2)_(V,G,v.shape)}let S=v;v=Zh({inputs:{x:v},backend:n,attrs:{begin:0,size:[g,s]}}),_E(n,S);let C=oce({inputs:{x:y,indices:v},backend:n,attrs:{axis:1,batchDims:1}});_E(n,y);let E=c.slice(0,-1);E.push(s),S=v,v=yt({inputs:{x:v},attrs:{shape:E},backend:n}),_E(n,S);let T=C;return C=yt({inputs:{x:C},attrs:{shape:E},backend:n}),_E(n,T),[C,v]}var tGe={kernelName:_C,backendName:"webgl",kernelFunc:x9t};re();var jG=class{constructor(r,n,o,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;let l=o==="nearest"?1:2,u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${r} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${r}));

                if (${l} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function v9t(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=o,[f,d,p,h]=i.shape,[m,g]=c??[d,p],y=[f,m,g,h],b=new jG(d,p,a,l,u,y);return n.runWebGLProgram(b,[i,s],"float32")}var rGe={kernelName:SC,backendName:"webgl",kernelFunc:v9t};re();function w9t(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;G0(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let a=o.readSync(s.dataId),{outputValues:l,outputShape:u,indices:c}=pUe(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var nGe={kernelName:CC,backendName:"webgl",kernelFunc:w9t};re();function _9t(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i,l=a.shape.length,u=i.shape[s],c=new Array(l-1),f=0;for(let g=0;g<l;g++)g!==s&&(c[f++]=a.shape[g]);let d=[],p=new Array(l).fill(0),h=a.shape.slice();h[s]=1;let m=new Array(u);for(let g=0;g<m.length;g++){p[s]=g;let y=Zh({inputs:{x:a},backend:n,attrs:{begin:p,size:h}}),b=yt({inputs:{x:y},backend:n,attrs:{shape:c}});m[g]=b,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var oGe={kernelName:yx,backendName:"webgl",kernelFunc:_9t};re();var BG=class{constructor(r,n){this.variableNames=["x","segmentIds"];let o=r.windowSize,i=r.batchSize,s=r.inSize,a=r.numSegments,l=a*Math.ceil(s/o);this.outputShape=[i,l];let u="0.0",c="sumValue",f=Math.floor(o/4)*4,d=o%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";s%o>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${o}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function S9t(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o,l=i.shape.length,u=[],c=0,f=ce.getAxesPermutation([c],l),d=i;f!=null&&(d=Wo({inputs:{x:i},backend:n,attrs:{perm:f}}),u.push(d),c=ce.getInnerMostAxes(1,l)[0]);let p=ce.segment_util.computeOutShape(d.shape,c,a),h=Y.sizeFromShape([d.shape[c]]),m=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(m);let g=K1(i.dtype),y=(w,_,S,C,E)=>{let T=w.shape[0],I=w.shape[1],k=ce.segment_util.segOpComputeOptimalWindowSize(I,E),F={windowSize:k,inSize:I,batchSize:T,numSegments:E},D=new BG(F,_),L=n.compileAndRun(D,[w,S],C);if(u.push(L),L.shape[1]===E)return L;let P=cce({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),R=fce({inputs:{x:P},backend:n,attrs:{reps:[I/k]}});return u.push(P),u.push(R),y(L,_,R,C,E)},b=y(m,"unsortedSegmentSum",s,g,a),x=yt({inputs:{x:b},backend:n,attrs:{shape:p}}),v=x;if(f!=null){u.push(x);let w=ce.getUndoAxesPermutation(f);v=Wo({inputs:{x:v},backend:n,attrs:{perm:w}})}return u.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}var iGe={kernelName:bx,backendName:"webgl",kernelFunc:S9t};var C9t=[zUe,VUe,GUe,WUe,HUe,YUe,XUe,KUe,JUe,e7e,t7e,r7e,n7e,o7e,i7e,s7e,a7e,l7e,u7e,c7e,f7e,p7e,h7e,m7e,g7e,v7e,_7e,S7e,NUe,E7e,A7e,k7e,I7e,D7e,N7e,M7e,F7e,O7e,R7e,P7e,B7e,$7e,z7e,U7e,V7e,G7e,W7e,q7e,H7e,Y7e,X7e,K7e,Z7e,Q7e,J7e,e9e,r9e,n9e,o9e,i9e,a9e,l9e,u9e,c9e,f9e,d9e,p9e,h9e,m9e,DUe,g9e,T7e,y9e,b9e,x9e,MUe,v9e,w9e,_9e,S9e,C9e,E9e,T9e,A9e,k9e,I9e,N9e,M9e,F9e,O9e,R9e,P9e,j9e,$9e,z9e,U9e,V9e,G9e,X9e,RUe,K9e,Z9e,Q9e,J9e,y7e,eVe,nVe,oVe,iVe,sVe,FUe,aVe,lVe,uVe,cVe,fVe,b7e,W9e,dVe,pVe,hVe,LUe,mVe,gVe,yVe,bVe,xVe,vVe,wVe,_Ve,SVe,CVe,EVe,TVe,AVe,kVe,IVe,DVe,d7e,Y9e,NVe,MVe,FVe,OVe,RVe,PVe,LVe,jVe,$Ve,zVe,VVe,GVe,WVe,qVe,HVe,YVe,XVe,H9e,BUe,KVe,ZVe,QVe,JVe,tGe,rGe,$Ue,nGe,oGe,iGe,tVe];for(let t of C9t)cI(t);re();var fCt=Al(aGe());var zG=class{constructor(r,n,o,i,s){this.p=r,this.background=n,this.ground=o,this.w=i,this.y=s}drawBackground(){let r=Math.round(this.w/this.background.width)+1;for(let n=0;n<r;n++)this.p.image(this.background,this.background.width*n,this.y-this.ground.height-this.background.height)}drawGround(){let r=Math.round(this.w/this.ground.width)+1;for(let n=0;n<r;n++)this.p.image(this.ground,this.ground.width*n,this.y-this.ground.height)}};var UG=class{constructor(r,n,o,i,s,a){this.p=r,this.upPipe=n,this.downPipe=o,this.w=i,this.h=s,this.minBottom=0,this.maxBottom=0,this.yBottom=0,this.distancePipe=420,this.x=0,this.velocity=5,this.targetX=0,this.targetY=0,this.minBottom=this.h-480,this.maxBottom=this.h-140,this.yBottom=r.random(this.minBottom,this.maxBottom),this.x=a}draw(){let r=this.yBottom-this.distancePipe,n=0-this.downPipe.height+r;if(r>0){let o=Math.round(r/this.downPipe.height)+1;for(let i=0;i<o;i++)n*i>0?this.p.image(this.downPipe,this.x,n*i):this.p.image(this.downPipe,this.x,n)}this.p.image(this.downPipe,this.x,this.yBottom),this.p.image(this.upPipe,this.x,this.yBottom-this.distancePipe),this.targetY=this.yBottom-70,this.targetX=this.x+65,this.image=this.downPipe,this.x=this.x-this.velocity}isOffscreen(r){let n=!1;if(this.x+this.downPipe.width<-10){let i=r.sort((s,a)=>s.x<a.x?1:s.x>a.x?-1:0)[0].x+400;this.x=i,this.yBottom=this.p.random(this.minBottom,this.maxBottom),n=!0}return n}isOffscreenScore(r){return this.targetX>r?1:0}};var VG=class{constructor(r,n,o,i,s=-5){this.p=r,this.bird=n,this.ground=o,this.height=i,this.isAlive=!0,this.x=70,this.y=0,this.gravity=.9,this.velocity=0,this.score=0,this.generation=0,this.isAlive=!0,this.y=window.innerHeight/2-170,this.jumpForce=s}update(r){let n=this.getNearObstacle(r),o=0,i=0;n?.targetX>this.x?i=n?.targetX-this.x:i=this.x-n?.targetX,n?.targetY<this.y?o=n?.targetY-this.y:o=this.y-n?.targetY,this.fall(i,o),this.p.image(this.bird,this.x,this.y)}fall(r,n){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.score=this.score-r-n}getNearObstacle(r){return r.filter(o=>o.x>=this.x+this.bird.width).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0]}hits(r){let o=r.filter(i=>i.x<this.x+this.bird.width).sort((i,s)=>i.x<s.x?-1:i.x>s.x?1:0)[0];return(this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y+this.bird.height>o.yBottom+10||this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y<o.yBottom-180)&&(this.isAlive=!1),!1}isOffScreen(){(this.y+this.bird.height<0||this.y>this.height-this.ground.height)&&(this.isAlive=!1)}jump(){this.velocity+=this.jumpForce,this.velocity*=.9}info(r){let n=r.filter(o=>o.targetX>=this.x).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0];return{agentY:this.y,targetY:n?.targetY}}};var cCt=Al(uCt());var v3r=["vis"],cR=(()=>{let r=class r{set settings(o){this._settingsValue!==o&&(this._settingsValue=o,this._tensorflowSettings.next(o))}constructor(){this.modelTrainned=new Hs,this._tensorflowSettings=new Ua(null),this._settingsValue=null}ngAfterViewInit(){this._tensorflowSettings.pipe(xi(o=>je(this,null,function*(){o&&this.container&&this.container.nativeElement&&(yield this.initializeModel(o))}))).subscribe()}initializeModel(o){return je(this,null,function*(){yield tie();let{inputs:i,labels:s,mainLayers:a,finalLayer:l}=o,u=Math.floor(i.length*.9),c=i.slice(0,u),f=i.slice(u),d=s.slice(0,u),p=s.slice(u),h=ii(c),m=ii(f),g=ii(d),y=ii(p);this.model=kae(),a.forEach(v=>this.model.add(v)),this.model.add(l),this.model.compile(o.compiler);let b={name:"show.fitCallbacks",tab:"Training",drawArea:this.container.nativeElement},x={onTrainEnd:()=>{this.modelTrainned.emit(this.model)}};yield Pe(()=>{this.model.fit(h,g,Is(Gt({},o.fit),{validationData:[m,y],callbacks:[cCt.show.fitCallbacks(b,["loss","acc"]),x]}))})})}ngOnDestroy(){this.modelTrainned.complete(),this.modelTrainned.unsubscribe(),this._tensorflowSettings.complete(),this._tensorflowSettings.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ki({type:r,selectors:[["app-tensorflow-visualization"]],viewQuery:function(i,s){if(i&1&&iu(v3r,7),i&2){let a;Zs(a=Qs())&&(s.container=a.first)}},inputs:{settings:"settings"},outputs:{modelTrainned:"modelTrainned"},standalone:!0,features:[Ii],decls:3,vars:0,consts:[["vis",""],[1,"container"]],template:function(i,s){i&1&&(Bo(0,"div",1),Ks(1,"div",null,0),ti())},styles:[".container[_ngcontent-%COMP%]{background:#fff;width:100%;height:100%;margin-top:40px}"]});let t=r;return t})();var mh=Al(hz());var xb=class{get model(){return this._model.getValue()}set model(r){this._model.getValue()!==r&&this._model.next(r)}constructor(){this.inputs=[],this.labels=[],this.width=window.innerWidth,this.height=window.innerHeight,this.Engine=mh.default.Engine,this.Render=mh.default.Render,this.Runner=mh.default.Runner,this.Bodies=mh.default.Bodies,this.Composite=mh.default.Composite,this.Composites=mh.default.Composites,this.Constraint=mh.default.Constraint,this.MouseConstraint=mh.default.MouseConstraint,this.Mouse=mh.default.Mouse,this.Body=mh.default.Body,this.Vector=mh.default.Vector,this._model=new Ua(null),this.model$=this._model.asObservable().pipe(aS(),yne({bufferSize:1,refCount:!0})),this.engine=this.Engine.create(),this.world=this.engine.world,this.createData(),this.settingTensorflow()}};var w3r=["canvas"];function _3r(t,r){if(t&1){let n=sd();Bo(0,"app-tensorflow-visualization",3),nu("modelTrainned",function(i){td(n);let s=ou();return rd(s.modelTrainned(i))}),ti()}if(t&2){let n=ou();Xs("settings",n.settings)}}var ITe=function(t){return t[t.Nothing=0]="Nothing",t[t.Jump=1]="Jump",t}(ITe||{}),dCt=(()=>{let r=class r extends xb{createData(){}constructor(){super(),this.screenYSize=window.innerHeight,this.data=[],this.nextYellowPointX=0,this.birdX=0,this.scorePipes=0,this.obstacles=[];let o=this.creatingDataToTraining();this.settingTensorflow()}ngOnInit(){this.canvas,this.model$.subscribe(o=>{o&&(this.p=new fCt.default(this.sketch.bind(this)))})}setScenario(){}sketch(o){o.setup=()=>this.setup(o),o.draw=()=>this.draw(o)}setup(o){let i=o.loadImage("assets/bg.png"),s=o.loadImage("assets/ground.png");this.upPipe=o.loadImage("assets/pipeUp.png"),this.downPipe=o.loadImage("assets/pipeDown.png");let a=o.loadImage("assets/bird.png");this.background=new zG(o,i,s,this.width,this.height),this.initObstacles(o,this.upPipe,this.downPipe),o.createCanvas(this.width,this.height,this.canvas.nativeElement),this.bird=new VG(o,a,s,this.height)}draw(o){o.background(111,197,206),this.background.drawBackground(),this.obstacles.forEach(h=>{h.draw(),h.isOffscreen(this.obstacles)&&(this.scorePipes+=1)}),this.bird.update(this.obstacles);let{agentY:i,targetY:s}=this.bird.info(this.obstacles),a=ii([[i,s]]),l=this.model?.predict(a),f=cu(l,1).arraySync()[0];["Nothing","JUMP"][f]==="JUMP"&&this.bird.jump(),o.textSize(20),o.text(`Score (Pipe counter): ${this.scorePipes}`,10,110),this.background.drawGround()}initObstacles(o,i,s){this.obstacles=[];let a=400;for(let l=0;l<10;l++)this.obstacles.push(new UG(o,i,s,this.width,this.height,this.width+a*l))}settingTensorflow(){this.inputs=this.data.map(o=>[o.yAgent,o.yTarget]),this.labels=this.data.map(o=>Number(o.action)),this.settings={compiler:{optimizer:Qc.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:512,epochs:5},inputs:this.inputs,labels:this.labels,mainLayers:[Hh.dense({units:32,activation:"relu",inputShape:[2]})],finalLayer:Hh.dense({units:2,activation:"softmax"})}}creatingDataToTraining(){for(let o=0;o<this.screenYSize;o+=5)for(let i=0;i<this.screenYSize;i+=5)i<o?this.data.push({yAgent:i,yTarget:o,action:ITe.Nothing}):this.data.push({yAgent:i,yTarget:o,action:ITe.Jump});return JSON.stringify(this.data)}modelTrainned(o){this.model=o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ki({type:r,selectors:[["app-flappy-bird-supervised"]],viewQuery:function(i,s){if(i&1&&iu(w3r,7),i&2){let a;Zs(a=Qs())&&(s.canvas=a.first)}},standalone:!0,features:[sp,Ii],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(Bo(0,"div"),Ku(1,_3r,1,1,"app-tensorflow-visualization",1),Ks(2,"canvas",2,0),ti()),i&2&&(Ys(),Xs("ngIf",!s.model),Ys(),Xs("width",0))},dependencies:[Qu,$k,cR],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block;width:100%;height:100%}"]});let t=r;return t})();var Zf=Al(hz());var pCt=t=>t*(180/Math.PI),hCt=t=>t*(Math.PI/180);var S3r=["canvas"];function C3r(t,r){if(t&1){let n=sd();Bo(0,"app-tensorflow-visualization",3),nu("modelTrainned",function(i){td(n);let s=ou();return rd(s.modelTrainned(i))}),ti()}if(t&2){let n=ou();Xs("settings",n.settings)}}var fR=function(t){return t[t.NoRotate=0]="NoRotate",t[t.LeftRotate=1]="LeftRotate",t[t.RightRotate=2]="RightRotate",t}(fR||{}),mCt=(()=>{let r=class r extends xb{createData(){throw new Error("Method not implemented.")}get starShipAngle(){return this.starShip.angle}get starShipX(){return parseInt(this.starShip.position.x.toPrecision(3))}get starShipY(){return parseInt(this.starShip.position.y.toPrecision(3))}get landingPlatformY(){return parseInt(this.landingPlatform.position.y.toPrecision(3))}get landingPlatformX(){return parseInt(this.landingPlatform.position.x.toPrecision(3))}constructor(){super(),this.data=[],this.maxSpeedCollision=0}setScenario(){p9("assets/model/startship_landing_model.json").then(o=>{o?this._model.next(o):(this.dataBuilder(),this.settingTensorflow())}),this.model$.pipe(xi(o=>{o&&this.draw()})).subscribe()}ngAfterViewInit(){}dataBuilder(){for(let o=-180;o<180;o++)for(let i=0;i<this.width/10;i++)for(let s=0;s<this.height/10;s++)o<5?this.data.push({Agent:{angle:o,x:i,y:s},action:fR.RightRotate}):o>5&&this.data.push({Agent:{angle:o,x:i,y:s},action:fR.LeftRotate}),this.data.push({Agent:{angle:0,x:0,y:0},action:fR.NoRotate})}settingTensorflow(){this.inputs=[],this.labels=[],this.data.forEach(o=>{this.inputs.push([o.Agent.angle]),this.labels.push(Number(o.action))}),this.settings={compiler:{optimizer:Qc.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:1e4,epochs:3},inputs:this.inputs,labels:this.labels,mainLayers:[Hh.dense({units:64,activation:"relu",inputShape:[1]})],finalLayer:Hh.dense({units:3,activation:"softmax"})}}draw(){this.engine=this.Engine.create({gravity:{scale:.001,x:0,y:.1}}),this.render=this.Render.create({canvas:this.canvas.nativeElement,engine:this.engine,options:{showDebug:!0,wireframes:!1}}),this.starShip=this.addStarship(),this.lauchingPlatform=this.addLauchingPlatform(),this.landingPlatform=this.addLandingPlatform(),this.Composite.add(this.engine.world,[this.starShip,this.lauchingPlatform,this.landingPlatform]);let o=Zf.Mouse.create(this.render.canvas),i=Zf.MouseConstraint.create(this.engine,{mouse:o,constraint:{stiffness:.2,render:{visible:!1}}});Zf.World.add(this.engine.world,i),this.Render.run(this.render);let s=this.Runner.create();this.Runner.run(s,this.engine),this.afterUpdate(()=>{let a=pCt(this.starShipAngle),l=Zf.default.Collision.collides(this.starShip,this.lauchingPlatform);if(this.model&&!l){let u=ii([a]),c=this.model?.predict(u),p=cu(c,1).arraySync()[0],h=["RightRotate","LeftRotate","Thrust","Nothing","NoRotate"];switch(console.log("******",fR[p]),fR[p]){case"RightRotate":this.rotateRight();break;case"LeftRotate":this.rotateLeft();break;default:break}this.starShipY>500}})}addStarship(){return this.Bodies.rectangle(100,90,12,25,{angle:hCt(45),render:{sprite:{texture:"assets/starship.png",xScale:.02,yScale:.02}}})}rotateLeft(){this.starShip.angle-=.01}rotateRight(){this.starShip.angle+=.01}applyThrust(o,i){let s=o.angle,a={x:Math.sin(s)*i,y:-Math.cos(s)*i};Zf.Body.applyForce(o,{x:o.position.x,y:o.position.y},a)}addLauchingPlatform(){return this.Bodies.rectangle(0,this.height-50,600,60,{isStatic:!0,render:{fillStyle:"white"}})}addLandingPlatform(){return this.Bodies.rectangle(780,this.height-50,100,60,{isStatic:!0,render:{fillStyle:"white"}})}beforeUpdate(o){Zf.default.Events.on(this.engine,"beforeUpdate",i=>{o(i)})}afterUpdate(o){Zf.default.Events.on(this.engine,"afterUpdate",i=>{o(i)})}calculateDistance(){let o=this.starShipX-this.landingPlatformX,i=this.starShipY-this.landingPlatformY,s=Zf.Vector.magnitude({x:o,y:i})-68;return s<5?0:s}modelTrainned(o){this.model=o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ki({type:r,selectors:[["app-star-ship-landing-super-vized"]],viewQuery:function(i,s){if(i&1&&iu(S3r,7),i&2){let a;Zs(a=Qs())&&(s.canvas=a.first)}},standalone:!0,features:[sp,Ii],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(Bo(0,"div"),Ku(1,C3r,1,1,"app-tensorflow-visualization",1),Ks(2,"canvas",2,0),ti()),i&2&&(Ys(),Xs("ngIf",!s.model),Ys(),Xs("width",0))},dependencies:[Qu,$k,cR],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block;width:calc(100vw - 2px);height:calc(100vh - 2px);border:1px solid red}"]});let t=r;return t})();var gCt=Al(hz());var oS=Al(hz());var jre=class extends xb{createData(){}get angle(){return this.body.angle}get wheelAPosition(){return this.wheelA.position}get wheelBPosition(){return this.wheelB.position}settingTensorflow(){}setScenario(){}constructor(r,n,o,i,s){super();let a=this.Composite.create({label:"Car"}),l=this.Body.nextGroup(!0),u=20,c=-o*.5+u,f=o*.5-u,d=0;this.body=this.Bodies.rectangle(r,n,o,i,{mass:1,render:{fillStyle:"pink"},collisionFilter:{group:l},chamfer:{radius:i*.5},density:2e-4}),this.wheelA=this.Bodies.circle(r+c,n+d,s,{collisionFilter:{group:l},friction:.8}),this.wheelB=this.Bodies.circle(r+f,n+d,s,{render:{fillStyle:"black"},collisionFilter:{group:l},friction:.8}),this.axelA=this.Constraint.create({label:"axelA",bodyB:this.body,pointB:{x:c,y:d},bodyA:this.wheelA,stiffness:1,length:0,render:{strokeStyle:"green"}}),this.axelB=this.Constraint.create({label:"axelB",bodyB:this.body,pointB:{x:f,y:d},bodyA:this.wheelB,stiffness:1,length:0,render:{strokeStyle:"green"}});let p=oS.default.Composite;p.add(a,this.body),p.add(a,this.wheelA),p.add(a,this.wheelB),p.add(a,this.axelA),p.add(a,this.axelB),this.carComposite=a}goRight(){let n=this.body.angle,o=.001*Math.cos(n),i=.001*Math.sin(n);oS.default.Body.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},{x:o,y:i}),oS.default.Body.applyForce(this.wheelA,{x:this.wheelA.position.x,y:this.wheelA.position.y},{x:o,y:i}),oS.default.Body.applyForce(this.wheelB,{x:this.wheelB.position.x,y:this.wheelB.position.y},{x:o,y:i})}goLeft(){let n=this.body.angle,o=-.001*Math.cos(n),i=-.001*Math.sin(n);oS.default.Body.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},{x:o,y:i}),oS.default.Body.applyForce(this.wheelA,{x:this.wheelA.position.x,y:this.wheelA.position.y},{x:o,y:i}),oS.default.Body.applyForce(this.wheelB,{x:this.wheelB.position.x,y:this.wheelB.position.y},{x:o,y:i})}};var E3r=["canvas"];function T3r(t,r){if(t&1){let n=sd();Bo(0,"app-tensorflow-visualization",3),nu("modelTrainned",function(i){td(n);let s=ou();return rd(s.modelTrainned(i))}),ti()}if(t&2){let n=ou();Xs("settings",n.settings)}}var Bre=function(t){return t[t.left=0]="left",t[t.right=1]="right",t[t.nothing=2]="nothing",t}(Bre||{}),yCt=(()=>{let r=class r extends xb{constructor(){super(...arguments),this.data=[]}ngAfterViewInit(){this.setScenario()}settingTensorflow(){this.inputs=this.data?.map(o=>[o.wheelAY,o.wheelBY]),this.labels=this.data?.map(o=>Number(o.action)),this.settings={compiler:{optimizer:Qc.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:5e3,epochs:15},inputs:this.inputs,labels:this.labels,mainLayers:[Hh.dense({units:64,activation:"relu",inputShape:[2]})],finalLayer:Hh.dense({units:3,activation:"softmax"})}}setScenario(){this.render=this.Render.create({canvas:this.canvas.nativeElement,engine:this.engine,options:{width:window.innerWidth-10,height:window.innerHeight-10,showVelocity:!0,showDebug:!0,wireframes:!1}})}draw(){this.Render.run(this.render);let o=this.Runner.create();this.Runner.run(o,this.engine);let i=this.Body.nextGroup(!0),s=.8;this.car=new jre(window.innerWidth/2,this.canvas.nativeElement.height-250,150*s,30*s,30*s);let a=this.Bodies.rectangle(window.innerWidth/2,this.canvas.nativeElement.height-200,window.innerWidth/2,20,{render:{fillStyle:"red"},collisionFilter:{group:i}});this.Composite.add(this.world,[this.car.carComposite,a,this.Bodies.rectangle(window.innerWidth/2,this.canvas.nativeElement.height,window.innerWidth,20.5,{isStatic:!0,render:{fillStyle:"white"}}),this.Constraint.create({bodyA:a,pointB:this.Vector.clone(a.position),stiffness:1,length:0})]);let l=this.Mouse.create(this.render.canvas),u=this.MouseConstraint.create(this.engine,{mouse:l,constraint:{stiffness:.2,render:{visible:!1}}});this.Composite.add(this.world,u),this.render.mouse=l,this.beforeUpdate(()=>{let c=this.model?.predict(ii([[this.car.wheelA.position.y,this.car.wheelB.position.y]])),p=cu(c,1).arraySync()[0];switch(p){case Bre.left:this.car.goLeft();break;case Bre.right:this.car.goRight();break;default:break}console.log("***Direction***",Bre[p])})}beforeUpdate(o){gCt.default.Events.on(this.engine,"beforeUpdate",i=>{o(i)})}createData(){this.data=[];let o=[],i=[],s=[];for(let u=-180;u<180;u++)for(let c=-180;c<180;c++)u>c?o.push({action:1,wheelAY:u,wheelBY:c}):u<c&&i.push({action:0,wheelAY:u,wheelBY:c});let a=Math.max(o.length,i.length);for(let u=0;u<a;u++){let c=u%360-180;s.push({action:2,wheelAY:c,wheelBY:c})}let l=[...o,...i,...s];l=l.sort(()=>Math.random()-.5),this.data=l}modelTrainned(o){this.model=o,this.draw()}};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=uS(r)))(s||r)}})(),r.\u0275cmp=ki({type:r,selectors:[["app-seesaw"]],viewQuery:function(i,s){if(i&1&&iu(E3r,7),i&2){let a;Zs(a=Qs())&&(s.canvas=a.first)}},standalone:!0,features:[sp,Ii],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(Bo(0,"div"),Ku(1,T3r,1,1,"app-tensorflow-visualization",1),Ks(2,"canvas",2,0),ti()),i&2&&(Ys(),Xs("ngIf",!s.model),Ys(),Xs("width",0))},dependencies:[Qu,$k,cR],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block}"]});let t=r;return t})();var $re=[{path:"",redirectTo:"seesaw-regression-trainning",pathMatch:"full"},{path:"flappy-bird-regression-trainning",component:dCt,title:"Flappy Bird - (regression trainning)"},{path:"seesaw-regression-trainning",component:yCt,title:"Seesaw - (regression trainning)"},{path:"starship-landing-regression-trainning",component:mCt,title:"Starship Landing - (regression trainning)"}];var A3r="@",k3r=(()=>{let r=class r{constructor(o,i,s,a,l){this.doc=o,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=l,this._rendererFactoryPromise=null,this.scheduler=Zt(lke,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-ZAHMD44B.js").then(i=>i)).catch(i=>{throw new is(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(o,i){let s=this.delegate.createRenderer(o,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new DTe(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(l=>{let u=l.createRenderer(o,i);a.use(u),this.scheduler?.notify(9)}).catch(l=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(i){Lk()},r.\u0275prov=xr({token:r,factory:r.\u0275fac});let t=r;return t})(),DTe=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let n of this.replay)n(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,n){return this.delegate.createElement(r,n)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,n){this.delegate.appendChild(r,n)}insertBefore(r,n,o,i){this.delegate.insertBefore(r,n,o,i)}removeChild(r,n,o){this.delegate.removeChild(r,n,o)}selectRootElement(r,n){return this.delegate.selectRootElement(r,n)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,n,o,i){this.delegate.setAttribute(r,n,o,i)}removeAttribute(r,n,o){this.delegate.removeAttribute(r,n,o)}addClass(r,n){this.delegate.addClass(r,n)}removeClass(r,n){this.delegate.removeClass(r,n)}setStyle(r,n,o,i){this.delegate.setStyle(r,n,o,i)}removeStyle(r,n,o){this.delegate.removeStyle(r,n,o)}setProperty(r,n,o){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(r,n,o)),this.delegate.setProperty(r,n,o)}setValue(r,n){this.delegate.setValue(r,n)}listen(r,n,o){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(r,n,o)),this.delegate.listen(r,n,o)}shouldReplay(r){return this.replay!==null&&r.startsWith(A3r)}};function bCt(t="animations"){return uke("NgAsyncAnimations"),MR([{provide:Lz,useFactory:(r,n,o)=>new k3r(r,n,o,t),deps:[yn,Vz,Cn]},{provide:wh,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var xCt={providers:[yke({eventCoalescing:!0}),PIe($re),bCt()]};var MTe;try{MTe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{MTe=!1}var ns=(()=>{let r=class r{constructor(o){this._platformId=o,this.isBrowser=this._platformId?Ike(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||MTe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};r.\u0275fac=function(i){return new(i||r)(Et(fS))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var mz;function I3r(){if(mz==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>mz=!0}))}finally{mz=mz||!1}return mz}function dR(t){return I3r()?t:!!t.capture}var yg=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(yg||{}),zre,_k;function Ure(){if(_k==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return _k=!1,_k;if("scrollBehavior"in document.documentElement.style)_k=!0;else{let t=Element.prototype.scrollTo;t?_k=!/\{\s*\[native code\]\s*\}/.test(t.toString()):_k=!1}}return _k}function pR(){if(typeof document!="object"||!document)return yg.NORMAL;if(zre==null){let t=document.createElement("div"),r=t.style;t.dir="rtl",r.width="1px",r.overflow="auto",r.visibility="hidden",r.pointerEvents="none",r.position="absolute";let n=document.createElement("div"),o=n.style;o.width="2px",o.height="1px",t.appendChild(n),document.body.appendChild(t),zre=yg.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,zre=t.scrollLeft===0?yg.NEGATED:yg.INVERTED),t.remove()}return zre}var NTe;function D3r(){if(NTe==null){let t=typeof document<"u"?document.head:null;NTe=!!(t&&(t.createShadowRoot||t.attachShadow))}return NTe}function vCt(t){if(D3r()){let r=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function gh(t){return t.composedPath?t.composedPath()[0]:t.target}function gz(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function wCt(t,...r){return r.length?r.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function Ck(t){return t!=null&&`${t}`!="false"}function hR(t){return Array.isArray(t)?t:[t]}function Vs(t){return t==null?"":typeof t=="string"?t:`${t}px`}function h1(t){return t instanceof No?t.nativeElement:t}var N3r=(()=>{let r=class r{create(o){return typeof MutationObserver>"u"?null:new MutationObserver(o)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var _Ct=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[N3r]});let t=r;return t})();var SCt=new Set,Ek,M3r=(()=>{let r=class r{constructor(o,i){this._platform=o,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):O3r}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&F3r(o,this._nonce),this._matchMedia(o)}};r.\u0275fac=function(i){return new(i||r)(Et(ns),Et(FR,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function F3r(t,r){if(!SCt.has(t))try{Ek||(Ek=document.createElement("style"),r&&Ek.setAttribute("nonce",r),Ek.setAttribute("type","text/css"),document.head.appendChild(Ek)),Ek.sheet&&(Ek.sheet.insertRule(`@media ${t} {body{ }}`,0),SCt.add(t))}catch(n){console.error(n)}}function O3r(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var ECt=(()=>{let r=class r{constructor(o,i){this._mediaMatcher=o,this._zone=i,this._queries=new Map,this._destroySubject=new Xn}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return CCt(hR(o)).some(s=>this._registerQuery(s).mql.matches)}observe(o){let s=CCt(hR(o)).map(l=>this._registerQuery(l).observable),a=Fk(s);return a=Dz(a.pipe(Uc(1)),a.pipe(Mz(1),IR(0))),a.pipe(dn(l=>{let u={matches:!1,breakpoints:{}};return l.forEach(({matches:c,query:f})=>{u.matches=u.matches||c,u.breakpoints[f]=c}),u}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let i=this._mediaMatcher.matchMedia(o),a={observable:new Mk(l=>{let u=c=>this._zone.run(()=>l.next(c));return i.addListener(u),()=>{i.removeListener(u)}}).pipe(E1(i),dn(({matches:l})=>({query:o,matches:l})),Ns(this._destroySubject)),mql:i};return this._queries.set(o,a),a}};r.\u0275fac=function(i){return new(i||r)(Et(M3r),Et(Cn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function CCt(t){return t.map(r=>r.split(",")).reduce((r,n)=>r.concat(n)).map(r=>r.trim())}var RTe=(()=>{let r=class r{constructor(o){this._platform=o}isDisabled(o){return o.hasAttribute("disabled")}isVisible(o){return P3r(o)&&getComputedStyle(o).visibility==="visible"}isTabbable(o){if(!this._platform.isBrowser)return!1;let i=R3r(G3r(o));if(i&&(TCt(i)===-1||!this.isVisible(i)))return!1;let s=o.nodeName.toLowerCase(),a=TCt(o);return o.hasAttribute("contenteditable")?a!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!U3r(o)?!1:s==="audio"?o.hasAttribute("controls")?a!==-1:!1:s==="video"?a===-1?!1:a!==null?!0:this._platform.FIREFOX||o.hasAttribute("controls"):o.tabIndex>=0}isFocusable(o,i){return V3r(o)&&!this.isDisabled(o)&&(i?.ignoreVisibility||this.isVisible(o))}};r.\u0275fac=function(i){return new(i||r)(Et(ns))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function R3r(t){try{return t.frameElement}catch{return null}}function P3r(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function L3r(t){let r=t.nodeName.toLowerCase();return r==="input"||r==="select"||r==="button"||r==="textarea"}function j3r(t){return $3r(t)&&t.type=="hidden"}function B3r(t){return z3r(t)&&t.hasAttribute("href")}function $3r(t){return t.nodeName.toLowerCase()=="input"}function z3r(t){return t.nodeName.toLowerCase()=="a"}function ICt(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let r=t.getAttribute("tabindex");return!!(r&&!isNaN(parseInt(r,10)))}function TCt(t){if(!ICt(t))return null;let r=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(r)?-1:r}function U3r(t){let r=t.nodeName.toLowerCase(),n=r==="input"&&t.type;return n==="text"||n==="password"||r==="select"||r==="textarea"}function V3r(t){return j3r(t)?!1:L3r(t)||B3r(t)||t.hasAttribute("contenteditable")||ICt(t)}function G3r(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var OTe=class{get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}constructor(r,n,o,i,s=!1,a){this._element=r,this._checker=n,this._ngZone=o,this._document=i,this._injector=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let r=this._startAnchor,n=this._endAnchor;r&&(r.removeEventListener("focus",this.startAnchorListener),r.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(r)))})}focusFirstTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(r)))})}focusLastTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(r)))})}_getRegionBoundary(r){let n=this._element.querySelectorAll(`[cdk-focus-region-${r}], [cdkFocusRegion${r}], [cdk-focus-${r}]`);return r=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(r){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let o=this._getFirstTabbableElement(n);return o?.focus(r),!!o}return n.focus(r),!0}return this.focusFirstTabbableElement(r)}focusFirstTabbableElement(r){let n=this._getRegionBoundary("start");return n&&n.focus(r),!!n}focusLastTabbableElement(r){let n=this._getRegionBoundary("end");return n&&n.focus(r),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=0;o<n.length;o++){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[o]):null;if(i)return i}return null}_getLastTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=n.length-1;o>=0;o--){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[o]):null;if(i)return i}return null}_createAnchor(){let r=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,r),r.classList.add("cdk-visually-hidden"),r.classList.add("cdk-focus-trap-anchor"),r.setAttribute("aria-hidden","true"),r}_toggleAnchorTabIndex(r,n){r?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(r){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_executeOnStable(r){this._ngZone.isStable?this._injector?_h(r,{injector:this._injector}):r():this._ngZone.onStable.pipe(Uc(1)).subscribe(r)}},DCt=(()=>{let r=class r{constructor(o,i,s){this._checker=o,this._ngZone=i,this._injector=Zt(Vc),this._document=s}create(o,i=!1){return new OTe(o,this._checker,this._ngZone,this._document,i,this._injector)}};r.\u0275fac=function(i){return new(i||r)(Et(RTe),Et(Cn),Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function PTe(t){return t.buttons===0||t.detail===0}function LTe(t){let r=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!r&&r.identifier===-1&&(r.radiusX==null||r.radiusX===1)&&(r.radiusY==null||r.radiusY===1)}var W3r=new En("cdk-input-modality-detector-options"),q3r={ignoreKeys:[18,17,224,91,16]},NCt=650,mR=dR({passive:!0,capture:!0}),H3r=(()=>{let r=class r{get mostRecentModality(){return this._modality.value}constructor(o,i,s,a){this._platform=o,this._mostRecentTarget=null,this._modality=new Ua(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(u=>u===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=gh(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<NCt||(this._modality.next(PTe(l)?"keyboard":"mouse"),this._mostRecentTarget=gh(l))},this._onTouchstart=l=>{if(LTe(l)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gh(l)},this._options=Gt(Gt({},q3r),a),this.modalityDetected=this._modality.pipe(Mz(1)),this.modalityChanged=this.modalityDetected.pipe(aS()),o.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,mR),s.addEventListener("mousedown",this._onMousedown,mR),s.addEventListener("touchstart",this._onTouchstart,mR)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mR),document.removeEventListener("mousedown",this._onMousedown,mR),document.removeEventListener("touchstart",this._onTouchstart,mR))}};r.\u0275fac=function(i){return new(i||r)(Et(ns),Et(Cn),Et(yn),Et(W3r,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Gre=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Gre||{}),Y3r=new En("cdk-focus-monitor-default-options"),Vre=dR({passive:!0,capture:!0}),Wre=(()=>{let r=class r{constructor(o,i,s,a,l){this._ngZone=o,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Xn,this._rootNodeFocusAndBlurListener=u=>{let c=gh(u);for(let f=c;f;f=f.parentElement)u.type==="focus"?this._onFocus(u,f):this._onBlur(u,f)},this._document=a,this._detectionMode=l?.detectionMode||Gre.IMMEDIATE}monitor(o,i=!1){let s=h1(o);if(!this._platform.isBrowser||s.nodeType!==1)return kr();let a=vCt(s)||this._getDocument(),l=this._elementInfo.get(s);if(l)return i&&(l.checkChildren=!0),l.subject;let u={checkChildren:i,subject:new Xn,rootNode:a};return this._elementInfo.set(s,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(o){let i=h1(o),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(o,i,s){let a=h1(o),l=this._getDocument().activeElement;a===l?this._getClosestElementsInfo(a).forEach(([u,c])=>this._originChanged(u,i,c)):(this._setOrigin(i),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((o,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(o){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(o)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:o&&this._isLastInteractionFromInputLabel(o)?"mouse":"program"}_shouldBeAttributedToTouch(o){return this._detectionMode===Gre.EVENTUAL||!!o?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(o,i){o.classList.toggle("cdk-focused",!!i),o.classList.toggle("cdk-touch-focused",i==="touch"),o.classList.toggle("cdk-keyboard-focused",i==="keyboard"),o.classList.toggle("cdk-mouse-focused",i==="mouse"),o.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(o,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=o,this._originFromTouchInteraction=o==="touch"&&i,this._detectionMode===Gre.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?NCt:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(o,i){let s=this._elementInfo.get(i),a=gh(o);!s||!s.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),s)}_onBlur(o,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&o.relatedTarget instanceof Node&&i.contains(o.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(o,i){o.subject.observers.length&&this._ngZone.run(()=>o.subject.next(i))}_registerGlobalListeners(o){if(!this._platform.isBrowser)return;let i=o.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vre),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vre)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ns(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(o){let i=o.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vre),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vre),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(o,i,s){this._setClasses(o,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(o){let i=[];return this._elementInfo.forEach((s,a)=>{(a===o||s.checkChildren&&a.contains(o))&&i.push([a,s])}),i}_isLastInteractionFromInputLabel(o){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===o||o.nodeName!=="INPUT"&&o.nodeName!=="TEXTAREA"||o.disabled)return!1;let a=o.labels;if(a){for(let l=0;l<a.length;l++)if(a[l].contains(i))return!0}return!1}};r.\u0275fac=function(i){return new(i||r)(Et(Cn),Et(ns),Et(H3r),Et(yn,8),Et(Y3r,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Tk=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Tk||{}),ACt="cdk-high-contrast-black-on-white",kCt="cdk-high-contrast-white-on-black",FTe="cdk-high-contrast-active",MCt=(()=>{let r=class r{constructor(o,i){this._platform=o,this._document=i,this._breakpointSubscription=Zt(ECt).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Tk.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(o):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(o.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Tk.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Tk.BLACK_ON_WHITE}return Tk.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(FTe,ACt,kCt),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Tk.BLACK_ON_WHITE?o.add(FTe,ACt):i===Tk.WHITE_ON_BLACK&&o.add(FTe,kCt)}}};r.\u0275fac=function(i){return new(i||r)(Et(ns),Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var X3r=new En("cdk-dir-doc",{providedIn:"root",factory:K3r});function K3r(){return Zt(yn)}var Z3r=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Q3r(t){let r=t?.toLowerCase()||"";return r==="auto"&&typeof navigator<"u"&&navigator?.language?Z3r.test(navigator.language)?"rtl":"ltr":r==="rtl"?"rtl":"ltr"}var gR=(()=>{let r=class r{constructor(o){if(this.value="ltr",this.change=new Hs,o){let i=o.body?o.body.dir:null,s=o.documentElement?o.documentElement.dir:null;this.value=Q3r(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}};r.\u0275fac=function(i){return new(i||r)(Et(X3r,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var iS=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})();function ePr(){return!0}var tPr=new En("mat-sanity-checks",{providedIn:"root",factory:ePr}),As=(()=>{let r=class r{constructor(o,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return gz()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};r.\u0275fac=function(i){return new(i||r)(Et(MCt),Et(tPr,8),Et(yn))},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[iS,iS]});let t=r;return t})();var yh=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(yh||{}),zTe=class{constructor(r,n,o,i=!1){this._renderer=r,this.element=n,this.config=o,this._animationForciblyDisabledThroughCss=i,this.state=yh.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},OCt=dR({passive:!0,capture:!0}),UTe=class{constructor(){this._events=new Map,this._delegateEventHandler=r=>{let n=gh(r);n&&this._events.get(r.type)?.forEach((o,i)=>{(i===n||i.contains(n))&&o.forEach(s=>s.handleEvent(r))})}}addHandler(r,n,o,i){let s=this._events.get(n);if(s){let a=s.get(o);a?a.add(i):s.set(o,new Set([i]))}else this._events.set(n,new Map([[o,new Set([i])]])),r.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,OCt)})}removeHandler(r,n,o){let i=this._events.get(r);if(!i)return;let s=i.get(n);s&&(s.delete(o),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(r),document.removeEventListener(r,this._delegateEventHandler,OCt)))}},RCt={enterDuration:225,exitDuration:150},rPr=800,PCt=dR({passive:!0,capture:!0}),LCt=["mousedown","touchstart"],jCt=["mouseup","mouseleave","touchend","touchcancel"],yz=class yz{constructor(r,n,o,i){this._target=r,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=h1(o))}fadeInRipple(r,n,o={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Gt(Gt({},RCt),o.animation);o.centered&&(r=i.left+i.width/2,n=i.top+i.height/2);let a=o.radius||nPr(r,n,i),l=r-i.left,u=n-i.top,c=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-a}px`,f.style.top=`${u-a}px`,f.style.height=`${a*2}px`,f.style.width=`${a*2}px`,o.color!=null&&(f.style.backgroundColor=o.color),f.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(f);let d=window.getComputedStyle(f),p=d.transitionProperty,h=d.transitionDuration,m=p==="none"||h==="0s"||h==="0s, 0s"||i.width===0&&i.height===0,g=new zTe(this,f,o,m);f.style.transform="scale3d(1, 1, 1)",g.state=yh.FADING_IN,o.persistent||(this._mostRecentTransientRipple=g);let y=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>this._finishRippleTransition(g),x=()=>this._destroyRipple(g);f.addEventListener("transitionend",b),f.addEventListener("transitioncancel",x),y={onTransitionEnd:b,onTransitionCancel:x}}),this._activeRipples.set(g,y),(m||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(r){if(r.state===yh.FADING_OUT||r.state===yh.HIDDEN)return;let n=r.element,o=Gt(Gt({},RCt),r.config.animation);n.style.transitionDuration=`${o.exitDuration}ms`,n.style.opacity="0",r.state=yh.FADING_OUT,(r._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(r)}fadeOutAll(){this._getActiveRipples().forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){let n=h1(r);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,LCt.forEach(o=>{yz._eventManager.addHandler(this._ngZone,o,n,this)}))}handleEvent(r){r.type==="mousedown"?this._onMousedown(r):r.type==="touchstart"?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{jCt.forEach(n=>{this._triggerElement.addEventListener(n,this,PCt)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(r){r.state===yh.FADING_IN?this._startFadeOutTransition(r):r.state===yh.FADING_OUT&&this._destroyRipple(r)}_startFadeOutTransition(r){let n=r===this._mostRecentTransientRipple,{persistent:o}=r.config;r.state=yh.VISIBLE,!o&&(!n||!this._isPointerDown)&&r.fadeOut()}_destroyRipple(r){let n=this._activeRipples.get(r)??null;this._activeRipples.delete(r),this._activeRipples.size||(this._containerRect=null),r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),r.state=yh.HIDDEN,n!==null&&(r.element.removeEventListener("transitionend",n.onTransitionEnd),r.element.removeEventListener("transitioncancel",n.onTransitionCancel)),r.element.remove()}_onMousedown(r){let n=PTe(r),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+rPr;!this._target.rippleDisabled&&!n&&!o&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!LTe(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=r.changedTouches;if(n)for(let o=0;o<n.length;o++)this.fadeInRipple(n[o].clientX,n[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(r=>{let n=r.state===yh.VISIBLE||r.config.terminateOnPointerUp&&r.state===yh.FADING_IN;!r.config.persistent&&n&&r.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let r=this._triggerElement;r&&(LCt.forEach(n=>yz._eventManager.removeHandler(n,r,this)),this._pointerUpEventsRegistered&&(jCt.forEach(n=>r.removeEventListener(n,this,PCt)),this._pointerUpEventsRegistered=!1))}};yz._eventManager=new UTe;var VTe=yz;function nPr(t,r,n){let o=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom));return Math.sqrt(o*o+i*i)}var VCt=new En("mat-ripple-global-options"),GCt=(()=>{let r=class r{get disabled(){return this._disabled}set disabled(o){o&&this.fadeOutAllNonPersistent(),this._disabled=o,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(o){this._trigger=o,this._setupTriggerEventsIfEnabled()}constructor(o,i,s,a,l){this._elementRef=o,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new VTe(this,i,o,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Gt(Gt(Gt({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(o,i=0,s){return typeof o=="number"?this._rippleRenderer.fadeInRipple(o,i,Gt(Gt({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Gt(Gt({},this.rippleConfig),o))}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(Cn),vr(ns),vr(VCt,8),vr(wh,8))},r.\u0275dir=Va({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){i&2&&Gc("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=r;return t})(),bz=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,As]});let t=r;return t})();var oPr=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As]});let t=r;return t})();var GTe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[bz,As,oPr]});let t=r;return t})(),BCt={capture:!0},$Ct=["focus","mousedown","mouseenter","touchstart"],BTe="mat-ripple-loader-uninitialized",$Te="mat-ripple-loader-class-name",zCt="mat-ripple-loader-centered",qre="mat-ripple-loader-disabled",WCt=(()=>{let r=class r{constructor(){this._document=Zt(yn,{optional:!0}),this._animationMode=Zt(wh,{optional:!0}),this._globalRippleOptions=Zt(VCt,{optional:!0}),this._platform=Zt(ns),this._ngZone=Zt(Cn),this._hosts=new Map,this._onInteraction=o=>{let i=gh(o);if(i instanceof HTMLElement){let s=i.closest(`[${BTe}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(let o of $Ct)this._document?.addEventListener(o,this._onInteraction,BCt)})}ngOnDestroy(){let o=this._hosts.keys();for(let i of o)this.destroyRipple(i);for(let i of $Ct)this._document?.removeEventListener(i,this._onInteraction,BCt)}configureRipple(o,i){o.setAttribute(BTe,this._globalRippleOptions?.namespace??""),(i.className||!o.hasAttribute($Te))&&o.setAttribute($Te,i.className||""),i.centered&&o.setAttribute(zCt,""),i.disabled&&o.setAttribute(qre,"")}getRipple(o){return this._hosts.get(o)||this._createRipple(o)}setDisabled(o,i){let s=this._hosts.get(o);if(s){s.disabled=i;return}i?o.setAttribute(qre,""):o.removeAttribute(qre)}_createRipple(o){if(!this._document)return;let i=this._hosts.get(o);if(i)return i;o.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",o.getAttribute($Te)),o.append(s);let a=new GCt(new No(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=o,a.centered=o.hasAttribute(zCt),a.disabled=o.hasAttribute(qre),this.attachRipple(o,a),a}attachRipple(o,i){o.removeAttribute(BTe),this._hosts.set(o,i)}destroyRipple(o){let i=this._hosts.get(o);i&&(i.ngOnDestroy(),this._hosts.delete(o))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var sPr=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var aPr=["mat-icon-button",""],lPr=["*"];var uPr=new En("MAT_BUTTON_CONFIG");var cPr=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],fPr=(()=>{let r=class r{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(o){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,o)}get disableRipple(){return this._disableRipple}set disableRipple(o){this._disableRipple=o,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(o){this._disabled=o,this._updateRippleDisabled()}constructor(o,i,s,a){this._elementRef=o,this._platform=i,this._ngZone=s,this._animationMode=a,this._focusMonitor=Zt(Wre),this._rippleLoader=Zt(WCt),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let l=Zt(uPr,{optional:!0}),u=o.nativeElement,c=u.classList;this.disabledInteractive=l?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:d}of cPr)u.hasAttribute(f)&&c.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(o="program",i){o?this._focusMonitor.focusVia(this._elementRef.nativeElement,o,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};r.\u0275fac=function(i){Lk()},r.\u0275dir=Va({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",su],disabled:[2,"disabled","disabled",su],ariaDisabled:[2,"aria-disabled","ariaDisabled",su],disabledInteractive:[2,"disabledInteractive","disabledInteractive",su]},features:[od]});let t=r;return t})();var qCt=(()=>{let r=class r extends fPr{constructor(o,i,s,a){super(o,i,s,a),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(ns),vr(Cn),vr(wh,8))},r.\u0275cmp=ki({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,s){i&2&&(id("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),RR(s.color?"mat-"+s.color:""),Gc("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[sp,Ii],attrs:aPr,ngContentSelectors:lPr,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){i&1&&(ad(),Ks(0,"span",0),Zu(1),Ks(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',sPr],encapsulation:2,changeDetection:0});let t=r;return t})();var HCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,bz,As]});let t=r;return t})();var pPr=20,xz=(()=>{let r=class r{constructor(o,i,s){this._ngZone=o,this._platform=i,this._scrolled=new Xn,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(o){this.scrollContainers.has(o)||this.scrollContainers.set(o,o.elementScrolled().subscribe(()=>this._scrolled.next(o)))}deregister(o){let i=this.scrollContainers.get(o);i&&(i.unsubscribe(),this.scrollContainers.delete(o))}scrolled(o=pPr){return this._platform.isBrowser?new Mk(i=>{this._globalSubscription||this._addGlobalListener();let s=o>0?this._scrolled.pipe(hne(o)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):kr()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((o,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(o,i){let s=this.getAncestorScrollContainers(o);return this.scrolled(i).pipe(Ds(a=>!a||s.indexOf(a)>-1))}getAncestorScrollContainers(o){let i=[];return this.scrollContainers.forEach((s,a)=>{this._scrollableContainsElement(a,o)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(o,i){let s=h1(i),a=o.getElementRef().nativeElement;do if(s==a)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let o=this._getWindow();return kR(o.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};r.\u0275fac=function(i){return new(i||r)(Et(Cn),Et(ns),Et(yn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Yre=(()=>{let r=class r{constructor(o,i,s,a){this.elementRef=o,this.scrollDispatcher=i,this.ngZone=s,this.dir=a,this._destroyed=new Xn,this._elementScrolled=new Mk(l=>this.ngZone.runOutsideAngular(()=>kR(this.elementRef.nativeElement,"scroll").pipe(Ns(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(o){let i=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";o.left==null&&(o.left=s?o.end:o.start),o.right==null&&(o.right=s?o.start:o.end),o.bottom!=null&&(o.top=i.scrollHeight-i.clientHeight-o.bottom),s&&pR()!=yg.NORMAL?(o.left!=null&&(o.right=i.scrollWidth-i.clientWidth-o.left),pR()==yg.INVERTED?o.left=o.right:pR()==yg.NEGATED&&(o.left=o.right?-o.right:o.right)):o.right!=null&&(o.left=i.scrollWidth-i.clientWidth-o.right),this._applyScrollToOptions(o)}_applyScrollToOptions(o){let i=this.elementRef.nativeElement;Ure()?i.scrollTo(o):(o.top!=null&&(i.scrollTop=o.top),o.left!=null&&(i.scrollLeft=o.left))}measureScrollOffset(o){let i="left",s="right",a=this.elementRef.nativeElement;if(o=="top")return a.scrollTop;if(o=="bottom")return a.scrollHeight-a.clientHeight-a.scrollTop;let l=this.dir&&this.dir.value=="rtl";return o=="start"?o=l?s:i:o=="end"&&(o=l?i:s),l&&pR()==yg.INVERTED?o==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:l&&pR()==yg.NEGATED?o==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:o==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(xz),vr(Cn),vr(gR,8))},r.\u0275dir=Va({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let t=r;return t})(),hPr=20,vz=(()=>{let r=class r{constructor(o,i,s){this._platform=o,this._change=new Xn,this._changeListener=a=>{this._change.next(a)},this._document=s,i.runOutsideAngular(()=>{if(o.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let o=this._getWindow();o.removeEventListener("resize",this._changeListener),o.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let o={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),o}getViewportRect(){let o=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:o.top,left:o.left,bottom:o.top+s,right:o.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let o=this._document,i=this._getWindow(),s=o.documentElement,a=s.getBoundingClientRect(),l=-a.top||o.body.scrollTop||i.scrollY||s.scrollTop||0,u=-a.left||o.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:l,left:u}}change(o=hPr){return o>0?this._change.pipe(hne(o)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let o=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:o.innerWidth,height:o.innerHeight}:{width:0,height:0}}};r.\u0275fac=function(i){return new(i||r)(Et(ns),Et(Cn),Et(yn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var m1=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})(),WTe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[iS,m1,iS,m1]});let t=r;return t})();var wz=class{attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},qTe=class extends wz{constructor(r,n,o,i,s){super(),this.component=r,this.viewContainerRef=n,this.injector=o,this.componentFactoryResolver=i,this.projectableNodes=s}},Xre=class extends wz{constructor(r,n,o,i){super(),this.templateRef=r,this.viewContainerRef=n,this.context=o,this.injector=i}get origin(){return this.templateRef.elementRef}attach(r,n=this.context){return this.context=n,super.attach(r)}detach(){return this.context=void 0,super.detach()}},HTe=class extends wz{constructor(r){super(),this.element=r instanceof No?r.nativeElement:r}},YTe=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof qTe)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof Xre)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof HTe)return this._attachedPortal=r,this.attachDomPortal(r)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Kre=class extends YTe{constructor(r,n,o,i,s){super(),this.outletElement=r,this._componentFactoryResolver=n,this._appRef=o,this._defaultInjector=i,this.attachDomPortal=a=>{this._document;let l=a.element;l.parentNode;let u=this._document.createComment("dom-portal");l.parentNode.insertBefore(u,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(l,u)})},this._document=s}attachComponentPortal(r){let o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),i;return r.viewContainerRef?(i=r.viewContainerRef.createComponent(o,r.viewContainerRef.length,r.injector||r.viewContainerRef.injector,r.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=o.create(r.injector||this._defaultInjector||Vc.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=r,i}attachTemplatePortal(r){let n=r.viewContainerRef,o=n.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return o.rootNodes.forEach(i=>this.outletElement.appendChild(i)),o.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(o);i!==-1&&n.remove(i)}),this._attachedPortal=r,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}};var XCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({});let t=r;return t})();var KCt=Ure(),XTe=class{constructor(r,n){this._viewportRuler=r,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=Vs(-this._previousScrollPosition.left),r.style.top=Vs(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,n=this._document.body,o=r.style,i=n.style,s=o.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),KCt&&(o.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KCt&&(o.scrollBehavior=s,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,o=this._viewportRuler.getViewportSize();return n.scrollHeight>o.height||n.scrollWidth>o.width}};var KTe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._ngZone=n,this._viewportRuler=o,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(Ds(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Zre=class{enable(){}disable(){}attach(){}};function ZTe(t,r){return r.some(n=>{let o=t.bottom<n.top,i=t.top>n.bottom,s=t.right<n.left,a=t.left>n.right;return o||i||s||a})}function ZCt(t,r){return r.some(n=>{let o=t.top<n.top,i=t.bottom>n.bottom,s=t.left<n.left,a=t.right>n.right;return o||i||s||a})}var QTe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._viewportRuler=n,this._ngZone=o,this._config=i,this._scrollSubscription=null}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:i}=this._viewportRuler.getViewportSize();ZTe(n,[{width:o,height:i,bottom:i,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},mPr=(()=>{let r=class r{constructor(o,i,s,a){this._scrollDispatcher=o,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new Zre,this.close=l=>new KTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new XTe(this._viewportRuler,this._document),this.reposition=l=>new QTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=a}};r.\u0275fac=function(i){return new(i||r)(Et(xz),Et(vz),Et(Cn),Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Qre=class{constructor(r){if(this.scrollStrategy=new Zre,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,r){let n=Object.keys(r);for(let o of n)r[o]!==void 0&&(this[o]=r[o])}}};var JTe=class{constructor(r,n){this.connectionPair=r,this.scrollableViewProperties=n}};var rEt=(()=>{let r=class r{constructor(o){this._attachedOverlays=[],this._document=o}ngOnDestroy(){this.detach()}add(o){this.remove(o),this._attachedOverlays.push(o)}remove(o){let i=this._attachedOverlays.indexOf(o);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};r.\u0275fac=function(i){return new(i||r)(Et(yn))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),gPr=(()=>{let r=class r extends rEt{constructor(o,i){super(o),this._ngZone=i,this._keydownListener=s=>{let a=this._attachedOverlays;for(let l=a.length-1;l>-1;l--)if(a[l]._keydownEvents.observers.length>0){let u=a[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s);break}}}add(o){super.add(o),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(Cn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),yPr=(()=>{let r=class r extends rEt{constructor(o,i,s){super(o),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=gh(a)},this._clickListener=a=>{let l=gh(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let f=c.length-1;f>-1;f--){let d=c[f];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(l)||d.overlayElement.contains(u))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(a)):p.next(a)}}}add(o){if(super.add(o),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let o=this._document.body;o.removeEventListener("pointerdown",this._pointerDownListener,!0),o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(o){o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0)}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(ns),Et(Cn,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),nEt=(()=>{let r=class r{constructor(o,i){this._platform=i,this._document=o}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let o="cdk-overlay-container";if(this._platform.isBrowser||gz()){let s=this._document.querySelectorAll(`.${o}[platform="server"], .${o}[platform="test"]`);for(let a=0;a<s.length;a++)s[a].remove()}let i=this._document.createElement("div");i.classList.add(o),gz()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};r.\u0275fac=function(i){return new(i||r)(Et(yn),Et(ns))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),eAe=class{constructor(r,n,o,i,s,a,l,u,c,f=!1,d){this._portalOutlet=r,this._host=n,this._pane=o,this._config=i,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=u,this._outsideClickDispatcher=c,this._animationsDisabled=f,this._injector=d,this._backdropElement=null,this._backdropClick=new Xn,this._attachments=new Xn,this._detachments=new Xn,this._locationChanges=_b.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new Xn,this._outsidePointerEvents=new Xn,this._renders=new Xn,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=xke(()=>fke(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(r){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(r);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),_h(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,r&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=Gt(Gt({},this._config),r),this._updateElementSize()}setDirection(r){this._config=Is(Gt({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=Vs(this._config.width),r.height=Vs(this._config.height),r.minWidth=Vs(this._config.minWidth),r.minHeight=Vs(this._config.minHeight),r.maxWidth=Vs(this._config.maxWidth),r.maxHeight=Vs(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let r=this._backdropElement;if(r){if(this._animationsDisabled){this._disposeBackdrop(r);return}r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{r.addEventListener("transitionend",this._backdropTransitionendHandler)}),r.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(r)},500))}}_toggleClasses(r,n,o){let i=hR(n||[]).filter(s=>!!s);i.length&&(o?r.classList.add(...i):r.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let r=this._renders.pipe(Ns(Nz(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),r.unsubscribe())})})}_disposeScrollStrategy(){let r=this._scrollStrategy;r&&(r.disable(),r.detach&&r.detach())}_disposeBackdrop(r){r&&(r.removeEventListener("click",this._backdropClickHandler),r.removeEventListener("transitionend",this._backdropTransitionendHandler),r.remove(),this._backdropElement===r&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},QCt="cdk-overlay-connected-position-bounding-box",bPr=/([A-Za-z%]+)$/,tAe=class{get positions(){return this._preferredPositions}constructor(r,n,o,i,s){this._viewportRuler=n,this._document=o,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Xn,this._resizeSubscription=_b.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(QCt),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,n=this._overlayRect,o=this._viewportRect,i=this._containerRect,s=[],a;for(let l of this._preferredPositions){let u=this._getOriginPoint(r,i,l),c=this._getOverlayPoint(u,n,l),f=this._getOverlayFit(c,n,o,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,u);return}if(this._canFitWithFlexibleDimensions(f,c,o)){s.push({position:l,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,l)});continue}(!a||a.overlayFit.visibleArea<f.visibleArea)&&(a={overlayFit:f,overlayPoint:c,originPoint:u,position:l,overlayRect:n})}if(s.length){let l=null,u=-1;for(let c of s){let f=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);f>u&&(u=f,l=c)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ak(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(QCt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,n)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,n,o){let i;if(o.originX=="center")i=r.left+r.width/2;else{let a=this._isRtl()?r.right:r.left,l=this._isRtl()?r.left:r.right;i=o.originX=="start"?a:l}n.left<0&&(i-=n.left);let s;return o.originY=="center"?s=r.top+r.height/2:s=o.originY=="top"?r.top:r.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(r,n,o){let i;o.overlayX=="center"?i=-n.width/2:o.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let s;return o.overlayY=="center"?s=-n.height/2:s=o.overlayY=="top"?0:-n.height,{x:r.x+i,y:r.y+s}}_getOverlayFit(r,n,o,i){let s=eEt(n),{x:a,y:l}=r,u=this._getOffset(i,"x"),c=this._getOffset(i,"y");u&&(a+=u),c&&(l+=c);let f=0-a,d=a+s.width-o.width,p=0-l,h=l+s.height-o.height,m=this._subtractOverflows(s.width,f,d),g=this._subtractOverflows(s.height,p,h),y=m*g;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(r,n,o){if(this._hasFlexibleDimensions){let i=o.bottom-n.y,s=o.right-n.x,a=JCt(this._overlayRef.getConfig().minHeight),l=JCt(this._overlayRef.getConfig().minWidth),u=r.fitsInViewportVertically||a!=null&&a<=i,c=r.fitsInViewportHorizontally||l!=null&&l<=s;return u&&c}return!1}_pushOverlayOnScreen(r,n,o){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let i=eEt(n),s=this._viewportRect,a=Math.max(r.x+i.width-s.width,0),l=Math.max(r.y+i.height-s.height,0),u=Math.max(s.top-o.top-r.y,0),c=Math.max(s.left-o.left-r.x,0),f=0,d=0;return i.width<=s.width?f=c||-a:f=r.x<this._viewportMargin?s.left-o.left-r.x:0,i.height<=s.height?d=u||-l:d=r.y<this._viewportMargin?s.top-o.top-r.y:0,this._previousPushAmount={x:f,y:d},{x:r.x+f,y:r.y+d}}_applyPosition(r,n){if(this._setTransformOrigin(r),this._setOverlayElementStyles(n,r),this._setBoundingBoxStyles(n,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!xPr(this._lastScrollVisibility,o)){let i=new JTe(r,o);this._positionChanges.next(i)}this._lastScrollVisibility=o}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,i=r.overlayY;r.overlayX==="center"?o="center":this._isRtl()?o=r.overlayX==="start"?"right":"left":o=r.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${o} ${i}`}_calculateBoundingBoxRect(r,n){let o=this._viewportRect,i=this._isRtl(),s,a,l;if(n.overlayY==="top")a=r.y,s=o.height-a+this._viewportMargin;else if(n.overlayY==="bottom")l=o.height-r.y+this._viewportMargin*2,s=o.height-l+this._viewportMargin;else{let h=Math.min(o.bottom-r.y+o.top,r.y),m=this._lastBoundingBoxSize.height;s=h*2,a=r.y-h,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(a=r.y-m/2)}let u=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,c=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,f,d,p;if(c)p=o.width-r.x+this._viewportMargin*2,f=r.x-this._viewportMargin;else if(u)d=r.x,f=o.right-r.x;else{let h=Math.min(o.right-r.x+o.left,r.x),m=this._lastBoundingBoxSize.width;f=h*2,d=r.x-h,f>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=r.x-m/2)}return{top:a,left:d,bottom:l,right:p,width:f,height:s}}_setBoundingBoxStyles(r,n){let o=this._calculateBoundingBoxRect(r,n);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Vs(o.height),i.top=Vs(o.top),i.bottom=Vs(o.bottom),i.width=Vs(o.width),i.left=Vs(o.left),i.right=Vs(o.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(i.maxHeight=Vs(s)),a&&(i.maxWidth=Vs(a))}this._lastBoundingBoxSize=o,Ak(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ak(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ak(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,n){let o={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){let f=this._viewportRuler.getViewportScrollPosition();Ak(o,this._getExactOverlayY(n,r,f)),Ak(o,this._getExactOverlayX(n,r,f))}else o.position="static";let l="",u=this._getOffset(n,"x"),c=this._getOffset(n,"y");u&&(l+=`translateX(${u}px) `),c&&(l+=`translateY(${c}px)`),o.transform=l.trim(),a.maxHeight&&(i?o.maxHeight=Vs(a.maxHeight):s&&(o.maxHeight="")),a.maxWidth&&(i?o.maxWidth=Vs(a.maxWidth):s&&(o.maxWidth="")),Ak(this._pane.style,o)}_getExactOverlayY(r,n,o){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,r);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),r.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;i.bottom=`${a-(s.y+this._overlayRect.height)}px`}else i.top=Vs(s.y);return i}_getExactOverlayX(r,n,o){let i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,r);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o));let a;if(this._isRtl()?a=r.overlayX==="end"?"left":"right":a=r.overlayX==="end"?"right":"left",a==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(s.x+this._overlayRect.width)}px`}else i.left=Vs(s.x);return i}_getScrollVisibility(){let r=this._getOriginRect(),n=this._pane.getBoundingClientRect(),o=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ZCt(r,o),isOriginOutsideView:ZTe(r,o),isOverlayClipped:ZCt(n,o),isOverlayOutsideView:ZTe(n,o)}}_subtractOverflows(r,...n){return n.reduce((o,i)=>o-Math.max(i,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+r-this._viewportMargin,bottom:o.top+n-this._viewportMargin,width:r-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,n){return n==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&hR(r).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){let r=this._origin;if(r instanceof No)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let n=r.width||0,o=r.height||0;return{top:r.y,bottom:r.y+o,left:r.x,right:r.x+n,height:o,width:n}}};function Ak(t,r){for(let n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}function JCt(t){if(typeof t!="number"&&t!=null){let[r,n]=t.split(bPr);return!n||n==="px"?parseFloat(r):null}return t||null}function eEt(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function xPr(t,r){return t===r?!0:t.isOriginClipped===r.isOriginClipped&&t.isOriginOutsideView===r.isOriginOutsideView&&t.isOverlayClipped===r.isOverlayClipped&&t.isOverlayOutsideView===r.isOverlayOutsideView}var tEt="cdk-global-overlay-wrapper",rAe=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(r){let n=r.getConfig();this._overlayRef=r,this._width&&!n.width&&r.updateSize({width:this._width}),this._height&&!n.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(tEt),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:a,maxHeight:l}=o,u=(i==="100%"||i==="100vw")&&(!a||a==="100%"||a==="100vw"),c=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",m="",g="";u?g="flex-start":f==="center"?(g="center",p?m=d:h=d):p?f==="left"||f==="end"?(g="flex-end",h=d):(f==="right"||f==="start")&&(g="flex-start",m=d):f==="left"||f==="start"?(g="flex-start",h=d):(f==="right"||f==="end")&&(g="flex-end",m=d),r.position=this._cssPosition,r.marginLeft=u?"0":h,r.marginTop=c?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=u?"0":m,n.justifyContent=g,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,o=n.style;n.classList.remove(tEt),o.justifyContent=o.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},vPr=(()=>{let r=class r{constructor(o,i,s,a){this._viewportRuler=o,this._document=i,this._platform=s,this._overlayContainer=a}global(){return new rAe}flexibleConnectedTo(o){return new tAe(o,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};r.\u0275fac=function(i){return new(i||r)(Et(vz),Et(yn),Et(ns),Et(nEt))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),wPr=0,g1=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f,d,p,h,m){this.scrollStrategies=o,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=a,this._keyboardDispatcher=l,this._injector=u,this._ngZone=c,this._document=f,this._directionality=d,this._location=p,this._outsideClickDispatcher=h,this._animationsModuleType=m}create(o){let i=this._createHostElement(),s=this._createPaneElement(i),a=this._createPortalOutlet(s),l=new Qre(o);return l.direction=l.direction||this._directionality.value,new eAe(a,i,s,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Sb))}position(){return this._positionBuilder}_createPaneElement(o){let i=this._document.createElement("div");return i.id=`cdk-overlay-${wPr++}`,i.classList.add("cdk-overlay-pane"),o.appendChild(i),i}_createHostElement(){let o=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalOutlet(o){return this._appRef||(this._appRef=this._injector.get(Bk)),new Kre(o,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};r.\u0275fac=function(i){return new(i||r)(Et(mPr),Et(nEt),Et(Pz),Et(vPr),Et(gPr),Et(Vc),Et(Cn),Et(yn),Et(gR),Et(hS),Et(yPr),Et(wh,8))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var _Pr=new En("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=Zt(g1);return()=>t.scrollStrategies.reposition()}});function SPr(t){return()=>t.scrollStrategies.reposition()}var CPr={provide:_Pr,deps:[g1],useFactory:SPr},Jre=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[g1,CPr],imports:[iS,XCt,WTe,WTe]});let t=r;return t})();var ene=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,Qu,_Ct,As]});let t=r;return t})();var APr=new En("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=Zt(g1);return()=>t.scrollStrategies.reposition()}});function kPr(t){return()=>t.scrollStrategies.reposition()}var IPr={provide:APr,deps:[g1],useFactory:kPr};var oEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[IPr],imports:[Qu,Jre,GTe,As,m1,ene,GTe,As]});let t=r;return t})();var iEt=["*"],NPr=["content"],MPr=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],FPr=["mat-drawer","mat-drawer-content","*"];function OPr(t,r){if(t&1){let n=sd();Bo(0,"div",1),nu("click",function(){td(n);let i=ou();return rd(i._onBackdropClicked())}),ti()}if(t&2){let n=ou();Gc("mat-drawer-shown",n._isShowingBackdrop())}}function RPr(t,r){t&1&&(Bo(0,"mat-drawer-content"),Zu(1,2),ti())}var PPr={transformDrawer:LR("transform",[zk("open, open-instant",Cb({transform:"none",visibility:"visible"})),zk("void",Cb({"box-shadow":"none",visibility:"hidden"})),gS("void => open-instant",mS("0ms")),gS("void <=> open, open-instant => void",mS("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var LPr=new En("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:jPr}),sEt=new En("MAT_DRAWER_CONTAINER");function jPr(){return!1}var _z=(()=>{let r=class r extends Yre{constructor(o,i,s,a,l){super(s,a,l),this._changeDetectorRef=o,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};r.\u0275fac=function(i){return new(i||r)(vr(ld),vr(XAe(()=>oAe)),vr(No),vr(xz),vr(Cn))},r.\u0275cmp=ki({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,s){i&2&&_ne("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},standalone:!0,features:[Sg([{provide:Yre,useExisting:r}]),sp,Ii],ngContentSelectors:iEt,decls:1,vars:0,template:function(i,s){i&1&&(ad(),Zu(0))},encapsulation:2,changeDetection:0});let t=r;return t})(),nAe=(()=>{let r=class r{get position(){return this._position}set position(o){o=o==="end"?"end":"start",o!==this._position&&(this._isAttached&&this._updatePositionInParent(o),this._position=o,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(o){this._mode=o,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(o){this._disableClose=Ck(o)}get autoFocus(){let o=this._autoFocus;return o??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(o){(o==="true"||o==="false"||o==null)&&(o=Ck(o)),this._autoFocus=o}get opened(){return this._opened}set opened(o){this.toggle(Ck(o))}constructor(o,i,s,a,l,u,c,f){this._elementRef=o,this._focusTrapFactory=i,this._focusMonitor=s,this._platform=a,this._ngZone=l,this._interactivityChecker=u,this._doc=c,this._container=f,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Xn,this._animationEnd=new Xn,this._animationState="void",this.openedChange=new Hs(!0),this._openedStream=this.openedChange.pipe(Ds(d=>d),dn(()=>{})),this.openedStart=this._animationStarted.pipe(Ds(d=>d.fromState!==d.toState&&d.toState.indexOf("open")===0),DR(void 0)),this._closedStream=this.openedChange.pipe(Ds(d=>!d),dn(()=>{})),this.closedStart=this._animationStarted.pipe(Ds(d=>d.fromState!==d.toState&&d.toState==="void"),DR(void 0)),this._destroyed=new Xn,this.onPositionChanged=new Hs,this._modeChanged=new Xn,this._injector=Zt(Vc),this.openedChange.pipe(Ns(this._destroyed)).subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{kR(this._elementRef.nativeElement,"keydown").pipe(Ds(d=>d.keyCode===27&&!this.disableClose&&!wCt(d)),Ns(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(aS((d,p)=>d.fromState===p.fromState&&d.toState===p.toState)).subscribe(d=>{let{fromState:p,toState:h}=d;(h.indexOf("open")===0&&p==="void"||h==="void"&&p.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(o,i){this._interactivityChecker.isFocusable(o)||(o.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{o.removeEventListener("blur",s),o.removeEventListener("mousedown",s),o.removeAttribute("tabindex")};o.addEventListener("blur",s),o.addEventListener("mousedown",s)})),o.focus(i)}_focusByCssSelector(o,i){let s=this._elementRef.nativeElement.querySelector(o);s&&this._forceFocus(s,i)}_takeFocus(){if(!this._focusTrap)return;let o=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":_h(()=>{!this._focusTrap.focusInitialElement()&&typeof o.focus=="function"&&o.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(o){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,o):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let o=this._doc.activeElement;return!!o&&this._elementRef.nativeElement.contains(o)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(o){return this.toggle(!0,o)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(o=!this.opened,i){o&&i&&(this._openedVia=i);let s=this._setOpen(o,!o&&this._isFocusWithinDrawer(),this._openedVia||"program");return o||(this._openedVia=null),s}_setOpen(o,i,s){return this._opened=o,o?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(Uc(1)).subscribe(l=>a(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(o){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,s=i.parentNode;o==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,i)),s.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(DCt),vr(Wre),vr(ns),vr(Cn),vr(RTe),vr(yn,8),vr(sEt,8))},r.\u0275cmp=ki({type:r,selectors:[["mat-drawer"]],viewQuery:function(i,s){if(i&1&&iu(NPr,5),i&2){let a;Zs(a=Qs())&&(s._content=a.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,s){i&1&&mke("@transform.start",function(l){return s._animationStarted.next(l)})("@transform.done",function(l){return s._animationEnd.next(l)}),i&2&&(hke("@transform",s._animationState),id("align",null),Gc("mat-drawer-end",s.position==="end")("mat-drawer-over",s.mode==="over")("mat-drawer-push",s.mode==="push")("mat-drawer-side",s.mode==="side")("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[Ii],ngContentSelectors:iEt,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,s){i&1&&(ad(),Bo(0,"div",1,0),Zu(2),ti())},dependencies:[Yre],encapsulation:2,data:{animation:[PPr.transformDrawer]},changeDetection:0});let t=r;return t})(),oAe=(()=>{let r=class r{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(o){this._autosize=Ck(o)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(o){this._backdropOverride=o==null?null:Ck(o)}get scrollable(){return this._userContent||this._content}constructor(o,i,s,a,l,u=!1,c){this._dir=o,this._element=i,this._ngZone=s,this._changeDetectorRef=a,this._animationMode=c,this._drawers=new Oz,this.backdropClick=new Hs,this._destroyed=new Xn,this._doCheckSubject=new Xn,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Xn,this._injector=Zt(Vc),o&&o.change.pipe(Ns(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(Ns(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=u}ngAfterContentInit(){this._allDrawers.changes.pipe(E1(this._allDrawers),Ns(this._destroyed)).subscribe(o=>{this._drawers.reset(o.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(E1(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(o=>{this._watchDrawerToggle(o),this._watchDrawerPosition(o),this._watchDrawerMode(o)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(IR(10),Ns(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(o=>o.open())}close(){this._drawers.forEach(o=>o.close())}updateContentMargins(){let o=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")o+=this._left._getWidth();else if(this._left.mode=="push"){let s=this._left._getWidth();o+=s,i-=s}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let s=this._right._getWidth();i+=s,o-=s}}o=o||null,i=i||null,(o!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:o,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(o){o._animationStarted.pipe(Ds(i=>i.fromState!==i.toState),Ns(this._drawers.changes)).subscribe(i=>{i.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),o.mode!=="side"&&o.openedChange.pipe(Ns(this._drawers.changes)).subscribe(()=>this._setContainerClass(o.opened))}_watchDrawerPosition(o){o&&o.onPositionChanged.pipe(Ns(this._drawers.changes)).subscribe(()=>{_h(()=>{this._validateDrawers()},{injector:this._injector,phase:cke.Read})})}_watchDrawerMode(o){o&&o._modeChanged.pipe(Ns(Nz(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(o){let i=this._element.nativeElement.classList,s="mat-drawer-container-has-open";o?i.add(s):i.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(o=>{o.position=="end"?(this._end!=null,this._end=o):(this._start!=null,this._start=o)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(o=>o&&!o.disableClose&&this._drawerHasBackdrop(o)).forEach(o=>o._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(o){return o!=null&&o.opened}_drawerHasBackdrop(o){return this._backdropOverride==null?!!o&&o.mode!=="side":this._backdropOverride}};r.\u0275fac=function(i){return new(i||r)(vr(gR,8),vr(No),vr(Cn),vr(ld),vr(vz),vr(LPr),vr(wh,8))},r.\u0275cmp=ki({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(i,s,a){if(i&1&&(A1(a,_z,5),A1(a,nAe,5)),i&2){let l;Zs(l=Qs())&&(s._content=l.first),Zs(l=Qs())&&(s._allDrawers=l)}},viewQuery:function(i,s){if(i&1&&iu(_z,5),i&2){let a;Zs(a=Qs())&&(s._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,s){i&2&&Gc("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[Sg([{provide:sEt,useExisting:r}]),Ii],ngContentSelectors:FPr,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,s){i&1&&(ad(MPr),Ku(0,OPr,1,2,"div",0),Zu(1),Zu(2,1),Ku(3,RPr,2,0,"mat-drawer-content")),i&2&&(dS(s.hasBackdrop?0:-1),Ys(3),dS(s._content?-1:3))},dependencies:[_z],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let t=r;return t})();var aEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,m1,m1,As]});let t=r;return t})();var $Pr=["*"],tne;function zPr(){if(tne===void 0&&(tne=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(tne=t.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return tne}function Sz(t){return zPr()?.createHTML(t)||t}function lEt(t){return Error(`Unable to find icon with the name "${t}"`)}function UPr(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function uEt(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function cEt(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var y1=class{constructor(r,n,o){this.url=r,this.svgText=n,this.options=o}},VPr=(()=>{let r=class r{constructor(o,i,s,a){this._httpClient=o,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(o,i,s){return this.addSvgIconInNamespace("",o,i,s)}addSvgIconLiteral(o,i,s){return this.addSvgIconLiteralInNamespace("",o,i,s)}addSvgIconInNamespace(o,i,s,a){return this._addSvgIconConfig(o,i,new y1(s,null,a))}addSvgIconResolver(o){return this._resolvers.push(o),this}addSvgIconLiteralInNamespace(o,i,s,a){let l=this._sanitizer.sanitize(nd.HTML,s);if(!l)throw cEt(s);let u=Sz(l);return this._addSvgIconConfig(o,i,new y1("",u,a))}addSvgIconSet(o,i){return this.addSvgIconSetInNamespace("",o,i)}addSvgIconSetLiteral(o,i){return this.addSvgIconSetLiteralInNamespace("",o,i)}addSvgIconSetInNamespace(o,i,s){return this._addSvgIconSetConfig(o,new y1(i,null,s))}addSvgIconSetLiteralInNamespace(o,i,s){let a=this._sanitizer.sanitize(nd.HTML,i);if(!a)throw cEt(i);let l=Sz(a);return this._addSvgIconSetConfig(o,new y1("",l,s))}registerFontClassAlias(o,i=o){return this._fontCssClassesByAlias.set(o,i),this}classNameForFontAlias(o){return this._fontCssClassesByAlias.get(o)||o}setDefaultFontSetClass(...o){return this._defaultFontSetClass=o,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(o){let i=this._sanitizer.sanitize(nd.RESOURCE_URL,o);if(!i)throw uEt(o);let s=this._cachedIconsByUrl.get(i);return s?kr(rne(s)):this._loadSvgIconFromConfig(new y1(o,null)).pipe(xi(a=>this._cachedIconsByUrl.set(i,a)),dn(a=>rne(a)))}getNamedSvgIcon(o,i=""){let s=fEt(i,o),a=this._svgIconConfigs.get(s);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,o),a)return this._svgIconConfigs.set(s,a),this._getSvgFromConfig(a);let l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(o,l):sS(lEt(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(o){return o.svgText?kr(rne(this._svgElementFromConfig(o))):this._loadSvgIconFromConfig(o).pipe(dn(i=>rne(i)))}_getSvgFromIconSetConfigs(o,i){let s=this._extractIconWithNameFromAnySet(o,i);if(s)return kr(s);let a=i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(_1(u=>{let f=`Loading icon set URL: ${this._sanitizer.sanitize(nd.RESOURCE_URL,l.url)} failed: ${u.message}`;return this._errorHandler.handleError(new Error(f)),kr(null)})));return WAe(a).pipe(dn(()=>{let l=this._extractIconWithNameFromAnySet(o,i);if(!l)throw lEt(o);return l}))}_extractIconWithNameFromAnySet(o,i){for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.svgText&&a.svgText.toString().indexOf(o)>-1){let l=this._svgElementFromConfig(a),u=this._extractSvgIconFromSet(l,o,a.options);if(u)return u}}return null}_loadSvgIconFromConfig(o){return this._fetchIcon(o).pipe(xi(i=>o.svgText=i),dn(()=>this._svgElementFromConfig(o)))}_loadSvgIconSetFromConfig(o){return o.svgText?kr(null):this._fetchIcon(o).pipe(xi(i=>o.svgText=i))}_extractSvgIconFromSet(o,i,s){let a=o.querySelector(`[id="${i}"]`);if(!a)return null;let l=a.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,s);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),s);let u=this._svgElementFromString(Sz("<svg></svg>"));return u.appendChild(l),this._setSvgAttributes(u,s)}_svgElementFromString(o){let i=this._document.createElement("DIV");i.innerHTML=o;let s=i.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(o){let i=this._svgElementFromString(Sz("<svg></svg>")),s=o.attributes;for(let a=0;a<s.length;a++){let{name:l,value:u}=s[a];l!=="id"&&i.setAttribute(l,u)}for(let a=0;a<o.childNodes.length;a++)o.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(o.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(o,i){return o.setAttribute("fit",""),o.setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("preserveAspectRatio","xMidYMid meet"),o.setAttribute("focusable","false"),i&&i.viewBox&&o.setAttribute("viewBox",i.viewBox),o}_fetchIcon(o){let{url:i,options:s}=o,a=s?.withCredentials??!1;if(!this._httpClient)throw UPr();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let l=this._sanitizer.sanitize(nd.RESOURCE_URL,i);if(!l)throw uEt(i);let u=this._inProgressUrlFetches.get(l);if(u)return u;let c=this._httpClient.get(l,{responseType:"text",withCredentials:a}).pipe(dn(f=>Sz(f)),lS(()=>this._inProgressUrlFetches.delete(l)),YAe());return this._inProgressUrlFetches.set(l,c),c}_addSvgIconConfig(o,i,s){return this._svgIconConfigs.set(fEt(o,i),s),this}_addSvgIconSetConfig(o,i){let s=this._iconSetConfigs.get(o);return s?s.push(i):this._iconSetConfigs.set(o,[i]),this}_svgElementFromConfig(o){if(!o.svgElement){let i=this._svgElementFromString(o.svgText);this._setSvgAttributes(i,o.options),o.svgElement=i}return o.svgElement}_getIconConfigFromResolvers(o,i){for(let s=0;s<this._resolvers.length;s++){let a=this._resolvers[s](i,o);if(a)return GPr(a)?new y1(a.url,null,a.options):new y1(a,null)}}};r.\u0275fac=function(i){return new(i||r)(Et(Lke,8),Et(zne),Et(yn,8),Et(cS))},r.\u0275prov=xr({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function rne(t){return t.cloneNode(!0)}function fEt(t,r){return t+":"+r}function GPr(t){return!!(t.url&&t.options)}var WPr=new En("MAT_ICON_DEFAULT_OPTIONS"),qPr=new En("mat-icon-location",{providedIn:"root",factory:HPr});function HPr(){let t=Zt(yn),r=t?t.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var dEt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],YPr=dEt.map(t=>`[${t}]`).join(", "),XPr=/^url\(['"]?#(.*?)['"]?\)$/,pEt=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(o){this._color=o}get svgIcon(){return this._svgIcon}set svgIcon(o){o!==this._svgIcon&&(o?this._updateSvgIcon(o):this._svgIcon&&this._clearSvgElement(),this._svgIcon=o)}get fontSet(){return this._fontSet}set fontSet(o){let i=this._cleanupFontValue(o);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(o){let i=this._cleanupFontValue(o);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(o,i,s,a,l,u){this._elementRef=o,this._iconRegistry=i,this._location=a,this._errorHandler=l,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=_b.EMPTY,u&&(u.color&&(this.color=this._defaultColor=u.color),u.fontSet&&(this.fontSet=u.fontSet)),s||o.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(o){if(!o)return["",""];let i=o.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${o}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let o=this._elementsWithExternalReferences;if(o&&o.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(o){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(o),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(o)}_clearSvgElement(){let o=this._elementRef.nativeElement,i=o.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let s=o.childNodes[i];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let o=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>o.classList.remove(s)),i.forEach(s=>o.classList.add(s)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&o.classList.remove(this._previousFontIconClass),this.fontIcon&&o.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(o){return typeof o=="string"?o.trim().split(" ")[0]:o}_prependPathToReferences(o){let i=this._elementsWithExternalReferences;i&&i.forEach((s,a)=>{s.forEach(l=>{a.setAttribute(l.name,`url('${o}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(o){let i=o.querySelectorAll(YPr),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)dEt.forEach(l=>{let u=i[a],c=u.getAttribute(l),f=c?c.match(XPr):null;if(f){let d=s.get(u);d||(d=[],s.set(u,d)),d.push({name:l,value:f[1]})}})}_updateSvgIcon(o){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),o){let[i,s]=this._splitIconName(o);i&&(this._svgNamespace=i),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,i).pipe(Uc(1)).subscribe(a=>this._setSvgElement(a),a=>{let l=`Error retrieving icon ${i}:${s}! ${a.message}`;this._errorHandler.handleError(new Error(l))})}}};r.\u0275fac=function(i){return new(i||r)(vr(No),vr(VPr),Ok("aria-hidden"),vr(qPr),vr(cS),vr(WPr,8))},r.\u0275cmp=ki({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,s){i&2&&(id("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),RR(s.color?"mat-"+s.color:""),Gc("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",su],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[od,Ii],ngContentSelectors:$Pr,decls:1,vars:0,template:function(i,s){i&1&&(ad(),Zu(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=r;return t})(),hEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({imports:[As,As]});let t=r;return t})();var mEt={transformMenu:LR("transformMenu",[zk("void",Cb({opacity:0,transform:"scale(0.8)"})),gS("void => enter",mS("120ms cubic-bezier(0, 0, 0.2, 1)",Cb({opacity:1,transform:"scale(1)"}))),gS("* => void",mS("100ms 25ms linear",Cb({opacity:0})))]),fadeInItems:LR("fadeInItems",[zk("showing",Cb({opacity:1})),gS("void => *",[Cb({opacity:0}),mS("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},SCi=mEt.fadeInItems,CCi=mEt.transformMenu;var ZPr=new En("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=Zt(g1);return()=>t.scrollStrategies.reposition()}});function QPr(t){return()=>t.scrollStrategies.reposition()}var JPr={provide:ZPr,deps:[g1],useFactory:QPr};var gEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=jn({providers:[JPr],imports:[Qu,bz,As,Jre,m1,As]});let t=r;return t})();function eLr(t,r){if(t&1&&(Bo(0,"div",7),pS(1),ti()),t&2){let n=r.$implicit;Xs("routerLink",n.path),Ys(),Sne(" ",n.title," ")}}var yEt=(()=>{let r=class r{constructor(){this.title="victorbarbosa",this.routes=$re.filter(o=>!!o.path)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=ki({type:r,selectors:[["app-root"]],standalone:!0,features:[Ii],decls:13,vars:2,consts:[["drawer",""],[1,"example-container"],[1,"content-menu",3,"mode"],["routerLinkActive","active-link",3,"routerLink",4,"ngFor","ngForOf"],[1,"top-bar"],[1,"title"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"click"],["routerLinkActive","active-link",3,"routerLink"]],template:function(i,s){if(i&1){let a=sd();Bo(0,"mat-drawer-container",1)(1,"mat-drawer",2,0),Ku(3,eLr,2,2,"div",3),ti(),Bo(4,"mat-drawer-content")(5,"div",4)(6,"div",5),pS(7,"Victor Barbosa"),ti(),Bo(8,"button",6),nu("click",function(){td(a);let u=jz(2);return rd(u.toggle())}),Bo(9,"mat-icon"),pS(10,"more_vert"),ti()()(),Bo(11,"div"),Ks(12,"router-outlet"),ti()()()}i&2&&(Ys(),Xs("mode","over"),Ys(2),Xs("ngForOf",s.routes))},dependencies:[Qu,Ake,xoe,zIe,a8,OIe,aEt,nAe,oAe,_z,ene,oEt,HCt,qCt,gEt,hEt,pEt],styles:['.top-bar[_ngcontent-%COMP%]{float:right;width:100%;display:flex;align-items:flex-end;justify-content:flex-end;position:fixed;background:#000}.top-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;left:10px;align-self:center;font-size:x-large}.top-bar[_ngcontent-%COMP%]:after{content:"";background:#fff;position:absolute;width:100vw;height:1px}mat-drawer-content[_ngcontent-%COMP%]{height:100vh}.content-title[_ngcontent-%COMP%]{cursor:pointer}']});let t=r;return t})();Wke(yEt,xCt).catch(t=>console.error(t));
