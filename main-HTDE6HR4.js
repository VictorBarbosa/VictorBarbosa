import{$ as es,$a as hb,A as zd,Aa as bAe,Ab as zu,B as pz,Ba as yz,Bb as vz,C as Bre,Ca as xAe,Cb as Tk,D as fAe,Da as Q2,Db as fg,E as dM,Ea as uh,Eb as Ts,F as hz,Fa as vM,Fb as wz,G as Vs,Ga as _k,Gb as PAe,H as $re,Ha as Sk,Hb as jAe,I as m1,Ia as vAe,Ib as Ak,J as Y2,Ja as wAe,Jb as Wre,K as pM,Ka as _Ae,Kb as LAe,L as zre,La as SAe,Lb as Hd,M as Dc,Ma as CAe,Mb as BAe,N as hM,Na as EAe,Nb as Vf,O as cb,Oa as TAe,Ob as $Ae,P as X2,Pa as zf,Pb as qre,Q as g1,Qa as wM,Qb as zAe,R as Ure,Ra as Vd,Rb as UAe,S as dAe,Sa as Ur,Sb as xn,T as pAe,Ta as _M,Tb as kk,U as hAe,Ua as AAe,Ub as VAe,V as mM,Va as bz,Vb as GAe,W as mz,Wa as xz,Wb as yb,X as y1,Xa as kAe,Xb as WAe,Y as Ud,Ya as kn,Yb as qAe,Z as Cs,Za as IAe,Zb as Hre,_ as Bi,_a as DAe,_b as HAe,a as Kt,aa as mAe,ab as Ck,b as Ss,ba as Er,bb as Ek,bc as CM,c as cM,ca as Bn,cb as Gd,cc as tS,da as gAe,db as NAe,e as D,ea as jn,eb as OAe,ec as bb,f as gt,fa as Vre,fb as FAe,fc as Ik,g as fn,ga as kt,gb as mb,gc as rS,h as Bf,ha as ar,hb as Wd,i as vl,ia as gM,ib as ug,j as Be,ja as Es,jb as Gre,k as lAe,ka as $n,kb as Nc,l as ub,la as Kl,lb as SM,m as uAe,ma as yM,mb as J2,n as vk,na as yAe,nb as Gs,o as Pre,oa as K2,ob as ma,p as jre,pa as fb,pb as Zl,q as no,qa as wk,qb as gb,r as Pa,ra as db,rb as RAe,s as h1,sa as pb,sb as ch,t as $d,ta as bM,tb as MAe,u as Pr,ua as xM,ub as cg,v as H2,va as $f,vb as Uf,w as Lre,wa as Z2,wb as Bu,x as cAe,xa as ei,xb as eS,y as dn,ya as ha,yb as qd,z as fM,za as gz,zb as $u}from"./chunk-46QSGUP5.js";function Oc(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var w1,pg,Yne=D(()=>{"use strict";w1=class{constructor(r,n){this.backend=r,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,n){this.dataIdsCount++,this.data.set(r,n)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}},pg=class{refCount(r){return Oc("refCount")}incRef(r){return Oc("incRef")}timerAvailable(){return!0}time(r){return Oc("time")}read(r){return Oc("read")}readSync(r){return Oc("readSync")}readToGPU(r,n){return Oc("readToGPU")}numDataIds(){return Oc("numDataIds")}disposeData(r,n){return Oc("disposeData")}write(r,n,o){return Oc("write")}move(r,n,o,i,s){return Oc("move")}createTensorFromGPUData(r,n,o){return Oc("createTensorFromGPUData")}memory(){return Oc("memory")}floatPrecision(){return Oc("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Oc("dispose")}}});function Hke(t){let r=t.length,n=0;for(;r>0;)n=Math.random()*r|0,r--,Uz(t,r,n)}function iAt(t,r){if(t.length!==r.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${r.length}`);let n=t.length,o=0;for(;n>0;)o=Math.random()*n|0,n--,Uz(t,n,o),Uz(r,n,o)}function zk(t,r,n){return Math.max(t,Math.min(r,n))}function sAt(t){return t%2===0?t:t+1}function Uz(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function aAt(t){let r=0;for(let n=0;n<t.length;n++)r+=t[n];return r}function lAt(t,r){let n=Math.random();return r*n+(1-n)*t}function uAt(t,r){let n=0;for(let o=0;o<t.length;o++){let i=Number(t[o])-Number(r[o]);n+=i*i}return n}function de(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}function Bo(t,r,n=""){de(Ql(t,r),()=>n+` Shapes ${t} and ${r} must match`)}function qf(t){de(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function on(t){if(t.length===0)return 1;let r=t[0];for(let n=1;n<t.length;n++)r*=t[n];return r}function cAt(t){return t.length===0}function Xne(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&r[n]!==null&&t[n]!==r[n])return!1;return!0}function Ql(t,r){if(t===r)return!0;if(t==null||r==null||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function vb(t){return t%1===0}function fAt(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let r=Math.exp(2*t);return(r-1)/(r+1)}}function dAt(t){let r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function pAt(t){let r=new Uint32Array(t);for(let n=0;n<t;++n)r[n]=n;return Hke(r),r}function lS(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function hAt(t,r=i=>0,n,o){return new Promise((i,s)=>{let a=0,l=()=>{if(t()){i();return}a++;let u=r(a);if(n!=null&&a>=n){s();return}o!=null?o(l,u):setTimeout(l,u)};l()})}function mAt(t,r){let n=1,o=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(o!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${o} and dim ${s}`);o=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(o===-1){if(r>0&&r!==n)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(r%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${r} / ${n}`);let i=t.slice();return i[o]=r/n,i}function cs(t,r){let n=r.length;return t=t==null?r.map((o,i)=>i):[].concat(t),de(t.every(o=>o>=-n&&o<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),de(t.every(o=>vb(o)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(o=>o<0?n+o:o)}function Kne(t,r){let n=[],o=[],i=r!=null&&Array.isArray(r)&&r.length===0,s=r==null||i?null:cs(r,t).sort(),a=0;for(let l=0;l<t.length;++l){if(s!=null){if(s[a]===l&&t[l]!==1)throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(s[a]==null||s[a]>l)&&t[l]===1&&(n.push(t[l]),o.push(l)),s[a]<=l&&a++}t[l]!==1&&(n.push(t[l]),o.push(l))}return{newShape:n,keptDims:o}}function Zne(t,r){return Vz(t,r)}function Vz(t,r){let n=null;if(t==null||t==="float32")n=new Float32Array(r);else if(t==="int32")n=new Int32Array(r);else if(t==="bool")n=new Uint8Array(r);else if(t==="string")n=new Array(r);else throw new Error(`Unknown data type ${t}`);return n}function Qne(t,r){for(let n=0;n<t.length;n++){let o=t[n];if(isNaN(o)||!isFinite(o))throw Error(`A tensor of type ${r} being uploaded contains ${o}.`)}}function Jne(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function gAt(t,r){return!(r==="complex64"||r==="float32"&&t!=="complex64"||r==="int32"&&t!=="float32"&&t!=="complex64"||r==="bool"&&t==="bool")}function Uk(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function eoe(t){if(t==null)return 0;let r=0;return t.forEach(n=>r+=n.length),r}function dh(t){return typeof t=="string"||t instanceof String}function Yke(t){return typeof t=="boolean"}function Xke(t){return typeof t=="number"}function _1(t){return Array.isArray(t)?_1(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":Xke(t)?"float32":dh(t)?"string":Yke(t)?"bool":"float32"}function hg(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Vk(t,r){for(let n=r;n<t;++n)if(t%n===0)return n;return t}function mg(t){let r=t.length;if(r<2)return[];let n=new Array(r-1);n[r-2]=t[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*t[o+1];return n}function Kke(t,r,n,o=!1){let i=new Array;if(r.length===1){let s=r[0]*(o?2:1);for(let a=0;a<s;a++)i[a]=n[t+a]}else{let s=r[0],a=r.slice(1),l=a.reduce((u,c)=>u*c)*(o?2:1);for(let u=0;u<s;u++)i[u]=Kke(t+u*l,a,n,o)}return i}function aS(t,r,n=!1){if(t.length===0)return r[0];let o=t.reduce((i,s)=>i*s)*(n?2:1);if(o===0)return[];if(o!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}${n?" for a complex tensor":""}.`);return Kke(0,t,r,n)}function yAt(t,r){if(Array.isArray(t))return t;if(r==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(r==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(r==="bool"||r==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${r}`)}function YM(t,r){let n=Gk(t,r);for(let o=0;o<n.length;o++)n[o]=1;return n}function Gk(t,r){if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function bAt(t,r){let n=t.reduce((o,i)=>o*i,1);if(r==null||r==="float32")return aS(t,new Float32Array(n));if(r==="int32")return aS(t,new Int32Array(n));if(r==="bool")return aS(t,new Uint8Array(n));throw new Error(`Unknown data type ${r}`)}function ti(t){t.forEach(r=>{de(Number.isInteger(r)&&r>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function xAt(t,r,n){if(r===0)return 0;if(r===1)return t[0];let o=t[t.length-1];for(let i=0;i<t.length-1;++i)o+=n[i]*t[i];return o}function vAt(t,r,n){if(r===0)return[];if(r===1)return[t];let o=new Array(r);for(let i=0;i<o.length-1;++i)o[i]=Math.floor(t/n[i]),t-=o[i]*n[i];return o[o.length-1]=t,o}function uS(t){return t&&t.then&&typeof t.then=="function"}var Ws=D(()=>{"use strict";});function _At(t){let r={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...o)=>(SAt(r,o[0],o[1]),o.join("="))),r}function SAt(t,r,n){t[decodeURIComponent(r)]=decodeURIComponent(n||"")}function CAt(t,r){let n=r.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:r}function Oe(){return Gz}function Qke(t){Gz=t}var Zke,Wk,Gz,ga=D(()=>{"use strict";Ws();Zke="tfjsflags",Wk=class{constructor(r){this.global=r,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=_At,this.populateURLFlags()}setPlatform(r,n){this.platform!=null&&(Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${r}.`)),this.platformName=r,this.platform=n}registerFlag(r,n,o){if(this.flagRegistry[r]={evaluationFn:n,setHook:o},this.urlFlags[r]!=null){let i=this.urlFlags[r];Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.warn(`Setting feature override from URL ${r}: ${i}.`),this.set(r,i)}}getAsync(r){return Be(this,null,function*(){return r in this.flags?this.flags[r]:(this.flags[r]=yield this.evaluateFlag(r),this.flags[r])})}get(r){if(r in this.flags)return this.flags[r];let n=this.evaluateFlag(r);if(uS(n))throw new Error(`Flag ${r} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[r]=n,this.flags[r]}getNumber(r){return this.get(r)}getBool(r){return this.get(r)}getString(r){return this.get(r)}getFlags(){return this.flags}get features(){return this.flags}set(r,n){if(this.flagRegistry[r]==null)throw new Error(`Cannot set flag ${r} as it has not been registered.`);this.flags[r]=n,this.flagRegistry[r].setHook!=null&&this.flagRegistry[r].setHook(n)}evaluateFlag(r){if(this.flagRegistry[r]==null)throw new Error(`Cannot evaluate flag '${r}': no evaluation function found.`);return this.flagRegistry[r].evaluationFn()}setFlags(r){this.flags=Object.assign({},r)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let r=this.getQueryParams(this.global.location.search);Zke in r&&r[Zke].split(",").forEach(o=>{let[i,s]=o.split(":");this.urlFlags[i]=CAt(i,s)})}};Gz=null});function roe(){if(toe==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");toe=t}return toe}function EAt(){let t=roe();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function XM(t,r){let n=EAt();if(n.has(t))return n.get(t);{let o=r();return n.set(t,o),n.get(t)}}var toe,Wz=D(()=>{"use strict";});var wb,gg,yg,Xd,_b,cS,fS,Sb,Cb,bg,xg,vg,wg,_g,Eb,dS,Tb,pS,Ab,kb,hS,S1,noe,mS,ph,Sg,Cg,gS,Ib,Db,Nb,yS,Ob,Fb,bS,xS,Eg,Tg,vS,Rb,wS,_S,SS,Mb,CS,ES,TS,Pb,qk,Hk,Yk,Ag,AS,kg,kS,Ig,C1,Dg,jb,Ng,IS,DS,NS,Og,Fg,Lb,Bb,OS,E1,Rg,hh,FS,RS,Mg,Pg,jg,$b,T1,A1,MS,Lg,Bg,k1,I1,D1,TAt,ooe,AAt,zb,PS,kAt,Ub,$g,Vb,jS,Gb,LS,BS,Wb,qb,zg,Hb,Ug,$S,Vg,Yb,N1,zS,US,VS,Xb,Kb,Zb,Qb,IAt,Gg,Jb,ex,GS,WS,qS,HS,YS,Wg,qg,tx,rx,XS,nx,KS,Hg,ox,Yg,Xg,ZS,QS,JS,ix,Kg,sx,Zg,Qg,Jg,e0,t0,r0,ax,lx,ux,cx,eC,tC,rC,nC,oC,n0,iC,O1,sC,aC,lC,uC,o0,i0,s0,mh,cC,fC,gh,dC,fx,dx,DAt,px,a0,Xk,pC,F1,R1,M1,Ee=D(()=>{"use strict";wb="Abs",gg="Acos",yg="Acosh",Xd="Add",_b="AddN",cS="All",fS="Any",Sb="ArgMax",Cb="ArgMin",bg="Asin",xg="Asinh",vg="Atan",wg="Atanh",_g="Atan2",Eb="AvgPool",dS="AvgPoolGrad",Tb="AvgPool3D",pS="AvgPool3DGrad",Ab="BatchMatMul",kb="BatchToSpaceND",hS="Bincount",S1="BitwiseAnd",noe="BroadcastTo",mS="BroadcastArgs",ph="Cast",Sg="Ceil",Cg="ClipByValue",gS="Complex",Ib="ComplexAbs",Db="Concat",Nb="Conv2D",yS="Conv2DBackpropFilter",Ob="Conv2DBackpropInput",Fb="Conv3D",bS="Conv3DBackpropFilterV2",xS="Conv3DBackpropInputV2",Eg="Cos",Tg="Cosh",vS="Cumprod",Rb="Cumsum",wS="CropAndResize",_S="DenseBincount",SS="DepthToSpace",Mb="DepthwiseConv2dNative",CS="DepthwiseConv2dNativeBackpropFilter",ES="DepthwiseConv2dNativeBackpropInput",TS="Diag",Pb="Dilation2D",qk="Dilation2DBackpropInput",Hk="Dilation2DBackpropFilter",Yk="Draw",Ag="RealDiv",AS="Einsum",kg="Elu",kS="EluGrad",Ig="Erf",C1="Equal",Dg="Exp",jb="ExpandDims",Ng="Expm1",IS="FFT",DS="Fill",NS="FlipLeftRight",Og="Floor",Fg="FloorDiv",Lb="FusedBatchNorm",Bb="GatherV2",OS="GatherNd",E1="Greater",Rg="GreaterEqual",hh="Identity",FS="IFFT",RS="Imag",Mg="IsFinite",Pg="IsInf",jg="IsNan",$b="LeakyRelu",T1="Less",A1="LessEqual",MS="LinSpace",Lg="Log",Bg="Log1p",k1="LogicalAnd",I1="LogicalNot",D1="LogicalOr",TAt="LogicalXor",ooe="LogSoftmax",AAt="LowerBound",zb="LRN",PS="LRNGrad",kAt="MatrixBandPart",Ub="Max",$g="Maximum",Vb="MaxPool",jS="MaxPoolGrad",Gb="MaxPool3D",LS="MaxPool3DGrad",BS="MaxPoolWithArgmax",Wb="Mean",qb="Min",zg="Minimum",Hb="MirrorPad",Ug="Mod",$S="Multinomial",Vg="Multiply",Yb="Neg",N1="NotEqual",zS="NonMaxSuppressionV3",US="NonMaxSuppressionV4",VS="NonMaxSuppressionV5",Xb="OnesLike",Kb="OneHot",Zb="Pack",Qb="PadV2",IAt="Pool",Gg="Pow",Jb="Prelu",ex="Prod",GS="RaggedGather",WS="RaggedRange",qS="RaggedTensorToTensor",HS="Range",YS="Real",Wg="Reciprocal",qg="Relu",tx="Reshape",rx="ResizeNearestNeighbor",XS="ResizeNearestNeighborGrad",nx="ResizeBilinear",KS="ResizeBilinearGrad",Hg="Relu6",ox="Reverse",Yg="Round",Xg="Rsqrt",ZS="ScatterNd",QS="TensorScatterUpdate",JS="SearchSorted",ix="Select",Kg="Selu",sx="Slice",Zg="Sin",Qg="Sinh",Jg="Sign",e0="Sigmoid",t0="Softplus",r0="Sqrt",ax="Sum",lx="SpaceToBatchND",ux="SplitV",cx="Softmax",eC="SparseFillEmptyRows",tC="SparseReshape",rC="SparseSegmentMean",nC="SparseSegmentSum",oC="SparseToDense",n0="SquaredDifference",iC="Square",O1="StaticRegexReplace",sC="StridedSlice",aC="StringNGrams",lC="StringSplit",uC="StringToHashBucketFast",o0="Sub",i0="Tan",s0="Tanh",mh="Tile",cC="TopK",fC="Transform",gh="Transpose",dC="Unique",fx="Unpack",dx="UnsortedSegmentSum",DAt="UpperBound",px="ZerosLike",a0="Step",Xk="FromPixels",pC="RotateWithOffset",F1="_FusedMatMul",R1="FusedConv2D",M1="FusedDepthwiseConv2D"});function l0(...t){Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.warn(...t)}function NAt(...t){Oe().getBool("IS_TEST")||Oe().getBool("PROD")||console.log(...t)}var qz=D(()=>{"use strict";ga();});function hC(t,r){let n=soe(t,r);return Kk.get(n)}function Hz(t){return KM.get(t)}function ZM(t){let r=Kk.entries(),n=[];for(;;){let{done:o,value:i}=r.next();if(o)break;let[s,a]=i,[l]=s.split("_");l===t&&n.push(a)}return n}function Zk(t){let{kernelName:r,backendName:n}=t,o=soe(r,n);Kk.has(o)&&l0(`The kernel '${r}' for backend '${n}' is already registered`),Kk.set(o,t)}function ioe(t){let{kernelName:r}=t;KM.has(r)&&Oe().getBool("DEBUG")&&l0(`Overriding the gradient for '${r}'`),KM.set(r,t)}function OAt(t,r){let n=soe(t,r);if(!Kk.has(n))throw new Error(`The kernel '${t}' for backend '${r}' is not registered`);Kk.delete(n)}function FAt(t){if(!KM.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);KM.delete(t)}function RAt(t,r){ZM(t).forEach(o=>{let i=Object.assign({},o,{backendName:r});Zk(i)})}function soe(t,r){return`${r}_${t}`}var Kk,KM,QM=D(()=>{"use strict";ga();Wz();qz();Kk=XM("kernelRegistry",()=>new Map),KM=XM("gradRegistry",()=>new Map)});function Yz(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var aoe=D(()=>{"use strict";});var cIe=gt((ojr,uIe)=>{"use strict";uIe.exports=gi;var Kd=null;try{Kd=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function gi(t,r,n){this.low=t|0,this.high=r|0,this.unsigned=!!n}gi.prototype.__isLong__;Object.defineProperty(gi.prototype,"__isLong__",{value:!0});function Rc(t){return(t&&t.__isLong__)===!0}gi.isLong=Rc;var eIe={},tIe={};function gC(t,r){var n,o,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(o=tIe[t],o)?o:(n=yi(t,(t|0)<0?-1:0,!0),i&&(tIe[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(o=eIe[t],o)?o:(n=yi(t,t<0?-1:0,!1),i&&(eIe[t]=n),n))}gi.fromInt=gC;function Zd(t,r){if(isNaN(t))return r?mC:Qd;if(r){if(t<0)return mC;if(t>=iIe)return lIe}else{if(t<=-nIe)return Fc;if(t+1>=nIe)return aIe}return t<0?Zd(-t,r).neg():yi(t%Jk|0,t/Jk|0,r)}gi.fromNumber=Zd;function yi(t,r,n){return new gi(t,r,n)}gi.fromBits=yi;var Xz=Math.pow;function uoe(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Qd;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return uoe(t.substring(1),r,n).neg();for(var i=Zd(Xz(n,8)),s=Qd,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+l),n);if(l<8){var c=Zd(Xz(n,l));s=s.mul(c).add(Zd(u))}else s=s.mul(i),s=s.add(Zd(u))}return s.unsigned=r,s}gi.fromString=uoe;function yh(t,r){return typeof t=="number"?Zd(t,r):typeof t=="string"?uoe(t,r):yi(t.low,t.high,typeof r=="boolean"?r:t.unsigned)}gi.fromValue=yh;var rIe=65536,MAt=1<<24,Jk=rIe*rIe,iIe=Jk*Jk,nIe=iIe/2,oIe=gC(MAt),Qd=gC(0);gi.ZERO=Qd;var mC=gC(0,!0);gi.UZERO=mC;var Qk=gC(1);gi.ONE=Qk;var sIe=gC(1,!0);gi.UONE=sIe;var loe=gC(-1);gi.NEG_ONE=loe;var aIe=yi(-1,2147483647,!1);gi.MAX_VALUE=aIe;var lIe=yi(-1,-1,!0);gi.MAX_UNSIGNED_VALUE=lIe;var Fc=yi(0,-2147483648,!1);gi.MIN_VALUE=Fc;var $t=gi.prototype;$t.toInt=function(){return this.unsigned?this.low>>>0:this.low};$t.toNumber=function(){return this.unsigned?(this.high>>>0)*Jk+(this.low>>>0):this.high*Jk+(this.low>>>0)};$t.toString=function(r){if(r=r||10,r<2||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Fc)){var n=Zd(r),o=this.div(n),i=o.mul(n).sub(this);return o.toString(r)+i.toInt().toString(r)}else return"-"+this.neg().toString(r);for(var s=Zd(Xz(r,6),this.unsigned),a=this,l="";;){var u=a.div(s),c=a.sub(u.mul(s)).toInt()>>>0,f=c.toString(r);if(a=u,a.isZero())return f+l;for(;f.length<6;)f="0"+f;l=""+f+l}};$t.getHighBits=function(){return this.high};$t.getHighBitsUnsigned=function(){return this.high>>>0};$t.getLowBits=function(){return this.low};$t.getLowBitsUnsigned=function(){return this.low>>>0};$t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Fc)?64:this.neg().getNumBitsAbs();for(var r=this.high!=0?this.high:this.low,n=31;n>0&&!(r&1<<n);n--);return this.high!=0?n+33:n+1};$t.isZero=function(){return this.high===0&&this.low===0};$t.eqz=$t.isZero;$t.isNegative=function(){return!this.unsigned&&this.high<0};$t.isPositive=function(){return this.unsigned||this.high>=0};$t.isOdd=function(){return(this.low&1)===1};$t.isEven=function(){return(this.low&1)===0};$t.equals=function(r){return Rc(r)||(r=yh(r)),this.unsigned!==r.unsigned&&this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low};$t.eq=$t.equals;$t.notEquals=function(r){return!this.eq(r)};$t.neq=$t.notEquals;$t.ne=$t.notEquals;$t.lessThan=function(r){return this.comp(r)<0};$t.lt=$t.lessThan;$t.lessThanOrEqual=function(r){return this.comp(r)<=0};$t.lte=$t.lessThanOrEqual;$t.le=$t.lessThanOrEqual;$t.greaterThan=function(r){return this.comp(r)>0};$t.gt=$t.greaterThan;$t.greaterThanOrEqual=function(r){return this.comp(r)>=0};$t.gte=$t.greaterThanOrEqual;$t.ge=$t.greaterThanOrEqual;$t.compare=function(r){if(Rc(r)||(r=yh(r)),this.eq(r))return 0;var n=this.isNegative(),o=r.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1};$t.comp=$t.compare;$t.negate=function(){return!this.unsigned&&this.eq(Fc)?Fc:this.not().add(Qk)};$t.neg=$t.negate;$t.add=function(r){Rc(r)||(r=yh(r));var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=r.high>>>16,l=r.high&65535,u=r.low>>>16,c=r.low&65535,f=0,d=0,p=0,h=0;return h+=s+c,p+=h>>>16,h&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=o+l,f+=d>>>16,d&=65535,f+=n+a,f&=65535,yi(p<<16|h,f<<16|d,this.unsigned)};$t.subtract=function(r){return Rc(r)||(r=yh(r)),this.add(r.neg())};$t.sub=$t.subtract;$t.multiply=function(r){if(this.isZero())return Qd;if(Rc(r)||(r=yh(r)),Kd){var n=Kd.mul(this.low,this.high,r.low,r.high);return yi(n,Kd.get_high(),this.unsigned)}if(r.isZero())return Qd;if(this.eq(Fc))return r.isOdd()?Fc:Qd;if(r.eq(Fc))return this.isOdd()?Fc:Qd;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(oIe)&&r.lt(oIe))return Zd(this.toNumber()*r.toNumber(),this.unsigned);var o=this.high>>>16,i=this.high&65535,s=this.low>>>16,a=this.low&65535,l=r.high>>>16,u=r.high&65535,c=r.low>>>16,f=r.low&65535,d=0,p=0,h=0,m=0;return m+=a*f,h+=m>>>16,m&=65535,h+=s*f,p+=h>>>16,h&=65535,h+=a*c,p+=h>>>16,h&=65535,p+=i*f,d+=p>>>16,p&=65535,p+=s*c,d+=p>>>16,p&=65535,p+=a*u,d+=p>>>16,p&=65535,d+=o*f+i*c+s*u+a*l,d&=65535,yi(h<<16|m,d<<16|p,this.unsigned)};$t.mul=$t.multiply;$t.divide=function(r){if(Rc(r)||(r=yh(r)),r.isZero())throw Error("division by zero");if(Kd){if(!this.unsigned&&this.high===-2147483648&&r.low===-1&&r.high===-1)return this;var n=(this.unsigned?Kd.div_u:Kd.div_s)(this.low,this.high,r.low,r.high);return yi(n,Kd.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?mC:Qd;var o,i,s;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return mC;if(r.gt(this.shru(1)))return sIe;s=mC}else{if(this.eq(Fc)){if(r.eq(Qk)||r.eq(loe))return Fc;if(r.eq(Fc))return Qk;var a=this.shr(1);return o=a.div(r).shl(1),o.eq(Qd)?r.isNegative()?Qk:loe:(i=this.sub(r.mul(o)),s=o.add(i.div(r)),s)}else if(r.eq(Fc))return this.unsigned?mC:Qd;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();s=Qd}for(i=this;i.gte(r);){o=Math.max(1,Math.floor(i.toNumber()/r.toNumber()));for(var l=Math.ceil(Math.log(o)/Math.LN2),u=l<=48?1:Xz(2,l-48),c=Zd(o),f=c.mul(r);f.isNegative()||f.gt(i);)o-=u,c=Zd(o,this.unsigned),f=c.mul(r);c.isZero()&&(c=Qk),s=s.add(c),i=i.sub(f)}return s};$t.div=$t.divide;$t.modulo=function(r){if(Rc(r)||(r=yh(r)),Kd){var n=(this.unsigned?Kd.rem_u:Kd.rem_s)(this.low,this.high,r.low,r.high);return yi(n,Kd.get_high(),this.unsigned)}return this.sub(this.div(r).mul(r))};$t.mod=$t.modulo;$t.rem=$t.modulo;$t.not=function(){return yi(~this.low,~this.high,this.unsigned)};$t.and=function(r){return Rc(r)||(r=yh(r)),yi(this.low&r.low,this.high&r.high,this.unsigned)};$t.or=function(r){return Rc(r)||(r=yh(r)),yi(this.low|r.low,this.high|r.high,this.unsigned)};$t.xor=function(r){return Rc(r)||(r=yh(r)),yi(this.low^r.low,this.high^r.high,this.unsigned)};$t.shiftLeft=function(r){return Rc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?yi(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):yi(0,this.low<<r-32,this.unsigned)};$t.shl=$t.shiftLeft;$t.shiftRight=function(r){return Rc(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?yi(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):yi(this.high>>r-32,this.high>=0?0:-1,this.unsigned)};$t.shr=$t.shiftRight;$t.shiftRightUnsigned=function(r){if(Rc(r)&&(r=r.toInt()),r&=63,r===0)return this;var n=this.high;if(r<32){var o=this.low;return yi(o>>>r|n<<32-r,n>>>r,this.unsigned)}else return r===32?yi(n,0,this.unsigned):yi(n>>>r-32,0,this.unsigned)};$t.shru=$t.shiftRightUnsigned;$t.shr_u=$t.shiftRightUnsigned;$t.toSigned=function(){return this.unsigned?yi(this.low,this.high,!1):this};$t.toUnsigned=function(){return this.unsigned?this:yi(this.low,this.high,!0)};$t.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()};$t.toBytesLE=function(){var r=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]};$t.toBytesBE=function(){var r=this.high,n=this.low;return[r>>>24,r>>>16&255,r>>>8&255,r&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};gi.fromBytes=function(r,n,o){return o?gi.fromBytesLE(r,n):gi.fromBytesBE(r,n)};gi.fromBytesLE=function(r,n){return new gi(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,n)};gi.fromBytesBE=function(r,n){return new gi(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],n)}});function JM(t){return bC.fromString(t,!0,16)}function coe(t){return t.xor(t.shru(47))}function pIe(t,r,n){let o=t.slice(r,r+n);return bC.fromBytes(Array.from(o),!0,!0)}function ri(t,r){return pIe(t,r,8)}function fIe(t,r){return pIe(t,r,4)}function ya(t,r){return r===0?t:t.shru(r).or(t.shl(64-r))}function P1(t,r,n=JM("9ddfea08eb382d69")){let o=t.xor(r).mul(n);o=o.xor(o.shru(47));let i=r.xor(o).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function PAt(t,r,n,o,i,s){i=i.add(t),s=ya(s.add(i).add(o),21);let a=i;return i=i.add(r),i=i.add(n),s=s.add(ya(i,44)),[i.add(o),s.add(a)]}function Kz(t,r,n,o){return PAt(ri(t,r),ri(t,r+8),ri(t,r+16),ri(t,r+24),n,o)}function jAt(t,r=t.length){if(r>=8){let n=Jl.add(r*2),o=ri(t,0).add(Jl),i=ri(t,r-8),s=ya(i,37).mul(n).add(o),a=ya(o,25).add(i).mul(n);return P1(s,a,n)}if(r>=4){let n=Jl.add(r*2),o=fIe(t,0);return P1(o.shl(3).add(r),fIe(t,r-4),n)}if(r>0){let n=t[0],o=t[r>>1],i=t[r-1],s=n+(o<<8),a=r+(i<<2);return coe(Jl.mul(s).xor(dIe.mul(a))).mul(Jl)}return Jl}function LAt(t,r=t.length){let n=Jl.add(r*2),o=ri(t,0).mul(yC),i=ri(t,8),s=ri(t,r-8).mul(n),a=ri(t,r-16).mul(Jl);return P1(ya(o.add(i),43).add(ya(s,30)).add(a),o.add(ya(i.add(Jl),18)).add(s),n)}function BAt(t,r=t.length){let n=Jl.add(r*2),o=ri(t,0).mul(Jl),i=ri(t,8),s=ri(t,r-8).mul(n),a=ri(t,r-16).mul(Jl),l=ya(o.add(i),43).add(ya(s,30)).add(a),u=P1(l,o.add(ya(i.add(Jl),18)).add(s),n),c=ri(t,16).mul(n),f=ri(t,24),d=l.add(ri(t,r-32)).mul(n),p=u.add(ri(t,r-24)).mul(n);return P1(ya(c.add(f),43).add(ya(d,30)).add(p),c.add(ya(f.add(o),18)).add(d),n)}function $At(t,r=t.length){let n=bC.fromNumber(81,!0);if(r<=32)return r<=16?jAt(t,r):LAt(t,r);if(r<=64)return BAt(t,r);let o=n,i=n.mul(yC).add(113),s=coe(i.mul(Jl).add(113)).mul(Jl),a=[bC.UZERO,bC.UZERO],l=[bC.UZERO,bC.UZERO];o=o.mul(Jl).add(ri(t,0));let u=0,c=(r-1>>6)*64,f=c+(r-1&63)-63;do o=ya(o.add(i).add(a[0]).add(ri(t,u+8)),37).mul(yC),i=ya(i.add(a[1]).add(ri(t,u+48)),42).mul(yC),o=o.xor(l[1]),i=i.add(a[0]).add(ri(t,u+40)),s=ya(s.add(l[0]),33).mul(yC),a=Kz(t,u,a[1].mul(yC),o.add(l[0])),l=Kz(t,u+32,s.add(l[1]),i.add(ri(t,u+16))),[s,o]=[o,s],u+=64;while(u!==c);let d=yC.add(s.and(255).shl(1));return u=f,l[0]=l[0].add(r-1&63),a[0]=a[0].add(l[0]),l[0]=l[0].add(a[0]),o=ya(o.add(i).add(a[0]).add(ri(t,u+8)),37).mul(d),i=ya(i.add(a[1]).add(ri(t,u+48)),42).mul(d),o=o.xor(l[1].mul(9)),i=i.add(a[0].mul(9).add(ri(t,u+40))),s=ya(s.add(l[0]),33).mul(d),a=Kz(t,u,a[1].mul(d),o.add(l[0])),l=Kz(t,u+32,s.add(l[1]),i.add(ri(t,u+16))),[s,o]=[o,s],P1(P1(a[0],l[0],d).add(coe(i).mul(dIe)).add(s),P1(a[1],l[1],d).add(o),d)}var foe,bC,dIe,yC,Jl,hIe=D(()=>{"use strict";foe=Bf(cIe());bC=foe.default||foe;dIe=JM("c3a5c85c97cb3127"),yC=JM("b492b66fbe98f273"),Jl=JM("9ae16a3b2f90404f")});var H={};fn(H,{arraysEqual:()=>Ql,arraysEqualWithNull:()=>Xne,assert:()=>de,assertNonNegativeIntegerDimensions:()=>ti,assertNonNull:()=>qf,assertShapesMatch:()=>Bo,bytesFromStringArray:()=>eoe,bytesPerElement:()=>Uk,checkConversionForErrors:()=>Qne,clamp:()=>zk,computeStrides:()=>mg,convertBackendValuesAndArrayBuffer:()=>yAt,createScalarValue:()=>zAt,createShuffledIndices:()=>pAt,decodeString:()=>tI,distSquared:()=>uAt,encodeString:()=>j1,fetch:()=>VAt,fingerPrint64:()=>$At,flatten:()=>bh,getArrayFromDType:()=>Vz,getTypedArrayFromDType:()=>Zne,hasEncodingLoss:()=>gAt,hexToLong:()=>JM,indexToLoc:()=>vAt,inferDtype:()=>_1,inferFromImplicitShape:()=>mAt,isBoolean:()=>Yke,isFunction:()=>hg,isInt:()=>vb,isNumber:()=>Xke,isPromise:()=>uS,isScalarShape:()=>cAt,isString:()=>dh,isTypedArray:()=>$i,isValidDtype:()=>Jne,locToIndex:()=>xAt,makeOnesTypedArray:()=>YM,makeZerosNestedTypedArray:()=>bAt,makeZerosTypedArray:()=>Gk,nearestDivisor:()=>Vk,nearestLargerEven:()=>sAt,now:()=>xC,parseAxisParam:()=>cs,randUniform:()=>lAt,repeatedTry:()=>hAt,rightPad:()=>lS,shuffle:()=>Hke,shuffleCombo:()=>iAt,sizeFromShape:()=>on,sizeToSquarishShape:()=>dAt,squeezeShape:()=>Kne,sum:()=>aAt,swap:()=>Uz,tanh:()=>fAt,toNestedArray:()=>aS,toTypedArray:()=>eI});function zAt(t,r){return r==="string"?j1(t):eI([t],r)}function UAt(t,r){return t instanceof Float32Array&&r==="float32"||t instanceof Int32Array&&r==="int32"||t instanceof Uint8Array&&r==="bool"}function eI(t,r){if(r==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=bh(t)),Oe().getBool("DEBUG")&&Qne(t,r),UAt(t,r))return t;if(r==null||r==="float32"||r==="complex64")return new Float32Array(t);if(r==="int32")return new Int32Array(t);if(r==="bool"){let n=new Uint8Array(t.length);for(let o=0;o<n.length;++o)Math.round(t[o])!==0&&(n[o]=1);return n}else throw new Error(`Unknown data type ${r}`)}function xC(){return Oe().platform.now()}function VAt(t,r){return Oe().platform.fetch(t,r)}function j1(t,r="utf-8"){return r=r||"utf-8",Oe().platform.encode(t,r)}function tI(t,r="utf-8"){return r=r||"utf-8",Oe().platform.decode(t,r)}function $i(t){return Oe().platform.isTypedArray!=null?Oe().platform.isTypedArray(t):Yz(t)}function bh(t,r=[],n=!1){if(r==null&&(r=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||uS(t)||t==null||$i(t)&&n)r.push(t);else if(Array.isArray(t)||$i(t))for(let o=0;o<t.length;++o)bh(t[o],r,n);else{let o=-1;for(let i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(o=Math.max(o,Number(i)));for(let i=0;i<=o;i++)bh(t[i],r,n)}return r}var Ze=D(()=>{"use strict";ga();aoe();Ws();Ws();hIe();});function GAt(t,r,n){if(r!=="float32")return!1;for(let o=0;o<t.length;o++){let i=t[o];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}var Zz,doe,mIe=D(()=>{"use strict";ga();Ze();Zz=class{constructor(r,n){this.backendTimer=r,this.logger=n,n==null&&(this.logger=new doe)}profileKernel(r,n,o){let i,s=()=>{i=o()},a,l=xC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(let c of i)c.dataSync();a=Promise.resolve({kernelMs:xC()-l})}if(Oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){let f=i[c];f.data().then(d=>{GAt(d,f.dtype,r)})}return{kernelName:r,outputs:i,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(r){let{kernelName:n,outputs:o,timeMs:i,inputs:s,extraInfo:a}=r;o.forEach(l=>{Promise.all([l.data(),i,a]).then(u=>{this.logger.logKernelProfile(n,l,u[0],u[1],s,u[2])})})}};doe=class{logKernelProfile(r,n,o,i,s,a){let l=typeof i=="number"?lS(`${i}ms`,9):i.error,u=lS(r,25),c=n.rank,f=n.size,d=lS(n.shape.toString(),14),p="";for(let h in s){let m=s[h];if(m!=null){let g=m.shape||n.shape,y=g.length;p+=`${h}: ${y}D ${y>0?g:""} `}}console.log(`%c${u}	%c${l}	%c${c}D ${d}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function gIe(t,r,n){let o={},i={};for(let u=0;u<r.length;u++)o[r[u].id]=!0;for(let u=0;u<t.length;u++){let c=t[u],f=c.inputs;for(let d in f){let p=f[d],h=!1;for(let m=0;m<r.length;m++)if(o[p.id]){c.outputs.forEach(g=>o[g.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}let s={};s[n.id]=!0;let a={};for(let u=t.length-1;u>=0;u--){let c=t[u],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(let p in f)s[f[p].id]=!0,a[c.id]=!0;break}}let l=[];for(let u=0;u<t.length;u++){let c=t[u];if(i[c.id]&&a[c.id]){let f={};for(let p in c.inputs){let h=c.inputs[p];o[h.id]&&(f[p]=h)}let d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,l.push(d)}}return l}function yIe(t,r,n,o){for(let i=r.length-1;i>=0;i--){let s=r[i],a=[];if(s.outputs.forEach(u=>{let c=t[u.id];c!=null?a.push(c):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);let l=s.gradient(a);for(let u in s.inputs){if(!(u in l))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(l)}.`);let c=n(()=>l[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let f=s.inputs[u];if(!Ql(c.shape,f.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(t[f.id]==null)t[f.id]=c;else{let d=t[f.id];t[f.id]=o(d,c),d.dispose()}}}}var bIe=D(()=>{"use strict";Ze();});function vIe(t,r,n,o){let i=mg(r),s=WAt(t,r,n,i),a=r.length,l=Qz(t,r,n,i,s),u=["Tensor"];return o&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${a}`),u.push(`  shape: [${r}]`),u.push("  values:")),u.push(l.map(c=>"    "+c).join(`
`)),u.join(`
`)}function WAt(t,r,n,o){let i=on(r),s=o[o.length-1],a=new Array(s).fill(0),l=r.length,u=n==="complex64"?r3(t):t;if(l>1)for(let c=0;c<i/s;c++){let f=c*s;for(let d=0;d<s;d++)a[d]=Math.max(a[d],t3(u[f+d],0,n).length)}return a}function t3(t,r,n){let o;return Array.isArray(t)?o=`${parseFloat(t[0].toFixed(poe))} + ${parseFloat(t[1].toFixed(poe))}j`:dh(t)?o=`'${t}'`:n==="bool"?o=wIe(t):o=parseFloat(t.toFixed(poe)).toString(),lS(o,r)}function wIe(t){return t===0?"false":"true"}function Qz(t,r,n,o,i,s=!0){let a=n==="complex64"?2:1,l=r[0],u=r.length;if(u===0){if(n==="complex64"){let g=r3(t);return[t3(g[0],0,n)]}return n==="bool"?[wIe(t[0])]:[t[0].toString()]}if(u===1){if(l>xIe){let y=e3*a,b=Array.from(t.slice(0,y)),x=Array.from(t.slice((l-e3)*a,l*a));return n==="complex64"&&(b=r3(b),x=r3(x)),["["+b.map((v,w)=>t3(v,i[w],n)).join(", ")+", ..., "+x.map((v,w)=>t3(v,i[l-e3+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?r3(t):Array.from(t)).map((y,b)=>t3(y,i[b],n)).join(", ")+"]"]}let c=r.slice(1),f=o.slice(1),d=o[0]*a,p=[];if(l>xIe){for(let g=0;g<e3;g++){let y=g*d,b=y+d;p.push(...Qz(t.slice(y,b),c,n,f,i,!1))}p.push("...");for(let g=l-e3;g<l;g++){let y=g*d,b=y+d;p.push(...Qz(t.slice(y,b),c,n,f,i,g===l-1))}}else for(let g=0;g<l;g++){let y=g*d,b=y+d;p.push(...Qz(t.slice(y,b),c,n,f,i,g===l-1))}let h=u===2?",":"";p[0]="["+(l>0?p[0]+h:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+h;let m=`,
`;for(let g=2;g<u;g++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(s?"":m),p}function r3(t){let r=[];for(let n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return r}var xIe,e3,poe,_Ie=D(()=>{"use strict";Ze();xIe=20,e3=3,poe=7});function SIe(t){xh=t}function CIe(t){rI=t}function EIe(t){qAt=t}function Ce(){return XM("Tensor",()=>tn)}var Cn,xh,rI,qAt,tn,u0,Je=D(()=>{"use strict";Wz();_Ie();Ze();Ze();Cn=class{constructor(r,n,o){if(this.dtype=n,this.shape=r.slice(),this.size=on(r),o!=null){let i=o.length;de(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=o||Vz(n,this.size),this.strides=mg(r)}set(r,...n){n.length===0&&(n=[0]),de(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let o=this.locToIndex(n);this.values[o]=r}get(...r){r.length===0&&(r=[0]);let n=0;for(let i of r){if(i<0||i>=this.shape[n]){let s=`Requested out of range element at ${r}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let o=r[r.length-1];for(let i=0;i<r.length-1;++i)o+=this.strides[i]*r[i];return this.values[o]}locToIndex(r){if(this.rank===0)return 0;if(this.rank===1)return r[0];let n=r[r.length-1];for(let o=0;o<r.length-1;++o)n+=this.strides[o]*r[o];return n}indexToLoc(r){if(this.rank===0)return[];if(this.rank===1)return[r];let n=new Array(this.shape.length);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(r/this.strides[o]),r-=n[o]*this.strides[o];return n[n.length-1]=r,n}get rank(){return this.shape.length}toTensor(){return xh().makeTensor(this.values,this.shape,this.dtype)}},xh=null,rI=null,qAt=null;tn=class{constructor(r,n,o,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=r.slice(),this.dtype=n||"float32",this.size=on(r),this.strides=mg(r),this.dataId=o,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return Be(this,null,function*(){let r=yield this.data();return rI.buffer(this.shape,this.dtype,r)})}bufferSync(){return rI.buffer(this.shape,this.dtype,this.dataSync())}array(){return Be(this,null,function*(){let r=yield this.data();return aS(this.shape,r,this.dtype==="complex64")})}arraySync(){return aS(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return Be(this,null,function*(){this.throwIfDisposed();let r=xh().read(this.dataId);if(this.dtype==="string"){let n=yield r;try{return n.map(o=>tI(o))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return r})}dataToGPU(r){return this.throwIfDisposed(),xh().readToGPU(this.dataId,r)}dataSync(){this.throwIfDisposed();let r=xh().readSync(this.dataId);if(this.dtype==="string")try{return r.map(n=>tI(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return r}bytes(){return Be(this,null,function*(){this.throwIfDisposed();let r=yield xh().read(this.dataId);return this.dtype==="string"?r:new Uint8Array(r.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),xh().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(r=!1){return rI.print(this,r)}clone(){return this.throwIfDisposed(),rI.clone(this)}toString(r=!1){let n=this.dataSync();return vIe(n,this.shape,this.dtype,r)}cast(r){return this.throwIfDisposed(),rI.cast(this,r)}variable(r=!0,n,o){return this.throwIfDisposed(),xh().makeVariable(this,r,n,o)}};Object.defineProperty(tn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});Ce();u0=class extends tn{constructor(r,n,o,i){super(r.shape,r.dtype,r.dataId,i),this.trainable=n,this.name=o}assign(r){if(r.dtype!==this.dtype)throw new Error(`dtype of the new value (${r.dtype}) and previous value (${this.dtype}) must match`);if(!Ql(r.shape,this.shape))throw new Error(`shape of the new value (${r.shape}) and previous value (${this.shape}) must match`);xh().disposeTensor(this),this.dataId=r.dataId,xh().incRef(this,null)}dispose(){xh().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(u0,Symbol.hasInstance,{value:t=>t instanceof tn&&t.assign!=null&&t.assign instanceof Function})});function zi(t,r){if(t==="string"||r==="string"){if(t==="string"&&r==="string")return"string";throw new Error(`Can not upcast ${t} with ${r}`)}return HAt[t][r]}function L1(t){return zi(t,"int32")}function Jz(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function e8(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}var hoe,TIe,AIe,kIe,IIe,HAt,nI=D(()=>{"use strict";hoe=function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t}(hoe||{}),TIe=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(TIe||{}),AIe=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(AIe||{}),kIe=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(kIe||{}),IIe=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(IIe||{}),HAt={float32:kIe,int32:TIe,bool:AIe,complex64:IIe}});var t8={};fn(t8,{assertTypesMatch:()=>moe,getTensorsInContainer:()=>n3,isTensorInList:()=>YAt,makeTypesMatch:()=>sn});function sn(t,r){if(t.dtype===r.dtype)return[t,r];let n=zi(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function moe(t,r){de(t.dtype===r.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${r.dtype}) input must match`)}function YAt(t,r){return r.some(n=>n.id===t.id)}function n3(t){let r=[];return DIe(t,r,new Set),r}function DIe(t,r,n){if(t==null)return;if(t instanceof tn){r.push(t);return}if(!XAt(t))return;let o=t;for(let i in o){let s=o[i];n.has(s)||(n.add(s),DIe(s,r,n))}}function XAt(t){return Array.isArray(t)||typeof t=="object"}var ni=D(()=>{"use strict";Je();nI();Ze();});function goe(t){return t.kernelName!=null}function ZAt(t){let r=YM(on(t),"float32");return ue.makeTensor(r,t,"float32")}function yoe(){let t=roe();if(t._tfengine==null){let r=new Wk(t);t._tfengine=new KAt(r)}return Qke(t._tfengine.ENV),SIe(()=>t._tfengine),t._tfengine}function QAt(t,r){let n={a:t,b:r};return ue.runKernel(Xd,n)}var r8,KAt,ue,$e=D(()=>{"use strict";Yne();ga();Wz();Ee();QM();qz();mIe();bIe();Je();ni();Ze();Ze();r8=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(r=>r.name)))}}}dispose(){for(let r in this.registeredVariables)this.registeredVariables[r].dispose()}},KAt=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new r8}ready(){return Be(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o];if(yield this.initializeBackend(i).success){yield this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:o}=this.initializeBackendsAndReturnBest();if(o)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:o}=this.initializeBackend(n);if(o)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,o,i=1){return n in this.registryFactory?(l0(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:o,priority:i},!0)}setBackend(n){return Be(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:o,asyncInit:i}=this.initializeBackend(n);if(!(i?yield o:o))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new Zz(this.backendInstance),!0})}setupRegisteredKernels(){ZM(this.backendName).forEach(o=>{o.setupFunc!=null&&o.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){ZM(n).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[n])})}initializeBackend(n){let o=this.registryFactory[n];if(o==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let i=o.factory();if(i&&!(i instanceof pg)&&typeof i.then=="function"){let s=++this.pendingBackendInitId,a=i.then(l=>s<this.pendingBackendInitId?!1:(this.registry[n]=l,this.pendingBackendInit=null,!0)).catch(l=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,l0(`Initialization of backend ${n} failed`),l0(l.stack||l.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(i){return l0(`Initialization of backend ${n} failed`),l0(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,o)=>this.registryFactory[o].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let o=0;o<n.length;o++){let i=n[o],{success:s,asyncInit:a}=this.initializeBackend(i);if(a||s)return{name:i,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,o){let i=this.state.tensorInfo.get(o),s=i.backend,a=this.readSync(o),l=s.refCount(o);s.disposeData(o,!0),i.backend=n,n.move(o,a,i.shape,i.dtype,l),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,o){let i=null;if(o==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");o=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof o!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=n}let s;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(s),()=>(s=o(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(n,o,i){n();try{let s=i();return o(),s}catch(s){throw o(),s}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let o=ue.runKernel(hh,{x:n}),i={x:n},s=l=>({x:()=>{let u="float32",c={x:l},f={dtype:u};return ue.runKernel(ph,c,f)}}),a=[];return this.addTapeNode(this.state.activeScope.name,i,[o],s,a,{}),o}runKernel(n,o,i){if(this.backendName==null&&this.backend,!(hC(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:o,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,o,i){let s=this.backend.numDataIds(),a=0;i.forEach(c=>{a+=c.dtype==="complex64"?3:1});let l=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=s-o-a-l;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let o,i=[],s=this.isTapeOn(),a=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,f=goe(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(goe(n)){let{kernelName:g,inputs:y,attrs:b}=n;this.backendName==null&&this.backend;let x=hC(g,this.backendName);de(x!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),u=()=>{let v=this.backend.numDataIds();c=x.kernelFunc({inputs:y,attrs:b,backend:this.backend});let w=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,v,w);let _=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(s){let C=this.getTensorsForGradient(g,y,_);i=this.saveTensorsForBackwardMode(C)}return _}}else{let{forwardFunc:g}=n,y=b=>{s&&(i=b.map(x=>this.keep(this.clone(x))))};u=()=>{let b=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,y));let x=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,b,x),x}}let{inputs:d,attrs:p}=n,h=goe(n)?null:n.backwardsFunc,m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?o=u():(m=this.profiler.profileKernel(f,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),o=m.outputs)}),s&&this.addTapeNode(f,d,o,h,i,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:o.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(c)?o:o[0]}saveTensorsForBackwardMode(n){return n.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(n,o,i){let s=Hz(n);if(s!=null){let a=s.inputsToSave||[],l=s.outputsToSave||[],u;s.saveAllInputs?(de(Array.isArray(o),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(o).map(f=>o[f])):u=a.map(f=>o[f]);let c=i.filter((f,d)=>l[d]);return u.concat(c)}return[]}makeTensor(n,o,i,s){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",s=s||this.backend;let a=n;i==="string"&&dh(n[0])&&(a=n.map(c=>j1(c)));let l=s.write(a,o,i),u=new tn(o,i,l,this.nextTensorId());if(this.trackTensor(u,s),i==="string"){let c=this.state.tensorInfo.get(l),f=eoe(a);this.state.numBytes+=f-c.bytes,c.bytes=f}return u}makeTensorFromDataId(n,o,i,s){i=i||"float32";let a={dataId:n,shape:o,dtype:i};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(n,o){let{dataId:i,shape:s,dtype:a}=n,l=new tn(s,a,i,this.nextTensorId());return this.trackTensor(l,o),l}makeVariable(n,o=!0,i,s){i=i||this.nextVariableId().toString(),s!=null&&s!==n.dtype&&(n=n.cast(s));let a=new u0(n,o,i,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(n,o){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*Uk(n.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:o||this.backend,dtype:n.dtype,shape:n.shape,bytes:i})),n instanceof u0||this.track(n)}incRef(n,o){this.trackTensor(n,o),this.backend.incRef(n.dataId)}removeDataId(n,o){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===o&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let o=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=o.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let i=n.size*Uk(n.dtype);this.state.numBytes-=i}o.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,o.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let o=this.state.registeredVariables[n];this.disposeVariable(o)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return Be(this,null,function*(){this.state.profiling=!0;let o=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-o,this.state.activeProfile.newTensors=this.state.numTensors-i;for(let s of this.state.activeProfile.kernels)s.kernelTimeMs=yield s.kernelTimeMs,s.extraInfo=yield s.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,o,i,s,a,l){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:o,outputs:i,saved:a},c=Hz(n);c!=null&&(s=c.gradFunc),s!=null&&(u.gradient=f=>(f=f.map((d,p)=>{if(d==null){let h=i[p],m=Gk(h.size,h.dtype);return this.makeTensor(m,h.shape,h.dtype)}return d}),s(f.length>1?f:f[0],a,l))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let o={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(o.name=n),this.state.scopeStack.push(o),this.state.activeScope=o}endScope(n){let o=n3(n),i=new Set(o.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let l=this.state.activeScope.track[a];!l.kept&&!i.has(l.id)&&l.dispose()}let s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],o.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(n,o,i,s=!1){if(de(o.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));de(a instanceof tn,()=>"The result y returned by f() must be a tensor.");let l=gIe(this.state.activeTape,o,a);if(!s&&l.length===0&&o.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[a.id]=i??ZAt(a.shape),yIe(u,l,f=>this.tidy(f),QAt);let c=o.map(f=>u[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(let d of f.saved)d.dispose()}),this.state.activeTape=null),{value:a,grads:c}})}customGrad(n){return de(hg(n),()=>"The f passed in customGrad(f) must be a function."),(...o)=>{de(o.every(u=>u instanceof tn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i,s={};o.forEach((u,c)=>{s[c]=u});let a=(u,c)=>(i=n(...o,c),de(i.value instanceof tn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),de(hg(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),l=(u,c)=>{let f=i.gradFunc(u,c),d=Array.isArray(f)?f:[f];de(d.length===o.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),de(d.every(h=>h instanceof tn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,m)=>{p[m]=()=>h}),p};return this.runKernelFunc({forwardFunc:a,backwardsFunc:l,inputs:s})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,o){return this.state.tensorInfo.get(n).backend.readToGPU(n,o)}time(n){return Be(this,null,function*(){let o=xC(),i=yield this.backend.time(n);return i.wallMs=xC()-o,i})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new r8;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();ue=yoe()});var hx={};fn(hx,{isBrowser:()=>xoe,isMobile:()=>tkt,mockIsMobile:()=>ekt});function JAt(){return typeof navigator<"u"&&navigator!=null}function ekt(t){boe=t}function tkt(t){if(boe!==void 0)return boe;if(t||JAt()){if(t||(t=navigator),t.product==="ReactNative")return!0;let r=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!r){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}return!1}function xoe(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var boe,voe=D(()=>{"use strict";});var Uu,oI=D(()=>{"use strict";$e();voe();ga();Uu=Oe();Uu.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Uu.registerFlag("IS_BROWSER",()=>xoe());Uu.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Uu.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Uu.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Uu.registerFlag("PROD",()=>!1);Uu.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Uu.getBool("DEBUG"));Uu.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Uu.registerFlag("IS_TEST",()=>!1);Uu.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Uu.getBool("DEBUG"));Uu.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Uu.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Uu.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function ja(t,r){let n=t;if($i(t))return r==="string"?[]:[t.length];if(Jz(t)){let i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(e8(t))return[t.buffer.size/(r==null?4:Uk(r))];if(!Array.isArray(t))return[];let o=[];for(;Array.isArray(n)||$i(n)&&r!=="string";)o.push(n.length),n=n[0];return Array.isArray(t)&&Oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&OIe(t,o,[]),o}function OIe(t,r,n){if(n=n||[],!Array.isArray(t)&&!$i(t)){de(r.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${r[0]} elements`);return}de(r.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),de(t.length===r[0],()=>`Element arr[${n.join("][")}] should have ${r[0]} elements, but has ${t.length} elements`);let o=r.slice(1);for(let i=0;i<t.length;++i)OIe(t[i],o,n.concat(i))}function NIe(t,r,n,o){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==r||t==="numeric"&&r==="string")throw new Error(`Argument '${n}' passed to '${o}' must be ${t} tensor, but got ${r} tensor`)}}function J(t,r,n,o="numeric"){if(t instanceof Ce())return NIe(o,t.dtype,r,n),t;let i=_1(t);if(i!=="string"&&["bool","int32","float32"].indexOf(o)>=0&&(i=o),NIe(o,i,r,n),t==null||!$i(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let u=t==null?"null":t.constructor.name;throw new Error(`Argument '${r}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let s=ja(t,i);!$i(t)&&!Array.isArray(t)&&(t=[t]);let l=i!=="string"?eI(t,i):bh(t,[],!0);return ue.makeTensor(l,s,i)}function mx(t,r,n,o="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${r} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,a)=>J(s,`${r}[${a}]`,n,o))}var Pe=D(()=>{"use strict";$e();ga();Je();nI();Ze();Ws();});function se(t){let r=Object.keys(t);if(r.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${r.length} keys.`);let n=r[0],o=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+woe;let i=(...s)=>{ue.startScope(n);try{let a=o(...s);return uS(a)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(a),a}catch(a){throw ue.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var woe,De=D(()=>{"use strict";$e();Ze();woe="__op"});function rkt(t,r){let n=J(t,"real","complex"),o=J(r,"imag","complex");Bo(n.shape,o.shape,`real and imag shapes, ${n.shape} and ${o.shape}, must match in call to tf.complex().`);let i={real:n,imag:o};return ue.runKernel(gS,i)}var Vu,B1=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Vu=se({complex_:rkt})});function eu(t,r,n,o){if(o==null)o=_1(t);else if(o==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(e8(t)||Jz(t)){if(o!=="float32"&&o!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${o}.`);return ue.backend.createTensorFromGPUData(t,r||n,o)}if(!$i(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(r!=null){ti(r);let i=on(r),s=on(n);de(i===s,()=>`Based on the provided shape, [${r}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1?l!==on(r.slice(a)):!0;de(n[a]===r[a]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${r}). `)}}return!$i(t)&&!Array.isArray(t)&&(t=[t]),r=r||n,t=o!=="string"?eI(t,o):bh(t,[],!0),ue.makeTensor(t,r,o)}var gx=D(()=>{"use strict";$e();nI();Ze();});function La(t,r,n){let o=ja(t,n);return eu(t,r,o,n)}var o3=D(()=>{"use strict";Pe();gx();});var yx,_oe=D(()=>{"use strict";yx={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function nkt(t,r){let n=0,o=t.length;for(;n<=o;){let i=Math.floor((o-n)/2)+n,s=r(t[i]);if(s===0)return i;s<0?o=i:n=i+1}return-1}var Ba,$1=D(()=>{"use strict";Ze();Ba=class t{static join(r){return new t(r).slice()}constructor(r){if(this.shards=[],this.previousShardIndex=0,r==null||(r instanceof Array||(r=[r]),r=r.map(o=>$i(o)?o.buffer:o),r.length===0))return;this.bufferUniformSize=r[0].byteLength;let n=0;for(let o=0;o<r.length;o++){let i=r[o];o!==r.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(r=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(r=isNaN(Number(r))?0:r,n=isNaN(Number(n))?0:n,r=Math.max(0,r),n=Math.min(this.byteLength,n),n<=r)return new ArrayBuffer(0);let o=this.findShardForByte(r);if(o===-1)throw new Error(`Could not find start shard for byte ${r}`);let i=n-r,s=new ArrayBuffer(i),a=new Uint8Array(s),l=0;for(let u=o;u<this.shards.length;u++){let c=this.shards[u],d=r+l-c.start,p=l,m=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(a.set(g,p),l+=g.length,n<c.end)break}return s}findShardForByte(r){if(this.shards.length===0||r<0||r>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(r/this.bufferUniformSize),this.previousShardIndex;function n(i){return r<i.start?-1:r>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let o=nkt(this.shards,n);return o===-1?-1:(this.previousShardIndex=o,this.previousShardIndex)}}});function okt(){Oe().set("PROD",!0)}function ikt(){Oe().set("DEBUG",!0)}function skt(){Oe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function FIe(t){Oe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function akt(){ue.disposeVariables()}function Hf(){return ue}function iI(){return ue.memory()}function lkt(t){return ue.profile(t)}function je(t,r){return ue.tidy(t,r)}function Tr(t){n3(t).forEach(n=>n.dispose())}function ks(t){return ue.keep(t)}function ukt(t){return ue.time(t)}function RIe(t){return ue.setBackend(t)}function ckt(){return ue.ready()}function Soe(){return ue.backendName}function fkt(t){ue.removeBackend(t)}function dkt(t){return ue.findBackend(t)}function pkt(t){return ue.findBackendFactory(t)}function i3(t,r,n=1){return ue.registerBackend(t,r,n)}function s3(){return ue.backend}function hkt(t,r){Oe().setPlatform(t,r)}var Mc=D(()=>{"use strict";$e();ga();Je();ni();EIe(FIe)});function jIe(t,r){return Be(this,null,function*(){let n=[],o=[],i=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<i.length;++a){let l=i[a],u=Array.isArray(t)?t[a].tensor:t[l];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${l}': ${u.dtype}`);let c={name:l,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let f=new Promise(d=>Be(this,null,function*(){let p=yield u.bytes(),h=p.reduce((y,b)=>y+b.length,0)+z1*p.length,m=new Uint8Array(h),g=0;for(let y=0;y<p.length;y++){let b=p[y],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,g),g+=z1,m.set(b,g),g+=b.length}d(m)}));o.push(f)}else o.push(u.data());r!=null&&(c.group=r),n.push(c)}let s=yield Promise.all(o);return{data:ykt(s),specs:n}})}function n8(t,r){let n=new Ba(t),o={},i=0;for(let s of r){let a=mkt(s,(l,u)=>n.slice(i+l,i+u));o[s.name]=LIe(s,n.slice(i,i+a)),i+=a}return o}function mkt(t,r){let n=on(t.shape),o;if("quantization"in t){let i=t.quantization;o=yx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=z1+new Uint32Array(r(i,i+z1))[0];return i}else o=yx[t.dtype];return n*o}function gkt(t,r){return Be(this,null,function*(){let n=on(t.shape),o;if("quantization"in t){let i=t.quantization;o=yx[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=z1+new Uint32Array(yield r(i,i+z1))[0];return i}else o=yx[t.dtype];return n*o})}function LIe(t,r){let n=t.name,o=t.dtype,i=t.shape,s=on(i),a,l=0;if("quantization"in t){let u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=yx[u.dtype],f=u.dtype==="uint8"?new Uint8Array(r):new Uint16Array(r);if(o==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){a=new Float32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=p*u.scale+u.min}}else if(u.dtype==="float16")a=wkt()(f);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(o==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);a=new Int32Array(f.length);for(let d=0;d<f.length;d++){let p=f[d];a[d]=Math.round(p*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*c}else if(o==="string"){let u=on(t.shape);a=[];for(let c=0;c<u;c++){let f=new Uint32Array(r.slice(l,l+z1))[0];l+=z1;let d=new Uint8Array(r.slice(l,l+f));a.push(d),l+=f}}else{let u=yx[o];if(o==="float32")a=new Float32Array(r);else if(o==="int32")a=new Int32Array(r);else if(o==="bool")a=new Uint8Array(r);else if(o==="complex64"){a=new Float32Array(r);let c=new Float32Array(a.length/2),f=new Float32Array(a.length/2);for(let m=0;m<c.length;m++)c[m]=a[m*2],f[m]=a[m*2+1];let d=La(c,i,"float32"),p=La(f,i,"float32"),h=Vu(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);l+=s*u}return La(a,i,o)}function MIe(t,r,n){return Be(this,null,function*(){let o=new Uint8Array(r);for(;o.byteLength<n;){let{done:i,value:s}=yield t.read();if(i&&s==null){let l=n-o.byteLength;throw new Error(`Reader is done but ${l} bytes are still expected`)}let a=new Uint8Array(o.length+s.byteLength);a.set(o,0),a.set(new Uint8Array(s),o.length),o=a}return o.buffer})}function Coe(t,r){return Be(this,null,function*(){let n={},o=t.getReader(),i=new ArrayBuffer(0);for(let s of r){let a=yield gkt(s,(c,f)=>Be(this,null,function*(){return i=yield MIe(o,i,f),i.slice(c,f)}));i=yield MIe(o,i,a);let l=i.slice(0,a);i=i.slice(a);let u=LIe(s,l);if(n[s.name]=u,Soe()==="webgpu"){let c=s3();"uploadToGPU"in c&&on(u.shape)>=Oe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function ykt(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let r=0,n=[];t.forEach(s=>{if(r+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});let o=new Uint8Array(r),i=0;return n.forEach(s=>{o.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),o.buffer}function PIe(t){return Eoe?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function BIe(t){if(Eoe)return Buffer.from(t).toString("base64");let r=new Uint8Array(t),n="";for(let o=0,i=r.length;o<i;o++)n+=String.fromCharCode(r[o]);return btoa(n)}function $Ie(t){if(Eoe){let o=Buffer.from(t,"base64");return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}let r=atob(t),n=new Uint8Array(r.length);for(let o=0;o<r.length;++o)n.set([r.charCodeAt(o)],o);return n.buffer}function zIe(t){return Ba.join(t)}function Toe(t){let r="/";for(t=t.trim();t.endsWith(r);)t=t.slice(0,t.length-1);let n=t.split(r);return n[n.length-1]}function o8(t,r){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function Aoe(t,r,n){let o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(o.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!r)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");o.weightSpecs=r,o.weightData=n}return t.signature!=null&&(o.signature=t.signature),t.userDefinedMetadata!=null&&(o.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(o.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(o.initializerSignature=t.initializerSignature),o}function sI(t,r){return Be(this,null,function*(){let n,o;return t.weightsManifest!=null&&([n,o]=yield r(t.weightsManifest)),Aoe(t,n,o)})}function c0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:PIe(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:PIe(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Ba(t.weightData).byteLength}}function a3(t){let r=[];for(let n of t)r.push(...n.weights);return r}function bkt(){let t=n=>{let o=n<<13,i=0;for(;!(o&8388608);)i-=8388608,o<<=1;return o&=-8388609,i+=947912704,o|i},r=new Uint32Array(2048);r[0]=0;for(let n=1;n<1024;n++)r[n]=t(n);for(let n=1024;n<2048;n++)r[n]=939524096+(n-1024<<13);return r}function xkt(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let r=1;r<31;r++)t[r]=r<<23;for(let r=33;r<63;r++)t[r]=2147483648+(r-32<<23);return t}function vkt(){let t=new Uint32Array(64);for(let r=0;r<64;r++)t[r]=1024;return t[0]=t[32]=0,t}function wkt(){let t=bkt(),r=xkt(),n=vkt();return o=>{let i=new ArrayBuffer(4*o.length),s=new Uint32Array(i);for(let a=0;a<o.length;a++){let l=o[a],u=t[n[l>>10]+(l&1023)]+r[l>>10];s[a]=u}return new Float32Array(i)}}var z1,Eoe,U1=D(()=>{"use strict";B1();o3();Ze();_oe();$1();Mc();ga();Mc();z1=4;Eoe=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var qs,UIe,VIe,GIe,WIe,vC=D(()=>{"use strict";qs=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(r){t.getInstance().saveRouters.push(r)}static registerLoadRouter(r){t.getInstance().loadRouters.push(r)}static getSaveHandlers(r){return t.getHandlers(r,"save")}static getLoadHandlers(r,n){return t.getHandlers(r,"load",n)}static getHandlers(r,n,o){let i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(a=>{let l=a(r,o);l!==null&&i.push(l)}),i}},UIe=t=>qs.registerSaveRouter(t),VIe=t=>qs.registerLoadRouter(t),GIe=t=>qs.getSaveHandlers(t),WIe=(t,r)=>qs.getLoadHandlers(t,r)});function qIe(){if(!Oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,r=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(r==null)throw new Error("The current browser does not appear to support IndexedDB.");return r}function Doe(t){let r=t.result;r.createObjectStore(wC,{keyPath:"modelPath"}),r.createObjectStore(V1,{keyPath:"modelPath"})}function _kt(t){return new _C(t)}function Skt(t){return t.startsWith(_C.URL_SCHEME)?t.slice(_C.URL_SCHEME.length):t}var koe,Ioe,wC,V1,_C,HIe,i8,Noe=D(()=>{"use strict";oI();ga();U1();vC();$1();koe="tensorflowjs",Ioe=1,wC="models_store",V1="model_info_store";_C=(()=>{class t{constructor(n){if(this.indexedDB=qIe(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return Be(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return Be(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,o){return new Promise((i,s)=>{let a=this.indexedDB.open(koe,Ioe);a.onupgradeneeded=()=>Doe(a),a.onsuccess=()=>{let l=a.result;if(o==null){let u=l.transaction(wC,"readonly"),f=u.objectStore(wC).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return l.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(f.result.modelArtifacts)},f.onerror=d=>(l.close(),s(f.error)),u.oncomplete=()=>l.close()}else{o.weightData=Ba.join(o.weightData);let u=c0(o),c=l.transaction(V1,"readwrite"),f=c.objectStore(V1),d;try{d=f.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(h){return s(h)}let p;d.onsuccess=()=>{p=l.transaction(wC,"readwrite");let h=p.objectStore(wC),m;try{m=h.put({modelPath:this.modelPath,modelArtifacts:o,modelArtifactsInfo:u})}catch(g){return s(g)}m.onsuccess=()=>i({modelArtifactsInfo:u}),m.onerror=g=>{f=c.objectStore(V1);let y=f.delete(this.modelPath);y.onsuccess=()=>(l.close(),s(m.error)),y.onerror=b=>(l.close(),s(m.error))}},d.onerror=h=>(l.close(),s(d.error)),c.oncomplete=()=>{p==null?l.close():p.oncomplete=()=>l.close()}}},a.onerror=l=>s(a.error)})}}return t.URL_SCHEME="indexeddb://",t})(),HIe=t=>Oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_C.URL_SCHEME)?_kt(t.slice(_C.URL_SCHEME.length)):null;qs.registerSaveRouter(HIe);qs.registerLoadRouter(HIe);i8=class{constructor(){this.indexedDB=qIe()}listModels(){return Be(this,null,function*(){return new Promise((r,n)=>{let o=this.indexedDB.open(koe,Ioe);o.onupgradeneeded=()=>Doe(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(V1,"readonly"),l=s.objectStore(V1).getAll();l.onsuccess=()=>{let u={};for(let c of l.result)u[c.modelPath]=c.modelArtifactsInfo;r(u)},l.onerror=u=>(i.close(),n(l.error)),s.oncomplete=()=>i.close()},o.onerror=i=>n(o.error)})})}removeModel(r){return Be(this,null,function*(){return r=Skt(r),new Promise((n,o)=>{let i=this.indexedDB.open(koe,Ioe);i.onupgradeneeded=()=>Doe(i),i.onsuccess=()=>{let s=i.result,a=s.transaction(V1,"readwrite"),l=a.objectStore(V1),u=l.get(r),c;u.onsuccess=()=>{if(u.result==null)return s.close(),o(new Error(`Cannot find model with path '${r}' in IndexedDB.`));{let f=l.delete(r),d=()=>{c=s.transaction(wC,"readwrite");let h=c.objectStore(wC).delete(r);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=m=>o(u.error)};f.onsuccess=d,f.onerror=p=>(d(),s.close(),o(u.error))}},u.onerror=f=>(s.close(),o(u.error)),a.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>o(i.error)})})}}});function XIe(t){return{info:[aI,t,YIe].join(bx),topology:[aI,t,Ckt].join(bx),weightSpecs:[aI,t,Ekt].join(bx),weightData:[aI,t,Tkt].join(bx),modelMetadata:[aI,t,Akt].join(bx)}}function KIe(t){for(let r of Object.values(t))window.localStorage.removeItem(r)}function kkt(t){let r=t.split(bx);if(r.length<3)throw new Error(`Invalid key format: ${t}`);return r.slice(1,r.length-1).join(bx)}function Ikt(t){return t.startsWith(SC.URL_SCHEME)?t.slice(SC.URL_SCHEME.length):t}function Dkt(t){return new SC(t)}var bx,aI,YIe,Ckt,Ekt,Tkt,Akt,SC,ZIe,s8,Ooe=D(()=>{"use strict";oI();ga();Ze();U1();$1();vC();bx="/",aI="tensorflowjs_models",YIe="info",Ckt="model_topology",Ekt="weight_specs",Tkt="weight_data",Akt="model_metadata";SC=(()=>{class t{constructor(n){if(!Oe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=XIe(this.modelPath)}save(n){return Be(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let o=JSON.stringify(n.modelTopology),i=JSON.stringify(n.weightSpecs),s=c0(n),a=Ba.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,o),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,BIe(a));let l={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(l)),{modelArtifactsInfo:s}}catch{throw KIe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}})}load(){return Be(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let o={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);o.modelTopology=i;let s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);o.weightSpecs=s;let a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){let u=JSON.parse(a);o.format=u.format,o.generatedBy=u.generatedBy,o.convertedBy=u.convertedBy,u.signature!=null&&(o.signature=u.signature),u.userDefinedMetadata!=null&&(o.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(o.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(o.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(o.trainingConfig=u.trainingConfig)}let l=this.LS.getItem(this.keys.weightData);if(l==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return o.weightData=$Ie(l),o})}}return t.URL_SCHEME="localstorage://",t})(),ZIe=t=>Oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(SC.URL_SCHEME)?Dkt(t.slice(SC.URL_SCHEME.length)):null;qs.registerSaveRouter(ZIe);qs.registerLoadRouter(ZIe);s8=class{constructor(){de(Oe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),de(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return Be(this,null,function*(){let r={},n=aI+bx,o=bx+YIe;for(let i=0;i<this.LS.length;++i){let s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(o)){let a=kkt(s);r[a]=JSON.parse(this.LS.getItem(s))}}return r})}removeModel(r){return Be(this,null,function*(){r=Ikt(r);let n=XIe(r);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${r}'`);let o=JSON.parse(this.LS.getItem(n.info));return KIe(n),o})}}});function a8(t){if(t.indexOf(lI)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${vh.getSchemes().join(",")}`);return{scheme:t.split(lI)[0],path:t.split(lI)[1]}}function QIe(t,r,n=!1){return Be(this,null,function*(){de(t!==r,()=>`Old path and new path are the same: '${t}'`);let o=qs.getLoadHandlers(t);de(o.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),de(o.length<2,()=>`Copying failed because more than one (${o.length}) load handlers for source URL ${t}.`);let i=o[0],s=qs.getSaveHandlers(r);de(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${r}.`),de(s.length<2,()=>`Copying failed because more than one (${o.length}) save handlers for destination URL ${r}.`);let a=s[0],l=a8(t).scheme,u=a8(t).path,c=l===a8(t).scheme,f=yield i.load();n&&c&&(yield vh.getManager(l).removeModel(u));let d=yield a.save(f);return n&&!c&&(yield vh.getManager(l).removeModel(u)),d.modelArtifactsInfo})}function JIe(){return Be(this,null,function*(){let t=vh.getSchemes(),r={};for(let n of t){let o=yield vh.getManager(n).listModels();for(let i in o){let s=n+lI+i;r[s]=o[i]}}return r})}function eDe(t){return Be(this,null,function*(){let r=a8(t);return vh.getManager(r.scheme).removeModel(r.path)})}function tDe(t,r){return Be(this,null,function*(){return QIe(t,r,!1)})}function rDe(t,r){return Be(this,null,function*(){return QIe(t,r,!0)})}var lI,vh,Foe=D(()=>{"use strict";Ze();vC();lI="://",vh=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(r,n){de(r!=null,()=>"scheme must not be undefined or null."),r.endsWith(lI)&&(r=r.slice(0,r.indexOf(lI))),de(r.length>0,()=>"scheme must not be an empty string.");let o=t.getInstance();de(o.managers[r]==null,()=>`A model store manager is already registered for scheme '${r}'.`),o.managers[r]=n}static getManager(r){let n=t.getInstance().managers[r];if(n==null)throw new Error(`Cannot find model manager for scheme '${r}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}}});var Roe,nDe=D(()=>{"use strict";oI();ga();Noe();Ooe();Foe();aoe();Roe=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(r,n){return fetch(r,n)}now(){return performance.now()}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(r)}decode(r,n){return new TextDecoder(n).decode(r)}setTimeoutCustom(r,n){if(typeof window>"u"||!Oe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(r,n);return}this.functionRefs.push(r),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",o=>{if(o.source===window&&o.data.name===this.messageName){o.stopPropagation();let i=this.functionRefs[o.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(r){return Yz(r)}};if(Oe().get("IS_BROWSER")){Oe().setPlatform("browser",new Roe);try{vh.registerManager(SC.URL_SCHEME,new s8)}catch{}try{vh.registerManager(_C.URL_SCHEME,new i8)}catch{}}});var iDe=gt((uI,oDe)=>{"use strict";var Nkt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},CC=Nkt();oDe.exports=uI=CC.fetch;CC.fetch&&(uI.default=CC.fetch.bind(CC));uI.Headers=CC.Headers;uI.Request=CC.Request;uI.Response=CC.Response});var sDe=gt(()=>{"use strict"});var Okt,Moe,Poe,aDe=D(()=>{"use strict";ga();Okt={importFetch:()=>iDe()},Poe=class{constructor(){this.util=sDe(),this.textEncoder=new this.util.TextEncoder}fetch(r,n){return Oe().global.fetch!=null?Oe().global.fetch(r,n):(Moe==null&&(Moe=Okt.importFetch()),Moe(r,n))}now(){let r=process.hrtime();return r[0]*1e3+r[1]/1e6}encode(r,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(r)}decode(r,n){return r.length===0?"":new this.util.TextDecoder(n).decode(r)}isTypedArray(r){return this.util.types.isFloat32Array(r)||this.util.types.isInt32Array(r)||this.util.types.isUint8Array(r)||this.util.types.isUint8ClampedArray(r)}};Oe().get("IS_NODE")&&!Oe().get("IS_BROWSER")&&Oe().setPlatform("node",new Poe)});function Jt(t,r="float32",n){return r=r||"float32",ti(t),new Cn(t,r,n)}var xx=D(()=>{"use strict";Je();Ze();});function Fkt(t,r){let n=J(t,"x","cast");if(!Jne(r))throw new Error(`Failed to cast to unknown dtype ${r}`);if(r==="string"&&n.dtype!=="string"||r!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let o={x:n},i={dtype:r};return ue.runKernel(ph,o,i)}var rt,pn=D(()=>{"use strict";$e();Ee();Pe();Ze();De();rt=se({cast_:Fkt})});function Rkt(t){let n={x:J(t,"x","clone","string_or_numeric")};return ue.runKernel(hh,n)}var Gu,cI=D(()=>{"use strict";$e();Ee();Pe();De();Gu=se({clone_:Rkt})});function l8(t,r=!1){console.log(t.toString(r))}var joe=D(()=>{"use strict";});var Mkt,lDe=D(()=>{"use strict";$e();oI();nDe();aDe();xx();pn();cI();joe();Je();yoe();Mkt={buffer:Jt,cast:rt,clone:Gu,print:l8};CIe(Mkt)});function Pkt(t,r){let n=J(t,"a","add"),o=J(r,"b","add");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Xd,i)}var Ke,$o=D(()=>{"use strict";$e();Ee();ni();Pe();De();Ke=se({add_:Pkt})});function jkt(t,r){let n=J(t,"a","floorDiv"),o=J(r,"b","floorDiv");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Fg,i)}var fI,u8=D(()=>{"use strict";$e();Ee();ni();Pe();De();fI=se({floorDiv_:jkt})});function Lkt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");if([n,o]=sn(n,o),n.dtype==="int32"&&o.dtype==="int32")return fI(n,o);let i={a:n,b:o},s={};return ue.runKernel(Ag,i,s)}var Ct,Xn=D(()=>{"use strict";$e();Ee();ni();Pe();u8();De();Ct=se({div_:Lkt})});function Bkt(t,r){let n=J(t,"a","mul"),o=J(r,"b","mul");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Vg,i)}var we,fr=D(()=>{"use strict";$e();Ee();ni();Pe();De();we=se({mul_:Bkt})});function $kt(t){let r=J(t,"x","abs");if(r.dtype==="complex64"){let n={x:r};return ue.runKernel(Ib,n)}else{let n={x:r};return ue.runKernel(wb,n)}}var Ao,EC=D(()=>{"use strict";$e();Ee();Pe();De();Ao=se({abs_:$kt})});function zkt(t){let n={x:J(t,"x","acos")};return ue.runKernel(gg,n)}var c8,uDe=D(()=>{"use strict";$e();Ee();Pe();De();c8=se({acos_:zkt})});function Ukt(t){let n={x:J(t,"x","acosh")};return ue.runKernel(yg,n)}var f8,cDe=D(()=>{"use strict";$e();Ee();Pe();De();f8=se({acosh_:Ukt})});function Vkt(t){de(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),de(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let r=t.map((i,s)=>J(i,`tensors${s}`,"addN")),n=r[0];r.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),r.forEach(i=>{if(!Ql(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let o=r;return ue.runKernel(_b,o)}var fDe,dDe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();fDe=se({addN_:Vkt})});function Gkt(t,r=null,n=!1){let i={x:J(t,"x","all","bool")},s={axis:r,keepDims:n};return ue.runKernel(cS,i,s)}var dI,Loe=D(()=>{"use strict";$e();Ee();Pe();De();dI=se({all_:Gkt})});function Wkt(t,r=null,n=!1){let i={x:J(t,"x","any","bool")},s={axis:r,keepDims:n};return ue.runKernel(fS,i,s)}var TC,Boe=D(()=>{"use strict";$e();Ee();Pe();De();TC=se({any_:Wkt})});function qkt(t,r=0){let o={x:J(t,"x","argMax")},i={axis:r};return ue.runKernel(Sb,o,i)}var Jd,$oe=D(()=>{"use strict";$e();Ee();Pe();De();Jd=se({argMax_:qkt})});function Hkt(t,r=0){let o={x:J(t,"x","argMin")},i={axis:r};return ue.runKernel(Cb,o,i)}var d8,zoe=D(()=>{"use strict";$e();Ee();Pe();De();d8=se({argMin_:Hkt})});function Ykt(t){let n={x:J(t,"x","asin")};return ue.runKernel(bg,n)}var p8,pDe=D(()=>{"use strict";$e();Ee();Pe();De();p8=se({asin_:Ykt})});function Xkt(t){let n={x:J(t,"x","asinh")};return ue.runKernel(xg,n)}var h8,hDe=D(()=>{"use strict";$e();Ee();Pe();De();h8=se({asinh_:Xkt})});function Kkt(t){let n={x:J(t,"x","atan")};return ue.runKernel(vg,n)}var m8,mDe=D(()=>{"use strict";$e();Ee();Pe();De();m8=se({atan_:Kkt})});function Zkt(t,r){let n=J(t,"a","atan2"),o=J(r,"b","atan2");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(_g,i)}var g8,Uoe=D(()=>{"use strict";$e();Ee();ni();Pe();De();g8=se({atan2_:Zkt})});function Qkt(t){let n={x:J(t,"x","atanh")};return ue.runKernel(wg,n)}var y8,gDe=D(()=>{"use strict";$e();Ee();Pe();De();y8=se({atanh_:Qkt})});function Jkt(t,r,n,o,i="NHWC",s){let a=t[3],l=[...r,a],u=bDe(i);return AC(t,l,n,s,o,null,null,u)}function Goe(t,r,n,o,i,s,a="channelsLast"){let[l,u]=l3(r),c;if(a==="channelsLast")c=[l,u,t[3],t[3]];else if(a==="channelsFirst")c=[l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return AC(t,c,n,o,i,s,!1,a)}function eIt(t,r,n,o,i,s,a="NDHWC"){let[l,u,c]=Voe(r),f,d;if(a==="NDHWC")d="channelsLast",f=[l,u,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",f=[l,u,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return yDe(t,f,n,o,i,!1,d,s)}function AC(t,r,n,o,i,s,a=!1,l="channelsLast"){let[u,c,f,d]=[-1,-1,-1,-1];if(l==="channelsLast")[u,c,f,d]=t;else if(l==="channelsFirst")[u,d,c,f]=t;else throw new Error(`Unknown dataFormat ${l}`);let[p,h,,m]=r,[g,y]=l3(n),[b,x]=l3(o),v=pI(p,b),w=pI(h,x),{padInfo:_,outHeight:C,outWidth:S}=nIt(i,c,f,g,y,v,w,s,l),E=a?m*d:m,A;return l==="channelsFirst"?A=[u,E,C,S]:l==="channelsLast"&&(A=[u,C,S,E]),{batchSize:u,dataFormat:l,inHeight:c,inWidth:f,inChannels:d,outHeight:C,outWidth:S,outChannels:E,padInfo:_,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:h,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:b,dilationWidth:x,inShape:t,outShape:A,filterShape:r}}function yDe(t,r,n,o,i,s=!1,a="channelsLast",l){let[u,c,f,d,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[u,c,f,d,p]=t;else if(a==="channelsFirst")[u,p,c,f,d]=t;else throw new Error(`Unknown dataFormat ${a}`);let[h,m,g,,y]=r,[b,x,v]=Voe(n),[w,_,C]=Voe(o),S=pI(h,w),E=pI(m,_),A=pI(g,C),{padInfo:N,outDepth:k,outHeight:R,outWidth:I}=oIt(i,c,f,d,b,x,v,S,E,A,l),L=s?y*p:y,j;return a==="channelsFirst"?j=[u,L,k,R,I]:a==="channelsLast"&&(j=[u,k,R,I,L]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:f,inWidth:d,inChannels:p,outDepth:k,outHeight:R,outWidth:I,outChannels:L,padInfo:N,strideDepth:b,strideHeight:x,strideWidth:v,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationDepth:w,dilationHeight:_,dilationWidth:C,inShape:t,outShape:j,filterShape:r}}function tIt(t,r,n,o,i){o==null&&(o=Woe(t,r,n));let s=t[0],a=t[1],l=u3((s-r+2*o)/n+1,i),u=u3((a-r+2*o)/n+1,i);return[l,u]}function rIt(t,r,n,o,i,s){i==null&&(i=Woe(t,r[0],o[0]));let a=[0,0,0,n];for(let l=0;l<3;l++)t[l]+2*i>=r[l]&&(a[l]=u3((t[l]-r[l]+2*i)/o[l]+1,s));return a}function Woe(t,r,n,o=1){let i=pI(r,o);return Math.floor((t[0]*(n-1)-n+i)/2)}function l3(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Voe(t){return typeof t=="number"?[t,t,t]:t}function pI(t,r){return r<=1?t:t+(t-1)*(r-1)}function nIt(t,r,n,o,i,s,a,l,u){let c,f,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=tIt([r,n],s,o,t,l);f=h[0],d=h[1]}else if(t==="same"){f=Math.ceil(r/o),d=Math.ceil(n/i);let p=Math.max(0,(f-1)*o+s-r),h=Math.max(0,(d-1)*i+a-n),m=Math.floor(p/2),g=p-m,y=Math.floor(h/2),b=h-y;c={top:m,bottom:g,left:y,right:b,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((r-s+1)/o),d=Math.ceil((n-a+1)/i);else if(typeof t=="object"){let p=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],m=u==="channelsLast"?t[2][0]:t[3][0],g=u==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:m,right:g,type:p===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},f=u3((r-s+p+h)/o+1,l),d=u3((n-a+m+g)/i+1,l)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:f,outWidth:d}}function oIt(t,r,n,o,i,s,a,l,u,c,f){let d,p,h,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let y=rIt([r,n,o,1],[l,u,c],1,[i,s,a],t,f);p=y[0],h=y[1],m=y[2]}else if(t==="same"){p=Math.ceil(r/i),h=Math.ceil(n/s),m=Math.ceil(o/a);let g=(p-1)*i+l-r,y=(h-1)*s+u-n,b=(m-1)*a+c-o,x=Math.floor(g/2),v=g-x,w=Math.floor(y/2),_=y-w,C=Math.floor(b/2),S=b-C;d={top:w,bottom:_,left:C,right:S,front:x,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function u3(t,r){if(!r)return Math.trunc(t);switch(r){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${r}`)}}function Yf(t){let[r,n,o]=l3(t);return r===1&&n===1&&o===1}function ba(t,r){return Yf(t)||Yf(r)}function f0(t){return l3(t).every(r=>r>0)}function bDe(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function go(t,r,n){if(n!=null){if(typeof r=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);if(typeof r=="number")de(vb(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${r}.`);else if(typeof r=="object")r.forEach(o=>{o.forEach(i=>{de(vb(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${r}`)}}var Is=D(()=>{"use strict";Ze();});function iIt(t,r){let o={x:J(t,"x","reshape","string_or_numeric")},i={shape:r};return ue.runKernel(tx,o,i)}var Se,Ht=D(()=>{"use strict";$e();Ee();Pe();De();Se=se({reshape_:iIt})});function sIt(t,r,n,o,i){let s=J(t,"x","avgPool","float32"),a=1;de(ba(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(l.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${l.rank}.`),go("avgPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(Eb,c,f);return d=rt(d,s.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var G1,b8=D(()=>{"use strict";$e();Ee();Pe();Ze();pn();Is();De();Ht();G1=se({avgPool_:sIt})});function aIt(t,r,n,o,i,s="NDHWC"){let a=J(t,"x","avgPool3d","float32"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(l.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${l.rank}.`),de(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),de(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),go("avgPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Tb,c,f);return d=rt(d,l.dtype),u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var x8,xDe=D(()=>{"use strict";$e();Ee();Pe();Ze();pn();Is();De();Ht();x8=se({avgPool3d_:aIt})});function lIt(t,r=0){de(t.length>=1,()=>"Pass at least one tensor to concat");let n=mx(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Gu(n[0]);let o=n,i={axis:r};return ue.runKernel(Db,o,i)}var Fn,Kf=D(()=>{"use strict";$e();Ee();Pe();Ze();cI();De();Fn=se({concat_:lIt})});function uIt(t,r,n=!1,o=!1){let i=J(t,"a","matMul"),s=J(r,"b","matMul");[i,s]=sn(i,s);let a={a:i,b:s},l={transposeA:n,transposeB:o};return ue.runKernel(Ab,a,l)}var Vr,wh=D(()=>{"use strict";$e();Ee();ni();Pe();De();Vr=se({matMul_:uIt})});function cIt(t){let n={x:J(t,"x","sigmoid","float32")};return ue.runKernel(e0,n)}var _l,hI=D(()=>{"use strict";$e();Ee();Pe();De();_l=se({sigmoid_:cIt})});function fIt(t,r,n){let o=J(t,"x","slice","string_or_numeric");if(o.rank===0)throw new Error("Slicing scalar is not possible");let i={x:o},s={begin:r,size:n};return ue.runKernel(sx,i,s)}var $r,Wu=D(()=>{"use strict";$e();Ee();Pe();De();$r=se({slice_:fIt})});function dIt(t){let n={x:J(t,"x","tanh","float32")};return ue.runKernel(s0,n)}var _h,qoe=D(()=>{"use strict";$e();Ee();Pe();De();_h=se({tanh_:dIt})});function pIt(t,r,n,o,i,s){let a=J(t,"forgetBias","basicLSTMCell"),l=J(r,"lstmKernel","basicLSTMCell"),u=J(n,"lstmBias","basicLSTMCell"),c=J(o,"data","basicLSTMCell"),f=J(i,"c","basicLSTMCell"),d=J(s,"h","basicLSTMCell"),p=Fn([c,d],1),h=Vr(p,l),m=Ke(h,u),g=m.shape[0],y=m.shape[1]/4,b=[g,y],x=$r(m,[0,0],b),v=$r(m,[0,y],b),w=$r(m,[0,y*2],b),_=$r(m,[0,y*3],b),C=Ke(we(_l(x),_h(v)),we(f,_l(Ke(a,w)))),S=we(_h(C),_l(_));return[C,S]}var vDe,wDe=D(()=>{"use strict";Pe();$o();Kf();wh();fr();De();hI();Wu();qoe();vDe=se({basicLSTMCell_:pIt})});function hIt(t,r,n){let o=J(t,"x","batchToSpaceND"),i=r.reduce((l,u)=>l*u);de(o.rank>=1+r.length,()=>`input rank is ${o.rank} but should be > than blockShape.length ${r.length}`),de(n.length===r.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${r.length}`),de(o.shape[0]%i===0,()=>`input tensor batch is ${o.shape[0]} but is not divisible by the product of the elements of blockShape ${r.join(" * ")} === ${i}`);let s={x:o},a={blockShape:r,crops:n};return ue.runKernel(kb,s,a)}var W1,c3=D(()=>{"use strict";$e();Ee();Pe();Ze();De();W1=se({batchToSpaceND_:hIt})});function _De(t){let r;return t.rank===0||t.rank===1?r=Se(t,[1,1,1,t.size]):t.rank===2?r=Se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?r=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):r=t,r}var SDe=D(()=>{"use strict";Ht()});function mIt(t,r,n,o,i,s){s==null&&(s=.001);let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;o!=null&&(f=J(o,"offset","batchNorm")),de(l.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),de(f==null||l.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),de(c==null||l.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:_De(a),scale:c,offset:f,mean:l,variance:u},h={varianceEpsilon:s},m=ue.runKernel(Lb,p,h);return Se(m,a.shape)}var d0,mI=D(()=>{"use strict";$e();Ee();Pe();Ze();SDe();De();Ht();d0=se({batchNorm_:mIt})});function gIt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),de(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),de(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),de(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&de(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&de(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),d0(a,l,u,f,c,s)}var v8,CDe=D(()=>{"use strict";Pe();Ze();mI();De();v8=se({batchNorm2d_:gIt})});function yIt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),de(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),de(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),de(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&de(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&de(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),d0(a,l,u,f,c,s)}var w8,EDe=D(()=>{"use strict";Pe();Ze();mI();De();w8=se({batchNorm3d_:yIt})});function bIt(t,r,n,o,i,s){let a=J(t,"x","batchNorm"),l=J(r,"mean","batchNorm"),u=J(n,"variance","batchNorm"),c;i!=null&&(c=J(i,"scale","batchNorm"));let f;return o!=null&&(f=J(o,"offset","batchNorm")),de(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),de(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),de(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&de(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&de(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),d0(a,l,u,f,c,s)}var _8,TDe=D(()=>{"use strict";Pe();Ze();mI();De();_8=se({batchNorm4d_:bIt})});function xIt(t,r,n){let o=J(t,"x","bincount"),i=J(r,"weights","bincount");de(o.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${o.dtype}`),de(n>=0,()=>`size must be non-negative, but got ${n}.`),de(i.size===o.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n};return ue.runKernel(hS,s,a)}var S8,Hoe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();S8=se({bincount_:xIt})});function vIt(t,r){let n=J(t,"x","bitwiseAnd"),o=J(r,"y","bitwiseAnd");if(!Ql(n.shape,o.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${o.shape}`);if(n.dtype!=="int32"||o.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${o.dtype}`);let i={a:n,b:o};return ue.runKernel(S1,i)}var ADe,kDe=D(()=>{"use strict";$e();Ee();Pe();Ws();De();ADe=se({bitwiseAnd_:vIt})});function wIt(t,r){let n=J(t,"s0","broadcastArgs","int32"),o=J(r,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(o.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${o.rank}`);let i={s0:n,s1:o};return ue.runKernel(mS,i)}var IDe,DDe=D(()=>{"use strict";$e();Ee();Pe();De();IDe=se({broadcastArgs_:wIt})});function _It(t,r){let n=J(t,"broadcastTo","x"),o=n.shape;if(ti(r),r.length<n.rank)throw new Error(`broadcastTo(): shape.length=${r.length} < input.rank=${n.rank}.`);if(r.length>n.rank){let c=n.shape.slice();for(;c.length<r.length;)c.unshift(1);n=Se(n,c)}let i=n.shape,s=Array.from(r);for(let c=r.length-1;c>=0;c--)if(i[c]===r[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);if(s.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return Gu(n);let l={x:n},u={reps:s};return ue.runKernel(mh,l,u)}var p0,C8=D(()=>{"use strict";$e();Ee();Pe();Ws();cI();De();Ht();p0=se({broadcastTo_:_It})});function SIt(t){let n={x:J(t,"x","ceil","float32")};return ue.runKernel(Sg,n)}var E8,NDe=D(()=>{"use strict";$e();Ee();Pe();De();E8=se({ceil_:SIt})});function ep(t,r,n){ti(t),n=n||_1(r);let o={shape:t,value:r,dtype:n};return ue.runKernel(DS,{},o)}var gI=D(()=>{"use strict";$e();Ee();Ze();Ws();});function CIt(t,r,n){let o=J(t,"x","clipByValue");if(de(r<=n,()=>`Error in clip: min (${r}) must be less than or equal to max (${n}).`),r===n)return ep(o.shape,r,o.dtype);let i={x:o},s={clipValueMin:r,clipValueMax:n};return ue.runKernel(Cg,i,s)}var Hs,ODe=D(()=>{"use strict";$e();Ee();Pe();Ze();gI();De();Hs=se({clipByValue_:CIt})});function EIt(t){return Fn(t,0)}var T8,FDe=D(()=>{"use strict";Kf();De();T8=se({concat1d_:EIt})});function TIt(t,r){return Fn(t,r)}var A8,RDe=D(()=>{"use strict";Kf();De();A8=se({concat2d_:TIt})});function AIt(t,r){return Fn(t,r)}var k8,MDe=D(()=>{"use strict";Kf();De();k8=se({concat3d_:AIt})});function kIt(t,r){return Fn(t,r)}var I8,PDe=D(()=>{"use strict";Kf();De();I8=se({concat4d_:kIt})});function IIt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","conv2d","float32"),u=J(r,"filter","conv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),de(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),de(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),go("conv2d",o,a);let d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),de(ba(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),de(f0(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),de(f0(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:u},h={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},m=ue.runKernel(Nb,p,h);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var qu,kC=D(()=>{"use strict";$e();Ee();Pe();Ze();Is();De();Ht();qu=se({conv2d_:IIt})});function DIt(t,r,n,o,i="NWC",s=1,a){let l=J(t,"x","conv1d"),u=J(r,"filter","conv1d"),c=l,f=!1;l.rank===2&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1]])),de(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),de(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),go("conv1d",o,a),de(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),de(ba(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),de(f0(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),de(f0(n),()=>"Error in conv1D: Stride should be larger than 0."),de(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=Se(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=qu(p,d,[1,n],o,"NHWC",[1,s],a);return f?Se(y,[y.shape[2],y.shape[3]]):Se(y,[y.shape[0],y.shape[2],y.shape[3]])}var yI,Yoe=D(()=>{"use strict";Pe();Ze();kC();Is();De();Ht();yI=se({conv1d_:DIt})});function NIt(t,r,n,o,i,s="NHWC",a){de(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let l=t,u=r,c=!1;r.rank===3&&(c=!0,u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]),l=[1,t[0],t[1],t[2]]),de(l.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${l.length}.`),de(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),de(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let f=s==="NHWC"?l[3]:l[1],d=s==="NHWC"?u.shape[3]:u.shape[1];de(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),de(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),go("conv2dDerInput",i,a);let p={dy:u,filter:n},h={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:l},m=ue.runKernel(Ob,p,h);return c?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var bI,D8=D(()=>{"use strict";$e();Ee();Ze();Is();De();Ht();bI=se({conv2DBackpropInput_:NIt})});function OIt(t,r,n,o,i,s){let a=J(t,"x","conv2dTranspose"),l=J(r,"filter","conv2dTranspose");return bI(n,a,l,o,i,"NHWC",s)}var xI,Xoe=D(()=>{"use strict";Pe();D8();De();xI=se({conv2dTranspose_:OIt})});function FIt(t,r,n,o,i="NDHWC",s=[1,1,1]){let a=J(t,"x","conv3d"),l=J(r,"filter","conv3d"),u=a,c=!1;a.rank===4&&(c=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),de(l.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${l.rank}.`),de(u.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${l.shape[3]}.`),de(ba(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),de(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),de(f0(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),de(f0(n),()=>"Error in conv3D: Strides should be larger than 0.");let f={x:u,filter:l},d={strides:n,pad:o,dataFormat:i,dilations:s},p=ue.runKernel(Fb,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var N8,jDe=D(()=>{"use strict";$e();Ee();Pe();Ze();Is();De();Ht();N8=se({conv3d_:FIt})});function RIt(t,r,n,o,i){de(t.length===r.rank,()=>`Length of inShape (${t.length}) and rank of dy (${r.rank}) must match`);let s=t,a=r,l=!1;r.rank===4&&(l=!0,a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);let u=s[4],c=a.shape[4];de(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),de(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),de(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),de(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),de(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let f={dy:a,filter:n},d={pad:i,strides:o,inputShape:s},p=ue.runKernel(xS,f,d);return l?Se(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var O8,Koe=D(()=>{"use strict";$e();Ee();Ze();De();Ht();O8=se({conv3DBackpropInput_:RIt})});function MIt(t,r,n,o,i){let s=J(t,"x","conv3dTranspose"),a=J(r,"filter","conv3dTranspose");return O8(n,s,a,o,i)}var F8,LDe=D(()=>{"use strict";Pe();Koe();De();F8=se({conv3dTranspose_:MIt})});function PIt(t){let n={x:J(t,"x","cos","float32")};return ue.runKernel(Eg,n)}var q1,R8=D(()=>{"use strict";$e();Ee();Pe();De();q1=se({cos_:PIt})});function jIt(t){let n={x:J(t,"x","cosh","float32")};return ue.runKernel(Tg,n)}var vI,Zoe=D(()=>{"use strict";$e();Ee();Pe();De();vI=se({cosh_:jIt})});function LIt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumprod")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(vS,s,a)}var IC,M8=D(()=>{"use strict";$e();Ee();Pe();De();IC=se({cumprod_:LIt})});function BIt(t,r=0,n=!1,o=!1){let s={x:J(t,"x","cumsum")},a={axis:r,exclusive:n,reverse:o};return ue.runKernel(Rb,s,a)}var wI,P8=D(()=>{"use strict";$e();Ee();Pe();De();wI=se({cumsum_:BIt})});function $It(t,r,n,o=!1){let i=J(t,"x","denseBincount"),s=J(r,"weights","denseBincount");de(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),de(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),de(n>=0,()=>`size must be non-negative, but got ${n}.`),de(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);let a={x:i,weights:s},l={size:n,binaryOutput:o};return ue.runKernel(_S,a,l)}var f3,BDe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();f3=se({denseBincount_:$It})});function zIt(t,r,n="NHWC"){let o=J(t,"x","depthToSpace","float32"),i=n==="NHWC"?o.shape[1]:o.shape[2],s=n==="NHWC"?o.shape[2]:o.shape[3],a=n==="NHWC"?o.shape[3]:o.shape[1];de(r>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${r}`),de(i*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${r}  for depthToSpace with input shape
    ${o.shape}`),de(s*r>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${r} for depthToSpace with input shape
        ${o.shape}`),de(a%(r*r)===0,()=>`Dimension size must be evenly divisible by ${r*r} but is ${a} for depthToSpace with input shape ${o.shape}`);let l={x:o},u={blockSize:r,dataFormat:n};return ue.runKernel(SS,l,u)}var j8,Qoe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();j8=se({depthToSpace_:zIt})});function UIt(t,r,n,o,i="NHWC",s=[1,1],a){let l=J(t,"x","depthwiseConv2d","float32"),u=J(r,"filter","depthwiseConv2d","float32"),c=l,f=!1;l.rank===3&&(f=!0,c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),de(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),de(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=i==="NHWC"?c.shape[3]:c.shape[1];de(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),go("depthwiseConv2d",o,a);let p={x:c,filter:u},h={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a},m=ue.runKernel(Mb,p,h);return f?Se(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var h0,d3=D(()=>{"use strict";$e();Ee();Pe();Ze();Is();De();Ht();h0=se({depthwiseConv2d_:UIt})});function VIt(t){let n={x:J(t,"x","diag")};return ue.runKernel(TS,n)}var $De,zDe=D(()=>{"use strict";$e();Ee();Pe();De();$De=se({diag_:VIt})});function GIt(t,r,n,o,i=[1,1],s="NHWC"){let a=J(t,"x","dilation2d"),l=J(r,"filter","dilation2d");de(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),de(l.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${l.rank}.`),de(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=a,c=!1;a.rank===3&&(u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),de(u.shape[3]===l.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${l.shape[2]}`);let f={x:u,filter:l},d={strides:n,pad:o,dilations:i},p=ue.runKernel(Pb,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var L8,Joe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Ht();L8=se({dilation2d_:GIt})});var Hu={};fn(Hu,{assertAndGetBroadcastShape:()=>jr,getBroadcastDims:()=>UDe,getReductionAxes:()=>oo});function UDe(t,r){let n=t.length,o=[];for(let i=0;i<n;i++){let s=n-1-i,a=t[s]||1;(r[r.length-1-i]||1)>1&&a===1&&o.unshift(s)}return o}function oo(t,r){let n=[];for(let o=0;o<r.length;o++){let i=t[t.length-o-1],s=r.length-o-1,a=r[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function jr(t,r){let n=Math.max(t.length,r.length),o=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let a=r[r.length-i-1];if(a==null&&(a=1),s===1)o[n-i-1]=a;else if(a===1)o[n-i-1]=s;else if(s!==a){let l=`Operands could not be broadcast together with shapes ${t} and ${r}.`;throw Error(l)}else o[n-i-1]=s}return o}var ko=D(()=>{"use strict";});function WIt(t,r){let n=J(t,"a","equal","string_or_numeric"),o=J(r,"b","equal","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(C1,i)}var Sl,p3=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();Sl=se({equal_:WIt})});function qIt(t,r,n){let o=J(r,"a","where"),i=J(n,"b","where"),s=J(t,"condition","where","bool"),a=jr(jr(s.shape,o.shape),i.shape),l=p0(s,a),u=p0(o,a),c=p0(i,a),f={condition:l,t:u,e:c};return ue.runKernel(ix,f)}var yo,Zf=D(()=>{"use strict";$e();Ee();Pe();C8();ko();De();yo=se({where_:qIt})});function HIt(t){let n={x:J(t,"x","zerosLike")};return ue.runKernel(px,n)}var sr,zo=D(()=>{"use strict";$e();Ee();Pe();De();sr=se({zerosLike_:HIt})});function YIt(t,r){let n=J(t,"a","div"),o=J(r,"b","div");[n,o]=sn(n,o);let i=Ct(n,o),s=sr(i),a=Sl(o,s);return yo(a,s,i)}var B8,eie=D(()=>{"use strict";ni();Pe();Xn();p3();De();Zf();zo();B8=se({divNoNan_:YIt})});function XIt(t,r){let n=J(t,"t1","dot"),o=J(r,"t2","dot");de((n.rank===1||n.rank===2)&&(o.rank===1||o.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);let i=n.rank===1?n.size:n.shape[1],s=o.rank===1?o.size:o.shape[0];if(de(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&o.rank===1){let a=Se(n,[1,-1]),l=Se(o,[-1,1]),u=Vr(a,l);return Se(u,[])}else if(n.rank===1&&o.rank===2){let a=Se(n,[1,-1]),l=Se(o,[o.shape[0],o.shape[1]]),u=Vr(a,l);return Se(u,[u.size])}else if(n.rank===2&&o.rank===1){let a=Se(o,[-1,1]),l=Vr(n,a);return Se(l,[l.size])}else{let a=Se(o,[o.shape[0],o.shape[1]]);return Vr(n,a)}}var $8,tie=D(()=>{"use strict";Pe();Ze();wh();De();Ht();$8=se({dot_:XIt})});function KIt(t,...r){let n=r.map((i,s)=>J(i,`tensors${s}`,"einsum")),o={equation:t};return ue.runKernel(AS,n,o)}var H1,rie=D(()=>{"use strict";$e();Ee();Pe();De();H1=se({einsum_:KIt})});function ZIt(t){let n={x:J(t,"x","elu","float32")};return ue.runKernel(kg,n)}var m0,z8=D(()=>{"use strict";$e();Ee();Pe();De();m0=se({elu_:ZIt})});function QIt(t,r){let n=J(t,"x","ensureShape","string_or_numeric");if(!Xne(n.shape,r))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${r}`);return t}var VDe,GDe=D(()=>{"use strict";Pe();Ws();De();VDe=se({ensureShape_:QIt})});function JIt(t){let r=J(t,"x","erf");de(r.dtype==="int32"||r.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),r.dtype==="int32"&&(r=rt(r,"float32"));let n={x:r};return ue.runKernel(Ig,n)}var _I,WDe=D(()=>{"use strict";$e();Ee();Pe();Ze();pn();De();_I=se({erf_:JIt})});function nie(t,r){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==r-1-n)return!1;return!0}function qDe(t,r,n){let o=t.length+r.length,i=[],s=0,a=0;for(let l=0;l<o;l++)n.indexOf(l)===-1?i.push(t[s++]):i.push(r[a++]);return i}function oie(t,r){let n=[],o=t.length;for(let s=0;s<o;s++)r.indexOf(s)===-1&&n.push(t[s]);let i=r.map(s=>t[s]);return[n,i]}function tp(t,r){let n=r.map(o=>1);return qDe(t,n,r)}function eDt(t,r,n){de(nie(r,n),()=>`${t} supports only inner-most axes for now. Got axes ${r} and rank-${n} input.`)}function iie(t,r){if(nie(t,r))return null;let n=[];for(let o=0;o<r;++o)t.indexOf(o)===-1&&n.push(o);return t.forEach(o=>n.push(o)),n}function h3(t){return t.map((r,n)=>[n,r]).sort((r,n)=>r[1]-n[1]).map(r=>r[0])}function tDt(t,r){let n=[];for(let o=r-t;o<r;++o)n.push(o);return n}var Sh=D(()=>{"use strict";Ze();});function rDt(t,r=null,n=!1){let i={x:J(t,"x","max")},s={reductionIndices:r,keepDims:n};return ue.runKernel(Ub,i,s)}var Ys,SI=D(()=>{"use strict";$e();Ee();Pe();De();Ys=se({max_:rDt})});function nDt(t,r=null,n=!1){let i={x:J(t,"x","min")},s={axis:r,keepDims:n};return ue.runKernel(qb,i,s)}var vx,U8=D(()=>{"use strict";$e();Ee();Pe();De();vx=se({min_:nDt})});function oDt(t,r){let n=J(t,"base","pow"),o=J(r,"exp","pow");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Gg,i)}var $a,Y1=D(()=>{"use strict";$e();Ee();ni();Pe();De();$a=se({pow_:oDt})});function Rt(t,r){if(($i(t)&&r!=="string"||Array.isArray(t))&&r!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(r==="string"&&$i(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return eu(t,[],[],r)}var Uo=D(()=>{"use strict";Ze();gx();});function iDt(t){let n={x:J(t,"x","sqrt","float32")};return ue.runKernel(r0,n)}var Kn,Ch=D(()=>{"use strict";$e();Ee();Pe();De();Kn=se({sqrt_:iDt})});function sDt(t){let r=J(t,"x","square"),n={};return ue.runKernel("Square",{x:r},n)}var qr,fs=D(()=>{"use strict";$e();Pe();De();qr=se({square_:sDt})});function aDt(t,r=null,n=!1){let o=J(t,"x","sum");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(ax,i,s)}var It,Ci=D(()=>{"use strict";$e();Ee();Pe();pn();De();It=se({sum_:aDt})});function lDt(t,r="euclidean",n=null,o=!1){t=J(t,"x","norm");let i=HDe(t,r,n),s=i.shape;if(o){let a=cs(n,t.shape);s=tp(i.shape,a)}return Se(i,s)}function HDe(t,r,n=null){if(t.rank===0)return Ao(t);if(t.rank!==1&&n===null)return HDe(Se(t,[-1]),r,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(r===1)return It(Ao(t),n);if(r===1/0)return Ys(Ao(t),n);if(r===-1/0)return vx(Ao(t),n);if(r==="euclidean"||r===2)return Kn(It($a(Ao(t),Rt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}if(Array.isArray(n)&&n.length===2){if(r===1)return Ys(It(Ao(t),n[0]),n[1]-1);if(r===1/0)return Ys(It(Ao(t),n[1]),n[0]);if(r===-1/0)return vx(It(Ao(t),n[1]),n[0]);if(r==="fro"||r==="euclidean")return Kn(It(qr(t),n));throw new Error(`Error in norm: invalid ord value: ${r}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var wx,m3=D(()=>{"use strict";Pe();Ze();EC();Sh();SI();U8();De();Y1();Ht();Uo();Ch();fs();Ci();wx=se({norm_:lDt})});function uDt(t,r=null,n=!1){return wx(t,"euclidean",r,n)}var V8,aie=D(()=>{"use strict";m3();De();V8=se({euclideanNorm_:uDt})});function cDt(t){let n={x:J(t,"x","exp")};return ue.runKernel(Dg,n)}var bi,g0=D(()=>{"use strict";$e();Ee();Pe();De();bi=se({exp_:cDt})});function fDt(t,r=0){let n=J(t,"x","expandDims","string_or_numeric");de(r<=n.rank,()=>"Axis must be <= rank of the tensor");let o={input:n},i={dim:r};return ue.runKernel(jb,o,i)}var Ei,CI=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Ei=se({expandDims_:fDt})});function dDt(t){let n={x:J(t,"x","expm1")};return ue.runKernel(Ng,n)}var G8,YDe=D(()=>{"use strict";$e();Ee();Pe();De();G8=se({expm1_:dDt})});function pDt(t,r){let n=J(t,"x","tile","string_or_numeric");de(n.rank===r.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${r}.`);let o={x:n},i={reps:r};return ue.runKernel(mh,o,i)}var xa,EI=D(()=>{"use strict";$e();Ee();Pe();Ze();De();xa=se({tile_:pDt})});function hDt(t,r,n,o="float32"){r==null&&(r=t);let i=Jt([t,r],o),s=t<=r?t:r;for(let l=0;l<s;++l)i.set(1,l,l);let a=Se(i.toTensor(),[t,r]);if(n==null)return a;if(n.length===1)return xa(Ei(a,0),[n[0],1,1]);if(n.length===2)return xa(Ei(Ei(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return xa(Ei(Ei(Ei(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var DC,lie=D(()=>{"use strict";xx();CI();De();Ht();EI();DC=se({eye_:hDt})});function mDt(t){let n={x:J(t,"x","floor","float32")};return ue.runKernel(Og,n)}var y0,W8=D(()=>{"use strict";$e();Ee();Pe();De();y0=se({floor_:mDt})});function gDt(t,r,n=0,o=0){let i=J(t,"x","gather"),s=J(r,"indices","gather","int32"),a={x:i,indices:s},l={axis:n,batchDims:o};return ue.runKernel(Bb,a,l)}var b0,g3=D(()=>{"use strict";$e();Ee();Pe();De();b0=se({gather_:gDt})});function yDt(t,r){let n=J(t,"a","greater","string_or_numeric"),o=J(r,"b","greater","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(E1,i)}var oi,x0=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();oi=se({greater_:yDt})});function bDt(t,r){let n=J(t,"a","greaterEqual","string_or_numeric"),o=J(r,"b","greaterEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(Rg,i)}var tu,NC=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();tu=se({greaterEqual_:bDt})});function xDt(t){let n={input:J(t,"input","imag")};return ue.runKernel(RS,n)}var X1,y3=D(()=>{"use strict";$e();Ee();Pe();De();X1=se({imag_:xDt})});function vDt(t){let n={x:J(t,"x","isFinite")};return ue.runKernel(Mg,n)}var q8,XDe=D(()=>{"use strict";$e();Ee();Pe();De();q8=se({isFinite_:vDt})});function wDt(t){let n={x:J(t,"x","isInf")};return ue.runKernel(Pg,n)}var H8,KDe=D(()=>{"use strict";$e();Ee();Pe();De();H8=se({isInf_:wDt})});function _Dt(t){let n={x:J(t,"x","isNaN")};return ue.runKernel(jg,n)}var Y8,ZDe=D(()=>{"use strict";$e();Ee();Pe();De();Y8=se({isNaN_:_Dt})});function SDt(t,r=.2){let o={x:J(t,"x","leakyRelu")},i={alpha:r};return ue.runKernel($b,o,i)}var K1,X8=D(()=>{"use strict";$e();Ee();Pe();De();K1=se({leakyRelu_:SDt})});function CDt(t,r){let n=J(t,"a","less","string_or_numeric"),o=J(r,"b","less","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(T1,i)}var _x,b3=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();_x=se({less_:CDt})});function EDt(t,r){let n=J(t,"a","lessEqual","string_or_numeric"),o=J(r,"b","lessEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(A1,i)}var Pc,Z1=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();Pc=se({lessEqual_:EDt})});function QDe(t,r,n){if(n<=0)throw new Error("The number of values should be positive.");let o={start:t,stop:r,num:n};return ue.runKernel(MS,{},o)}var JDe=D(()=>{"use strict";$e();Ee();});function TDt(t,r=5,n=1,o=1,i=.5){let s=J(t,"x","localResponseNormalization");de(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),de(vb(r),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${r}.`);let a=s,l=!1;s.rank===3&&(l=!0,a=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let u={x:a},c={depthRadius:r,bias:n,alpha:o,beta:i},f=ue.runKernel(zb,u,c);return l?Se(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var K8,uie=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Ht();K8=se({localResponseNormalization_:TDt})});function ADt(t){let n={x:J(t,"x","log","float32")};return ue.runKernel(Lg,n)}var Xs,TI=D(()=>{"use strict";$e();Ee();Pe();De();Xs=se({log_:ADt})});function kDt(t){let n={x:J(t,"x","log1p")};return ue.runKernel(Bg,n)}var Q1,cie=D(()=>{"use strict";$e();Ee();Pe();De();Q1=se({log1p_:kDt})});function eNe(t){return de(hg(t),()=>"The f passed in grad(f) must be a function"),(r,n)=>{let o=J(r,"x","tf.grad","string_or_numeric"),i=n!=null?J(n,"dy","tf.grad"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(o),[o],i);return i!=null&&Bo(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Z8(a),a[0]})}}function tNe(t){return de(hg(t),()=>"The f passed in grads(f) must be a function"),(r,n)=>{de(Array.isArray(r),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let o=mx(r,"args","tf.grads","string_or_numeric"),i=n!=null?J(n,"dy","tf.grads"):null;return ue.tidy(()=>{let{value:s,grads:a}=ue.gradients(()=>t(...o),o,i);return i!=null&&Bo(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Z8(a),a})}}function rNe(t){return de(hg(t),()=>"The f passed in valueAndGrad(f) must be a function"),(r,n)=>{de(r instanceof tn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),de(n==null||n instanceof tn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:o,value:i}=ue.gradients(()=>t(r),[r],n);return Z8(o),{grad:o[0],value:i}}}function nNe(t){return de(hg(t),()=>"The f passed in valueAndGrads(f) must be a function"),(r,n)=>{de(Array.isArray(r)&&r.every(i=>i instanceof tn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),de(n==null||n instanceof tn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let o=ue.gradients(()=>t(...r),r,n);return n!=null&&Bo(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Z8(o.grads),o}}function x3(t,r){de(hg(t),()=>"The f passed in variableGrads(f) must be a function"),de(r==null||Array.isArray(r)&&r.every(c=>c instanceof u0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=r!=null;if(!n){r=[];for(let c in ue.registeredVariables)r.push(ue.registeredVariables[c])}let o=n?r.filter(c=>!c.trainable):null,i=r.length;r=r.filter(c=>c.trainable),de(r.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let s=!0,{value:a,grads:l}=ue.gradients(t,r,null,s);de(l.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),de(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);let u={};return r.forEach((c,f)=>{l[f]!=null&&(u[c.name]=l[f])}),o?.forEach(c=>u[c.name]=null),{value:a,grads:u}}function Cl(t){return ue.customGrad(t)}function Z8(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var Sx=D(()=>{"use strict";$e();Je();Pe();Ze();});function IDt(t){let n={x:J(t,"x","neg")};return ue.runKernel(Yb,n)}var Zr,Ks=D(()=>{"use strict";$e();Ee();Pe();De();Zr=se({neg_:IDt})});function DDt(t){let n={x:J(t,"x","softplus")};return ue.runKernel(t0,n)}var Eh,fie=D(()=>{"use strict";$e();Ee();Pe();De();Eh=se({softplus_:DDt})});function NDt(t){let r=J(t,"x","logSigmoid");return Cl(o=>({value:Zr(Eh(Zr(o))),gradFunc:a=>we(a,_l(Zr(o)))}))(r)}var Q8,oNe=D(()=>{"use strict";Sx();Pe();fr();Ks();De();hI();fie();Q8=se({logSigmoid_:NDt})});function ODt(t,r){let n=J(t,"a","sub"),o=J(r,"b","sub");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(o0,i)}var wt,io=D(()=>{"use strict";$e();Ee();ni();Pe();De();wt=se({sub_:ODt})});function FDt(t,r=-1){let n=J(t,"logits","logSoftmax");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${r}`);return Cl((i,s)=>{let l=Ys(i,r,!0),u=wt(i,l),c=wt(rt(u,"float32"),Xs(It(bi(u),r,!0)));return s([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,m=!0,g=bi(h);return wt(d,we(It(d,r,m),g))}}})(n)}var AI,iNe=D(()=>{"use strict";Sx();Pe();pn();g0();TI();SI();fr();De();io();Ci();AI=se({logSoftmax_:FDt})});function RDt(t,r=null,n=!1){let o=J(t,"x","logSumExp"),i=cs(r,o.shape),s=Ys(o,i,!0),a=wt(o,s),l=bi(a),u=It(l,i),c=Xs(u),f=Ke(Se(s,c.shape),c);if(n){let d=tp(f.shape,i);return Se(f,d)}return f}var J1,J8=D(()=>{"use strict";Pe();Ze();$o();Sh();g0();TI();SI();De();Ht();io();Ci();J1=se({logSumExp_:RDt})});function MDt(t,r){let n=J(t,"a","logicalAnd","bool"),o=J(r,"b","logicalAnd","bool");jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(k1,i)}var za,OC=D(()=>{"use strict";$e();Ee();Pe();ko();De();za=se({logicalAnd_:MDt})});function PDt(t){let n={x:J(t,"x","logicalNot","bool")};return ue.runKernel(I1,n)}var ew,v3=D(()=>{"use strict";$e();Ee();Pe();De();ew=se({logicalNot_:PDt})});function jDt(t,r){let n=J(t,"a","logicalOr","bool"),o=J(r,"b","logicalOr","bool");jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(D1,i)}var kI,eU=D(()=>{"use strict";$e();Ee();Pe();ko();De();kI=se({logicalOr_:jDt})});function LDt(t,r){let n=J(t,"a","logicalXor","bool"),o=J(r,"b","logicalXor","bool");return jr(n.shape,o.shape),za(kI(t,r),ew(za(t,r)))}var tU,die=D(()=>{"use strict";Pe();ko();OC();v3();eU();De();tU=se({logicalXor_:LDt})});function BDt(t,r,n="left"){let o=J(t,"sortedSequence","searchSorted"),i=J(r,"values","searchSorted"),s=o.shape[o.shape.length-1],a=i.shape[i.shape.length-1],l=Se(o,[-1,s]),u=Se(i,[-1,a]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(on(u.shape)>=rU)throw new Error(`values tensor size must less than ${rU}`);if(l.shape[1]>=rU)throw new Error(`trailing dim_size must less than ${rU} for int32 output type, was ${l.shape[1]}`);let c={sortedSequence:l,values:u},f={side:n};return ue.runKernel(JS,c,f)}var rU,w3,nU=D(()=>{"use strict";$e();Ee();Pe();Ws();De();Ht();rU=2147483648;w3=se({searchSorted_:BDt})});function sNe(t,r){return w3(t,r,"left")}var aNe=D(()=>{"use strict";nU();});function $Dt(t,r,n,o,i){let s=J(t,"x","maxPool"),a=1,l=s,u=!1;s.rank===3&&(u=!0,l=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(l.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.rank}.`),de(ba(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),go("maxPool",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i},d=ue.runKernel(Vb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var tw,oU=D(()=>{"use strict";$e();Ee();Pe();Ze();Is();De();Ht();tw=se({maxPool_:$Dt})});function zDt(t,r=[1,1,1],n,o,i,s="NDHWC"){let a=J(t,"x","maxPool3d"),l=a,u=!1;a.rank===4&&(u=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),de(l.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${l.rank}.`),de(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),go("maxPool3d",o,i);let c={x:l},f={filterSize:r,strides:n,pad:o,dimRoundingMode:i,dataFormat:s},d=ue.runKernel(Gb,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var iU,lNe=D(()=>{"use strict";$e();Ee();Pe();Ze();Is();De();Ht();iU=se({maxPool3d_:zDt})});function UDt(t,r,n,o,i=!1){let a={x:J(t,"x","maxPoolWithArgmax")},l={filterSize:r,strides:n,pad:o,includeBatchInIndex:i},u=ue.runKernel(BS,a,l);return{result:u[0],indexes:u[1]}}var uNe,cNe=D(()=>{"use strict";$e();Ee();Pe();De();uNe=se({maxPoolWithArgmax_:UDt})});function VDt(t,r){let n=J(t,"a","maximum"),o=J(r,"b","maximum");[n,o]=sn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel($g,i)}var Yu,_3=D(()=>{"use strict";$e();Ee();ni();Pe();ko();pn();De();Yu=se({maximum_:VDt})});function GDt(t,r=null,n=!1){let i={x:J(t,"x","mean")},s={axis:r,keepDims:n};return ue.runKernel(Wb,i,s)}var bo,S3=D(()=>{"use strict";$e();Ee();Pe();De();bo=se({mean_:GDt})});function xo(t,r="float32"){if(ti(t),r==="complex64"){let o=xo(t,"float32"),i=xo(t,"float32");return Vu(o,i)}let n=Gk(on(t),r);return ue.makeTensor(n,t,r)}var II=D(()=>{"use strict";$e();Ze();B1();});function Ui(t,r="float32"){if(ti(t),r==="complex64"){let o=Ui(t,"float32"),i=xo(t,"float32");return Vu(o,i)}let n=YM(on(t),r);return ue.makeTensor(n,t,r)}var FC=D(()=>{"use strict";$e();Ze();Ws();B1();II();});function fNe(t,r,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let o=J(t,"x","meshgrid",t instanceof tn?t.dtype:"float32");if(r===void 0)return[o];let i=J(r,"y","meshgrid",r instanceof tn?r.dtype:"float32"),s=on(o.shape),a=on(i.shape);return n==="xy"?(o=Se(o,[1,-1]),i=Se(i,[-1,1]),[Vr(Ui([a,1],o.dtype),o),Vr(i,Ui([1,s],i.dtype))]):(o=Se(o,[-1,1]),i=Se(i,[1,-1]),[Vr(o,Ui([1,a],o.dtype)),Vr(Ui([s,1],i.dtype),i)])}var dNe=D(()=>{"use strict";wh();FC();Ht();Je();Pe();Ws();});function WDt(t,r){let n=J(t,"a","minimum"),o=J(r,"b","minimum");[n,o]=sn(n,o),n.dtype==="bool"&&(n=rt(n,"int32"),o=rt(o,"int32")),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(zg,i)}var Qf,C3=D(()=>{"use strict";$e();Ee();ni();Pe();ko();pn();De();Qf=se({minimum_:WDt})});function qDt(t,r,n){de(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let o=J(t,"x","mirrorPad");if(o.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");de(r.length===o.rank,()=>`Padding doesn't match input. Must be ${o.rank}. Got ${r.length}.`);let i=n==="reflect"?1:0;for(let l=0;l<o.rank;l++)de(r[l].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),de(r[l][0]>=0&&r[l][0]<=o.shape[l]-i&&r[l][1]>=0&&r[l][1]<=o.shape[l]-i,()=>`Padding in dimension ${l} cannot be greater than or equal to ${o.shape[l]-i} or less than 0 for input of shape ${o.shape}`);let s={paddings:r,mode:n},a={x:o};return ue.runKernel(Hb,a,s)}var sU,pie=D(()=>{"use strict";$e();Ee();Pe();Ze();De();sU=se({mirrorPad_:qDt})});function HDt(t,r){let n=J(t,"a","mod"),o=J(r,"b","mod");[n,o]=sn(n,o);let i={a:n,b:o};return ue.runKernel(Ug,i)}var aU,hie=D(()=>{"use strict";$e();Ee();ni();Pe();De();aU=se({mod_:HDt})});function YDt(t,r=null,n=!1){t=J(t,"x","moments");let o=cs(r,t.shape),i=bo(t,o,n),s=i.shape;n||(s=tp(i.shape,o));let a=qr(wt(rt(t,"float32"),Se(i,s))),l=bo(a,o,n);return{mean:i,variance:l}}var RC,pNe=D(()=>{"use strict";Pe();Ze();Sh();pn();S3();De();Ht();fs();io();RC=se({moments_:YDt})});function XDt(t,r,n,o){let i=J(r,"data","multiRNNCell"),s=mx(n,"c","multiRNNCell"),a=mx(o,"h","multiRNNCell"),l=i,u=[];for(let d=0;d<t.length;d++){let p=t[d](l,s[d],a[d]);u.push(p[0]),u.push(p[1]),l=p[1]}let c=[],f=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),f.push(u[d+1]);return[c,f]}var hNe,mNe=D(()=>{"use strict";Pe();De();hNe=se({multiRNNCell_:XDt})});function KDt(t,r,n,o=!1){let i=J(t,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();let u={logits:a===1?Se(i,[1,-1]):i},c={numSamples:r,seed:n,normalized:o},f=ue.runKernel($S,u,c);return a===1?Se(f,[f.size]):f}var gNe,yNe=D(()=>{"use strict";$e();Ee();Pe();De();Ht();gNe=se({multinomial_:KDt})});function ZDt(t,r){let n=J(t,"a","notEqual","string_or_numeric"),o=J(r,"b","notEqual","string_or_numeric");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o};return ue.runKernel(N1,i)}var Th,lU=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();Th=se({notEqual_:ZDt})});function QDt(t,r,n=1,o=0,i="int32"){if(r<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${r}`);let a={indices:J(t,"indices","oneHot","int32")},l={dtype:i,depth:r,onValue:n,offValue:o};return ue.runKernel(Kb,a,l)}var v0,uU=D(()=>{"use strict";$e();Ee();Pe();De();v0=se({oneHot_:QDt})});function JDt(t){let n={x:J(t,"x","onesLike")};return ue.runKernel(Xb,n)}var Ds,bNe=D(()=>{"use strict";$e();Ee();Pe();De();Ds=se({onesLike_:JDt})});function eNt(t,r){let n=J(t,"v1","outerProduct"),o=J(r,"v2","outerProduct");de(n.rank===1&&o.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${o.rank}.`);let i=Se(n,[-1,1]),s=Se(o,[1,-1]);return Vr(i,s)}var xNe,vNe=D(()=>{"use strict";Pe();Ze();wh();De();Ht();xNe=se({outerProduct_:eNt})});function tNt(t,r,n=0){let o=J(t,"x","pad");if(o.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:r,constantValue:n},s={x:o};return ue.runKernel(Qb,s,i)}var ru,rw=D(()=>{"use strict";$e();Ee();Pe();De();ru=se({pad_:tNt})});function rNt(t,r,n=0){return de(r.length===2,()=>"Invalid number of paddings. Must be length of 2."),ru(t,[r],n)}var wNe,_Ne=D(()=>{"use strict";Ze();De();rw();wNe=se({pad1d_:rNt})});function nNt(t,r,n=0){return de(r.length===2&&r[0].length===2&&r[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ru(t,r,n)}var SNe,CNe=D(()=>{"use strict";Ze();De();rw();SNe=se({pad2d_:nNt})});function oNt(t,r,n=0){return de(r.length===3&&r[0].length===2&&r[1].length===2&&r[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ru(t,r,n)}var ENe,TNe=D(()=>{"use strict";Ze();De();rw();ENe=se({pad3d_:oNt})});function iNt(t,r,n=0){return de(r.length===4&&r[0].length===2&&r[1].length===2&&r[2].length===2&&r[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ru(t,r,n)}var ANe,kNe=D(()=>{"use strict";Ze();De();rw();ANe=se({pad4d_:iNt})});function sNt(t,r,n){let o=J(t,"x","spaceToBatchND");de(o.rank>=1+r.length,()=>`input rank ${o.rank} should be > than [blockShape] ${r.length}`),de(n.length===r.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${r.length}`),de(o.shape.reduce((a,l,u)=>u>0&&u<=r.length?a&&(l+n[u-1][0]+n[u-1][1])%r[u-1]===0:a,!0),()=>`input spatial dimensions ${o.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${r.toString()}`);let i={x:o},s={blockShape:r,paddings:n};return ue.runKernel(lx,i,s)}var nw,E3=D(()=>{"use strict";$e();Ee();Pe();Ze();De();nw=se({spaceToBatchND_:sNt})});function aNt(t,r,n,o,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),o===0&&(o="valid");let l=J(t,"x","maxPool"),u=l,c=!1;l.rank===3&&(c=!0,u=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),de(ba(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);let f=Goe(u.shape,r,s,i,o),d=[f.dilationHeight,f.dilationWidth],p;o==="same"?p=uNt([f.filterHeight,f.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[m,g]=lNt([f.inHeight,f.inWidth],d,p),y=h?o:"valid",b=h?u:nw(u,d,m),v=(n==="avg"?()=>G1(b,r,s,y,a):()=>tw(b,r,s,y,a))(),w=h?v:W1(v,d,g);return c?Se(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function lNt(t,r,n){let o=n.map(f=>f[0]),i=n.map(f=>f[1]),s=t.concat(o,i),a=r.map((f,d)=>(f-s[d]%f)%f),l=i.map((f,d)=>f+a[d]),u=r.map((f,d)=>[o[d],l[d]]),c=r.map((f,d)=>[0,a[d]]);return[u,c]}function uNt(t,r){let o=t.map((a,l)=>a+(a-1)*(r[l]-1)).map(a=>a-1),i=o.map(a=>Math.floor(a/2)),s=o.map((a,l)=>a-i[l]);return o.map((a,l)=>[i[l],s[l]])}var cU,mie=D(()=>{"use strict";Pe();Ze();b8();c3();Is();oU();De();Ht();E3();cU=se({pool_:aNt})});function cNt(t,r){let n=J(t,"x","prelu"),o=J(r,"alpha","prelu"),i={x:n,alpha:o};return ue.runKernel(Jb,i)}var ow,fU=D(()=>{"use strict";$e();Ee();Pe();De();ow=se({prelu_:cNt})});function fNt(t,r=null,n=!1){let o=J(t,"x","prod");o.dtype==="bool"&&(o=rt(o,"int32"));let i={x:o},s={axis:r,keepDims:n};return ue.runKernel(ex,i,s)}var dU,gie=D(()=>{"use strict";$e();Ee();Pe();pn();De();dU=se({prod_:fNt})});function dNt(t,r,n,o){let i=t.map((f,d)=>J(f,`tensors${d}`,"raggedGather","int32")),s=J(r,"paramsDenseValues","raggedGather"),a=J(n,"indices","raggedGather","int32"),l={paramsNestedSplits:i,paramsDenseValues:s,indices:a},u={outputRaggedRank:o},c=ue.runKernel(GS,l,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var INe,DNe=D(()=>{"use strict";$e();Ee();Pe();De();INe=se({raggedGather_:dNt})});function pNt(t,r,n){let o=J(t,"starts","raggedRange"),i=J(r,"limits","raggedRange",o.dtype),s=J(n,"deltas","raggedRange",o.dtype),a={starts:o,limits:i,deltas:s},l=ue.runKernel(WS,a);return{rtNestedSplits:l[0],rtDenseValues:l[1]}}var NNe,ONe=D(()=>{"use strict";$e();Ee();Pe();De();NNe=se({raggedRange_:pNt})});function hNt(t,r,n,o,i){let s=J(t,"shape","raggedTensorToTensor","int32"),a=J(r,"values","raggedTensorToTensor"),l=J(n,"defaultValue","raggedTensorToTensor",a.dtype),u=o.map((d,p)=>J(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:s,values:a,defaultValue:l,rowPartitionTensors:u},f={rowPartitionTypes:i};return ue.runKernel(qS,c,f)}var FNe,RNe=D(()=>{"use strict";$e();Ee();Pe();De();FNe=se({raggedTensorToTensor_:hNt})});function mNt(t,r,n){ti(t);let o=on(t),i=null;if(n==null||n==="float32")i=new Float32Array(o);else if(n==="int32")i=new Int32Array(o);else if(n==="bool")i=new Uint8Array(o);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<o;s++)i[s]=r();return ue.makeTensor(i,t,n)}var MNe,PNe=D(()=>{"use strict";$e();Ze();Ws();De();MNe=se({rand_:mNt})});var LNe=gt((jNe,yie)=>{"use strict";(function(t,r,n){function o(l){var u=this,c=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function s(l,u){var c=new o(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function a(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(jNe,typeof yie=="object"&&yie,typeof define=="function"&&define)});var $Ne=gt((BNe,bie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(BNe,typeof bie=="object"&&bie,typeof define=="function"&&define)});var UNe=gt((zNe,xie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(zNe,typeof xie=="object"&&xie,typeof define=="function"&&define)});var GNe=gt((VNe,vie)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.x,f=l.i,d,p,h;return d=c[f],d^=d>>>7,p=d^d<<24,d=c[f+1&7],p^=d^d>>>10,d=c[f+3&7],p^=d^d>>>3,d=c[f+4&7],p^=d^d<<7,d=c[f+7&7],d=d^d<<13,p^=d^d<<9,c[f]=p,l.i=f+1&7,p};function u(c,f){var d,p,h=[];if(f===(f|0))p=h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.x&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(VNe,typeof vie=="object"&&vie,typeof define=="function"&&define)});var qNe=gt((WNe,wie)=>{"use strict";(function(t,r,n){function o(a){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,p,h;return l.w=c=c+1640531527|0,h=f[d+34&127],p=f[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=f[d]=h^p,l.i=d,h+(c^c>>>16)|0};function u(c,f){var d,p,h,m,g,y=[],b=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,b=Math.max(b,f.length)),h=0,m=-32;m<b;++m)f&&(p^=f.charCodeAt((m+32)%f.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,d=y[m&127]^=p+g,h=d==0?h+1:0);for(h>=128&&(y[(f&&f.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=y[h+34&127],d=y[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,y[h]=p^d;c.w=g,c.X=y,c.i=h}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(c.X&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})(WNe,typeof wie=="object"&&wie,typeof define=="function"&&define)});var YNe=gt((HNe,_ie)=>{"use strict";(function(t,r,n){function o(a){var l=this,u="";l.next=function(){var f=l.b,d=l.c,p=l.d,h=l.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-p|0,l.d=p<<16^d>>>16^h,l.a=h-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var u=new o(a),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,p=(u.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&i(c,u),f.state=function(){return i(u,{})}),f}r&&r.exports?r.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(HNe,typeof _ie=="object"&&_ie,typeof define=="function"&&define)});var XNe=gt(()=>{"use strict"});var ZNe=gt((KNe,pU)=>{"use strict";(function(t,r,n){var o=256,i=6,s=52,a="random",l=n.pow(o,i),u=n.pow(2,s),c=u*2,f=o-1,d;function p(v,w,_){var C=[];w=w==!0?{entropy:!0}:w||{};var S=y(g(w.entropy?[v,x(r)]:v??b(),3),C),E=new h(C),A=function(){for(var N=E.g(i),k=l,R=0;N<u;)N=(N+R)*o,k*=o,R=E.g(1);for(;N>=c;)N/=2,k/=2,R>>>=1;return(N+R)/k};return A.int32=function(){return E.g(4)|0},A.quick=function(){return E.g(4)/4294967296},A.double=A,y(x(E.S),r),(w.pass||_||function(N,k,R,I){return I&&(I.S&&m(I,E),N.state=function(){return m(E,{})}),R?(n[a]=N,k):N})(A,S,"global"in w?w.global:this==n,w.state)}function h(v){var w,_=v.length,C=this,S=0,E=C.i=C.j=0,A=C.S=[];for(_||(v=[_++]);S<o;)A[S]=S++;for(S=0;S<o;S++)A[S]=A[E=f&E+v[S%_]+(w=A[S])],A[E]=w;(C.g=function(N){for(var k,R=0,I=C.i,L=C.j,j=C.S;N--;)k=j[I=f&I+1],R=R*o+j[f&(j[I]=j[L=f&L+k])+(j[L]=k)];return C.i=I,C.j=L,R})(o)}function m(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function g(v,w){var _=[],C=typeof v,S;if(w&&C=="object")for(S in v)try{_.push(g(v[S],w-1))}catch{}return _.length?_:C=="string"?v:v+"\0"}function y(v,w){for(var _=v+"",C,S=0;S<_.length;)w[f&S]=f&(C^=w[f&S]*19)+_.charCodeAt(S++);return x(w)}function b(){try{var v;return d&&(v=d.randomBytes)?v=v(o):(v=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(v)),x(v)}catch{var w=t.navigator,_=w&&w.plugins;return[+new Date,t,_,t.screen,x(r)]}}function x(v){return String.fromCharCode.apply(0,v)}if(y(n.random(),r),typeof pU=="object"&&pU.exports){pU.exports=p;try{d=XNe()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+a]=p})(typeof self<"u"?self:KNe,[],Math)});var T3=gt((WHr,QNe)=>{"use strict";var gNt=LNe(),yNt=$Ne(),bNt=UNe(),xNt=GNe(),vNt=qNe(),wNt=YNe(),MC=ZNe();MC.alea=gNt;MC.xor128=yNt;MC.xorwow=bNt;MC.xorshift7=xNt;MC.xor4096=vNt;MC.tychei=wNt;QNe.exports=MC});var Tie={};fn(Tie,{TEST_EPSILON_FLOAT16:()=>JNe,createVideoElement:()=>INt,encodeStrings:()=>eOe,expectArrayBuffersEqual:()=>kNt,expectArraysClose:()=>SNt,expectArraysEqual:()=>ENt,expectNumbersClose:()=>TNt,expectPromiseToFail:()=>CNt,expectValuesInRange:()=>ANt,play:()=>DNt,testEpsilon:()=>Cie});function SNt(t,r,n){return n==null&&(n=Cie()),Sie(t,r,(o,i)=>Eie(o,i,n))}function Cie(){return ue.backend.floatPrecision()===32?_Nt:JNe}function Sie(t,r,n){let o=!0;if(($i(t)||$i(r))&&(o=!1),$i(t)&&$i(r)&&(o=!0),o){let a=t.constructor.name,l=r.constructor.name;if(a!==l)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${l}`)}if(Array.isArray(t)&&Array.isArray(r)){let a=ja(t),l=ja(r);if(!Ql(a,l))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${l}]`)}let i=$i(t)?t:bh(t),s=$i(r)?r:bh(r);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){let l=i[a],u=s[a];if(!n(l,u))throw new Error(`Arrays differ: actual[${a}] = ${l}, expected[${a}] = ${u}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function CNt(t,r){t().then(()=>r.fail(),()=>r()),typeof expect<"u"&&expect().nothing()}function ENt(t,r){let n=typeof r=="string"||typeof r=="number"||typeof r=="boolean"?[r]:r;return dh(t)||dh(t[0])||dh(r)||dh(r[0])?Sie(t,n,(o,i)=>o==i):Sie(t,r,(o,i)=>Eie(o,i,0))}function TNt(t,r,n){if(n==null&&(n=Cie()),!Eie(t,r,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${r}`);typeof expect<"u"&&expect().nothing()}function Eie(t,r,n){return!isFinite(t)&&!isFinite(r)?!0:!(isNaN(t)||isNaN(r)||Math.abs(t-r)>n)}function ANt(t,r,n){for(let o=0;o<t.length;o++)if(t[o]<r||t[o]>n)throw new Error(`Value out of range:${t[o]} low: ${r}, high: ${n}`)}function kNt(t,r){let n=new Float32Array(t),o=new Float32Array(r);if(n.length!==o.length)throw new Error(`Expected ArrayBuffer to be of length ${o.length}, but it was ${n.length}`);for(let i=0;i<o.length;i++)if(n[i]!==o[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${o[i]} but got ${n[i]} instead`)}function eOe(t){for(let r=0;r<t.length;r++){let n=t[r];Array.isArray(n)?eOe(n):t[r]=j1(n)}return t}function INt(t){let r=document.createElement("video");return"playsInline"in r&&(r.playsInline=!0),r.muted=!0,r.loop=!0,r.style.position="fixed",r.style.left="0px",r.style.top="0px",r.preload="auto",r.appendChild(t),new Promise(n=>{r.addEventListener("loadeddata",o=>n(r)),r.load()})}function DNt(t){return Be(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(r=>{t.requestVideoFrameCallback(r)}))})}var _Nt,JNe,tOe=D(()=>{"use strict";$e();Pe();Ze();_Nt=.001,JNe=.1});var gU,PC,hU,mU,A3=D(()=>{"use strict";gU=Bf(T3());PC=class{constructor(r,n,o,i,s){this.mean=r,this.stdDev=n,this.dtype=o,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let a=s||Math.random();this.random=gU.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let i=this.nextVal;return this.nextVal=NaN,i}let r,n,o=!1;for(;!o;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);let l=Math.sqrt(-2*Math.log(a)/a);r=this.mean+this.stdDev*i*l,n=this.mean+this.stdDev*s*l,(!this.truncated||this.isValidTruncated(r))&&(o=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(r)}convertValue(r){return this.dtype==null||this.dtype==="float32"?r:Math.round(r)}isValidTruncated(r){return r<=this.upper&&r>=this.lower}},hU=class{constructor(r,n,o,i){this.alpha=r,this.beta=1/n,this.dtype=o;let s=i||Math.random();this.randu=gU.alea(s.toString()),this.randn=new PC(0,1,o,!1,this.randu()),r<1?this.d=r+2/3:this.d=r-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let r,n,o,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,r=i*i,n=1-.331*r*r,o=.5*r+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<o)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(r){return this.dtype==="float32"?r:Math.round(r)}},mU=class{constructor(r=0,n=1,o,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=r,this.range=n-r,this.dtype=o,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${r} - ${n} <= 1 and dtype is not float`);this.random=gU.alea(i)}convertValue(r){return this.canReturnFloat()?r:Math.round(r)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function NNt(t,r,n=1,o="float32",i){if(ti(t),n==null&&(n=1),o==null&&(o="float32"),o!=="float32"&&o!=="int32")throw new Error(`Unsupported data type ${o}`);let s=new hU(r,n,o,i),a=Jt(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var rOe,nOe=D(()=>{"use strict";Ws();xx();De();A3();rOe=se({randomGamma_:NNt})});function ONt(t,r=0,n=1,o,i){if(ti(t),o!=null&&o==="bool")throw new Error(`Unsupported data type ${o}`);let s=new PC(r,n,o,!1,i),a=Jt(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var jC,Aie=D(()=>{"use strict";Ws();xx();De();A3();jC=se({randomNormal_:ONt})});function FNt(t,r,n){if(r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);return jC(t,0,1,r,n)}var oOe,iOe=D(()=>{"use strict";De();Aie();oOe=se({randomStandardNormal_:FNt})});function RNt(t,r=0,n=1,o="float32",i){ti(t);let s=Jt(t,o),a=new mU(r,n,null,i);for(let l=0;l<s.values.length;l++)s.values[l]=a.nextValue();return s.toTensor()}var jc,yU=D(()=>{"use strict";Ws();xx();De();A3();jc=se({randomUniform_:RNt})});function MNt(t,r,n,o){return jc(t,r,n,"int32",o)}var sOe,aOe=D(()=>{"use strict";De();yU();sOe=se({randomUniformInt_:MNt})});function w0(t,r,n=1,o="float32"){if(n===0)throw new Error("Cannot have a step of zero");let i={start:t,stop:r,step:n,dtype:o};return ue.runKernel(HS,{},i)}var bU=D(()=>{"use strict";$e();Ee();});function PNt(t){let n={input:J(t,"input","real")};return ue.runKernel(YS,n)}var Cx,k3=D(()=>{"use strict";$e();Ee();Pe();De();Cx=se({real_:PNt})});function jNt(t){let n={x:J(t,"x","reciprocal")};return ue.runKernel(Wg,n)}var xU,lOe=D(()=>{"use strict";$e();Ee();Pe();De();xU=se({reciprocal_:jNt})});function LNt(t){let n={x:J(t,"x","relu")};return ue.runKernel(qg,n)}var va,DI=D(()=>{"use strict";$e();Ee();Pe();De();va=se({relu_:LNt})});function BNt(t){let n={x:J(t,"x","relu6")};return ue.runKernel(Hg,n)}var NI,vU=D(()=>{"use strict";$e();Ee();Pe();De();NI=se({relu6_:BNt})});function $Nt(t,r){let o={x:J(t,"x","reverse")},i={dims:r};return ue.runKernel(ox,o,i)}var ds,Ex=D(()=>{"use strict";$e();Ee();Pe();De();ds=se({reverse_:$Nt})});function zNt(t){let r=J(t,"x","reverse");return de(r.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${r.rank}.`),ds(r,0)}var uOe,cOe=D(()=>{"use strict";Pe();Ze();De();Ex();uOe=se({reverse1d_:zNt})});function UNt(t,r){let n=J(t,"x","reverse");return de(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),ds(n,r)}var fOe,dOe=D(()=>{"use strict";Pe();Ze();De();Ex();fOe=se({reverse2d_:UNt})});function VNt(t,r){let n=J(t,"x","reverse");return de(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),ds(n,r)}var pOe,hOe=D(()=>{"use strict";Pe();Ze();De();Ex();pOe=se({reverse3d_:VNt})});function GNt(t,r){let n=J(t,"x","reverse");return de(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),ds(n,r)}var mOe,gOe=D(()=>{"use strict";Pe();Ze();De();Ex();mOe=se({reverse4d_:GNt})});function WNt(t){let n={x:J(t,"x","round")};return ue.runKernel(Yg,n)}var OI,kie=D(()=>{"use strict";$e();Ee();Pe();De();OI=se({round_:WNt})});function qNt(t){let n={x:J(t,"x","rsqrt","float32")};return ue.runKernel(Xg,n)}var FI,Iie=D(()=>{"use strict";$e();Ee();Pe();De();FI=se({rsqrt_:qNt})});function HNt(t){let n={x:J(t,"x","selu")};return ue.runKernel(Kg,n)}var RI,Die=D(()=>{"use strict";$e();Ee();Pe();De();RI=se({selu_:HNt})});function YNt(t,r,n,o,i,s=[1,1],a="NHWC"){let l=J(t,"x","separableConv2d"),u=J(r,"depthwiseFilter","separableConv2d"),c=J(n,"pointwiseFilter","separableConv2d"),f=l,d=!1;if(l.rank===3&&(d=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");de(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),de(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),de(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),de(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),de(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=u.shape[2],h=u.shape[3];de(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let m=h0(f,u,o,i,a,s),y=qu(m,c,1,"valid",a);return d?Se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}var MI,Nie=D(()=>{"use strict";Pe();Ze();kC();d3();De();Ht();MI=se({separableConv2d_:YNt})});function XNt(t,r){return Be(this,null,function*(){let n=J(t,"x","setdiff1d"),o=J(r,"y","setdiff1d");de(n.dtype===o.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${o.dtype}).`),de(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),de(o.rank===1,()=>`y should be 1D tensor, but got y (${o.shape}).`);let i=yield n.data(),s=yield o.data(),a=new Set(s),l=0;for(let f=0;f<i.length;f++)a.has(i[f])||l++;let u=new Cn([l],n.dtype),c=new Cn([l],"int32");for(let f=0,d=0;f<i.length;f++)a.has(i[f])||(u.values[d]=i[f],c.values[d]=f,d++);return[u.toTensor(),c.toTensor()]})}var yOe,bOe=D(()=>{"use strict";Je();Pe();Ze();yOe=XNt});function KNt(t){let n={x:J(t,"x","sign")};return ue.runKernel(Jg,n)}var wU,xOe=D(()=>{"use strict";$e();Ee();Pe();De();wU=se({sign_:KNt})});function ZNt(t){let n={x:J(t,"x","sin","float32")};return ue.runKernel(Zg,n)}var PI,Oie=D(()=>{"use strict";$e();Ee();Pe();De();PI=se({sin_:ZNt})});function QNt(t){let n={x:J(t,"x","sinh")};return ue.runKernel(Qg,n)}var jI,Fie=D(()=>{"use strict";$e();Ee();Pe();De();jI=se({sinh_:QNt})});function JNt(t,r,n){let o=J(t,"x","slice1d");return de(o.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${o.rank} tensor`),$r(o,[r],[n])}var LI,vOe=D(()=>{"use strict";Pe();Ze();De();Wu();LI=se({slice1d_:JNt})});function eOt(t,r,n){let o=J(t,"x","slice2d");return de(o.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${o.rank} tensor`),$r(o,r,n)}var I3,wOe=D(()=>{"use strict";Pe();Ze();De();Wu();I3=se({slice2d_:eOt})});function tOt(t,r,n){let o=J(t,"x","slice3d");return de(o.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${o.rank} tensor`),$r(o,r,n)}var BI,_Oe=D(()=>{"use strict";Pe();Ze();De();Wu();BI=se({slice3d_:tOt})});function rOt(t,r,n){let o=J(t,"x","slice4d");return de(o.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${o.rank} tensor`),$r(o,r,n)}var LC,SOe=D(()=>{"use strict";Pe();Ze();De();Wu();LC=se({slice4d_:rOt})});function nOt(t,r=-1){let n=J(t,"logits","softmax","float32");if(r===-1&&(r=n.rank-1),r!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${r}`);let o={logits:n},i={dim:r};return ue.runKernel(cx,o,i)}var iw,COe=D(()=>{"use strict";$e();Ee();Pe();De();iw=se({softmax_:nOt})});function oOt(t){de(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(IS,r)}var sw,_U=D(()=>{"use strict";$e();Ee();Ze();De();sw=se({fft_:oOt})});function iOt(t){de(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let r={input:t};return ue.runKernel(FS,r)}var Tx,SU=D(()=>{"use strict";$e();Ee();Ze();De();Tx=se({ifft_:iOt})});function sOt(t){let r=t.shape[t.shape.length-1],n=t.size/r,o;if(r<=2){let i=Se(t,[n,r]);o=Tx(i)}else{let i=[n,2*(r-1)],s=Se(Cx(t),[n,r]),a=Se(X1(t),[n,r]),l=ds($r(s,[0,1],[n,r-2]),1),u=we(ds($r(a,[0,1],[n,r-2]),1),Rt(-1)),c=Fn([s,l],1),f=Fn([a,u],1),d=Se(Vu(c,f),[i[0],i[1]]);o=Tx(d)}if(o=Cx(o),t.rank===3&&t.shape[0]!==0){let i=o,s=t.shape[0];o=Se(o,[s,o.shape[0]/s,o.shape[1]]),i.dispose()}return o}var $I,Rie=D(()=>{"use strict";B1();Kf();y3();fr();De();k3();Ht();Ex();Uo();Wu();SU();$I=se({irfft_:sOt})});function aOt(t,r,n=0){let i={x:J(t,"x","split")},s={numOrSizeSplits:r,axis:n};return ue.runKernel(ux,i,s)}var ps,BC=D(()=>{"use strict";$e();Ee();Pe();De();ps=se({split_:aOt})});function lOt(t,r){de(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],o=t.size/n,i;if(r!=null&&r<n){let m=t.shape.map(y=>0),g=t.shape.map(y=>y);g[t.shape.length-1]=r,i=$r(t,m,g),n=r}else if(r!=null&&r>n){let m=t.shape.map(g=>g);m[t.shape.length-1]=r-n,i=Fn([t,xo(m)],t.shape.length-1),n=r}else i=t;let s=sr(i),a=Se(Vu(i,s),[o,n]),l=sw(a),u=Math.floor(n/2)+1,c=Cx(l),f=X1(l),d=ps(c,[u,n-u],c.shape.length-1),p=ps(f,[u,n-u],f.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=u,Se(Vu(d[0],p[0]),h)}var aw,CU=D(()=>{"use strict";Ze();B1();Kf();y3();De();k3();Ht();Wu();BC();II();zo();_U();aw=se({rfft_:lOt})});function uOt(t,r){let n=J(t,"a","squaredDifference"),o=J(r,"b","squaredDifference");[n,o]=sn(n,o),jr(n.shape,o.shape);let i={a:n,b:o},s={};return ue.runKernel(n0,i,s)}var zI,EU=D(()=>{"use strict";$e();Ee();ni();Pe();ko();De();zI=se({squaredDifference_:uOt})});function cOt(t,r){let n=J(t,"x","squeeze","string_or_numeric");return Se(n,Kne(n.shape,r).newShape)}var Lc,D3=D(()=>{"use strict";Pe();Ze();De();Ht();Lc=se({squeeze_:cOt})});function fOt(t,r=0){let n=mx(t,"tensors","stack","string_or_numeric");de(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&de(r<=n[0].rank,()=>"Axis must be <= rank of the tensor");let o=n,i={axis:r};return ue.runKernel(Zb,o,i)}var ts,lw=D(()=>{"use strict";$e();Ee();Pe();Ze();De();ts=se({stack_:fOt})});function dOt(t,r=0){let o={x:J(t,"x","step")},i={alpha:r};return ue.runKernel(a0,o,i)}var rp,UI=D(()=>{"use strict";$e();Ee();Pe();De();rp=se({step_:dOt})});function pOt(t,r,n,o,i=0,s=0,a=0,l=0,u=0){let f={x:J(t,"x","stridedSlice","string_or_numeric")},d={begin:r,end:n,strides:o,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};return ue.runKernel(sC,f,d)}var TU,EOe=D(()=>{"use strict";$e();Ee();Pe();De();TU=se({stridedSlice_:pOt})});function hOt(t){let n={x:J(t,"x","tan","float32")};return ue.runKernel(i0,n)}var AU,TOe=D(()=>{"use strict";$e();Ee();Pe();De();AU=se({tan_:hOt})});function No(t,r){qf(t);let n=ja(t,r);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return eu(t,null,n,r)}var uw=D(()=>{"use strict";Pe();Ze();gx();});function Ah(t,r,n){if(qf(t),r!=null&&r.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let o=ja(t,n);if(o.length!==2&&o.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return eu(t,r,o,n)}var kU=D(()=>{"use strict";Pe();Ze();gx();});function IU(t,r,n){if(qf(t),r!=null&&r.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let o=ja(t,n);if(o.length!==3&&o.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return eu(t,r,o,n)}var Mie=D(()=>{"use strict";Pe();Ze();gx();});function AOe(t,r,n){if(qf(t),r!=null&&r.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let o=ja(t,n);if(o.length!==4&&o.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return eu(t,r,o,n)}var kOe=D(()=>{"use strict";Pe();Ze();gx();});function IOe(t,r,n){if(qf(t),r!=null&&r.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let o=ja(t,n);if(o.length!==5&&o.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return eu(t,r,o,n)}var DOe=D(()=>{"use strict";Pe();Ze();gx();});function NOe(t,r,n){if(qf(t),r!=null&&r.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let o=ja(t,n);if(o.length!==6&&o.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(o.length===1&&r==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return r=r||o,eu(t,r,o,n)}var OOe=D(()=>{"use strict";Pe();Ze();gx();});var N3={};fn(N3,{calculateShapes:()=>FOe,validateInput:()=>VI,validateUpdateShape:()=>Pie});function Pie(t,r,n){let o=r.rank>1?r.shape[r.rank-1]:1,i=r.rank>1?r.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${r.shape}, shape: ${t}, sliceDim: ${o}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<o+(n.rank-i))throw new Error(s+` Output shape length < ${o+(n.rank-i)}`);if(n.rank!==i+t.length-o)throw new Error(s+` update.rank != ${i+t.length-o}`);for(let a=0;a<i;++a)if(n.shape[a]!==r.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${r.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+o])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function VI(t,r,n){if(r.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${r.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(r.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(r.size===0)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Pie(n,r,t)}function FOe(t,r,n){let o=r.shape.length,i=o>1?r.shape[o-1]:1,s=n.length,a=1;for(let d=i;d<s;++d)a*=n[d];let l=i<1?1:i,u=on(r.shape)/l,c=[...mg(n.slice(0,i)),1],f=on(n);return{sliceRank:i,numUpdates:u,sliceSize:a,strides:c,outputSize:f}}var O3=D(()=>{"use strict";Ze()});function mOt(t,r,n){let o=J(t,"tensor","tensorScatterupdate"),i=J(r,"indices","tensorScatterupdate","int32"),s=J(n,"updates","tensorScatterupdate");if(VI(s,i,o.shape),o.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${o.dtype} and ${s.dtype}.`);let a={tensor:o,indices:i,updates:s},l={};return ue.runKernel(QS,a,l)}var ROe,MOe=D(()=>{"use strict";$e();Ee();Pe();De();O3();ROe=se({tensorScatterUpdate_:mOt})});function gOt(t,r=1,n=!0){let o=J(t,"x","topk");if(o.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let i=o.shape[o.shape.length-1];if(r<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${r}`);if(r>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${r}`);let s={x:o},a={k:r,sorted:n},[l,u]=ue.runKernel(cC,s,a);return{values:l,indices:u}}var DU,jie=D(()=>{"use strict";$e();Ee();Pe();De();DU=se({topk_:gOt})});function yOt(t,r=0,n=1,o,i){if(ti(t),o!=null&&o==="bool")throw new Error("Unsupported data type $ { dtype }");let s=new PC(r,n,o,!0,i),a=Jt(t,o);for(let l=0;l<a.values.length;l++)a.values[l]=s.nextValue();return a.toTensor()}var GI,POe=D(()=>{"use strict";Ws();xx();De();A3();GI=se({truncatedNormal_:yOt})});function bOt(t,r=0){let n=J(t,"x","unique","string_or_numeric");de(n.rank>0,()=>"The input tensor must be at least 1D");let o={x:n},i={axis:r},[s,a]=ue.runKernel(dC,o,i);return{values:s,indices:a}}var NU,Lie=D(()=>{"use strict";$e();Ee();Pe();Ze();De();NU=se({unique_:bOt})});function xOt(t,r,n){let o=J(t,"x","unsortedSegmentSum"),i=J(r,"segmentIds","unsortedSegmentSum","int32");de(vb(n),()=>"numSegments must be of dtype int");let s={x:o,segmentIds:i},a={numSegments:n};return ue.runKernel(dx,s,a)}var WI,OU=D(()=>{"use strict";$e();Ee();Pe();Ze();De();WI=se({unsortedSegmentSum_:xOt})});function vOt(t,r=0){let n=J(t,"x","unstack","string_or_numeric");de(r>=-n.shape.length&&r<n.shape.length,()=>`Axis = ${r} is not in [-${n.shape.length}, ${n.shape.length})`);let o={value:n},i={axis:r};return ue.runKernel(fx,o,i)}var Ua,qI=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Ua=se({unstack_:vOt})});function jOe(t,r){return w3(t,r,"right")}var LOe=D(()=>{"use strict";nU();});function FU(t,r=!0,n,o){return ue.makeVariable(t,r,n,o)}var BOe=D(()=>{"use strict";$e();});function RU(t,r){let n=[];for(let s=0;s<r.length;s++)r[s]&&n.push(s);let o=Jt(t,"int32"),i=Jt([n.length,t.length],"int32");for(let s=0;s<n.length;s++){let a=o.indexToLoc(n[s]),l=s*t.length;i.values.set(a,l)}return i.toTensor()}var Bie=D(()=>{"use strict";xx();});function wOt(t){return Be(this,null,function*(){let r=J(t,"condition","whereAsync","bool"),n=yield r.data(),o=RU(r.shape,n);return t!==r&&r.dispose(),o})}var MU,$ie=D(()=>{"use strict";Bie();Pe();MU=wOt});function _Ot(t,r,n){return Be(this,null,function*(){let o=J(t,"tensor","boolMask"),i=J(r,"mask","boolMask","bool"),s=n??0,a=i.rank,l=o.shape;de(a>0,()=>"mask cannot be scalar"),Bo(l.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let g=s;g<s+a;g++)u*=l[g];let c=l.slice(0,s).concat([u],l.slice(s+a)),f=Se(o,c),d=Se(i,[-1]),p=yield MU(d),h=Lc(p,[1]),m=b0(f,h,s);return t!==o&&o.dispose(),r!==i&&i.dispose(),h.dispose(),f.dispose(),d.dispose(),p.dispose(),m})}var SOt,$Oe=D(()=>{"use strict";Pe();Ze();g3();Ht();D3();$ie();SOt=_Ot});function COt(t,r,n){let o=J(t,"x","transpose");if(r==null&&(r=o.shape.map((a,l)=>l).reverse()),de(o.rank===r.length,()=>`Error in transpose: rank of input ${o.rank} must match length of perm ${r}.`),r.forEach(a=>{de(a>=0&&a<o.rank,()=>`All entries in 'perm' must be between 0 and ${o.rank-1} but got ${r}`)}),o.rank<=1)return o.clone();let i={x:o},s={perm:r};return o.dtype==="complex64"?je(()=>{let a=Cx(o),l=X1(o);return a=ue.runKernel(gh,{x:a},s),l=ue.runKernel(gh,{x:l},s),n&&(l=Zr(l)),Vu(a,l)}):ue.runKernel(gh,i,s)}var Gr,Ax=D(()=>{"use strict";$e();Mc();Ee();Pe();Ze();B1();y3();Ks();De();k3();Gr=se({transpose_:COt})});function EOt(t,r,n,o,i=!0){let s=J(t,"v","movingAverage"),a=J(r,"x","movingAverage"),l=J(n,"decay","movingAverage");moe(s,a),de(Ql(s.shape,a.shape),()=>"Shape mismatch in v and x");let u=Rt(1),c=wt(u,l),f=we(wt(a,s),c);if(i){de(o!=null,()=>"When using zeroDebias: true, step is required.");let d=J(o,"step","movingAverage");f=Ct(f,wt(u,$a(l,d)))}return Ke(s,f)}var TOt,zOe=D(()=>{"use strict";ni();Pe();Ze();$o();Xn();fr();De();Y1();Uo();io();TOt=se({movingAverage_:EOt})});function AOt(t,r,n){ti(n);let o=J(t,"indices","scatterND","int32"),i=J(r,"updates","scatterND");VI(i,o,n);let s={indices:o,updates:i},a={shape:n};return ue.runKernel(ZS,s,a)}var kOt,UOe=D(()=>{"use strict";$e();Ee();Pe();Ws();De();O3();kOt=se({scatterND_:AOt})});function VOe(t,r,n,o){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);let a=r.size;if(!(r.rank===0||r.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${r.shape}, should be [] or [${i}]`);if(r.dtype!==o.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var GOe=D(()=>{"use strict"});function DOt(t,r,n,o=0){ti(n);let i=J(t,"sparseIndices","sparseToDense","int32"),s=J(r,"sparseValues","sparseToDense","string_or_numeric"),a=J(o,"defaultValue","sparseToDense",s.dtype);VOe(i,s,n,a);let l={sparseIndices:i,sparseValues:s,defaultValue:a},u={outputShape:n};return ue.runKernel(oC,l,u)}var NOt,WOe=D(()=>{"use strict";$e();Ee();GOe();Pe();Ws();De();NOt=se({sparseToDense_:DOt})});function OOt(t,r){let n=J(r,"indices","gatherND","int32"),i={params:J(t,"x","gatherND","string_or_numeric"),indices:n};return ue.runKernel(OS,i)}var FOt,qOe=D(()=>{"use strict";$e();Ee();Pe();De();FOt=se({gatherND_:OOt})});function HOe(t,r){if(r==null)return t.shape.slice();if(Ql(t.shape,r))return r;if(t.shape.length===r.length){let n=[];for(let o=0;o<t.shape.length;o++)r[o]==null&&t.shape[o]!=null?n.push(t.shape[o]):n.push(r[o]);return n}return r}var YOe=D(()=>{"use strict";Ze();});function ROt(t,r,n,o){let i=J(t,"x","dropout");if(de(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),de(r>=0&&r<1,()=>`rate must be a float in the range [0, 1), but got ${r}.`),r===0)return t instanceof tn?i.clone():i;let s=HOe(i,n),a=1-r,l=Ct(y0(Ke(jc(s,0,1,"float32",o),a)),a);return we(i,l)}var zie,XOe=D(()=>{"use strict";Je();Pe();Ze();$o();Xn();YOe();W8();fr();De();yU();zie=se({dropout_:ROt})});function Uie(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function F3(t,r,n){let o=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){let a=2*Math.PI*s/(t+o-1);i[s]=r-n*Math.cos(a)}return No(i,"float32")}var R3=D(()=>{"use strict";uw();});function MOt(t,r,n=1){return Be(this,null,function*(){let o=J(t,"predictions","inTopK"),i=J(r,"targets","inTopK");de(o.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${o.rank}`),de(o.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${o.rank} and targets rank ${i.rank}`),Bo(o.shape.slice(0,o.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let s=o.shape[o.shape.length-1];de(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);let a=yield o.data(),l=yield i.data(),[u,c]=[a.length/s,s],f=Zne("bool",u);for(let d=0;d<u;d++){let p=d*c,h=a.subarray(p,p+c),m=[];for(let g=0;g<h.length;g++)m.push({value:h[g],index:g});m.sort((g,y)=>y.value-g.value),f[d]=0;for(let g=0;g<n;g++)if(m[g].index===l[d]){f[d]=1;break}}return t!==o&&o.dispose(),r!==i&&i.dispose(),La(f,i.shape,"bool")})}var POt,KOe=D(()=>{"use strict";Pe();Ze();o3();POt=MOt});function jOt(t,r,n,o,i,s="NHWC",a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]])),de(l.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${l.shape}.`),de(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),de(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=s==="NHWC"?l.shape[3]:l.shape[1],f=s==="NHWC"?u.shape[3]:u.shape[1];de(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),de(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),go("conv2dDerFilter",i,a);let d={x:l,dy:u},p={strides:o,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return ue.runKernel(yS,d,p)}var HI,PU=D(()=>{"use strict";$e();Ee();Ze();Is();De();Ht();HI=se({conv2DBackpropFilter_:jOt})});function $C(t,r,n){if(n==null||n==="linear")return t;if(n==="relu")return we(t,rp(r));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function zC(t,r){let n=r,o=oo(t.shape,r.shape);return o.length>0&&(n=It(n,o)),Se(n,t.shape)}function UC(t,r,n,o){if(r==="linear")return t;if(r==="relu")return va(t);if(r==="elu")return m0(t);if(r==="relu6")return NI(t);if(r==="prelu")return ow(t,n);if(r==="leakyrelu")return K1(t,o);if(r==="sigmoid")return _l(t);throw new Error(`Unknown fused activation ${r}.`)}var VC,YI=D(()=>{"use strict";ko();z8();X8();fr();fU();DI();vU();Ht();hI();UI();Ci();VC=(t,r)=>!(t>0)||r==="linear"});function LOt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(u=u||"linear",VC(ue.state.gradientDepth,u)===!1){de(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=qu(t,r,n,o,i,s,a);return l!=null&&(C=Ke(C,l)),UC(C,u,c,f)}let d=J(t,"x","conv2d","float32"),p=J(r,"filter","conv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),de(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),go("fused conv2d",o,a);let g=i==="NHWC"?h.shape[3]:h.shape[1];de(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),de(ba(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let y=AC(h.shape,p.shape,n,s,o,a),b;l!=null&&(b=J(l,"bias","fused conv2d"),[b]=sn(b,d),i==="NHWC"?jr(y.outShape,b.shape):(de(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),de(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(c!=null){let C=c.shape;if(de(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)de(C[0]===1||C[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${y.outChannels}).`);else if(C.length===3)try{jr(C,y.outShape)}catch{let E=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(E)}x=J(c,"prelu weights","fused conv2d")}let v=(C,S)=>{de(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[E,A,N,k]=S,R=$C(C,N,u);de(Yf(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);let I=bI(A.shape,R,E,n,o),L=HI(A,R,E.shape,n,o),j=[I,L];if(k!=null){let M=zC(k,R);j.push(M)}return j},w={x:h,filter:p,bias:b,preluActivationWeights:x},_={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Cl((S,E,A)=>{let N=ue.runKernel(R1,w,_);return A([E,S,N]),m&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:v}})(h,p):Cl((S,E,A,N)=>{let k=ue.runKernel(R1,w,_);return N([E,S,k,A]),m&&(k=Se(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:v}})(h,p,b)}var ZOe,QOe=D(()=>{"use strict";$e();Sx();Ee();ni();Pe();Ze();$o();ko();kC();PU();D8();Is();YI();De();Ht();ZOe=se({fusedConv2d_:LOt})});function BOt(t,r,n,o,i,s=[1,1],a){let l=t;t.rank===3&&(l=Se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=r;u.rank===3&&(u=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={x:l,dy:u},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return ue.runKernel(CS,c,f)}var jU,Vie=D(()=>{"use strict";$e();Ee();De();Ht();jU=se({depthwiseConv2dNativeBackpropFilter_:BOt})});function $Ot(t,r,n,o,i,s=[1,1],a){let l=r,u=!1;r.rank===3&&(u=!0,l=Se(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let c={dy:l,filter:n},f={strides:o,pad:i,dimRoundingMode:a,dilations:s,inputShape:t},d=ue.runKernel(ES,c,f);return u?Se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var LU,Gie=D(()=>{"use strict";$e();Ee();De();Ht();LU=se({depthwiseConv2dNativeBackpropInput_:$Ot})});function zOt({x:t,filter:r,strides:n,pad:o,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(VC(ue.state.gradientDepth,u)===!1){let _=h0(t,r,n,o,i,s,a);return l!=null&&(_=Ke(_,l)),UC(_,u,c,f)}let d=J(t,"x","depthwiseConv2d","float32"),p=J(r,"filter","depthwiseConv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=Se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),de(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),de(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),de(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),s==null&&(s=[1,1]),de(ba(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),go("fused depthwiseConv2d",o,a);let g=AC(h.shape,p.shape,n,s,o,a,!0),y;l!=null&&(y=J(l,"bias","fused conv2d"),[y]=sn(y,d),jr(g.outShape,y.shape));let b;c!=null&&(b=J(c,"prelu weights","fused depthwiseConv2d"));let x=(_,C)=>{de(Yf(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[S,E,A,N]=C,k=$C(_,A,u),R=LU(E.shape,k,S,n,o,s,a),I=jU(E,k,S.shape,n,o,s,a);if(N!=null){let L=zC(y,k);return[R,I,L]}return[R,I]},v={x:h,filter:p,bias:y,preluActivationWeights:b},w={strides:n,pad:o,dataFormat:i,dilations:s,dimRoundingMode:a,activation:u,leakyreluAlpha:f};return l==null?Cl((C,S,E)=>{let A=ue.runKernel(M1,v,w);return E([S,C,A]),m&&(A=Se(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:x}})(h,p):Cl((C,S,E,A)=>{let N=ue.runKernel(M1,v,w);return A([S,C,N,E]),m&&(N=Se(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(h,p,y)}var JOe,eFe=D(()=>{"use strict";$e();Sx();Ee();ni();Pe();Ze();$o();ko();Is();d3();Vie();Gie();YI();De();Ht();JOe=se({fusedDepthwiseConv2d_:zOt})});function UOt({a:t,b:r,transposeA:n=!1,transposeB:o=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}){if(VC(ue.state.gradientDepth,s)===!1){let k=Vr(t,r,n,o);return i!=null&&(k=Ke(k,i)),UC(k,s,a,l)}let u=J(t,"a","fused matMul"),c=J(r,"b","fused matMul");[u,c]=sn(u,c);let f=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=o?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=o?c.shape[c.rank-2]:c.shape[c.rank-1],m=u.shape.slice(0,-2),g=c.shape.slice(0,-2),y=on(m),b=on(g);de(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${o} must match.`);let v=jr(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),w=n?Se(u,[y,f,p]):Se(u,[y,p,f]),_=o?Se(c,[b,h,d]):Se(c,[b,d,h]),C;i!=null&&(C=J(i,"bias","fused matMul"),[C]=sn(C,u),jr(v,C.shape));let S;a!=null&&(S=J(a,"prelu weights","fused matMul"));let E=(k,R)=>{let[I,L,j,M]=R,V=$C(Se(k,j.shape),j,s),G,U;if(!n&&!o?(G=Vr(V,L,!1,!0),U=Vr(I,V,!0,!1)):!n&&o?(G=Vr(V,L,!1,!1),U=Vr(V,I,!0,!1)):n&&!o?(G=Vr(L,V,!1,!0),U=Vr(I,V,!1,!1)):(G=Vr(L,V,!0,!0),U=Vr(V,I,!0,!0)),i!=null){let Y=zC(M,V);return[G,U,Y]}else return[G,U]},A={a:w,b:_,bias:C,preluActivationWeights:S},N={transposeA:n,transposeB:o,activation:s,leakyreluAlpha:l};return i==null?Cl((R,I,L)=>{let j=ue.runKernel(F1,A,N);return L([R,I,j]),{value:Se(j,v),gradFunc:E}})(w,_):Cl((R,I,L,j)=>{let M=ue.runKernel(F1,A,N);return j([R,I,M,L]),{value:Se(M,v),gradFunc:E}})(w,_,C)}var tFe,rFe=D(()=>{"use strict";$e();Sx();Ee();ni();Pe();Ze();$o();ko();YI();wh();De();Ht();tFe=se({fusedMatMul_:UOt})});var cw={};fn(cw,{conv2d:()=>ZOe,depthwiseConv2d:()=>JOe,matMul:()=>tFe});var nFe=D(()=>{"use strict";QOe();eFe();rFe();});function VOt(t){return F3(t,.54,.46)}var oFe,iFe=D(()=>{"use strict";De();R3();oFe=se({hammingWindow_:VOt})});function GOt(t){return F3(t,.5,.5)}var BU,Wie=D(()=>{"use strict";De();R3();BU=se({hannWindow_:GOt})});function WOt(t,r,n,o=!1,i=0){let s=0,a=[];for(;s+r<=t.size;)a.push($r(t,s,r)),s+=n;if(o)for(;s<t.size;){let l=s+r-t.size,u=Fn([$r(t,s,r-l),ep([l],i)]);a.push(u),s+=n}return a.length===0?Ah([],[0,r]):Se(Fn(a),[a.length,r])}var $U,qie=D(()=>{"use strict";Kf();gI();De();Ht();Wu();kU();$U=se({frame_:WOt})});function qOt(t,r,n,o,i=BU){o==null&&(o=Uie(r));let s=$U(t,r,n),a=we(s,i(r));return aw(a,o)}var sFe,aFe=D(()=>{"use strict";fr();De();R3();CU();qie();Wie();sFe=se({stft_:qOt})});function HOt(t,r,n,o,i="bilinear",s=0){let a=J(t,"image","cropAndResize"),l=J(r,"boxes","cropAndResize","float32"),u=J(n,"boxInd","cropAndResize","int32"),c=l.shape[0];de(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),de(l.rank===2&&l.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${l.shape}.`),de(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${l.shape}.`),de(o.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${o.length}.`),de(o[0]>=1&&o[1]>=1,()=>`cropSize must be atleast [1,1], but was ${o}`),de(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);let f={image:a,boxes:l,boxInd:u},d={method:i,extrapolationValue:s,cropSize:o};return ue.runKernel(wS,f,d)}var lFe,uFe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();lFe=se({cropAndResize_:HOt})});function YOt(t){let r=J(t,"image","flipLeftRight","float32");de(r.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${r.rank}.`);let n={image:r};return ue.runKernel(NS,n,{})}var cFe,fFe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();cFe=se({flipLeftRight_:YOt})});function XOt(t){let r=J(t,"image","grayscaleToRGB"),n=r.rank-1,o=r.shape[n];de(r.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${r.rank}.`),de(o===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${o}.`);let i=new Array(r.rank);return i.fill(1,0,n),i[n]=3,xa(r,i)}var dFe,pFe=D(()=>{"use strict";Pe();Ze();De();EI();dFe=se({grayscaleToRGB_:XOt})});function KOt(t){let r=J(t,"image","RGBToGrayscale"),n=r.rank-1,o=r.shape[n];de(r.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${r.rank}.`),de(o===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${o}.`);let i=r.dtype,s=rt(r,"float32"),a=No([.2989,.587,.114]),l;switch(r.rank){case 2:l=H1("ij,j->i",s,a);break;case 3:l=H1("ijk,k->ij",s,a);break;case 4:l=H1("ijkl,l->ijk",s,a);break;case 5:l=H1("ijklm,m->ijkl",s,a);break;case 6:l=H1("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return l=Ei(l,-1),rt(l,i)}var hFe,mFe=D(()=>{"use strict";Pe();Ze();pn();rie();CI();De();uw();hFe=se({rgbToGrayscale_:KOt})});function ZOt(t,r,n=0,o=.5){let i=J(t,"image","rotateWithOffset","float32");de(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let s={image:i},a={radians:r,fillValue:n,center:o};return ue.runKernel(pC,s,a)}var gFe,yFe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();gFe=se({rotateWithOffset_:ZOt})});function np(t,r,n,o,i,s){o==null&&(o=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);let a=t.shape[0];return n=Math.min(n,a),de(0<=o&&o<=1,()=>`iouThreshold must be in [0, 1], but was '${o}'`),de(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),de(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),de(r.rank===1,()=>"scores must be a 1D tensor"),de(r.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${r.shape[0]}`),de(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s}}var GC=D(()=>{"use strict";Ze();});function QOt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let s=J(t,"boxes","nonMaxSuppression","float32"),a=J(r,"scores","nonMaxSuppression","float32"),l=np(s,a,n,o,i);n=l.maxOutputSize,o=l.iouThreshold,i=l.scoreThreshold;let u={maxOutputSize:n,iouThreshold:o,scoreThreshold:i};return ue.runKernel(zS,{boxes:s,scores:a},u)}var bFe,xFe=D(()=>{"use strict";$e();Ee();Pe();GC();De();bFe=se({nonMaxSuppression_:QOt})});function vFe(t,r,n){let o=JOt(t,r,n),i=o<0?-(o+1):o;t.splice(i,0,r)}function JOt(t,r,n){return tFt(t,r,n||eFt)}function eFt(t,r){return t>r?1:t<r?-1:0}function tFt(t,r,n){let o=0,i=t.length,s=0,a=!1;for(;o<i;){s=o+(i-o>>>1);let l=n(r,t[s]);l>0?o=s+1:(i=s,a=!l)}return a?o:-o-1}var wFe=D(()=>{"use strict";});function zU(t,r,n,o,i){return Hie(t,r,n,o,i,0)}function UU(t,r,n,o,i,s){return Hie(t,r,n,o,i,0,!1,s,!0)}function VU(t,r,n,o,i,s){return Hie(t,r,n,o,i,s,!0)}function Hie(t,r,n,o,i,s,a=!1,l=!1,u=!1){let c=[];for(let y=0;y<r.length;y++)r[y]>i&&c.push({score:r[y],boxIndex:y,suppressBeginIndex:0});c.sort(_Fe);let f=s>0?-.5/s:0,d=[],p=[];for(;d.length<n&&c.length>0;){let y=c.pop(),{score:b,boxIndex:x,suppressBeginIndex:v}=y;if(b<i)break;let w=!1;for(let _=d.length-1;_>=v;--_){let C=rFt(t,x,d[_]);if(C>=o){w=!0;break}if(y.score=y.score*nFt(o,f,C),y.score<=i)break}y.suppressBeginIndex=d.length,w||(y.score===b?(d.push(x),p.push(y.score)):y.score>i&&vFe(c,y,_Fe))}let h=d.length,m=n-h;l&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));let g={selectedIndices:d};return a&&(g.selectedScores=p),u&&(g.validOutputs=h),g}function rFt(t,r,n){let o=t.subarray(r*4,r*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(o[0],o[2]),a=Math.min(o[1],o[3]),l=Math.max(o[0],o[2]),u=Math.max(o[1],o[3]),c=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(l-s)*(u-a),m=(d-c)*(p-f);if(h<=0||m<=0)return 0;let g=Math.max(s,c),y=Math.max(a,f),b=Math.min(l,d),x=Math.min(u,p),v=Math.max(b-g,0)*Math.max(x-y,0);return v/(h+m-v)}function nFt(t,r,n){let o=Math.exp(r*n*n);return n<=t?o:0}function _Fe(t,r){return t.score-r.score||t.score===r.score&&r.boxIndex-t.boxIndex}var M3=D(()=>{"use strict";wFe();});function oFt(s,a,l){return Be(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY){let u=J(t,"boxes","nonMaxSuppressionAsync"),c=J(r,"scores","nonMaxSuppressionAsync"),f=np(u,c,n,o,i);n=f.maxOutputSize,o=f.iouThreshold,i=f.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:m}=zU(p,h,n,o,i);return u!==t&&u.dispose(),c!==r&&c.dispose(),No(m,"int32")})}var SFe,CFe=D(()=>{"use strict";M3();Pe();GC();uw();SFe=oFt});function iFt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=np(a,l,n,o,i,s);n=u.maxOutputSize,o=u.iouThreshold,i=u.scoreThreshold,s=u.softNmsSigma;let c={boxes:a,scores:l},f={maxOutputSize:n,iouThreshold:o,scoreThreshold:i,softNmsSigma:s},d=ue.runKernel(VS,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}var EFe,TFe=D(()=>{"use strict";$e();Ee();Pe();GC();De();EFe=se({nonMaxSuppressionWithScore_:iFt})});function sFt(a,l,u){return Be(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=0){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=np(c,f,n,o,i,s);n=d.maxOutputSize,o=d.iouThreshold,i=d.scoreThreshold,s=d.softNmsSigma;let p=yield Promise.all([c.data(),f.data()]),h=p[0],m=p[1],{selectedIndices:g,selectedScores:y}=VU(h,m,n,o,i,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:No(g,"int32"),selectedScores:No(y)}})}var AFe,kFe=D(()=>{"use strict";M3();Pe();GC();uw();AFe=sFt});function aFt(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let a=J(t,"boxes","nonMaxSuppression"),l=J(r,"scores","nonMaxSuppression"),u=np(a,l,n,o,i,null),c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p={boxes:a,scores:l},h={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:s},m=ue.runKernel(US,p,h);return{selectedIndices:m[0],validOutputs:m[1]}}var IFe,DFe=D(()=>{"use strict";$e();Ee();Pe();GC();De();IFe=se({nonMaxSuppressionPadded_:aFt})});function lFt(a,l,u){return Be(this,arguments,function*(t,r,n,o=.5,i=Number.NEGATIVE_INFINITY,s=!1){let c=J(t,"boxes","nonMaxSuppressionAsync"),f=J(r,"scores","nonMaxSuppressionAsync"),d=np(c,f,n,o,i,null),p=d.maxOutputSize,h=d.iouThreshold,m=d.scoreThreshold,[g,y]=yield Promise.all([c.data(),f.data()]),{selectedIndices:b,validOutputs:x}=UU(g,y,p,h,m,s);return c!==t&&c.dispose(),f!==r&&f.dispose(),{selectedIndices:No(b,"int32"),validOutputs:Rt(x,"int32")}})}var NFe,OFe=D(()=>{"use strict";M3();Pe();GC();Uo();uw();NFe=lFt});function uFt(t,r,n=!1,o=!1){let i=J(t,"images","resizeBilinear");de(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),de(r.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${r}.`),de(o===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(nx,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var GU,Yie=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Ht();GU=se({resizeBilinear_:uFt})});function cFt(t,r,n=!1,o=!1){let i=J(t,"images","resizeNearestNeighbor");de(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),de(r.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${r}.`),de(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),de(o===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=Se(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=r,l={images:s},u={alignCorners:n,halfPixelCenters:o,size:r},c=ue.runKernel(rx,l,u);return a?Se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var WU,Xie=D(()=>{"use strict";$e();Ee();Pe();Ze();De();Ht();WU=se({resizeNearestNeighbor_:cFt})});function fFt(t,r="binary",n=!1,o=.5){let i=J(t,"image","threshold"),s=.2989,a=.587,l=.114,u=i.shape[0]*i.shape[1],c=we(No([o]),255),f,d,p,h;if(de(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),de(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),de(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),de(r==="otsu"||r==="binary",()=>`Method must be binary or otsu, but was ${r}`),i.shape[2]===3){[f,d,p]=ps(i,[1,1,1],-1);let y=we(f,s),b=we(d,a),x=we(p,l);h=Ke(Ke(y,b),x)}else h=t;if(r==="otsu"){let y=S8(rt(OI(h),"int32"),La([]),256);c=dFt(y,u)}let m=n?Pc(h,c):oi(h,c);return rt(we(m,255),"int32")}function dFt(t,r){let n=No([-1]),o=No([0]),i=No([0]),s,a,l,u,c,f;for(let d=0;d<t.size-1;d++){s=$r(t,0,d+1),a=$r(t,d+1),c=Ct(It(s),r),f=Ct(It(a),r);let p=It(we(s,w0(0,s.size)));l=Ct(p,It(s));let h=ep(a.shape,s.size),m=Ke(w0(0,a.size),h),g=we(a,m);u=Ct(It(g),It(a));let y=wt(l,u),b=wt(l,u),x=we(c,f);i=we(we(x,y),b);let v=oi(i,o);o=yo(v,i,o),n=yo(v,No([d]),n)}return n}var FFe,RFe=D(()=>{"use strict";uw();De();pn();BC();Hoe();Z1();x0();Ci();$o();fr();Xn();io();kie();Zf();gI();Wu();bU();o3();Ze();Pe();FFe=se({threshold_:fFt})});function pFt(t,r,n="nearest",o="constant",i=0,s){let a=J(t,"image","transform","float32"),l=J(r,"transforms","transform","float32");de(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),de(l.rank===2&&(l.shape[0]===a.shape[0]||l.shape[0]===1)&&l.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),de(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);let u={image:a,transforms:l},c={interpolation:n,fillMode:o,fillValue:i,outputShape:s};return ue.runKernel(fC,u,c)}var MFe,PFe=D(()=>{"use strict";$e();Ee();Pe();Ze();De();MFe=se({transform_:pFt})});function hFt(t,r,n){let o=J(t,"a","bandPart");de(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);let i=o.shape,[s,a]=o.shape.slice(-2),l,u;typeof r=="number"?(de(r%1===0,()=>`bandPart(): numLower must be an integer, got ${r}.`),de(r<=s,()=>`bandPart(): numLower (${r}) must not be greater than the number of rows (${s}).`),l=J(r<0?s:r,"numLower","bandPart")):(de(r.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),l=yo(_x(r,0),s,Qf(r,s))),typeof n=="number"?(de(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),de(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),u=J(n<0?a:n,"numUpper","bandPart")):(de(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=yo(_x(n,0),a,Qf(n,a)));let c=Se(w0(0,s,1,"int32"),[-1,1]),f=w0(0,a,1,"int32"),d=wt(c,f),p=za(Pc(d,l),tu(d,Zr(u))),h=xo([s,a],o.dtype);return Se(ts(Ua(Se(o,[-1,s,a])).map(m=>yo(p,m,h))),i)}var jFe,LFe=D(()=>{"use strict";Pe();Ze();NC();b3();Z1();OC();C3();Ks();De();bU();Ht();lw();io();qI();Zf();II();jFe=se({bandPart_:hFt})});function mFt(t){let r;if(Array.isArray(t)){r=!1,de(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=t[0].shape[0];for(let s=1;s<t.length;++s)de(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else r=!0,t=ps(t,t.shape[0],0).map(i=>Lc(i,[0]));de(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],o=t;for(let i=0;i<t.length;++i)n.push(ue.tidy(()=>{let s=o[i];if(i>0)for(let a=0;a<i;++a){let l=we(It(we(n[a],s)),n[a]);s=wt(s,l)}return Ct(s,wx(s,"euclidean"))}));return r?ts(n,0):n}var BFe,$Fe=D(()=>{"use strict";$e();Ze();Xn();fr();m3();De();BC();D3();lw();io();Ci();BFe=se({gramSchmidt_:mFt})});function gFt(t,r=!1){if(de(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return zFe(t,r);{let n=t.shape.slice(0,t.shape.length-2).reduce((u,c)=>u*c),o=Ua(Se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];o.forEach(u=>{let[c,f]=zFe(u,r);i.push(c),s.push(f)});let a=Se(ts(i,0),t.shape),l=Se(ts(s,0),t.shape);return[a,l]}}function zFe(t,r=!1){return ue.tidy(()=>{de(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],o=t.shape[1],i=DC(n),s=Gu(t),a=Ah([[1]],[1,1]),l=Gu(a),u=n>=o?o:n;for(let c=0;c<u;++c){let f=s,d=l,p=i;[l,s,i]=ue.tidy(()=>{let h=$r(s,[c,c],[n-c,1]),m=wx(h),g=$r(s,[c,c],[1,1]),y=yo(oi(g,0),Ah([[-1]]),Ah([[1]])),b=wt(g,we(y,m)),x=Ct(h,b);x.shape[0]===1?l=Gu(a):l=Fn([a,$r(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);let v=Zr(Ct(Vr(y,b),m)),w=$r(s,[c,0],[n-c,o]),_=we(v,l),C=Gr(l);if(c===0)s=wt(w,Vr(_,Vr(C,w)));else{let A=wt(w,Vr(_,Vr(C,w)));s=Fn([$r(s,[0,0],[c,o]),A],0)}let S=Gr(_),E=$r(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=wt(E,Vr(Vr(E,l),S));else{let A=wt(E,Vr(Vr(E,l),S));i=Fn([$r(i,[0,0],[n,c]),A],1)}return[l,s,i]}),Tr([f,d,p])}return!r&&n>o&&(i=$r(i,[0,0],[n,o]),s=$r(s,[0,0],[o,o])),[i,s]})}var UFe,VFe=D(()=>{"use strict";$e();Mc();Ze();cI();Kf();Xn();lie();x0();wh();fr();Ks();m3();De();Ht();Wu();lw();io();kU();Ax();qI();Zf();UFe=se({qr_:gFt})});var Ti,kh=D(()=>{"use strict";Ti=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Ti||{})});function yFt(t,r,n=Ti.SUM_BY_NONZERO_WEIGHTS){let o=J(t,"losses","computeWeightedLoss"),i=null;r!=null&&(i=J(r,"weights","computeWeightedLoss"));let s=i==null?o:we(o,i);if(n===Ti.NONE)return s;if(n===Ti.SUM)return It(s);if(n===Ti.MEAN){if(i==null)return bo(s);{let a=o.size/i.size,l=Ct(It(s),It(i));return a>1?Ct(l,Rt(a)):l}}if(n===Ti.SUM_BY_NONZERO_WEIGHTS){if(i==null)return Ct(It(s),Rt(o.size));{let a=we(i,Ui(o.shape)),l=rt(It(Th(a,Rt(0))),"float32");return Ct(It(s),l)}}throw Error(`Unknown reduction: ${n}`)}var Va,_0=D(()=>{"use strict";Pe();pn();Xn();kh();S3();fr();lU();FC();De();Uo();Ci();Va=se({computeWeightedLoss_:yFt})});function bFt(t,r,n,o=Ti.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","absoluteDifference"),s=J(r,"predictions","absoluteDifference"),a=null;n!=null&&(a=J(n,"weights","absoluteDifference")),Bo(i.shape,s.shape,"Error in absoluteDifference: ");let l=Ao(wt(i,s));return Va(l,a,o)}var GFe,WFe=D(()=>{"use strict";Pe();Ze();EC();kh();De();io();_0();GFe=se({absoluteDifference_:bFt})});function xFt(t,r,n,o,i=Ti.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","cosineDistance"),a=J(r,"predictions","cosineDistance"),l=null;o!=null&&(l=J(o,"weights","cosineDistance")),Bo(s.shape,a.shape,"Error in cosineDistance: ");let u=Rt(1),c=wt(u,It(we(s,a),n,!0));return Va(c,l,i)}var qFe,HFe=D(()=>{"use strict";Pe();Ze();kh();fr();De();Uo();io();Ci();_0();qFe=se({cosineDistance_:xFt})});function vFt(t,r,n,o=Ti.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","hingeLoss"),s=J(r,"predictions","hingeLoss"),a=null;n!=null&&(a=J(n,"weights","hingeLoss")),Bo(i.shape,s.shape,"Error in hingeLoss: ");let l=Rt(1);i=wt(we(Rt(2),i),l);let u=va(wt(l,we(i,s)));return Va(u,a,o)}var YFe,XFe=D(()=>{"use strict";Pe();Ze();kh();fr();De();DI();Uo();io();_0();YFe=se({hingeLoss_:vFt})});function wFt(t,r,n,o=1,i=Ti.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","huberLoss"),a=J(r,"predictions","huberLoss"),l=null;n!=null&&(l=J(n,"weights","huberLoss")),Bo(s.shape,a.shape,"Error in huberLoss: ");let u=Rt(o),c=Ao(wt(a,s)),f=Qf(c,u),d=wt(c,f),p=Ke(we(Rt(.5),qr(f)),we(u,d));return Va(p,l,i)}var KFe,ZFe=D(()=>{"use strict";Pe();Ze();EC();$o();kh();C3();fr();De();Uo();fs();io();_0();KFe=se({huberLoss_:wFt})});function _Ft(t,r,n,o=1e-7,i=Ti.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","logLoss"),a=J(r,"predictions","logLoss"),l=null;n!=null&&(l=J(n,"weights","logLoss")),Bo(s.shape,a.shape,"Error in logLoss: ");let u=Rt(1),c=Rt(o),f=Zr(we(s,Xs(Ke(a,c)))),d=we(wt(u,s),Xs(Ke(wt(u,a),c))),p=wt(f,d);return Va(p,l,i)}var QFe,JFe=D(()=>{"use strict";Pe();Ze();$o();TI();kh();fr();Ks();De();Uo();io();_0();QFe=se({logLoss_:_Ft})});function SFt(t,r,n,o=Ti.SUM_BY_NONZERO_WEIGHTS){let i=J(t,"labels","meanSquaredError"),s=J(r,"predictions","meanSquaredError"),a=null;n!=null&&(a=J(n,"weights","meanSquaredError")),Bo(i.shape,s.shape,"Error in meanSquaredError: ");let l=zI(i,s);return Va(l,a,o)}var eRe,tRe=D(()=>{"use strict";Pe();Ze();kh();De();EU();_0();eRe=se({meanSquaredError_:SFt})});function CFt(t,r){let n=J(t,"labels","sigmoidCrossEntropyWithLogits"),o=J(r,"logits","sigmoidCrossEntropyWithLogits");Bo(n.shape,o.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=va(o),s=we(o,n),a=Q1(bi(Zr(Ao(o))));return Ke(wt(i,s),a)}function EFt(t,r,n,o=0,i=Ti.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"multiClassLabels","sigmoidCrossEntropy"),a=J(r,"logits","sigmoidCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","sigmoidCrossEntropy")),Bo(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),o>0){let c=Rt(o),f=Rt(1),d=Rt(.5);s=Ke(we(s,wt(f,c)),we(d,c))}let u=CFt(s,a);return Va(u,l,i)}var rRe,nRe=D(()=>{"use strict";Pe();Ze();EC();$o();g0();cie();kh();fr();Ks();De();DI();Uo();io();_0();rRe=se({sigmoidCrossEntropy_:EFt})});function TFt(t,r,n=-1){if(n===-1&&(n=r.rank-1),n!==r.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${r.rank} and dim was ${n}`);return Cl((i,s,a)=>{let u=J1(s,[n],!0),c=wt(rt(s,"float32"),u);a([i,c]);let f=Zr(we(c,i));return{value:It(f,[n]),gradFunc:(h,m)=>{let[g,y]=m,b=tp(h.shape,[n]);return[we(Se(h,b),wt(rt(g,"float32"),bi(y))),we(Se(h,b),wt(bi(y),rt(g,"float32")))]}}})(t,r)}function AFt(t,r,n,o=0,i=Ti.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"onehotLabels","softmaxCrossEntropy"),a=J(r,"logits","softmaxCrossEntropy"),l=null;if(n!=null&&(l=J(n,"weights","softmaxCrossEntropy")),Bo(s.shape,a.shape,"Error in softmaxCrossEntropy: "),o>0){let c=Rt(o),f=Rt(1),d=Rt(s.shape[1]);s=Ke(we(s,wt(f,c)),Ct(c,d))}let u=TFt(s,a);return Va(u,l,i)}var oRe,iRe=D(()=>{"use strict";Sx();Pe();Ze();$o();Sh();pn();Xn();g0();J8();kh();fr();Ks();De();Ht();Uo();io();Ci();_0();oRe=se({softmaxCrossEntropy_:AFt})});function kFt(t,r,n,o){let i=J(t,"indices","sparseFillEmptyRows","int32"),s=J(r,"values","sparseFillEmptyRows"),a=J(n,"denseShape","sparseFillEmptyRows","int32"),l=J(o,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(l.rank!==0)throw new Error(`Default value should be a scalar but received shape ${l.shape}`);let u={indices:i,values:s,denseShape:a,defaultValue:l},c=ue.runKernel(eC,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var sRe,aRe=D(()=>{"use strict";$e();Ee();Pe();De();sRe=se({sparseFillEmptyRows_:kFt})});function IFt(t,r,n){let o=J(t,"inputIndices","sparseReshape","int32"),i=J(r,"inputShape","sparseReshape","int32"),s=J(n,"newShape","sparseReshape","int32");if(o.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);let a={inputIndices:o,inputShape:i,newShape:s},l=ue.runKernel(tC,a);return{outputIndices:l[0],outputShape:l[1]}}var lRe,uRe=D(()=>{"use strict";$e();Ee();Pe();De();lRe=se({sparseReshape_:IFt})});function DFt(t,r,n){let o=J(t,"data","sparseSegmentMean"),i=J(r,"indices","sparseSegmentMean","int32"),s=J(n,"segmentIds","sparseSegmentMean","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(rC,a)}var cRe,fRe=D(()=>{"use strict";$e();Ee();Pe();De();cRe=se({sparseSegmentMean_:DFt})});function NFt(t,r,n){let o=J(t,"data","sparseSegmentSum"),i=J(r,"indices","sparseSegmentSum","int32"),s=J(n,"segmentIds","sparseSegmentSum","int32");if(o.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);let a={data:o,indices:i,segmentIds:s};return ue.runKernel(nC,a)}var dRe,pRe=D(()=>{"use strict";$e();Ee();Pe();De();dRe=se({sparseSegmentSum_:NFt})});function OFt(t,r,n,o,i,s,a,l){let u=J(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=J(r,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let f={separator:n,nGramWidths:o,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:l},d={data:u,dataSplits:c},p=ue.runKernel(aC,d,f);return{nGrams:p[0],nGramsSplits:p[1]}}var hRe,mRe=D(()=>{"use strict";$e();Ee();Pe();De();hRe=se({stringNGrams_:OFt})});function FFt(t,r,n=!0){let o=J(t,"input","stringSplit","string"),i=J(r,"delimiter","stringSplit","string");if(o.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${o.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);let s={skipEmpty:n},a={input:o,delimiter:i},l=ue.runKernel(lC,a,s);return{indices:l[0],values:l[1],shape:l[2]}}var gRe,yRe=D(()=>{"use strict";$e();Ee();Pe();De();gRe=se({stringSplit_:FFt})});function RFt(t,r){let n=J(t,"input","stringToHashBucketFast","string"),o={numBuckets:r};if(r<=0)throw new Error("Number of buckets must be at least 1");let i={input:n};return ue.runKernel(uC,i,o)}var bRe,xRe=D(()=>{"use strict";$e();Ee();Pe();De();bRe=se({stringToHashBucketFast_:RFt})});function MFt(t,r,n,o=!0){let i=J(t,"input","staticRegexReplace","string"),s={pattern:r,rewrite:n,replaceGlobal:o};return ue.runKernel(O1,{x:i},s)}var vRe,wRe=D(()=>{"use strict";$e();Ee();Pe();De();vRe=se({staticRegexReplace_:MFt})});var PFt,jFt,Xu,Kie,LFt,BFt,$Ft,Nr=D(()=>{"use strict";EC();uDe();cDe();$o();dDe();Loe();Boe();$oe();zoe();pDe();hDe();mDe();Uoe();gDe();b8();xDe();wDe();c3();mI();CDe();EDe();TDe();Hoe();kDe();DDe();C8();xx();pn();NDe();ODe();cI();B1();Kf();FDe();RDe();MDe();PDe();Yoe();kC();Xoe();jDe();LDe();R8();Zoe();M8();P8();BDe();Qoe();d3();zDe();Joe();Xn();eie();tie();rie();z8();GDe();p3();WDe();aie();g0();CI();YDe();lie();gI();W8();u8();g3();x0();NC();y3();XDe();KDe();ZDe();X8();b3();Z1();JDe();uie();TI();cie();oNe();iNe();J8();OC();v3();eU();die();aNe();wh();SI();oU();lNe();cNe();_3();S3();dNe();U8();C3();pie();hie();pNe();fr();mNe();yNe();Ks();lU();uU();FC();bNe();vNe();rw();_Ne();CNe();TNe();kNe();mie();Y1();fU();joe();gie();DNe();ONe();RNe();PNe();nOe();Aie();iOe();yU();aOe();bU();k3();lOe();DI();vU();Ht();Ex();cOe();dOe();hOe();gOe();kie();Iie();Uo();Die();Nie();bOe();hI();xOe();Oie();Fie();Wu();vOe();wOe();_Oe();SOe();COe();fie();E3();_U();SU();Rie();CU();BC();Ch();fs();EU();D3();lw();UI();EOe();io();Ci();TOe();qoe();o3();uw();kU();Mie();kOe();DOe();OOe();MOe();EI();jie();POe();Lie();OU();qI();LOe();BOe();Zf();$ie();II();zo();$Oe();Ax();m3();zOe();UOe();nU();WOe();qOe();XOe();R3();KOe();De();CU();_U();SU();Rie();nFe();iFe();Wie();qie();aFe();uFe();fFe();pFe();mFe();yFe();xFe();CFe();TFe();kFe();DFe();OFe();Yie();Xie();RFe();PFe();LFe();$Fe();VFe();WFe();_0();HFe();XFe();ZFe();JFe();tRe();nRe();iRe();aRe();uRe();fRe();pRe();mRe();yRe();xRe();wRe();PFt={fft:sw,ifft:Tx,rfft:aw,irfft:$I},jFt={hammingWindow:oFe,hannWindow:BU,frame:$U,stft:sFe},Xu={flipLeftRight:cFe,grayscaleToRGB:dFe,resizeNearestNeighbor:WU,resizeBilinear:GU,rgbToGrayscale:hFe,rotateWithOffset:gFe,cropAndResize:lFe,nonMaxSuppression:bFe,nonMaxSuppressionAsync:SFe,nonMaxSuppressionWithScore:EFe,nonMaxSuppressionWithScoreAsync:AFe,nonMaxSuppressionPadded:IFe,nonMaxSuppressionPaddedAsync:NFe,threshold:FFe,transform:MFe},Kie={bandPart:jFe,gramSchmidt:BFe,qr:UFe},LFt={absoluteDifference:GFe,computeWeightedLoss:Va,cosineDistance:qFe,hingeLoss:YFe,huberLoss:KFe,logLoss:QFe,meanSquaredError:eRe,sigmoidCrossEntropy:rRe,softmaxCrossEntropy:oRe},BFt={sparseFillEmptyRows:sRe,sparseReshape:lRe,sparseSegmentMean:cRe,sparseSegmentSum:dRe},$Ft={stringNGrams:hRe,stringSplit:gRe,stringToHashBucketFast:bRe,staticRegexReplace:vRe}});var tt={};fn(tt,{Serializable:()=>P3,SerializationMap:()=>qU,getRegisteredName:()=>UFt,registerClass:()=>Qie});function Qie(t,r,n){de(t.className!=null,()=>"Class being registered does not have the static className property defined."),de(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),de(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof r>"u"&&(r="Custom"),typeof n>"u"&&(n=t.className);let o=n,i=r+">"+o;return qU.register(t),zFt.set(i,t),Zie.set(t,i),t}function UFt(t){return Zie.has(t)?Zie.get(t):t.className}var zFt,Zie,P3,qU,HU=D(()=>{"use strict";Ze();zFt=new Map,Zie=new Map,P3=class{getClassName(){return this.constructor.className}static fromConfig(r,n){return new r(n)}},qU=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(r){t.getMap().classNameMap[r.className]=[r,r.fromConfig]}}});var wa,fw=D(()=>{"use strict";Mc();Sx();Nr();HU();wa=class extends P3{minimize(r,n=!1,o){let{value:i,grads:s}=this.computeGradients(r,o);if(o!=null){let a=o.map(l=>({name:l.name,tensor:s[l.name]}));this.applyGradients(a)}else this.applyGradients(s);return Tr(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(r,n){return x3(r,n)}dispose(){this.iterations_!=null&&Tr(this.iterations_)}saveIterations(){return Be(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Rt(this.iterations_,"int32")}})}getWeights(){return Be(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(r){return Be(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(r){return Be(this,null,function*(){return this.iterations_=(yield r[0].tensor.data())[0],r.slice(1)})}};Object.defineProperty(wa,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null})});var dw,YU=D(()=>{"use strict";$e();Mc();$o();Xn();fr();Nr();fs();zo();fw();dw=class extends wa{static get className(){return"Adadelta"}constructor(r,n,o=null){super(),this.learningRate=r,this.rho=n,this.epsilon=o,this.accumulatedGrads=[],this.accumulatedUpdates=[],o==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accum_grad`,variable:je(()=>sr(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${o}/accum_var`,variable:je(()=>sr(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;je(()=>{let f=Ke(we(u,this.rho),we(qr(l),1-this.rho)),d=we(Ct(Kn(Ke(c,this.epsilon)),Kn(Ke(u,this.epsilon))),l),p=Ke(we(c,this.rho),we(qr(d),1-this.rho));u.assign(f),c.assign(p);let h=Ke(we(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Tr(this.accumulatedGrads.map(r=>r.variable)),Tr(this.accumulatedUpdates.map(r=>r.variable)))}getWeights(){return Be(this,null,function*(){let r=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=r.length/2,o=!1;this.accumulatedGrads=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedUpdates=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.rho,n.epsilon)}}});var pw,XU=D(()=>{"use strict";$e();Mc();$o();Xn();gI();fr();Ch();fs();fw();pw=class extends wa{static get className(){return"Adagrad"}constructor(r,n=.1){super(),this.learningRate=r,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${o}/accumulator`,variable:je(()=>ep(s.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(r)?r[i].tensor:r[o];if(a==null)return;let l=this.accumulatedGrads[i].variable;je(()=>{let u=Ke(l,qr(a));l.assign(u);let c=Ke(we(Ct(a,Kn(Ke(u,ue.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Tr(this.accumulatedGrads.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulatedGrads=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(r,n){return new r(n.learningRate,n.initialAccumulatorValue)}}});var hw,KU=D(()=>{"use strict";$e();Mc();$o();Xn();fr();Y1();Uo();Ch();fs();io();zo();fw();hw=class extends wa{static get className(){return"Adam"}constructor(r,n,o,i=null){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],je(()=>{this.accBeta1=Rt(n).variable(),this.accBeta2=Rt(o).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);je(()=>{let o=wt(1,this.accBeta1),i=wt(1,this.accBeta2);n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:je(()=>sr(l).variable(u))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:je(()=>sr(l).variable(u))});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),h=Ke(we(d,this.beta2),we(qr(c),1-this.beta2)),m=Ct(p,o),g=Ct(h,i);f.assign(p),d.assign(h);let y=Ke(we(Ct(m,Ke(Kn(g),this.epsilon)),-this.learningRate),l);l.assign(y)}),this.accBeta1.assign(we(this.accBeta1,this.beta1)),this.accBeta2.assign(we(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Tr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedSecondMoment!=null&&Tr(this.accumulatedSecondMoment.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){let r=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r),je(()=>{this.accBeta1.assign($a(this.beta1,this.iterations_+1)),this.accBeta2.assign($a(this.beta2,this.iterations_+1))});let n=r.length/2,o=!1;this.accumulatedFirstMoment=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedSecondMoment=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)}}});var mw,ZU=D(()=>{"use strict";$e();Mc();EC();$o();Xn();_3();fr();Uo();io();zo();fw();mw=class extends wa{static get className(){return"Adamax"}constructor(r,n,o,i=null,s=0){super(),this.learningRate=r,this.beta1=n,this.beta2=o,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],je(()=>{this.iteration=Rt(0).variable(),this.accBeta1=Rt(n).variable()}),i==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(r){let n=Array.isArray(r)?r.map(o=>o.name):Object.keys(r);je(()=>{let o=wt(1,this.accBeta1),i=Ct(-this.learningRate,Ke(we(this.iteration,this.decay),1));n.forEach((s,a)=>{let l=ue.registeredVariables[s],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:sr(l).variable(u)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:sr(l).variable(u)});let c=Array.isArray(r)?r[a].tensor:r[s];if(c==null)return;let f=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,p=Ke(we(f,this.beta1),we(c,1-this.beta1)),h=we(d,this.beta2),m=Ao(c),g=Yu(h,m);f.assign(p),d.assign(g);let y=Ke(we(Ct(i,o),Ct(p,Ke(g,this.epsilon))),l);l.assign(y)}),this.iteration.assign(Ke(this.iteration,1)),this.accBeta1.assign(we(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Tr(this.accumulatedFirstMoment.map(r=>r.variable)),this.accumulatedWeightedInfNorm!=null&&Tr(this.accumulatedWeightedInfNorm.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(r){return Be(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}});var S0,j3=D(()=>{"use strict";$e();Mc();$o();fr();Uo();fw();S0=class extends wa{static get className(){return"SGD"}constructor(r){super(),this.learningRate=r,this.setLearningRate(r)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=Array.isArray(r)?r[i].tensor:r[o];if(s==null)return;let a=ue.registeredVariables[o];je(()=>{let l=Ke(we(this.c,s),a);a.assign(l)})}),this.incrementIterations()}setLearningRate(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=ks(Rt(-r))}dispose(){this.c.dispose()}getWeights(){return Be(this,null,function*(){return[yield this.saveIterations()]})}setWeights(r){return Be(this,null,function*(){if(r=yield this.extractIterations(r),r.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(r,n){return new r(n.learningRate)}}});var gw,QU=D(()=>{"use strict";$e();Mc();$o();fr();Uo();zo();j3();gw=class extends S0{static get className(){return"Momentum"}constructor(r,n,o=!1){super(r),this.learningRate=r,this.momentum=n,this.useNesterov=o,this.accumulations=[],this.m=Rt(this.momentum)}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${o}/momentum`,variable:je(()=>sr(s).variable(!1))});let a=this.accumulations[i].variable,l=Array.isArray(r)?r[i].tensor:r[o];l!=null&&je(()=>{let u,c=Ke(we(this.m,a),l);this.useNesterov?u=Ke(we(this.c,Ke(l,we(c,this.m))),s):u=Ke(we(this.c,c),s),a.assign(c),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Tr(this.accumulations.map(r=>r.variable))}setMomentum(r){this.momentum=r}getWeights(){return Be(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(r=>({name:r.originalName,tensor:r.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=!1;this.accumulations=r.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)}}});var yw,JU=D(()=>{"use strict";$e();Mc();$o();Xn();fr();Ch();fs();io();zo();fw();yw=class extends wa{static get className(){return"RMSProp"}constructor(r,n=.9,o=0,i=null,s=!1){if(super(),this.learningRate=r,this.decay=n,this.momentum=o,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=ue.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(r){(Array.isArray(r)?r.map(o=>o.name):Object.keys(r)).forEach((o,i)=>{let s=ue.registeredVariables[o],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${o}/rms`,variable:je(()=>sr(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${o}/momentum`,variable:je(()=>sr(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${o}/mg`,variable:je(()=>sr(s).variable(a))});let l=Array.isArray(r)?r[i].tensor:r[o];if(l==null)return;let u=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;je(()=>{let f=Ke(we(u,this.decay),we(qr(l),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[i].variable,p=Ke(we(d,this.decay),we(l,1-this.decay)),h=Ct(we(l,this.learningRate),Kn(wt(f,Ke(qr(p),this.epsilon)))),m=Ke(we(c,this.momentum),h);u.assign(f),d.assign(p),c.assign(m);let g=wt(s,m);s.assign(g)}else{let d=Ke(we(u,this.decay),we(qr(l),1-this.decay)),p=Ke(we(c,this.momentum),Ct(we(l,this.learningRate),Kn(Ke(d,this.epsilon))));u.assign(d),c.assign(p);let h=wt(s,p);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Tr(this.accumulatedMeanSquares.map(r=>r.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Tr(this.accumulatedMeanGrads.map(r=>r.variable)),this.accumulatedMoments!=null&&Tr(this.accumulatedMoments.map(r=>r.variable))}getWeights(){return Be(this,null,function*(){let r=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&r.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(r.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(r){return Be(this,null,function*(){r=yield this.extractIterations(r);let n=this.centered?r.length/3:r.length/2,o=!1;this.accumulatedMeanSquares=r.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.accumulatedMoments=r.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})),this.centered&&(this.accumulatedMeanGrads=r.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(o)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}});function _Re(){for(let t of VFt)Qie(t)}var VFt,SRe=D(()=>{"use strict";YU();XU();KU();ZU();QU();JU();j3();HU();VFt=[dw,pw,hw,mw,gw,yw,S0]});function CRe(t){return new Promise(r=>setTimeout(r)).then(t)}function YFt(t="model"){return new Jie(t)}function ERe(t){return new ese(t)}var GFt,WFt,qFt,Jie,ese,HFt,TRe=D(()=>{"use strict";oI();ga();U1();vC();$1();GFt="model",WFt=".json",qFt=".weights.bin";Jie=(()=>{class t{constructor(n){if(!Oe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=GFt),this.modelJsonFileName=n+WFt,this.weightDataFileName=n+qFt}save(n){return Be(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let o=Ba.join(n.weightData),i=window.URL.createObjectURL(new Blob([o],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a=o8(n,s),l=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=l,yield CRe(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=i,yield CRe(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:c0(n)}}})}}return t.URL_SCHEME="downloads://",t})(),ese=class{constructor(r){if(r==null||r.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${r}`);this.jsonFile=r[0],this.weightsFiles=r.slice(1)}load(){return Be(this,null,function*(){return new Promise((r,n)=>{let o=new FileReader;o.onload=i=>{let s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){r({modelTopology:a});return}let u=sI(s,c=>this.loadWeights(c));r(u)},o.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),o.readAsText(this.jsonFile)})})}loadWeights(r){let n=[],o=[];for(let a of r)n.push(...a.weights),o.push(...a.paths);let i=this.checkManifestAndWeightFiles(r),s=o.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[n,a])}loadWeightsFile(r,n){return new Promise((o,i)=>{let s=new FileReader;s.onload=a=>{let l=a.target.result;o(l)},s.onerror=a=>i(`Failed to weights data from file of path '${r}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(r){let n=[],o=this.weightsFiles.map(s=>Toe(s.name)),i={};for(let s of r)s.paths.forEach(a=>{let l=Toe(a);if(n.indexOf(l)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${l}'`);if(n.push(l),o.indexOf(l)===-1)throw new Error(`Weight file with basename '${l}' is not provided.`);i[a]=this.weightsFiles[o.indexOf(l)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}},HFt=t=>Oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Jie.URL_SCHEME)?YFt(t.slice(Jie.URL_SCHEME.length)):null;qs.registerSaveRouter(HFt)});function tse(t,r,n,o){a(t),n=n??0,o=o??1,l(n,o);let i=0,s=u=>(u.then(c=>{let f=n+ ++i/t.length*(o-n);return r(f),c}),u);function a(u){de(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function l(u,c){de(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),de(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),de(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(t.map(s))}var ARe=D(()=>{"use strict";Ze();});function rse(t,r){return Be(this,null,function*(){r==null&&(r={});let n=r.fetchFunc==null?Oe().platform.fetch:r.fetchFunc,o=t.map(d=>n(d,r.requestInit,{isBinary:!0})),l=(r.onProgress==null?yield Promise.all(o):yield tse(o,r.onProgress,0,.5)).map(d=>d.arrayBuffer());return r.onProgress==null?yield Promise.all(l):yield tse(l,r.onProgress,.5,1)})}function kRe(t,r){var n;let o=r.fetchFunc==null?Oe().platform.fetch:r.fetchFunc,i=0,s;return(n=r.onProgress)===null||n===void 0||n.call(r,0),new ReadableStream({pull:a=>Be(this,null,function*(){for(var l;i<t.length;){s||(s=(yield o(t[i],r.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield s.read();if(u){i++,s=void 0,(l=r.onProgress)===null||l===void 0||l.call(r,i/t.length);continue}a.enqueue(c);return}a.close()})})}function IRe(t,r="",n,o){return Be(this,null,function*(){return nse(a=>rse(a,{requestInit:o}))(t,r,n)})}function nse(t){return(r,n="",o)=>Be(this,null,function*(){let i=r.map(()=>!1),s={},a=o!=null?o.map(()=>!1):[],l=[];if(r.forEach((h,m)=>{let g=0;h.weights.forEach(y=>{let b="quantization"in y?y.quantization.dtype:y.dtype,x=yx[b]*on(y.shape),v=()=>{i[m]=!0,s[m]==null&&(s[m]=[]),s[m].push({manifestEntry:y,groupOffset:g,sizeBytes:x})};o!=null?o.forEach((w,_)=>{w===y.name&&(v(),a[_]=!0)}):v(),l.push(y.name),g+=x})}),!a.every(h=>h)){let h=o.filter((m,g)=>!a[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${l.join(", ")}.`)}let u=i.reduce((h,m,g)=>(m&&h.push(g),h),[]),c=[];u.forEach(h=>{r[h].paths.forEach(m=>{let g=n+(n.endsWith("/")?"":"/")+m;c.push(g)})});let f=yield t(c),d={},p=0;return u.forEach(h=>{let m=r[h].paths.length,g=new Ba(f.slice(p,p+m));s[h].forEach(b=>{let x=g.slice(b.groupOffset,b.groupOffset+b.sizeBytes),v=n8(x,[b.manifestEntry]);for(let w in v)d[w]=v[w]}),p+=m}),d})}var ose=D(()=>{"use strict";ga();Ze();$1();U1();ARe();_oe();});function ZFt(t){let r=t.lastIndexOf("/"),n=t.lastIndexOf("?"),o=t.substring(0,r),i=n>r?t.substring(n):"";return[o+"/",i]}function e7(t){return t.match(DRe.URL_SCHEME_REGEX)!=null}function t7(t,r){return new DRe(t,r)}function ORe(t,r){return t7(t,r)}var XFt,KFt,DRe,NRe,FRe=D(()=>{"use strict";ga();Ze();U1();$1();vC();ose();XFt="application/octet-stream",KFt="application/json",DRe=(()=>{class t{constructor(n,o){if(this.DEFAULT_METHOD="POST",o==null&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.weightUrlConverter=o.weightUrlConverter,o.fetchFunc!=null?(de(typeof o.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=Oe().platform.fetch,de(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&de(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,o.requestInit!=null&&o.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{},this.loadOptions=o}save(n){return Be(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let o=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);o.body=new FormData;let i=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],s=o8(n,i);if(o.body.append("model.json",new Blob([JSON.stringify(s)],{type:KFt}),"model.json"),n.weightData!=null){let l=Ba.join(n.weightData);o.body.append("model.weights.bin",new Blob([l],{type:XFt}),"model.weights.bin")}let a=yield this.fetch(this.path,o);if(a.ok)return{modelArtifactsInfo:c0(n),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})}loadModelJSON(){return Be(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let o;try{o=yield n.json()}catch{let l=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?l+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":l+=" Please make sure the server is serving valid JSON for this request.",new Error(l)}let i=o.modelTopology,s=o.weightsManifest;if(i==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return o})}load(){return Be(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return sI(n,o=>this.loadWeights(o))})}loadStream(){return Be(this,null,function*(){let n=yield this.loadModelJSON(),o=yield this.getWeightUrls(n.weightsManifest),i=a3(n.weightsManifest),s=()=>kRe(o,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:i,getWeightStream:s})})}getWeightUrls(n){return Be(this,null,function*(){let o=Array.isArray(this.path)?this.path[1]:this.path,[i,s]=ZFt(o),a=this.weightPathPrefix||i,l=[],u=[];for(let c of n)for(let f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):l.push(a+f+s);return this.weightUrlConverter&&l.push(...yield Promise.all(u)),l})}loadWeights(n){return Be(this,null,function*(){let o=yield this.getWeightUrls(n),i=a3(n),s=yield rse(o,this.loadOptions);return[i,s]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();NRe=(t,r)=>{if(typeof fetch>"u"&&(r==null||r.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(o=>e7(o)):n=e7(t),n)return t7(t,r)}return null};qs.registerSaveRouter(NRe);qs.registerLoadRouter(NRe)});function RRe(t,r,n,o){let i=arguments;return new ise(sse(...i))}function sse(t,r,n,o){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new L3(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new L3({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new L3({modelTopology:t,weightSpecs:r,weightData:n,trainingConfig:o}))}function MRe(t){return new r7(t)}function PRe(t){return new r7(t)}var L3,r7,ise,jRe=D(()=>{"use strict";L3=class{constructor(r){this.modelArtifacts=r}load(){return this.modelArtifacts}},r7=class{constructor(r){this.saveHandler=r}save(r){return this.saveHandler(r)}},ise=class{constructor(r){r.load&&(this.load=()=>Promise.resolve(r.load())),r.save&&(this.save=n=>Promise.resolve(r.save(n)))}}});var C0={};fn(C0,{CompositeArrayBuffer:()=>Ba,browserFiles:()=>ERe,browserHTTPRequest:()=>ORe,concatenateArrayBuffers:()=>zIe,copyModel:()=>tDe,decodeWeights:()=>n8,decodeWeightsStream:()=>Coe,encodeWeights:()=>jIe,fromMemory:()=>RRe,fromMemorySync:()=>sse,getLoadHandlers:()=>WIe,getModelArtifactsForJSON:()=>sI,getModelArtifactsForJSONSync:()=>Aoe,getModelArtifactsInfoForJSON:()=>c0,getSaveHandlers:()=>GIe,getWeightSpecs:()=>a3,http:()=>t7,isHTTPScheme:()=>e7,listModels:()=>JIe,loadWeights:()=>IRe,moveModel:()=>rDe,registerLoadRouter:()=>VIe,registerSaveRouter:()=>UIe,removeModel:()=>eDe,weightsLoaderFactory:()=>nse,withSaveHandler:()=>MRe,withSaveHandlerSync:()=>PRe});var LRe=D(()=>{"use strict";Noe();Ooe();TRe();FRe();U1();jRe();vC();ose();$1();Foe();});function QFt(t,r,n){let o=J(t,"labels","confusionMatrix"),i=J(r,"predictions","confusionMatrix");de(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),de(o.rank===1,()=>`Expected the rank of labels to be 1, but got ${o.rank}`),de(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),de(o.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${o.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),de(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let s=v0(rt(o,"int32"),n),a=v0(rt(i,"int32"),n),l=Gr(s),u=Vr(l,a);return rt(u,"int32")}var BRe,$Re=D(()=>{"use strict";Pe();Ze();pn();wh();uU();De();Ax();BRe=se({confusionMatrix_:QFt})});var ase={};fn(ase,{confusionMatrix:()=>BRe});var zRe=D(()=>{"use strict";$Re();});var n7={};fn(n7,{draw:()=>sRt,fromPixels:()=>aRt,fromPixelsAsync:()=>nRt,toPixels:()=>iRt});function VRe(t,r=3){if(r>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,o=!1,i=!1,s=!1,a=!1,l=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)o=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)l=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(hC(Xk,ue.backendName)!=null){let m={pixels:t},g={numChannels:r};return ue.runKernel(Xk,m,g)}let[c,f]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(a)d=t.getContext("2d").getImageData(0,0,c,f).data;else if(o||n)d=t.data;else if(s||i||l){if(WC==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")WC=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else WC=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});WC.canvas.width=c,WC.canvas.height=f,WC.drawImage(t,0,0,c,f),d=WC.getImageData(0,0,c,f).data}let p;if(r===4)p=new Int32Array(d);else{let m=c*f;p=new Int32Array(m*r);for(let g=0;g<m;g++)for(let y=0;y<r;++y)p[g*r+y]=d[g*4+y]}return IU(p,[f,c,r],"int32")}function JFt(t){return t!=null&&t.data instanceof Uint8Array}function eRt(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function tRt(t){return t!=null&&t.width!==0&&t.height!==0}function rRt(t){return eRt()&&!(t instanceof ImageBitmap)&&tRt(t)&&!JFt(t)}function nRt(t,r=3){return Be(this,null,function*(){let n=null;if(Oe().getBool("WRAP_TO_IMAGEBITMAP")&&rRt(t)){let o;try{o=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{o=null}o!=null&&o.width===t.width&&o.height===t.height?n=o:n=t}else n=t;return VRe(n,r)})}function GRe(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let r=t.rank===2?1:t.shape[2];if(r>4||r===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${r}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function oRt(t){let r=t?.alpha||1;if(r>1||r<0)throw new Error(`Alpha value ${r} is suppoed to be in range [0 - 1].`)}function iRt(t,r){return Be(this,null,function*(){let n=J(t,"img","toPixels");if(!(t instanceof tn)){let c=n;n=rt(c,"int32"),c.dispose()}GRe(n);let[o,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],a=yield n.data(),l=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*o*4);for(let c=0;c<o*i;++c){let f=[0,0,0,255];for(let p=0;p<s;p++){let h=a[c*s+p];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(f[0]=h*l,f[1]=h*l,f[2]=h*l):f[p]=h*l}let d=c*4;u[d+0]=Math.round(f[0]),u[d+1]=Math.round(f[1]),u[d+2]=Math.round(f[2]),u[d+3]=Math.round(f[3])}if(r!=null){URe||hC(Yk,ue.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),URe=!0),r.width=i,r.height=o;let c=r.getContext("2d"),f=new ImageData(u,i,o);c.putImageData(f,0,0)}return n!==t&&n.dispose(),u})}function sRt(t,r,n){let o=J(t,"img","draw");if(!(t instanceof tn)){let a=o;o=rt(a,"int32"),a.dispose()}GRe(o),oRt(n?.imageOptions);let i={image:o},s={canvas:r,options:n};ue.runKernel(Yk,i,s)}var WC,URe,aRt,WRe=D(()=>{"use strict";$e();ga();Ee();QM();Je();Pe();pn();De();Mie();URe=!1;aRt=se({fromPixels_:VRe})});var lse={};fn(lse,{prepareAndValidate:()=>qRe});function qRe(t,r){let n=t.shape.length,o=r.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(o<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${o}.`);if(r.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${r.dtype}.`);if(r.shape[o-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${r.shape[o-1]} vs. ${n}`);if(on(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let i=r.shape,s=i[i.length-1],a=1;for(let d=0;d<i.length-1;++d)a*=i[d];let l=t.shape,u=i.slice();u.pop();let c=1;for(let d=s;d<n;++d)c*=l[d],u.push(l[d]);let f=[...mg(t.shape).map(d=>d/c),1].slice(0,s);return[u,a,c,f]}var use=D(()=>{"use strict";Ze()});var Ns={};fn(Ns,{assertParamsValid:()=>uRt,computeFlatOffset:()=>hRt,computeOutShape:()=>fRt,getNormalizedAxes:()=>dRt,isSliceContinous:()=>pRt,maskToAxes:()=>cRt,parseSliceParams:()=>fse,sliceInfo:()=>mRt,startForAxis:()=>eMe,startIndicesWithElidedDims:()=>ZRe,stopForAxis:()=>tMe,stopIndicesWithElidedDims:()=>QRe,stridesForAxis:()=>JRe,stridesWithElidedDims:()=>YRe});function uRt(t,r,n){let o=t.shape.length;de(o===r.length,()=>`Error in slice${o}D: Length of begin ${r} must match the rank of the array (${o}).`),de(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must match the rank of the array (${o}).`);for(let i=0;i<o;++i)de(r[i]+n[i]<=t.shape[i],()=>`Error in slice${o}D: begin[${i}] + size[${i}] (${r[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function cRt(t){let r=[],n=0;for(;t>0;)t&1&&r.push(n),t/=2,n++;return r}function fRt(t,r,n){let o=[];for(let i=0;i<t.length;i++)o[i]=Math.ceil((r[i]-t[i])/n[i]);return o}function YRe(t,r,n,o){let i=[...t];for(let s=i.length;s<o.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[r]=1:(i.splice(r,0,1),i.pop());return i}function XRe(t,r,n){return n<=t?n:n-(r-1)}function KRe(t,r){let n=[];for(let o=0;o<t;o++)n.push(r+o);return n}function dRt(t,r,n,o,i,s,a,l,u){let c=t.length,f=new Array(c),d=new Array(c),p=new Array(c);if(r.length&&n>0){let h=r[0],m=n+1;f=ZRe(a,h,m,o,t),d=QRe(l,h,m,i,t),p=YRe(s,h,m,t)}else for(let h=0;h<c;h++)f[h]=eMe(a,o,s,t,h,u),d[h]=tMe(l,i,s,t,h,u),p[h]=JRe(s,h,u);return{begin:f,end:d,strides:p}}function ZRe(t,r,n,o,i){let s=[...i],a=KRe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=0;else{let u=XRe(r,n,l),c=o[u];t&1<<u&&(c=0),s[l]=c}return s}function QRe(t,r,n,o,i){let s=[...i],a=KRe(n,r);for(let l=0;l<s.length;l++)if(a.indexOf(l)>-1)s[l]=Number.MAX_SAFE_INTEGER;else{let u=XRe(r,n,l),c=o[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),s[l]=c}for(let l=0;l<s.length;l++){let u=i[l];s[l]<0&&(s[l]+=u),s[l]=zk(0,s[l],i[l])}return s}function JRe(t,r,n){let o=t[r];return(n&1<<r||o==null)&&(o=1),o}function eMe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),a=zk(0,a,u-1),a}function tMe(t,r,n,o,i,s){let a=r[i],l=n[i]||1;(t&1<<i||s&1<<i||a==null)&&(l>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);let u=o[i];return a<0&&(a+=u),l>0?a=zk(0,a,u):a=zk(-1,a,u-1),a}function pRt(t,r,n){let o=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){o=i;break}for(let i=o+1;i<n.length;i++)if(r[i]>0||n[i]!==t[i])return!1;return!0}function hRt(t,r){let n=t.length>0?t[t.length-1]:1;for(let o=0;o<t.length-1;o++)n+=t[o]*r[o];return n}function fse(t,r,n){let o,i=t.shape.length;typeof r=="number"?o=[r,...new Array(i-1).fill(0)]:r.length<i?o=r.concat(new Array(i-r.length).fill(0)):o=r.slice(),o.forEach(a=>{de(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,l)=>a>=0?a:(de(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${l}.`),t.shape[l]-o[l])),[o,s]}function mRt(t,r,n,o,i,s,a,l,u){let c;if(o==null?(c=new Array(r.length),c.fill(1)):c=o,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:r.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:l,shrinkAxisMask:u};for(let v=0;v<d.dims;v++)f&&1<<v&l&&d.numAddAxisAfterEllipsis++,1<<v&a&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};gRt(d,p);let h=!0,m=!0,g=!0,y=[],b=[];for(let v=0;v<t.length;++v){if(p.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);let w=!!(p.shrinkAxisMask&1<<v),_=t[v];if(_===-1){y.push(w?1:-1);continue}let C=[p.beginMask&1<<v,p.endMask&1<<v],S=[p.strides[v]>0?0:-1,p.strides[v]>0?_:_-1];if(w&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[v]===1;let E=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(w){let R=p.begin[v]<0?_+p.begin[v]:p.begin[v];if(p.begin[v]=R,p.end[v]=p.begin[v]+1,R<0||R>=_)throw Error(`slice index ${p.begin[v]} of dimension ${v} out of bounds.`)}else p.begin[v]=HRe(p.begin[v],0,p.strides[v],_,C,S),p.end[v]=HRe(p.end[v],1,p.strides[v],_,C,S);let k=p.strides[v]===1&&p.begin[v]===0&&p.end[v]===_;h=h&&k,m=m&&(v===0&&p.strides[v]===1||k)}else h=h&&p.strides[v]===1&&E,m=m&&(v===0&&p.strides[v]===1||E);let A,N=!1;if(p.beginValid&&p.endValid?(A=p.end[v]-p.begin[v],N=!0):w?(A=1,N=!0):E&&_>=0&&(p.strides[v]<0?A=-_:A=_,N=!0),N){let k;A===0||A<0!=p.strides[v]<0?k=0:k=Math.trunc(A/p.strides[v])+(A%p.strides[v]!==0?1:0),y.push(k)}else y.push(-1)}for(let v=0;v<p.finalShapeGatherIndices.length;++v){let w=p.finalShapeGatherIndices[v];w>=0?b.push(y[w]):w===cse&&b.push(1)}return{finalShapeSparse:b.filter((v,w)=>p.finalShapeGatherIndices[w]!==cse),finalShape:b,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function gRt(t,r){r.beginMask=0,r.endMask=0,r.shrinkAxisMask=0;let n=0;r.beginValid=t.begin!=null,r.endValid=t.end!=null,r.begin=new Array(r.dims),r.end=new Array(r.dims),r.strides=new Array(r.dims),r.finalShapeGatherIndices=[],r.finalShapeGatherIndicesSparse=[],r.inputShapeGatherIndicesSparse=new Array(r.dims);for(let o=0;o<t.dims;o++)if(1<<o&t.ellipsisMask){let i=Math.min(r.dims-(t.dims-o)+1+t.numAddAxisAfterEllipsis,r.dims);for(;n<i;n++)r.begin[n]=0,r.end[n]=0,r.strides[n]=1,r.beginMask|=1<<n,r.endMask|=1<<n,r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(-1),r.inputShapeGatherIndicesSparse[n]=o}else if(1<<o&t.newAxisMask)r.finalShapeGatherIndices.push(cse),r.finalShapeGatherIndicesSparse.push(-1);else{if(n===r.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${r.dims} dims, ${r.begin.length}.`);t.begin!=null&&(r.begin[n]=t.begin[o]),t.end!=null&&(r.end[n]=t.end[o]),r.strides[n]=t.strides[o],t.beginMask&1<<o&&(r.beginMask|=1<<n),t.endMask&1<<o&&(r.endMask|=1<<n),t.shrinkAxisMask&1<<o?(r.finalShapeGatherIndices.push(lRt),r.finalShapeGatherIndicesSparse.push(-1),r.shrinkAxisMask|=1<<n):(r.finalShapeGatherIndices.push(n),r.finalShapeGatherIndicesSparse.push(o)),r.inputShapeGatherIndicesSparse[n]=o,n++}}function HRe(t,r,n,o,i,s){if(i[r])return n>0?s[r]:s[r+1&1];{let a=t<0?o+t:t;return a<s[0]?s[0]:a>s[1]?s[1]:a}}var cse,lRt,o7=D(()=>{"use strict";Ze();cse=-2,lRt=-1});var dse,rMe=D(()=>{"use strict";dse="4.19.0"});var XI,pse=D(()=>{"use strict";YU();XU();KU();ZU();QU();JU();j3();XI=class{static sgd(r){return new S0(r)}static momentum(r,n,o=!1){return new gw(r,n,o)}static rmsprop(r,n=.9,o=0,i=null,s=!1){return new yw(r,n,o,i,s)}static adam(r=.001,n=.9,o=.999,i=null){return new hw(r,n,o,i)}static adadelta(r=.001,n=.95,o=null){return new dw(r,n,o)}static adamax(r=.002,n=.9,o=.999,i=null,s=0){return new mw(r,n,o,i,s)}static adagrad(r,n=.1){return new pw(r,n)}}});var op,nMe=D(()=>{"use strict";pse();op=XI});function KI(){return new Promise(t=>yRt(()=>t()))}var yRt,oMe=D(()=>{"use strict";yRt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t()});function bRt(t,r){let n=t[0].length;t.forEach((i,s)=>{de(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),de(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let o=t[0];t.forEach((i,s)=>{for(let a=0;a<n;a++)de(a===r||i[a]===o[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${o}) along the non-concatenated axis ${s}.`)})}function xRt(t,r){let n=t[0].slice();for(let o=1;o<t.length;o++)n[r]+=t[o][r];return n}var iMe=D(()=>{"use strict";Ze();});var sMe=D(()=>{"use strict";});function vRt(t,r,n){let o=new Array;if(n==null&&r==null)return o;if(r==null)for(;o.length<t+n.length;)o.push(-1);else o=r.slice();if(n==null)return o;if(t+n.length!==o.length)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${o.length}`);for(let i=1;i<n.length;++i){let s=n[i],a=o[o.length-n.length+i],l=o[a];if(s>=0)if(l>=0){if(l!==s)throw new Error(`rt input.shape and shape=${r} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${l}`)}else o[a]=s}return o}function wRt(t){let r={FIRST_DIM_SIZE:kx.FIRST_DIM_SIZE,VALUE_ROWIDS:kx.VALUE_ROWIDS,ROW_LENGTHS:kx.ROW_LENGTHS,ROW_SPLITS:kx.ROW_SPLITS,ROW_LIMITS:kx.ROW_LIMITS,ROW_STARTS:kx.ROW_STARTS},n=[];for(let o of t)if(o in r)n.push(r[o]);else break;return n}function _Rt(t){return t.length===0?0:t[0]===kx.FIRST_DIM_SIZE?t.length-1:t.length}function SRt(t,r){if(t==null||r==null)return;let n=t.length,o=r.length;if(n>=o)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${r}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${o})`);for(let i=0;i<Math.min(n,o-1);++i){let s=t[i],a=r[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${r} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${a}`)}}var kx,aMe=D(()=>{"use strict";kx=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(kx||{})});function CRt(t){return t<=i7?t:Vk(t,Math.floor(Math.sqrt(t)))}var i7,hse=D(()=>{"use strict";Ze();i7=30});function ERt(t,r,n){let o=n*(typeof t=="number"?t:t[0]),i=r*(typeof t=="number"?t:t[1]);return[o,i]}var lMe=D(()=>{"use strict";});function TRt(t,r,n,o=!0){let i=[];if(o)i=i.concat(r.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);let s=r.length;for(let a=0;a<s;++a)i=i.concat([t[a+1]/r[a],r[a]]);i=i.concat(t.slice(s+1))}return i}function ARt(t,r,n=!0){let o=[];if(n){o.push(r);for(let i=r+1;i<t;++i)i<=2*r?(o.push(i),o.push(i-(r+1))):o.push(i)}else{let i=[],s=[];for(let a=1;a<t;++a)a>=r*2+1||a%2===1?s.push(a):i.push(a);o.push(...i),o.push(0),o.push(...s)}return o}function kRt(t,r,n,o=!0){let i=[];o?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=r.length?o?i.push(r[s-1]*t[s]):i.push(t[s]/r[s-1]):i.push(t[s]);return i}function IRt(t,r){let n=[0];for(let o=0;o<r;++o)n.push(t[o][0]);return n}function DRt(t,r,n){let o=t.slice(0,1);for(let i=0;i<n;++i)o.push(t[i+1]-r[i][0]-r[i][1]);return o}var uMe=D(()=>{"use strict";});var mse,gse,yse=D(()=>{"use strict";mse=1.7580993408473768,gse=1.0507009873554805});var NRt,ORt,FRt,RRt,MRt,PRt,cMe=D(()=>{"use strict";NRt=.3275911,ORt=.254829592,FRt=-.284496736,RRt=1.421413741,MRt=-1.453152027,PRt=1.061405429});function jRt(t,r){if(t.length!==r.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${r.length}.`);let n=new Float32Array(t.length*2);for(let o=0;o<n.length;o+=2)n[o]=t[o/2],n[o+1]=r[o/2];return n}function LRt(t){let r=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=t[o],n[o/2]=t[o+1];return{real:r,imag:n}}function BRt(t){let r=Math.ceil(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function $Rt(t){let r=Math.floor(t.length/4),n=new Float32Array(r),o=new Float32Array(r);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],o[Math.floor(i/4)]=t[i+1];return{real:n,imag:o}}function zRt(t,r){let n=t[r*2],o=t[r*2+1];return{real:n,imag:o}}function URt(t,r,n,o){t[o*2]=r,t[o*2+1]=n}function VRt(t,r){let n=new Float32Array(t/2),o=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){let s=(r?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),o[i]=Math.sin(s)}return{real:n,imag:o}}function GRt(t,r,n){let o=(n?2:-2)*Math.PI*(t/r),i=Math.cos(o),s=Math.sin(o);return{real:i,imag:s}}var fMe=D(()=>{"use strict";});function qRt(t,r){t=t.replace(/\s/g,"");let n=(t.length-t.replace(WRt,"").length)/bse.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${bse}").`);let[o,i]=t.split(bse);de(o.indexOf(pMe)===-1,()=>`The ellipsis notation ("${pMe}") is not supported yet.`);let s=o.split(dMe),a=s.length;if(r!==a)throw new Error(`Expected ${a} input tensors, received ${r}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let l=[];for(let p=0;p<i.length;++p){let h=i[p];if(!s.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);l.indexOf(h)===-1&&l.push(h)}for(let p=0;p<o.length;++p){let h=o[p];l.indexOf(h)===-1&&h!==dMe&&l.push(h)}let u=new Array(s.length);for(let p=0;p<a;++p){if(new Set(s[p].split("")).size!==s[p].length)throw new Error(`Found duplicate axes in input component ${s[p]}. Support for duplicate axes in input is not implemented yet.`);u[p]=[];for(let h=0;h<s[p].length;++h)u[p].push(l.indexOf(s[p][h]))}let c=l.length,f=i.length,d=[];for(let p=f;p<c;++p)d.push(p);return{allDims:l,summedDims:d,idDims:u}}function HRt(t,r){let n=new Array(t);n.fill(-1);for(let i=0;i<r.length;++i)n[r[i]]=i;let o=[];for(let i=0;i<t;++i)n[i]===-1&&o.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:o}}function YRt(t,r,n){let o=new Array(t);for(let i=0;i<n.length;++i){let s=n[i].shape;for(let a=0;a<r[i].length;++a)o[r[i][a]]===void 0?o[r[i][a]]=s[a]:de(o[r[i][a]]===s[a],()=>`Expected dimension ${o[r[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function XRt(t,r){let n=t,o=[],i=0;t.length===0&&n.push(-1),i=t.length+1;for(let a=0;a<i;++a)o.push([]);let s=[];for(let a=0;a<n.length;++a){let l=n[a],u=ZRt(r,l);for(let c of u)s.indexOf(c)===-1&&(o[a].push(c),s.push(c))}return{path:n,steps:o}}function KRt(t){return t.every((r,n)=>r===n)}function ZRt(t,r){let n=[];for(let o=0;o<t.length;++o)(t[o].length===0||t[o].indexOf(r)!==-1||r===-1)&&n.push(o);return n}var bse,WRt,dMe,pMe,hMe=D(()=>{"use strict";Ws();bse="->",WRt=/->/g,dMe=",",pMe="..."});function QRt(t,r,n=0){let o=[];if(typeof r=="number")de(t.shape[n]%r===0,()=>"Number of splits must evenly divide the axis."),o=new Array(r).fill(t.shape[n]/r);else{let i=r.reduce((a,l)=>(l===-1&&(a+=1),a),0);de(i<=1,()=>"There should be only one negative value in split array.");let s=r.indexOf(-1);if(s!==-1){let a=r.reduce((l,u)=>u>0?l+u:l);r[s]=t.shape[n]-a}de(t.shape[n]===r.reduce((a,l)=>a+l),()=>"The sum of sizes must match the size of the axis dimension."),o=r}return o}var mMe=D(()=>{"use strict";Ze()});function JRt(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function eMt(t,r){return`indices(${t}, 0) is invalid: ${r} < 0`}function tMt(t,r,n){return`indices(${t}, 0) is invalid: ${r} >= ${n}`}var gMe=D(()=>{"use strict";});function rMt(t,r){return`only one output dimension may be -1, not both ${t} and ${r}`}function nMt(t,r){return`size ${t} must be non-negative, not ${r}`}function oMt(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function iMt(t,r){let n=on(t),o=on(r);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${o}. inputShape=${t} outputShape= ${r}`}function sMt(t,r){let n=on(t),o=on(r);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${o}. inputShape=${t} outputShape=${r}`}var yMe=D(()=>{"use strict";Ze();});function aMt(){return"segment ids must be >= 0"}function lMt(){return"segment ids are not increasing"}function uMt(t,r){return`Segment id ${t} out of range [0, ${r}), possibly because segmentIds input is not sorted.`}function cMt(t,r,n){return`Bad: indices[${t}] == ${r} out of range [0, ${n})`}var bMe=D(()=>{"use strict";});var xse={};fn(xse,{collectGatherOpShapeInfo:()=>pMt,computeOutShape:()=>dMt,segOpComputeOptimalWindowSize:()=>fMt});function fMt(t,r){let n=!1,o;for(t<=i7?(o=t,n=!0):o=Vk(t,Math.floor(Math.sqrt(t)));!n;)o>r||o===t?n=!0:o=Vk(t,o+1);return o}function dMt(t,r,n){let o=[],i=t.length;for(let s=0;s<i;s++)s!==r?o.push(t[s]):o.push(n);return o}function pMt(t,r,n,o){let i=r.shape.length,s=t.shape.length;if(o!==0&&(o<-i||o>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${o}`);if(o<0&&(o+=i),o>s)throw new Error(`batchDims (${o}) must be less than rank(x) (
    ${s}).`);if(n<o)throw new Error(`batchDims (${o}) must be less than or equal to axis (${n}).`);for(let d=0;d<o;++d)if(t.shape[d]!==r.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${r.shape[d]}.`);let a=t.shape[n],l=[],u=1,c=1,f=1;for(let d=0;d<o;++d)l.push(t.shape[d]),u*=t.shape[d];for(let d=o;d<n;d++)l.push(t.shape[d]),c*=t.shape[d];for(let d=o;d<i;d++)l.push(r.shape[d]);for(let d=n+1;d<s;d++)l.push(t.shape[d]),f*=t.shape[d];return{batchSize:u,sliceSize:f,outerSize:c,dimSize:a,outputShape:l}}var xMe=D(()=>{"use strict";Ze();hse();});var ce={};fn(ce,{ERF_A1:()=>ORt,ERF_A2:()=>FRt,ERF_A3:()=>RRt,ERF_A4:()=>MRt,ERF_A5:()=>PRt,ERF_P:()=>NRt,PARALLELIZE_THRESHOLD:()=>i7,RowPartitionType:()=>kx,SELU_SCALE:()=>gse,SELU_SCALEALPHA:()=>mse,applyActivation:()=>UC,assertAndGetBroadcastShape:()=>jr,assertAxesAreInnerMostDims:()=>eDt,assertParamsConsistent:()=>bRt,assignToTypedArray:()=>URt,axesAreInnerMostDims:()=>nie,calculateShapes:()=>FOe,checkEinsumDimSizes:()=>YRt,checkPadOnDimRoundingMode:()=>go,combineLocations:()=>qDe,combineRaggedTensorToTensorShapes:()=>vRt,complexWithEvenIndex:()=>BRt,complexWithOddIndex:()=>$Rt,computeConv2DInfo:()=>AC,computeConv3DInfo:()=>yDe,computeDefaultPad:()=>Woe,computeDilation2DInfo:()=>Jkt,computeOptimalWindowSize:()=>CRt,computeOutAndReduceShapes:()=>oie,computeOutShape:()=>xRt,computePool2DInfo:()=>Goe,computePool3DInfo:()=>eIt,convertConv2DDataFormat:()=>bDe,decodeEinsumEquation:()=>qRt,eitherStridesOrDilationsAreOne:()=>ba,expandShapeToKeepDim:()=>tp,exponent:()=>GRt,exponents:()=>VRt,fromStringArrayToUint8:()=>mMt,fromUint8ToStringArray:()=>hMt,getAxesPermutation:()=>iie,getBroadcastDims:()=>UDe,getComplexWithIndex:()=>zRt,getEinsumComputePath:()=>XRt,getEinsumPermutation:()=>HRt,getFusedBiasGradient:()=>zC,getFusedDyActivation:()=>$C,getImageCenter:()=>ERt,getInnerMostAxes:()=>tDt,getPermuted:()=>ARt,getRaggedRank:()=>_Rt,getReductionAxes:()=>oo,getReshaped:()=>TRt,getReshapedPermuted:()=>kRt,getRowPartitionTypesHelper:()=>wRt,getSliceBeginCoords:()=>IRt,getSliceSize:()=>DRt,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>JRt,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>eMt,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>tMt,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>oMt,getSparseReshapeInputOutputMismatchErrorMessage:()=>sMt,getSparseReshapeInputOutputMultipleErrorMessage:()=>iMt,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>rMt,getSparseReshapeNegativeOutputDimErrorMessage:()=>nMt,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>cMt,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>aMt,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>lMt,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>uMt,getUndoAxesPermutation:()=>h3,isIdentityPermutation:()=>KRt,log:()=>NAt,mergeRealAndImagArrays:()=>jRt,prepareAndValidate:()=>qRe,prepareSplitSize:()=>QRt,segment_util:()=>xse,shouldFuse:()=>VC,slice_util:()=>Ns,splitRealAndImagArrays:()=>LRt,stridesOrDilationsArePositive:()=>f0,tupleValuesAreOne:()=>Yf,upcastType:()=>zi,validateDefaultValueShape:()=>SRt,validateInput:()=>VI,validateUpdateShape:()=>Pie,warn:()=>l0});function hMt(t){try{return t.map(r=>tI(r))}catch(r){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${r}`)}}function mMt(t){return t.map(r=>j1(r))}var vMe=D(()=>{"use strict";Ze();Sh();ko();iMe();Is();YI();sMe();aMe();hse();o7();nI();lMe();uMe();use();O3();yse();YI();cMe();qz();fMe();hMe();mMe();gMe();yMe();bMe();xMe();});var _a={};fn(_a,{nonMaxSuppressionV3Impl:()=>zU,nonMaxSuppressionV4Impl:()=>UU,nonMaxSuppressionV5Impl:()=>VU,whereImpl:()=>RU});var wMe=D(()=>{"use strict";M3();Bie();});var vse=D(()=>{"use strict";LRe();zRe();ko();WRe();use();O3();o7();HU();ni();tOe();Ze();rMe();YU();XU();KU();ZU();QU();fw();pse();JU();j3();Je();nI();Nr();kh();nMe();Mc();QM();Sx();ga();oMe();vMe();voe();wMe();Yne();Ee();});var Oo={};fn(Oo,{Abs:()=>wb,Acos:()=>gg,Acosh:()=>yg,AdadeltaOptimizer:()=>dw,AdagradOptimizer:()=>pw,AdamOptimizer:()=>hw,AdamaxOptimizer:()=>mw,Add:()=>Xd,AddN:()=>_b,All:()=>cS,Any:()=>fS,ArgMax:()=>Sb,ArgMin:()=>Cb,Asin:()=>bg,Asinh:()=>xg,Atan:()=>vg,Atan2:()=>_g,Atanh:()=>wg,AvgPool:()=>Eb,AvgPool3D:()=>Tb,AvgPool3DGrad:()=>pS,AvgPoolGrad:()=>dS,BatchMatMul:()=>Ab,BatchToSpaceND:()=>kb,Bincount:()=>hS,BitwiseAnd:()=>S1,BroadcastArgs:()=>mS,BroadcastTo:()=>noe,Cast:()=>ph,Ceil:()=>Sg,ClipByValue:()=>Cg,Complex:()=>gS,ComplexAbs:()=>Ib,Concat:()=>Db,Conv2D:()=>Nb,Conv2DBackpropFilter:()=>yS,Conv2DBackpropInput:()=>Ob,Conv3D:()=>Fb,Conv3DBackpropFilterV2:()=>bS,Conv3DBackpropInputV2:()=>xS,Cos:()=>Eg,Cosh:()=>Tg,CropAndResize:()=>wS,Cumprod:()=>vS,Cumsum:()=>Rb,DataStorage:()=>w1,DenseBincount:()=>_S,DepthToSpace:()=>SS,DepthwiseConv2dNative:()=>Mb,DepthwiseConv2dNativeBackpropFilter:()=>CS,DepthwiseConv2dNativeBackpropInput:()=>ES,Diag:()=>TS,Dilation2D:()=>Pb,Dilation2DBackpropFilter:()=>Hk,Dilation2DBackpropInput:()=>qk,Draw:()=>Yk,ENV:()=>Gz,Einsum:()=>AS,Elu:()=>kg,EluGrad:()=>kS,Environment:()=>Wk,Equal:()=>C1,Erf:()=>Ig,Exp:()=>Dg,ExpandDims:()=>jb,Expm1:()=>Ng,FFT:()=>IS,Fill:()=>DS,FlipLeftRight:()=>NS,Floor:()=>Og,FloorDiv:()=>Fg,FromPixels:()=>Xk,FusedBatchNorm:()=>Lb,FusedConv2D:()=>R1,FusedDepthwiseConv2D:()=>M1,GatherNd:()=>OS,GatherV2:()=>Bb,Greater:()=>E1,GreaterEqual:()=>Rg,IFFT:()=>FS,Identity:()=>hh,Imag:()=>RS,IsFinite:()=>Mg,IsInf:()=>Pg,IsNan:()=>jg,KernelBackend:()=>pg,LRN:()=>zb,LRNGrad:()=>PS,LeakyRelu:()=>$b,Less:()=>T1,LessEqual:()=>A1,LinSpace:()=>MS,Log:()=>Lg,Log1p:()=>Bg,LogSoftmax:()=>ooe,LogicalAnd:()=>k1,LogicalNot:()=>I1,LogicalOr:()=>D1,LogicalXor:()=>TAt,LowerBound:()=>AAt,MatrixBandPart:()=>kAt,Max:()=>Ub,MaxPool:()=>Vb,MaxPool3D:()=>Gb,MaxPool3DGrad:()=>LS,MaxPoolGrad:()=>jS,MaxPoolWithArgmax:()=>BS,Maximum:()=>$g,Mean:()=>Wb,Min:()=>qb,Minimum:()=>zg,MirrorPad:()=>Hb,Mod:()=>Ug,MomentumOptimizer:()=>gw,Multinomial:()=>$S,Multiply:()=>Vg,Neg:()=>Yb,NonMaxSuppressionV3:()=>zS,NonMaxSuppressionV4:()=>US,NonMaxSuppressionV5:()=>VS,NotEqual:()=>N1,OP_SCOPE_SUFFIX:()=>woe,OneHot:()=>Kb,OnesLike:()=>Xb,Optimizer:()=>wa,OptimizerConstructors:()=>XI,Pack:()=>Zb,PadV2:()=>Qb,Pool:()=>IAt,Pow:()=>Gg,Prelu:()=>Jb,Prod:()=>ex,RMSPropOptimizer:()=>yw,RaggedGather:()=>GS,RaggedRange:()=>WS,RaggedTensorToTensor:()=>qS,Range:()=>HS,Rank:()=>hoe,Real:()=>YS,RealDiv:()=>Ag,Reciprocal:()=>Wg,Reduction:()=>Ti,Relu:()=>qg,Relu6:()=>Hg,Reshape:()=>tx,ResizeBilinear:()=>nx,ResizeBilinearGrad:()=>KS,ResizeNearestNeighbor:()=>rx,ResizeNearestNeighborGrad:()=>XS,Reverse:()=>ox,RotateWithOffset:()=>pC,Round:()=>Yg,Rsqrt:()=>Xg,SGDOptimizer:()=>S0,ScatterNd:()=>ZS,SearchSorted:()=>JS,Select:()=>ix,Selu:()=>Kg,Sigmoid:()=>e0,Sign:()=>Jg,Sin:()=>Zg,Sinh:()=>Qg,Slice:()=>sx,Softmax:()=>cx,Softplus:()=>t0,SpaceToBatchND:()=>lx,SparseFillEmptyRows:()=>eC,SparseReshape:()=>tC,SparseSegmentMean:()=>rC,SparseSegmentSum:()=>nC,SparseToDense:()=>oC,SplitV:()=>ux,Sqrt:()=>r0,Square:()=>iC,SquaredDifference:()=>n0,StaticRegexReplace:()=>O1,Step:()=>a0,StridedSlice:()=>sC,StringNGrams:()=>aC,StringSplit:()=>lC,StringToHashBucketFast:()=>uC,Sub:()=>o0,Sum:()=>ax,Tan:()=>i0,Tanh:()=>s0,Tensor:()=>tn,TensorBuffer:()=>Cn,TensorScatterUpdate:()=>QS,Tile:()=>mh,TopK:()=>cC,Transform:()=>fC,Transpose:()=>gh,Unique:()=>dC,Unpack:()=>fx,UnsortedSegmentSum:()=>dx,UpperBound:()=>DAt,Variable:()=>u0,ZerosLike:()=>px,_FusedMatMul:()=>F1,abs:()=>Ao,acos:()=>c8,acosh:()=>f8,add:()=>Ke,addN:()=>fDe,all:()=>dI,any:()=>TC,argMax:()=>Jd,argMin:()=>d8,asin:()=>p8,asinh:()=>h8,atan:()=>m8,atan2:()=>g8,atanh:()=>y8,avgPool:()=>G1,avgPool3d:()=>x8,backend:()=>s3,backend_util:()=>ce,basicLSTMCell:()=>vDe,batchNorm:()=>d0,batchNorm2d:()=>v8,batchNorm3d:()=>w8,batchNorm4d:()=>_8,batchToSpaceND:()=>W1,bincount:()=>S8,bitwiseAnd:()=>ADe,booleanMaskAsync:()=>SOt,broadcastArgs:()=>IDe,broadcastTo:()=>p0,broadcast_util:()=>Hu,browser:()=>n7,buffer:()=>Jt,cast:()=>rt,ceil:()=>E8,clipByValue:()=>Hs,clone:()=>Gu,complex:()=>Vu,concat:()=>Fn,concat1d:()=>T8,concat2d:()=>A8,concat3d:()=>k8,concat4d:()=>I8,conv1d:()=>yI,conv2d:()=>qu,conv2dTranspose:()=>xI,conv3d:()=>N8,conv3dTranspose:()=>F8,copyRegisteredKernels:()=>RAt,cos:()=>q1,cosh:()=>vI,cosineWindow:()=>F3,cumprod:()=>IC,cumsum:()=>wI,customGrad:()=>Cl,denseBincount:()=>f3,deprecationWarn:()=>FIe,depthToSpace:()=>j8,depthwiseConv2d:()=>h0,device_util:()=>hx,diag:()=>$De,dilation2d:()=>L8,disableDeprecationWarnings:()=>skt,dispose:()=>Tr,disposeVariables:()=>akt,div:()=>Ct,divNoNan:()=>B8,dot:()=>$8,dropout:()=>zie,einsum:()=>H1,elu:()=>m0,enableDebugMode:()=>ikt,enableProdMode:()=>okt,enclosingPowerOfTwo:()=>Uie,engine:()=>Hf,ensureShape:()=>VDe,env:()=>Oe,equal:()=>Sl,erf:()=>_I,euclideanNorm:()=>V8,exp:()=>bi,expandDims:()=>Ei,expm1:()=>G8,eye:()=>DC,fft:()=>sw,fill:()=>ep,findBackend:()=>dkt,findBackendFactory:()=>pkt,floor:()=>y0,floorDiv:()=>fI,fused:()=>cw,gather:()=>b0,gatherND:()=>FOt,gather_util:()=>lse,getBackend:()=>Soe,getGradient:()=>Hz,getKernel:()=>hC,getKernelsForBackend:()=>ZM,grad:()=>eNe,grads:()=>tNe,greater:()=>oi,greaterEqual:()=>tu,ifft:()=>Tx,imag:()=>X1,image:()=>Xu,inTopKAsync:()=>POt,io:()=>C0,irfft:()=>$I,isFinite:()=>q8,isInf:()=>H8,isNaN:()=>Y8,keep:()=>ks,kernel_impls:()=>_a,leakyRelu:()=>K1,less:()=>_x,lessEqual:()=>Pc,linalg:()=>Kie,linspace:()=>QDe,localResponseNormalization:()=>K8,log:()=>Xs,log1p:()=>Q1,logSigmoid:()=>Q8,logSoftmax:()=>AI,logSumExp:()=>J1,logicalAnd:()=>za,logicalNot:()=>ew,logicalOr:()=>kI,logicalXor:()=>tU,losses:()=>LFt,lowerBound:()=>sNe,matMul:()=>Vr,math:()=>ase,max:()=>Ys,maxPool:()=>tw,maxPool3d:()=>iU,maxPoolWithArgmax:()=>uNe,maximum:()=>Yu,mean:()=>bo,memory:()=>iI,meshgrid:()=>fNe,min:()=>vx,minimum:()=>Qf,mirrorPad:()=>sU,mod:()=>aU,moments:()=>RC,movingAverage:()=>TOt,mul:()=>we,multiRNNCell:()=>hNe,multinomial:()=>gNe,neg:()=>Zr,nextFrame:()=>KI,norm:()=>wx,notEqual:()=>Th,oneHot:()=>v0,ones:()=>Ui,onesLike:()=>Ds,op:()=>se,outerProduct:()=>xNe,pad:()=>ru,pad1d:()=>wNe,pad2d:()=>SNe,pad3d:()=>ENe,pad4d:()=>ANe,pool:()=>cU,pow:()=>$a,prelu:()=>ow,print:()=>l8,prod:()=>dU,profile:()=>lkt,raggedGather:()=>INe,raggedRange:()=>NNe,raggedTensorToTensor:()=>FNe,rand:()=>MNe,randomGamma:()=>rOe,randomNormal:()=>jC,randomStandardNormal:()=>oOe,randomUniform:()=>jc,randomUniformInt:()=>sOe,range:()=>w0,ready:()=>ckt,real:()=>Cx,reciprocal:()=>xU,registerBackend:()=>i3,registerGradient:()=>ioe,registerKernel:()=>Zk,relu:()=>va,relu6:()=>NI,removeBackend:()=>fkt,reshape:()=>Se,reverse:()=>ds,reverse1d:()=>uOe,reverse2d:()=>fOe,reverse3d:()=>pOe,reverse4d:()=>mOe,rfft:()=>aw,round:()=>OI,rsqrt:()=>FI,scalar:()=>Rt,scatterND:()=>kOt,scatter_util:()=>N3,searchSorted:()=>w3,selu:()=>RI,separableConv2d:()=>MI,serialization:()=>tt,setBackend:()=>RIe,setPlatform:()=>hkt,setdiff1dAsync:()=>yOe,sigmoid:()=>_l,sign:()=>wU,signal:()=>jFt,sin:()=>PI,sinh:()=>jI,slice:()=>$r,slice1d:()=>LI,slice2d:()=>I3,slice3d:()=>BI,slice4d:()=>LC,slice_util:()=>Ns,softmax:()=>iw,softplus:()=>Eh,spaceToBatchND:()=>nw,sparse:()=>BFt,sparseToDense:()=>NOt,spectral:()=>PFt,split:()=>ps,sqrt:()=>Kn,square:()=>qr,squaredDifference:()=>zI,squeeze:()=>Lc,stack:()=>ts,step:()=>rp,stridedSlice:()=>TU,string:()=>$Ft,sub:()=>wt,sum:()=>It,sumOutType:()=>L1,tan:()=>AU,tanh:()=>_h,tensor:()=>La,tensor1d:()=>No,tensor2d:()=>Ah,tensor3d:()=>IU,tensor4d:()=>AOe,tensor5d:()=>IOe,tensor6d:()=>NOe,tensorScatterUpdate:()=>ROe,tensor_util:()=>t8,test_util:()=>Tie,tidy:()=>je,tile:()=>xa,time:()=>ukt,topk:()=>DU,train:()=>op,transpose:()=>Gr,truncatedNormal:()=>GI,unique:()=>NU,unregisterGradient:()=>FAt,unregisterKernel:()=>OAt,unsortedSegmentSum:()=>WI,unstack:()=>Ua,upcastType:()=>zi,upperBound:()=>jOe,util:()=>H,valueAndGrad:()=>rNe,valueAndGrads:()=>nNe,variable:()=>FU,variableGrads:()=>x3,version_core:()=>dse,where:()=>yo,whereAsync:()=>MU,zeros:()=>xo,zerosLike:()=>sr});var re=D(()=>{"use strict";lDe();SRe();vse();_Re()});var _Me=D(()=>{"use strict";Nr();Je();Ce().prototype.abs=function(){return this.throwIfDisposed(),Ao(this)}});var SMe=D(()=>{"use strict";Nr();Je();Ce().prototype.acos=function(){return this.throwIfDisposed(),c8(this)}});var CMe=D(()=>{"use strict";Nr();Je();Ce().prototype.acosh=function(){return this.throwIfDisposed(),f8(this)}});var EMe=D(()=>{"use strict";$o();Je();Ce().prototype.add=function(t){return this.throwIfDisposed(),Ke(this,t)}});var TMe=D(()=>{"use strict";Loe();Je();Ce().prototype.all=function(t,r){return this.throwIfDisposed(),dI(this,t,r)}});var AMe=D(()=>{"use strict";Boe();Je();Ce().prototype.any=function(t,r){return this.throwIfDisposed(),TC(this,t,r)}});var kMe=D(()=>{"use strict";$oe();Je();Ce().prototype.argMax=function(t){return this.throwIfDisposed(),Jd(this,t)}});var IMe=D(()=>{"use strict";zoe();Je();Ce().prototype.argMin=function(t){return this.throwIfDisposed(),d8(this,t)}});var DMe=D(()=>{"use strict";Ht();Je();Ze();Ce().prototype.asScalar=function(){return this.throwIfDisposed(),de(this.size===1,()=>"The array must have only 1 element."),Se(this,[])}});var NMe=D(()=>{"use strict";Nr();Je();Ce().prototype.asType=function(t){return this.throwIfDisposed(),rt(this,t)}});var OMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as1D=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var FMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as2D=function(t,r){return this.throwIfDisposed(),Se(this,[t,r])}});var RMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as3D=function(t,r,n){return this.throwIfDisposed(),Se(this,[t,r,n])}});var MMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as4D=function(t,r,n,o){return this.throwIfDisposed(),Se(this,[t,r,n,o])}});var PMe=D(()=>{"use strict";Ht();Je();Ce().prototype.as5D=function(t,r,n,o,i){return this.throwIfDisposed(),Se(this,[t,r,n,o,i])}});var jMe=D(()=>{"use strict";Nr();Je();Ce().prototype.asin=function(){return this.throwIfDisposed(),p8(this)}});var LMe=D(()=>{"use strict";Nr();Je();Ce().prototype.asinh=function(){return this.throwIfDisposed(),h8(this)}});var BMe=D(()=>{"use strict";Nr();Je();Ce().prototype.atan=function(){return this.throwIfDisposed(),m8(this)}});var $Me=D(()=>{"use strict";Uoe();Je();Ce().prototype.atan2=function(t){return this.throwIfDisposed(),g8(this,t)}});var zMe=D(()=>{"use strict";Nr();Je();Ce().prototype.atanh=function(){return this.throwIfDisposed(),y8(this)}});var UMe=D(()=>{"use strict";b8();Je();Ce().prototype.avgPool=function(t,r,n,o){return this.throwIfDisposed(),G1(this,t,r,n,o)}});var VMe=D(()=>{"use strict";c3();Je();Ce().prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),W1(this,t,r)}});var GMe=D(()=>{"use strict";mI();Je();Ce().prototype.batchNorm=function(t,r,n,o,i){return this.throwIfDisposed(),d0(this,t,r,n,o,i)}});var WMe=D(()=>{"use strict";C8();Je();Ce().prototype.broadcastTo=function(t){return this.throwIfDisposed(),p0(this,t)}});var qMe=D(()=>{"use strict";Nr();Je();Ce().prototype.cast=function(t){return this.throwIfDisposed(),rt(this,t)}});var HMe=D(()=>{"use strict";Nr();Je();Ce().prototype.ceil=function(){return this.throwIfDisposed(),E8(this)}});var YMe=D(()=>{"use strict";Nr();Je();Ce().prototype.clipByValue=function(t,r){return this.throwIfDisposed(),Hs(this,t,r)}});var XMe=D(()=>{"use strict";Kf();Je();Ce().prototype.concat=function(t,r){return this.throwIfDisposed(),t instanceof tn&&(t=[t]),Fn([this,...t],r)}});var KMe=D(()=>{"use strict";Yoe();Je();Ce().prototype.conv1d=function(t,r,n,o,i,s){return this.throwIfDisposed(),yI(this,t,r,n,o,i,s)}});var ZMe=D(()=>{"use strict";Xoe();Je();Ce().prototype.conv2dTranspose=function(t,r,n,o,i){return this.throwIfDisposed(),xI(this,t,r,n,o,i)}});var QMe=D(()=>{"use strict";kC();Je();Ce().prototype.conv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),qu(this,t,r,n,o,i,s)}});var JMe=D(()=>{"use strict";Nr();Je();Ce().prototype.cos=function(){return this.throwIfDisposed(),q1(this)}});var e3e=D(()=>{"use strict";Nr();Je();Ce().prototype.cosh=function(){return this.throwIfDisposed(),vI(this)}});var t3e=D(()=>{"use strict";M8();Je();Ce().prototype.cumprod=function(t,r,n){return this.throwIfDisposed(),IC(this,t,r,n)}});var r3e=D(()=>{"use strict";P8();Je();Ce().prototype.cumsum=function(t,r,n){return this.throwIfDisposed(),wI(this,t,r,n)}});var n3e=D(()=>{"use strict";Qoe();Je();Ce().prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),j8(this,t,r)}});var o3e=D(()=>{"use strict";d3();Je();Ce().prototype.depthwiseConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),h0(this,t,r,n,o,i,s)}});var i3e=D(()=>{"use strict";Joe();Je();Ce().prototype.dilation2d=function(t,r,n,o,i){return this.throwIfDisposed(),L8(this,t,r,n,o,i)}});var s3e=D(()=>{"use strict";eie();Je();Ce().prototype.divNoNan=function(t){return this.throwIfDisposed(),B8(this,t)}});var a3e=D(()=>{"use strict";Xn();Je();Ce().prototype.div=function(t){return this.throwIfDisposed(),Ct(this,t)}});var l3e=D(()=>{"use strict";tie();Je();Ce().prototype.dot=function(t){return this.throwIfDisposed(),$8(this,t)}});var u3e=D(()=>{"use strict";z8();Je();Ce().prototype.elu=function(){return this.throwIfDisposed(),m0(this)}});var c3e=D(()=>{"use strict";p3();Je();Ce().prototype.equal=function(t){return this.throwIfDisposed(),Sl(this,t)}});var f3e=D(()=>{"use strict";Nr();Je();Ce().prototype.erf=function(){return this.throwIfDisposed(),_I(this)}});var d3e=D(()=>{"use strict";aie();Je();Ce().prototype.euclideanNorm=function(t,r){return this.throwIfDisposed(),V8(this,t,r)}});var p3e=D(()=>{"use strict";Nr();Je();Ce().prototype.exp=function(){return this.throwIfDisposed(),bi(this)}});var h3e=D(()=>{"use strict";CI();Je();Ce().prototype.expandDims=function(t){return this.throwIfDisposed(),Ei(this,t)}});var m3e=D(()=>{"use strict";Nr();Je();Ce().prototype.expm1=function(){return this.throwIfDisposed(),G8(this)}});var g3e=D(()=>{"use strict";Nr();Je();Ce().prototype.fft=function(){return this.throwIfDisposed(),sw(this)}});var y3e=D(()=>{"use strict";Ht();Je();Ce().prototype.flatten=function(){return this.throwIfDisposed(),Se(this,[this.size])}});var b3e=D(()=>{"use strict";Nr();Je();Ce().prototype.floor=function(){return this.throwIfDisposed(),y0(this)}});var x3e=D(()=>{"use strict";u8();Je();Ce().prototype.floorDiv=function(t){return this.throwIfDisposed(),fI(this,t)}});var v3e=D(()=>{"use strict";g3();Je();Ce().prototype.gather=function(t,r,n){return this.throwIfDisposed(),b0(this,t,r,n)}});var w3e=D(()=>{"use strict";NC();Je();Ce().prototype.greaterEqual=function(t){return this.throwIfDisposed(),tu(this,t)}});var _3e=D(()=>{"use strict";x0();Je();Ce().prototype.greater=function(t){return this.throwIfDisposed(),oi(this,t)}});var S3e=D(()=>{"use strict";Nr();Je();Ce().prototype.ifft=function(){return this.throwIfDisposed(),Tx(this)}});var C3e=D(()=>{"use strict";Nr();Je();Ce().prototype.irfft=function(){return this.throwIfDisposed(),$I(this)}});var E3e=D(()=>{"use strict";Nr();Je();Ce().prototype.isFinite=function(){return this.throwIfDisposed(),q8(this)}});var T3e=D(()=>{"use strict";Nr();Je();Ce().prototype.isInf=function(){return this.throwIfDisposed(),H8(this)}});var A3e=D(()=>{"use strict";Nr();Je();Ce().prototype.isNaN=function(){return this.throwIfDisposed(),Y8(this)}});var k3e=D(()=>{"use strict";X8();Je();Ce().prototype.leakyRelu=function(t){return this.throwIfDisposed(),K1(this,t)}});var I3e=D(()=>{"use strict";Z1();Je();Ce().prototype.lessEqual=function(t){return this.throwIfDisposed(),Pc(this,t)}});var D3e=D(()=>{"use strict";b3();Je();Ce().prototype.less=function(t){return this.throwIfDisposed(),_x(this,t)}});var N3e=D(()=>{"use strict";uie();Je();Ce().prototype.localResponseNormalization=function(t,r,n,o){return this.throwIfDisposed(),K8(this,t,r,n,o)}});var O3e=D(()=>{"use strict";Nr();Je();Ce().prototype.logSigmoid=function(){return this.throwIfDisposed(),Q8(this)}});var F3e=D(()=>{"use strict";Nr();Je();Ce().prototype.logSoftmax=function(t){return this.throwIfDisposed(),AI(this,t)}});var R3e=D(()=>{"use strict";J8();Je();Ce().prototype.logSumExp=function(t,r){return this.throwIfDisposed(),J1(this,t,r)}});var M3e=D(()=>{"use strict";Nr();Je();Ce().prototype.log=function(){return this.throwIfDisposed(),Xs(this)}});var P3e=D(()=>{"use strict";Nr();Je();Ce().prototype.log1p=function(){return this.throwIfDisposed(),Q1(this)}});var j3e=D(()=>{"use strict";OC();Je();Ce().prototype.logicalAnd=function(t){return this.throwIfDisposed(),za(this,t)}});var L3e=D(()=>{"use strict";v3();Je();Ce().prototype.logicalNot=function(){return this.throwIfDisposed(),ew(this)}});var B3e=D(()=>{"use strict";eU();Je();Ce().prototype.logicalOr=function(t){return this.throwIfDisposed(),kI(this,t)}});var $3e=D(()=>{"use strict";die();Je();Ce().prototype.logicalXor=function(t){return this.throwIfDisposed(),tU(this,t)}});var z3e=D(()=>{"use strict";wh();Je();Ce().prototype.matMul=function(t,r,n){return this.throwIfDisposed(),Vr(this,t,r,n)}});var U3e=D(()=>{"use strict";oU();Je();Ce().prototype.maxPool=function(t,r,n,o){return this.throwIfDisposed(),tw(this,t,r,n,o)}});var V3e=D(()=>{"use strict";SI();Je();Ce().prototype.max=function(t,r){return this.throwIfDisposed(),Ys(this,t,r)}});var G3e=D(()=>{"use strict";_3();Je();Ce().prototype.maximum=function(t){return this.throwIfDisposed(),Yu(this,t)}});var W3e=D(()=>{"use strict";S3();Je();Ce().prototype.mean=function(t,r){return this.throwIfDisposed(),bo(this,t,r)}});var q3e=D(()=>{"use strict";U8();Je();Ce().prototype.min=function(t,r){return this.throwIfDisposed(),vx(this,t,r)}});var H3e=D(()=>{"use strict";C3();Je();Ce().prototype.minimum=function(t){return this.throwIfDisposed(),Qf(this,t)}});var Y3e=D(()=>{"use strict";pie();Je();Ce().prototype.mirrorPad=function(t,r){return this.throwIfDisposed(),sU(this,t,r)}});var X3e=D(()=>{"use strict";hie();Je();Ce().prototype.mod=function(t){return this.throwIfDisposed(),aU(this,t)}});var K3e=D(()=>{"use strict";fr();Je();Ce().prototype.mul=function(t){return this.throwIfDisposed(),we(this,t)}});var Z3e=D(()=>{"use strict";Nr();Je();Ce().prototype.neg=function(){return this.throwIfDisposed(),Zr(this)}});var Q3e=D(()=>{"use strict";Nr();Je();Ce().prototype.norm=function(t,r,n){return this.throwIfDisposed(),wx(this,t,r,n)}});var J3e=D(()=>{"use strict";lU();Je();Ce().prototype.notEqual=function(t){return this.throwIfDisposed(),Th(this,t)}});var ePe=D(()=>{"use strict";uU();Je();Ce().prototype.oneHot=function(t,r=1,n=0){return this.throwIfDisposed(),v0(this,t,r,n)}});var tPe=D(()=>{"use strict";Nr();Je();Ce().prototype.onesLike=function(){return this.throwIfDisposed(),Ds(this)}});var rPe=D(()=>{"use strict";rw();Je();Ce().prototype.pad=function(t,r){return this.throwIfDisposed(),ru(this,t,r)}});var nPe=D(()=>{"use strict";mie();Je();Ce().prototype.pool=function(t,r,n,o,i,s){return this.throwIfDisposed(),cU(this,t,r,n,o,i,s)}});var oPe=D(()=>{"use strict";Y1();Je();Ce().prototype.pow=function(t){return this.throwIfDisposed(),$a(this,t)}});var iPe=D(()=>{"use strict";fU();Je();Ce().prototype.prelu=function(t){return this.throwIfDisposed(),ow(this,t)}});var sPe=D(()=>{"use strict";gie();Je();Ce().prototype.prod=function(t,r){return this.throwIfDisposed(),dU(this,t,r)}});var aPe=D(()=>{"use strict";Nr();Je();Ce().prototype.reciprocal=function(){return this.throwIfDisposed(),xU(this)}});var lPe=D(()=>{"use strict";DI();Je();Ce().prototype.relu=function(){return this.throwIfDisposed(),va(this)}});var uPe=D(()=>{"use strict";vU();Je();Ce().prototype.relu6=function(){return this.throwIfDisposed(),NI(this)}});var cPe=D(()=>{"use strict";Ht();Je();Ce().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Se(this,t.shape)}});var fPe=D(()=>{"use strict";Ht();Je();Ce().prototype.reshape=function(t){return this.throwIfDisposed(),Se(this,t)}});var dPe=D(()=>{"use strict";Yie();Je();Ce().prototype.resizeBilinear=function(t,r,n){return this.throwIfDisposed(),GU(this,t,r,n)}});var pPe=D(()=>{"use strict";Xie();Je();Ce().prototype.resizeNearestNeighbor=function(t,r,n){return this.throwIfDisposed(),WU(this,t,r,n)}});var hPe=D(()=>{"use strict";Ex();Je();Ce().prototype.reverse=function(t){return this.throwIfDisposed(),ds(this,t)}});var mPe=D(()=>{"use strict";Nr();Je();Ce().prototype.rfft=function(){return this.throwIfDisposed(),aw(this)}});var gPe=D(()=>{"use strict";Nr();Je();Ce().prototype.round=function(){return this.throwIfDisposed(),OI(this)}});var yPe=D(()=>{"use strict";Nr();Je();Ce().prototype.rsqrt=function(){return this.throwIfDisposed(),FI(this)}});var bPe=D(()=>{"use strict";Die();Je();Ce().prototype.selu=function(){return this.throwIfDisposed(),RI(this)}});var xPe=D(()=>{"use strict";Nie();Je();Ce().prototype.separableConv2d=function(t,r,n,o,i,s){return this.throwIfDisposed(),MI(this,t,r,n,o,i,s)}});var vPe=D(()=>{"use strict";Nr();Je();Ce().prototype.sigmoid=function(){return this.throwIfDisposed(),_l(this)}});var wPe=D(()=>{"use strict";Nr();Je();Ce().prototype.sign=function(){return this.throwIfDisposed(),wU(this)}});var _Pe=D(()=>{"use strict";Nr();Je();Ce().prototype.sin=function(){return this.throwIfDisposed(),PI(this)}});var SPe=D(()=>{"use strict";Nr();Je();Ce().prototype.sinh=function(){return this.throwIfDisposed(),jI(this)}});var CPe=D(()=>{"use strict";Nr();Je();Ce().prototype.slice=function(t,r){return this.throwIfDisposed(),$r(this,t,r)}});var EPe=D(()=>{"use strict";Nr();Je();Ce().prototype.softmax=function(t){return this.throwIfDisposed(),iw(this,t)}});var TPe=D(()=>{"use strict";Nr();Je();Ce().prototype.softplus=function(){return this.throwIfDisposed(),Eh(this)}});var APe=D(()=>{"use strict";E3();Je();Ce().prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),nw(this,t,r)}});var kPe=D(()=>{"use strict";BC();Je();Ce().prototype.split=function(t,r){return this.throwIfDisposed(),ps(this,t,r)}});var IPe=D(()=>{"use strict";Nr();Je();Ce().prototype.sqrt=function(){return this.throwIfDisposed(),Kn(this)}});var DPe=D(()=>{"use strict";Nr();Je();Ce().prototype.square=function(){return this.throwIfDisposed(),qr(this)}});var NPe=D(()=>{"use strict";EU();Je();Ce().prototype.squaredDifference=function(t){return this.throwIfDisposed(),zI(this,t)}});var OPe=D(()=>{"use strict";D3();Je();Ce().prototype.squeeze=function(t){return this.throwIfDisposed(),Lc(this,t)}});var FPe=D(()=>{"use strict";lw();Je();Ce().prototype.stack=function(t,r){this.throwIfDisposed();let n=t instanceof tn?[this,t]:[this,...t];return ts(n,r)}});var RPe=D(()=>{"use strict";Nr();Je();Ce().prototype.step=function(t){return this.throwIfDisposed(),rp(this,t)}});var MPe=D(()=>{"use strict";Nr();Je();Ce().prototype.stridedSlice=function(t,r,n,o,i,s,a,l){return this.throwIfDisposed(),TU(this,t,r,n,o,i,s,a,l)}});var PPe=D(()=>{"use strict";io();Je();Ce().prototype.sub=function(t){return this.throwIfDisposed(),wt(this,t)}});var jPe=D(()=>{"use strict";Ci();Je();Ce().prototype.sum=function(t,r){return this.throwIfDisposed(),It(this,t,r)}});var LPe=D(()=>{"use strict";Nr();Je();Ce().prototype.tan=function(){return this.throwIfDisposed(),AU(this)}});var BPe=D(()=>{"use strict";Nr();Je();Ce().prototype.tanh=function(){return this.throwIfDisposed(),_h(this)}});var $Pe=D(()=>{"use strict";EI();Je();Ce().prototype.tile=function(t){return this.throwIfDisposed(),xa(this,t)}});var zPe=D(()=>{"use strict";Nr();Je();Ce().prototype.toBool=function(){return this.throwIfDisposed(),rt(this,"bool")}});var UPe=D(()=>{"use strict";Nr();Je();Ce().prototype.toFloat=function(){return this.throwIfDisposed(),rt(this,"float32")}});var VPe=D(()=>{"use strict";Nr();Je();Ce().prototype.toInt=function(){return this.throwIfDisposed(),rt(this,"int32")}});var GPe=D(()=>{"use strict";jie();Je();Ce().prototype.topk=function(t,r){return this.throwIfDisposed(),DU(this,t,r)}});var WPe=D(()=>{"use strict";Ax();Je();Ce().prototype.transpose=function(t){return this.throwIfDisposed(),Gr(this,t)}});var qPe=D(()=>{"use strict";Lie();Je();Ce().prototype.unique=function(t){return this.throwIfDisposed(),NU(this,t)}});var HPe=D(()=>{"use strict";OU();Je();Ce().prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),WI(this,t,r)}});var YPe=D(()=>{"use strict";qI();Je();Ce().prototype.unstack=function(t){return this.throwIfDisposed(),Ua(this,t)}});var XPe=D(()=>{"use strict";Zf();Je();Ce().prototype.where=function(t,r){return this.throwIfDisposed(),yo(t,this,r)}});var KPe=D(()=>{"use strict";Nr();Je();Ce().prototype.zerosLike=function(){return this.throwIfDisposed(),sr(this)}});var gMt={};var wse=D(()=>{"use strict";_Me();SMe();CMe();EMe();TMe();AMe();kMe();IMe();DMe();NMe();OMe();FMe();RMe();MMe();PMe();jMe();LMe();BMe();$Me();zMe();UMe();VMe();GMe();WMe();qMe();HMe();YMe();XMe();KMe();ZMe();QMe();JMe();e3e();t3e();r3e();n3e();o3e();i3e();s3e();a3e();l3e();u3e();c3e();f3e();d3e();p3e();h3e();m3e();g3e();y3e();b3e();x3e();v3e();w3e();_3e();S3e();C3e();E3e();T3e();A3e();k3e();I3e();D3e();N3e();O3e();F3e();R3e();M3e();P3e();j3e();L3e();B3e();$3e();z3e();U3e();V3e();G3e();W3e();q3e();H3e();Y3e();X3e();K3e();Z3e();Q3e();J3e();ePe();tPe();rPe();nPe();oPe();iPe();sPe();aPe();lPe();uPe();cPe();fPe();dPe();pPe();hPe();mPe();gPe();yPe();bPe();xPe();vPe();wPe();_Pe();SPe();CPe();EPe();TPe();APe();kPe();IPe();DPe();NPe();OPe();FPe();RPe();MPe();PPe();jPe();LPe();BPe();$Pe();zPe();UPe();VPe();GPe();WPe();qPe();HPe();YPe();XPe();KPe();});function a7(t,r){return bMt.call(t,r)}function l7(t){if(Array.isArray(t)){for(var r=new Array(t.length),n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);var o=[];for(var i in t)a7(t,i)&&o.push(i);return o}function El(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function u7(t){for(var r=0,n=t.length,o;r<n;){if(o=t.charCodeAt(r),o>=48&&o<=57){r++;continue}return!1}return!0}function E0(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function B3(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function s7(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(s7(t[r]))return!0}else if(typeof t=="object"){for(var o=l7(t),i=o.length,s=0;s<i;s++)if(s7(t[o[s]]))return!0}}return!1}function ZPe(t,r){var n=[t];for(var o in r){var i=typeof r[o]=="object"?JSON.stringify(r[o],null,2):r[o];typeof i<"u"&&n.push(o+": "+i)}return n.join(`
`)}var yMt,bMt,$3,z3=D(()=>{"use strict";yMt=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])},t(r,n)};return function(r,n){t(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),bMt=Object.prototype.hasOwnProperty;$3=function(t){yMt(r,t);function r(n,o,i,s,a){var l=this.constructor,u=t.call(this,ZPe(n,{name:o,index:i,operation:s,tree:a}))||this;return u.name=o,u.index=i,u.operation=s,u.tree=a,Object.setPrototypeOf(u,l.prototype),u.message=ZPe(n,{name:o,index:i,operation:s,tree:a}),u}return r}(Error)});var _se={};fn(_se,{JsonPatchError:()=>hs,_areEquals:()=>U3,applyOperation:()=>qC,applyPatch:()=>QI,applyReducer:()=>wMt,deepClone:()=>xMt,getValueByPointer:()=>c7,validate:()=>QPe,validator:()=>f7});function c7(t,r){if(r=="")return t;var n={op:"_get",path:r};return qC(t,n),n.value}function qC(t,r,n,o,i,s){if(n===void 0&&(n=!1),o===void 0&&(o=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(r,0,t,r.path):f7(r,0)),r.path===""){var a={newDocument:t};if(r.op==="add")return a.newDocument=r.value,a;if(r.op==="replace")return a.newDocument=r.value,a.removed=t,a;if(r.op==="move"||r.op==="copy")return a.newDocument=c7(t,r.from),r.op==="move"&&(a.removed=t),a;if(r.op==="test"){if(a.test=U3(t,r.value),a.test===!1)throw new hs("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a.newDocument=t,a}else{if(r.op==="remove")return a.removed=t,a.newDocument=null,a;if(r.op==="_get")return r.value=t,a;if(n)throw new hs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,r,t);return a}}else{o||(t=El(t));var l=r.path||"",u=l.split("/"),c=t,f=1,d=u.length,p=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=f7;;){if(h=u[f],h&&h.indexOf("~")!=-1&&(h=B3(h)),i&&(h=="__proto__"||h=="prototype"&&f>0&&u[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[h]===void 0?p=u.slice(0,f).join("/"):f==d-1&&(p=r.path),p!==void 0&&m(r,0,t,p)),f++,Array.isArray(c)){if(h==="-")h=c.length;else{if(n&&!u7(h))throw new hs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,r,t);u7(h)&&(h=~~h)}if(f>=d){if(n&&r.op==="add"&&h>c.length)throw new hs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,r,t);var a=vMt[r.op].call(r,c,h,t);if(a.test===!1)throw new hs("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}}else if(f>=d){var a=ZI[r.op].call(r,c,h,t);if(a.test===!1)throw new hs("Test operation failed","TEST_OPERATION_FAILED",s,r,t);return a}if(c=c[h],n&&f<d&&(!c||typeof c!="object"))throw new hs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,r,t)}}}function QI(t,r,n,o,i){if(o===void 0&&(o=!0),i===void 0&&(i=!0),n&&!Array.isArray(r))throw new hs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(t=El(t));for(var s=new Array(r.length),a=0,l=r.length;a<l;a++)s[a]=qC(t,r[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function wMt(t,r,n){var o=qC(t,r);if(o.test===!1)throw new hs("Test operation failed","TEST_OPERATION_FAILED",n,r,t);return o.newDocument}function f7(t,r,n,o){if(typeof t!="object"||t===null||Array.isArray(t))throw new hs("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,t,n);if(ZI[t.op]){if(typeof t.path!="string")throw new hs("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new hs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new hs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new hs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&s7(t.value))throw new hs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=o.split("/").length;if(i!==s+1&&i!==s)throw new hs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==o)throw new hs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},l=QPe([a],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new hs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,t,n)}}}else throw new hs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,t,n)}function QPe(t,r,n){try{if(!Array.isArray(t))throw new hs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)QI(El(r),El(t),n||!0);else{n=n||f7;for(var o=0;o<t.length;o++)n(t[o],o,r,void 0)}}catch(i){if(i instanceof hs)return i;throw i}}function U3(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=Array.isArray(t),o=Array.isArray(r),i,s,a;if(n&&o){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!U3(t[i],r[i]))return!1;return!0}if(n!=o)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!r.hasOwnProperty(l[i]))return!1;for(i=s;i--!==0;)if(a=l[i],!U3(t[a],r[a]))return!1;return!0}return t!==t&&r!==r}var hs,xMt,ZI,vMt,d7=D(()=>{"use strict";z3();hs=$3,xMt=El,ZI={add:function(t,r,n){return t[r]=this.value,{newDocument:n}},remove:function(t,r,n){var o=t[r];return delete t[r],{newDocument:n,removed:o}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:function(t,r,n){var o=c7(n,this.path);o&&(o=El(o));var i=qC(n,{op:"remove",path:this.from}).removed;return qC(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:o}},copy:function(t,r,n){var o=c7(n,this.from);return qC(n,{op:"add",path:this.path,value:El(o)}),{newDocument:n}},test:function(t,r,n){return{newDocument:n,test:U3(t[r],this.value)}},_get:function(t,r,n){return this.value=t[r],{newDocument:n}}},vMt={add:function(t,r,n){return u7(r)?t.splice(r,0,this.value):t[r]=this.value,{newDocument:n,index:r}},remove:function(t,r,n){var o=t.splice(r,1);return{newDocument:n,removed:o[0]}},replace:function(t,r,n){var o=t[r];return t[r]=this.value,{newDocument:n,removed:o}},move:ZI.move,copy:ZI.copy,test:ZI.test,_get:ZI._get}});var Tse={};fn(Tse,{compare:()=>IMt,generate:()=>Sse,observe:()=>kMt,unobserve:()=>AMt});function CMt(t){return Cse.get(t)}function EMt(t,r){return t.observers.get(r)}function TMt(t,r){t.observers.delete(r.callback)}function AMt(t,r){r.unobserve()}function kMt(t,r){var n=[],o,i=CMt(t);if(!i)i=new _Mt(t),Cse.set(t,i);else{var s=EMt(i,r);o=s&&s.observer}if(o)return o;if(o={},i.value=El(t),r){o.callback=r,o.next=null;var a=function(){Sse(o)},l=function(){clearTimeout(o.next),o.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return o.patches=n,o.object=t,o.unobserve=function(){Sse(o),clearTimeout(o.next),TMt(i,o),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},i.observers.set(r,new SMt(r,o)),o}function Sse(t,r){r===void 0&&(r=!1);var n=Cse.get(t.object);Ese(n.value,t.object,t.patches,"",r),t.patches.length&&QI(n.value,t.patches);var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function Ese(t,r,n,o,i){if(r!==t){typeof r.toJSON=="function"&&(r=r.toJSON());for(var s=l7(r),a=l7(t),l=!1,u=!1,c=a.length-1;c>=0;c--){var f=a[c],d=t[f];if(a7(r,f)&&!(r[f]===void 0&&d!==void 0&&Array.isArray(r)===!1)){var p=r[f];typeof d=="object"&&d!=null&&typeof p=="object"&&p!=null&&Array.isArray(d)===Array.isArray(p)?Ese(d,p,n,o+"/"+E0(f),i):d!==p&&(l=!0,i&&n.push({op:"test",path:o+"/"+E0(f),value:El(d)}),n.push({op:"replace",path:o+"/"+E0(f),value:El(p)}))}else Array.isArray(t)===Array.isArray(r)?(i&&n.push({op:"test",path:o+"/"+E0(f),value:El(d)}),n.push({op:"remove",path:o+"/"+E0(f)}),u=!0):(i&&n.push({op:"test",path:o,value:t}),n.push({op:"replace",path:o,value:r}),l=!0)}if(!(!u&&s.length==a.length))for(var c=0;c<s.length;c++){var f=s[c];!a7(t,f)&&r[f]!==void 0&&n.push({op:"add",path:o+"/"+E0(f),value:El(r[f])})}}}function IMt(t,r,n){n===void 0&&(n=!1);var o=[];return Ese(t,r,o,"",n),o}var Cse,_Mt,SMt,Ase=D(()=>{"use strict";z3();d7();Cse=new WeakMap,_Mt=function(){function t(r){this.observers=new Map,this.obj=r}return t}(),SMt=function(){function t(r,n){this.callback=r,this.observer=n}return t}()});var Wwn,JPe=D(()=>{"use strict";d7();Ase();z3();d7();Ase();z3();Wwn=Object.assign({},_se,Tse,{JsonPatchError:$3,deepClone:El,escapePathComponent:E0,unescapePathComponent:B3})});var tje=gt((Kwn,eje)=>{"use strict";var DMt=/("(?:[^\\"]|\\.)*")|[:,]/g;eje.exports=function(r,n){var o,i,s;return n=n||{},o=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=o===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function a(l,u,c){var f,d,p,h,m,g,y,b,x,v,w,_;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),w=JSON.stringify(l,s),w===void 0)return w;if(y=i-u.length-c,w.length<=y&&(x=w.replace(DMt,function(C,S){return S||C+" "}),x.length<=y))return x;if(s!=null&&(l=JSON.parse(w),s=void 0),typeof l=="object"&&l!==null){if(b=u+o,p=[],d=0,Array.isArray(l))for(v="[",f="]",y=l.length;d<y;d++)p.push(a(l[d],b,d===y-1?0:1)||"null");else for(v="{",f="}",g=Object.keys(l),y=g.length;d<y;d++)h=g[d],m=JSON.stringify(h)+": ",_=a(l[h],b,m.length+(d===y-1?0:1)),_!==void 0&&p.push(m+_);if(p.length>0)return[v,o+p.join(`,
`+b),f].join(`
`+u)}return w}(r,"",0)}});var V3=gt((Zwn,rje)=>{"use strict";var NMt="2.0.0",OMt=Number.MAX_SAFE_INTEGER||9007199254740991,FMt=16,RMt=250,MMt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];rje.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:FMt,MAX_SAFE_BUILD_LENGTH:RMt,MAX_SAFE_INTEGER:OMt,RELEASE_TYPES:MMt,SEMVER_SPEC_VERSION:NMt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var G3=gt((Qwn,nje)=>{"use strict";var PMt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};nje.exports=PMt});var JI=gt((Ix,oje)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:kse,MAX_SAFE_BUILD_LENGTH:jMt,MAX_LENGTH:LMt}=V3(),BMt=G3();Ix=oje.exports={};var $Mt=Ix.re=[],zMt=Ix.safeRe=[],rr=Ix.src=[],nr=Ix.t={},UMt=0,Ise="[a-zA-Z0-9-]",VMt=[["\\s",1],["\\d",LMt],[Ise,jMt]],GMt=t=>{for(let[r,n]of VMt)t=t.split(`${r}*`).join(`${r}{0,${n}}`).split(`${r}+`).join(`${r}{1,${n}}`);return t},gn=(t,r,n)=>{let o=GMt(r),i=UMt++;BMt(t,i,r),nr[t]=i,rr[i]=r,$Mt[i]=new RegExp(r,n?"g":void 0),zMt[i]=new RegExp(o,n?"g":void 0)};gn("NUMERICIDENTIFIER","0|[1-9]\\d*");gn("NUMERICIDENTIFIERLOOSE","\\d+");gn("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Ise}*`);gn("MAINVERSION",`(${rr[nr.NUMERICIDENTIFIER]})\\.(${rr[nr.NUMERICIDENTIFIER]})\\.(${rr[nr.NUMERICIDENTIFIER]})`);gn("MAINVERSIONLOOSE",`(${rr[nr.NUMERICIDENTIFIERLOOSE]})\\.(${rr[nr.NUMERICIDENTIFIERLOOSE]})\\.(${rr[nr.NUMERICIDENTIFIERLOOSE]})`);gn("PRERELEASEIDENTIFIER",`(?:${rr[nr.NUMERICIDENTIFIER]}|${rr[nr.NONNUMERICIDENTIFIER]})`);gn("PRERELEASEIDENTIFIERLOOSE",`(?:${rr[nr.NUMERICIDENTIFIERLOOSE]}|${rr[nr.NONNUMERICIDENTIFIER]})`);gn("PRERELEASE",`(?:-(${rr[nr.PRERELEASEIDENTIFIER]}(?:\\.${rr[nr.PRERELEASEIDENTIFIER]})*))`);gn("PRERELEASELOOSE",`(?:-?(${rr[nr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${rr[nr.PRERELEASEIDENTIFIERLOOSE]})*))`);gn("BUILDIDENTIFIER",`${Ise}+`);gn("BUILD",`(?:\\+(${rr[nr.BUILDIDENTIFIER]}(?:\\.${rr[nr.BUILDIDENTIFIER]})*))`);gn("FULLPLAIN",`v?${rr[nr.MAINVERSION]}${rr[nr.PRERELEASE]}?${rr[nr.BUILD]}?`);gn("FULL",`^${rr[nr.FULLPLAIN]}$`);gn("LOOSEPLAIN",`[v=\\s]*${rr[nr.MAINVERSIONLOOSE]}${rr[nr.PRERELEASELOOSE]}?${rr[nr.BUILD]}?`);gn("LOOSE",`^${rr[nr.LOOSEPLAIN]}$`);gn("GTLT","((?:<|>)?=?)");gn("XRANGEIDENTIFIERLOOSE",`${rr[nr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);gn("XRANGEIDENTIFIER",`${rr[nr.NUMERICIDENTIFIER]}|x|X|\\*`);gn("XRANGEPLAIN",`[v=\\s]*(${rr[nr.XRANGEIDENTIFIER]})(?:\\.(${rr[nr.XRANGEIDENTIFIER]})(?:\\.(${rr[nr.XRANGEIDENTIFIER]})(?:${rr[nr.PRERELEASE]})?${rr[nr.BUILD]}?)?)?`);gn("XRANGEPLAINLOOSE",`[v=\\s]*(${rr[nr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${rr[nr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${rr[nr.XRANGEIDENTIFIERLOOSE]})(?:${rr[nr.PRERELEASELOOSE]})?${rr[nr.BUILD]}?)?)?`);gn("XRANGE",`^${rr[nr.GTLT]}\\s*${rr[nr.XRANGEPLAIN]}$`);gn("XRANGELOOSE",`^${rr[nr.GTLT]}\\s*${rr[nr.XRANGEPLAINLOOSE]}$`);gn("COERCEPLAIN",`(^|[^\\d])(\\d{1,${kse}})(?:\\.(\\d{1,${kse}}))?(?:\\.(\\d{1,${kse}}))?`);gn("COERCE",`${rr[nr.COERCEPLAIN]}(?:$|[^\\d])`);gn("COERCEFULL",rr[nr.COERCEPLAIN]+`(?:${rr[nr.PRERELEASE]})?(?:${rr[nr.BUILD]})?(?:$|[^\\d])`);gn("COERCERTL",rr[nr.COERCE],!0);gn("COERCERTLFULL",rr[nr.COERCEFULL],!0);gn("LONETILDE","(?:~>?)");gn("TILDETRIM",`(\\s*)${rr[nr.LONETILDE]}\\s+`,!0);Ix.tildeTrimReplace="$1~";gn("TILDE",`^${rr[nr.LONETILDE]}${rr[nr.XRANGEPLAIN]}$`);gn("TILDELOOSE",`^${rr[nr.LONETILDE]}${rr[nr.XRANGEPLAINLOOSE]}$`);gn("LONECARET","(?:\\^)");gn("CARETTRIM",`(\\s*)${rr[nr.LONECARET]}\\s+`,!0);Ix.caretTrimReplace="$1^";gn("CARET",`^${rr[nr.LONECARET]}${rr[nr.XRANGEPLAIN]}$`);gn("CARETLOOSE",`^${rr[nr.LONECARET]}${rr[nr.XRANGEPLAINLOOSE]}$`);gn("COMPARATORLOOSE",`^${rr[nr.GTLT]}\\s*(${rr[nr.LOOSEPLAIN]})$|^$`);gn("COMPARATOR",`^${rr[nr.GTLT]}\\s*(${rr[nr.FULLPLAIN]})$|^$`);gn("COMPARATORTRIM",`(\\s*)${rr[nr.GTLT]}\\s*(${rr[nr.LOOSEPLAIN]}|${rr[nr.XRANGEPLAIN]})`,!0);Ix.comparatorTrimReplace="$1$2$3";gn("HYPHENRANGE",`^\\s*(${rr[nr.XRANGEPLAIN]})\\s+-\\s+(${rr[nr.XRANGEPLAIN]})\\s*$`);gn("HYPHENRANGELOOSE",`^\\s*(${rr[nr.XRANGEPLAINLOOSE]})\\s+-\\s+(${rr[nr.XRANGEPLAINLOOSE]})\\s*$`);gn("STAR","(<|>)?=?\\s*\\*");gn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");gn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var p7=gt((Jwn,ije)=>{"use strict";var WMt=Object.freeze({loose:!0}),qMt=Object.freeze({}),HMt=t=>t?typeof t!="object"?WMt:t:qMt;ije.exports=HMt});var Dse=gt((e_n,lje)=>{"use strict";var sje=/^[0-9]+$/,aje=(t,r)=>{let n=sje.test(t),o=sje.test(r);return n&&o&&(t=+t,r=+r),t===r?0:n&&!o?-1:o&&!n?1:t<r?-1:1},YMt=(t,r)=>aje(r,t);lje.exports={compareIdentifiers:aje,rcompareIdentifiers:YMt}});var nu=gt((t_n,dje)=>{"use strict";var h7=G3(),{MAX_LENGTH:uje,MAX_SAFE_INTEGER:m7}=V3(),{safeRe:cje,t:fje}=JI(),XMt=p7(),{compareIdentifiers:eD}=Dse(),Nse=class t{constructor(r,n){if(n=XMt(n),r instanceof t){if(r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>uje)throw new TypeError(`version is longer than ${uje} characters`);h7("SemVer",r,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let o=r.trim().match(n.loose?cje[fje.LOOSE]:cje[fje.FULL]);if(!o)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>m7||this.major<0)throw new TypeError("Invalid major version");if(this.minor>m7||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>m7||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<m7)return s}return i}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(h7("SemVer.compare",this.version,this.options,r),!(r instanceof t)){if(typeof r=="string"&&r===this.version)return 0;r=new t(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof t||(r=new t(r,this.options)),eD(this.major,r.major)||eD(this.minor,r.minor)||eD(this.patch,r.patch)}comparePre(r){if(r instanceof t||(r=new t(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let n=0;do{let o=this.prerelease[n],i=r.prerelease[n];if(h7("prerelease compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return eD(o,i)}while(++n)}compareBuild(r){r instanceof t||(r=new t(r,this.options));let n=0;do{let o=this.build[n],i=r.build[n];if(h7("build compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return eD(o,i)}while(++n)}inc(r,n,o){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(o)?1:0;if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];o===!1&&(s=[n]),eD(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};dje.exports=Nse});var HC=gt((r_n,hje)=>{"use strict";var pje=nu(),KMt=(t,r,n=!1)=>{if(t instanceof pje)return t;try{return new pje(t,r)}catch(o){if(!n)return null;throw o}};hje.exports=KMt});var gje=gt((n_n,mje)=>{"use strict";var ZMt=HC(),QMt=(t,r)=>{let n=ZMt(t,r);return n?n.version:null};mje.exports=QMt});var bje=gt((o_n,yje)=>{"use strict";var JMt=HC(),e3t=(t,r)=>{let n=JMt(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null};yje.exports=e3t});var wje=gt((i_n,vje)=>{"use strict";var xje=nu(),t3t=(t,r,n,o,i)=>{typeof n=="string"&&(i=o,o=n,n=void 0);try{return new xje(t instanceof xje?t.version:t,n).inc(r,o,i).version}catch{return null}};vje.exports=t3t});var Cje=gt((s_n,Sje)=>{"use strict";var _je=HC(),r3t=(t,r)=>{let n=_je(t,null,!0),o=_je(r,null,!0),i=n.compare(o);if(i===0)return null;let s=i>0,a=s?n:o,l=s?o:n,u=!!a.prerelease.length;if(!!l.prerelease.length&&!u)return!l.patch&&!l.minor?"major":a.patch?"patch":a.minor?"minor":"major";let f=u?"pre":"";return n.major!==o.major?f+"major":n.minor!==o.minor?f+"minor":n.patch!==o.patch?f+"patch":"prerelease"};Sje.exports=r3t});var Tje=gt((a_n,Eje)=>{"use strict";var n3t=nu(),o3t=(t,r)=>new n3t(t,r).major;Eje.exports=o3t});var kje=gt((l_n,Aje)=>{"use strict";var i3t=nu(),s3t=(t,r)=>new i3t(t,r).minor;Aje.exports=s3t});var Dje=gt((u_n,Ije)=>{"use strict";var a3t=nu(),l3t=(t,r)=>new a3t(t,r).patch;Ije.exports=l3t});var Oje=gt((c_n,Nje)=>{"use strict";var u3t=HC(),c3t=(t,r)=>{let n=u3t(t,r);return n&&n.prerelease.length?n.prerelease:null};Nje.exports=c3t});var ip=gt((f_n,Rje)=>{"use strict";var Fje=nu(),f3t=(t,r,n)=>new Fje(t,n).compare(new Fje(r,n));Rje.exports=f3t});var Pje=gt((d_n,Mje)=>{"use strict";var d3t=ip(),p3t=(t,r,n)=>d3t(r,t,n);Mje.exports=p3t});var Lje=gt((p_n,jje)=>{"use strict";var h3t=ip(),m3t=(t,r)=>h3t(t,r,!0);jje.exports=m3t});var g7=gt((h_n,$je)=>{"use strict";var Bje=nu(),g3t=(t,r,n)=>{let o=new Bje(t,n),i=new Bje(r,n);return o.compare(i)||o.compareBuild(i)};$je.exports=g3t});var Uje=gt((m_n,zje)=>{"use strict";var y3t=g7(),b3t=(t,r)=>t.sort((n,o)=>y3t(n,o,r));zje.exports=b3t});var Gje=gt((g_n,Vje)=>{"use strict";var x3t=g7(),v3t=(t,r)=>t.sort((n,o)=>x3t(o,n,r));Vje.exports=v3t});var W3=gt((y_n,Wje)=>{"use strict";var w3t=ip(),_3t=(t,r,n)=>w3t(t,r,n)>0;Wje.exports=_3t});var y7=gt((b_n,qje)=>{"use strict";var S3t=ip(),C3t=(t,r,n)=>S3t(t,r,n)<0;qje.exports=C3t});var Ose=gt((x_n,Hje)=>{"use strict";var E3t=ip(),T3t=(t,r,n)=>E3t(t,r,n)===0;Hje.exports=T3t});var Fse=gt((v_n,Yje)=>{"use strict";var A3t=ip(),k3t=(t,r,n)=>A3t(t,r,n)!==0;Yje.exports=k3t});var b7=gt((w_n,Xje)=>{"use strict";var I3t=ip(),D3t=(t,r,n)=>I3t(t,r,n)>=0;Xje.exports=D3t});var x7=gt((__n,Kje)=>{"use strict";var N3t=ip(),O3t=(t,r,n)=>N3t(t,r,n)<=0;Kje.exports=O3t});var Rse=gt((S_n,Zje)=>{"use strict";var F3t=Ose(),R3t=Fse(),M3t=W3(),P3t=b7(),j3t=y7(),L3t=x7(),B3t=(t,r,n,o)=>{switch(r){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return F3t(t,n,o);case"!=":return R3t(t,n,o);case">":return M3t(t,n,o);case">=":return P3t(t,n,o);case"<":return j3t(t,n,o);case"<=":return L3t(t,n,o);default:throw new TypeError(`Invalid operator: ${r}`)}};Zje.exports=B3t});var Jje=gt((C_n,Qje)=>{"use strict";var $3t=nu(),z3t=HC(),{safeRe:v7,t:w7}=JI(),U3t=(t,r)=>{if(t instanceof $3t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;r=r||{};let n=null;if(!r.rtl)n=t.match(r.includePrerelease?v7[w7.COERCEFULL]:v7[w7.COERCE]);else{let u=r.includePrerelease?v7[w7.COERCERTLFULL]:v7[w7.COERCERTL],c;for(;(c=u.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(n===null)return null;let o=n[2],i=n[3]||"0",s=n[4]||"0",a=r.includePrerelease&&n[5]?`-${n[5]}`:"",l=r.includePrerelease&&n[6]?`+${n[6]}`:"";return z3t(`${o}.${i}.${s}${a}${l}`,r)};Qje.exports=U3t});var tLe=gt((E_n,eLe)=>{"use strict";var Mse=class{constructor(){this.max=1e3,this.map=new Map}get(r){let n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(r,n)}return this}};eLe.exports=Mse});var sp=gt((T_n,iLe)=>{"use strict";var Pse=class t{constructor(r,n){if(n=G3t(n),r instanceof t)return r.loose===!!n.loose&&r.includePrerelease===!!n.includePrerelease?r:new t(r.raw,n);if(r instanceof jse)return this.raw=r.value,this.set=[[r]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(o=>this.parseRange(o.trim())).filter(o=>o.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let o=this.set[0];if(this.set=this.set.filter(i=>!nLe(i[0])),this.set.length===0)this.set=[o];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Z3t(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(r=>r.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(r){let o=((this.options.includePrerelease&&X3t)|(this.options.loose&&K3t))+":"+r,i=rLe.get(o);if(i)return i;let s=this.options.loose,a=s?Bc[Ku.HYPHENRANGELOOSE]:Bc[Ku.HYPHENRANGE];r=r.replace(a,aPt(this.options.includePrerelease)),Ai("hyphen replace",r),r=r.replace(Bc[Ku.COMPARATORTRIM],q3t),Ai("comparator trim",r),r=r.replace(Bc[Ku.TILDETRIM],H3t),Ai("tilde trim",r),r=r.replace(Bc[Ku.CARETTRIM],Y3t),Ai("caret trim",r);let l=r.split(" ").map(d=>Q3t(d,this.options)).join(" ").split(/\s+/).map(d=>sPt(d,this.options));s&&(l=l.filter(d=>(Ai("loose invalid filter",d,this.options),!!d.match(Bc[Ku.COMPARATORLOOSE])))),Ai("range list",l);let u=new Map,c=l.map(d=>new jse(d,this.options));for(let d of c){if(nLe(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return rLe.set(o,f),f}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Range is required");return this.set.some(o=>oLe(o,n)&&r.set.some(i=>oLe(i,n)&&o.every(s=>i.every(a=>s.intersects(a,n)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new W3t(r,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(lPt(this.set[n],r,this.options))return!0;return!1}};iLe.exports=Pse;var V3t=tLe(),rLe=new V3t,G3t=p7(),jse=q3(),Ai=G3(),W3t=nu(),{safeRe:Bc,t:Ku,comparatorTrimReplace:q3t,tildeTrimReplace:H3t,caretTrimReplace:Y3t}=JI(),{FLAG_INCLUDE_PRERELEASE:X3t,FLAG_LOOSE:K3t}=V3(),nLe=t=>t.value==="<0.0.0-0",Z3t=t=>t.value==="",oLe=(t,r)=>{let n=!0,o=t.slice(),i=o.pop();for(;n&&o.length;)n=o.every(s=>i.intersects(s,r)),i=o.pop();return n},Q3t=(t,r)=>(Ai("comp",t,r),t=tPt(t,r),Ai("caret",t),t=J3t(t,r),Ai("tildes",t),t=nPt(t,r),Ai("xrange",t),t=iPt(t,r),Ai("stars",t),t),Zu=t=>!t||t.toLowerCase()==="x"||t==="*",J3t=(t,r)=>t.trim().split(/\s+/).map(n=>ePt(n,r)).join(" "),ePt=(t,r)=>{let n=r.loose?Bc[Ku.TILDELOOSE]:Bc[Ku.TILDE];return t.replace(n,(o,i,s,a,l)=>{Ai("tilde",t,o,i,s,a,l);let u;return Zu(i)?u="":Zu(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Zu(a)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:l?(Ai("replaceTilde pr",l),u=`>=${i}.${s}.${a}-${l} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,Ai("tilde return",u),u})},tPt=(t,r)=>t.trim().split(/\s+/).map(n=>rPt(n,r)).join(" "),rPt=(t,r)=>{Ai("caret",t,r);let n=r.loose?Bc[Ku.CARETLOOSE]:Bc[Ku.CARET],o=r.includePrerelease?"-0":"";return t.replace(n,(i,s,a,l,u)=>{Ai("caret",t,i,s,a,l,u);let c;return Zu(s)?c="":Zu(a)?c=`>=${s}.0.0${o} <${+s+1}.0.0-0`:Zu(l)?s==="0"?c=`>=${s}.${a}.0${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.0${o} <${+s+1}.0.0-0`:u?(Ai("replaceCaret pr",u),s==="0"?a==="0"?c=`>=${s}.${a}.${l}-${u} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}-${u} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l}-${u} <${+s+1}.0.0-0`):(Ai("no pr"),s==="0"?a==="0"?c=`>=${s}.${a}.${l}${o} <${s}.${a}.${+l+1}-0`:c=`>=${s}.${a}.${l}${o} <${s}.${+a+1}.0-0`:c=`>=${s}.${a}.${l} <${+s+1}.0.0-0`),Ai("caret return",c),c})},nPt=(t,r)=>(Ai("replaceXRanges",t,r),t.split(/\s+/).map(n=>oPt(n,r)).join(" ")),oPt=(t,r)=>{t=t.trim();let n=r.loose?Bc[Ku.XRANGELOOSE]:Bc[Ku.XRANGE];return t.replace(n,(o,i,s,a,l,u)=>{Ai("xRange",t,o,i,s,a,l,u);let c=Zu(s),f=c||Zu(a),d=f||Zu(l),p=d;return i==="="&&p&&(i=""),u=r.includePrerelease?"-0":"",c?i===">"||i==="<"?o="<0.0.0-0":o="*":i&&p?(f&&(a=0),l=0,i===">"?(i=">=",f?(s=+s+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",f?s=+s+1:a=+a+1),i==="<"&&(u="-0"),o=`${i+s}.${a}.${l}${u}`):f?o=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(o=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),Ai("xRange return",o),o})},iPt=(t,r)=>(Ai("replaceStars",t,r),t.trim().replace(Bc[Ku.STAR],"")),sPt=(t,r)=>(Ai("replaceGTE0",t,r),t.trim().replace(Bc[r.includePrerelease?Ku.GTE0PRE:Ku.GTE0],"")),aPt=t=>(r,n,o,i,s,a,l,u,c,f,d,p)=>(Zu(o)?n="":Zu(i)?n=`>=${o}.0.0${t?"-0":""}`:Zu(s)?n=`>=${o}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Zu(c)?u="":Zu(f)?u=`<${+c+1}.0.0-0`:Zu(d)?u=`<${c}.${+f+1}.0-0`:p?u=`<=${c}.${f}.${d}-${p}`:t?u=`<${c}.${f}.${+d+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),lPt=(t,r,n)=>{for(let o=0;o<t.length;o++)if(!t[o].test(r))return!1;if(r.prerelease.length&&!n.includePrerelease){for(let o=0;o<t.length;o++)if(Ai(t[o].semver),t[o].semver!==jse.ANY&&t[o].semver.prerelease.length>0){let i=t[o].semver;if(i.major===r.major&&i.minor===r.minor&&i.patch===r.patch)return!0}return!1}return!0}});var q3=gt((A_n,fLe)=>{"use strict";var H3=Symbol("SemVer ANY"),$se=class t{static get ANY(){return H3}constructor(r,n){if(n=sLe(n),r instanceof t){if(r.loose===!!n.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),Bse("comparator",r,n),this.options=n,this.loose=!!n.loose,this.parse(r),this.semver===H3?this.value="":this.value=this.operator+this.semver.version,Bse("comp",this)}parse(r){let n=this.options.loose?aLe[lLe.COMPARATORLOOSE]:aLe[lLe.COMPARATOR],o=r.match(n);if(!o)throw new TypeError(`Invalid comparator: ${r}`);this.operator=o[1]!==void 0?o[1]:"",this.operator==="="&&(this.operator=""),o[2]?this.semver=new uLe(o[2],this.options.loose):this.semver=H3}toString(){return this.value}test(r){if(Bse("Comparator.test",r,this.options.loose),this.semver===H3||r===H3)return!0;if(typeof r=="string")try{r=new uLe(r,this.options)}catch{return!1}return Lse(r,this.operator,this.semver,this.options)}intersects(r,n){if(!(r instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new cLe(r.value,n).test(this.value):r.operator===""?r.value===""?!0:new cLe(this.value,n).test(r.semver):(n=sLe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||Lse(this.semver,"<",r.semver,n)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||Lse(this.semver,">",r.semver,n)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};fLe.exports=$se;var sLe=p7(),{safeRe:aLe,t:lLe}=JI(),Lse=Rse(),Bse=G3(),uLe=nu(),cLe=sp()});var Y3=gt((k_n,dLe)=>{"use strict";var uPt=sp(),cPt=(t,r,n)=>{try{r=new uPt(r,n)}catch{return!1}return r.test(t)};dLe.exports=cPt});var hLe=gt((I_n,pLe)=>{"use strict";var fPt=sp(),dPt=(t,r)=>new fPt(t,r).set.map(n=>n.map(o=>o.value).join(" ").trim().split(" "));pLe.exports=dPt});var gLe=gt((D_n,mLe)=>{"use strict";var pPt=nu(),hPt=sp(),mPt=(t,r,n)=>{let o=null,i=null,s=null;try{s=new hPt(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===-1)&&(o=a,i=new pPt(o,n))}),o};mLe.exports=mPt});var bLe=gt((N_n,yLe)=>{"use strict";var gPt=nu(),yPt=sp(),bPt=(t,r,n)=>{let o=null,i=null,s=null;try{s=new yPt(r,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!o||i.compare(a)===1)&&(o=a,i=new gPt(o,n))}),o};yLe.exports=bPt});var wLe=gt((O_n,vLe)=>{"use strict";var zse=nu(),xPt=sp(),xLe=W3(),vPt=(t,r)=>{t=new xPt(t,r);let n=new zse("0.0.0");if(t.test(n)||(n=new zse("0.0.0-0"),t.test(n)))return n;n=null;for(let o=0;o<t.set.length;++o){let i=t.set[o],s=null;i.forEach(a=>{let l=new zse(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||xLe(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||xLe(n,s))&&(n=s)}return n&&t.test(n)?n:null};vLe.exports=vPt});var SLe=gt((F_n,_Le)=>{"use strict";var wPt=sp(),_Pt=(t,r)=>{try{return new wPt(t,r).range||"*"}catch{return null}};_Le.exports=_Pt});var _7=gt((R_n,ALe)=>{"use strict";var SPt=nu(),TLe=q3(),{ANY:CPt}=TLe,EPt=sp(),TPt=Y3(),CLe=W3(),ELe=y7(),APt=x7(),kPt=b7(),IPt=(t,r,n,o)=>{t=new SPt(t,o),r=new EPt(r,o);let i,s,a,l,u;switch(n){case">":i=CLe,s=APt,a=ELe,l=">",u=">=";break;case"<":i=ELe,s=kPt,a=CLe,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(TPt(t,r,o))return!1;for(let c=0;c<r.set.length;++c){let f=r.set[c],d=null,p=null;if(f.forEach(h=>{h.semver===CPt&&(h=new TLe(">=0.0.0")),d=d||h,p=p||h,i(h.semver,d.semver,o)?d=h:a(h.semver,p.semver,o)&&(p=h)}),d.operator===l||d.operator===u||(!p.operator||p.operator===l)&&s(t,p.semver))return!1;if(p.operator===u&&a(t,p.semver))return!1}return!0};ALe.exports=IPt});var ILe=gt((M_n,kLe)=>{"use strict";var DPt=_7(),NPt=(t,r,n)=>DPt(t,r,">",n);kLe.exports=NPt});var NLe=gt((P_n,DLe)=>{"use strict";var OPt=_7(),FPt=(t,r,n)=>OPt(t,r,"<",n);DLe.exports=FPt});var RLe=gt((j_n,FLe)=>{"use strict";var OLe=sp(),RPt=(t,r,n)=>(t=new OLe(t,n),r=new OLe(r,n),t.intersects(r,n));FLe.exports=RPt});var PLe=gt((L_n,MLe)=>{"use strict";var MPt=Y3(),PPt=ip();MLe.exports=(t,r,n)=>{let o=[],i=null,s=null,a=t.sort((f,d)=>PPt(f,d,n));for(let f of a)MPt(f,r,n)?(s=f,i||(i=f)):(s&&o.push([i,s]),s=null,i=null);i&&o.push([i,null]);let l=[];for(let[f,d]of o)f===d?l.push(f):!d&&f===a[0]?l.push("*"):d?f===a[0]?l.push(`<=${d}`):l.push(`${f} - ${d}`):l.push(`>=${f}`);let u=l.join(" || "),c=typeof r.raw=="string"?r.raw:String(r);return u.length<c.length?u:r}});var ULe=gt((B_n,zLe)=>{"use strict";var jLe=sp(),Vse=q3(),{ANY:Use}=Vse,X3=Y3(),Gse=ip(),jPt=(t,r,n={})=>{if(t===r)return!0;t=new jLe(t,n),r=new jLe(r,n);let o=!1;e:for(let i of t.set){for(let s of r.set){let a=BPt(i,s,n);if(o=o||a!==null,a)continue e}if(o)return!1}return!0},LPt=[new Vse(">=0.0.0-0")],LLe=[new Vse(">=0.0.0")],BPt=(t,r,n)=>{if(t===r)return!0;if(t.length===1&&t[0].semver===Use){if(r.length===1&&r[0].semver===Use)return!0;n.includePrerelease?t=LPt:t=LLe}if(r.length===1&&r[0].semver===Use){if(n.includePrerelease)return!0;r=LLe}let o=new Set,i,s;for(let h of t)h.operator===">"||h.operator===">="?i=BLe(i,h,n):h.operator==="<"||h.operator==="<="?s=$Le(s,h,n):o.add(h.semver);if(o.size>1)return null;let a;if(i&&s){if(a=Gse(i.semver,s.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let h of o){if(i&&!X3(h,String(i),n)||s&&!X3(h,String(s),n))return null;for(let m of r)if(!X3(h,String(m),n))return!1;return!0}let l,u,c,f,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let h of r){if(f=f||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",i){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator===">"||h.operator===">="){if(l=BLe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!X3(i.semver,String(h),n))return!1}if(s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(u=$Le(s,h,n),u===h&&u!==s)return!1}else if(s.operator==="<="&&!X3(s.semver,String(h),n))return!1}if(!h.operator&&(s||i)&&a!==0)return!1}return!(i&&c&&!s&&a!==0||s&&f&&!i&&a!==0||p||d)},BLe=(t,r,n)=>{if(!t)return r;let o=Gse(t.semver,r.semver,n);return o>0?t:o<0||r.operator===">"&&t.operator===">="?r:t},$Le=(t,r,n)=>{if(!t)return r;let o=Gse(t.semver,r.semver,n);return o<0?t:o>0||r.operator==="<"&&t.operator==="<="?r:t};zLe.exports=jPt});var qLe=gt(($_n,WLe)=>{"use strict";var Wse=JI(),VLe=V3(),$Pt=nu(),GLe=Dse(),zPt=HC(),UPt=gje(),VPt=bje(),GPt=wje(),WPt=Cje(),qPt=Tje(),HPt=kje(),YPt=Dje(),XPt=Oje(),KPt=ip(),ZPt=Pje(),QPt=Lje(),JPt=g7(),ejt=Uje(),tjt=Gje(),rjt=W3(),njt=y7(),ojt=Ose(),ijt=Fse(),sjt=b7(),ajt=x7(),ljt=Rse(),ujt=Jje(),cjt=q3(),fjt=sp(),djt=Y3(),pjt=hLe(),hjt=gLe(),mjt=bLe(),gjt=wLe(),yjt=SLe(),bjt=_7(),xjt=ILe(),vjt=NLe(),wjt=RLe(),_jt=PLe(),Sjt=ULe();WLe.exports={parse:zPt,valid:UPt,clean:VPt,inc:GPt,diff:WPt,major:qPt,minor:HPt,patch:YPt,prerelease:XPt,compare:KPt,rcompare:ZPt,compareLoose:QPt,compareBuild:JPt,sort:ejt,rsort:tjt,gt:rjt,lt:njt,eq:ojt,neq:ijt,gte:sjt,lte:ajt,cmp:ljt,coerce:ujt,Comparator:cjt,Range:fjt,satisfies:djt,toComparators:pjt,maxSatisfying:hjt,minSatisfying:mjt,minVersion:gjt,validRange:yjt,outside:bjt,gtr:xjt,ltr:vjt,intersects:wjt,simplifyRange:_jt,subset:Sjt,SemVer:$Pt,re:Wse.re,src:Wse.src,tokens:Wse.t,SEMVER_SPEC_VERSION:VLe.SEMVER_SPEC_VERSION,RELEASE_TYPES:VLe.RELEASE_TYPES,compareIdentifiers:GLe.compareIdentifiers,rcompareIdentifiers:GLe.rcompareIdentifiers}});function Jf(t,r,n){return t.fields=r||[],t.fname=n,t}function ki(t){return t==null?null:t.fname}function Sa(t){return t==null?null:t.fields}function YLe(t){return t.length===1?Cjt(t[0]):Ejt(t)}function pt(t){throw Error(t)}function Z3(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||pt("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&pt("Access path missing closing bracket: "+t),o&&pt("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Ih(t,r,n){let o=Z3(t);return t=o.length===1?o[0]:t,Jf((n&&n.get||YLe)(o),[t],r||t)}function S7(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function Ajt(t,r){let n=t||XLe;return{level(o){return arguments.length?(n=+o,this):n},error(){return n>=KLe&&S7(r||"error","ERROR",arguments),this},warn(){return n>=ZLe&&S7(r||"warn","WARN",arguments),this},info(){return n>=QLe&&S7(r||"log","INFO",arguments),this},debug(){return n>=JLe&&S7(r||"log","DEBUG",arguments),this}}}function un(t){return t===Object(t)}function tD(...t){return t.reduce((r,n)=>{for(let o in n)if(o==="signals")r.signals=kjt(r.signals,n.signals);else{let i=o==="legend"?{layout:1}:o==="style"?!0:null;Q3(r,o,n[o],i)}return r},{})}function Q3(t,r,n,o){if(!HLe(r))return;let i,s;if(un(n)&&!Hr(n)){s=un(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?Q3(s,i,n[i]):HLe(i)&&(s[i]=n[i])}else t[r]=n}function kjt(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}function zn(t){return t[t.length-1]}function Nh(t){return t==null||t===""?null:+t}function T7(t,r,n,o){let i=n(t[0]),s=n(zn(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function Ijt(t,r){return T7(t,r,Nh,Qu)}function Djt(t,r){var n=Math.sign(t[0]);return T7(t,r,t4e(n),e4e(n))}function Njt(t,r,n){return T7(t,r,E7(n),E7(1/n))}function Ojt(t,r,n){return T7(t,r,r4e(n),n4e(n))}function A7(t,r,n,o,i){let s=o(t[0]),a=o(zn(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function qse(t,r,n){return A7(t,r,n,Nh,Qu)}function Hse(t,r,n){let o=Math.sign(t[0]);return A7(t,r,n,t4e(o),e4e(o))}function k7(t,r,n,o){return A7(t,r,n,E7(o),E7(1/o))}function Yse(t,r,n,o){return A7(t,r,n,r4e(o),n4e(o))}function Fjt(t){return 1+~~(new Date(t).getMonth()/3)}function Rjt(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Lr(t){return t!=null?Hr(t)?t:[t]:[]}function Mjt(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function In(t){return typeof t=="function"}function Xse(t,r,n){n=n||{},r=Lr(r)||[];let o=[],i=[],s={},a=n.comparator||jjt;return Lr(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===Pjt?-1:1),i.push(l=In(l)?l:Ih(l,null,n)),(Sa(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:Jf(a(i,o),Object.keys(s))}function Ga(t){return In(t)?t:()=>t}function Kse(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function an(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function Oh(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Zse(t,r){let n=t.length,o=-1,i,s,a,l,u;if(r==null){for(;++o<n;)if(s=t[o],s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=t[o],s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}else{for(;++o<n;)if(s=r(t[o],o,t),s!=null&&s>=s){i=a=s;break}if(o===n)return[-1,-1];for(l=u=o;++o<n;)s=r(t[o],o,t),s!=null&&(i>s&&(i=s,l=o),a<s&&(a=s,u=o))}return[l,u]}function Rr(t,r){return $jt.call(t,r)}function bw(t){let r={},n;function o(s){return Rr(r,s)&&r[s]!==C7}let i={size:0,empty:0,object:r,has:o,get(s){return o(s)?r[s]:void 0},set(s,a){return o(s)||(++i.size,r[s]===C7&&--i.empty),r[s]=a,this},delete(s){return o(s)&&(--i.size,++i.empty,r[s]=C7),this},clear(){i.size=i.empty=0,i.object=r={}},test(s){return arguments.length?(n=s,i):n},clean(){let s={},a=0;for(let l in r){let u=r[l];u!==C7&&(!n||!n(u))&&(s[l]=u,++a)}i.size=a,i.empty=0,i.object=r=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function zjt(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=zn(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function Dt(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),an(o,n)}function Ujt(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function Qse(t){return typeof t=="boolean"}function eP(t){return Object.prototype.toString.call(t)==="[object Date]"}function Jse(t){return t&&In(t[Symbol.iterator])}function k0(t){return typeof t=="number"}function Vjt(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Zn(t){return typeof t=="string"}function eae(t,r,n){t&&(t=r?Lr(t).map(l=>l.replace(/\\(.)/g,"$1")):Lr(t));let o=t&&t.length,i=n&&n.get||YLe,s=l=>i(r?[l]:Z3(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return Jf(a,t,"key")}function Gjt(t,r){let n=t[0],o=zn(t),i=+r;return i?i===1?o:n+i*(o-n):n}function tae(t){t=+t||Wjt;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>Rr(r,a)||Rr(n,a),get:a=>Rr(r,a)?r[a]:Rr(n,a)?s(a,n[a]):void 0,set:(a,l)=>Rr(r,a)?r[a]=l:s(a,l)}}function rae(t,r,n,o){let i=r.length,s=n.length;if(!s)return r;if(!i)return n;let a=o||new r.constructor(i+s),l=0,u=0,c=0;for(;l<i&&u<s;++c)a[c]=t(r[l],n[u])>0?n[u++]:r[l++];for(;l<i;++l,++c)a[c]=r[l];for(;u<s;++u,++c)a[c]=n[u];return a}function K3(t,r){let n="";for(;--r>=0;)n+=t;return n}function qjt(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?K3(i,a)+s:o==="center"?K3(i,~~(a/2))+s+K3(i,Math.ceil(a/2)):s+K3(i,a)}function YC(t){return t&&zn(t)-t[0]||0}function Br(t){return Hr(t)?"["+t.map(Br)+"]":un(t)||Zn(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function nae(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function oae(t,r){return r=r||Hjt,t==null||t===""?null:r(t)}function iae(t){return t==null||t===""?null:t+""}function ou(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function Yjt(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}function Xjt(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var Cjt,Ejt,Tjt,Qu,Dh,T0,A0,Dx,XLe,KLe,ZLe,QLe,JLe,Hr,HLe,e4e,t4e,r4e,n4e,E7,Pjt,J3,jjt,Ljt,Bjt,$jt,C7,Wjt,Hjt,Os=D(()=>{"use strict";Cjt=t=>function(r){return r[t]},Ejt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};Tjt=Ih("id"),Qu=Jf(t=>t,[],"identity"),Dh=Jf(()=>0,[],"zero"),T0=Jf(()=>1,[],"one"),A0=Jf(()=>!0,[],"true"),Dx=Jf(()=>!1,[],"false");XLe=0,KLe=1,ZLe=2,QLe=3,JLe=4;Hr=Array.isArray;HLe=t=>t!=="__proto__";e4e=t=>r=>t*Math.exp(r),t4e=t=>r=>Math.log(t*r),r4e=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),n4e=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,E7=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);Pjt="descending";J3=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),jjt=(t,r)=>t.length===1?Ljt(t[0],r[0]):Bjt(t,r,t.length),Ljt=(t,r)=>function(n,o){return J3(t(n),t(o))*r},Bjt=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=J3(s(o),s(i));return a*r[l]});$jt=Object.prototype.hasOwnProperty;C7={};Wjt=1e4;Hjt=t=>k0(t)||eP(t)?t:Date.parse(t)});function rD(t,r,n){return t.fields=r||[],t.fname=n,t}function Kjt(t){return t.length===1?Zjt(t[0]):Qjt(t)}function Zs(t){throw Error(t)}function Jjt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||Zs("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&Zs("Access path missing closing bracket: "+t),o&&Zs("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function sae(t,r,n){let o=Jjt(t);return t=o.length===1?o[0]:t,rD((n&&n.get||Kjt)(o),[t],r||t)}function rLt(t,r,n){let o=[r].concat([].slice.call(n));console[t].apply(console,o)}function o4e(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rLt,o=t||nLt;return{level(i){return arguments.length?(o=+i,this):o},error(){return o>=aae&&n(r||"error","ERROR",arguments),this},warn(){return o>=oLt&&n(r||"warn","WARN",arguments),this},info(){return o>=iLt&&n(r||"log","INFO",arguments),this},debug(){return o>=sLt&&n(r||"log","DEBUG",arguments),this}}}function rP(t){return t===Object(t)}function lae(t){return t==null||t===""?null:+t}function oD(t){return t!=null?ap(t)?t:[t]:[]}function ed(t){return typeof t=="function"}function nP(t){return ed(t)?t:()=>t}function i4e(t,r){let n;return o=>{n&&clearTimeout(n),n=setTimeout(()=>(r(o),n=null),t)}}function I0(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function iD(t,r){return aLt.call(t,r)}function uae(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),I0(o,n)}function lLt(t){return Object.prototype.toString.call(t)==="[object Date]"}function s4e(t){return t&&ed(t[Symbol.iterator])}function uLt(t){return typeof t=="number"}function D7(t){return typeof t=="string"}function N7(t){return ap(t)?"["+t.map(N7)+"]":rP(t)||D7(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function a4e(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function l4e(t,r){return r=r||cLt,t==null||t===""?null:r(t)}function u4e(t){return t==null||t===""?null:t+""}function xw(t,r,n){if(t)if(r){let o=t.length;for(let i=0;i<o;++i){let s=r(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var Zjt,Qjt,tP,nD,eLt,tLt,I7,U_n,nLt,aae,oLt,iLt,sLt,ap,aLt,cLt,oP=D(()=>{"use strict";Zjt=t=>function(r){return r[t]},Qjt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};tP=sae("id"),nD=rD(t=>t,[],"identity"),eLt=rD(()=>0,[],"zero"),tLt=rD(()=>1,[],"one"),I7=rD(()=>!0,[],"true"),U_n=rD(()=>!1,[],"false");nLt=0,aae=1,oLt=2,iLt=3,sLt=4;ap=Array.isArray;aLt=Object.prototype.hasOwnProperty;cLt=t=>uLt(t)||lLt(t)?t:Date.parse(t)});function d4e(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function fLt(t,r){var n=d4e(t);return function(o,i){return r(n(o),i,t)}}function f4e(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function $c(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function dLt(t){return t<0?"-"+$c(-t,6):t>9999?"+"+$c(t,6):$c(t,4)}function pLt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":dLt(t.getUTCFullYear(),4)+"-"+$c(t.getUTCMonth()+1,2)+"-"+$c(t.getUTCDate(),2)+(i?"T"+$c(r,2)+":"+$c(n,2)+":"+$c(o,2)+"."+$c(i,3)+"Z":o?"T"+$c(r,2)+":"+$c(n,2)+":"+$c(o,2)+"Z":n||r?"T"+$c(r,2)+":"+$c(n,2)+"Z":"")}function pae(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?fLt(y,p):d4e(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===iP&&--m,d.charCodeAt(m-1)===dae&&--m;function w(){if(x)return cae;if(v)return v=!1,c4e;var C,S=g,E;if(d.charCodeAt(S)===fae){for(;g++<m&&d.charCodeAt(g)!==fae||d.charCodeAt(++g)===fae;);return(C=g)>=m?x=!0:(E=d.charCodeAt(g++))===iP?v=!0:E===dae&&(v=!0,d.charCodeAt(g)===iP&&++g),d.slice(S+1,C-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(C=g++))===iP)v=!0;else if(E===dae)v=!0,d.charCodeAt(g)===iP&&++g;else if(E!==n)continue;return d.slice(S,C)}return x=!0,d.slice(S,m)}for(;(b=w())!==cae;){for(var _=[];b!==c4e&&b!==cae;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=f4e(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=f4e(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?pLt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var c4e,cae,fae,iP,dae,p4e=D(()=>{"use strict";c4e={},cae={},fae=34,iP=10,dae=13});var h4e=D(()=>{"use strict";p4e()});function hae(t){return t}var mae=D(()=>{"use strict"});function O7(t){if(t==null)return hae;var r,n,o=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(l,u){u||(r=n=0);var c=2,f=l.length,d=new Array(f);for(d[0]=(r+=l[0])*o+s,d[1]=(n+=l[1])*i+a;c<f;)d[c]=l[c],++c;return d}}var F7=D(()=>{"use strict";mae()});var gae=D(()=>{"use strict";F7()});function m4e(t,r){for(var n,o=t.length,i=o-r;i<--o;)n=t[i],t[i++]=t[o],t[o]=n}var g4e=D(()=>{"use strict"});function XC(t,r){return typeof r=="string"&&(r=t.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(n){return y4e(t,n)})}:y4e(t,r)}function y4e(t,r){var n=r.id,o=r.bbox,i=r.properties==null?{}:r.properties,s=R7(t,r);return n==null&&o==null?{type:"Feature",properties:i,geometry:s}:o==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:o,properties:i,geometry:s}}function R7(t,r){var n=O7(t.transform),o=t.arcs;function i(f,d){d.length&&d.pop();for(var p=o[f<0?~f:f],h=0,m=p.length;h<m;++h)d.push(n(p[h],h));f<0&&m4e(d,m)}function s(f){return n(f)}function a(f){for(var d=[],p=0,h=f.length;p<h;++p)i(f[p],d);return d.length<2&&d.push(d[0]),d}function l(f){for(var d=a(f);d.length<4;)d.push(d[0]);return d}function u(f){return f.map(l)}function c(f){var d=f.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:f.geometries.map(c)};case"Point":p=s(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(s);break;case"LineString":p=a(f.arcs);break;case"MultiLineString":p=f.arcs.map(a);break;case"Polygon":p=u(f.arcs);break;case"MultiPolygon":p=f.arcs.map(u);break;default:return null}return{type:d,coordinates:p}}return c(r)}var M7=D(()=>{"use strict";g4e();F7()});function yae(t,r){var n={},o={},i={},s=[],a=-1;r.forEach(function(c,f){var d=t.arcs[c<0?~c:c],p;d.length<3&&!d[1][0]&&!d[1][1]&&(p=r[++a],r[a]=c,r[f]=p)}),r.forEach(function(c){var f=l(c),d=f[0],p=f[1],h,m;if(h=i[d])if(delete i[h.end],h.push(c),h.end=p,m=o[p]){delete o[m.start];var g=m===h?h:h.concat(m);o[g.start=h.start]=i[g.end=m.end]=g}else o[h.start]=i[h.end]=h;else if(h=o[p])if(delete o[h.start],h.unshift(c),h.start=d,m=i[d]){delete i[m.end];var y=m===h?h:m.concat(h);o[y.start=m.start]=i[y.end=h.end]=y}else o[h.start]=i[h.end]=h;else h=[c],o[h.start=d]=i[h.end=p]=h});function l(c){var f=t.arcs[c<0?~c:c],d=f[0],p;return t.transform?(p=[0,0],f.forEach(function(h){p[0]+=h[0],p[1]+=h[1]})):p=f[f.length-1],c<0?[p,d]:[d,p]}function u(c,f){for(var d in c){var p=c[d];delete f[p.start],delete p.start,delete p.end,p.forEach(function(h){n[h<0?~h:h]=1}),s.push(p)}}return u(i,o),u(o,i),r.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}var bae=D(()=>{"use strict"});function KC(t){return R7(t,b4e.apply(this,arguments))}function b4e(t,r,n){var o,i,s;if(arguments.length>1)o=hLt(t,r,n);else for(i=0,o=new Array(s=t.arcs.length);i<s;++i)o[i]=i;return{type:"MultiLineString",arcs:yae(t,o)}}function hLt(t,r,n){var o=[],i=[],s;function a(d){var p=d<0?~d:d;(i[p]||(i[p]=[])).push({i:d,g:s})}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){d.forEach(u)}function f(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(f);break;case"LineString":l(d.arcs);break;case"MultiLineString":case"Polygon":u(d.arcs);break;case"MultiPolygon":c(d.arcs);break}}return f(r),i.forEach(n==null?function(d){o.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&o.push(d[0].i)}),o}var x4e=D(()=>{"use strict";M7();bae()});var v4e=D(()=>{"use strict";M7();bae()});var w4e=D(()=>{"use strict"});var _4e=D(()=>{"use strict";w4e()});var xae=D(()=>{"use strict";mae()});var S4e=D(()=>{"use strict";gae();xae()});var P7=D(()=>{"use strict";gae();M7();x4e();v4e();_4e();S4e();F7();xae()});function vae({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):n}function C4e({_intern:t,_key:r},n){let o=r(n);return t.has(o)?t.get(o):(t.set(o,n),n)}function E4e({_intern:t,_key:r},n){let o=r(n);return t.has(o)&&(n=t.get(n),t.delete(o)),n}function T4e(t){return t!==null&&typeof t=="object"?t.valueOf():t}var D0,N0,sP=D(()=>{"use strict";D0=class extends Map{constructor(r,n=T4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let[o,i]of r)this.set(o,i)}get(r){return super.get(vae(this,r))}has(r){return super.has(vae(this,r))}set(r,n){return super.set(C4e(this,r),n)}delete(r){return super.delete(E4e(this,r))}},N0=class extends Set{constructor(r,n=T4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let o of r)this.add(o)}has(r){return super.has(vae(this,r))}add(r){return super.add(C4e(this,r))}delete(r){return super.delete(E4e(this,r))}}});function A4e(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=yLt?10:s>=bLt?5:s>=xLt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?A4e(t,r,n*2):[l,u,c]}function wae(t,r,n){return r=+r,t=+t,n=+n,A4e(t,r,n)[2]}function _ae(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?wae(r,t,n):wae(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var yLt,bLt,xLt,k4e=D(()=>{"use strict";yLt=Math.sqrt(50),bLt=Math.sqrt(10),xLt=Math.sqrt(2)});var I4e=D(()=>{"use strict";k4e()});function D4e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ZC(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var aP=D(()=>{"use strict"});function O0(t){return t=ZC(Math.abs(t)),t?t[1]:NaN}var lP=D(()=>{"use strict";aP()});function N4e(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var O4e=D(()=>{"use strict"});function F4e(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var R4e=D(()=>{"use strict"});function Nx(t){if(!(r=vLt.exec(t)))throw new Error("invalid format: "+t);var r;return new j7({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function j7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var vLt,Sae=D(()=>{"use strict";vLt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Nx.prototype=j7.prototype;j7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function M4e(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var P4e=D(()=>{"use strict"});function j4e(t,r){var n=ZC(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(Cae=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+ZC(t,Math.max(0,r+s-1))[0]}var Cae,Eae=D(()=>{"use strict";aP()});function Tae(t,r){var n=ZC(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var L4e=D(()=>{"use strict";aP()});var Aae,B4e=D(()=>{"use strict";aP();Eae();L4e();Aae={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:D4e,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>Tae(t*100,r),r:Tae,s:j4e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function kae(t){return t}var $4e=D(()=>{"use strict"});function uP(t){var r=t.grouping===void 0||t.thousands===void 0?kae:N4e(z4e.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?kae:F4e(z4e.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Nx(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):Aae[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=g==="$"?o:/[%p]/.test(_)?a:"",E=Aae[_],A=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(k){var R=C,I=S,L,j,M;if(_==="c")I=E(k)+I,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=M4e(k)),V&&+k==0&&m!=="+"&&(V=!1),R=(V?m==="("?m:l:m==="-"||m==="("?"":m)+R,I=(_==="s"?U4e[8+Cae/3]:"")+I+(V&&m==="("?")":""),A){for(L=-1,j=k.length;++L<j;)if(M=k.charCodeAt(L),48>M||M>57){I=(M===46?i+k.slice(L+1):k.slice(L))+I,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=R.length+k.length+I.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-I.length:1/0),U=""),h){case"<":k=R+k+I+U;break;case"=":k=R+U+k+I;break;case"^":k=U.slice(0,G=U.length>>1)+R+k+I+U.slice(G);break;default:k=U+R+k+I;break}return s(k)}return N.toString=function(){return d+""},N}function f(d,p){var h=c((d=Nx(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(O0(p)/3)))*3,g=Math.pow(10,-m),y=U4e[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var z4e,U4e,Iae=D(()=>{"use strict";lP();O4e();R4e();Sae();P4e();B4e();Eae();$4e();z4e=Array.prototype.map,U4e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function Dae(t){return L7=uP(t),B7=L7.format,$7=L7.formatPrefix,L7}var L7,B7,$7,V4e=D(()=>{"use strict";Iae();Dae({thousands:",",grouping:[3],currency:["$",""]})});function Nae(t){return Math.max(0,-O0(Math.abs(t)))}var G4e=D(()=>{"use strict";lP()});function Oae(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(O0(r)/3)))*3-O0(Math.abs(t)))}var W4e=D(()=>{"use strict";lP()});function Fae(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,O0(r)-O0(t))+1}var q4e=D(()=>{"use strict";lP()});var H4e=D(()=>{"use strict";V4e();Iae();Sae();G4e();W4e();q4e()});function ii(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>ii(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(Rae.setTime(+s),Mae.setTime(+a),t(Rae),t(Mae),Math.floor(n(Rae,Mae))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var Rae,Mae,Ox=D(()=>{"use strict";Rae=new Date,Mae=new Date});var Fx,Y4e,X4e=D(()=>{"use strict";Ox();Fx=ii(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Fx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ii(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Fx);Y4e=Fx.range});var QC,K4e,Z4e=D(()=>{"use strict";Ox();QC=ii(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),K4e=QC.range});var z7,wLt,U7,_Lt,Q4e=D(()=>{"use strict";Ox();z7=ii(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),wLt=z7.range,U7=ii(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),_Lt=U7.range});var V7,SLt,G7,CLt,J4e=D(()=>{"use strict";Ox();V7=ii(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),SLt=V7.range,G7=ii(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),CLt=G7.range});var F0,ELt,R0,TLt,e5e,ALt,t5e=D(()=>{"use strict";Ox();F0=ii(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),ELt=F0.range,R0=ii(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),TLt=R0.range,e5e=ii(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),ALt=e5e.range});function JC(t){return ii(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function eE(t){return ii(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var vw,aD,r5e,n5e,ww,o5e,i5e,s5e,ILt,DLt,NLt,OLt,FLt,RLt,_w,lD,a5e,l5e,Sw,u5e,c5e,f5e,MLt,PLt,jLt,LLt,BLt,$Lt,d5e=D(()=>{"use strict";Ox();vw=JC(0),aD=JC(1),r5e=JC(2),n5e=JC(3),ww=JC(4),o5e=JC(5),i5e=JC(6),s5e=vw.range,ILt=aD.range,DLt=r5e.range,NLt=n5e.range,OLt=ww.range,FLt=o5e.range,RLt=i5e.range;_w=eE(0),lD=eE(1),a5e=eE(2),l5e=eE(3),Sw=eE(4),u5e=eE(5),c5e=eE(6),f5e=_w.range,MLt=lD.range,PLt=a5e.range,jLt=l5e.range,LLt=Sw.range,BLt=u5e.range,$Lt=c5e.range});var cP,zLt,fP,ULt,p5e=D(()=>{"use strict";Ox();cP=ii(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),zLt=cP.range,fP=ii(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),ULt=fP.range});var Fh,VLt,Rh,GLt,h5e=D(()=>{"use strict";Ox();Fh=ii(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ii(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});VLt=Fh.range,Rh=ii(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ii(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});GLt=Rh.range});var Bae=D(()=>{"use strict";X4e();Z4e();Q4e();J4e();t5e();d5e();p5e();h5e()});function Uae(t){return tE.setFullYear(t),tE.setMonth(0),tE.setDate(1),tE.setHours(0,0,0,0),tE}function qLt(t){return F0.count(Uae(t.getFullYear())-1,t)}function m5e(t){return vw.count(Uae(t.getFullYear())-1,t)}function $ae(t){return Uae(t).getDay()}function HLt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return R0.count(r-1,t)}function g5e(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return _w.count(r-1,t)}function zae(t){return tE.setTime(Date.UTC(t,0,1)),tE.getUTCDay()}function uD(t,r,n){return r+t*7-(n+6)%7}function x5e(t){return YLt[t]}function v5e(t){return XLt[t]}var Ju,Lh,td,zc,Mh,M0,cD,Ph,jh,P0,Rx,WLt,JSn,eCn,tE,tCn,rCn,nCn,oCn,YLt,XLt,dP,pP,hP,W7,KLt,y5e,ZLt,QLt,mP,gP,yP,JLt,e4t,b5e,t4t,iCn,w5e=D(()=>{"use strict";oP();Bae();Ju="year",Lh="quarter",td="month",zc="week",Mh="date",M0="day",cD="dayofyear",Ph="hours",jh="minutes",P0="seconds",Rx="milliseconds",WLt=[Ju,Lh,td,zc,Mh,M0,cD,Ph,jh,P0,Rx],JSn=WLt.reduce((t,r,n)=>(t[r]=1+n,t),{}),eCn={[Ju]:"%Y ",[Lh]:"Q%q ",[td]:"%b ",[Mh]:"%d ",[zc]:"W%U ",[M0]:"%a ",[cD]:"%j ",[Ph]:"%H:00",[jh]:"00:%M",[P0]:":%S",[Rx]:".%L",[`${Ju}-${td}`]:"%Y-%m ",[`${Ju}-${td}-${Mh}`]:"%Y-%m-%d ",[`${Ph}-${jh}`]:"%H:%M"},tE=new Date;tCn={[Ju]:t=>t.getFullYear(),[Lh]:t=>Math.floor(t.getMonth()/3),[td]:t=>t.getMonth(),[Mh]:t=>t.getDate(),[Ph]:t=>t.getHours(),[jh]:t=>t.getMinutes(),[P0]:t=>t.getSeconds(),[Rx]:t=>t.getMilliseconds(),[cD]:t=>qLt(t),[zc]:t=>m5e(t),[zc+M0]:(t,r)=>uD(m5e(t),t.getDay(),$ae(r)),[M0]:(t,r)=>uD(1,t.getDay(),$ae(r))},rCn={[Lh]:t=>3*t,[zc]:(t,r)=>uD(t,0,$ae(r))},nCn={[Ju]:t=>t.getUTCFullYear(),[Lh]:t=>Math.floor(t.getUTCMonth()/3),[td]:t=>t.getUTCMonth(),[Mh]:t=>t.getUTCDate(),[Ph]:t=>t.getUTCHours(),[jh]:t=>t.getUTCMinutes(),[P0]:t=>t.getUTCSeconds(),[Rx]:t=>t.getUTCMilliseconds(),[cD]:t=>HLt(t),[zc]:t=>g5e(t),[M0]:(t,r)=>uD(1,t.getUTCDay(),zae(r)),[zc+M0]:(t,r)=>uD(g5e(t),t.getUTCDay(),zae(r))},oCn={[Lh]:t=>3*t,[zc]:(t,r)=>uD(t,0,zae(r))},YLt={[Ju]:Fh,[Lh]:cP.every(3),[td]:cP,[zc]:vw,[Mh]:F0,[M0]:F0,[cD]:F0,[Ph]:V7,[jh]:z7,[P0]:QC,[Rx]:Fx},XLt={[Ju]:Rh,[Lh]:fP.every(3),[td]:fP,[zc]:_w,[Mh]:R0,[M0]:R0,[cD]:R0,[Ph]:G7,[jh]:U7,[P0]:QC,[Rx]:Fx};dP=1e3,pP=dP*60,hP=pP*60,W7=hP*24,KLt=W7*7,y5e=W7*30,ZLt=W7*365,QLt=[Ju,td,Mh,Ph,jh,P0,Rx],mP=QLt.slice(0,-1),gP=mP.slice(0,-1),yP=gP.slice(0,-1),JLt=yP.slice(0,-1),e4t=[Ju,zc],b5e=[Ju,td],t4t=[Ju],iCn=[[mP,1,dP],[mP,5,5*dP],[mP,15,15*dP],[mP,30,30*dP],[gP,1,pP],[gP,5,5*pP],[gP,15,15*pP],[gP,30,30*pP],[yP,1,hP],[yP,3,3*hP],[yP,6,6*hP],[yP,12,12*hP],[JLt,1,W7],[e4t,1,KLt],[b5e,1,y5e],[b5e,3,3*y5e],[t4t,1,ZLt]]});function Vae(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Gae(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bP(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function fD(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=xP(i),f=vP(i),d=xP(s),p=vP(s),h=xP(a),m=vP(a),g=xP(l),y=vP(l),b=xP(u),x=vP(u),v={a:V,A:G,b:U,B:Y,c:null,d:A5e,e:A5e,f:C4t,g:R4t,G:P4t,H:w4t,I:_4t,j:S4t,L:O5e,m:E4t,M:T4t,p:X,q:pe,Q:D5e,s:N5e,S:A4t,u:k4t,U:I4t,V:D4t,w:N4t,W:O4t,x:null,X:null,y:F4t,Y:M4t,Z:j4t,"%":I5e},w={a:$,A:O,b:z,B:q,c:null,d:k5e,e:k5e,f:z4t,g:Z4t,G:J4t,H:L4t,I:B4t,j:$4t,L:R5e,m:U4t,M:V4t,p:ee,q:ae,Q:D5e,s:N5e,S:G4t,u:W4t,U:q4t,V:H4t,w:Y4t,W:X4t,x:null,X:null,y:K4t,Y:Q4t,Z:e5t,"%":I5e},_={a:N,A:k,b:R,B:I,c:L,d:E5e,e:E5e,f:y4t,g:C5e,G:S5e,H:T5e,I:T5e,j:p4t,L:g4t,m:d4t,M:h4t,p:A,q:f4t,Q:x4t,s:v4t,S:m4t,u:s4t,U:a4t,V:l4t,w:i4t,W:u4t,x:j,X:M,y:C5e,Y:S5e,Z:c4t,"%":b4t};v.x=C(n,v),v.X=C(o,v),v.c=C(r,v),w.x=C(n,w),w.X=C(o,w),w.c=C(r,w);function C(Q,le){return function(ie){var Z=[],ge=-1,ne=0,ye=Q.length,xe,Ne,Ae;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(Z.push(Q.slice(ne,ge)),(Ne=_5e[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):Ne=xe==="e"?" ":"0",(Ae=le[xe])&&(xe=Ae(ie,Ne)),Z.push(xe),ne=ge+1);return Z.push(Q.slice(ne,ge)),Z.join("")}}function S(Q,le){return function(ie){var Z=bP(1900,void 0,1),ge=E(Z,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ne=Gae(bP(Z.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?lD.ceil(ne):lD(ne),ne=R0.offset(ne,(Z.V-1)*7),Z.y=ne.getUTCFullYear(),Z.m=ne.getUTCMonth(),Z.d=ne.getUTCDate()+(Z.w+6)%7):(ne=Vae(bP(Z.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?aD.ceil(ne):aD(ne),ne=F0.offset(ne,(Z.V-1)*7),Z.y=ne.getFullYear(),Z.m=ne.getMonth(),Z.d=ne.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ye="Z"in Z?Gae(bP(Z.y,0,1)).getUTCDay():Vae(bP(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ye+5)%7:Z.w+Z.U*7-(ye+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,Gae(Z)):Vae(Z)}}function E(Q,le,ie,Z){for(var ge=0,ne=le.length,ye=ie.length,xe,Ne;ge<ne;){if(Z>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),Ne=_[xe in _5e?le.charAt(ge++):xe],!Ne||(Z=Ne(Q,ie,Z))<0)return-1}else if(xe!=ie.charCodeAt(Z++))return-1}return Z}function A(Q,le,ie){var Z=c.exec(le.slice(ie));return Z?(Q.p=f.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function N(Q,le,ie){var Z=h.exec(le.slice(ie));return Z?(Q.w=m.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function k(Q,le,ie){var Z=d.exec(le.slice(ie));return Z?(Q.w=p.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function R(Q,le,ie){var Z=b.exec(le.slice(ie));return Z?(Q.m=x.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function I(Q,le,ie){var Z=g.exec(le.slice(ie));return Z?(Q.m=y.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function j(Q,le,ie){return E(Q,n,le,ie)}function M(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function Y(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function pe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function O(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=C(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=S(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=C(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=S(Q+="",!0);return le.toString=function(){return Q},le}}}function so(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function o4t(t){return t.replace(n4t,"\\$&")}function xP(t){return new RegExp("^(?:"+t.map(o4t).join("|")+")","i")}function vP(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function i4t(t,r,n){var o=Wa.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function s4t(t,r,n){var o=Wa.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function a4t(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function l4t(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function u4t(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function S5e(t,r,n){var o=Wa.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function C5e(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function c4t(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function f4t(t,r,n){var o=Wa.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function d4t(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function E5e(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function p4t(t,r,n){var o=Wa.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function T5e(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function h4t(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function m4t(t,r,n){var o=Wa.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function g4t(t,r,n){var o=Wa.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function y4t(t,r,n){var o=Wa.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function b4t(t,r,n){var o=r4t.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function x4t(t,r,n){var o=Wa.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function v4t(t,r,n){var o=Wa.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function A5e(t,r){return so(t.getDate(),r,2)}function w4t(t,r){return so(t.getHours(),r,2)}function _4t(t,r){return so(t.getHours()%12||12,r,2)}function S4t(t,r){return so(1+F0.count(Fh(t),t),r,3)}function O5e(t,r){return so(t.getMilliseconds(),r,3)}function C4t(t,r){return O5e(t,r)+"000"}function E4t(t,r){return so(t.getMonth()+1,r,2)}function T4t(t,r){return so(t.getMinutes(),r,2)}function A4t(t,r){return so(t.getSeconds(),r,2)}function k4t(t){var r=t.getDay();return r===0?7:r}function I4t(t,r){return so(vw.count(Fh(t)-1,t),r,2)}function F5e(t){var r=t.getDay();return r>=4||r===0?ww(t):ww.ceil(t)}function D4t(t,r){return t=F5e(t),so(ww.count(Fh(t),t)+(Fh(t).getDay()===4),r,2)}function N4t(t){return t.getDay()}function O4t(t,r){return so(aD.count(Fh(t)-1,t),r,2)}function F4t(t,r){return so(t.getFullYear()%100,r,2)}function R4t(t,r){return t=F5e(t),so(t.getFullYear()%100,r,2)}function M4t(t,r){return so(t.getFullYear()%1e4,r,4)}function P4t(t,r){var n=t.getDay();return t=n>=4||n===0?ww(t):ww.ceil(t),so(t.getFullYear()%1e4,r,4)}function j4t(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+so(r/60|0,"0",2)+so(r%60,"0",2)}function k5e(t,r){return so(t.getUTCDate(),r,2)}function L4t(t,r){return so(t.getUTCHours(),r,2)}function B4t(t,r){return so(t.getUTCHours()%12||12,r,2)}function $4t(t,r){return so(1+R0.count(Rh(t),t),r,3)}function R5e(t,r){return so(t.getUTCMilliseconds(),r,3)}function z4t(t,r){return R5e(t,r)+"000"}function U4t(t,r){return so(t.getUTCMonth()+1,r,2)}function V4t(t,r){return so(t.getUTCMinutes(),r,2)}function G4t(t,r){return so(t.getUTCSeconds(),r,2)}function W4t(t){var r=t.getUTCDay();return r===0?7:r}function q4t(t,r){return so(_w.count(Rh(t)-1,t),r,2)}function M5e(t){var r=t.getUTCDay();return r>=4||r===0?Sw(t):Sw.ceil(t)}function H4t(t,r){return t=M5e(t),so(Sw.count(Rh(t),t)+(Rh(t).getUTCDay()===4),r,2)}function Y4t(t){return t.getUTCDay()}function X4t(t,r){return so(lD.count(Rh(t)-1,t),r,2)}function K4t(t,r){return so(t.getUTCFullYear()%100,r,2)}function Z4t(t,r){return t=M5e(t),so(t.getUTCFullYear()%100,r,2)}function Q4t(t,r){return so(t.getUTCFullYear()%1e4,r,4)}function J4t(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Sw(t):Sw.ceil(t),so(t.getUTCFullYear()%1e4,r,4)}function e5t(){return"+0000"}function I5e(){return"%"}function D5e(t){return+t}function N5e(t){return Math.floor(+t/1e3)}var _5e,Wa,r4t,n4t,Wae=D(()=>{"use strict";Bae();_5e={"-":"",_:" ",0:"0"},Wa=/^\s*\d+/,r4t=/^%/,n4t=/[\\^$*+?|[\]().{}]/g});function qae(t){return dD=fD(t),q7=dD.format,H7=dD.parse,Y7=dD.utcFormat,X7=dD.utcParse,dD}var dD,q7,H7,Y7,X7,P5e=D(()=>{"use strict";Wae();qae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var j5e=D(()=>{"use strict";P5e();Wae()});function wP(t){let r={};return n=>r[n]||(r[n]=t(n))}function t5t(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=r5t(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function r5t(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function z5e(t){let r=wP(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=Nx(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return t5t(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=Nx(a??",f");let l=_ae(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=Oae(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=Fae(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=Nae(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function n5t(){return Hae=z5e({format:B7,formatPrefix:$7})}function o5t(t){return z5e(uP(t))}function L5e(t){return arguments.length?Hae=o5t(t):Hae}function B5e(t,r,n){n=n||{},rP(n)||Zs(`Invalid time multi-format specifier: ${n}`);let o=r(P0),i=r(jh),s=r(Ph),a=r(Mh),l=r(zc),u=r(td),c=r(Lh),f=r(Ju),d=t(n[Rx]||".%L"),p=t(n[P0]||":%S"),h=t(n[jh]||"%I:%M"),m=t(n[Ph]||"%I %p"),g=t(n[Mh]||n[M0]||"%a %d"),y=t(n[zc]||"%b %d"),b=t(n[td]||"%B"),x=t(n[Lh]||"%B"),v=t(n[Ju]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function U5e(t){let r=wP(t.format),n=wP(t.utcFormat);return{timeFormat:o=>D7(o)?r(o):B5e(r,x5e,o),utcFormat:o=>D7(o)?n(o):B5e(n,v5e,o),timeParse:wP(t.parse),utcParse:wP(t.utcParse)}}function i5t(){return Yae=U5e({format:q7,parse:H7,utcFormat:Y7,utcParse:X7})}function s5t(t){return U5e(fD(t))}function K7(t){return arguments.length?Yae=s5t(t):Yae}function V5e(t,r){let n=arguments.length;return n&&n!==2&&Zs("defaultLocale expects either zero or two arguments."),n?$5e(L5e(t),K7(r)):$5e(L5e(),K7())}var Hae,Yae,$5e,Xae=D(()=>{"use strict";I4e();H4e();w5e();oP();j5e();n5t();i5t();$5e=(t,r)=>I0({},t,r)});function c5t(t,r){return n=>({options:n||{},sanitize:d5t,load:f5t,fileAccess:!!r,file:p5t(r),http:m5t(t)})}function f5t(t,r){return Be(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function d5t(t,r){return Be(this,null,function*(){r=I0({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=l5t.test(t.replace(u5t,""));(t==null||typeof t!="string"||!l)&&Zs("Sanitize failure, invalid URI: "+N7(t));let u=a5t.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(G5e))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(G5e.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function p5t(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):h5t}function h5t(){return Be(this,null,function*(){Zs("No file system access.")})}function m5t(t){return t?function(r,n){return Be(this,null,function*(){let o=I0({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?ed(s[i])?s[i]():s.text():Zs(s.status+""+s.statusText)})}:g5t}function g5t(){return Be(this,null,function*(){Zs("No HTTP fetch method available.")})}function _5t(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=Z7.length,i=Z7.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&y5t(u)&&!Z7[l](u)&&(i[l]=0,++a,a===Z7.length))return"string";return w5t[i.reduce((s,a)=>s===0?a:s,0)-1]}function S5t(t,r){return r.reduce((n,o)=>(n[o]=_5t(t,o),n),{})}function q5e(t){let r=function(n,o){let i={delimiter:t};return Zae(n,o?I0(o,i):i)};return r.responseType="text",r}function Zae(t,r){return r.header&&(t=r.header.map(N7).join(r.delimiter)+`
`+t),pae(r.delimiter).parse(t+"")}function C5t(t){return typeof Buffer=="function"&&ed(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function Qae(t,r){let n=r&&r.property?sae(r.property):nD;return rP(t)&&!C5t(t)?E5t(n(t),r):n(JSON.parse(t))}function E5t(t,r){return!ap(t)&&s4e(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function Y5e(t,r){let n,o,i,s;return t=Qae(t,r),r&&r.feature?(n=XC,i=r.feature):r&&r.mesh?(n=KC,i=r.mesh,s=T5t[r.filter]):Zs("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):Zs("Invalid TopoJSON object: "+i),o&&o.features||[o]}function X5e(t,r){return arguments.length>1?(Kae[t]=r,this):iD(Kae,t)?Kae[t]:null}function K5e(t){let r=X5e(t);return r&&r.responseType||"text"}function Z5e(t,r,n,o){r=r||{};let i=X5e(r.type||"json");return i||Zs("Unknown data format type: "+r.type),t=i(t,r),r.parse&&A5t(t,r.parse,n,o),iD(t,"columns")&&delete t.columns,t}function A5t(t,r,n,o){if(!t.length)return;let i=K7();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=S5t(t,s)),s=Object.keys(r);let p=s.map(h=>{let m=r[h],g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!W5e[m])throw Error("Illegal format pattern: "+h+":"+m);return W5e[m]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var a5t,l5t,u5t,G5e,y5t,b5t,x5t,H5e,v5t,W5e,Z7,w5t,T5t,Kae,Q5e,J5e=D(()=>{"use strict";oP();h4e();P7();Xae();a5t=/^(data:|([A-Za-z]+:)?\/\/)/,l5t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,u5t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,G5e="file://";y5t=t=>t!=null&&t===t,b5t=t=>t==="true"||t==="false"||t===!0||t===!1,x5t=t=>!Number.isNaN(Date.parse(t)),H5e=t=>!Number.isNaN(+t)&&!(t instanceof Date),v5t=t=>H5e(t)&&Number.isInteger(+t),W5e={boolean:a4e,integer:lae,number:lae,date:l4e,string:u4e,unknown:nD},Z7=[b5t,v5t,H5e,x5t],w5t=["boolean","integer","number","date"];Zae.responseType="text";Qae.responseType="json";T5t={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};Y5e.responseType="json";Kae={dsv:Zae,csv:q5e(","),tsv:q5e("	"),json:Qae,topojson:Y5e};Q5e=c5t(typeof fetch<"u"&&fetch,null)});function t9(t){let r=t||nD,n=[],o={};return n.add=i=>{let s=r(i);return o[s]||(o[s]=1,n.push(i)),n},n.remove=i=>{let s=r(i);if(o[s]){o[s]=0;let a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}function CP(t,r){return Be(this,null,function*(){try{yield r(t)}catch(n){t.error(n)}})}function rE(t){return!!(t&&xr(t))}function xr(t){return t[sBe]}function aBe(t,r){return t[sBe]=r,t}function Dn(t){let r=t===Object(t)?t:{data:t};return xr(r)?r:aBe(r,k5t++)}function r9(t){return nE(t,Dn({}))}function nE(t,r){for(let n in t)r[n]=t[n];return r}function n9(t,r){return aBe(r,xr(t))}function L0(t,r){return t?r?(n,o)=>t(n,o)||xr(r(n))-xr(r(o)):(n,o)=>t(n,o)||xr(n)-xr(o):null}function ele(t){return t&&t.constructor===Lx}function Lx(){let t=[],r=[],n=[],o=[],i=[],s=null,a=!1;return{constructor:Lx,insert(l){let u=oD(l),c=u.length;for(let f=0;f<c;++f)t.push(u[f]);return this},remove(l){let u=ed(l)?o:r,c=oD(l),f=c.length;for(let d=0;d<f;++d)u.push(c[d]);return this},modify(l,u,c){let f={field:u,value:nP(c)};return ed(l)?(f.filter=l,i.push(f)):(f.tuple=l,n.push(f)),this},encode(l,u){return ed(l)?i.push({filter:l,field:u}):n.push({tuple:l,field:u}),this},clean(l){return s=l,this},reflow(){return a=!0,this},pulse(l,u){let c={},f={},d,p,h,m,g,y;for(d=0,p=u.length;d<p;++d)c[xr(u[d])]=1;for(d=0,p=r.length;d<p;++d)g=r[d],c[xr(g)]=-1;for(d=0,p=o.length;d<p;++d)m=o[d],u.forEach(x=>{m(x)&&(c[xr(x)]=-1)});for(d=0,p=t.length;d<p;++d)g=t[d],y=xr(g),c[y]?c[y]=1:l.add.push(Dn(t[d]));for(d=0,p=u.length;d<p;++d)g=u[d],c[xr(g)]<0&&l.rem.push(g);function b(x,v,w){w?x[v]=w(x):l.encode=v,a||(f[xr(x)]=x)}for(d=0,p=n.length;d<p;++d)h=n[d],g=h.tuple,m=h.field,y=c[xr(g)],y>0&&(b(g,m,h.value),l.modifies(m));for(d=0,p=i.length;d<p;++d)h=i[d],m=h.filter,u.forEach(x=>{m(x)&&c[xr(x)]>0&&b(x,h.field,h.value)}),l.modifies(h.field);if(a)l.mod=r.length||o.length?u.filter(x=>c[xr(x)]>0):u.slice();else for(y in f)l.mod.push(f[y]);return(s||s==null&&(r.length||o.length))&&l.clean(!0),l}}}function EP(){Object.defineProperty(this,J7,{writable:!0,value:{}})}function Fo(t,r,n,o){this.id=++I5t,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,r&&(this._update=r),n&&this.parameters(n,o)}function eBe(t){return function(r){let n=this.flags;return arguments.length===0?!!(n&t):(this.flags=r?n|t:n&~t,this)}}function R5t(t,r,n,o){let i=1,s;return t instanceof Fo?s=t:t&&t.prototype instanceof Fo?s=new t:ed(t)?s=new Fo(null,t):(i=0,s=new Fo(t,r)),this.rank(s),i&&(o=n,n=r),n&&this.connect(s,s.parameters(n,o)),this.touch(s),s}function M5t(t,r){let n=t.rank,o=r.length;for(let i=0;i<o;++i)if(n<r[i].rank){this.rerank(t);return}}function hD(t,r,n){this.id=++P5t,this.value=null,n&&(this.receive=n),t&&(this._filter=t),r&&(this._apply=r)}function Cw(t,r,n){return new hD(t,r,n)}function j5t(t,r,n,o){let i=this,s=Cw(n,o),a=function(c){c.dataflow=i;try{s.receive(c)}catch(f){i.error(f)}finally{i.run()}},l;typeof t=="string"&&typeof document<"u"?l=document.querySelectorAll(t):l=oD(t);let u=l.length;for(let c=0;c<u;++c)l[c].addEventListener(r,a);return s}function L5t(t,r){let n=this.locale();return Z5e(t,r,n.timeParse,n.utcParse)}function B5t(t,r,n){return r=this.parse(r,n),this.pulse(t,this.changeset().insert(r))}function $5t(t,r){return Be(this,null,function*(){let n=this,o=0,i;try{i=yield n.loader().load(t,{context:"dataflow",response:K5e(r&&r.type)});try{i=n.parse(i,r)}catch(s){o=-2,n.warn("Data ingestion failed",t,s)}}catch(s){o=-1,n.warn("Loading failed",t,s)}return{data:i,status:o}})}function z5t(t,r,n){return Be(this,null,function*(){let o=this,i=o._pending||U5t(o);i.requests+=1;let s=yield o.request(r,n);return o.pulse(t,o.changeset().remove(I7).insert(s.data||[])),i.done(),s})}function U5t(t){let r,n=new Promise(o=>r=o);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,r(t))},t._pending=n}function G5t(t,r,n,o,i){return(t instanceof Fo?q5t:W5t)(this,t,r,n,o,i),this}function W5t(t,r,n,o,i,s){let a=I0({},s,V5t),l,u;ed(n)||(n=nP(n)),o===void 0?l=c=>t.touch(n(c)):ed(o)?(u=new Fo(null,o,i,!1),l=c=>{u.evaluate(c);let f=n(c),d=u.value;ele(d)?t.pulse(f,d,s):t.update(f,d,a)}):l=c=>t.update(n(c),o,a),r.apply(l)}function q5t(t,r,n,o,i,s){if(o===void 0)r.targets().add(n);else{let a=s||{},l=new Fo(null,H5t(n,o),i,!1);l.modified(a.force),l.rank=r.rank,r.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),t.connect(n,[l]))}}function H5t(t,r){return r=ed(r)?r:nP(r),t?function(n,o){let i=r(n,o);return t.skip()||(t.skip(i!==this.value).value=i),i}:r}function Y5t(t){t.rank=++this._rank}function X5t(t){let r=[t],n,o,i;for(;r.length;)if(this.rank(n=r.pop()),o=n._targets)for(i=o.length;--i>=0;)r.push(n=o[i]),n===t&&Zs("Cycle detected in dataflow graph.")}function Px(t,r,n){this.dataflow=t,this.stamp=r??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Jae(t,r){let n=[];return xw(t,r,o=>n.push(o)),n}function iBe(t,r){let n={};return t.visit(r,o=>{n[xr(o)]=1}),o=>n[xr(o)]?null:o}function Q7(t,r){return t?(n,o)=>t(n,o)&&r(n,o):r}function o9(t,r,n,o){let i=this,s=0;this.dataflow=t,this.stamp=r,this.fields=null,this.encode=o||null,this.pulses=n;for(let a of n)if(a.stamp===r){if(a.fields){let l=i.fields||(i.fields={});for(let u in a.fields)l[u]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}function Z5t(t,r,n){return Be(this,null,function*(){let o=this,i=[];if(o._pulse)return lBe(o);if(o._pending&&(yield o._pending),r&&(yield CP(o,r)),!o._touched.length)return o.debug("Dataflow invoked, but nothing to do."),o;let s=++o._clock;o._pulse=new Px(o,s,t),o._touched.forEach(f=>o._enqueue(f,!0)),o._touched=t9(tP);let a=0,l,u,c;try{for(;o._heap.size()>0;){if(l=o._heap.pop(),l.rank!==l.qrank){o._enqueue(l,!0);continue}u=l.run(o._getPulse(l,t)),u.then?u=yield u:u.async&&(i.push(u.async),u=e9),u!==e9&&l._targets&&l._targets.forEach(f=>o._enqueue(f)),++a}}catch(f){o._heap.clear(),c=f}if(o._input={},o._pulse=null,o.debug(`Pulse ${s}: ${a} operators`),c&&(o._postrun=[],o.error(c)),o._postrun.length){let f=o._postrun.sort((d,p)=>p.priority-d.priority);o._postrun=[];for(let d=0;d<f.length;++d)yield CP(o,f[d].callback)}return n&&(yield CP(o,n)),i.length&&Promise.all(i).then(f=>o.runAsync(null,()=>{f.forEach(d=>{try{d(o)}catch(p){o.error(p)}})})),o})}function Q5t(t,r,n){return Be(this,null,function*(){for(;this._running;)yield this._running;let o=()=>this._running=null;return(this._running=this.evaluate(t,r,n)).then(o,o),this._running})}function J5t(t,r,n){return this._pulse?lBe(this):(this.evaluate(t,r,n),this)}function eBt(t,r,n){if(this._pulse||r)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(o){this.error(o)}}function lBe(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function tBt(t,r){let n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||r)&&(t.qrank=t.rank,this._heap.push(t))}function rBt(t,r){let n=t.source,o=this._clock;return n&&ap(n)?new o9(this,o,n.map(i=>i.pulse),r):this._input[t.id]||nBt(this._pulse,n&&n.pulse)}function nBt(t,r){return r&&r.stamp===t.stamp?r:(t=t.fork(),r&&r!==e9&&(t.source=r.source),t)}function oBt(t,r){let n=r||tle;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function iBt(t,r,n){let o=n||tle;return(t.set(r)||o.force)&&this.touch(t,o),this}function sBt(t,r,n){this.touch(t,n||tle);let o=new Px(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return o.target=t,this._input[t.id]=r.pulse(o,i),this}function aBt(t){let r=[];return{clear:()=>r=[],size:()=>r.length,peek:()=>r[0],push:n=>(r.push(n),uBe(r,0,r.length-1,t)),pop:()=>{let n=r.pop(),o;return r.length?(o=r[0],r[0]=n,lBt(r,0,t)):o=n,o}}}function uBe(t,r,n,o){let i,s,a=t[n];for(;n>r;){if(s=n-1>>1,i=t[s],o(a,i)<0){t[n]=i,n=s;continue}break}return t[n]=a}function lBt(t,r,n){let o=r,i=t.length,s=t[r],a=(r<<1)+1,l;for(;a<i;)l=a+1,l<i&&n(t[a],t[l])>=0&&(a=l),t[r]=t[a],r=a,a=(r<<1)+1;return t[r]=s,uBe(t,o,r,n)}function Tw(){this.logger(o4e()),this.logLevel(aae),this._clock=0,this._rank=0,this._locale=V5e();try{this._loader=Q5e()}catch{}this._touched=t9(tP),this._input={},this._pulse=null,this._heap=aBt((t,r)=>t.qrank-r.qrank),this._postrun=[]}function SP(t){return function(){return this._log[t].apply(this,arguments)}}function et(t,r){Fo.call(this,t,null,r)}function i9(t){let r=rle(t);return r&&r.Definition||null}function rle(t){return t=t&&t.toLowerCase(),iD(jx,t)?jx[t]:null}var sBe,k5t,J7,I5t,D5t,N5t,O5t,F5t,P5t,V5t,e9,j0,Ew,Mx,K5t,tBe,pD,rBe,_P,nBe,oBe,tle,jx,qa=D(()=>{"use strict";oP();J5e();Xae();sBe=Symbol("vega_id"),k5t=1;J7="_:mod:_";EP.prototype={set(t,r,n,o){let i=this,s=i[t],a=i[J7];return r!=null&&r>=0?(s[r]!==n||o)&&(s[r]=n,a[r+":"+t]=-1,a[t]=-1):(s!==n||o)&&(i[t]=n,a[t]=ap(n)?1+n.length:-1),i},modified(t,r){let n=this[J7];if(arguments.length){if(ap(t)){for(let o=0;o<t.length;++o)if(n[t[o]])return!0;return!1}}else{for(let o in n)if(n[o])return!0;return!1}return r!=null&&r>=0?r+1<n[t]||!!n[r+":"+t]:!!n[t]},clear(){return this[J7]={},this}};I5t=0,D5t="pulse",N5t=new EP,O5t=1,F5t=2;Fo.prototype={targets(){return this._targets||(this._targets=t9(tP))},set(t){return this.value!==t?(this.value=t,1):0},skip:eBe(O5t),modified:eBe(F5t),parameters(t,r,n){r=r!==!1;let o=this._argval=this._argval||new EP,i=this._argops=this._argops||[],s=[],a,l,u,c,f=(d,p,h)=>{h instanceof Fo?(h!==this&&(r&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:p})):o.set(d,p,h)};for(a in t)if(l=t[a],a===D5t)oD(l).forEach(d=>{d instanceof Fo?d!==this&&(d.targets().add(this),s.push(d)):Zs("Pulse parameters must be operator instances.")}),this.source=l;else if(ap(l))for(o.set(a,-1,Array(u=l.length)),c=0;c<u;++c)f(a,c,l[c]);else f(a,-1,l);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(t){let r=this._argval||N5t,n=this._argops,o,i,s,a;if(n){let l=n.length;for(i=0;i<l;++i)o=n[i],s=o.op,a=s.modified()&&s.stamp===t,r.set(o.name,o.index,s.value,a);if(n.initonly){for(i=0;i<l;++i)o=n[i],o.op.targets().remove(this);this._argops=null,this._update=null}}return r},detach(){let t=this._argops,r,n,o,i;if(t)for(r=0,n=t.length;r<n;++r)o=t[r],i=o.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let r=this._update;if(r){let n=this.marshall(t.stamp),o=r.call(this,n,t);if(n.clear(),o!==this.value)this.value=o;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?(this.skip(!1),r=0):r=this.evaluate(t),this.pulse=r||t}};P5t=0;hD.prototype={_filter:I7,_apply:nD,targets(){return this._targets||(this._targets=t9(tP))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let r=this.value=this._apply(t),n=this._targets,o=n?n.length:0;for(let i=0;i<o;++i)n[i].receive(r);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let r=Cw(t);return this.targets().add(r),r},apply(t){let r=Cw(null,t);return this.targets().add(r),r},merge(){let t=Cw();this.targets().add(t);for(let r=0,n=arguments.length;r<n;++r)arguments[r].targets().add(t);return t},throttle(t){let r=-1;return this.filter(()=>{let n=Date.now();return n-r>t?(r=n,1):0})},debounce(t){let r=Cw();return this.targets().add(Cw(null,null,i4e(t,n=>{let o=n.dataflow;r.receive(n),o&&o.run&&o.run()}))),r},between(t,r){let n=!1;return t.targets().add(Cw(null,null,()=>n=!0)),r.targets().add(Cw(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=I7,this._targets=null}};V5t={skip:!0};e9={},j0=1,Ew=2,Mx=4,K5t=j0|Ew,tBe=j0|Mx,pD=j0|Ew|Mx,rBe=8,_P=16,nBe=32,oBe=64;Px.prototype={StopPropagation:e9,ADD:j0,REM:Ew,MOD:Mx,ADD_REM:K5t,ADD_MOD:tBe,ALL:pD,REFLOW:rBe,SOURCE:_P,NO_SOURCE:nBe,NO_FIELDS:oBe,fork(t){return new Px(this.dataflow).init(this,t)},clone(){let t=this.fork(pD);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(pD|_P)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Px(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,r){let n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(r&oBe)&&(n.fields=t.fields),r&j0?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),r&Ew?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),r&Mx?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),r&nBe?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){let r=t||pD;return r&j0&&this.add.length||r&Ew&&this.rem.length||r&Mx&&this.mod.length},reflow(t){if(t)return this.fork(pD).reflow();let r=this.add.length,n=this.source&&this.source.length;return n&&n!==r&&(this.mod=this.source,r&&this.filter(Mx,iBe(this,j0))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let r=this.fields||(this.fields={});return ap(t)?t.forEach(n=>r[n]=!0):r[t]=!0,this},modified(t,r){let n=this.fields;return(r||this.mod.length)&&n?arguments.length?ap(t)?t.some(o=>n[o]):n[t]:!!n:!1},filter(t,r){let n=this;return t&j0&&(n.addF=Q7(n.addF,r)),t&Ew&&(n.remF=Q7(n.remF,r)),t&Mx&&(n.modF=Q7(n.modF,r)),t&_P&&(n.srcF=Q7(n.srcF,r)),n},materialize(t){t=t||pD;let r=this;return t&j0&&r.addF&&(r.add=Jae(r.add,r.addF),r.addF=null),t&Ew&&r.remF&&(r.rem=Jae(r.rem,r.remF),r.remF=null),t&Mx&&r.modF&&(r.mod=Jae(r.mod,r.modF),r.modF=null),t&_P&&r.srcF&&(r.source=r.source.filter(r.srcF),r.srcF=null),r},visit(t,r){let n=this,o=r;if(t&_P)return xw(n.source,n.srcF,o),n;t&j0&&xw(n.add,n.addF,o),t&Ew&&xw(n.rem,n.remF,o),t&Mx&&xw(n.mod,n.modF,o);let i=n.source;if(t&rBe&&i){let s=n.add.length+n.mod.length;s===i.length||(s?xw(i,iBe(n,tBe),o):xw(i,n.srcF,o))}return n}};uae(o9,Px,{fork(t){let r=new Px(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&r.ADD&&this.visit(r.ADD,n=>r.add.push(n)),t&r.REM&&this.visit(r.REM,n=>r.rem.push(n)),t&r.MOD&&this.visit(r.MOD,n=>r.mod.push(n))),r},changed(t){return this.changes&t},modified(t){let r=this,n=r.fields;return n&&r.changes&r.MOD?ap(t)?t.some(o=>n[o]):n[t]:0},filter(){Zs("MultiPulse does not support filtering.")},materialize(){Zs("MultiPulse does not support materialization.")},visit(t,r){let n=this,o=n.pulses,i=o.length,s=0;if(t&n.SOURCE)for(;s<i;++s)o[s].visit(t,r);else for(;s<i;++s)o[s].stamp===n.stamp&&o[s].visit(t,r);return n}});tle={skip:!1,force:!1};Tw.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:SP("error"),warn:SP("warn"),info:SP("info"),debug:SP("debug"),logLevel:SP("level"),cleanThreshold:1e4,add:R5t,connect:M5t,rank:Y5t,rerank:X5t,pulse:sBt,touch:oBt,update:iBt,changeset:Lx,ingest:B5t,parse:L5t,preload:z5t,request:$5t,events:j5t,on:G5t,evaluate:Z5t,run:J5t,runAsync:Q5t,runAfter:eBt,_enqueue:tBt,_getPulse:rBt};uae(et,Fo,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let r;return this.skip()?this.skip(!1):r=this.evaluate(t),r=r||t,r.then?r=r.then(n=>this.pulse=n):r!==t.StopPropagation&&(this.pulse=r),r},evaluate(t){let r=this.marshall(t.stamp),n=this.transform(r,t);return r.clear(),n},transform(){}});jx={}});function lp(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var TP=D(()=>{"use strict"});function B0(t){let r=t,n=t;t.length===1&&(r=(a,l)=>t(a)-l,n=uBt(t));function o(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}return u}function i(a,l,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){let f=u+c>>>1;n(a[f],l)>0?c=f:u=f+1}return u}function s(a,l,u,c){u==null&&(u=0),c==null&&(c=a.length);let f=o(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:o,center:s,right:i}}function uBt(t){return(r,n)=>lp(t(r),n)}var nle=D(()=>{"use strict";TP()});function s9(t){return t===null?NaN:+t}function*cBe(t,r){if(r===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)(o=r(o,++n,t))!=null&&(o=+o)>=o&&(yield o)}}var ole=D(()=>{"use strict"});var fBe,oE,ile,cBt,Bh,dBe=D(()=>{"use strict";TP();nle();ole();fBe=B0(lp),oE=fBe.right,ile=fBe.left,cBt=B0(s9).center,Bh=oE});function sle(t,r){let n=0,o,i=0,s=0;if(r===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(o=a-i,i+=o/++n,s+=o*(a-i));else{let a=-1;for(let l of t)(l=r(l,++a,t))!=null&&(l=+l)>=l&&(o=l-i,i+=o/++n,s+=o*(l-i))}if(n>1)return s/(n-1)}var pBe=D(()=>{"use strict"});function a9(t,r){let n=sle(t,r);return n&&Math.sqrt(n)}var hBe=D(()=>{"use strict";pBe()});var Vi,mBe=D(()=>{"use strict";Vi=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(r){let n=this._partials,o=0;for(let i=0;i<this._n&&i<32;i++){let s=n[i],a=r+s,l=Math.abs(r)<Math.abs(s)?r-(a-s):s-(a-r);l&&(n[o++]=l),r=a}return n[o]=r,this._n=o+1,this}valueOf(){let r=this._partials,n=this._n,o,i,s,a=0;if(n>0){for(a=r[--n];n>0&&(o=a,i=r[--n],a=o+i,s=i-(a-o),!s););n>0&&(s<0&&r[n-1]<0||s>0&&r[n-1]>0)&&(i=s*2,o=a+i,i==o-a&&(a=o))}return a}}});function ale(t,r){return Array.from(r,n=>t[n])}var gBe=D(()=>{"use strict"});function mD(t,r,n){var o,i=-1,s,a,l;if(r=+r,t=+t,n=+n,t===r&&n>0)return[t];if((o=r<t)&&(s=t,t=r,r=s),(l=l9(t,r,n))===0||!isFinite(l))return[];if(l>0){let u=Math.round(t/l),c=Math.round(r/l);for(u*l<t&&++u,c*l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)*l}else{l=-l;let u=Math.round(t*l),c=Math.round(r*l);for(u/l<t&&++u,c/l>r&&--c,a=new Array(s=c-u+1);++i<s;)a[i]=(u+i)/l}return o&&a.reverse(),a}function l9(t,r,n){var o=(r-t)/Math.max(0,n),i=Math.floor(Math.log(o)/Math.LN10),s=o/Math.pow(10,i);return i>=0?(s>=lle?10:s>=ule?5:s>=cle?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=lle?10:s>=ule?5:s>=cle?2:1)}function ec(t,r,n){var o=Math.abs(r-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),s=o/i;return s>=lle?i*=10:s>=ule?i*=5:s>=cle&&(i*=2),r<t?-i:i}var lle,ule,cle,yBe=D(()=>{"use strict";lle=Math.sqrt(50),ule=Math.sqrt(10),cle=Math.sqrt(2)});function up(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var fle=D(()=>{"use strict"});function iE(t,r){let n;if(r===void 0)for(let o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=r(i,++o,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}var dle=D(()=>{"use strict"});function u9(t,r,n=0,o=t.length-1,i=lp){for(;o>n;){if(o-n>600){let u=o-n+1,c=r-n+1,f=Math.log(u),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(u-d)/u)*(c-u/2<0?-1:1),h=Math.max(n,Math.floor(r-c*d/u+p)),m=Math.min(o,Math.floor(r+(u-c)*d/u+p));u9(t,r,h,m,i)}let s=t[r],a=n,l=o;for(AP(t,n,r),i(t[o],s)>0&&AP(t,n,o);a<l;){for(AP(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?AP(t,n,l):(++l,AP(t,l,o)),l<=r&&(n=l+1),r<=l&&(o=l-1)}return t}function AP(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}var bBe=D(()=>{"use strict";TP()});function sE(t,r,n){if(t=Float64Array.from(cBe(t,n)),!!(o=t.length)){if((r=+r)<=0||o<2)return iE(t);if(r>=1)return up(t);var o,i=(o-1)*r,s=Math.floor(i),a=up(u9(t,s).subarray(0,s+1)),l=iE(t.subarray(s+1));return a+(l-a)*(i-s)}}function kP(t,r,n=s9){if(o=t.length){if((r=+r)<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var ple=D(()=>{"use strict";fle();dle();bBe();ole()});function c9(t,r){let n=0,o=0;if(r===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,o+=i);else{let i=-1;for(let s of t)(s=r(s,++i,t))!=null&&(s=+s)>=s&&(++n,o+=s)}if(n)return o/n}var xBe=D(()=>{"use strict"});function IP(t,r){return sE(t,.5,r)}var vBe=D(()=>{"use strict";ple()});function*fBt(t){for(let r of t)yield*lAe(r)}function gD(t){return Array.from(fBt(t))}var wBe=D(()=>{"use strict"});function Qs(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var _Be=D(()=>{"use strict"});function yD(t,r){let n=0;if(r===void 0)for(let o of t)(o=+o)&&(n+=o);else{let o=-1;for(let i of t)(i=+r(i,++o,t))&&(n+=i)}return n}var SBe=D(()=>{"use strict"});var Vo=D(()=>{"use strict";dBe();TP();nle();hBe();mBe();fle();xBe();vBe();wBe();dle();gBe();ple();_Be();SBe();yBe()});function*TBe(t,r){if(r==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let o of t)o=r(o,++n,t),o!=null&&o!==""&&(o=+o)>=o&&(yield o)}}function f9(t,r,n){let o=Float64Array.from(TBe(t,n));return o.sort(lp),r.map(i=>kP(o,i))}function d9(t,r){return f9(t,[.25,.5,.75],r)}function p9(t,r){let n=t.length,o=a9(t,r),i=d9(t,r),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(o,s)||o||Math.abs(i[0])||1)*Math.pow(n,-.2)}function hle(t){let r=t.maxbins||20,n=t.base||10,o=Math.log(n),i=t.divide||[5,2],s=t.extent[0],a=t.extent[1],l,u,c,f,d,p,h=t.span||a-s||Math.abs(s)||1;if(t.step)l=t.step;else if(t.steps){for(f=h/r,d=0,p=t.steps.length;d<p&&t.steps[d]<f;++d);l=t.steps[Math.max(0,d-1)]}else{for(u=Math.ceil(Math.log(r)/o),c=t.minstep||0,l=Math.max(c,Math.pow(n,Math.round(Math.log(h)/o)-u));Math.ceil(h/l)>r;)l*=n;for(d=0,p=i.length;d<p;++d)f=l/i[d],f>=c&&h/f<=r&&(l=f)}f=Math.log(l);let m=f>=0?0:~~(-f/o)+1,g=Math.pow(n,-m-1);return(t.nice||t.nice===void 0)&&(f=Math.floor(s/l+g)*l,s=s<f?f-l:f,a=Math.ceil(a/l)*l),{start:s,stop:a===s?s+l:a,step:l}}function dBt(t){rd=t}function mle(t,r,n,o){if(!t.length)return[void 0,void 0];let i=Float64Array.from(TBe(t,o)),s=i.length,a=r,l,u,c,f;for(c=0,f=Array(a);c<a;++c){for(l=0,u=0;u<s;++u)l+=i[~~(rd()*s)];f[c]=l/s}return f.sort(lp),[sE(f,n/2),sE(f,1-n/2)]}function gle(t,r,n,o){o=o||(p=>p);let i=t.length,s=new Float64Array(i),a=0,l=1,u=o(t[0]),c=u,f=u+r,d;for(;l<i;++l){if(d=o(t[l]),d>=f){for(c=(u+c)/2;a<l;++a)s[a]=c;f=d+r,u=d}c=d}for(c=(u+c)/2;a<l;++a)s[a]=c;return n?pBt(s,r+r/4):s}function pBt(t,r){let n=t.length,o=0,i=1,s,a;for(;t[o]===t[i];)++i;for(;i<n;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<r){for(a=i+(o+s-i-i>>1);a<i;)t[a++]=t[i];for(;a>i;)t[a--]=t[o]}o=i,i=s}return t}function hBt(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function mBt(t,r){r==null&&(r=t,t=0);let n,o,i,s={min(a){return arguments.length?(n=a||0,i=o-n,s):n},max(a){return arguments.length?(o=a||0,i=o-n,s):o},sample(){return n+Math.floor(i*rd())},pdf(a){return a===Math.floor(a)&&a>=n&&a<o?1/i:0},cdf(a){let l=Math.floor(a);return l<n?0:l>=o?1:(l-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(t).max(r)}function NP(t,r){t=t||0,r=r??1;let n=0,o=0,i,s;if(DP===DP)n=DP,DP=NaN;else{do n=rd()*2-1,o=rd()*2-1,i=n*n+o*o;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,DP=o*s}return t+n*r}function h9(t,r,n){n=n??1;let o=(t-(r||0))/n;return Math.exp(-.5*o*o)/(n*ABe)}function OP(t,r,n){r=r||0,n=n??1;let o=(t-r)/n,i=Math.abs(o),s;if(i>37)s=0;else{let a=Math.exp(-i*i/2),l;i<7.07106781186547?(l=.0352624965998911*i+.700383064443688,l=l*i+6.37396220353165,l=l*i+33.912866078383,l=l*i+112.079291497871,l=l*i+221.213596169931,l=l*i+220.206867912376,s=a*l,l=.0883883476483184*i+1.75566716318264,l=l*i+16.064177579207,l=l*i+86.7807322029461,l=l*i+296.564248779674,l=l*i+637.333633378831,l=l*i+793.826512519948,l=l*i+440.413735824752,s=s/l):(l=i+.65,l=i+4/l,l=i+3/l,l=i+2/l,l=i+1/l,s=a/l/2.506628274631)}return o>0?1-s:s}function FP(t,r,n){return t<0||t>1?NaN:(r||0)+(n??1)*gBt*yBt(2*t-1)}function yBt(t){let r=-Math.log((1-t)*(1+t)),n;return r<6.25?(r-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*r,n=128584807152564e-32+n*r,n=11157877678025181e-33+n*r,n=-1333171662854621e-31+n*r,n=20972767875968562e-33+n*r,n=6637638134358324e-30+n*r,n=-4054566272975207e-29+n*r,n=-8151934197605472e-29+n*r,n=26335093153082323e-28+n*r,n=-12975133253453532e-27+n*r,n=-5415412054294628e-26+n*r,n=10512122733215323e-25+n*r,n=-4112633980346984e-24+n*r,n=-29070369957882005e-24+n*r,n=42347877827932404e-23+n*r,n=-13654692000834679e-22+n*r,n=-13882523362786469e-21+n*r,n=.00018673420803405714+n*r,n=-.000740702534166267+n*r,n=-.006033670871430149+n*r,n=.24015818242558962+n*r,n=1.6536545626831027+n*r):r<16?(r=Math.sqrt(r)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*r,n=-27517406297064545e-23+n*r,n=18239629214389228e-24+n*r,n=15027403968909828e-22+n*r,n=-4013867526981546e-21+n*r,n=29234449089955446e-22+n*r,n=12475304481671779e-21+n*r,n=-47318229009055734e-21+n*r,n=6828485145957318e-20+n*r,n=24031110387097894e-21+n*r,n=-.0003550375203628475+n*r,n=.0009532893797373805+n*r,n=-.0016882755560235047+n*r,n=.002491442096107851+n*r,n=-.003751208507569241+n*r,n=.005370914553590064+n*r,n=1.0052589676941592+n*r,n=3.0838856104922208+n*r):Number.isFinite(r)?(r=Math.sqrt(r)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*r,n=15076572693500548e-25+n*r,n=-3789465440126737e-24+n*r,n=761570120807834e-23+n*r,n=-1496002662714924e-23+n*r,n=2914795345090108e-23+n*r,n=-6771199775845234e-23+n*r,n=22900482228026655e-23+n*r,n=-99298272942317e-20+n*r,n=4526062597223154e-21+n*r,n=-1968177810553167e-20+n*r,n=7599527703001776e-20+n*r,n=-.00021503011930044477+n*r,n=-.00013871931833623122+n*r,n=1.0103004648645344+n*r,n=4.849906401408584+n*r):n=1/0,n*t}function m9(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>NP(n,o),pdf:s=>h9(s,n,o),cdf:s=>OP(s,n,o),icdf:s=>FP(s,n,o)};return i.mean(t).stdev(r)}function g9(t,r){let n=m9(),o=0,i={data(s){return arguments.length?(t=s,o=s?s.length:0,i.bandwidth(r)):t},bandwidth(s){return arguments.length?(r=s,!r&&t&&(r=p9(t)),i):r},sample(){return t[~~(rd()*o)]+r*n.sample()},pdf(s){let a=0,l=0;for(;l<o;++l)a+=n.pdf((s-t[l])/r);return a/r/o},cdf(s){let a=0,l=0;for(;l<o;++l)a+=n.cdf((s-t[l])/r);return a/o},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function y9(t,r){return t=t||0,r=r??1,Math.exp(t+NP()*r)}function b9(t,r,n){if(t<=0)return 0;r=r||0,n=n??1;let o=(Math.log(t)-r)/n;return Math.exp(-.5*o*o)/(n*ABe*t)}function x9(t,r,n){return OP(Math.log(t),r,n)}function v9(t,r,n){return Math.exp(FP(t,r,n))}function yle(t,r){let n,o,i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(o=s??1,i):o},sample:()=>y9(n,o),pdf:s=>b9(s,n,o),cdf:s=>x9(s,n,o),icdf:s=>v9(s,n,o)};return i.mean(t).stdev(r)}function ble(t,r){let n=0,o;function i(a){let l=[],u=0,c;for(c=0;c<n;++c)u+=l[c]=a[c]==null?1:+a[c];for(c=0;c<n;++c)l[c]/=u;return l}let s={weights(a){return arguments.length?(o=i(r=a||[]),s):r},distributions(a){return arguments.length?(a?(n=a.length,t=a):(n=0,t=[]),s.weights(r)):t},sample(){let a=rd(),l=t[n-1],u=o[0],c=0;for(;c<n-1;u+=o[++c])if(a<u){l=t[c];break}return l.sample()},pdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].pdf(a);return l},cdf(a){let l=0,u=0;for(;u<n;++u)l+=o[u]*t[u].cdf(a);return l},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(r)}function w9(t,r){return r==null&&(r=t??1,t=0),t+(r-t)*rd()}function _9(t,r,n){return n==null&&(n=r??1,r=0),t>=r&&t<=n?1/(n-r):0}function S9(t,r,n){return n==null&&(n=r??1,r=0),t<r?0:t>n?1:(t-r)/(n-r)}function C9(t,r,n){return n==null&&(n=r??1,r=0),t>=0&&t<=1?r+t*(n-r):NaN}function xle(t,r){let n,o,i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(o=s??1,i):o},sample:()=>w9(n,o),pdf:s=>_9(s,n,o),cdf:s=>S9(s,n,o),icdf:s=>C9(s,n,o)};return r==null&&(r=t??1,t=0),i.min(t).max(r)}function RP(t,r,n,o){let i=o-t*t,s=Math.abs(i)<1e-24?0:(n-t*r)/i;return[r-s*t,s]}function E9(t,r,n,o){t=t.filter(h=>{let m=r(h),g=n(h);return m!=null&&(m=+m)>=m&&g!=null&&(g=+g)>=g}),o&&t.sort((h,m)=>r(h)-r(m));let i=t.length,s=new Float64Array(i),a=new Float64Array(i),l=0,u=0,c=0,f,d,p;for(p of t)s[l]=f=+r(p),a[l]=d=+n(p),++l,u+=(f-u)/l,c+=(d-c)/l;for(l=0;l<i;++l)s[l]-=u,a[l]-=c;return[s,a,u,c]}function MP(t,r,n,o){let i=-1,s,a;for(let l of t)s=r(l),a=n(l),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&o(s,a,++i)}function bD(t,r,n,o,i){let s=0,a=0;return MP(t,r,n,(l,u)=>{let c=u-i(l),f=u-o;s+=c*c,a+=f*f}),1-s/a}function T9(t,r,n){let o=0,i=0,s=0,a=0,l=0;MP(t,r,n,(f,d)=>{++l,o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=RP(o,i,s,a),c=f=>u[0]+u[1]*f;return{coef:u,predict:c,rSquared:bD(t,r,n,i,c)}}function vle(t,r,n){let o=0,i=0,s=0,a=0,l=0;MP(t,r,n,(f,d)=>{++l,f=Math.log(f),o+=(f-o)/l,i+=(d-i)/l,s+=(f*d-s)/l,a+=(f*f-a)/l});let u=RP(o,i,s,a),c=f=>u[0]+u[1]*Math.log(f);return{coef:u,predict:c,rSquared:bD(t,r,n,i,c)}}function wle(t,r,n){let[o,i,s,a]=E9(t,r,n),l=0,u=0,c=0,f=0,d=0,p,h,m;MP(t,r,n,(x,v)=>{p=o[d++],h=Math.log(v),m=p*v,l+=(v*h-l)/d,u+=(m-u)/d,c+=(m*h-c)/d,f+=(p*m-f)/d});let[g,y]=RP(u/a,l/a,c/a,f/a),b=x=>Math.exp(g+y*(x-s));return{coef:[Math.exp(g-y*s),y],predict:b,rSquared:bD(t,r,n,a,b)}}function _le(t,r,n){let o=0,i=0,s=0,a=0,l=0,u=0;MP(t,r,n,(d,p)=>{let h=Math.log(d),m=Math.log(p);++u,o+=(h-o)/u,i+=(m-i)/u,s+=(h*m-s)/u,a+=(h*h-a)/u,l+=(p-l)/u});let c=RP(o,i,s,a),f=d=>c[0]*Math.pow(d,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:f,rSquared:bD(t,r,n,l,f)}}function A9(t,r,n){let[o,i,s,a]=E9(t,r,n),l=o.length,u=0,c=0,f=0,d=0,p=0,h,m,g,y;for(h=0;h<l;)m=o[h],g=i[h++],y=m*m,u+=(y-u)/h,c+=(y*m-c)/h,f+=(y*y-f)/h,d+=(m*g-d)/h,p+=(y*g-p)/h;let b=f-u*u,x=u*b-c*c,v=(p*u-d*c)/x,w=(d*b-p*c)/x,_=-v*u,C=S=>(S=S-s,v*S*S+w*S+_+a);return{coef:[_-w*s+v*s*s+a,w-2*v*s,v],predict:C,rSquared:bD(t,r,n,a,C)}}function Sle(t,r,n,o){if(o===1)return T9(t,r,n);if(o===2)return A9(t,r,n);let[i,s,a,l]=E9(t,r,n),u=i.length,c=[],f=[],d=o+1,p,h,m,g,y;for(p=0;p<d;++p){for(m=0,g=0;m<u;++m)g+=Math.pow(i[m],p)*s[m];for(c.push(g),y=new Float64Array(d),h=0;h<d;++h){for(m=0,g=0;m<u;++m)g+=Math.pow(i[m],p+h);y[h]=g}f.push(y)}f.push(c);let b=xBt(f),x=v=>{v-=a;let w=l+b[0]+b[1]*v+b[2]*v*v;for(p=3;p<d;++p)w+=b[p]*Math.pow(v,p);return w};return{coef:bBt(d,b,-a,l),predict:x,rSquared:bD(t,r,n,l,x)}}function bBt(t,r,n,o){let i=Array(t),s,a,l,u;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(l=r[s],u=1,i[s]+=l,a=1;a<=s;++a)u*=(s+1-a)/a,i[s-a]+=l*Math.pow(n,a)*u;return i[0]+=o,i}function xBt(t){let r=t.length-1,n=[],o,i,s,a,l;for(o=0;o<r;++o){for(a=o,i=o+1;i<r;++i)Math.abs(t[o][i])>Math.abs(t[o][a])&&(a=i);for(s=o;s<r+1;++s)l=t[s][o],t[s][o]=t[s][a],t[s][a]=l;for(i=o+1;i<r;++i)for(s=r;s>=o;s--)t[s][i]-=t[s][o]*t[o][i]/t[o][o]}for(i=r-1;i>=0;--i){for(l=0,s=i+1;s<r;++s)l+=t[s][i]*n[s];n[i]=(t[r][i]-l)/t[i][i]}return n}function Cle(t,r,n,o){let[i,s,a,l]=E9(t,r,n,!0),u=i.length,c=Math.max(2,~~(o*u)),f=new Float64Array(u),d=new Float64Array(u),p=new Float64Array(u).fill(1);for(let h=-1;++h<=CBe;){let m=[0,c-1];for(let y=0;y<u;++y){let b=i[y],x=m[0],v=m[1],w=b-i[x]>i[v]-b?x:v,_=0,C=0,S=0,E=0,A=0,N=1/Math.abs(i[w]-b||1);for(let I=x;I<=v;++I){let L=i[I],j=s[I],M=vBt(Math.abs(b-L)*N)*p[I],V=L*M;_+=M,C+=V,S+=j*M,E+=j*V,A+=L*V}let[k,R]=RP(C/_,S/_,E/_,A/_);f[y]=k+R*b,d[y]=Math.abs(s[y]-f[y]),wBt(i,y+1,m)}if(h===CBe)break;let g=IP(d);if(Math.abs(g)<EBe)break;for(let y=0,b,x;y<u;++y)b=d[y]/(6*g),p[y]=b>=1?EBe:(x=1-b*b)*x}return _Bt(i,f,a,l)}function vBt(t){return(t=1-t*t*t)*t*t}function wBt(t,r,n){let o=t[r],i=n[0],s=n[1]+1;if(!(s>=t.length))for(;r>i&&t[s]-o<=o-t[i];)n[0]=++i,n[1]=s,++s}function _Bt(t,r,n,o){let i=t.length,s=[],a=0,l=0,u=[],c;for(;a<i;++a)c=t[a]+n,u[0]===c?u[1]+=(r[a]-u[1])/++l:(l=0,u[1]+=o,u=[c,r[a]],s.push(u));return u[1]+=o,s}function xD(t,r,n,o){n=n||25,o=Math.max(n,o||200);let i=g=>[g,t(g)],s=r[0],a=r[1],l=a-s,u=l/o,c=[i(s)],f=[];if(n===o){for(let g=1;g<o;++g)c.push(i(s+g/n*l));return c.push(i(a)),c}else{f.push(i(a));for(let g=n;--g>0;)f.push(i(s+g/n*l))}let d=c[0],p=f[f.length-1],h=1/l,m=CBt(d[1],f);for(;p;){let g=i((d[0]+p[0])/2);g[0]-d[0]>=u&&EBt(d,g,p,h,m)>SBt?f.push(g):(d=p,c.push(p),f.pop()),p=f[f.length-1]}return c}function CBt(t,r){let n=t,o=t,i=r.length;for(let s=0;s<i;++s){let a=r[s][1];a<n&&(n=a),a>o&&(o=a)}return 1/(o-n)}function EBt(t,r,n,o,i){let s=Math.atan2(i*(n[1]-t[1]),o*(n[0]-t[0])),a=Math.atan2(i*(r[1]-t[1]),o*(r[0]-t[0]));return Math.abs(s-a)}var rd,ABe,gBt,DP,CBe,EBe,SBt,vD=D(()=>{"use strict";Vo();rd=Math.random;ABe=Math.sqrt(2*Math.PI),gBt=Math.SQRT2,DP=NaN;CBe=2,EBe=1e-12;SBt=.5*Math.PI/180});function Qn(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),r(s,1),t(s),s},i.round=function(s){var a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=function(s,a){return r(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,l){var u=[],c;if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=function(s){return Qn(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,l){if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););})},n&&(i.count=function(s,a){return Ele.setTime(+s),Tle.setTime(+a),t(Ele),t(Tle),Math.floor(n(Ele,Tle))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?function(a){return o(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var Ele,Tle,tc=D(()=>{"use strict";Ele=new Date,Tle=new Date});var k9,Aw,kBe,Ale=D(()=>{"use strict";tc();k9=Qn(function(){},function(t,r){t.setTime(+t+r)},function(t,r){return r-t});k9.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Qn(function(r){r.setTime(Math.floor(r/t)*t)},function(r,n){r.setTime(+r+n*t)},function(r,n){return(n-r)/t}):k9};Aw=k9,kBe=k9.range});var IBe,rc,DBe,kle=D(()=>{"use strict";tc();IBe=Qn(function(t){t.setTime(t-t.getMilliseconds())},function(t,r){t.setTime(+t+r*1e3)},function(t,r){return(r-t)/1e3},function(t){return t.getUTCSeconds()}),rc=IBe,DBe=IBe.range});var NBe,lE,TBt,Ile=D(()=>{"use strict";tc();NBe=Qn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getMinutes()}),lE=NBe,TBt=NBe.range});var OBe,cE,ABt,Dle=D(()=>{"use strict";tc();OBe=Qn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getHours()}),cE=OBe,ABt=OBe.range});var FBe,nd,kBt,Ole=D(()=>{"use strict";tc();FBe=Qn(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),nd=FBe,kBt=FBe.range});function fE(t){return Qn(function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n*7)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5})}var cp,wD,MBe,PBe,kw,jBe,LBe,BBe,IBt,DBt,NBt,OBt,FBt,RBt,Fle=D(()=>{"use strict";tc();cp=fE(0),wD=fE(1),MBe=fE(2),PBe=fE(3),kw=fE(4),jBe=fE(5),LBe=fE(6),BBe=cp.range,IBt=wD.range,DBt=MBe.range,NBt=PBe.range,OBt=kw.range,FBt=jBe.range,RBt=LBe.range});var $Be,Iw,MBt,Rle=D(()=>{"use strict";tc();$Be=Qn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,r){t.setMonth(t.getMonth()+r)},function(t,r){return r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Iw=$Be,MBt=$Be.range});var Mle,od,PBt,Ple=D(()=>{"use strict";tc();Mle=Qn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r)},function(t,r){return r.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Mle.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Qn(function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n*t)})};od=Mle,PBt=Mle.range});var zBe,dE,jBt,jle=D(()=>{"use strict";tc();zBe=Qn(function(t){t.setUTCSeconds(0,0)},function(t,r){t.setTime(+t+r*6e4)},function(t,r){return(r-t)/6e4},function(t){return t.getUTCMinutes()}),dE=zBe,jBt=zBe.range});var UBe,pE,LBt,Lle=D(()=>{"use strict";tc();UBe=Qn(function(t){t.setUTCMinutes(0,0,0)},function(t,r){t.setTime(+t+r*36e5)},function(t,r){return(r-t)/36e5},function(t){return t.getUTCHours()}),pE=UBe,LBt=UBe.range});var VBe,id,BBt,Ble=D(()=>{"use strict";tc();VBe=Qn(function(t){t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r)},function(t,r){return(r-t)/864e5},function(t){return t.getUTCDate()-1}),id=VBe,BBt=VBe.range});function hE(t){return Qn(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n*7)},function(r,n){return(n-r)/6048e5})}var fp,_D,GBe,WBe,Dw,qBe,HBe,YBe,$Bt,zBt,UBt,VBt,GBt,WBt,$le=D(()=>{"use strict";tc();fp=hE(0),_D=hE(1),GBe=hE(2),WBe=hE(3),Dw=hE(4),qBe=hE(5),HBe=hE(6),YBe=fp.range,$Bt=_D.range,zBt=GBe.range,UBt=WBe.range,VBt=Dw.range,GBt=qBe.range,WBt=HBe.range});var XBe,Nw,qBt,zle=D(()=>{"use strict";tc();XBe=Qn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCMonth(t.getUTCMonth()+r)},function(t,r){return r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),Nw=XBe,qBt=XBe.range});var Ule,sd,HBt,Vle=D(()=>{"use strict";tc();Ule=Qn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)},function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ule.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Qn(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n*t)})};sd=Ule,HBt=Ule.range});function ZBe(t,r,n,o,i,s){let a=[[rc,1,1e3],[rc,5,5*1e3],[rc,15,15*1e3],[rc,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=B0(([,,y])=>y).right(a,p);if(h===a.length)return t.every(ec(c/31536e6,f/31536e6,d));if(h===0)return Aw.every(Math.max(ec(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var Gle,Wle,qle,Hle,QBe=D(()=>{"use strict";Vo();Ale();kle();Ile();Dle();Ole();Fle();Rle();Ple();jle();Lle();Ble();$le();zle();Vle();[Gle,Wle]=ZBe(sd,Nw,fp,id,pE,dE),[qle,Hle]=ZBe(od,Iw,cp,nd,cE,lE)});var PP=D(()=>{"use strict";Ale();kle();Ile();Dle();Ole();Fle();Rle();Ple();jle();Lle();Ble();$le();zle();Vle();QBe()});function D9(t){let r=Lr(t).slice(),n={};return r.length||pt("Missing time unit."),r.forEach(i=>{Rr(Yle,i)?n[i]=1:pt("Invalid time unit: ".concat(i,"."))}),(n[Js]||n[Tl]?1:0)+(n[nc]||n[Al]||n[oc]?1:0)+(n[z0]?1:0)>1&&pt("Incompatible time units: ".concat(t)),r.sort((i,s)=>Yle[i]-Yle[s]),r}function eue(t,r){let n=an({},XBt,r),o=D9(t),i=o.length,s="",a=0,l,u;for(a=0;a<i;)for(l=o.length;l>a;--l)if(u=o.slice(a,l).join("-"),n[u]!=null){s+=n[u],a=l;break}return s.trim()}function tue(t){return mE.setFullYear(t),mE.setMonth(0),mE.setDate(1),mE.setHours(0,0,0,0),mE}function rue(t){return t$e(new Date(t))}function nue(t){return Xle(new Date(t))}function t$e(t){return nd.count(tue(t.getFullYear())-1,t)}function Xle(t){return cp.count(tue(t.getFullYear())-1,t)}function Kle(t){return tue(t).getDay()}function KBt(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(-1,r,n,o,i,s,a);return l.setFullYear(t),l}return new Date(t,r,n,o,i,s,a)}function oue(t){return r$e(new Date(t))}function iue(t){return Zle(new Date(t))}function r$e(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return id.count(r-1,t)}function Zle(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return fp.count(r-1,t)}function Qle(t){return mE.setTime(Date.UTC(t,0,1)),mE.getUTCDay()}function ZBt(t,r,n,o,i,s,a){if(0<=t&&t<100){let l=new Date(Date.UTC(-1,r,n,o,i,s,a));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(t,r,n,o,i,s,a))}function n$e(t,r,n,o,i){let s=r||1,a=zn(t),l=(b,x,v)=>(v=v||b,QBt(n[v],o[v],b===a&&s,x)),u=new Date,c=ou(t),f=c[Ha]?l(Ha):Ga(2012),d=c[Al]?l(Al):c[nc]?l(nc):Dh,p=c[Js]&&c[Tl]?l(Tl,1,Js+Tl):c[Js]?l(Js,1):c[Tl]?l(Tl,1):c[oc]?l(oc,1):c[z0]?l(z0,1):T0,h=c[Uc]?l(Uc):Dh,m=c[Vc]?l(Vc):Dh,g=c[ad]?l(ad):Dh,y=c[dp]?l(dp):Dh;return function(b){u.setTime(+b);let x=f(u);return i(x,d(u),p(u,x),h(u),m(u),g(u),y(u))}}function QBt(t,r,n,o){let i=n<=1?t:o?(s,a)=>o+n*Math.floor((t(s,a)-o)/n):(s,a)=>n*Math.floor(t(s,a)/n);return r?(s,a)=>r(i(s,a),a):i}function SD(t,r,n){return r+t*7-(n+6)%7}function sue(t,r){return n$e(t,r||1,JBt,e$t,KBt)}function aue(t,r){return n$e(t,r||1,t$t,r$t,ZBt)}function Bx(t){return n$t[t]}function $x(t){return o$t[t]}function o$e(t,r,n){return t?t.offset(r,n):void 0}function lue(t,r,n){return o$e(Bx(t),r,n)}function uue(t,r,n){return o$e($x(t),r,n)}function i$e(t,r,n,o){return t?t.range(r,n,o):void 0}function cue(t,r,n,o){return i$e(Bx(t),r,n,o)}function fue(t,r,n,o){return i$e($x(t),r,n,o)}function due(t){let r=t.extent,n=t.maxbins||40,o=Math.abs(YC(r))/n,i=B0(l=>l[2]).right(jP,o),s,a;return i===jP.length?(s=a$e,a=ec(r[0]/Jle,r[1]/Jle,n)):i?(i=jP[o/jP[i-1][2]<jP[i][2]/o?i-1:i],s=i[0],a=i[1]):(s=s$e,a=Math.max(ec(r[0],r[1],n),1)),{units:s,step:a}}var Ha,nc,Al,Js,oc,Tl,z0,Uc,Vc,ad,dp,I9,Yle,XBt,mE,JBt,e$t,t$t,r$t,n$t,o$t,LP,BP,$P,N9,i$t,JBe,Jle,s$e,zP,UP,VP,s$t,a$t,e$e,a$e,jP,CD=D(()=>{"use strict";Os();PP();Vo();Ha="year",nc="quarter",Al="month",Js="week",oc="date",Tl="day",z0="dayofyear",Uc="hours",Vc="minutes",ad="seconds",dp="milliseconds",I9=[Ha,nc,Al,Js,oc,Tl,z0,Uc,Vc,ad,dp],Yle=I9.reduce((t,r,n)=>(t[r]=1+n,t),{});XBt={[Ha]:"%Y ",[nc]:"Q%q ",[Al]:"%b ",[oc]:"%d ",[Js]:"W%U ",[Tl]:"%a ",[z0]:"%j ",[Uc]:"%H:00",[Vc]:"00:%M",[ad]:":%S",[dp]:".%L",["".concat(Ha,"-").concat(Al)]:"%Y-%m ",["".concat(Ha,"-").concat(Al,"-").concat(oc)]:"%Y-%m-%d ",["".concat(Uc,"-").concat(Vc)]:"%H:%M"};mE=new Date;JBt={[Ha]:t=>t.getFullYear(),[nc]:t=>Math.floor(t.getMonth()/3),[Al]:t=>t.getMonth(),[oc]:t=>t.getDate(),[Uc]:t=>t.getHours(),[Vc]:t=>t.getMinutes(),[ad]:t=>t.getSeconds(),[dp]:t=>t.getMilliseconds(),[z0]:t=>t$e(t),[Js]:t=>Xle(t),[Js+Tl]:(t,r)=>SD(Xle(t),t.getDay(),Kle(r)),[Tl]:(t,r)=>SD(1,t.getDay(),Kle(r))},e$t={[nc]:t=>3*t,[Js]:(t,r)=>SD(t,0,Kle(r))};t$t={[Ha]:t=>t.getUTCFullYear(),[nc]:t=>Math.floor(t.getUTCMonth()/3),[Al]:t=>t.getUTCMonth(),[oc]:t=>t.getUTCDate(),[Uc]:t=>t.getUTCHours(),[Vc]:t=>t.getUTCMinutes(),[ad]:t=>t.getUTCSeconds(),[dp]:t=>t.getUTCMilliseconds(),[z0]:t=>r$e(t),[Js]:t=>Zle(t),[Tl]:(t,r)=>SD(1,t.getUTCDay(),Qle(r)),[Js+Tl]:(t,r)=>SD(Zle(t),t.getUTCDay(),Qle(r))},r$t={[nc]:t=>3*t,[Js]:(t,r)=>SD(t,0,Qle(r))};n$t={[Ha]:od,[nc]:Iw.every(3),[Al]:Iw,[Js]:cp,[oc]:nd,[Tl]:nd,[z0]:nd,[Uc]:cE,[Vc]:lE,[ad]:rc,[dp]:Aw},o$t={[Ha]:sd,[nc]:Nw.every(3),[Al]:Nw,[Js]:fp,[oc]:id,[Tl]:id,[z0]:id,[Uc]:pE,[Vc]:dE,[ad]:rc,[dp]:Aw};LP=1e3,BP=LP*60,$P=BP*60,N9=$P*24,i$t=N9*7,JBe=N9*30,Jle=N9*365,s$e=[Ha,Al,oc,Uc,Vc,ad,dp],zP=s$e.slice(0,-1),UP=zP.slice(0,-1),VP=UP.slice(0,-1),s$t=VP.slice(0,-1),a$t=[Ha,Js],e$e=[Ha,Al],a$e=[Ha],jP=[[zP,1,LP],[zP,5,5*LP],[zP,15,15*LP],[zP,30,30*LP],[UP,1,BP],[UP,5,5*BP],[UP,15,15*BP],[UP,30,30*BP],[VP,1,$P],[VP,3,3*$P],[VP,6,6*$P],[VP,12,12*$P],[s$t,1,N9],[a$t,1,i$t],[e$e,1,JBe],[e$e,3,3*JBe],[a$e,1,Jle]]});var zue={};fn(zue,{aggregate:()=>Ow,bin:()=>yue,collect:()=>bue,compare:()=>m$e,countpattern:()=>xue,cross:()=>vue,density:()=>wue,dotbin:()=>Sue,expression:()=>v$e,extent:()=>Cue,facet:()=>F9,field:()=>w$e,filter:()=>Tue,flatten:()=>Aue,fold:()=>kue,formula:()=>Iue,generate:()=>_$e,impute:()=>Due,joinaggregate:()=>Nue,kde:()=>Oue,key:()=>S$e,load:()=>C$e,lookup:()=>Fue,multiextent:()=>E$e,multivalues:()=>T$e,params:()=>A$e,pivot:()=>Rue,prefacet:()=>k$e,project:()=>Mue,proxy:()=>I$e,quantile:()=>Pue,relay:()=>D$e,sample:()=>jue,sequence:()=>Lue,sieve:()=>N$e,subflow:()=>Eue,timeunit:()=>Bue,tupleindex:()=>F$e,values:()=>R$e,window:()=>$ue});function l$t(t){return r=>{let n=t.length,o=1,i=String(t[0](r));for(;o<n;++o)i+="|"+t[o](r);return i}}function mue(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:l$t(t)}function c$e(t,r,n){return n||t+(r?"_"+r:"")}function c$t(t,r){return n=>an({name:t,out:n||t},u$t,r)}function f$e(t,r){return GP[t](r)}function d$e(t,r){return t.idx-r.idx}function f$t(t){let r={};t.forEach(o=>r[o.name]=o);let n=o=>{o.req&&o.req.forEach(i=>{r[i]||n(r[i]=GP[i]())})};return t.forEach(n),Object.values(r).sort(d$e)}function d$t(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function p$t(t,r){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,r)))}function h$t(t,r){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,r)))}function m$t(t){return this._out.forEach(r=>t[r.out]=r.value(this)),t}function p$e(t,r){let n=r||Qu,o=f$t(t),i=t.slice().sort(d$e);function s(a){this._ops=o,this._out=i,this.cell=a,this.init()}return s.prototype.init=d$t,s.prototype.add=p$t,s.prototype.rem=h$t,s.prototype.set=m$t,s.prototype.get=n,s.fields=t.map(a=>a.out),s}function gue(t){this._key=t?Ih(t):xr,this.reset()}function Ow(t){et.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function yue(t){et.call(this,null,t)}function h$e(t,r,n){let o=t,i=r||[],s=n||[],a={},l=0;return{add:u=>s.push(u),remove:u=>a[o(u)]=++l,size:()=>i.length,data:(u,c)=>(l&&(i=i.filter(f=>!a[o(f)]),a={},l=0),c&&u&&i.sort(u),s.length&&(i=u?rae(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function bue(t){et.call(this,[],t)}function m$e(t){Fo.call(this,null,y$t,t)}function y$t(t){return this.value&&!t.modified()?this.value:Xse(t.fields,t.orders)}function xue(t){et.call(this,null,t)}function b$t(t,r,n){switch(r){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}function vue(t){et.call(this,null,t)}function x$t(t,r,n,o){for(var i=[],s={},a=t.length,l=0,u,c;l<a;++l)for(s[r]=c=t[l],u=0;u<a;++u)s[n]=t[u],o(s)&&(i.push(Dn(s)),s={},s[r]=c);return i}function g$e(t,r){let n=t[u$e];Rr(l$e,n)||pt("Unknown distribution function: "+n);let o=l$e[n]();for(let i in t)i===w$t?o.data((t.from||r()).map(t[i])):i===v$t?o[i](t[i].map(s=>g$e(s,r))):typeof o[i]===u$e&&o[i](t[i]);return o}function wue(t){et.call(this,null,t)}function S$t(t){return()=>t.materialize(t.SOURCE).source}function b$e(t,r){return t?t.map((n,o)=>r[o]||ki(n)):null}function _ue(t,r,n){let o=[],i=d=>d(u),s,a,l,u,c,f;if(r==null)o.push(t.map(n));else for(s={},a=0,l=t.length;a<l;++a)u=t[a],c=r.map(i),f=s[c],f||(s[c]=f=[],f.dims=c,o.push(f)),f.push(n(u));return o}function Sue(t){et.call(this,null,t)}function v$e(t){Fo.call(this,null,E$t,t),this.modified(!0)}function E$t(t){let r=t.expr;return this.value&&!t.modified("expr")?this.value:Jf(n=>r(n,t),Sa(r),ki(r))}function Cue(t){et.call(this,[void 0,void 0],t)}function Eue(t,r){Fo.call(this,t),this.parent=r,this.count=0}function F9(t){et.call(this,{},t),this._keys=bw();let r=this._targets=[];r.active=0,r.forEach=n=>{for(let o=0,i=r.active;o<i;++o)n(r[o],o,r)}}function w$e(t){Fo.call(this,null,T$t,t)}function T$t(t){return this.value&&!t.modified()?this.value:Hr(t.name)?Lr(t.name).map(r=>Ih(r)):Ih(t.name,t.as)}function Tue(t){et.call(this,bw(),t)}function Aue(t){et.call(this,[],t)}function kue(t){et.call(this,[],t)}function Iue(t){et.call(this,null,t)}function _$e(t){et.call(this,[],t)}function Due(t){et.call(this,[],t)}function k$t(t){var r=t.method||O9.value,n;if(O9[r]==null)pt("Unrecognized imputation method: "+r);else return r===O9.value?(n=t.value!==void 0?t.value:0,()=>n):O9[r]}function I$t(t){let r=t.field;return n=>n?r(n):NaN}function D$t(t,r,n,o){var i=b=>b(y),s=[],a=o?o.slice():[],l={},u={},c,f,d,p,h,m,g,y;for(a.forEach((b,x)=>l[b]=x+1),p=0,g=t.length;p<g;++p)y=t[p],m=n(y),h=l[m]||(l[m]=a.push(m)),f=(c=r?r.map(i):A$t)+"",(d=u[f])||(d=u[f]=[],s.push(d),d.values=c),d[h-1]=y;return s.domain=a,s}function Nue(t){Ow.call(this,t)}function Oue(t){et.call(this,null,t)}function S$e(t){Fo.call(this,null,N$t,t)}function N$t(t){return this.value&&!t.modified()?this.value:eae(t.fields,t.flat)}function C$e(t){et.call(this,[],t),this._pending=null}function O$t(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function hue(t,r,n){n.forEach(Dn);let o=r.fork(r.NO_FIELDS&r.NO_SOURCE);return o.rem=t.value,t.value=o.source=o.add=n,t._pending=null,o.rem.length&&o.clean(!0),o}function Fue(t){et.call(this,{},t)}function E$e(t){Fo.call(this,null,F$t,t)}function F$t(t){if(this.value&&!t.modified())return this.value;let r=t.extents,n=r.length,o=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=r[s],a[0]<o&&(o=a[0]),a[1]>i&&(i=a[1]);return[o,i]}function T$e(t){Fo.call(this,null,R$t,t)}function R$t(t){return this.value&&!t.modified()?this.value:t.values.reduce((r,n)=>r.concat(n),[])}function A$e(t){et.call(this,null,t)}function Rue(t){Ow.call(this,t)}function M$t(t,r){let n=t.field,o=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=Sa(n).concat(Sa(o)),a=j$t(n,t.limit||0,r);return r.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:a.map(()=>i),fields:a.map(l=>P$t(l,n,o,s)),as:a.map(l=>l+""),modified:t.modified.bind(t)}}function P$t(t,r,n,o){return Jf(i=>r(i)===t?n(i):NaN,o,t+"")}function j$t(t,r,n){let o={},i=[];return n.visit(n.SOURCE,s=>{let a=t(s);o[a]||(o[a]=1,i.push(a))}),i.sort(J3),r?i.slice(0,r):i}function k$e(t){F9.call(this,t)}function Mue(t){et.call(this,null,t)}function L$t(t,r,n,o){for(let i=0,s=n.length;i<s;++i)r[o[i]]=n[i](t);return r}function I$e(t){et.call(this,null,t)}function Pue(t){et.call(this,null,t)}function D$e(t){et.call(this,null,t)}function jue(t){et.call(this,[],t),this.count=0}function Lue(t){et.call(this,null,t)}function N$e(t){et.call(this,null,t),this.modified(!0)}function Bue(t){et.call(this,null,t)}function F$e(t){et.call(this,bw(),t)}function R$e(t){et.call(this,null,t)}function $$t(t,r,n,o){let i=WP[t](r,n);return{init:i.init||Dh,update:function(s,a){a[o]=i.next(s)}}}function z$t(t,r,n){for(let o=r.length;n<o;++n)if(t(r[n])!=null)return n;return-1}function M$e(t){let r=Lr(t.ops),n=Lr(t.fields),o=Lr(t.params),i=Lr(t.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[],d=!0;function p(h){Lr(Sa(h)).forEach(m=>l[m]=1)}p(t.sort),r.forEach((h,m)=>{let g=n[m],y=ki(g),b=c$e(h,y,i[m]);if(p(g),s.push(b),Rr(WP,h))a.push($$t(h,n[m],o[m],b));else{if(g==null&&h!=="count"&&pt("Null aggregate field specified."),h==="count"){c.push(b);return}d=!1;let x=u[y];x||(x=u[y]=[],x.field=g,f.push(x)),x.push(f$e(h,b))}}),(c.length||f.length)&&(this.cell=V$t(f,c,d)),this.inputs=Object.keys(l)}function V$t(t,r,n){t=t.map(u=>p$e(u,u.field));let o={num:0,agg:null,store:!1,count:r};if(!n)for(var i=t.length,s=o.agg=Array(i),a=0;a<i;++a)s[a]=new t[a](o);if(o.store)var l=o.data=new gue;return o.add=function(u){if(o.num+=1,!n){l&&l.add(u);for(let c=0;c<i;++c)s[c].add(s[c].get(u),u)}},o.rem=function(u){if(o.num-=1,!n){l&&l.rem(u);for(let c=0;c<i;++c)s[c].rem(s[c].get(u),u)}},o.set=function(u){let c,f;for(l&&l.values(),c=0,f=r.length;c<f;++c)u[r[c]]=o.num;if(!n)for(c=0,f=s.length;c<f;++c)s[c].set(u)},o.init=function(){o.num=0,l&&l.reset();for(let u=0;u<i;++u)s[u].init()},o}function $ue(t){et.call(this,{},t),this._mlen=0,this._mods=[]}function G$t(t,r,n,o){let i=o.sort,s=i&&!o.ignorePeers,a=o.frame||[null,0],l=t.data(n),u=l.length,c=s?B0(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:i||Ga(-1)};r.init();for(let d=0;d<u;++d)W$t(f,a,d,u),s&&q$t(f,c),r.update(f,l[d])}function W$t(t,r,n,o){t.p0=t.i0,t.p1=t.i1,t.i0=r[0]==null?0:Math.max(0,n-Math.abs(r[0])),t.i1=r[1]==null?o:Math.min(o,n+Math.abs(r[1])+1),t.index=n}function q$t(t,r){let n=t.i0,o=t.i1-1,i=t.compare,s=t.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(t.i0=r.left(s,s[n])),o<a&&!i(s[o],s[o+1])&&(t.i1=r.right(s,s[o]))}var pue,u$t,GP,qP,kl,g$t,l$e,v$t,u$e,w$t,y$e,_$t,x$e,C$t,O9,A$t,B$t,O$e,WP,U$t,P$e,j$e=D(()=>{"use strict";Os();qa();vD();Vo();CD();pue=()=>{},u$t={init:pue,add:pue,rem:pue,idx:0},GP={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,r)=>t.sum+=+r,rem:(t,r)=>t.sum-=r},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,r)=>t.product*=r,rem:(t,r)=>t.product/=r},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,r)=>(t.mean_d=r-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,r)=>(t.mean_d=r-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,r)=>t.dev+=t.mean_d*(r-t.mean),rem:(t,r)=>t.dev-=t.mean_d*(r-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,r)=>{(r<t.min||t.min===void 0)&&(t.min=r)},rem:(t,r)=>{r<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,r)=>{(r>t.max||t.max===void 0)&&(t.max=r)},rem:(t,r)=>{r>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,r,n)=>{r<t.min&&(t.argmin=n)},rem:(t,r)=>{r<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,r,n)=>{r>t.max&&(t.argmax=n)},rem:(t,r)=>{r>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},qP=Object.keys(GP);qP.forEach(t=>{GP[t]=c$t(t,GP[t])});kl=gue.prototype;kl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};kl.add=function(t){this._add.push(t)};kl.rem=function(t){this._rem.push(t)};kl.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,r=this._rem,n=this._key,o=t.length,i=r.length,s=Array(o-i),a={},l,u,c;for(l=0;l<i;++l)a[n(r[l])]=1;for(l=0,u=0;l<o;++l)a[n(c=t[l])]?a[n(c)]=0:s[u++]=c;return this._rem=[],this._add=s};kl.distinct=function(t){let r=this.values(),n={},o=r.length,i=0,s;for(;--o>=0;)s=t(r[o])+"",Rr(n,s)||(n[s]=1,++i);return i};kl.extent=function(t){if(this._get!==t||!this._ext){let r=this.values(),n=Zse(r,t);this._ext=[r[n[0]],r[n[1]]],this._get=t}return this._ext};kl.argmin=function(t){return this.extent(t)[0]||{}};kl.argmax=function(t){return this.extent(t)[1]||{}};kl.min=function(t){let r=this.extent(t)[0];return r!=null?t(r):void 0};kl.max=function(t){let r=this.extent(t)[1];return r!=null?t(r):void 0};kl.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=d9(this.values(),t),this._get=t),this._q};kl.q1=function(t){return this.quartile(t)[0]};kl.q2=function(t){return this.quartile(t)[1]};kl.q3=function(t){return this.quartile(t)[2]};kl.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=mle(this.values(),1e3,.05,t),this._get=t),this._ci};kl.ci0=function(t){return this.ci(t)[0]};kl.ci1=function(t){return this.ci(t)[1]};Ow.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:qP},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Dt(Ow,et,{transform(t,r){let n=this,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.modified();return n.stamp=o.stamp,n.value&&(i||r.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),o.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),r.clean()&&n._drop&&o.clean(!0).runAfter(()=>this.clean()),n.changes(o)},cross(){let t=this,r=t.value,n=t._dnames,o=n.map(()=>({})),i=n.length;function s(l){let u,c,f,d;for(u in l)for(f=l[u].tuple,c=0;c<i;++c)o[c][d=f[n[c]]]=d}s(t._prev),s(r);function a(l,u,c){let f=n[c],d=o[c++];for(let p in d){let h=l?l+"|"+p:p;u[f]=d[p],c<i?a(h,u,c):r[h]||t.cell(h,u)}}a("",{},0)},init(t){let r=this._inputs=[],n=this._outputs=[],o={};function i(y){let b=Lr(Sa(y)),x=b.length,v=0,w;for(;v<x;++v)o[w=b[v]]||(o[w]=1,r.push(w))}this._dims=Lr(t.groupby),this._dnames=this._dims.map(y=>{let b=ki(y);return i(y),n.push(b),b}),this.cellkey=t.key?t.key:mue(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let s=t.fields||[null],a=t.ops||["count"],l=t.as||[],u=s.length,c={},f,d,p,h,m,g;for(u!==a.length&&pt("Unmatched number of fields and aggregate ops."),g=0;g<u;++g){if(f=s[g],d=a[g],f==null&&d!=="count"&&pt("Null aggregate field specified."),h=ki(f),m=c$e(d,h,l[g]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[h],p||(i(f),p=c[h]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(f$e(d,m))}return this._measures=this._measures.map(y=>p$e(y,y.field)),{}},cellkey:mue(),cell(t,r){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,r),this._adds[this._alen++]=n),n},newcell(t,r){let n={key:t,num:0,agg:null,tuple:this.newtuple(r,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let o=this._measures,i=o.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new o[s](n)}return n.store&&(n.data=new gue),n},newtuple(t,r){let n=this._dnames,o=this._dims,i=o.length,s={};for(let a=0;a<i;++a)s[n[a]]=o[a](t);return r?n9(r.tuple,s):Dn(s)},clean(){let t=this.value;for(let r in t)t[r].num===0&&delete t[r]},add(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].add(o[i].get(t),t)},rem(t){let r=this.cellkey(t),n=this.cell(r,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);let o=n.agg;for(let i=0,s=o.length;i<s;++i)o[i].rem(o[i].get(t),t)},celltuple(t){let r=t.tuple,n=this._counts;t.store&&t.data.values();for(let o=0,i=n.length;o<i;++o)r[n[o]]=t.num;if(!this._countOnly){let o=t.agg;for(let i=0,s=o.length;i<s;++i)o[i].set(r)}return r},changes(t){let r=this._adds,n=this._mods,o=this._prev,i=this._drop,s=t.add,a=t.rem,l=t.mod,u,c,f,d;if(o)for(c in o)u=o[c],(!i||u.num)&&a.push(u.tuple);for(f=0,d=this._alen;f<d;++f)s.push(this.celltuple(r[f])),r[f]=null;for(f=0,d=this._mlen;f<d;++f)u=n[f],(u.num===0&&i?a:l).push(this.celltuple(u)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,t}});g$t=1e-14;yue.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Dt(yue,et,{transform(t,r){let n=t.interval!==!1,o=this._bins(t),i=o.start,s=o.step,a=t.as||["bin0","bin1"],l=a[0],u=a[1],c;return t.modified()?(r=r.reflow(!0),c=r.SOURCE):c=r.modified(Sa(t.field))?r.ADD_MOD:r.ADD,r.visit(c,n?f=>{let d=o(f);f[l]=d,f[u]=d==null?null:i+s*(1+(d-i)/s)}:f=>f[l]=o(f)),r.modifies(n?a:l)},_bins(t){if(this.value&&!t.modified())return this.value;let r=t.field,n=hle(t),o=n.step,i=n.start,s=i+Math.ceil((n.stop-i)/o)*o,a,l;(a=t.anchor)!=null&&(l=a-(i+o*Math.floor((a-i)/o)),i+=l,s+=l);let u=function(c){let f=Nh(r(c));return f==null?null:f<i?-1/0:f>s?1/0:(f=Math.max(i,Math.min(f,s-o)),i+o*Math.floor(g$t+(f-i)/o))};return u.start=i,u.stop=n.stop,u.step=o,this.value=Jf(u,Sa(r),t.name||"bin_"+ki(r))}});bue.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Dt(bue,et,{transform(t,r){let n=r.fork(r.ALL),o=h$e(xr,this.value,n.materialize(n.ADD).add),i=t.sort,s=r.changed()||i&&(t.modified("sort")||r.modified(i.fields));return n.visit(n.REM,o.remove),this.modified(s),this.value=n.source=o.data(L0(i),s),r.source&&r.source.root&&(this.value.root=r.source.root),n}});Dt(m$e,Fo);xue.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};Dt(xue,et,{transform(t,r){let n=d=>p=>{for(var h=b$t(l(p),t.case,s)||[],m,g=0,y=h.length;g<y;++g)a.test(m=h[g])||d(m)},o=this._parameterCheck(t,r),i=this._counts,s=this._match,a=this._stop,l=t.field,u=t.as||["text","count"],c=n(d=>i[d]=1+(i[d]||0)),f=n(d=>i[d]-=1);return o?r.visit(r.SOURCE,c):(r.visit(r.ADD,c),r.visit(r.REM,f)),this._finish(r,u)},_parameterCheck(t,r){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||r.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,r){let n=this._counts,o=this._tuples||(this._tuples={}),i=r[0],s=r[1],a=t.fork(t.NO_SOURCE|t.NO_FIELDS),l,u,c;for(l in n)u=o[l],c=n[l]||0,!u&&c?(o[l]=u=Dn({}),u[i]=l,u[s]=c,a.add.push(u)):c===0?(u&&a.rem.push(u),n[l]=null,o[l]=null):u[s]!==c&&(u[s]=c,a.mod.push(u));return a.modifies(r)}});vue.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Dt(vue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.as||["a","b"],i=o[0],s=o[1],a=!this.value||r.changed(r.ADD_REM)||t.modified("as")||t.modified("filter"),l=this.value;return a?(l&&(n.rem=l),l=r.materialize(r.SOURCE).source,n.add=this.value=x$t(l,i,s,t.filter||A0)):n.mod=l,n.source=this.value,n.modifies(o)}});l$e={kde:g9,mixture:ble,normal:m9,lognormal:yle,uniform:xle},v$t="distributions",u$e="function",w$t="field";y$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],_$t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:y$e},{name:"weights",type:"number",array:!0}]};wue.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:y$e.concat(_$t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Dt(wue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=g$e(t.distribution,S$t(r)),i=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200,a=t.method||"pdf";a!=="pdf"&&a!=="cdf"&&pt("Invalid density method: "+a),!t.extent&&!o.data&&pt("Missing density extent parameter."),a=o[a];let l=t.as||["value","density"],u=t.extent||Oh(o.data()),c=xD(a,u,i,s).map(f=>{let d={};return d[l[0]]=f[0],d[l[1]]=f[1],Dn(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});x$e="bin";Sue.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:x$e}]};C$t=(t,r)=>YC(Oh(t,r))/30;Dt(Sue,et,{transform(t,r){if(this.value&&!(t.modified()||r.changed()))return r;let n=r.materialize(r.SOURCE).source,o=_ue(r.source,t.groupby,Qu),i=t.smooth||!1,s=t.field,a=t.step||C$t(n,s),l=L0((m,g)=>s(m)-s(g)),u=t.as||x$e,c=o.length,f=1/0,d=-1/0,p=0,h;for(;p<c;++p){let m=o[p].sort(l);h=-1;for(let g of gle(m,a,i,s))g<f&&(f=g),g>d&&(d=g),m[++h][u]=g}return this.value={start:f,stop:d,step:a},r.reflow(!0).modifies(u)}});Dt(v$e,Fo);Cue.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Dt(Cue,et,{transform(t,r){let n=this.value,o=t.field,i=r.changed()||r.modified(o.fields)||t.modified("field"),s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),r.visit(i?r.SOURCE:r.ADD,l=>{let u=Nh(o(l));u!=null&&(u<s&&(s=u),u>a&&(a=u))}),!Number.isFinite(s)||!Number.isFinite(a)){let l=ki(o);l&&(l=` for field "${l}"`),r.dataflow.warn(`Infinite extent${l}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});Dt(Eue,Fo,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});Dt(F9,et,{activate(t){this._targets[this._targets.active++]=t},subflow(t,r,n,o){let i=this.value,s=Rr(i,t)&&i[t],a,l;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(l=o||(l=this._group[t])&&l.tuple,a=n.dataflow,s=new Eue(n.fork(n.NO_SOURCE),this),a.add(s).connect(r(a,t,l)),i[t]=s,this.activate(s)),s},clean(){let t=this.value,r=0;for(let n in t)if(t[n].count===0){let o=t[n].detachSubflow;o&&o(),delete t[n],++r}if(r){let n=this._targets.filter(o=>o&&o.count>0);this.initTargets(n)}},initTargets(t){let r=this._targets,n=r.length,o=t?t.length:0,i=0;for(;i<o;++i)r[i]=t[i];for(;i<n&&r[i]!=null;++i)r[i]=null;r.active=o},transform(t,r){let n=r.dataflow,o=t.key,i=t.subflow,s=this._keys,a=t.modified("key"),l=u=>this.subflow(u,i,r);return this._group=t.group||{},this.initTargets(),r.visit(r.REM,u=>{let c=xr(u),f=s.get(c);f!==void 0&&(s.delete(c),l(f).rem(u))}),r.visit(r.ADD,u=>{let c=o(u);s.set(xr(u),c),l(c).add(u)}),a||r.modified(o.fields)?r.visit(r.MOD,u=>{let c=xr(u),f=s.get(c),d=o(u);f===d?l(d).mod(u):(s.set(c,d),l(f).rem(u),l(d).add(u))}):r.changed(r.MOD)&&r.visit(r.MOD,u=>{l(s.get(xr(u))).mod(u)}),a&&r.visit(r.REFLOW,u=>{let c=xr(u),f=s.get(c),d=o(u);f!==d&&(s.set(c,d),l(f).rem(u),l(d).add(u))}),r.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),r}});Dt(w$e,Fo);Tue.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Dt(Tue,et,{transform(t,r){let n=r.dataflow,o=this.value,i=r.fork(),s=i.add,a=i.rem,l=i.mod,u=t.expr,c=!0;r.visit(r.REM,d=>{let p=xr(d);o.has(p)?o.delete(p):a.push(d)}),r.visit(r.ADD,d=>{u(d,t)?s.push(d):o.set(xr(d),1)});function f(d){let p=xr(d),h=u(d,t),m=o.get(p);h&&m?(o.delete(p),s.push(d)):!h&&!m?(o.set(p,1),a.push(d)):c&&h&&!m&&l.push(d)}return r.visit(r.MOD,f),t.modified()&&(c=!1,r.visit(r.REFLOW,f)),o.empty>n.cleanThreshold&&n.runAfter(o.clean),i}});Aue.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Dt(Aue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=b$e(o,t.as||[]),s=t.index||null,a=i.length;return n.rem=this.value,r.visit(r.SOURCE,l=>{let u=o.map(m=>m(l)),c=u.reduce((m,g)=>Math.max(m,g.length),0),f=0,d,p,h;for(;f<c;++f){for(p=r9(l),d=0;d<a;++d)p[i[d]]=(h=u[d][f])==null?null:h;s&&(p[s]=f),n.add.push(p)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});kue.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Dt(kue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=o.map(ki),s=t.as||["key","value"],a=s[0],l=s[1],u=o.length;return n.rem=this.value,r.visit(r.SOURCE,c=>{for(let f=0,d;f<u;++f)d=r9(c),d[a]=i[f],d[l]=o[f](c),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});Iue.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Dt(Iue,et,{transform(t,r){let n=t.expr,o=t.as,i=t.modified(),s=t.initonly?r.ADD:i?r.SOURCE:r.modified(n.fields)||r.modified(o)?r.ADD_MOD:r.ADD;return i&&(r=r.materialize().reflow(!0)),t.initonly||r.modifies(o),r.visit(s,a=>a[o]=n(a,t))}});Dt(_$e,et,{transform(t,r){let n=r.fork(r.ALL),o=t.generator,i=this.value,s=t.size-i.length,a,l,u;if(s>0){for(a=[];--s>=0;)a.push(u=Dn(o(t))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else l=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,i=i.slice(-s);return n.source=this.value=i,n}});O9={value:"value",median:IP,mean:c9,min:iE,max:up},A$t=[];Due.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};Dt(Due,et,{transform(t,r){var n=r.fork(r.ALL),o=k$t(t),i=I$t(t),s=ki(t.field),a=ki(t.key),l=(t.groupby||[]).map(ki),u=D$t(r.source,t.groupby,t.key,t.keyvals),c=[],f=this.value,d=u.domain.length,p,h,m,g,y,b,x,v,w,_;for(y=0,v=u.length;y<v;++y)for(p=u[y],m=p.values,h=NaN,x=0;x<d;++x)if(p[x]==null){for(g=u.domain[x],_={_impute:!0},b=0,w=m.length;b<w;++b)_[l[b]]=m[b];_[a]=g,_[s]=Number.isNaN(h)?h=o(p,i):h,c.push(Dn(_))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=c,n}});Nue.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:qP},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Dt(Nue,Ow,{transform(t,r){let n=this,o=t.modified(),i;return n.value&&(o||r.modified(n._inputs,!0))?(i=n.value=o?n.init(t):{},r.visit(r.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(t),r.visit(r.REM,s=>n.rem(s)),r.visit(r.ADD,s=>n.add(s))),n.changes(),r.visit(r.SOURCE,s=>{an(s,i[n.cellkey(s)].tuple)}),r.reflow(o).modifies(this._outputs)},changes(){let t=this._adds,r=this._mods,n,o;for(n=0,o=this._alen;n<o;++n)this.celltuple(t[n]),t[n]=null;for(n=0,o=this._mlen;n<o;++n)this.celltuple(r[n]),r[n]=null;this._alen=this._mlen=0}});Oue.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Dt(Oue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=_ue(o,t.groupby,t.field),s=(t.groupby||[]).map(ki),a=t.bandwidth,l=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[],f=t.extent,d=t.steps||t.minsteps||25,p=t.steps||t.maxsteps||200;l!=="pdf"&&l!=="cdf"&&pt("Invalid density method: "+l),t.resolve==="shared"&&(f||(f=Oh(o,t.field)),d=p=t.steps||p),i.forEach(h=>{let m=g9(h,a)[l],g=t.counts?h.length:1,y=f||Oh(h);xD(m,y,d,p).forEach(b=>{let x={};for(let v=0;v<s.length;++v)x[s[v]]=h.dims[v];x[u[0]]=b[0],x[u[1]]=b[1]*g,c.push(Dn(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});Dt(S$e,Fo);Dt(C$e,et,{transform(t,r){let n=r.dataflow;return this._pending?hue(this,r,this._pending):O$t(t)?r.StopPropagation:t.values?hue(this,r,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(i=>(this._pending=Lr(i.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(o=>hue(this,r,Lr(o.data)))}});Fue.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Dt(Fue,et,{transform(t,r){let n=t.fields,o=t.index,i=t.values,s=t.default==null?null:t.default,a=t.modified(),l=n.length,u=a?r.SOURCE:r.ADD,c=r,f=t.as,d,p,h;return i?(p=i.length,l>1&&!f&&pt('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==l*p&&pt('The "as" parameter has too few output field names.'),f=f||i.map(ki),d=function(m){for(var g=0,y=0,b,x;g<l;++g)if(x=o.get(n[g](m)),x==null)for(b=0;b<p;++b,++y)m[f[y]]=s;else for(b=0;b<p;++b,++y)m[f[y]]=i[b](x)}):(f||pt("Missing output field names."),d=function(m){for(var g=0,y;g<l;++g)y=o.get(n[g](m)),m[f[g]]=y??s}),a?c=r.reflow(!0):(h=n.some(m=>r.modified(m.fields)),u|=h?r.MOD:0),r.visit(u,d),c.modifies(f)}});Dt(E$e,Fo);Dt(T$e,Fo);Dt(A$e,et,{transform(t,r){return this.modified(t.modified()),this.value=t,r.fork(r.NO_SOURCE|r.NO_FIELDS)}});Rue.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:qP,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Dt(Rue,Ow,{_transform:Ow.prototype.transform,transform(t,r){return this._transform(M$t(t,r),r)}});Dt(k$e,F9,{transform(t,r){let n=t.subflow,o=t.field,i=s=>this.subflow(xr(s),n,r,s);return(t.modified("field")||o&&r.modified(Sa(o)))&&pt("PreFacet does not support field modification."),this.initTargets(),o?(r.visit(r.MOD,s=>{let a=i(s);o(s).forEach(l=>a.mod(l))}),r.visit(r.ADD,s=>{let a=i(s);o(s).forEach(l=>a.add(Dn(l)))}),r.visit(r.REM,s=>{let a=i(s);o(s).forEach(l=>a.rem(l))})):(r.visit(r.MOD,s=>i(s).mod(s)),r.visit(r.ADD,s=>i(s).add(s)),r.visit(r.REM,s=>i(s).rem(s))),r.clean()&&r.runAfter(()=>this.clean()),r}});Mue.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Dt(Mue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.fields,i=b$e(t.fields,t.as||[]),s=o?(l,u)=>L$t(l,u,o,i):nE,a;return this.value?a=this.value:(r=r.addAll(),a=this.value={}),r.visit(r.REM,l=>{let u=xr(l);n.rem.push(a[u]),a[u]=null}),r.visit(r.ADD,l=>{let u=s(l,Dn({}));a[xr(l)]=u,n.add.push(u)}),r.visit(r.MOD,l=>{n.mod.push(s(l,a[xr(l)]))}),n}});Dt(I$e,et,{transform(t,r){return this.value=t.value,t.modified("value")?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});Pue.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};B$t=1e-14;Dt(Pue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=t.as||["prob","value"];if(this.value&&!t.modified()&&!r.changed())return n.source=this.value,n;let i=r.materialize(r.SOURCE).source,s=_ue(i,t.groupby,t.field),a=(t.groupby||[]).map(ki),l=[],u=t.step||.01,c=t.probs||Qs(u/2,1-B$t,u),f=c.length;return s.forEach(d=>{let p=f9(d,c);for(let h=0;h<f;++h){let m={};for(let g=0;g<a.length;++g)m[a[g]]=d.dims[g];m[o[0]]=c[h],m[o[1]]=p[h],l.push(Dn(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});Dt(D$e,et,{transform(t,r){let n,o;return this.value?o=this.value:(n=r=r.addAll(),o=this.value={}),t.derive&&(n=r.fork(r.NO_SOURCE),r.visit(r.REM,i=>{let s=xr(i);n.rem.push(o[s]),o[s]=null}),r.visit(r.ADD,i=>{let s=r9(i);o[xr(i)]=s,n.add.push(s)}),r.visit(r.MOD,i=>{let s=o[xr(i)];for(let a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});jue.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Dt(jue,et,{transform(t,r){let n=r.fork(r.NO_SOURCE),o=t.modified("size"),i=t.size,s=this.value.reduce((f,d)=>(f[xr(d)]=1,f),{}),a=this.value,l=this.count,u=0;function c(f){let d,p;a.length<i?a.push(f):(p=~~((l+1)*rd()),p<a.length&&p>=u&&(d=a[p],s[xr(d)]&&n.rem.push(d),a[p]=f)),++l}if(r.rem.length&&(r.visit(r.REM,f=>{let d=xr(f);s[d]&&(s[d]=-1,n.rem.push(f)),--l}),a=a.filter(f=>s[xr(f)]!==-1)),(r.rem.length||o)&&a.length<i&&r.source&&(u=l=a.length,r.visit(r.SOURCE,f=>{s[xr(f)]||c(f)}),u=-1),o&&a.length>i){let f=a.length-i;for(let d=0;d<f;++d)s[xr(a[d])]=-1,n.rem.push(a[d]);a=a.slice(f)}return r.mod.length&&r.visit(r.MOD,f=>{s[xr(f)]&&n.mod.push(f)}),r.add.length&&r.visit(r.ADD,c),(r.add.length||u<0)&&(n.add=a.filter(f=>!s[xr(f)])),this.count=l,this.value=n.source=a,n}});Lue.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Dt(Lue,et,{transform(t,r){if(this.value&&!t.modified())return;let n=r.materialize().fork(r.MOD),o=t.as||"data";return n.rem=this.value?r.rem.concat(this.value):r.rem,this.value=Qs(t.start,t.stop,t.step||1).map(i=>{let s={};return s[o]=i,Dn(s)}),n.add=r.add.concat(this.value),n}});Dt(N$e,et,{transform(t,r){return this.value=r.source,r.changed()?r.fork(r.NO_SOURCE|r.NO_FIELDS):r.StopPropagation}});O$e=["unit0","unit1"];Bue.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:I9,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:O$e}]};Dt(Bue,et,{transform(t,r){let n=t.field,o=t.interval!==!1,i=t.timezone==="utc",s=this._floor(t,r),a=(i?$x:Bx)(s.unit).offset,l=t.as||O$e,u=l[0],c=l[1],f=s.step,d=s.start||1/0,p=s.stop||-1/0,h=r.ADD;return(t.modified()||r.modified(Sa(n)))&&(r=r.reflow(!0),h=r.SOURCE,d=1/0,p=-1/0),r.visit(h,m=>{let g=n(m),y,b;g==null?(m[u]=null,o&&(m[c]=null)):(m[u]=y=b=s(g),o&&(m[c]=b=a(y,f)),y<d&&(d=y),b>p&&(p=b))}),s.start=d,s.stop=p,r.modifies(o?l:u)},_floor(t,r){let n=t.timezone==="utc",{units:o,step:i}=t.units?{units:t.units,step:t.step||1}:due({extent:t.extent||Oh(r.materialize(r.SOURCE).source,t.field),maxbins:t.maxbins}),s=D9(o),a=this.value||{},l=(n?aue:sue)(s,i);return l.unit=zn(s),l.units=s,l.step=i,l.start=a.start,l.stop=a.stop,this.value=l}});Dt(F$e,et,{transform(t,r){let n=r.dataflow,o=t.field,i=this.value,s=l=>i.set(o(l),l),a=!0;return t.modified("field")||r.modified(o.fields)?(i.clear(),r.visit(r.SOURCE,s)):r.changed()?(r.visit(r.REM,l=>i.delete(o(l))),r.visit(r.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r.fork()}});Dt(R$e,et,{transform(t,r){(!this.value||t.modified("field")||t.modified("sort")||r.changed()||t.sort&&r.modified(t.sort.fields))&&(this.value=(t.sort?r.source.slice().sort(L0(t.sort)):r.source).map(t.field))}});WP={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:r=>{let n=r.index,o=r.data;return n&&r.compare(o[n-1],o[n])?++t:t}}},percent_rank:function(){let t=WP.rank(),r=t.next;return{init:t.init,next:n=>(r(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:r=>{let n=r.data,o=r.compare,i=r.index;if(t<i){for(;i+1<n.length&&!o(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,r){r=+r,r>0||pt("ntile num must be greater than zero.");let n=WP.cume_dist(),o=n.next;return{init:n.init,next:i=>Math.ceil(r*o(i))}},lag:function(t,r){return r=+r||1,{next:n=>{let o=n.index-r;return o>=0?t(n.data[o]):null}}},lead:function(t,r){return r=+r||1,{next:n=>{let o=n.index+r,i=n.data;return o<i.length?t(i[o]):null}}},first_value:function(t){return{next:r=>t(r.data[r.i0])}},last_value:function(t){return{next:r=>t(r.data[r.i1-1])}},nth_value:function(t,r){return r=+r,r>0||pt("nth_value nth must be greater than zero."),{next:n=>{let o=n.i0+(r-1);return o<n.i1?t(n.data[o]):null}}},prev_value:function(t){let r;return{init:()=>r=null,next:n=>{let o=t(n.data[n.index]);return o!=null?r=o:r}}},next_value:function(t){let r,n;return{init:()=>(r=null,n=-1),next:o=>{let i=o.data;return o.index<=n?r:(n=z$t(t,i,o.index))<0?(n=i.length,r=null):r=t(i[n])}}}};U$t=Object.keys(WP);P$e=M$e.prototype;P$e.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};P$e.update=function(t,r){let n=this.cell,o=this.windows,i=t.data,s=o&&o.length,a;if(n){for(a=t.p0;a<t.i0;++a)n.rem(i[a]);for(a=t.p1;a<t.i1;++a)n.add(i[a]);n.set(r)}for(a=0;a<s;++a)o[a].update(t,r)};$ue.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:U$t.concat(qP)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Dt($ue,et,{transform(t,r){this.stamp=r.stamp;let n=t.modified(),o=L0(t.sort),i=mue(t.groupby),s=l=>this.group(i(l)),a=this.state;(!a||n)&&(a=this.state=new M$e(t)),n||r.modified(a.inputs)?(this.value={},r.visit(r.SOURCE,l=>s(l).add(l))):(r.visit(r.REM,l=>s(l).remove(l)),r.visit(r.ADD,l=>s(l).add(l)));for(let l=0,u=this._mlen;l<u;++l)G$t(this._mods[l],a,o,t);return this._mlen=0,this._mods=[],r.reflow(n).modifies(a.outputs)},group(t){let r=this.value[t];return r||(r=this.value[t]=h$e(xr),r.stamp=-1),r.stamp<this.stamp&&(r.stamp=this.stamp,this._mods[this._mlen++]=r),r}})});function ED(t,r,n){return t.fields=r||[],t.fname=n,t}function H$t(t){return t.length===1?Y$t(t[0]):X$t(t)}function iu(t){throw Error(t)}function K$t(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||iu("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&iu("Access path missing closing bracket: "+t),o&&iu("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Uue(t,r,n){let o=K$t(t);return t=o.length===1?o[0]:t,ED((n&&n.get||H$t)(o),[t],r||t)}function zx(t){return t===Object(t)}function Gc(t){return t[t.length-1]}function Gue(t){return t==null||t===""?null:+t}function TD(t){return t!=null?ic(t)?t:[t]:[]}function Fw(t){return typeof t=="function"}function Ux(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function pp(t,r){return J$t.call(t,r)}function Vx(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),Ux(o,n)}function B$e(t){return t&&Fw(t[Symbol.iterator])}function AD(t){return typeof t=="string"}function $$e(t){t=+t||e6t;let r,n,o,i=()=>{r={},n={},o=0},s=(a,l)=>(++o>t&&(n=r,r={},o=1),r[a]=l);return i(),{clear:i,has:a=>pp(r,a)||pp(n,a),get:a=>pp(r,a)?r[a]:pp(n,a)?s(a,n[a]):void 0,set:(a,l)=>pp(r,a)?r[a]=l:s(a,l)}}function R9(t){return ic(t)?"["+t.map(R9)+"]":zx(t)||AD(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function HP(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var Y$t,X$t,VTn,L$e,Z$t,Q$t,Vue,GTn,ic,J$t,e6t,gE=D(()=>{"use strict";Y$t=t=>function(r){return r[t]},X$t=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};VTn=Uue("id"),L$e=ED(t=>t,[],"identity"),Z$t=ED(()=>0,[],"zero"),Q$t=ED(()=>1,[],"one"),Vue=ED(()=>!0,[],"true"),GTn=ED(()=>!1,[],"false"),ic=Array.isArray;J$t=Object.prototype.hasOwnProperty;e6t=1e4});function Un(t){return function(){return t}}var YP=D(()=>{"use strict"});function U$e(t){return t>1?0:t<-1?Mw:Math.acos(t)}function que(t){return t>=1?XP:t<=-1?-XP:Math.asin(t)}var Wue,Il,Rw,z$e,M9,$h,Gx,Ya,Mw,XP,P9,j9=D(()=>{"use strict";Wue=Math.abs,Il=Math.atan2,Rw=Math.cos,z$e=Math.max,M9=Math.min,$h=Math.sin,Gx=Math.sqrt,Ya=1e-12,Mw=Math.PI,XP=Mw/2,P9=2*Mw});function V$e(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function r6t(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return V$e;let n=10**r;return function(o){this._+=o[0];for(let i=1,s=o.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+o[i]}}function KP(){return new bE}var Hue,Yue,yE,t6t,bE,G$e=D(()=>{"use strict";Hue=Math.PI,Yue=2*Hue,yE=1e-6,t6t=Yue-yE;bE=class{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?V$e:r6t(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,o,i){this._append`Q${+r},${+n},${this._x1=+o},${this._y1=+i}`}bezierCurveTo(r,n,o,i,s,a){this._append`C${+r},${+n},${+o},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(r,n,o,i,s){if(r=+r,n=+n,o=+o,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=o-r,c=i-n,f=a-r,d=l-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(p>yE)if(!(Math.abs(d*u-c*f)>yE)||!s)this._append`L${this._x1=r},${this._y1=n}`;else{let h=o-a,m=i-l,g=u*u+c*c,y=h*h+m*m,b=Math.sqrt(g),x=Math.sqrt(p),v=s*Math.tan((Hue-Math.acos((g+p-y)/(2*b*x)))/2),w=v/x,_=v/b;Math.abs(w-1)>yE&&this._append`L${r+w*f},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*h>f*m)},${this._x1=r+_*u},${this._y1=n+_*c}`}}arc(r,n,o,i,s,a){if(r=+r,n=+n,o=+o,a=!!a,o<0)throw new Error(`negative radius: ${o}`);let l=o*Math.cos(i),u=o*Math.sin(i),c=r+l,f=n+u,d=1^a,p=a?i-s:s-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>yE||Math.abs(this._y1-f)>yE)&&this._append`L${c},${f}`,o&&(p<0&&(p=p%Yue+Yue),p>t6t?this._append`A${o},${o},0,1,${d},${r-l},${n-u}A${o},${o},0,1,${d},${this._x1=c},${this._y1=f}`:p>yE&&this._append`A${o},${o},0,${+(p>=Hue)},${d},${this._x1=r+o*Math.cos(s)},${this._y1=n+o*Math.sin(s)}`)}rect(r,n,o,i){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${o=+o}v${+i}h${-o}Z`}toString(){return this._}};KP.prototype=bE.prototype});var Xue=D(()=>{"use strict";G$e()});function Pw(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{let o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);r=o}return t},()=>new bE(r)}var ZP=D(()=>{"use strict";Xue()});function n6t(t){return t.innerRadius}function o6t(t){return t.outerRadius}function i6t(t){return t.startAngle}function s6t(t){return t.endAngle}function a6t(t){return t&&t.padAngle}function l6t(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<Ya))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function L9(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/Gx(l*l+u*u),f=c*u,d=-c*l,p=t+f,h=r+d,m=n+f,g=o+d,y=(p+m)/2,b=(h+g)/2,x=m-p,v=g-h,w=x*x+v*v,_=i-s,C=p*g-m*h,S=(v<0?-1:1)*Gx(z$e(0,_*_*w-C*C)),E=(C*v-x*S)/w,A=(-C*x-v*S)/w,N=(C*v+x*S)/w,k=(-C*x+v*S)/w,R=E-y,I=A-b,L=N-y,j=k-b;return R*R+I*I>L*L+j*j&&(E=N,A=k),{cx:E,cy:A,x01:-f,y01:-d,x11:E*(i/_-1),y11:A*(i/_-1)}}function Kue(){var t=n6t,r=o6t,n=Un(0),o=null,i=i6t,s=s6t,a=a6t,l=null,u=Pw(c);function c(){var f,d,p=+t.apply(this,arguments),h=+r.apply(this,arguments),m=i.apply(this,arguments)-XP,g=s.apply(this,arguments)-XP,y=Wue(g-m),b=g>m;if(l||(l=f=u()),h<p&&(d=h,h=p,p=d),!(h>Ya))l.moveTo(0,0);else if(y>P9-Ya)l.moveTo(h*Rw(m),h*$h(m)),l.arc(0,0,h,m,g,!b),p>Ya&&(l.moveTo(p*Rw(g),p*$h(g)),l.arc(0,0,p,g,m,b));else{var x=m,v=g,w=m,_=g,C=y,S=y,E=a.apply(this,arguments)/2,A=E>Ya&&(o?+o.apply(this,arguments):Gx(p*p+h*h)),N=M9(Wue(h-p)/2,+n.apply(this,arguments)),k=N,R=N,I,L;if(A>Ya){var j=que(A/p*$h(E)),M=que(A/h*$h(E));(C-=j*2)>Ya?(j*=b?1:-1,w+=j,_-=j):(C=0,w=_=(m+g)/2),(S-=M*2)>Ya?(M*=b?1:-1,x+=M,v-=M):(S=0,x=v=(m+g)/2)}var V=h*Rw(x),G=h*$h(x),U=p*Rw(_),Y=p*$h(_);if(N>Ya){var X=h*Rw(v),pe=h*$h(v),$=p*Rw(w),O=p*$h(w),z;if(y<Mw)if(z=l6t(V,G,$,O,X,pe,U,Y)){var q=V-z[0],ee=G-z[1],ae=X-z[0],Q=pe-z[1],le=1/$h(U$e((q*ae+ee*Q)/(Gx(q*q+ee*ee)*Gx(ae*ae+Q*Q)))/2),ie=Gx(z[0]*z[0]+z[1]*z[1]);k=M9(N,(p-ie)/(le-1)),R=M9(N,(h-ie)/(le+1))}else k=R=0}S>Ya?R>Ya?(I=L9($,O,V,G,h,R,b),L=L9(X,pe,U,Y,h,R,b),l.moveTo(I.cx+I.x01,I.cy+I.y01),R<N?l.arc(I.cx,I.cy,R,Il(I.y01,I.x01),Il(L.y01,L.x01),!b):(l.arc(I.cx,I.cy,R,Il(I.y01,I.x01),Il(I.y11,I.x11),!b),l.arc(0,0,h,Il(I.cy+I.y11,I.cx+I.x11),Il(L.cy+L.y11,L.cx+L.x11),!b),l.arc(L.cx,L.cy,R,Il(L.y11,L.x11),Il(L.y01,L.x01),!b))):(l.moveTo(V,G),l.arc(0,0,h,x,v,!b)):l.moveTo(V,G),!(p>Ya)||!(C>Ya)?l.lineTo(U,Y):k>Ya?(I=L9(U,Y,X,pe,p,-k,b),L=L9(V,G,$,O,p,-k,b),l.lineTo(I.cx+I.x01,I.cy+I.y01),k<N?l.arc(I.cx,I.cy,k,Il(I.y01,I.x01),Il(L.y01,L.x01),!b):(l.arc(I.cx,I.cy,k,Il(I.y01,I.x01),Il(I.y11,I.x11),!b),l.arc(0,0,p,Il(I.cy+I.y11,I.cx+I.x11),Il(L.cy+L.y11,L.cx+L.x11),b),l.arc(L.cx,L.cy,k,Il(L.y11,L.x11),Il(L.y01,L.x01),!b))):l.arc(0,0,p,_,w,b)}if(l.closePath(),f)return l=null,f+""||null}return c.centroid=function(){var f=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Mw/2;return[Rw(d)*f,$h(d)*f]},c.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:Un(+f),c):t},c.outerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:Un(+f),c):r},c.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:Un(+f),c):n},c.padRadius=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Un(+f),c):o},c.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:Un(+f),c):i},c.endAngle=function(f){return arguments.length?(s=typeof f=="function"?f:Un(+f),c):s},c.padAngle=function(f){return arguments.length?(a=typeof f=="function"?f:Un(+f),c):a},c.context=function(f){return arguments.length?(l=f??null,c):l},c}var W$e=D(()=>{"use strict";YP();j9();ZP()});function B9(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var oAn,Zue=D(()=>{"use strict";oAn=Array.prototype.slice});function q$e(t){this._context=t}function xE(t){return new q$e(t)}var $9=D(()=>{"use strict";q$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function z9(t){return t[0]}function U9(t){return t[1]}var Que=D(()=>{"use strict"});function QP(t,r){var n=Un(!0),o=null,i=xE,s=null,a=Pw(l);t=typeof t=="function"?t:t===void 0?z9:Un(t),r=typeof r=="function"?r:r===void 0?U9:Un(r);function l(u){var c,f=(u=B9(u)).length,d,p=!1,h;for(o==null&&(s=i(h=a())),c=0;c<=f;++c)!(c<f&&n(d=u[c],c,u))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(d,c,u),+r(d,c,u));if(h)return s=null,h+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Un(+u),l):t},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:Un(+u),l):r},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Un(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,o!=null&&(s=i(o)),l):i},l.context=function(u){return arguments.length?(u==null?o=s=null:s=i(o=u),l):o},l}var Jue=D(()=>{"use strict";Zue();YP();$9();ZP();Que()});function V9(t,r,n){var o=null,i=Un(!0),s=null,a=xE,l=null,u=Pw(c);t=typeof t=="function"?t:t===void 0?z9:Un(+t),r=typeof r=="function"?r:r===void 0?Un(0):Un(+r),n=typeof n=="function"?n:n===void 0?U9:Un(+n);function c(d){var p,h,m,g=(d=B9(d)).length,y,b=!1,x,v=new Array(g),w=new Array(g);for(s==null&&(l=a(x=u())),p=0;p<=g;++p){if(!(p<g&&i(y=d[p],p,d))===b)if(b=!b)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=p-1;m>=h;--m)l.point(v[m],w[m]);l.lineEnd(),l.areaEnd()}b&&(v[p]=+t(y,p,d),w[p]=+r(y,p,d),l.point(o?+o(y,p,d):v[p],n?+n(y,p,d):w[p]))}if(x)return l=null,x+""||null}function f(){return QP().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Un(+d),o=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Un(+d),c):t},c.x1=function(d){return arguments.length?(o=d==null?null:typeof d=="function"?d:Un(+d),c):o},c.y=function(d){return arguments.length?(r=typeof d=="function"?d:Un(+d),n=null,c):r},c.y0=function(d){return arguments.length?(r=typeof d=="function"?d:Un(+d),c):r},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Un(+d),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(r)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(o).y(r)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Un(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(l=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=l=null:l=a(s=d),c):s},c}var H$e=D(()=>{"use strict";Zue();YP();$9();Jue();ZP();Que()});var Y$e,X$e=D(()=>{"use strict";j9();Y$e={draw(t,r){let n=Gx(r/Mw);t.moveTo(n,0),t.arc(0,0,n,0,P9)}}});function G9(t,r){let n=null,o=Pw(i);t=typeof t=="function"?t:Un(t||Y$e),r=typeof r=="function"?r:Un(r===void 0?64:+r);function i(){let s;if(n||(n=s=o()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Un(s),i):t},i.size=function(s){return arguments.length?(r=typeof s=="function"?s:Un(+s),i):r},i.context=function(s){return arguments.length?(n=s??null,i):n},i}var K$e=D(()=>{"use strict";YP();ZP();X$e()});function hp(){}var JP=D(()=>{"use strict"});function kD(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function ej(t){this._context=t}function ece(t){return new ej(t)}var tj=D(()=>{"use strict";ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kD(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function Z$e(t){this._context=t}function tce(t){return new Z$e(t)}var Q$e=D(()=>{"use strict";JP();tj();Z$e.prototype={areaStart:hp,areaEnd:hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:kD(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function J$e(t){this._context=t}function rce(t){return new J$e(t)}var e6e=D(()=>{"use strict";tj();J$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:kD(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function t6e(t,r){this._basis=new ej(t),this._beta=r}var nce,r6e=D(()=>{"use strict";tj();t6e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};nce=function t(r){function n(o){return r===1?new ej(o):new t6e(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function ID(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function W9(t,r){this._context=t,this._k=(1-r)/6}var oce,rj=D(()=>{"use strict";W9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ID(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:ID(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};oce=function t(r){function n(o){return new W9(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function q9(t,r){this._context=t,this._k=(1-r)/6}var ice,sce=D(()=>{"use strict";JP();rj();q9.prototype={areaStart:hp,areaEnd:hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:ID(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};ice=function t(r){function n(o){return new q9(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function H9(t,r){this._context=t,this._k=(1-r)/6}var ace,lce=D(()=>{"use strict";rj();H9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ID(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};ace=function t(r){function n(o){return new H9(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function nj(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>Ya){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Ya){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function n6e(t,r){this._context=t,this._alpha=r}var uce,Y9=D(()=>{"use strict";j9();rj();n6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:nj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};uce=function t(r){function n(o){return r?new n6e(o,r):new W9(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function o6e(t,r){this._context=t,this._alpha=r}var cce,i6e=D(()=>{"use strict";sce();JP();Y9();o6e.prototype={areaStart:hp,areaEnd:hp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:nj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};cce=function t(r){function n(o){return r?new o6e(o,r):new q9(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function s6e(t,r){this._context=t,this._alpha=r}var fce,a6e=D(()=>{"use strict";lce();Y9();s6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nj(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};fce=function t(r){function n(o){return r?new s6e(o,r):new H9(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function l6e(t){this._context=t}function dce(t){return new l6e(t)}var u6e=D(()=>{"use strict";JP();l6e.prototype={areaStart:hp,areaEnd:hp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function c6e(t){return t<0?-1:1}function f6e(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(c6e(s)+c6e(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function d6e(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function pce(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function X9(t){this._context=t}function p6e(t){this._context=new h6e(t)}function h6e(t){this._context=t}function hce(t){return new X9(t)}function mce(t){return new p6e(t)}var m6e=D(()=>{"use strict";X9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pce(this,this._t0,d6e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,pce(this,d6e(this,n=f6e(this,t,r)),n);break;default:pce(this,this._t0,n=f6e(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(p6e.prototype=Object.create(X9.prototype)).point=function(t,r){X9.prototype.point.call(this,r,t)};h6e.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function y6e(t){this._context=t}function g6e(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function gce(t){return new y6e(t)}var b6e=D(()=>{"use strict";y6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=g6e(t),i=g6e(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function K9(t,r){this._context=t,this._t=r}function yce(t){return new K9(t,.5)}function bce(t){return new K9(t,0)}function xce(t){return new K9(t,1)}var x6e=D(()=>{"use strict";K9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var v6e=D(()=>{"use strict";W$e();H$e();Jue();K$e();Q$e();e6e();tj();r6e();sce();lce();rj();i6e();a6e();Y9();u6e();$9();m6e();b6e();x6e()});function Wc(t,r){if(typeof document<"u"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=r,n}return null}var Z9,DD=D(()=>{"use strict";Z9=()=>typeof Image<"u"?Image:null});function S6e(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function c6t(t,r){var n=S6e(t);return function(o,i){return r(n(o),i,t)}}function _6e(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function qc(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function f6t(t){return t<0?"-"+qc(-t,6):t>9999?"+"+qc(t,6):qc(t,4)}function d6t(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":f6t(t.getUTCFullYear(),4)+"-"+qc(t.getUTCMonth()+1,2)+"-"+qc(t.getUTCDate(),2)+(i?"T"+qc(r,2)+":"+qc(n,2)+":"+qc(o,2)+"."+qc(i,3)+"Z":o?"T"+qc(r,2)+":"+qc(n,2)+":"+qc(o,2)+"Z":n||r?"T"+qc(r,2)+":"+qc(n,2)+"Z":"")}function Sce(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?c6t(y,p):S6e(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===oj&&--m,d.charCodeAt(m-1)===_ce&&--m;function w(){if(x)return vce;if(v)return v=!1,w6e;var C,S=g,E;if(d.charCodeAt(S)===wce){for(;g++<m&&d.charCodeAt(g)!==wce||d.charCodeAt(++g)===wce;);return(C=g)>=m?x=!0:(E=d.charCodeAt(g++))===oj?v=!0:E===_ce&&(v=!0,d.charCodeAt(g)===oj&&++g),d.slice(S+1,C-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(C=g++))===oj)v=!0;else if(E===_ce)v=!0,d.charCodeAt(g)===oj&&++g;else if(E!==n)continue;return d.slice(S,C)}return x=!0,d.slice(S,m)}for(;(b=w())!==vce;){for(var _=[];b!==w6e&&b!==vce;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=_6e(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=_6e(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?d6t(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var w6e,vce,wce,oj,_ce,C6e=D(()=>{"use strict";w6e={},vce={},wce=34,oj=10,_ce=13});var E6e=D(()=>{"use strict";C6e()});function U0(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var Q9=D(()=>{"use strict"});function Cce(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var T6e=D(()=>{"use strict"});function vE(t){let r,n,o;t.length!==2?(r=U0,n=(l,u)=>U0(t(l),u),o=(l,u)=>t(l)-u):(r=t===U0||t===Cce?t:p6t,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function p6t(){return 0}var Ece=D(()=>{"use strict";Q9();T6e()});function ij(t){return t===null?NaN:+t}var Tce=D(()=>{"use strict"});var A6e,sj,h6t,m6t,zh,k6e=D(()=>{"use strict";Q9();Ece();Tce();A6e=vE(U0),sj=A6e.right,h6t=A6e.left,m6t=vE(ij).center,zh=sj});function J9(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=g6t?10:s>=y6t?5:s>=b6t?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?J9(t,r,n*2):[l,u,c]}function wE(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?J9(r,t,n):J9(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function aj(t,r,n){return r=+r,t=+t,n=+n,J9(t,r,n)[2]}function jw(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?aj(r,t,n):aj(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var g6t,y6t,b6t,I6e=D(()=>{"use strict";g6t=Math.sqrt(50),y6t=Math.sqrt(10),b6t=Math.sqrt(2)});function Ace(t,r,n=ij){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var D6e=D(()=>{"use strict";Tce()});function eV(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var N6e=D(()=>{"use strict"});var mp=D(()=>{"use strict";k6e();Q9();Ece();D6e();N6e();I6e();sP()});function O6e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _E(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var lj=D(()=>{"use strict"});function V0(t){return t=_E(Math.abs(t)),t?t[1]:NaN}var uj=D(()=>{"use strict";lj()});function F6e(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var R6e=D(()=>{"use strict"});function M6e(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var P6e=D(()=>{"use strict"});function ld(t){if(!(r=x6t.exec(t)))throw new Error("invalid format: "+t);var r;return new tV({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function tV(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var x6t,kce=D(()=>{"use strict";x6t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;ld.prototype=tV.prototype;tV.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function j6e(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var L6e=D(()=>{"use strict"});function B6e(t,r){var n=_E(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(Ice=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+_E(t,Math.max(0,r+s-1))[0]}var Ice,Dce=D(()=>{"use strict";lj()});function Nce(t,r){var n=_E(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var $6e=D(()=>{"use strict";lj()});var Oce,z6e=D(()=>{"use strict";lj();Dce();$6e();Oce={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:O6e,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>Nce(t*100,r),r:Nce,s:B6e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function Fce(t){return t}var U6e=D(()=>{"use strict"});function Rce(t){var r=t.grouping===void 0||t.thousands===void 0?Fce:F6e(V6e.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Fce:M6e(V6e.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=ld(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):Oce[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=g==="$"?o:/[%p]/.test(_)?a:"",E=Oce[_],A=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(k){var R=C,I=S,L,j,M;if(_==="c")I=E(k)+I,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=j6e(k)),V&&+k==0&&m!=="+"&&(V=!1),R=(V?m==="("?m:l:m==="-"||m==="("?"":m)+R,I=(_==="s"?G6e[8+Ice/3]:"")+I+(V&&m==="("?")":""),A){for(L=-1,j=k.length;++L<j;)if(M=k.charCodeAt(L),48>M||M>57){I=(M===46?i+k.slice(L+1):k.slice(L))+I,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=R.length+k.length+I.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-I.length:1/0),U=""),h){case"<":k=R+k+I+U;break;case"=":k=R+U+k+I;break;case"^":k=U.slice(0,G=U.length>>1)+R+k+I+U.slice(G);break;default:k=U+R+k+I;break}return s(k)}return N.toString=function(){return d+""},N}function f(d,p){var h=c((d=ld(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(V0(p)/3)))*3,g=Math.pow(10,-m),y=G6e[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var V6e,G6e,W6e=D(()=>{"use strict";uj();R6e();P6e();kce();L6e();z6e();Dce();U6e();V6e=Array.prototype.map,G6e=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function Mce(t){return rV=Rce(t),Lw=rV.format,ND=rV.formatPrefix,rV}var rV,Lw,ND,q6e=D(()=>{"use strict";W6e();Mce({thousands:",",grouping:[3],currency:["$",""]})});function cj(t){return Math.max(0,-V0(Math.abs(t)))}var H6e=D(()=>{"use strict";uj()});function fj(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(V0(r)/3)))*3-V0(Math.abs(t)))}var Y6e=D(()=>{"use strict";uj()});function dj(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,V0(r)-V0(t))+1}var X6e=D(()=>{"use strict";uj()});var nV=D(()=>{"use strict";q6e();kce();H6e();Y6e();X6e()});function si(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>si(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(Pce.setTime(+s),jce.setTime(+a),t(Pce),t(jce),Math.floor(n(Pce,jce))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var Pce,jce,Wx=D(()=>{"use strict";Pce=new Date,jce=new Date});var Uh,K6e,Lce=D(()=>{"use strict";Wx();Uh=si(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Uh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?si(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):Uh);K6e=Uh.range});var su,Z6e,Bce=D(()=>{"use strict";Wx();su=si(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),Z6e=su.range});var Bw,v6t,$w,w6t,$ce=D(()=>{"use strict";Wx();Bw=si(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),v6t=Bw.range,$w=si(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),w6t=$w.range});var zw,_6t,Uw,S6t,zce=D(()=>{"use strict";Wx();zw=si(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),_6t=zw.range,Uw=si(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),S6t=Uw.range});var Hc,C6t,gp,E6t,oV,T6t,Uce=D(()=>{"use strict";Wx();Hc=si(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),C6t=Hc.range,gp=si(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),E6t=gp.range,oV=si(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),T6t=oV.range});function EE(t){return si(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function TE(t){return si(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var yp,OD,J6e,eze,Vw,tze,rze,nze,A6t,k6t,I6t,D6t,N6t,O6t,bp,FD,oze,ize,Gw,sze,aze,lze,F6t,R6t,M6t,P6t,j6t,L6t,Vce=D(()=>{"use strict";Wx();yp=EE(0),OD=EE(1),J6e=EE(2),eze=EE(3),Vw=EE(4),tze=EE(5),rze=EE(6),nze=yp.range,A6t=OD.range,k6t=J6e.range,I6t=eze.range,D6t=Vw.range,N6t=tze.range,O6t=rze.range;bp=TE(0),FD=TE(1),oze=TE(2),ize=TE(3),Gw=TE(4),sze=TE(5),aze=TE(6),lze=bp.range,F6t=FD.range,R6t=oze.range,M6t=ize.range,P6t=Gw.range,j6t=sze.range,L6t=aze.range});var qx,B6t,Hx,$6t,Gce=D(()=>{"use strict";Wx();qx=si(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),B6t=qx.range,Hx=si(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),$6t=Hx.range});var sc,z6t,ac,U6t,Wce=D(()=>{"use strict";Wx();sc=si(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:si(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});z6t=sc.range,ac=si(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ac.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:si(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});U6t=ac.range});function cze(t,r,n,o,i,s){let a=[[su,1,1e3],[su,5,5*1e3],[su,15,15*1e3],[su,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=vE(([,,y])=>y).right(a,p);if(h===a.length)return t.every(jw(c/31536e6,f/31536e6,d));if(h===0)return Uh.every(Math.max(jw(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var qce,Hce,Yce,Xce,fze=D(()=>{"use strict";mp();Lce();Bce();$ce();zce();Uce();Vce();Gce();Wce();[qce,Hce]=cze(ac,Hx,bp,oV,Uw,$w),[Yce,Xce]=cze(sc,qx,yp,Hc,zw,Bw)});var hj=D(()=>{"use strict";Lce();Bce();$ce();zce();Uce();Vce();Gce();Wce();fze()});function Qce(t){return AE.setFullYear(t),AE.setMonth(0),AE.setDate(1),AE.setHours(0,0,0,0),AE}function H6t(t){return Hc.count(Qce(t.getFullYear())-1,t)}function dze(t){return yp.count(Qce(t.getFullYear())-1,t)}function Kce(t){return Qce(t).getDay()}function Y6t(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return gp.count(r-1,t)}function pze(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return bp.count(r-1,t)}function Zce(t){return AE.setTime(Date.UTC(t,0,1)),AE.getUTCDay()}function RD(t,r,n){return r+t*7-(n+6)%7}function Jce(t){return X6t[t]}function efe(t){return K6t[t]}var lc,qh,ud,Yc,Vh,W0,MD,Gh,Wh,q0,Yx,q6t,SDn,CDn,AE,EDn,TDn,ADn,kDn,X6t,K6t,mj,gj,yj,iV,Z6t,hze,Q6t,J6t,bj,xj,vj,ezt,tzt,mze,rzt,IDn,tfe=D(()=>{"use strict";gE();hj();lc="year",qh="quarter",ud="month",Yc="week",Vh="date",W0="day",MD="dayofyear",Gh="hours",Wh="minutes",q0="seconds",Yx="milliseconds",q6t=[lc,qh,ud,Yc,Vh,W0,MD,Gh,Wh,q0,Yx],SDn=q6t.reduce((t,r,n)=>(t[r]=1+n,t),{}),CDn={[lc]:"%Y ",[qh]:"Q%q ",[ud]:"%b ",[Vh]:"%d ",[Yc]:"W%U ",[W0]:"%a ",[MD]:"%j ",[Gh]:"%H:00",[Wh]:"00:%M",[q0]:":%S",[Yx]:".%L",[`${lc}-${ud}`]:"%Y-%m ",[`${lc}-${ud}-${Vh}`]:"%Y-%m-%d ",[`${Gh}-${Wh}`]:"%H:%M"},AE=new Date;EDn={[lc]:t=>t.getFullYear(),[qh]:t=>Math.floor(t.getMonth()/3),[ud]:t=>t.getMonth(),[Vh]:t=>t.getDate(),[Gh]:t=>t.getHours(),[Wh]:t=>t.getMinutes(),[q0]:t=>t.getSeconds(),[Yx]:t=>t.getMilliseconds(),[MD]:t=>H6t(t),[Yc]:t=>dze(t),[Yc+W0]:(t,r)=>RD(dze(t),t.getDay(),Kce(r)),[W0]:(t,r)=>RD(1,t.getDay(),Kce(r))},TDn={[qh]:t=>3*t,[Yc]:(t,r)=>RD(t,0,Kce(r))},ADn={[lc]:t=>t.getUTCFullYear(),[qh]:t=>Math.floor(t.getUTCMonth()/3),[ud]:t=>t.getUTCMonth(),[Vh]:t=>t.getUTCDate(),[Gh]:t=>t.getUTCHours(),[Wh]:t=>t.getUTCMinutes(),[q0]:t=>t.getUTCSeconds(),[Yx]:t=>t.getUTCMilliseconds(),[MD]:t=>Y6t(t),[Yc]:t=>pze(t),[W0]:(t,r)=>RD(1,t.getUTCDay(),Zce(r)),[Yc+W0]:(t,r)=>RD(pze(t),t.getUTCDay(),Zce(r))},kDn={[qh]:t=>3*t,[Yc]:(t,r)=>RD(t,0,Zce(r))},X6t={[lc]:sc,[qh]:qx.every(3),[ud]:qx,[Yc]:yp,[Vh]:Hc,[W0]:Hc,[MD]:Hc,[Gh]:zw,[Wh]:Bw,[q0]:su,[Yx]:Uh},K6t={[lc]:ac,[qh]:Hx.every(3),[ud]:Hx,[Yc]:bp,[Vh]:gp,[W0]:gp,[MD]:gp,[Gh]:Uw,[Wh]:$w,[q0]:su,[Yx]:Uh};mj=1e3,gj=mj*60,yj=gj*60,iV=yj*24,Z6t=iV*7,hze=iV*30,Q6t=iV*365,J6t=[lc,ud,Vh,Gh,Wh,q0,Yx],bj=J6t.slice(0,-1),xj=bj.slice(0,-1),vj=xj.slice(0,-1),ezt=vj.slice(0,-1),tzt=[lc,Yc],mze=[lc,ud],rzt=[lc],IDn=[[bj,1,mj],[bj,5,5*mj],[bj,15,15*mj],[bj,30,30*mj],[xj,1,gj],[xj,5,5*gj],[xj,15,15*gj],[xj,30,30*gj],[vj,1,yj],[vj,3,3*yj],[vj,6,6*yj],[vj,12,12*yj],[ezt,1,iV],[tzt,1,Z6t],[mze,1,hze],[mze,3,3*hze],[rzt,1,Q6t]]});function rfe(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nfe(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wj(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function sV(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=_j(i),f=Sj(i),d=_j(s),p=Sj(s),h=_j(a),m=Sj(a),g=_j(l),y=Sj(l),b=_j(u),x=Sj(u),v={a:V,A:G,b:U,B:Y,c:null,d:wze,e:wze,f:Ezt,g:Mzt,G:jzt,H:_zt,I:Szt,j:Czt,L:Tze,m:Tzt,M:Azt,p:X,q:pe,Q:Cze,s:Eze,S:kzt,u:Izt,U:Dzt,V:Nzt,w:Ozt,W:Fzt,x:null,X:null,y:Rzt,Y:Pzt,Z:Lzt,"%":Sze},w={a:$,A:O,b:z,B:q,c:null,d:_ze,e:_ze,f:Uzt,g:Qzt,G:e8t,H:Bzt,I:$zt,j:zzt,L:kze,m:Vzt,M:Gzt,p:ee,q:ae,Q:Cze,s:Eze,S:Wzt,u:qzt,U:Hzt,V:Yzt,w:Xzt,W:Kzt,x:null,X:null,y:Zzt,Y:Jzt,Z:t8t,"%":Sze},_={a:N,A:k,b:R,B:I,c:L,d:xze,e:xze,f:bzt,g:bze,G:yze,H:vze,I:vze,j:hzt,L:yzt,m:pzt,M:mzt,p:A,q:dzt,Q:vzt,s:wzt,S:gzt,u:azt,U:lzt,V:uzt,w:szt,W:czt,x:j,X:M,y:bze,Y:yze,Z:fzt,"%":xzt};v.x=C(n,v),v.X=C(o,v),v.c=C(r,v),w.x=C(n,w),w.X=C(o,w),w.c=C(r,w);function C(Q,le){return function(ie){var Z=[],ge=-1,ne=0,ye=Q.length,xe,Ne,Ae;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(Z.push(Q.slice(ne,ge)),(Ne=gze[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):Ne=xe==="e"?" ":"0",(Ae=le[xe])&&(xe=Ae(ie,Ne)),Z.push(xe),ne=ge+1);return Z.push(Q.slice(ne,ge)),Z.join("")}}function S(Q,le){return function(ie){var Z=wj(1900,void 0,1),ge=E(Z,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ne=nfe(wj(Z.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?FD.ceil(ne):FD(ne),ne=gp.offset(ne,(Z.V-1)*7),Z.y=ne.getUTCFullYear(),Z.m=ne.getUTCMonth(),Z.d=ne.getUTCDate()+(Z.w+6)%7):(ne=rfe(wj(Z.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?OD.ceil(ne):OD(ne),ne=Hc.offset(ne,(Z.V-1)*7),Z.y=ne.getFullYear(),Z.m=ne.getMonth(),Z.d=ne.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ye="Z"in Z?nfe(wj(Z.y,0,1)).getUTCDay():rfe(wj(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ye+5)%7:Z.w+Z.U*7-(ye+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,nfe(Z)):rfe(Z)}}function E(Q,le,ie,Z){for(var ge=0,ne=le.length,ye=ie.length,xe,Ne;ge<ne;){if(Z>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),Ne=_[xe in gze?le.charAt(ge++):xe],!Ne||(Z=Ne(Q,ie,Z))<0)return-1}else if(xe!=ie.charCodeAt(Z++))return-1}return Z}function A(Q,le,ie){var Z=c.exec(le.slice(ie));return Z?(Q.p=f.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function N(Q,le,ie){var Z=h.exec(le.slice(ie));return Z?(Q.w=m.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function k(Q,le,ie){var Z=d.exec(le.slice(ie));return Z?(Q.w=p.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function R(Q,le,ie){var Z=b.exec(le.slice(ie));return Z?(Q.m=x.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function I(Q,le,ie){var Z=g.exec(le.slice(ie));return Z?(Q.m=y.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function j(Q,le,ie){return E(Q,n,le,ie)}function M(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function Y(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function pe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function O(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=C(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=S(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=C(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=S(Q+="",!0);return le.toString=function(){return Q},le}}}function ao(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function izt(t){return t.replace(ozt,"\\$&")}function _j(t){return new RegExp("^(?:"+t.map(izt).join("|")+")","i")}function Sj(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function szt(t,r,n){var o=Xa.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function azt(t,r,n){var o=Xa.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function lzt(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function uzt(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function czt(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function yze(t,r,n){var o=Xa.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function bze(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function fzt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function dzt(t,r,n){var o=Xa.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function pzt(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function xze(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function hzt(t,r,n){var o=Xa.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function vze(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function mzt(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function gzt(t,r,n){var o=Xa.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function yzt(t,r,n){var o=Xa.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function bzt(t,r,n){var o=Xa.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function xzt(t,r,n){var o=nzt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function vzt(t,r,n){var o=Xa.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function wzt(t,r,n){var o=Xa.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function wze(t,r){return ao(t.getDate(),r,2)}function _zt(t,r){return ao(t.getHours(),r,2)}function Szt(t,r){return ao(t.getHours()%12||12,r,2)}function Czt(t,r){return ao(1+Hc.count(sc(t),t),r,3)}function Tze(t,r){return ao(t.getMilliseconds(),r,3)}function Ezt(t,r){return Tze(t,r)+"000"}function Tzt(t,r){return ao(t.getMonth()+1,r,2)}function Azt(t,r){return ao(t.getMinutes(),r,2)}function kzt(t,r){return ao(t.getSeconds(),r,2)}function Izt(t){var r=t.getDay();return r===0?7:r}function Dzt(t,r){return ao(yp.count(sc(t)-1,t),r,2)}function Aze(t){var r=t.getDay();return r>=4||r===0?Vw(t):Vw.ceil(t)}function Nzt(t,r){return t=Aze(t),ao(Vw.count(sc(t),t)+(sc(t).getDay()===4),r,2)}function Ozt(t){return t.getDay()}function Fzt(t,r){return ao(OD.count(sc(t)-1,t),r,2)}function Rzt(t,r){return ao(t.getFullYear()%100,r,2)}function Mzt(t,r){return t=Aze(t),ao(t.getFullYear()%100,r,2)}function Pzt(t,r){return ao(t.getFullYear()%1e4,r,4)}function jzt(t,r){var n=t.getDay();return t=n>=4||n===0?Vw(t):Vw.ceil(t),ao(t.getFullYear()%1e4,r,4)}function Lzt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+ao(r/60|0,"0",2)+ao(r%60,"0",2)}function _ze(t,r){return ao(t.getUTCDate(),r,2)}function Bzt(t,r){return ao(t.getUTCHours(),r,2)}function $zt(t,r){return ao(t.getUTCHours()%12||12,r,2)}function zzt(t,r){return ao(1+gp.count(ac(t),t),r,3)}function kze(t,r){return ao(t.getUTCMilliseconds(),r,3)}function Uzt(t,r){return kze(t,r)+"000"}function Vzt(t,r){return ao(t.getUTCMonth()+1,r,2)}function Gzt(t,r){return ao(t.getUTCMinutes(),r,2)}function Wzt(t,r){return ao(t.getUTCSeconds(),r,2)}function qzt(t){var r=t.getUTCDay();return r===0?7:r}function Hzt(t,r){return ao(bp.count(ac(t)-1,t),r,2)}function Ize(t){var r=t.getUTCDay();return r>=4||r===0?Gw(t):Gw.ceil(t)}function Yzt(t,r){return t=Ize(t),ao(Gw.count(ac(t),t)+(ac(t).getUTCDay()===4),r,2)}function Xzt(t){return t.getUTCDay()}function Kzt(t,r){return ao(FD.count(ac(t)-1,t),r,2)}function Zzt(t,r){return ao(t.getUTCFullYear()%100,r,2)}function Qzt(t,r){return t=Ize(t),ao(t.getUTCFullYear()%100,r,2)}function Jzt(t,r){return ao(t.getUTCFullYear()%1e4,r,4)}function e8t(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Gw(t):Gw.ceil(t),ao(t.getUTCFullYear()%1e4,r,4)}function t8t(){return"+0000"}function Sze(){return"%"}function Cze(t){return+t}function Eze(t){return Math.floor(+t/1e3)}var gze,Xa,nzt,ozt,Dze=D(()=>{"use strict";hj();gze={"-":"",_:" ",0:"0"},Xa=/^\s*\d+/,nzt=/^%/,ozt=/[\\^$*+?|[\]().{}]/g});function ofe(t){return PD=sV(t),jD=PD.format,aV=PD.parse,LD=PD.utcFormat,lV=PD.utcParse,PD}var PD,jD,aV,LD,lV,Nze=D(()=>{"use strict";Dze();ofe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var uV=D(()=>{"use strict";Nze()});function Cj(t){let r={};return n=>r[n]||(r[n]=t(n))}function r8t(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=n8t(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function n8t(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function o8t(t){let r=Cj(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=ld(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return r8t(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=ld(a??",f");let l=jw(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=fj(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=dj(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=cj(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function s8t(){return i8t=o8t({format:Lw,formatPrefix:ND})}function Oze(t,r,n){n=n||{},zx(n)||iu(`Invalid time multi-format specifier: ${n}`);let o=r(q0),i=r(Wh),s=r(Gh),a=r(Vh),l=r(Yc),u=r(ud),c=r(qh),f=r(lc),d=t(n[Yx]||".%L"),p=t(n[q0]||":%S"),h=t(n[Wh]||"%I:%M"),m=t(n[Gh]||"%I %p"),g=t(n[Vh]||n[W0]||"%a %d"),y=t(n[Yc]||"%b %d"),b=t(n[ud]||"%B"),x=t(n[qh]||"%B"),v=t(n[lc]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function a8t(t){let r=Cj(t.format),n=Cj(t.utcFormat);return{timeFormat:o=>AD(o)?r(o):Oze(r,Jce,o),utcFormat:o=>AD(o)?n(o):Oze(n,efe,o),timeParse:Cj(t.parse),utcParse:Cj(t.utcParse)}}function u8t(){return l8t=a8t({format:jD,parse:aV,utcFormat:LD,utcParse:lV})}var i8t,l8t,Fze=D(()=>{"use strict";mp();nV();tfe();gE();uV();s8t();u8t()});function p8t(t,r){return n=>({options:n||{},sanitize:m8t,load:h8t,fileAccess:!!r,file:g8t(r),http:b8t(t)})}function h8t(t,r){return Be(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function m8t(t,r){return Be(this,null,function*(){r=Ux({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=f8t.test(t.replace(d8t,""));(t==null||typeof t!="string"||!l)&&iu("Sanitize failure, invalid URI: "+R9(t));let u=c8t.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(Rze))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(Rze.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function g8t(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):y8t}function y8t(){return Be(this,null,function*(){iu("No file system access.")})}function b8t(t){return t?function(r,n){return Be(this,null,function*(){let o=Ux({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?Fw(s[i])?s[i]():s.text():iu(s.status+""+s.statusText)})}:x8t}function x8t(){return Be(this,null,function*(){iu("No HTTP fetch method available.")})}function Mze(t){let r=function(n,o){let i={delimiter:t};return ife(n,o?Ux(o,i):i)};return r.responseType="text",r}function ife(t,r){return r.header&&(t=r.header.map(R9).join(r.delimiter)+`
`+t),Sce(r.delimiter).parse(t+"")}function v8t(t){return typeof Buffer=="function"&&Fw(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function sfe(t,r){let n=r&&r.property?Uue(r.property):L$e;return zx(t)&&!v8t(t)?w8t(n(t),r):n(JSON.parse(t))}function w8t(t,r){return!ic(t)&&B$e(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function Pze(t,r){let n,o,i,s;return t=sfe(t,r),r&&r.feature?(n=XC,i=r.feature):r&&r.mesh?(n=KC,i=r.mesh,s=_8t[r.filter]):iu("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):iu("Invalid TopoJSON object: "+i),o&&o.features||[o]}var c8t,f8t,d8t,Rze,_8t,ZDn,afe,jze=D(()=>{"use strict";gE();E6e();P7();Fze();c8t=/^(data:|([A-Za-z]+:)?\/\/)/,f8t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,d8t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Rze="file://";ife.responseType="text";sfe.responseType="json";_8t={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};Pze.responseType="json";ZDn={dsv:ife,csv:Mze(","),tsv:Mze("	"),json:sfe,topojson:Pze},afe=p8t(typeof fetch<"u"&&fetch,null)});function ea(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function H0(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var cd=D(()=>{"use strict"});function kE(){var t=new D0,r=[],n=[],o=lfe;function i(s){let a=t.get(s);if(a===void 0){if(o!==lfe)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new D0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return kE(r,n).unknown(o)},ea.apply(i,arguments),i}var lfe,Lze=D(()=>{"use strict";mp();cd();lfe=Symbol("implicit")});function Xx(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function Ww(t,r){var n=Object.create(t.prototype);for(var o in r)n[o]=r[o];return n}var cV=D(()=>{"use strict"});function K0(){}function $ze(){return this.rgb().formatHex()}function D8t(){return qze(this).formatHsl()}function zze(){return this.rgb().formatRgb()}function Xc(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=S8t.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?Uze(r):n===3?new Ca(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?fV(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?fV(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=C8t.exec(t))?new Ca(r[1],r[2],r[3],1):(r=E8t.exec(t))?new Ca(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=T8t.exec(t))?fV(r[1],r[2],r[3],r[4]):(r=A8t.exec(t))?fV(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=k8t.exec(t))?Wze(r[1],r[2]/100,r[3]/100,1):(r=I8t.exec(t))?Wze(r[1],r[2]/100,r[3]/100,r[4]):Bze.hasOwnProperty(t)?Uze(Bze[t]):t==="transparent"?new Ca(NaN,NaN,NaN,0):null}function Uze(t){return new Ca(t>>16&255,t>>8&255,t&255,1)}function fV(t,r,n,o){return o<=0&&(t=r=n=NaN),new Ca(t,r,n,o)}function Tj(t){return t instanceof K0||(t=Xc(t)),t?(t=t.rgb(),new Ca(t.r,t.g,t.b,t.opacity)):new Ca}function ta(t,r,n,o){return arguments.length===1?Tj(t):new Ca(t,r,n,o??1)}function Ca(t,r,n,o){this.r=+t,this.g=+r,this.b=+n,this.opacity=+o}function Vze(){return"#"+ufe(this.r)+ufe(this.g)+ufe(this.b)}function Gze(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function ufe(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Wze(t,r,n,o){return o<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new Y0(t,r,n,o)}function qze(t){if(t instanceof Y0)return new Y0(t.h,t.s,t.l,t.opacity);if(t instanceof K0||(t=Xc(t)),!t)return new Y0;if(t instanceof Y0)return t;t=t.rgb();var r=t.r/255,n=t.g/255,o=t.b/255,i=Math.min(r,n,o),s=Math.max(r,n,o),a=NaN,l=s-i,u=(s+i)/2;return l?(r===s?a=(n-o)/l+(n<o)*6:n===s?a=(o-r)/l+2:a=(r-n)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new Y0(a,l,u,t.opacity)}function fd(t,r,n,o){return arguments.length===1?qze(t):new Y0(t,r,n,o??1)}function Y0(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}function cfe(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}var qw,IE,BD,Ej,X0,S8t,C8t,E8t,T8t,A8t,k8t,I8t,Bze,dV=D(()=>{"use strict";cV();qw=.7,IE=1/qw,BD="\\s*([+-]?\\d+)\\s*",Ej="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",X0="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S8t=/^#([0-9a-f]{3,8})$/,C8t=new RegExp("^rgb\\("+[BD,BD,BD]+"\\)$"),E8t=new RegExp("^rgb\\("+[X0,X0,X0]+"\\)$"),T8t=new RegExp("^rgba\\("+[BD,BD,BD,Ej]+"\\)$"),A8t=new RegExp("^rgba\\("+[X0,X0,X0,Ej]+"\\)$"),k8t=new RegExp("^hsl\\("+[Ej,X0,X0]+"\\)$"),I8t=new RegExp("^hsla\\("+[Ej,X0,X0,Ej]+"\\)$"),Bze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xx(K0,Xc,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:$ze,formatHex:$ze,formatHsl:D8t,formatRgb:zze,toString:zze});Xx(Ca,ta,Ww(K0,{brighter:function(t){return t=t==null?IE:Math.pow(IE,t),new Ca(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?qw:Math.pow(qw,t),new Ca(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vze,formatHex:Vze,formatRgb:Gze,toString:Gze}));Xx(Y0,fd,Ww(K0,{brighter:function(t){return t=t==null?IE:Math.pow(IE,t),new Y0(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?qw:Math.pow(qw,t),new Y0(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*r,i=2*n-o;return new Ca(cfe(t>=240?t-240:t+120,i,o),cfe(t,i,o),cfe(t<120?t+240:t-120,i,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}))});var pV,hV,ffe=D(()=>{"use strict";pV=Math.PI/180,hV=180/Math.PI});function Qze(t){if(t instanceof Z0)return new Z0(t.l,t.a,t.b,t.opacity);if(t instanceof Kx)return Jze(t);t instanceof Ca||(t=Tj(t));var r=mfe(t.r),n=mfe(t.g),o=mfe(t.b),i=dfe((.2225045*r+.7168786*n+.0606169*o)/Yze),s,a;return r===n&&n===o?s=a=i:(s=dfe((.4360747*r+.3850649*n+.1430804*o)/Hze),a=dfe((.0139322*r+.0971045*n+.7141733*o)/Xze)),new Z0(116*i-16,500*(s-i),200*(i-a),t.opacity)}function Kc(t,r,n,o){return arguments.length===1?Qze(t):new Z0(t,r,n,o??1)}function Z0(t,r,n,o){this.l=+t,this.a=+r,this.b=+n,this.opacity=+o}function dfe(t){return t>N8t?Math.pow(t,1/3):t/Zze+Kze}function pfe(t){return t>$D?t*t*t:Zze*(t-Kze)}function hfe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mfe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function O8t(t){if(t instanceof Kx)return new Kx(t.h,t.c,t.l,t.opacity);if(t instanceof Z0||(t=Qze(t)),t.a===0&&t.b===0)return new Kx(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var r=Math.atan2(t.b,t.a)*hV;return new Kx(r<0?r+360:r,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function dd(t,r,n,o){return arguments.length===1?O8t(t):new Kx(t,r,n,o??1)}function Kx(t,r,n,o){this.h=+t,this.c=+r,this.l=+n,this.opacity=+o}function Jze(t){if(isNaN(t.h))return new Z0(t.l,0,0,t.opacity);var r=t.h*pV;return new Z0(t.l,Math.cos(r)*t.c,Math.sin(r)*t.c,t.opacity)}var mV,Hze,Yze,Xze,Kze,$D,Zze,N8t,e8e=D(()=>{"use strict";cV();dV();ffe();mV=18,Hze=.96422,Yze=1,Xze=.82521,Kze=4/29,$D=6/29,Zze=3*$D*$D,N8t=$D*$D*$D;Xx(Z0,Kc,Ww(K0,{brighter:function(t){return new Z0(this.l+mV*(t??1),this.a,this.b,this.opacity)},darker:function(t){return new Z0(this.l-mV*(t??1),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return r=Hze*pfe(r),t=Yze*pfe(t),n=Xze*pfe(n),new Ca(hfe(3.1338561*r-1.6168667*t-.4906146*n),hfe(-.9787684*r+1.9161415*t+.033454*n),hfe(.0719453*r-.2289914*t+1.4052427*n),this.opacity)}}));Xx(Kx,dd,Ww(K0,{brighter:function(t){return new Kx(this.h,this.c,this.l+mV*(t??1),this.opacity)},darker:function(t){return new Kx(this.h,this.c,this.l-mV*(t??1),this.opacity)},rgb:function(){return Jze(this).rgb()}}))});function F8t(t){if(t instanceof DE)return new DE(t.h,t.s,t.l,t.opacity);t instanceof Ca||(t=Tj(t));var r=t.r/255,n=t.g/255,o=t.b/255,i=(n8e*o+t8e*r-r8e*n)/(n8e+t8e-r8e),s=o-i,a=(Aj*(n-i)-yfe*s)/gV,l=Math.sqrt(a*a+s*s)/(Aj*i*(1-i)),u=l?Math.atan2(a,s)*hV-120:NaN;return new DE(u<0?u+360:u,l,i,t.opacity)}function xp(t,r,n,o){return arguments.length===1?F8t(t):new DE(t,r,n,o??1)}function DE(t,r,n,o){this.h=+t,this.s=+r,this.l=+n,this.opacity=+o}var o8e,gfe,yfe,gV,Aj,t8e,r8e,n8e,i8e=D(()=>{"use strict";cV();dV();ffe();o8e=-.14861,gfe=1.78277,yfe=-.29227,gV=-.90649,Aj=1.97294,t8e=Aj*gV,r8e=Aj*gfe,n8e=gfe*yfe-gV*o8e;Xx(DE,xp,Ww(K0,{brighter:function(t){return t=t==null?IE:Math.pow(IE,t),new DE(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?qw:Math.pow(qw,t),new DE(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*pV,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),o=Math.cos(t),i=Math.sin(t);return new Ca(255*(r+n*(o8e*o+gfe*i)),255*(r+n*(yfe*o+gV*i)),255*(r+n*(Aj*o)),this.opacity)}}))});var Fs=D(()=>{"use strict";dV();e8e();i8e()});function bfe(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function yV(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return bfe((n-o/r)*r,a,i,s,l)}}var bV=D(()=>{"use strict"});function xV(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return bfe((n-o/r)*r,i,s,a,l)}}var xfe=D(()=>{"use strict";bV()});var zD,vfe=D(()=>{"use strict";zD=t=>()=>t});function s8e(t,r){return function(n){return t+n*r}}function R8t(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function Hw(t,r){var n=r-t;return n?s8e(t,n>180||n<-180?n-360*Math.round(n/360):n):zD(isNaN(t)?r:t)}function a8e(t){return(t=+t)==1?Gi:function(r,n){return n-r?R8t(r,n,t):zD(isNaN(r)?n:r)}}function Gi(t,r){var n=r-t;return n?s8e(t,n):zD(isNaN(t)?r:t)}var NE=D(()=>{"use strict";vfe()});function l8e(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=ta(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var kj,u8e,c8e,wfe=D(()=>{"use strict";Fs();bV();xfe();NE();kj=function t(r){var n=a8e(r);function o(i,s){var a=n((i=ta(i)).r,(s=ta(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Gi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);u8e=l8e(yV),c8e=l8e(xV)});function UD(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function vV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var wV=D(()=>{"use strict"});function f8e(t,r){return(vV(r)?UD:_fe)(t,r)}function _fe(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=Zc(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var Sfe=D(()=>{"use strict";Ij();wV()});function _V(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var Cfe=D(()=>{"use strict"});function au(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Dj=D(()=>{"use strict"});function SV(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=Zc(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var Efe=D(()=>{"use strict";Ij()});function M8t(t){return function(){return t}}function P8t(t){return function(r){return t(r)+""}}function CV(t,r){var n=Afe.lastIndex=Tfe.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=Afe.exec(t))&&(i=Tfe.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:au(o,i)})),n=Tfe.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?P8t(u[0].x):M8t(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var Afe,Tfe,kfe=D(()=>{"use strict";Dj();Afe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tfe=new RegExp(Afe.source,"g")});function Zc(t,r){var n=typeof r,o;return r==null||n==="boolean"?zD(r):(n==="number"?au:n==="string"?(o=Xc(r))?(r=o,kj):CV:r instanceof Xc?kj:r instanceof Date?_V:vV(r)?UD:Array.isArray(r)?_fe:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?SV:au)(t,r)}var Ij=D(()=>{"use strict";Fs();wfe();Sfe();Cfe();Dj();Efe();kfe();vfe();wV()});function d8e(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var p8e=D(()=>{"use strict"});function h8e(t,r){var n=Hw(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var m8e=D(()=>{"use strict";NE()});function Yw(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var g8e=D(()=>{"use strict"});function Ife(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*y8e,skewX:Math.atan(u)*y8e,scaleX:a,scaleY:l}}var y8e,EV,b8e=D(()=>{"use strict";y8e=180/Math.PI,EV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function x8e(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?EV:Ife(r.a,r.b,r.c,r.d,r.e,r.f)}function v8e(t){return t==null?EV:(TV||(TV=document.createElementNS("http://www.w3.org/2000/svg","g")),TV.setAttribute("transform",t),(t=TV.transform.baseVal.consolidate())?(t=t.matrix,Ife(t.a,t.b,t.c,t.d,t.e,t.f)):EV)}var TV,w8e=D(()=>{"use strict";b8e()});function _8e(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:au(c,d)},{i:g-2,x:au(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:au(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:au(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:au(c,d)},{i:g-2,x:au(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var S8e,C8e,E8e=D(()=>{"use strict";Dj();w8e();S8e=_8e(x8e,"px, ","px)","deg)"),C8e=_8e(v8e,", ",")",")")});function T8e(t){return((t=Math.exp(t))+1/t)/2}function L8t(t){return((t=Math.exp(t))-1/t)/2}function B8t(t){return((t=Math.exp(2*t))-1)/(t+1)}var j8t,A8e,k8e=D(()=>{"use strict";j8t=1e-12;A8e=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<j8t)b=Math.log(p/c)/r,y=function(S){return[l+S*h,u+S*m,c*Math.exp(r*S*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-_)/r,y=function(S){var E=S*b,A=T8e(_),N=c/(n*x)*(A*B8t(r*E+_)-L8t(_));return[l+N*h,u+N*m,c*A/T8e(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function I8e(t){return function(r,n){var o=t((r=fd(r)).h,(n=fd(n)).h),i=Gi(r.s,n.s),s=Gi(r.l,n.l),a=Gi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var D8e,N8e,O8e=D(()=>{"use strict";Fs();NE();D8e=I8e(Hw),N8e=I8e(Gi)});function Dfe(t,r){var n=Gi((t=Kc(t)).l,(r=Kc(r)).l),o=Gi(t.a,r.a),i=Gi(t.b,r.b),s=Gi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var F8e=D(()=>{"use strict";Fs();NE()});function R8e(t){return function(r,n){var o=t((r=dd(r)).h,(n=dd(n)).h),i=Gi(r.c,n.c),s=Gi(r.l,n.l),a=Gi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var M8e,P8e,j8e=D(()=>{"use strict";Fs();NE();M8e=R8e(Hw),P8e=R8e(Gi)});function L8e(t){return function r(n){n=+n;function o(i,s){var a=t((i=xp(i)).h,(s=xp(s)).h),l=Gi(i.s,s.s),u=Gi(i.l,s.l),c=Gi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var B8e,$8e,z8e=D(()=>{"use strict";Fs();NE();B8e=L8e(Hw),$8e=L8e(Gi)});function OE(t,r){r===void 0&&(r=t,t=Zc);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var U8e=D(()=>{"use strict";Ij()});function V8e(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var G8e=D(()=>{"use strict"});var Nfe={};fn(Nfe,{interpolate:()=>Zc,interpolateArray:()=>f8e,interpolateBasis:()=>yV,interpolateBasisClosed:()=>xV,interpolateCubehelix:()=>B8e,interpolateCubehelixLong:()=>$8e,interpolateDate:()=>_V,interpolateDiscrete:()=>d8e,interpolateHcl:()=>M8e,interpolateHclLong:()=>P8e,interpolateHsl:()=>D8e,interpolateHslLong:()=>N8e,interpolateHue:()=>h8e,interpolateLab:()=>Dfe,interpolateNumber:()=>au,interpolateNumberArray:()=>UD,interpolateObject:()=>SV,interpolateRgb:()=>kj,interpolateRgbBasis:()=>u8e,interpolateRgbBasisClosed:()=>c8e,interpolateRound:()=>Yw,interpolateString:()=>CV,interpolateTransformCss:()=>S8e,interpolateTransformSvg:()=>C8e,interpolateZoom:()=>A8e,piecewise:()=>OE,quantize:()=>V8e});var Nj=D(()=>{"use strict";Ij();Sfe();bV();xfe();Cfe();p8e();m8e();Dj();wV();Efe();g8e();kfe();E8e();k8e();wfe();O8e();F8e();j8e();z8e();U8e();G8e()});function Ofe(t){return function(){return t}}var W8e=D(()=>{"use strict"});function VD(t){return+t}var Ffe=D(()=>{"use strict"});function Dl(t){return t}function Rfe(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:Ofe(isNaN(r)?NaN:.5)}function $8t(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function z8t(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=Rfe(i,o),s=n(a,s)):(o=Rfe(o,i),s=n(s,a)),function(l){return s(o(l))}}function U8t(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=Rfe(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=zh(t,l,1,o)-1;return s[u](i[u](l))}}function Q0(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function FE(){var t=q8e,r=q8e,n=Zc,o,i,s,a=Dl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Dl&&(a=$8t(t[0],t[p-1])),l=p>2?U8t:z8t,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),au)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,VD),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=Yw,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Dl,f()):a!==Dl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function Oj(){return FE()(Dl,Dl)}var q8e,Xw=D(()=>{"use strict";mp();Nj();W8e();Ffe();q8e=[0,1]});function GD(t,r,n,o){var i=jw(t,r,n),s;switch(o=ld(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=fj(i,a))&&(o.precision=s),ND(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=dj(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=cj(i))&&(o.precision=s-(o.type==="%")*2);break}}return Lw(o)}var Mfe=D(()=>{"use strict";mp();nV()});function pd(t){var r=t.domain;return t.ticks=function(n){var o=r();return wE(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return GD(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=aj(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function Fj(){var t=Oj();return t.copy=function(){return Q0(t,Fj())},ea.apply(t,arguments),pd(t)}var Kw=D(()=>{"use strict";mp();Xw();cd();Mfe()});function Rj(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,VD),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return Rj(t).unknown(r)},t=arguments.length?Array.from(t,VD):[0,1],pd(n)}var H8e=D(()=>{"use strict";Kw();Ffe()});function Mj(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var Pfe=D(()=>{"use strict"});function Y8e(t){return Math.log(t)}function X8e(t){return Math.exp(t)}function V8t(t){return-Math.log(-t)}function G8t(t){return-Math.exp(-t)}function W8t(t){return isFinite(t)?+("1e"+t):t<0?0:t}function q8t(t){return t===10?W8t:t===Math.E?Math.exp:r=>Math.pow(t,r)}function H8t(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function K8e(t){return(r,n)=>-t(-r,n)}function Pj(t){let r=t(Y8e,X8e),n=r.domain,o=10,i,s;function a(){return i=H8t(o),s=q8t(o),n()[0]<0?(i=K8e(i),s=K8e(s),t(V8t,G8t)):t(Y8e,X8e),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),h=i(f),m,g,y=l==null?10:+l,b=[];if(!(o%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(m=1;m<o;++m)if(g=p<0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=h;++p)for(m=o-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=wE(c,f,y))}else b=wE(p,h,Math.min(h-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=ld(u)).precision==null&&(u.trim=!0),u=Lw(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(Mj(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function jj(){let t=Pj(FE()).domain([1,10]);return t.copy=()=>Q0(t,jj()).base(t.base()),ea.apply(t,arguments),t}var AV=D(()=>{"use strict";mp();nV();Pfe();Xw();cd()});function Z8e(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function Q8e(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function Lj(t){var r=1,n=t(Z8e(r),Q8e(r));return n.constant=function(o){return arguments.length?t(Z8e(r=+o),Q8e(r)):r},pd(n)}function Bj(){var t=Lj(FE());return t.copy=function(){return Q0(t,Bj()).constant(t.constant())},ea.apply(t,arguments)}var kV=D(()=>{"use strict";Kw();Xw();cd()});function J8e(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function Y8t(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function X8t(t){return t<0?-t*t:t*t}function $j(t){var r=t(Dl,Dl),n=1;function o(){return n===1?t(Dl,Dl):n===.5?t(Y8t,X8t):t(J8e(n),J8e(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},pd(r)}function WD(){var t=$j(FE());return t.copy=function(){return Q0(t,WD()).exponent(t.exponent())},ea.apply(t,arguments),t}function jfe(){return WD.apply(null,arguments).exponent(.5)}var IV=D(()=>{"use strict";Kw();Xw();cd()});function zj(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=Ace(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[zh(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(U0),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return zj().domain(t).range(r).unknown(o)},ea.apply(s,arguments)}var eUe=D(()=>{"use strict";mp();cd()});function Uj(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[zh(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return Uj().domain([t,r]).range(i).unknown(s)},ea.apply(pd(a),arguments)}var tUe=D(()=>{"use strict";mp();Kw();cd()});function Vj(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[zh(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Vj().domain(t).range(r).unknown(n)},ea.apply(i,arguments)}var rUe=D(()=>{"use strict";mp();cd()});function K8t(t){return new Date(t)}function Z8t(t){return t instanceof Date?+t:+new Date(+t)}function DV(t,r,n,o,i,s,a,l,u,c){var f=Oj(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(C){return(u(C)<C?h:l(C)<C?m:a(C)<C?g:s(C)<C?y:o(C)<C?i(C)<C?b:x:n(C)<C?v:w)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,Z8t)):p().map(K8t)},f.ticks=function(C){var S=p();return t(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?_:c(S)},f.nice=function(C){var S=p();return(!C||typeof C.range!="function")&&(C=r(S[0],S[S.length-1],C??10)),C?p(Mj(S,C)):f},f.copy=function(){return Q0(f,DV(t,r,n,o,i,s,a,l,u,c))},f}function NV(){return ea.apply(DV(Yce,Xce,sc,qx,yp,Hc,zw,Bw,su,jD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Lfe=D(()=>{"use strict";hj();uV();Xw();cd();Pfe()});function OV(){return ea.apply(DV(qce,Hce,ac,Hx,bp,gp,Uw,$w,su,LD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var nUe=D(()=>{"use strict";hj();uV();Lfe();cd()});function FV(){var t=0,r=1,n,o,i,s,a=Dl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(Zc),c.rangeRound=f(Yw),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function Zx(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function qD(){var t=pd(FV()(Dl));return t.copy=function(){return Zx(t,qD())},H0.apply(t,arguments)}function RV(){var t=Pj(FV()).domain([1,10]);return t.copy=function(){return Zx(t,RV()).base(t.base())},H0.apply(t,arguments)}function MV(){var t=Lj(FV());return t.copy=function(){return Zx(t,MV()).constant(t.constant())},H0.apply(t,arguments)}function Gj(){var t=$j(FV());return t.copy=function(){return Zx(t,Gj()).exponent(t.exponent())},H0.apply(t,arguments)}function Bfe(){return Gj.apply(null,arguments).exponent(.5)}var $fe=D(()=>{"use strict";Nj();Xw();cd();Kw();AV();kV();IV()});function PV(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Dl,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=OE(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(Zc),h.rangeRound=m(Yw),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function Wj(){var t=pd(PV()(Dl));return t.copy=function(){return Zx(t,Wj())},H0.apply(t,arguments)}function jV(){var t=Pj(PV()).domain([.1,1,10]);return t.copy=function(){return Zx(t,jV()).base(t.base())},H0.apply(t,arguments)}function LV(){var t=Lj(PV());return t.copy=function(){return Zx(t,LV()).constant(t.constant())},H0.apply(t,arguments)}function qj(){var t=$j(PV());return t.copy=function(){return Zx(t,qj()).exponent(t.exponent())},H0.apply(t,arguments)}function zfe(){return qj.apply(null,arguments).exponent(.5)}var oUe=D(()=>{"use strict";Nj();Xw();cd();Kw();AV();$fe();kV();IV()});var Ufe=D(()=>{"use strict";H8e();Kw();AV();kV();Lze();IV();eUe();tUe();rUe();Lfe();nUe();$fe();oUe();Mfe()});function ra(t){for(var r=t.length/6|0,n=new Array(r),o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}var Hh=D(()=>{"use strict"});var Hj,iUe=D(()=>{"use strict";Hh();Hj=ra("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")});var Yj,sUe=D(()=>{"use strict";Hh();Yj=ra("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")});var Xj,aUe=D(()=>{"use strict";Hh();Xj=ra("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")});var Kj,lUe=D(()=>{"use strict";Hh();Kj=ra("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0")});var Zj,uUe=D(()=>{"use strict";Hh();Zj=ra("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")});var Qj,cUe=D(()=>{"use strict";Hh();Qj=ra("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")});var Jj,fUe=D(()=>{"use strict";Hh();Jj=ra("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")});var eL,dUe=D(()=>{"use strict";Hh();eL=ra("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")});var tL,pUe=D(()=>{"use strict";Hh();tL=ra("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")});var rL,hUe=D(()=>{"use strict";Hh();rL=ra("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")});function Vfe(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function BV(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return Vfe((n-o/r)*r,a,i,s,l)}}var $V=D(()=>{"use strict"});function zV(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return Vfe((n-o/r)*r,i,s,a,l)}}var Gfe=D(()=>{"use strict";$V()});var HD,Wfe=D(()=>{"use strict";HD=t=>()=>t});function mUe(t,r){return function(n){return t+n*r}}function J8t(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function Zw(t,r){var n=r-t;return n?mUe(t,n>180||n<-180?n-360*Math.round(n/360):n):HD(isNaN(t)?r:t)}function gUe(t){return(t=+t)==1?Wi:function(r,n){return n-r?J8t(r,n,t):HD(isNaN(r)?n:r)}}function Wi(t,r){var n=r-t;return n?mUe(t,n):HD(isNaN(t)?r:t)}var RE=D(()=>{"use strict";Wfe()});function yUe(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=ta(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var nL,bUe,xUe,qfe=D(()=>{"use strict";Fs();$V();Gfe();RE();nL=function t(r){var n=gUe(r);function o(i,s){var a=n((i=ta(i)).r,(s=ta(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Wi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);bUe=yUe(BV),xUe=yUe(zV)});function YD(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function UV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var VV=D(()=>{"use strict"});function vUe(t,r){return(UV(r)?YD:Hfe)(t,r)}function Hfe(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=lu(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var Yfe=D(()=>{"use strict";oL();VV()});function GV(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var Xfe=D(()=>{"use strict"});function uu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var iL=D(()=>{"use strict"});function WV(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=lu(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var Kfe=D(()=>{"use strict";oL()});function eUt(t){return function(){return t}}function tUt(t){return function(r){return t(r)+""}}function qV(t,r){var n=Qfe.lastIndex=Zfe.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=Qfe.exec(t))&&(i=Zfe.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:uu(o,i)})),n=Zfe.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?tUt(u[0].x):eUt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var Qfe,Zfe,Jfe=D(()=>{"use strict";iL();Qfe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zfe=new RegExp(Qfe.source,"g")});function lu(t,r){var n=typeof r,o;return r==null||n==="boolean"?HD(r):(n==="number"?uu:n==="string"?(o=Xc(r))?(r=o,nL):qV:r instanceof Xc?nL:r instanceof Date?GV:UV(r)?YD:Array.isArray(r)?Hfe:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?WV:uu)(t,r)}var oL=D(()=>{"use strict";Fs();qfe();Yfe();Xfe();iL();Kfe();Jfe();Wfe();VV()});function wUe(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var _Ue=D(()=>{"use strict"});function SUe(t,r){var n=Zw(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var CUe=D(()=>{"use strict";RE()});function J0(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var EUe=D(()=>{"use strict"});function ede(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*TUe,skewX:Math.atan(u)*TUe,scaleX:a,scaleY:l}}var TUe,HV,AUe=D(()=>{"use strict";TUe=180/Math.PI,HV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function kUe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?HV:ede(r.a,r.b,r.c,r.d,r.e,r.f)}function IUe(t){return t==null?HV:(YV||(YV=document.createElementNS("http://www.w3.org/2000/svg","g")),YV.setAttribute("transform",t),(t=YV.transform.baseVal.consolidate())?(t=t.matrix,ede(t.a,t.b,t.c,t.d,t.e,t.f)):HV)}var YV,DUe=D(()=>{"use strict";AUe()});function NUe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:uu(c,d)},{i:g-2,x:uu(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:uu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:uu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:uu(c,d)},{i:g-2,x:uu(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var OUe,FUe,RUe=D(()=>{"use strict";iL();DUe();OUe=NUe(kUe,"px, ","px)","deg)"),FUe=NUe(IUe,", ",")",")")});function MUe(t){return((t=Math.exp(t))+1/t)/2}function nUt(t){return((t=Math.exp(t))-1/t)/2}function oUt(t){return((t=Math.exp(2*t))-1)/(t+1)}var rUt,PUe,jUe=D(()=>{"use strict";rUt=1e-12;PUe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<rUt)b=Math.log(p/c)/r,y=function(S){return[l+S*h,u+S*m,c*Math.exp(r*S*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-_)/r,y=function(S){var E=S*b,A=MUe(_),N=c/(n*x)*(A*oUt(r*E+_)-nUt(_));return[l+N*h,u+N*m,c*A/MUe(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function LUe(t){return function(r,n){var o=t((r=fd(r)).h,(n=fd(n)).h),i=Wi(r.s,n.s),s=Wi(r.l,n.l),a=Wi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var BUe,$Ue,zUe=D(()=>{"use strict";Fs();RE();BUe=LUe(Zw),$Ue=LUe(Wi)});function tde(t,r){var n=Wi((t=Kc(t)).l,(r=Kc(r)).l),o=Wi(t.a,r.a),i=Wi(t.b,r.b),s=Wi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var UUe=D(()=>{"use strict";Fs();RE()});function VUe(t){return function(r,n){var o=t((r=dd(r)).h,(n=dd(n)).h),i=Wi(r.c,n.c),s=Wi(r.l,n.l),a=Wi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var GUe,WUe,qUe=D(()=>{"use strict";Fs();RE();GUe=VUe(Zw),WUe=VUe(Wi)});function HUe(t){return function r(n){n=+n;function o(i,s){var a=t((i=xp(i)).h,(s=xp(s)).h),l=Wi(i.s,s.s),u=Wi(i.l,s.l),c=Wi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var YUe,XUe,KUe=D(()=>{"use strict";Fs();RE();YUe=HUe(Zw),XUe=HUe(Wi)});function ME(t,r){r===void 0&&(r=t,t=lu);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var ZUe=D(()=>{"use strict";oL()});function QUe(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var JUe=D(()=>{"use strict"});var rde={};fn(rde,{interpolate:()=>lu,interpolateArray:()=>vUe,interpolateBasis:()=>BV,interpolateBasisClosed:()=>zV,interpolateCubehelix:()=>YUe,interpolateCubehelixLong:()=>XUe,interpolateDate:()=>GV,interpolateDiscrete:()=>wUe,interpolateHcl:()=>GUe,interpolateHclLong:()=>WUe,interpolateHsl:()=>BUe,interpolateHslLong:()=>$Ue,interpolateHue:()=>SUe,interpolateLab:()=>tde,interpolateNumber:()=>uu,interpolateNumberArray:()=>YD,interpolateObject:()=>WV,interpolateRgb:()=>nL,interpolateRgbBasis:()=>bUe,interpolateRgbBasisClosed:()=>xUe,interpolateRound:()=>J0,interpolateString:()=>qV,interpolateTransformCss:()=>OUe,interpolateTransformSvg:()=>FUe,interpolateZoom:()=>PUe,piecewise:()=>ME,quantize:()=>QUe});var PE=D(()=>{"use strict";oL();Yfe();$V();Gfe();Xfe();_Ue();CUe();iL();VV();Kfe();EUe();Jfe();RUe();jUe();qfe();zUe();UUe();qUe();KUe();ZUe();JUe()});var nde=D(()=>{"use strict";iUe();sUe();aUe();lUe();uUe();cUe();fUe();dUe();pUe();hUe()});function sUt(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function dUt(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function pUt(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function fde(){let t=kE().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=sUt(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=eV(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,sj(h,g)-1),x=g===y?b:sj(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return fde().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function o7e(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return o7e(r())},t}function hUt(){return o7e(fde().paddingInner(1))}function gUt(t){return mUt.call(t,Gue)}function i7e(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(zh(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=gUt(o),n):t.slice()},n.range=function(o){return arguments.length?(r=yUt.call(o),n):r.slice()},n.tickFormat=function(o,i){return GD(t[0],Gc(t),o??10,i)},n.copy=function(){return i7e().domain(n.domain()).range(n.range())},n}function xUt(t){return t[bUt]=!0,t}function vUt(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?dUt(s):s.invertExtent?pUt(s):void 0),s.type=t,xUt(s)};return o.metadata=HP(TD(n)),o}function xi(t,r,n){return arguments.length>1?(KV.set(t,vUt(t,r,n)),this):wUt(t)?KV.get(t):void 0}function wUt(t){return KV.has(t)}function ZV(t,r){let n=KV.get(t);return n&&n.metadata[r]}function dde(t){return ZV(t,uL)}function _Ut(t){return ZV(t,cL)}function SUt(t){return ZV(t,Qw)}function CUt(t){return ZV(t,cde)}function EUt(t,r,n){return OE(TUt(r||"rgb",n),t)}function TUt(t,r){let n=Nfe[AUt(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function AUt(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function s7e(t){if(ic(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function a7e(t,r){for(let n in t)DUt(n,r(t[n]))}function DUt(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(e7e[t]=r,this):e7e[t]}function PUt(t,r,n){let o=t.range(),i=o[0],s=Gc(o),a=RUt;if(i>s&&(o=s,s=i,i=o,a=MUt),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],Gc(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function l7e(t,r){return t.bins?PUt(t,t.bins,r):t.ticks?t.ticks(r):t.domain()}function jUt(t,r,n,o,i,s){let a=r.type,l=FUt;if(a===sL||i===sL)l=t.timeFormat(o);else if(a===aL||i===aL)l=t.utcFormat(o);else if(SUt(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=u7e(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function u7e(t,r,n){let o=l7e(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function LUt(t,r){return t.bins?zUt(t.bins):t.type===Qw?u7e(t,r,!0):ode[t.type]?$Ut(t[ode[t.type]]()):l7e(t,r)}function BUt(t,r,n){let o=r[c7e[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function $Ut(t){let r=[-1/0].concat(t);return r.max=1/0,r}function zUt(t){let r=t.slice(0,-1);return r.max=Gc(t),r}function VUt(t,r,n,o,i,s,a){let l=c7e[r.type]&&s!==sL&&s!==aL?BUt(t,r,i):jUt(t,r,n,i,s,a);return o===NUt&&UUt(r)?GUt(l):o===OUt?WUt(l):qUt(l)}function HUt(t,r,n,o){let i=o||r.type;return AD(n)&&CUt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===sL?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===aL?t.utcFormat("%A, %d %B %Y, %X UTC"):VUt(t,r,5,null,n,o,!0)}function pde(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=HUt(t,r,n.format,n.formatType);if(_Ut(r.type)){let s=LUt(r).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(dde(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${l}`}else{let s=r.domain();return`values from ${i(s[0])} to ${i(Gc(s))}`}}var aUt,ide,Qw,sde,ade,lde,sL,aL,XD,lL,XV,ude,n7e,lUt,uUt,cUt,fUt,Ka,uL,cL,Yh,cde,mUt,yUt,KV,bUt,kUt,IUt,e7e,NUt,OUt,FUt,RUt,MUt,ode,c7e,UUt,GUt,t7e,WUt,qUt,r7e,f7e=D(()=>{"use strict";gE();mp();Ufe();Ufe();Nj();nde();tfe();aUt="identity",ide="linear",Qw="log",sde="pow",ade="sqrt",lde="symlog",sL="time",aL="utc",XD="sequential",lL="diverging",XV="quantile",ude="quantize",n7e="threshold",lUt="ordinal",uUt="point",cUt="band",fUt="bin-ordinal",Ka="continuous",uL="discrete",cL="discretizing",Yh="interpolating",cde="temporal";mUt=Array.prototype.map;yUt=Array.prototype.slice;KV=new Map,bUt=Symbol("vega_scale");xi(aUt,Rj);xi(ide,Fj,Ka);xi(Qw,jj,[Ka,Qw]);xi(sde,WD,Ka);xi(ade,jfe,Ka);xi(lde,Bj,Ka);xi(sL,NV,[Ka,cde]);xi(aL,OV,[Ka,cde]);xi(XD,qD,[Ka,Yh]);xi(`${XD}-${ide}`,qD,[Ka,Yh]);xi(`${XD}-${Qw}`,RV,[Ka,Yh,Qw]);xi(`${XD}-${sde}`,Gj,[Ka,Yh]);xi(`${XD}-${ade}`,Bfe,[Ka,Yh]);xi(`${XD}-${lde}`,MV,[Ka,Yh]);xi(`${lL}-${ide}`,Wj,[Ka,Yh]);xi(`${lL}-${Qw}`,jV,[Ka,Yh,Qw]);xi(`${lL}-${sde}`,qj,[Ka,Yh]);xi(`${lL}-${ade}`,zfe,[Ka,Yh]);xi(`${lL}-${lde}`,LV,[Ka,Yh]);xi(XV,zj,[cL,XV]);xi(ude,Uj,cL);xi(n7e,Vj,cL);xi(fUt,i7e,[uL,cL]);xi(lUt,kE,uL);xi(cUt,fde,uL);xi(uUt,hUt,uL);kUt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},IUt={accent:Yj,category10:Hj,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Xj,observable10:Kj,paired:Zj,pastel1:Qj,pastel2:Jj,set1:eL,set2:tL,set3:rL,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};e7e={};a7e(IUt,s7e);a7e(kUt,t=>EUt(s7e(t)));NUt="symbol",OUt="discrete",FUt=t=>ic(t)?t.map(r=>String(r)):String(t),RUt=(t,r)=>t[1]-r[1],MUt=(t,r)=>r[1]-t[1];ode={[XV]:"quantiles",[ude]:"thresholds",[n7e]:"domain"},c7e={[XV]:"quantiles",[ude]:"domain"};UUt=t=>ode[t.type]||t.bins;GUt=t=>(r,n,o)=>{let i=t7e(o[n+1],t7e(o.max,1/0)),s=r7e(r,t),a=r7e(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},t7e=(t,r)=>t??r,WUt=t=>(r,n)=>n?t(r):null,qUt=t=>r=>t(r),r7e=(t,r)=>Number.isFinite(t)?r(t):null});function Mde(t){return t&&t.gradient}function R7e(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?aG:"";return i||(i=t.id="gradient_"+YUt++,o==="radial"?(t.x1=ey(t.x1,.5),t.y1=ey(t.y1,.5),t.r1=ey(t.r1,0),t.x2=ey(t.x2,.5),t.y2=ey(t.y2,.5),t.r2=ey(t.r2,.5),s=aG):(t.x1=ey(t.x1,0),t.y1=ey(t.y1,0),t.x2=ey(t.x2,1),t.y2=ey(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function ey(t,r){return t??r}function M7e(t,r,n){var o=pp(d7e,t)&&d7e[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function P7e(t){let r=[];return(t.match(KUt)||[]).forEach(o=>{let i=o[0],s=i.toLowerCase(),a=XUt[s],l=e7t(s,a,o.slice(1).trim()),u=l.length;if(u<a||u&&u%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(r.push([i,...l.slice(0,a)]),u!==a){s==="m"&&(i=i==="M"?"L":"l");for(let c=a;c<u;c+=a)r.push([i,...l.slice(c,c+a)])}}),r}function e7t(t,r,n){let o=[];for(let i=0;r&&i<n.length;)for(let s=0;s<r;++s){let a=t==="a"&&(s===3||s===4)?JUt:ZUt,l=n.slice(i).match(a);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");i+=l[0].length,o.push(+l[0]);let u=n.slice(i).match(QUt);u!==null&&(i+=u[0].length)}return o}function r7t(t,r,n,o,i,s,a,l,u){let c=j7e.call(arguments);if(hde[c])return hde[c];let f=a*o_,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let h=p*(l-t)*.5+d*(u-r)*.5,m=p*(u-r)*.5-d*(l-t)*.5,g=h*h/(n*n)+m*m/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,C=y*t+b*r,S=x*t+v*r,A=1/((C-w)*(C-w)+(S-_)*(S-_))-.25;A<0&&(A=0);let N=Math.sqrt(A);s==i&&(N=-N);let k=.5*(w+C)-N*(S-_),R=.5*(_+S)+N*(C-w),I=Math.atan2(_-R,w-k),j=Math.atan2(S-R,C-k)-I;j<0&&s===1?j+=ty:j>0&&s===0&&(j-=ty);let M=Math.ceil(Math.abs(j/(jE+.001))),V=[];for(let G=0;G<M;++G){let U=I+G*j/M,Y=I+(G+1)*j/M;V[G]=[k,R,U,Y,n,o,d,p]}return hde[c]=V}function n7t(t){let r=j7e.call(t);if(mde[r])return mde[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,h=c*l,m=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+m-w*g,C=o+g+w*m,S=n+y,E=o+b,A=S+w*b,N=E-w*y;return mde[r]=[f*_+d*C,p*_+h*C,f*A+d*N,p*A+h*N,f*S+d*E,p*S+h*E]}function o7t(t,r,n){let o=vp[0]=t[0];if(o==="a"||o==="A")vp[1]=r*t[1],vp[2]=n*t[2],vp[3]=t[3],vp[4]=t[4],vp[5]=t[5],vp[6]=r*t[6],vp[7]=n*t[7];else if(o==="h"||o==="H")vp[1]=r*t[1];else if(o==="v"||o==="V")vp[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)vp[i]=(i%2==1?r:n)*t[i];return vp}function wde(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,h,m,g,y=0,b=0;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var x=0,v=r.length;x<v;++x){switch(a=r[x],(i!==1||s!==1)&&(a=o7t(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],y=u,b=c,t.moveTo(u+n,c+o);break;case"c":p=u+a[5],h=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,h+o),u=p,c=h;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],h=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,h+o),f=u+a[1],d=c+a[2],u=p,c=h;break;case"S":p=a[3],h=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"q":p=u+a[3],h=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"Q":p=a[3],h=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"t":p=u+a[1],h=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-m,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),m=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h,f=u+a[1],d=c+a[2];break;case"T":p=a[1],h=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"a":p7e(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":p7e(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":u=y,c=b,t.closePath();break}l=a}}function p7e(t,r,n,o){let i=r7t(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=n7t(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function i7t(t){return pp(m7e,t)?m7e[t]:s7t(t)}function s7t(t){if(!pp(gde,t)){let r=P7e(t);gde[t]={draw:function(n,o){wde(n,r,0,0,Math.sqrt(o)/2)}}}return gde[t]}function a7t(t){return t.x}function l7t(t){return t.y}function u7t(t){return t.width}function c7t(t){return t.height}function Qx(t){return typeof t=="function"?t:()=>+t}function QV(t,r,n){return Math.max(r,Math.min(t,n))}function f7t(){var t=a7t,r=l7t,n=u7t,o=c7t,i=Qx(0),s=i,a=i,l=i,u=null;function c(f,d,p){var h,m=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=QV(+i.call(this,f),0,x),w=QV(+s.call(this,f),0,x),_=QV(+a.call(this,f),0,x),C=QV(+l.call(this,f),0,x);if(u||(u=h=KP()),v<=0&&w<=0&&_<=0&&C<=0)u.rect(m,g,y,b);else{var S=m+y,E=g+b;u.moveTo(m+v,g),u.lineTo(S-w,g),u.bezierCurveTo(S-Jw*w,g,S,g+Jw*w,S,g+w),u.lineTo(S,E-C),u.bezierCurveTo(S,E-Jw*C,S-Jw*C,E,S-C,E),u.lineTo(m+_,E),u.bezierCurveTo(m+Jw*_,E,m,E-Jw*_,m,E-_),u.lineTo(m,g+v),u.bezierCurveTo(m,g+Jw*v,m+Jw*v,g,m+v,g),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(f){return arguments.length?(t=Qx(f),c):t},c.y=function(f){return arguments.length?(r=Qx(f),c):r},c.width=function(f){return arguments.length?(n=Qx(f),c):n},c.height=function(f){return arguments.length?(o=Qx(f),c):o},c.cornerRadius=function(f,d,p,h){return arguments.length?(i=Qx(f),s=d!=null?Qx(d):i,l=p!=null?Qx(p):i,a=h!=null?Qx(h):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function d7t(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,h){let m=h/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.hypot(g,y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*m,p-y*m),i.arc(d,p,m,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,m,0,ty);i.closePath()}else s=1;a=d,l=p,u=m}function f(d){var p,h=d.length,m,g=!1,y;for(i==null&&(i=y=KP()),p=0;p<=h;++p)!(p<h&&o(m=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(m,p,d),+r(m,p,d),+n(m,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function _L(t,r){return t??r}function Pde(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function j7t(t,r){return D7t.context(t)(r)}function L7t(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?O7t:N7t).curve(M7e(o,n.orient,n.tension)).context(t)(r)}function B7t(t,r){let n=r[0],o=n.interpolate||"linear";return F7t.curve(M7e(o,n.orient,n.tension)).context(t)(r)}function eN(t,r,n,o){return R7t.context(t)(r,n,o)}function $7t(t,r){return(r.mark.shape||r.shape).context(t)(r)}function z7t(t,r){return M7t.context(t)(r)}function U7t(t,r){return P7t.context(t)(r)}function jde(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+V7t++),a=i.clipping[s]||(i.clipping[s]={id:s});return Fw(o)?a.path=o(null):Pde(n)?a.path=eN(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Qc(t){this.clear(),t&&this.union(t)}function SG(t){this.mark=t,this.bounds=this.bounds||new Qc}function Lde(t){SG.call(this,t),this.items=this.items||[]}function g7e(t){t._pending+=1}function fL(t){t._pending-=1}function ev(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?G7t(r,o):0))}return t}function G7t(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function EG(t,r){return CG=t,r?($E=r*o_,Sde=Ede=Math.cos($E),tG=Math.sin($E),Cde=-tG):(Sde=Ede=1,$E=tG=Cde=0),q7t}function x7e(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function v7e(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>t7t?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(w7e(u,t,r,n,o)),0<c&&c<1&&i(w7e(c,t,r,n,o))}function w7e(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function L7e(t){return function(r,n){if(!n_)return!0;t(n_,r),Tde.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=Tde;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(n_.isPointInPath(u,l))return!0;return!1}}function B7e(t,r){return r.contains(t.x||0,t.y||0)}function $7e(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(Tde.set(n,o,n+i,o+s))}function H7t(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return pL(r,n,o,i,s)}function pL(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-c,m=-(s-r)),y===1&&(h=c,m=l-r),y===2&&(h=-f,m=-(a-n)),y===3&&(h=f,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>p)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function ZD(t,r){t.globalCompositeOperation=r.blend||"source-over"}function Xh(t,r){return t??r}function _7e(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function Y7t(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+Xh(r.x1,.5)*o,n.y1+Xh(r.y1,.5)*i,Math.max(o,i)*Xh(r.r1,0),n.x1+Xh(r.x2,.5)*o,n.y1+Xh(r.y2,.5)*i,Math.max(o,i)*Xh(r.r2,.5));else{let a=Xh(r.x1,0),l=Xh(r.y1,0),u=Xh(r.x2,1),c=Xh(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=Wc(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=_7e(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return _7e(s,r.stops)}function z7e(t,r,n){return Mde(n)?Y7t(t,n,r.bounds):n}function lG(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=z7e(t,r,r.fill),!0):!1}function QD(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=z7e(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||X7t),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function K7t(t,r){return t.zindex-r.zindex||t.index-r.index}function U7e(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(K7t)}function ry(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=U7e(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function Ade(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=U7e(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function Bde(t){return function(r,n,o){ry(n,i=>{(!o||o.intersects(i.bounds))&&V7e(t,r,i,i)})}}function Z7t(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&V7e(t,r,n.items[0],n.items)}}function V7e(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(ZD(r,n),n.fill&&lG(r,n,i)&&r.fill(),n.stroke&&QD(r,n,i)&&r.stroke()))}function TG(t){return t=t||Vue,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,Ade(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function EL(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function $de(t){return TG(EL(t))}function UE(t,r){return"translate("+t+","+r+")"}function zde(t){return"rotate("+t+")"}function Q7t(t,r){return"scale("+t+","+r+")"}function G7e(t){return UE(t.x||0,t.y||0)}function J7t(t){return UE(t.x||0,t.y||0)+(t.angle?" "+zde(t.angle):"")}function e9t(t){return UE(t.x||0,t.y||0)+(t.angle?" "+zde(t.angle):"")+(t.scaleX||t.scaleY?" "+Q7t(t.scaleX||1,t.scaleY||1):"")}function Ude(t,r,n){function o(a,l){a("transform",J7t(l)),a("d",r(null,l))}function i(a,l){return r(EG(a,l.angle),l),ev(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=o_),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:Bde(s),pick:$de(s),isect:n||L7e(s)}}function r9t(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function n9t(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function o9t(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function Vde(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(EG(u),f),ev(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=EL(s);function l(u,c,f,d,p,h){var m=c.items,g=c.bounds;return!m||!m.length||g&&!g.contains(p,h)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,m,f,d)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:Z7t(s),pick:l,isect:B7e,tip:n}}function s9t(t,r){var n=r.clip;t.save(),Fw(n)?(t.beginPath(),n(t),t.clip()):W7e(t,r.group)}function W7e(t,r){t.beginPath(),Pde(r)?eN(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function q7e(t){let r=Xh(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function a9t(t,r){t("transform",G7e(r))}function H7e(t,r){let n=q7e(r);t("d",eN(null,r,n,n))}function l9t(t,r){t("class","background"),t("aria-hidden",!0),H7e(t,r)}function u9t(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?H7e(t,r):t("d","")}function c9t(t,r,n){let o=r.clip?jde(n,r,r):null;t("clip-path",o)}function f9t(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),ev(t,r),t.translate(r.x||0,r.y||0)}function bL(t,r,n,o){let i=q7e(r);t.beginPath(),eN(t,r,(n||0)+i,(o||0)+i)}function m9t(t,r,n,o){ry(r,i=>{let s=i.x||0,a=i.y||0,l=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(bL(t,i,s,a),ZD(t,i),i.fill&&lG(t,i,u)&&t.fill(),i.stroke&&!l&&QD(t,i,u)&&t.stroke()),t.save(),t.translate(s,a),i.clip&&W7e(t,i),n&&n.translate(-s,-a),ry(i,c=>{(c.marktype==="group"||o==null||o.includes(c.marktype))&&this.draw(t,c,n,o)}),n&&n.translate(s,a),t.restore(),l&&i.stroke&&u&&(bL(t,i,s,a),ZD(t,i),QD(t,i,u)&&t.stroke())})}function g9t(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return Ade(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let h=f+(u.width||0),m=d+(u.height||0),g=u.clip;if(g&&(i<f||i>h||s<d||s>m))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&Pde(u)&&!h9t(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&p9t(t,u,a,l)?(t.restore(),u):(c=Ade(u,x=>y9t(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&d9t(t,u,a,l)&&(c=u),t.restore(),c||null)})}function y9t(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function Gde(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function Wde(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function qde(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function AG(t,r){return t==="center"?r/2:t==="right"?r:0}function kG(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function x9t(t,r,n){let o=Gde(r,n),i=Wde(r,o),s=qde(r,o),a=(r.x||0)-AG(r.align,i),l=(r.y||0)-kG(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,xL["xmlns:xlink"],"xlink:href"),t("transform",UE(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function v9t(t,r){let n=r.image,o=Wde(r,n),i=qde(r,n),s=(r.x||0)-AG(r.align,o),a=(r.y||0)-kG(r.baseline,i);return t.set(s,a,s+o,a+i)}function w9t(t,r,n){ry(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=Gde(o,this),s=Wde(o,i),a=qde(o,i);if(s===0||a===0)return;let l=(o.x||0)-AG(o.align,s),u=(o.y||0)-kG(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(ZD(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function C9t(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",e9t(r)),t("d",r.path)}function nG(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*o_,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=P7e(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),wde(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):wde(t,u,o,i,s,a)}function E9t(t,r){return nG(EG(t,r.angle),r)?t.set(0,0,0,0):ev(t,r,!0)}function A9t(t,r){t("d",eN(null,r))}function k9t(t,r){var n,o;return ev(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function S7e(t,r){t.beginPath(),eN(t,r)}function D9t(t,r){t("transform",G7e(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function N9t(t,r){var n,o;return ev(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function Y7e(t,r,n){var o,i,s,a;return r.stroke&&QD(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function O9t(t,r,n){ry(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&Y7e(t,o,i)&&(ZD(t,o),t.stroke())}})}function F9t(t,r,n,o){return t.isPointInStroke?Y7e(t,r,1)&&t.isPointInStroke(n,o):!1}function X7e(t){VE.width=t&&n_?Hde:uG}function uG(t,r){return K7e(i_(t,r),tv(t))}function K7e(t,r){return~~(.8*t.length*r)}function Hde(t,r){return tv(t)<=0||!(r=i_(t,r))?0:Z7e(r,Xde(t))}function Z7e(t,r){let n=`(${r}) ${t}`,o=C7e.get(n);return o===void 0&&(n_.font=r,o=n_.measureText(t).width,C7e.set(n,o)),o}function tv(t){return t.fontSize!=null?+t.fontSize||0:11}function GE(t){return t.lineHeight!=null?t.lineHeight:tv(t)+2}function j9t(t){return ic(t)?t.length>1?t:t[0]:t}function TL(t){return j9t(t.lineBreak&&t.text&&!ic(t.text)?t.text.split(t.lineBreak):t.text)}function Yde(t){let r=TL(t);return(ic(r)?r.length-1:0)*GE(t)}function i_(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?B9t(t,n):n}function L9t(t){if(VE.width===Hde){let r=Xde(t);return n=>Z7e(n,r)}else if(VE.width===uG){let r=tv(t);return n=>K7e(n,r)}else return r=>VE.width(t,r)}function B9t(t,r){var n=+t.limit,o=L9t(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function IG(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Xde(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+tv(t)+"px "+IG(t,r)}function Kde(t){var r=t.baseline,n=tv(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*GE(t):r==="line-bottom"?.29*n-.5*GE(t):0)}function DG(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-jE,r+=o*Math.cos(i),n+=o*Math.sin(i)),mL.x1=r,mL.y1=n,mL}function z9t(t,r){var n=r.dx||0,o=(r.dy||0)+Kde(r),i=DG(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",$9t[r.align]||"start"),l?(u=UE(s,a)+" "+zde(l),(n||o)&&(u+=" "+UE(n,o))):u=UE(s+n,a+o),t("transform",u)}function Zde(t,r,n){var o=VE.height(r),i=r.align,s=DG(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+Kde(r)-Math.round(.8*o),f=TL(r),d;if(ic(f)?(o+=GE(r)*(f.length-1),d=f.reduce((p,h)=>Math.max(p,VE.width(r,h)),0)):d=VE.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*o_,a,l);else if(n===2)return t.rotatedPoints(r.angle*o_,a,l);return t}function U9t(t,r,n){ry(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=Xde(o),t.textAlign=o.align||"left",s=DG(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*o_),a=l=0),a+=o.dx||0,l+=(o.dy||0)+Kde(o),f=TL(o),ZD(t,o),ic(f))for(c=GE(o),u=0;u<f.length;++u)d=i_(o,f[u]),o.fill&&lG(t,o,i)&&t.fillText(d,a,l),o.stroke&&QD(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=i_(o,f),o.fill&&lG(t,o,i)&&t.fillText(d,a,l),o.stroke&&QD(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function V9t(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=DG(r),l=a.x1,u=a.y1,c=Zde(mL,r,1),f=-r.angle*o_,d=Math.cos(f),p=Math.sin(f),h=d*i-p*s+(l-d*l+p*u),m=p*i+d*s+(u-p*l-d*u);return c.contains(h,m)}function G9t(t,r){let n=Zde(mL,t,2);return pL(r,n[0],n[1],n[2],n[3])||pL(r,n[0],n[1],n[4],n[5])||pL(r,n[4],n[5],n[6],n[7])||pL(r,n[2],n[3],n[6],n[7])}function zE(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function Q7e(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function Za(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=zE(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function Kh(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function J7e(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function e9e(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function H9t(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=s_[i.marktype]).tip){for(a=e9e(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function Y9t(t,r,n,o){t.element().setAttribute("title",o||"")}function E7e(t,r){nVt(r).forEach(n=>oVt(t,n))}function oVt(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function hL(t,r,n){r.forEach(o=>t.fire(o,n))}function T7e(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?hL(this,t,o):((!i||!i.exit)&&hL(this,n,o),this._active=s,hL(this,r,o),hL(this,t,o))}}function A7e(t){return function(r){hL(this,t,r),this._active=null}}function iVt(){return typeof window<"u"&&window.devicePixelRatio||1}function sVt(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?iVt():i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function lVt(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function c9e(t,r){let n=r.aria===!1;if(t(a9e,n||void 0),n||r.description==null)for(let o in I7e)t(I7e[o],void 0);else{let o=r.mark.marktype;t(Qde,r.description),t(Jde,r.ariaRole||(o==="group"?l9e:tpe)),t(epe,r.ariaRoleDescription||`${o} mark`)}}function f9e(t){return t.aria===!1?{[a9e]:!0}:uVt[t.role]?null:k7e[t.role]?fVt(t,k7e[t.role]):cVt(t)}function cVt(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return u9e(n?l9e:tpe,`${r} mark container`,t.description)}function fVt(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return u9e(r.role||tpe,r.desc,n.description||o(n))}catch{return null}}function D7e(t){return TD(t.text).join(" ")}function dVt(t){let r=t.datum,n=t.orient,o=r.title?d9e(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${dde(l)?"discrete":l} scale with ${pde(a,s,t)}`}function pVt(t){let r=t.datum,n=r.title?d9e(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return mVt(o)+(n?` titled '${n}'`:"")+` for ${hVt(s)} with ${pde(u,l,t)}`}function d9e(t){try{return TD(Gc(t.items).items[0].text).join(" ")}catch{return null}}function hVt(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Gc(t)}function mVt(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function h9e(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${gVt(c)}"`),l),l={open(u){s(u),r="<"+u;for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];for(let p of f)for(let h in p)a(h,p[h]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=p9e(u),l),toString:()=>t};return l}function m9e(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes;for(let o of n)o.nodeType===3?t.text(o.nodeValue):m9e(t,o)}return t.close()}function O7e(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function bVt(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=Za(t,n++,"pattern",Ea);r_(a,{id:aG+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Za(a,0,"rect",Ea),r_(a,{width:1,height:1,fill:`url(${y9e()}#${r.id})`}),t=Za(t,n++,"radialGradient",Ea),r_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=Za(t,n++,"linearGradient",Ea),r_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=Za(t,o,"stop",Ea),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return Kh(t,o),n}function xVt(t,r,n){let o;return t=Za(t,n,"clipPath",Ea),t.setAttribute("id",r.id),r.path?(o=Za(t,0,"path",Ea),o.setAttribute("d",r.path)):(o=Za(t,0,"rect",Ea),r_(o,{x:0,y:0,width:r.width,height:r.height})),Kh(t,1),n+1}function vVt(t,r,n,o){r=r.lastChild.previousSibling;let i,s=0;ry(n,a=>{i=t.mark(r,a,i,o),++s}),Kh(r,1+s)}function F7e(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=zE(a,o,Ea),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=zE(a,"path",Ea);s.appendChild(l),l.__data__=t;let u=zE(a,"g",Ea);s.appendChild(u),u.__data__=t;let c=zE(a,"path",Ea);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||wVt(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function wVt(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function yL(t,r,n){r!==cu[t]&&(n?SVt(Jx,t,r,n):uc(Jx,t,r),cu[t]=r)}function sG(t,r,n){n!==cu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),cu[r]=n)}function r_(t,r){for(let n in r)uc(t,n,r[n])}function uc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function SVt(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function y9e(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function CVt(t,r,n,o,i){let s;if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),o==="text"&&(t["font-family"]=IG(r),t["font-size"]=tv(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let a in bG){let l=r[a],u=bG[a];l==="transparent"&&(u==="fill"||u==="stroke")||l!=null&&(Mde(l)&&(l=R7e(l,i.gradient,"")),t[u]=l)}for(let a in xG){let l=r[a];l!=null&&(s=s||[],s.push(`${xG[a]}: ${l};`))}return s&&(t.style=s.join(" ")),t}function b9e(t){let r=t.clip;if(Fw(r))r(EG(vde.clear()));else if(r)vde.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(vde)}var YUt,aG,d7e,XUt,KUt,ZUt,QUt,JUt,o_,t7t,jE,ty,KD,hde,mde,j7e,vp,h7e,m7e,gde,Jw,SL,CL,p7t,h7t,m7t,g7t,y7t,b7t,x7t,v7t,w7t,_7t,S7t,C7t,E7t,T7t,A7t,k7t,_G,I7t,D7t,N7t,O7t,F7t,R7t,M7t,P7t,V7t,_de,W7t,CG,JV,eG,$E,Sde,tG,Cde,Ede,t_,rG,y7e,b7e,LE,BE,yde,bde,q7t,n_,Tde,X7t,t9t,i9t,d9t,p9t,h9t,b9t,xL,_9t,S9t,T9t,I9t,R9t,M9t,P9t,C7e,VE,$9t,mL,W9t,q9t,s_,cG,JD,X9t,K9t,Z9t,t9e,oG,r9e,kde,Q9t,fG,iG,n9e,Ide,J9t,o9e,dG,i9e,pG,eVt,tVt,s9e,hG,mG,gG,rVt,Dde,gL,Nde,yG,nVt,vL,aVt,Ode,xde,a9e,Qde,Jde,epe,l9e,tpe,u9e,uVt,k7e,I7e,p9e,gVt,yVt,bG,xG,g9e,dL,N7e,Ea,vG,Jx,cu,_Vt,Fde,e_,wG,Rde,EVt,TVt,AVt,kVt,IVt,wL,vde,x9e=D(()=>{"use strict";gE();v6e();Xue();DD();jze();f7e();YUt=0,aG="p_";d7e={basis:{curve:ece},"basis-closed":{curve:tce},"basis-open":{curve:rce},bundle:{curve:nce,tension:"beta",value:.85},cardinal:{curve:oce,tension:"tension",value:0},"cardinal-open":{curve:ace,tension:"tension",value:0},"cardinal-closed":{curve:ice,tension:"tension",value:0},"catmull-rom":{curve:uce,tension:"alpha",value:.5},"catmull-rom-closed":{curve:cce,tension:"alpha",value:.5},"catmull-rom-open":{curve:fce,tension:"alpha",value:.5},linear:{curve:xE},"linear-closed":{curve:dce},monotone:{horizontal:mce,vertical:hce},natural:{curve:gce},step:{curve:yce},"step-after":{curve:xce},"step-before":{curve:bce}};XUt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},KUt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,ZUt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,QUt=/^((\s+,?\s*)|(,\s*))/,JUt=/^[01]/;o_=Math.PI/180,t7t=1e-14,jE=Math.PI/2,ty=Math.PI*2,KD=Math.sqrt(3)/2,hde={},mde={},j7e=[].join;vp=["l",0,0,0,0,0,0,0];h7e=.5773502691896257,m7e={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,ty)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=KD*n,i=o-n*h7e,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=KD*n,i=o-n*h7e;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=KD*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=KD*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=KD*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=KD*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};gde={};Jw=.448084975506;SL=t=>t.x||0,CL=t=>t.y||0,p7t=t=>t.width||0,h7t=t=>t.height||0,m7t=t=>(t.x||0)+(t.width||0),g7t=t=>(t.y||0)+(t.height||0),y7t=t=>t.startAngle||0,b7t=t=>t.endAngle||0,x7t=t=>t.padAngle||0,v7t=t=>t.innerRadius||0,w7t=t=>t.outerRadius||0,_7t=t=>t.cornerRadius||0,S7t=t=>_L(t.cornerRadiusTopLeft,t.cornerRadius)||0,C7t=t=>_L(t.cornerRadiusTopRight,t.cornerRadius)||0,E7t=t=>_L(t.cornerRadiusBottomRight,t.cornerRadius)||0,T7t=t=>_L(t.cornerRadiusBottomLeft,t.cornerRadius)||0,A7t=t=>_L(t.size,64),k7t=t=>t.size||1,_G=t=>t.defined!==!1,I7t=t=>i7t(t.shape||"circle"),D7t=Kue().startAngle(y7t).endAngle(b7t).padAngle(x7t).innerRadius(v7t).outerRadius(w7t).cornerRadius(_7t),N7t=V9().x(SL).y1(CL).y0(g7t).defined(_G),O7t=V9().y(CL).x1(SL).x0(m7t).defined(_G),F7t=QP().x(SL).y(CL).defined(_G),R7t=f7t().x(SL).y(CL).width(p7t).height(h7t).cornerRadius(S7t,C7t,E7t,T7t),M7t=G9().type(I7t).size(A7t),P7t=d7t().x(SL).y(CL).defined(_G).size(k7t);V7t=1;Qc.prototype={clone(){return new Qc(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};Vx(Lde,SG);_de=class{constructor(r){this._pending=0,this._loader=r||afe()}pending(){return this._pending}sanitizeURL(r){let n=this;return g7e(n),n._loader.sanitize(r,{context:"href"}).then(o=>(fL(n),o)).catch(()=>(fL(n),null))}loadImage(r){let n=this,o=Z9();return g7e(n),n._loader.sanitize(r,{context:"image"}).then(i=>{let s=i.href;if(!s||!o)throw{url:s};let a=new o,l=pp(i,"crossOrigin")?i.crossOrigin:"anonymous";return l!=null&&(a.crossOrigin=l),a.onload=()=>fL(n),a.onerror=()=>fL(n),a.src=s,a}).catch(i=>(fL(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){let r=this;return new Promise(n=>{function o(i){r.pending()?setTimeout(()=>{o(!0)},10):n(i)}o(!1)})}};W7t=ty-1e-8,t_=(t,r)=>CG.add(t,r),rG=(t,r)=>t_(JV=t,eG=r),y7e=t=>t_(t,CG.y1),b7e=t=>t_(CG.x1,t),LE=(t,r)=>Sde*t+Cde*r,BE=(t,r)=>tG*t+Ede*r,yde=(t,r)=>t_(LE(t,r),BE(t,r)),bde=(t,r)=>rG(LE(t,r),BE(t,r));q7t={beginPath(){},closePath(){},moveTo:bde,lineTo:bde,rect(t,r,n,o){$E?(yde(t+n,r),yde(t+n,r+o),yde(t,r+o),bde(t,r)):(t_(t+n,r+o),rG(t,r))},quadraticCurveTo(t,r,n,o){let i=LE(t,r),s=BE(t,r),a=LE(n,o),l=BE(n,o);x7e(JV,i,a,y7e),x7e(eG,s,l,b7e),rG(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=LE(t,r),l=BE(t,r),u=LE(n,o),c=BE(n,o),f=LE(i,s),d=BE(i,s);v7e(JV,a,u,f,y7e),v7e(eG,l,c,d,b7e),rG(f,d)},arc(t,r,n,o,i,s){if(o+=$E,i+=$E,JV=n*Math.cos(i)+t,eG=n*Math.sin(i)+r,Math.abs(i-o)>W7t)t_(t-n,r-n),t_(t+n,r+n);else{let a=c=>t_(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%ty,o<0&&(o+=ty),i=i%ty,i<0&&(i+=ty),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=ty,l=o-o%jE,u=0;u<4&&l>i;++u,l-=jE)a(l);else for(l=o-o%jE+jE,u=0;u<4&&l<i;++u,l=l+jE)a(l)}}};n_=(n_=Wc(1,1))?n_.getContext("2d"):null,Tde=new Qc;X7t=[];t9t=Ude("arc",j7t);i9t=Vde("area",L7t,r9t);d9t=EL(bL),p9t=EL(bL,!1),h9t=EL(bL,!0);b9t={type:"group",tag:"g",nested:!1,attr:a9t,bound:f9t,draw:m9t,pick:g9t,isect:$7e,content:c9t,background:l9t,foreground:u9t},xL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};_9t={type:"image",tag:"image",nested:!1,attr:x9t,bound:v9t,draw:w9t,pick:TG(),isect:Vue,get:Gde,xOffset:AG,yOffset:kG},S9t=Vde("line",B7t,n9t);T9t={type:"path",tag:"path",nested:!1,attr:C9t,bound:E9t,draw:Bde(nG),pick:$de(nG),isect:L7e(nG)};I9t={type:"rect",tag:"path",nested:!1,attr:A9t,bound:k9t,draw:Bde(S7e),pick:$de(S7e),isect:$7e};R9t={type:"rule",tag:"line",nested:!1,attr:D9t,bound:N9t,draw:O9t,pick:TG(F9t),isect:H7t},M9t=Ude("shape",$7t),P9t=Ude("symbol",z7t,B7e),C7e=$$e(),VE={height:tv,measureWidth:Hde,estimateWidth:uG,width:uG,canvas:X7e};X7e(!0);$9t={left:"start",center:"middle",right:"end"},mL=new Qc;W9t={type:"text",tag:"text",nested:!1,attr:z9t,bound:Zde,draw:U9t,pick:TG(V9t),isect:G9t},q9t=Vde("trail",U7t,o9t),s_={arc:t9t,area:i9t,group:b9t,image:_9t,line:S9t,path:T9t,rect:I9t,rule:R9t,shape:M9t,symbol:P9t,text:W9t,trail:q9t};cG=class{constructor(r,n){this._active=null,this._handlers={},this._loader=r||afe(),this._tooltip=n||Y9t}initialize(r,n,o){return this._el=r,this._obj=o||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(r){return arguments.length?(this._origin=r||[0,0],this):this._origin.slice()}scene(r){return arguments.length?(this._scene=r,this):this._scene}on(){}off(){}_handlerIndex(r,n,o){for(let i=r?r.length:0;--i>=0;)if(r[i].type===n&&(!o||r[i].handler===o))return i;return-1}handlers(r){let n=this._handlers,o=[];if(r)o.push(...n[this.eventName(r)]);else for(let i in n)o.push(...n[i]);return o}eventName(r){let n=r.indexOf(".");return n<0?r:r.slice(0,n)}handleHref(r,n,o){this._loader.sanitize(o,{context:"href"}).then(i=>{let s=new MouseEvent(r.type,r),a=zE(null,"a");for(let l in i)a.setAttribute(l,i[l]);a.dispatchEvent(s)}).catch(()=>{})}handleTooltip(r,n,o){if(n&&n.tooltip!=null){n=H9t(n,r,this.canvas(),this._origin);let i=o&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,r,n,i)}}getItemBoundingClientRect(r){let n=this.canvas();if(!n)return;let o=n.getBoundingClientRect(),i=this._origin,s=r.bounds,a=s.width(),l=s.height(),u=s.x1+i[0]+o.left,c=s.y1+i[1]+o.top;for(;r.mark&&(r=r.mark.group);)u+=r.x||0,c+=r.y||0;return{x:u,y:c,width:a,height:l,left:u,top:c,right:u+a,bottom:c+l}}};JD=class{constructor(r){this._el=null,this._bgcolor=null,this._loader=new _de(r)}initialize(r,n,o,i,s){return this._el=r,this.resize(n,o,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(r){return arguments.length===0?this._bgcolor:(this._bgcolor=r,this)}resize(r,n,o,i){return this._width=r,this._height=n,this._origin=o||[0,0],this._scale=i||1,this}dirty(){}render(r,n){let o=this;return o._call=function(){o._render(r,n)},o._call(),o._call=null,o}_render(){}renderAsync(r,n){let o=this.render(r,n);return this._ready?this._ready.then(()=>o):Promise.resolve(o)}_load(r,n){var o=this,i=o._loader[r](n);if(!o._ready){let s=o._call;o._ready=o._loader.ready().then(a=>{a&&s(),o._ready=null})}return i}sanitizeURL(r){return this._load("sanitizeURL",r)}loadImage(r){return this._load("loadImage",r)}},X9t="keydown",K9t="keypress",Z9t="keyup",t9e="dragenter",oG="dragleave",r9e="dragover",kde="pointerdown",Q9t="pointerup",fG="pointermove",iG="pointerout",n9e="pointerover",Ide="mousedown",J9t="mouseup",o9e="mousemove",dG="mouseout",i9e="mouseover",pG="click",eVt="dblclick",tVt="wheel",s9e="mousewheel",hG="touchstart",mG="touchmove",gG="touchend",rVt=[X9t,K9t,Z9t,t9e,oG,r9e,kde,Q9t,fG,iG,n9e,Ide,J9t,o9e,dG,i9e,pG,eVt,tVt,s9e,hG,mG,gG],Dde=fG,gL=dG,Nde=pG,yG=class extends cG{constructor(r,n){super(r,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=rVt,this.pointermove=T7e([fG,o9e],[n9e,i9e],[iG,dG]),this.dragover=T7e([r9e],[t9e],[oG]),this.pointerout=A7e([iG,dG]),this.dragleave=A7e([oG])}initialize(r,n,o){return this._canvas=r&&Q7e(r,"canvas"),[pG,Ide,kde,fG,iG,oG].forEach(i=>E7e(this,i)),super.initialize(r,n,o)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(r){this.fire(s9e,r)}pointerdown(r){this._down=this._active,this.fire(kde,r)}mousedown(r){this._down=this._active,this.fire(Ide,r)}click(r){this._down===this._active&&(this.fire(pG,r),this._down=null)}touchstart(r){this._touch=this.pickEvent(r.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(hG,r,!0)}touchmove(r){this.fire(mG,r,!0)}touchend(r){this.fire(gG,r,!0),this._touch=null}fire(r,n,o){let i=o?this._touch:this._active,s=this._handlers[r];if(n.vegaType=r,r===Nde&&i&&i.href?this.handleHref(n,i,i.href):(r===Dde||r===gL)&&this.handleTooltip(n,i,r!==gL),s)for(let a=0,l=s.length;a<l;++a)s[a].handler.call(this._obj,n,i)}on(r,n){let o=this.eventName(r),i=this._handlers;return this._handlerIndex(i[o],r,n)<0&&(E7e(this,r),(i[o]||(i[o]=[])).push({type:r,handler:n})),this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&i.splice(s,1),this}pickEvent(r){let n=e9e(r,this._canvas),o=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-o[0],n[1]-o[1])}pick(r,n,o,i,s){let a=this.context();return s_[r.marktype].pick.call(this,a,r,n,o,i,s)}},nVt=t=>t===hG||t===mG||t===gG?[hG,mG,gG]:[t];vL=class extends JD{constructor(r){super(r),this._options={},this._redraw=!1,this._dirty=new Qc,this._tempb=new Qc}initialize(r,n,o,i,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Wc(1,1,this._options.type),r&&this._canvas&&(Kh(r,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(r,n,o,i,s)}resize(r,n,o,i){if(super.resize(r,n,o,i),this._canvas)sVt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let s=this._options.externalContext;s||iu("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(r){let n=this._tempb.clear().union(r.bounds),o=r.mark.group;for(;o;)n.translate(o.x||0,o.y||0),o=o.mark.group;this._dirty.union(n)}_render(r,n){let o=this.context(),i=this._origin,s=this._width,a=this._height,l=this._dirty,u=aVt(i,s,a);o.save();let c=this._redraw||l.empty()?(this._redraw=!1,u.expand(1)):lVt(o,u.intersect(l),i);return this.clear(-i[0],-i[1],s,a),this.draw(o,r,c,n),o.restore(),l.clear(),this}draw(r,n,o,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;let s=s_[n.marktype];n.clip&&s9t(r,n),s.draw.call(this,r,n,o,i),n.clip&&r.restore()}clear(r,n,o,i){let s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(r,n,o,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(r,n,o,i))}},aVt=(t,r,n)=>new Qc().set(0,0,r,n).translate(-t[0],-t[1]);Ode=class extends cG{constructor(r,n){super(r,n);let o=this;o._hrefHandler=xde(o,(i,s)=>{s&&s.href&&o.handleHref(i,s,s.href)}),o._tooltipHandler=xde(o,(i,s)=>{o.handleTooltip(i,s,i.type!==gL)})}initialize(r,n,o){let i=this._svg;return i&&(i.removeEventListener(Nde,this._hrefHandler),i.removeEventListener(Dde,this._tooltipHandler),i.removeEventListener(gL,this._tooltipHandler)),this._svg=i=r&&Q7e(r,"svg"),i&&(i.addEventListener(Nde,this._hrefHandler),i.addEventListener(Dde,this._tooltipHandler),i.addEventListener(gL,this._tooltipHandler)),super.initialize(r,n,o)}canvas(){return this._svg}on(r,n){let o=this.eventName(r),i=this._handlers;if(this._handlerIndex(i[o],r,n)<0){let a={type:r,handler:n,listener:xde(this,n)};(i[o]||(i[o]=[])).push(a),this._svg&&this._svg.addEventListener(o,a.listener)}return this}off(r,n){let o=this.eventName(r),i=this._handlers[o],s=this._handlerIndex(i,r,n);return s>=0&&(this._svg&&this._svg.removeEventListener(o,i[s].listener),i.splice(s,1)),this}},xde=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)},a9e="aria-hidden",Qde="aria-label",Jde="role",epe="aria-roledescription",l9e="graphics-object",tpe="graphics-symbol",u9e=(t,r,n)=>({[Jde]:t,[epe]:r,[Qde]:n||void 0}),uVt=HP(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),k7e={axis:{desc:"axis",caption:dVt},legend:{desc:"legend",caption:pVt},"title-text":{desc:"title",caption:t=>`Title text '${D7e(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${D7e(t)}'`}},I7e={ariaRole:Jde,ariaRoleDescription:epe,description:Qde};p9e=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gVt=t=>p9e(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");yVt=t=>m9e(h9e(),t)+"";bG={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},xG={blend:"mix-blend-mode"},g9e={fill:"none","stroke-miterlimit":10},dL=0,N7e="http://www.w3.org/2000/xmlns/",Ea=xL.xmlns,vG=class extends JD{constructor(r){super(r),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(r,n,o,i,s){return this._defs={},this._clearDefs(),r&&(this._svg=Za(r,0,"svg",Ea),this._svg.setAttributeNS(N7e,"xmlns",Ea),this._svg.setAttributeNS(N7e,"xmlns:xlink",xL["xmlns:xlink"]),this._svg.setAttribute("version",xL.version),this._svg.setAttribute("class","marks"),Kh(r,1),this._root=Za(this._svg,dL,"g",Ea),r_(this._root,g9e),Kh(this._svg,dL+1)),this.background(this._bgcolor),super.initialize(r,n,o,i,s)}background(r){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",r),super.background(...arguments)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svg&&(r_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let r=this._svg,n=this._bgcolor;if(!r)return null;let o;n&&(r.removeAttribute("style"),o=Za(r,dL,"rect",Ea),r_(o,{width:this._width,height:this._height,fill:n}));let i=yVt(r);return n&&(r.removeChild(o),this._svg.style.setProperty("background-color",n)),i}_render(r,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,r,void 0,n),Kh(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(r){r.dirty!==this._dirtyID&&(r.dirty=this._dirtyID,this._dirty.push(r))}isDirty(r){return this._dirtyAll||!r._svg||!r._svg.ownerSVGElement||r.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let r=this._dirty;if(!r.length||!this._dirtyID)return!0;let n=++this._dirtyID,o,i,s,a,l,u,c;for(l=0,u=r.length;l<u;++l)if(o=r[l],i=o.mark,i.marktype!==s&&(s=i.marktype,a=s_[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,O7e(o,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(o.exit){a.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(a,c._svg,c)):o._svg&&(c=o._svg.parentNode,c&&c.removeChild(o._svg)),o._svg=null;continue}o=a.nested?i.items[0]:o,o._update!==n&&(!o._svg||!o._svg.ownerSVGElement?(this._dirtyAll=!1,O7e(o,n)):this._update(a,o._svg,o),o._update=n)}return!this._dirtyAll}mark(r,n,o,i){if(!this.isDirty(n))return n._svg;let s=this._svg,a=n.marktype,l=s_[a],u=n.interactive===!1?"none":null,c=l.tag==="g",f=F7e(n,r,o,"g",s);if(a!=="group"&&i!=null&&!i.includes(a))return Kh(f,0),n._svg;f.setAttribute("class",J7e(n));let d=f9e(n);for(let g in d)uc(f,g,d[g]);c||uc(f,"pointer-events",u),uc(f,"clip-path",n.clip?jde(this,n,n.group):null);let p=null,h=0,m=g=>{let y=this.isDirty(g),b=F7e(g,f,p,l.tag,s);y&&(this._update(l,b,g),c&&vVt(this,b,g,i)),p=b,++h};return l.nested?n.items.length&&m(n.items[0]):ry(n,m),Kh(f,h),f}_update(r,n,o){Jx=n,cu=n.__values__,c9e(yL,o),r.attr(yL,o,this);let i=_Vt[r.type];i&&i.call(this,r,n,o),Jx&&this.style(Jx,o)}style(r,n){if(n!=null){for(let o in bG){let i=o==="font"?IG(n):n[o];if(i===cu[o])continue;let s=bG[o];i==null?r.removeAttribute(s):(Mde(i)&&(i=R7e(i,this._defs.gradient,y9e())),r.setAttribute(s,i+"")),cu[o]=i}for(let o in xG)sG(r,xG[o],n[o])}}defs(){let r=this._svg,n=this._defs,o=n.el,i=0;for(let s in n.gradient)o||(n.el=o=Za(r,dL+1,"defs",Ea)),i=bVt(o,n.gradient[s],i);for(let s in n.clipping)o||(n.el=o=Za(r,dL+1,"defs",Ea)),i=xVt(o,n.clipping[s],i);o&&(i===0?(r.removeChild(o),n.el=null):Kh(o,i))}_clearDefs(){let r=this._defs;r.gradient={},r.clipping={}}};Jx=null,cu=null,_Vt={group(t,r,n){let o=Jx=r.childNodes[2];cu=o.__values__,t.foreground(yL,n,this),cu=r.__values__,Jx=r.childNodes[1],t.content(yL,n,this);let i=Jx=r.childNodes[0];t.background(yL,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==cu.events&&(uc(o,"pointer-events",s),uc(i,"pointer-events",s),cu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;uc(o,"display",null),this.style(i,n),uc(i,"stroke",null),a&&(n.fill=null),cu=o.__values__,this.style(o,n),a&&(n.fill=a),Jx=null}else uc(o,"display","none")},image(t,r,n){n.smooth===!1?(sG(r,"image-rendering","optimizeSpeed"),sG(r,"image-rendering","pixelated")):sG(r,"image-rendering",null)},text(t,r,n){let o=TL(n),i,s,a,l;ic(o)?(s=o.map(u=>i_(n,u)),i=s.join(`
`),i!==cu.text&&(Kh(r,0),a=r.ownerDocument,l=GE(n),s.forEach((u,c)=>{let f=zE(a,"tspan",Ea);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),cu.text=i)):(s=i_(n,o),s!==cu.text&&(r.textContent=s,cu.text=s)),uc(r,"font-family",IG(n)),uc(r,"font-size",tv(n)+"px"),uc(r,"font-style",n.fontStyle),uc(r,"font-variant",n.fontVariant),uc(r,"font-weight",n.fontWeight)}};Fde=class extends JD{constructor(r){super(r),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(r){let n=h9e();n.open("svg",Ux({},xL,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let o=this._bgcolor;return o&&o!=="transparent"&&o!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:o}).close(),n.open("g",g9e,{transform:"translate("+this._origin+")"}),this.mark(n,r),n.close(),this.defs(n),this._text=n.close()+"",this}mark(r,n){let o=s_[n.marktype],i=o.tag,s=[c9e,o.attr];r.open("g",{class:J7e(n),"clip-path":n.clip?jde(this,n,n.group):null},f9e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});let a=l=>{let u=this.href(l);if(u&&r.open("a",u),r.open(i,this.attr(n,l,s,i!=="g"?i:null)),i==="text"){let c=TL(l);if(ic(c)){let f={x:0,dy:GE(l)};for(let d=0;d<c.length;++d)r.open("tspan",d?f:null).text(i_(l,c[d])).close()}else r.text(i_(l,c))}else if(i==="g"){let c=l.strokeForeground,f=l.fill,d=l.stroke;c&&d&&(l.stroke=null),r.open("path",this.attr(n,l,o.background,"bgrect")).close(),r.open("g",this.attr(n,l,o.content)),ry(l,p=>this.mark(r,p)),r.close(),c&&d?(f&&(l.fill=null),l.stroke=d,r.open("path",this.attr(n,l,o.foreground,"bgrect")).close(),f&&(l.fill=f)):r.open("path",this.attr(n,l,o.foreground,"bgfore")).close()}r.close(),u&&r.close()};return o.nested?n.items&&n.items.length&&a(n.items[0]):ry(n,a),r.close()}href(r){let n=r.href,o;if(n){if(o=this._hrefs&&this._hrefs[n])return o;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(r,n,o,i){let s={},a=(l,u,c,f)=>{s[f||l]=u};return Array.isArray(o)?o.forEach(l=>l(a,n,this)):o(a,n,this),i&&CVt(s,n,r,i,this._defs),s}defs(r){let n=this._defs.gradient,o=this._defs.clipping;if(Object.keys(n).length+Object.keys(o).length!==0){r.open("defs");for(let s in n){let a=n[s],l=a.stops;a.gradient==="radial"?(r.open("pattern",{id:aG+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),r.close(),r.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):r.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let u=0;u<l.length;++u)r.open("stop",{offset:l[u].offset,"stop-color":l[u].color}).close();r.close()}for(let s in o){let a=o[s];r.open("clipPath",{id:s}),a.path?r.open("path",{d:a.path}).close():r.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),r.close()}r.close()}}};e_={svgMarkTypes:["text"],svgOnTop:!0,debug:!1},wG=class extends JD{constructor(r){super(r),this._svgRenderer=new vG(r),this._canvasRenderer=new vL(r)}initialize(r,n,o,i,s){this._root_el=Za(r,0,"div");let a=Za(this._root_el,0,"div"),l=Za(this._root_el,1,"div");return this._root_el.style.position="relative",e_.debug||(a.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=e_.svgOnTop?l:a,this._canvasEl=e_.svgOnTop?a:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,o,i,s),this._svgRenderer.initialize(this._svgEl,n,o,i,s),super.initialize(r,n,o,i,s)}dirty(r){return e_.svgMarkTypes.includes(r.mark.marktype)?this._svgRenderer.dirty(r):this._canvasRenderer.dirty(r),this}_render(r,n){let i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!e_.svgMarkTypes.includes(s));this._svgRenderer.render(r,e_.svgMarkTypes),this._canvasRenderer.render(r,i)}resize(r,n,o,i){return super.resize(r,n,o,i),this._svgRenderer.resize(r,n,o,i),this._canvasRenderer.resize(r,n,o,i),this}background(r){return e_.svgOnTop?this._canvasRenderer.background(r):this._svgRenderer.background(r),this}},Rde=class extends yG{constructor(r,n){super(r,n)}initialize(r,n,o){let i=Za(Za(r,0,"div"),e_.svgOnTop?0:1,"div");return super.initialize(i,n,o)}},EVt="canvas",TVt="hybrid",AVt="png",kVt="svg",IVt="none",wL={};wL[EVt]=wL[AVt]={renderer:vL,headless:vL,handler:yG};wL[kVt]={renderer:vG,headless:Fde,handler:Ode};wL[TVt]={renderer:wG,headless:wG,handler:Rde};wL[IVt]={};vde=new Qc});var fpe={};fn(fpe,{bound:()=>L9e,identifier:()=>cpe,mark:()=>B9e,overlap:()=>$9e,render:()=>U9e,viewlayout:()=>G9e});function L9e(t){et.call(this,null,t)}function OG(t,r,n){return r(t.bounds.clear(),t,n)}function cpe(t){et.call(this,0,t)}function zVt(t){return t._signals[v9e]||(t._signals[v9e]=t.add(0))}function B9e(t){et.call(this,null,t)}function UVt(t){let r=t.groups,n=t.parent;return r&&r.size===1?r.get(Object.keys(r.object)[0]):r&&n?r.lookup(n):null}function $9e(t){et.call(this,null,t)}function U9e(t){et.call(this,null,t)}function rN(t,r,n){return t[r]===n?0:(t[r]=n,1)}function WVt(t){var r=t.items[0].orient;return r===Zh||r===Qh}function qVt(t){let r=+t.grid;return[t.ticks?r++:-1,t.labels?r++:-1,r+ +t.domain]}function HVt(t,r,n,o){var i=r.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,l=i.orient,u=qVt(s),c=i.range,f=i.offset,d=i.position,p=i.minExtent,h=i.maxExtent,m=s.title&&i.items[u[2]].items[0],g=i.titlePadding,y=i.bounds,b=m&&Yde(m),x=0,v=0,w,_;switch(fu.clear().union(y),y.clear(),(w=u[0])>-1&&y.union(i.items[w].bounds),(w=u[1])>-1&&y.union(i.items[w].bounds),l){case nN:x=d||0,v=-f,_=Math.max(p,Math.min(h,-y.y1)),y.add(0,-_).add(c,0),m&&FG(t,m,_,g,b,0,-1,y);break;case Zh:x=-f,v=d||0,_=Math.max(p,Math.min(h,-y.x1)),y.add(-_,0).add(0,c),m&&FG(t,m,_,g,b,1,-1,y);break;case Qh:x=n+f,v=d||0,_=Math.max(p,Math.min(h,y.x2)),y.add(0,0).add(_,c),m&&FG(t,m,_,g,b,1,1,y);break;case u_:x=d||0,v=o+f,_=Math.max(p,Math.min(h,y.y2)),y.add(0,0).add(c,_),m&&FG(t,m,_,g,0,0,1,y);break;default:x=i.x,v=i.y}return ev(y.translate(x,v),i),rN(i,"x",x+a)|rN(i,"y",v+a)&&(i.bounds=fu,t.dirty(i),i.bounds=y,t.dirty(i)),i.mark.bounds.clear().union(y)}function FG(t,r,n,o,i,s,a,l){let u=r.bounds;if(r.auto){let c=a*(n+i+o),f=0,d=0;t.dirty(r),s?f=(r.x||0)-(r.x=c):d=(r.y||0)-(r.y=c),r.mark.bounds.clear().union(u.translate(-f,-d)),t.dirty(r)}l.union(u)}function YVt(t){var r=t.items,n=r.length,o=0,i,s;let a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<n;++o)if(i=r[o],s=i.items,i.marktype===MG)switch(i.role){case ipe:case ape:case spe:break;case I9e:a.rowheaders.push(...s);break;case D9e:a.rowfooters.push(...s);break;case O9e:a.colheaders.push(...s);break;case F9e:a.colfooters.push(...s);break;case N9e:a.rowtitle=s[0];break;case R9e:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function XVt(t){return new Qc().set(0,0,t.width||0,t.height||0)}function KVt(t){let r=t.bounds.clone();return r.empty()?r.set(0,0,0,0):r.translate(-(t.x||0),-(t.y||0))}function qi(t,r,n){let o=zx(t)?t[r]:t;return o??(n!==void 0?n:0)}function A9e(t){return t<0?Math.ceil(-t):0}function V9e(t,r,n){var o=!n.nodirty,i=n.bounds===upe?XVt:KVt,s=fu.set(0,0,0,0),a=qi(n.align,a_),l=qi(n.align,l_),u=qi(n.padding,a_),c=qi(n.padding,l_),f=n.columns||r.length,d=f<=0?1:Math.ceil(r.length/f),p=r.length,h=Array(p),m=Array(f),g=0,y=Array(p),b=Array(d),x=0,v=Array(p),w=Array(p),_=Array(p),C,S,E,A,N,k,R,I,L,j,M;for(S=0;S<f;++S)m[S]=0;for(S=0;S<d;++S)b[S]=0;for(S=0;S<p;++S)k=r[S],N=_[S]=i(k),k.x=k.x||0,v[S]=0,k.y=k.y||0,w[S]=0,E=S%f,A=~~(S/f),g=Math.max(g,R=Math.ceil(N.x2)),x=Math.max(x,I=Math.ceil(N.y2)),m[E]=Math.max(m[E],R),b[A]=Math.max(b[A],I),h[S]=u+A9e(N.x1),y[S]=c+A9e(N.y1),o&&t.dirty(r[S]);for(S=0;S<p;++S)S%f===0&&(h[S]=0),S<f&&(y[S]=0);if(a===npe)for(E=1;E<f;++E){for(M=0,S=E;S<p;S+=f)M<h[S]&&(M=h[S]);for(S=E;S<p;S+=f)h[S]=M+m[E-1]}else if(a===NG){for(M=0,S=0;S<p;++S)S%f&&M<h[S]&&(M=h[S]);for(S=0;S<p;++S)S%f&&(h[S]=M+g)}else for(a=!1,E=1;E<f;++E)for(S=E;S<p;S+=f)h[S]+=m[E-1];if(l===npe)for(A=1;A<d;++A){for(M=0,S=A*f,C=S+f;S<C;++S)M<y[S]&&(M=y[S]);for(S=A*f;S<C;++S)y[S]=M+b[A-1]}else if(l===NG){for(M=0,S=f;S<p;++S)M<y[S]&&(M=y[S]);for(S=f;S<p;++S)y[S]=M+x}else for(l=!1,A=1;A<d;++A)for(S=A*f,C=S+f;S<C;++S)y[S]+=b[A-1];for(L=0,S=0;S<p;++S)L=h[S]+(S%f?L:0),v[S]+=L-r[S].x;for(E=0;E<f;++E)for(j=0,S=E;S<p;S+=f)j+=y[S],w[S]+=j-r[S].y;if(a&&qi(n.center,a_)&&d>1)for(S=0;S<p;++S)N=a===NG?g:m[S%f],L=N-_[S].x2-r[S].x-v[S],L>0&&(v[S]+=L/2);if(l&&qi(n.center,l_)&&f!==1)for(S=0;S<p;++S)N=l===NG?x:b[~~(S/f)],j=N-_[S].y2-r[S].y-w[S],j>0&&(w[S]+=j/2);for(S=0;S<p;++S)s.union(_[S].translate(v[S],w[S]));switch(L=qi(n.anchor,RVt),j=qi(n.anchor,MVt),qi(n.anchor,a_)){case cc:L-=s.width();break;case rpe:L-=s.width()/2}switch(qi(n.anchor,l_)){case cc:j-=s.height();break;case rpe:j-=s.height()/2}for(L=Math.round(L),j=Math.round(j),s.clear(),S=0;S<p;++S)r[S].mark.bounds.clear();for(S=0;S<p;++S)k=r[S],k.x+=v[S]+=L,k.y+=w[S]+=j,s.union(k.mark.bounds.union(k.bounds.translate(v[S],w[S]))),o&&t.dirty(k);return s}function ZVt(t,r,n){var o=YVt(r),i=o.marks,s=n.bounds===upe?QVt:JVt,a=n.offset,l=n.columns||i.length,u=l<=0?1:Math.ceil(i.length/l),c=u*l,f,d,p,h,m,g,y;let b=V9e(t,i,n);b.empty()&&b.set(0,0,0,0),o.rowheaders&&(g=qi(n.headerBand,l_,null),f=RG(t,o.rowheaders,i,l,u,-qi(a,"rowHeader"),E9e,0,s,"x1",0,l,1,g)),o.colheaders&&(g=qi(n.headerBand,a_,null),d=RG(t,o.colheaders,i,l,l,-qi(a,"columnHeader"),E9e,1,s,"y1",0,1,l,g)),o.rowfooters&&(g=qi(n.footerBand,l_,null),p=RG(t,o.rowfooters,i,l,u,qi(a,"rowFooter"),T9e,0,s,"x2",l-1,l,1,g)),o.colfooters&&(g=qi(n.footerBand,a_,null),h=RG(t,o.colfooters,i,l,l,qi(a,"columnFooter"),T9e,1,s,"y2",c-l,1,l,g)),o.rowtitle&&(m=qi(n.titleAnchor,l_),y=qi(a,"rowTitle"),y=m===cc?p+y:f-y,g=qi(n.titleBand,l_,.5),k9e(t,o.rowtitle,y,0,b,g)),o.coltitle&&(m=qi(n.titleAnchor,a_),y=qi(a,"columnTitle"),y=m===cc?h+y:d-y,g=qi(n.titleBand,a_,.5),k9e(t,o.coltitle,y,1,b,g))}function QVt(t,r){return r==="x1"?t.x||0:r==="y1"?t.y||0:r==="x2"?(t.x||0)+(t.width||0):r==="y2"?(t.y||0)+(t.height||0):void 0}function JVt(t,r){return t.bounds[r]}function RG(t,r,n,o,i,s,a,l,u,c,f,d,p,h){var m=n.length,g=0,y=0,b,x,v,w,_,C,S,E,A;if(!m)return g;for(b=f;b<m;b+=d)n[b]&&(g=a(g,u(n[b],c)));if(!r.length)return g;for(r.length>i&&(t.warn("Grid headers exceed limit: "+i),r=r.slice(0,i)),g+=s,x=0,w=r.length;x<w;++x)t.dirty(r[x]),r[x].mark.bounds.clear();for(b=f,x=0,w=r.length;x<w;++x,b+=d){for(C=r[x],_=C.mark.bounds,v=b;v>=0&&(S=n[v])==null;v-=p);l?(E=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=g):(E=g,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),_.union(C.bounds.translate(E-(C.x||0),A-(C.y||0))),C.x=E,C.y=A,t.dirty(C),y=a(y,_[c])}return y}function k9e(t,r,n,o,i,s){if(r){t.dirty(r);var a=n,l=n;o?a=Math.round(i.x1+s*i.width()):l=Math.round(i.y1+s*i.height()),r.bounds.translate(a-(r.x||0),l-(r.y||0)),r.mark.bounds.clear().union(r.bounds),r.x=a,r.y=l,t.dirty(r)}}function eGt(t,r){let n=t[r]||{};return(o,i)=>n[o]!=null?n[o]:t[o]!=null?t[o]:i}function tGt(t,r){let n=-1/0;return t.forEach(o=>{o.offset!=null&&(n=Math.max(n,o.offset))}),n>-1/0?n:r}function rGt(t,r,n,o,i,s,a){let l=eGt(n,r),u=tGt(t,l("offset",0)),c=l("anchor",ope),f=c===cc?1:c===rpe?.5:0,d={align:npe,bounds:l("bounds",upe),columns:l("direction")==="vertical"?1:t.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(r){case Zh:d.anchor={x:Math.floor(o.x1)-u,column:cc,y:f*(a||o.height()+2*o.y1),row:c};break;case Qh:d.anchor={x:Math.ceil(o.x2)+u,y:f*(a||o.height()+2*o.y1),row:c};break;case nN:d.anchor={y:Math.floor(i.y1)-u,row:cc,x:f*(s||i.width()+2*i.x1),column:c};break;case u_:d.anchor={y:Math.ceil(i.y2)+u,x:f*(s||i.width()+2*i.x1),column:c};break;case DVt:d.anchor={x:u,y:u};break;case NVt:d.anchor={x:s-u,y:u,column:cc};break;case OVt:d.anchor={x:u,y:a-u,row:cc};break;case FVt:d.anchor={x:s-u,y:a-u,column:cc,row:cc};break}return d}function nGt(t,r){var n=r.items[0],o=n.datum,i=n.orient,s=n.bounds,a=n.x,l=n.y,u,c;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),iGt(t,n,n.items[0].items[0]),s=oGt(n,s),u=2*n.padding,c=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),c=Math.ceil(s.height()+c)),o.type===BVt&&sGt(n.items[0].items[0].items[0].items),i!==lpe&&(n.x=a=0,n.y=l=0),n.width=u,n.height=c,ev(s.set(a,l,a+u,l+c),n),n.mark.bounds.clear().union(s),n}function oGt(t,r){return t.items.forEach(n=>r.union(n.bounds)),r.x1=t.padding,r.y1=t.padding,r}function iGt(t,r,n){var o=r.padding,i=o-n.x,s=o-n.y;if(!r.datum.title)(i||s)&&AL(t,n,i,s);else{var a=r.items[1].items[0],l=a.anchor,u=r.titlePadding||0,c=o-a.x,f=o-a.y;switch(a.orient){case Zh:i+=Math.ceil(a.bounds.width())+u;break;case Qh:case u_:break;default:s+=a.bounds.height()+u}switch((i||s)&&AL(t,n,i,s),a.orient){case Zh:f+=tN(r,n,a,l,1,1);break;case Qh:c+=tN(r,n,a,cc,0,0)+u,f+=tN(r,n,a,l,1,1);break;case u_:c+=tN(r,n,a,l,0,0),f+=tN(r,n,a,cc,-1,0,1)+u;break;default:c+=tN(r,n,a,l,0,0)}(c||f)&&AL(t,a,c,f),(c=Math.round(a.bounds.x1-o))<0&&(AL(t,n,-c,0),AL(t,a,-c,0))}}function tN(t,r,n,o,i,s,a){let l=t.datum.type!=="symbol",u=n.datum.vgrad,c=l&&(s||!u)&&!a?r.items[0]:r,f=c.bounds[i?"y2":"x2"]-t.padding,d=u&&s?f:0,p=u&&s?0:f,h=i<=0?0:Yde(n);return Math.round(o===ope?d:o===cc?p-h:.5*(f-h))}function AL(t,r,n,o){r.x+=n,r.y+=o,r.bounds.translate(n,o),r.mark.bounds.translate(n,o),t.dirty(r)}function sGt(t){let r=t.reduce((n,o)=>(n[o.column]=Math.max(o.bounds.x2-o.x,n[o.column]||0),n),{});t.forEach(n=>{n.width=r[n.column],n.height=n.bounds.y2-n.y})}function aGt(t,r,n,o,i){var s=r.items[0],a=s.frame,l=s.orient,u=s.anchor,c=s.offset,f=s.padding,d=s.items[0].items[0],p=s.items[1]&&s.items[1].items[0],h=l===Zh||l===Qh?o:n,m=0,g=0,y=0,b=0,x=0,v;if(a!==MG?l===Zh?(m=i.y2,h=i.y1):l===Qh?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):l===Zh&&(m=o,h=0),v=u===ope?m:u===cc?h:(m+h)/2,p&&p.text){switch(l){case nN:case u_:x=d.bounds.height()+f;break;case Zh:b=d.bounds.width()+f;break;case Qh:b=-d.bounds.width()-f;break}fu.clear().union(p.bounds),fu.translate(b-(p.x||0),x-(p.y||0)),rN(p,"x",b)|rN(p,"y",x)&&(t.dirty(p),p.bounds.clear().union(fu),p.mark.bounds.clear().union(fu),t.dirty(p)),fu.clear().union(p.bounds)}else fu.clear();switch(fu.union(d.bounds),l){case nN:g=v,y=i.y1-fu.height()-c;break;case Zh:g=i.x1-fu.width()-c,y=v;break;case Qh:g=i.x2+fu.width()+c,y=v;break;case u_:g=v,y=i.y2+c;break;default:g=s.x,y=s.y}return rN(s,"x",g)|rN(s,"y",y)&&(fu.translate(g,y),t.dirty(s),s.bounds.clear().union(fu),r.bounds.clear().union(fu),t.dirty(s)),s.bounds}function G9e(t){et.call(this,null,t)}function lGt(t){return t&&t.mark.role!=="legend-entry"}function uGt(t,r,n){var o=r.items,i=Math.max(0,r.width||0),s=Math.max(0,r.height||0),a=new Qc().set(0,0,i,s),l=a.clone(),u=a.clone(),c=[],f,d,p,h,m,g;for(m=0,g=o.length;m<g;++m)switch(d=o[m],d.role){case ipe:h=WVt(d)?l:u,h.union(HVt(t,d,i,s));break;case spe:f=d;break;case ape:c.push(nGt(t,d));break;case PVt:case jVt:case I9e:case D9e:case N9e:case O9e:case F9e:case R9e:l.union(d.bounds),u.union(d.bounds);break;default:a.union(d.bounds)}if(c.length){let y={};c.forEach(b=>{p=b.orient||Qh,p!==lpe&&(y[p]||(y[p]=[])).push(b)});for(let b in y){let x=y[b];V9e(t,x,rGt(x,b,n.legends,l,u,i,s))}c.forEach(b=>{let x=b.bounds;if(x.equals(b._bounds)||(b.bounds=b._bounds,t.dirty(b),b.bounds=x,t.dirty(b)),n.autosize&&(n.autosize.type===M9e||n.autosize.type===P9e||n.autosize.type===j9e))switch(b.orient){case Zh:case Qh:a.add(x.x1,0).add(x.x2,0);break;case nN:case u_:a.add(0,x.y1).add(0,x.y2)}else a.union(x)})}a.union(l).union(u),f&&a.union(aGt(t,f,i,s,a)),r.clip&&a.set(0,0,r.width||0,r.height||0),cGt(t,r,a,n)}function cGt(t,r,n,o){let i=o.autosize||{},s=i.type;if(t._autosize<1||!s)return;let a=t._width,l=t._height,u=Math.max(0,r.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,r.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-f));if(i.contains===LVt){let m=t.padding();a-=m.left+m.right,l-=m.top+m.bottom}s===lpe?(c=0,d=0,u=a,f=l):s===M9e?(u=Math.max(0,a-c-p),f=Math.max(0,l-d-h)):s===P9e?(u=Math.max(0,a-c-p),l=f+d+h):s===j9e?(a=u+c+p,f=Math.max(0,l-d-h)):s===$Vt&&(a=u+c+p,l=f+d+h),t._resizeView(a,l,u,f,[c,d],i.resize)}var nN,Zh,Qh,u_,DVt,NVt,OVt,FVt,ope,rpe,cc,RVt,MVt,MG,ipe,spe,PVt,jVt,ape,I9e,D9e,N9e,O9e,F9e,R9e,LVt,BVt,M9e,P9e,j9e,$Vt,lpe,NG,npe,upe,a_,l_,v9e,w9e,z9e,_9e,VVt,GVt,S9e,C9e,fu,E9e,T9e,W9e=D(()=>{"use strict";qa();x9e();gE();nN="top",Zh="left",Qh="right",u_="bottom",DVt="top-left",NVt="top-right",OVt="bottom-left",FVt="bottom-right",ope="start",rpe="middle",cc="end",RVt="x",MVt="y",MG="group",ipe="axis",spe="title",PVt="frame",jVt="scope",ape="legend",I9e="row-header",D9e="row-footer",N9e="row-title",O9e="column-header",F9e="column-footer",R9e="column-title",LVt="padding",BVt="symbol",M9e="fit",P9e="fit-x",j9e="fit-y",$Vt="pad",lpe="none",NG="all",npe="each",upe="flush",a_="column",l_="row";Vx(L9e,et,{transform(t,r){let n=r.dataflow,o=t.mark,i=o.marktype,s=s_[i],a=s.bound,l=o.bounds,u;if(s.nested)o.items.length&&n.dirty(o.items[0]),l=OG(o,a),o.items.forEach(c=>{c.bounds.clear().union(l)});else if(i===MG||t.modified())switch(r.visit(r.MOD,c=>n.dirty(c)),l.clear(),o.items.forEach(c=>l.union(OG(c,a))),o.role){case ipe:case ape:case spe:r.reflow()}else u=r.changed(r.REM),r.visit(r.ADD,c=>{l.union(OG(c,a))}),r.visit(r.MOD,c=>{u=u||l.alignsWith(c.bounds),n.dirty(c),l.union(OG(c,a))}),u&&(l.clear(),o.items.forEach(c=>l.union(c.bounds)));return b9e(o),r.modifies("bounds")}});v9e=":vega_identifier:";cpe.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Vx(cpe,et,{transform(t,r){let n=zVt(r.dataflow),o=t.as,i=n.value;return r.visit(r.ADD,s=>s[o]=s[o]||++i),n.set(this.value=i),r}});Vx(B9e,et,{transform(t,r){let n=this.value;n||(n=r.dataflow.scenegraph().mark(t.markdef,UVt(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);let o=n.marktype===MG?Lde:SG;return r.visit(r.ADD,i=>o.call(i,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,r.reflow()),n.items=r.source,r}});w9e={parity:t=>t.filter((r,n)=>n%2?r.opacity=0:1),greedy:(t,r)=>{let n;return t.filter((o,i)=>!i||!z9e(n.bounds,o.bounds,r)?(n=o,1):o.opacity=0)}},z9e=(t,r,n)=>n>Math.max(r.x1-t.x2,t.x1-r.x2,r.y1-t.y2,t.y1-r.y2),_9e=(t,r)=>{for(var n=1,o=t.length,i=t[0].bounds,s;n<o;i=s,++n)if(z9e(i,s=t[n].bounds,r))return!0},VVt=t=>{let r=t.bounds;return r.width()>1&&r.height()>1},GVt=(t,r,n)=>{var o=t.range(),i=new Qc;return r===nN||r===u_?i.set(o[0],-1/0,o[1],1/0):i.set(-1/0,o[0],1/0,o[1]),i.expand(n||1),s=>i.encloses(s.bounds)},S9e=t=>(t.forEach(r=>r.opacity=1),t),C9e=(t,r)=>t.reflow(r.modified()).modifies("opacity");Vx($9e,et,{transform(t,r){let n=w9e[t.method]||w9e.parity,o=t.separation||0,i=r.materialize(r.SOURCE).source,s,a;if(!i||!i.length)return;if(!t.method)return t.modified("method")&&(S9e(i),r=C9e(r,t)),r;if(i=i.filter(VVt),!i.length)return;if(t.sort&&(i=i.slice().sort(t.sort)),s=S9e(i),r=C9e(r,t),s.length>=3&&_9e(s,o)){do s=n(s,o);while(s.length>=3&&_9e(s,o));s.length<3&&!Gc(i).opacity&&(s.length>1&&(Gc(s).opacity=0),Gc(i).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(a=GVt(t.boundScale,t.boundOrient,+t.boundTolerance),i.forEach(u=>{a(u)||(u.opacity=0)}));let l=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&l.union(u.bounds)}),r}});Vx(U9e,et,{transform(t,r){let n=r.dataflow;if(r.visit(r.ALL,o=>n.dirty(o)),r.fields&&r.fields.zindex){let o=r.source&&r.source[0];o&&(o.mark.zdirty=!0)}}});fu=new Qc;E9e=(t,r)=>Math.floor(Math.min(t,r)),T9e=(t,r)=>Math.ceil(Math.max(t,r));Vx(G9e,et,{transform(t,r){let n=r.dataflow;return t.mark.items.forEach(o=>{t.layout&&ZVt(n,o,t.layout),uGt(n,o,t)}),lGt(t.mark.group)?r.reflow():r}})});function na(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function ny(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var hd=D(()=>{"use strict"});function iN(){var t=new Map,r=[],n=[],o=oN;function i(s){var a=s+"",l=t.get(a);if(!l){if(o!==oN)return o;t.set(a,l=r.push(s))}return n[(l-1)%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Map;for(let a of s){let l=a+"";t.has(l)||t.set(l,r.push(a))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return iN(r,n).unknown(o)},na.apply(i,arguments),i}var oN,q9e=D(()=>{"use strict";hd();oN=Symbol("implicit")});function dpe(t){return function(){return t}}var H9e=D(()=>{"use strict"});function sN(t){return+t}var ppe=D(()=>{"use strict"});function Nl(t){return t}function hpe(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:dpe(isNaN(r)?NaN:.5)}function fGt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function dGt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=hpe(i,o),s=n(a,s)):(o=hpe(o,i),s=n(s,a)),function(l){return s(o(l))}}function pGt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=hpe(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=Bh(t,l,1,o)-1;return s[u](i[u](l))}}function oy(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function WE(){var t=Y9e,r=Y9e,n=lu,o,i,s,a=Nl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Nl&&(a=fGt(t[0],t[p-1])),l=p>2?pGt:dGt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),uu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,sN),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=J0,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Nl,f()):a!==Nl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function kL(){return WE()(Nl,Nl)}var Y9e,c_=D(()=>{"use strict";Vo();PE();H9e();ppe();Y9e=[0,1]});function qE(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var PG=D(()=>{"use strict"});function iy(t){return t=qE(Math.abs(t)),t?t[1]:NaN}var IL=D(()=>{"use strict";PG()});function X9e(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var K9e=D(()=>{"use strict"});function Z9e(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var Q9e=D(()=>{"use strict"});function md(t){return new mpe(t)}function mpe(t){if(!(r=hGt.exec(t)))throw new Error("invalid format: "+t);var r;this.fill=r[1]||" ",this.align=r[2]||">",this.sign=r[3]||"-",this.symbol=r[4]||"",this.zero=!!r[5],this.width=r[6]&&+r[6],this.comma=!!r[7],this.precision=r[8]&&+r[8].slice(1),this.trim=!!r[9],this.type=r[10]||""}var hGt,gpe=D(()=>{"use strict";hGt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;md.prototype=mpe.prototype;mpe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function J9e(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(o>0){if(!+t[n])break e;o=0}break}return o>0?t.slice(0,o)+t.slice(i+1):t}var eVe=D(()=>{"use strict"});function tVe(t,r){var n=qE(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(ype=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+qE(t,Math.max(0,r+s-1))[0]}var ype,bpe=D(()=>{"use strict";PG()});function xpe(t,r){var n=qE(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var rVe=D(()=>{"use strict";PG()});var vpe,nVe=D(()=>{"use strict";bpe();rVe();vpe={"%":function(t,r){return(t*100).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return xpe(t*100,r)},r:xpe,s:tVe,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}});function wpe(t){return t}var oVe=D(()=>{"use strict"});function jG(t){var r=t.grouping&&t.thousands?X9e(t.grouping,t.thousands):wpe,n=t.currency,o=t.decimal,i=t.numerals?Z9e(t.numerals):wpe,s=t.percent||"%";function a(u){u=md(u);var c=u.fill,f=u.align,d=u.sign,p=u.symbol,h=u.zero,m=u.width,g=u.comma,y=u.precision,b=u.trim,x=u.type;x==="n"?(g=!0,x="g"):vpe[x]||(y==null&&(y=12),b=!0,x="g"),(h||c==="0"&&f==="=")&&(h=!0,c="0",f="=");var v=p==="$"?n[0]:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w=p==="$"?n[1]:/[%p]/.test(x)?s:"",_=vpe[x],C=/[defgprs%]/.test(x);y=y==null?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function S(E){var A=v,N=w,k,R,I;if(x==="c")N=_(E)+N,E="";else{E=+E;var L=E<0;if(E=_(Math.abs(E),y),b&&(E=J9e(E)),L&&+E==0&&(L=!1),A=(L?d==="("?d:"-":d==="-"||d==="("?"":d)+A,N=(x==="s"?iVe[8+ype/3]:"")+N+(L&&d==="("?")":""),C){for(k=-1,R=E.length;++k<R;)if(I=E.charCodeAt(k),48>I||I>57){N=(I===46?o+E.slice(k+1):E.slice(k))+N,E=E.slice(0,k);break}}}g&&!h&&(E=r(E,1/0));var j=A.length+E.length+N.length,M=j<m?new Array(m-j+1).join(c):"";switch(g&&h&&(E=r(M+E,M.length?m-N.length:1/0),M=""),f){case"<":E=A+E+N+M;break;case"=":E=A+M+E+N;break;case"^":E=M.slice(0,j=M.length>>1)+A+E+N+M.slice(j);break;default:E=M+A+E+N;break}return i(E)}return S.toString=function(){return u+""},S}function l(u,c){var f=a((u=md(u),u.type="f",u)),d=Math.max(-8,Math.min(8,Math.floor(iy(c)/3)))*3,p=Math.pow(10,-d),h=iVe[8+d/3];return function(m){return f(p*m)+h}}return{format:a,formatPrefix:l}}var iVe,_pe=D(()=>{"use strict";IL();K9e();Q9e();gpe();eVe();nVe();bpe();oVe();iVe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function BG(t){return LG=jG(t),Jh=LG.format,HE=LG.formatPrefix,LG}var LG,Jh,HE,sVe=D(()=>{"use strict";_pe();BG({decimal:".",thousands:",",grouping:[3],currency:["$",""]})});function aN(t){return Math.max(0,-iy(Math.abs(t)))}var aVe=D(()=>{"use strict";IL()});function lN(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iy(r)/3)))*3-iy(Math.abs(t)))}var lVe=D(()=>{"use strict";IL()});function uN(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,iy(r)-iy(t))+1}var uVe=D(()=>{"use strict";IL()});var Spe={};fn(Spe,{format:()=>Jh,formatDefaultLocale:()=>BG,formatLocale:()=>jG,formatPrefix:()=>HE,formatSpecifier:()=>md,precisionFixed:()=>aN,precisionPrefix:()=>lN,precisionRound:()=>uN});var YE=D(()=>{"use strict";sVe();_pe();gpe();aVe();lVe();uVe()});function cN(t,r,n,o){var i=ec(t,r,n),s;switch(o=md(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=lN(i,a))&&(o.precision=s),HE(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=uN(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=aN(i))&&(o.precision=s-(o.type==="%")*2);break}}return Jh(o)}var Cpe=D(()=>{"use strict";Vo();YE()});function gd(t){var r=t.domain;return t.ticks=function(n){var o=r();return mD(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return cN(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=l9(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function DL(){var t=kL();return t.copy=function(){return oy(t,DL())},na.apply(t,arguments),gd(t)}var f_=D(()=>{"use strict";Vo();c_();hd();Cpe()});function NL(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,sN),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return NL(t).unknown(r)},t=arguments.length?Array.from(t,sN):[0,1],gd(n)}var cVe=D(()=>{"use strict";f_();ppe()});function OL(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var Epe=D(()=>{"use strict"});function fVe(t){return Math.log(t)}function dVe(t){return Math.exp(t)}function mGt(t){return-Math.log(-t)}function gGt(t){return-Math.exp(-t)}function yGt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bGt(t){return t===10?yGt:t===Math.E?Math.exp:function(r){return Math.pow(t,r)}}function xGt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(r){return Math.log(r)/t})}function pVe(t){return function(r){return-t(-r)}}function FL(t){var r=t(fVe,dVe),n=r.domain,o=10,i,s;function a(){return i=xGt(o),s=bGt(o),n()[0]<0?(i=pVe(i),s=pVe(s),t(mGt,gGt)):t(fVe,dVe),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=function(l){var u=n(),c=u[0],f=u[u.length-1],d;(d=f<c)&&(p=c,c=f,f=p);var p=i(c),h=i(f),m,g,y,b=l==null?10:+l,x=[];if(!(o%1)&&h-p<b){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(g=1,m=s(p);g<o;++g)if(y=m*g,!(y<c)){if(y>f)break;x.push(y)}}else for(;p<=h;++p)for(g=o-1,m=s(p);g>=1;--g)if(y=m*g,!(y<c)){if(y>f)break;x.push(y)}x.length*2<b&&(x=mD(c,f,b))}else x=mD(p,h,Math.min(h-p,b)).map(s);return d?x.reverse():x},r.tickFormat=function(l,u){if(u==null&&(u=o===10?".0e":","),typeof u!="function"&&(u=Jh(u)),l===1/0)return u;l==null&&(l=10);var c=Math.max(1,o*l/r.ticks().length);return function(f){var d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=function(){return n(OL(n(),{floor:function(l){return s(Math.floor(i(l)))},ceil:function(l){return s(Math.ceil(i(l)))}}))},r}function RL(){var t=FL(WE()).domain([1,10]);return t.copy=function(){return oy(t,RL()).base(t.base())},na.apply(t,arguments),t}var $G=D(()=>{"use strict";Vo();YE();Epe();c_();hd()});function hVe(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function mVe(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function ML(t){var r=1,n=t(hVe(r),mVe(r));return n.constant=function(o){return arguments.length?t(hVe(r=+o),mVe(r)):r},gd(n)}function PL(){var t=ML(WE());return t.copy=function(){return oy(t,PL()).constant(t.constant())},na.apply(t,arguments)}var zG=D(()=>{"use strict";f_();c_();hd()});function gVe(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function vGt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wGt(t){return t<0?-t*t:t*t}function jL(t){var r=t(Nl,Nl),n=1;function o(){return n===1?t(Nl,Nl):n===.5?t(vGt,wGt):t(gVe(n),gVe(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},gd(r)}function fN(){var t=jL(WE());return t.copy=function(){return oy(t,fN()).exponent(t.exponent())},na.apply(t,arguments),t}function Tpe(){return fN.apply(null,arguments).exponent(.5)}var UG=D(()=>{"use strict";f_();c_();hd()});function LL(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=kP(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[Bh(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(lp),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return LL().domain(t).range(r).unknown(o)},na.apply(s,arguments)}var yVe=D(()=>{"use strict";Vo();hd()});function BL(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[Bh(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return BL().domain([t,r]).range(i).unknown(s)},na.apply(gd(a),arguments)}var bVe=D(()=>{"use strict";Vo();f_();hd()});function $L(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[Bh(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $L().domain(t).range(r).unknown(n)},na.apply(i,arguments)}var xVe=D(()=>{"use strict";Vo();hd()});function Ape(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kpe(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zL(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function dN(t){var r=t.dateTime,n=t.date,o=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,c=UL(i),f=VL(i),d=UL(s),p=VL(s),h=UL(a),m=VL(a),g=UL(l),y=VL(l),b=UL(u),x=VL(u),v={a:V,A:G,b:U,B:Y,c:null,d:EVe,e:EVe,f:GGt,g:eWt,G:rWt,H:zGt,I:UGt,j:VGt,L:DVe,m:WGt,M:qGt,p:X,q:pe,Q:kVe,s:IVe,S:HGt,u:YGt,U:XGt,V:KGt,w:ZGt,W:QGt,x:null,X:null,y:JGt,Y:tWt,Z:nWt,"%":AVe},w={a:$,A:O,b:z,B:q,c:null,d:TVe,e:TVe,f:aWt,g:yWt,G:xWt,H:oWt,I:iWt,j:sWt,L:OVe,m:lWt,M:uWt,p:ee,q:ae,Q:kVe,s:IVe,S:cWt,u:fWt,U:dWt,V:pWt,w:hWt,W:mWt,x:null,X:null,y:gWt,Y:bWt,Z:vWt,"%":AVe},_={a:N,A:k,b:R,B:I,c:L,d:SVe,e:SVe,f:jGt,g:_Ve,G:wVe,H:CVe,I:CVe,j:FGt,L:PGt,m:OGt,M:RGt,p:A,q:NGt,Q:BGt,s:$Gt,S:MGt,u:TGt,U:AGt,V:kGt,w:EGt,W:IGt,x:j,X:M,y:_Ve,Y:wVe,Z:DGt,"%":LGt};v.x=C(n,v),v.X=C(o,v),v.c=C(r,v),w.x=C(n,w),w.X=C(o,w),w.c=C(r,w);function C(Q,le){return function(ie){var Z=[],ge=-1,ne=0,ye=Q.length,xe,Ne,Ae;for(ie instanceof Date||(ie=new Date(+ie));++ge<ye;)Q.charCodeAt(ge)===37&&(Z.push(Q.slice(ne,ge)),(Ne=vVe[xe=Q.charAt(++ge)])!=null?xe=Q.charAt(++ge):Ne=xe==="e"?" ":"0",(Ae=le[xe])&&(xe=Ae(ie,Ne)),Z.push(xe),ne=ge+1);return Z.push(Q.slice(ne,ge)),Z.join("")}}function S(Q,le){return function(ie){var Z=zL(1900,void 0,1),ge=E(Z,Q,ie+="",0),ne,ye;if(ge!=ie.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ne=kpe(zL(Z.y,0,1)),ye=ne.getUTCDay(),ne=ye>4||ye===0?_D.ceil(ne):_D(ne),ne=id.offset(ne,(Z.V-1)*7),Z.y=ne.getUTCFullYear(),Z.m=ne.getUTCMonth(),Z.d=ne.getUTCDate()+(Z.w+6)%7):(ne=Ape(zL(Z.y,0,1)),ye=ne.getDay(),ne=ye>4||ye===0?wD.ceil(ne):wD(ne),ne=nd.offset(ne,(Z.V-1)*7),Z.y=ne.getFullYear(),Z.m=ne.getMonth(),Z.d=ne.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ye="Z"in Z?kpe(zL(Z.y,0,1)).getUTCDay():Ape(zL(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ye+5)%7:Z.w+Z.U*7-(ye+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,kpe(Z)):Ape(Z)}}function E(Q,le,ie,Z){for(var ge=0,ne=le.length,ye=ie.length,xe,Ne;ge<ne;){if(Z>=ye)return-1;if(xe=le.charCodeAt(ge++),xe===37){if(xe=le.charAt(ge++),Ne=_[xe in vVe?le.charAt(ge++):xe],!Ne||(Z=Ne(Q,ie,Z))<0)return-1}else if(xe!=ie.charCodeAt(Z++))return-1}return Z}function A(Q,le,ie){var Z=c.exec(le.slice(ie));return Z?(Q.p=f.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function N(Q,le,ie){var Z=h.exec(le.slice(ie));return Z?(Q.w=m.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function k(Q,le,ie){var Z=d.exec(le.slice(ie));return Z?(Q.w=p.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function R(Q,le,ie){var Z=b.exec(le.slice(ie));return Z?(Q.m=x.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function I(Q,le,ie){var Z=g.exec(le.slice(ie));return Z?(Q.m=y.get(Z[0].toLowerCase()),ie+Z[0].length):-1}function L(Q,le,ie){return E(Q,r,le,ie)}function j(Q,le,ie){return E(Q,n,le,ie)}function M(Q,le,ie){return E(Q,o,le,ie)}function V(Q){return a[Q.getDay()]}function G(Q){return s[Q.getDay()]}function U(Q){return u[Q.getMonth()]}function Y(Q){return l[Q.getMonth()]}function X(Q){return i[+(Q.getHours()>=12)]}function pe(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return a[Q.getUTCDay()]}function O(Q){return s[Q.getUTCDay()]}function z(Q){return u[Q.getUTCMonth()]}function q(Q){return l[Q.getUTCMonth()]}function ee(Q){return i[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var le=C(Q+="",v);return le.toString=function(){return Q},le},parse:function(Q){var le=S(Q+="",!1);return le.toString=function(){return Q},le},utcFormat:function(Q){var le=C(Q+="",w);return le.toString=function(){return Q},le},utcParse:function(Q){var le=S(Q+="",!0);return le.toString=function(){return Q},le}}}function lo(t,r,n){var o=t<0?"-":"",i=(o?-t:t)+"",s=i.length;return o+(s<n?new Array(n-s+1).join(r)+i:i)}function CGt(t){return t.replace(SGt,"\\$&")}function UL(t){return new RegExp("^(?:"+t.map(CGt).join("|")+")","i")}function VL(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function EGt(t,r,n){var o=Qa.exec(r.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function TGt(t,r,n){var o=Qa.exec(r.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function AGt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function kGt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function IGt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function wVe(t,r,n){var o=Qa.exec(r.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function _Ve(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function DGt(t,r,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function NGt(t,r,n){var o=Qa.exec(r.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function OGt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function SVe(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function FGt(t,r,n){var o=Qa.exec(r.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function CVe(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function RGt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function MGt(t,r,n){var o=Qa.exec(r.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function PGt(t,r,n){var o=Qa.exec(r.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function jGt(t,r,n){var o=Qa.exec(r.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function LGt(t,r,n){var o=_Gt.exec(r.slice(n,n+1));return o?n+o[0].length:-1}function BGt(t,r,n){var o=Qa.exec(r.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function $Gt(t,r,n){var o=Qa.exec(r.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function EVe(t,r){return lo(t.getDate(),r,2)}function zGt(t,r){return lo(t.getHours(),r,2)}function UGt(t,r){return lo(t.getHours()%12||12,r,2)}function VGt(t,r){return lo(1+nd.count(od(t),t),r,3)}function DVe(t,r){return lo(t.getMilliseconds(),r,3)}function GGt(t,r){return DVe(t,r)+"000"}function WGt(t,r){return lo(t.getMonth()+1,r,2)}function qGt(t,r){return lo(t.getMinutes(),r,2)}function HGt(t,r){return lo(t.getSeconds(),r,2)}function YGt(t){var r=t.getDay();return r===0?7:r}function XGt(t,r){return lo(cp.count(od(t)-1,t),r,2)}function NVe(t){var r=t.getDay();return r>=4||r===0?kw(t):kw.ceil(t)}function KGt(t,r){return t=NVe(t),lo(kw.count(od(t),t)+(od(t).getDay()===4),r,2)}function ZGt(t){return t.getDay()}function QGt(t,r){return lo(wD.count(od(t)-1,t),r,2)}function JGt(t,r){return lo(t.getFullYear()%100,r,2)}function eWt(t,r){return t=NVe(t),lo(t.getFullYear()%100,r,2)}function tWt(t,r){return lo(t.getFullYear()%1e4,r,4)}function rWt(t,r){var n=t.getDay();return t=n>=4||n===0?kw(t):kw.ceil(t),lo(t.getFullYear()%1e4,r,4)}function nWt(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+lo(r/60|0,"0",2)+lo(r%60,"0",2)}function TVe(t,r){return lo(t.getUTCDate(),r,2)}function oWt(t,r){return lo(t.getUTCHours(),r,2)}function iWt(t,r){return lo(t.getUTCHours()%12||12,r,2)}function sWt(t,r){return lo(1+id.count(sd(t),t),r,3)}function OVe(t,r){return lo(t.getUTCMilliseconds(),r,3)}function aWt(t,r){return OVe(t,r)+"000"}function lWt(t,r){return lo(t.getUTCMonth()+1,r,2)}function uWt(t,r){return lo(t.getUTCMinutes(),r,2)}function cWt(t,r){return lo(t.getUTCSeconds(),r,2)}function fWt(t){var r=t.getUTCDay();return r===0?7:r}function dWt(t,r){return lo(fp.count(sd(t)-1,t),r,2)}function FVe(t){var r=t.getUTCDay();return r>=4||r===0?Dw(t):Dw.ceil(t)}function pWt(t,r){return t=FVe(t),lo(Dw.count(sd(t),t)+(sd(t).getUTCDay()===4),r,2)}function hWt(t){return t.getUTCDay()}function mWt(t,r){return lo(_D.count(sd(t)-1,t),r,2)}function gWt(t,r){return lo(t.getUTCFullYear()%100,r,2)}function yWt(t,r){return t=FVe(t),lo(t.getUTCFullYear()%100,r,2)}function bWt(t,r){return lo(t.getUTCFullYear()%1e4,r,4)}function xWt(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Dw(t):Dw.ceil(t),lo(t.getUTCFullYear()%1e4,r,4)}function vWt(){return"+0000"}function AVe(){return"%"}function kVe(t){return+t}function IVe(t){return Math.floor(+t/1e3)}var vVe,Qa,_Gt,SGt,Ipe=D(()=>{"use strict";PP();vVe={"-":"",_:" ",0:"0"},Qa=/^\s*\d+/,_Gt=/^%/,SGt=/[\\^$*+?|[\]().{}]/g});function Dpe(t){return pN=dN(t),d_=pN.format,VG=pN.parse,p_=pN.utcFormat,GG=pN.utcParse,pN}var pN,d_,VG,p_,GG,RVe=D(()=>{"use strict";Ipe();Dpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})});var hN=D(()=>{"use strict";RVe();Ipe()});function wWt(t){return new Date(t)}function _Wt(t){return t instanceof Date?+t:+new Date(+t)}function WG(t,r,n,o,i,s,a,l,u,c){var f=kL(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(C){return(u(C)<C?h:l(C)<C?m:a(C)<C?g:s(C)<C?y:o(C)<C?i(C)<C?b:x:n(C)<C?v:w)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,_Wt)):p().map(wWt)},f.ticks=function(C){var S=p();return t(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?_:c(S)},f.nice=function(C){var S=p();return(!C||typeof C.range!="function")&&(C=r(S[0],S[S.length-1],C??10)),C?p(OL(S,C)):f},f.copy=function(){return oy(f,WG(t,r,n,o,i,s,a,l,u,c))},f}function qG(){return na.apply(WG(qle,Hle,od,Iw,cp,nd,cE,lE,rc,d_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Npe=D(()=>{"use strict";PP();hN();c_();hd();Epe()});function HG(){return na.apply(WG(Gle,Wle,sd,Nw,fp,id,pE,dE,rc,p_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var MVe=D(()=>{"use strict";PP();hN();Npe();hd()});function YG(){var t=0,r=1,n,o,i,s,a=Nl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(lu),c.rangeRound=f(J0),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function rv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function mN(){var t=gd(YG()(Nl));return t.copy=function(){return rv(t,mN())},ny.apply(t,arguments)}function XG(){var t=FL(YG()).domain([1,10]);return t.copy=function(){return rv(t,XG()).base(t.base())},ny.apply(t,arguments)}function KG(){var t=ML(YG());return t.copy=function(){return rv(t,KG()).constant(t.constant())},ny.apply(t,arguments)}function GL(){var t=jL(YG());return t.copy=function(){return rv(t,GL()).exponent(t.exponent())},ny.apply(t,arguments)}function Ope(){return GL.apply(null,arguments).exponent(.5)}var Fpe=D(()=>{"use strict";PE();c_();hd();f_();$G();zG();UG()});function ZG(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Nl,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=ME(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(lu),h.rangeRound=m(J0),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function WL(){var t=gd(ZG()(Nl));return t.copy=function(){return rv(t,WL())},ny.apply(t,arguments)}function QG(){var t=FL(ZG()).domain([.1,1,10]);return t.copy=function(){return rv(t,QG()).base(t.base())},ny.apply(t,arguments)}function JG(){var t=ML(ZG());return t.copy=function(){return rv(t,JG()).constant(t.constant())},ny.apply(t,arguments)}function qL(){var t=jL(ZG());return t.copy=function(){return rv(t,qL()).exponent(t.exponent())},ny.apply(t,arguments)}function Rpe(){return qL.apply(null,arguments).exponent(.5)}var PVe=D(()=>{"use strict";PE();c_();hd();f_();$G();Fpe();zG();UG()});var Mpe=D(()=>{"use strict";cVe();f_();$G();zG();q9e();UG();yVe();bVe();xVe();Npe();MVe();Fpe();PVe();Cpe()});function HL(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function CWt(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function EWt(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function Bpe(){let t=iN().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=HL(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=Qs(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,oE(h,g)-1),x=g===y?b:oE(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return Bpe().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function $Ve(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return $Ve(r())},t}function TWt(){return $Ve(Bpe().paddingInner(1))}function kWt(t){return AWt.call(t,Nh)}function zVe(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(Bh(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=kWt(o),n):t.slice()},n.range=function(o){return arguments.length?(r=IWt.call(o),n):r.slice()},n.tickFormat=function(o,i){return cN(t[0],zn(t),o??10,i)},n.copy=function(){return zVe().domain(n.domain()).range(n.range())},n}function DWt(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?CWt(s):s.invertExtent?EWt(s):void 0),s.type=t,s};return o.metadata=ou(Lr(n)),o}function Vn(t,r,n){return arguments.length>1?(eW[t]=DWt(t,r,n),this):$pe(t)?eW[t]:void 0}function $pe(t){return Rr(eW,t)}function QE(t,r){let n=eW[t];return n&&n.metadata[r]}function JL(t){return QE(t,Ta)}function g_(t){return QE(t,ZL)}function oW(t){return QE(t,QL)}function zpe(t){return QE(t,sy)}function NWt(t){return QE(t,Lpe)}function Upe(t){return QE(t,wp)}function Vpe(t){return QE(t,XE)}function iW(t,r){let n=r[0],o=zn(r)-n;return function(i){return t(n+i*o)}}function bN(t,r,n){return ME(e4(r||"rgb",n),t)}function sW(t,r){let n=new Array(r),o=r+1;for(let i=0;i<r;)n[i]=t(++i/o);return n}function aW(t,r,n){let o=n-r,i,s,a;return!o||!Number.isFinite(o)?Ga(.5):(i=(s=t.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=Vn(s)().domain([r,n]).range([0,1]),OWt.forEach(l=>t[l]?a[l](t[l]()):0),a)}function e4(t,r){let n=rde[FWt(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function FWt(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function UVe(t){let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function VVe(t,r){for(let n in t)t4(n,r(t[n]))}function t4(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(jVe[t]=r,this):jVe[t]}function lW(t,r,n){let o;return k0(r)&&(t.bins&&(r=Math.max(r,t.bins.length)),n!=null&&(r=Math.min(r,Math.floor(YC(t.domain())/n||1)))),un(r)&&(o=r.step,r=r.interval),Zn(r)&&(r=t.type===h_?Bx(r):t.type==m_?$x(r):pt("Only time and utc scales accept interval strings."),o&&(r=r.every(o))),r}function Gpe(t,r,n){let o=t.range(),i=o[0],s=zn(o),a=LWt;if(i>s&&(o=s,s=i,i=o,a=BWt),i=Math.floor(i),s=Math.ceil(s),r=r.map(l=>[l,t(l)]).filter(l=>i<=l[1]&&l[1]<=s).sort(a).map(l=>l[0]),n>0&&r.length>1){let l=[r[0],zn(r)];for(;r.length>n&&r.length>=3;)r=r.filter((u,c)=>!(c%2));r.length<3&&(r=l)}return r}function uW(t,r){return t.bins?Gpe(t,t.bins):t.ticks?t.ticks(r):t.domain()}function Wpe(t,r,n,o,i,s){let a=r.type,l=jWt;if(a===h_||i===h_)l=t.timeFormat(o);else if(a===m_||i===m_)l=t.utcFormat(o);else if(zpe(a)){let u=t.formatFloat(o);if(s||r.bins)l=u;else{let c=WVe(r,n,!1);l=f=>c(f)?u(f):""}}else if(r.tickFormat){let u=r.domain();l=t.formatSpan(u[0],u[u.length-1],n,o)}else o&&(l=t.format(o));return l}function WVe(t,r,n){let o=uW(t,r),i=t.base(),s=Math.log(i),a=Math.max(1,i*r/o.length),l=u=>{let c=u/Math.pow(i,Math.round(Math.log(u)/s));return c*i<i-.5&&(c*=i),c<=a};return n?o.filter(l):l}function qpe(t,r){return t.bins?UWt(t.bins):t.type===sy?WVe(t,r,!0):Ppe[t.type]?zWt(t[Ppe[t.type]]()):uW(t,r)}function $Wt(t,r,n){let o=r[qVe[r.type]](),i=o.length,s=i>1?o[1]-o[0]:o[0],a;for(a=1;a<i;++a)s=Math.min(s,o[a]-o[a-1]);return t.formatSpan(0,s,3*10,n)}function zWt(t){let r=[-1/0].concat(t);return r.max=1/0,r}function UWt(t){let r=t.slice(0,-1);return r.max=zn(t),r}function Hpe(t,r,n,o,i,s,a){let l=qVe[r.type]&&s!==h_&&s!==m_?$Wt(t,r,i):Wpe(t,r,n,i,s,a);return o===r4&&VWt(r)?GWt(l):o===PWt?WWt(l):qWt(l)}function HVe(t){let r=t.domain(),n=r.length-1,o=+r[0],i=+zn(r),s=i-o;if(t.type===KL){let a=n?s/n:.1;o-=a,i+=a,s=i-o}return a=>(a-o)/s}function HWt(t,r,n,o){let i=o||r.type;return Zn(n)&&NWt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===h_?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===m_?t.utcFormat("%A, %d %B %Y, %X UTC"):Hpe(t,r,5,null,n,o,!0)}function Ype(t,r,n){n=n||{};let o=Math.max(3,n.maxlen||7),i=HWt(t,r,n.format,n.formatType);if(oW(r.type)){let s=qpe(r).slice(1).map(i),a=s.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(s.join(", "))}else if(g_(r.type)){let s=r.domain(),a=s.length,l=a>o?s.slice(0,o-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(l)}else{let s=r.domain();return"values from ".concat(i(s[0])," to ").concat(i(zn(s)))}}var SWt,KE,sy,gN,yN,YL,h_,m_,em,ZE,XE,XL,KL,tW,rW,jpe,nW,Ta,ZL,QL,wp,Lpe,AWt,IWt,eW,OWt,RWt,MWt,jVe,r4,PWt,GVe,jWt,LWt,BWt,Ppe,qVe,VWt,GWt,LVe,WWt,qWt,BVe,xN=D(()=>{"use strict";Os();Vo();Mpe();Mpe();PE();PE();CD();SWt="identity",KE="linear",sy="log",gN="pow",yN="sqrt",YL="symlog",h_="time",m_="utc",em="sequential",ZE="diverging",XE="quantile",XL="quantize",KL="threshold",tW="ordinal",rW="point",jpe="band",nW="bin-ordinal",Ta="continuous",ZL="discrete",QL="discretizing",wp="interpolating",Lpe="temporal";AWt=Array.prototype.map;IWt=Array.prototype.slice;eW={};Vn(SWt,NL);Vn(KE,DL,Ta);Vn(sy,RL,[Ta,sy]);Vn(gN,fN,Ta);Vn(yN,Tpe,Ta);Vn(YL,PL,Ta);Vn(h_,qG,[Ta,Lpe]);Vn(m_,HG,[Ta,Lpe]);Vn(em,mN,[Ta,wp]);Vn("".concat(em,"-").concat(KE),mN,[Ta,wp]);Vn("".concat(em,"-").concat(sy),XG,[Ta,wp,sy]);Vn("".concat(em,"-").concat(gN),GL,[Ta,wp]);Vn("".concat(em,"-").concat(yN),Ope,[Ta,wp]);Vn("".concat(em,"-").concat(YL),KG,[Ta,wp]);Vn("".concat(ZE,"-").concat(KE),WL,[Ta,wp]);Vn("".concat(ZE,"-").concat(sy),QG,[Ta,wp,sy]);Vn("".concat(ZE,"-").concat(gN),qL,[Ta,wp]);Vn("".concat(ZE,"-").concat(yN),Rpe,[Ta,wp]);Vn("".concat(ZE,"-").concat(YL),JG,[Ta,wp]);Vn(XE,LL,[QL,XE]);Vn(XL,BL,QL);Vn(KL,$L,QL);Vn(nW,zVe,[ZL,QL]);Vn(tW,iN,ZL);Vn(jpe,Bpe,ZL);Vn(rW,TWt,ZL);OWt=["clamp","base","constant","exponent"];RWt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},MWt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};jVe={};VVe(MWt,UVe);VVe(RWt,t=>bN(UVe(t)));r4="symbol",PWt="discrete",GVe="gradient",jWt=t=>Hr(t)?t.map(r=>String(r)):String(t),LWt=(t,r)=>t[1]-r[1],BWt=(t,r)=>r[1]-t[1];Ppe={[XE]:"quantiles",[XL]:"thresholds",[KL]:"domain"},qVe={[XE]:"quantiles",[XL]:"domain"};VWt=t=>Ppe[t.type]||t.bins;GWt=t=>(r,n,o)=>{let i=LVe(o[n+1],LVe(o.max,1/0)),s=BVe(r,t),a=BVe(i,t);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},LVe=(t,r)=>t??r,WWt=t=>(r,n)=>n?t(r):null,qWt=t=>r=>t(r),BVe=(t,r)=>Number.isFinite(t)?r(t):null});var Jpe={};fn(Jpe,{axisticks:()=>ZVe,datajoin:()=>QVe,encode:()=>JVe,legendentries:()=>eGe,linkpath:()=>Kpe,pie:()=>Zpe,scale:()=>iGe,sortitems:()=>aGe,stack:()=>Qpe});function ZVe(t){et.call(this,null,t)}function QVe(t){et.call(this,null,t)}function YWt(){return Dn({})}function XWt(t){let r=bw().test(n=>n.exit);return r.lookup=n=>r.get(t(n)),r}function JVe(t){et.call(this,null,t)}function eGe(t){et.call(this,[],t)}function Kpe(t){et.call(this,{},t)}function Zpe(t){et.call(this,null,t)}function cqt(t){let r=t.type;return!t.bins&&(r===KE||r===gN||r===yN)}function oGe(t){return JL(t)&&t!==em}function iGe(t){et.call(this,null,t),this.modified(!0)}function dqt(t){var r=t.type,n="",o;return r===em?em+"-"+KE:(pqt(t)&&(o=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=o===2?em+"-":o===3?ZE+"-":""),(n+r||KE).toLowerCase())}function pqt(t){let r=t.type;return JL(r)&&r!==h_&&r!==m_&&(t.scheme||t.range&&t.range.length&&t.range.every(Zn))}function hqt(t,r,n){let o=mqt(t,r.domainRaw,n);if(o>-1)return o;var i=r.domain,s=t.type,a=r.zero||r.zero===void 0&&cqt(t),l,u;if(!i)return 0;if(oGe(s)&&r.padding&&i[0]!==zn(i)&&(i=gqt(s,i,r.range,r.padding,r.exponent,r.constant)),(a||r.domainMin!=null||r.domainMax!=null||r.domainMid!=null)&&(l=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[l]<0&&(i[l]=0)),r.domainMin!=null&&(i[0]=r.domainMin),r.domainMax!=null&&(i[l]=r.domainMax),r.domainMid!=null)){u=r.domainMid;let c=u>i[l]?l+1:u<i[0]?0:l;c!==l&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(c,0,u)}return t.domain(sGe(s,i,n)),s===tW&&t.unknown(r.domainImplicit?oN:void 0),r.nice&&t.nice&&t.nice(r.nice!==!0&&lW(t,r.nice)||null),i.length}function mqt(t,r,n){return r?(t.domain(sGe(t.type,r,n)),r.length):-1}function gqt(t,r,n,o,i,s){var a=Math.abs(zn(n)-n[0]),l=a/(a-2*o),u=t===sy?Hse(r,null,l):t===yN?k7(r,null,l,.5):t===gN?k7(r,null,l,i||1):t===YL?Yse(r,null,l,s||1):qse(r,null,l);return r=r.slice(),r[0]=u[0],r[r.length-1]=u[1],r}function sGe(t,r,n){if(zpe(t)){var o=Math.abs(r.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));o!==r.length&&n.warn("Log scale domain includes zero: "+Br(r))}return r}function yqt(t,r,n){let o=r.bins;if(o&&!Hr(o)){let i=t.domain(),s=i[0],a=zn(i),l=o.step,u=o.start==null?s:o.start,c=o.stop==null?a:o.stop;l||pt("Scale bins parameter missing step property."),u<s&&(u=l*Math.ceil(s/l)),c>a&&(c=l*Math.floor(a/l)),o=Qs(u,c+l/2,l)}return o?t.bins=o:t.bins&&delete t.bins,t.type===nW&&(o?!r.domain&&!r.domainRaw&&(t.domain(o),n=o.length):t.bins=t.domain()),n}function bqt(t,r,n){var o=t.type,i=r.round||!1,s=r.range;if(r.rangeStep!=null)s=xqt(o,r,n);else if(r.scheme&&(s=vqt(o,r,n),In(s))){if(t.interpolator)return t.interpolator(s);pt("Scale type ".concat(o," does not support interpolating color schemes."))}if(s&&Upe(o))return t.interpolator(bN(Xpe(s,r.reverse),r.interpolate,r.interpolateGamma));s&&r.interpolate&&t.interpolate?t.interpolate(e4(r.interpolate,r.interpolateGamma)):In(t.round)?t.round(i):In(t.rangeRound)&&t.interpolate(i?J0:lu),s&&t.range(Xpe(s,r.reverse))}function xqt(t,r,n){t!==jpe&&t!==rW&&pt("Only band and point scales support rangeStep.");var o=(r.paddingOuter!=null?r.paddingOuter:r.padding)||0,i=t===rW?1:(r.paddingInner!=null?r.paddingInner:r.padding)||0;return[0,r.rangeStep*HL(n,i,o)]}function vqt(t,r,n){var o=r.schemeExtent,i,s;return Hr(r.scheme)?s=bN(r.scheme,r.interpolate,r.interpolateGamma):(i=r.scheme.toLowerCase(),s=t4(i),s||pt("Unrecognized scheme name: ".concat(r.scheme))),n=t===KL?n+1:t===nW?n-1:t===XE||t===XL?+r.schemeCount||uqt:n,Upe(t)?XVe(s,o,r.reverse):In(s)?sW(XVe(s,o),n):t===tW?s:s.slice(0,n)}function XVe(t,r,n){return In(t)&&(r||n)?iW(t,Xpe(r||[0,1],n)):t}function Xpe(t,r){return r?t.slice().reverse():t}function aGe(t){et.call(this,null,t)}function Qpe(t){et.call(this,null,t)}function wqt(t,r,n,o,i){for(var s=(r-t.sum)/2,a=t.length,l=0,u;l<a;++l)u=t[l],u[o]=s,u[i]=s+=Math.abs(n(u))}function _qt(t,r,n,o,i){for(var s=1/t.sum,a=0,l=t.length,u=0,c=0,f;u<l;++u)f=t[u],f[o]=a,f[i]=a=s*(c+=Math.abs(n(f)))}function Sqt(t,r,n,o,i){for(var s=0,a=0,l=t.length,u=0,c,f;u<l;++u)f=t[u],c=+n(f),c<0?(f[o]=a,f[i]=a+=c):(f[o]=s,f[i]=s+=c)}function Cqt(t,r,n,o){var i=[],s=g=>g(f),a,l,u,c,f,d,p,h,m;if(r==null)i.push(t.slice());else for(a={},l=0,u=t.length;l<u;++l)f=t[l],d=r.map(s),p=a[d],p||(a[d]=p=[],i.push(p)),p.push(f);for(d=0,m=0,c=i.length;d<c;++d){for(p=i[d],l=0,h=0,u=p.length;l<u;++l)h+=Math.abs(o(p[l]));p.sum=h,h>m&&(m=h),n&&p.sort(n)}return i.max=m,i}var KWt,ZWt,QWt,JWt,tGe,eqt,rGe,tqt,nGe,rqt,nqt,oqt,iqt,sqt,aqt,lqt,YVe,uqt,fqt,KVe,lGe,uGe,cGe,fGe=D(()=>{"use strict";qa();xN();Os();Vo();PE();Dt(ZVe,et,{transform(t,r){if(this.value&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.scale,a=t.count==null?t.values?t.values.length:10:t.count,l=lW(s,a,t.minstep),u=t.format||Wpe(n,s,l,t.formatSpecifier,t.formatType,!!t.values),c=t.values?Gpe(s,t.values,l):uW(s,l);return i&&(o.rem=i),i=c.map((f,d)=>Dn({index:d/(c.length-1||1),value:f,label:u(f)})),t.extra&&i.length&&i.push(Dn({index:-1,extra:{value:i[0].value},label:""})),o.source=i,o.add=i,this.value=i,o}});Dt(QVe,et,{transform(t,r){var n=r.dataflow,o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=t.item||YWt,s=t.key||xr,a=this.value;return Hr(o.encode)&&(o.encode=null),a&&(t.modified("key")||r.modified(s))&&pt("DataJoin does not support modified key function or fields."),a||(r=r.addAll(),this.value=a=XWt(s)),r.visit(r.ADD,l=>{let u=s(l),c=a.get(u);c?c.exit?(a.empty--,o.add.push(c)):o.mod.push(c):(c=i(l),a.set(u,c),o.add.push(c)),c.datum=l,c.exit=!1}),r.visit(r.MOD,l=>{let u=s(l),c=a.get(u);c&&(c.datum=l,o.mod.push(c))}),r.visit(r.REM,l=>{let u=s(l),c=a.get(u);l===c.datum&&!c.exit&&(o.rem.push(c),c.exit=!0,++a.empty)}),r.changed(r.ADD_MOD)&&o.modifies("datum"),(r.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),o}});Dt(JVe,et,{transform(t,r){var n=r.fork(r.ADD_REM),o=t.mod||!1,i=t.encoders,s=r.encode;if(Hr(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return r.StopPropagation;var a=s==="enter",l=i.update||Dx,u=i.enter||Dx,c=i.exit||Dx,f=(s&&!a?i[s]:l)||Dx;if(r.changed(r.ADD)&&(r.visit(r.ADD,d=>{u(d,t),l(d,t)}),n.modifies(u.output),n.modifies(l.output),f!==Dx&&f!==l&&(r.visit(r.ADD,d=>{f(d,t)}),n.modifies(f.output))),r.changed(r.REM)&&c!==Dx&&(r.visit(r.REM,d=>{c(d,t)}),n.modifies(c.output)),a||f!==Dx){let d=r.MOD|(t.modified()?r.REFLOW:0);a?(r.visit(d,p=>{let h=u(p,t)||o;(f(p,t)||h)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):r.visit(d,p=>{(f(p,t)||o)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:r.StopPropagation}});Dt(eGe,et,{transform(t,r){if(this.value!=null&&!t.modified())return r.StopPropagation;var n=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),i=this.value,s=t.type||r4,a=t.scale,l=+t.limit,u=lW(a,t.count==null?5:t.count,t.minstep),c=!!t.values||s===r4,f=t.format||Hpe(n,a,u,s,t.formatSpecifier,t.formatType,c),d=t.values||qpe(a,u),p,h,m,g,y;return i&&(o.rem=i),s===r4?(l&&d.length>l?(r.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,l-1),y=!0):i=d,In(m=t.size)?(!t.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((b,x)=>Math.max(b,m(x,t)),0)):m=Ga(g=m||8),i=i.map((b,x)=>Dn({index:x,label:f(b,x,i),value:b,offset:g,size:m(b,t)})),y&&(y=d[i.length],i.push(Dn({index:i.length,label:"\u2026".concat(d.length-i.length," entries"),value:y,offset:g,size:m(y,t)})))):s===GVe?(p=a.domain(),h=aW(a,p[0],zn(p)),d.length<3&&!t.values&&p[0]!==zn(p)&&(d=[p[0],zn(p)]),i=d.map((b,x)=>Dn({index:x,label:f(b,x,d),value:b,perc:h(b)}))):(m=d.length-1,h=HVe(a),i=d.map((b,x)=>Dn({index:x,label:f(b,x,d),value:b,perc:x?h(b):0,perc2:x===m?1:h(d[x+1])}))),o.source=i,o.add=i,this.value=i,o}});KWt=t=>t.source.x,ZWt=t=>t.source.y,QWt=t=>t.target.x,JWt=t=>t.target.y;Kpe.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Dt(Kpe,et,{transform(t,r){var n=t.sourceX||KWt,o=t.sourceY||ZWt,i=t.targetX||QWt,s=t.targetY||JWt,a=t.as||"path",l=t.orient||"vertical",u=t.shape||"line",c=YVe.get(u+"-"+l)||YVe.get(u);return c||pt("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),r.visit(r.SOURCE,f=>{f[a]=c(n(f),o(f),i(f),s(f))}),r.reflow(t.modified()).modifies(a)}});tGe=(t,r,n,o)=>"M"+t+","+r+"L"+n+","+o,eqt=(t,r,n,o)=>tGe(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),rGe=(t,r,n,o)=>{var i=n-t,s=o-r,a=Math.sqrt(i*i+s*s)/2,l=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+r+"A"+a+","+a+" "+l+" 0 1 "+n+","+o},tqt=(t,r,n,o)=>rGe(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),nGe=(t,r,n,o)=>{let i=n-t,s=o-r,a=.2*(i+s),l=.2*(s-i);return"M"+t+","+r+"C"+(t+a)+","+(r+l)+" "+(n+l)+","+(o-a)+" "+n+","+o},rqt=(t,r,n,o)=>nGe(r*Math.cos(t),r*Math.sin(t),o*Math.cos(n),o*Math.sin(n)),nqt=(t,r,n,o)=>"M"+t+","+r+"V"+o+"H"+n,oqt=(t,r,n,o)=>"M"+t+","+r+"H"+n+"V"+o,iqt=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+r*i+","+r*s+"A"+r+","+r+" 0 0,"+(u?1:0)+" "+r*a+","+r*l+"L"+o*a+","+o*l},sqt=(t,r,n,o)=>{let i=(t+n)/2;return"M"+t+","+r+"C"+i+","+r+" "+i+","+o+" "+n+","+o},aqt=(t,r,n,o)=>{let i=(r+o)/2;return"M"+t+","+r+"C"+t+","+i+" "+n+","+i+" "+n+","+o},lqt=(t,r,n,o)=>{let i=Math.cos(t),s=Math.sin(t),a=Math.cos(n),l=Math.sin(n),u=(r+o)/2;return"M"+r*i+","+r*s+"C"+u*i+","+u*s+" "+u*a+","+u*l+" "+o*a+","+o*l},YVe=bw({line:tGe,"line-radial":eqt,arc:rGe,"arc-radial":tqt,curve:nGe,"curve-radial":rqt,"orthogonal-horizontal":nqt,"orthogonal-vertical":oqt,"orthogonal-radial":iqt,"diagonal-horizontal":sqt,"diagonal-vertical":aqt,"diagonal-radial":lqt});Zpe.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Dt(Zpe,et,{transform(t,r){var n=t.as||["startAngle","endAngle"],o=n[0],i=n[1],s=t.field||T0,a=t.startAngle||0,l=t.endAngle!=null?t.endAngle:2*Math.PI,u=r.source,c=u.map(s),f=c.length,d=a,p=(l-a)/yD(c),h=Qs(f),m,g,y;for(t.sort&&h.sort((b,x)=>c[b]-c[x]),m=0;m<f;++m)y=c[h[m]],g=u[h[m]],g[o]=d,g[i]=d+=y*p;return this.value=c,r.reflow(t.modified()).modifies(n)}});uqt=5;fqt=ou(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);Dt(iGe,et,{transform(t,r){var n=r.dataflow,o=this.value,i=dqt(t);(!o||i!==o.type)&&(this.value=o=Vn(i)());for(i in t)if(!fqt[i]){if(i==="padding"&&oGe(o.type))continue;In(o[i])?o[i](t[i]):n.warn("Unsupported scale property: "+i)}return bqt(o,t,yqt(o,t,hqt(o,t,n))),r.fork(r.NO_SOURCE|r.NO_FIELDS)}});Dt(aGe,et,{transform(t,r){let n=t.modified("sort")||r.changed(r.ADD)||r.modified(t.sort.fields)||r.modified("datum");return n&&r.source.sort(L0(t.sort)),this.modified(n),r}});KVe="zero",lGe="center",uGe="normalize",cGe=["y0","y1"];Qpe.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:KVe,values:[KVe,lGe,uGe]},{name:"as",type:"string",array:!0,length:2,default:cGe}]};Dt(Qpe,et,{transform(t,r){var n=t.as||cGe,o=n[0],i=n[1],s=L0(t.sort),a=t.field||T0,l=t.offset===lGe?wqt:t.offset===uGe?_qt:Sqt,u,c,f,d;for(u=Cqt(r.source,t.groupby,s,a),c=0,f=u.length,d=u.max;c<f;++c)l(u[c],d,a,o,i);return r.reflow(t.modified()).modifies(n)}})});function pW(t){return t>1?0:t<-1?Qr:Math.acos(t)}function Ii(t){return t>1?Go:t<-1?-Go:Math.asin(t)}var Qt,JE,Qr,Go,vN,Rs,Wo,Xr,Kr,_p,ms,Zt,n4,cW,fW,eT,dW,Yt,du,qo,wN,En=D(()=>{"use strict";Qt=1e-6,JE=1e-12,Qr=Math.PI,Go=Qr/2,vN=Qr/4,Rs=Qr*2,Wo=180/Qr,Xr=Qr/180,Kr=Math.abs,_p=Math.atan,ms=Math.atan2,Zt=Math.cos,n4=Math.ceil,cW=Math.exp,fW=Math.hypot,eT=Math.log,dW=Math.pow,Yt=Math.sin,du=Math.sign||function(t){return t>0?1:t<0?-1:0},qo=Math.sqrt,wN=Math.tan});function Di(){}var y_=D(()=>{"use strict"});function hW(t,r){t&&pGe.hasOwnProperty(t.type)&&pGe[t.type](t,r)}function ehe(t,r,n){var o=-1,i=t.length-n,s;for(r.lineStart();++o<i;)s=t[o],r.point(s[0],s[1],s[2]);r.lineEnd()}function hGe(t,r){var n=-1,o=t.length;for(r.polygonStart();++n<o;)ehe(t[n],r,1);r.polygonEnd()}function Jc(t,r){t&&dGe.hasOwnProperty(t.type)?dGe[t.type](t,r):hW(t,r)}var dGe,pGe,_N=D(()=>{"use strict";dGe={Feature:function(t,r){hW(t.geometry,r)},FeatureCollection:function(t,r){for(var n=t.features,o=-1,i=n.length;++o<i;)hW(n[o].geometry,r)}},pGe={Sphere:function(t,r){r.sphere()},Point:function(t,r){t=t.coordinates,r.point(t[0],t[1],t[2])},MultiPoint:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],r.point(t[0],t[1],t[2])},LineString:function(t,r){ehe(t.coordinates,r,0)},MultiLineString:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)ehe(n[o],r,0)},Polygon:function(t,r){hGe(t.coordinates,r)},MultiPolygon:function(t,r){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)hGe(n[o],r)},GeometryCollection:function(t,r){for(var n=t.geometries,o=-1,i=n.length;++o<i;)hW(n[o],r)}}});function Eqt(){tm.point=Aqt}function Tqt(){yGe(mGe,gGe)}function Aqt(t,r){tm.point=yGe,mGe=t,gGe=r,t*=Xr,r*=Xr,the=t,rhe=Zt(r=r/2+vN),nhe=Yt(r)}function yGe(t,r){t*=Xr,r*=Xr,r=r/2+vN;var n=t-the,o=n>=0?1:-1,i=o*n,s=Zt(r),a=Yt(r),l=nhe*a,u=rhe*s+l*Zt(i),c=l*o*Yt(i);o4.add(ms(c,u)),the=t,rhe=s,nhe=a}function ohe(t){return mW=new Vi,Jc(t,tm),mW*2}var o4,mW,mGe,gGe,the,rhe,nhe,tm,ihe=D(()=>{"use strict";Vo();En();y_();_N();o4=new Vi,mW=new Vi,tm={point:Di,lineStart:Di,lineEnd:Di,polygonStart:function(){o4=new Vi,tm.lineStart=Eqt,tm.lineEnd=Tqt},polygonEnd:function(){var t=+o4;mW.add(t<0?Rs+t:t),this.lineStart=this.lineEnd=this.point=Di},sphere:function(){mW.add(Rs)}}});function tT(t){return[ms(t[1],t[0]),Ii(t[2])]}function Sp(t){var r=t[0],n=t[1],o=Zt(n);return[o*Zt(r),o*Yt(r),Yt(n)]}function i4(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function nv(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}function gW(t,r){t[0]+=r[0],t[1]+=r[1],t[2]+=r[2]}function s4(t,r){return[t[0]*r,t[1]*r,t[2]*r]}function rT(t){var r=qo(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=r,t[1]/=r,t[2]/=r}var SN=D(()=>{"use strict";En()});function she(t,r){b_.push(iv=[rs=t,gs=t]),r<ef&&(ef=r),r>bd&&(bd=r)}function SGe(t,r){var n=Sp([t*Xr,r*Xr]);if(CN){var o=nv(CN,n),i=[o[1],-o[0],0],s=nv(i,o);rT(s),s=tT(s);var a=t-nT,l=a>0?1:-1,u=s[0]*Wo*l,c,f=Kr(a)>180;f^(l*nT<u&&u<l*t)?(c=s[1]*Wo,c>bd&&(bd=c)):(u=(u+360)%360-180,f^(l*nT<u&&u<l*t)?(c=-s[1]*Wo,c<ef&&(ef=c)):(r<ef&&(ef=r),r>bd&&(bd=r))),f?t<nT?yd(rs,t)>yd(rs,gs)&&(gs=t):yd(t,gs)>yd(rs,gs)&&(rs=t):gs>=rs?(t<rs&&(rs=t),t>gs&&(gs=t)):t>nT?yd(rs,t)>yd(rs,gs)&&(gs=t):yd(t,gs)>yd(rs,gs)&&(rs=t)}else b_.push(iv=[rs=t,gs=t]);r<ef&&(ef=r),r>bd&&(bd=r),CN=n,nT=t}function bGe(){ov.point=SGe}function xGe(){iv[0]=rs,iv[1]=gs,ov.point=she,CN=null}function CGe(t,r){if(CN){var n=t-nT;a4.add(Kr(n)>180?n+(n>0?360:-360):n)}else wGe=t,_Ge=r;tm.point(t,r),SGe(t,r)}function kqt(){tm.lineStart()}function Iqt(){CGe(wGe,_Ge),tm.lineEnd(),Kr(a4)>Qt&&(rs=-(gs=180)),iv[0]=rs,iv[1]=gs,CN=null}function yd(t,r){return(r-=t)<0?r+360:r}function Dqt(t,r){return t[0]-r[0]}function vGe(t,r){return t[0]<=t[1]?t[0]<=r&&r<=t[1]:r<t[0]||t[1]<r}function ahe(t){var r,n,o,i,s,a,l;if(bd=gs=-(rs=ef=1/0),b_=[],Jc(t,ov),n=b_.length){for(b_.sort(Dqt),r=1,o=b_[0],s=[o];r<n;++r)i=b_[r],vGe(o,i[0])||vGe(o,i[1])?(yd(o[0],i[1])>yd(o[0],o[1])&&(o[1]=i[1]),yd(i[0],o[1])>yd(o[0],o[1])&&(o[0]=i[0])):s.push(o=i);for(a=-1/0,n=s.length-1,r=0,o=s[n];r<=n;o=i,++r)i=s[r],(l=yd(o[1],i[0]))>a&&(a=l,rs=i[0],gs=o[1])}return b_=iv=null,rs===1/0||ef===1/0?[[NaN,NaN],[NaN,NaN]]:[[rs,ef],[gs,bd]]}var rs,ef,gs,bd,nT,wGe,_Ge,CN,a4,b_,iv,ov,EGe=D(()=>{"use strict";Vo();ihe();SN();En();_N();ov={point:she,lineStart:bGe,lineEnd:xGe,polygonStart:function(){ov.point=CGe,ov.lineStart=kqt,ov.lineEnd=Iqt,a4=new Vi,tm.polygonStart()},polygonEnd:function(){tm.polygonEnd(),ov.point=she,ov.lineStart=bGe,ov.lineEnd=xGe,o4<0?(rs=-(gs=180),ef=-(bd=90)):a4>Qt?bd=90:a4<-Qt&&(ef=-90),iv[0]=rs,iv[1]=gs},sphere:function(){rs=-(gs=180),ef=-(bd=90)}}});function fhe(t,r){t*=Xr,r*=Xr;var n=Zt(r);u4(n*Zt(t),n*Yt(t),Yt(r))}function u4(t,r,n){++l4,bW+=(t-bW)/l4,xW+=(r-xW)/l4,vW+=(n-vW)/l4}function TGe(){rm.point=Nqt}function Nqt(t,r){t*=Xr,r*=Xr;var n=Zt(r);fc=n*Zt(t),dc=n*Yt(t),pc=Yt(r),rm.point=Oqt,u4(fc,dc,pc)}function Oqt(t,r){t*=Xr,r*=Xr;var n=Zt(r),o=n*Zt(t),i=n*Yt(t),s=Yt(r),a=ms(qo((a=dc*s-pc*i)*a+(a=pc*o-fc*s)*a+(a=fc*i-dc*o)*a),fc*o+dc*i+pc*s);yW+=a,wW+=a*(fc+(fc=o)),_W+=a*(dc+(dc=i)),SW+=a*(pc+(pc=s)),u4(fc,dc,pc)}function AGe(){rm.point=fhe}function Fqt(){rm.point=Mqt}function Rqt(){DGe(kGe,IGe),rm.point=fhe}function Mqt(t,r){kGe=t,IGe=r,t*=Xr,r*=Xr,rm.point=DGe;var n=Zt(r);fc=n*Zt(t),dc=n*Yt(t),pc=Yt(r),u4(fc,dc,pc)}function DGe(t,r){t*=Xr,r*=Xr;var n=Zt(r),o=n*Zt(t),i=n*Yt(t),s=Yt(r),a=dc*s-pc*i,l=pc*o-fc*s,u=fc*i-dc*o,c=fW(a,l,u),f=Ii(c),d=c&&-f/c;lhe.add(d*a),uhe.add(d*l),che.add(d*u),yW+=f,wW+=f*(fc+(fc=o)),_W+=f*(dc+(dc=i)),SW+=f*(pc+(pc=s)),u4(fc,dc,pc)}function dhe(t){l4=yW=bW=xW=vW=wW=_W=SW=0,lhe=new Vi,uhe=new Vi,che=new Vi,Jc(t,rm);var r=+lhe,n=+uhe,o=+che,i=fW(r,n,o);return i<JE&&(r=wW,n=_W,o=SW,yW<Qt&&(r=bW,n=xW,o=vW),i=fW(r,n,o),i<JE)?[NaN,NaN]:[ms(n,r)*Wo,Ii(o/i)*Wo]}var l4,yW,bW,xW,vW,wW,_W,SW,lhe,uhe,che,kGe,IGe,fc,dc,pc,rm,NGe=D(()=>{"use strict";Vo();En();y_();_N();rm={sphere:Di,point:fhe,lineStart:TGe,lineEnd:AGe,polygonStart:function(){rm.lineStart=Fqt,rm.lineEnd=Rqt},polygonEnd:function(){rm.lineStart=TGe,rm.lineEnd=AGe}}});function c4(t,r){function n(o,i){return o=t(o,i),r(o[0],o[1])}return t.invert&&r.invert&&(n.invert=function(o,i){return o=r.invert(o,i),o&&t.invert(o[0],o[1])}),n}var phe=D(()=>{"use strict"});function hhe(t,r){return[Kr(t)>Qr?t+Math.round(-t/Rs)*Rs:t,r]}function mhe(t,r,n){return(t%=Rs)?r||n?c4(FGe(t),RGe(r,n)):FGe(t):r||n?RGe(r,n):hhe}function OGe(t){return function(r,n){return r+=t,[r>Qr?r-Rs:r<-Qr?r+Rs:r,n]}}function FGe(t){var r=OGe(t);return r.invert=OGe(-t),r}function RGe(t,r){var n=Zt(t),o=Yt(t),i=Zt(r),s=Yt(r);function a(l,u){var c=Zt(u),f=Zt(l)*c,d=Yt(l)*c,p=Yt(u),h=p*n+f*o;return[ms(d*i-h*s,f*n-p*o),Ii(h*i+d*s)]}return a.invert=function(l,u){var c=Zt(u),f=Zt(l)*c,d=Yt(l)*c,p=Yt(u),h=p*i-d*s;return[ms(d*i+p*s,f*n+h*o),Ii(h*n-f*o)]},a}function MGe(t){t=mhe(t[0]*Xr,t[1]*Xr,t.length>2?t[2]*Xr:0);function r(n){return n=t(n[0]*Xr,n[1]*Xr),n[0]*=Wo,n[1]*=Wo,n}return r.invert=function(n){return n=t.invert(n[0]*Xr,n[1]*Xr),n[0]*=Wo,n[1]*=Wo,n},r}var ghe=D(()=>{"use strict";phe();En();hhe.invert=hhe});function jGe(t,r,n,o,i,s){if(n){var a=Zt(r),l=Yt(r),u=o*n;i==null?(i=r+o*Rs,s=r-u/2):(i=PGe(a,i),s=PGe(a,s),(o>0?i<s:i>s)&&(i+=o*Rs));for(var c,f=i;o>0?f>s:f<s;f-=u)c=tT([a,-l*Zt(f),-l*Yt(f)]),t.point(c[0],c[1])}}function PGe(t,r){r=Sp(r),r[0]-=t,rT(r);var n=pW(-r[1]);return((-r[2]<0?-n:n)+Rs-Qt)%Rs}var LGe=D(()=>{"use strict";SN();En()});function CW(){var t=[],r;return{point:function(n,o,i){r.push([n,o,i])},lineStart:function(){t.push(r=[])},lineEnd:Di,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],r=null,n}}}var yhe=D(()=>{"use strict";y_()});function EN(t,r){return Kr(t[0]-r[0])<Qt&&Kr(t[1]-r[1])<Qt}var bhe=D(()=>{"use strict";En()});function EW(t,r,n,o){this.x=t,this.z=r,this.o=n,this.e=o,this.v=!1,this.n=this.p=null}function TW(t,r,n,o,i){var s=[],a=[],l,u;if(t.forEach(function(m){if(!((g=m.length-1)<=0)){var g,y=m[0],b=m[g],x;if(EN(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),l=0;l<g;++l)i.point((y=m[l])[0],y[1]);i.lineEnd();return}b[0]+=2*Qt}s.push(x=new EW(y,m,null,!0)),a.push(x.o=new EW(y,null,x,!1)),s.push(x=new EW(b,m,null,!1)),a.push(x.o=new EW(b,null,x,!0))}}),!!s.length){for(a.sort(r),BGe(s),BGe(a),l=0,u=a.length;l<u;++l)a[l].e=n=!n;for(var c=s[0],f,d;;){for(var p=c,h=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(l=0,u=f.length;l<u;++l)i.point((d=f[l])[0],d[1]);else o(p.x,p.n.x,1,i);p=p.n}else{if(h)for(f=p.p.z,l=f.length-1;l>=0;--l)i.point((d=f[l])[0],d[1]);else o(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,h=!h}while(!p.v);i.lineEnd()}}}function BGe(t){if(r=t.length){for(var r,n=0,o=t[0],i;++n<r;)o.n=i=t[n],i.p=o,o=i;o.n=i=t[0],i.p=o}}var xhe=D(()=>{"use strict";bhe();En()});function vhe(t){return Kr(t[0])<=Qr?t[0]:du(t[0])*((Kr(t[0])+Qr)%Rs-Qr)}function $Ge(t,r){var n=vhe(r),o=r[1],i=Yt(o),s=[Yt(n),-Zt(n),0],a=0,l=0,u=new Vi;i===1?o=Go+Qt:i===-1&&(o=-Go-Qt);for(var c=0,f=t.length;c<f;++c)if(p=(d=t[c]).length)for(var d,p,h=d[p-1],m=vhe(h),g=h[1]/2+vN,y=Yt(g),b=Zt(g),x=0;x<p;++x,m=w,y=C,b=S,h=v){var v=d[x],w=vhe(v),_=v[1]/2+vN,C=Yt(_),S=Zt(_),E=w-m,A=E>=0?1:-1,N=A*E,k=N>Qr,R=y*C;if(u.add(ms(R*A*Yt(N),b*S+R*Zt(N))),a+=k?E+A*Rs:E,k^m>=n^w>=n){var I=nv(Sp(h),Sp(v));rT(I);var L=nv(s,I);rT(L);var j=(k^E>=0?-1:1)*Ii(L[2]);(o>j||o===j&&(I[0]||I[1]))&&(l+=k^E>=0?1:-1)}}return(a<-Qt||a<Qt&&u<-JE)^l&1}var zGe=D(()=>{"use strict";Vo();SN();En()});function AW(t,r,n,o){return function(i){var s=r(i),a=CW(),l=r(a),u=!1,c,f,d,p={point:h,lineStart:g,lineEnd:y,polygonStart:function(){p.point=b,p.lineStart=x,p.lineEnd=v,f=[],c=[]},polygonEnd:function(){p.point=h,p.lineStart=g,p.lineEnd=y,f=gD(f);var w=$Ge(c,o);f.length?(u||(i.polygonStart(),u=!0),TW(f,jqt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),f=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,_){t(w,_)&&i.point(w,_)}function m(w,_){s.point(w,_)}function g(){p.point=m,s.lineStart()}function y(){p.point=h,s.lineEnd()}function b(w,_){d.push([w,_]),l.point(w,_)}function x(){l.lineStart(),d=[]}function v(){b(d[0][0],d[0][1]),l.lineEnd();var w=l.clean(),_=a.result(),C,S=_.length,E,A,N;if(d.pop(),c.push(d),d=null,!!S){if(w&1){if(A=_[0],(E=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<E;++C)i.point((N=A[C])[0],N[1]);i.lineEnd()}return}S>1&&w&2&&_.push(_.pop().concat(_.shift())),f.push(_.filter(Pqt))}}return p}}function Pqt(t){return t.length>1}function jqt(t,r){return((t=t.x)[0]<0?t[1]-Go-Qt:Go-t[1])-((r=r.x)[0]<0?r[1]-Go-Qt:Go-r[1])}var whe=D(()=>{"use strict";yhe();xhe();En();zGe();Vo()});function Lqt(t){var r=NaN,n=NaN,o=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var l=s>0?Qr:-Qr,u=Kr(s-r);Kr(u-Qr)<Qt?(t.point(r,n=(n+a)/2>0?Go:-Go),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(s,n),i=0):o!==l&&u>=Qr&&(Kr(r-o)<Qt&&(r-=o*Qt),Kr(s-l)<Qt&&(s-=l*Qt),n=Bqt(r,n,s,a),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(r=s,n=a),o=l},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-i}}}function Bqt(t,r,n,o){var i,s,a=Yt(t-n);return Kr(a)>Qt?_p((Yt(r)*(s=Zt(o))*Yt(n)-Yt(o)*(i=Zt(r))*Yt(t))/(i*s*a)):(r+o)/2}function $qt(t,r,n,o){var i;if(t==null)i=n*Go,o.point(-Qr,i),o.point(0,i),o.point(Qr,i),o.point(Qr,0),o.point(Qr,-i),o.point(0,-i),o.point(-Qr,-i),o.point(-Qr,0),o.point(-Qr,i);else if(Kr(t[0]-r[0])>Qt){var s=t[0]<r[0]?Qr:-Qr;i=n*s/2,o.point(-s,i),o.point(0,i),o.point(s,i)}else o.point(r[0],r[1])}var _he,UGe=D(()=>{"use strict";whe();En();_he=AW(function(){return!0},Lqt,$qt,[-Qr,-Go])});function VGe(t){var r=Zt(t),n=6*Xr,o=r>0,i=Kr(r)>Qt;function s(f,d,p,h){jGe(h,t,n,p,f,d)}function a(f,d){return Zt(f)*Zt(d)>r}function l(f){var d,p,h,m,g;return{lineStart:function(){m=h=!1,g=1},point:function(y,b){var x=[y,b],v,w=a(y,b),_=o?w?0:c(y,b):w?c(y+(y<0?Qr:-Qr),b):0;if(!d&&(m=h=w)&&f.lineStart(),w!==h&&(v=u(d,x),(!v||EN(d,v)||EN(x,v))&&(x[2]=1)),w!==h)g=0,w?(f.lineStart(),v=u(x,d),f.point(v[0],v[1])):(v=u(d,x),f.point(v[0],v[1],2),f.lineEnd()),d=v;else if(i&&d&&o^w){var C;!(_&p)&&(C=u(x,d,!0))&&(g=0,o?(f.lineStart(),f.point(C[0][0],C[0][1]),f.point(C[1][0],C[1][1]),f.lineEnd()):(f.point(C[1][0],C[1][1]),f.lineEnd(),f.lineStart(),f.point(C[0][0],C[0][1],3)))}w&&(!d||!EN(d,x))&&f.point(x[0],x[1]),d=x,h=w,p=_},lineEnd:function(){h&&f.lineEnd(),d=null},clean:function(){return g|(m&&h)<<1}}}function u(f,d,p){var h=Sp(f),m=Sp(d),g=[1,0,0],y=nv(h,m),b=i4(y,y),x=y[0],v=b-x*x;if(!v)return!p&&f;var w=r*b/v,_=-r*x/v,C=nv(g,y),S=s4(g,w),E=s4(y,_);gW(S,E);var A=C,N=i4(S,A),k=i4(A,A),R=N*N-k*(i4(S,S)-1);if(!(R<0)){var I=qo(R),L=s4(A,(-N-I)/k);if(gW(L,S),L=tT(L),!p)return L;var j=f[0],M=d[0],V=f[1],G=d[1],U;M<j&&(U=j,j=M,M=U);var Y=M-j,X=Kr(Y-Qr)<Qt,pe=X||Y<Qt;if(!X&&G<V&&(U=V,V=G,G=U),pe?X?V+G>0^L[1]<(Kr(L[0]-j)<Qt?V:G):V<=L[1]&&L[1]<=G:Y>Qr^(j<=L[0]&&L[0]<=M)){var $=s4(A,(-N+I)/k);return gW($,S),[L,tT($)]}}}function c(f,d){var p=o?t:Qr-t,h=0;return f<-p?h|=1:f>p&&(h|=2),d<-p?h|=4:d>p&&(h|=8),h}return AW(a,l,s,o?[0,-t]:[-Qr,t-Qr])}var GGe=D(()=>{"use strict";SN();LGe();En();bhe();whe()});function WGe(t,r,n,o,i,s){var a=t[0],l=t[1],u=r[0],c=r[1],f=0,d=1,p=u-a,h=c-l,m;if(m=n-a,!(!p&&m>0)){if(m/=p,p<0){if(m<f)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>f&&(f=m)}if(m=i-a,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>f&&(f=m)}else if(p>0){if(m<f)return;m<d&&(d=m)}if(m=o-l,!(!h&&m>0)){if(m/=h,h<0){if(m<f)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>f&&(f=m)}if(m=s-l,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>f&&(f=m)}else if(h>0){if(m<f)return;m<d&&(d=m)}return f>0&&(t[0]=a+f*p,t[1]=l+f*h),d<1&&(r[0]=a+d*p,r[1]=l+d*h),!0}}}}}var qGe=D(()=>{"use strict"});function d4(t,r,n,o){function i(c,f){return t<=c&&c<=n&&r<=f&&f<=o}function s(c,f,d,p){var h=0,m=0;if(c==null||(h=a(c,d))!==(m=a(f,d))||u(c,f)<0^d>0)do p.point(h===0||h===3?t:n,h>1?o:r);while((h=(h+d+4)%4)!==m);else p.point(f[0],f[1])}function a(c,f){return Kr(c[0]-t)<Qt?f>0?0:3:Kr(c[0]-n)<Qt?f>0?2:1:Kr(c[1]-r)<Qt?f>0?1:0:f>0?3:2}function l(c,f){return u(c.x,f.x)}function u(c,f){var d=a(c,1),p=a(f,1);return d!==p?d-p:d===0?f[1]-c[1]:d===1?c[0]-f[0]:d===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,d=CW(),p,h,m,g,y,b,x,v,w,_,C,S={point:E,lineStart:R,lineEnd:I,polygonStart:N,polygonEnd:k};function E(j,M){i(j,M)&&f.point(j,M)}function A(){for(var j=0,M=0,V=h.length;M<V;++M)for(var G=h[M],U=1,Y=G.length,X=G[0],pe,$,O=X[0],z=X[1];U<Y;++U)pe=O,$=z,X=G[U],O=X[0],z=X[1],$<=o?z>o&&(O-pe)*(o-$)>(z-$)*(t-pe)&&++j:z<=o&&(O-pe)*(o-$)<(z-$)*(t-pe)&&--j;return j}function N(){f=d,p=[],h=[],C=!0}function k(){var j=A(),M=C&&j,V=(p=gD(p)).length;(M||V)&&(c.polygonStart(),M&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),V&&TW(p,l,j,s,c),c.polygonEnd()),f=c,p=h=m=null}function R(){S.point=L,h&&h.push(m=[]),_=!0,w=!1,x=v=NaN}function I(){p&&(L(g,y),b&&w&&d.rejoin(),p.push(d.result())),S.point=E,w&&f.lineEnd()}function L(j,M){var V=i(j,M);if(h&&m.push([j,M]),_)g=j,y=M,b=V,_=!1,V&&(f.lineStart(),f.point(j,M));else if(V&&w)f.point(j,M);else{var G=[x=Math.max(kW,Math.min(f4,x)),v=Math.max(kW,Math.min(f4,v))],U=[j=Math.max(kW,Math.min(f4,j)),M=Math.max(kW,Math.min(f4,M))];WGe(G,U,t,r,n,o)?(w||(f.lineStart(),f.point(G[0],G[1])),f.point(U[0],U[1]),V||f.lineEnd(),C=!1):V&&(f.lineStart(),f.point(j,M),C=!1)}x=j,v=M,w=V}return S}}var f4,kW,She=D(()=>{"use strict";En();yhe();qGe();xhe();Vo();f4=1e9,kW=-f4});function HGe(t,r,n){var o=Qs(t,r-Qt,n).concat(r);return function(i){return o.map(function(s){return[i,s]})}}function YGe(t,r,n){var o=Qs(t,r-Qt,n).concat(r);return function(i){return o.map(function(s){return[s,i]})}}function IW(){var t,r,n,o,i,s,a,l,u=10,c=u,f=90,d=360,p,h,m,g,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return Qs(n4(o/f)*f,n,f).map(m).concat(Qs(n4(l/d)*d,a,d).map(g)).concat(Qs(n4(r/u)*u,t,u).filter(function(v){return Kr(v%f)>Qt}).map(p)).concat(Qs(n4(s/c)*c,i,c).filter(function(v){return Kr(v%d)>Qt}).map(h))}return b.lines=function(){return x().map(function(v){return{type:"LineString",coordinates:v}})},b.outline=function(){return{type:"Polygon",coordinates:[m(o).concat(g(a).slice(1),m(n).reverse().slice(1),g(l).reverse().slice(1))]}},b.extent=function(v){return arguments.length?b.extentMajor(v).extentMinor(v):b.extentMinor()},b.extentMajor=function(v){return arguments.length?(o=+v[0][0],n=+v[1][0],l=+v[0][1],a=+v[1][1],o>n&&(v=o,o=n,n=v),l>a&&(v=l,l=a,a=v),b.precision(y)):[[o,l],[n,a]]},b.extentMinor=function(v){return arguments.length?(r=+v[0][0],t=+v[1][0],s=+v[0][1],i=+v[1][1],r>t&&(v=r,r=t,t=v),s>i&&(v=s,s=i,i=v),b.precision(y)):[[r,s],[t,i]]},b.step=function(v){return arguments.length?b.stepMajor(v).stepMinor(v):b.stepMinor()},b.stepMajor=function(v){return arguments.length?(f=+v[0],d=+v[1],b):[f,d]},b.stepMinor=function(v){return arguments.length?(u=+v[0],c=+v[1],b):[u,c]},b.precision=function(v){return arguments.length?(y=+v,p=HGe(s,i,90),h=YGe(r,t,y),m=HGe(l,a,90),g=YGe(o,n,y),b):y},b.extentMajor([[-180,-90+Qt],[180,90-Qt]]).extentMinor([[-180,-80-Qt],[180,80+Qt]])}var XGe=D(()=>{"use strict";Vo();En()});var x_,DW=D(()=>{"use strict";x_=t=>t});function zqt(){v_.point=Uqt}function Uqt(t,r){v_.point=QGe,KGe=The=t,ZGe=Ahe=r}function QGe(t,r){Ehe.add(Ahe*t-The*r),The=t,Ahe=r}function Vqt(){QGe(KGe,ZGe)}var Che,Ehe,KGe,ZGe,The,Ahe,v_,khe,JGe=D(()=>{"use strict";Vo();En();y_();Che=new Vi,Ehe=new Vi,v_={point:Di,lineStart:Di,lineEnd:Di,polygonStart:function(){v_.lineStart=zqt,v_.lineEnd=Vqt},polygonEnd:function(){v_.lineStart=v_.lineEnd=v_.point=Di,Che.add(Kr(Ehe)),Ehe=new Vi},result:function(){var t=Che/2;return Che=new Vi,t}};khe=v_});function Wqt(t,r){t<TN&&(TN=t),t>p4&&(p4=t),r<NW&&(NW=r),r>OW&&(OW=r)}var TN,NW,p4,OW,Gqt,AN,Ihe=D(()=>{"use strict";y_();TN=1/0,NW=TN,p4=-TN,OW=p4,Gqt={point:Wqt,lineStart:Di,lineEnd:Di,polygonStart:Di,polygonEnd:Di,result:function(){var t=[[TN,NW],[p4,OW]];return p4=OW=-(NW=TN=1/0),t}};AN=Gqt});function oT(t,r){Dhe+=t,Nhe+=r,++h4}function eWe(){nm.point=qqt}function qqt(t,r){nm.point=Hqt,oT(ay=t,ly=r)}function Hqt(t,r){var n=t-ay,o=r-ly,i=qo(n*n+o*o);FW+=i*(ay+t)/2,RW+=i*(ly+r)/2,kN+=i,oT(ay=t,ly=r)}function tWe(){nm.point=oT}function Yqt(){nm.point=Kqt}function Xqt(){oWe(rWe,nWe)}function Kqt(t,r){nm.point=oWe,oT(rWe=ay=t,nWe=ly=r)}function oWe(t,r){var n=t-ay,o=r-ly,i=qo(n*n+o*o);FW+=i*(ay+t)/2,RW+=i*(ly+r)/2,kN+=i,i=ly*t-ay*r,Ohe+=i*(ay+t),Fhe+=i*(ly+r),m4+=i*3,oT(ay=t,ly=r)}var Dhe,Nhe,h4,FW,RW,kN,Ohe,Fhe,m4,rWe,nWe,ay,ly,nm,Rhe,iWe=D(()=>{"use strict";En();Dhe=0,Nhe=0,h4=0,FW=0,RW=0,kN=0,Ohe=0,Fhe=0,m4=0,nm={point:oT,lineStart:eWe,lineEnd:tWe,polygonStart:function(){nm.lineStart=Yqt,nm.lineEnd=Xqt},polygonEnd:function(){nm.point=oT,nm.lineStart=eWe,nm.lineEnd=tWe},result:function(){var t=m4?[Ohe/m4,Fhe/m4]:kN?[FW/kN,RW/kN]:h4?[Dhe/h4,Nhe/h4]:[NaN,NaN];return Dhe=Nhe=h4=FW=RW=kN=Ohe=Fhe=m4=0,t}};Rhe=nm});function MW(t){this._context=t}var sWe=D(()=>{"use strict";En();y_();MW.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._context.moveTo(t,r),this._point=1;break}case 1:{this._context.lineTo(t,r);break}default:{this._context.moveTo(t+this._radius,r),this._context.arc(t,r,this._radius,0,Rs);break}}},result:Di}});function Zqt(t,r){PW.point=uWe,aWe=g4=t,lWe=y4=r}function uWe(t,r){g4-=t,y4-=r,Phe.add(qo(g4*g4+y4*y4)),g4=t,y4=r}var Phe,Mhe,aWe,lWe,g4,y4,PW,jhe,cWe=D(()=>{"use strict";Vo();En();y_();Phe=new Vi,PW={point:Di,lineStart:function(){PW.point=Zqt},lineEnd:function(){Mhe&&uWe(aWe,lWe),PW.point=Di},polygonStart:function(){Mhe=!0},polygonEnd:function(){Mhe=null},result:function(){var t=+Phe;return Phe=new Vi,t}};jhe=PW});function jW(){this._string=[]}function fWe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var dWe=D(()=>{"use strict";jW.prototype={_radius:4.5,_circle:fWe(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,r){switch(this._point){case 0:{this._string.push("M",t,",",r),this._point=1;break}case 1:{this._string.push("L",t,",",r);break}default:{this._circle==null&&(this._circle=fWe(this._radius)),this._string.push("M",t,",",r,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}}});function LW(t,r){var n=4.5,o,i;function s(a){return a&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Jc(a,o(i))),i.result()}return s.area=function(a){return Jc(a,o(khe)),khe.result()},s.measure=function(a){return Jc(a,o(jhe)),jhe.result()},s.bounds=function(a){return Jc(a,o(AN)),AN.result()},s.centroid=function(a){return Jc(a,o(Rhe)),Rhe.result()},s.projection=function(a){return arguments.length?(o=a==null?(t=null,x_):(t=a).stream,s):t},s.context=function(a){return arguments.length?(i=a==null?(r=null,new jW):new MW(r=a),typeof n!="function"&&i.pointRadius(n),s):r},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(i.pointRadius(+a),+a),s):n},s.projection(t).context(r)}var pWe=D(()=>{"use strict";DW();_N();JGe();Ihe();iWe();sWe();cWe();dWe()});function iT(t){return function(r){var n=new Lhe;for(var o in t)n[o]=t[o];return n.stream=r,n}}function Lhe(){}var BW=D(()=>{"use strict";Lhe.prototype={constructor:Lhe,point:function(t,r){this.stream.point(t,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}});function Bhe(t,r,n){var o=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),o!=null&&t.clipExtent(null),Jc(n,t.stream(AN)),r(AN.result()),o!=null&&t.clipExtent(o),t}function sT(t,r,n){return Bhe(t,function(o){var i=r[1][0]-r[0][0],s=r[1][1]-r[0][1],a=Math.min(i/(o[1][0]-o[0][0]),s/(o[1][1]-o[0][1])),l=+r[0][0]+(i-a*(o[1][0]+o[0][0]))/2,u=+r[0][1]+(s-a*(o[1][1]+o[0][1]))/2;t.scale(150*a).translate([l,u])},n)}function IN(t,r,n){return sT(t,[[0,0],r],n)}function DN(t,r,n){return Bhe(t,function(o){var i=+r,s=i/(o[1][0]-o[0][0]),a=(i-s*(o[1][0]+o[0][0]))/2,l=-s*o[0][1];t.scale(150*s).translate([a,l])},n)}function NN(t,r,n){return Bhe(t,function(o){var i=+r,s=i/(o[1][1]-o[0][1]),a=-s*o[0][0],l=(i-s*(o[1][1]+o[0][1]))/2;t.scale(150*s).translate([a,l])},n)}var $W=D(()=>{"use strict";_N();Ihe()});function $he(t,r){return+r?eHt(t,r):Jqt(t)}function Jqt(t){return iT({point:function(r,n){r=t(r,n),this.stream.point(r[0],r[1])}})}function eHt(t,r){function n(o,i,s,a,l,u,c,f,d,p,h,m,g,y){var b=c-o,x=f-i,v=b*b+x*x;if(v>4*r&&g--){var w=a+p,_=l+h,C=u+m,S=qo(w*w+_*_+C*C),E=Ii(C/=S),A=Kr(Kr(C)-1)<Qt||Kr(s-d)<Qt?(s+d)/2:ms(_,w),N=t(A,E),k=N[0],R=N[1],I=k-o,L=R-i,j=x*I-b*L;(j*j/v>r||Kr((b*I+x*L)/v-.5)>.3||a*p+l*h+u*m<Qqt)&&(n(o,i,s,a,l,u,k,R,A,w/=S,_/=S,C,g,y),y.point(k,R),n(k,R,A,w,_,C,c,f,d,p,h,m,g,y))}}return function(o){var i,s,a,l,u,c,f,d,p,h,m,g,y={point:b,lineStart:x,lineEnd:w,polygonStart:function(){o.polygonStart(),y.lineStart=_},polygonEnd:function(){o.polygonEnd(),y.lineStart=x}};function b(E,A){E=t(E,A),o.point(E[0],E[1])}function x(){d=NaN,y.point=v,o.lineStart()}function v(E,A){var N=Sp([E,A]),k=t(E,A);n(d,p,f,h,m,g,d=k[0],p=k[1],f=E,h=N[0],m=N[1],g=N[2],hWe,o),o.point(d,p)}function w(){y.point=b,o.lineEnd()}function _(){x(),y.point=C,y.lineEnd=S}function C(E,A){v(i=E,A),s=d,a=p,l=h,u=m,c=g,y.point=v}function S(){n(d,p,f,h,m,g,s,a,i,l,u,c,hWe,o),y.lineEnd=w,w()}return y}}var hWe,Qqt,mWe=D(()=>{"use strict";SN();En();BW();hWe=16,Qqt=Zt(30*Xr)});function rHt(t){return iT({point:function(r,n){var o=t(r,n);return this.stream.point(o[0],o[1])}})}function nHt(t,r,n,o,i){function s(a,l){return a*=o,l*=i,[r+t*a,n-t*l]}return s.invert=function(a,l){return[(a-r)/t*o,(n-l)/t*i]},s}function gWe(t,r,n,o,i,s){if(!s)return nHt(t,r,n,o,i);var a=Zt(s),l=Yt(s),u=a*t,c=l*t,f=a/t,d=l/t,p=(l*n-a*r)/t,h=(l*r+a*n)/t;function m(g,y){return g*=o,y*=i,[u*g-c*y+r,n-c*g-u*y]}return m.invert=function(g,y){return[o*(f*g-d*y+p),i*(h-d*g-f*y)]},m}function ys(t){return zW(function(){return t})()}function zW(t){var r,n=150,o=480,i=250,s=0,a=0,l=0,u=0,c=0,f,d=0,p=1,h=1,m=null,g=_he,y=null,b,x,v,w=x_,_=.5,C,S,E,A,N;function k(j){return E(j[0]*Xr,j[1]*Xr)}function R(j){return j=E.invert(j[0],j[1]),j&&[j[0]*Wo,j[1]*Wo]}k.stream=function(j){return A&&N===j?A:A=tHt(rHt(f)(g(C(w(N=j)))))},k.preclip=function(j){return arguments.length?(g=j,m=void 0,L()):g},k.postclip=function(j){return arguments.length?(w=j,y=b=x=v=null,L()):w},k.clipAngle=function(j){return arguments.length?(g=+j?VGe(m=j*Xr):(m=null,_he),L()):m*Wo},k.clipExtent=function(j){return arguments.length?(w=j==null?(y=b=x=v=null,x_):d4(y=+j[0][0],b=+j[0][1],x=+j[1][0],v=+j[1][1]),L()):y==null?null:[[y,b],[x,v]]},k.scale=function(j){return arguments.length?(n=+j,I()):n},k.translate=function(j){return arguments.length?(o=+j[0],i=+j[1],I()):[o,i]},k.center=function(j){return arguments.length?(s=j[0]%360*Xr,a=j[1]%360*Xr,I()):[s*Wo,a*Wo]},k.rotate=function(j){return arguments.length?(l=j[0]%360*Xr,u=j[1]%360*Xr,c=j.length>2?j[2]%360*Xr:0,I()):[l*Wo,u*Wo,c*Wo]},k.angle=function(j){return arguments.length?(d=j%360*Xr,I()):d*Wo},k.reflectX=function(j){return arguments.length?(p=j?-1:1,I()):p<0},k.reflectY=function(j){return arguments.length?(h=j?-1:1,I()):h<0},k.precision=function(j){return arguments.length?(C=$he(S,_=j*j),L()):qo(_)},k.fitExtent=function(j,M){return sT(k,j,M)},k.fitSize=function(j,M){return IN(k,j,M)},k.fitWidth=function(j,M){return DN(k,j,M)},k.fitHeight=function(j,M){return NN(k,j,M)};function I(){var j=gWe(n,0,0,p,h,d).apply(null,r(s,a)),M=gWe(n,o-j[0],i-j[1],p,h,d);return f=mhe(l,u,c),S=c4(r,M),E=c4(f,S),C=$he(S,_),L()}function L(){return A=N=null,k}return function(){return r=t.apply(this,arguments),k.invert=r.invert&&R,I()}}var tHt,Cp=D(()=>{"use strict";UGe();GGe();She();phe();DW();En();ghe();BW();$W();mWe();tHt=iT({point:function(t,r){this.stream.point(t*Xr,r*Xr)}})});function ON(t){var r=0,n=Qr/3,o=zW(t),i=o(r,n);return i.parallels=function(s){return arguments.length?o(r=s[0]*Xr,n=s[1]*Xr):[r*Wo,n*Wo]},i}var UW=D(()=>{"use strict";En();Cp()});function yWe(t){var r=Zt(t);function n(o,i){return[o*r,Yt(i)/r]}return n.invert=function(o,i){return[o/r,Ii(i*r)]},n}var bWe=D(()=>{"use strict";En()});function xWe(t,r){var n=Yt(t),o=(n+Yt(r))/2;if(Kr(o)<Qt)return yWe(t);var i=1+n*(2*o-n),s=qo(i)/o;function a(l,u){var c=qo(i-2*o*Yt(u))/o;return[c*Yt(l*=o),s-c*Zt(l)]}return a.invert=function(l,u){var c=s-u,f=ms(l,Kr(c))*du(c);return c*o<0&&(f-=Qr*du(l)*du(c)),[f/o,Ii((i-(l*l+c*c)*o*o)/(2*o))]},a}function w_(){return ON(xWe).scale(155.424).center([0,33.6442])}var VW=D(()=>{"use strict";En();UW();bWe()});function b4(){return w_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var zhe=D(()=>{"use strict";VW()});function oHt(t){var r=t.length;return{point:function(n,o){for(var i=-1;++i<r;)t[i].point(n,o)},sphere:function(){for(var n=-1;++n<r;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<r;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<r;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<r;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<r;)t[n].polygonEnd()}}}function Uhe(){var t,r,n=b4(),o,i=w_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=w_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,c={point:function(p,h){u=[p,h]}};function f(p){var h=p[0],m=p[1];return u=null,o.point(h,m),u||(s.point(h,m),u)||(l.point(h,m),u)}f.invert=function(p){var h=n.scale(),m=n.translate(),g=(p[0]-m[0])/h,y=(p[1]-m[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(p)},f.stream=function(p){return t&&r===p?t:t=oHt([n.stream(r=p),i.stream(p),a.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),a.precision(p),d()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),a.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var h=n.scale(),m=+p[0],g=+p[1];return o=n.translate(p).clipExtent([[m-.455*h,g-.238*h],[m+.455*h,g+.238*h]]).stream(c),s=i.translate([m-.307*h,g+.201*h]).clipExtent([[m-.425*h+Qt,g+.12*h+Qt],[m-.214*h-Qt,g+.234*h-Qt]]).stream(c),l=a.translate([m-.205*h,g+.212*h]).clipExtent([[m-.214*h+Qt,g+.166*h+Qt],[m-.115*h-Qt,g+.234*h-Qt]]).stream(c),d()},f.fitExtent=function(p,h){return sT(f,p,h)},f.fitSize=function(p,h){return IN(f,p,h)},f.fitWidth=function(p,h){return DN(f,p,h)},f.fitHeight=function(p,h){return NN(f,p,h)};function d(){return t=r=null,f}return f.scale(1070)}var vWe=D(()=>{"use strict";En();zhe();VW();$W()});function GW(t){return function(r,n){var o=Zt(r),i=Zt(n),s=t(o*i);return s===1/0?[2,0]:[s*i*Yt(r),s*Yt(n)]}}function uy(t){return function(r,n){var o=qo(r*r+n*n),i=t(o),s=Yt(i),a=Zt(i);return[ms(r*s,o*a),Ii(o&&n*s/o)]}}var FN=D(()=>{"use strict";En()});function Ghe(){return ys(Vhe).scale(124.75).clipAngle(180-.001)}var Vhe,wWe=D(()=>{"use strict";En();FN();Cp();Vhe=GW(function(t){return qo(2/(1+t))});Vhe.invert=uy(function(t){return 2*Ii(t/2)})});function qhe(){return ys(Whe).scale(79.4188).clipAngle(180-.001)}var Whe,_We=D(()=>{"use strict";En();FN();Cp();Whe=GW(function(t){return(t=pW(t))&&t/Yt(t)});Whe.invert=uy(function(t){return t})});function RN(t,r){return[t,eT(wN((Go+r)/2))]}function Hhe(){return Yhe(RN).scale(961/Rs)}function Yhe(t){var r=ys(t),n=r.center,o=r.scale,i=r.translate,s=r.clipExtent,a=null,l,u,c;r.scale=function(d){return arguments.length?(o(d),f()):o()},r.translate=function(d){return arguments.length?(i(d),f()):i()},r.center=function(d){return arguments.length?(n(d),f()):n()},r.clipExtent=function(d){return arguments.length?(d==null?a=l=u=c=null:(a=+d[0][0],l=+d[0][1],u=+d[1][0],c=+d[1][1]),f()):a==null?null:[[a,l],[u,c]]};function f(){var d=Qr*o(),p=r(MGe(r.rotate()).invert([0,0]));return s(a==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:t===RN?[[Math.max(p[0]-d,a),l],[Math.min(p[0]+d,u),c]]:[[a,Math.max(p[1]-d,l)],[u,Math.min(p[1]+d,c)]])}return f()}var WW=D(()=>{"use strict";En();ghe();Cp();RN.invert=function(t,r){return[t,2*_p(cW(r))-Go]}});function qW(t){return wN((Go+t)/2)}function SWe(t,r){var n=Zt(t),o=t===r?Yt(t):eT(n/Zt(r))/eT(qW(r)/qW(t)),i=n*dW(qW(t),o)/o;if(!o)return RN;function s(a,l){i>0?l<-Go+Qt&&(l=-Go+Qt):l>Go-Qt&&(l=Go-Qt);var u=i/dW(qW(l),o);return[u*Yt(o*a),i-u*Zt(o*a)]}return s.invert=function(a,l){var u=i-l,c=du(o)*qo(a*a+u*u),f=ms(a,Kr(u))*du(u);return u*o<0&&(f-=Qr*du(a)*du(u)),[f/o,2*_p(dW(i/c,1/o))-Go]},s}function Xhe(){return ON(SWe).scale(109.5).parallels([30,30])}var CWe=D(()=>{"use strict";En();UW();WW()});function MN(t,r){return[t,r]}function Khe(){return ys(MN).scale(152.63)}var Zhe=D(()=>{"use strict";Cp();MN.invert=MN});function EWe(t,r){var n=Zt(t),o=t===r?Yt(t):(n-Zt(r))/(r-t),i=n/o+t;if(Kr(o)<Qt)return MN;function s(a,l){var u=i-l,c=o*a;return[u*Yt(c),i-u*Zt(c)]}return s.invert=function(a,l){var u=i-l,c=ms(a,Kr(u))*du(u);return u*o<0&&(c-=Qr*du(a)*du(u)),[c/o,i-du(o)*qo(a*a+u*u)]},s}function Qhe(){return ON(EWe).scale(131.154).center([0,13.9389])}var TWe=D(()=>{"use strict";En();UW();Zhe()});function Jhe(t,r){var n=Ii(HW*Yt(r)),o=n*n,i=o*o*o;return[t*Zt(n)/(HW*(x4+3*v4*o+i*(7*w4+9*_4*o))),n*(x4+v4*o+i*(w4+_4*o))]}function eme(){return ys(Jhe).scale(177.158)}var x4,v4,w4,_4,HW,iHt,AWe=D(()=>{"use strict";Cp();En();x4=1.340264,v4=-.081106,w4=893e-6,_4=.003796,HW=qo(3)/2,iHt=12;Jhe.invert=function(t,r){for(var n=r,o=n*n,i=o*o*o,s=0,a,l,u;s<iHt&&(l=n*(x4+v4*o+i*(w4+_4*o))-r,u=x4+3*v4*o+i*(7*w4+9*_4*o),n-=a=l/u,o=n*n,i=o*o*o,!(Kr(a)<JE));++s);return[HW*t*(x4+3*v4*o+i*(7*w4+9*_4*o))/Zt(n),Ii(Yt(n)/HW)]}});function tme(t,r){var n=Zt(r),o=Zt(t)*n;return[n*Yt(t)/o,Yt(r)/o]}function rme(){return ys(tme).scale(144.049).clipAngle(60)}var kWe=D(()=>{"use strict";En();FN();Cp();tme.invert=uy(_p)});function nme(){var t=1,r=0,n=0,o=1,i=1,s=0,a,l,u=null,c,f,d,p=1,h=1,m=iT({point:function(w,_){var C=v([w,_]);this.stream.point(C[0],C[1])}}),g=x_,y,b;function x(){return p=t*o,h=t*i,y=b=null,v}function v(w){var _=w[0]*p,C=w[1]*h;if(s){var S=C*a-_*l;_=_*a+C*l,C=S}return[_+r,C+n]}return v.invert=function(w){var _=w[0]-r,C=w[1]-n;if(s){var S=C*a+_*l;_=_*a-C*l,C=S}return[_/p,C/h]},v.stream=function(w){return y&&b===w?y:y=m(g(b=w))},v.postclip=function(w){return arguments.length?(g=w,u=c=f=d=null,x()):g},v.clipExtent=function(w){return arguments.length?(g=w==null?(u=c=f=d=null,x_):d4(u=+w[0][0],c=+w[0][1],f=+w[1][0],d=+w[1][1]),x()):u==null?null:[[u,c],[f,d]]},v.scale=function(w){return arguments.length?(t=+w,x()):t},v.translate=function(w){return arguments.length?(r=+w[0],n=+w[1],x()):[r,n]},v.angle=function(w){return arguments.length?(s=w%360*Xr,l=Yt(s),a=Zt(s),x()):s*Wo},v.reflectX=function(w){return arguments.length?(o=w?-1:1,x()):o<0},v.reflectY=function(w){return arguments.length?(i=w?-1:1,x()):i<0},v.fitExtent=function(w,_){return sT(v,w,_)},v.fitSize=function(w,_){return IN(v,w,_)},v.fitWidth=function(w,_){return DN(v,w,_)},v.fitHeight=function(w,_){return NN(v,w,_)},v}var IWe=D(()=>{"use strict";She();DW();BW();$W();En()});function ome(t,r){var n=r*r,o=n*n;return[t*(.8707-.131979*n+o*(-.013791+o*(.003971*n-.001529*o))),r*(1.007226+n*(.015085+o*(-.044475+.028874*n-.005916*o)))]}function ime(){return ys(ome).scale(175.295)}var DWe=D(()=>{"use strict";Cp();En();ome.invert=function(t,r){var n=r,o=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-r)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Kr(i)>Qt&&--o>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]}});function sme(t,r){return[Zt(r)*Yt(t),Yt(r)]}function ame(){return ys(sme).scale(249.5).clipAngle(90+Qt)}var NWe=D(()=>{"use strict";En();FN();Cp();sme.invert=uy(Ii)});function lme(t,r){var n=Zt(r),o=1+Zt(t)*n;return[n*Yt(t)/o,Yt(r)/o]}function ume(){return ys(lme).scale(250).clipAngle(142)}var OWe=D(()=>{"use strict";En();FN();Cp();lme.invert=uy(function(t){return 2*_p(t)})});function cme(t,r){return[eT(wN((Go+r)/2)),-t]}function fme(){var t=Yhe(cme),r=t.center,n=t.rotate;return t.center=function(o){return arguments.length?r([-o[1],o[0]]):(o=r(),[o[1],-o[0]])},t.rotate=function(o){return arguments.length?n([o[0],o[1],o.length>2?o[2]+90:90]):(o=n(),[o[0],o[1],o[2]-90])},n([0,0,90]).scale(159.155)}var FWe=D(()=>{"use strict";En();WW();cme.invert=function(t,r){return[-r,2*_p(cW(t))-Go]}});var S4=D(()=>{"use strict";ihe();EGe();NGe();XGe();pWe();zhe();vWe();wWe();_We();CWe();VW();TWe();AWe();Zhe();kWe();IWe();Cp();WW();DWe();NWe();OWe();FWe()});function pme(t){return t>1?YW:t<-1?-YW:Math.asin(t)}function PWe(t){return t>0?Math.sqrt(t):0}var RWe,XW,C4,MWe,__,YW,u$n,dme,c$n,f$n,d$n,p$n,jWe=D(()=>{"use strict";RWe=Math.abs,XW=Math.cos,C4=Math.sin,MWe=1e-6,__=Math.PI,YW=__/2,u$n=__/4,dme=PWe(2),c$n=PWe(__),f$n=__*2,d$n=180/__,p$n=__/180});function sHt(t,r){var n=t*C4(r),o=30,i;do r-=i=(r+C4(r)-n)/(1+XW(r));while(RWe(i)>MWe&&--o>0);return r/2}function aHt(t,r,n){function o(i,s){return[t*i*XW(s=sHt(n,s)),r*C4(s)]}return o.invert=function(i,s){return s=pme(s/r),[i/(t*XW(s)),pme((2*s+C4(2*s))/n)]},o}function hme(){return ys(LWe).scale(169.529)}var LWe,BWe=D(()=>{"use strict";S4();jWe();LWe=aHt(dme/YW,dme,__)});var $We=D(()=>{"use strict";BWe()});function uHt(t,r){return function n(){let o=r();return o.type=t,o.path=LW().projection(o),o.copy=o.copy||function(){let i=n();return ZW.forEach(s=>{o[s]&&i[s](o[s]())}),i.path.pointRadius(o.path.pointRadius()),i},o}}function E4(t,r){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(KW[t]=uHt(t,r),this):KW[t]||null}function mme(t){return t&&t.path||lHt}var lHt,ZW,KW,gme=D(()=>{"use strict";S4();$We();lHt=LW(),ZW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];KW={albers:b4,albersusa:Uhe,azimuthalequalarea:Ghe,azimuthalequidistant:qhe,conicconformal:Xhe,conicequalarea:w_,conicequidistant:Qhe,equalEarth:eme,equirectangular:Khe,gnomonic:rme,identity:nme,mercator:Hhe,mollweide:hme,naturalEarth1:ime,orthographic:ame,stereographic:ume,transversemercator:fme};for(let t in KW)E4(t,KW[t])});var Ime={};fn(Ime,{contour:()=>wme,geojson:()=>Sme,geopath:()=>Cme,geopoint:()=>Eme,geoshape:()=>Tme,graticule:()=>Ame,heatmap:()=>kme,isocontour:()=>xme,kde2d:()=>vme,projection:()=>XWe});function cHt(){}function VWe(){var t=1,r=1,n=l;function o(u,c){return c.map(f=>i(u,f))}function i(u,c){var f=[],d=[];return s(u,c,p=>{n(p,u,c),fHt(p)>0?f.push([p]):d.push(p)}),d.forEach(p=>{for(var h=0,m=f.length,g;h<m;++h)if(dHt((g=f[h])[0],p)!==-1){g.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:f}}function s(u,c,f){var d=new Array,p=new Array,h,m,g,y,b,x;for(h=m=-1,y=u[0]>=c,sv[y<<1].forEach(v);++h<t-1;)g=y,y=u[h+1]>=c,sv[g|y<<1].forEach(v);for(sv[y<<0].forEach(v);++m<r-1;){for(h=-1,y=u[m*t+t]>=c,b=u[m*t]>=c,sv[y<<1|b<<2].forEach(v);++h<t-1;)g=y,y=u[m*t+t+h+1]>=c,x=b,b=u[m*t+h+1]>=c,sv[g|y<<1|b<<2|x<<3].forEach(v);sv[y|b<<3].forEach(v)}for(h=-1,b=u[m*t]>=c,sv[b<<2].forEach(v);++h<t-1;)x=b,b=u[m*t+h+1]>=c,sv[b<<2|x<<3].forEach(v);sv[b<<3].forEach(v);function v(w){var _=[w[0][0]+h,w[0][1]+m],C=[w[1][0]+h,w[1][1]+m],S=a(_),E=a(C),A,N;(A=p[S])?(N=d[E])?(delete p[A.end],delete d[N.start],A===N?(A.ring.push(C),f(A.ring)):d[A.start]=p[N.end]={start:A.start,end:N.end,ring:A.ring.concat(N.ring)}):(delete p[A.end],A.ring.push(C),p[A.end=E]=A):(A=d[E])?(N=p[S])?(delete d[A.start],delete p[N.end],A===N?(A.ring.push(C),f(A.ring)):d[N.start]=p[A.end]={start:N.start,end:A.end,ring:N.ring.concat(A.ring)}):(delete d[A.start],A.ring.unshift(_),d[A.start=S]=A):d[S]=p[E]={start:S,end:E,ring:[_,C]}}}function a(u){return u[0]*2+u[1]*(t+1)*4}function l(u,c,f){u.forEach(d=>{var p=d[0],h=d[1],m=p|0,g=h|0,y,b=c[g*t+m];p>0&&p<t&&m===p&&(y=c[g*t+m-1],d[0]=p+(f-y)/(b-y)-.5),h>0&&h<r&&g===h&&(y=c[(g-1)*t+m],d[1]=h+(f-y)/(b-y)-.5)})}return o.contour=i,o.size=function(u){if(!arguments.length)return[t,r];var c=Math.floor(u[0]),f=Math.floor(u[1]);return c>=0&&f>=0||pt("invalid size"),t=c,r=f,o},o.smooth=function(u){return arguments.length?(n=u?l:cHt,o):n===l},o}function fHt(t){for(var r=0,n=t.length,o=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++r<n;)o+=t[r-1][1]*t[r][0]-t[r-1][0]*t[r][1];return o}function dHt(t,r){for(var n=-1,o=r.length,i;++n<o;)if(i=pHt(t,r[n]))return i;return 0}function pHt(t,r){for(var n=r[0],o=r[1],i=-1,s=0,a=t.length,l=a-1;s<a;l=s++){var u=t[s],c=u[0],f=u[1],d=t[l],p=d[0],h=d[1];if(hHt(u,d,r))return 0;f>o!=h>o&&n<(p-c)*(o-f)/(h-f)+c&&(i=-i)}return i}function hHt(t,r,n){var o;return mHt(t,r,n)&&gHt(t[o=+(t[0]===r[0])],n[o],r[o])}function mHt(t,r,n){return(r[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(r[1]-t[1])}function gHt(t,r,n){return t<=r&&r<=n||n<=r&&r<=t}function GWe(t,r,n){return function(o){var i=Oh(o),s=n?Math.min(i[0],0):i[0],a=i[1],l=a-s,u=r?ec(s,a,t):l/(t+1);return Qs(s+u,a,u)}}function xme(t){et.call(this,null,t)}function yHt(t,r,n){let o=GWe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?o:o(t.map(i=>up(r(i).values)))}function bHt(t,r,n,o){let i=o.scale||r.scale,s=o.translate||r.translate;if(In(i)&&(i=i(n,o)),In(s)&&(s=s(n,o)),(i===1||i==null)&&!s)return;let a=(k0(i)?i:i[0])||1,l=(k0(i)?i:i[1])||1,u=s&&s[0]||0,c=s&&s[1]||0;t.forEach(WWe(r,a,l,u,c))}function WWe(t,r,n,o,i){let s=t.x1||0,a=t.y1||0,l=r*n<0;function u(d){d.forEach(c)}function c(d){l&&d.reverse(),d.forEach(f)}function f(d){d[0]=(d[0]-s)*r+o,d[1]=(d[1]-a)*n+i}return function(d){return d.coordinates.forEach(u),d}}function zWe(t,r,n){let o=t>=0?t:p9(r,n);return Math.round((Math.sqrt(4*o*o+1)-1)/2)}function yme(t){return In(t)?t:Ga(+t)}function qWe(){var t=u=>u[0],r=u=>u[1],n=T0,o=[-1,-1],i=960,s=500,a=2;function l(u,c){let f=zWe(o[0],u,t)>>a,d=zWe(o[1],u,r)>>a,p=f?f+2:0,h=d?d+2:0,m=2*p+(i>>a),g=2*h+(s>>a),y=new Float32Array(m*g),b=new Float32Array(m*g),x=y;u.forEach(w=>{let _=p+(+t(w)>>a),C=h+(+r(w)>>a);_>=0&&_<m&&C>=0&&C<g&&(y[_+C*m]+=+n(w))}),f>0&&d>0?(PN(m,g,y,b,f),jN(m,g,b,y,d),PN(m,g,y,b,f),jN(m,g,b,y,d),PN(m,g,y,b,f),jN(m,g,b,y,d)):f>0?(PN(m,g,y,b,f),PN(m,g,b,y,f),PN(m,g,y,b,f),x=b):d>0&&(jN(m,g,y,b,d),jN(m,g,b,y,d),jN(m,g,y,b,d),x=b);let v=c?Math.pow(2,-2*a):1/yD(x);for(let w=0,_=m*g;w<_;++w)x[w]*=v;return{values:x,scale:1<<a,width:m,height:g,x1:p,y1:h,x2:p+(i>>a),y2:h+(s>>a)}}return l.x=function(u){return arguments.length?(t=yme(u),l):t},l.y=function(u){return arguments.length?(r=yme(u),l):r},l.weight=function(u){return arguments.length?(n=yme(u),l):n},l.size=function(u){if(!arguments.length)return[i,s];var c=+u[0],f=+u[1];return c>=0&&f>=0||pt("invalid size"),i=c,s=f,l},l.cellSize=function(u){return arguments.length?((u=+u)>=1||pt("invalid cell size"),a=Math.floor(Math.log(u)/Math.LN2),l):1<<a},l.bandwidth=function(u){return arguments.length?(u=Lr(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&pt("invalid bandwidth"),o=u,l):o},l}function PN(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<r;++a)for(let l=0,u=0;l<t+i;++l)l<t&&(u+=n[l+a*t]),l>=i&&(l>=s&&(u-=n[l-s+a*t]),o[l-i+a*t]=u/Math.min(l+1,t-1+s-l,s))}function jN(t,r,n,o,i){let s=(i<<1)+1;for(let a=0;a<t;++a)for(let l=0,u=0;l<r+i;++l)l<r&&(u+=n[a+l*t]),l>=i&&(l>=s&&(u-=n[a+(l-s)*t]),o[a+(l-i)*t]=u/Math.min(l+1,r-1+s-l,s))}function vme(t){et.call(this,null,t)}function HWe(t,r){return xHt.forEach(n=>r[n]!=null?t[n](r[n]):0),t}function vHt(t,r){var n=[],o=f=>f(l),i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function wme(t){et.call(this,null,t)}function Sme(t){et.call(this,null,t)}function Cme(t){et.call(this,null,t)}function _Ht(t,r){let n=t.pointRadius();return t.context(null),r!=null&&t.pointRadius(r),n}function Eme(t){et.call(this,null,t)}function Tme(t){et.call(this,null,t)}function SHt(t,r,n){let o=n==null?i=>t(r(i)):i=>{var s=t.pointRadius(),a=t.pointRadius(n)(r(i));return t.pointRadius(s),a};return o.context=i=>(t.context(i),o),o}function Ame(t){et.call(this,[],t),this.generator=IW()}function kme(t){et.call(this,null,t)}function CHt(t,r){let n;return In(t)?(n=o=>ta(t(o,r)),n.dep=YWe(t)):n=Ga(ta(t||"#888")),n}function EHt(t,r){let n;return In(t)?(n=o=>t(o,r),n.dep=YWe(t)):t?n=Ga(t):(n=o=>o.$value/o.$max||0,n.dep=!0),n}function YWe(t){if(!In(t))return!1;let r=ou(Sa(t));return r.$x||r.$y||r.$value||r.$max}function THt(t,r,n,o){let i=t.width,s=t.height,a=t.x1||0,l=t.y1||0,u=t.x2||i,c=t.y2||s,f=t.values,d=f?y=>f[y]:Dh,p=Wc(u-a,c-l),h=p.getContext("2d"),m=h.getImageData(0,0,u-a,c-l),g=m.data;for(let y=l,b=0;y<c;++y){r.$y=y-l;for(let x=a,v=y*i;x<u;++x,b+=4){r.$x=x-a,r.$value=d(x+v);let w=n(r);g[b+0]=w.r,g[b+1]=w.g,g[b+2]=w.b,g[b+3]=~~(255*o(r))}}return h.putImageData(m,0,0),p}function XWe(t){et.call(this,null,t),this.modified(!0)}function AHt(t,r){let n=IHt(r.fit);r.extent?t.fitExtent(r.extent,n):r.size&&t.fitSize(r.size,n)}function kHt(t){let r=E4((t||"mercator").toLowerCase());return r||pt("Unrecognized projection type: "+t),r()}function UWe(t,r,n){In(t[r])&&t[r](n)}function IHt(t){return t=Lr(t),t.length===1?t[0]:{type:_me,features:t.reduce((r,n)=>r.concat(DHt(n)),[])}}function DHt(t){return t.type===_me?t.features:Lr(t).filter(r=>r!=null).map(r=>r.type===bme?r:{type:bme,geometry:r})}var sv,xHt,bme,_me,wHt,KWe=D(()=>{"use strict";qa();Os();Vo();vD();gme();S4();Fs();DD();sv=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];xme.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Dt(xme,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=t.field||Qu,s=VWe().smooth(t.smooth!==!1),a=t.thresholds||yHt(o,i,t),l=t.as===null?null:t.as||"contour",u=[];return o.forEach(c=>{let f=i(c),d=s.size([f.width,f.height])(f.values,Hr(a)?a:a(f.values));bHt(d,f,c,t),d.forEach(p=>{u.push(nE(c,Dn(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});vme.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};xHt=["x","y","weight","size","cellSize","bandwidth"];Dt(vme,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,i=vHt(o,t.groupby),s=(t.groupby||[]).map(ki),a=HWe(qWe(),t),l=t.as||"grid",u=[];function c(f,d){for(let p=0;p<s.length;++p)f[s[p]]=d[p];return f}return u=i.map(f=>Dn(c({[l]:a(f,t.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});wme.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Dt(wme,et,{transform(t,r){if(this.value&&!r.changed()&&!t.modified())return r.StopPropagation;var n=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=VWe().smooth(t.smooth!==!1),i=t.values,s=t.thresholds||GWe(t.count||10,t.nice,!!i),a=t.size,l,u;return i||(i=r.materialize(r.SOURCE).source,l=HWe(qWe(),t)(i,!0),u=WWe(l,l.scale||1,l.scale||1,0,0),a=[l.width,l.height],i=l.values),s=Hr(s)?s:s(i),i=o.size(a)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Dn),n}});bme="Feature",_me="FeatureCollection",wHt="MultiPoint";Sme.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Dt(Sme,et,{transform(t,r){var n=this._features,o=this._points,i=t.fields,s=i&&i[0],a=i&&i[1],l=t.geojson||!i&&Qu,u=r.ADD,c;c=t.modified()||r.changed(r.REM)||r.modified(Sa(l))||s&&r.modified(Sa(s))||a&&r.modified(Sa(a)),(!this.value||c)&&(u=r.SOURCE,this._features=n=[],this._points=o=[]),l&&r.visit(u,f=>n.push(l(f))),s&&a&&(r.visit(u,f=>{var d=s(f),p=a(f);d!=null&&p!=null&&(d=+d)===d&&(p=+p)===p&&o.push([d,p])}),n=n.concat({type:bme,geometry:{type:wHt,coordinates:o}})),this.value={type:_me,features:n}}});Cme.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Dt(Cme,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.field||Qu,s=t.as||"path",a=n.SOURCE;!o||t.modified()?(this.value=o=mme(t.projection),n.materialize().reflow()):a=i===Qu||r.modified(i.fields)?n.ADD_MOD:n.ADD;let l=_Ht(o,t.pointRadius);return n.visit(a,u=>u[s]=o(i(u))),o.pointRadius(l),n.modifies(s)}});Eme.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Dt(Eme,et,{transform(t,r){var n=t.projection,o=t.fields[0],i=t.fields[1],s=t.as||["x","y"],a=s[0],l=s[1],u;function c(f){let d=n([o(f),i(f)]);d?(f[a]=d[0],f[l]=d[1]):(f[a]=void 0,f[l]=void 0)}return t.modified()?r=r.materialize().reflow(!0).visit(r.SOURCE,c):(u=r.modified(o.fields)||r.modified(i.fields),r.visit(u?r.ADD_MOD:r.ADD,c)),r.modifies(s)}});Tme.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Dt(Tme,et,{transform(t,r){var n=r.fork(r.ALL),o=this.value,i=t.as||"shape",s=n.ADD;return(!o||t.modified())&&(this.value=o=SHt(mme(t.projection),t.field||Ih("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=o),n.modifies(i)}});Ame.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Dt(Ame,et,{transform(t,r){var n=this.value,o=this.generator,i;if(!n.length||t.modified())for(let s in t)In(o[s])&&o[s](t[s]);return i=o(),n.length?r.mod.push(n9(n[0],i)):r.add.push(Dn(i)),n[0]=i,r}});kme.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Dt(kme,et,{transform(t,r){if(!r.changed()&&!t.modified())return r.StopPropagation;var n=r.materialize(r.SOURCE).source,o=t.resolve==="shared",i=t.field||Qu,s=EHt(t.opacity,t),a=CHt(t.color,t),l=t.as||"image",u={$x:0,$y:0,$value:0,$max:o?up(n.map(c=>up(i(c).values))):0};return n.forEach(c=>{let f=i(c),d=an({},c,u);o||(d.$max=up(f.values||[])),c[l]=THt(f,d,a.dep?a:Ga(a(d)),s.dep?s:Ga(s(d)))}),r.reflow(!0).modifies(l)}});Dt(XWe,et,{transform(t,r){let n=this.value;return!n||t.modified("type")?(this.value=n=kHt(t.type),ZW.forEach(o=>{t[o]!=null&&UWe(n,o,t[o])})):ZW.forEach(o=>{t.modified(o)&&UWe(n,o,t[o])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&AHt(n,t),r.fork(r.NO_SOURCE|r.NO_FIELDS)}})});function Dme(t,r){var n,o=1;t==null&&(t=0),r==null&&(r=0);function i(){var s,a=n.length,l,u=0,c=0;for(s=0;s<a;++s)l=n[s],u+=l.x,c+=l.y;for(u=(u/a-t)*o,c=(c/a-r)*o,s=0;s<a;++s)l=n[s],l.x-=u,l.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(r=+s,i):r},i.strength=function(s){return arguments.length?(o=+s,i):o},i}var ZWe=D(()=>{"use strict"});function QWe(t){let r=+this._x.call(null,t),n=+this._y.call(null,t);return JWe(this.cover(r,n),r,n,t)}function JWe(t,r,n,o){if(isNaN(r)||isNaN(n))return t;var i,s=t._root,a={data:o},l=t._x0,u=t._y0,c=t._x1,f=t._y1,d,p,h,m,g,y,b,x;if(!s)return t._root=a,t;for(;s.length;)if((g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p,i=s,!(s=s[b=y<<1|g]))return i[b]=a,t;if(h=+t._x.call(null,s.data),m=+t._y.call(null,s.data),r===h&&n===m)return a.next=s,i?i[b]=a:t._root=a,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(g=r>=(d=(l+c)/2))?l=d:c=d,(y=n>=(p=(u+f)/2))?u=p:f=p;while((b=y<<1|g)===(x=(m>=p)<<1|h>=d));return i[x]=s,i[b]=a,t}function eqe(t){var r,n,o=t.length,i,s,a=new Array(o),l=new Array(o),u=1/0,c=1/0,f=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,r=t[n]))||isNaN(s=+this._y.call(null,r))||(a[n]=i,l[n]=s,i<u&&(u=i),i>f&&(f=i),s<c&&(c=s),s>d&&(d=s));if(u>f||c>d)return this;for(this.cover(u,c).cover(f,d),n=0;n<o;++n)JWe(this,a[n],l[n],t[n]);return this}var tqe=D(()=>{"use strict"});function rqe(t,r){if(isNaN(t=+t)||isNaN(r=+r))return this;var n=this._x0,o=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(o=Math.floor(r))+1;else{for(var a=i-n||1,l=this._root,u,c;n>t||t>=i||o>r||r>=s;)switch(c=(r<o)<<1|t<n,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:i=n+a,s=o+a;break;case 1:n=i-a,s=o+a;break;case 2:i=n+a,o=s-a;break;case 3:n=i-a,o=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=o,this._x1=i,this._y1=s,this}var nqe=D(()=>{"use strict"});function oqe(){var t=[];return this.visit(function(r){if(!r.length)do t.push(r.data);while(r=r.next)}),t}var iqe=D(()=>{"use strict"});function sqe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}var aqe=D(()=>{"use strict"});function Ja(t,r,n,o,i){this.node=t,this.x0=r,this.y0=n,this.x1=o,this.y1=i}var QW=D(()=>{"use strict"});function lqe(t,r,n){var o,i=this._x0,s=this._y0,a,l,u,c,f=this._x1,d=this._y1,p=[],h=this._root,m,g;for(h&&p.push(new Ja(h,i,s,f,d)),n==null?n=1/0:(i=t-n,s=r-n,f=t+n,d=r+n,n*=n);m=p.pop();)if(!(!(h=m.node)||(a=m.x0)>f||(l=m.y0)>d||(u=m.x1)<i||(c=m.y1)<s))if(h.length){var y=(a+u)/2,b=(l+c)/2;p.push(new Ja(h[3],y,b,u,c),new Ja(h[2],a,b,y,c),new Ja(h[1],y,l,u,b),new Ja(h[0],a,l,y,b)),(g=(r>=b)<<1|t>=y)&&(m=p[p.length-1],p[p.length-1]=p[p.length-1-g],p[p.length-1-g]=m)}else{var x=t-+this._x.call(null,h.data),v=r-+this._y.call(null,h.data),w=x*x+v*v;if(w<n){var _=Math.sqrt(n=w);i=t-_,s=r-_,f=t+_,d=r+_,o=h.data}}return o}var uqe=D(()=>{"use strict";QW()});function cqe(t){if(isNaN(f=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var r,n=this._root,o,i,s,a=this._x0,l=this._y0,u=this._x1,c=this._y1,f,d,p,h,m,g,y,b;if(!n)return this;if(n.length)for(;;){if((m=f>=(p=(a+u)/2))?a=p:u=p,(g=d>=(h=(l+c)/2))?l=h:c=h,r=n,!(n=n[y=g<<1|m]))return this;if(!n.length)break;(r[y+1&3]||r[y+2&3]||r[y+3&3])&&(o=r,b=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):r?(s?r[y]=s:delete r[y],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(o?o[b]=n:this._root=n),this):(this._root=s,this)}function fqe(t){for(var r=0,n=t.length;r<n;++r)this.remove(t[r]);return this}var dqe=D(()=>{"use strict"});function pqe(){return this._root}var hqe=D(()=>{"use strict"});function mqe(){var t=0;return this.visit(function(r){if(!r.length)do++t;while(r=r.next)}),t}var gqe=D(()=>{"use strict"});function yqe(t){var r=[],n,o=this._root,i,s,a,l,u;for(o&&r.push(new Ja(o,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!t(o=n.node,s=n.x0,a=n.y0,l=n.x1,u=n.y1)&&o.length){var c=(s+l)/2,f=(a+u)/2;(i=o[3])&&r.push(new Ja(i,c,f,l,u)),(i=o[2])&&r.push(new Ja(i,s,f,c,u)),(i=o[1])&&r.push(new Ja(i,c,a,l,f)),(i=o[0])&&r.push(new Ja(i,s,a,c,f))}return this}var bqe=D(()=>{"use strict";QW()});function xqe(t){var r=[],n=[],o;for(this._root&&r.push(new Ja(this._root,this._x0,this._y0,this._x1,this._y1));o=r.pop();){var i=o.node;if(i.length){var s,a=o.x0,l=o.y0,u=o.x1,c=o.y1,f=(a+u)/2,d=(l+c)/2;(s=i[0])&&r.push(new Ja(s,a,l,f,d)),(s=i[1])&&r.push(new Ja(s,f,l,u,d)),(s=i[2])&&r.push(new Ja(s,a,d,f,c)),(s=i[3])&&r.push(new Ja(s,f,d,u,c))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}var vqe=D(()=>{"use strict";QW()});function wqe(t){return t[0]}function _qe(t){return arguments.length?(this._x=t,this):this._x}var Sqe=D(()=>{"use strict"});function Cqe(t){return t[1]}function Eqe(t){return arguments.length?(this._y=t,this):this._y}var Tqe=D(()=>{"use strict"});function aT(t,r,n){var o=new Nme(r??wqe,n??Cqe,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function Nme(t,r,n,o,i,s){this._x=t,this._y=r,this._x0=n,this._y0=o,this._x1=i,this._y1=s,this._root=void 0}function Aqe(t){for(var r={data:t.data},n=r;t=t.next;)n=n.next={data:t.data};return r}var hc,kqe=D(()=>{"use strict";tqe();nqe();iqe();aqe();uqe();dqe();hqe();gqe();bqe();vqe();Sqe();Tqe();hc=aT.prototype=Nme.prototype;hc.copy=function(){var t=new Nme(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,o;if(!r)return t;if(!r.length)return t._root=Aqe(r),t;for(n=[{source:r,target:t._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(o=r.source[i])&&(o.length?n.push({source:o,target:r.target[i]=new Array(4)}):r.target[i]=Aqe(o));return t};hc.add=QWe;hc.addAll=eqe;hc.cover=rqe;hc.data=oqe;hc.extent=sqe;hc.find=lqe;hc.remove=cqe;hc.removeAll=fqe;hc.root=pqe;hc.size=mqe;hc.visit=yqe;hc.visitAfter=xqe;hc.x=_qe;hc.y=Eqe});var Ome=D(()=>{"use strict";kqe()});function oa(t){return function(){return t}}var LN=D(()=>{"use strict"});function om(t){return(t()-.5)*1e-6}var JW=D(()=>{"use strict"});function NHt(t){return t.x+t.vx}function OHt(t){return t.y+t.vy}function Fme(t){var r,n,o,i=1,s=1;typeof t!="function"&&(t=oa(t==null?1:+t));function a(){for(var c,f=r.length,d,p,h,m,g,y,b=0;b<s;++b)for(d=aT(r,NHt,OHt).visitAfter(l),c=0;c<f;++c)p=r[c],g=n[p.index],y=g*g,h=p.x+p.vx,m=p.y+p.vy,d.visit(x);function x(v,w,_,C,S){var E=v.data,A=v.r,N=g+A;if(E){if(E.index>p.index){var k=h-E.x-E.vx,R=m-E.y-E.vy,I=k*k+R*R;I<N*N&&(k===0&&(k=om(o),I+=k*k),R===0&&(R=om(o),I+=R*R),I=(N-(I=Math.sqrt(I)))/I*i,p.vx+=(k*=I)*(N=(A*=A)/(y+A)),p.vy+=(R*=I)*N,E.vx-=k*(N=1-N),E.vy-=R*N)}return}return w>h+N||C<h-N||_>m+N||S<m-N}}function l(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(r){var c,f=r.length,d;for(n=new Array(f),c=0;c<f;++c)d=r[c],n[d.index]=+t(d,c,r)}}return a.initialize=function(c,f){r=c,o=f,u()},a.iterations=function(c){return arguments.length?(s=+c,a):s},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(t=typeof c=="function"?c:oa(+c),u(),a):t},a}var Iqe=D(()=>{"use strict";Ome();LN();JW()});function FHt(t){return t.index}function Dqe(t,r){var n=t.get(r);if(!n)throw new Error("node not found: "+r);return n}function Rme(t){var r=FHt,n=d,o,i=oa(30),s,a,l,u,c,f=1;t==null&&(t=[]);function d(y){return 1/Math.min(l[y.source.index],l[y.target.index])}function p(y){for(var b=0,x=t.length;b<f;++b)for(var v=0,w,_,C,S,E,A,N;v<x;++v)w=t[v],_=w.source,C=w.target,S=C.x+C.vx-_.x-_.vx||om(c),E=C.y+C.vy-_.y-_.vy||om(c),A=Math.sqrt(S*S+E*E),A=(A-s[v])/A*y*o[v],S*=A,E*=A,C.vx-=S*(N=u[v]),C.vy-=E*N,_.vx+=S*(N=1-N),_.vy+=E*N}function h(){if(a){var y,b=a.length,x=t.length,v=new Map(a.map((_,C)=>[r(_,C,a),_])),w;for(y=0,l=new Array(b);y<x;++y)w=t[y],w.index=y,typeof w.source!="object"&&(w.source=Dqe(v,w.source)),typeof w.target!="object"&&(w.target=Dqe(v,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(y=0,u=new Array(x);y<x;++y)w=t[y],u[y]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);o=new Array(x),m(),s=new Array(x),g()}}function m(){if(a)for(var y=0,b=t.length;y<b;++y)o[y]=+n(t[y],y,t)}function g(){if(a)for(var y=0,b=t.length;y<b;++y)s[y]=+i(t[y],y,t)}return p.initialize=function(y,b){a=y,c=b,h()},p.links=function(y){return arguments.length?(t=y,h(),p):t},p.id=function(y){return arguments.length?(r=y,p):r},p.iterations=function(y){return arguments.length?(f=+y,p):f},p.strength=function(y){return arguments.length?(n=typeof y=="function"?y:oa(+y),m(),p):n},p.distance=function(y){return arguments.length?(i=typeof y=="function"?y:oa(+y),g(),p):i},p}var Nqe=D(()=>{"use strict";LN();JW()});function Fqe(){for(var t=0,r=arguments.length,n={},o;t<r;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new eq(n)}function eq(t){this._=t}function MHt(t,r){return t.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}function PHt(t,r){for(var n=0,o=t.length,i;n<o;++n)if((i=t[n]).name===r)return i.value}function Oqe(t,r,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===r){t[o]=RHt,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:r,value:n}),t}var RHt,Mme,Rqe=D(()=>{"use strict";RHt={value:()=>{}};eq.prototype=Fqe.prototype={constructor:eq,on:function(t,r){var n=this._,o=MHt(t+"",n),i,s=-1,a=o.length;if(arguments.length<2){for(;++s<a;)if((i=(t=o[s]).type)&&(i=PHt(n[i],t.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++s<a;)if(i=(t=o[s]).type)n[i]=Oqe(n[i],t.name,r);else if(r==null)for(i in n)n[i]=Oqe(n[i],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new eq(t)},call:function(t,r){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,s;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],o=0,i=s.length;o<i;++o)s[o].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(r,n)}};Mme=Fqe});var Mqe=D(()=>{"use strict";Rqe()});function N4(){return lT||(Lqe(jHt),lT=I4.now()+nq)}function jHt(){lT=0}function D4(){this._call=this._time=this._next=null}function oq(t,r,n){var o=new D4;return o.restart(t,r,n),o}function Bqe(){N4(),++BN;for(var t=tq,r;t;)(r=lT-t._time)>=0&&t._call.call(null,r),t=t._next;--BN}function Pqe(){lT=(rq=I4.now())+nq,BN=A4=0;try{Bqe()}finally{BN=0,BHt(),lT=0}}function LHt(){var t=I4.now(),r=t-rq;r>jqe&&(nq-=r,rq=t)}function BHt(){for(var t,r=tq,n,o=1/0;r;)r._call?(o>r._time&&(o=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:tq=n);k4=t,Pme(o)}function Pme(t){if(!BN){A4&&(A4=clearTimeout(A4));var r=t-lT;r>24?(t<1/0&&(A4=setTimeout(Pqe,t-I4.now()-nq)),T4&&(T4=clearInterval(T4))):(T4||(rq=I4.now(),T4=setInterval(LHt,jqe)),BN=1,Lqe(Pqe))}}var BN,A4,T4,jqe,tq,k4,rq,lT,nq,I4,Lqe,jme=D(()=>{"use strict";BN=0,A4=0,T4=0,jqe=1e3,rq=0,lT=0,nq=0,I4=typeof performance=="object"&&performance.now?performance:Date,Lqe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};D4.prototype=oq.prototype={constructor:D4,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?N4():+n)+(r==null?0:+r),!this._next&&k4!==this&&(k4?k4._next=this:tq=this,k4=this),this._call=t,this._time=n,Pme()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pme())}}});function Lme(t,r,n){var o=new D4,i=r;return r==null?(o.restart(t,r,n),o):(o._restart=o.restart,o.restart=function(s,a,l){a=+a,l=l==null?N4():+l,o._restart(function u(c){c+=i,o._restart(u,i+=a,l),s(c)},a,l)},o.restart(t,r,n),o)}var $qe=D(()=>{"use strict";jme()});var Bme=D(()=>{"use strict";jme();$qe()});function zqe(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}var Uqe=D(()=>{"use strict"});function Vqe(t){return t.x}function Gqe(t){return t.y}function $me(t){var r,n=1,o=.001,i=1-Math.pow(o,1/300),s=0,a=.6,l=new Map,u=oq(d),c=Mme("tick","end"),f=zqe();t==null&&(t=[]);function d(){p(),c.call("tick",r),n<o&&(u.stop(),c.call("end",r))}function p(g){var y,b=t.length,x;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*i,l.forEach(function(w){w(n)}),y=0;y<b;++y)x=t[y],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return r}function h(){for(var g=0,y=t.length,b;g<y;++g){if(b=t[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var x=$Ht*Math.sqrt(.5+g),v=g*zHt;b.x=x*Math.cos(v),b.y=x*Math.sin(v)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function m(g){return g.initialize&&g.initialize(t,f),g}return h(),r={tick:p,restart:function(){return u.restart(d),r},stop:function(){return u.stop(),r},nodes:function(g){return arguments.length?(t=g,h(),l.forEach(m),r):t},alpha:function(g){return arguments.length?(n=+g,r):n},alphaMin:function(g){return arguments.length?(o=+g,r):o},alphaDecay:function(g){return arguments.length?(i=+g,r):+i},alphaTarget:function(g){return arguments.length?(s=+g,r):s},velocityDecay:function(g){return arguments.length?(a=1-g,r):1-a},randomSource:function(g){return arguments.length?(f=g,l.forEach(m),r):f},force:function(g,y){return arguments.length>1?(y==null?l.delete(g):l.set(g,m(y)),r):l.get(g)},find:function(g,y,b){var x=0,v=t.length,w,_,C,S,E;for(b==null?b=1/0:b*=b,x=0;x<v;++x)S=t[x],w=g-S.x,_=y-S.y,C=w*w+_*_,C<b&&(E=S,b=C);return E},on:function(g,y){return arguments.length>1?(c.on(g,y),r):c.on(g)}}}var $Ht,zHt,zme=D(()=>{"use strict";Mqe();Bme();Uqe();$Ht=10,zHt=Math.PI*(3-Math.sqrt(5))});function Ume(){var t,r,n,o,i=oa(-30),s,a=1,l=1/0,u=.81;function c(h){var m,g=t.length,y=aT(t,Vqe,Gqe).visitAfter(d);for(o=h,m=0;m<g;++m)r=t[m],y.visit(p)}function f(){if(t){var h,m=t.length,g;for(s=new Array(m),h=0;h<m;++h)g=t[h],s[g.index]=+i(g,h,t)}}function d(h){var m=0,g,y,b=0,x,v,w;if(h.length){for(x=v=w=0;w<4;++w)(g=h[w])&&(y=Math.abs(g.value))&&(m+=g.value,b+=y,x+=y*g.x,v+=y*g.y);h.x=x/b,h.y=v/b}else{g=h,g.x=g.data.x,g.y=g.data.y;do m+=s[g.data.index];while(g=g.next)}h.value=m}function p(h,m,g,y){if(!h.value)return!0;var b=h.x-r.x,x=h.y-r.y,v=y-m,w=b*b+x*x;if(v*v/u<w)return w<l&&(b===0&&(b=om(n),w+=b*b),x===0&&(x=om(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)),r.vx+=b*h.value*o/w,r.vy+=x*h.value*o/w),!0;if(h.length||w>=l)return;(h.data!==r||h.next)&&(b===0&&(b=om(n),w+=b*b),x===0&&(x=om(n),w+=x*x),w<a&&(w=Math.sqrt(a*w)));do h.data!==r&&(v=s[h.data.index]*o/w,r.vx+=b*v,r.vy+=x*v);while(h=h.next)}return c.initialize=function(h,m){t=h,n=m,f()},c.strength=function(h){return arguments.length?(i=typeof h=="function"?h:oa(+h),f(),c):i},c.distanceMin=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.distanceMax=function(h){return arguments.length?(l=h*h,c):Math.sqrt(l)},c.theta=function(h){return arguments.length?(u=h*h,c):Math.sqrt(u)},c}var Wqe=D(()=>{"use strict";Ome();LN();JW();zme()});function Vme(t){var r=oa(.1),n,o,i;typeof t!="function"&&(t=oa(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(i[u]-f.x)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:oa(+l),a(),s):r},s.x=function(l){return arguments.length?(t=typeof l=="function"?l:oa(+l),a(),s):t},s}var qqe=D(()=>{"use strict";LN()});function Gme(t){var r=oa(.1),n,o,i;typeof t!="function"&&(t=oa(t==null?0:+t));function s(l){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(i[u]-f.y)*o[u]*l}function a(){if(n){var l,u=n.length;for(o=new Array(u),i=new Array(u),l=0;l<u;++l)o[l]=isNaN(i[l]=+t(n[l],l,n))?0:+r(n[l],l,n)}}return s.initialize=function(l){n=l,a()},s.strength=function(l){return arguments.length?(r=typeof l=="function"?l:oa(+l),a(),s):r},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:oa(+l),a(),s):t},s}var Hqe=D(()=>{"use strict";LN()});var Yqe=D(()=>{"use strict";ZWe();Iqe();Nqe();Wqe();zme();qqe();Hqe()});var Hme={};fn(Hme,{force:()=>qme});function qme(t){et.call(this,null,t)}function VHt(t,r){return()=>t.touch(r).run()}function GHt(t,r){let n=$me(t),o=n.stop,i=n.restart,s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,o()),Zqe(n,r,!0).on("end",()=>s=!0)}function Zqe(t,r,n,o){var i=Lr(r.forces),s,a,l,u;for(s=0,a=Wme.length;s<a;++s)l=Wme[s],l!==O4&&r.modified(l)&&t[l](r[l]);for(s=0,a=i.length;s<a;++s)u=O4+s,l=n||r.modified(O4,s)?qHt(i[s]):o&&WHt(i[s],o)?t.force(u):null,l&&t.force(u,l);for(a=t.numForces||0;s<a;++s)t.force(O4+s,null);return t.numForces=i.length,t}function WHt(t,r){var n,o;for(n in t)if(In(o=t[n])&&r.modified(Sa(o)))return 1;return 0}function qHt(t){var r,n;Rr(Xqe,t.force)||pt("Unrecognized force: "+t.force),r=Xqe[t.force]();for(n in t)In(r[n])&&HHt(r[n],t[n],t);return r}function HHt(t,r,n){t(In(r)?o=>r(o,n):r)}var Xqe,O4,Wme,UHt,Kqe,Qqe=D(()=>{"use strict";qa();Os();Yqe();Xqe={center:Dme,collide:Fme,nbody:Ume,link:Rme,x:Vme,y:Gme},O4="forces",Wme=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],UHt=["static","iterations"],Kqe=["x","y","vx","vy"];qme.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Kqe}]};Dt(qme,et,{transform(t,r){var n=this.value,o=r.changed(r.ADD_REM),i=t.modified(Wme),s=t.iterations||300;if(n?(o&&(r.modifies("index"),n.nodes(r.source)),(i||r.changed(r.MOD))&&Zqe(n,t,0,r)):(this.value=n=GHt(r.source,t),n.on("tick",VHt(r.dataflow,this)),t.static||(o=!0,n.tick()),r.modifies("index")),i||o||t.modified(UHt)||r.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!o)return r.StopPropagation}return this.finish(t,r)},finish(t,r){let n=r.dataflow;for(let l=this._argops,u=0,c=l.length,f;u<c;++u)if(f=l[u],!(f.name!==O4||f.op._argval.force!=="link")){for(var o=f.op._argops,i=0,s=o.length,a;i<s;++i)if(o[i].name==="links"&&(a=o[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return r.reflow(t.modified()).modifies(Kqe)}})});function YHt(t,r){return t.parent===r.parent?1:2}function XHt(t){return t.reduce(KHt,0)/t.length}function KHt(t,r){return t+r.x}function ZHt(t){return 1+t.reduce(QHt,0)}function QHt(t,r){return Math.max(t,r.y)}function JHt(t){for(var r;r=t.children;)t=r[0];return t}function eYt(t){for(var r;r=t.children;)t=r[r.length-1];return t}function Yme(){var t=YHt,r=1,n=1,o=!1;function i(s){var a,l=0;s.eachAfter(function(p){var h=p.children;h?(p.x=XHt(h),p.y=ZHt(h)):(p.x=a?l+=t(p,a):0,p.y=0,a=p)});var u=JHt(s),c=eYt(s),f=u.x-t(u,c)/2,d=c.x+t(c,u)/2;return s.eachAfter(o?function(p){p.x=(p.x-s.x)*r,p.y=(s.y-p.y)*n}:function(p){p.x=(p.x-f)/(d-f)*r,p.y=(1-(s.y?p.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(o=!1,r=+s[0],n=+s[1],i):o?null:[r,n]},i.nodeSize=function(s){return arguments.length?(o=!0,r=+s[0],n=+s[1],i):o?[r,n]:null},i}var Jqe=D(()=>{"use strict"});function tYt(t){var r=0,n=t.children,o=n&&n.length;if(!o)r=1;else for(;--o>=0;)r+=n[o].value;t.value=r}function eHe(){return this.eachAfter(tYt)}var tHe=D(()=>{"use strict"});function rHe(t,r){let n=-1;for(let o of this)t.call(r,o,++n,this);return this}var nHe=D(()=>{"use strict"});function oHe(t,r){for(var n=this,o=[n],i,s,a=-1;n=o.pop();)if(t.call(r,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)o.push(i[s]);return this}var iHe=D(()=>{"use strict"});function sHe(t,r){for(var n=this,o=[n],i=[],s,a,l,u=-1;n=o.pop();)if(i.push(n),s=n.children)for(a=0,l=s.length;a<l;++a)o.push(s[a]);for(;n=i.pop();)t.call(r,n,++u,this);return this}var aHe=D(()=>{"use strict"});function lHe(t,r){let n=-1;for(let o of this)if(t.call(r,o,++n,this))return o}var uHe=D(()=>{"use strict"});function cHe(t){return this.eachAfter(function(r){for(var n=+t(r.data)||0,o=r.children,i=o&&o.length;--i>=0;)n+=o[i].value;r.value=n})}var fHe=D(()=>{"use strict"});function dHe(t){return this.eachBefore(function(r){r.children&&r.children.sort(t)})}var pHe=D(()=>{"use strict"});function hHe(t){for(var r=this,n=rYt(r,t),o=[r];r!==n;)r=r.parent,o.push(r);for(var i=o.length;t!==n;)o.splice(i,0,t),t=t.parent;return o}function rYt(t,r){if(t===r)return t;var n=t.ancestors(),o=r.ancestors(),i=null;for(t=n.pop(),r=o.pop();t===r;)i=t,t=n.pop(),r=o.pop();return i}var mHe=D(()=>{"use strict"});function gHe(){for(var t=this,r=[t];t=t.parent;)r.push(t);return r}var yHe=D(()=>{"use strict"});function bHe(){return Array.from(this)}var xHe=D(()=>{"use strict"});function vHe(){var t=[];return this.eachBefore(function(r){r.children||t.push(r)}),t}var wHe=D(()=>{"use strict"});function _He(){var t=this,r=[];return t.each(function(n){n!==t&&r.push({source:n.parent,target:n})}),r}var SHe=D(()=>{"use strict"});function*CHe(){var t=this,r,n=[t],o,i,s;do for(r=n.reverse(),n=[];t=r.pop();)if(yield t,o=t.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);while(n.length)}var EHe=D(()=>{"use strict"});function $N(t,r){t instanceof Map?(t=[void 0,t],r===void 0&&(r=iYt)):r===void 0&&(r=oYt);for(var n=new S_(t),o,i=[n],s,a,l,u;o=i.pop();)if((a=r(o.data))&&(u=(a=Array.from(a)).length))for(o.children=a,l=u-1;l>=0;--l)i.push(s=a[l]=new S_(a[l])),s.parent=o,s.depth=o.depth+1;return n.eachBefore(Xme)}function nYt(){return $N(this).eachBefore(sYt)}function oYt(t){return t.children}function iYt(t){return Array.isArray(t)?t[1]:null}function sYt(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Xme(t){var r=0;do t.height=r;while((t=t.parent)&&t.height<++r)}function S_(t){this.data=t,this.depth=this.height=0,this.parent=null}var iq=D(()=>{"use strict";tHe();nHe();iHe();aHe();uHe();fHe();pHe();mHe();yHe();xHe();wHe();SHe();EHe();S_.prototype=$N.prototype={constructor:S_,count:eHe,each:rHe,eachAfter:sHe,eachBefore:oHe,find:lHe,sum:cHe,sort:dHe,path:hHe,ancestors:gHe,descendants:bHe,leaves:vHe,links:_He,copy:nYt,[Symbol.iterator]:CHe}});function THe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function AHe(t){for(var r=t.length,n,o;r;)o=Math.random()*r--|0,n=t[r],t[r]=t[o],t[o]=n;return t}var Kme=D(()=>{"use strict"});function kHe(t){for(var r=0,n=(t=AHe(Array.from(t))).length,o=[],i,s;r<n;)i=t[r],s&&IHe(s,i)?++r:(s=lYt(o=aYt(o,i)),r=0);return s}function aYt(t,r){var n,o;if(Zme(r,t))return[r];for(n=0;n<t.length;++n)if(sq(r,t[n])&&Zme(F4(t[n],r),t))return[t[n],r];for(n=0;n<t.length-1;++n)for(o=n+1;o<t.length;++o)if(sq(F4(t[n],t[o]),r)&&sq(F4(t[n],r),t[o])&&sq(F4(t[o],r),t[n])&&Zme(DHe(t[n],t[o],r),t))return[t[n],t[o],r];throw new Error}function sq(t,r){var n=t.r-r.r,o=r.x-t.x,i=r.y-t.y;return n<0||n*n<o*o+i*i}function IHe(t,r){var n=t.r-r.r+Math.max(t.r,r.r,1)*1e-9,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function Zme(t,r){for(var n=0;n<r.length;++n)if(!IHe(t,r[n]))return!1;return!0}function lYt(t){switch(t.length){case 1:return uYt(t[0]);case 2:return F4(t[0],t[1]);case 3:return DHe(t[0],t[1],t[2])}}function uYt(t){return{x:t.x,y:t.y,r:t.r}}function F4(t,r){var n=t.x,o=t.y,i=t.r,s=r.x,a=r.y,l=r.r,u=s-n,c=a-o,f=l-i,d=Math.sqrt(u*u+c*c);return{x:(n+s+u/d*f)/2,y:(o+a+c/d*f)/2,r:(d+i+l)/2}}function DHe(t,r,n){var o=t.x,i=t.y,s=t.r,a=r.x,l=r.y,u=r.r,c=n.x,f=n.y,d=n.r,p=o-a,h=o-c,m=i-l,g=i-f,y=u-s,b=d-s,x=o*o+i*i-s*s,v=x-a*a-l*l+u*u,w=x-c*c-f*f+d*d,_=h*m-p*g,C=(m*w-g*v)/(_*2)-o,S=(g*y-m*b)/_,E=(h*v-p*w)/(_*2)-i,A=(p*b-h*y)/_,N=S*S+A*A-1,k=2*(s+C*S+E*A),R=C*C+E*E-s*s,I=-(N?(k+Math.sqrt(k*k-4*N*R))/(2*N):R/k);return{x:o+C+S*I,y:i+E+A*I,r:I}}var NHe=D(()=>{"use strict";Kme()});function OHe(t,r,n){var o=t.x-r.x,i,s,a=t.y-r.y,l,u,c=o*o+a*a;c?(s=r.r+n.r,s*=s,u=t.r+n.r,u*=u,s>u?(i=(c+u-s)/(2*c),l=Math.sqrt(Math.max(0,u/c-i*i)),n.x=t.x-i*o-l*a,n.y=t.y-i*a+l*o):(i=(c+s-u)/(2*c),l=Math.sqrt(Math.max(0,s/c-i*i)),n.x=r.x+i*o-l*a,n.y=r.y+i*a+l*o)):(n.x=r.x+n.r,n.y=r.y)}function FHe(t,r){var n=t.r+r.r-1e-6,o=r.x-t.x,i=r.y-t.y;return n>0&&n*n>o*o+i*i}function RHe(t){var r=t._,n=t.next._,o=r.r+n.r,i=(r.x*n.r+n.x*r.r)/o,s=(r.y*n.r+n.y*r.r)/o;return i*i+s*s}function aq(t){this._=t,this.next=null,this.previous=null}function MHe(t){if(!(i=(t=THe(t)).length))return 0;var r,n,o,i,s,a,l,u,c,f,d;if(r=t[0],r.x=0,r.y=0,!(i>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(i>2))return r.r+n.r;OHe(n,r,o=t[2]),r=new aq(r),n=new aq(n),o=new aq(o),r.next=o.previous=n,n.next=r.previous=o,o.next=n.previous=r;e:for(l=3;l<i;++l){OHe(r._,n._,o=t[l]),o=new aq(o),u=n.next,c=r.previous,f=n._.r,d=r._.r;do if(f<=d){if(FHe(u._,o._)){n=u,r.next=n,n.previous=r,--l;continue e}f+=u._.r,u=u.next}else{if(FHe(c._,o._)){r=c,r.next=n,n.previous=r,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(o.previous=r,o.next=n,r.next=n.previous=n=o,s=RHe(r);(o=o.next)!==n;)(a=RHe(o))<s&&(r=o,s=a);n=r.next}for(r=[n._],o=n;(o=o.next)!==n;)r.push(o._);for(o=kHe(r),l=0;l<i;++l)r=t[l],r.x-=o.x,r.y-=o.y;return o.r}var PHe=D(()=>{"use strict";Kme();NHe()});function jHe(t){return t==null?null:zN(t)}function zN(t){if(typeof t!="function")throw new Error;return t}var lq=D(()=>{"use strict"});function av(){return 0}function C_(t){return function(){return t}}var Qme=D(()=>{"use strict"});function cYt(t){return Math.sqrt(t.value)}function ege(){var t=null,r=1,n=1,o=av;function i(s){return s.x=r/2,s.y=n/2,t?s.eachBefore(LHe(t)).eachAfter(Jme(o,.5)).eachBefore(BHe(1)):s.eachBefore(LHe(cYt)).eachAfter(Jme(av,1)).eachAfter(Jme(o,s.r/Math.min(r,n))).eachBefore(BHe(Math.min(r,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=jHe(s),i):t},i.size=function(s){return arguments.length?(r=+s[0],n=+s[1],i):[r,n]},i.padding=function(s){return arguments.length?(o=typeof s=="function"?s:C_(+s),i):o},i}function LHe(t){return function(r){r.children||(r.r=Math.max(0,+t(r)||0))}}function Jme(t,r){return function(n){if(o=n.children){var o,i,s=o.length,a=t(n)*r||0,l;if(a)for(i=0;i<s;++i)o[i].r+=a;if(l=MHe(o),a)for(i=0;i<s;++i)o[i].r-=a;n.r=l+a}}}function BHe(t){return function(r){var n=r.parent;r.r*=t,n&&(r.x=n.x+t*r.x,r.y=n.y+t*r.y)}}var $He=D(()=>{"use strict";PHe();lq();Qme()});function uq(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}var tge=D(()=>{"use strict"});function im(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(o-r)/t.value;++l<u;)a=s[l],a.y0=n,a.y1=i,a.x0=r,a.x1=r+=a.value*c}var UN=D(()=>{"use strict"});function rge(){var t=1,r=1,n=0,o=!1;function i(a){var l=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=r/l,a.eachBefore(s(r,l)),o&&a.eachBefore(uq),a}function s(a,l){return function(u){u.children&&im(u,u.x0,a*(u.depth+1)/l,u.x1,a*(u.depth+2)/l);var c=u.x0,f=u.y0,d=u.x1-n,p=u.y1-n;d<c&&(c=d=(c+d)/2),p<f&&(f=p=(f+p)/2),u.x0=c,u.y0=f,u.x1=d,u.y1=p}}return i.round=function(a){return arguments.length?(o=!!a,i):o},i.size=function(a){return arguments.length?(t=+a[0],r=+a[1],i):[t,r]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var zHe=D(()=>{"use strict";tge();UN()});function dYt(t){return t.id}function pYt(t){return t.parentId}function cq(){var t=dYt,r=pYt;function n(o){var i=Array.from(o),s=i.length,a,l,u,c,f,d,p,h=new Map;for(l=0;l<s;++l)a=i[l],f=i[l]=new S_(a),(d=t(a,l,o))!=null&&(d+="")&&(p=f.id=d,h.set(p,h.has(p)?UHe:f)),(d=r(a,l,o))!=null&&(d+="")&&(f.parent=d);for(l=0;l<s;++l)if(f=i[l],d=f.parent){if(c=h.get(d),!c)throw new Error("missing: "+d);if(c===UHe)throw new Error("ambiguous: "+d);c.children?c.children.push(f):c.children=[f],f.parent=c}else{if(u)throw new Error("multiple roots");u=f}if(!u)throw new Error("no root");if(u.parent=fYt,u.eachBefore(function(m){m.depth=m.parent.depth+1,--s}).eachBefore(Xme),u.parent=null,s>0)throw new Error("cycle");return u}return n.id=function(o){return arguments.length?(t=zN(o),n):t},n.parentId=function(o){return arguments.length?(r=zN(o),n):r},n}var fYt,UHe,VHe=D(()=>{"use strict";lq();iq();fYt={depth:-1},UHe={}});function hYt(t,r){return t.parent===r.parent?1:2}function nge(t){var r=t.children;return r?r[0]:t.t}function oge(t){var r=t.children;return r?r[r.length-1]:t.t}function mYt(t,r,n){var o=n/(r.i-t.i);r.c-=o,r.s+=n,t.c+=o,r.z+=n,r.m+=n}function gYt(t){for(var r=0,n=0,o=t.children,i=o.length,s;--i>=0;)s=o[i],s.z+=r,s.m+=r,r+=s.s+(n+=s.c)}function yYt(t,r,n){return t.a.parent===r.parent?t.a:n}function fq(t,r){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}function bYt(t){for(var r=new fq(t,0),n,o=[r],i,s,a,l;n=o.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),a=l-1;a>=0;--a)o.push(i=n.children[a]=new fq(s[a],a)),i.parent=n;return(r.parent=new fq(null,0)).children=[r],r}function ige(){var t=hYt,r=1,n=1,o=null;function i(c){var f=bYt(c);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(a),o)c.eachBefore(u);else{var d=c,p=c,h=c;c.eachBefore(function(x){x.x<d.x&&(d=x),x.x>p.x&&(p=x),x.depth>h.depth&&(h=x)});var m=d===p?1:t(d,p)/2,g=m-d.x,y=r/(p.x+m+g),b=n/(h.depth||1);c.eachBefore(function(x){x.x=(x.x+g)*y,x.y=x.depth*b})}return c}function s(c){var f=c.children,d=c.parent.children,p=c.i?d[c.i-1]:null;if(f){gYt(c);var h=(f[0].z+f[f.length-1].z)/2;p?(c.z=p.z+t(c._,p._),c.m=c.z-h):c.z=h}else p&&(c.z=p.z+t(c._,p._));c.parent.A=l(c,p,c.parent.A||d[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,f,d){if(f){for(var p=c,h=c,m=f,g=p.parent.children[0],y=p.m,b=h.m,x=m.m,v=g.m,w;m=oge(m),p=nge(p),m&&p;)g=nge(g),h=oge(h),h.a=c,w=m.z+x-p.z-y+t(m._,p._),w>0&&(mYt(yYt(m,c,d),c,w),y+=w,b+=w),x+=m.m,y+=p.m,v+=g.m,b+=h.m;m&&!oge(h)&&(h.t=m,h.m+=x-b),p&&!nge(g)&&(g.t=p,g.m+=y-v,d=c)}return d}function u(c){c.x*=r,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(o=!1,r=+c[0],n=+c[1],i):o?null:[r,n]},i.nodeSize=function(c){return arguments.length?(o=!0,r=+c[0],n=+c[1],i):o?[r,n]:null},i}var GHe=D(()=>{"use strict";iq();fq.prototype=Object.create(S_.prototype)});function lv(t,r,n,o,i){for(var s=t.children,a,l=-1,u=s.length,c=t.value&&(i-n)/t.value;++l<u;)a=s[l],a.x0=r,a.x1=o,a.y0=n,a.y1=n+=a.value*c}var R4=D(()=>{"use strict"});function age(t,r,n,o,i,s){for(var a=[],l=r.children,u,c,f=0,d=0,p=l.length,h,m,g=r.value,y,b,x,v,w,_,C;f<p;){h=i-n,m=s-o;do y=l[d++].value;while(!y&&d<p);for(b=x=y,_=Math.max(m/h,h/m)/(g*t),C=y*y*_,w=Math.max(x/C,C/b);d<p;++d){if(y+=c=l[d].value,c<b&&(b=c),c>x&&(x=c),C=y*y*_,v=Math.max(x/C,C/b),v>w){y-=c;break}w=v}a.push(u={value:y,dice:h<m,children:l.slice(f,d)}),u.dice?im(u,n,o,i,g?o+=m*y/g:s):lv(u,n,o,g?n+=h*y/g:i,s),g-=y,f=d}return a}var sge,M4,dq=D(()=>{"use strict";UN();R4();sge=(1+Math.sqrt(5))/2;M4=function t(r){function n(o,i,s,a,l){age(r,o,i,s,a,l)}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(sge)});function lge(){var t=M4,r=!1,n=1,o=1,i=[0],s=av,a=av,l=av,u=av,c=av;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=o,p.eachBefore(d),i=[0],r&&p.eachBefore(uq),p}function d(p){var h=i[p.depth],m=p.x0+h,g=p.y0+h,y=p.x1-h,b=p.y1-h;y<m&&(m=y=(m+y)/2),b<g&&(g=b=(g+b)/2),p.x0=m,p.y0=g,p.x1=y,p.y1=b,p.children&&(h=i[p.depth+1]=s(p)/2,m+=c(p)-h,g+=a(p)-h,y-=l(p)-h,b-=u(p)-h,y<m&&(m=y=(m+y)/2),b<g&&(g=b=(g+b)/2),t(p,m,g,y,b))}return f.round=function(p){return arguments.length?(r=!!p,f):r},f.size=function(p){return arguments.length?(n=+p[0],o=+p[1],f):[n,o]},f.tile=function(p){return arguments.length?(t=zN(p),f):t},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(s=typeof p=="function"?p:C_(+p),f):s},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:C_(+p),f):a},f.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:C_(+p),f):l},f.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:C_(+p),f):u},f.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:C_(+p),f):c},f}var WHe=D(()=>{"use strict";tge();dq();lq();Qme()});function uge(t,r,n,o,i){var s=t.children,a,l=s.length,u,c=new Array(l+1);for(c[0]=u=a=0;a<l;++a)c[a+1]=u+=s[a].value;f(0,l,t.value,r,n,o,i);function f(d,p,h,m,g,y,b){if(d>=p-1){var x=s[d];x.x0=m,x.y0=g,x.x1=y,x.y1=b;return}for(var v=c[d],w=h/2+v,_=d+1,C=p-1;_<C;){var S=_+C>>>1;c[S]<w?_=S+1:C=S}w-c[_-1]<c[_]-w&&d+1<_&&--_;var E=c[_]-v,A=h-E;if(y-m>b-g){var N=h?(m*A+y*E)/h:y;f(d,_,E,m,g,N,b),f(_,p,A,N,g,y,b)}else{var k=h?(g*A+b*E)/h:b;f(d,_,E,m,g,y,k),f(_,p,A,m,k,y,b)}}}var qHe=D(()=>{"use strict"});function cge(t,r,n,o,i){(t.depth&1?lv:im)(t,r,n,o,i)}var HHe=D(()=>{"use strict";UN();R4()});var fge,YHe=D(()=>{"use strict";UN();R4();dq();fge=function t(r){function n(o,i,s,a,l){if((u=o._squarify)&&u.ratio===r)for(var u,c,f,d,p=-1,h,m=u.length,g=o.value;++p<m;){for(c=u[p],f=c.children,d=c.value=0,h=f.length;d<h;++d)c.value+=f[d].value;c.dice?im(c,i,s,a,g?s+=(l-s)*c.value/g:l):lv(c,i,s,g?i+=(a-i)*c.value/g:a,l),g-=c.value}else o._squarify=u=age(r,o,i,s,a,l),u.ratio=r}return n.ratio=function(o){return t((o=+o)>1?o:1)},n}(sge)});var XHe=D(()=>{"use strict";Jqe();iq();$He();zHe();VHe();GHe();WHe();qHe();UN();R4();HHe();dq();YHe()});var Cge={};fn(Cge,{nest:()=>yge,pack:()=>bge,partition:()=>xge,stratify:()=>vge,tree:()=>wge,treelinks:()=>_ge,treemap:()=>Sge});function dge(t,r,n){let o={};return t.each(i=>{let s=i.data;n(s)&&(o[r(s)]=i)}),t.lookup=o,t}function yge(t){et.call(this,null,t)}function vYt(){let t=[],r={entries:i=>o(n(i,0),0),key:i=>(t.push(i),r)};function n(i,s){if(s>=t.length)return i;let a=i.length,l=t[s++],u={},c={},f=-1,d,p,h;for(;++f<a;)d=l(p=i[f])+"",(h=u[d])?h.push(p):u[d]=[p];for(d in u)c[d]=n(u[d],s);return c}function o(i,s){if(++s>t.length)return i;let a=[];for(let l in i)a.push({key:l,values:o(i[l],s)});return a}return r}function uv(t){et.call(this,null,t)}function _Yt(t,r,n){for(let o,i=0,s=r.length;i<s;++i)o=r[i],o in n&&t[o](n[o])}function SYt(t,r,n){let o=t.data,i=r.length-1;for(let s=0;s<i;++s)o[n[s]]=t[r[s]];o[n[i]]=t.children?t.children.length:0}function bge(t){uv.call(this,t)}function xge(t){uv.call(this,t)}function vge(t){et.call(this,null,t)}function wge(t){uv.call(this,t)}function _ge(t){et.call(this,[],t)}function Sge(t){uv.call(this,t)}var xYt,wYt,pge,hge,KHe,mge,ZHe,gge,QHe=D(()=>{"use strict";qa();Os();XHe();yge.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};xYt=t=>t.values;Dt(yge,et,{transform(t,r){r.source||pt("Nest transform requires an upstream data source.");var n=t.generate,o=t.modified(),i=r.clone(),s=this.value;return(!s||o||r.changed())&&(s&&s.each(a=>{a.children&&rE(a.data)&&i.rem.push(a.data)}),this.value=s=$N({values:Lr(t.keys).reduce((a,l)=>(a.key(l),a),vYt()).entries(i.source)},xYt),n&&s.each(a=>{a.children&&(a=Dn(a.data),i.add.push(a),i.source.push(a))}),dge(s,xr,xr)),i.source.root=s,i}});wYt=(t,r)=>t.parent===r.parent?1:2;Dt(uv,et,{transform(t,r){(!r.source||!r.source.root)&&pt(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(t.method),o=this.fields,i=r.source.root,s=t.as||o;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(L0(t.sort,a=>a.data)),_Yt(n,this.params,t),n.separation&&n.separation(t.separation!==!1?wYt:T0);try{this.value=n(i)}catch(a){pt(a)}return i.each(a=>SYt(a,o,s)),r.reflow(t.modified()).modifies(s).modifies("leaf")}});pge=["x","y","r","depth","children"];bge.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:pge.length,default:pge}]};Dt(bge,uv,{layout:ege,params:["radius","size","padding"],fields:pge});hge=["x0","y0","x1","y1","depth","children"];xge.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hge.length,default:hge}]};Dt(xge,uv,{layout:rge,params:["size","round","padding"],fields:hge});vge.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Dt(vge,et,{transform(t,r){r.source||pt("Stratify transform requires an upstream data source.");let n=this.value,o=t.modified(),i=r.fork(r.ALL).materialize(r.SOURCE),s=!n||o||r.changed(r.ADD_REM)||r.modified(t.key.fields)||r.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?dge(cq().id(t.key).parentId(t.parentKey)(i.source),t.key,A0):dge(cq()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});KHe={tidy:ige,cluster:Yme},mge=["x","y","depth","children"];wge.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:mge.length,default:mge}]};Dt(wge,uv,{layout(t){let r=t||"tidy";if(Rr(KHe,r))return KHe[r]();pt("Unrecognized Tree layout method: "+r)},params:["size","nodeSize"],fields:mge});_ge.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Dt(_ge,et,{transform(t,r){let n=this.value,o=r.source&&r.source.root,i=r.fork(r.NO_SOURCE),s={};return o||pt("TreeLinks transform requires a tree data source."),r.changed(r.ADD_REM)?(i.rem=n,r.visit(r.SOURCE,a=>s[xr(a)]=1),o.each(a=>{let l=a.data,u=a.parent&&a.parent.data;u&&s[xr(l)]&&s[xr(u)]&&i.add.push(Dn({source:u,target:l}))}),this.value=i.add):r.changed(r.MOD)&&(r.visit(r.MOD,a=>s[xr(a)]=1),n.forEach(a=>{(s[xr(a.source)]||s[xr(a.target)])&&i.mod.push(a)})),i}});ZHe={binary:uge,dice:im,slice:lv,slicedice:cge,squarify:M4,resquarify:fge},gge=["x0","y0","x1","y1","depth","children"];Sge.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gge.length,default:gge}]};Dt(Sge,uv,{layout(){let t=lge();return t.ratio=r=>{let n=t.tile();n.ratio&&t.tile(n.ratio(r))},t.method=r=>{Rr(ZHe,r)?t.tile(ZHe[r]):pt("Unrecognized Treemap layout method: "+r)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:gge})});function Age(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function JHe(){return new Age}var Ege,Tge,uT,CYt,Ep,eYe=D(()=>{"use strict";Ege=Math.PI,Tge=2*Ege,uT=1e-6,CYt=Tge-uT;Age.prototype=JHe.prototype={constructor:Age,moveTo:function(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function(t,r,n,o){this._+="Q"+ +t+","+ +r+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(t,r,n,o,i,s){this._+="C"+ +t+","+ +r+","+ +n+","+ +o+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,r,n,o,i){t=+t,r=+r,n=+n,o=+o,i=+i;var s=this._x1,a=this._y1,l=n-t,u=o-r,c=s-t,f=a-r,d=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=r);else if(d>uT)if(!(Math.abs(f*l-u*c)>uT)||!i)this._+="L"+(this._x1=t)+","+(this._y1=r);else{var p=n-s,h=o-a,m=l*l+u*u,g=p*p+h*h,y=Math.sqrt(m),b=Math.sqrt(d),x=i*Math.tan((Ege-Math.acos((m+d-g)/(2*y*b)))/2),v=x/b,w=x/y;Math.abs(v-1)>uT&&(this._+="L"+(t+v*c)+","+(r+v*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>c*h)+","+(this._x1=t+w*l)+","+(this._y1=r+w*u)}},arc:function(t,r,n,o,i,s){t=+t,r=+r,n=+n,s=!!s;var a=n*Math.cos(o),l=n*Math.sin(o),u=t+a,c=r+l,f=1^s,d=s?o-i:i-o;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+c:(Math.abs(this._x1-u)>uT||Math.abs(this._y1-c)>uT)&&(this._+="L"+u+","+c),n&&(d<0&&(d=d%Tge+Tge),d>CYt?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(r-l)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c):d>uT&&(this._+="A"+n+","+n+",0,"+ +(d>=Ege)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=r+n*Math.sin(i))))},rect:function(t,r,n,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};Ep=JHe});var VN=D(()=>{"use strict";eYe()});function Gn(t){return function(){return t}}var P4=D(()=>{"use strict"});function rYe(t){return t>1?0:t<-1?T_:Math.acos(t)}function Ige(t){return t>=1?j4:t<=-1?-j4:Math.asin(t)}var kge,Ol,E_,tYe,pq,sm,cT,el,T_,j4,hq,mq=D(()=>{"use strict";kge=Math.abs,Ol=Math.atan2,E_=Math.cos,tYe=Math.max,pq=Math.min,sm=Math.sin,cT=Math.sqrt,el=1e-12,T_=Math.PI,j4=T_/2,hq=2*T_});function EYt(t){return t.innerRadius}function TYt(t){return t.outerRadius}function AYt(t){return t.startAngle}function kYt(t){return t.endAngle}function IYt(t){return t&&t.padAngle}function DYt(t,r,n,o,i,s,a,l){var u=n-t,c=o-r,f=a-i,d=l-s,p=d*u-f*c;if(!(p*p<el))return p=(f*(r-s)-d*(t-i))/p,[t+p*u,r+p*c]}function gq(t,r,n,o,i,s,a){var l=t-n,u=r-o,c=(a?s:-s)/cT(l*l+u*u),f=c*u,d=-c*l,p=t+f,h=r+d,m=n+f,g=o+d,y=(p+m)/2,b=(h+g)/2,x=m-p,v=g-h,w=x*x+v*v,_=i-s,C=p*g-m*h,S=(v<0?-1:1)*cT(tYe(0,_*_*w-C*C)),E=(C*v-x*S)/w,A=(-C*x-v*S)/w,N=(C*v+x*S)/w,k=(-C*x+v*S)/w,R=E-y,I=A-b,L=N-y,j=k-b;return R*R+I*I>L*L+j*j&&(E=N,A=k),{cx:E,cy:A,x01:-f,y01:-d,x11:E*(i/_-1),y11:A*(i/_-1)}}function Dge(){var t=EYt,r=TYt,n=Gn(0),o=null,i=AYt,s=kYt,a=IYt,l=null;function u(){var c,f,d=+t.apply(this,arguments),p=+r.apply(this,arguments),h=i.apply(this,arguments)-j4,m=s.apply(this,arguments)-j4,g=kge(m-h),y=m>h;if(l||(l=c=Ep()),p<d&&(f=p,p=d,d=f),!(p>el))l.moveTo(0,0);else if(g>hq-el)l.moveTo(p*E_(h),p*sm(h)),l.arc(0,0,p,h,m,!y),d>el&&(l.moveTo(d*E_(m),d*sm(m)),l.arc(0,0,d,m,h,y));else{var b=h,x=m,v=h,w=m,_=g,C=g,S=a.apply(this,arguments)/2,E=S>el&&(o?+o.apply(this,arguments):cT(d*d+p*p)),A=pq(kge(p-d)/2,+n.apply(this,arguments)),N=A,k=A,R,I;if(E>el){var L=Ige(E/d*sm(S)),j=Ige(E/p*sm(S));(_-=L*2)>el?(L*=y?1:-1,v+=L,w-=L):(_=0,v=w=(h+m)/2),(C-=j*2)>el?(j*=y?1:-1,b+=j,x-=j):(C=0,b=x=(h+m)/2)}var M=p*E_(b),V=p*sm(b),G=d*E_(w),U=d*sm(w);if(A>el){var Y=p*E_(x),X=p*sm(x),pe=d*E_(v),$=d*sm(v),O;if(g<T_&&(O=DYt(M,V,pe,$,Y,X,G,U))){var z=M-O[0],q=V-O[1],ee=Y-O[0],ae=X-O[1],Q=1/sm(rYe((z*ee+q*ae)/(cT(z*z+q*q)*cT(ee*ee+ae*ae)))/2),le=cT(O[0]*O[0]+O[1]*O[1]);N=pq(A,(d-le)/(Q-1)),k=pq(A,(p-le)/(Q+1))}}C>el?k>el?(R=gq(pe,$,M,V,p,k,y),I=gq(Y,X,G,U,p,k,y),l.moveTo(R.cx+R.x01,R.cy+R.y01),k<A?l.arc(R.cx,R.cy,k,Ol(R.y01,R.x01),Ol(I.y01,I.x01),!y):(l.arc(R.cx,R.cy,k,Ol(R.y01,R.x01),Ol(R.y11,R.x11),!y),l.arc(0,0,p,Ol(R.cy+R.y11,R.cx+R.x11),Ol(I.cy+I.y11,I.cx+I.x11),!y),l.arc(I.cx,I.cy,k,Ol(I.y11,I.x11),Ol(I.y01,I.x01),!y))):(l.moveTo(M,V),l.arc(0,0,p,b,x,!y)):l.moveTo(M,V),!(d>el)||!(_>el)?l.lineTo(G,U):N>el?(R=gq(G,U,Y,X,d,-N,y),I=gq(M,V,pe,$,d,-N,y),l.lineTo(R.cx+R.x01,R.cy+R.y01),N<A?l.arc(R.cx,R.cy,N,Ol(R.y01,R.x01),Ol(I.y01,I.x01),!y):(l.arc(R.cx,R.cy,N,Ol(R.y01,R.x01),Ol(R.y11,R.x11),!y),l.arc(0,0,d,Ol(R.cy+R.y11,R.cx+R.x11),Ol(I.cy+I.y11,I.cx+I.x11),y),l.arc(I.cx,I.cy,N,Ol(I.y11,I.x11),Ol(I.y01,I.x01),!y))):l.arc(0,0,d,w,v,y)}if(l.closePath(),c)return l=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +r.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-T_/2;return[E_(f)*c,sm(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Gn(+c),u):t},u.outerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:Gn(+c),u):r},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Gn(+c),u):n},u.padRadius=function(c){return arguments.length?(o=c==null?null:typeof c=="function"?c:Gn(+c),u):o},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Gn(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Gn(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Gn(+c),u):a},u.context=function(c){return arguments.length?(l=c??null,u):l},u}var nYe=D(()=>{"use strict";VN();P4();mq()});function yq(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}var j8n,Nge=D(()=>{"use strict";j8n=Array.prototype.slice});function oYe(t){this._context=t}function fT(t){return new oYe(t)}var bq=D(()=>{"use strict";oYe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}}});function xq(t){return t[0]}function vq(t){return t[1]}var Oge=D(()=>{"use strict"});function L4(t,r){var n=Gn(!0),o=null,i=fT,s=null;t=typeof t=="function"?t:t===void 0?xq:Gn(t),r=typeof r=="function"?r:r===void 0?vq:Gn(r);function a(l){var u,c=(l=yq(l)).length,f,d=!1,p;for(o==null&&(s=i(p=Ep())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(f,u,l),+r(f,u,l));if(p)return s=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Gn(+l),a):t},a.y=function(l){return arguments.length?(r=typeof l=="function"?l:Gn(+l),a):r},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Gn(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,o!=null&&(s=i(o)),a):i},a.context=function(l){return arguments.length?(l==null?o=s=null:s=i(o=l),a):o},a}var Fge=D(()=>{"use strict";VN();Nge();P4();bq();Oge()});function wq(t,r,n){var o=null,i=Gn(!0),s=null,a=fT,l=null;t=typeof t=="function"?t:t===void 0?xq:Gn(+t),r=typeof r=="function"?r:r===void 0?Gn(0):Gn(+r),n=typeof n=="function"?n:n===void 0?vq:Gn(+n);function u(f){var d,p,h,m=(f=yq(f)).length,g,y=!1,b,x=new Array(m),v=new Array(m);for(s==null&&(l=a(b=Ep())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)p=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=d-1;h>=p;--h)l.point(x[h],v[h]);l.lineEnd(),l.areaEnd()}y&&(x[d]=+t(g,d,f),v[d]=+r(g,d,f),l.point(o?+o(g,d,f):x[d],n?+n(g,d,f):v[d]))}if(b)return l=null,b+""||null}function c(){return L4().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Gn(+f),o=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Gn(+f),u):t},u.x1=function(f){return arguments.length?(o=f==null?null:typeof f=="function"?f:Gn(+f),u):o},u.y=function(f){return arguments.length?(r=typeof f=="function"?f:Gn(+f),n=null,u):r},u.y0=function(f){return arguments.length?(r=typeof f=="function"?f:Gn(+f),u):r},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Gn(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(r)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(o).y(r)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Gn(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}var iYe=D(()=>{"use strict";VN();Nge();P4();bq();Fge();Oge()});var sYe,aYe=D(()=>{"use strict";mq();sYe={draw:function(t,r){var n=Math.sqrt(r/T_);t.moveTo(n,0),t.arc(0,0,n,0,hq)}}});function Rge(t,r){var n=null;t=typeof t=="function"?t:Gn(t||sYe),r=typeof r=="function"?r:Gn(r===void 0?64:+r);function o(){var i;if(n||(n=i=Ep()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(i){return arguments.length?(t=typeof i=="function"?i:Gn(i),o):t},o.size=function(i){return arguments.length?(r=typeof i=="function"?i:Gn(+i),o):r},o.context=function(i){return arguments.length?(n=i??null,o):n},o}var lYe=D(()=>{"use strict";VN();aYe();P4()});function Tp(){}var B4=D(()=>{"use strict"});function GN(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function $4(t){this._context=t}function Mge(t){return new $4(t)}var z4=D(()=>{"use strict";$4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:GN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:GN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function uYe(t){this._context=t}function Pge(t){return new uYe(t)}var cYe=D(()=>{"use strict";B4();z4();uYe.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:GN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function fYe(t){this._context=t}function jge(t){return new fYe(t)}var dYe=D(()=>{"use strict";z4();fYe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:GN(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}}});function pYe(t,r){this._basis=new $4(t),this._beta=r}var Lge,hYe=D(()=>{"use strict";z4();pYe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,r=this._y,n=t.length-1;if(n>0)for(var o=t[0],i=r[0],s=t[n]-o,a=r[n]-i,l=-1,u;++l<=n;)u=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+u*s),this._beta*r[l]+(1-this._beta)*(i+u*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,r){this._x.push(+t),this._y.push(+r)}};Lge=function t(r){function n(o){return r===1?new $4(o):new pYe(o,r)}return n.beta=function(o){return t(+o)},n}(.85)});function WN(t,r,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-r),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function _q(t,r){this._context=t,this._k=(1-r)/6}var Bge,U4=D(()=>{"use strict";_q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:WN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2,this._x1=t,this._y1=r;break;case 2:this._point=3;default:WN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Bge=function t(r){function n(o){return new _q(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Sq(t,r){this._context=t,this._k=(1-r)/6}var $ge,zge=D(()=>{"use strict";B4();U4();Sq.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:WN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};$ge=function t(r){function n(o){return new Sq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function Cq(t,r){this._context=t,this._k=(1-r)/6}var Uge,Vge=D(()=>{"use strict";U4();Cq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:WN(this,t,r);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Uge=function t(r){function n(o){return new Cq(o,r)}return n.tension=function(o){return t(+o)},n}(0)});function V4(t,r,n){var o=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>el){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);o=(o*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>el){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-r*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(o,i,s,a,t._x2,t._y2)}function mYe(t,r){this._context=t,this._alpha=r}var Gge,Eq=D(()=>{"use strict";mq();U4();mYe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3;default:V4(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Gge=function t(r){function n(o){return r?new mYe(o,r):new _q(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function gYe(t,r){this._context=t,this._alpha=r}var Wge,yYe=D(()=>{"use strict";zge();B4();Eq();gYe.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=r;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=r);break;case 2:this._point=3,this._x5=t,this._y5=r;break;default:V4(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};Wge=function t(r){function n(o){return r?new gYe(o,r):new Sq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function bYe(t,r){this._context=t,this._alpha=r}var qge,xYe=D(()=>{"use strict";Vge();Eq();bYe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){if(t=+t,r=+r,this._point){var n=this._x2-t,o=this._y2-r;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+o*o,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:V4(this,t,r);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=r}};qge=function t(r){function n(o){return r?new bYe(o,r):new Cq(o,0)}return n.alpha=function(o){return t(+o)},n}(.5)});function vYe(t){this._context=t}function Hge(t){return new vYe(t)}var wYe=D(()=>{"use strict";B4();vYe.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}}});function _Ye(t){return t<0?-1:1}function SYe(t,r,n){var o=t._x1-t._x0,i=r-t._x1,s=(t._y1-t._y0)/(o||i<0&&-0),a=(n-t._y1)/(i||o<0&&-0),l=(s*i+a*o)/(o+i);return(_Ye(s)+_Ye(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function CYe(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Yge(t,r,n){var o=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-o)/3;t._context.bezierCurveTo(o+l,i+l*r,s-l,a-l*n,s,a)}function Tq(t){this._context=t}function EYe(t){this._context=new TYe(t)}function TYe(t){this._context=t}function Xge(t){return new Tq(t)}function Kge(t){return new EYe(t)}var AYe=D(()=>{"use strict";Tq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yge(this,this._t0,CYe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Yge(this,CYe(this,n=SYe(this,t,r)),n);break;default:Yge(this,this._t0,n=SYe(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};(EYe.prototype=Object.create(Tq.prototype)).point=function(t,r){Tq.prototype.point.call(this,r,t)};TYe.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,o,i,s){this._context.bezierCurveTo(r,t,o,n,s,i)}}});function IYe(t){this._context=t}function kYe(t){var r,n=t.length-1,o,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],r=1;r<n-1;++r)i[r]=1,s[r]=4,a[r]=4*t[r]+2*t[r+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)o=i[r]/s[r-1],s[r]-=o,a[r]-=o*a[r-1];for(i[n-1]=a[n-1]/s[n-1],r=n-2;r>=0;--r)i[r]=(a[r]-i[r+1])/s[r];for(s[n-1]=(t[n]+i[n-1])/2,r=0;r<n-1;++r)s[r]=2*t[r+1]-i[r+1];return[i,s]}function Zge(t){return new IYe(t)}var DYe=D(()=>{"use strict";IYe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var o=kYe(t),i=kYe(r),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(o[0][s],i[0][s],o[1][s],i[1][s],t[a],r[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}}});function Aq(t,r){this._context=t,this._t=r}function Qge(t){return new Aq(t,.5)}function Jge(t){return new Aq(t,0)}function e0e(t){return new Aq(t,1)}var NYe=D(()=>{"use strict";Aq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}}});var OYe=D(()=>{"use strict";nYe();iYe();Fge();lYe();cYe();dYe();z4();hYe();zge();Vge();U4();yYe();xYe();Eq();wYe();bq();AYe();DYe();NYe()});function MYe(t){return new Function("d","return {"+t.map(function(r,n){return JSON.stringify(r)+": d["+n+'] || ""'}).join(",")+"}")}function NYt(t,r){var n=MYe(t);return function(o,i){return r(n(o),i,t)}}function RYe(t){var r=Object.create(null),n=[];return t.forEach(function(o){for(var i in o)i in r||n.push(r[i]=i)}),n}function tf(t,r){var n=t+"",o=n.length;return o<r?new Array(r-o+1).join(0)+n:n}function OYt(t){return t<0?"-"+tf(-t,6):t>9999?"+"+tf(t,6):tf(t,4)}function FYt(t){var r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":OYt(t.getUTCFullYear(),4)+"-"+tf(t.getUTCMonth()+1,2)+"-"+tf(t.getUTCDate(),2)+(i?"T"+tf(r,2)+":"+tf(n,2)+":"+tf(o,2)+"."+tf(i,3)+"Z":o?"T"+tf(r,2)+":"+tf(n,2)+":"+tf(o,2)+"Z":n||r?"T"+tf(r,2)+":"+tf(n,2)+"Z":"")}function o0e(t){var r=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function o(d,p){var h,m,g=i(d,function(y,b){if(h)return h(y,b-1);m=y,h=p?NYt(y,p):MYe(y)});return g.columns=m||[],g}function i(d,p){var h=[],m=d.length,g=0,y=0,b,x=m<=0,v=!1;d.charCodeAt(m-1)===G4&&--m,d.charCodeAt(m-1)===n0e&&--m;function w(){if(x)return t0e;if(v)return v=!1,FYe;var C,S=g,E;if(d.charCodeAt(S)===r0e){for(;g++<m&&d.charCodeAt(g)!==r0e||d.charCodeAt(++g)===r0e;);return(C=g)>=m?x=!0:(E=d.charCodeAt(g++))===G4?v=!0:E===n0e&&(v=!0,d.charCodeAt(g)===G4&&++g),d.slice(S+1,C-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(C=g++))===G4)v=!0;else if(E===n0e)v=!0,d.charCodeAt(g)===G4&&++g;else if(E!==n)continue;return d.slice(S,C)}return x=!0,d.slice(S,m)}for(;(b=w())!==t0e;){for(var _=[];b!==FYe&&b!==t0e;)_.push(b),b=w();p&&(_=p(_,y++))==null||h.push(_)}return h}function s(d,p){return d.map(function(h){return p.map(function(m){return f(h[m])}).join(t)})}function a(d,p){return p==null&&(p=RYe(d)),[p.map(f).join(t)].concat(s(d,p)).join(`
`)}function l(d,p){return p==null&&(p=RYe(d)),s(d,p).join(`
`)}function u(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?FYt(d):r.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:o,parseRows:i,format:a,formatBody:l,formatRows:u,formatRow:c,formatValue:f}}var FYe,t0e,r0e,G4,n0e,PYe=D(()=>{"use strict";FYe={},t0e={},r0e=34,G4=10,n0e=13});var jYe=D(()=>{"use strict";PYe()});function LYe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function dT(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}var W4=D(()=>{"use strict"});function cy(t){return t=dT(Math.abs(t)),t?t[1]:NaN}var q4=D(()=>{"use strict";W4()});function BYe(t,r){return function(n,o){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>o&&(l=Math.max(1,o-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>o));)l=t[a=(a+1)%t.length];return s.reverse().join(r)}}var $Ye=D(()=>{"use strict"});function zYe(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var UYe=D(()=>{"use strict"});function cv(t){if(!(r=RYt.exec(t)))throw new Error("invalid format: "+t);var r;return new kq({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function kq(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}var RYt,i0e=D(()=>{"use strict";RYt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;cv.prototype=kq.prototype;kq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function VYe(t){e:for(var r=t.length,n=1,o=-1,i;n<r;++n)switch(t[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(i+1):t}var GYe=D(()=>{"use strict"});function WYe(t,r){var n=dT(t,r);if(!n)return t+"";var o=n[0],i=n[1],s=i-(s0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return s===a?o:s>a?o+new Array(s-a+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+dT(t,Math.max(0,r+s-1))[0]}var s0e,a0e=D(()=>{"use strict";W4()});function l0e(t,r){var n=dT(t,r);if(!n)return t+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var qYe=D(()=>{"use strict";W4()});var u0e,HYe=D(()=>{"use strict";W4();a0e();qYe();u0e={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:LYe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>l0e(t*100,r),r:l0e,s:WYe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)}});function c0e(t){return t}var YYe=D(()=>{"use strict"});function H4(t){var r=t.grouping===void 0||t.thousands===void 0?c0e:BYe(XYe.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?c0e:zYe(XYe.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d){d=cv(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,b=d.width,x=d.comma,v=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):u0e[_]||(v===void 0&&(v=12),w=!0,_="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=g==="$"?o:/[%p]/.test(_)?a:"",E=u0e[_],A=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(k){var R=C,I=S,L,j,M;if(_==="c")I=E(k)+I,k="";else{k=+k;var V=k<0||1/k<0;if(k=isNaN(k)?u:E(Math.abs(k),v),w&&(k=VYe(k)),V&&+k==0&&m!=="+"&&(V=!1),R=(V?m==="("?m:l:m==="-"||m==="("?"":m)+R,I=(_==="s"?KYe[8+s0e/3]:"")+I+(V&&m==="("?")":""),A){for(L=-1,j=k.length;++L<j;)if(M=k.charCodeAt(L),48>M||M>57){I=(M===46?i+k.slice(L+1):k.slice(L))+I,k=k.slice(0,L);break}}}x&&!y&&(k=r(k,1/0));var G=R.length+k.length+I.length,U=G<b?new Array(b-G+1).join(p):"";switch(x&&y&&(k=r(U+k,U.length?b-I.length:1/0),U=""),h){case"<":k=R+k+I+U;break;case"=":k=R+U+k+I;break;case"^":k=U.slice(0,G=U.length>>1)+R+k+I+U.slice(G);break;default:k=U+R+k+I;break}return s(k)}return N.toString=function(){return d+""},N}function f(d,p){var h=c((d=cv(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(cy(p)/3)))*3,g=Math.pow(10,-m),y=KYe[8+m/3];return function(b){return h(g*b)+y}}return{format:c,formatPrefix:f}}var XYe,KYe,f0e=D(()=>{"use strict";q4();$Ye();UYe();i0e();GYe();HYe();a0e();YYe();XYe=Array.prototype.map,KYe=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function d0e(t){return Iq=H4(t),Dq=Iq.format,Nq=Iq.formatPrefix,Iq}var Iq,Dq,Nq,ZYe=D(()=>{"use strict";f0e();d0e({thousands:",",grouping:[3],currency:["$",""]})});function p0e(t){return Math.max(0,-cy(Math.abs(t)))}var QYe=D(()=>{"use strict";q4()});function h0e(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cy(r)/3)))*3-cy(Math.abs(t)))}var JYe=D(()=>{"use strict";q4()});function m0e(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,cy(r)-cy(t))+1}var eXe=D(()=>{"use strict";q4()});var tXe=D(()=>{"use strict";ZYe();f0e();i0e();QYe();JYe();eXe()});function Y4(t){let r={};return n=>r[n]||(r[n]=t(n))}function MYt(t,r){return n=>{let o=t(n),i=o.indexOf(r);if(i<0)return o;let s=PYt(o,i),a=s<o.length?o.slice(s):"";for(;--s>i;)if(o[s]!=="0"){++s;break}return o.slice(0,s)+a}}function PYt(t,r){let n=t.lastIndexOf("e"),o;if(n>0)return n;for(n=t.length;--n>r;)if(o=t.charCodeAt(n),o>=48&&o<=57)return n+1}function nXe(t){let r=Y4(t.format),n=t.formatPrefix;return{format:r,formatPrefix:n,formatFloat(o){let i=cv(o||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return MYt(r(i),r(".1f")(1)[1])}else return r(i)},formatSpan(o,i,s,a){a=cv(a??",f");let l=ec(o,i,s),u=Math.max(Math.abs(o),Math.abs(i)),c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=h0e(l,u))||(a.precision=c),n(a,u);case"":case"e":case"g":case"p":case"r":{isNaN(c=m0e(l,u))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=p0e(l))||(a.precision=c-(a.type==="%")*2);break}}return r(a)}}}function oXe(){return g0e=nXe({format:Dq,formatPrefix:Nq})}function iXe(t){return nXe(H4(t))}function X4(t){return arguments.length?g0e=iXe(t):g0e}function rXe(t,r,n){n=n||{},un(n)||pt("Invalid time multi-format specifier: ".concat(n));let o=r(ad),i=r(Vc),s=r(Uc),a=r(oc),l=r(Js),u=r(Al),c=r(nc),f=r(Ha),d=t(n[dp]||".%L"),p=t(n[ad]||":%S"),h=t(n[Vc]||"%I:%M"),m=t(n[Uc]||"%I %p"),g=t(n[oc]||n[Tl]||"%a %d"),y=t(n[Js]||"%b %d"),b=t(n[Al]||"%B"),x=t(n[nc]||"%B"),v=t(n[Ha]||"%Y");return w=>(o(w)<w?d:i(w)<w?p:s(w)<w?h:a(w)<w?m:u(w)<w?l(w)<w?g:y:f(w)<w?c(w)<w?b:x:v)(w)}function sXe(t){let r=Y4(t.format),n=Y4(t.utcFormat);return{timeFormat:o=>Zn(o)?r(o):rXe(r,Bx,o),utcFormat:o=>Zn(o)?n(o):rXe(n,$x,o),timeParse:Y4(t.parse),utcParse:Y4(t.utcParse)}}function aXe(){return y0e=sXe({format:d_,parse:VG,utcFormat:p_,utcParse:GG})}function lXe(t){return sXe(dN(t))}function pT(t){return arguments.length?y0e=lXe(t):y0e}function Oq(t,r){let n=t?iXe(t):X4(),o=r?lXe(r):pT();return b0e(n,o)}function x0e(t,r){let n=arguments.length;return n&&n!==2&&pt("defaultLocale expects either zero or two arguments."),n?b0e(X4(t),pT(r)):b0e(X4(),pT())}function uXe(){return oXe(),aXe(),x0e()}var g0e,y0e,b0e,Fq=D(()=>{"use strict";Vo();tXe();CD();Os();hN();oXe();aXe();b0e=(t,r)=>an({},t,r)});function $Yt(t,r){return n=>({options:n||{},sanitize:UYt,load:zYt,fileAccess:!!r,file:VYt(r),http:WYt(t)})}function zYt(t,r){return Be(this,null,function*(){let n=yield this.sanitize(t,r),o=n.href;return n.localFile?this.file(o):this.http(o,r)})}function UYt(t,r){return Be(this,null,function*(){r=an({},this.options,r);let n=this.fileAccess,o={href:null},i,s,a,l=LYt.test(t.replace(BYt,""));(t==null||typeof t!="string"||!l)&&pt("Sanitize failure, invalid URI: "+Br(t));let u=jYt.test(t);return(a=r.baseURL)&&!u&&(!t.startsWith("/")&&!a.endsWith("/")&&(t="/"+t),t=a+t),s=(i=t.startsWith(cXe))||r.mode==="file"||r.mode!=="http"&&!u&&n,i?t=t.slice(cXe.length):t.startsWith("//")&&(r.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(r.defaultProtocol||"http")+":"+t),Object.defineProperty(o,"localFile",{value:!!s}),o.href=t,r.target&&(o.target=r.target+""),r.rel&&(o.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(o.crossOrigin=r.crossOrigin+""),o})}function VYt(t){return t?r=>new Promise((n,o)=>{t.readFile(r,(i,s)=>{i?o(i):n(s)})}):GYt}function GYt(){return Be(this,null,function*(){pt("No file system access.")})}function WYt(t){return t?function(r,n){return Be(this,null,function*(){let o=an({},this.options.http,n),i=n&&n.response,s=yield t(r,o);return s.ok?In(s[i])?s[i]():s.text():pt(s.status+""+s.statusText)})}:qYt}function qYt(){return Be(this,null,function*(){pt("No HTTP fetch method available.")})}function pXe(t,r){if(!t||!t.length)return"unknown";let n=t.length,o=Rq.length,i=Rq.map((s,a)=>a+1);for(let s=0,a=0,l,u;s<n;++s)for(u=r?t[s][r]:t[s],l=0;l<o;++l)if(i[l]&&HYt(u)&&!Rq[l](u)&&(i[l]=0,++a,a===Rq.length))return"string";return ZYt[i.reduce((s,a)=>s===0?a:s,0)-1]}function hXe(t,r){return r.reduce((n,o)=>(n[o]=pXe(t,o),n),{})}function fXe(t){let r=function(n,o){let i={delimiter:t};return w0e(n,o?an(o,i):i)};return r.responseType="text",r}function w0e(t,r){return r.header&&(t=r.header.map(Br).join(r.delimiter)+`
`+t),o0e(r.delimiter).parse(t+"")}function QYt(t){return typeof Buffer=="function"&&In(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function _0e(t,r){let n=r&&r.property?Ih(r.property):Qu;return un(t)&&!QYt(t)?JYt(n(t),r):n(JSON.parse(t))}function JYt(t,r){return!Hr(t)&&Jse(t)&&(t=[...t]),r&&r.copy?JSON.parse(JSON.stringify(t)):t}function mXe(t,r){let n,o,i,s;return t=_0e(t,r),r&&r.feature?(n=XC,i=r.feature):r&&r.mesh?(n=KC,i=r.mesh,s=eXt[r.filter]):pt("Missing TopoJSON feature or mesh parameter."),o=(o=t.objects[i])?n(t,o,s):pt("Invalid TopoJSON object: "+i),o&&o.features||[o]}function S0e(t,r){return arguments.length>1?(Mq[t]=r,this):Rr(Mq,t)?Mq[t]:null}function tXt(t){let r=S0e(t);return r&&r.responseType||"text"}function rXt(t,r,n,o){r=r||{};let i=S0e(r.type||"json");return i||pt("Unknown data format type: "+r.type),t=i(t,r),r.parse&&nXt(t,r.parse,n,o),Rr(t,"columns")&&delete t.columns,t}function nXt(t,r,n,o){if(!t.length)return;let i=pT();n=n||i.timeParse,o=o||i.utcParse;let s=t.columns||Object.keys(t[0]),a,l,u,c,f,d;r==="auto"&&(r=hXe(t,s)),s=Object.keys(r);let p=s.map(h=>{let m=r[h],g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?o:n)(y);if(!v0e[m])throw Error("Illegal format pattern: "+h+":"+m);return v0e[m]});for(u=0,f=t.length,d=s.length;u<f;++u)for(a=t[u],c=0;c<d;++c)l=s[c],a[l]=p[c](a[l])}var jYt,LYt,BYt,cXe,HYt,YYt,XYt,dXe,KYt,v0e,Rq,ZYt,eXt,Mq,Pq,C0e=D(()=>{"use strict";Os();jYe();P7();Fq();jYt=/^(data:|([A-Za-z]+:)?\/\/)/,LYt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,BYt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,cXe="file://";HYt=t=>t!=null&&t===t,YYt=t=>t==="true"||t==="false"||t===!0||t===!1,XYt=t=>!Number.isNaN(Date.parse(t)),dXe=t=>!Number.isNaN(+t)&&!(t instanceof Date),KYt=t=>dXe(t)&&Number.isInteger(+t),v0e={boolean:nae,integer:Nh,number:Nh,date:oae,string:iae,unknown:Qu},Rq=[YYt,KYt,dXe,XYt],ZYt=["boolean","integer","number","date"];w0e.responseType="text";_0e.responseType="json";eXt={interior:(t,r)=>t!==r,exterior:(t,r)=>t===r};mXe.responseType="json";Mq={dsv:w0e,csv:fXe(","),tsv:fXe("	"),json:_0e,topojson:mXe};Pq=$Yt(typeof fetch<"u"&&fetch,null)});function oXt(){$Xe=0}function V0e(t){return t&&t.gradient}function zXe(t,r,n){let o=t.gradient,i=t.id,s=o==="radial"?Gq:"";return i||(i=t.id="gradient_"+$Xe++,o==="radial"?(t.x1=fy(t.x1,.5),t.y1=fy(t.y1,.5),t.r1=fy(t.r1,0),t.x2=fy(t.x2,.5),t.y2=fy(t.y2,.5),t.r2=fy(t.r2,.5),s=Gq):(t.x1=fy(t.x1,0),t.y1=fy(t.y1,0),t.x2=fy(t.x2,1),t.y2=fy(t.y2,0))),r[i]=t,"url("+(n||"")+"#"+s+i+")"}function fy(t,r){return t??r}function G0e(t,r){var n=[],o;return o={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:r?r[0]:1,y2:r?r[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),o}}}function W0e(t,r,n){var o=Rr(gXe,t)&&gXe[t],i=null;return o&&(i=o.curve||o[r||"vertical"],o.tension&&n!=null&&(i=i[o.tension](n))),i}function xT(t){let r=[],n,o,i,s,a,l,u,c,f,d,p=t.slice().replace(K4[0],"###$1").split(K4[1]).slice(1);for(u=0,f=p.length;u<f;++u){for(n=p[u],o=n.slice(1).trim().replace(K4[2],"$1###$2").replace(K4[3],"$1###$2").split(K4[4]),a=n.charAt(0),i=[a],c=0,d=o.length;c<d;++c)(s=+o[c])===s&&i.push(s);if(l=iXt[a.toLowerCase()],i.length-1>l){let h=i.length;for(c=1,r.push([a].concat(i.slice(c,c+=l))),a=a==="M"?"L":a==="m"?"l":a;c<h;c+=l)r.push([a].concat(i.slice(c,c+l)))}else r.push(i)}return r}function aXt(t,r,n,o,i,s,a,l,u){let c=UXe.call(arguments);if(E0e[c])return E0e[c];let f=a*O_,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),o=Math.abs(o);let h=p*(l-t)*.5+d*(u-r)*.5,m=p*(u-r)*.5-d*(l-t)*.5,g=h*h/(n*n)+m*m/(o*o);g>1&&(g=Math.sqrt(g),n*=g,o*=g);let y=p/n,b=d/n,x=-d/o,v=p/o,w=y*l+b*u,_=x*l+v*u,C=y*t+b*r,S=x*t+v*r,A=1/((C-w)*(C-w)+(S-_)*(S-_))-.25;A<0&&(A=0);let N=Math.sqrt(A);s==i&&(N=-N);let k=.5*(w+C)-N*(S-_),R=.5*(_+S)+N*(C-w),I=Math.atan2(_-R,w-k),j=Math.atan2(S-R,C-k)-I;j<0&&s===1?j+=dy:j>0&&s===0&&(j-=dy);let M=Math.ceil(Math.abs(j/(hT+.001))),V=[];for(let G=0;G<M;++G){let U=I+G*j/M,Y=I+(G+1)*j/M;V[G]=[k,R,U,Y,n,o,d,p]}return E0e[c]=V}function lXt(t){let r=UXe.call(t);if(T0e[r])return T0e[r];var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7];let f=c*a,d=-u*l,p=u*a,h=c*l,m=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),x=.5*(s-i),v=Math.sin(x*.5),w=8/3*v*v/Math.sin(x),_=n+m-w*g,C=o+g+w*m,S=n+y,E=o+b,A=S+w*b,N=E-w*y;return T0e[r]=[f*_+d*C,p*_+h*C,f*A+d*N,p*A+h*N,f*S+d*E,p*S+h*E]}function uXt(t,r,n){let o=Ap[0]=t[0];if(o==="a"||o==="A")Ap[1]=r*t[1],Ap[2]=n*t[2],Ap[3]=t[3],Ap[4]=t[4],Ap[5]=t[5],Ap[6]=r*t[6],Ap[7]=n*t[7];else if(o==="h"||o==="H")Ap[1]=r*t[1];else if(o==="v"||o==="V")Ap[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)Ap[i]=(i%2==1?r:n)*t[i];return Ap}function YN(t,r,n,o,i,s){var a,l=null,u=0,c=0,f=0,d=0,p,h,m,g;n==null&&(n=0),o==null&&(o=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var y=0,b=r.length;y<b;++y){switch(a=r[y],(i!==1||s!==1)&&(a=uXt(a,i,s)),a[0]){case"l":u+=a[1],c+=a[2],t.lineTo(u+n,c+o);break;case"L":u=a[1],c=a[2],t.lineTo(u+n,c+o);break;case"h":u+=a[1],t.lineTo(u+n,c+o);break;case"H":u=a[1],t.lineTo(u+n,c+o);break;case"v":c+=a[1],t.lineTo(u+n,c+o);break;case"V":c=a[1],t.lineTo(u+n,c+o);break;case"m":u+=a[1],c+=a[2],t.moveTo(u+n,c+o);break;case"M":u=a[1],c=a[2],t.moveTo(u+n,c+o);break;case"c":p=u+a[5],h=c+a[6],f=u+a[3],d=c+a[4],t.bezierCurveTo(u+a[1]+n,c+a[2]+o,f+n,d+o,p+n,h+o),u=p,c=h;break;case"C":u=a[5],c=a[6],f=a[3],d=a[4],t.bezierCurveTo(a[1]+n,a[2]+o,f+n,d+o,u+n,c+o);break;case"s":p=u+a[3],h=c+a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,u+a[1]+n,c+a[2]+o,p+n,h+o),f=u+a[1],d=c+a[2],u=p,c=h;break;case"S":p=a[3],h=a[4],f=2*u-f,d=2*c-d,t.bezierCurveTo(f+n,d+o,a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"q":p=u+a[3],h=c+a[4],f=u+a[1],d=c+a[2],t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"Q":p=a[3],h=a[4],t.quadraticCurveTo(a[1]+n,a[2]+o,p+n,h+o),u=p,c=h,f=a[1],d=a[2];break;case"t":p=u+a[1],h=c+a[2],l[0].match(/[QqTt]/)===null?(f=u,d=c):l[0]==="t"?(f=2*u-m,d=2*c-g):l[0]==="q"&&(f=2*u-f,d=2*c-d),m=f,g=d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h,f=u+a[1],d=c+a[2];break;case"T":p=a[1],h=a[2],f=2*u-f,d=2*c-d,t.quadraticCurveTo(f+n,d+o,p+n,h+o),u=p,c=h;break;case"a":yXe(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+u+n,a[7]+c+o]),u+=a[6],c+=a[7];break;case"A":yXe(t,u+n,c+o,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+o]),u=a[6],c=a[7];break;case"z":case"Z":t.closePath();break}l=a}}function yXe(t,r,n,o){let i=aXt(o[5],o[6],o[0],o[1],o[3],o[4],o[2],r,n);for(let s=0;s<i.length;++s){let a=lXt(i[s]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}function VXe(t){return Rr(xXe,t)?xXe[t]:cXt(t)}function cXt(t){if(!Rr(A0e,t)){let r=xT(t);A0e[t]={draw:function(n,o){YN(n,r,0,0,Math.sqrt(o)/2)}}}return A0e[t]}function fXt(t){return t.x}function dXt(t){return t.y}function pXt(t){return t.width}function hXt(t){return t.height}function fv(t){return typeof t=="function"?t:()=>+t}function jq(t,r,n){return Math.max(r,Math.min(t,n))}function GXe(){var t=fXt,r=dXt,n=pXt,o=hXt,i=fv(0),s=i,a=i,l=i,u=null;function c(f,d,p){var h,m=d??+t.call(this,f),g=p??+r.call(this,f),y=+n.call(this,f),b=+o.call(this,f),x=Math.min(y,b)/2,v=jq(+i.call(this,f),0,x),w=jq(+s.call(this,f),0,x),_=jq(+a.call(this,f),0,x),C=jq(+l.call(this,f),0,x);if(u||(u=h=Ep()),v<=0&&w<=0&&_<=0&&C<=0)u.rect(m,g,y,b);else{var S=m+y,E=g+b;u.moveTo(m+v,g),u.lineTo(S-w,g),u.bezierCurveTo(S-A_*w,g,S,g+A_*w,S,g+w),u.lineTo(S,E-C),u.bezierCurveTo(S,E-A_*C,S-A_*C,E,S-C,E),u.lineTo(m+_,E),u.bezierCurveTo(m+A_*_,E,m,E-A_*_,m,E-_),u.lineTo(m,g+v),u.bezierCurveTo(m,g+A_*v,m+A_*v,g,m+v,g),u.closePath()}if(h)return u=null,h+""||null}return c.x=function(f){return arguments.length?(t=fv(f),c):t},c.y=function(f){return arguments.length?(r=fv(f),c):r},c.width=function(f){return arguments.length?(n=fv(f),c):n},c.height=function(f){return arguments.length?(o=fv(f),c):o},c.cornerRadius=function(f,d,p,h){return arguments.length?(i=fv(f),s=d!=null?fv(d):i,l=p!=null?fv(p):i,a=h!=null?fv(h):s,c):i},c.context=function(f){return arguments.length?(u=f??null,c):u},c}function WXe(){var t,r,n,o,i=null,s,a,l,u;function c(d,p,h){let m=h/2;if(s){var g=l-p,y=d-a;if(g||y){var b=Math.sqrt(g*g+y*y),x=(g/=b)*u,v=(y/=b)*u,w=Math.atan2(y,g);i.moveTo(a-x,l-v),i.lineTo(d-g*m,p-y*m),i.arc(d,p,m,w-Math.PI,w),i.lineTo(a+x,l+v),i.arc(a,l,u,w,w+Math.PI)}else i.arc(d,p,m,0,dy);i.closePath()}else s=1;a=d,l=p,u=m}function f(d){var p,h=d.length,m,g=!1,y;for(i==null&&(i=y=Ep()),p=0;p<=h;++p)!(p<h&&o(m=d[p],p,d))===g&&(g=!g)&&(s=0),g&&c(+t(m,p,d),+r(m,p,d),+n(m,p,d));if(y)return i=null,y+""||null}return f.x=function(d){return arguments.length?(t=d,f):t},f.y=function(d){return arguments.length?(r=d,f):r},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(o=d,f):o},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function i5(t,r){return t??r}function q0e(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function BXt(t,r){return OXt.context(t)(r)}function $Xt(t,r){let n=r[0],o=n.interpolate||"linear";return(n.orient==="horizontal"?RXt:FXt).curve(W0e(o,n.orient,n.tension)).context(t)(r)}function zXt(t,r){let n=r[0],o=n.interpolate||"linear";return MXt.curve(W0e(o,n.orient,n.tension)).context(t)(r)}function QN(t,r,n,o){return PXt.context(t)(r,n,o)}function UXt(t,r){return(r.mark.shape||r.shape).context(t)(r)}function VXt(t,r){return jXt.context(t)(r)}function GXt(t,r){return LXt.context(t)(r)}function HXe(){qXe=1}function H0e(t,r,n){var o=r.clip,i=t._defs,s=r.clip_id||(r.clip_id="clip"+qXe++),a=i.clipping[s]||(i.clipping[s]={id:s});return In(o)?a.path=o(null):q0e(n)?a.path=QN(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function hu(t){this.clear(),t&&this.union(t)}function Y0e(t){this.mark=t,this.bounds=this.bounds||new hu}function X0e(t){Y0e.call(this,t),this.items=this.items||[]}function K0e(t){this._pending=0,this._loader=t||Pq()}function vXe(t){t._pending+=1}function Z4(t){t._pending-=1}function vT(t,r,n){if(r.stroke&&r.opacity!==0&&r.strokeOpacity!==0){let o=r.strokeWidth!=null?+r.strokeWidth:1;t.expand(o+(n?WXt(r,o):0))}return t}function WXt(t,r){return t.strokeJoin&&t.strokeJoin!=="miter"?0:r}function l5(t,r){return tH=t,r?(yT=r*O_,F0e=M0e=Math.cos(yT),$q=Math.sin(yT),R0e=-$q):(F0e=M0e=1,yT=$q=R0e=0),HXt}function SXe(t,r,n,o){let i=(t-r)/(t+n-2*r);0<i&&i<1&&o(t+(r-t)*i)}function CXe(t,r,n,o,i){let s=o-t+3*r-3*n,a=t+n-2*r,l=t-r,u=0,c=0,f;Math.abs(s)>sXt?(f=a*a+l*s,f>=0&&(f=Math.sqrt(f),u=(-a+f)/s,c=(-a-f)/s)):u=.5*l/a,0<u&&u<1&&i(EXe(u,t,r,n,o)),0<c&&c<1&&i(EXe(c,t,r,n,o))}function EXe(t,r,n,o,i){let s=1-t,a=s*s,l=t*t;return a*s*r+3*a*t*n+3*s*l*o+l*t*i}function Z0e(t){return function(r,n){if(!N_)return!0;t(N_,r),P0e.clear().union(r.bounds).intersect(n).round();let{x1:o,y1:i,x2:s,y2:a}=P0e;for(let l=i;l<=a;++l)for(let u=o;u<=s;++u)if(N_.isPointInPath(u,l))return!0;return!1}}function Q0e(t,r){return r.contains(t.x||0,t.y||0)}function YXe(t,r){let n=t.x||0,o=t.y||0,i=t.width||0,s=t.height||0;return r.intersects(P0e.set(n,o,n+i,o+s))}function XXe(t,r){let n=t.x||0,o=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:o;return HN(r,n,o,i,s)}function HN(t,r,n,o,i){let{x1:s,y1:a,x2:l,y2:u}=t,c=o-r,f=i-n,d=0,p=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-c,m=-(s-r)),y===1&&(h=c,m=l-r),y===2&&(h=-f,m=-(a-n)),y===3&&(h=f,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>p)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<p&&(p=g)}}return!0}function XN(t,r){t.globalCompositeOperation=r.blend||"source-over"}function am(t,r){return t??r}function TXe(t,r){let n=r.length;for(let o=0;o<n;++o)t.addColorStop(r[o].offset,r[o].color);return t}function YXt(t,r,n){let o=n.width(),i=n.height(),s;if(r.gradient==="radial")s=t.createRadialGradient(n.x1+am(r.x1,.5)*o,n.y1+am(r.y1,.5)*i,Math.max(o,i)*am(r.r1,0),n.x1+am(r.x2,.5)*o,n.y1+am(r.y2,.5)*i,Math.max(o,i)*am(r.r2,.5));else{let a=am(r.x1,0),l=am(r.y1,0),u=am(r.x2,1),c=am(r.y2,0);if(a===u||l===c||o===i)s=t.createLinearGradient(n.x1+a*o,n.y1+l*i,n.x1+u*o,n.y1+c*i);else{let f=Wc(Math.ceil(o),Math.ceil(i)),d=f.getContext("2d");return d.scale(o,i),d.fillStyle=TXe(d.createLinearGradient(a,l,u,c),r.stops),d.fillRect(0,0,o,i),t.createPattern(f,"no-repeat")}}return TXe(s,r.stops)}function KXe(t,r,n){return V0e(n)?YXt(t,n,r.bounds):n}function Wq(t,r,n){return n*=r.fillOpacity==null?1:r.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=KXe(t,r,r.fill),!0):!1}function KN(t,r,n){var o=(o=r.strokeWidth)!=null?o:1;return o<=0?!1:(n*=r.strokeOpacity==null?1:r.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=KXe(t,r,r.stroke),t.lineWidth=o,t.lineCap=r.strokeCap||"butt",t.lineJoin=r.strokeJoin||"miter",t.miterLimit=r.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(r.strokeDash||XXt),t.lineDashOffset=r.strokeDashOffset||0),!0):!1)}function KXt(t,r){return t.zindex-r.zindex||t.index-r.index}function J0e(t){if(!t.zdirty)return t.zitems;var r=t.items,n=[],o,i,s;for(i=0,s=r.length;i<s;++i)o=r[i],o.index=i,o.zindex&&n.push(o);return t.zdirty=!1,t.zitems=n.sort(KXt)}function cm(t,r){var n=t.items,o,i;if(!n||!n.length)return;let s=J0e(t);if(s&&s.length){for(o=0,i=n.length;o<i;++o)n[o].zindex||r(n[o]);n=s}for(o=0,i=n.length;o<i;++o)r(n[o])}function qq(t,r){var n=t.items,o,i;if(!n||!n.length)return null;let s=J0e(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(o=r(n[i]))return o;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(o=r(n[i])))return o}return null}function eye(t){return function(r,n,o){cm(n,i=>{(!o||o.intersects(i.bounds))&&ZXe(t,r,i,i)})}}function ZXt(t){return function(r,n,o){n.items.length&&(!o||o.intersects(n.bounds))&&ZXe(t,r,n.items[0],n.items)}}function ZXe(t,r,n,o){var i=n.opacity==null?1:n.opacity;i!==0&&(t(r,o)||(XN(r,n),n.fill&&Wq(r,n,i)&&r.fill(),n.stroke&&KN(r,n,i)&&r.stroke()))}function rH(t){return t=t||A0,function(r,n,o,i,s,a){return o*=r.pixelRatio,i*=r.pixelRatio,qq(n,l=>{let u=l.bounds;if(!(u&&!u.contains(s,a)||!u)&&t(r,l,o,i,s,a))return l})}}function u5(t,r){return function(n,o,i,s){var a=Array.isArray(o)?o[0]:o,l=r??a.fill,u=a.stroke&&n.isPointInStroke,c,f;return u&&(c=a.strokeWidth,f=a.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),t(n,o)?!1:l&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function tye(t){return rH(u5(t))}function bT(t,r){return"translate("+t+","+r+")"}function rye(t){return"rotate("+t+")"}function QXt(t,r){return"scale("+t+","+r+")"}function QXe(t){return bT(t.x||0,t.y||0)}function JXt(t){return bT(t.x||0,t.y||0)+(t.angle?" "+rye(t.angle):"")}function eKt(t){return bT(t.x||0,t.y||0)+(t.angle?" "+rye(t.angle):"")+(t.scaleX||t.scaleY?" "+QXt(t.scaleX||1,t.scaleY||1):"")}function nye(t,r,n){function o(a,l){a("transform",JXt(l)),a("d",r(null,l))}function i(a,l){return r(l5(a,l.angle),l),vT(a,l).translate(l.x||0,l.y||0)}function s(a,l){var u=l.x||0,c=l.y||0,f=l.angle||0;a.translate(u,c),f&&a.rotate(f*=O_),a.beginPath(),r(a,l),f&&a.rotate(-f),a.translate(-u,-c)}return{type:t,tag:"path",nested:!1,attr:o,bound:i,draw:eye(s),pick:tye(s),isect:n||Z0e(s)}}function rKt(t,r){for(var n=t[0].orient==="horizontal"?r[1]:r[0],o=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,a,l;--i>=0;)t[i].defined!==!1&&(l=Math.abs(t[i][o]-n),l<s&&(s=l,a=t[i]));return a}function nKt(t,r){for(var n=Math.pow(t[0].strokeWidth||1,2),o=t.length,i,s,a;--o>=0;)if(t[o].defined!==!1&&(i=t[o].x-r[0],s=t[o].y-r[1],a=i*i+s*s,a<n))return t[o];return null}function oKt(t,r){for(var n=t.length,o,i,s;--n>=0;)if(t[n].defined!==!1&&(o=t[n].x-r[0],i=t[n].y-r[1],s=o*o+i*i,o=t[n].size||1,s<o*o))return t[n];return null}function oye(t,r,n){function o(u,c){var f=c.mark.items;f.length&&u("d",r(null,f))}function i(u,c){var f=c.items;return f.length===0?u:(r(l5(u),f),vT(u,f[0]))}function s(u,c){u.beginPath(),r(u,c)}let a=u5(s);function l(u,c,f,d,p,h){var m=c.items,g=c.bounds;return!m||!m.length||g&&!g.contains(p,h)?null:(f*=u.pixelRatio,d*=u.pixelRatio,a(u,m,f,d)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:o,bound:i,draw:ZXt(s),pick:l,isect:Q0e,tip:n}}function sKt(t,r){var n=r.clip;t.save(),In(n)?(t.beginPath(),n(t),t.clip()):JXe(t,r.group)}function JXe(t,r){t.beginPath(),q0e(r)?QN(t,r,0,0):t.rect(0,0,r.width||0,r.height||0),t.clip()}function eKe(t){let r=am(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&r>.5&&r<1.5?.5-Math.abs(r-1):0}function aKt(t,r){t("transform",QXe(r))}function tKe(t,r){let n=eKe(r);t("d",QN(null,r,n,n))}function lKt(t,r){t("class","background"),t("aria-hidden",!0),tKe(t,r)}function uKt(t,r){t("class","foreground"),t("aria-hidden",!0),r.strokeForeground?tKe(t,r):t("d","")}function cKt(t,r,n){let o=r.clip?H0e(n,r,r):null;t("clip-path",o)}function fKt(t,r){if(!r.clip&&r.items){let n=r.items,o=n.length;for(let i=0;i<o;++i)t.union(n[i].bounds)}return(r.clip||r.width||r.height)&&!r.noBound&&t.add(0,0).add(r.width||0,r.height||0),vT(t,r),t.translate(r.x||0,r.y||0)}function r5(t,r,n,o){let i=eKe(r);t.beginPath(),QN(t,r,(n||0)+i,(o||0)+i)}function mKt(t,r,n){cm(r,o=>{let i=o.x||0,s=o.y||0,a=o.strokeForeground,l=o.opacity==null?1:o.opacity;(o.stroke||o.fill)&&l&&(r5(t,o,i,s),XN(t,o),o.fill&&Wq(t,o,l)&&t.fill(),o.stroke&&!a&&KN(t,o,l)&&t.stroke()),t.save(),t.translate(i,s),o.clip&&JXe(t,o),n&&n.translate(-i,-s),cm(o,u=>{this.draw(t,u,n)}),n&&n.translate(i,s),t.restore(),a&&o.stroke&&l&&(r5(t,o,i,s),XN(t,o),KN(t,o,l)&&t.stroke())})}function gKt(t,r,n,o,i,s){if(r.bounds&&!r.bounds.contains(i,s)||!r.items)return null;let a=n*t.pixelRatio,l=o*t.pixelRatio;return qq(r,u=>{let c,f,d,p=u.bounds;if(p&&!p.contains(i,s))return;f=u.x||0,d=u.y||0;let h=f+(u.width||0),m=d+(u.height||0),g=u.clip;if(g&&(i<f||i>h||s<d||s>m))return;if(t.save(),t.translate(f,d),f=i-f,d=s-d,g&&q0e(u)&&!hKt(t,u,a,l))return t.restore(),null;let y=u.strokeForeground,b=r.interactive!==!1;return b&&y&&u.stroke&&pKt(t,u,a,l)?(t.restore(),u):(c=qq(u,x=>yKt(x,f,d)?this.pick(x,n,o,f,d):null),!c&&b&&(u.fill||!y&&u.stroke)&&dKt(t,u,a,l)&&(c=u),t.restore(),c||null)})}function yKt(t,r,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(r,n)}function iye(t,r){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},r.loadImage(t.url).then(o=>{t.image=o,t.image.url=t.url})),n}function sye(t,r){return t.width!=null?t.width:!r||!r.width?0:t.aspect!==!1&&t.height?t.height*r.width/r.height:r.width}function aye(t,r){return t.height!=null?t.height:!r||!r.height?0:t.aspect!==!1&&t.width?t.width*r.height/r.width:r.height}function nH(t,r){return t==="center"?r/2:t==="right"?r:0}function oH(t,r){return t==="middle"?r/2:t==="bottom"?r:0}function xKt(t,r,n){let o=iye(r,n),i=sye(r,o),s=aye(r,o),a=(r.x||0)-nH(r.align,i),l=(r.y||0)-oH(r.baseline,s),u=!o.src&&o.toDataURL?o.toDataURL():o.src||"";t("href",u,n5["xmlns:xlink"],"xlink:href"),t("transform",bT(a,l)),t("width",i),t("height",s),t("preserveAspectRatio",r.aspect===!1?"none":"xMidYMid")}function vKt(t,r){let n=r.image,o=sye(r,n),i=aye(r,n),s=(r.x||0)-nH(r.align,o),a=(r.y||0)-oH(r.baseline,i);return t.set(s,a,s+o,a+i)}function wKt(t,r,n){cm(r,o=>{if(n&&!n.intersects(o.bounds))return;let i=iye(o,this),s=sye(o,i),a=aye(o,i);if(s===0||a===0)return;let l=(o.x||0)-nH(o.align,s),u=(o.y||0)-oH(o.baseline,a),c,f,d,p;o.aspect!==!1&&(f=i.width/i.height,d=o.width/o.height,f===f&&d===d&&f!==d&&(d<f?(p=s/f,u+=(a-p)/2,a=p):(p=a*f,l+=(s-p)/2,s=p))),(i.complete||i.toDataURL)&&(XN(t,o),t.globalAlpha=(c=o.opacity)!=null?c:1,t.imageSmoothingEnabled=o.smooth!==!1,t.drawImage(i,l,u,s,a))})}function CKt(t,r){var n=r.scaleX||1,o=r.scaleY||1;(n!==1||o!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",eKt(r)),t("d",r.path)}function Uq(t,r){var n=r.path;if(n==null)return!0;var o=r.x||0,i=r.y||0,s=r.scaleX||1,a=r.scaleY||1,l=(r.angle||0)*O_,u=r.pathCache;(!u||u.path!==n)&&((r.pathCache=u=xT(n)).path=n),l&&t.rotate&&t.translate?(t.translate(o,i),t.rotate(l),YN(t,u,0,0,s,a),t.rotate(-l),t.translate(-o,-i)):YN(t,u,o,i,s,a)}function EKt(t,r){return Uq(l5(t,r.angle),r)?t.set(0,0,0,0):vT(t,r,!0)}function AKt(t,r){t("d",QN(null,r))}function kKt(t,r){var n,o;return vT(t.set(n=r.x||0,o=r.y||0,n+r.width||0,o+r.height||0),r)}function AXe(t,r){t.beginPath(),QN(t,r)}function DKt(t,r){t("transform",QXe(r)),t("x2",r.x2!=null?r.x2-(r.x||0):0),t("y2",r.y2!=null?r.y2-(r.y||0):0)}function NKt(t,r){var n,o;return vT(t.set(n=r.x||0,o=r.y||0,r.x2!=null?r.x2:n,r.y2!=null?r.y2:o),r)}function rKe(t,r,n){var o,i,s,a;return r.stroke&&KN(t,r,n)?(o=r.x||0,i=r.y||0,s=r.x2!=null?r.x2:o,a=r.y2!=null?r.y2:i,t.beginPath(),t.moveTo(o,i),t.lineTo(s,a),!0):!1}function OKt(t,r,n){cm(r,o=>{if(!(n&&!n.intersects(o.bounds))){var i=o.opacity==null?1:o.opacity;i&&rKe(t,o,i)&&(XN(t,o),t.stroke())}})}function FKt(t,r,n,o){return t.isPointInStroke?rKe(t,r,1)&&t.isPointInStroke(n,o):!1}function nKe(t){um.width=t&&N_?lye:j0e}function j0e(t,r){return oKe(R_(t,r),py(t))}function oKe(t,r){return~~(.8*t.length*r)}function lye(t,r){return py(t)<=0||!(r=R_(t,r))?0:iKe(r,iH(t))}function iKe(t,r){let n=`(${r}) ${t}`,o=kXe.get(n);return o===void 0&&(N_.font=r,o=N_.measureText(t).width,kXe.set(n,o)),o}function py(t){return t.fontSize!=null?+t.fontSize||0:11}function F_(t){return t.lineHeight!=null?t.lineHeight:py(t)+2}function jKt(t){return Hr(t)?t.length>1?t:t[0]:t}function c5(t){return jKt(t.lineBreak&&t.text&&!Hr(t.text)?t.text.split(t.lineBreak):t.text)}function LKt(t){let r=c5(t);return(Hr(r)?r.length-1:0)*F_(t)}function R_(t,r){let n=r==null?"":(r+"").trim();return t.limit>0&&n.length?$Kt(t,n):n}function BKt(t){if(um.width===lye){let r=iH(t);return n=>iKe(n,r)}else{let r=py(t);return n=>oKe(n,r)}}function $Kt(t,r){var n=+t.limit,o=BKt(t);if(o(r)<n)return r;var i=t.ellipsis||"\u2026",s=t.dir==="rtl",a=0,l=r.length,u;if(n-=o(i),s){for(;a<l;)u=a+l>>>1,o(r.slice(u))>n?a=u+1:l=u;return i+r.slice(a)}else{for(;a<l;)u=1+(a+l>>>1),o(r.slice(0,u))<n?a=u:l=u-1;return r.slice(0,a)+i}}function f5(t,r){var n=t.font;return(r&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function iH(t,r){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+py(t)+"px "+f5(t,r)}function uye(t){var r=t.baseline,n=py(t);return Math.round(r==="top"?.79*n:r==="middle"?.3*n:r==="bottom"?-.21*n:r==="line-top"?.29*n+.5*F_(t):r==="line-bottom"?.29*n-.5*F_(t):0)}function sH(t){var r=t.x||0,n=t.y||0,o=t.radius||0,i;return o&&(i=(t.theta||0)-hT,r+=o*Math.cos(i),n+=o*Math.sin(i)),J4.x1=r,J4.y1=n,J4}function UKt(t,r){var n=r.dx||0,o=(r.dy||0)+uye(r),i=sH(r),s=i.x1,a=i.y1,l=r.angle||0,u;t("text-anchor",zKt[r.align]||"start"),l?(u=bT(s,a)+" "+rye(l),(n||o)&&(u+=" "+bT(n,o))):u=bT(s+n,a+o),t("transform",u)}function cye(t,r,n){var o=um.height(r),i=r.align,s=sH(r),a=s.x1,l=s.y1,u=r.dx||0,c=(r.dy||0)+uye(r)-Math.round(.8*o),f=c5(r),d;if(Hr(f)?(o+=F_(r)*(f.length-1),d=f.reduce((p,h)=>Math.max(p,um.width(r,h)),0)):d=um.width(r,f),i==="center"?u-=d/2:i==="right"&&(u-=d),t.set(u+=a,c+=l,u+d,c+o),r.angle&&!n)t.rotate(r.angle*O_,a,l);else if(n===2)return t.rotatedPoints(r.angle*O_,a,l);return t}function VKt(t,r,n){cm(r,o=>{var i=o.opacity==null?1:o.opacity,s,a,l,u,c,f,d;if(!(n&&!n.intersects(o.bounds)||i===0||o.fontSize<=0||o.text==null||o.text.length===0)){if(t.font=iH(o),t.textAlign=o.align||"left",s=sH(o),a=s.x1,l=s.y1,o.angle&&(t.save(),t.translate(a,l),t.rotate(o.angle*O_),a=l=0),a+=o.dx||0,l+=(o.dy||0)+uye(o),f=c5(o),XN(t,o),Hr(f))for(c=F_(o),u=0;u<f.length;++u)d=R_(o,f[u]),o.fill&&Wq(t,o,i)&&t.fillText(d,a,l),o.stroke&&KN(t,o,i)&&t.strokeText(d,a,l),l+=c;else d=R_(o,f),o.fill&&Wq(t,o,i)&&t.fillText(d,a,l),o.stroke&&KN(t,o,i)&&t.strokeText(d,a,l);o.angle&&t.restore()}})}function GKt(t,r,n,o,i,s){if(r.fontSize<=0)return!1;if(!r.angle)return!0;var a=sH(r),l=a.x1,u=a.y1,c=cye(J4,r,1),f=-r.angle*O_,d=Math.cos(f),p=Math.sin(f),h=d*i-p*s+(l-d*l+p*u),m=p*i+d*s+(u-p*l-d*u);return c.contains(h,m)}function WKt(t,r){let n=cye(J4,t,2);return HN(r,n[0],n[1],n[2],n[3])||HN(r,n[0],n[1],n[4],n[5])||HN(r,n[4],n[5],n[6],n[7])||HN(r,n[2],n[3],n[6],n[7])}function L0e(t,r,n){var o=xd[t.mark.marktype],i=r||o.bound;return o.nested&&(t=t.mark),i(t.bounds||(t.bounds=new hu),t,n)}function sKe(t,r,n){var o=xd[t.marktype],i=o.bound,s=t.items,a=s&&s.length,l,u,c,f;if(o.nested)return a?c=s[0]:(IXe.mark=t,c=IXe),f=L0e(c,i,n),r=r&&r.union(f)||f,r;if(r=r||t.bounds&&t.bounds.clear()||new hu,a)for(l=0,u=s.length;l<u;++l)r.union(L0e(s[l],i,n));return t.bounds=r}function aKe(t,r){return JSON.stringify(t,YKt,r)}function lKe(t){let r=typeof t=="string"?JSON.parse(t):t;return uKe(r)}function uKe(t){var r=t.marktype,n=t.items,o,i,s;if(n)for(i=0,s=n.length;i<s;++i)o=r?"mark":"group",n[i][o]=t,n[i].zindex&&(n[i][o].zdirty=!0),(r||o)==="group"&&uKe(n[i]);return r&&sKe(t),t}function aH(t){arguments.length?this.root=lKe(t):(this.root=cKe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new X0e(this.root)])}function cKe(t,r){let n={bounds:new hu,clip:!!t.clip,group:r,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function I_(t,r,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,r):t.createElement(r):null}function fye(t,r){r=r.toLowerCase();for(var n=t.childNodes,o=0,i=n.length;o<i;++o)if(n[o].tagName.toLowerCase()===r)return n[o]}function rf(t,r,n,o){var i=t.childNodes[r],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=I_(t.ownerDocument,n,o),t.insertBefore(i,s)),i}function lm(t,r){for(var n=t.childNodes,o=n.length;o>r;)t.removeChild(n[--o]);return t}function fKe(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function d5(t,r){let n=r.getBoundingClientRect();return[t.clientX-n.left-(r.clientLeft||0),t.clientY-n.top-(r.clientTop||0)]}function XKt(t,r,n,o){var i=t&&t.mark,s,a;if(i&&(s=xd[i.marktype]).tip){for(a=d5(r,n),a[0]-=o[0],a[1]-=o[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=s.tip(i.items,a)}return t}function M_(t,r){this._active=null,this._handlers={},this._loader=t||Pq(),this._tooltip=r||KKt}function KKt(t,r,n,o){t.element().setAttribute("title",o||"")}function hy(t){this._el=null,this._bgcolor=null,this._loader=new K0e(t)}function JN(t,r){M_.call(this,t,r),this._down=null,this._touch=null,this._first=!0,this._events={}}function DXe(t,r){oZt(r).forEach(n=>iZt(t,n))}function iZt(t,r){let n=t.canvas();n&&!t._events[r]&&(t._events[r]=1,n.addEventListener(r,t[r]?o=>t[r](o):o=>t.fire(r,o)))}function NXe(t,r,n){return function(o){let i=this._active,s=this.pickEvent(o);s===i?this.fire(t,o):((!i||!i.exit)&&this.fire(n,o),this._active=s,this.fire(r,o),this.fire(t,o))}}function OXe(t){return function(r){this.fire(t,r),this._active=null}}function sZt(){return typeof window<"u"&&window.devicePixelRatio||1}function lZt(t,r,n,o,i,s){let a=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),u=a?aZt:i;t.width=r*u,t.height=n*u;for(let c in s)l[c]=s[c];return a&&u!==1&&(t.style.width=r+"px",t.style.height=n+"px"),l.pixelRatio=u,l.setTransform(u,0,0,u,u*o[0],u*o[1]),t}function Qq(t){hy.call(this,t),this._options={},this._redraw=!1,this._dirty=new hu,this._tempb=new hu}function cZt(t,r,n){return r.expand(1).round(),t.pixelRatio%1&&r.scale(t.pixelRatio).round().scale(1/t.pixelRatio),r.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(r.x1,r.y1,r.width(),r.height()),t.clip(),r}function dye(t,r){M_.call(this,t,r);let n=this;n._hrefHandler=U0e(n,(o,i)=>{i&&i.href&&n.handleHref(o,i,i.href)}),n._tooltipHandler=U0e(n,(o,i)=>{n.handleTooltip(o,i,o.type!==o5)})}function xKe(t,r){let n=r.aria===!1;if(t(gKe,n||void 0),n||r.description==null)for(let o in MXe)t(MXe[o],void 0);else{let o=r.mark.marktype;t(pye,r.description),t(hye,r.ariaRole||(o==="group"?yKe:gye)),t(mye,r.ariaRoleDescription||`${o} mark`)}}function vKe(t){return t.aria===!1?{[gKe]:!0}:fZt[t.role]?null:RXe[t.role]?pZt(t,RXe[t.role]):dZt(t)}function dZt(t){let r=t.marktype,n=r==="group"||r==="text"||t.items.some(o=>o.description!=null&&o.aria!==!1);return bKe(n?yKe:gye,`${r} mark container`,t.description)}function pZt(t,r){try{let n=t.items[0],o=r.caption||(()=>"");return bKe(r.role||gye,r.desc,n.description||o(n))}catch{return null}}function PXe(t){return Lr(t.text).join(" ")}function hZt(t){let r=t.datum,n=t.orient,o=r.title?wKe(t):null,i=t.context,s=i.scales[r.scale].value,a=i.dataflow.locale(),l=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(o?` titled '${o}'`:"")+` for a ${g_(l)?"discrete":l} scale with ${Ype(a,s,t)}`}function mZt(t){let r=t.datum,n=r.title?wKe(t):null,o=`${r.type||""} legend`.trim(),i=r.scales,s=Object.keys(i),a=t.context,l=a.scales[i[s[0]]].value,u=a.dataflow.locale();return yZt(o)+(n?` titled '${n}'`:"")+` for ${gZt(s)} with ${Ype(u,l,t)}`}function wKe(t){try{return Lr(zn(t.items).items[0].text).join(" ")}catch{return null}}function gZt(t){return t=t.map(r=>r+(r==="fill"||r==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+zn(t)}function yZt(t){return t.length?t[0].toUpperCase()+t.slice(1):t}function yye(){let t="",r="",n="",o=[],i=()=>r=n="",s=u=>{r&&(t+=`${r}>${n}`,i()),o.push(u)},a=(u,c)=>(c!=null&&(r+=` ${u}="${bZt(c)}"`),l),l={open(u,...c){s(u),r="<"+u;for(let f of c)for(let d in f)a(d,f[d]);return l},close(){let u=o.pop();return r?t+=r+(n?`>${n}</${u}>`:"/>"):t+=`</${u}>`,i(),l},attr:a,text:u=>(n+=_Ke(u),l),toString:()=>t};return l}function CKe(t,r){if(t.open(r.tagName),r.hasAttributes()){let n=r.attributes,o=n.length;for(let i=0;i<o;++i)t.attr(n[i].name,n[i].value)}if(r.hasChildNodes()){let n=r.childNodes,o=n.length;for(let i=0;i<o;i++){let s=n[i];s.nodeType===3?t.text(s.nodeValue):CKe(t,s)}}return t.close()}function bye(t){hy.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function LXe(t,r){for(;t&&t.dirty!==r;t=t.mark.group)if(t.dirty=r,t.mark&&t.mark.dirty!==r)t.mark.dirty=r;else return}function xZt(t,r,n){let o,i,s;if(r.gradient==="radial"){let a=rf(t,n++,"pattern",Aa);D_(a,{id:Gq+r.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=rf(a,0,"rect",Aa),D_(a,{width:1,height:1,fill:`url(${TKe()}#${r.id})`}),t=rf(t,n++,"radialGradient",Aa),D_(t,{id:r.id,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})}else t=rf(t,n++,"linearGradient",Aa),D_(t,{id:r.id,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(o=0,i=r.stops.length;o<i;++o)s=rf(t,o,"stop",Aa),s.setAttribute("offset",r.stops[o].offset),s.setAttribute("stop-color",r.stops[o].color);return lm(t,o),n}function vZt(t,r,n){let o;return t=rf(t,n,"clipPath",Aa),t.setAttribute("id",r.id),r.path?(o=rf(t,0,"path",Aa),o.setAttribute("d",r.path)):(o=rf(t,0,"rect",Aa),D_(o,{x:0,y:0,width:r.width,height:r.height})),lm(t,1),n+1}function wZt(t,r,n){r=r.lastChild.previousSibling;let o,i=0;cm(n,s=>{o=t.mark(r,s,o),++i}),lm(r,1+i)}function BXe(t,r,n,o,i){let s=t._svg,a;if(!s&&(a=r.ownerDocument,s=I_(a,o,Aa),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},o==="g"))){let l=I_(a,"path",Aa);s.appendChild(l),l.__data__=t;let u=I_(a,"g",Aa);s.appendChild(u),u.__data__=t;let c=I_(a,"path",Aa);s.appendChild(c),c.__data__=t,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||_Zt(s,n))&&r.insertBefore(s,n?n.nextSibling:r.firstChild),s}function _Zt(t,r){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=r}function t5(t,r,n){r!==pu[t]&&(n?CZt(dv,t,r,n):mc(dv,t,r),pu[t]=r)}function N0e(t,r,n){n!==pu[r]&&(n==null?t.style.removeProperty(r):t.style.setProperty(r,n+""),pu[r]=n)}function D_(t,r){for(let n in r)mc(t,n,r[n])}function mc(t,r,n){n!=null?t.setAttribute(r,n):t.removeAttribute(r)}function CZt(t,r,n,o){n!=null?t.setAttributeNS(o,r,n):t.removeAttributeNS(o,r)}function TKe(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function xye(t){hy.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function EZt(t,r,n,o,i){if(r==null||(o==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),o==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",r.fill!==null)))return t;o==="image"&&r.smooth===!1&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),o==="text"&&(t["font-family"]=f5(r),t["font-size"]=py(r)+"px",t["font-style"]=r.fontStyle,t["font-variant"]=r.fontVariant,t["font-weight"]=r.fontWeight);for(let s in Jq){let a=r[s],l=Jq[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(V0e(a)&&(a=zXe(a,i.gradient,"")),t[l]=a)}return t}function p5(t,r){return t=String(t||"").toLowerCase(),arguments.length>1?(ZN[t]=r,this):ZN[t]}function vye(t,r,n){let o=[],i=new hu().union(r),s=t.marktype;return s?NKe(t,i,n,o):s==="group"?OKe(t,i,n,o):pt("Intersect scene must be mark node or group item.")}function NKe(t,r,n,o){if(TZt(t,r,n)){let i=t.items,s=t.marktype,a=i.length,l=0;if(s==="group")for(;l<a;++l)OKe(i[l],r,n,o);else for(let u=xd[s].isect;l<a;++l){let c=i[l];FKe(c,r,u)&&o.push(c)}}return o}function TZt(t,r,n){return t.bounds&&r.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function OKe(t,r,n,o){n&&n(t.mark)&&FKe(t,r,xd.group.isect)&&o.push(t);let i=t.items,s=i&&i.length;if(s){let a=t.x||0,l=t.y||0;r.translate(-a,-l);for(let u=0;u<s;++u)NKe(i[u],r,n,o);r.translate(a,l)}return o}function FKe(t,r,n){let o=t.bounds;return r.encloses(o)||r.intersects(o)&&n(t,r)}function AZt(t){let r=t.clip;if(In(r))r(l5(O0e.clear()));else if(r)O0e.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(O0e)}function wye(t,r,n){return t===r?!0:n==="path"?RKe(t,r):t instanceof Date&&r instanceof Date?+t==+r:k0(t)&&k0(r)?Math.abs(t-r)<=kZt:!t||!r||!un(t)&&!un(r)?t==r:IZt(t,r)}function RKe(t,r){return wye(xT(t),xT(r))}function IZt(t,r){var n=Object.keys(t),o=Object.keys(r),i,s;if(n.length!==o.length)return!1;for(n.sort(),o.sort(),s=n.length-1;s>=0;s--)if(n[s]!=o[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!wye(t[i],r[i],i))return!1;return typeof t==typeof r}function DZt(){HXe(),oXt()}var $Xe,Gq,gXe,iXt,K4,O_,sXt,hT,dy,qN,E0e,T0e,UXe,Ap,bXe,xXe,A0e,A_,s5,a5,mXt,gXt,yXt,bXt,xXt,vXt,wXt,_Xt,SXt,CXt,EXt,TXt,AXt,kXt,IXt,DXt,eH,NXt,OXt,FXt,RXt,MXt,PXt,jXt,LXt,qXe,qXt,tH,Lq,Bq,yT,F0e,$q,R0e,M0e,k_,zq,wXe,_Xe,mT,gT,k0e,I0e,HXt,N_,P0e,XXt,tKt,iKt,dKt,pKt,hKt,bKt,n5,_Kt,SKt,TKt,IKt,RKt,MKt,PKt,kXe,um,zKt,J4,qKt,HKt,xd,IXe,YKt,ZKt,QKt,JKt,dKe,Vq,pKe,B0e,eZt,Hq,e5,hKe,Yq,tZt,rZt,mKe,Xq,Kq,Zq,nZt,$0e,o5,z0e,oZt,aZt,FXe,uZt,U0e,gKe,pye,hye,mye,yKe,gye,bKe,fZt,RXe,MXe,_Ke,bZt,SKe,Jq,EKe,Q4,jXe,Aa,D0e,dv,pu,SZt,AKe,kKe,IKe,DKe,pv,ZN,O0e,kZt,h5=D(()=>{"use strict";Os();OYe();VN();DD();C0e();xN();$Xe=0;Gq="p_";gXe={basis:{curve:Mge},"basis-closed":{curve:Pge},"basis-open":{curve:jge},bundle:{curve:Lge,tension:"beta",value:.85},cardinal:{curve:Bge,tension:"tension",value:0},"cardinal-open":{curve:Uge,tension:"tension",value:0},"cardinal-closed":{curve:$ge,tension:"tension",value:0},"catmull-rom":{curve:Gge,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Wge,tension:"alpha",value:.5},"catmull-rom-open":{curve:qge,tension:"alpha",value:.5},linear:{curve:fT},"linear-closed":{curve:Hge},monotone:{horizontal:Kge,vertical:Xge},natural:{curve:Zge},step:{curve:Qge},"step-after":{curve:e0e},"step-before":{curve:Jge}};iXt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},K4=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];O_=Math.PI/180,sXt=1e-14,hT=Math.PI/2,dy=Math.PI*2,qN=Math.sqrt(3)/2,E0e={},T0e={},UXe=[].join;Ap=["l",0,0,0,0,0,0,0];bXe=.5773502691896257,xXe={circle:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(n,0),t.arc(0,0,n,0,dy)}},cross:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/2.5;t.moveTo(-n,-o),t.lineTo(-n,o),t.lineTo(-o,o),t.lineTo(-o,n),t.lineTo(o,n),t.lineTo(o,o),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(o,-o),t.lineTo(o,-n),t.lineTo(-o,-n),t.lineTo(-o,-o),t.closePath()}},diamond:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,r){var n=Math.sqrt(r),o=-n/2;t.rect(o,o,n,n)}},arrow:{draw:function(t,r){var n=Math.sqrt(r)/2,o=n/7,i=n/2.5,s=n/8;t.moveTo(-o,n),t.lineTo(o,n),t.lineTo(o,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-o,-s),t.closePath()}},wedge:{draw:function(t,r){var n=Math.sqrt(r)/2,o=qN*n,i=o-n*bXe,s=n/4;t.moveTo(0,-o-i),t.lineTo(-s,o-i),t.lineTo(s,o-i),t.closePath()}},triangle:{draw:function(t,r){var n=Math.sqrt(r)/2,o=qN*n,i=o-n*bXe;t.moveTo(0,-o-i),t.lineTo(-n,o-i),t.lineTo(n,o-i),t.closePath()}},"triangle-up":{draw:function(t,r){var n=Math.sqrt(r)/2,o=qN*n;t.moveTo(0,-o),t.lineTo(-n,o),t.lineTo(n,o),t.closePath()}},"triangle-down":{draw:function(t,r){var n=Math.sqrt(r)/2,o=qN*n;t.moveTo(0,o),t.lineTo(-n,-o),t.lineTo(n,-o),t.closePath()}},"triangle-right":{draw:function(t,r){var n=Math.sqrt(r)/2,o=qN*n;t.moveTo(o,0),t.lineTo(-o,-n),t.lineTo(-o,n),t.closePath()}},"triangle-left":{draw:function(t,r){var n=Math.sqrt(r)/2,o=qN*n;t.moveTo(-o,0),t.lineTo(o,-n),t.lineTo(o,n),t.closePath()}},stroke:{draw:function(t,r){let n=Math.sqrt(r)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};A0e={};A_=.448084975506;s5=t=>t.x||0,a5=t=>t.y||0,mXt=t=>t.width||0,gXt=t=>t.height||0,yXt=t=>(t.x||0)+(t.width||0),bXt=t=>(t.y||0)+(t.height||0),xXt=t=>t.startAngle||0,vXt=t=>t.endAngle||0,wXt=t=>t.padAngle||0,_Xt=t=>t.innerRadius||0,SXt=t=>t.outerRadius||0,CXt=t=>t.cornerRadius||0,EXt=t=>i5(t.cornerRadiusTopLeft,t.cornerRadius)||0,TXt=t=>i5(t.cornerRadiusTopRight,t.cornerRadius)||0,AXt=t=>i5(t.cornerRadiusBottomRight,t.cornerRadius)||0,kXt=t=>i5(t.cornerRadiusBottomLeft,t.cornerRadius)||0,IXt=t=>i5(t.size,64),DXt=t=>t.size||1,eH=t=>t.defined!==!1,NXt=t=>VXe(t.shape||"circle"),OXt=Dge().startAngle(xXt).endAngle(vXt).padAngle(wXt).innerRadius(_Xt).outerRadius(SXt).cornerRadius(CXt),FXt=wq().x(s5).y1(a5).y0(bXt).defined(eH),RXt=wq().y(a5).x1(s5).x0(yXt).defined(eH),MXt=L4().x(s5).y(a5).defined(eH),PXt=GXe().x(s5).y(a5).width(mXt).height(gXt).cornerRadius(EXt,TXt,AXt,kXt),jXt=Rge().type(NXt).size(IXt),LXt=WXe().x(s5).y(a5).defined(eH).size(DXt);qXe=1;hu.prototype={clone(){return new hu(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,r,n,o){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),o<r?(this.y2=r,this.y1=o):(this.y1=r,this.y2=o),this},add(t,r){return t<this.x1&&(this.x1=t),r<this.y1&&(this.y1=r),t>this.x2&&(this.x2=t),r>this.y2&&(this.y2=r),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,r){return this.x1+=t,this.x2+=t,this.y1+=r,this.y2+=r,this},rotate(t,r,n){let o=this.rotatedPoints(t,r,n);return this.clear().add(o[0],o[1]).add(o[2],o[3]).add(o[4],o[5]).add(o[6],o[7])},rotatedPoints(t,r,n){var{x1:o,y1:i,x2:s,y2:a}=this,l=Math.cos(t),u=Math.sin(t),c=r-r*l+n*u,f=n-r*u-n*l;return[l*o-u*i+c,u*o+l*i+f,l*o-u*a+c,u*o+l*a+f,l*s-u*i+c,u*s+l*i+f,l*s-u*a+c,u*s+l*a+f]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,r){return!(t<this.x1||t>this.x2||r<this.y1||r>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};Dt(X0e,Y0e);K0e.prototype={pending(){return this._pending},sanitizeURL(t){let r=this;return vXe(r),r._loader.sanitize(t,{context:"href"}).then(n=>(Z4(r),n)).catch(()=>(Z4(r),null))},loadImage(t){let r=this,n=Z9();return vXe(r),r._loader.sanitize(t,{context:"image"}).then(o=>{let i=o.href;if(!i||!n)throw{url:i};let s=new n,a=Rr(o,"crossOrigin")?o.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Z4(r),s.onerror=()=>Z4(r),s.src=i,s}).catch(o=>(Z4(r),{complete:!1,width:0,height:0,src:o&&o.url||""}))},ready(){let t=this;return new Promise(r=>{function n(o){t.pending()?setTimeout(()=>{n(!0)},10):r(o)}n(!1)})}};qXt=dy-1e-8,k_=(t,r)=>tH.add(t,r),zq=(t,r)=>k_(Lq=t,Bq=r),wXe=t=>k_(t,tH.y1),_Xe=t=>k_(tH.x1,t),mT=(t,r)=>F0e*t+R0e*r,gT=(t,r)=>$q*t+M0e*r,k0e=(t,r)=>k_(mT(t,r),gT(t,r)),I0e=(t,r)=>zq(mT(t,r),gT(t,r));HXt={beginPath(){},closePath(){},moveTo:I0e,lineTo:I0e,rect(t,r,n,o){yT?(k0e(t+n,r),k0e(t+n,r+o),k0e(t,r+o),I0e(t,r)):(k_(t+n,r+o),zq(t,r))},quadraticCurveTo(t,r,n,o){let i=mT(t,r),s=gT(t,r),a=mT(n,o),l=gT(n,o);SXe(Lq,i,a,wXe),SXe(Bq,s,l,_Xe),zq(a,l)},bezierCurveTo(t,r,n,o,i,s){let a=mT(t,r),l=gT(t,r),u=mT(n,o),c=gT(n,o),f=mT(i,s),d=gT(i,s);CXe(Lq,a,u,f,wXe),CXe(Bq,l,c,d,_Xe),zq(f,d)},arc(t,r,n,o,i,s){if(o+=yT,i+=yT,Lq=n*Math.cos(i)+t,Bq=n*Math.sin(i)+r,Math.abs(i-o)>qXt)k_(t-n,r-n),k_(t+n,r+n);else{let a=c=>k_(n*Math.cos(c)+t,n*Math.sin(c)+r),l,u;if(a(o),a(i),i!==o)if(o=o%dy,o<0&&(o+=dy),i=i%dy,i<0&&(i+=dy),i<o&&(s=!s,l=o,o=i,i=l),s)for(i-=dy,l=o-o%hT,u=0;u<4&&l>i;++u,l-=hT)a(l);else for(l=o-o%hT+hT,u=0;u<4&&l<i;++u,l=l+hT)a(l)}}};N_=(N_=Wc(1,1))?N_.getContext("2d"):null,P0e=new hu;XXt=[];tKt=nye("arc",BXt);iKt=oye("area",$Xt,rKt);dKt=u5(r5),pKt=u5(r5,!1),hKt=u5(r5,!0);bKt={type:"group",tag:"g",nested:!1,attr:aKt,bound:fKt,draw:mKt,pick:gKt,isect:YXe,content:cKt,background:lKt,foreground:uKt},n5={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};_Kt={type:"image",tag:"image",nested:!1,attr:xKt,bound:vKt,draw:wKt,pick:rH(),isect:A0,get:iye,xOffset:nH,yOffset:oH},SKt=oye("line",zXt,nKt);TKt={type:"path",tag:"path",nested:!1,attr:CKt,bound:EKt,draw:eye(Uq),pick:tye(Uq),isect:Z0e(Uq)};IKt={type:"rect",tag:"path",nested:!1,attr:AKt,bound:kKt,draw:eye(AXe),pick:tye(AXe),isect:YXe};RKt={type:"rule",tag:"line",nested:!1,attr:DKt,bound:NKt,draw:OKt,pick:rH(FKt),isect:XXe},MKt=nye("shape",UXt),PKt=nye("symbol",VXt,Q0e),kXe=tae(),um={height:py,measureWidth:lye,estimateWidth:j0e,width:j0e,canvas:nKe};nKe(!0);zKt={left:"start",center:"middle",right:"end"},J4=new hu;qKt={type:"text",tag:"text",nested:!1,attr:UKt,bound:cye,draw:VKt,pick:rH(GKt),isect:WKt},HKt=oye("trail",GXt,oKt),xd={arc:tKt,area:iKt,group:bKt,image:_Kt,line:SKt,path:TKt,rect:IKt,rule:RKt,shape:MKt,symbol:PKt,text:qKt,trail:HKt};IXe={mark:null};YKt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];aH.prototype={toJSON(t){return aKe(this.root,t||0)},mark(t,r,n){r=r||this.root.items[0];let o=cKe(t,r);return r.items[n]=o,o.zindex&&(o.group.zdirty=!0),o}};M_.prototype={initialize(t,r,n){return this._el=t,this._obj=n||null,this.origin(r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,r,n){for(let o=t?t.length:0;--o>=0;)if(t[o].type===r&&(!n||t[o].handler===n))return o;return-1},handlers(t){let r=this._handlers,n=[];if(t)n.push(...r[this.eventName(t)]);else for(let o in r)n.push(...r[o]);return n},eventName(t){let r=t.indexOf(".");return r<0?t:t.slice(0,r)},handleHref(t,r,n){this._loader.sanitize(n,{context:"href"}).then(o=>{let i=new MouseEvent(t.type,t),s=I_(null,"a");for(let a in o)s.setAttribute(a,o[a]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(t,r,n){if(r&&r.tooltip!=null){r=XKt(r,t,this.canvas(),this._origin);let o=n&&r&&r.tooltip||null;this._tooltip.call(this._obj,this,t,r,o)}},getItemBoundingClientRect(t){let r=this.canvas();if(!r)return;let n=r.getBoundingClientRect(),o=this._origin,i=t.bounds,s=i.width(),a=i.height(),l=i.x1+o[0]+n.left,u=i.y1+o[1]+n.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};hy.prototype={initialize(t,r,n,o,i){return this._el=t,this.resize(r,n,o,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,r,n,o){return this._width=t,this._height=r,this._origin=n||[0,0],this._scale=o||1,this},dirty(){},render(t){let r=this;return r._call=function(){r._render(t)},r._call(),r._call=null,r},_render(){},renderAsync(t){let r=this.render(t);return this._ready?this._ready.then(()=>r):Promise.resolve(r)},_load(t,r){var n=this,o=n._loader[t](r);if(!n._ready){let i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return o},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};ZKt="keydown",QKt="keypress",JKt="keyup",dKe="dragenter",Vq="dragleave",pKe="dragover",B0e="mousedown",eZt="mouseup",Hq="mousemove",e5="mouseout",hKe="mouseover",Yq="click",tZt="dblclick",rZt="wheel",mKe="mousewheel",Xq="touchstart",Kq="touchmove",Zq="touchend",nZt=[ZKt,QKt,JKt,dKe,Vq,pKe,B0e,eZt,Hq,e5,hKe,Yq,tZt,rZt,mKe,Xq,Kq,Zq],$0e=Hq,o5=e5,z0e=Yq;oZt=t=>t===Xq||t===Kq||t===Zq?[Xq,Kq,Zq]:[t];Dt(JN,M_,{initialize(t,r,n){return this._canvas=t&&fye(t,"canvas"),[Yq,B0e,Hq,e5,Vq].forEach(o=>DXe(this,o)),M_.prototype.initialize.call(this,t,r,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:nZt,DOMMouseScroll(t){this.fire(mKe,t)},mousemove:NXe(Hq,hKe,e5),dragover:NXe(pKe,dKe,Vq),mouseout:OXe(e5),dragleave:OXe(Vq),mousedown(t){this._down=this._active,this.fire(B0e,t)},click(t){this._down===this._active&&(this.fire(Yq,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Xq,t,!0)},touchmove(t){this.fire(Kq,t,!0)},touchend(t){this.fire(Zq,t,!0),this._touch=null},fire(t,r,n){let o=n?this._touch:this._active,i=this._handlers[t];if(r.vegaType=t,t===z0e&&o&&o.href?this.handleHref(r,o,o.href):(t===$0e||t===o5)&&this.handleTooltip(r,o,t!==o5),i)for(let s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,r,o)},on(t,r){let n=this.eventName(t),o=this._handlers;return this._handlerIndex(o[n],t,r)<0&&(DXe(this,t),(o[n]||(o[n]=[])).push({type:t,handler:r})),this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&o.splice(i,1),this},pickEvent(t){let r=d5(t,this._canvas),n=this._origin;return this.pick(this._scene,r[0],r[1],r[0]-n[0],r[1]-n[1])},pick(t,r,n,o,i){let s=this.context();return xd[t.marktype].pick.call(this,s,t,r,n,o,i)}});aZt=sZt();FXe=hy.prototype,uZt=(t,r,n)=>new hu().set(0,0,r,n).translate(-t[0],-t[1]);Dt(Qq,hy,{initialize(t,r,n,o,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Wc(1,1,this._options.type),t&&this._canvas&&(lm(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),FXe.initialize.call(this,t,r,n,o,i)},resize(t,r,n,o){if(FXe.resize.call(this,t,r,n,o),this._canvas)lZt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let i=this._options.externalContext;i||pt("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){let r=this._tempb.clear().union(t.bounds),n=t.mark.group;for(;n;)r.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(r)},_render(t){let r=this.context(),n=this._origin,o=this._width,i=this._height,s=this._dirty,a=uZt(n,o,i);r.save();let l=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):cZt(r,a.intersect(s),n);return this.clear(-n[0],-n[1],o,i),this.draw(r,t,l),r.restore(),s.clear(),this},draw(t,r,n){let o=xd[r.marktype];r.clip&&sKt(t,r),o.draw.call(this,t,r,n),r.clip&&t.restore()},clear(t,r,n,o){let i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(t,r,n,o),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,r,n,o))}});U0e=(t,r)=>n=>{let o=n.target.__data__;o=Array.isArray(o)?o[0]:o,n.vegaType=n.type,r.call(t._obj,n,o)};Dt(dye,M_,{initialize(t,r,n){let o=this._svg;return o&&(o.removeEventListener(z0e,this._hrefHandler),o.removeEventListener($0e,this._tooltipHandler),o.removeEventListener(o5,this._tooltipHandler)),this._svg=o=t&&fye(t,"svg"),o&&(o.addEventListener(z0e,this._hrefHandler),o.addEventListener($0e,this._tooltipHandler),o.addEventListener(o5,this._tooltipHandler)),M_.prototype.initialize.call(this,t,r,n)},canvas(){return this._svg},on(t,r){let n=this.eventName(t),o=this._handlers;if(this._handlerIndex(o[n],t,r)<0){let s={type:t,handler:r,listener:U0e(this,r)};(o[n]||(o[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(t,r){let n=this.eventName(t),o=this._handlers[n],i=this._handlerIndex(o,t,r);return i>=0&&(this._svg&&this._svg.removeEventListener(n,o[i].listener),o.splice(i,1)),this}});gKe="aria-hidden",pye="aria-label",hye="role",mye="aria-roledescription",yKe="graphics-object",gye="graphics-symbol",bKe=(t,r,n)=>({[hye]:t,[mye]:r,[pye]:n||void 0}),fZt=ou(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),RXe={axis:{desc:"axis",caption:hZt},legend:{desc:"legend",caption:mZt},"title-text":{desc:"title",caption:t=>`Title text '${PXe(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${PXe(t)}'`}},MXe={ariaRole:hye,ariaRoleDescription:mye,description:pye};_Ke=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),bZt=t=>_Ke(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");SKe=t=>CKe(yye(),t)+"";Jq={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},EKe={fill:"none","stroke-miterlimit":10},Q4=0,jXe="http://www.w3.org/2000/xmlns/",Aa=n5.xmlns;D0e=hy.prototype;Dt(bye,hy,{initialize(t,r,n,o,i){return this._defs={},this._clearDefs(),t&&(this._svg=rf(t,0,"svg",Aa),this._svg.setAttributeNS(jXe,"xmlns",Aa),this._svg.setAttributeNS(jXe,"xmlns:xlink",n5["xmlns:xlink"]),this._svg.setAttribute("version",n5.version),this._svg.setAttribute("class","marks"),lm(t,1),this._root=rf(this._svg,Q4,"g",Aa),D_(this._root,EKe),lm(this._svg,Q4+1)),this.background(this._bgcolor),D0e.initialize.call(this,t,r,n,o,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),D0e.background.apply(this,arguments)},resize(t,r,n,o){return D0e.resize.call(this,t,r,n,o),this._svg&&(D_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){let t=this._svg,r=this._bgcolor;if(!t)return null;let n;r&&(t.removeAttribute("style"),n=rf(t,Q4,"rect",Aa),D_(n,{width:this._width,height:this._height,fill:r}));let o=SKe(t);return r&&(t.removeChild(n),this._svg.style.setProperty("background-color",r)),o},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),lm(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;let t=this._dirty;if(!t.length||!this._dirtyID)return!0;let r=++this._dirtyID,n,o,i,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(n=t[a],o=n.mark,o.marktype!==i&&(i=o.marktype,s=xd[i]),o.zdirty&&o.dirty!==r&&(this._dirtyAll=!1,LXe(n,r),o.items.forEach(c=>{c.dirty=r})),!o.zdirty){if(n.exit){s.nested&&o.items.length?(u=o.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?o.items[0]:n,n._update!==r&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,LXe(n,r)):this._update(s,n._svg,n),n._update=r)}return!this._dirtyAll},mark(t,r,n){if(!this.isDirty(r))return r._svg;let o=this._svg,i=xd[r.marktype],s=r.interactive===!1?"none":null,a=i.tag==="g",l=null,u=0,c=BXe(r,t,n,"g",o);c.setAttribute("class",fKe(r));let f=vKe(r);for(let p in f)mc(c,p,f[p]);a||mc(c,"pointer-events",s),mc(c,"clip-path",r.clip?H0e(this,r,r.group):null);let d=p=>{let h=this.isDirty(p),m=BXe(p,c,l,i.tag,o);h&&(this._update(i,m,p),a&&wZt(this,m,p)),l=m,++u};return i.nested?r.items.length&&d(r.items[0]):cm(r,d),lm(c,u),c},_update(t,r,n){dv=r,pu=r.__values__,xKe(t5,n),t.attr(t5,n,this);let o=SZt[t.type];o&&o.call(this,t,r,n),dv&&this.style(dv,n)},style(t,r){if(r!=null)for(let n in Jq){let o=n==="font"?f5(r):r[n];if(o===pu[n])continue;let i=Jq[n];o==null?t.removeAttribute(i):(V0e(o)&&(o=zXe(o,this._defs.gradient,TKe())),t.setAttribute(i,o+"")),pu[n]=o}},defs(){let t=this._svg,r=this._defs,n=r.el,o=0;for(let i in r.gradient)n||(r.el=n=rf(t,Q4+1,"defs",Aa)),o=xZt(n,r.gradient[i],o);for(let i in r.clipping)n||(r.el=n=rf(t,Q4+1,"defs",Aa)),o=vZt(n,r.clipping[i],o);n&&(o===0?(t.removeChild(n),r.el=null):lm(n,o))},_clearDefs(){let t=this._defs;t.gradient={},t.clipping={}}});dv=null,pu=null,SZt={group(t,r,n){let o=dv=r.childNodes[2];pu=o.__values__,t.foreground(t5,n,this),pu=r.__values__,dv=r.childNodes[1],t.content(t5,n,this);let i=dv=r.childNodes[0];t.background(t5,n,this);let s=n.mark.interactive===!1?"none":null;if(s!==pu.events&&(mc(o,"pointer-events",s),mc(i,"pointer-events",s),pu.events=s),n.strokeForeground&&n.stroke){let a=n.fill;mc(o,"display",null),this.style(i,n),mc(i,"stroke",null),a&&(n.fill=null),pu=o.__values__,this.style(o,n),a&&(n.fill=a),dv=null}else mc(o,"display","none")},image(t,r,n){n.smooth===!1?(N0e(r,"image-rendering","optimizeSpeed"),N0e(r,"image-rendering","pixelated")):N0e(r,"image-rendering",null)},text(t,r,n){let o=c5(n),i,s,a,l;Hr(o)?(s=o.map(u=>R_(n,u)),i=s.join(`
`),i!==pu.text&&(lm(r,0),a=r.ownerDocument,l=F_(n),s.forEach((u,c)=>{let f=I_(a,"tspan",Aa);f.__data__=n,f.textContent=u,c&&(f.setAttribute("x",0),f.setAttribute("dy",l)),r.appendChild(f)}),pu.text=i)):(s=R_(n,o),s!==pu.text&&(r.textContent=s,pu.text=s)),mc(r,"font-family",f5(n)),mc(r,"font-size",py(n)+"px"),mc(r,"font-style",n.fontStyle),mc(r,"font-variant",n.fontVariant),mc(r,"font-weight",n.fontWeight)}};Dt(xye,hy,{svg(){return this._text},_render(t){let r=yye();r.open("svg",an({},n5,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&r.open("rect",{width:this._width,height:this._height,fill:n}).close(),r.open("g",EKe,{transform:"translate("+this._origin+")"}),this.mark(r,t),r.close(),this.defs(r),this._text=r.close()+"",this},mark(t,r){let n=xd[r.marktype],o=n.tag,i=[xKe,n.attr];t.open("g",{class:fKe(r),"clip-path":r.clip?H0e(this,r,r.group):null},vKe(r),{"pointer-events":o!=="g"&&r.interactive===!1?"none":null});let s=a=>{let l=this.href(a);if(l&&t.open("a",l),t.open(o,this.attr(r,a,i,o!=="g"?o:null)),o==="text"){let u=c5(a);if(Hr(u)){let c={x:0,dy:F_(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(R_(a,u[f])).close()}else t.text(R_(a,u))}else if(o==="g"){let u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(r,a,n.background,"bgrect")).close(),t.open("g",this.attr(r,a,n.content)),cm(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(r,a,n.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(r,a,n.foreground,"bgfore")).close()}t.close(),l&&t.close()};return n.nested?r.items&&r.items.length&&s(r.items[0]):cm(r,s),t.close()},href(t){let r=t.href,n;if(r){if(n=this._hrefs&&this._hrefs[r])return n;this.sanitizeURL(r).then(o=>{o["xlink:href"]=o.href,o.href=null,(this._hrefs||(this._hrefs={}))[r]=o})}return null},attr(t,r,n,o){let i={},s=(a,l,u,c)=>{i[c||a]=l};return Array.isArray(n)?n.forEach(a=>a(s,r,this)):n(s,r,this),o&&EZt(i,r,t,o,this._defs),i},defs(t){let r=this._defs.gradient,n=this._defs.clipping;if(Object.keys(r).length+Object.keys(n).length!==0){t.open("defs");for(let i in r){let s=r[i],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Gq+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),t.close(),t.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(let i in n){let s=n[i];t.open("clipPath",{id:i}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});AKe="canvas",kKe="png",IKe="svg",DKe="none",pv={Canvas:AKe,PNG:kKe,SVG:IKe,None:DKe},ZN={};ZN[AKe]=ZN[kKe]={renderer:Qq,headless:Qq,handler:JN};ZN[IKe]={renderer:bye,headless:xye,handler:dye};ZN[DKe]={};O0e=new hu;kZt=1e-9});var Dye={};fn(Dye,{label:()=>Iye});function RZt(t,r){let n=t.bitmap();return(r||[]).forEach(o=>n.set(t(o.boundary[0]),t(o.boundary[3]))),[n,void 0]}function MZt(t,r,n,o){let i=t.width,s=t.height,a=n||o,l=Wc(i,s).getContext("2d");r.forEach(y=>PKe(l,y,a));let u=new Uint32Array(l.getImageData(0,0,i,s).data.buffer),c=t.bitmap(),f=a&&t.bitmap(),d,p,h,m,g;for(p=0;p<s;++p)for(d=0;d<i;++d)g=u[p*i+d]&NZt,g&&(h=t(d),m=t(p),o||c.set(h,m),a&&g^OZt&&f.set(h,m));return[c,f]}function PKe(t,r,n){if(!r.length)return;let o=r[0].mark.marktype;o==="group"?r.forEach(i=>{i.items.forEach(s=>PKe(t,s.items,n))}):xd[o].draw(t,{items:n?r.map(PZt):r})}function PZt(t){let r=nE(t,{});return r.stroke&&(r.strokeOpacity=1),r.fill&&(r.fillOpacity=FZt,r.stroke="#000",r.strokeOpacity=1,r.strokeWidth=2),r}function jZt(t,r){let n=new Uint32Array(~~((t*r+m5)/m5));function o(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{let l=a*t+s;return n[l>>>hv]&1<<(l&gc)},set:(s,a)=>{let l=a*t+s;o(l>>>hv,1<<(l&gc))},clear:(s,a)=>{let l=a*t+s;i(l>>>hv,~(1<<(l&gc)))},getRange:(s,a,l,u)=>{let c=u,f,d,p,h;for(;c>=a;--c)if(f=c*t+s,d=c*t+l,p=f>>>hv,h=d>>>hv,p===h){if(n[p]&P_[f&gc]&fm[(d&gc)+1])return!0}else{if(n[p]&P_[f&gc]||n[h]&fm[(d&gc)+1])return!0;for(let m=p+1;m<h;++m)if(n[m])return!0}return!1},setRange:(s,a,l,u)=>{let c,f,d,p,h;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>hv,p=f>>>hv,d===p)o(d,P_[c&gc]&fm[(f&gc)+1]);else for(o(d,P_[c&gc]),o(p,fm[(f&gc)+1]),h=d+1;h<p;++h)o(h,4294967295)},clearRange:(s,a,l,u)=>{let c,f,d,p,h;for(;a<=u;++a)if(c=a*t+s,f=a*t+l,d=c>>>hv,p=f>>>hv,d===p)i(d,fm[c&gc]|P_[(f&gc)+1]);else for(i(d,fm[c&gc]),i(p,P_[(f&gc)+1]),h=d+1;h<p;++h)i(h,0)},outOfBounds:(s,a,l,u)=>s<0||a<0||u>=r||l>=t}}function LZt(t,r,n){let o=Math.max(1,Math.sqrt(t*r/1e6)),i=~~((t+2*n+o)/o),s=~~((r+2*n+o)/o),a=l=>~~((l+n)/o);return a.invert=l=>l*o-n,a.bitmap=()=>jZt(i,s),a.ratio=o,a.padding=n,a.width=t,a.height=r,a}function BZt(t,r,n,o){let i=t.width,s=t.height;return function(a){let l=a.datum.datum.items[o].items,u=l.length,c=a.datum.fontSize,f=um.width(a.datum,a.datum.text),d=0,p,h,m,g,y,b,x;for(let v=0;v<u;++v)p=l[v].x,m=l[v].y,h=l[v].x2===void 0?p:l[v].x2,g=l[v].y2===void 0?m:l[v].y2,y=(p+h)/2,b=(m+g)/2,x=Math.abs(h-p+g-m),x>=d&&(d=x,a.x=y,a.y=b);return y=f/2,b=c/2,p=a.x-y,h=a.x+y,m=a.y-b,g=a.y+b,a.align="center",p<0&&h<=i?a.align="left":0<=p&&i<h&&(a.align="right"),a.baseline="middle",m<0&&g<=s?a.baseline="top":0<=m&&s<g&&(a.baseline="bottom"),!0}}function lH(t,r,n,o,i,s){let a=n/2;return t-a<0||t+a>i||r-(a=o/2)<0||r+a>s}function j_(t,r,n,o,i,s,a,l){let u=i*s/(o*2),c=t(r-u),f=t(r+u),d=t(n-(s=s/2)),p=t(n+s);return a.outOfBounds(c,d,f,p)||a.getRange(c,d,f,p)||l&&l.getRange(c,d,f,p)}function $Zt(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1];function u(c,f,d,p,h){let m=t.invert(c),g=t.invert(f),y=d,b=s,x;if(!lH(m,g,p,h,i,s)&&!j_(t,m,g,h,p,y,a,l)&&!j_(t,m,g,h,p,h,a,null)){for(;b-y>=1;)x=(y+b)/2,j_(t,m,g,h,p,x,a,l)?b=x:y=x;if(y>d)return[m,g,y,!0]}}return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,h=um.width(c.datum,c.datum.text),m=n?p:0,g=!1,y=!1,b=0,x,v,w,_,C,S,E,A,N,k,R,I,L,j,M,V,G;for(let U=0;U<d;++U){for(x=f[U].x,w=f[U].y,v=f[U].x2===void 0?x:f[U].x2,_=f[U].y2===void 0?w:f[U].y2,x>v&&(G=x,x=v,v=G),w>_&&(G=w,w=_,_=G),N=t(x),R=t(v),k=~~((N+R)/2),I=t(w),j=t(_),L=~~((I+j)/2),E=k;E>=N;--E)for(A=L;A>=I;--A)V=u(E,A,m,h,p),V&&([c.x,c.y,m,g]=V);for(E=k;E<=R;++E)for(A=L;A<=j;++A)V=u(E,A,m,h,p),V&&([c.x,c.y,m,g]=V);!g&&!n&&(M=Math.abs(v-x+_-w),C=(x+v)/2,S=(w+_)/2,M>=b&&!lH(C,S,h,p,i,s)&&!j_(t,C,S,p,h,p,a,null)&&(b=M,c.x=C,c.y=S,y=!0))}return g||y?(C=h/2,S=p/2,a.setRange(t(c.x-C),t(c.y-S),t(c.x+C),t(c.y+S)),c.align="center",c.baseline="middle",!0):!1}}function VZt(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=t.bitmap();return function(c){let f=c.datum.datum.items[o].items,d=f.length,p=c.datum.fontSize,h=um.width(c.datum,c.datum.text),m=[],g=n?p:0,y=!1,b=!1,x=0,v,w,_,C,S,E,A,N,k,R,I,L;for(let j=0;j<d;++j){for(v=f[j].x,_=f[j].y,w=f[j].x2===void 0?v:f[j].x2,C=f[j].y2===void 0?_:f[j].y2,m.push([t((v+w)/2),t((_+C)/2)]);m.length;)if([A,N]=m.pop(),!(a.get(A,N)||l.get(A,N)||u.get(A,N))){u.set(A,N);for(let M=0;M<4;++M)S=A+zZt[M],E=N+UZt[M],u.outOfBounds(S,E,S,E)||m.push([S,E]);if(S=t.invert(A),E=t.invert(N),k=g,R=s,!lH(S,E,h,p,i,s)&&!j_(t,S,E,p,h,k,a,l)&&!j_(t,S,E,p,h,p,a,null)){for(;R-k>=1;)I=(k+R)/2,j_(t,S,E,p,h,I,a,l)?R=I:k=I;k>g&&(c.x=S,c.y=E,g=k,y=!0)}}!y&&!n&&(L=Math.abs(w-v+C-_),S=(v+w)/2,E=(_+C)/2,L>=x&&!lH(S,E,h,p,i,s)&&!j_(t,S,E,p,h,p,a,null)&&(x=L,c.x=S,c.y=E,b=!0))}return y||b?(S=h/2,E=p/2,a.setRange(t(c.x-S),t(c.y-E),t(c.x+S),t(c.y+E)),c.align="center",c.baseline="middle",!0):!1}}function qZt(t,r,n,o){let i=t.width,s=t.height,a=r[0],l=r[1],u=o.length;return function(c){let f=c.boundary,d=c.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>s)return!1;let p=0,h,m,g,y,b,x,v,w,_,C,S,E,A,N,k;for(let R=0;R<u;++R){if(h=(n[R]&3)-1,m=(n[R]>>>2&3)-1,g=h===0&&m===0||o[R]<0,y=h&&m?Math.SQRT1_2:1,b=o[R]<0?-1:1,x=f[1+h]+o[R]*h*y,S=f[4+m]+b*d*m/2+o[R]*m*y,w=S-d/2,_=S+d/2,E=t(x),N=t(w),k=t(_),!p)if(MKe(E,E,N,k,a,l,x,x,w,_,f,g))p=um.width(c.datum,c.datum.text);else continue;if(C=x+b*p*h/2,x=C-p/2,v=C+p/2,E=t(x),A=t(v),MKe(E,A,N,k,a,l,x,v,w,_,f,g))return c.x=h?h*b<0?v:x:C,c.y=m?m*b<0?_:w:S,c.align=GZt[h*b+1],c.baseline=WZt[m*b+1],a.setRange(E,N,A,k),!0}return!1}}function MKe(t,r,n,o,i,s,a,l,u,c,f,d){return!(i.outOfBounds(t,n,r,o)||(d&&s?s.getRange(t,n,r,o)||!HZt(a,u,l,c,f):i.getRange(t,n,r,o)))}function HZt(t,r,n,o,i){return i[0]<=t&&n<=i[2]&&i[3]<=r&&o<=i[5]}function KZt(t,r,n,o,i,s,a,l,u,c,f){if(!t.length)return t;let d=Math.max(o.length,i.length),p=ZZt(o,d),h=QZt(i,d),m=JZt(t[0].datum),g=m==="group"&&t[0].datum.items[u].marktype,y=g==="area",b=eQt(m,g,l,u),x=LZt(r[0],r[1],c),v=y&&f==="naive",w=t.map(S=>({datum:S,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(S)})),_;if(!v){n&&w.sort((E,A)=>n(E.datum,A.datum));let S=!1;for(let E=0;E<h.length&&!S;++E)S=h[E]===5||p[E]<0;m&&(a||y)&&(s=[t.map(E=>E.datum)].concat(s)),_=s.length?MZt(x,s,S,y):RZt(x,a&&w)}let C=y?XZt[f](x,_,a,u):qZt(x,_,h,p);return w.forEach(S=>S.opacity=+C(S)),w}function ZZt(t,r){let n=new Float64Array(r),o=t.length;for(let i=0;i<o;++i)n[i]=t[i]||0;for(let i=o;i<r;++i)n[i]=n[o-1];return n}function QZt(t,r){let n=new Int8Array(r),o=t.length;for(let i=0;i<o;++i)n[i]|=YZt[t[i]];for(let i=o;i<r;++i)n[i]=n[o-1];return n}function JZt(t){return t&&t.mark&&t.mark.marktype}function eQt(t,r,n,o){let i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>i(s.datum):r==="line"?s=>{let a=s.datum.items[o].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{let a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}function Iye(t){et.call(this,null,t)}var NZt,OZt,FZt,hv,gc,m5,P_,fm,zZt,UZt,GZt,WZt,_ye,Sye,Cye,Eye,Tye,Aye,YZt,XZt,kye,jKe,LKe=D(()=>{"use strict";DD();qa();h5();Os();NZt=4278190080,OZt=268435456,FZt=.0625;hv=5,gc=31,m5=32,P_=new Uint32Array(m5+1),fm=new Uint32Array(m5+1);fm[0]=0;P_[0]=~fm[0];for(let t=1;t<=m5;++t)fm[t]=fm[t-1]<<1|1,P_[t]=~fm[t];zZt=[-1,-1,1,1],UZt=[-1,1,-1,1];GZt=["right","center","left"],WZt=["bottom","middle","top"];_ye=0,Sye=4,Cye=8,Eye=0,Tye=1,Aye=2,YZt={"top-left":_ye+Eye,top:_ye+Tye,"top-right":_ye+Aye,left:Sye+Eye,middle:Sye+Tye,right:Sye+Aye,"bottom-left":Cye+Eye,bottom:Cye+Tye,"bottom-right":Cye+Aye},XZt={naive:BZt,"reduced-search":$Zt,floodfill:VZt};kye=["x","y","opacity","align","baseline"],jKe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];Iye.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:jKe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:kye.length,default:kye}]};Dt(Iye,et,{transform(t,r){function n(s){let a=t[s];return In(a)&&r.modified(a.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&pt("Size parameter should be specified as a [width, height] array.");let i=t.as||kye;return KZt(r.materialize(r.SOURCE).source,t.size,t.sort,Lr(t.offset||1),Lr(t.anchor||jKe),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(s=>{let a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),r.reflow(o).modifies(i)}})});var Rye={};fn(Rye,{loess:()=>Oye,regression:()=>Fye});function BKe(t,r){var n=[],o=function(f){return f(l)},i,s,a,l,u,c;if(r==null)n.push(t);else for(i={},s=0,a=t.length;s<a;++s)l=t[s],u=r.map(o),c=i[u],c||(i[u]=c=[],c.dims=u,n.push(c)),c.push(l);return n}function Oye(t){et.call(this,null,t)}function Fye(t){et.call(this,null,t)}var Nye,tQt,$Ke=D(()=>{"use strict";vD();qa();Os();Oye.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Dt(Oye,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=BKe(o,t.groupby),s=(t.groupby||[]).map(ki),a=s.length,l=t.as||[ki(t.x),ki(t.y)],u=[];i.forEach(c=>{Cle(c,t.x,t.y,t.bandwidth||.3).forEach(f=>{let d={};for(let p=0;p<a;++p)d[s[p]]=c.dims[p];d[l[0]]=f[0],d[l[1]]=f[1],u.push(Dn(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});Nye={linear:T9,log:vle,exp:wle,pow:_le,quad:A9,poly:Sle},tQt=(t,r)=>t==="poly"?r:t==="quad"?2:1;Fye.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Nye)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Dt(Fye,et,{transform(t,r){let n=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||t.modified()){let o=r.materialize(r.SOURCE).source,i=BKe(o,t.groupby),s=(t.groupby||[]).map(ki),a=t.method||"linear",l=t.order||3,u=tQt(a,l),c=t.as||[ki(t.x),ki(t.y)],f=Nye[a],d=[],p=t.extent;Rr(Nye,a)||pt("Invalid regression method: "+a),p!=null&&a==="log"&&p[0]<=0&&(r.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(h=>{if(h.length<=u){r.dataflow.warn("Skipping regression with more parameters than data points.");return}let g=f(h,t.x,t.y,l);if(t.params){d.push(Dn({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}let y=p||Oh(h,t.x),b=x=>{let v={};for(let w=0;w<s.length;++w)v[s[w]]=h.dims[w];v[c[0]]=x[0],v[c[1]]=x[1],d.push(Dn(v))};a==="linear"?y.forEach(x=>b([x,g.predict(x)])):xD(g.predict,y,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}})});function rQt(t,r){let n=t/(Math.abs(t)+Math.abs(r));return(r>0?3-n:1+n)/4}function Mye(t,r,n,o){let i=t-n,s=r-o;return i*i+s*s}function Pye(t,r,n,o,i,s){let a=(o-r)*(i-t),l=(n-t)*(s-r);return Math.abs(a-l)>=33306690738754716e-32*Math.abs(a+l)?a-l:0}function cH(t,r,n,o,i,s){return(Pye(i,s,t,r,n,o)||Pye(t,r,n,o,i,s)||Pye(n,o,i,s,t,r))<0}function nQt(t,r,n,o,i,s,a,l){let u=t-a,c=r-l,f=n-a,d=o-l,p=i-a,h=s-l,m=u*u+c*c,g=f*f+d*d,y=p*p+h*h;return u*(d*y-g*h)-c*(f*y-g*p)+m*(f*h-d*p)<0}function oQt(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),h=(c*f-l*d)*p,m=(a*d-u*f)*p;return h*h+m*m}function iQt(t,r,n,o,i,s){let a=n-t,l=o-r,u=i-t,c=s-r,f=a*a+l*l,d=u*u+c*c,p=.5/(a*c-l*u),h=t+(c*f-l*d)*p,m=r+(a*d-u*f)*p;return{x:h,y:m}}function eO(t,r,n,o){if(o-n<=20)for(let i=n+1;i<=o;i++){let s=t[i],a=r[s],l=i-1;for(;l>=n&&r[t[l]]>a;)t[l+1]=t[l--];t[l+1]=s}else{let i=n+o>>1,s=n+1,a=o;g5(t,i,s),r[t[n]]>r[t[o]]&&g5(t,n,o),r[t[s]]>r[t[o]]&&g5(t,s,o),r[t[n]]>r[t[s]]&&g5(t,n,s);let l=t[s],u=r[l];for(;;){do s++;while(r[t[s]]<u);do a--;while(r[t[a]]>u);if(a<s)break;g5(t,s,a)}t[n+1]=t[a],t[a]=l,o-s+1>=a-n?(eO(t,r,s,o),eO(t,r,n,a-1)):(eO(t,r,n,a-1),eO(t,r,s,o))}}function g5(t,r,n){let o=t[r];t[r]=t[n],t[n]=o}function sQt(t){return t[0]}function aQt(t){return t[1]}var zKe,uH,y5,UKe=D(()=>{"use strict";zKe=Math.pow(2,-52),uH=new Uint32Array(512),y5=class t{static from(r,n=sQt,o=aQt){let i=r.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){let l=r[a];s[2*a]=n(l),s[2*a+1]=o(l)}return new t(s)}constructor(r){let n=r.length>>1;if(n>0&&typeof r[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=r;let o=Math.max(2*n-5,0);this._triangles=new Uint32Array(o*3),this._halfedges=new Int32Array(o*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:r,_hullPrev:n,_hullNext:o,_hullTri:i,_hullHash:s}=this,a=r.length>>1,l=1/0,u=1/0,c=-1/0,f=-1/0;for(let N=0;N<a;N++){let k=r[2*N],R=r[2*N+1];k<l&&(l=k),R<u&&(u=R),k>c&&(c=k),R>f&&(f=R),this._ids[N]=N}let d=(l+c)/2,p=(u+f)/2,h=1/0,m,g,y;for(let N=0;N<a;N++){let k=Mye(d,p,r[2*N],r[2*N+1]);k<h&&(m=N,h=k)}let b=r[2*m],x=r[2*m+1];h=1/0;for(let N=0;N<a;N++){if(N===m)continue;let k=Mye(b,x,r[2*N],r[2*N+1]);k<h&&k>0&&(g=N,h=k)}let v=r[2*g],w=r[2*g+1],_=1/0;for(let N=0;N<a;N++){if(N===m||N===g)continue;let k=oQt(b,x,v,w,r[2*N],r[2*N+1]);k<_&&(y=N,_=k)}let C=r[2*y],S=r[2*y+1];if(_===1/0){for(let R=0;R<a;R++)this._dists[R]=r[2*R]-r[0]||r[2*R+1]-r[1];eO(this._ids,this._dists,0,a-1);let N=new Uint32Array(a),k=0;for(let R=0,I=-1/0;R<a;R++){let L=this._ids[R];this._dists[L]>I&&(N[k++]=L,I=this._dists[L])}this.hull=N.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(cH(b,x,v,w,C,S)){let N=g,k=v,R=w;g=y,v=C,w=S,y=N,C=k,S=R}let E=iQt(b,x,v,w,C,S);this._cx=E.x,this._cy=E.y;for(let N=0;N<a;N++)this._dists[N]=Mye(r[2*N],r[2*N+1],E.x,E.y);eO(this._ids,this._dists,0,a-1),this._hullStart=m;let A=3;o[m]=n[y]=g,o[g]=n[m]=y,o[y]=n[g]=m,i[m]=0,i[g]=1,i[y]=2,s.fill(-1),s[this._hashKey(b,x)]=m,s[this._hashKey(v,w)]=g,s[this._hashKey(C,S)]=y,this.trianglesLen=0,this._addTriangle(m,g,y,-1,-1,-1);for(let N=0,k,R;N<this._ids.length;N++){let I=this._ids[N],L=r[2*I],j=r[2*I+1];if(N>0&&Math.abs(L-k)<=zKe&&Math.abs(j-R)<=zKe||(k=L,R=j,I===m||I===g||I===y))continue;let M=0;for(let X=0,pe=this._hashKey(L,j);X<this._hashSize&&(M=s[(pe+X)%this._hashSize],!(M!==-1&&M!==o[M]));X++);M=n[M];let V=M,G;for(;G=o[V],!cH(L,j,r[2*V],r[2*V+1],r[2*G],r[2*G+1]);)if(V=G,V===M){V=-1;break}if(V===-1)continue;let U=this._addTriangle(V,I,o[V],-1,-1,i[V]);i[I]=this._legalize(U+2),i[V]=U,A++;let Y=o[V];for(;G=o[Y],cH(L,j,r[2*Y],r[2*Y+1],r[2*G],r[2*G+1]);)U=this._addTriangle(Y,I,G,i[I],-1,i[Y]),i[I]=this._legalize(U+2),o[Y]=Y,A--,Y=G;if(V===M)for(;G=n[V],cH(L,j,r[2*G],r[2*G+1],r[2*V],r[2*V+1]);)U=this._addTriangle(G,I,V,-1,i[V],i[G]),this._legalize(U+2),i[G]=U,o[V]=V,A--,V=G;this._hullStart=n[I]=V,o[V]=n[Y]=I,o[I]=Y,s[this._hashKey(L,j)]=I,s[this._hashKey(r[2*V],r[2*V+1])]=V}this.hull=new Uint32Array(A);for(let N=0,k=this._hullStart;N<A;N++)this.hull[N]=k,k=o[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(r,n){return Math.floor(rQt(r-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(r){let{_triangles:n,_halfedges:o,coords:i}=this,s=0,a=0;for(;;){let l=o[r],u=r-r%3;if(a=u+(r+2)%3,l===-1){if(s===0)break;r=uH[--s];continue}let c=l-l%3,f=u+(r+1)%3,d=c+(l+2)%3,p=n[a],h=n[r],m=n[f],g=n[d];if(nQt(i[2*p],i[2*p+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*g],i[2*g+1])){n[r]=g,n[l]=p;let b=o[d];if(b===-1){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=r;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(r,b),this._link(l,o[a]),this._link(a,d);let x=c+(l+1)%3;s<uH.length&&(uH[s++]=x)}else{if(s===0)break;r=uH[--s]}}return a}_link(r,n){this._halfedges[r]=n,n!==-1&&(this._halfedges[n]=r)}_addTriangle(r,n,o,i,s,a){let l=this.trianglesLen;return this._triangles[l]=r,this._triangles[l+1]=n,this._triangles[l+2]=o,this._link(l,i),this._link(l+1,s),this._link(l+2,a),this.trianglesLen+=3,l}}});var dm,jye=D(()=>{"use strict";dm=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(r,n){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(r,n){this._+=`L${this._x1=+r},${this._y1=+n}`}arc(r,n,o){r=+r,n=+n,o=+o;let i=r+o,s=n;if(o<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),o&&(this._+=`A${o},${o},0,1,1,${r-o},${n}A${o},${o},0,1,1,${this._x1=i},${this._y1=s}`)}rect(r,n,o,i){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${+o}v${+i}h${-o}Z`}value(){return this._||null}}});var wT,Lye=D(()=>{"use strict";wT=class{constructor(){this._=[]}moveTo(r,n){this._.push([r,n])}closePath(){this._.push(this._[0].slice())}lineTo(r,n){this._.push([r,n])}value(){return this._.length?this._:null}}});var fH,VKe=D(()=>{"use strict";jye();Lye();fH=class{constructor(r,[n,o,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=r,this._circumcenters=new Float64Array(r.points.length*2),this.vectors=new Float64Array(r.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=o,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:r,hull:n,triangles:o},vectors:i}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let h=0,m=0,g=o.length,y,b;h<g;h+=3,m+=2){let x=o[h]*2,v=o[h+1]*2,w=o[h+2]*2,_=r[x],C=r[x+1],S=r[v],E=r[v+1],A=r[w],N=r[w+1],k=S-_,R=E-C,I=A-_,L=N-C,j=k*k+R*R,M=I*I+L*L,V=(k*L-R*I)*2;if(!V)y=(_+A)/2-1e8*L,b=(C+N)/2+1e8*I;else if(Math.abs(V)<1e-8)y=(_+A)/2,b=(C+N)/2;else{let G=1/V;y=_+(L*j-R*M)*G,b=C+(k*M-I*j)*G}s[m]=y,s[m+1]=b}let a=n[n.length-1],l,u=a*4,c,f=r[2*a],d,p=r[2*a+1];i.fill(0);for(let h=0;h<n.length;++h)a=n[h],l=u,c=f,d=p,u=a*4,f=r[2*a],p=r[2*a+1],i[l+2]=i[u]=d-p,i[l+3]=i[u+1]=f-c}render(r){let n=r==null?r=new dm:void 0,{delaunay:{halfedges:o,inedges:i,hull:s},circumcenters:a,vectors:l}=this;if(s.length<=1)return null;for(let f=0,d=o.length;f<d;++f){let p=o[f];if(p<f)continue;let h=Math.floor(f/3)*2,m=Math.floor(p/3)*2,g=a[h],y=a[h+1],b=a[m],x=a[m+1];this._renderSegment(g,y,b,x,r)}let u,c=s[s.length-1];for(let f=0;f<s.length;++f){u=c,c=s[f];let d=Math.floor(i[c]/3)*2,p=a[d],h=a[d+1],m=u*4,g=this._project(p,h,l[m+2],l[m+3]);g&&this._renderSegment(p,h,g[0],g[1],r)}return n&&n.value()}renderBounds(r){let n=r==null?r=new dm:void 0;return r.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(r,n){let o=n==null?n=new dm:void 0,i=this._clip(r);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),o&&o.value()}*cellPolygons(){let{delaunay:{points:r}}=this;for(let n=0,o=r.length/2;n<o;++n){let i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(r){let n=new wT;return this.renderCell(r,n),n.value()}_renderSegment(r,n,o,i,s){let a,l=this._regioncode(r,n),u=this._regioncode(o,i);l===0&&u===0?(s.moveTo(r,n),s.lineTo(o,i)):(a=this._clipSegment(r,n,o,i,l,u))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(r,n,o){return n=+n,n!==n||(o=+o,o!==o)?!1:this.delaunay._step(r,n,o)===r}*neighbors(r){let n=this._clip(r);if(n)for(let o of this.delaunay.neighbors(r)){let i=this._clip(o);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let l=0,u=i.length;l<u;l+=2)if(n[s]==i[l]&&n[s+1]==i[l+1]&&n[(s+2)%a]==i[(l+u-2)%u]&&n[(s+3)%a]==i[(l+u-1)%u]){yield o;break e}}}}_cell(r){let{circumcenters:n,delaunay:{inedges:o,halfedges:i,triangles:s}}=this,a=o[r];if(a===-1)return null;let l=[],u=a;do{let c=Math.floor(u/3);if(l.push(n[c*2],n[c*2+1]),u=u%3===2?u-2:u+1,s[u]!==r)break;u=i[u]}while(u!==a&&u!==-1);return l}_clip(r){if(r===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(r);if(n===null)return null;let{vectors:o}=this,i=r*4;return o[i]||o[i+1]?this._clipInfinite(r,n,o[i],o[i+1],o[i+2],o[i+3]):this._clipFinite(r,n)}_clipFinite(r,n){let o=n.length,i=null,s,a,l=n[o-2],u=n[o-1],c,f=this._regioncode(l,u),d,p;for(let h=0;h<o;h+=2)if(s=l,a=u,l=n[h],u=n[h+1],c=f,f=this._regioncode(l,u),c===0&&f===0)d=p,p=0,i?i.push(l,u):i=[l,u];else{let m,g,y,b,x;if(c===0){if((m=this._clipSegment(s,a,l,u,c,f))===null)continue;[g,y,b,x]=m}else{if((m=this._clipSegment(l,u,s,a,f,c))===null)continue;[b,x,g,y]=m,d=p,p=this._edgecode(g,y),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(g,y):i=[g,y]}d=p,p=this._edgecode(b,x),d&&p&&this._edge(r,d,p,i,i.length),i?i.push(b,x):i=[b,x]}if(i)d=p,p=this._edgecode(i[0],i[1]),d&&p&&this._edge(r,d,p,i,i.length);else if(this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(r,n,o,i,s,a){for(;;){if(s===0&&a===0)return[r,n,o,i];if(s&a)return null;let l,u,c=s||a;c&8?(l=r+(o-r)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=r+(o-r)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-r)/(o-r),l=this.xmax):(u=n+(i-n)*(this.xmin-r)/(o-r),l=this.xmin),s?(r=l,n=u,s=this._regioncode(r,n)):(o=l,i=u,a=this._regioncode(o,i))}}_clipInfinite(r,n,o,i,s,a){let l=Array.from(n),u;if((u=this._project(l[0],l[1],o,i))&&l.unshift(u[0],u[1]),(u=this._project(l[l.length-2],l[l.length-1],s,a))&&l.push(u[0],u[1]),l=this._clipFinite(r,l))for(let c=0,f=l.length,d,p=this._edgecode(l[f-2],l[f-1]);c<f;c+=2)d=p,p=this._edgecode(l[c],l[c+1]),d&&p&&(c=this._edge(r,d,p,l,c),f=l.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(r,n,o,i,s){for(;n!==o;){let a,l;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,l=this.ymin;break}(i[s]!==a||i[s+1]!==l)&&this.contains(r,a,l)&&(i.splice(s,0,a,l),s+=2)}if(i.length>4)for(let a=0;a<i.length;a+=2){let l=(a+2)%i.length,u=(a+4)%i.length;(i[a]===i[l]&&i[l]===i[u]||i[a+1]===i[l+1]&&i[l+1]===i[u+1])&&(i.splice(l,2),a-=2)}return s}_project(r,n,o,i){let s=1/0,a,l,u;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(u=this.ymin,l=r+(s=a)*o)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(u=this.ymax,l=r+(s=a)*o)}if(o>0){if(r>=this.xmax)return null;(a=(this.xmax-r)/o)<s&&(l=this.xmax,u=n+(s=a)*i)}else if(o<0){if(r<=this.xmin)return null;(a=(this.xmin-r)/o)<s&&(l=this.xmin,u=n+(s=a)*i)}return[l,u]}_edgecode(r,n){return(r===this.xmin?1:r===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(r,n){return(r<this.xmin?1:r>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}});function uQt(t){return t[0]}function cQt(t){return t[1]}function fQt(t){let{triangles:r,coords:n}=t;for(let o=0;o<r.length;o+=3){let i=2*r[o],s=2*r[o+1],a=2*r[o+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function dQt(t,r,n){return[t+Math.sin(t+r)*n,r+Math.cos(t-r)*n]}function pQt(t,r,n,o){let i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){let l=t[a];s[a*2]=r.call(o,l,a,t),s[a*2+1]=n.call(o,l,a,t)}return s}function*hQt(t,r,n,o){let i=0;for(let s of t)yield r.call(o,s,i,t),yield n.call(o,s,i,t),++i}var lQt,tO,b5,GKe=D(()=>{"use strict";UKe();jye();Lye();VKe();lQt=2*Math.PI,tO=Math.pow;b5=class t{static from(r,n=uQt,o=cQt,i){return new t("length"in r?pQt(r,n,o,i):Float64Array.from(hQt(r,n,o,i)))}constructor(r){this._delaunator=new y5(r),this.inedges=new Int32Array(r.length/2),this._hullIndex=new Int32Array(r.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let r=this._delaunator,n=this.points;if(r.hull&&r.hull.length>2&&fQt(r)){this.collinear=Int32Array.from({length:n.length/2},(p,h)=>h).sort((p,h)=>n[2*p]-n[2*h]||n[2*p+1]-n[2*h+1]);let u=this.collinear[0],c=this.collinear[this.collinear.length-1],f=[n[2*u],n[2*u+1],n[2*c],n[2*c+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,h=n.length/2;p<h;++p){let m=dQt(n[2*p],n[2*p+1],d);n[2*p]=m[0],n[2*p+1]=m[1]}this._delaunator=new y5(n)}else delete this.collinear;let o=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let u=0,c=o.length;u<c;++u){let f=s[u%3===2?u-2:u+1];(o[u]===-1||a[f]===-1)&&(a[f]=u)}for(let u=0,c=i.length;u<c;++u)l[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],a[i[0]]=1,i.length===2&&(a[i[1]]=0))}voronoi(r){return new fH(this,r)}*neighbors(r){let{inedges:n,hull:o,_hullIndex:i,halfedges:s,triangles:a,collinear:l}=this;if(l){let d=l.indexOf(r);d>0&&(yield l[d-1]),d<l.length-1&&(yield l[d+1]);return}let u=n[r];if(u===-1)return;let c=u,f=-1;do{if(yield f=a[c],c=c%3===2?c-2:c+1,a[c]!==r)return;if(c=s[c],c===-1){let d=o[(i[r]+1)%o.length];d!==f&&(yield d);return}}while(c!==u)}find(r,n,o=0){if(r=+r,r!==r||(n=+n,n!==n))return-1;let i=o,s;for(;(s=this._step(o,r,n))>=0&&s!==o&&s!==i;)o=s;return s}_step(r,n,o){let{inedges:i,hull:s,_hullIndex:a,halfedges:l,triangles:u,points:c}=this;if(i[r]===-1||!c.length)return(r+1)%(c.length>>1);let f=r,d=tO(n-c[r*2],2)+tO(o-c[r*2+1],2),p=i[r],h=p;do{let m=u[h],g=tO(n-c[m*2],2)+tO(o-c[m*2+1],2);if(g<d&&(d=g,f=m),h=h%3===2?h-2:h+1,u[h]!==r)break;if(h=l[h],h===-1){if(h=s[(a[r]+1)%s.length],h!==m&&tO(n-c[h*2],2)+tO(o-c[h*2+1],2)<d)return h;break}}while(h!==p);return f}render(r){let n=r==null?r=new dm:void 0,{points:o,halfedges:i,triangles:s}=this;for(let a=0,l=i.length;a<l;++a){let u=i[a];if(u<a)continue;let c=s[a]*2,f=s[u]*2;r.moveTo(o[c],o[c+1]),r.lineTo(o[f],o[f+1])}return this.renderHull(r),n&&n.value()}renderPoints(r,n=2){let o=r==null?r=new dm:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){let l=i[s],u=i[s+1];r.moveTo(l+n,u),r.arc(l,u,n,0,lQt)}return o&&o.value()}renderHull(r){let n=r==null?r=new dm:void 0,{hull:o,points:i}=this,s=o[0]*2,a=o.length;r.moveTo(i[s],i[s+1]);for(let l=1;l<a;++l){let u=2*o[l];r.lineTo(i[u],i[u+1])}return r.closePath(),n&&n.value()}hullPolygon(){let r=new wT;return this.renderHull(r),r.value()}renderTriangle(r,n){let o=n==null?n=new dm:void 0,{points:i,triangles:s}=this,a=s[r*=3]*2,l=s[r+1]*2,u=s[r+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.lineTo(i[u],i[u+1]),n.closePath(),o&&o.value()}*trianglePolygons(){let{triangles:r}=this;for(let n=0,o=r.length/3;n<o;++n)yield this.trianglePolygon(n)}trianglePolygon(r){let n=new wT;return this.renderTriangle(r,n),n.value()}}});var WKe=D(()=>{"use strict";GKe()});var $ye={};fn($ye,{voronoi:()=>Bye});function Bye(t){et.call(this,null,t)}function gQt(t){let r=t[0][0],n=t[0][1],o=t.length-1;for(;t[o][0]===r&&t[o][1]===n;--o);return"M"+t.slice(0,o+1).join("L")+"Z"}var mQt,qKe=D(()=>{"use strict";qa();Os();WKe();Bye.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};mQt=[-1e5,-1e5,1e5,1e5];Dt(Bye,et,{transform(t,r){let n=t.as||"path",o=r.source;if(!o||!o.length)return r;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:mQt;let s=this.value=b5.from(o,t.x,t.y).voronoi(i);for(let a=0,l=o.length;a<l;++a){let u=s.cellPolygon(a);o[a][n]=u?gQt(u):null}return r.reflow(t.modified()).modifies(n)}})});function rO(t,r,n){return t.fields=r||[],t.fname=n,t}function yQt(t){return t.length===1?bQt(t[0]):xQt(t)}function _T(t){throw Error(t)}function vQt(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||_T("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&_T("Access path missing closing bracket: "+t),o&&_T("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function wQt(t,r,n){let o=vQt(t);return t=o.length===1?o[0]:t,rO((n&&n.get||yQt)(o),[t],r||t)}function Uye(t){return t[t.length-1]}function HKe(t){return t==null||t===""?null:+t}function Vye(t){return t!=null?zye(t)?t:[t]:[]}function dH(t){return typeof t=="function"}function pH(t){return dH(t)?t:()=>t}function YKe(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function XKe(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function KKe(t,r,n){let o=t.prototype=Object.create(r.prototype);return Object.defineProperty(o,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),YKe(o,n)}function Gye(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var bQt,xQt,R9n,M9n,_Qt,SQt,P9n,j9n,zye,hH=D(()=>{"use strict";bQt=t=>function(r){return r[t]},xQt=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};R9n=wQt("id"),M9n=rO(t=>t,[],"identity"),_Qt=rO(()=>0,[],"zero"),SQt=rO(()=>1,[],"one"),P9n=rO(()=>!0,[],"true"),j9n=rO(()=>!1,[],"false"),zye=Array.isArray});function my(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var mH=D(()=>{"use strict"});function Wye(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var ZKe=D(()=>{"use strict"});function ST(t){let r,n,o;t.length!==2?(r=my,n=(l,u)=>my(t(l),u),o=(l,u)=>t(l)-u):(r=t===my||t===Wye?t:CQt,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function CQt(){return 0}var qye=D(()=>{"use strict";mH();ZKe()});function x5(t){return t===null?NaN:+t}var Hye=D(()=>{"use strict"});var QKe,v5,EQt,TQt,pm,JKe=D(()=>{"use strict";mH();qye();Hye();QKe=ST(my),v5=QKe.right,EQt=QKe.left,TQt=ST(x5).center,pm=v5});function gH(t,r,n){let o=(r-t)/Math.max(0,n),i=Math.floor(Math.log10(o)),s=o/Math.pow(10,i),a=s>=AQt?10:s>=kQt?5:s>=IQt?2:1,l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(r*c),l/c<t&&++l,u/c>r&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(r/c),l*c<t&&++l,u*c>r&&--u),u<l&&.5<=n&&n<2?gH(t,r,n*2):[l,u,c]}function CT(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];let o=r<t,[i,s,a]=o?gH(r,t,n):gH(t,r,n);if(!(s>=i))return[];let l=s-i+1,u=new Array(l);if(o)if(a<0)for(let c=0;c<l;++c)u[c]=(s-c)/-a;else for(let c=0;c<l;++c)u[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)u[c]=(i+c)/-a;else for(let c=0;c<l;++c)u[c]=(i+c)*a;return u}function w5(t,r,n){return r=+r,t=+t,n=+n,gH(t,r,n)[2]}function nO(t,r,n){r=+r,t=+t,n=+n;let o=r<t,i=o?w5(r,t,n):w5(t,r,n);return(o?-1:1)*(i<0?1/-i:i)}var AQt,kQt,IQt,eZe=D(()=>{"use strict";AQt=Math.sqrt(50),kQt=Math.sqrt(10),IQt=Math.sqrt(2)});function Yye(t,r,n=x5){if(!(!(o=t.length)||isNaN(r=+r))){if(r<=0||o<2)return+n(t[0],0,t);if(r>=1)return+n(t[o-1],o-1,t);var o,i=(o-1)*r,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}var tZe=D(()=>{"use strict";Hye()});function yH(t,r,n){t=+t,r=+r,n=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((r-t)/n))|0,s=new Array(i);++o<i;)s[o]=t+o*n;return s}var rZe=D(()=>{"use strict"});var hm=D(()=>{"use strict";JKe();mH();qye();tZe();rZe();eZe();sP()});function ia(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function gy(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}var vd=D(()=>{"use strict"});function ET(){var t=new D0,r=[],n=[],o=Xye;function i(s){let a=t.get(s);if(a===void 0){if(o!==Xye)return o;t.set(s,a=r.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new D0;for(let a of s)t.has(a)||t.set(a,r.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(o=s,i):o},i.copy=function(){return ET(r,n).unknown(o)},ia.apply(i,arguments),i}var Xye,nZe=D(()=>{"use strict";hm();vd();Xye=Symbol("implicit")});function Kye(t,r,n,o,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*r+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*o+a*i)/6}function bH(t){var r=t.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[o],s=t[o+1],a=o>0?t[o-1]:2*i-s,l=o<r-1?t[o+2]:2*s-i;return Kye((n-o/r)*r,a,i,s,l)}}var xH=D(()=>{"use strict"});function vH(t){var r=t.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*r),i=t[(o+r-1)%r],s=t[o%r],a=t[(o+1)%r],l=t[(o+2)%r];return Kye((n-o/r)*r,i,s,a,l)}}var Zye=D(()=>{"use strict";xH()});var oO,Qye=D(()=>{"use strict";oO=t=>()=>t});function oZe(t,r){return function(n){return t+n*r}}function DQt(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(o){return Math.pow(t+o*r,n)}}function L_(t,r){var n=r-t;return n?oZe(t,n>180||n<-180?n-360*Math.round(n/360):n):oO(isNaN(t)?r:t)}function iZe(t){return(t=+t)==1?Hi:function(r,n){return n-r?DQt(r,n,t):oO(isNaN(r)?n:r)}}function Hi(t,r){var n=r-t;return n?oZe(t,n):oO(isNaN(t)?r:t)}var TT=D(()=>{"use strict";Qye()});function sZe(t){return function(r){var n=r.length,o=new Array(n),i=new Array(n),s=new Array(n),a,l;for(a=0;a<n;++a)l=ta(r[a]),o[a]=l.r||0,i[a]=l.g||0,s[a]=l.b||0;return o=t(o),i=t(i),s=t(s),l.opacity=1,function(u){return l.r=o(u),l.g=i(u),l.b=s(u),l+""}}}var _5,aZe,lZe,Jye=D(()=>{"use strict";Fs();xH();Zye();TT();_5=function t(r){var n=iZe(r);function o(i,s){var a=n((i=ta(i)).r,(s=ta(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),c=Hi(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=u(f),i.opacity=c(f),i+""}}return o.gamma=t,o}(1);aZe=sZe(bH),lZe=sZe(vH)});function iO(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,o=r.slice(),i;return function(s){for(i=0;i<n;++i)o[i]=t[i]*(1-s)+r[i]*s;return o}}function wH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var _H=D(()=>{"use strict"});function uZe(t,r){return(wH(r)?iO:ebe)(t,r)}function ebe(t,r){var n=r?r.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),s=new Array(n),a;for(a=0;a<o;++a)i[a]=nf(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(l){for(a=0;a<o;++a)s[a]=i[a](l);return s}}var tbe=D(()=>{"use strict";S5();_H()});function SH(t,r){var n=new Date;return t=+t,r=+r,function(o){return n.setTime(t*(1-o)+r*o),n}}var rbe=D(()=>{"use strict"});function mu(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var C5=D(()=>{"use strict"});function CH(t,r){var n={},o={},i;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in t?n[i]=nf(t[i],r[i]):o[i]=r[i];return function(s){for(i in n)o[i]=n[i](s);return o}}var nbe=D(()=>{"use strict";S5()});function NQt(t){return function(){return t}}function OQt(t){return function(r){return t(r)+""}}function EH(t,r){var n=ibe.lastIndex=obe.lastIndex=0,o,i,s,a=-1,l=[],u=[];for(t=t+"",r=r+"";(o=ibe.exec(t))&&(i=obe.exec(r));)(s=i.index)>n&&(s=r.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:mu(o,i)})),n=obe.lastIndex;return n<r.length&&(s=r.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?OQt(u[0].x):NQt(r):(r=u.length,function(c){for(var f=0,d;f<r;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var ibe,obe,sbe=D(()=>{"use strict";C5();ibe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,obe=new RegExp(ibe.source,"g")});function nf(t,r){var n=typeof r,o;return r==null||n==="boolean"?oO(r):(n==="number"?mu:n==="string"?(o=Xc(r))?(r=o,_5):EH:r instanceof Xc?_5:r instanceof Date?SH:wH(r)?iO:Array.isArray(r)?ebe:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?CH:mu)(t,r)}var S5=D(()=>{"use strict";Fs();Jye();tbe();rbe();C5();nbe();sbe();Qye();_H()});function cZe(t){var r=t.length;return function(n){return t[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}var fZe=D(()=>{"use strict"});function dZe(t,r){var n=L_(+t,+r);return function(o){var i=n(o);return i-360*Math.floor(i/360)}}var pZe=D(()=>{"use strict";TT()});function B_(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}var hZe=D(()=>{"use strict"});function abe(t,r,n,o,i,s){var a,l,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*o)&&(n-=t*u,o-=r*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),t*o<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(r,t)*mZe,skewX:Math.atan(u)*mZe,scaleX:a,scaleY:l}}var mZe,TH,gZe=D(()=>{"use strict";mZe=180/Math.PI,TH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function yZe(t){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?TH:abe(r.a,r.b,r.c,r.d,r.e,r.f)}function bZe(t){return t==null?TH:(AH||(AH=document.createElementNS("http://www.w3.org/2000/svg","g")),AH.setAttribute("transform",t),(t=AH.transform.baseVal.consolidate())?(t=t.matrix,abe(t.a,t.b,t.c,t.d,t.e,t.f)):TH)}var AH,xZe=D(()=>{"use strict";gZe()});function vZe(t,r,n,o){function i(c){return c.length?c.pop()+" ":""}function s(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push("translate(",null,r,null,n);m.push({i:g-4,x:mu(c,d)},{i:g-2,x:mu(f,p)})}else(d||p)&&h.push("translate("+d+r+p+n)}function a(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:mu(c,f)})):f&&d.push(i(d)+"rotate("+f+o)}function l(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:mu(c,f)}):f&&d.push(i(d)+"skewX("+f+o)}function u(c,f,d,p,h,m){if(c!==d||f!==p){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:mu(c,d)},{i:g-2,x:mu(f,p)})}else(d!==1||p!==1)&&h.push(i(h)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),s(c.translateX,c.translateY,f.translateX,f.translateY,d,p),a(c.rotate,f.rotate,d,p),l(c.skewX,f.skewX,d,p),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(h){for(var m=-1,g=p.length,y;++m<g;)d[(y=p[m]).i]=y.x(h);return d.join("")}}}var wZe,_Ze,SZe=D(()=>{"use strict";C5();xZe();wZe=vZe(yZe,"px, ","px)","deg)"),_Ze=vZe(bZe,", ",")",")")});function CZe(t){return((t=Math.exp(t))+1/t)/2}function RQt(t){return((t=Math.exp(t))-1/t)/2}function MQt(t){return((t=Math.exp(2*t))-1)/(t+1)}var FQt,EZe,TZe=D(()=>{"use strict";FQt=1e-12;EZe=function t(r,n,o){function i(s,a){var l=s[0],u=s[1],c=s[2],f=a[0],d=a[1],p=a[2],h=f-l,m=d-u,g=h*h+m*m,y,b;if(g<FQt)b=Math.log(p/c)/r,y=function(S){return[l+S*h,u+S*m,c*Math.exp(r*S*b)]};else{var x=Math.sqrt(g),v=(p*p-c*c+o*g)/(2*c*n*x),w=(p*p-c*c-o*g)/(2*p*n*x),_=Math.log(Math.sqrt(v*v+1)-v),C=Math.log(Math.sqrt(w*w+1)-w);b=(C-_)/r,y=function(S){var E=S*b,A=CZe(_),N=c/(n*x)*(A*MQt(r*E+_)-RQt(_));return[l+N*h,u+N*m,c*A/CZe(r*E+_)]}}return y.duration=b*1e3*r/Math.SQRT2,y}return i.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},i}(Math.SQRT2,2,4)});function AZe(t){return function(r,n){var o=t((r=fd(r)).h,(n=fd(n)).h),i=Hi(r.s,n.s),s=Hi(r.l,n.l),a=Hi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.s=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var kZe,IZe,DZe=D(()=>{"use strict";Fs();TT();kZe=AZe(L_),IZe=AZe(Hi)});function lbe(t,r){var n=Hi((t=Kc(t)).l,(r=Kc(r)).l),o=Hi(t.a,r.a),i=Hi(t.b,r.b),s=Hi(t.opacity,r.opacity);return function(a){return t.l=n(a),t.a=o(a),t.b=i(a),t.opacity=s(a),t+""}}var NZe=D(()=>{"use strict";Fs();TT()});function OZe(t){return function(r,n){var o=t((r=dd(r)).h,(n=dd(n)).h),i=Hi(r.c,n.c),s=Hi(r.l,n.l),a=Hi(r.opacity,n.opacity);return function(l){return r.h=o(l),r.c=i(l),r.l=s(l),r.opacity=a(l),r+""}}}var FZe,RZe,MZe=D(()=>{"use strict";Fs();TT();FZe=OZe(L_),RZe=OZe(Hi)});function PZe(t){return function r(n){n=+n;function o(i,s){var a=t((i=xp(i)).h,(s=xp(s)).h),l=Hi(i.s,s.s),u=Hi(i.l,s.l),c=Hi(i.opacity,s.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=u(Math.pow(f,n)),i.opacity=c(f),i+""}}return o.gamma=r,o}(1)}var jZe,LZe,BZe=D(()=>{"use strict";Fs();TT();jZe=PZe(L_),LZe=PZe(Hi)});function AT(t,r){r===void 0&&(r=t,t=nf);for(var n=0,o=r.length-1,i=r[0],s=new Array(o<0?0:o);n<o;)s[n]=t(i,i=r[++n]);return function(a){var l=Math.max(0,Math.min(o-1,Math.floor(a*=o)));return s[l](a-l)}}var $Ze=D(()=>{"use strict";S5()});function zZe(t,r){for(var n=new Array(r),o=0;o<r;++o)n[o]=t(o/(r-1));return n}var UZe=D(()=>{"use strict"});var ube={};fn(ube,{interpolate:()=>nf,interpolateArray:()=>uZe,interpolateBasis:()=>bH,interpolateBasisClosed:()=>vH,interpolateCubehelix:()=>jZe,interpolateCubehelixLong:()=>LZe,interpolateDate:()=>SH,interpolateDiscrete:()=>cZe,interpolateHcl:()=>FZe,interpolateHclLong:()=>RZe,interpolateHsl:()=>kZe,interpolateHslLong:()=>IZe,interpolateHue:()=>dZe,interpolateLab:()=>lbe,interpolateNumber:()=>mu,interpolateNumberArray:()=>iO,interpolateObject:()=>CH,interpolateRgb:()=>_5,interpolateRgbBasis:()=>aZe,interpolateRgbBasisClosed:()=>lZe,interpolateRound:()=>B_,interpolateString:()=>EH,interpolateTransformCss:()=>wZe,interpolateTransformSvg:()=>_Ze,interpolateZoom:()=>EZe,piecewise:()=>AT,quantize:()=>zZe});var E5=D(()=>{"use strict";S5();tbe();xH();Zye();rbe();fZe();pZe();C5();_H();nbe();hZe();sbe();SZe();TZe();Jye();DZe();NZe();MZe();BZe();$Ze();UZe()});function cbe(t){return function(){return t}}var VZe=D(()=>{"use strict"});function sO(t){return+t}var fbe=D(()=>{"use strict"});function Fl(t){return t}function dbe(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:cbe(isNaN(r)?NaN:.5)}function PQt(t,r){var n;return t>r&&(n=t,t=r,r=n),function(o){return Math.max(t,Math.min(r,o))}}function jQt(t,r,n){var o=t[0],i=t[1],s=r[0],a=r[1];return i<o?(o=dbe(i,o),s=n(a,s)):(o=dbe(o,i),s=n(s,a)),function(l){return s(o(l))}}function LQt(t,r,n){var o=Math.min(t.length,r.length)-1,i=new Array(o),s=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<o;)i[a]=dbe(t[a],t[a+1]),s[a]=n(r[a],r[a+1]);return function(l){var u=pm(t,l,1,o)-1;return s[u](i[u](l))}}function yy(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kT(){var t=GZe,r=GZe,n=nf,o,i,s,a=Fl,l,u,c;function f(){var p=Math.min(t.length,r.length);return a!==Fl&&(a=PQt(t[0],t[p-1])),l=p>2?LQt:jQt,u=c=null,d}function d(p){return p==null||isNaN(p=+p)?s:(u||(u=l(t.map(o),r,n)))(o(a(p)))}return d.invert=function(p){return a(i((c||(c=l(r,t.map(o),mu)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,sO),f()):t.slice()},d.range=function(p){return arguments.length?(r=Array.from(p),f()):r.slice()},d.rangeRound=function(p){return r=Array.from(p),n=B_,f()},d.clamp=function(p){return arguments.length?(a=p?!0:Fl,f()):a!==Fl},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(s=p,d):s},function(p,h){return o=p,i=h,f()}}function T5(){return kT()(Fl,Fl)}var GZe,$_=D(()=>{"use strict";hm();E5();VZe();fbe();GZe=[0,1]});function aO(t,r,n,o){var i=nO(t,r,n),s;switch(o=md(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(r));return o.precision==null&&!isNaN(s=lN(i,a))&&(o.precision=s),HE(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(s=uN(i,Math.max(Math.abs(t),Math.abs(r))))&&(o.precision=s-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(s=aN(i))&&(o.precision=s-(o.type==="%")*2);break}}return Jh(o)}var pbe=D(()=>{"use strict";hm();YE()});function wd(t){var r=t.domain;return t.ticks=function(n){var o=r();return CT(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var i=r();return aO(i[0],i[i.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=r(),i=0,s=o.length-1,a=o[i],l=o[s],u,c,f=10;for(l<a&&(c=a,a=l,l=c,c=i,i=s,s=c);f-- >0;){if(c=w5(a,l,n),c===u)return o[i]=a,o[s]=l,r(o);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;u=c}return t},t}function A5(){var t=T5();return t.copy=function(){return yy(t,A5())},ia.apply(t,arguments),wd(t)}var z_=D(()=>{"use strict";hm();$_();vd();pbe()});function k5(t){var r;function n(o){return o==null||isNaN(o=+o)?r:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,sO),n):t.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return k5(t).unknown(r)},t=arguments.length?Array.from(t,sO):[0,1],wd(n)}var WZe=D(()=>{"use strict";z_();fbe()});function I5(t,r){t=t.slice();var n=0,o=t.length-1,i=t[n],s=t[o],a;return s<i&&(a=n,n=o,o=a,a=i,i=s,s=a),t[n]=r.floor(i),t[o]=r.ceil(s),t}var hbe=D(()=>{"use strict"});function qZe(t){return Math.log(t)}function HZe(t){return Math.exp(t)}function BQt(t){return-Math.log(-t)}function $Qt(t){return-Math.exp(-t)}function zQt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function UQt(t){return t===10?zQt:t===Math.E?Math.exp:r=>Math.pow(t,r)}function VQt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function YZe(t){return(r,n)=>-t(-r,n)}function D5(t){let r=t(qZe,HZe),n=r.domain,o=10,i,s;function a(){return i=VQt(o),s=UQt(o),n()[0]<0?(i=YZe(i),s=YZe(s),t(BQt,$Qt)):t(qZe,HZe),r}return r.base=function(l){return arguments.length?(o=+l,a()):o},r.domain=function(l){return arguments.length?(n(l),a()):n()},r.ticks=l=>{let u=n(),c=u[0],f=u[u.length-1],d=f<c;d&&([c,f]=[f,c]);let p=i(c),h=i(f),m,g,y=l==null?10:+l,b=[];if(!(o%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),c>0){for(;p<=h;++p)for(m=1;m<o;++m)if(g=p<0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}}else for(;p<=h;++p)for(m=o-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<c)){if(g>f)break;b.push(g)}b.length*2<y&&(b=CT(c,f,y))}else b=CT(p,h,Math.min(h-p,y)).map(s);return d?b.reverse():b},r.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=o===10?"s":","),typeof u!="function"&&(!(o%1)&&(u=md(u)).precision==null&&(u.trim=!0),u=Jh(u)),l===1/0)return u;let c=Math.max(1,o*l/r.ticks().length);return f=>{let d=f/s(Math.round(i(f)));return d*o<o-.5&&(d*=o),d<=c?u(f):""}},r.nice=()=>n(I5(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),r}function N5(){let t=D5(kT()).domain([1,10]);return t.copy=()=>yy(t,N5()).base(t.base()),ia.apply(t,arguments),t}var kH=D(()=>{"use strict";hm();YE();hbe();$_();vd()});function XZe(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function KZe(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function O5(t){var r=1,n=t(XZe(r),KZe(r));return n.constant=function(o){return arguments.length?t(XZe(r=+o),KZe(r)):r},wd(n)}function F5(){var t=O5(kT());return t.copy=function(){return yy(t,F5()).constant(t.constant())},ia.apply(t,arguments)}var IH=D(()=>{"use strict";z_();$_();vd()});function ZZe(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function GQt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function WQt(t){return t<0?-t*t:t*t}function R5(t){var r=t(Fl,Fl),n=1;function o(){return n===1?t(Fl,Fl):n===.5?t(GQt,WQt):t(ZZe(n),ZZe(1/n))}return r.exponent=function(i){return arguments.length?(n=+i,o()):n},wd(r)}function lO(){var t=R5(kT());return t.copy=function(){return yy(t,lO()).exponent(t.exponent())},ia.apply(t,arguments),t}function mbe(){return lO.apply(null,arguments).exponent(.5)}var DH=D(()=>{"use strict";z_();$_();vd()});function M5(){var t=[],r=[],n=[],o;function i(){var a=0,l=Math.max(1,r.length);for(n=new Array(l-1);++a<l;)n[a-1]=Yye(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?o:r[pm(n,a)]}return s.invertExtent=function(a){var l=r.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(my),i()},s.range=function(a){return arguments.length?(r=Array.from(a),i()):r.slice()},s.unknown=function(a){return arguments.length?(o=a,s):o},s.quantiles=function(){return n.slice()},s.copy=function(){return M5().domain(t).range(r).unknown(o)},ia.apply(s,arguments)}var QZe=D(()=>{"use strict";hm();vd()});function P5(){var t=0,r=1,n=1,o=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[pm(o,u,0,n)]:s}function l(){var u=-1;for(o=new Array(n);++u<n;)o[u]=((u+1)*r-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,r]=u,t=+t,r=+r,l()):[t,r]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,o[0]]:c>=n?[o[n-1],r]:[o[c-1],o[c]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return o.slice()},a.copy=function(){return P5().domain([t,r]).range(i).unknown(s)},ia.apply(wd(a),arguments)}var JZe=D(()=>{"use strict";hm();z_();vd()});function j5(){var t=[.5],r=[0,1],n,o=1;function i(s){return s!=null&&s<=s?r[pm(t,s,0,o)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),o=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(s){return arguments.length?(r=Array.from(s),o=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(s){var a=r.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return j5().domain(t).range(r).unknown(n)},ia.apply(i,arguments)}var eQe=D(()=>{"use strict";hm();vd()});function ai(t,r,n,o){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),r(s,1),t(s),s),i.round=s=>{let a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(r(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{let u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let c;do u.push(c=new Date(+s)),r(s,l),t(s);while(c<s&&s<a);return u},i.filter=s=>ai(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!s(a););else for(;--l>=0;)for(;r(a,1),!s(a););}),n&&(i.count=(s,a)=>(gbe.setTime(+s),ybe.setTime(+a),t(gbe),t(ybe),Math.floor(n(gbe,ybe))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(o?a=>o(a)%s===0:a=>i.count(0,a)%s===0):i)),i}var gbe,ybe,mv=D(()=>{"use strict";gbe=new Date,ybe=new Date});var mm,tQe,bbe=D(()=>{"use strict";mv();mm=ai(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);mm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ai(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):mm);tQe=mm.range});var gu,rQe,xbe=D(()=>{"use strict";mv();gu=ai(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*1e3)},(t,r)=>(r-t)/1e3,t=>t.getUTCSeconds()),rQe=gu.range});var U_,qQt,V_,HQt,vbe=D(()=>{"use strict";mv();U_=ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getMinutes()),qQt=U_.range,V_=ai(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*6e4)},(t,r)=>(r-t)/6e4,t=>t.getUTCMinutes()),HQt=V_.range});var G_,YQt,W_,XQt,wbe=D(()=>{"use strict";mv();G_=ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getHours()),YQt=G_.range,W_=ai(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*36e5)},(t,r)=>(r-t)/36e5,t=>t.getUTCHours()),XQt=W_.range});var gm,KQt,gv,ZQt,NH,QQt,_be=D(()=>{"use strict";mv();gm=ai(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),KQt=gm.range,gv=ai(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>t.getUTCDate()-1),ZQt=gv.range,NH=ai(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/864e5,t=>Math.floor(t/864e5)),QQt=NH.range});function NT(t){return ai(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*6e4)/6048e5)}function OT(t){return ai(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/6048e5)}var xy,oQe,iQe,sQe,aQe,lQe,uQe,cQe,JQt,eJt,tJt,rJt,nJt,oJt,vy,fQe,dQe,pQe,hQe,mQe,gQe,yQe,iJt,sJt,aJt,lJt,uJt,cJt,Sbe=D(()=>{"use strict";mv();xy=NT(0),oQe=NT(1),iQe=NT(2),sQe=NT(3),aQe=NT(4),lQe=NT(5),uQe=NT(6),cQe=xy.range,JQt=oQe.range,eJt=iQe.range,tJt=sQe.range,rJt=aQe.range,nJt=lQe.range,oJt=uQe.range;vy=OT(0),fQe=OT(1),dQe=OT(2),pQe=OT(3),hQe=OT(4),mQe=OT(5),gQe=OT(6),yQe=vy.range,iJt=fQe.range,sJt=dQe.range,aJt=pQe.range,lJt=hQe.range,uJt=mQe.range,cJt=gQe.range});var yv,fJt,bv,dJt,Cbe=D(()=>{"use strict";mv();yv=ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),fJt=yv.range,bv=ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),dJt=bv.range});var xv,pJt,vv,hJt,Ebe=D(()=>{"use strict";mv();xv=ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());xv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ai(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});pJt=xv.range,vv=ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());vv.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ai(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});hJt=vv.range});function xQe(t,r,n,o,i,s){let a=[[gu,1,1e3],[gu,5,5*1e3],[gu,15,15*1e3],[gu,30,30*1e3],[s,1,6e4],[s,5,5*6e4],[s,15,15*6e4],[s,30,30*6e4],[i,1,36e5],[i,3,3*36e5],[i,6,6*36e5],[i,12,12*36e5],[o,1,864e5],[o,2,2*864e5],[n,1,6048e5],[r,1,2592e6],[r,3,3*2592e6],[t,1,31536e6]];function l(c,f,d){let p=f<c;p&&([c,f]=[f,c]);let h=d&&typeof d.range=="function"?d:u(c,f,d),m=h?h.range(c,+f+1):[];return p?m.reverse():m}function u(c,f,d){let p=Math.abs(f-c)/d,h=ST(([,,y])=>y).right(a,p);if(h===a.length)return t.every(nO(c/31536e6,f/31536e6,d));if(h===0)return mm.every(Math.max(nO(c,f,d),1));let[m,g]=a[p/a[h-1][2]<a[h][2]/p?h-1:h];return m.every(g)}return[l,u]}var Tbe,Abe,kbe,Ibe,vQe=D(()=>{"use strict";hm();bbe();xbe();vbe();wbe();_be();Sbe();Cbe();Ebe();[Tbe,Abe]=xQe(vv,bv,vy,NH,W_,V_),[kbe,Ibe]=xQe(xv,yv,xy,gm,G_,U_)});var OH=D(()=>{"use strict";bbe();xbe();vbe();wbe();_be();Sbe();Cbe();Ebe();vQe()});function gJt(t){return new Date(t)}function yJt(t){return t instanceof Date?+t:+new Date(+t)}function FH(t,r,n,o,i,s,a,l,u,c){var f=T5(),d=f.invert,p=f.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),x=c("%b %d"),v=c("%B"),w=c("%Y");function _(C){return(u(C)<C?h:l(C)<C?m:a(C)<C?g:s(C)<C?y:o(C)<C?i(C)<C?b:x:n(C)<C?v:w)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,yJt)):p().map(gJt)},f.ticks=function(C){var S=p();return t(S[0],S[S.length-1],C??10)},f.tickFormat=function(C,S){return S==null?_:c(S)},f.nice=function(C){var S=p();return(!C||typeof C.range!="function")&&(C=r(S[0],S[S.length-1],C??10)),C?p(I5(S,C)):f},f.copy=function(){return yy(f,FH(t,r,n,o,i,s,a,l,u,c))},f}function RH(){return ia.apply(FH(kbe,Ibe,xv,yv,xy,gm,G_,U_,gu,d_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Dbe=D(()=>{"use strict";OH();hN();$_();vd();hbe()});function MH(){return ia.apply(FH(Tbe,Abe,vv,bv,vy,gv,W_,V_,gu,p_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}var wQe=D(()=>{"use strict";OH();hN();Dbe();vd()});function PH(){var t=0,r=1,n,o,i,s,a=Fl,l=!1,u;function c(d){return d==null||isNaN(d=+d)?u:a(i===0?.5:(d=(s(d)-n)*i,l?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,r]=d,n=s(t=+t),o=s(r=+r),i=n===o?0:1/(o-n),c):[t,r]},c.clamp=function(d){return arguments.length?(l=!!d,c):l},c.interpolator=function(d){return arguments.length?(a=d,c):a};function f(d){return function(p){var h,m;return arguments.length?([h,m]=p,a=d(h,m),c):[a(0),a(1)]}}return c.range=f(nf),c.rangeRound=f(B_),c.unknown=function(d){return arguments.length?(u=d,c):u},function(d){return s=d,n=d(t),o=d(r),i=n===o?0:1/(o-n),c}}function wv(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uO(){var t=wd(PH()(Fl));return t.copy=function(){return wv(t,uO())},gy.apply(t,arguments)}function jH(){var t=D5(PH()).domain([1,10]);return t.copy=function(){return wv(t,jH()).base(t.base())},gy.apply(t,arguments)}function LH(){var t=O5(PH());return t.copy=function(){return wv(t,LH()).constant(t.constant())},gy.apply(t,arguments)}function B5(){var t=R5(PH());return t.copy=function(){return wv(t,B5()).exponent(t.exponent())},gy.apply(t,arguments)}function Nbe(){return B5.apply(null,arguments).exponent(.5)}var Obe=D(()=>{"use strict";E5();$_();vd();z_();kH();IH();DH()});function BH(){var t=0,r=.5,n=1,o=1,i,s,a,l,u,c=Fl,f,d=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-s)*(o*g<o*s?l:u),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,r,n]=g,i=f(t=+t),s=f(r=+r),a=f(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h):[t,r,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function m(g){return function(y){var b,x,v;return arguments.length?([b,x,v]=y,c=AT(g,[b,x,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(nf),h.rangeRound=m(B_),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,i=g(t),s=g(r),a=g(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),o=s<i?-1:1,h}}function $5(){var t=wd(BH()(Fl));return t.copy=function(){return wv(t,$5())},gy.apply(t,arguments)}function $H(){var t=D5(BH()).domain([.1,1,10]);return t.copy=function(){return wv(t,$H()).base(t.base())},gy.apply(t,arguments)}function zH(){var t=O5(BH());return t.copy=function(){return wv(t,zH()).constant(t.constant())},gy.apply(t,arguments)}function z5(){var t=R5(BH());return t.copy=function(){return wv(t,z5()).exponent(t.exponent())},gy.apply(t,arguments)}function Fbe(){return z5.apply(null,arguments).exponent(.5)}var _Qe=D(()=>{"use strict";E5();$_();vd();z_();kH();Obe();IH();DH()});var Rbe=D(()=>{"use strict";WZe();z_();kH();IH();nZe();DH();QZe();JZe();eQe();Dbe();wQe();Obe();_Qe();pbe()});function jbe(t){return FT.setFullYear(t),FT.setMonth(0),FT.setDate(1),FT.setHours(0,0,0,0),FT}function wJt(t){return gm.count(jbe(t.getFullYear())-1,t)}function SQe(t){return xy.count(jbe(t.getFullYear())-1,t)}function Mbe(t){return jbe(t).getDay()}function _Jt(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return gv.count(r-1,t)}function CQe(t){let r=Date.UTC(t.getUTCFullYear(),0,1);return vy.count(r-1,t)}function Pbe(t){return FT.setTime(Date.UTC(t,0,1)),FT.getUTCDay()}function cO(t,r,n){return r+t*7-(n+6)%7}var kp,K_,wy,ym,q_,H_,fO,Y_,X_,RT,MT,vJt,tHn,rHn,FT,nHn,oHn,iHn,sHn,aHn,lHn,U5,V5,G5,UH,SJt,EQe,CJt,EJt,W5,q5,H5,TJt,AJt,TQe,kJt,uHn,AQe=D(()=>{"use strict";hH();OH();kp="year",K_="quarter",wy="month",ym="week",q_="date",H_="day",fO="dayofyear",Y_="hours",X_="minutes",RT="seconds",MT="milliseconds",vJt=[kp,K_,wy,ym,q_,H_,fO,Y_,X_,RT,MT],tHn=vJt.reduce((t,r,n)=>(t[r]=1+n,t),{}),rHn={[kp]:"%Y ",[K_]:"Q%q ",[wy]:"%b ",[q_]:"%d ",[ym]:"W%U ",[H_]:"%a ",[fO]:"%j ",[Y_]:"%H:00",[X_]:"00:%M",[RT]:":%S",[MT]:".%L",[`${kp}-${wy}`]:"%Y-%m ",[`${kp}-${wy}-${q_}`]:"%Y-%m-%d ",[`${Y_}-${X_}`]:"%H:%M"},FT=new Date;nHn={[kp]:t=>t.getFullYear(),[K_]:t=>Math.floor(t.getMonth()/3),[wy]:t=>t.getMonth(),[q_]:t=>t.getDate(),[Y_]:t=>t.getHours(),[X_]:t=>t.getMinutes(),[RT]:t=>t.getSeconds(),[MT]:t=>t.getMilliseconds(),[fO]:t=>wJt(t),[ym]:t=>SQe(t),[ym+H_]:(t,r)=>cO(SQe(t),t.getDay(),Mbe(r)),[H_]:(t,r)=>cO(1,t.getDay(),Mbe(r))},oHn={[K_]:t=>3*t,[ym]:(t,r)=>cO(t,0,Mbe(r))},iHn={[kp]:t=>t.getUTCFullYear(),[K_]:t=>Math.floor(t.getUTCMonth()/3),[wy]:t=>t.getUTCMonth(),[q_]:t=>t.getUTCDate(),[Y_]:t=>t.getUTCHours(),[X_]:t=>t.getUTCMinutes(),[RT]:t=>t.getUTCSeconds(),[MT]:t=>t.getUTCMilliseconds(),[fO]:t=>_Jt(t),[ym]:t=>CQe(t),[H_]:(t,r)=>cO(1,t.getUTCDay(),Pbe(r)),[ym+H_]:(t,r)=>cO(CQe(t),t.getUTCDay(),Pbe(r))},sHn={[K_]:t=>3*t,[ym]:(t,r)=>cO(t,0,Pbe(r))},aHn={[kp]:xv,[K_]:yv.every(3),[wy]:yv,[ym]:xy,[q_]:gm,[H_]:gm,[fO]:gm,[Y_]:G_,[X_]:U_,[RT]:gu,[MT]:mm},lHn={[kp]:vv,[K_]:bv.every(3),[wy]:bv,[ym]:vy,[q_]:gv,[H_]:gv,[fO]:gv,[Y_]:W_,[X_]:V_,[RT]:gu,[MT]:mm},U5=1e3,V5=U5*60,G5=V5*60,UH=G5*24,SJt=UH*7,EQe=UH*30,CJt=UH*365,EJt=[kp,wy,q_,Y_,X_,RT,MT],W5=EJt.slice(0,-1),q5=W5.slice(0,-1),H5=q5.slice(0,-1),TJt=H5.slice(0,-1),AJt=[kp,ym],TQe=[kp,wy],kJt=[kp],uHn=[[W5,1,U5],[W5,5,5*U5],[W5,15,15*U5],[W5,30,30*U5],[q5,1,V5],[q5,5,5*V5],[q5,15,15*V5],[q5,30,30*V5],[H5,1,G5],[H5,3,3*G5],[H5,6,6*G5],[H5,12,12*G5],[TJt,1,UH],[AJt,1,SJt],[TQe,1,EQe],[TQe,3,3*EQe],[kJt,1,CJt]]});function IJt(t,r,n){let o=t-r+n*2;return t?o>0?o:1:0}function jJt(t){return function(r){let n=r[0],o=r[1],i;return o<n&&(i=n,n=o,o=i),[t.invert(n),t.invert(o)]}}function LJt(t){return function(r){let n=t.range(),o=r[0],i=r[1],s=-1,a,l,u,c;for(i<o&&(l=o,o=i,i=l),u=0,c=n.length;u<c;++u)n[u]>=o&&n[u]<=i&&(s<0&&(s=u),a=u);if(!(s<0))return o=t.invertExtent(n[s]),i=t.invertExtent(n[a]),[o[0]===void 0?o[1]:o[0],i[1]===void 0?i[0]:i[1]]}}function Gbe(){let t=ET().unknown(void 0),r=t.domain,n=t.range,o=[0,1],i,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function f(){let d=r().length,p=o[1]<o[0],h=o[1-p],m=IJt(d,l,u),g=o[p-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-l))*c,s=i*(1-l),a&&(g=Math.round(g),s=Math.round(s));let y=yH(d).map(b=>g+i*b);return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(r(d),f()):r()},t.range=function(d){return arguments.length?(o=[+d[0],+d[1]],f()):o.slice()},t.rangeRound=function(d){return o=[+d[0],+d[1]],a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(d){return arguments.length?(a=!!d,f()):a},t.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),l=u,f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;let p=o[1]<o[0],h=p?n().reverse():n(),m=h.length-1,g=+d[0],y=+d[1],b,x,v;if(!(g!==g||y!==y)&&(y<g&&(v=g,g=y,y=v),!(y<h[0]||g>o[1-p])))return b=Math.max(0,v5(h,g)-1),x=g===y?b:v5(h,y)-1,g-h[b]>s+1e-10&&++b,p&&(v=b,b=m-x,x=m-v),b>x?void 0:r().slice(b,x+1)},t.invert=function(d){let p=t.invertRange([d,d]);return p&&p[0]},t.copy=function(){return Gbe().domain(r()).range(o).round(a).paddingInner(l).paddingOuter(u).align(c)},f()}function NQe(t){let r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return NQe(r())},t}function BJt(){return NQe(Gbe().paddingInner(1))}function zJt(t){return $Jt.call(t,HKe)}function OQe(){let t=[],r=[];function n(o){return o==null||o!==o?void 0:r[(pm(t,o)-1)%r.length]}return n.domain=function(o){return arguments.length?(t=zJt(o),n):t.slice()},n.range=function(o){return arguments.length?(r=UJt.call(o),n):r.slice()},n.tickFormat=function(o,i){return aO(t[0],Uye(t),o??10,i)},n.copy=function(){return OQe().domain(n.domain()).range(n.range())},n}function GJt(t){return t[VJt]=!0,t}function WJt(t,r,n){let o=function(){let s=r();return s.invertRange||(s.invertRange=s.invert?jJt(s):s.invertExtent?LJt(s):void 0),s.type=t,GJt(s)};return o.metadata=Gye(Vye(n)),o}function Ho(t,r,n){return arguments.length>1?(Lbe.set(t,WJt(t,r,n)),this):qJt(t)?Lbe.get(t):void 0}function qJt(t){return Lbe.has(t)}function HJt(t,r,n){return AT(YJt(r||"rgb",n),t)}function YJt(t,r){let n=ube[XJt(t)];return r!=null&&n&&n.gamma?n.gamma(r):n}function XJt(t){return"interpolate"+t.toLowerCase().split("-").map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function FQe(t){if(zye(t))return t;let r=t.length/6|0,n=new Array(r);for(let o=0;o<r;)n[o]="#"+t.slice(o*6,++o*6);return n}function RQe(t,r){for(let n in t)QJt(n,r(t[n]))}function QJt(t,r){return t=t&&t.toLowerCase(),arguments.length>1?(kQe[t]=r,this):kQe[t]}var DJt,Bbe,dO,$be,zbe,Ube,NJt,OJt,pO,Y5,VH,Vbe,IQe,FJt,RJt,MJt,PJt,tl,GH,WH,bm,DQe,$Jt,UJt,Lbe,VJt,KJt,ZJt,kQe,wHn,_Hn,MQe=D(()=>{"use strict";hH();hm();Rbe();Rbe();E5();nde();AQe();DJt="identity",Bbe="linear",dO="log",$be="pow",zbe="sqrt",Ube="symlog",NJt="time",OJt="utc",pO="sequential",Y5="diverging",VH="quantile",Vbe="quantize",IQe="threshold",FJt="ordinal",RJt="point",MJt="band",PJt="bin-ordinal",tl="continuous",GH="discrete",WH="discretizing",bm="interpolating",DQe="temporal";$Jt=Array.prototype.map;UJt=Array.prototype.slice;Lbe=new Map,VJt=Symbol("vega_scale");Ho(DJt,k5);Ho(Bbe,A5,tl);Ho(dO,N5,[tl,dO]);Ho($be,lO,tl);Ho(zbe,mbe,tl);Ho(Ube,F5,tl);Ho(NJt,RH,[tl,DQe]);Ho(OJt,MH,[tl,DQe]);Ho(pO,uO,[tl,bm]);Ho(`${pO}-${Bbe}`,uO,[tl,bm]);Ho(`${pO}-${dO}`,jH,[tl,bm,dO]);Ho(`${pO}-${$be}`,B5,[tl,bm]);Ho(`${pO}-${zbe}`,Nbe,[tl,bm]);Ho(`${pO}-${Ube}`,LH,[tl,bm]);Ho(`${Y5}-${Bbe}`,$5,[tl,bm]);Ho(`${Y5}-${dO}`,$H,[tl,bm,dO]);Ho(`${Y5}-${$be}`,z5,[tl,bm]);Ho(`${Y5}-${zbe}`,Fbe,[tl,bm]);Ho(`${Y5}-${Ube}`,zH,[tl,bm]);Ho(VH,M5,[WH,VH]);Ho(Vbe,P5,WH);Ho(IQe,j5,WH);Ho(PJt,OQe,[GH,WH]);Ho(FJt,ET,GH);Ho(MJt,Gbe,GH);Ho(RJt,BJt,GH);KJt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ZJt={accent:Yj,category10:Hj,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Xj,observable10:Kj,paired:Zj,pastel1:Qj,pastel2:Jj,set1:eL,set2:tL,set3:rL,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};kQe={};RQe(ZJt,FQe);RQe(KJt,t=>HJt(FQe(t)));wHn={[VH]:"quantiles",[Vbe]:"thresholds",[IQe]:"domain"},_Hn={[VH]:"quantiles",[Vbe]:"domain"}});var PQe,CHn,EHn,jQe=D(()=>{"use strict";PQe=Math.random,CHn=Math.sqrt(2*Math.PI),EHn=.5*Math.PI/180});var Hbe={};fn(Hbe,{wordcloud:()=>qbe});function JJt(){var t=[256,256],r,n,o,i,s,a,l,u=LQe,c=[],f=Math.random,d={};d.layout=function(){for(var m=p(Wc()),g=ier((t[0]>>5)*t[1]),y=null,b=c.length,x=-1,v=[],w=c.map(C=>({text:r(C),font:n(C),style:i(C),weight:s(C),rotate:a(C),size:~~(o(C)+1e-14),padding:l(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,S)=>S.size-C.size);++x<b;){var _=w[x];_.x=t[0]*(f()+.5)>>1,_.y=t[1]*(f()+.5)>>1,eer(m,_,w,x),_.hasText&&h(g,_,y)&&(v.push(_),y?rer(y,_):y=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=t[0]>>1,_.y-=t[1]>>1)}return v};function p(m){m.width=m.height=1;var g=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(X5<<5)/g,m.height=qH/g;var y=m.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(m,g,y){for(var b=g.x,x=g.y,v=Math.sqrt(t[0]*t[0]+t[1]*t[1]),w=u(t),_=f()<.5?1:-1,C=-_,S,E,A;(S=w(C+=_))&&(E=~~S[0],A=~~S[1],!(Math.min(Math.abs(E),Math.abs(A))>=v));)if(g.x=b+E,g.y=x+A,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!y||!ter(g,m,t[0]))&&(!y||ner(g,y))){for(var N=g.sprite,k=g.width>>5,R=t[0]>>5,I=g.x-(k<<4),L=I&127,j=32-L,M=g.y1-g.y0,V=(g.y+g.y0)*R+(I>>5),G,U=0;U<M;U++){G=0;for(var Y=0;Y<=k;Y++)m[V+Y]|=G<<j|(Y<k?(G=N[U*k+Y])>>>L:0);V+=R}return g.sprite=null,!0}return!1}return d.words=function(m){return arguments.length?(c=m,d):c},d.size=function(m){return arguments.length?(t=[+m[0],+m[1]],d):t},d.font=function(m){return arguments.length?(n=PT(m),d):n},d.fontStyle=function(m){return arguments.length?(i=PT(m),d):i},d.fontWeight=function(m){return arguments.length?(s=PT(m),d):s},d.rotate=function(m){return arguments.length?(a=PT(m),d):a},d.text=function(m){return arguments.length?(r=PT(m),d):r},d.spiral=function(m){return arguments.length?(u=ser[m]||m,d):u},d.fontSize=function(m){return arguments.length?(o=PT(m),d):o},d.padding=function(m){return arguments.length?(l=PT(m),d):l},d.random=function(m){return arguments.length?(f=m,d):f},d}function eer(t,r,n,o){if(!r.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(X5<<5)/s,qH/s);var a=0,l=0,u=0,c=n.length,f,d,p,h,m;for(--o;++o<c;){if(r=n[o],i.save(),i.font=r.style+" "+r.weight+" "+~~((r.size+1)/s)+"px "+r.font,f=i.measureText(r.text+"m").width*s,p=r.size<<1,r.rotate){var g=Math.sin(r.rotate*Wbe),y=Math.cos(r.rotate*Wbe),b=f*y,x=f*g,v=p*y,w=p*g;f=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,p=~~Math.max(Math.abs(x+v),Math.abs(x-v))}else f=f+31>>5<<5;if(p>u&&(u=p),a+f>=X5<<5&&(a=0,l+=u,u=0),l+p>=qH)break;i.translate((a+(f>>1))/s,(l+(p>>1))/s),r.rotate&&i.rotate(r.rotate*Wbe),i.fillText(r.text,0,0),r.padding&&(i.lineWidth=2*r.padding,i.strokeText(r.text,0,0)),i.restore(),r.width=f,r.height=p,r.xoff=a,r.yoff=l,r.x1=f>>1,r.y1=p>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,a+=f}for(var _=i.getImageData(0,0,(X5<<5)/s,qH/s).data,C=[];--o>=0;)if(r=n[o],!!r.hasText){for(f=r.width,d=f>>5,p=r.y1-r.y0,h=0;h<p*d;h++)C[h]=0;if(a=r.xoff,a==null)return;l=r.yoff;var S=0,E=-1;for(m=0;m<p;m++){for(h=0;h<f;h++){var A=d*m+(h>>5),N=_[(l+m)*(X5<<5)+(a+h)<<2]?1<<31-h%32:0;C[A]|=N,S|=N}S?E=m:(r.y0++,p--,m--,l++)}r.y1=r.y0+E,r.sprite=C.slice(0,(r.y1-r.y0)*d)}}}function ter(t,r,n){n>>=5;for(var o=t.sprite,i=t.width>>5,s=t.x-(i<<4),a=s&127,l=32-a,u=t.y1-t.y0,c=(t.y+t.y0)*n+(s>>5),f,d=0;d<u;d++){f=0;for(var p=0;p<=i;p++)if((f<<l|(p<i?(f=o[d*i+p])>>>a:0))&r[c+p])return!0;c+=n}return!1}function rer(t,r){var n=t[0],o=t[1];r.x+r.x0<n.x&&(n.x=r.x+r.x0),r.y+r.y0<n.y&&(n.y=r.y+r.y0),r.x+r.x1>o.x&&(o.x=r.x+r.x1),r.y+r.y1>o.y&&(o.y=r.y+r.y1)}function ner(t,r){return t.x+t.x1>r[0].x&&t.x+t.x0<r[1].x&&t.y+t.y1>r[0].y&&t.y+t.y0<r[1].y}function LQe(t){var r=t[0]/t[1];return function(n){return[r*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function oer(t){var r=4,n=r*t[0]/t[1],o=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:o+=n;break;case 1:i+=r;break;case 2:o-=n;break;default:i-=r;break}return[o,i]}}function ier(t){for(var r=[],n=-1;++n<t;)r[n]=0;return r}function PT(t){return typeof t=="function"?t:function(){return t}}function qbe(t){et.call(this,JJt(),t)}var Wbe,X5,qH,ser,BQe,aer,$Qe=D(()=>{"use strict";DD();qa();hH();MQe();jQe();Wbe=Math.PI/180,X5=64,qH=2048;ser={archimedean:LQe,rectangular:oer},BQe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],aer=["text","font","rotate","fontSize","fontStyle","fontWeight"];qbe.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:BQe}]};KKe(qbe,et,{transform(t,r){t.size&&!(t.size[0]&&t.size[1])&&_T("Wordcloud size dimensions must be non-zero.");function n(m){let g=t[m];return dH(g)&&r.modified(g.fields)}let o=t.modified();if(!(o||r.changed(r.ADD_REM)||aer.some(n)))return;let i=r.materialize(r.SOURCE).source,s=this.value,a=t.as||BQe,l=t.fontSize||14,u;if(dH(l)?u=t.fontSizeRange:l=pH(l),u){let m=l,g=Ho("sqrt")().domain(XKe(i,m)).range(u);l=y=>g(m(y))}i.forEach(m=>{m[a[0]]=NaN,m[a[1]]=NaN,m[a[3]]=0});let c=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(l).random(PQe).layout(),f=s.size(),d=f[0]>>1,p=f[1]>>1,h=c.length;for(let m=0,g,y;m<h;++m)g=c[m],y=g.datum,y[a[0]]=g.x+d,y[a[1]]=g.y+p,y[a[2]]=g.font,y[a[3]]=g.size,y[a[4]]=g.style,y[a[5]]=g.weight,y[a[6]]=g.rotate;return r.reflow(o).modifies(a)}})});var Kbe={};fn(Kbe,{crossfilter:()=>Ybe,resolvefilter:()=>Xbe});function cer(){let t=8,r=[],n=K5(0),o=HH(0,t),i=HH(0,t);return{data:()=>r,seen:()=>n=fer(n,r.length),add(s){for(let a=0,l=r.length,u=s.length,c;a<u;++a)c=s[a],c._index=l++,r.push(c)},remove(s,a){let l=r.length,u=Array(l-s),c=r,f,d,p;for(d=0;!a[d]&&d<l;++d)u[d]=r[d],c[d]=d;for(p=d;d<l;++d)f=r[d],a[d]?c[d]=-1:(c[d]=p,o[p]=o[d],i[p]=i[d],u[p]=f,f._index=p++),o[d]=0;return r=u,c},size:()=>r.length,curr:()=>o,prev:()=>i,reset:s=>i[s]=o[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,a){o[s]|=a},clear(s,a){o[s]&=~a},resize(s,a){let l=o.length;(s>l||a>t)&&(t=Math.max(a,t),o=HH(s,t,o),i=HH(s,t))}}}function fer(t,r,n){return t.length>=r?t:(n=n||new t.constructor(r),n.set(t),n)}function HH(t,r,n){let o=(r<257?ler:r<65537?uer:K5)(t);return n&&o.set(n),o}function zQe(t,r,n){let o=1<<r;return{one:o,zero:~o,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(i,s){let a=this,l=a.bisect(a.range,i.value),u=i.index,c=l[0],f=l[1],d=u.length,p;for(p=0;p<c;++p)s[u[p]]|=o;for(p=f;p<d;++p)s[u[p]]|=o;return a}}}function UQe(){let t=K5(0),r=[],n=0;function o(l,u,c){if(!u.length)return[];let f=n,d=u.length,p=K5(d),h=Array(d),m,g,y;for(y=0;y<d;++y)h[y]=l(u[y]),p[y]=y;if(h=der(h,p),f)m=r,g=t,r=Array(f+d),t=K5(f+d),per(c,m,g,f,h,p,d,r,t);else{if(c>0)for(y=0;y<d;++y)p[y]+=c;r=h,t=p}return n=f+d,{index:p,value:h}}function i(l,u){let c=n,f,d,p;for(d=0;!u[t[d]]&&d<c;++d);for(p=d;d<c;++d)u[f=t[d]]||(t[p]=f,r[p]=r[d],++p);n=c-l}function s(l){for(let u=0,c=n;u<c;++u)t[u]=l[t[u]]}function a(l,u){let c;return u?c=u.length:(u=r,c=n),[ile(u,l[0],0,c),oE(u,l[1],0,c)]}return{insert:o,remove:i,bisect:a,reindex:s,index:()=>t,size:()=>n}}function der(t,r){return t.sort.call(r,(n,o)=>{let i=t[n],s=t[o];return i<s?-1:i>s?1:0}),ale(t,r)}function per(t,r,n,o,i,s,a,l,u){let c=0,f=0,d;for(d=0;c<o&&f<a;++d)r[c]<i[f]?(l[d]=r[c],u[d]=n[c++]):(l[d]=i[f],u[d]=s[f++]+t);for(;c<o;++c,++d)l[d]=r[c],u[d]=n[c];for(;f<a;++f,++d)l[d]=i[f],u[d]=s[f]+t}function Ybe(t){et.call(this,cer(),t),this._indices=null,this._dims=null}function Xbe(t){et.call(this,null,t)}var ler,uer,K5,VQe=D(()=>{"use strict";Vo();qa();Os();ler=t=>new Uint8Array(t),uer=t=>new Uint16Array(t),K5=t=>new Uint32Array(t);Ybe.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Dt(Ybe,et,{transform(t,r){if(this._dims){var n=t.modified("fields")||t.fields.some(o=>r.modified(o.fields));return n?this.reinit(t,r):this.eval(t,r)}else return this.init(t,r)},init(t,r){let n=t.fields,o=t.query,i=this._indices={},s=this._dims=[],a=o.length,l=0,u,c;for(;l<a;++l)u=n[l].fname,c=i[u]||(i[u]=UQe()),s.push(zQe(c,l,o[l]));return this.eval(t,r)},reinit(t,r){let n=r.materialize().fork(),o=t.fields,i=t.query,s=this._indices,a=this._dims,l=this.value,u=l.curr(),c=l.prev(),f=l.all(),d=n.rem=n.add,p=n.mod,h=i.length,m={},g,y,b,x,v,w,_,C,S;if(c.set(u),r.rem.length&&(v=this.remove(t,r,n)),r.add.length&&l.add(r.add),r.mod.length)for(w={},x=r.mod,_=0,C=x.length;_<C;++_)w[x[_]._index]=1;for(_=0;_<h;++_)S=o[_],(!a[_]||t.modified("fields",_)||r.modified(S.fields))&&(b=S.fname,(g=m[b])||(s[b]=y=UQe(),m[b]=g=y.insert(S,r.source,0)),a[_]=zQe(y,_,i[_]).onAdd(g,u));for(_=0,C=l.data().length;_<C;++_)v[_]||(c[_]!==u[_]?d.push(_):w[_]&&u[_]!==f&&p.push(_));return l.mask=(1<<h)-1,n},eval(t,r){let n=r.materialize().fork(),o=this._dims.length,i=0;return r.rem.length&&(this.remove(t,r,n),i|=(1<<o)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,r,n)),r.add.length&&(this.insert(t,r,n),i|=(1<<o)-1),r.mod.length&&(this.modify(r,n),i|=(1<<o)-1),this.value.mask=i,n},insert(t,r,n){let o=r.add,i=this.value,s=this._dims,a=this._indices,l=t.fields,u={},c=n.add,f=i.size()+o.length,d=s.length,p=i.size(),h,m,g;i.resize(f,d),i.add(o);let y=i.curr(),b=i.prev(),x=i.all();for(h=0;h<d;++h)m=l[h].fname,g=u[m]||(u[m]=a[m].insert(l[h],o,p)),s[h].onAdd(g,y);for(;p<f;++p)b[p]=x,y[p]!==x&&c.push(p)},modify(t,r){let n=r.mod,o=this.value,i=o.curr(),s=o.all(),a=t.mod,l,u,c;for(l=0,u=a.length;l<u;++l)c=a[l]._index,i[c]!==s&&n.push(c)},remove(t,r,n){let o=this._indices,i=this.value,s=i.curr(),a=i.prev(),l=i.all(),u={},c=n.rem,f=r.rem,d,p,h,m;for(d=0,p=f.length;d<p;++d)h=f[d]._index,u[h]=1,a[h]=m=s[h],s[h]=l,m!==l&&c.push(h);for(h in o)o[h].remove(p,u);return this.reindex(r,p,u),u},reindex(t,r,n){let o=this._indices,i=this.value;t.runAfter(()=>{let s=i.remove(r,n);for(let a in o)o[a].reindex(s)})},update(t,r,n){let o=this._dims,i=t.query,s=r.stamp,a=o.length,l=0,u,c;for(n.filters=0,c=0;c<a;++c)t.modified("query",c)&&(u=c,++l);if(l===1)l=o[u].one,this.incrementOne(o[u],i[u],n.add,n.rem);else for(c=0,l=0;c<a;++c)t.modified("query",c)&&(l|=o[c].one,this.incrementAll(o[c],i[c],s,n.add),n.rem=n.add);return l},incrementAll(t,r,n,o){let i=this.value,s=i.seen(),a=i.curr(),l=i.prev(),u=t.index(),c=t.bisect(t.range),f=t.bisect(r),d=f[0],p=f[1],h=c[0],m=c[1],g=t.one,y,b,x;if(d<h)for(y=d,b=Math.min(h,p);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(d>h)for(y=h,b=Math.min(d,m);y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;if(p>m)for(y=Math.max(d,m),b=p;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;else if(p<m)for(y=Math.max(h,p),b=m;y<b;++y)x=u[y],s[x]!==n&&(l[x]=a[x],s[x]=n,o.push(x)),a[x]^=g;t.range=r.slice()},incrementOne(t,r,n,o){let i=this.value,s=i.curr(),a=t.index(),l=t.bisect(t.range),u=t.bisect(r),c=u[0],f=u[1],d=l[0],p=l[1],h=t.one,m,g,y;if(c<d)for(m=c,g=Math.min(d,f);m<g;++m)y=a[m],s[y]^=h,n.push(y);else if(c>d)for(m=d,g=Math.min(c,p);m<g;++m)y=a[m],s[y]^=h,o.push(y);if(f>p)for(m=Math.max(c,p),g=f;m<g;++m)y=a[m],s[y]^=h,n.push(y);else if(f<p)for(m=Math.max(d,f),g=p;m<g;++m)y=a[m],s[y]^=h,o.push(y);t.range=r.slice()}});Xbe.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Dt(Xbe,et,{transform(t,r){let n=~(t.ignore||0),o=t.filter,i=o.mask;if(!(i&n))return r.StopPropagation;let s=r.fork(r.ALL),a=o.data(),l=o.curr(),u=o.prev(),c=f=>l[f]&n?null:a[f];return s.filter(s.MOD,c),i&i-1?(s.filter(s.ADD,f=>{let d=l[f]&n;return!d&&d^u[f]&n?a[f]:null}),s.filter(s.REM,f=>{let d=l[f]&n;return d&&!(d^(d^u[f]&n))?a[f]:null})):(s.filter(s.ADD,c),s.filter(s.REM,f=>(l[f]&n)===i?a[f]:null)),s.filter(s.SOURCE,f=>c(f._index))}})});function hO(t,r,n){return t.fields=r||[],t.fname=n,t}function her(t){return t.length===1?mer(t[0]):ger(t)}function rl(t){throw Error(t)}function yer(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||rl("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&rl("Access path missing closing bracket: "+t),o&&rl("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function Zbe(t,r,n){let o=yer(t);return t=o.length===1?o[0]:t,hO((n&&n.get||her)(o),[t],r||t)}function Z5(t){return t===Object(t)}function _v(t){return t[t.length-1]}function ZH(t){return t==null||t===""?null:+t}function QH(t,r,n,o){let i=n(t[0]),s=n(_v(t)),a=(s-i)*r;return[o(i-a),o(s-a)]}function YQe(t,r){return QH(t,r,ZH,KH)}function XQe(t,r){var n=Math.sign(t[0]);return QH(t,r,WQe(n),GQe(n))}function KQe(t,r,n){return QH(t,r,XH(n),XH(1/n))}function ZQe(t,r,n){return QH(t,r,qQe(n),HQe(n))}function JH(t,r,n,o,i){let s=o(t[0]),a=o(_v(t)),l=r!=null?o(r):(s+a)/2;return[i(l+(s-l)*n),i(l+(a-l)*n)]}function QQe(t,r,n){return JH(t,r,n,ZH,KH)}function JQe(t,r,n){let o=Math.sign(t[0]);return JH(t,r,n,WQe(o),GQe(o))}function eJe(t,r,n,o){return JH(t,r,n,XH(o),XH(1/o))}function tJe(t,r,n,o){return JH(t,r,n,qQe(o),HQe(o))}function rJe(t){return 1+~~(new Date(t).getMonth()/3)}function nJe(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Jbe(t){return t!=null?_y(t)?t:[t]:[]}function oJe(t,r,n){let o=t[0],i=t[1],s;return i<o&&(s=i,i=o,o=s),s=i-o,s>=n-r?[r,n]:[o=Math.min(Math.max(o,r),n-s),o+s]}function mO(t){return typeof t=="function"}function eY(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function iJe(t,r){let n=0,o,i,s,a;if(t&&(o=t.length))if(r==null){for(i=t[n];n<o&&(i==null||i!==i);i=t[++n]);for(s=a=i;n<o;++n)i=t[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=r(t[n]);n<o&&(i==null||i!==i);i=r(t[++n]));for(s=a=i;n<o;++n)i=r(t[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Sy(t,r){return ber.call(t,r)}function sJe(t,r,n,o,i,s){if(!n&&n!==0)return s;let a=+n,l=t[0],u=_v(t),c;u<l&&(c=l,l=u,u=c),c=Math.abs(r-l);let f=Math.abs(u-r);return c<f&&c<=a?o:f<=a?i:s}function aJe(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function lJe(t){return typeof t=="boolean"}function exe(t){return Object.prototype.toString.call(t)==="[object Date]"}function txe(t){return typeof t=="number"}function uJe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Z_(t){return typeof t=="string"}function cJe(t,r){let n=t[0],o=_v(t),i=+r;return i?i===1?o:n+i*(o-n):n}function YH(t,r){let n="";for(;--r>=0;)n+=t;return n}function fJe(t,r,n,o){let i=n||" ",s=t+"",a=r-s.length;return a<=0?s:o==="left"?YH(i,a)+s:o==="center"?YH(i,~~(a/2))+s+YH(i,Math.ceil(a/2)):s+YH(i,a)}function dJe(t){return t&&_v(t)-t[0]||0}function gO(t){return _y(t)?"["+t.map(gO)+"]":Z5(t)||Z_(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function pJe(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}function hJe(t,r){return r=r||xer,t==null||t===""?null:r(t)}function mJe(t){return t==null||t===""?null:t+""}function rxe(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}function gJe(t,r,n,o){let i=o??"\u2026",s=t+"",a=s.length,l=Math.max(0,r-i.length);return a<=r?s:n==="left"?i+s.slice(a-l):n==="center"?s.slice(0,Math.ceil(l/2))+i+s.slice(a-~~(l/2)):s.slice(0,l)+i}var mer,ger,MHn,KH,PHn,jHn,Qbe,LHn,_y,GQe,WQe,qQe,HQe,XH,ber,xer,nxe=D(()=>{"use strict";mer=t=>function(r){return r[t]},ger=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};MHn=Zbe("id"),KH=hO(t=>t,[],"identity"),PHn=hO(()=>0,[],"zero"),jHn=hO(()=>1,[],"one"),Qbe=hO(()=>!0,[],"true"),LHn=hO(()=>!1,[],"false"),_y=Array.isArray;GQe=t=>r=>t*Math.exp(r),WQe=t=>r=>Math.log(t*r),qQe=t=>r=>Math.sign(r)*Math.log1p(Math.abs(r/t)),HQe=t=>r=>Math.sign(r)*Math.expm1(Math.abs(r))*t,XH=t=>r=>r<0?-Math.pow(-r,t):Math.pow(r,t);ber=Object.prototype.hasOwnProperty;xer=t=>txe(t)||exe(t)?t:Date.parse(t)});function xm(t){this.type=t}function Der(t){switch(t.type){case Ser:return t.elements;case Cer:case Ter:return[t.left,t.right];case uxe:return[t.callee].concat(t.arguments);case Eer:return[t.test,t.consequent,t.alternate];case Aer:return[t.object,t.property];case ker:return t.properties;case wer:return[t.key,t.value];case Ier:return[t.argument];case _er:case BT:case ver:default:return[]}}function iY(t,r){if(!t)throw new Error("ASSERT: "+r)}function Sv(t){return t>=48&&t<=57}function cxe(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function J5(t){return"01234567".indexOf(t)>=0}function Ker(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function tB(t){return t===10||t===13||t===8232||t===8233}function oB(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Yer.test(String.fromCharCode(t))}function rY(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Xer.test(String.fromCharCode(t))}function TJe(){for(;ct<yu;){let t=hr.charCodeAt(ct);if(Ker(t)||tB(t))++ct;else break}}function lxe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ct<yu&&cxe(hr[ct])?(o=hr[ct++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):uo({},nl,Rl);return String.fromCharCode(i)}function Qer(){var t,r,n,o;for(t=hr[ct],r=0,t==="}"&&uo({},nl,Rl);ct<yu&&(t=hr[ct++],!!cxe(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&uo({},nl,Rl),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function AJe(){var t,r;for(t=hr.charCodeAt(ct++),r=String.fromCharCode(t),t===92&&(hr.charCodeAt(ct)!==117&&uo({},nl,Rl),++ct,t=lxe("u"),(!t||t==="\\"||!oB(t.charCodeAt(0)))&&uo({},nl,Rl),r=t);ct<yu&&(t=hr.charCodeAt(ct),!!rY(t));)++ct,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),hr.charCodeAt(ct)!==117&&uo({},nl,Rl),++ct,t=lxe("u"),(!t||t==="\\"||!rY(t.charCodeAt(0)))&&uo({},nl,Rl),r+=t);return r}function Jer(){var t,r;for(t=ct++;ct<yu;){if(r=hr.charCodeAt(ct),r===92)return ct=t,AJe();if(rY(r))++ct;else break}return hr.slice(t,ct)}function etr(){var t,r,n;return t=ct,r=hr.charCodeAt(ct)===92?AJe():Jer(),r.length===1?n=jT:Zer.hasOwnProperty(r)?n=Q_:r==="null"?n=oY:r==="true"||r==="false"?n=nY:n=jT,{type:n,value:r,start:t,end:ct}}function ixe(){var t=ct,r=hr.charCodeAt(ct),n,o=hr[ct],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ct,{type:of,value:String.fromCharCode(r),start:t,end:ct};default:if(n=hr.charCodeAt(ct+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ct+=2,{type:of,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ct};case 33:case 61:return ct+=2,hr.charCodeAt(ct)===61&&++ct,{type:of,value:hr.slice(t,ct),start:t,end:ct}}}if(a=hr.substr(ct,4),a===">>>=")return ct+=4,{type:of,value:a,start:t,end:ct};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ct+=3,{type:of,value:s,start:t,end:ct};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ct+=2,{type:of,value:i,start:t,end:ct};if(i==="//"&&uo({},nl,Rl),"<>=!+-*%&|^/".indexOf(o)>=0)return++ct,{type:of,value:o,start:t,end:ct};uo({},nl,Rl)}function ttr(t){let r="";for(;ct<yu&&cxe(hr[ct]);)r+=hr[ct++];return r.length===0&&uo({},nl,Rl),oB(hr.charCodeAt(ct))&&uo({},nl,Rl),{type:$T,value:parseInt("0x"+r,16),start:t,end:ct}}function rtr(t){let r="0"+hr[ct++];for(;ct<yu&&J5(hr[ct]);)r+=hr[ct++];return(oB(hr.charCodeAt(ct))||Sv(hr.charCodeAt(ct)))&&uo({},nl,Rl),{type:$T,value:parseInt(r,8),octal:!0,start:t,end:ct}}function yJe(){var t,r,n;if(n=hr[ct],iY(Sv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ct,t="",n!=="."){if(t=hr[ct++],n=hr[ct],t==="0"){if(n==="x"||n==="X")return++ct,ttr(r);if(J5(n))return rtr(r);n&&Sv(n.charCodeAt(0))&&uo({},nl,Rl)}for(;Sv(hr.charCodeAt(ct));)t+=hr[ct++];n=hr[ct]}if(n==="."){for(t+=hr[ct++];Sv(hr.charCodeAt(ct));)t+=hr[ct++];n=hr[ct]}if(n==="e"||n==="E")if(t+=hr[ct++],n=hr[ct],(n==="+"||n==="-")&&(t+=hr[ct++]),Sv(hr.charCodeAt(ct)))for(;Sv(hr.charCodeAt(ct));)t+=hr[ct++];else uo({},nl,Rl);return oB(hr.charCodeAt(ct))&&uo({},nl,Rl),{type:$T,value:parseFloat(t),start:r,end:ct}}function ntr(){var t="",r,n,o,i,s=!1;for(r=hr[ct],iY(r==="'"||r==='"',"String literal must starts with a quote"),n=ct,++ct;ct<yu;)if(o=hr[ct++],o===r){r="";break}else if(o==="\\")if(o=hr[ct++],!o||!tB(o.charCodeAt(0)))switch(o){case"u":case"x":hr[ct]==="{"?(++ct,t+=Qer()):t+=lxe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:J5(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ct<yu&&J5(hr[ct])&&(s=!0,i=i*8+"01234567".indexOf(hr[ct++]),"0123".indexOf(o)>=0&&ct<yu&&J5(hr[ct])&&(i=i*8+"01234567".indexOf(hr[ct++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&hr[ct]===`
`&&++ct;else{if(tB(o.charCodeAt(0)))break;t+=o}return r!==""&&uo({},nl,Rl),{type:nB,value:t,octal:s,start:n,end:ct}}function otr(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";uo({},axe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{uo({},axe)}try{return new RegExp(t,r)}catch{return null}}function itr(){var t,r,n,o,i;for(t=hr[ct],iY(t==="/","Regular expression literal must start with a slash"),r=hr[ct++],n=!1,o=!1;ct<yu;)if(t=hr[ct++],r+=t,t==="\\")t=hr[ct++],tB(t.charCodeAt(0))&&uo({},oxe),r+=t;else if(tB(t.charCodeAt(0)))uo({},oxe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||uo({},oxe),i=r.substr(1,r.length-2),{value:i,literal:r}}function str(){var t,r,n;for(r="",n="";ct<yu&&(t=hr[ct],!!rY(t.charCodeAt(0)));)++ct,t==="\\"&&ct<yu?uo({},nl,Rl):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&uo({},axe,n),{value:n,literal:r}}function atr(){var t,r,n,o;return Ro=null,TJe(),t=ct,r=itr(),n=str(),o=otr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ct}}function ltr(t){return t.type===jT||t.type===Q_||t.type===nY||t.type===oY}function kJe(){if(TJe(),ct>=yu)return{type:rB,start:ct,end:ct};let t=hr.charCodeAt(ct);return oB(t)?etr():t===40||t===41||t===59?ixe():t===39||t===34?ntr():t===46?Sv(hr.charCodeAt(ct+1))?yJe():ixe():Sv(t)?yJe():ixe()}function sf(){let t=Ro;return ct=t.end,Ro=kJe(),ct=t.end,t}function IJe(){let t=ct;Ro=kJe(),ct=t}function utr(t){let r=new xm(Oer);return r.elements=t,r}function bJe(t,r,n){let o=new xm(t==="||"||t==="&&"?jer:Fer);return o.operator=t,o.left=r,o.right=n,o}function ctr(t,r){let n=new xm(Rer);return n.callee=t,n.arguments=r,n}function ftr(t,r,n){let o=new xm(Mer);return o.test=t,o.consequent=r,o.alternate=n,o}function fxe(t){let r=new xm(CJe);return r.name=t,r}function Q5(t){let r=new xm(Per);return r.value=t.value,r.raw=hr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function xJe(t,r,n){let o=new xm(Ler);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function dtr(t){let r=new xm(Ber);return r.properties=t,r}function vJe(t,r,n){let o=new xm($er);return o.key=r,o.value=n,o.kind=t,o}function ptr(t,r){let n=new xm(zer);return n.operator=t,n.argument=r,n.prefix=!0,n}function uo(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(iY(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ct,n.description=i,n}function sY(t){t.type===rB&&uo(t,qer),t.type===$T&&uo(t,Uer),t.type===nB&&uo(t,Ver),t.type===jT&&uo(t,Ger),t.type===Q_&&uo(t,Wer),uo(t,nl,t.value)}function bu(t){let r=sf();(r.type!==of||r.value!==t)&&sY(r)}function Ni(t){return Ro.type===of&&Ro.value===t}function sxe(t){return Ro.type===Q_&&Ro.value===t}function htr(){let t=[];for(ct=Ro.start,bu("[");!Ni("]");)Ni(",")?(sf(),t.push(null)):(t.push(LT()),Ni("]")||bu(","));return sf(),utr(t)}function wJe(){ct=Ro.start;let t=sf();return t.type===nB||t.type===$T?(t.octal&&uo(t,EJe),Q5(t)):fxe(t.value)}function mtr(){var t,r,n,o;if(ct=Ro.start,t=Ro,t.type===jT)return n=wJe(),bu(":"),o=LT(),vJe("init",n,o);if(t.type===rB||t.type===of)sY(t);else return r=wJe(),bu(":"),o=LT(),vJe("init",r,o)}function gtr(){var t=[],r,n,o,i={},s=String;for(ct=Ro.start,bu("{");!Ni("}");)r=mtr(),r.key.type===CJe?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?uo({},Her):i[o]=!0,t.push(r),Ni("}")||bu(",");return bu("}"),dtr(t)}function ytr(){bu("(");let t=dxe();return bu(")"),t}function xtr(){var t,r,n;if(Ni("("))return ytr();if(Ni("["))return htr();if(Ni("{"))return gtr();if(t=Ro.type,ct=Ro.start,t===jT||btr[Ro.value])n=fxe(sf().value);else if(t===nB||t===$T)Ro.octal&&uo(Ro,EJe),n=Q5(sf());else{if(t===Q_)throw new Error(eB);t===nY?(r=sf(),r.value=r.value==="true",n=Q5(r)):t===oY?(r=sf(),r.value=null,n=Q5(r)):Ni("/")||Ni("/=")?(n=Q5(atr()),IJe()):sY(sf())}return n}function vtr(){let t=[];if(bu("("),!Ni(")"))for(;ct<yu&&(t.push(LT()),!Ni(")"));)bu(",");return bu(")"),t}function wtr(){ct=Ro.start;let t=sf();return ltr(t)||sY(t),fxe(t.value)}function _tr(){return bu("."),wtr()}function Str(){bu("[");let t=dxe();return bu("]"),t}function Ctr(){var t,r,n;for(t=xtr();;)if(Ni("."))n=_tr(),t=xJe(".",t,n);else if(Ni("("))r=vtr(),t=ctr(t,r);else if(Ni("["))n=Str(),t=xJe("[",t,n);else break;return t}function _Je(){let t=Ctr();if(Ro.type===of&&(Ni("++")||Ni("--")))throw new Error(eB);return t}function tY(){var t,r;if(Ro.type!==of&&Ro.type!==Q_)r=_Je();else{if(Ni("++")||Ni("--"))throw new Error(eB);if(Ni("+")||Ni("-")||Ni("~")||Ni("!"))t=sf(),r=tY(),r=ptr(t.value,r);else{if(sxe("delete")||sxe("void")||sxe("typeof"))throw new Error(eB);r=_Je()}}return r}function SJe(t){let r=0;if(t.type!==of&&t.type!==Q_)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function Etr(){var t,r,n,o,i,s,a,l,u,c;if(t=Ro,u=tY(),o=Ro,i=SJe(o),i===0)return u;for(o.prec=i,sf(),r=[t,Ro],a=tY(),s=[u,o,a];(i=SJe(Ro))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=bJe(l,u,a),s.push(n);o=sf(),o.prec=i,s.push(o),r.push(Ro),n=tY(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=bJe(s[c-1].value,s[c-2],n),c-=2;return n}function LT(){var t,r,n;return t=Etr(),Ni("?")&&(sf(),r=LT(),bu(":"),n=LT(),t=ftr(t,r,n)),t}function dxe(){let t=LT();if(Ni(","))throw new Error(eB);return t}function DJe(t){hr=t,ct=0,yu=hr.length,Ro=null,IJe();let r=dxe();if(Ro.type!==rB)throw new Error("Unexpect token after expression.");return r}function hxe(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&rl("Missing arguments to clamp function."),a.length>3&&rl("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&rl("Missing arguments to if function."),a.length>3&&rl("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function Ttr(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function NJe(t){t=t||{};let r=t.allowed?rxe(t.allowed):{},n=t.forbidden?rxe(t.forbidden):{},o=t.constants||pxe,i=(t.functions||hxe)(d),s=t.globalvar,a=t.fieldvar,l=mO(s)?s:m=>`${s}["${m}"]`,u={},c={},f=0;function d(m){if(Z_(m))return m;let g=p[m.type];return g==null&&rl("Unsupported type: "+m.type),g(m)}let p={Literal:m=>m.raw,Identifier:m=>{let g=m.name;return f>0?g:Sy(n,g)?rl("Illegal identifier: "+g):Sy(o,g)?o[g]:Sy(r,g)?g:(u[g]=1,l(g))},MemberExpression:m=>{let g=!m.computed,y=d(m.object);g&&(f+=1);let b=d(m.property);return y===a&&(c[Ttr(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&rl("Illegal callee type: "+m.callee.type);let g=m.callee.name,y=m.arguments,b=Sy(i,g)&&i[g];return b||rl("Unrecognized function: "+g),mO(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{f+=1;let g=d(m.key);return f-=1,g+":"+d(m.value)}};function h(m){let g={code:d(m),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return h.functions=i,h.constants=o,h}var ver,BT,wer,_er,Ser,Cer,uxe,Eer,Ter,Aer,ker,Ier,Cy,hr,ct,yu,Ro,nY,rB,jT,Q_,oY,$T,of,nB,Ner,Oer,Fer,Rer,Mer,CJe,Per,jer,Ler,Ber,$er,zer,nl,Uer,Ver,Ger,Wer,qer,axe,oxe,EJe,Her,Rl,eB,Yer,Xer,Zer,btr,pxe,OJe=D(()=>{"use strict";nxe();ver="RawCode",BT="Literal",wer="Property",_er="Identifier",Ser="ArrayExpression",Cer="BinaryExpression",uxe="CallExpression",Eer="ConditionalExpression",Ter="LogicalExpression",Aer="MemberExpression",ker="ObjectExpression",Ier="UnaryExpression";xm.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=Der(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};nY=1,rB=2,jT=3,Q_=4,oY=5,$T=6,of=7,nB=8,Ner=9;Cy={};Cy[nY]="Boolean";Cy[rB]="<end>";Cy[jT]="Identifier";Cy[Q_]="Keyword";Cy[oY]="Null";Cy[$T]="Numeric";Cy[of]="Punctuator";Cy[nB]="String";Cy[Ner]="RegularExpression";Oer="ArrayExpression",Fer="BinaryExpression",Rer="CallExpression",Mer="ConditionalExpression",CJe="Identifier",Per="Literal",jer="LogicalExpression",Ler="MemberExpression",Ber="ObjectExpression",$er="Property",zer="UnaryExpression",nl="Unexpected token %0",Uer="Unexpected number",Ver="Unexpected string",Ger="Unexpected identifier",Wer="Unexpected reserved word",qer="Unexpected end of input",axe="Invalid regular expression",oxe="Invalid regular expression: missing /",EJe="Octal literals are not allowed in strict mode.",Her="Duplicate data property in object literal not allowed in strict mode",Rl="ILLEGAL",eB="Disabled.",Yer=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Xer=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");Zer={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};btr={if:1};pxe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function iB(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}var FJe=D(()=>{"use strict"});function mxe(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}var RJe=D(()=>{"use strict"});function aY(t){let r,n,o;t.length!==2?(r=iB,n=(l,u)=>iB(t(l),u),o=(l,u)=>t(l)-u):(r=t===iB||t===mxe?t:Atr,n=t,o=t);function i(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<0?c=d+1:f=d}while(c<f)}return c}function s(l,u,c=0,f=l.length){if(c<f){if(r(u,u)!==0)return f;do{let d=c+f>>>1;n(l[d],u)<=0?c=d+1:f=d}while(c<f)}return c}function a(l,u,c=0,f=l.length){let d=i(l,u,c,f-1);return d>c&&o(l[d-1],u)>-o(l[d],u)?d-1:d}return{left:i,center:a,right:s}}function Atr(){return 0}var MJe=D(()=>{"use strict";FJe();RJe()});function lY(t,...r){t=new N0(t),r=r.map(ktr);e:for(let n of t)for(let o of r)if(!o.has(n)){t.delete(n);continue e}return t}function ktr(t){return t instanceof N0?t:new N0(t)}var PJe=D(()=>{"use strict";sP()});function uY(...t){let r=new N0;for(let n of t)for(let o of n)r.add(o);return r}var jJe=D(()=>{"use strict";sP()});var LJe=D(()=>{"use strict";MJe();PJe();jJe()});function bO(t,r,n){return t.fields=r||[],t.fname=n,t}function Itr(t){return t.length===1?Dtr(t[0]):Ntr(t)}function yO(t){throw Error(t)}function Otr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||yO("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&yO("Access path missing closing bracket: "+t),o&&yO("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function cY(t,r,n){let o=Otr(t);return t=o.length===1?o[0]:t,bO((n&&n.get||Itr)(o),[t],r||t)}function BJe(t){return t[t.length-1]}function J_(t){return t==null||t===""?null:+t}function gxe(t){return t!=null?fY(t)?t:[t]:[]}function $Je(t){for(let r,n,o=1,i=arguments.length;o<i;++o){r=arguments[o];for(n in r)t[n]=r[n]}return t}function dY(t,r){return Ftr.call(t,r)}function sB(t,r,n,o){let i=r[0],s=r[r.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,o=o===void 0||o,(n?i<=t:i<t)&&(o?t<=s:t<s)}function pY(t){return Object.prototype.toString.call(t)==="[object Date]"}var Dtr,Ntr,tYn,rYn,nYn,oYn,iYn,sYn,fY,Ftr,yxe=D(()=>{"use strict";Dtr=t=>function(r){return r[t]},Ntr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};tYn=cY("id"),rYn=bO(t=>t,[],"identity"),nYn=bO(()=>0,[],"zero"),oYn=bO(()=>1,[],"one"),iYn=bO(()=>!0,[],"true"),sYn=bO(()=>!1,[],"false"),fY=Array.isArray;Ftr=Object.prototype.hasOwnProperty});function Wtr(t){this.type=t}function qtr(t){switch(t.type){case jtr:return t.elements;case Ltr:case ztr:return[t.left,t.right];case Btr:return[t.callee].concat(t.arguments);case $tr:return[t.test,t.consequent,t.alternate];case Utr:return[t.object,t.property];case Vtr:return t.properties;case Mtr:return[t.key,t.value];case Gtr:return[t.argument];case Ptr:case bxe:case Rtr:default:return[]}}var Rtr,bxe,Mtr,Ptr,jtr,Ltr,Btr,$tr,ztr,Utr,Vtr,Gtr,Ey,Htr,Ytr,Xtr,Ktr,Ztr,Qtr,Jtr,err,trr,dYn,pYn,zJe=D(()=>{"use strict";yxe();Rtr="RawCode",bxe="Literal",Mtr="Property",Ptr="Identifier",jtr="ArrayExpression",Ltr="BinaryExpression",Btr="CallExpression",$tr="ConditionalExpression",ztr="LogicalExpression",Utr="MemberExpression",Vtr="ObjectExpression",Gtr="UnaryExpression";Wtr.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=qtr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};Htr=1,Ytr=2,Xtr=3,Ktr=4,Ztr=5,Qtr=6,Jtr=7,err=8,trr=9;Ey={};Ey[Htr]="Boolean";Ey[Ytr]="<end>";Ey[Xtr]="Identifier";Ey[Ktr]="Keyword";Ey[Ztr]="Null";Ey[Qtr]="Numeric";Ey[Jtr]="Punctuator";Ey[err]="String";Ey[trr]="RegularExpression";dYn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),pYn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")});function qJe(t){return(!t.getter||!t.getter[UJe])&&(t.getter=cY(t.field),t.getter[UJe]=!0),t.getter}function WJe(t,r){for(var n=r.fields,o=r.values,i=n.length,s=0,a,l;s<i;++s)if(l=n[s],a=qJe(l)(t),pY(a)&&(a=J_(a)),pY(o[s])&&(o[s]=J_(o[s])),fY(o[s])&&pY(o[s][0])&&(o[s]=o[s].map(J_)),l.type===irr){if(fY(o[s])?o[s].indexOf(a)<0:a!==o[s])return!1}else if(l.type===srr){if(!sB(a,o[s]))return!1}else if(l.type===urr){if(!sB(a,o[s],!0,!1))return!1}else if(l.type===arr){if(!sB(a,o[s],!1,!1))return!1}else if(l.type===lrr&&!sB(a,o[s],!1,!0))return!1;return!0}function HJe(t,r,n){for(var o=this.context.data[t],i=o?o.values.value:[],s=o?o[hY]&&o[hY].value:void 0,a=n===vxe,l=i.length,u=0,c,f,d,p,h;u<l;++u)if(c=i[u],s&&a){if(f=f||{},d=f[p=c.unit]||0,d===-1)continue;if(h=WJe(r,c),f[p]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(p).count)return!1}else if(h=WJe(r,c),a^h)return h;return l&&a}function XJe(t,r,n){let o=this.context.data[t],i=o?o.values.value:[],s=o?o[hY]&&o[hY].value:void 0,a=n===vxe,l=aB(r),u=crr(i,l);if(u===i.length||aB(i[u])!==l)return!1;if(s&&a){if(s.size===1)return!0;if(frr(i,l)-u<s.size)return!1}return!0}function KJe(t,r){return t.map(n=>$Je(r.fields?{values:r.fields.map(o=>qJe(o)(n.datum))}:{[Ty]:aB(n.datum)},r))}function ZJe(t,r,n,o){for(var i=this.context.data[t],s=i?i.values.value:[],a={},l={},u={},c,f,d,p,h,m,g,y,b,x,v=s.length,w=0,_,C;w<v;++w)if(c=s[w],p=c.unit,f=c.fields,d=c.values,f&&d){for(_=0,C=f.length;_<C;++_)h=f[_],g=a[h.field]||(a[h.field]={}),y=g[p]||(g[p]=[]),u[h.field]=b=h.type.charAt(0),x=xxe[`${b}_union`],g[p]=x(y,gxe(d[_]));n&&(y=l[p]||(l[p]=[]),y.push(gxe(d).reduce((S,E,A)=>(S[f[A].field]=E,S),{})))}else h=Ty,m=aB(c),g=a[h]||(a[h]={}),y=g[p]||(g[p]=[]),y.push(m),n&&(y=l[p]||(l[p]=[]),y.push({[Ty]:m}));if(r=r||VJe,a[Ty]?a[Ty]=xxe[`${Ty}_${r}`](...Object.values(a[Ty])):Object.keys(a).forEach(S=>{a[S]=Object.keys(a[S]).map(E=>a[S][E]).reduce((E,A)=>E===void 0?A:xxe[`${u[S]}_${r}`](E,A))}),s=Object.keys(l),n&&s.length){let S=o?nrr:rrr;a[S]=r===VJe?{[GJe]:s.reduce((E,A)=>(E.push(...l[A]),E),[])}:{[orr]:s.map(E=>({[GJe]:l[E]}))}}return a}function mY(t,r,n,o){r[0].type!==bxe&&yO("First argument to selection functions must be a string literal.");let i=r[0].value,s=r.length>=2&&BJe(r).value,a="unit",l=prr+a,u=drr+i;s===vxe&&!dY(o,l)&&(o[l]=n.getData(i).indataRef(n,a)),dY(o,u)||(o[u]=n.getData(i).tuplesRef())}var UJe,vxe,VJe,rrr,nrr,GJe,orr,Ty,aB,irr,srr,arr,lrr,urr,hY,YJe,crr,frr,xxe,drr,prr,QJe=D(()=>{"use strict";LJe();yxe();zJe();UJe=Symbol("vega_selection_getter");vxe="intersect",VJe="union",rrr="vlMulti",nrr="vlPoint",GJe="or",orr="and",Ty="_vgsid_",aB=cY(Ty),irr="E",srr="R",arr="R-E",lrr="R-LE",urr="R-RE",hY="index:unit";YJe=aY(aB),crr=YJe.left,frr=YJe.right;xxe={[`${Ty}_union`]:uY,[`${Ty}_intersect`]:lY,E_union:function(t,r){if(!t.length)return r;for(var n=0,o=r.length;n<o;++n)t.indexOf(r[n])<0&&t.push(r[n]);return t},E_intersect:function(t,r){return t.length?t.filter(n=>r.indexOf(n)>=0):r},R_union:function(t,r){var n=J_(r[0]),o=J_(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<o&&(t[1]=o),t):[n,o]},R_intersect:function(t,r){var n=J_(r[0]),o=J_(r[1]);return n>o&&(n=r[1],o=r[0]),t.length?o<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>o&&(t[1]=o),t):[n,o]}},drr=":",prr="@"});function ret(t){let r=this.context.data[t];return r?r.values.value:[]}function hrr(t,r,n){let o=this.context.data[t]["index:"+r],i=o?o.value.get(n):void 0;return i&&i.count}function mrr(t,r){let n=this.context.dataflow,o=this.context.data[t],i=o.input;return n.pulse(i,n.changeset().remove(Qbe).insert(r)),1}function grr(t,r,n){if(t){let o=this.context.dataflow,i=t.mark.source;o.pulse(i,o.changeset().encode(t,r))}return n!==void 0?n:t}function yY(t,r,n){return!Number.isInteger(t)||!Number.isInteger(r)?"":(gY.setYear(2e3),gY.setMonth(t),gY.setDate(r),net.call(this,gY,n))}function wrr(t){return yY.call(this,t,1,"%B")}function _rr(t){return yY.call(this,t,1,"%b")}function Srr(t){return yY.call(this,0,2+t,"%A")}function Crr(t){return yY.call(this,0,2+t,"%a")}function Exe(t,r,n,o){r[0].type!==BT&&rl("First argument to data functions must be a string literal.");let i=r[0].value,s=Err+i;if(!Sy(s,o))try{o[s]=n.getData(i).tuplesRef()}catch{}}function Arr(t,r,n,o){r[0].type!==BT&&rl("First argument to indata must be a string literal."),r[1].type!==BT&&rl("Second argument to indata must be a string literal.");let i=r[0].value,s=r[1].value,a=Trr+s;Sy(a,o)||(o[a]=n.getData(i).indataRef(n,s))}function af(t,r,n,o){if(r[0].type===BT)JJe(n,o,r[0].value);else for(t in n.scales)JJe(n,o,t)}function JJe(t,r,n){let o=_xe+n;if(!Sy(r,o))try{r[o]=t.scaleRef(n)}catch{}}function Cv(t,r){let n;return mO(t)?t:Z_(t)?(n=r.scales[t])&&n.value:void 0}function krr(t,r,n){r.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=af,n._range=af,n._scale=af;let o=i=>"_["+(i.type===BT?gO(_xe+i.value):gO(_xe)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${o(i[0])})`,_range:i=>`${o(i[0])}.range()`,_scale:i=>`${o(i[0])}(${t(i[1])})`}}function Txe(t,r){return function(n,o,i){if(n){let s=Cv(n,(i||this).context);return s&&s.path[t](o)}else return r(o)}}function Orr(t){let r=this.context.group,n=!1;if(r)for(;t;){if(t===r){n=!0;break}t=t.mark.group}return n}function Axe(t,r,n){try{t[r].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(o){t.warn(o)}return n[n.length-1]}function Frr(){return Axe(this.context.dataflow,"warn",arguments)}function Rrr(){return Axe(this.context.dataflow,"info",arguments)}function Mrr(){return Axe(this.context.dataflow,"debug",arguments)}function wxe(t){let r=t/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Sxe(t){let r=ta(t),n=wxe(r.r),o=wxe(r.g),i=wxe(r.b);return .2126*n+.7152*o+.0722*i}function Prr(t,r){let n=Sxe(t),o=Sxe(r),i=Math.max(n,o),s=Math.min(n,o);return(i+.05)/(s+.05)}function jrr(){let t=[].slice.call(arguments);return t.unshift({}),eY(...t)}function iet(t,r){return t===r||t!==t&&r!==r?!0:_y(t)?_y(r)&&t.length===r.length?Lrr(t,r):!1:Z5(t)&&Z5(r)?set(t,r):!1}function Lrr(t,r){for(let n=0,o=t.length;n<o;++n)if(!iet(t[n],r[n]))return!1;return!0}function set(t,r){for(let n in t)if(!iet(t[n],r[n]))return!1;return!0}function eet(t){return r=>set(t,r)}function Brr(t,r,n,o,i,s){let a=this.context.dataflow,l=this.context.data[t],u=l.input,c=a.stamp(),f=l.changes,d,p;if(a._trigger===!1||!(u.value.length||r||o))return 0;if((!f||f.stamp<c)&&(l.changes=f=a.changeset(),f.stamp=c,a.runAfter(()=>{l.modified=!0,a.pulse(u,f).run()},!0,1)),n&&(d=n===!0?Qbe:_y(n)||rE(n)?n:eet(n),f.remove(d)),r&&f.insert(r),o&&(d=eet(o),u.value.some(d)?f.remove(d):f.insert(o)),i)for(p in s)f.modify(i,p,s[p]);return 1}function $rr(t){let r=t.touches,n=r[0].clientX-r[1].clientX,o=r[0].clientY-r[1].clientY;return Math.sqrt(n*n+o*o)}function zrr(t){let r=t.touches;return Math.atan2(r[0].clientY-r[1].clientY,r[0].clientX-r[1].clientX)}function Urr(t,r){let n=tet[r]||(tet[r]=Zbe(r));return _y(t)?t.map(n):n(t)}function kxe(t){return _y(t)||ArrayBuffer.isView(t)?t:null}function Ixe(t){return kxe(t)||(Z_(t)?t:null)}function Vrr(t,...r){return kxe(t).join(...r)}function Grr(t,...r){return Ixe(t).indexOf(...r)}function Wrr(t,...r){return Ixe(t).lastIndexOf(...r)}function qrr(t,...r){return Ixe(t).slice(...r)}function Hrr(t,r,n){return mO(n)&&rl("Function argument passed to replace."),String(t).replace(r,n)}function Yrr(t){return kxe(t).slice().reverse()}function Xrr(t,r,n){return HL(t||0,r||0,n||0)}function Krr(t,r){let n=Cv(t,(r||this).context);return n&&n.bandwidth?n.bandwidth():0}function Zrr(t,r){let n=Cv(t,(r||this).context);return n?n.copy():void 0}function Qrr(t,r){let n=Cv(t,(r||this).context);return n?n.domain():[]}function Jrr(t,r,n){let o=Cv(t,(n||this).context);return o?_y(r)?(o.invertRange||o.invert)(r):(o.invert||o.invertExtent)(r):void 0}function enr(t,r){let n=Cv(t,(r||this).context);return n&&n.range?n.range():[]}function tnr(t,r,n){let o=Cv(t,(n||this).context);return o?o(r):void 0}function rnr(t,r,n,o,i){t=Cv(t,(i||this).context);let s=G0e(r,n),a=t.domain(),l=a[0],u=_v(a),c=KH;return u-l?c=aW(t,l,u):t=(t.interpolator?Vn("sequential")().interpolator(t.interpolator()):Vn("linear")().interpolate(t.interpolate()).range(t.range())).domain([l=0,u=1]),t.ticks&&(a=t.ticks(+o||15),l!==a[0]&&a.unshift(l),u!==_v(a)&&a.push(u)),a.forEach(f=>s.stop(c(f),t(f))),s}function nnr(t,r,n){let o=Cv(t,(n||this).context);return function(i){return o?o.path.context(i)(r):""}}function onr(t){let r=null;return function(n){return n?YN(n,r=r||xT(t)):t}}function uet(t,r){let n=ret.call(r,t);return n.root&&n.root.lookup||{}}function inr(t,r,n){let o=uet(t,this),i=o[r],s=o[n];return i&&s?i.path(s).map(aet):void 0}function snr(t,r){let n=uet(t,this)[r];return n?n.ancestors().map(aet):void 0}function anr(){let t=cet();return t?t.screen:{}}function lnr(){let t=cet();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function unr(){let t=this.context.dataflow,r=t.container&&t.container();return r?[r.clientWidth,r.clientHeight]:[void 0,void 0]}function cnr(t,r,n){if(!t)return[];let[o,i]=t,s=new hu().set(o[0],o[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return vye(a,s,fnr(r))}function fnr(t){let r=null;if(t){let n=Jbe(t.marktype),o=Jbe(t.markname);r=i=>(!n.length||n.some(s=>i.marktype===s))&&(!o.length||o.some(s=>i.name===s))}return r}function hnr(t){let r=hxe(t);dnr.forEach(n=>r[n]=pnr+n);for(let n in xO)r[n]=fet+n;return eY(r,krr(t,xO,Dxe)),r}function Ms(t,r,n){return arguments.length===1?xO[t]:(xO[t]=r,n&&(Dxe[t]=n),Cxe&&(Cxe.functions[t]=fet+t),this)}function vm(t,r){let n={},o;try{t=Z_(t)?t:gO(t)+"",o=DJe(t)}catch{rl("Expression parse error: "+t)}o.visit(s=>{if(s.type!==uxe)return;let a=s.callee.name,l=det.visitors[a];l&&l(a,s.arguments,r,n)});let i=Cxe(o);return i.globals.forEach(s=>{let a=oet+s;!Sy(n,a)&&r.getSignal(s)&&(n[a]=r.signalRef(s))}),{$expr:eY({code:i.code},r.options.ast?{ast:o}:null),$fields:i.fields,$params:n}}var lB,yrr,net,brr,xrr,vrr,gY,Err,Trr,_xe,oet,Irr,Drr,Nrr,tet,aet,cet,xO,dnr,pnr,fet,Dxe,det,Cxe,bY=D(()=>{"use strict";nxe();OJe();S4();Fs();qa();xN();h5();QJe();vD();CD();Vo();lB=t=>function(r,n){return this.context.dataflow.locale()[t](n)(r)},yrr=lB("format"),net=lB("timeFormat"),brr=lB("utcFormat"),xrr=lB("timeParse"),vrr=lB("utcParse"),gY=new Date(2e3,0,1);Err=":",Trr="@",_xe="%",oet="$";Irr=Txe("area",ohe),Drr=Txe("bounds",ahe),Nrr=Txe("centroid",dhe);tet={};aet=t=>t.data;cet=()=>typeof window<"u"&&window||null;xO={random(){return rd()},cumulativeNormal:OP,cumulativeLogNormal:x9,cumulativeUniform:S9,densityNormal:h9,densityLogNormal:b9,densityUniform:_9,quantileNormal:FP,quantileLogNormal:v9,quantileUniform:C9,sampleNormal:NP,sampleLogNormal:y9,sampleUniform:w9,isArray:_y,isBoolean:lJe,isDate:exe,isDefined(t){return t!==void 0},isNumber:txe,isObject:Z5,isRegExp:uJe,isString:Z_,isTuple:rE,isValid(t){return t!=null&&t===t},toBoolean:pJe,toDate:hJe,toNumber:ZH,toString:mJe,indexof:Grr,join:Vrr,lastindexof:Wrr,replace:Hrr,reverse:Yrr,slice:qrr,flush:sJe,lerp:cJe,merge:jrr,pad:fJe,peek:_v,pluck:Urr,span:dJe,inrange:aJe,truncate:gJe,rgb:ta,lab:Kc,hcl:dd,hsl:fd,luminance:Sxe,contrast:Prr,sequence:Qs,format:yrr,utcFormat:brr,utcParse:vrr,utcOffset:uue,utcSequence:fue,timeFormat:net,timeParse:xrr,timeOffset:lue,timeSequence:cue,timeUnitSpecifier:eue,monthFormat:wrr,monthAbbrevFormat:_rr,dayFormat:Srr,dayAbbrevFormat:Crr,quarter:rJe,utcquarter:nJe,week:nue,utcweek:iue,dayofyear:rue,utcdayofyear:oue,warn:Frr,info:Rrr,debug:Mrr,extent:iJe,inScope:Orr,intersect:cnr,clampRange:oJe,pinchDistance:$rr,pinchAngle:zrr,screen:anr,containerSize:unr,windowSize:lnr,bandspace:Xrr,setdata:mrr,pathShape:onr,panLinear:YQe,panLog:XQe,panPow:KQe,panSymlog:ZQe,zoomLinear:QQe,zoomLog:JQe,zoomPow:eJe,zoomSymlog:tJe,encode:grr,modify:Brr},dnr=["view","item","group","xy","x","y"],pnr="event.vega.",fet="this.",Dxe={},det={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${gO(oet+t)}]`,functions:hnr,constants:pxe,visitors:Dxe},Cxe=NJe(det);Ms("bandwidth",Krr,af);Ms("copy",Zrr,af);Ms("domain",Qrr,af);Ms("range",enr,af);Ms("invert",Jrr,af);Ms("scale",tnr,af);Ms("gradient",rnr,af);Ms("geoArea",Irr,af);Ms("geoBounds",Drr,af);Ms("geoCentroid",Nrr,af);Ms("geoShape",nnr,af);Ms("indata",hrr,Arr);Ms("data",ret,Exe);Ms("treePath",inr,Exe);Ms("treeAncestors",snr,Exe);Ms("vlSelectionTest",HJe,mY);Ms("vlSelectionIdTest",XJe,mY);Ms("vlSelectionResolve",ZJe,mY);Ms("vlSelectionTuples",KJe)});function wm(t,r,n){return t.fields=r||[],t.fname=n,t}function mnr(t){return t==null?null:t.fields}function pet(t){return t.length===1?gnr(t[0]):ynr(t)}function e2(t){throw Error(t)}function het(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||e2("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&e2("Access path missing closing bracket: "+t),o&&e2("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function xY(t,r,n){let o=het(t);return t=o.length===1?o[0]:t,wm((n&&n.get||pet)(o),[t],r||t)}function wY(t){return t===Object(t)}function vO(t){return t!=null?vY(t)?t:[t]:[]}function bnr(t){return typeof t=="function"}function get(t,r,n){n=n||{},r=vO(r)||[];let o=[],i=[],s={},a=n.comparator||vnr;return vO(t).forEach((l,u)=>{l!=null&&(o.push(r[u]===xnr?-1:1),i.push(l=bnr(l)?l:xY(l,null,n)),(mnr(l)||[]).forEach(c=>s[c]=1))}),i.length===0?null:wm(a(i,o),Object.keys(s))}function bet(t,r){return Snr.call(t,r)}function Cnr(t){return typeof t=="string"}function xet(t,r,n){t&&(t=r?vO(t).map(l=>l.replace(/\\(.)/g,"$1")):vO(t));let o=t&&t.length,i=n&&n.get||pet,s=l=>i(r?[l]:het(l)),a;if(!o)a=function(){return""};else if(o===1){let l=s(t[0]);a=function(u){return""+l(u)}}else{let l=t.map(s);a=function(u){let c=""+l[0](u),f=0;for(;++f<o;)c+="|"+l[f](u);return c}}return wm(a,t,"key")}function _Y(t){return vY(t)?"["+t.map(_Y)+"]":wY(t)||Cnr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Nxe(t){let r={},n=t.length;for(let o=0;o<n;++o)r[t[o]]=!0;return r}var gnr,ynr,NYn,OYn,FYn,RYn,met,MYn,vY,xnr,yet,vnr,wnr,_nr,Snr,vet=D(()=>{"use strict";gnr=t=>function(r){return r[t]},ynr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};NYn=xY("id"),OYn=wm(t=>t,[],"identity"),FYn=wm(()=>0,[],"zero"),RYn=wm(()=>1,[],"one"),met=wm(()=>!0,[],"true"),MYn=wm(()=>!1,[],"false"),vY=Array.isArray;xnr="descending";yet=(t,r)=>(t<r||t==null)&&r!=null?-1:(t>r||r==null)&&t!=null?1:(r=r instanceof Date?+r:r,(t=t instanceof Date?+t:t)!==t&&r===r?-1:r!==r&&t===t?1:0),vnr=(t,r)=>t.length===1?wnr(t[0],r[0]):_nr(t,r,t.length),wnr=(t,r)=>function(n,o){return yet(t(n),t(o))*r},_nr=(t,r,n)=>(r.push(0),function(o,i){let s,a=0,l=-1;for(;a===0&&++l<n;)s=t[l],a=yet(s(o),s(i));return a*r[l]}),Snr=Object.prototype.hasOwnProperty});function Enr(t){let r=this,n=t.operators||[];return t.background&&(r.background=t.background),t.eventConfig&&(r.eventConfig=t.eventConfig),t.locale&&(r.locale=t.locale),n.forEach(o=>r.parseOperator(o)),n.forEach(o=>r.parseOperatorParameters(o)),(t.streams||[]).forEach(o=>r.parseStream(o)),(t.updates||[]).forEach(o=>r.parseUpdate(o)),r.resolve()}function Anr(t,r){let n="";return Tnr[r]||(t.x2&&(t.x?(wet[r]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(wet[r]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Oxe(t){return(t+"").toLowerCase()}function knr(t){return Oxe(t)==="operator"}function Inr(t){return Oxe(t)==="collect"}function uB(t,r,n){n.endsWith(";")||(n="return("+n+");");let o=Function(...r.concat(n));return t&&t.functions?o.bind(t.functions):o}function Dnr(t,r,n,o){return`((u = ${t}) < (v = ${r}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${o}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${o} : `}function Onr(t){let r=this;knr(t.type)||!t.type?r.operator(t,t.update?r.operatorExpression(t.update):null):r.transform(t,t.type)}function Fnr(t){let r=this;if(t.params){let n=r.get(t.id);n||e2("Invalid operator id: "+t.id),r.dataflow.connect(n,n.parameters(r.parseParameters(t.params),t.react,t.initonly))}}function Rnr(t,r){r=r||{};let n=this;for(let o in t){let i=t[o];r[o]=vY(i)?i.map(s=>_et(s,n,r)):_et(i,n,r)}return r}function _et(t,r,n){if(!t||!wY(t))return t;for(let o=0,i=Cet.length,s;o<i;++o)if(s=Cet[o],bet(t,s.key))return s.parse(t,r,n);return t}function Mnr(t,r){return r.get(t.$ref)||e2("Operator not defined: "+t.$ref)}function Pnr(t,r,n){t.$params&&r.parseParameters(t.$params,n);let o="e:"+t.$expr.code;return r.fn[o]||(r.fn[o]=wm(r.parameterExpression(t.$expr),t.$fields))}function jnr(t,r){let n="k:"+t.$key+"_"+!!t.$flat;return r.fn[n]||(r.fn[n]=xet(t.$key,t.$flat,r.expr.codegen))}function Lnr(t,r){if(!t.$field)return null;let n="f:"+t.$field+"_"+t.$name;return r.fn[n]||(r.fn[n]=xY(t.$field,t.$name,r.expr.codegen))}function Bnr(t,r){let n="c:"+t.$compare+"_"+t.$order,o=vO(t.$compare).map(i=>i&&i.$tupleid?xr:i);return r.fn[n]||(r.fn[n]=get(o,t.$order,r.expr.codegen))}function $nr(t,r){let n=t.$encode,o={};for(let i in n){let s=n[i];o[i]=wm(r.encodeExpression(s.$expr),s.$fields),o[i].output=s.$output}return o}function znr(t,r){return r}function Unr(t,r){let n=t.$subflow;return function(o,i,s){let a=r.fork().parse(n),l=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(s),l.detachSubflow=()=>r.detach(a),l}}function Vnr(){return xr}function Gnr(t){var r=this,n=t.filter!=null?r.eventExpression(t.filter):void 0,o=t.stream!=null?r.get(t.stream):void 0,i;t.source?o=r.events(t.source,t.type,n):t.merge&&(i=t.merge.map(s=>r.get(s)),o=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(s=>r.get(s)),o=o.between(i[0],i[1])),t.filter&&(o=o.filter(n)),t.throttle!=null&&(o=o.throttle(+t.throttle)),t.debounce!=null&&(o=o.debounce(+t.debounce)),o==null&&e2("Invalid stream definition: "+JSON.stringify(t)),t.consume&&o.consume(!0),r.stream(t,o)}function Wnr(t){var r=this,n=wY(n=t.source)?n.$ref:n,o=r.get(n),i=null,s=t.update,a=void 0;o||e2("Source not defined: "+t.source),i=t.target&&t.target.$expr?r.eventExpression(t.target.$expr):r.get(t.target),s&&s.$expr&&(s.$params&&(a=r.parseParameters(s.$params)),s=r.handlerExpression(s.$expr)),r.update(t,o,i,s,a)}function Hnr(t){var r=this,n={};if(t.signals){var o=n.signals={};Object.keys(r.signals).forEach(s=>{let a=r.signals[s];t.signals(s,a)&&(o[s]=a.value)})}if(t.data){var i=n.data={};Object.keys(r.data).forEach(s=>{let a=r.data[s];t.data(s,a)&&(i[s]=a.input.value)})}return r.subcontext&&t.recurse!==!1&&(n.subcontext=r.subcontext.map(s=>s.getState(t))),n}function Ynr(t){var r=this,n=r.dataflow,o=t.data,i=t.signals;Object.keys(i||{}).forEach(s=>{n.update(r.signals[s],i[s],qnr)}),Object.keys(o||{}).forEach(s=>{n.pulse(r.data[s].input,n.changeset().remove(met).insert(o[s]))}),(t.subcontext||[]).forEach((s,a)=>{let l=r.subcontext[a];l&&l.setState(s)})}function SY(t,r,n,o){return new Tet(t,r,n,o)}function Tet(t,r,n,o){this.dataflow=t,this.transforms=r,this.events=t.events.bind(t),this.expr=o||Nnr,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Eet(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}var Tnr,wet,Nnr,Cet,qnr,Fxe=D(()=>{"use strict";vet();qa();Tnr=Nxe(["rule"]),wet=Nxe(["group","image","rect"]);Nnr={operator:(t,r)=>uB(t,["_"],r.code),parameter:(t,r)=>uB(t,["datum","_"],r.code),event:(t,r)=>uB(t,["event"],r.code),handler:(t,r)=>{let n=`var datum=event.item&&event.item.datum;return ${r.code};`;return uB(t,["_","event"],n)},encode:(t,r)=>{let{marktype:n,channels:o}=r,i="var o=item,datum=o.datum,m=0,$;";for(let s in o){let a="o["+_Y(s)+"]";i+=`$=${o[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=Anr(o,n),i+="return m;",uB(t,["item","_"],i)},codegen:{get(t){let r=`[${t.map(_Y).join("][")}]`,n=Function("_",`return _${r};`);return n.path=r,n},comparator(t,r){let n,o=(s,a)=>{let l=r[a],u,c;return s.path?(u=`a${s.path}`,c=`b${s.path}`):((n=n||{})["f"+a]=s,u=`this.f${a}(a)`,c=`this.f${a}(b)`),Dnr(u,c,-l,l)},i=Function("a","b","var u, v; return "+t.map(o).join("")+"0;");return n?i.bind(n):i}}};Cet=[{key:"$ref",parse:Mnr},{key:"$key",parse:jnr},{key:"$expr",parse:Pnr},{key:"$field",parse:Lnr},{key:"$encode",parse:$nr},{key:"$compare",parse:Bnr},{key:"$context",parse:znr},{key:"$subflow",parse:Unr},{key:"$tupleid",parse:Vnr}];qnr={skip:!0};Tet.prototype=Eet.prototype={fork(){let t=new Eet(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);let r=Object.keys(t.nodes);for(let n of r)t.nodes[n]._targets=null;for(let n of r)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,r){return this.nodes[t]=r},add(t,r){let n=this,o=n.dataflow,i=t.value;if(n.set(t.id,r),Inr(t.type)&&i&&(i.$ingest?o.ingest(r,i.$ingest,i.$format):i.$request?o.preload(r,i.$request,i.$format):o.pulse(r,o.changeset().insert(i))),t.root&&(n.root=r),t.parent){let s=n.get(t.parent.$ref);s?(o.connect(s,[r]),r.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),o.connect(s,[r]),r.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=r),t.scale&&(n.scales[t.scale]=r),t.data)for(let s in t.data){let a=n.data[s]||(n.data[s]={});t.data[s].forEach(l=>a[l]=r)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,r){this.add(t,this.dataflow.add(t.value,r))},transform(t,r){this.add(t,this.dataflow.add(this.transforms[Oxe(r)]))},stream(t,r){this.set(t.id,r)},update(t,r,n,o,i){this.dataflow.on(r,n,o,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:Enr,parseOperator:Onr,parseOperatorParameters:Fnr,parseParameters:Rnr,parseStream:Gnr,parseUpdate:Wnr,getState:Hnr,setState:Ynr}});function Xnr(t){let r=t.container();r&&(r.setAttribute("role","graphics-document"),r.setAttribute("aria-roleDescription","visualization"),Met(r,t.description()))}function Met(t,r){t&&(r==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",r))}function Knr(t){t.add(null,r=>(t._background=r.bg,t._resize=1,r.bg),{bg:t._signals.background})}function Znr(t){let r=t._signals.cursor||(t._signals.cursor=t.add({user:Rxe,item:null}));t.on(t.events("view","mousemove"),r,(n,o)=>{let i=r.value,s=i?Zn(i)?i:i.user:Rxe,a=o.item&&o.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),t.add(null,function(n){let o=n.cursor,i=this.value;return Zn(o)||(i=o.item,o=o.user),Pxe(t,o&&o!==Rxe?o:i||o),i},{cursor:r})}function Pxe(t,r){let n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return r==null?n.style.removeProperty("cursor"):n.style.cursor=r}function TY(t,r){var n=t._runtime.data;return Rr(n,r)||pt("Unrecognized data set: "+r),n[r]}function Qnr(t,r){return arguments.length<2?TY(this,t).values.value:kY.call(this,t,Lx().remove(A0).insert(r))}function kY(t,r){ele(r)||pt("Second argument to changes must be a changeset.");let n=TY(this,t);return n.modified=!0,this.pulse(n.input,r)}function Jnr(t,r){return kY.call(this,t,Lx().insert(r))}function eor(t,r){return kY.call(this,t,Lx().remove(r))}function Pet(t){var r=t.padding();return Math.max(0,t._viewWidth+r.left+r.right)}function jet(t){var r=t.padding();return Math.max(0,t._viewHeight+r.top+r.bottom)}function IY(t){var r=t.padding(),n=t._origin;return[r.left+n[0],r.top+n[1]]}function tor(t){var r=IY(t),n=Pet(t),o=jet(t);t._renderer.background(t.background()),t._renderer.resize(n,o,r),t._handler.origin(r),t._resizeListeners.forEach(i=>{try{i(n,o)}catch(s){t.error(s)}})}function ror(t,r,n){var o=t._renderer,i=o&&o.canvas(),s,a,l;return i&&(l=IY(t),a=r.changedTouches?r.changedTouches[0]:r,s=d5(a,i),s[0]-=l[0],s[1]-=l[1]),r.dataflow=t,r.item=n,r.vega=nor(t,n,s),r}function nor(t,r,n){let o=r?r.mark.marktype==="group"?r:r.mark.group:null;function i(a){var l=o,u;if(a){for(u=r;u;u=u.mark.group)if(u.mark.name===a){l=u;break}}return l&&l.mark&&l.mark.interactive?l:{}}function s(a){if(!a)return n;Zn(a)&&(a=i(a));let l=n.slice();for(;a;)l[0]-=a.x||0,l[1]-=a.y||0,a=a.mark&&a.mark.group;return l}return{view:Ga(t),item:Ga(r||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}function aor(t){let r=an({defaults:{}},t),n=(o,i)=>{i.forEach(s=>{Hr(o[s])&&(o[s]=ou(o[s]))})};return n(r.defaults,["prevent","allow"]),n(r,["view","window","selector"]),r}function Let(t,r,n,o){t._eventListeners.push({type:n,sources:Lr(r),handler:o})}function lor(t,r){var n=t._eventConfig.defaults,o=n.prevent,i=n.allow;return o===!1||i===!0?!1:o===!0||i===!1?!0:o?o[r]:i?!i[r]:t.preventDefault()}function CY(t,r,n){let o=t._eventConfig&&t._eventConfig[r];return o===!1||un(o)&&!o[n]?(t.warn(`Blocked ${r} ${n} event listener.`),!1):!0}function uor(t,r,n){var o=this,i=new hD(n),s=function(c,f){o.runAsync(null,()=>{t===Aet&&lor(o,r)&&c.preventDefault(),i.receive(ror(o,c,f))})},a;if(t===oor)CY(o,"timer",r)&&o.timer(s,r);else if(t===Aet)CY(o,"view",r)&&o.addEventListener(r,s,sor);else if(t===ior?CY(o,"window",r)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&CY(o,"selector",r)&&(a=document.querySelectorAll(t)),!a)o.warn("Can not resolve event source: "+t);else{for(var l=0,u=a.length;l<u;++l)a[l].addEventListener(r,s);Let(o,a,r,s)}return i}function ket(t){return t.item}function Iet(t){return t.item.mark.source}function Det(t){return function(r,n){return n.vega.view().changeset().encode(n.item,t)}}function cor(t,r){return t=[t||"hover"],r=[r||"update",t[0]],this.on(this.events("view","mouseover",ket),Iet,Det(t)),this.on(this.events("view","mouseout",ket),Iet,Det(r)),this}function dor(){var t=this._tooltip,r=this._timers,n=this._eventListeners,o,i,s;for(o=r.length;--o>=0;)r[o].stop();for(o=n.length;--o>=0;)for(s=n[o],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function _d(t,r,n){let o=document.createElement(t);for(let i in r)o.setAttribute(i,r[i]);return n!=null&&(o.textContent=n),o}function gor(t,r,n){if(!r)return;let o=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=t.signal(o.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(o.signal,a)})}},o.debounce&&(i.update=Kse(o.debounce,i.update))),(o.input==null&&o.element?yor:xor)(i,r,o,t),i.active||(t.on(t._signals[o.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(o.signal))}),i.active=!0),i}function yor(t,r,n,o){let i=n.event||"input",s=()=>t.update(r.value);o.signal(n.signal,r.value),r.addEventListener(i,s),Let(o,r,i,s),t.set=a=>{r.value=a,r.dispatchEvent(bor(i))}}function bor(t){return typeof Event<"u"?new Event(t):{type:t}}function xor(t,r,n,o){let i=o.signal(n.signal),s=_d("div",{class:por}),a=n.input==="radio"?s:s.appendChild(_d("label"));a.appendChild(_d("span",{class:hor},n.name||n.signal)),r.appendChild(s);let l=vor;switch(n.input){case"checkbox":l=wor;break;case"select":l=_or;break;case"radio":l=Sor;break;case"range":l=Cor;break}l(t,a,n,i)}function vor(t,r,n,o){let i=_d("input");for(let s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=o,r.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=s=>i.value=s}function wor(t,r,n,o){let i={type:"checkbox",name:n.signal};o&&(i.checked=!0);let s=_d("input",i);r.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=a=>s.checked=!!a||null}function _or(t,r,n,o){let i=_d("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,l)=>{let u={value:a};AY(a,o)&&(u.selected=!0),i.appendChild(_d("option",u,(s[l]||a)+""))}),r.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=a=>{for(let l=0,u=n.options.length;l<u;++l)if(AY(n.options[l],a)){i.selectedIndex=l;return}}}function Sor(t,r,n,o){let i=_d("span",{class:mor}),s=n.labels||[];r.appendChild(i),t.elements=n.options.map((a,l)=>{let u={type:"radio",name:n.signal,value:a};AY(a,o)&&(u.checked=!0);let c=_d("input",u);c.addEventListener("change",()=>t.update(a));let f=_d("label",{},(s[l]||a)+"");return f.prepend(c),i.appendChild(f),c}),t.set=a=>{let l=t.elements,u=l.length;for(let c=0;c<u;++c)AY(l[c].value,a)&&(l[c].checked=!0)}}function Cor(t,r,n,o){o=o!==void 0?o:(+n.max+ +n.min)/2;let i=n.max!=null?n.max:Math.max(100,+o)||100,s=n.min||Math.min(0,i,+o)||0,a=n.step||ec(s,i,100),l=_d("input",{type:"range",name:n.signal,min:s,max:i,step:a});l.value=o;let u=_d("span",{},+o);r.appendChild(l),r.appendChild(u);let c=()=>{u.textContent=l.value,t.update(+l.value)};l.addEventListener("input",c),l.addEventListener("change",c),t.elements=[l],t.set=f=>{l.value=f,u.textContent=f}}function AY(t,r){return t===r||t+""==r+""}function Bet(t,r,n,o,i,s){return r=r||new o(t.loader()),r.initialize(n,Pet(t),jet(t),IY(t),i,s).background(t.background())}function jxe(t,r){return r?function(){try{r.apply(this,arguments)}catch(n){t.error(n)}}:null}function Eor(t,r,n,o){let i=new o(t.loader(),jxe(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,IY(t),t);return r&&r.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Tor(t,r){let n=this,o=n._renderType,i=n._eventConfig.bind,s=p5(o);t=n._el=t?Mxe(n,t,!0):null,Xnr(n),s||n.error("Unrecognized renderer type: "+o);let a=s.handler||JN,l=t?s.renderer:s.headless;return n._renderer=l?Bet(n,n._renderer,t,l):null,n._handler=Eor(n,n._handler,t,a),n._redraw=!0,t&&i!=="none"&&(r=r?n._elBind=Mxe(n,r,!0):t.appendChild(_d("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=Mxe(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{gor(n,u.element||r,u)})),n}function Mxe(t,r,n){if(typeof r=="string")if(typeof document<"u"){if(r=document.querySelector(r),!r)return t.error("Signal bind element not found: "+r),null}else return t.error("DOM document instance not found."),null;if(r&&n)try{r.innerHTML=""}catch(o){r=null,t.error(o)}return r}function Net(t){return un(t)?{top:cB(t.top),bottom:cB(t.bottom),left:cB(t.left),right:cB(t.right)}:Aor(cB(t))}function Lxe(t,r,n,o){return Be(this,null,function*(){let i=p5(r),s=i&&i.headless;return s||pt("Unrecognized renderer type: "+r),yield t.runAsync(),Bet(t,null,null,s,n,o).renderAsync(t._scenegraph.root)})}function kor(t,r){return Be(this,null,function*(){t!==pv.Canvas&&t!==pv.SVG&&t!==pv.PNG&&pt("Unrecognized image type: "+t);let n=yield Lxe(this,t,r);return t===pv.SVG?Ior(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")})}function Ior(t,r){let n=new Blob([t],{type:r});return window.URL.createObjectURL(n)}function Dor(t,r){return Be(this,null,function*(){return(yield Lxe(this,pv.Canvas,t,r)).canvas()})}function Nor(t){return Be(this,null,function*(){return(yield Lxe(this,pv.SVG,t)).svg()})}function Oor(t,r,n){return SY(t,jx,xO,n).parse(r)}function For(t){var r=this._runtime.scales;return Rr(r,t)||pt("Unrecognized scale or projection: "+t),r[t].value}function Uet(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===Bxe?o.left+o.right:0)}function Vet(t,r){var n=t.autosize(),o=t.padding();return r-(n&&n.contains===Bxe?o.top+o.bottom:0)}function Ror(t){var r=t._signals,n=r[$et],o=r[zet],i=r[Bxe];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,l=>{t._width=l.size,t._viewWidth=Uet(t,l.size),s()},{size:n}),t._resizeHeight=t.add(null,l=>{t._height=l.size,t._viewHeight=Vet(t,l.size),s()},{size:o});let a=t.add(null,s,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=o.rank+1,a.rank=i.rank+1}function Mor(t,r,n,o,i,s){this.runAfter(a=>{let l=0;a._autosize=0,a.width()!==n&&(l=1,a.signal($et,n,Oet),a._resizeWidth.skip(!0)),a.height()!==o&&(l=1,a.signal(zet,o,Oet),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==r&&(a._resize=1,a._viewHeight=r),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),l&&a.run("enter"),s&&a.runAfter(u=>u.resize())},!1,1)}function Por(t){return this._runtime.getState(t||{data:jor,signals:Lor,recurse:!0})}function jor(t,r){return r.modified&&Hr(r.input.value)&&t.indexOf("_:vega:_")}function Lor(t,r){return!(t==="parent"||r instanceof jx.proxy)}function Bor(t){return this.runAsync(null,r=>{r._trigger=!1,r._runtime.setState(t)},r=>{r._trigger=!0}),this}function $or(t,r){function n(o){t({timestamp:Date.now(),elapsed:o})}this._timers.push(Lme(n,r))}function zor(t,r,n,o){let i=t.element();i&&i.setAttribute("title",Uor(o))}function Uor(t){return t==null?"":Hr(t)?Get(t):un(t)&&!eP(t)?Vor(t):t+""}function Vor(t){return Object.keys(t).map(r=>{let n=t[r];return r+": "+(Hr(n)?Get(n):Wet(n))}).join(`
`)}function Get(t){return"["+t.map(Wet).join(", ")+"]"}function Wet(t){return Hr(t)?"[\u2026]":un(t)&&!eP(t)?"{\u2026}":t}function $xe(t,r){let n=this;if(r=r||{},Tw.call(n),r.loader&&n.loader(r.loader),r.logger&&n.logger(r.logger),r.logLevel!=null&&n.logLevel(r.logLevel),r.locale||t.locale){let s=an({},t.locale,r.locale);n.locale(Oq(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=r.renderer||pv.Canvas,n._scenegraph=new aH;let o=n._scenegraph.root;n._renderer=null,n._tooltip=r.tooltip||zor,n._redraw=!0,n._handler=new JN().scene(o),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=aor(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let i=Oor(n,t,r.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:an({},s)})),i.root&&i.root.set(o),o.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(o.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Uet(n,n._width),n._viewHeight=Vet(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ror(n),Knr(n),Znr(n),n.description(t.description),r.hover&&n.hover(),r.container&&n.initialize(r.container,r.bind)}function EY(t,r){return Rr(t._signals,r)?t._signals[r]:pt("Unrecognized signal name: "+Br(r))}function qet(t,r){let n=(t._targets||[]).filter(o=>o._update&&o._update.handler===r);return n.length?n[0]:null}function Fet(t,r,n,o){let i=qet(n,o);return i||(i=jxe(t,()=>o(r,n.value)),i.handler=o,t.on(n,null,i)),t}function Ret(t,r,n){let o=qet(r,n);return o&&r._targets.remove(o),t}var Rxe,Aet,oor,ior,sor,por,hor,mor,cB,Aor,$et,zet,Bxe,Oet,Het=D(()=>{"use strict";Os();qa();h5();Vo();bY();Fxe();Bme();Fq();Rxe="default";Aet="view",oor="timer",ior="window",sor={trap:!1};por="vega-bind",hor="vega-bind-name",mor="vega-bind-radio";cB=t=>+t||0,Aor=t=>({top:t,bottom:t,left:t,right:t});$et="width",zet="height",Bxe="padding",Oet={skip:!0};Dt($xe,Tw,{evaluate(t,r,n){return Be(this,null,function*(){if(yield Tw.prototype.evaluate.call(this,t,r),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,tor(this)),yield this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(o){this.error(o)}return n&&CP(this,n),this})},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let r=t!=null?t+"":null;return r!==this._desc&&Met(this._el,this._desc=r),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,r,n){let o=EY(this,t);return arguments.length===1?o.value:this.update(o,r,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",Net(t)):Net(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(p5(t)||pt("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Tw.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(EY(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Mor,addEventListener(t,r,n){let o=r;return n&&n.trap===!1||(o=jxe(this,r),o.raw=r),this._handler.on(t,o),this},removeEventListener(t,r){for(var n=this._handler.handlers(t),o=n.length,i,s;--o>=0;)if(s=n[o].type,i=n[o].handler,t===s&&(r===i||r===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(t){let r=this._resizeListeners;return r.indexOf(t)<0&&r.push(t),this},removeResizeListener(t){var r=this._resizeListeners,n=r.indexOf(t);return n>=0&&r.splice(n,1),this},addSignalListener(t,r){return Fet(this,t,EY(this,t),r)},removeSignalListener(t,r){return Ret(this,EY(this,t),r)},addDataListener(t,r){return Fet(this,t,TY(this,t).values,r)},removeDataListener(t,r){return Ret(this,TY(this,t).values,r)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let r=Pxe(this,null);this._globalCursor=!!t,r&&Pxe(this,r)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:$or,events:uor,finalize:dor,hover:cor,data:Qnr,change:kY,insert:Jnr,remove:eor,scale:For,initialize:Tor,toImageURL:kor,toCanvas:Dor,toSVG:Nor,getState:Por,setState:Bor})});function Jet(t,r,n){return Zet=r||Gor,Qet=n||Xor,ett(t.trim()).map(zxe)}function Kor(t){return Qet[t]}function fB(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function ett(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=fB(t,i,Ket,DY+Yet,NY+Xet),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function zxe(t){return t[0]==="["?Zor(t):Qor(t)}function Zor(t){let r=t.length,n=1,o;if(n=fB(t,n,NY,DY,NY),n===r)throw"Empty between selector: "+t;if(o=ett(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==Hor)throw"Expected '>' after between selector: "+t;o=o.map(zxe);let i=zxe(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function Qor(t){let r={source:Zet},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===Xet){if(l=t.lastIndexOf(Yet),l>=0){try{o=Jor(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===qor&&(i=++l),u=fB(t,l,Wor),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=fB(t,l,DY),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=fB(t,l,NY),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==DY)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||Yor.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):Kor(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function Jor(t){let r=t.split(Ket);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var Gor,DY,NY,Yet,Xet,Wor,Ket,qor,Hor,Yor,Xor,Zet,Qet,ttt=D(()=>{"use strict";Gor="view",DY="[",NY="]",Yet="{",Xet="}",Wor=":",Ket=",",qor="@",Hor=">",Yor=/[[\]{}]/,Xor={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});function eir(t){return un(t)?t:{type:t||"pad"}}function rir(t){return un(t)?t.signal?t:{top:dB(t.top),bottom:dB(t.bottom),left:dB(t.left),right:dB(t.right)}:tir(dB(t))}function rtt(t,r,n,o){return n!=null?(un(n)&&!Hr(n)||Hr(n)&&n.length&&un(n[0])?t.update[r]=n:t[o||"enter"][r]={value:n},1):0}function Ml(t,r,n){for(let o in r)rtt(t,o,r[o]);for(let o in n)rtt(t,o,n[o],"update")}function TO(t,r,n){for(let o in r)n&&Rr(n,o)||(t[o]=an(t[o]||{},r[o]));return t}function _O(t,r){return r&&(r.enter&&r.enter[t]||r.update&&r.update[t])}function bir(t,r,n,o,i){let s={},a={},l,u,c,f;u="lineBreak",r==="text"&&i[u]!=null&&!_O(u,t)&&Uxe(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===Jxe?i.group:n===Qxe?an({},i.mark,i[r]):null;for(u in f)c=_O(u,t)||(u==="fill"||u==="stroke")&&(_O("fill",t)||_O("stroke",t)),c||Uxe(s,u,f[u]);Lr(o).forEach(d=>{let p=i.style&&i.style[d];for(let h in p)_O(h,t)||Uxe(s,h,p[h])}),t=an({},t);for(u in s)f=s[u],f.signal?(l=l||{})[u]=f:a[u]=f;return t.enter=an(a,t.enter),l&&(t.update=an(l,t.update)),t}function Uxe(t,r,n){t[r]=n&&n.signal?{signal:n.signal}:{value:n}}function BY(t){if(t.gradient!=null)return vir(t);let r=t.signal?`(${t.signal})`:t.color?xir(t.color):t.field!=null?Stt(t.field):t.value!==void 0?Br(t.value):void 0;return t.scale!=null&&(r=wir(t,r)),r===void 0&&(r=null),t.exponent!=null&&(r=`pow(${r},${FY(t.exponent)})`),t.mult!=null&&(r+=`*${FY(t.mult)}`),t.offset!=null&&(r+=`+${FY(t.offset)}`),t.round&&(r=`round(${r})`),r}function xir(t){return t.c?OY("hcl",t.h,t.c,t.l):t.h||t.s?OY("hsl",t.h,t.s,t.l):t.l||t.a?OY("lab",t.l,t.a,t.b):t.r||t.g||t.b?OY("rgb",t.r,t.g,t.b):null}function vir(t){let r=[t.start,t.stop,t.count].map(n=>n==null?null:Br(n));for(;r.length&&zn(r)==null;)r.pop();return r.unshift(_tt(t.gradient)),`gradient(${r.join(",")})`}function FY(t){return un(t)?"("+BY(t)+")":t}function Stt(t){return Ctt(un(t)?t:{datum:t})}function Ctt(t){let r,n,o;if(t.signal)r="datum",o=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),r="item";n-- >0;)r+=".mark.group";t.parent?(o=t.parent,r+=".datum"):o=t.group}else t.datum?(r="datum",o=t.datum):pt("Invalid field reference: "+Br(t));return t.signal||(o=Zn(o)?Z3(o).map(Br).join("]["):Ctt(o)),r+"["+o+"]"}function wir(t,r){let n=_tt(t.scale);return t.range!=null?r=`lerp(_range(${n}), ${+t.range})`:(r!==void 0&&(r=`_scale(${n}, ${r})`),t.band&&(r=(r?r+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+FY(t.band)),t.extra&&(r=`(datum.extra ? _scale(${n}, datum.extra.value) : ${r})`)),r==null&&(r="0")),r}function _ir(t){let r="";return t.forEach(n=>{let o=BY(n);r+=n.test?`(${n.test})?${o}:`:o}),zn(r)===":"&&(r+="null"),r}function Ett(t,r,n,o,i,s){let a={};s=s||{},s.encoders={$encode:a},t=bir(t,r,n,o,i.config);for(let l in t)a[l]=Sir(t[l],r,s,i);return s}function Sir(t,r,n,o){let i={},s={};for(let a in t)t[a]!=null&&(i[a]=Eir(Cir(t[a]),o,n,s));return{$expr:{marktype:r,channels:i},$fields:Object.keys(s),$output:Object.keys(t)}}function Cir(t){return Hr(t)?_ir(t):BY(t)}function Eir(t,r,n,o){let i=vm(t,r);return i.$fields.forEach(s=>o[s]=1),an(n,i.$params),i.$expr}function ntt(t,r){pt(t+' for "outer" push: '+Br(r))}function Ttt(t,r){let n=t.name;if(t.push===Tir)r.signals[n]||ntt("No prior signal definition",n),Air.forEach(o=>{t[o]!==void 0&&ntt("Invalid property ",o)});else{let o=r.addSignal(n,t.value);t.react===!1&&(o.react=!1),t.bind&&r.addBinding(n,t.bind)}}function Wxe(t,r,n,o){this.id=-1,this.type=t,this.value=r,this.params=n,o&&(this.parent=o)}function $Y(t,r,n,o){return new Wxe(t,r,n,o)}function LY(t,r){return $Y("operator",t,r)}function Ir(t){let r={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(r),r}function mB(t,r){return r?{$field:t,$name:r}:{$field:t}}function ott(t,r){return{$compare:t,$order:r}}function kir(t,r){let n={$key:t};return r&&(n.$flat=!0),n}function Nir(t){return un(t)?(t.order===Dir?"-":"+")+zY(t.op,t.field):""}function zY(t,r){return(t&&t.signal?"$"+t.signal:t||"")+(t&&r?"_":"")+(r&&r.signal?"$"+r.signal:r||"")}function ka(t){return t&&t.signal}function Oir(t){return t&&t.expr}function RY(t){if(ka(t))return!0;if(un(t)){for(let r in t)if(RY(t[r]))return!0}return!1}function _m(t,r){return t??r}function UT(t){return t&&t.signal||t}function gB(t,r){return(t.merge?Rir:t.stream?Mir:t.type?Pir:pt("Invalid stream specification: "+Br(t)))(t,r)}function Fir(t){return t===tve?Hxe:t||Hxe}function Rir(t,r){let n=t.merge.map(i=>gB(i,r)),o=rve({merge:n},t,r);return r.addStream(o).id}function Mir(t,r){let n=gB(t.stream,r),o=rve({stream:n},t,r);return r.addStream(o).id}function Pir(t,r){let n;t.type===itt?(n=r.event(itt,t.throttle),t={between:t.between,filter:t.filter}):n=r.event(Fir(t.source),t.type);let o=rve({stream:n},t,r);return Object.keys(o).length===1?n:r.addStream(o).id}function rve(t,r,n){let o=r.between;return o&&(o.length!==2&&pt('Stream "between" parameter must have 2 entries: '+Br(r)),t.between=[gB(o[0],n),gB(o[1],n)]),o=r.filter?[].concat(r.filter):[],(r.marktype||r.markname||r.markrole)&&o.push(jir(r.marktype,r.markname,r.markrole)),r.source===tve&&o.push("inScope(event.item)"),o.length&&(t.filter=vm("("+o.join(")&&(")+")",n).$expr),(o=r.throttle)!=null&&(t.throttle=+o),(o=r.debounce)!=null&&(t.debounce=+o),r.consume&&(t.consume=!0),t}function jir(t,r,n){let o="event.item";return o+(t&&t!=="*"?"&&"+o+".mark.marktype==='"+t+"'":"")+(n?"&&"+o+".mark.role==='"+n+"'":"")+(r?"&&"+o+".mark.name==='"+r+"'":"")}function Bir(t,r,n){let o=t.encode,i={target:n},s=t.events,a=t.update,l=[];s||pt("Signal update missing events specification."),Zn(s)&&(s=Jet(s,r.isSubscope()?tve:Hxe)),s=Lr(s).filter(u=>u.signal||u.scale?(l.push(u),0):1),l.length>1&&(l=[zir(l)]),s.length&&l.push(s.length>1?{merge:s}:s[0]),o!=null&&(a&&pt("Signal encode and update are mutually exclusive."),a="encode(item(),"+Br(o)+")"),i.update=Zn(a)?vm(a,r):a.expr!=null?vm(a.expr,r):a.value!=null?a.value:a.signal!=null?{$expr:Lir,$params:{$value:r.signalRef(a.signal)}}:pt("Invalid signal update specification."),t.force&&(i.options={force:!0}),l.forEach(u=>r.addUpdate(an($ir(u,r),i)))}function $ir(t,r){return{source:t.signal?r.signalRef(t.signal):t.scale?r.scaleRef(t.scale):gB(t,r)}}function zir(t){return{signal:"["+t.map(r=>r.scale?'scale("'+r.scale+'")':r.signal)+"]"}}function Uir(t,r){let n=r.getSignal(t.name),o=t.update;t.init&&(o?pt("Signals can not include both init and update expressions."):(o=t.init,n.initonly=!0)),o&&(o=vm(o,r),n.update=o.$expr,n.params=o.$params),t.on&&t.on.forEach(i=>Bir(i,r,n.id))}function usr(t,r){let n=t.type||"linear";$pe(n)||pt("Unrecognized scale type: "+Br(n)),r.addScale(t.name,{type:n,domain:void 0})}function csr(t,r){let n=r.getScale(t.name).params,o;n.domain=Rtt(t.domain,t,r),t.range!=null&&(n.range=Ptt(t,r,n)),t.interpolate!=null&&vsr(t.interpolate,n),t.nice!=null&&(n.nice=xsr(t.nice)),t.bins!=null&&(n.bins=bsr(t.bins,r));for(o in t)Rr(n,o)||o==="name"||(n[o]=Ip(t[o],r))}function Ip(t,r){return un(t)?t.signal?r.signalRef(t.signal):pt("Unsupported object: "+Br(t)):t}function MY(t,r){return t.signal?r.signalRef(t.signal):t.map(n=>Ip(n,r))}function UY(t){pt("Can not find data set: "+Br(t))}function Rtt(t,r,n){if(!t){(r.domainMin!=null||r.domainMax!=null)&&pt("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(Hr(t)?fsr:t.fields?psr:dsr)(t,r,n)}function fsr(t,r,n){return t.map(o=>Ip(o,n))}function dsr(t,r,n){let o=n.getData(t.data);return o||UY(t.data),g_(r.type)?o.valuesRef(n,t.field,Mtt(t.sort,!1)):Vpe(r.type)?o.domainRef(n,t.field):o.extentRef(n,t.field)}function psr(t,r,n){let o=t.data,i=t.fields.reduce((s,a)=>(a=Zn(a)?{data:o,field:a}:Hr(a)||a.signal?hsr(a,n):a,s.push(a),s),[]);return(g_(r.type)?msr:Vpe(r.type)?gsr:ysr)(t,n,i)}function hsr(t,r){let n="_:vega:_"+lsr++,o=Cm({});if(Hr(t))o.value={$ingest:t};else if(t.signal){let i="setdata("+Br(n)+","+t.signal+")";o.params.input=r.signalRef(i)}return r.addDataPipeline(n,[o,GT({})]),{data:n,field:"data"}}function msr(t,r,n){let o=Mtt(t.sort,!0),i,s,a=n.map(c=>{let f=r.getData(c.data);return f||UY(c.data),f.countsRef(r,c.field,o)}),l={groupby:qxe,pulse:a};o&&(i=o.op||"count",s=o.field?zY(i,o.field):"count",l.ops=[Ftt[i]],l.fields=[r.fieldRef(s)],l.as=[s]),i=r.add(Att(l));let u=r.add(Cm({pulse:Ir(i)}));return s=r.add(asr({field:qxe,sort:r.sortRef(o),pulse:Ir(u)})),Ir(s)}function Mtt(t,r){return t&&(!t.field&&!t.op?un(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?pt("No field provided for sort aggregate op: "+t.op):r&&t.field&&t.op&&!Ftt[t.op]&&pt("Multiple domain scales can not be sorted using "+t.op)),t}function gsr(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||UY(i.data),s.domainRef(r,i.field)});return Ir(r.add(Jir({values:o})))}function ysr(t,r,n){let o=n.map(i=>{let s=r.getData(i.data);return s||UY(i.data),s.extentRef(r,i.field)});return Ir(r.add(Qir({extents:o})))}function bsr(t,r){return t.signal||Hr(t)?MY(t,r):r.objectProperty(t)}function xsr(t){return un(t)?{interval:Ip(t.interval),step:Ip(t.step)}:Ip(t)}function vsr(t,r){r.interpolate=Ip(t.type||t),t.gamma!=null&&(r.interpolateGamma=Ip(t.gamma))}function Ptt(t,r,n){let o=r.config.range,i=t.range;if(i.signal)return r.signalRef(i.signal);if(Zn(i)){if(o&&Rr(o,i))return t=an({},t,{range:o[i]}),Ptt(t,r,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=g_(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:pt("Unrecognized scale range value: "+Br(i))}else if(i.scheme){n.scheme=Hr(i.scheme)?MY(i.scheme,r):Ip(i.scheme,r),i.extent&&(n.schemeExtent=MY(i.extent,r)),i.count&&(n.schemeCount=Ip(i.count,r));return}else if(i.step){n.rangeStep=Ip(i.step,r);return}else{if(g_(t.type)&&!Hr(i))return Rtt(i,t,r);Hr(i)||pt("Unsupported range type: "+Br(i))}return i.map(s=>(Hr(s)?MY:Ip)(s,r))}function wsr(t,r){let n=r.config.projection||{},o={};for(let i in t)i!=="name"&&(o[i]=Yxe(t[i],i,r));for(let i in n)o[i]==null&&(o[i]=Yxe(n[i],i,r));r.addProjection(t.name,o)}function Yxe(t,r,n){return Hr(t)?t.map(o=>Yxe(o,r,n)):un(t)?t.signal?n.signalRef(t.signal):r==="fit"?t:pt("Unsupported parameter object: "+Br(t)):t}function yB(t){return t.type=VY,t.interactive=t.interactive||!1,t}function lf(t,r){let n=(o,i)=>_m(t[o],_m(r[o],i));return n.isVertical=o=>_sr===_m(t.direction,r.direction||(o?r.symbolDirection:r.gradientDirection)),n.gradientLength=()=>_m(t.gradientLength,r.gradientLength||r.gradientWidth),n.gradientThickness=()=>_m(t.gradientThickness,r.gradientThickness||r.gradientHeight),n.entryColumns=()=>_m(t.columns,_m(r.columns,+n.isVertical(!0))),n}function Btt(t,r){let n=r&&(r.update&&r.update[t]||r.enter&&r.enter[t]);return n&&n.signal?n:n?n.value:null}function jsr(t,r,n){let o=r.config.style[n];return o&&o[t]}function GY(t,r,n){return`item.anchor === '${Ssr}' ? ${t} : item.anchor === '${Esr}' ? ${r} : ${n}`}function Lsr(t){let r=t("tickBand"),n=t("tickOffset"),o,i;return r?r.signal?(o={signal:`(${r.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${r.signal}) === 'extent'`},un(n)||(n={signal:`(${r.signal}) === 'extent' ? 0 : ${n}`})):r==="extent"?(o=1,i=!0,n=0):(o=.5,i=!1):(o=t("bandPosition"),i=t("tickExtra")),{extra:i,band:o,offset:n}}function $tt(t,r){return r?t?un(t)?Object.assign({},t,{offset:$tt(t.offset,r)}):{value:t,offset:r}:r:t}function Sd(t,r){return r?(t.name=r.name,t.style=r.style||t.style,t.interactive=!!r.interactive,t.encode=TO(t.encode,r,xB)):t.interactive=!1,t}function Bsr(t,r,n,o){let i=lf(t,n),s=i.isVertical(),a=i.gradientThickness(),l=i.gradientLength(),u,c,f,d,p;s?(c=[0,1],f=[0,0],d=a,p=l):(c=[0,0],f=[1,0],d=l,p=a);let h={enter:u={opacity:Wn,x:Wn,y:Wn,width:ol(d),height:ol(p)},update:an({},u,{opacity:Np,fill:{gradient:r,start:c,stop:f}}),exit:{opacity:Wn}};return Ml(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Sd({type:Ltt,role:dir,encode:h},o)}function $sr(t,r,n,o,i){let s=lf(t,n),a=s.isVertical(),l=s.gradientThickness(),u=s.gradientLength(),c,f,d,p,h="";a?(c="y",d="y2",f="x",p="width",h="1-"):(c="x",d="x2",f="y",p="height");let m={opacity:Wn,fill:{scale:r,field:Dp}};m[c]={signal:h+"datum."+EO,mult:u},m[f]=Wn,m[d]={signal:h+"datum."+Asr,mult:u},m[p]=ol(l);let g={enter:m,update:an({},m,{opacity:Np}),exit:{opacity:Wn}};return Ml(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Sd({type:Ltt,role:cir,key:Dp,from:i,encode:g},o)}function ltt(t,r,n,o){let i=lf(t,r),s=i.isVertical(),a=ol(i.gradientThickness()),l=i.gradientLength(),u=i("labelOverlap"),c,f,d,p,h="",m={enter:c={opacity:Wn},update:f={opacity:Np,text:{field:nve}},exit:{opacity:Wn}};return Ml(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:_m(t.labelLimit,r.gradientLabelLimit)}),s?(c.align={value:"left"},c.baseline=f.baseline={signal:Usr},d="y",p="x",h="1-"):(c.align=f.align={signal:zsr},c.baseline={value:"top"},d="x",p="y"),c[d]=f[d]={signal:h+"datum."+EO,mult:l},c[p]=f[p]=a,a.offset=_m(t.labelOffset,r.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+Xxe}:void 0,Sd({type:WT,role:wtt,style:bB,key:Dp,from:o,encode:m,overlap:u},n)}function Vsr(t,r,n,o,i){let s=lf(t,r),a=n.entries,l=!!(a&&a.interactive),u=a?a.name:void 0,c=s("clipHeight"),f=s("symbolOffset"),d={data:"value"},p=`(${i}) ? datum.${Tsr} : datum.${Zxe}`,h=c?ol(c):{field:Zxe},m=`datum.${Xxe}`,g=`max(1, ${i})`,y,b,x,v,w;h.mult=.5,y={enter:b={opacity:Wn,x:{signal:p,mult:.5,offset:f},y:h},update:x={opacity:Np,x:b.x,y:b.y},exit:{opacity:Wn}};let _=null,C=null;t.fill||(_=r.symbolBaseFillColor,C=r.symbolBaseStrokeColor),Ml(y,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),ive.forEach(N=>{t[N]&&(x[N]=b[N]={scale:t[N],field:Dp})});let S=Sd({type:Psr,role:pir,key:Dp,from:d,clip:c?!0:void 0,encode:y},n.symbols),E=ol(f);E.offset=s("labelOffset"),y={enter:b={opacity:Wn,x:{signal:p,offset:E},y:h},update:x={opacity:Np,text:{field:nve},x:b.x,y:b.y},exit:{opacity:Wn}},Ml(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});let A=Sd({type:WT,role:wtt,style:bB,key:Dp,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!c},width:Wn,height:c?ol(c):Wn,opacity:Wn},exit:{opacity:Wn},update:x={opacity:Np,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,x.row.signal=`${m}%${v}`,x.column.signal=`floor(${m} / ${v})`,w={field:["row",m]}):(x.row.signal=`floor(${m} / ${g})`,x.column.signal=`${m} % ${g}`,w={field:m}),x.column.signal=`(${i})?${x.column.signal}:${m}`,o={facet:{data:o,name:"value",groupby:Xxe}},yB({role:eve,from:o,encode:TO(y,a,xB),marks:[S,A],name:u,interactive:l,sort:w})}function Gsr(t,r){let n=lf(t,r);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}function Qsr(t,r,n,o){let i=lf(t,r),s={enter:{opacity:Wn},update:{opacity:Np,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Wn}};return Ml(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Xsr},angle:{signal:Ksr},align:{signal:Ysr},baseline:{signal:Zsr},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Sd({type:WT,role:hir,style:ove,from:o,encode:s},n)}function Jsr(t,r){let n;return un(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+utt(t.path)+")":t.sphere&&(n="geoShape("+utt(t.sphere)+', {type: "Sphere"})')),n?r.signalRef(n):!!t}function utt(t){return un(t)&&t.signal?t.signal:Br(t)}function ztt(t){let r=t.role||"";return!r.indexOf("axis")||!r.indexOf("legend")||!r.indexOf("title")?r:t.type===VY?eve:r||Qxe}function ear(t){return{marktype:t.type,name:t.name||void 0,role:t.role||ztt(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function tar(t,r){return t&&t.signal?r.signalRef(t.signal):t!==!1}function cve(t,r){let n=i9(t.type);n||pt("Unrecognized transform type: "+Br(t.type));let o=$Y(n.type.toLowerCase(),null,Utt(n,t,r));return t.signal&&r.addSignal(t.signal,r.proxy(o)),o.metadata=n.metadata||{},o}function Utt(t,r,n){let o={},i=t.params.length;for(let s=0;s<i;++s){let a=t.params[s];o[a.name]=rar(a,r,n)}return o}function rar(t,r,n){let o=t.type,i=r[t.name];if(o==="index")return nar(t,r,n);if(i===void 0){t.required&&pt("Missing required "+Br(r.type)+" parameter: "+Br(t.name));return}else{if(o==="param")return oar(t,r,n);if(o==="projection")return n.projectionRef(r[t.name])}return t.array&&!ka(i)?i.map(s=>ctt(t,s,n)):ctt(t,i,n)}function ctt(t,r,n){let o=t.type;if(ka(r))return dtt(o)?pt("Expression references can not be signals."):Vxe(o)?n.fieldRef(r):ptt(o)?n.compareRef(r):n.signalRef(r.signal);{let i=t.expr||Vxe(o);return i&&iar(r)?n.exprRef(r.expr,r.as):i&&sar(r)?mB(r.field,r.as):dtt(o)?vm(r,n):aar(o)?Ir(n.getData(r).values):Vxe(o)?mB(r):ptt(o)?n.compareRef(r):r}}function nar(t,r,n){return Zn(r.from)||pt('Lookup "from" parameter must be a string literal.'),n.getData(r.from).lookupRef(n,r.key)}function oar(t,r,n){let o=r[t.name];return t.array?(Hr(o)||pt("Expected an array of sub-parameters. Instead: "+Br(o)),o.map(i=>ftt(t,i,n))):ftt(t,o,n)}function ftt(t,r,n){let o=t.params.length,i;for(let a=0;a<o;++a){i=t.params[a];for(let l in i.key)if(i.key[l]!==r[l]){i=null;break}if(i)break}i||pt("Unsupported parameter: "+Br(r));let s=an(Utt(i,r,n),i.key);return Ir(n.add(tsr(s)))}function lar(t,r,n){let o,i,s,a,l;return t?(o=t.facet)&&(r||pt("Only group marks can be faceted."),o.field!=null?a=l=jY(o,n):(t.data?l=Ir(n.getData(t.data).aggregate):(s=cve(an({type:"aggregate",groupby:Lr(o.groupby)},o.aggregate),n),s.params.key=n.keyRef(o.groupby),s.params.pulse=jY(o,n),a=l=Ir(n.add(s))),i=n.keyRef(o.groupby,!0))):a=Ir(n.add(Cm(null,[{}]))),a||(a=jY(t,n)),{key:i,pulse:a,parent:l}}function jY(t,r){return t.$ref?t:t.data&&t.data.$ref?t.data:Ir(r.getData(t.data).output)}function VT(t,r,n,o,i){this.scope=t,this.input=r,this.output=n,this.values=o,this.aggregate=i,this.index={}}function Vtt(t){return Zn(t)?t:null}function htt(t,r,n){let o=zY(n.op,n.field),i;if(r.ops){for(let s=0,a=r.as.length;s<a;++s)if(r.as[s]===o)return}else r.ops=["count"],r.fields=[null],r.as=["count"];n.op&&(r.ops.push((i=n.op.signal)?t.signalRef(i):n.op),r.fields.push(t.fieldRef(n.field)),r.as.push(o))}function pB(t,r,n,o,i,s,a){let l=r[n]||(r[n]={}),u=Nir(s),c=Vtt(i),f,d;if(c!=null&&(t=r.scope,c=c+(u?"|"+u:""),f=l[c]),!f){let p=s?{field:qxe,pulse:r.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:Ir(r.output)};u&&(p.sort=t.sortRef(s)),d=t.add($Y(o,void 0,p)),a&&(r.index[i]=d),f=Ir(d),c!=null&&(l[c]=f)}return f}function uar(t,r,n){let o=t.from.facet,i=o.name,s=jY(o,r),a;o.name||pt("Facet must have a name: "+Br(o)),o.data||pt("Facet must reference a data set: "+Br(o)),o.field?a=r.add(Dtt({field:r.fieldRef(o.field),pulse:s})):o.groupby?a=r.add(qir({key:r.keyRef(o.groupby),group:Ir(r.proxy(n.parent)),pulse:s})):pt("Facet must specify groupby or field: "+Br(o));let l=r.fork(),u=l.add(Cm()),c=l.add(GT({pulse:Ir(u)}));l.addData(i,new VT(l,u,u,c)),l.addSignal("parent",null),a.params.subflow={$subflow:l.parse(t).toRuntime()}}function car(t,r,n){let o=r.add(Dtt({pulse:n.pulse})),i=r.fork();i.add(GT()),i.addSignal("parent",null),o.params.subflow={$subflow:i.parse(t).toRuntime()}}function Gtt(t,r,n){let o=t.remove,i=t.insert,s=t.toggle,a=t.modify,l=t.values,u=r.add(LY()),c="if("+t.trigger+',modify("'+n+'",'+[i,o,s,a,l].map(d=>d??"null").join(",")+"),0)",f=vm(c,r);u.update=f.$expr,u.params=f.$params}function qY(t,r){let n=ztt(t),o=t.type===VY,i=t.from&&t.from.facet,s=t.overlap,a=t.layout||n===eve||n===Jxe,l,u,c,f,d,p,h,m=n===Qxe||a||i,g=lar(t.from,o,r);u=r.add(Gir({key:g.key||(t.key?mB(t.key):void 0),pulse:g.pulse,clean:!o}));let y=Ir(u);u=c=r.add(Cm({pulse:y})),u=r.add(Zir({markdef:ear(t),interactive:tar(t.interactive,r),clip:Jsr(t.clip,r),context:{$context:!0},groups:r.lookup(),parent:r.signals.parent?r.signalRef("parent"):null,index:r.markpath(),pulse:Ir(u)}));let b=Ir(u);u=f=r.add(Itt(Ett(t.encode,t.type,n,t.style,r,{mod:!1,pulse:b}))),u.params.parent=r.encode(),t.transform&&t.transform.forEach(C=>{let S=cve(C,r),E=S.metadata;(E.generates||E.changes)&&pt("Mark transforms should not generate new data."),E.nomod||(f.params.mod=!0),S.params.pulse=Ir(u),r.add(u=S)}),t.sort&&(u=r.add(ssr({sort:r.compareRef(t.sort),pulse:Ir(u)})));let x=Ir(u);(i||a)&&(a=r.add(Ott({layout:r.objectProperty(t.layout),legends:r.legends,mark:b,pulse:x})),p=Ir(a));let v=r.add(ktt({mark:b,pulse:p||x}));h=Ir(v),o&&(m&&(l=r.operators,l.pop(),a&&l.pop()),r.pushState(x,p||h,y),i?uar(t,r,g):m?car(t,r,g):r.parse(t),r.popState(),m&&(a&&l.push(a),l.push(v))),s&&(h=far(s,h,r));let w=r.add(Ntt({pulse:h})),_=r.add(GT({pulse:Ir(w)},void 0,r.parent()));t.name!=null&&(d=t.name,r.addData(d,new VT(r,c,w,_)),t.on&&t.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&pt("Marks only support modify triggers."),Gtt(C,r,d)}))}function far(t,r,n){let o=t.method,i=t.bound,s=t.separation,a={separation:ka(s)?n.signalRef(s.signal):s,method:ka(o)?n.signalRef(o.signal):o,pulse:r};if(t.order&&(a.sort=n.compareRef({field:t.order})),i){let l=i.tolerance;a.boundTolerance=ka(l)?n.signalRef(l.signal):+l,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ir(n.add(esr(a)))}function dar(t,r){let n=r.config.legend,o=t.encode||{},i=lf(t,n),s=o.legend||{},a=s.name||void 0,l=s.interactive,u=s.style,c={},f=0,d,p,h;ive.forEach(v=>t[v]?(c[v]=t[v],f=f||t[v]):0),f||pt("Missing valid scale for legend.");let m=par(t,r.scaleType(f)),g={title:t.title!=null,scales:c,type:m,vgrad:m!=="symbol"&&i.isVertical()},y=Ir(r.add(Cm(null,[g]))),b={enter:{x:{value:0},y:{value:0}}},x=Ir(r.add(Xir(p={type:m,scale:r.scaleRef(f),count:r.objectProperty(i("tickCount")),limit:r.property(i("symbolLimit")),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)})));return m===PY?(h=[Bsr(t,f,n,o.gradient),ltt(t,n,o.labels,x)],p.count=p.count||r.signalRef(`max(2,2*floor((${UT(i.gradientLength())})/100))`)):m===Kxe?h=[$sr(t,f,n,o.gradient,x),ltt(t,n,o.labels,x)]:(d=Gsr(t,n),h=[Vsr(t,n,o,x,UT(d.columns))],p.size=gar(t,r,h[0].marks)),h=[yB({role:fir,from:y,encode:b,marks:h,layout:d,interactive:l})],g.title&&h.push(Qsr(t,n,o.title,y)),qY(yB({role:uir,from:y,encode:TO(mar(i,t,n),s,xB),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:l,style:u}),r)}function par(t,r){let n=t.type||att;return!t.type&&har(t)===1&&(t.fill||t.stroke)&&(n=JL(r)?PY:oW(r)?Kxe:att),n!==PY?n:oW(r)?Kxe:PY}function har(t){return ive.reduce((r,n)=>r+(t[n]?1:0),0)}function mar(t,r,n){let o={enter:{},update:{}};return Ml(o,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:r.format,formatType:r.formatType}),o}function gar(t,r,n){let o=UT(mtt("size",t,n)),i=UT(mtt("strokeWidth",t,n)),s=UT(yar(n[1].encode,r,bB));return vm(`max(ceil(sqrt(${o})+${i}),${s})`,r)}function mtt(t,r,n){return r[t]?`scale("${r[t]}",datum)`:Btt(t,n[0].encode)}function yar(t,r,n){return Btt("fontSize",t)||jsr("fontSize",r,n)}function xar(t,r){t=Zn(t)?{text:t}:t;let n=lf(t,r.config.title),o=t.encode||{},i=o.group||{},s=i.name||void 0,a=i.interactive,l=i.style,u=[],c={},f=Ir(r.add(Cm(null,[c])));return u.push(Sar(t,n,war(t),f)),t.subtitle&&u.push(Car(t,n,o.subtitle,f)),qY(yB({role:mir,from:f,encode:_ar(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:l}),r)}function war(t){let r=t.encode;return r&&r.title||an({name:t.name,interactive:t.interactive,style:t.style},r)}function _ar(t,r){let n={enter:{},update:{}};return Ml(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:ave},angle:{signal:bar},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),TO(n,r,xB)}function Sar(t,r,n,o){let i={value:0},s=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ml(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("color"),font:r("font"),fontSize:r("fontSize"),fontStyle:r("fontStyle"),fontWeight:r("fontWeight"),lineHeight:r("lineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),Sd({type:WT,role:gir,style:ksr,from:o,encode:a},n)}function Car(t,r,n,o){let i={value:0},s=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ml(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:r("dx"),dy:r("dy"),fill:r("subtitleColor"),font:r("subtitleFont"),fontSize:r("subtitleFontSize"),fontStyle:r("subtitleFontStyle"),fontWeight:r("subtitleFontWeight"),lineHeight:r("subtitleLineHeight")},{align:r("align"),angle:r("angle"),baseline:r("baseline")}),Sd({type:WT,role:yir,style:Isr,from:o,encode:a},n)}function Ear(t,r){let n=[];t.transform&&t.transform.forEach(o=>{n.push(cve(o,r))}),t.on&&t.on.forEach(o=>{Gtt(o,r,t.name)}),r.addDataPipeline(t.name,Tar(t,r,n))}function Tar(t,r,n){let o=[],i=null,s=!1,a=!1,l,u,c,f,d;for(t.values?ka(t.values)||RY(t.format)?(o.push(gtt(r,t)),o.push(i=zT())):o.push(i=zT({$ingest:t.values,$format:t.format})):t.url?RY(t.url)||RY(t.format)?(o.push(gtt(r,t)),o.push(i=zT())):o.push(i=zT({$request:t.url,$format:t.format})):t.source&&(i=l=Lr(t.source).map(p=>Ir(r.getData(p).output)),o.push(null)),u=0,c=n.length;u<c;++u)f=n[u],d=f.metadata,!i&&!d.source&&o.push(i=zT()),o.push(f),d.generates&&(a=!0),d.modifies&&!a&&(s=!0),d.source?i=f:d.changes&&(i=null);return l&&(c=l.length-1,o[0]=osr({derive:s,pulse:c?l:l[0]}),(s||c)&&o.splice(1,0,zT())),i||o.push(zT()),o.push(GT({})),o}function zT(t){let r=Cm({},t);return r.metadata={source:!0},r}function gtt(t,r){return Kir({url:r.url?t.property(r.url):void 0,async:r.async?t.property(r.async):void 0,values:r.values?t.property(r.values):void 0,format:t.objectProperty(r.format)})}function wO(t,r,n,o){let i;if(r&&Rr(r,t))return r[t];if(Rr(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return o[ove][i]}else if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return o[bB][i]}return null}function btt(t){let r={};for(let n of t)if(n)for(let o in n)r[o]=1;return Object.keys(r)}function Mar(t,r){var n=r.config,o=n.style,i=n.axis,s=r.scaleType(t.scale)==="band"&&n.axisBand,a=t.orient,l,u,c;if(ka(a)){let d=btt([n.axisX,n.axisY]),p=btt([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(c of d)l[c]=il(a,wO(c,n.axisX,i,o),wO(c,n.axisY,i,o));u={};for(c of p)u[c]=Far(a.signal,wO(c,n.axisTop,i,o),wO(c,n.axisBottom,i,o),wO(c,n.axisLeft,i,o),wO(c,n.axisRight,i,o))}else l=a===Em||a===t2?n.axisX:n.axisY,u=n["axis"+a[0].toUpperCase()+a.slice(1)];return l||u||s?an({},i,l,u,s):i}function Par(t,r,n,o){let i=lf(t,r),s=t.orient,a,l,u={enter:a={opacity:Wn},update:l={opacity:Np},exit:{opacity:Wn}};Ml(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});let c=xtt(t,0),f=xtt(t,1);return a.x=l.x=il(s,c,Wn),a.x2=l.x2=il(s,f),a.y=l.y=Sm(s,c,Wn),a.y2=l.y2=Sm(s,f),Sd({type:sve,role:oir,from:o,encode:u},n)}function xtt(t,r){return{scale:t.scale,range:r}}function jar(t,r,n,o,i){let s=lf(t,r),a=t.orient,l=t.gridScale,u=HY(a,1,-1),c=Lar(t.offset,u),f,d,p,h={enter:f={opacity:Wn},update:p={opacity:Np},exit:d={opacity:Wn}};Ml(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});let m={scale:t.scale,field:Dp,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=il(a,{signal:"height"},{signal:"width"}),y=l?{scale:l,range:0,mult:u,offset:c}:{value:0,offset:c},b=l?{scale:l,range:1,mult:u,offset:c}:an(g,{mult:u,offset:c});return f.x=p.x=il(a,m,y),f.y=p.y=Sm(a,m,y),f.x2=p.x2=Sm(a,b),f.y2=p.y2=il(a,b),d.x=il(a,m),d.y=Sm(a,m),Sd({type:sve,role:iir,key:Dp,from:o,encode:h},n)}function Lar(t,r){if(r!==1)if(!un(t))t=ka(r)?{signal:`(${r.signal}) * (${t||0})`}:r*(t||0);else{let n=t=an({},t);for(;n.mult!=null;)if(un(n.mult))n=n.mult=an({},n.mult);else return n.mult=ka(r)?{signal:`(${n.mult}) * (${r.signal})`}:n.mult*r,t;n.mult=r}return t}function Bar(t,r,n,o,i,s){let a=lf(t,r),l=t.orient,u=HY(l,-1,1),c,f,d,p={enter:c={opacity:Wn},update:d={opacity:Np},exit:f={opacity:Wn}};Ml(p,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});let h=ol(i);h.mult=u;let m={scale:t.scale,field:Dp,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return d.y=c.y=il(l,Wn,m),d.y2=c.y2=il(l,h),f.x=il(l,m),d.x=c.x=Sm(l,Wn,m),d.x2=c.x2=Sm(l,h),f.y=Sm(l,m),Sd({type:sve,role:air,key:Dp,from:o,encode:p},n)}function Gxe(t,r,n,o,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+r+","+n+","+o+","+i+")"}}function $ar(t,r,n,o,i,s){let a=lf(t,r),l=t.orient,u=t.scale,c=HY(l,-1,1),f=UT(a("labelFlush")),d=UT(a("labelFlushOffset")),p=a("labelAlign"),h=a("labelBaseline"),m=f===0||!!f,g,y=ol(i);y.mult=c,y.offset=ol(a("labelPadding")||0),y.offset.mult=c;let b={scale:u,field:Dp,band:.5,offset:$tt(s.offset,a("labelOffset"))},x=il(l,m?Gxe(u,f,'"left"','"right"','"center"'):{value:"center"},Aar(l,"left","right")),v=il(l,qtt(l,"bottom","top"),m?Gxe(u,f,'"top"','"bottom"','"middle"'):{value:"middle"}),w=Gxe(u,f,`-(${d})`,d,0);m=m&&d;let _={opacity:Wn,x:il(l,b,y),y:Sm(l,b,y)},C={enter:_,update:g={opacity:Np,text:{field:nve},x:_.x,y:_.y,align:x,baseline:v},exit:{opacity:Wn,x:_.x,y:_.y}};Ml(C,{dx:!p&&m?il(l,w):null,dy:!h&&m?Sm(l,w):null}),Ml(C,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:p,baseline:h});let S=a("labelBound"),E=a("labelOverlap");return E=E||S?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:S?{scale:u,orient:l,tolerance:S}:null}:void 0,g.align!==x&&(g.align=CO(g.align,x)),g.baseline!==v&&(g.baseline=CO(g.baseline,v)),Sd({type:WT,role:sir,style:bB,key:Dp,from:o,encode:C,overlap:E},n)}function zar(t,r,n,o){let i=lf(t,r),s=t.orient,a=HY(s,-1,1),l,u,c={enter:l={opacity:Wn,anchor:ol(i("titleAnchor",null)),align:{signal:ave}},update:u=an({},l,{opacity:Np,text:ol(t.title)}),exit:{opacity:Wn}},f={signal:`lerp(range("${t.scale}"), ${GY(0,1,.5)})`};return u.x=il(s,f),u.y=Sm(s,f),l.angle=il(s,Wn,Rar(a,90)),l.baseline=il(s,qtt(s,t2,Em),{value:t2}),u.angle=l.angle,u.baseline=l.baseline,Ml(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Uar(i,s,c,n),c.update.align=CO(c.update.align,l.align),c.update.angle=CO(c.update.angle,l.angle),c.update.baseline=CO(c.update.baseline,l.baseline),Sd({type:WT,role:lir,style:ove,from:o,encode:c},n)}function Uar(t,r,n,o){let i=(l,u)=>l!=null?(n.update[u]=CO(ol(l),n.update[u]),!1):!_O(u,o),s=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===s?ol(a):il(r,ol(a),ol(s))}function Var(t,r){let n=Mar(t,r),o=t.encode||{},i=o.axis||{},s=i.name||void 0,a=i.interactive,l=i.style,u=lf(t,n),c=Lsr(u),f={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:t.title!=null},d=Ir(r.add(Cm({},[f]))),p=Ir(r.add(Vir({scale:r.scaleRef(t.scale),extra:r.property(c.extra),count:r.objectProperty(t.tickCount),values:r.objectProperty(t.values),minstep:r.property(t.tickMinStep),formatType:r.property(t.formatType),formatSpecifier:r.property(t.format)}))),h=[],m;return f.grid&&h.push(jar(t,n,o.grid,p,c)),f.ticks&&(m=u("tickSize"),h.push(Bar(t,n,o.ticks,p,m,c))),f.labels&&(m=f.ticks?m:0,h.push($ar(t,n,o.labels,p,m,c))),f.domain&&h.push(Par(t,n,o.domain,d)),f.title&&h.push(zar(t,n,o.title,d)),qY(yB({role:nir,from:d,encode:TO(Gar(u,t),i,xB),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:a,style:l}),r)}function Gar(t,r){let n={enter:{},update:{}};return Ml(n,{orient:t("orient"),offset:t("offset")||0,position:_m(r.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${r.scale}")))`},translate:t("translate"),format:r.format,formatType:r.formatType}),n}function Ytt(t,r,n){let o=Lr(t.signals),i=Lr(t.scales);return n||o.forEach(s=>Ttt(s,r)),Lr(t.projections).forEach(s=>wsr(s,r)),i.forEach(s=>usr(s,r)),Lr(t.data).forEach(s=>Ear(s,r)),i.forEach(s=>csr(s,r)),(n||o).forEach(s=>Uir(s,r)),Lr(t.axes).forEach(s=>Var(s,r)),Lr(t.marks).forEach(s=>qY(s,r)),Lr(t.legends).forEach(s=>dar(s,r)),t.title&&xar(t.title,r),r.parseLambdas(),r}function qar(t,r){let n=r.config,o=Ir(r.root=r.add(LY())),i=Har(t,n);i.forEach(c=>Ttt(c,r)),r.description=t.description||n.description,r.eventConfig=n.events,r.legends=r.objectProperty(n.legend&&n.legend.layout),r.locale=n.locale;let s=r.add(Cm()),a=r.add(Itt(Ett(War(t.encode),VY,Jxe,t.style,r,{pulse:Ir(s)}))),l=r.add(Ott({layout:r.objectProperty(t.layout),legends:r.legends,autosize:r.signalRef("autosize"),mark:o,pulse:Ir(a)}));r.operators.pop(),r.pushState(Ir(a),Ir(l),null),Ytt(t,r,i),r.operators.push(l);let u=r.add(ktt({mark:o,pulse:Ir(l)}));return u=r.add(Ntt({pulse:Ir(u)})),u=r.add(GT({pulse:Ir(u)})),r.addData("root",new VT(r,s,s,u)),r}function hB(t,r){return r&&r.signal?{name:t,update:r.signal}:{name:t,value:r}}function Har(t,r){let n=a=>_m(t[a],r[a]),o=[hB("background",n("background")),hB("autosize",eir(n("autosize"))),hB("padding",rir(n("padding"))),hB("width",n("width")||0),hB("height",n("height")||0)],i=o.reduce((a,l)=>(a[l.name]=l,a),{}),s={};return Lr(t.signals).forEach(a=>{Rr(i,a.name)?a=an(i[a.name],a):o.push(a),s[a.name]=a}),Lr(r.signals).forEach(a=>{!Rr(s,a.name)&&!Rr(i,a.name)&&o.push(a)}),o}function Xtt(t,r){this.config=t||{},this.options=r||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function vtt(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function dve(t){return(Hr(t)?Yar:Xar)(t)}function Yar(t){let r=t.length,n="[";for(let o=0;o<r;++o){let i=t[o];n+=(o>0?",":"")+(un(i)?i.signal||dve(i):Br(i))}return n+"]"}function Xar(t){let r="{",n=0,o,i;for(o in t)i=t[o],r+=(++n>1?",":"")+Br(o)+":"+(un(i)?i.signal||dve(i):Br(i));return r+"}"}function Kar(){let t="sans-serif",o="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:o},area:{fill:o},image:null,line:{stroke:o,strokeWidth:2},path:{stroke:o},rect:{fill:o},rule:{stroke:i},shape:{stroke:o},symbol:{fill:o,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:o,size:2},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Ktt(t,r,n){return un(t)||pt("Input Vega specification must be an object."),r=tD(Kar(),r,t.config),qar(t,new Xtt(r,n)).toRuntime()}var dB,tir,ol,Qxe,Jxe,eve,nir,oir,iir,sir,air,lir,uir,cir,fir,dir,wtt,pir,hir,mir,gir,yir,_tt,OY,Tir,Air,qxe,Iir,Dir,tve,Hxe,itt,Lir,Yo,Att,Vir,ktt,Cm,stt,Gir,Itt,Wir,qir,Hir,Yir,Xir,Kir,Zir,Qir,Jir,esr,tsr,Dtt,rsr,nsr,osr,Ntt,isr,GT,ssr,Ott,asr,lsr,Ftt,Em,AO,kO,t2,jtt,_sr,Ssr,Csr,Esr,Xxe,nve,Tsr,EO,Asr,Dp,bB,ove,ksr,Isr,att,PY,Kxe,Zxe,Dsr,Nsr,Osr,Fsr,Rsr,Msr,ive,xB,Wn,Np,VY,Ltt,sve,Psr,WT,ave,zsr,Usr,lve,uve,WY,Wsr,qsr,Hsr,Ysr,Xsr,Ksr,Zsr,iar,sar,aar,dtt,Vxe,ptt,bar,Wtt,HY,il,Sm,qtt,Aar,kar,Iar,Dar,Nar,Oar,Htt,ytt,fve,Far,SO,Rar,CO,War,Ztt=D(()=>{"use strict";Os();bY();ttt();xN();qa();dB=t=>+t||0,tir=t=>({top:t,bottom:t,left:t,right:t});ol=t=>un(t)&&!Hr(t)?an({},t):{value:t};Qxe="mark",Jxe="frame",eve="scope",nir="axis",oir="axis-domain",iir="axis-grid",sir="axis-label",air="axis-tick",lir="axis-title",uir="legend",cir="legend-band",fir="legend-entry",dir="legend-gradient",wtt="legend-label",pir="legend-symbol",hir="legend-title",mir="title",gir="title-text",yir="title-subtitle";_tt=t=>Zn(t)?Br(t):t.signal?`(${t.signal})`:Stt(t);OY=(t,r,n,o)=>`(${t}(${[r,n,o].map(BY).join(",")})+'')`;Tir="outer",Air=["value","update","init","react","bind"];qxe=mB("key");Iir="ascending",Dir="descending";tve="scope",Hxe="view";itt="timer";Lir={code:"_.$value",ast:{type:"Identifier",value:"value"}};Yo=t=>(r,n,o)=>$Y(t,n,r||void 0,o),Att=Yo("aggregate"),Vir=Yo("axisticks"),ktt=Yo("bound"),Cm=Yo("collect"),stt=Yo("compare"),Gir=Yo("datajoin"),Itt=Yo("encode"),Wir=Yo("expression"),qir=Yo("facet"),Hir=Yo("field"),Yir=Yo("key"),Xir=Yo("legendentries"),Kir=Yo("load"),Zir=Yo("mark"),Qir=Yo("multiextent"),Jir=Yo("multivalues"),esr=Yo("overlap"),tsr=Yo("params"),Dtt=Yo("prefacet"),rsr=Yo("projection"),nsr=Yo("proxy"),osr=Yo("relay"),Ntt=Yo("render"),isr=Yo("scale"),GT=Yo("sieve"),ssr=Yo("sortitems"),Ott=Yo("viewlayout"),asr=Yo("values"),lsr=0,Ftt={min:"min",max:"max",count:"sum"};Em="top",AO="left",kO="right",t2="bottom",jtt="center",_sr="vertical",Ssr="start",Csr="middle",Esr="end",Xxe="index",nve="label",Tsr="offset",EO="perc",Asr="perc2",Dp="value",bB="guide-label",ove="guide-title",ksr="group-title",Isr="group-subtitle",att="symbol",PY="gradient",Kxe="discrete",Zxe="size",Dsr="shape",Nsr="fill",Osr="stroke",Fsr="strokeWidth",Rsr="strokeDash",Msr="opacity",ive=[Zxe,Dsr,Nsr,Osr,Fsr,Rsr,Msr],xB={name:1,style:1,interactive:1},Wn={value:0},Np={value:1},VY="group",Ltt="rect",sve="rule",Psr="symbol",WT="text";ave=GY(Br(AO),Br(kO),Br(jtt));zsr=`datum.${EO}<=0?"${AO}":datum.${EO}>=1?"${kO}":"${jtt}"`,Usr=`datum.${EO}<=0?"${t2}":datum.${EO}>=1?"${Em}":"${Csr}"`;lve='item.orient === "left"',uve='item.orient === "right"',WY=`(${lve} || ${uve})`,Wsr=`datum.vgrad && ${WY}`,qsr=GY('"top"','"bottom"','"middle"'),Hsr=GY('"right"','"left"','"center"'),Ysr=`datum.vgrad && ${uve} ? (${Hsr}) : (${WY} && !(datum.vgrad && ${lve})) ? "left" : ${ave}`,Xsr=`item._anchor || (${WY} ? "middle" : "start")`,Ksr=`${Wsr} ? (${lve} ? -90 : 90) : 0`,Zsr=`${WY} ? (datum.vgrad ? (${uve} ? "bottom" : "top") : ${qsr}) : "top"`;iar=t=>t&&t.expr,sar=t=>t&&t.field,aar=t=>t==="data",dtt=t=>t==="expr",Vxe=t=>t==="field",ptt=t=>t==="compare";VT.fromEntries=function(t,r){let n=r.length,o=r[n-1],i=r[n-2],s=r[0],a=null,l=1;for(s&&s.type==="load"&&(s=r[1]),t.add(r[0]);l<n;++l)r[l].params.pulse=Ir(r[l-1]),t.add(r[l]),r[l].type==="aggregate"&&(a=r[l]);return new VT(t,s,i,o,a)};VT.prototype={countsRef(t,r,n){let o=this,i=o.counts||(o.counts={}),s=Vtt(r),a,l,u;return s!=null&&(t=o.scope,a=i[s]),a?n&&n.field&&htt(t,a.agg.params,n):(u={groupby:t.fieldRef(r,"key"),pulse:Ir(o.output)},n&&n.field&&htt(t,u,n),l=t.add(Att(u)),a=t.add(Cm({pulse:Ir(l)})),a={agg:l,ref:Ir(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Ir(this.values)},extentRef(t,r){return pB(t,this,"extent","extent",r,!1)},domainRef(t,r){return pB(t,this,"domain","values",r,!1)},valuesRef(t,r,n){return pB(t,this,"vals","values",r,n||!0)},lookupRef(t,r){return pB(t,this,"lookup","tupleindex",r,!1)},indataRef(t,r){return pB(t,this,"indata","tupleindex",r,!0,!0)}};bar=`item.orient==="${AO}"?-90:item.orient==="${kO}"?90:0`;Wtt=t=>t===t2||t===Em,HY=(t,r,n)=>ka(t)?Dar(t.signal,r,n):t===AO||t===Em?r:n,il=(t,r,n)=>ka(t)?kar(t.signal,r,n):Wtt(t)?r:n,Sm=(t,r,n)=>ka(t)?Iar(t.signal,r,n):Wtt(t)?n:r,qtt=(t,r,n)=>ka(t)?Nar(t.signal,r,n):t===Em?{value:r}:{value:n},Aar=(t,r,n)=>ka(t)?Oar(t.signal,r,n):t===kO?{value:r}:{value:n},kar=(t,r,n)=>Htt(`${t} === '${Em}' || ${t} === '${t2}'`,r,n),Iar=(t,r,n)=>Htt(`${t} !== '${Em}' && ${t} !== '${t2}'`,r,n),Dar=(t,r,n)=>fve(`${t} === '${AO}' || ${t} === '${Em}'`,r,n),Nar=(t,r,n)=>fve(`${t} === '${Em}'`,r,n),Oar=(t,r,n)=>fve(`${t} === '${kO}'`,r,n),Htt=(t,r,n)=>(r=r!=null?ol(r):r,n=n!=null?ol(n):n,ytt(r)&&ytt(n)?(r=r?r.signal||Br(r.value):null,n=n?n.signal||Br(n.value):null,{signal:`${t} ? (${r}) : (${n})`}):[an({test:t},r)].concat(n||[])),ytt=t=>t==null||Object.keys(t).length===1,fve=(t,r,n)=>({signal:`${t} ? (${SO(r)}) : (${SO(n)})`}),Far=(t,r,n,o,i)=>({signal:(o!=null?`${t} === '${AO}' ? (${SO(o)}) : `:"")+(n!=null?`${t} === '${t2}' ? (${SO(n)}) : `:"")+(i!=null?`${t} === '${kO}' ? (${SO(i)}) : `:"")+(r!=null?`${t} === '${Em}' ? (${SO(r)}) : `:"")+"(null)"}),SO=t=>ka(t)?t.signal:t==null?null:Br(t),Rar=(t,r)=>r===0?0:ka(t)?{signal:`(${t.signal}) * ${r}`}:{value:t*r},CO=(t,r)=>{let n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+r.signal}:t};War=t=>TO({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);Xtt.prototype=vtt.prototype={parse(t){return Ytt(t,this)},fork(){return new vtt(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(r=>{r.$ref=t.id}),t.refs=null),t},proxy(t){let r=t instanceof Wxe?Ir(t):t;return this.add(nsr({value:r}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,r;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(o,i,s){let a,l;o&&(a=o.data||(o.data={}),l=a[i]||(a[i]=[]),l.push(s))}for(t in this.data){r=this.data[t],n(r.input,t,"input"),n(r.output,t,"output"),n(r.values,t,"values");for(let o in r.index)n(r.index[o],t,"index:"+o)}return this},pushState(t,r,n){this._encode.push(Ir(this.add(GT({pulse:t})))),this._parent.push(r),this._lookup.push(n?Ir(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return zn(this._parent)},encode(){return zn(this._encode)},lookup(){return zn(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,r){if(Zn(t))return mB(t,r);t.signal||pt("Unsupported field reference: "+Br(t));let n=t.signal,o=this.field[n];if(!o){let i={name:this.signalRef(n)};r&&(i.as=r),this.field[n]=o=Ir(this.add(Hir(i)))}return o},compareRef(t){let r=!1,n=s=>ka(s)?(r=!0,this.signalRef(s.signal)):Oir(s)?(r=!0,this.exprRef(s.expr)):s,o=Lr(t.field).map(n),i=Lr(t.order).map(n);return r?Ir(this.add(stt({fields:o,orders:i}))):ott(o,i)},keyRef(t,r){let n=!1,o=s=>ka(s)?(n=!0,Ir(i[s.signal])):s,i=this.signals;return t=Lr(t).map(o),n?Ir(this.add(Yir({fields:t,flat:r}))):kir(t,r)},sortRef(t){if(!t)return t;let r=zY(t.op,t.field),n=t.order||Iir;return n.signal?Ir(this.add(stt({fields:r,orders:this.signalRef(n.signal)}))):ott(r,n)},event(t,r){let n=t+":"+r;if(!this.events[n]){let o=this.id();this.streams.push({id:o,source:t,type:r}),this.events[n]=o}return this.events[n]},hasOwnSignal(t){return Rr(this.signals,t)},addSignal(t,r){this.hasOwnSignal(t)&&pt("Duplicate signal name: "+Br(t));let n=r instanceof Wxe?r:this.add(LY(r));return this.signals[t]=n},getSignal(t){return this.signals[t]||pt("Unrecognized signal name: "+Br(t)),this.signals[t]},signalRef(t){return this.signals[t]?Ir(this.signals[t]):(Rr(this.lambdas,t)||(this.lambdas[t]=this.add(LY(null))),Ir(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let r=0,n=t.length;r<n;++r){let o=t[r],i=vm(o,this),s=this.lambdas[o];s.params=i.$params,s.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!un(t)?t:this.signalRef(t.signal||dve(t))},exprRef(t,r){let n={expr:vm(t,this)};return r&&(n.expr.$name=r),Ir(this.add(Wir(n)))},addBinding(t,r){this.bindings||pt("Nested signals do not support binding: "+Br(t)),this.bindings.push(an({signal:t},r))},addScaleProj(t,r){Rr(this.scales,t)&&pt("Duplicate scale or projection name: "+Br(t)),this.scales[t]=this.add(r)},addScale(t,r){this.addScaleProj(t,isr(r))},addProjection(t,r){this.addScaleProj(t,rsr(r))},getScale(t){return this.scales[t]||pt("Unrecognized scale name: "+Br(t)),this.scales[t]},scaleRef(t){return Ir(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,r){return Rr(this.data,t)&&pt("Duplicate data set name: "+Br(t)),this.data[t]=r},getData(t){return this.data[t]||pt("Undefined data set name: "+Br(t)),this.data[t]},addDataPipeline(t,r){return Rr(this.data,t)&&pt("Duplicate data set name: "+Br(t)),this.addData(t,VT.fromEntries(this,r))}}});function Tm(t){this.type=t}function ulr(t){switch(t.type){case tlr:return t.elements;case rlr:case ilr:return[t.left,t.right];case nlr:return[t.callee].concat(t.arguments);case olr:return[t.test,t.consequent,t.alternate];case slr:return[t.object,t.property];case alr:return t.properties;case Jar:return[t.key,t.value];case llr:return[t.argument];case elr:case Qar:case Zar:default:return[]}}function QY(t,r){if(!t)throw new Error("ASSERT: "+r)}function Ev(t){return t>=48&&t<=57}function bve(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function wB(t){return"01234567".indexOf(t)>=0}function Ilr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function SB(t){return t===10||t===13||t===8232||t===8233}function TB(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Alr.test(String.fromCharCode(t))}function XY(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&klr.test(String.fromCharCode(t))}function art(){for(;ft<xu;){let t=mr.charCodeAt(ft);if(Ilr(t)||SB(t))++ft;else break}}function yve(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)ft<xu&&bve(mr[ft])?(o=mr[ft++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):co({},sl,Pl);return String.fromCharCode(i)}function Nlr(){var t,r,n,o;for(t=mr[ft],r=0,t==="}"&&co({},sl,Pl);ft<xu&&(t=mr[ft++],!!bve(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&co({},sl,Pl),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function lrt(){var t,r;for(t=mr.charCodeAt(ft++),r=String.fromCharCode(t),t===92&&(mr.charCodeAt(ft)!==117&&co({},sl,Pl),++ft,t=yve("u"),(!t||t==="\\"||!TB(t.charCodeAt(0)))&&co({},sl,Pl),r=t);ft<xu&&(t=mr.charCodeAt(ft),!!XY(t));)++ft,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),mr.charCodeAt(ft)!==117&&co({},sl,Pl),++ft,t=yve("u"),(!t||t==="\\"||!XY(t.charCodeAt(0)))&&co({},sl,Pl),r+=t);return r}function Olr(){var t,r;for(t=ft++;ft<xu;){if(r=mr.charCodeAt(ft),r===92)return ft=t,lrt();if(XY(r))++ft;else break}return mr.slice(t,ft)}function Flr(){var t,r,n;return t=ft,r=mr.charCodeAt(ft)===92?lrt():Olr(),r.length===1?n=qT:Dlr.hasOwnProperty(r)?n=r2:r==="null"?n=ZY:r==="true"||r==="false"?n=KY:n=qT,{type:n,value:r,start:t,end:ft}}function hve(){var t=ft,r=mr.charCodeAt(ft),n,o=mr[ft],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ft,{type:uf,value:String.fromCharCode(r),start:t,end:ft};default:if(n=mr.charCodeAt(ft+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ft+=2,{type:uf,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:ft};case 33:case 61:return ft+=2,mr.charCodeAt(ft)===61&&++ft,{type:uf,value:mr.slice(t,ft),start:t,end:ft}}}if(a=mr.substr(ft,4),a===">>>=")return ft+=4,{type:uf,value:a,start:t,end:ft};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ft+=3,{type:uf,value:s,start:t,end:ft};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return ft+=2,{type:uf,value:i,start:t,end:ft};if(i==="//"&&co({},sl,Pl),"<>=!+-*%&|^/".indexOf(o)>=0)return++ft,{type:uf,value:o,start:t,end:ft};co({},sl,Pl)}function Rlr(t){let r="";for(;ft<xu&&bve(mr[ft]);)r+=mr[ft++];return r.length===0&&co({},sl,Pl),TB(mr.charCodeAt(ft))&&co({},sl,Pl),{type:YT,value:parseInt("0x"+r,16),start:t,end:ft}}function Mlr(t){let r="0"+mr[ft++];for(;ft<xu&&wB(mr[ft]);)r+=mr[ft++];return(TB(mr.charCodeAt(ft))||Ev(mr.charCodeAt(ft)))&&co({},sl,Pl),{type:YT,value:parseInt(r,8),octal:!0,start:t,end:ft}}function Qtt(){var t,r,n;if(n=mr[ft],QY(Ev(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=ft,t="",n!=="."){if(t=mr[ft++],n=mr[ft],t==="0"){if(n==="x"||n==="X")return++ft,Rlr(r);if(wB(n))return Mlr(r);n&&Ev(n.charCodeAt(0))&&co({},sl,Pl)}for(;Ev(mr.charCodeAt(ft));)t+=mr[ft++];n=mr[ft]}if(n==="."){for(t+=mr[ft++];Ev(mr.charCodeAt(ft));)t+=mr[ft++];n=mr[ft]}if(n==="e"||n==="E")if(t+=mr[ft++],n=mr[ft],(n==="+"||n==="-")&&(t+=mr[ft++]),Ev(mr.charCodeAt(ft)))for(;Ev(mr.charCodeAt(ft));)t+=mr[ft++];else co({},sl,Pl);return TB(mr.charCodeAt(ft))&&co({},sl,Pl),{type:YT,value:parseFloat(t),start:r,end:ft}}function Plr(){var t="",r,n,o,i,s=!1;for(r=mr[ft],QY(r==="'"||r==='"',"String literal must starts with a quote"),n=ft,++ft;ft<xu;)if(o=mr[ft++],o===r){r="";break}else if(o==="\\")if(o=mr[ft++],!o||!SB(o.charCodeAt(0)))switch(o){case"u":case"x":mr[ft]==="{"?(++ft,t+=Nlr()):t+=yve(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:wB(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),ft<xu&&wB(mr[ft])&&(s=!0,i=i*8+"01234567".indexOf(mr[ft++]),"0123".indexOf(o)>=0&&ft<xu&&wB(mr[ft])&&(i=i*8+"01234567".indexOf(mr[ft++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&mr[ft]===`
`&&++ft;else{if(SB(o.charCodeAt(0)))break;t+=o}return r!==""&&co({},sl,Pl),{type:EB,value:t,octal:s,start:n,end:ft}}function jlr(t,r){let n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(o,i)=>{if(parseInt(i,16)<=1114111)return"x";co({},gve)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{co({},gve)}try{return new RegExp(t,r)}catch{return null}}function Llr(){var t,r,n,o,i;for(t=mr[ft],QY(t==="/","Regular expression literal must start with a slash"),r=mr[ft++],n=!1,o=!1;ft<xu;)if(t=mr[ft++],r+=t,t==="\\")t=mr[ft++],SB(t.charCodeAt(0))&&co({},pve),r+=t;else if(SB(t.charCodeAt(0)))co({},pve);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||co({},pve),i=r.substr(1,r.length-2),{value:i,literal:r}}function Blr(){var t,r,n;for(r="",n="";ft<xu&&(t=mr[ft],!!XY(t.charCodeAt(0)));)++ft,t==="\\"&&ft<xu?co({},sl,Pl):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&co({},gve,n),{value:n,literal:r}}function $lr(){var t,r,n,o;return Mo=null,art(),t=ft,r=Llr(),n=Blr(),o=jlr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:ft}}function zlr(t){return t.type===qT||t.type===r2||t.type===KY||t.type===ZY}function urt(){if(art(),ft>=xu)return{type:CB,start:ft,end:ft};let t=mr.charCodeAt(ft);return TB(t)?Flr():t===40||t===41||t===59?hve():t===39||t===34?Plr():t===46?Ev(mr.charCodeAt(ft+1))?Qtt():hve():Ev(t)?Qtt():hve()}function cf(){let t=Mo;return ft=t.end,Mo=urt(),ft=t.end,t}function crt(){let t=ft;Mo=urt(),ft=t}function Ulr(t){let r=new Tm(flr);return r.elements=t,r}function Jtt(t,r,n){let o=new Tm(t==="||"||t==="&&"?glr:dlr);return o.operator=t,o.left=r,o.right=n,o}function Vlr(t,r){let n=new Tm(plr);return n.callee=t,n.arguments=r,n}function Glr(t,r,n){let o=new Tm(hlr);return o.test=t,o.consequent=r,o.alternate=n,o}function xve(t){let r=new Tm(irt);return r.name=t,r}function vB(t){let r=new Tm(mlr);return r.value=t.value,r.raw=mr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function ert(t,r,n){let o=new Tm(ylr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function Wlr(t){let r=new Tm(blr);return r.properties=t,r}function trt(t,r,n){let o=new Tm(xlr);return o.key=r,o.value=n,o.kind=t,o}function qlr(t,r){let n=new Tm(vlr);return n.operator=t,n.argument=r,n.prefix=!0,n}function co(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,(s,a)=>(QY(a<o.length,"Message reference must be in range"),o[a]));throw n=new Error(i),n.index=ft,n.description=i,n}function JY(t){t.type===CB&&co(t,Elr),t.type===YT&&co(t,wlr),t.type===EB&&co(t,_lr),t.type===qT&&co(t,Slr),t.type===r2&&co(t,Clr),co(t,sl,t.value)}function vu(t){let r=cf();(r.type!==uf||r.value!==t)&&JY(r)}function Oi(t){return Mo.type===uf&&Mo.value===t}function mve(t){return Mo.type===r2&&Mo.value===t}function Hlr(){let t=[];for(ft=Mo.start,vu("[");!Oi("]");)Oi(",")?(cf(),t.push(null)):(t.push(HT()),Oi("]")||vu(","));return cf(),Ulr(t)}function rrt(){ft=Mo.start;let t=cf();return t.type===EB||t.type===YT?(t.octal&&co(t,srt),vB(t)):xve(t.value)}function Ylr(){var t,r,n,o;if(ft=Mo.start,t=Mo,t.type===qT)return n=rrt(),vu(":"),o=HT(),trt("init",n,o);if(t.type===CB||t.type===uf)JY(t);else return r=rrt(),vu(":"),o=HT(),trt("init",r,o)}function Xlr(){var t=[],r,n,o,i={},s=String;for(ft=Mo.start,vu("{");!Oi("}");)r=Ylr(),r.key.type===irt?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?co({},Tlr):i[o]=!0,t.push(r),Oi("}")||vu(",");return vu("}"),Wlr(t)}function Klr(){vu("(");let t=vve();return vu(")"),t}function Qlr(){var t,r,n;if(Oi("("))return Klr();if(Oi("["))return Hlr();if(Oi("{"))return Xlr();if(t=Mo.type,ft=Mo.start,t===qT||Zlr[Mo.value])n=xve(cf().value);else if(t===EB||t===YT)Mo.octal&&co(Mo,srt),n=vB(cf());else{if(t===r2)throw new Error(_B);t===KY?(r=cf(),r.value=r.value==="true",n=vB(r)):t===ZY?(r=cf(),r.value=null,n=vB(r)):Oi("/")||Oi("/=")?(n=vB($lr()),crt()):JY(cf())}return n}function Jlr(){let t=[];if(vu("("),!Oi(")"))for(;ft<xu&&(t.push(HT()),!Oi(")"));)vu(",");return vu(")"),t}function eur(){ft=Mo.start;let t=cf();return zlr(t)||JY(t),xve(t.value)}function tur(){return vu("."),eur()}function rur(){vu("[");let t=vve();return vu("]"),t}function nur(){var t,r,n;for(t=Qlr();;)if(Oi("."))n=tur(),t=ert(".",t,n);else if(Oi("("))r=Jlr(),t=Vlr(t,r);else if(Oi("["))n=rur(),t=ert("[",t,n);else break;return t}function nrt(){let t=nur();if(Mo.type===uf&&(Oi("++")||Oi("--")))throw new Error(_B);return t}function YY(){var t,r;if(Mo.type!==uf&&Mo.type!==r2)r=nrt();else{if(Oi("++")||Oi("--"))throw new Error(_B);if(Oi("+")||Oi("-")||Oi("~")||Oi("!"))t=cf(),r=YY(),r=qlr(t.value,r);else{if(mve("delete")||mve("void")||mve("typeof"))throw new Error(_B);r=nrt()}}return r}function ort(t){let r=0;if(t.type!==uf&&t.type!==r2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break}return r}function our(){var t,r,n,o,i,s,a,l,u,c;if(t=Mo,u=YY(),o=Mo,i=ort(o),i===0)return u;for(o.prec=i,cf(),r=[t,Mo],a=YY(),s=[u,o,a];(i=ort(Mo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=Jtt(l,u,a),s.push(n);o=cf(),o.prec=i,s.push(o),r.push(Mo),n=YY(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=Jtt(s[c-1].value,s[c-2],n),c-=2;return n}function HT(){var t,r,n;return t=our(),Oi("?")&&(cf(),r=HT(),vu(":"),n=HT(),t=Glr(t,r,n)),t}function vve(){let t=HT();if(Oi(","))throw new Error(_B);return t}function frt(t){mr=t,ft=0,xu=mr.length,Mo=null,crt();let r=vve();if(Mo.type!==CB)throw new Error("Unexpect token after expression.");return r}function sur(t){function r(a,l,u,c){let f=t(l[0]);return u&&(f=u+"("+f+")",u.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(c<0?"":c===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(a,l,u){return c=>r(a,c,l,u)}let o="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&pt("Missing arguments to clamp function."),a.length>3&&pt("Too many arguments to clamp function.");let l=a.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:o,date:n("getDate",o,0),day:n("getDay",o,0),year:n("getFullYear",o,0),month:n("getMonth",o,0),hours:n("getHours",o,0),minutes:n("getMinutes",o,0),seconds:n("getSeconds",o,0),milliseconds:n("getMilliseconds",o,0),time:n("getTime",o,0),timezoneoffset:n("getTimezoneOffset",o,0),utcdate:n("getUTCDate",o,0),utcday:n("getUTCDay",o,0),utcyear:n("getUTCFullYear",o,0),utcmonth:n("getUTCMonth",o,0),utchours:n("getUTCHours",o,0),utcminutes:n("getUTCMinutes",o,0),utcseconds:n("getUTCSeconds",o,0),utcmilliseconds:n("getUTCMilliseconds",o,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&pt("Missing arguments to if function."),a.length>3&&pt("Too many arguments to if function.");let l=a.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function aur(t){let r=t&&t.length-1;return r&&(t[0]==='"'&&t[r]==='"'||t[0]==="'"&&t[r]==="'")?t.slice(1,-1):t}function drt(t){t=t||{};let r=t.allowed?ou(t.allowed):{},n=t.forbidden?ou(t.forbidden):{},o=t.constants||iur,i=(t.functions||sur)(d),s=t.globalvar,a=t.fieldvar,l=In(s)?s:m=>"".concat(s,'["').concat(m,'"]'),u={},c={},f=0;function d(m){if(Zn(m))return m;let g=p[m.type];return g==null&&pt("Unsupported type: "+m.type),g(m)}let p={Literal:m=>m.raw,Identifier:m=>{let g=m.name;return f>0?g:Rr(n,g)?pt("Illegal identifier: "+g):Rr(o,g)?o[g]:Rr(r,g)?g:(u[g]=1,l(g))},MemberExpression:m=>{let g=!m.computed,y=d(m.object);g&&(f+=1);let b=d(m.property);return y===a&&(c[aur(b)]=1),g&&(f-=1),y+(g?"."+b:"["+b+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&pt("Illegal callee type: "+m.callee.type);let g=m.callee.name,y=m.arguments,b=Rr(i,g)&&i[g];return b||pt("Unrecognized function: "+g),In(b)?b(y):b+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{f+=1;let g=d(m.key);return f-=1,g+":"+d(m.value)}};function h(m){let g={code:d(m),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},g}return h.functions=i,h.constants=o,h}var Zar,Qar,Jar,elr,tlr,rlr,nlr,olr,ilr,slr,alr,llr,Ay,mr,ft,xu,Mo,KY,CB,qT,r2,ZY,YT,uf,EB,clr,flr,dlr,plr,hlr,irt,mlr,glr,ylr,blr,xlr,vlr,sl,wlr,_lr,Slr,Clr,Elr,gve,pve,srt,Tlr,Pl,_B,Alr,klr,Dlr,Zlr,iur,prt=D(()=>{"use strict";Os();Zar="RawCode",Qar="Literal",Jar="Property",elr="Identifier",tlr="ArrayExpression",rlr="BinaryExpression",nlr="CallExpression",olr="ConditionalExpression",ilr="LogicalExpression",slr="MemberExpression",alr="ObjectExpression",llr="UnaryExpression";Tm.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=ulr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1};KY=1,CB=2,qT=3,r2=4,ZY=5,YT=6,uf=7,EB=8,clr=9;Ay={};Ay[KY]="Boolean";Ay[CB]="<end>";Ay[qT]="Identifier";Ay[r2]="Keyword";Ay[ZY]="Null";Ay[YT]="Numeric";Ay[uf]="Punctuator";Ay[EB]="String";Ay[clr]="RegularExpression";flr="ArrayExpression",dlr="BinaryExpression",plr="CallExpression",hlr="ConditionalExpression",irt="Identifier",mlr="Literal",glr="LogicalExpression",ylr="MemberExpression",blr="ObjectExpression",xlr="Property",vlr="UnaryExpression",sl="Unexpected token %0",wlr="Unexpected number",_lr="Unexpected string",Slr="Unexpected identifier",Clr="Unexpected reserved word",Elr="Unexpected end of input",gve="Invalid regular expression",pve="Invalid regular expression: missing /",srt="Octal literals are not allowed in strict mode.",Tlr="Duplicate data property in object literal not allowed in strict mode",Pl="ILLEGAL",_B="Disabled.",Alr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),klr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");Dlr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};Zlr={if:1};iur={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}});function ff(t,r,n){return yrt=r||lur,brt=n||pur,xrt(t.trim()).map(wve)}function hur(t){return brt[t]}function AB(t,r,n,o,i){let s=t.length,a=0,l;for(;r<s;++r){if(l=t[r],!a&&l===n)return r;i&&i.indexOf(l)>=0?--a:o&&o.indexOf(l)>=0&&++a}return r}function xrt(t){let r=[],n=t.length,o=0,i=0;for(;i<n;)i=AB(t,i,grt,eX+hrt,tX+mrt),r.push(t.substring(o,i).trim()),o=++i;if(r.length===0)throw"Empty event selector: "+t;return r}function wve(t){return t[0]==="["?mur(t):gur(t)}function mur(t){let r=t.length,n=1,o;if(n=AB(t,n,tX,eX,tX),n===r)throw"Empty between selector: "+t;if(o=xrt(t.substring(1,n)),o.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==fur)throw"Expected '>' after between selector: "+t;o=o.map(wve);let i=wve(t.slice(1).trim());return i.between?{between:o,stream:i}:(i.between=o,i)}function gur(t){let r={source:yrt},n=[],o=[0,0],i=0,s=0,a=t.length,l=0,u,c;if(t[a-1]===mrt){if(l=t.lastIndexOf(hrt),l>=0){try{o=yur(t.substring(l+1,a-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),a=t.length}else throw"Unmatched right brace: "+t;l=0}if(!a)throw t;if(t[0]===cur&&(i=++l),u=AB(t,l,uur),u<a&&(n.push(t.substring(s,u).trim()),s=l=++u),l=AB(t,l,eX),l===a)n.push(t.substring(s,a).trim());else if(n.push(t.substring(s,l).trim()),c=[],s=++l,s===a)throw"Unmatched left bracket: "+t;for(;l<a;){if(l=AB(t,l,tX),l===a)throw"Unmatched left bracket: "+t;if(c.push(t.substring(s,l).trim()),l<a-1&&t[++l]!==eX)throw"Expected left bracket: "+t;s=++l}if(!(a=n.length)||dur.test(n[a-1]))throw"Invalid event selector: "+t;return a>1?(r.type=n[1],i?r.markname=n[0].slice(1):hur(n[0])?r.marktype=n[0]:r.source=n[0]):r.type=n[0],r.type.slice(-1)==="!"&&(r.consume=!0,r.type=r.type.slice(0,-1)),c!=null&&(r.filter=c),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function yur(t){let r=t.split(grt);if(!t.length||r.length>2)throw t;return r.map(n=>{let o=+n;if(o!==o)throw t;return o})}var lur,eX,tX,hrt,mrt,uur,grt,cur,fur,dur,pur,yrt,brt,n2=D(()=>{"use strict";lur="view",eX="[",tX="]",hrt="{",mrt="}",uur=":",grt=",",cur="@",fur=">",dur=/[[\]{}]/,pur={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1}});var _ve={};fn(_ve,{Bounds:()=>hu,CanvasHandler:()=>JN,CanvasRenderer:()=>Qq,DATE:()=>oc,DAY:()=>Tl,DAYOFYEAR:()=>z0,Dataflow:()=>Tw,Debug:()=>JLe,Error:()=>KLe,EventStream:()=>hD,Gradient:()=>G0e,GroupItem:()=>X0e,HOURS:()=>Uc,Handler:()=>M_,Info:()=>QLe,Item:()=>Y0e,MILLISECONDS:()=>dp,MINUTES:()=>Vc,MONTH:()=>Al,Marks:()=>xd,MultiPulse:()=>o9,None:()=>XLe,Operator:()=>Fo,Parameters:()=>EP,Pulse:()=>Px,QUARTER:()=>nc,RenderType:()=>pv,Renderer:()=>hy,ResourceLoader:()=>K0e,SECONDS:()=>ad,SVGHandler:()=>dye,SVGRenderer:()=>bye,SVGStringRenderer:()=>xye,Scenegraph:()=>aH,TIME_UNITS:()=>I9,Transform:()=>et,View:()=>$xe,WEEK:()=>Js,Warn:()=>ZLe,YEAR:()=>Ha,accessor:()=>Jf,accessorFields:()=>Sa,accessorName:()=>ki,array:()=>Lr,ascending:()=>J3,bandwidthNRD:()=>p9,bin:()=>hle,bootstrapCI:()=>mle,boundClip:()=>AZt,boundContext:()=>l5,boundItem:()=>L0e,boundMark:()=>sKe,boundStroke:()=>vT,changeset:()=>Lx,clampRange:()=>Mjt,codegenExpression:()=>drt,compare:()=>Xse,constant:()=>Ga,cumulativeLogNormal:()=>x9,cumulativeNormal:()=>OP,cumulativeUniform:()=>S9,dayofyear:()=>rue,debounce:()=>Kse,defaultLocale:()=>x0e,definition:()=>i9,densityLogNormal:()=>b9,densityNormal:()=>h9,densityUniform:()=>_9,domChild:()=>rf,domClear:()=>lm,domCreate:()=>I_,domFind:()=>fye,dotbin:()=>gle,error:()=>pt,expressionFunction:()=>Ms,extend:()=>an,extent:()=>Oh,extentIndex:()=>Zse,falsy:()=>Dx,fastmap:()=>bw,field:()=>Ih,flush:()=>zjt,font:()=>iH,fontFamily:()=>f5,fontSize:()=>py,format:()=>Mq,formatLocale:()=>X4,formats:()=>S0e,hasOwnProperty:()=>Rr,id:()=>Tjt,identity:()=>Qu,inferType:()=>pXe,inferTypes:()=>hXe,ingest:()=>Dn,inherits:()=>Dt,inrange:()=>Ujt,interpolate:()=>e4,interpolateColors:()=>bN,interpolateRange:()=>iW,intersect:()=>vye,intersectBoxLine:()=>HN,intersectPath:()=>Z0e,intersectPoint:()=>Q0e,intersectRule:()=>XXe,isArray:()=>Hr,isBoolean:()=>Qse,isDate:()=>eP,isFunction:()=>In,isIterable:()=>Jse,isNumber:()=>k0,isObject:()=>un,isRegExp:()=>Vjt,isString:()=>Zn,isTuple:()=>rE,key:()=>eae,lerp:()=>Gjt,lineHeight:()=>F_,loader:()=>Pq,locale:()=>Oq,logger:()=>Ajt,lruCache:()=>tae,markup:()=>yye,merge:()=>rae,mergeConfig:()=>tD,multiLineOffset:()=>LKt,one:()=>T0,pad:()=>qjt,panLinear:()=>Ijt,panLog:()=>Djt,panPow:()=>Njt,panSymlog:()=>Ojt,parse:()=>Ktt,parseExpression:()=>frt,parseSelector:()=>ff,pathCurves:()=>W0e,pathEqual:()=>RKe,pathParse:()=>xT,pathRectangle:()=>GXe,pathRender:()=>YN,pathSymbols:()=>VXe,pathTrail:()=>WXe,peek:()=>zn,point:()=>d5,projection:()=>E4,quantileLogNormal:()=>v9,quantileNormal:()=>FP,quantileUniform:()=>C9,quantiles:()=>f9,quantizeInterpolator:()=>sW,quarter:()=>Fjt,quartiles:()=>d9,random:()=>rd,randomInteger:()=>mBt,randomKDE:()=>g9,randomLCG:()=>hBt,randomLogNormal:()=>yle,randomMixture:()=>ble,randomNormal:()=>m9,randomUniform:()=>xle,read:()=>rXt,regressionExp:()=>wle,regressionLinear:()=>T9,regressionLoess:()=>Cle,regressionLog:()=>vle,regressionPoly:()=>Sle,regressionPow:()=>_le,regressionQuad:()=>A9,renderModule:()=>p5,repeat:()=>K3,resetDefaultLocale:()=>uXe,resetSVGClipId:()=>HXe,resetSVGDefIds:()=>DZt,responseType:()=>tXt,runtimeContext:()=>SY,sampleCurve:()=>xD,sampleLogNormal:()=>y9,sampleNormal:()=>NP,sampleUniform:()=>w9,scale:()=>Vn,sceneEqual:()=>wye,sceneFromJSON:()=>lKe,scenePickVisit:()=>qq,sceneToJSON:()=>aKe,sceneVisit:()=>cm,sceneZOrder:()=>J0e,scheme:()=>t4,serializeXML:()=>SKe,setRandom:()=>dBt,span:()=>YC,splitAccessPath:()=>Z3,stringValue:()=>Br,textMetrics:()=>um,timeBin:()=>due,timeFloor:()=>sue,timeFormatLocale:()=>pT,timeInterval:()=>Bx,timeOffset:()=>lue,timeSequence:()=>cue,timeUnitSpecifier:()=>eue,timeUnits:()=>D9,toBoolean:()=>nae,toDate:()=>oae,toNumber:()=>Nh,toSet:()=>ou,toString:()=>iae,transform:()=>rle,transforms:()=>jx,truncate:()=>Yjt,truthy:()=>A0,tupleid:()=>xr,typeParsers:()=>v0e,utcFloor:()=>aue,utcInterval:()=>$x,utcOffset:()=>uue,utcSequence:()=>fue,utcdayofyear:()=>oue,utcquarter:()=>Rjt,utcweek:()=>iue,version:()=>Mur,visitArray:()=>Xjt,week:()=>nue,writeConfig:()=>Q3,zero:()=>Dh,zoomLinear:()=>qse,zoomLog:()=>Hse,zoomPow:()=>k7,zoomSymlog:()=>Yse});var bur,xur,vur,wur,_ur,Sur,Cur,Eur,Tur,Aur,kur,Iur,Dur,Nur,Our,Fur,Rur,Mur,Sve=D(()=>{"use strict";Os();Os();qa();qa();j$e();W9e();fGe();KWe();Qqe();QHe();LKe();$Ke();qKe();$Qe();VQe();vD();CD();C0e();h5();xN();gme();Het();Fq();bY();Ztt();Fxe();prt();n2();bur="vega",xur="5.20.0",vur="The Vega visualization grammar.",wur=["vega","visualization","interaction","dataflow","library","data","d3"],_ur="BSD-3-Clause",Sur="UW Interactive Data Lab (http://idl.cs.washington.edu)",Cur="build/vega-node.js",Eur="build/vega.module.js",Tur="build/vega.min.js",Aur="build/vega.min.js",kur="index.d.ts",Iur="vega/vega",Dur={bundle:"rollup -c --config-bundle",prebuild:"rimraf build && rimraf build-es5",build:"rollup -c --config-core --config-bundle --config-ie",postbuild:"node schema-copy",pretest:"yarn build --config-test",test:"TZ=America/Los_Angeles tape 'test/**/*-test.js'",prepublishOnly:"yarn test && yarn build",postpublish:"./schema-deploy.sh"},Nur={"vega-crossfilter":"~4.0.5","vega-dataflow":"~5.7.3","vega-encode":"~4.8.3","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-force":"~4.0.7","vega-format":"~1.0.4","vega-functions":"~5.12.0","vega-geo":"~4.3.8","vega-hierarchy":"~4.0.9","vega-label":"~1.0.0","vega-loader":"~4.4.0","vega-parser":"~6.1.3","vega-projection":"~1.4.5","vega-regression":"~1.0.9","vega-runtime":"~6.1.3","vega-scale":"~7.1.1","vega-scenegraph":"~4.9.4","vega-statistics":"~1.7.9","vega-time":"~2.0.4","vega-transforms":"~4.9.3","vega-typings":"~0.20.0","vega-util":"~1.16.1","vega-view":"~5.10.0","vega-view-transforms":"~4.5.8","vega-voronoi":"~4.1.5","vega-wordcloud":"~4.1.3"},Our={"vega-schema":"*"},Fur="f262105e75449760b0f35fda70e6b576a31d68a4",Rur={name:bur,version:xur,description:vur,keywords:wur,license:_ur,author:Sur,main:Cur,module:Eur,unpkg:Tur,jsdelivr:Aur,types:kur,repository:Iur,scripts:Dur,dependencies:Nur,devDependencies:Our,gitHead:Fur};an(jx,zue,fpe,Jpe,Ime,Hme,Dye,Cge,Rye,$ye,Hbe,Kbe);Mur=Rur.version});var wrt,vrt=D(()=>{wrt={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"4.13.1",collaborators:["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{changelog:"conventional-changelog -p angular -r 2",build:"yarn build:only","build:only":"yarn tsc:src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"find build ! -name 'vega-lite-schema.json' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",test:"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup 'yarn tsc:src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'yarn tsc:site -w' 'rollup -c site/rollup.config.js -w'","watch:test":"jest --watch"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2",ajv:"^6.12.2",chai:"^4.2.0",cheerio:"^1.0.0-rc.3",codecov:"^3.7.0",concurrently:"^5.2.0","conventional-changelog-cli":"^2.0.34",d3:"^5.16.0",eslint:"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3",jest:"^26.0.1","jest-puppeteer":"^4.4.0",mkdirp:"^1.0.4",prettier:"^2.0.5",puppeteer:"^3.1.0",rollup:"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7",terser:"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1",typescript:"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},dependencies:{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0",yargs:"~15.3.1"},peerDependencies:{vega:"^5.12.1"},jest:{preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],coverageDirectory:"./coverage/",collectCoverage:!1}}});function Am(t,r,n){return t.fields=r||[],t.fname=n,t}var IO=D(()=>{"use strict"});function Cve(t){return t.length===1?jur(t[0]):Lur(t)}var jur,Lur,Eve=D(()=>{"use strict";jur=t=>function(r){return r[t]},Lur=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}}});function kB(t){throw Error(t)}var Tve=D(()=>{"use strict"});function km(t){var r=[],n=null,o=0,i=t.length,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<i;++l)if(u=t[l],u==="\\")s+=t.substring(a,l),s+=t.substring(++l,++l),a=l;else if(u===n)c(),n=null,o=-1;else{if(n)continue;a===o&&u==='"'||a===o&&u==="'"?(a=l+1,n=u):u==="."&&!o?l>a?c():a=l+1:u==="["?(l>a&&c(),o=a=l+1):u==="]"&&(o||kB("Access path missing open bracket: "+t),o>0&&c(),o=0,a=l+1)}return o&&kB("Access path missing closing bracket: "+t),n&&kB("Access path missing closing quote: "+t),l>a&&(l++,c()),r}var rX=D(()=>{"use strict";Tve()});function nX(t,r,n){let o=km(t);return t=o.length===1?o[0]:t,Am((n&&n.get||Cve)(o),[t],r||t)}var oX=D(()=>{"use strict";IO();Eve();rX()});var IB,Bur,iX,$ur,zur,Uur,Vur,Ave=D(()=>{"use strict";IO();oX();IB=[],Bur=nX("id"),iX=Am(function(t){return t},IB,"identity"),$ur=Am(function(){return 0},IB,"zero"),zur=Am(function(){return 1},IB,"one"),Uur=Am(function(){return!0},IB,"true"),Vur=Am(function(){return!1},IB,"false")});function sX(t,r,n){var o=[r].concat([].slice.call(n));console[t].apply(console,o)}function kve(t,r){var n=t||_rt;return{level:function(o){return arguments.length?(n=+o,this):n},error:function(){return n>=Srt&&sX(r||"error","ERROR",arguments),this},warn:function(){return n>=aX&&sX(r||"warn","WARN",arguments),this},info:function(){return n>=Crt&&sX(r||"log","INFO",arguments),this},debug:function(){return n>=Ert&&sX(r||"log","DEBUG",arguments),this}}}var _rt,Srt,aX,Crt,Ert,Trt=D(()=>{"use strict";_rt=0,Srt=1,aX=2,Crt=3,Ert=4});var Lt,DB=D(()=>{"use strict";Lt=Array.isArray});function vo(t){return t===Object(t)}var lX=D(()=>{"use strict"});function NB(...t){return t.reduce((r,n)=>{for(var o in n)if(o==="signals")r.signals=Gur(r.signals,n.signals);else{var i=o==="legend"?{layout:1}:o==="style"?!0:null;OB(r,o,n[o],i)}return r},{})}function OB(t,r,n,o){if(Art(r)){var i,s;if(vo(n)&&!Lt(n)){s=vo(t[r])?t[r]:t[r]={};for(i in n)o&&(o===!0||o[i])?OB(s,i,n[i]):Art(i)&&(s[i]=n[i])}else t[r]=n}}function Gur(t,r){if(t==null)return r;let n={},o=[];function i(s){n[s.name]||(n[s.name]=1,o.push(s))}return r.forEach(i),t.forEach(i),o}var Art,krt=D(()=>{"use strict";DB();lX();Art=t=>t!=="__proto__"});var DO=D(()=>{"use strict"});var Ive=D(()=>{"use strict"});var Irt=D(()=>{"use strict";Ave();DO();Ive()});var Drt=D(()=>{"use strict"});function Nn(t){return t!=null?Lt(t)?t:[t]:[]}var cX=D(()=>{"use strict";DB()});var Nrt=D(()=>{"use strict"});function FB(t){return typeof t=="function"}var fX=D(()=>{"use strict"});var Ort=D(()=>{"use strict";IO();cX();oX();fX()});var Frt=D(()=>{"use strict";fX()});var Rrt=D(()=>{"use strict"});var Mrt=D(()=>{"use strict"});var Prt=D(()=>{"use strict"});var jrt=D(()=>{"use strict"});function Cd(t,r){return Hur.call(t,r)}var Hur,dX=D(()=>{"use strict";Hur=Object.prototype.hasOwnProperty});var Lrt=D(()=>{"use strict";dX()});var Brt=D(()=>{"use strict";DO()});var $rt=D(()=>{"use strict"});var zrt=D(()=>{"use strict"});function ky(t){return typeof t=="boolean"}var Urt=D(()=>{"use strict"});var Dve=D(()=>{"use strict"});function wo(t){return typeof t=="number"}var Nve=D(()=>{"use strict"});var Vrt=D(()=>{"use strict"});function dr(t){return typeof t=="string"}var Ove=D(()=>{"use strict"});var Grt=D(()=>{"use strict";IO();cX();Eve();rX()});var Wrt=D(()=>{"use strict";DO()});var qrt=D(()=>{"use strict";dX()});var Hrt=D(()=>{"use strict"});var Fve=D(()=>{"use strict"});var Yrt=D(()=>{"use strict";Fve()});var Xrt=D(()=>{"use strict";DO()});function Jr(t){return Lt(t)?"["+t.map(Jr)+"]":vo(t)||dr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var Krt=D(()=>{"use strict";DB();lX();Ove()});var Zrt=D(()=>{"use strict"});var Qrt=D(()=>{"use strict";Dve();Nve()});var Jrt=D(()=>{"use strict"});function Im(t){for(var r={},n=0,o=t.length;n<o;++n)r[t[n]]=!0;return r}var ent=D(()=>{"use strict"});var tnt=D(()=>{"use strict"});var rnt=D(()=>{"use strict"});var or=D(()=>{"use strict";IO();Ave();Trt();krt();Irt();Drt();cX();Nrt();Ort();Frt();Rrt();Tve();Mrt();Prt();jrt();Lrt();oX();Brt();dX();$rt();zrt();DB();Urt();Dve();fX();Nve();lX();Vrt();Ove();Grt();Wrt();qrt();Hrt();Yrt();DO();Fve();Xrt();rX();Krt();Zrt();Qrt();Ive();Jrt();ent();tnt();rnt()});function Pt(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}var _o=D(()=>{"use strict";});var nnt=D(()=>{"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var r=isNaN(arguments[0])?1:Number(arguments[0]);return r?Array.prototype.reduce.call(this,function(n,o){return Array.isArray(o)?n.push.apply(n,t.call(o,r-1)):n.push(o),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0})});var ont=gt((SQn,pX)=>{"use strict";var Kur=function(){"use strict";function t(f,d){return d!=null&&f instanceof d}var r;try{r=Map}catch{r=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function i(f,d,p,h,m){typeof d=="object"&&(p=d.depth,h=d.prototype,m=d.includeNonEnumerable,d=d.circular);var g=[],y=[],b=typeof Buffer<"u";typeof d>"u"&&(d=!0),typeof p>"u"&&(p=1/0);function x(v,w){if(v===null)return null;if(w===0)return v;var _,C;if(typeof v!="object")return v;if(t(v,r))_=new r;else if(t(v,n))_=new n;else if(t(v,o))_=new o(function(j,M){v.then(function(V){j(x(V,w-1))},function(V){M(x(V,w-1))})});else if(i.__isArray(v))_=[];else if(i.__isRegExp(v))_=new RegExp(v.source,c(v)),v.lastIndex&&(_.lastIndex=v.lastIndex);else if(i.__isDate(v))_=new Date(v.getTime());else{if(b&&Buffer.isBuffer(v))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(v.length):_=new Buffer(v.length),v.copy(_),_;t(v,Error)?_=Object.create(v):typeof h>"u"?(C=Object.getPrototypeOf(v),_=Object.create(C)):(_=Object.create(h),C=h)}if(d){var S=g.indexOf(v);if(S!=-1)return y[S];g.push(v),y.push(_)}t(v,r)&&v.forEach(function(j,M){var V=x(M,w-1),G=x(j,w-1);_.set(V,G)}),t(v,n)&&v.forEach(function(j){var M=x(j,w-1);_.add(M)});for(var E in v){var A;C&&(A=Object.getOwnPropertyDescriptor(C,E)),!(A&&A.set==null)&&(_[E]=x(v[E],w-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(v),E=0;E<N.length;E++){var k=N[E],R=Object.getOwnPropertyDescriptor(v,k);R&&!R.enumerable&&!m||(_[k]=x(v[k],w-1),R.enumerable||Object.defineProperty(_,k,{enumerable:!1}))}if(m)for(var I=Object.getOwnPropertyNames(v),E=0;E<I.length;E++){var L=I[E],R=Object.getOwnPropertyDescriptor(v,L);R&&R.enumerable||(_[L]=x(v[L],w-1),Object.defineProperty(_,L,{enumerable:!1}))}return _}return x(f,p)}i.clonePrototype=function(d){if(d===null)return null;var p=function(){};return p.prototype=d,new p};function s(f){return Object.prototype.toString.call(f)}i.__objToStr=s;function a(f){return typeof f=="object"&&s(f)==="[object Date]"}i.__isDate=a;function l(f){return typeof f=="object"&&s(f)==="[object Array]"}i.__isArray=l;function u(f){return typeof f=="object"&&s(f)==="[object RegExp]"}i.__isRegExp=u;function c(f){var d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),d}return i.__getRegExpFlags=c,i}();typeof pX=="object"&&pX.exports&&(pX.exports=Kur)});var snt=gt((CQn,int)=>{"use strict";int.exports=function t(r,n){if(r===n)return!0;if(r&&n&&typeof r=="object"&&typeof n=="object"){if(r.constructor!==n.constructor)return!1;var o,i,s;if(Array.isArray(r)){if(o=r.length,o!=n.length)return!1;for(i=o;i--!==0;)if(!t(r[i],n[i]))return!1;return!0}if(r.constructor===RegExp)return r.source===n.source&&r.flags===n.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===n.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===n.toString();if(s=Object.keys(r),o=s.length,o!==Object.keys(n).length)return!1;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=o;i--!==0;){var a=s[i];if(!t(r[a],n[a]))return!1}return!0}return r!==r&&n!==n}});var Rve=gt((EQn,ant)=>{"use strict";ant.exports=function(t,r){r||(r={}),typeof r=="function"&&(r={cmp:r});var n=typeof r.cycles=="boolean"?r.cycles:!1,o=r.cmp&&function(s){return function(a){return function(l,u){var c={key:l,value:a[l]},f={key:u,value:a[u]};return s(c,f)}}}(r.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=s(a[l])||"null";return u+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(a)-1,f=Object.keys(a).sort(o&&o(a));for(u="",l=0;l<f.length;l++){var d=f[l],p=s(a[d]);p&&(u&&(u+=","),u+=JSON.stringify(d)+":"+p)}return i.splice(c,1),"{"+u+"}"}}(t)}});function hX(t){return!!t.or}function mX(t){return!!t.and}function gX(t){return!!t.not}function RB(t,r){if(gX(t))RB(t.not,r);else if(mX(t))for(let n of t.and)RB(n,r);else if(hX(t))for(let n of t.or)RB(n,r);else r(t)}function MB(t,r){return gX(t)?{not:MB(t.not,r)}:mX(t)?{and:t.and.map(n=>MB(n,r))}:hX(t)?{or:t.or.map(n=>MB(n,r))}:r(t)}var yX=D(()=>{"use strict"});function o2(t,r){let n={};for(let o of r)Cd(t,o)&&(n[o]=t[o]);return n}function df(t,r){let n=Object.assign({},t);for(let o of r)delete n[o];return n}function _r(t){if(wo(t))return t;let r=dr(t)?t:(0,bX.default)(t);if(r.length<250)return r;let n=0;for(let o=0;o<r.length;o++){let i=r.charCodeAt(o);n=(n<<5)-n+i,n=n&n}return n}function Mve(t){return t===!1||t===null}function Gt(t,r){return t.indexOf(r)>-1}function i2(t,r){let n=0;for(let[o,i]of t.entries())if(r(i,o,n++))return!0;return!1}function Pve(t,r){let n=0;for(let[o,i]of t.entries())if(!r(i,o,n++))return!1;return!0}function fnt(t,...r){for(let n of r)Zur(t,n??{});return t}function Zur(t,r){for(let n of nt(r))OB(t,n,r[n],!0)}function Ed(t,r){let n=[],o={},i;for(let s of t)i=r(s),!(i in o)&&(o[i]=1,n.push(s));return n}function dnt(t,r){if(t.size!==r.size)return!1;for(let n of t)if(!r.has(n))return!1;return!0}function jve(t,r){for(let n of t)if(r.has(n))return!0;return!1}function lnt(t){let r=new Set;for(let n of t){let i=km(n).map((a,l)=>l===0?a:`[${a}]`),s=i.map((a,l)=>i.slice(0,l+1).join(""));for(let a of s)r.add(a)}return r}function Lve(t,r){return t===void 0||r===void 0?!0:jve(lnt(t),lnt(r))}function yn(t){return nt(t).length===0}function PB(t){let r=[];for(let n in t)Cd(t,n)&&r.push({key:n,value:t[n]});return r}function jB(t){return t===!0||t===!1}function Tn(t){let r=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+r}function XT(t,r){return gX(t)?"!("+XT(t.not,r)+")":mX(t)?"("+t.and.map(n=>XT(n,r)).join(") && (")+")":hX(t)?"("+t.or.map(n=>XT(n,r)).join(") || (")+")":r(t)}function xX(t,r){if(r.length===0)return!0;let n=r.shift();return n in t&&xX(t[n],r)&&delete t[n],yn(t)}function KT(t){return t.charAt(0).toUpperCase()+t.substr(1)}function vX(t,r="datum"){let n=km(t),o=[];for(let i=1;i<=n.length;i++){let s=`[${n.slice(0,i).map(Jr).join("][")}]`;o.push(`${r}${s}`)}return o.join(" && ")}function pnt(t,r="datum"){return`${r}[${Jr(km(t).join("."))}]`}function Qur(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function pf(t){return`${km(t).map(Qur).join("\\.")}`}function Iy(t,r,n){return t.replace(new RegExp(r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function wX(t){return`${km(t).join(".")}`}function NO(t){return t?km(t).length:0}function On(...t){for(let r of t)if(r!==void 0)return r}function Bve(t){let r=++Jur;return t?String(t)+r:r}function hnt(t){return ecr(t)?t:`__${t}`}function ecr(t){return t.indexOf("__")===0}function ZT(t){if(t!==void 0)return(t%360+360)%360}function _X(t){return wo(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var unt,cnt,bX,Tv,ir,li,nt,Op,Jur,bt=D(()=>{"use strict";nnt();unt=Bf(ont()),cnt=Bf(snt()),bX=Bf(Rve());or();yX();Tv=cnt.default,ir=unt.default;Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>(0,bX.default)(t)).join(",")})`};li=bX.default;nt=Object.keys,Op=Object.values;Jur=42});function OO(t){return t&&t.condition}function Uve(t){return!!gnt[t]}var $ve,CX,mnt,zve,gnt,NQn,LB=D(()=>{"use strict";bt();$ve={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};CX=["domain","grid","labels","ticks","title"],mnt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},zve={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},gnt=Object.assign(Object.assign({},zve),{style:1,labelExpr:1,encoding:1});NQn=nt(gnt)});function hf(t){return Gt(["line","area","trail"],t)}function Gve(t){return Gt(["rect","bar","image","arc"],t)}function jl(t){return t.type}function knt(t){return jl(t)?t.type:t}var yc,Vve,QT,JT,ynt,eA,FO,bnt,RO,EX,BB,xnt,$B,zB,TX,Wve,MQn,tcr,rcr,vnt,ncr,qve,wnt,_nt,Snt,Cnt,Ent,Tnt,Ant,sa=D(()=>{"use strict";or();bt();yc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Vve=yc.arc,QT=yc.area,JT=yc.bar,ynt=yc.image,eA=yc.line,FO=yc.point,bnt=yc.rect,RO=yc.rule,EX=yc.text,BB=yc.tick,xnt=yc.trail,$B=yc.circle,zB=yc.square,TX=yc.geoshape;Wve=nt(yc);MQn=Im(Wve),tcr=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],rcr=["fill","fillOpacity"],vnt=[...tcr,...rcr],ncr={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},qve=nt(ncr),wnt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},_nt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},Snt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Cnt=5,Ent={binSpacing:1,continuousBandSize:Cnt,timeUnitBandPosition:.5},Tnt={binSpacing:0,continuousBandSize:Cnt,timeUnitBandPosition:.5},Ant={thickness:1}});function Ia(t){return"mark"in t}var s2=D(()=>{"use strict"});var Dy,UB=D(()=>{"use strict";sa();s2();Dy=class{constructor(r,n){this.name=r,this.run=n}hasMatchingType(r){return Ia(r)?knt(r.mark)===this.name:!1}}});function Fp(t){return!!t&&!!t.argmin}function Dm(t){return!!t&&!!t.argmax}function MO(t){return dr(t)&&!!Int[t]}function AX(t){return dr(t)&&Gt(icr,t)}function Nnt(t){return dr(t)&&Gt(["min","max"],t)}var Int,Dnt,UQn,icr,Ont,scr,Fnt,Av=D(()=>{"use strict";or();bt();Int={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Dnt={count:1,min:1,max:1};UQn=nt(Int);icr=["count","valid","missing","distinct"];Ont=["count","sum","distinct","valid","missing"],scr=["mean","average","median","q1","q3","min","max"],Fnt=Im(scr)});function Hve(t){return t in Rnt}function Mnt(t){switch(t){case xc:return"y";case wu:return"y2";case vc:return"x";case Ll:return"x2"}}function Pnt(t){return t in Yve}function Iv(t){return t===bs||t===_u||t===Su}function $nt(t){return!!Bnt[t]}function NX(t){return!!IX[t]}function OX(t){return Nd(t)!==t}function Nd(t){switch(t){case yf:return Jn;case Td:return ui;case wu:return xc;case Ll:return vc;case Om:return bc;case Nm:return bf}return t}function Rp(t){if(Hve(t))switch(t){case bc:return"startAngle";case Om:return"endAngle";case bf:return"outerRadius";case Nm:return"innerRadius"}return t}function ll(t){switch(t){case Jn:return yf;case ui:return Td;case xc:return wu;case vc:return Ll;case bc:return Om;case bf:return Nm}}function Bl(t){switch(t){case Jn:case yf:return"width";case ui:case Td:return"height"}}function Unt(t){switch(t){case Jn:return"xOffset";case ui:return"yOffset";case yf:return"x2Offset";case Td:return"y2Offset";case bc:return"thetaOffset";case bf:return"radiusOffset";case Om:return"theta2Offset";case Nm:return"radius2Offset"}}function ul(t){return t in Ny}function a2(t){return t==="width"?Jn:ui}function Hnt(t){return!!FX[t]}function Ynt(t){switch(t){case bs:case _u:case Su:case xf:case ns:case wc:case Id:case Dd:return!0;case Ad:case kd:case Fm:return!1}}function Cu(t){return!!Xnt[t]}function Knt(t,r){return ucr(t)[r]}function ucr(t){switch(t){case bs:case _u:case Su:case $O:case nA:case jO:case kv:case LO:case rA:case wc:case Ad:case kd:case Id:case PO:case mf:case gf:return Kve;case Jn:case ui:case xc:case vc:return lcr;case yf:case Td:case wu:case Ll:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case xf:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Dd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ns:return{point:"always",geoshape:"always"};case tA:return{text:"always"};case Fm:return{point:"always",square:"always",text:"always"};case BO:return{image:"always"};case bc:return{text:"always",arc:"always"};case bf:return{text:"always",arc:"always"};case Om:case Nm:return{arc:"always"}}}function zO(t){switch(t){case Jn:case ui:case bc:case bf:case xf:case Fm:case Id:case wc:case Ad:case kd:case yf:case Td:case Om:case Nm:return;case PO:case mf:case gf:case ns:case Dd:case tA:case kv:case LO:case BO:case $O:return"discrete";case bs:case _u:case Su:return"flexible";case xc:case vc:case wu:case Ll:case nA:case jO:case rA:return}}var mf,gf,PO,Jn,ui,yf,Td,bf,Nm,bc,Om,xc,vc,wu,Ll,bs,_u,Su,ns,xf,Fm,wc,Ad,kd,Id,Dd,tA,rA,nA,jO,kv,LO,BO,$O,acr,Rnt,Yve,jnt,kX,Lnt,al,IX,DX,qQn,HQn,YQn,Xve,XQn,KQn,ZQn,Bnt,QQn,JQn,znt,eJn,tJn,rJn,nJn,oJn,iJn,sJn,aJn,lJn,uJn,cJn,fJn,dJn,FX,Vnt,Ny,xs,RX,Gnt,pJn,hJn,mJn,gJn,yJn,bJn,xJn,vJn,Wnt,qnt,Xnt,l2,Kve,wJn,lcr,Ar=D(()=>{"use strict";_o();bt();mf="row",gf="column",PO="facet",Jn="x",ui="y",yf="x2",Td="y2",bf="radius",Nm="radius2",bc="theta",Om="theta2",xc="latitude",vc="longitude",wu="latitude2",Ll="longitude2",bs="color",_u="fill",Su="stroke",ns="shape",xf="size",Fm="angle",wc="opacity",Ad="fillOpacity",kd="strokeOpacity",Id="strokeWidth",Dd="strokeDash",tA="text",rA="order",nA="detail",jO="key",kv="tooltip",LO="href",BO="url",$O="description",acr={x:1,y:1,x2:1,y2:1},Rnt={theta:1,theta2:1,radius:1,radius2:1};Yve={longitude:1,longitude2:1,latitude:1,latitude2:1};jnt=nt(Yve),kX=Object.assign(Object.assign(Object.assign(Object.assign({},acr),Rnt),Yve),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});Lnt={row:1,column:1,facet:1},al=nt(Lnt),IX=Object.assign(Object.assign({},kX),Lnt),DX=nt(IX),{order:qQn,detail:HQn,tooltip:YQn}=IX,Xve=Pt(IX,["order","detail","tooltip"]),{row:XQn,column:KQn,facet:ZQn}=Xve,Bnt=Pt(Xve,["row","column","facet"]),QQn=nt(Xve),JQn=nt(Bnt);znt=[yf,Td,wu,Ll,Om,Nm];eJn=nt(kX),{x:tJn,y:rJn,x2:nJn,y2:oJn,latitude:iJn,longitude:sJn,latitude2:aJn,longitude2:lJn,theta:uJn,theta2:cJn,radius:fJn,radius2:dJn}=kX,FX=Pt(kX,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Vnt=nt(FX),Ny={x:1,y:1},xs=nt(Ny);RX={theta:1,radius:1},Gnt=nt(RX);({text:pJn,tooltip:hJn,href:mJn,url:gJn,description:yJn,detail:bJn,key:xJn,order:vJn}=FX),Wnt=Pt(FX,["text","tooltip","href","url","description","detail","key","order"]),qnt=nt(Wnt);Xnt=Object.assign(Object.assign(Object.assign({},Ny),RX),Wnt),l2=nt(Xnt);Kve={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wJn}=Kve,lcr=Pt(Kve,["geoshape"])});function MX(t){return ky(t)&&(t=VO(t,void 0)),"bin"+nt(t).map(r=>UO(t[r])?Tn(`_${r}_${Object.entries(t[r])}`):Tn(`_${r}_${t[r]}`)).join("")}function _n(t){return t===!0||u2(t)&&!t.binned}function Yi(t){return t==="binned"||u2(t)&&t.binned===!0}function u2(t){return vo(t)}function UO(t){return t?.selection}function Zve(t){switch(t){case mf:case gf:case xf:case bs:case _u:case Su:case Id:case wc:case Ad:case kd:case ns:return 6;case Dd:return 4;default:return 10}}var $l=D(()=>{"use strict";or();Ar();Dr();bt()});var it={};fn(it,{CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN:()=>Zcr,CONCAT_CANNOT_SHARE_AXIS:()=>Tcr,FACETED_INDEPENDENT_DIFFERENT_SOURCES:()=>hfr,FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES:()=>mfr,FACETED_INDEPENDENT_SAME_SOURCE:()=>gfr,FIT_NON_SINGLE:()=>dcr,INVALID_CHANNEL_FOR_AXIS:()=>yfr,LEGEND_BINDINGS_PROJECT_LENGTH:()=>_cr,LINE_WITH_VARYING_SIZE:()=>Vcr,MORE_THAN_ONE_SORT:()=>pfr,NO_FIELDS_NEEDS_AS:()=>Dcr,RANGE_STEP_DEPRECATED:()=>Qcr,REPLACE_ANGLE_WITH_THETA:()=>Rcr,SCALE_BINDINGS_CONTINUOUS:()=>wcr,cannotApplySizeToNonOrientedMark:()=>nfr,cannotProjectAggregate:()=>ycr,cannotProjectOnChannelWithoutField:()=>gcr,cannotStackNonLinearScale:()=>xfr,cannotStackRangedMark:()=>bfr,cannotUseScalePropertyWithNonColor:()=>Jcr,channelRequiredForBinned:()=>kfr,columnsNotSupportByRowCol:()=>Ecr,containerSizeNonSingle:()=>pcr,containerSizeNotCompatibleWithAutosize:()=>hcr,customFormatTypeNotAllowed:()=>Ncr,differentParse:()=>kcr,discreteChannelCannotEncode:()=>Ycr,domainRequiredForThresholdScale:()=>Ifr,domainSortDropped:()=>dfr,droppedDay:()=>_fr,droppingColor:()=>$cr,droppingFit:()=>mcr,emptyFieldDef:()=>zcr,encodingOverridden:()=>Ocr,errorBand1DNotSupport:()=>Afr,errorBarCenterAndExtentAreNotNeeded:()=>Sfr,errorBarCenterIsNotNeeded:()=>Tfr,errorBarCenterIsUsedWithWrongExtent:()=>Cfr,errorBarContinuousAxisHasCustomizedAggregate:()=>Efr,facetChannelDropped:()=>Hcr,facetChannelShouldBeDiscrete:()=>qcr,incompatibleChannel:()=>Gcr,independentScaleMeansIndependentGuide:()=>ffr,invalidAggregate:()=>Lcr,invalidEncodingChannel:()=>Wcr,invalidFieldType:()=>Pcr,invalidFieldTypeForCountAggregate:()=>jcr,invalidSpec:()=>fcr,invalidTimeUnit:()=>wfr,invalidTransformIgnored:()=>Icr,latLongDeprecated:()=>Ucr,lineWithRange:()=>Xcr,mergeConflictingDomainProperty:()=>cfr,mergeConflictingProperty:()=>ufr,missingFieldType:()=>Bcr,nearestNotSupportForContinuous:()=>bcr,noSameUnitLookup:()=>Scr,noSuchRepeatedValue:()=>Ccr,orientOverridden:()=>Kcr,primitiveChannelDef:()=>Mcr,projectionOverridden:()=>Fcr,scalePropertyNotWorkWithScaleType:()=>sfr,scaleTypeNotWorkWithChannel:()=>ofr,scaleTypeNotWorkWithFieldDef:()=>ifr,scaleTypeNotWorkWithMark:()=>afr,selectionNotFound:()=>vcr,selectionNotSupported:()=>xcr,stackNonSummativeAggregate:()=>vfr,stepDropped:()=>lfr,unaggregateDomainHasNoEffectForRawField:()=>efr,unaggregateDomainWithNonSharedDomainOp:()=>tfr,unaggregatedDomainWithLogScale:()=>rfr,unrecognizedParse:()=>Acr});function fcr(t){return`Invalid specification ${JSON.stringify(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function pcr(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function hcr(t){let r=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${r} "container" only works well with autosize "fit" or "fit-${n}".`}function mcr(t){return t?`Dropping "fit-${t}" because spec has discrete ${Bl(t)}.`:'Dropping "fit" because spec has discrete size.'}function gcr(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function ycr(t,r){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${r}").`}function bcr(t){return`The "nearest" transform is not supported for ${t} marks.`}function xcr(t){return`Selection not supported for ${t} yet.`}function vcr(t){return`Cannot find a selection named "${t}".`}function Scr(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}function Ccr(t){return`Unknown repeated value "${t}".`}function Ecr(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}function Acr(t){return`Unrecognized parse "${t}".`}function kcr(t,r,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${r}.`}function Icr(t){return`Ignoring an invalid transform: ${li(t)}.`}function Ncr(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function Ocr(t){return`Layer's shared ${t.join(",")} channel ${t.length===1?"is":"are"} overriden.`}function Fcr(t){let{parentProjection:r,projection:n}=t;return`Layer's shared projection ${li(r)} is overridden by a child projection ${li(n)}.`}function Mcr(t,r,n){return`Channel ${t} is a ${r}. Converted to {value: ${li(n)}}.`}function Pcr(t){return`Invalid field type "${t}".`}function jcr(t,r){return`Invalid field type "${t}" for aggregate: "${r}", using "quantitative" instead.`}function Lcr(t){return`Invalid aggregation operator "${t}".`}function Bcr(t,r){return`Missing type for channel "${t}", using "${r}" instead.`}function $cr(t,r){let{fill:n,stroke:o}=r;return`Dropping color ${t} as the plot also has ${n&&o?"fill and stroke":n?"fill":"stroke"}.`}function zcr(t,r){return`Dropping ${li(t)} from channel "${r}" since it does not contain any data field, datum, value, or signal.`}function Ucr(t,r,n){return`${t}-encoding with type ${r} is deprecated. Replacing with ${n}-encoding.`}function Gcr(t,r,n){return`${t} dropped as it is incompatible with "${r}"${n?` when ${n}`:""}.`}function Wcr(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function qcr(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function Hcr(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function Ycr(t,r){return`Using discrete channel "${t}" to encode "${r}" field can be misleading as it does not encode ${r==="ordinal"?"order":"magnitude"}.`}function Xcr(t,r){return`Line mark is for continuous lines and thus cannot be used with ${t&&r?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Kcr(t,r){return`Specified orient "${t}" overridden with "${r}".`}function Jcr(t){return`Cannot use the scale property "${t}" with non-color channel.`}function efr(t){return`Using unaggregated domain with raw field has no effect (${li(t)}).`}function tfr(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function rfr(t){return`Unaggregated domain is currently unsupported for log scale (${li(t)}).`}function nfr(t){return`Cannot apply size to non-oriented mark "${t}".`}function ofr(t,r,n){return`Channel "${t}" does not work with "${r}" scale. We are using "${n}" scale instead.`}function ifr(t,r){return`FieldDef does not work with "${t}" scale. We are using "${r}" scale instead.`}function sfr(t,r,n){return`${n}-scale's "${r}" is dropped as it does not work with ${t} scale.`}function afr(t,r){return`Scale type "${r}" does not work with mark "${t}".`}function lfr(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function ufr(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${li(n)} and ${li(o)}). Using ${li(n)}.`}function cfr(t,r,n,o){return`Conflicting ${r.toString()} property "${t.toString()}" (${li(n)} and ${li(o)}). Using the union of the two domains.`}function ffr(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function dfr(t){return`Dropping sort property ${li(t)} as unioned domains only support boolean or op "count", "min", and "max".`}function bfr(t){return`Cannot stack "${t}" if there is already "${t}2".`}function xfr(t){return`Cannot stack non-linear scale (${t}).`}function vfr(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function wfr(t,r){return`Invalid ${t}: ${li(r)}.`}function _fr(t){return`Dropping day from datetime ${li(t)} as day cannot be combined with other units.`}function Sfr(t,r){return`${r?"extent ":""}${r&&t?"and ":""}${t?"center ":""}${r&&t?"are ":"is "}not needed when data are aggregated.`}function Cfr(t,r,n){return`${t} is not usually used with ${r} for ${n}.`}function Efr(t,r){return`Continuous axis should not have customized aggregation function ${t}; ${r} already agregates the axis.`}function Tfr(t,r){return`Center is not needed to be specified in ${r} when extent is ${t}.`}function Afr(t){return`1D error band does not support ${t}.`}function kfr(t){return`Channel ${t} is required for "binned" bin.`}function Ifr(t){return`Domain for ${t} is required for threshold scale.`}var dcr,wcr,_cr,Tcr,Dcr,Rcr,Vcr,Zcr,Qcr,pfr,hfr,mfr,gfr,yfr,Znt=D(()=>{"use strict";Ar();bt();dcr='Autosize "fit" only works for single views and layered views.';wcr="Scale bindings are currently only supported for scales with unbinned, continuous domains.",_cr="Legend bindings are only supported for selections over an individual field or encoding channel.";Tcr="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";Dcr='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';Rcr="Arc marks uses theta channel rather than angle, replacing angle with theta.";Vcr="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";Zcr="Custom domain scale cannot be unioned with default field-based domain.",Qcr=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;pfr="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",hfr="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",mfr="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",gfr="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",yfr="Invalid channel for axis."});function Jnt(t){return GO=t,GO}function eot(){return GO=Qnt,GO}function st(...t){GO.warn(...t)}function tot(...t){GO.debug(...t)}var Qnt,GO,cn=D(()=>{"use strict";or();Znt();Qnt=kve(aX),GO=Qnt});function Oy(t){if(t&&vo(t)){for(let r of PX)if(r in t)return!0}return!1}function Ofr(t){if(_X(t)&&(t=+t),wo(t))return t>4&&st(it.invalidTimeUnit("quarter",t)),t-1;throw new Error(it.invalidTimeUnit("quarter",t))}function Ffr(t){if(_X(t)&&(t=+t),wo(t))return t-1;{let r=t.toLowerCase(),n=rot.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=Dfr.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("month",t))}}function Rfr(t){if(_X(t)&&(t=+t),wo(t))return t%7;{let r=t.toLowerCase(),n=not.indexOf(r);if(n!==-1)return n;let o=r.substr(0,3),i=Nfr.indexOf(o);if(i!==-1)return i;throw new Error(it.invalidTimeUnit("day",t))}}function Qve(t,r){let n=[];if(r&&t.day!==void 0&&nt(t).length>1&&(st(it.droppedDay(t)),t=ir(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){let o=r?Ffr(t.month):t.month;n.push(o)}else if(t.quarter!==void 0){let o=r?Ofr(t.quarter):t.quarter;n.push(wo(o)?o*3:o+"*3")}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){let o=r?Rfr(t.day):t.day;n.push(wo(o)?o+1:o+"+1")}else n.push(1);for(let o of["hours","minutes","seconds","milliseconds"]){let i=t[o];n.push(typeof i>"u"?0:i)}return n}function c2(t){let n=Qve(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function oot(t){let n=Qve(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function iot(t){let r=Qve(t,!0);return t.utc?+new Date(Date.UTC(...r)):+new Date(...r)}var rot,Dfr,not,Nfr,WO=D(()=>{"use strict";or();cn();Fy();bt();rot=["january","february","march","april","may","june","july","august","september","october","november","december"],Dfr=rot.map(t=>t.substr(0,3)),not=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Nfr=not.map(t=>t.substr(0,3))});function aot(t){return!!sot[t]}function e1e(t){return t.startsWith("utc")}function Mfr(t){return t.substr(3)}function VB(t){let r=[];for(let n of PX)lot(t,n)&&r.push(n);return r}function lot(t,r){let n=t.indexOf(r);return!(n<0||n>0&&r==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&r==="day"&&t.charAt(n+3)==="o"||n>0&&r==="year"&&t.charAt(n-1)==="f")}function uot(t,r,{end:n}={end:!1}){let o=vX(r),i=e1e(t)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${o})-1)`:`${i}${u}(${o})`}let a,l={};for(let u of PX)lot(t,u)&&(l[u]=s(u),a=u);return n&&(l[a]+="+1"),oot(l)}function t1e(t){if(!t)return;let r=VB(t);return`timeUnitSpecifier(${(0,Jve.default)(r)}, ${(0,Jve.default)(Pfr)})`}function cot(t,r,n){if(!t)return;let o=t1e(t);return`${n||e1e(t)?"utc":"time"}Format(${r}, ${o})`}function os(t){if(!t)return;let r;return dr(t)?r={unit:t}:vo(t)&&(r=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),e1e(r.unit)&&(r.utc=!0,r.unit=Mfr(r.unit)),r}function fot(t){let r=os(t),{utc:n}=r,o=Pt(r,["utc"]);return o.unit?(n?"utc":"")+nt(o).map(i=>Tn(`${i==="unit"?"":`_${i}_`}${o[i]}`)).join(""):(n?"utc":"")+"timeunit"+nt(o).map(i=>Tn(`_${i}_${o[i]}`)).join("")}var Jve,sot,PX,Pfr,Fy=D(()=>{"use strict";_o();Jve=Bf(Rve());or();WO();bt();sot={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},PX=nt(sot);Pfr={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "}});function tr(t){return t&&!!t.signal}function Eu(t){return!!t.step}function dot(t){return Lt(t)?!1:"fields"in t&&!("data"in t)}function pot(t){return Lt(t)?!1:"fields"in t&&"data"in t}function Dv(t){return Lt(t)?!1:"field"in t&&"data"in t}var jfr,hot,mot,jX,fo=D(()=>{"use strict";or();bt();jfr={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},hot=nt(jfr),mot={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},jX=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"]});function got(t){return t?.selection}function LX(t){return t&&!!t.field&&t.equal!==void 0}function yot(t){return t&&!!t.field&&t.lt!==void 0}function bot(t){return t&&!!t.field&&t.lte!==void 0}function xot(t){return t&&!!t.field&&t.gt!==void 0}function vot(t){return t&&!!t.field&&t.gte!==void 0}function BX(t){if(t&&t.field){if(Lt(t.range)&&t.range.length===2)return!0;if(tr(t.range))return!0}return!1}function $X(t){return t&&!!t.field&&(Lt(t.oneOf)||Lt(t.in))}function Lfr(t){return t&&!!t.field&&t.valid!==void 0}function r1e(t){return $X(t)||LX(t)||BX(t)||yot(t)||xot(t)||bot(t)||vot(t)}function Ry(t,r){return WB(t,{timeUnit:r,wrapTime:!0})}function Bfr(t,r){return t.map(n=>Ry(n,r))}function zX(t,r=!0){var n;let{field:o}=t,i=(n=os(t.timeUnit))===null||n===void 0?void 0:n.unit,s=i?"time("+uot(i,o)+")":vt(t,{expr:"datum"});if(LX(t))return s+"==="+Ry(t.equal,i);if(yot(t)){let a=t.lt;return`${s}<${Ry(a,i)}`}else if(xot(t)){let a=t.gt;return`${s}>${Ry(a,i)}`}else if(bot(t)){let a=t.lte;return`${s}<=${Ry(a,i)}`}else if(vot(t)){let a=t.gte;return`${s}>=${Ry(a,i)}`}else{if($X(t))return`indexof([${Bfr(t.oneOf,i).join(",")}], ${s}) !== -1`;if(Lfr(t))return GB(s,t.valid);if(BX(t)){let{range:a}=t,l=tr(a)?{signal:`${a.signal}[0]`}:a[0],u=tr(a)?{signal:`${a.signal}[1]`}:a[1];if(l!==null&&u!==null&&r)return"inrange("+s+", ["+Ry(l,i)+", "+Ry(u,i)+"])";let c=[];return l!==null&&c.push(`${s} >= ${Ry(l,i)}`),u!==null&&c.push(`${s} <= ${Ry(u,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(t)}`)}function GB(t,r=!0){return r?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function wot(t){var r;return r1e(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(r=os(t.timeUnit))===null||r===void 0?void 0:r.unit}):t}var oA=D(()=>{"use strict";or();Dr();Fy();fo()});function Sot(t){if(t)switch(t=t.toLowerCase(),t){case"q":case Mp:return"quantitative";case"t":case My:return"temporal";case"o":case qB:return"ordinal";case"n":case HB:return"nominal";case Rm:return"geojson"}}var qO,Mp,qB,My,HB,Rm,_ot,Od=D(()=>{"use strict";bt();qO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},Mp=qO.quantitative,qB=qO.ordinal,My=qO.temporal,HB=qO.nominal,Rm=qO.geojson,_ot=nt(qO)});function Cot(t,r){let n=n1e[t],o=n1e[r];return n===o||n==="ordinal-position"&&o==="time"||o==="ordinal-position"&&n==="time"}function o1e(t){return zfr[t]}function Tot(t){return t in Gfr}function Xi(t){return t in Kfr}function aa(t){return t in Yfr}function vf(t){return t in Ufr}function HO(t){return t in qfr}function kot(t){return!dr(t)&&!!t.name}function i1e(t){return t?.selection}function Iot(t){return t&&t.unionWith}function UX(t,r){switch(r){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!Gt(["point","band","identity"],t);case"bins":return!Gt(["point","band","identity","ordinal"],t);case"round":return vf(t)||t==="band"||t==="point";case"padding":return vf(t)||Gt(["point","band"],t);case"paddingOuter":case"align":return Gt(["point","band"],t);case"paddingInner":return t==="band";case"domainMid":case"clamp":return vf(t);case"nice":return vf(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return aa(t)&&!Gt(["log","time","utc","threshold","quantile"],t)}}function VX(t,r){switch(r){case"interpolate":case"scheme":case"domainMid":return Iv(t)?void 0:it.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function a1e(t,r){return Gt([qB,HB],r)?t===void 0||Xi(t):r===My?Gt([Fi.TIME,Fi.UTC,void 0],t):r===Mp?Gt([Fi.LOG,Fi.POW,Fi.SQRT,Fi.SYMLOG,Fi.QUANTILE,Fi.QUANTIZE,Fi.THRESHOLD,Fi.LINEAR,void 0],t):!0}function l1e(t,r){if(!Cu(t))return!1;switch(t){case Jn:case ui:case bc:case bf:return vf(r)||Gt(["band","point"],r);case xf:case Id:case wc:case Ad:case kd:case Fm:return vf(r)||HO(r)||Gt(["band","point","ordinal"],r);case bs:case _u:case Su:return r!=="band";case Dd:return r==="ordinal"||HO(r);case ns:return r==="ordinal"}}function Qfr(){var t;let r={};for(let n of DX)for(let o of _ot)for(let i of $fr){let s=Jfr(n,o);l1e(n,i)&&a1e(i,o)&&(r[s]=(t=r[s])!==null&&t!==void 0?t:[],r[s].push(i))}return r}function Jfr(t,r){return t+"_"+r}var Fi,n1e,$fr,zfr,Eot,Ufr,Vfr,Gfr,Wfr,qfr,Hfr,Yfr,Xfr,Kfr,Aot,s1e,eeo,teo,reo,neo,oeo,Zfr,Dot,ieo,vi=D(()=>{"use strict";_o();or();Ar();Ar();cn();Od();bt();Fi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},n1e={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},$fr=nt(n1e);zfr={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};Eot=["linear","log","pow","sqrt","symlog","time","utc"],Ufr=Im(Eot),Vfr=["linear","log","pow","sqrt","symlog"],Gfr=Im(Vfr);Wfr=["quantile","quantize","threshold"],qfr=Im(Wfr),Hfr=Eot.concat(["quantile","quantize","threshold","sequential","identity"]),Yfr=Im(Hfr),Xfr=["ordinal","bin-ordinal","point","band"],Kfr=Im(Xfr);Aot={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};s1e={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},eeo=nt(s1e),{type:teo,domain:reo,range:neo,scheme:oeo}=s1e,Zfr=Pt(s1e,["type","domain","range","scheme"]),Dot=nt(Zfr),ieo=Qfr()});function XO(t){let{channel:r,channelDef:n,markDef:o,scale:i,config:s}=t,a=c1e(t);return Et(n)&&!AX(n.aggregate)&&i&&vf(i.get("type"))&&i.get("zero")===!1?u1e({fieldDef:n,channel:r,markDef:o,ref:a,config:s}):a}function u1e({fieldDef:t,channel:r,markDef:n,ref:o,config:i}){return hf(n.type)||ln("invalid",n,i)===null?o:[edr(t,r),o]}function edr(t,r){let n=YB(t,!0),i=Nd(r)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function YB(t,r=!0){return GB(dr(t)?t:vt(t,{expr:"datum"}),!r)}function Not(t){let{datum:r}=t;return Oy(r)?c2(r):`${JSON.stringify(r)}`}function Py(t,r,n,o){let i={};if(r&&(i.scale=r),wf(t)){let{datum:s}=t;Oy(s)?i.signal=c2(s):tr(s)?i.signal=s.signal:i.value=s}else i.field=vt(t,n);if(o){let{offset:s,band:a}=o;s&&(i.offset=s),a&&(i.band=a)}return i}function YO({scaleName:t,fieldOrDatumDef:r,fieldOrDatumDef2:n,offset:o,startSuffix:i,band:s=.5}){let a=0<s&&s<1?"datum":void 0,l=vt(r,{expr:a,suffix:i}),u=n!==void 0?vt(n,{expr:a}):vt(r,{suffix:"end",expr:a}),c={};if(s===0||s===1){c.scale=t;let f=s===0?l:u;c.field=f}else{let f=`${s} * ${l} + ${1-s} * ${u}`;c.signal=`scale("${t}", ${f})`}return o&&(c.offset=o),c}function c1e({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c,band:f}){var d;if(r){if(Or(r)){if(la(r)){f=f??d2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:l,config:i,isMidPoint:!0});let{bin:h,timeUnit:m,type:g}=r;if(_n(h)||f&&m&&g===My)return l&&l.impute?Py(r,s,{binSuffix:"mid"},{offset:u}):f?YO({scaleName:s,fieldOrDatumDef:r,band:f,offset:u}):Py(r,s,jy(r,t)?{binSuffix:"range"}:{},{offset:u});if(Yi(h)){if(Et(n))return YO({scaleName:s,fieldOrDatumDef:r,fieldOrDatumDef2:n,band:f,offset:u});{let y=t===Jn?yf:Td;st(it.channelRequiredForBinned(y))}}}let p=a?.get("type");return Py(r,s,Xi(p)?{binSuffix:"range"}:{},{offset:u,band:p==="band"?(d=f??r.band)!==null&&d!==void 0?d:.5:void 0})}else if(Tu(r)){let p=r.value,h=u?{offset:u}:{};return Object.assign(Object.assign({},iA(t,p)),h)}}return FB(c)&&(c=c()),c&&Object.assign(Object.assign({},c),u?{offset:u}:{})}function iA(t,r){return Gt(["x","x2"],t)&&r==="width"?{field:{group:"width"}}:Gt(["y","y2"],t)&&r==="height"?{field:{group:"height"}}:po(r)}var f2=D(()=>{"use strict";or();Av();$l();Ar();Dr();WO();cn();sa();oA();vi();Od();bt();fo();Po()});function By(t){return t&&t!=="number"&&t!=="time"}function Fot(t,r,n){return`${t}(${r}${n?`, ${JSON.stringify(n)}`:""})`}function KO({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s}){var a,l;if(By(n))return XB({fieldOrDatumDef:t,format:r,formatType:n,expr:o,config:s});let u=Rot(t,o,i);if(JO(t)){let c=ndr(u,Et(t)?(a=os(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0,r,s.timeFormat,QO(t)&&((l=t.scale)===null||l===void 0?void 0:l.type)===Fi.UTC);return c?{signal:c}:void 0}if(r=Mot(Ly(t),r,s),Et(t)&&_n(t.bin)){let c=vt(t,{expr:o,binSuffix:"end"});return{signal:ZO(u,c,r,n,s)}}else return r||Ly(t)==="quantitative"?{signal:`${Pot(u,r)}`}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function Rot(t,r,n){return Et(t)?n?`${vt(t,{expr:r,suffix:"end"})}-${vt(t,{expr:r,suffix:"start"})}`:vt(t,{expr:r}):Not(t)}function XB({fieldOrDatumDef:t,format:r,formatType:n,expr:o,normalizeStack:i,config:s,field:a}){if(a=a??Rot(t,o,i),Et(t)&&_n(t.bin)){let l=vt(t,{expr:o,binSuffix:"end"});return{signal:ZO(a,l,r,n,s)}}return{signal:Fot(n,a,r)}}function WX(t,r,n,o,i,s){var a;if(!By(o)){if(JO(t)){let l=Et(t)?(a=os(t.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return rdr(n,l,i,s)}return Mot(r,n,i)}}function qX(t,r,n){if(t&&(tr(t)||t==="number"||t==="time"))return t;if(JO(r)&&n!=="time"&&n!=="utc")return"time"}function Mot(t,r,n){if(dr(r))return r;if(t===Mp)return n.numberFormat}function rdr(t,r,n,o){return t||(r?{signal:t1e(r)}:o?void 0:n.timeFormat)}function Pot(t,r){return`format(${t}, "${r||""}")`}function Oot(t,r,n,o){var i;return By(n)?Fot(n,t,r):Pot(t,(i=dr(r)?r:void 0)!==null&&i!==void 0?i:o.numberFormat)}function ZO(t,r,n,o,i){let s=Oot(t,n,o,i),a=Oot(r,n,o,i);return`${GB(t,!1)} ? "null" : ${s} + "${tdr}" + ${a}`}function ndr(t,r,n,o,i){return!r||n?(n=dr(n)?n:o,`${i?"utc":"time"}Format(${t}, '${n}')`):cot(r,t,i)}var tdr,$y=D(()=>{"use strict";or();$l();Dr();oA();vi();Fy();Od();fo();f2();tdr=" \u2013 "});function f1e(t){return t in odr}function HX(t){return!!t&&!!t.encoding}function cl(t){return!!t&&(t.op==="count"||!!t.field)}function YX(t){return!!t&&Lt(t)}var p2,odr,Mm=D(()=>{"use strict";or();p2="min",odr={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1}});function zy(t){return"row"in t||"column"in t}function XX(t){return!!t&&"header"in t}function Nv(t){return"facet"in t}var Ov=D(()=>{"use strict"});function jot(t){return t.selection}function Lot(t){return t&&!dr(t)&&"repeat"in t}function d1e(t){let{field:r,timeUnit:n,bin:o,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),o?{bin:o}:{}),i?{aggregate:i}:{}),{field:r})}function p1e(t){return la(t)&&"sort"in t}function d2({channel:t,fieldDef:r,fieldDef2:n,markDef:o,stack:i,config:s,isMidPoint:a}){if(Or(r)&&r.band!==void 0)return r.band;if(Et(r)){let{timeUnit:l,bin:u}=r;if(l&&!n)return a?Uy("timeUnitBandPosition",o,s):Gve(o.type)?Uy("timeUnitBand",o,s):0;if(_n(u))return Gve(o.type)&&!a?1:.5}if(i?.fieldChannel===t&&a)return .5}function eF(t,r,n,o,i,s){return _n(r.bin)||r.timeUnit&&la(r)&&r.type==="temporal"?!!d2({channel:t,fieldDef:r,fieldDef2:n,stack:o,markDef:i,config:s}):!1}function tF(t){return!!t&&"condition"in t}function rF(t){let r=t&&t.condition;return!!r&&!Lt(r)&&Et(r)}function ZX(t){let r=t&&t.condition;return!!r&&!Lt(r)&&Or(r)}function Bot(t){let r=t&&t.condition;return!!r&&(Lt(r)||Tu(r))}function Et(t){return!!t&&(!!t.field||t.aggregate==="count")}function Ly(t){return t&&t.type}function wf(t){return!!t&&"datum"in t}function _f(t){return la(t)&&Uot(t)||QX(t)}function QX(t){return wf(t)&&wo(t.datum)}function Or(t){return Et(t)||wf(t)}function la(t){return!!t&&("field"in t&&"type"in t||t.aggregate==="count")}function Tu(t){return t&&"value"in t&&"value"in t}function QO(t){return!!t&&("scale"in t||"sort"in t)}function JX(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function $ot(t){return!!t&&"legend"in t}function zot(t){return!!t&&("format"in t||"formatType"in t)}function idr(t){return"op"in t}function vt(t,r={}){var n,o,i;let s=t.field,a=r.prefix,l=r.suffix,u="";if(sdr(t))s=hnt("count");else{let c;if(!r.nofn)if(idr(t))c=t.op;else{let{bin:f,aggregate:d,timeUnit:p}=t;_n(f)?(c=MX(f),l=((n=r.binSuffix)!==null&&n!==void 0?n:"")+((o=r.suffix)!==null&&o!==void 0?o:"")):d?Dm(d)?(u=`["${s}"]`,s=`argmax_${d.argmax}`):Fp(d)?(u=`["${s}"]`,s=`argmin_${d.argmin}`):c=String(d):p&&(c=fot(p),l=(!Gt(["range","mid"],r.binSuffix)&&r.binSuffix||"")+((i=r.suffix)!==null&&i!==void 0?i:""))}c&&(s=s?`${c}_${s}`:c)}return l&&(s=`${s}_${l}`),a&&(s=`${a}_${s}`),r.forAs?wX(s):r.expr?pnt(s,r.expr)+u:pf(s)+u}function h1e(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Et(t)&&!!t.bin;case"temporal":return!1}throw new Error(it.invalidFieldType(t.type))}function Uot(t){return!h1e(t)}function sdr(t){return t.aggregate==="count"}function adr(t,r){var n;let{field:o,bin:i,timeUnit:s,aggregate:a}=t;if(a==="count")return r.countTitle;if(_n(i))return`${o} (binned)`;if(s){let l=(n=os(s))===null||n===void 0?void 0:n.unit;if(l)return`${o} (${VB(l).join("-")})`}else if(a)return Dm(a)?`${o} for max ${a.argmax}`:Fp(a)?`${o} for min ${a.argmin}`:`${KT(a)} of ${o}`;return o}function ldr(t){let{aggregate:r,bin:n,timeUnit:o,field:i}=t;if(Dm(r))return`${i} for argmax(${r.argmax})`;if(Fp(r))return`${i} for argmin(${r.argmin})`;let s=os(o),a=r||s?.unit||s?.maxbins&&"timeunit"||_n(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}function m1e(t){Got=t}function Wot(){m1e(Vot)}function Pp(t,r,{allowDisabling:n,includeDefault:o=!0}){var i,s;let l=((i=eK(t))!==null&&i!==void 0?i:{}).title;if(!Et(t))return l;let u=t,c=o?g1e(u,r):void 0;return n?On(l,u.title,c):(s=l??u.title)!==null&&s!==void 0?s:c}function eK(t){if(JX(t)&&t.axis)return t.axis;if($ot(t)&&t.legend)return t.legend;if(XX(t)&&t.header)return t.header}function g1e(t,r){return Got(t,r)}function nF(t){var r;if(zot(t)){let{format:n,formatType:o}=t;return{format:n,formatType:o}}else{let n=(r=eK(t))!==null&&r!==void 0?r:{},{format:o,formatType:i}=n;return{format:o,formatType:i}}}function udr(t,r){if(t.timeUnit)return"temporal";if(_n(t.bin))return"quantitative";switch(zO(r)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function zl(t){if(Et(t))return t;if(rF(t))return t.condition}function Io(t){if(Or(t))return t;if(ZX(t))return t.condition}function KB(t,r,n){if(dr(t)||wo(t)||ky(t)){let o=dr(t)?"string":wo(t)?"number":"boolean";return st(it.primitiveChannelDef(r,o,t)),{value:t}}return Or(t)?KX(t,r,n):ZX(t)?Object.assign(Object.assign({},t),{condition:KX(t.condition,r,n)}):t}function KX(t,r,n){if(zot(t)){let{format:o,formatType:i}=t,s=Pt(t,["format","formatType"]);if(By(i)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),KX(s,r,n)}else{let o=JX(t)?"axis":$ot(t)?"legend":XX(t)?"header":null;if(o&&t[o]){let i=t[o],{format:s,formatType:a}=i,l=Pt(i,["format","formatType"]);if(By(a)&&!n.customFormatTypes)return st(it.customFormatTypeNotAllowed(r)),KX(Object.assign(Object.assign({},t),{[o]:l}),r,n)}}return Et(t)?y1e(t,r):cdr(t)}function cdr(t){let r=t.type;if(r)return t;let{datum:n}=t;return r=wo(n)?"quantitative":dr(n)?"nominal":Oy(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:r})}function y1e(t,r){let{aggregate:n,timeUnit:o,bin:i,field:s}=t,a=Object.assign({},t);if(n&&!MO(n)&&!Dm(n)&&!Fp(n)&&(st(it.invalidAggregate(n)),delete a.aggregate),o&&(a.timeUnit=os(o)),s&&(a.field=`${s}`),_n(i)&&(a.bin=VO(i,r)),Yi(i)&&!ul(r)&&st(`Channel ${r} should not be used with "binned" bin.`),la(a)){let{type:l}=a,u=Sot(l);l!==u&&(a.type=u),l!=="quantitative"&&AX(n)&&(st(it.invalidFieldTypeForCountAggregate(l,n)),a.type="quantitative")}else if(!OX(r)){let l=udr(a,r);st(it.missingFieldType(r,l)),a.type=l}if(la(a)){let{compatible:l,warning:u}=fdr(a,r);l||st(u)}if(p1e(a)&&dr(a.sort)){let{sort:l}=a;if(f1e(l))return Object.assign(Object.assign({},a),{sort:{encoding:l}});let u=l.substr(1);if(l.charAt(0)==="-"&&f1e(u))return Object.assign(Object.assign({},a),{sort:{encoding:u,order:"descending"}})}if(XX(a)){let{header:l}=a,{orient:u}=l,c=Pt(l,["orient"]);if(u)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}return a}function VO(t,r){return ky(t)?{maxbins:Zve(r)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:Zve(r)}):t}function fdr(t,r){let n=t.type;if(n==="geojson"&&r!=="shape")return{compatible:!1,warning:`Channel ${r} should not be used with a geojson data.`};switch(r){case mf:case gf:case PO:return Uot(t)?{compatible:!1,warning:it.facetChannelShouldBeDiscrete(r)}:sA;case Jn:case ui:case bs:case _u:case Su:case tA:case nA:case jO:case kv:case LO:case BO:case Fm:case bc:case bf:case $O:return sA;case vc:case Ll:case xc:case wu:return n!==Mp?{compatible:!1,warning:`Channel ${r} should be used with a quantitative field only, not ${t.type} field.`}:sA;case wc:case Ad:case kd:case Id:case xf:case Om:case Nm:case yf:case Td:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${r} should not be used with an unsorted discrete field.`}:sA;case Dd:return Gt(["ordinal","nominal"],t.type)?sA:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case ns:return Gt(["ordinal","nominal","geojson"],t.type)?sA:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case rA:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:sA}}function JO(t){let{formatType:r}=nF(t);return r==="time"||!r&&ddr(t)}function ddr(t){return t&&(t.type==="temporal"||Et(t)&&!!t.timeUnit)}function WB(t,{timeUnit:r,type:n,wrapTime:o,undefinedIfExprNotRequired:i}){var s;let a=r&&((s=os(r))===null||s===void 0?void 0:s.unit),l=a||n==="temporal",u;return tr(t)?u=t.signal:Oy(t)?(l=!0,u=c2(t)):(dr(t)||wo(t))&&l&&(u=`datetime(${JSON.stringify(t)})`,aot(a)&&(wo(t)&&t<1e4||dr(t)&&isNaN(Date.parse(t)))&&(u=c2({[a]:t}))),u?o&&l?`time(${u})`:u:i?void 0:JSON.stringify(t)}function tK(t,r){let{type:n}=t;return r.map(o=>{let i=WB(o,{timeUnit:Et(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:o})}function jy(t,r){return _n(t.bin)?Cu(r)&&Gt(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}var Vot,Got,sA,Dr=D(()=>{"use strict";_o();or();Av();$l();Ar();Po();$y();WO();cn();sa();Mm();Ov();Fy();Od();bt();fo();Vot=(t,r)=>{switch(r.fieldTitle){case"plain":return t.field;case"functional":return ldr(t);default:return adr(t,r)}},Got=Vot;sA={compatible:!0}});function rK(t){let{anchor:r,frame:n,offset:o,orient:i,color:s,subtitleColor:a,subtitleFont:l,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:f,subtitleLineHeight:d,subtitlePadding:p}=t,h=Pt(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},h),s?{fill:s}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},r?{anchor:r}:{}),n?{frame:n}:{}),o?{offset:o}:{}),i?{orient:i}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),l?{subtitleFont:l}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),f?{subtitleFontWeight:f}:{}),d?{subtitleLineHeight:d}:{}),p?{subtitlePadding:p}:{}),b=o2(m,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMark:g,subtitle:y}}function Pm(t){return dr(t)||Lt(t)&&dr(t[0])}var ZB=D(()=>{"use strict";_o();or();bt()});function po(t){return tr(t)?t:t!==void 0?{value:t}:void 0}function b1e(t){return tr(t)?t.signal:Jr(t.value)}function h2(t){return tr(t)?t.signal:t==null?null:Jr(t)}function qot(t,r,n){for(let o of n){let i=Uy(o,r.markDef,r.config);i!==void 0&&(t[o]=po(i))}return t}function x1e(t){var r;return[].concat(t.type,(r=t.style)!==null&&r!==void 0?r:[])}function ln(t,r,n,o={}){let{vgChannel:i,ignoreVgConfig:s}=o;return i&&r[i]!==void 0?r[i]:r[t]!==void 0?r[t]:s&&(!i||i===t)?void 0:Uy(t,r,n,o)}function Uy(t,r,n,{vgChannel:o}={}){return On(o?QB(t,r,n.style):void 0,QB(t,r,n.style),o?n[r.type][o]:void 0,n[r.type][t],o?n.mark[o]:n.mark[t])}function QB(t,r,n){return v1e(t,x1e(r),n)}function v1e(t,r,n){r=Nn(r);let o;for(let i of r){let s=n[i];s&&s[t]!==void 0&&(o=s[t])}return o}function nK(t,r){return Nn(t).reduce((n,o)=>{var i;return n.field.push(vt(o,r)),n.order.push((i=o.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function w1e(t,r){let n=[...t];return r.forEach(o=>{for(let i of n)if(Tv(i,o))return;n.push(o)}),n}function _1e(t,r){return Tv(t,r)||!r?t:t?[...Nn(t),...Nn(r)].join(", "):r}function oK(t,r){let n=t.value,o=r.value;if(n==null||o===null)return{explicit:t.explicit,value:null};if((Pm(n)||tr(n))&&(Pm(o)||tr(o)))return{explicit:t.explicit,value:_1e(n,o)};if(Pm(n)||tr(n))return{explicit:t.explicit,value:n};if(Pm(o)||tr(o))return{explicit:t.explicit,value:o};if(!Pm(n)&&!tr(n)&&!Pm(o)&&!tr(o))return{explicit:t.explicit,value:w1e(n,o)};throw new Error("It should never reach here")}var Po=D(()=>{"use strict";or();Dr();ZB();bt();fo()});function Vy(t,r){let n=t&&t[r];return n?Lt(n)?i2(n,o=>!!o.field):Et(n)||rF(n):!1}function oF(t){return i2(DX,r=>{if(Vy(t,r)){let n=t[r];if(Lt(n))return i2(n,o=>!!o.aggregate);{let o=zl(n);return o&&!!o.aggregate}}return!1})}function iF(t,r){let n=[],o=[],i=[],s=[],a={};return JB(t,(l,u)=>{if(Et(l)){let{field:c,aggregate:f,bin:d,timeUnit:p}=l,h=Pt(l,["field","aggregate","bin","timeUnit"]);if(f||p||d){let m=eK(l),g=m&&m.title,y=vt(l,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},g?[]:{title:Pp(l,r,{allowDisabling:!0})}),h),{field:y});if(f){let x;if(Dm(f)?(x="argmax",y=vt({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${y}.${c}`):Fp(f)?(x="argmin",y=vt({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${y}.${c}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(x=f),x){let v={op:x,as:y};c&&(v.field=c),s.push(v)}}else if(n.push(y),la(l)&&_n(d)){if(o.push({bin:d,field:c,as:y}),n.push(vt(l,{binSuffix:"end"})),jy(l,u)&&n.push(vt(l,{binSuffix:"range"})),ul(u)){let x={field:y+"_end"};a[u+"2"]=x}b.bin="binned",OX(u)||(b.type=Mp)}else if(p){i.push({timeUnit:p,field:c,as:y});let x=la(l)&&l.type!==My&&"time";x&&(u===tA||u===kv?b.formatType=x:Hnt(u)?b.legend=Object.assign({formatType:x},b.legend):ul(u)&&(b.axis=Object.assign({formatType:x},b.axis)))}a[u]=b}else n.push(c),a[u]=t[u]}else a[u]=t[u]}),{bins:o,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function hdr(t,r,n){let o=Knt(r,n);if(o){if(o==="binned"){let i=t[r===yf?Jn:ui];return!!(Et(i)&&Et(t[r])&&Yi(i.bin))}}else return!1;return!0}function Hot(t,r,n){let o=r.type;return nt(t).reduce((i,s)=>{if(!NX(s))return st(it.invalidEncodingChannel(s)),i;let a=t[s];if(s==="angle"&&o==="arc"&&!t.theta&&(st(it.REPLACE_ANGLE_WITH_THETA),s=bc),!hdr(t,s,o))return st(it.incompatibleChannel(s,o)),i;if(s===xf&&o==="line"){let l=zl(t[s]);if(l?.aggregate)return st(it.LINE_WITH_VARYING_SIZE),i}if(s===bs&&(r.filled?"fill"in t:"stroke"in t))return st(it.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if(s===nA||s===rA&&!Lt(a)&&!Tu(a)||s===kv&&Lt(a))a&&(i[s]=Nn(a).reduce((l,u)=>(Et(u)?l.push(y1e(u,s)):st(it.emptyFieldDef(u,s)),l),[]));else{if(s===kv&&a===null)i[s]=null;else if(!Et(a)&&!wf(a)&&!Tu(a)&&!tF(a)&&!tr(a))return st(it.emptyFieldDef(a,s)),i;i[s]=KB(a,s,n)}return i},{})}function Yot(t){let r=[];for(let n of nt(t))if(Vy(t,n)){let o=t[n],i=Nn(o);for(let s of i)Et(s)?r.push(s):rF(s)&&r.push(s.condition)}return r}function JB(t,r,n){if(t)for(let o of nt(t)){let i=t[o];if(Lt(i))for(let s of i)r.call(n,s,o);else r.call(n,i,o)}}function iK(t,r,n,o){return t?nt(t).reduce((i,s)=>{let a=t[s];return Lt(a)?a.reduce((l,u)=>r.call(o,l,u,s),i):r.call(o,i,a,s)},n):n}function sK(t,r){return nt(r).reduce((n,o)=>{switch(o){case Jn:case ui:case LO:case $O:case BO:case yf:case Td:case bc:case Om:case bf:case Nm:case xc:case vc:case wu:case Ll:case tA:case ns:case Fm:case kv:return n;case rA:if(t==="line"||t==="trail")return n;case nA:case jO:{let i=r[o];if(Lt(i)||Et(i))for(let s of Nn(i))s.aggregate||n.push(vt(s,{}));return n}case xf:if(t==="trail")return n;case bs:case _u:case Su:case wc:case Ad:case kd:case Dd:case Id:{let i=zl(r[o]);return i&&!i.aggregate&&n.push(vt(i,{})),n}}},[])}var _c=D(()=>{"use strict";_o();or();Av();$l();Ar();Dr();cn();Od();bt();fo()});function Xot(t){let{tooltip:r}=t,n=Pt(t,["tooltip"]);if(!r)return{filteredEncoding:t};let o,i;if(Lt(r)){for(let s of r)s.aggregate?(o||(o=[]),o.push(s)):(i||(i=[]),i.push(s));o&&(n.tooltip=o)}else r.aggregate?n.tooltip=r:i=r;return Lt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function e$(t,r,n,o=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...t.map(({fieldPrefix:s,titlePrefix:a})=>{let l=o?` of ${r.field}`:"";return{field:s+r.field,type:r.type,title:tr(a)?{signal:a+`"${escape(l)}"`}:a+l}}),...Yot(n)]}}function S1e(t){let{axis:r,title:n,field:o}=t;return r&&r.title!==void 0?void 0:On(n,o)}function sF(t,r,n,o,i){let{scale:s,axis:a}=n;return({partName:l,mark:u,positionPrefix:c,endPositionPrefix:f=void 0,aria:d,extraEncoding:p={}})=>{let h=S1e(n);return C1e(t,l,i,d,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[r]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},h!==void 0?{title:h}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},dr(f)?{[r+"2"]:{field:f+"_"+n.field}}:{}),o),p)})}}function C1e(t,r,n,o,i){let{clip:s,color:a,opacity:l}=t,u=t.type;return t[r]||t[r]===void 0&&n[r]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[r]),s?{clip:s}:{}),a?{color:a}:{}),l?{opacity:l}:{}),jl(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${r}`}),ky(t[r])?{}:t[r]),o===!1?{aria:o}:{})})]:[]}function lK(t,r,n){let{encoding:o}=t,i=r==="vertical"?"y":"x",s=o[i],a=o[i+"2"],l=o[i+"Error"],u=o[i+"Error2"];return{continuousAxisChannelDef:aK(s,n),continuousAxisChannelDef2:aK(a,n),continuousAxisChannelDefError:aK(l,n),continuousAxisChannelDefError2:aK(u,n),continuousAxis:i}}function aK(t,r){if(t&&t.aggregate){let{aggregate:n}=t,o=Pt(t,["aggregate"]);return n!==r&&st(it.errorBarContinuousAxisHasCustomizedAggregate(n,r)),o}else return t}function uK(t,r){let{mark:n,encoding:o}=t,{x:i,y:s}=o;if(_f(i)){if(_f(s)){let a=Et(i)&&i.aggregate,l=Et(s)&&s.aggregate;if(!a&&l===r)return"vertical";if(!l&&a===r)return"horizontal";if(a===r&&l===r)throw new Error("Both x and y cannot have aggregate");return jl(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(_f(s))return"vertical";throw new Error("Need a valid continuous axis for "+r+"s")}}var cK=D(()=>{"use strict";_o();or();Dr();_c();cn();sa();bt();fo()});function Qot(t){return wo(t)?"tukey":t}function E1e(t,{config:r}){var n,o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=Pt(t,["mark","encoding","selection","projection"]),c=jl(i)?i:{type:i};a&&st(it.selectionNotSupported("boxplot"));let f=(n=c.extent)!==null&&n!==void 0?n:r.boxplot.extent,d=ln("size",c,r),p=Qot(f),{transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:v,boxOrient:w,customTooltipWithoutAggregatedField:_}=gdr(t,f,r),{color:C,size:S}=x,E=Pt(x,["color","size"]),A=U=>sF(c,g,m,U,r.boxplot),N=A(E),k=A(x),R=A(Object.assign(Object.assign({},E),S?{size:S}:{})),I=e$([{fieldPrefix:p==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:p==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),L={type:"tick",color:"black",opacity:1,orient:v,invalid:null},j=p==="min-max"?I:e$([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),M=[...N({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:j}),...N({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:j}),...N({partName:"ticks",mark:L,positionPrefix:"lower_whisker",aria:!1,extraEncoding:j}),...N({partName:"ticks",mark:L,positionPrefix:"upper_whisker",aria:!1,extraEncoding:j})],V=[...p!=="tukey"?M:[],...k({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:I}),...R({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},vo(r.boxplot.median)&&r.boxplot.median.color?{color:r.boxplot.median.color}:{}),d?{size:d}:{}),{orient:v,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:I})],G;if(p!=="min-max"){let U=`datum["lower_box_${m.field}"]`,Y=`datum["upper_box_${m.field}"]`,X=`(${Y} - ${U})`,pe=`${U} - ${f} * ${X}`,$=`${Y} + ${f} * ${X}`,O=`datum["${m.field}"]`,z={joinaggregate:Jot(m.field),groupby:y},q;p==="tukey"&&(q={transform:[{filter:`(${pe} <= ${O}) && (${O} <= ${$})`},{aggregate:[{op:"min",field:m.field,as:"lower_whisker_"+m.field},{op:"max",field:m.field,as:"upper_whisker_"+m.field},{op:"min",field:"lower_box_"+m.field,as:"lower_box_"+m.field},{op:"max",field:"upper_box_"+m.field,as:"upper_box_"+m.field},...b],groupby:y}],layer:M});let{tooltip:ee}=E,ae=Pt(E,["tooltip"]),{scale:Q,axis:le}=m,ie=S1e(m),Z=C1e(c,"outliers",r.boxplot,!0,{transform:[{filter:`(${O} < ${pe}) || (${O} > ${$})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},ie!==void 0?{title:ie}:{}),Q!==void 0?{scale:Q}:{}),le!==void 0?{axis:le}:{})},ae),_?{tooltip:_}:{})})[0];Z&&q?G={transform:[z],layer:[Z,q]}:Z?(G=Z,G.transform.unshift(z)):q&&(G=q,G.transform.unshift(z))}return G?Object.assign(Object.assign({},u),{layer:[G,{transform:h,layer:V}]}):Object.assign(Object.assign({},u),{transform:((o=u.transform)!==null&&o!==void 0?o:[]).concat(h),layer:V})}function Jot(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function gdr(t,r,n){let o=uK(t,t$),{continuousAxisChannelDef:i,continuousAxis:s}=lK(t,o,t$),a=i.field,l=Qot(r),u=[...Jot(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${r}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${r}, datum["min_${a}"])`,as:"lower_whisker_"+a}],f=t.encoding,d=s,p=f[d],h=Pt(f,[typeof d=="symbol"?d:d+""]),{customTooltipWithoutAggregatedField:m,filteredEncoding:g}=Xot(h),{bins:y,timeUnits:b,aggregate:x,groupby:v,encoding:w}=iF(g,n),_=o==="vertical"?"horizontal":"vertical",C=o;return{transform:[...y,...b,{aggregate:[...x,...u],groupby:v},...c],groupby:v,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:C,customTooltipWithoutAggregatedField:m}}var t$,Kot,Zot,T1e=D(()=>{"use strict";_o();or();Po();_c();cn();sa();UB();cK();t$="boxplot",Kot=["box","median","outliers","rule","ticks"],Zot=new Dy(t$,E1e)});function A1e(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:l,outerSpec:u,tooltipEncoding:c}=k1e(t,fK,r),f=sF(l,i,o,s,r.errorbar),d={type:"tick",orient:a},p=[...f({partName:"ticks",mark:d,positionPrefix:"lower",aria:!1,extraEncoding:c}),...f({partName:"ticks",mark:d,positionPrefix:"upper",aria:!1,extraEncoding:c}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function ydr(t,r){let{encoding:n}=t;if(bdr(n))return{orient:uK(t,r),inputType:"raw"};let o=xdr(n),i=vdr(n),s=n.x,a=n.y;if(o){if(i)throw new Error(`${r} cannot be both type aggregated-upper-lower and aggregated-error`);let l=n.x2,u=n.y2;if(Or(l)&&Or(u))throw new Error(`${r} cannot have both x2 and y2`);if(Or(l)){if(_f(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${r}`)}else if(Or(u)){if(_f(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${r}`)}throw new Error("No ranged axis")}else{let l=n.xError,u=n.xError2,c=n.yError,f=n.yError2;if(Or(u)&&!Or(l))throw new Error(`${r} cannot have xError2 without xError`);if(Or(f)&&!Or(c))throw new Error(`${r} cannot have yError2 without yError`);if(Or(l)&&Or(c))throw new Error(`${r} cannot have both xError and yError with both are quantiative`);if(Or(l)){if(_f(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Or(c)){if(_f(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function bdr(t){return(Or(t.x)||Or(t.y))&&!Or(t.x2)&&!Or(t.y2)&&!Or(t.xError)&&!Or(t.xError2)&&!Or(t.yError)&&!Or(t.yError2)}function xdr(t){return Or(t.x2)||Or(t.y2)}function vdr(t){return Or(t.xError)||Or(t.xError2)||Or(t.yError)||Or(t.yError2)}function k1e(t,r,n){var o;let{mark:i,encoding:s,selection:a,projection:l}=t,u=Pt(t,["mark","encoding","selection","projection"]),c=jl(i)?i:{type:i};a&&st(it.selectionNotSupported(r));let{orient:f,inputType:d}=ydr(t,r),{continuousAxisChannelDef:p,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=lK(t,f,r),{errorBarSpecificAggregate:b,postAggregateCalculates:x,tooltipSummary:v,tooltipTitleWithFieldName:w}=wdr(c,p,h,m,g,d,r,n),_=s,C=y,S=_[C],E=y==="x"?"x2":"y2",A=_[E],N=y==="x"?"xError":"yError",k=_[N],R=y==="x"?"xError2":"yError2",I=_[R],L=Pt(_,[typeof C=="symbol"?C:C+"",typeof E=="symbol"?E:E+"",typeof N=="symbol"?N:N+"",typeof R=="symbol"?R:R+""]),{bins:j,timeUnits:M,aggregate:V,groupby:G,encoding:U}=iF(L,n),Y=[...V,...b],X=d!=="raw"?[]:G,pe=e$(v,p,U,w);return{transform:[...(o=u.transform)!==null&&o!==void 0?o:[],...j,...M,...Y.length===0?[]:[{aggregate:Y,groupby:X}],...x],groupby:X,continuousAxisChannelDef:p,continuousAxis:y,encodingWithoutContinuousAxis:U,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:pe}}function wdr(t,r,n,o,i,s,a,l){let u=[],c=[],f=r.field,d,p=!1;if(s==="raw"){let h=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":l.errorbar.center,m=t.extent?t.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&st(it.errorBarCenterIsUsedWithWrongExtent(h,m,a)),m==="stderr"||m==="stdev")u=[{op:m,field:f,as:"extent_"+f},{op:h,field:f,as:"center_"+f}],c=[{calculate:`datum["center_${f}"] + datum["extent_${f}"]`,as:"upper_"+f},{calculate:`datum["center_${f}"] - datum["extent_${f}"]`,as:"lower_"+f}],d=[{fieldPrefix:"center_",titlePrefix:KT(h)},{fieldPrefix:"upper_",titlePrefix:eit(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:eit(h,m,"-")}],p=!0;else{t.center&&t.extent&&st(it.errorBarCenterIsNotNeeded(t.extent,a));let g,y,b;m==="ci"?(g="mean",y="ci0",b="ci1"):(g="median",y="q1",b="q3"),u=[{op:y,field:f,as:"lower_"+f},{op:b,field:f,as:"upper_"+f},{op:g,field:f,as:"center_"+f}],d=[{fieldPrefix:"upper_",titlePrefix:Pp({field:f,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Pp({field:f,aggregate:y,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Pp({field:f,aggregate:g,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&st(it.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),s==="aggregated-upper-lower"?(d=[],c=[{calculate:`datum["${n.field}"]`,as:"upper_"+f},{calculate:`datum["${f}"]`,as:"lower_"+f}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:`datum["${f}"] + datum["${o.field}"]`,as:"upper_"+f}],i?c.push({calculate:`datum["${f}"] + datum["${i.field}"]`,as:"lower_"+f}):c.push({calculate:`datum["${f}"] - datum["${o.field}"]`,as:"lower_"+f}));for(let h of c)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Iy(Iy(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:u,tooltipSummary:d,tooltipTitleWithFieldName:p}}function eit(t,r,n){return KT(t)+" "+n+" "+r}var fK,tit,rit,dK=D(()=>{"use strict";_o();Dr();_c();cn();sa();bt();UB();cK();fK="errorbar",tit=["ticks","rule"],rit=new Dy(fK,A1e)});function I1e(t,{config:r}){let{transform:n,continuousAxisChannelDef:o,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:l,tooltipEncoding:u}=k1e(t,pK,r),c=a,f=sF(c,i,o,s,r.errorband),d=t.encoding.x!==void 0&&t.encoding.y!==void 0,p={type:d?"area":"rect"},h={type:d?"line":"rule"},m=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return d?(p=Object.assign(Object.assign(Object.assign({},p),m),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),m)):c.interpolate?st(it.errorBand1DNotSupport("interpolate")):c.tension&&st(it.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},l),{transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...f({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:u}),...f({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}var pK,nit,oit,D1e=D(()=>{"use strict";cn();UB();cK();dK();pK="errorband",nit=["band","borders"],oit=new Dy(pK,I1e)});function N1e(t,r,n){let o=new Dy(t,r);iit[t]={normalizer:o,parts:n}}function sit(){return nt(iit)}var iit,ait=D(()=>{"use strict";bt();UB();T1e();D1e();dK();iit={};N1e(t$,E1e,Kot);N1e(fK,A1e,tit);N1e(pK,I1e,nit)});var lit,uit=D(()=>{"use strict";lit=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"]});var hK,cit,fit,O1e,Xto,r$=D(()=>{"use strict";bt();hK=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],cit={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},fit={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},O1e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Xto=nt(O1e)});function n$(t){return!!t&&(t==="legend"||!!t.legend)}function mK(t){return n$(t)&&vo(t)}var Fv,dit,aF=D(()=>{"use strict";or();Fv="_vgsid_",dit={single:{on:"click",fields:[Fv],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Fv],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}}});function F1e(t){return m2(t)||lF(t)||o$(t)}function o$(t){return"concat"in t}function m2(t){return"vconcat"in t}function lF(t){return"hconcat"in t}var gK=D(()=>{"use strict"});function Sf(t){return vo(t)&&t.step!==void 0}function R1e(t){return t.view||t.width||t.height}function pit(t,r,n){var o,i;let s=n[r],a={},{spacing:l,columns:u}=s;l!==void 0&&(a.spacing=l),u!==void 0&&(Nv(t)&&!zy(t.facet)||o$(t))&&(a.columns=u),m2(t)&&(a.columns=1);for(let c of Sdr)if(t[c]!==void 0)if(c==="spacing"){let f=t[c];a[c]=wo(f)?f:{row:(o=f.row)!==null&&o!==void 0?o:l,column:(i=f.column)!==null&&i!==void 0?i:l}}else a[c]=t[c];return a}var M1e,_dr,Sdr,aA=D(()=>{"use strict";or();bt();gK();Ov();M1e=20,_dr={align:1,bounds:1,center:1,columns:1,spacing:1},Sdr=nt(_dr)});function i$(t,r){var n;return(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"continuousWidth":"continuousHeight"]}function lA(t,r){let n=uA(t,r);return Sf(n)?n.step:yK}function uA(t,r){var n;let o=(n=t[r])!==null&&n!==void 0?n:t[r==="width"?"discreteWidth":"discreteHeight"];return On(o,{step:t.step})}function Tdr(t={}){return{signals:[{name:"color",value:vo(t)?Object.assign(Object.assign({},mit),t):mit}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Adr(t){return{signals:[{name:"fontSize",value:vo(t)?Object.assign(Object.assign({},hit),t):hit}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function kdr(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function bK(t={}){let{color:r,font:n,fontSize:o}=t,i=Pt(t,["color","font","fontSize"]);return NB({},Edr,n?kdr(n):{},r?Tdr(r):{},o?Adr(o):{},i||{})}function git(t){t=ir(t);for(let r of Ddr)delete t[r];if(t.axis)for(let r in t.axis)OO(t.axis[r])&&delete t.axis[r];if(t.legend)for(let r of lit)delete t.legend[r];if(t.mark){for(let r of qve)delete t.mark[r];t.mark.tooltip&&vo(t.mark.tooltip)&&delete t.mark.tooltip}for(let r of Idr){for(let o of qve)delete t[r][o];let n=Ndr[r];if(n)for(let o of n)delete t[r][o];Fdr(t,r)}for(let r of sit())delete t[r];Odr(t);for(let r in t)vo(t[r])&&yn(t[r])&&delete t[r];return yn(t)?void 0:t}function Odr(t){let{titleMarkConfig:r,subtitleMarkConfig:n,subtitle:o}=rK(t.title);yn(r)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),r)),yn(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),yn(o)?delete t.title:t.title=o}function Fdr(t,r,n,o){let i=o?t[r][o]:t[r];r==="view"&&(n="cell");let s=Object.assign(Object.assign({},i),t.style[n??r]);yn(s)||(t.style[n??r]=s),o||delete t[r]}var yK,Cdr,Edr,Rv,hit,mit,Idr,Ddr,Ndr,g2=D(()=>{"use strict";_o();or();LB();ait();uit();r$();sa();sa();vi();aF();aA();ZB();bt();yK=20,Cdr={continuousWidth:200,continuousHeight:200,step:yK},Edr={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Cdr,mark:_nt,arc:{},area:{},bar:Ent,circle:{},geoshape:{},image:{},line:{},point:{},rect:Tnt,rule:{color:"black"},square:{},text:{color:"black"},tick:Ant,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Aot,projection:{},legend:fit,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:dit,style:{},title:{},facet:{spacing:M1e},concat:{spacing:M1e}},Rv=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],hit={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},mit={blue:Rv[0],orange:Rv[1],red:Rv[2],teal:Rv[3],green:Rv[4],yellow:Rv[5],purple:Rv[6],pink:Rv[7],brown:Rv[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};Idr=["view",...Wve],Ddr=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Ndr=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},wnt)});function Mv(t){return"layer"in t}var P1e=D(()=>{"use strict"});function j1e(t){return"repeat"in t}function yit(t){return!Lt(t.repeat)&&t.repeat.layer}var xK=D(()=>{"use strict";or()});var uF=D(()=>{"use strict";gK();Ov();P1e();xK();s2()});var cF,L1e=D(()=>{"use strict";_o();cn();gK();Ov();P1e();xK();s2();cF=class{map(r,n){return Nv(r)?this.mapFacet(r,n):j1e(r)?this.mapRepeat(r,n):lF(r)?this.mapHConcat(r,n):m2(r)?this.mapVConcat(r,n):o$(r)?this.mapConcat(r,n):this.mapLayerOrUnit(r,n)}mapLayerOrUnit(r,n){if(Mv(r))return this.mapLayer(r,n);if(Ia(r))return this.mapUnit(r,n);throw new Error(it.invalidSpec(r))}mapLayer(r,n){return Object.assign(Object.assign({},r),{layer:r.layer.map(o=>this.mapLayerOrUnit(o,n))})}mapHConcat(r,n){return Object.assign(Object.assign({},r),{hconcat:r.hconcat.map(o=>this.map(o,n))})}mapVConcat(r,n){return Object.assign(Object.assign({},r),{vconcat:r.vconcat.map(o=>this.map(o,n))})}mapConcat(r,n){let{concat:o}=r,i=Pt(r,["concat"]);return Object.assign(Object.assign({},i),{concat:o.map(s=>this.map(s,n))})}mapFacet(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}mapRepeat(r,n){return Object.assign(Object.assign({},r),{spec:this.map(r.spec,n)})}}});function Mdr(t){return t in Rdr}function bit(t,r){var n,o;let i=r==="x"?"y":"radius",s=t[r],a=t[i];if(Et(s)&&Et(a))if(Ly(s)==="quantitative"&&Ly(a)==="quantitative"){if(s.stack)return r;if(a.stack)return i;let l=Et(s)&&!!s.aggregate,u=Et(a)&&!!a.aggregate;if(l!==u)return l?r:i;{let c=(n=s.scale)===null||n===void 0?void 0:n.type,f=(o=a.scale)===null||o===void 0?void 0:o.type;if(c&&c!=="linear")return i;if(f&&f!=="linear")return r}}else{if(Ly(s)==="quantitative")return r;if(Ly(a)==="quantitative")return i}else{if(Ly(s)==="quantitative")return r;if(Ly(a)==="quantitative")return i}}function Ldr(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vK(t,r,n={}){let o=jl(t)?t.type:t;if(!Pdr.has(o))return null;let i=bit(r,"x")||bit(r,"theta");if(!i)return null;let s=r[i],a=Et(s)?vt(s,{}):void 0,l=Ldr(i),u=r[l],c=Et(u)?vt(u,{}):void 0;c===a&&(c=void 0,u=void 0,l=void 0);let f=Vnt.reduce((p,h)=>{if(h!=="tooltip"&&Vy(r,h)){let m=r[h];for(let g of Nn(m)){let y=zl(g);if(y.aggregate)continue;let b=vt(y,{});(!b||b!==c)&&p.push({channel:h,fieldDef:y})}}return p},[]),d;if(s.stack!==void 0?ky(s.stack)?d=s.stack?"zero":null:d=s.stack:f.length>0&&jdr.has(o)&&(d="zero"),!d||!Mdr(d)||oF(r)&&f.length===0)return null;if(s.scale&&s.scale.type&&s.scale.type!==Fi.LINEAR){if(n.disallowNonLinearStack)return null;st(it.cannotStackNonLinearScale(s.scale.type))}return Or(r[ll(i)])?(s.stack!==void 0&&st(it.cannotStackRangedMark(i)),null):(Et(s)&&s.aggregate&&!Gt(Ont,s.aggregate)&&st(it.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:u?l:void 0,groupbyField:c,fieldChannel:i,impute:s.impute===null?!1:hf(o),stackBy:f,offset:d})}var Rdr,Pdr,jdr,B1e=D(()=>{"use strict";or();Av();Ar();Dr();_c();cn();sa();vi();bt();Rdr={zero:1,center:1,normalize:1};Pdr=new Set([Vve,JT,QT,RO,FO,$B,zB,eA,EX,BB]),jdr=new Set([JT,QT,Vve])});function Bdr(t){let{point:r,line:n}=t,o=Pt(t,["point","line"]);return nt(o).length>1?o:o.type}function $dr(t){for(let r of["line","area","rule","trail"])t[r]&&(t=Object.assign(Object.assign({},t),{[r]:df(t[r],["point","line"])}));return t}function $1e(t,r={},n){return t.point==="transparent"?{opacity:0}:t.point?vo(t.point)?t.point:{}:t.point!==void 0?null:r.point||n.shape?vo(r.point)?r.point:{}:void 0}function xit(t,r={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:r.line?r.line===!0?{}:r.line:void 0}var wK,vit=D(()=>{"use strict";_o();or();sa();s2();B1e();bt();wK=class{constructor(){this.name="path-overlay"}hasMatchingType(r,n){if(Ia(r)){let{mark:o,encoding:i}=r,s=jl(o)?o:{type:o};switch(s.type){case"line":case"rule":case"trail":return!!$1e(s,n[s.type],i);case"area":return!!$1e(s,n[s.type],i)||!!xit(s,n[s.type])}}return!1}run(r,n,o){let{config:i}=n,{selection:s,projection:a,encoding:l,mark:u}=r,c=Pt(r,["selection","projection","encoding","mark"]),f=jl(u)?u:{type:u},d=$1e(f,i[f.type],l),p=f.type==="area"&&xit(f,i[f.type]),h=[Object.assign(Object.assign({},s?{selection:s}:{}),{mark:Bdr(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:df(l,["shape"])})],m=vK(f,l),g=l;if(m){let{fieldChannel:y,offset:b}=m;g=Object.assign(Object.assign({},l),{[y]:Object.assign(Object.assign({},l[y]),b?{stack:b}:{})})}return p&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},o2(f,["clip","interpolate","tension","tooltip"])),p),encoding:g})),d&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},o2(f,["clip","tooltip"])),d),encoding:g})),o(Object.assign(Object.assign({},c),{layer:h}),Object.assign(Object.assign({},n),{config:$dr(i)}))}}});var _K,wit=D(()=>{"use strict";_o();Ar();Dr();cn();s2();bt();_K=class{constructor(){this.name="RangeStep"}hasMatchingType(r){var n;if(Ia(r)&&r.encoding)for(let o of xs){let i=r.encoding[o];if(i&&Or(i)&&!((n=i?.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(r){var n;let o={},i=Object.assign({},r.encoding);for(let s of xs){let a=Bl(s),l=i[s];if(l&&Or(l)&&!((n=l?.scale)===null||n===void 0)&&n.rangeStep){let{scale:u}=l,c=Pt(l,["scale"]),f=u,{rangeStep:d}=f,p=Pt(f,["rangeStep"]);o[a]={step:u.rangeStep},st(it.RANGE_STEP_DEPRECATED),i=Object.assign(Object.assign({},i),{[s]:Object.assign(Object.assign({},c),yn(p)?{}:{scale:p})})}}return Object.assign(Object.assign(Object.assign({},o),r),{encoding:i})}}});function Cit(t,r){return r?zy(t)?Tit(t,r):Eit(t,r):t}function SK(t,r){return r?Tit(t,r):t}function z1e(t,r,n){let o=r[t];if(Lot(o)){if(o.repeat in n)return Object.assign(Object.assign({},r),{[t]:n[o.repeat]});st(it.noSuchRepeatedValue(o.repeat));return}return r}function Eit(t,r){if(t=z1e("field",t,r),t!==void 0){if(t===null)return null;if(p1e(t)&&cl(t.sort)){let n=z1e("field",t.sort,r);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function _it(t,r){if(Et(t))return Eit(t,r);{let n=z1e("datum",t,r);return n!==t&&!n.type&&(n.type="nominal"),n}}function Sit(t,r){if(Or(t)){let n=_it(t,r);if(n)return n;if(tF(t))return{condition:t.condition}}else{if(ZX(t)){let n=_it(t.condition,r);if(n)return Object.assign(Object.assign({},t),{condition:n});{let{condition:o}=t;return Pt(t,["condition"])}}return t}}function Tit(t,r){let n={};for(let o in t)if(Cd(t,o)){let i=t[o];if(Lt(i))n[o]=i.map(s=>Sit(s,r)).filter(s=>s);else{let s=Sit(i,r);s!==void 0&&(n[o]=s)}}return n}var Ait=D(()=>{"use strict";_o();or();Dr();cn();Mm();Ov()});var CK,kit=D(()=>{"use strict";$l();Ar();Dr();cn();s2();CK=class{constructor(){this.name="RuleForRangedLine"}hasMatchingType(r){if(Ia(r)){let{encoding:n,mark:o}=r;if(o==="line")for(let i of znt){let s=Nd(i),a=n[s];if(n[i]&&(Et(a)&&!Yi(a.bin)||wf(a)))return!0}}return!1}run(r,n,o){let{encoding:i}=r;return st(it.lineWithRange(!!i.x2,!!i.y2)),o(Object.assign(Object.assign({},r),{mark:"rule"}),n)}}});function Iit(t){let{parentEncoding:r,encoding:n}=t;if(r&&n){let i=nt(r).reduce((s,a)=>(n[a]&&s.push(a),s),[]);i.length>0&&st(it.encodingOverridden(i))}let o=Object.assign(Object.assign({},r??{}),n??{});return yn(o)?void 0:o}function Dit(t){let{parentProjection:r,projection:n}=t;return r&&n&&st(it.projectionOverridden({parentProjection:r,projection:n})),n??r}var EK,Nit=D(()=>{"use strict";_o();or();Ar();T1e();D1e();dK();_c();cn();Ov();L1e();xK();s2();bt();vit();wit();Ait();kit();EK=class extends cF{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Zot,rit,oit,new wK,new CK,new _K]}map(r,n){if(Ia(r)){let o=Vy(r.encoding,mf),i=Vy(r.encoding,gf),s=Vy(r.encoding,PO);if(o||i||s)return this.mapFacetedUnit(r,n)}return super.map(r,n)}mapUnit(r,n){let{parentEncoding:o,parentProjection:i}=n,s=Object.assign(Object.assign({},r),{encoding:SK(r.encoding,n.repeater)});if(o||i)return this.mapUnitWithParentEncodingOrProjection(s,n);let a=this.mapLayerOrUnit.bind(this);for(let l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(r,n){return yit(r)?this.mapLayerRepeat(r,n):this.mapNonLayerRepeat(r,n)}mapLayerRepeat(r,n){let{repeat:o,spec:i}=r,s=Pt(r,["repeat","spec"]),{row:a,column:l,layer:u}=o,{repeater:c={},repeaterPrefix:f=""}=n;return a||l?this.mapRepeat(Object.assign(Object.assign({},r),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),l?{column:l}:{}),spec:{repeat:{layer:u},spec:i}}),n):Object.assign(Object.assign({},s),{layer:u.map(d=>{let p=Object.assign(Object.assign({},c),{layer:d}),h=(i.name||"")+f+`child__layer_${Tn(d)}`,m=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:p,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(r,n){var o;let{repeat:i,spec:s,data:a}=r,l=Pt(r,["repeat","spec","data"]);!Lt(i)&&r.columns&&(r=df(r,["columns"]),st(it.columnsNotSupportByRowCol("repeat")));let u=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!Lt(i)&&i.row||[c?c.row:null],p=!Lt(i)&&i.column||[c?c.column:null],h=Lt(i)&&i||[c?c.repeat:null];for(let g of h)for(let y of d)for(let b of p){let x={repeat:g,row:y,column:b,layer:c.layer},v=(s.name||"")+f+"child__"+(Lt(i)?`${Tn(g)}`:(i.row?`row_${Tn(y)}`:"")+(i.column?`column_${Tn(b)}`:"")),w=this.map(s,Object.assign(Object.assign({},n),{repeater:x,repeaterPrefix:v}));w.name=v,u.push(df(w,["data"]))}let m=Lt(i)?r.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(o=s.data)!==null&&o!==void 0?o:a,align:"all"},l),{columns:m,concat:u})}mapFacet(r,n){let{facet:o}=r;return zy(o)&&r.columns&&(r=df(r,["columns"]),st(it.columnsNotSupportByRowCol("facet"))),super.mapFacet(r,n)}mapUnitWithParentEncodingOrProjection(r,n){let{encoding:o,projection:i}=r,{parentEncoding:s,parentProjection:a,config:l}=n,u=Dit({parentProjection:a,projection:i}),c=Iit({parentEncoding:s,encoding:SK(o,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},r),u?{projection:u}:{}),c?{encoding:c}:{}),{config:l})}mapFacetedUnit(r,n){let o=r.encoding,{row:i,column:s,facet:a}=o,l=Pt(o,["row","column","facet"]),{mark:u,width:c,projection:f,height:d,view:p,selection:h,encoding:m}=r,g=Pt(r,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:y,layout:b}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),x=SK(l,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),b),{facet:y,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{width:c}:{}),d?{height:d}:{}),p?{view:p}:{}),f?{projection:f}:{}),{mark:u,encoding:x}),h?{selection:h}:{})}),n)}getFacetMappingAndLayout(r,n){var o;let{row:i,column:s,facet:a}=r;if(i||s){a&&st(it.facetChannelDropped([...i?[mf]:[],...s?[gf]:[]]));let l={},u={};for(let c of[mf,gf]){let f=r[c];if(f){let{align:d,center:p,spacing:h,columns:m}=f,g=Pt(f,["align","center","spacing","columns"]);l[c]=g;for(let y of["align","center","spacing"])f[y]!==void 0&&(u[y]=(o=u[y])!==null&&o!==void 0?o:{},u[y][c]=f[y])}}return{facetMapping:l,layout:u}}else{let{align:l,center:u,spacing:c,columns:f}=a,d=Pt(a,["align","center","spacing","columns"]);return{facetMapping:Cit(d,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},l?{align:l}:{}),u?{center:u}:{}),c?{spacing:c}:{}),f?{columns:f}:{})}}}mapLayer(r,n){var{parentEncoding:o,parentProjection:i}=n,s=Pt(n,["parentEncoding","parentProjection"]);let{encoding:a,projection:l}=r,u=Pt(r,["encoding","projection"]),c=Object.assign(Object.assign({},s),{parentEncoding:Iit({parentEncoding:o,encoding:a}),parentProjection:Dit({parentProjection:i,projection:l})});return super.mapLayer(u,c)}}});function TK(t,r){r===void 0&&(r=bK(t.config));let n=Udr(t,r),{width:o,height:i}=t,s=Vdr(n,{width:o,height:i,autosize:t.autosize},r);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}function Udr(t,r={}){return zdr.map(t,{config:r})}function Oit(t){return dr(t)?{type:t}:t??{}}function Vdr(t,r,n){let{width:o,height:i}=r,s=Ia(t)||Mv(t),a={};s?o=="container"&&i=="container"?(a.type="fit",a.contains="padding"):o=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(o=="container"&&(st(it.containerSizeNonSingle("width")),o=void 0),i=="container"&&(st(it.containerSizeNonSingle("height")),i=void 0));let l=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?Oit(n.autosize):{}),Oit(t.autosize));if(l.type==="fit"&&!s&&(st(it.FIT_NON_SINGLE),l.type="pad"),o=="container"&&!(l.type=="fit"||l.type=="fit-x")&&st(it.containerSizeNotCompatibleWithAutosize("width")),i=="container"&&!(l.type=="fit"||l.type=="fit-y")&&st(it.containerSizeNotCompatibleWithAutosize("height")),!Tv(l,{type:"pad"}))return l}var zdr,U1e=D(()=>{"use strict";or();g2();cn();uF();bt();Nit();zdr=new EK});function Fit(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function Rit(t){return t?`fit-${a2(t)}`:"fit"}function V1e(t){return Gdr.reduce((r,n)=>(t&&t[n]!==void 0&&(r[n]=t[n]),r),{})}var Gdr,Mit=D(()=>{"use strict";Ar();Gdr=["background","padding"]});function Pv(t){return{explicit:!0,value:t}}function ku(t){return{explicit:!1,value:t}}function AK(t){return(r,n,o,i)=>{let s=t(r.value,n.value);return s>0?r:s<0?n:fF(r,n,o,i)}}function fF(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingProperty(n,o,t.value,r.value)),t}function Cf(t,r,n,o,i=fF){return t===void 0||t.value===void 0?r:t.explicit&&!r.explicit?t:r.explicit&&!t.explicit?r:Tv(t.value,r.value)?t:i(t,r,n,o)}var Au,Sc=D(()=>{"use strict";cn();bt();Au=class t{constructor(r={},n={}){this.explicit=r,this.implicit=n}clone(){return new t(ir(this.explicit),ir(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(r){return On(this.explicit[r],this.implicit[r])}getWithExplicit(r){return this.explicit[r]!==void 0?{explicit:!0,value:this.explicit[r]}:this.implicit[r]!==void 0?{explicit:!1,value:this.implicit[r]}:{explicit:!1,value:void 0}}setWithExplicit(r,n){n.value!==void 0&&this.set(r,n.value,n.explicit)}set(r,n,o){return delete this[o?"implicit":"explicit"][r],this[o?"explicit":"implicit"][r]=n,this}copyKeyFromSplit(r,n){n.explicit[r]!==void 0?this.set(r,n.explicit[r],!0):n.implicit[r]!==void 0&&this.set(r,n.implicit[r],!1)}copyKeyFromObject(r,n){n[r]!==void 0&&this.set(r,n[r],!0)}copyAll(r){for(let n of nt(r.combine())){let o=r.getWithExplicit(n);this.setWithExplicit(n,o)}}}});var kK,Pit=D(()=>{"use strict";Sc();kK=class extends Au{constructor(r={},n={},o=!1){super(r,n),this.explicit=r,this.implicit=n,this.parseNothing=o}clone(){let r=super.clone();return r.parseNothing=this.parseNothing,r}}});function y2(t){return"url"in t}function dF(t){return"values"in t}function IK(t){return"name"in t&&!y2(t)&&!dF(t)&&!Gy(t)}function Gy(t){return t&&(G1e(t)||W1e(t)||s$(t))}function G1e(t){return"sequence"in t}function W1e(t){return"sphere"in t}function s$(t){return"graticule"in t}var Ps,pF,Wy=D(()=>{"use strict";Ps="main",pF="raw"});function q1e(t){return"filter"in t}function jit(t){return t?.stop!==void 0}function Lit(t){return"lookup"in t}function Bit(t){return"data"in t}function $it(t){return"selection"in t}function zit(t){return"pivot"in t}function Uit(t){return"density"in t}function Vit(t){return"quantile"in t}function Git(t){return"regression"in t}function Wit(t){return"loess"in t}function qit(t){return"sample"in t}function Hit(t){return"window"in t}function Yit(t){return"joinaggregate"in t}function Xit(t){return"flatten"in t}function Kit(t){return"calculate"in t}function Zit(t){return"bin"in t}function Qit(t){return"impute"in t}function Jit(t){return"timeUnit"in t}function est(t){return"aggregate"in t}function tst(t){return"stack"in t}function rst(t){return"fold"in t}function nst(t){return t.map(r=>q1e(r)?{filter:MB(r.filter,wot)}:r)}var a$=D(()=>{"use strict";yX();oA()});function jp(t,r,n,o){let i=tF(r)&&r.condition,s=o(r);if(i){let l=Nn(i).map(u=>{let c=o(u),f=jot(u)?DK(t,u.selection):dA(t,u.test);return Object.assign({test:f},c)});return{[n]:[...l,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}var cA=D(()=>{"use strict";or();Dr();NK();fA()});function b2(t,r="text"){let n=t.encoding[r];return jp(t,n,r,o=>hF(o,t.config))}function hF(t,r,n="datum"){if(t){if(Tu(t))return po(t.value);if(Or(t)){let{format:o,formatType:i}=nF(t);return KO({fieldOrDatumDef:t,format:o,formatType:i,expr:n,config:r})}}}var mF=D(()=>{"use strict";Dr();Po();$y();cA()});function gF(t,r={}){let{encoding:n,markDef:o,config:i,stack:s}=t,a=n.tooltip;if(Lt(a))return{tooltip:H1e({tooltip:a},s,i,r)};{let l=r.reactiveGeom?"datum.datum":"datum";return jp(t,a,"tooltip",u=>{let c=hF(u,i,l);if(c)return c;if(u===null)return;let f=ln("tooltip",o,i);if(f===!0&&(f={content:"encoding"}),dr(f))return{value:f};if(vo(f))return f.content==="encoding"?H1e(n,s,i,r):{signal:l}})}}function Y1e(t,r,n,{reactiveGeom:o}={}){let i={},s=o?"datum.datum":"datum",a=[];function l(c,f){let d=Nd(f),p=la(c)?c:Object.assign(Object.assign({},c),{type:t[d].type}),h=Nn(Pp(p,n,{allowDisabling:!1})).join(", "),m;if(ul(f)){let g=f==="x"?"x2":"y2",y=zl(t[g]);if(Yi(p.bin)&&y){let b=vt(p,{expr:s}),x=vt(y,{expr:s}),{format:v,formatType:w}=nF(p);m=ZO(b,x,v,w,n),i[g]=!0}else if(r&&r.fieldChannel===f&&r.offset==="normalize"){let{format:b,formatType:x}=nF(p);m=KO({fieldOrDatumDef:p,format:b,formatType:x,expr:s,config:n,normalizeStack:!0}).signal}}m=m??hF(p,n,s).signal,a.push({channel:f,key:h,value:m})}JB(t,(c,f)=>{Et(c)?l(c,f):rF(c)&&l(c.condition,f)});let u={};for(let{channel:c,key:f,value:d}of a)!i[c]&&!u[f]&&(u[Jr(f)]=d);return u}function H1e(t,r,n,{reactiveGeom:o}={}){let i=Y1e(t,r,n,{reactiveGeom:o}),s=PB(i).map(({key:a,value:l})=>`${a}: ${l}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}var l$=D(()=>{"use strict";or();$l();Ar();Dr();_c();bt();Po();$y();cA();mF()});function X1e(t){let{markDef:r,config:n}=t,o=ln("aria",r,n);return o===!1?{}:Object.assign(Object.assign(Object.assign({},o?{aria:o}:{}),Wdr(t)),qdr(t))}function Wdr(t){let{mark:r,markDef:n,config:o}=t;if(o.aria===!1)return{};let i=ln("ariaRoleDescription",n,o);return i!=null?{ariaRoleDescription:{value:i}}:r in mot?{}:{ariaRoleDescription:{value:r}}}function qdr(t){let{encoding:r,markDef:n,config:o,stack:i}=t,s=r.description;if(s)return jp(t,s,"description",u=>hF(u,t.config));let a=ln("description",n,o);if(a!=null)return{description:po(a)};if(o.aria===!1)return{};let l=Y1e(r,i,o);if(!yn(l))return{description:{signal:PB(l).map(({key:u,value:c})=>`${u} + ": " + (${c})`).join(' + "; " + ')}}}var K1e=D(()=>{"use strict";bt();Po();fo();cA();mF();l$()});function Xo(t,r,n={}){let{markDef:o,encoding:i,config:s}=r,{vgChannel:a}=n,{defaultRef:l,defaultValue:u}=n;l===void 0&&(u=u??ln(t,o,s,{vgChannel:a,ignoreVgConfig:!0}),u!==void 0&&(l=po(u)));let c=i[t];return jp(r,c,a??t,f=>c1e({channel:t,channelDef:f,markDef:o,config:s,scaleName:r.scaleName(t),scale:r.getScaleComponent(t),stack:null,defaultRef:l}))}var yF=D(()=>{"use strict";Po();cA();f2()});function bF(t,r={filled:void 0}){var n,o,i,s;let{markDef:a,encoding:l,config:u}=t,{type:c}=a,f=(n=r.filled)!==null&&n!==void 0?n:ln("filled",a,u),d=Gt(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,p=(i=(o=ln(f===!0?"color":void 0,a,u,{vgChannel:"fill"}))!==null&&o!==void 0?o:u.mark[f===!0&&"color"])!==null&&i!==void 0?i:d,h=(s=ln(f===!1?"color":void 0,a,u,{vgChannel:"stroke"}))!==null&&s!==void 0?s:u.mark[f===!1&&"color"],m=f?"fill":"stroke",g=Object.assign(Object.assign({},p?{fill:po(p)}:{}),h?{stroke:po(h)}:{});return a.color&&(f?a.fill:a.stroke)&&st(it.droppingColor("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Xo("color",t,{vgChannel:m,defaultValue:f?p:h})),Xo("fill",t,{defaultValue:l.fill?p:void 0})),Xo("stroke",t,{defaultValue:l.stroke?h:void 0}))}var OK=D(()=>{"use strict";cn();bt();Po();yF()});function x2(t,r){let n=Unt(t),o=r[n];if(o)return o}var FK=D(()=>{"use strict";Ar()});function Ki(t,r,{defaultPos:n,vgChannel:o,isMidPoint:i}){let{encoding:s,markDef:a,config:l,stack:u}=r,c=s[t],f=s[ll(t)],d=r.scaleName(t),p=r.getScaleComponent(t),h=x2(t,a),m=u$({model:r,defaultPos:n,channel:t,scaleName:d,scale:p}),g=!c&&ul(t)&&(s.latitude||s.longitude)?{field:r.getName(t)}:Hdr({channel:t,channelDef:c,channel2Def:f,markDef:a,config:l,isMidPoint:i,scaleName:d,scale:p,stack:u,offset:h,defaultRef:m});return g?{[o||t]:g}:void 0}function Hdr(t){let{channel:r,channelDef:n,isMidPoint:o,scaleName:i,stack:s,offset:a,markDef:l,config:u}=t;if(Or(n)&&s&&r===s.fieldChannel){if(Et(n)){let c=d2({channel:r,fieldDef:n,isMidPoint:o,markDef:l,stack:s,config:u});if(c!==void 0)return YO({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:a})}return Py(n,i,{suffix:"end"},{offset:a})}return XO(t)}function u$({model:t,defaultPos:r,channel:n,scaleName:o,scale:i}){let{markDef:s,config:a}=t;return()=>{let l=Nd(n),u=Rp(n),c=ln(n,s,a,{vgChannel:u});if(c!==void 0)return iA(n,c);switch(r){case"zeroOrMin":case"zeroOrMax":if(o){let f=i.get("type");if(!Gt([Fi.LOG,Fi.TIME,Fi.UTC],f)){if(i.domainDefinitelyIncludesZero())return{scale:o,value:0}}}if(r==="zeroOrMin")return l==="y"?{field:{group:"height"}}:{value:0};switch(l){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{let f=t[Bl(n)];return Object.assign(Object.assign({},f),{mult:.5})}}}}var c$=D(()=>{"use strict";Ar();Dr();vi();bt();Po();FK();f2()});function RK(t,r,n,o="middle"){if(t==="radius"||t==="theta")return Rp(t);let s=ln(t==="x"?"align":"baseline",r,n);return t==="x"?Ydr[s||(o==="top"?"left":"center")]:Xdr[s||o]}var Ydr,Xdr,Z1e=D(()=>{"use strict";Ar();Po();Ydr={left:"x",center:"xc",right:"x2"},Xdr={top:"y",middle:"yc",bottom:"y2"}});function v2(t,r,{defaultPos:n,defaultPos2:o,range:i}){return i?f$(t,r,{defaultPos:n,defaultPos2:o}):Ki(t,r,{defaultPos:n})}function f$(t,r,{defaultPos:n,defaultPos2:o}){let{markDef:i,config:s}=r,a=ll(t),l=Bl(t),u=Kdr(r,o,a),c=u[l]?RK(t,i,s):Rp(t);return Object.assign(Object.assign({},Ki(t,r,{defaultPos:n,vgChannel:c})),u)}function Kdr(t,r,n){let{encoding:o,mark:i,markDef:s,stack:a,config:l}=t,u=Nd(n),c=Bl(n),f=Rp(n),d=o[u],p=t.scaleName(u),h=t.getScaleComponent(u),m=n in o||n in s?x2(n,t.markDef):x2(u,t.markDef);if(!d&&(n==="x2"||n==="y2")&&(o.latitude||o.longitude))return{[f]:{field:t.getName(n)}};let g=Zdr({channel:n,channelDef:d,channel2Def:o[n],markDef:s,config:l,scaleName:p,scale:h,stack:a,offset:m,defaultRef:void 0});return g!==void 0?{[f]:g}:MK(n,s)||MK(n,{[n]:QB(n,s,l.style),[c]:QB(c,s,l.style)})||MK(n,l[i])||MK(n,l.mark)||{[f]:u$({model:t,defaultPos:r,channel:n,scaleName:p,scale:h})()}}function Zdr({channel:t,channelDef:r,channel2Def:n,markDef:o,config:i,scaleName:s,scale:a,stack:l,offset:u,defaultRef:c}){return Or(r)&&l&&t.charAt(0)===l.fieldChannel.charAt(0)?Py(r,s,{suffix:"start"},{offset:u}):XO({channel:t,channelDef:n,scaleName:s,scale:a,stack:l,markDef:o,config:i,offset:u,defaultRef:c})}function MK(t,r){let n=Bl(t),o=Rp(t);if(r[o]!==void 0)return{[o]:iA(t,r[o])};if(r[t]!==void 0)return{[o]:iA(t,r[t])};if(r[n])return{[n]:iA(t,r[n])}}var PK=D(()=>{"use strict";Ar();Dr();Po();FK();Z1e();c$();f2()});function Ef(t,r,n){var o,i,s,a;let{config:l,encoding:u,markDef:c,stack:f}=t,d=ll(r),p=Bl(r),h=u[r],m=u[d],g=t.getScaleComponent(r),y=g?g.get("type"):void 0,b=t.scaleName(r),x=c.orient,v=(i=(o=u[p])!==null&&o!==void 0?o:u.size)!==null&&i!==void 0?i:ln("size",c,l,{vgChannel:p}),w=n==="bar"&&(r==="x"?x==="vertical":x==="horizontal");if(Et(h)&&(_n(h.bin)||Yi(h.bin)||h.timeUnit&&!m)&&!v&&!Xi(y)){let _=d2({channel:r,fieldDef:h,stack:f,markDef:c,config:l}),C=(s=t.component.axes[r])===null||s===void 0?void 0:s[0],S=(a=C?.get("translate"))!==null&&a!==void 0?a:.5;return ist({fieldDef:h,fieldDef2:m,channel:r,markDef:c,scaleName:b,band:_,axisTranslate:S,spacing:ul(r)?ln("binSpacing",c,l):void 0,reverse:g.get("reverse"),config:l})}else return(Or(h)&&Xi(y)||w)&&!m?Jdr(n,h,r,t):f$(r,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Qdr(t,r,n,o,i,s){if(o){let u=o.get("type");if(u==="point"||u==="band"){if(i[t].discreteBandSize!==void 0)return{value:i[t].discreteBandSize};if(u===Fi.POINT){let c=o.get("range");return Eu(c)&&wo(c.step)?{value:c.step-2}:{value:yK-2}}else return{scale:n,band:s}}else return{value:i[t].continuousBandSize}}let a=lA(i.view,r),l=On(i[t].discreteBandSize,a-2);return l!==void 0?{value:l}:void 0}function Jdr(t,r,n,o){var i;let{markDef:s,encoding:a,config:l,stack:u}=o,c=s.orient,f=o.scaleName(n),d=o.getScaleComponent(n),p=Bl(n),h=ll(n),m=c==="horizontal"&&n==="y"||c==="vertical"&&n==="x",g=ln(m?"size":p,s,l,{vgChannel:p}),y;(a.size||g!==void 0)&&(m?y=Xo("size",o,{vgChannel:p,defaultValue:g}):st(it.cannotApplySizeToNonOrientedMark(s.type)));let b=(i=Or(r)?d2({channel:n,fieldDef:r,markDef:s,stack:u,config:l}):void 0)!==null&&i!==void 0?i:1;y=y||{[p]:Qdr(t,p,f,d,l,b)};let x=d?.get("type")!=="band"||!("band"in y[p]),v=RK(n,s,l,x?"middle":"top"),w=x2(n,s),_=XO({channel:n,channelDef:r,markDef:s,config:l,scaleName:f,scale:d,stack:u,offset:w,defaultRef:u$({model:o,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:x?.5:(1-b)/2});if(p)return Object.assign({[v]:_},y);{let C=Rp(h),S=y[p],E=w?Object.assign(Object.assign({},S),{offset:w}):S;return{[v]:_,[C]:Lt(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:E})]:Object.assign(Object.assign({},_),{offset:E})}}}function d$(t,r,n,o,i){if(Hve(t))return 0;let s=t==="x"||t==="y2"?-r/2:r/2;if(tr(n)){let a=h2(i);return{signal:`${n.signal} ? ${o-s}${a?"-"+a:""} : ${o+s}${a?"+"+a:""}`}}else{if(tr(i)){let a=o+(n?-s:s);return{signal:`${a||""}${n?" - ":a?" + ":""}${i.signal}`}}return i=i||0,o+(n?-i-s:+i+s)}}function ist({fieldDef:t,fieldDef2:r,channel:n,band:o,scaleName:i,markDef:s,spacing:a=0,axisTranslate:l,reverse:u,config:c}){let f=ll(n),d=Rp(n),p=Rp(f),h=x2(n,s);if(_n(t.bin)||t.timeUnit)return{[p]:ost({channel:n,fieldDef:t,scaleName:i,markDef:s,band:(1-o)/2,offset:d$(f,a,u,l,h),config:c}),[d]:ost({channel:n,fieldDef:t,scaleName:i,markDef:s,band:1-(1-o)/2,offset:d$(n,a,u,l,h),config:c})};if(Yi(t.bin)){let m=Py(t,i,{},{offset:d$(f,a,u,l,h)});if(Et(r))return{[p]:m,[d]:Py(r,i,{},{offset:d$(n,a,u,l,h)})};if(u2(t.bin)&&t.bin.step)return{[p]:m,[d]:{signal:`scale("${i}", ${vt(t,{expr:"datum"})} + ${t.bin.step})`,offset:d$(n,a,u,l,h)}}}st(it.channelRequiredForBinned(f))}function ost({channel:t,fieldDef:r,scaleName:n,markDef:o,band:i,offset:s,config:a}){let l=YO({scaleName:n,fieldOrDatumDef:r,band:i,offset:s});return u1e({fieldDef:r,channel:t,markDef:o,ref:l,config:a})}var Q1e=D(()=>{"use strict";or();$l();Ar();Dr();g2();cn();vi();bt();fo();Po();yF();FK();Z1e();c$();PK();f2()});function Zi(t,r){let{fill:n=void 0,stroke:o=void 0}=r.color==="include"?bF(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tpr(t.markDef,r)),sst(t,"fill",n)),sst(t,"stroke",o)),Xo("opacity",t)),Xo("fillOpacity",t)),Xo("strokeOpacity",t)),Xo("strokeWidth",t)),Xo("strokeDash",t)),gF(t)),b2(t,"href")),X1e(t))}function sst(t,r,n){let{config:o,mark:i,markDef:s}=t;if(ln("invalid",s,o)==="hide"&&n&&!hf(i)){let l=rpr(t,{invalid:!0,channels:l2});if(l)return{[r]:[{test:l,value:null},...Nn(n)]}}return n?{[r]:n}:{}}function tpr(t,r){return hot.reduce((n,o)=>(!epr.has(o)&&t[o]!==void 0&&r[o]!=="ignore"&&(n[o]=po(t[o])),n),{})}function rpr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&aa(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>YB(a,r)).join(` ${s} `)}}var epr,ast=D(()=>{"use strict";or();Ar();sa();vi();bt();fo();Po();K1e();OK();yF();mF();l$();f2();OK();cA();yF();c$();PK();Q1e();mF();l$();epr=new Set(["aria"])});function xF(t){let{config:r,markDef:n}=t;if(ln("invalid",n,r)){let i=npr(t,{channels:xs});if(i)return{defined:{signal:i}}}return{}}function npr(t,{invalid:r=!1,channels:n}){let o=n.reduce((s,a)=>{let l=t.getScaleComponent(a);if(l){let u=l.get("type"),c=t.vgField(a,{expr:"datum"});c&&aa(u)&&(s[c]=!0)}return s},{}),i=nt(o);if(i.length>0){let s=r?"||":"&&";return i.map(a=>YB(a,r)).join(` ${s} `)}}function jK(t,r){if(r!==void 0)return{[t]:po(r)}}var lst=D(()=>{"use strict";Ar();vi();bt();Po();f2()});var Cc=D(()=>{"use strict";ast();OK();cA();lst();yF();c$();PK();Q1e();mF();l$();K1e()});var J1e,opr,LK,ewe=D(()=>{"use strict";cn();sa();Cc();J1e="voronoi",opr={has:t=>t.type!=="interval"&&t.nearest,parse:(t,r)=>{if(r.events)for(let n of r.events)n.markname=t.getName(J1e)},marks:(t,r,n)=>{let{x:o,y:i}=r.project.hasChannel,s=t.mark;if(hf(s))return st(it.nearestNotSupportForContinuous(s)),n;let a={name:t.getName(J1e),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},gF(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:o||!i?"datum.datum.x || 0":"0"},y:{expr:i||!o?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},l=0,u=!1;return n.forEach((c,f)=>{var d;let p=(d=c.name)!==null&&d!==void 0?d:"";p===t.component.mark[0].name?l=f:p.indexOf(J1e)>=0&&(u=!0)}),u||n.splice(l+1,0,a),n}},LK=opr});var kr,is,eo=D(()=>{"use strict";bt();kr=class{constructor(r,n){this.debugName=n,this._children=[],this._parent=null,r&&(this.parent=r)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(r){this._parent=r,r&&r.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(r,n){if(this._children.indexOf(r)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,r):this._children.push(r)}removeChild(r){let n=this._children.indexOf(r);return this._children.splice(n,1),n}remove(){let r=this._parent.removeChild(this);for(let n of this._children)n._parent=this._parent,this._parent.addChild(n,r++)}insertAsParentOf(r){let n=r.parent;n.removeChild(this),this.parent=n,r.parent=this}swapWithParent(){let r=this._parent,n=r.parent;for(let o of this._children)o.parent=r;this._children=[],r.removeChild(this),r.parent.removeChild(r),this.parent=n,r.parent=this}},is=class extends kr{constructor(r,n,o,i){super(r,n),this.type=o,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){let r=new this.constructor;return r.debugName="clone_"+this.debugName,r._source=this._source,r._name="clone_"+this._name,r.type=this.type,r.refCounts=this.refCounts,r.refCounts[r._name]=0,r}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Bve()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(r){this._source=r}}});var Bp,p$=D(()=>{"use strict";_o();Ar();Dr();Fy();bt();ss();eo();Bp=class t extends kr{constructor(r,n){super(r),this.formula=n}clone(){return new t(null,ir(this.formula))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{let{field:l,timeUnit:u}=s,c=to(n)?n.encoding[ll(a)]:void 0,f=to(n)&&eF(a,s,c,n.stack,n.markDef,n.config);if(u){let d=vt(s,{forAs:!0});i[_r({as:d,field:l,timeUnit:u})]=Object.assign({as:d,field:l,timeUnit:u},f?{band:!0}:{})}return i},{});return yn(o)?null:new t(r,o)}static makeFromTransform(r,n){let o=Object.assign({},n),{timeUnit:i}=o,s=Pt(o,["timeUnit"]),a=os(i),l=Object.assign(Object.assign({},s),{timeUnit:a});return new t(r,{[_r(l)]:l})}merge(r){this.formula=Object.assign({},this.formula);for(let n in r.formula)(!this.formula[n]||r.formula[n].band)&&(this.formula[n]=r.formula[n]);for(let n of r.children)r.removeChild(n),n.parent=this;r.remove()}producedFields(){return new Set(Op(this.formula).map(r=>r.as))}dependentFields(){return new Set(Op(this.formula).map(r=>r.field))}hash(){return`TimeUnit ${_r(this.formula)}`}assemble(){let r=[];for(let n of Op(this.formula)){let{field:o,as:i,timeUnit:s}=n,a=os(s),{unit:l,utc:u}=a,c=Pt(a,["unit","utc"]);r.push(Object.assign(Object.assign(Object.assign(Object.assign({field:pf(o),type:"timeunit"},l?{units:VB(l)}:{}),u?{timezone:"utc"}:{}),c),{as:[i,`${i}_end`]}))}return r}}});var jv,twe,ipr,ust,vF=D(()=>{"use strict";_o();or();Ar();cn();vi();bt();p$();jv="_tuple_fields",twe=class{constructor(...r){this.items=r,this.hasChannel={},this.hasField={}}},ipr={has:()=>!0,parse:(t,r,n)=>{var o,i,s;let a=r.name,l=(o=r.project)!==null&&o!==void 0?o:r.project=new twe,u={},c={},f=new Set,d=(p,h)=>{let m=h==="visual"?p.channel:p.field,g=Tn(`${a}_${m}`);for(let y=1;f.has(g);y++)g=Tn(`${a}_${m}_${y}`);return f.add(g),{[h]:g}};if(!n.fields&&!n.encodings){let p=t.config.selection[n.type];if(n.init)for(let h of Nn(n.init))for(let m of nt(h))$nt(m)?(n.encodings||(n.encodings=[])).push(m):n.type==="interval"?(st('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=p.encodings):(n.fields||(n.fields=[])).push(m);else n.encodings=p.encodings,n.fields=p.fields}for(let p of(i=n.fields)!==null&&i!==void 0?i:[]){let h={type:"E",field:p};h.signals=Object.assign({},d(h,"data")),l.items.push(h),l.hasField[p]=h}for(let p of(s=n.encodings)!==null&&s!==void 0?s:[]){let h=t.fieldDef(p);if(h){let m=h.field;if(h.aggregate){st(it.cannotProjectAggregate(p,h.aggregate));continue}else if(!m){st(it.cannotProjectOnChannelWithoutField(p));continue}if(h.timeUnit){m=t.vgField(p);let g={timeUnit:h.timeUnit,as:m,field:h.field};c[_r(g)]=g}if(!u[m]){let g="E";if(r.type==="interval"){let b=t.getScaleComponent(p).get("type");aa(b)&&(g="R")}else h.bin&&(g="R-RE");let y={field:m,channel:p,type:g};y.signals=Object.assign(Object.assign({},d(y,"data")),d(y,"visual")),l.items.push(u[m]=y),l.hasField[m]=l.hasChannel[p]=u[m]}}else st(it.cannotProjectOnChannelWithoutField(p))}if(n.init){let p=h=>l.items.map(m=>h[m.channel]!==void 0?h[m.channel]:h[m.field]);if(n.type==="interval")r.init=p(n.init);else{let h=Nn(n.init);r.init=h.map(p)}}yn(c)||(l.timeUnit=new Bp(null,c))},signals:(t,r,n)=>{let o=r.name+jv;return n.filter(s=>s.name===o).length>0?n:n.concat({name:o,value:r.project.items.map(s=>{let{signals:a,hasLegend:l}=s,u=Pt(s,["signals","hasLegend"]);return u.field=pf(u.field),u})})}},ust=ipr});var spr,BK,rwe=D(()=>{"use strict";or();Tf();bt();pA();ewe();vF();aF();spr={has:t=>t.type==="single"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!n$(t.bind),parse:(t,r,n,o)=>{o.on||delete r.events,o.clear||delete r.clear},topLevelSignals:(t,r,n)=>{let o=r.name,i=r.project,s=r.bind,a=r.init&&r.init[0],l=LK.has(r)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,c)=>{var f,d;let p=Tn(`${o}_${u.field}`);n.filter(m=>m.name===p).length||n.unshift(Object.assign(Object.assign({name:p},a?{init:w2(a[c])}:{value:null}),{on:r.events?[{events:r.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${Jr(u.field)}] : null`}]:[],bind:(d=(f=s[u.field])!==null&&f!==void 0?f:s[u.channel])!==null&&d!==void 0?d:s}))}),n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.filter(c=>c.name===o+fl)[0],a=o+jv,l=i.items.map(c=>Tn(`${o}_${c.field}`)),u=l.map(c=>`${c} !== null`).join(" && ");return l.length&&(s.update=`${u} ? {fields: ${a}, values: [${l.join(", ")}]} : null`),delete s.value,delete s.on,n}},BK=spr});var wF,apr,$K,zK=D(()=>{"use strict";Tf();wF="_toggle",apr={has:t=>t.type==="multi"&&!!t.toggle,signals:(t,r,n)=>n.concat({name:r.name+wF,value:!1,on:[{events:r.events,update:r.toggle}]}),modifyExpr:(t,r)=>{let n=r.name+fl,o=r.name+wF;return`${o} ? null : ${n}, `+(r.resolve==="global"?`${o} ? null : true, `:`${o} ? null : {unit: ${Af(t)}}, `)+`${o} ? ${n} : null`}},$K=apr});var lpr,cst,fst=D(()=>{"use strict";n2();or();Tf();bt();rwe();zK();lpr={has:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,r,n)=>{n.clear&&(r.clear=dr(n.clear)?ff(n.clear,"scope"):n.clear)},topLevelSignals:(t,r,n)=>{if(BK.has(r))for(let o of r.project.items){let i=n.findIndex(s=>s.name===Tn(`${r.name}_${o.field}`));i!==-1&&n[i].on.push({events:r.clear,update:"null"})}return n},signals:(t,r,n)=>{function o(i,s){i!==-1&&n[i].on&&n[i].on.push({events:r.clear,update:s})}if(r.type==="interval")for(let i of r.project.items){let s=n.findIndex(a=>a.name===i.signals.visual);if(o(s,"[0, 0]"),s===-1){let a=n.findIndex(l=>l.name===i.signals.data);o(a,"null")}}else{let i=n.findIndex(s=>s.name===r.name+fl);o(i,"null"),$K.has(r)&&(i=n.findIndex(s=>s.name===r.name+wF),o(i,"false"))}return n}},cst=lpr});function h$(t,r){return`domain(${Jr(t.scaleName(r))})`}function nwe(t){var r;return t.parent&&zp(t.parent)&&((r=!t.parent.parent)!==null&&r!==void 0?r:nwe(t.parent.parent))}var upr,$p,m$=D(()=>{"use strict";or();Tf();Ar();cn();vi();ss();upr={has:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,r)=>{let n=r.scales=[];for(let o of r.project.items){let i=o.channel;if(!Cu(i))continue;let s=t.getScaleComponent(i),a=s?s.get("type"):void 0;if(!s||!aa(a)){st(it.SCALE_BINDINGS_CONTINUOUS);continue}let l={selection:r.name,field:o.field};s.set("selectionExtent",l,!0),n.push(o)}},topLevelSignals:(t,r,n)=>{let o=r.scales.filter(a=>n.filter(l=>l.name===a.signals.data).length===0);if(!t.parent||nwe(t)||o.length===0)return n;let i=n.filter(a=>a.name===r.name)[0],s=i.update;if(s.indexOf(UK)>=0)i.update=`{${o.map(a=>`${Jr(a.field)}: ${a.signals.data}`).join(", ")}}`;else{for(let a of o){let l=`${Jr(a.field)}: ${a.signals.data}`;s.indexOf(l)<0&&(s=`${s.substring(0,s.length-1)}, ${l}}`)}i.update=s}return n.concat(o.map(a=>({name:a.signals.data})))},signals:(t,r,n)=>{if(t.parent&&!nwe(t))for(let o of r.scales){let i=n.filter(s=>s.name===o.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}},$p=upr});function hst(t,r,n){var o;let i=(o=t.fieldDef(r))===null||o===void 0?void 0:o.field;qy(t,s=>{var a,l;let u=(a=s.project.hasField[i])!==null&&a!==void 0?a:s.project.hasChannel[r];if(u&&dst.has(s)){let c=(l=n.get("selections"))!==null&&l!==void 0?l:[];c.push(s.name),n.set("selections",c,!1),u.hasLegend=!0}})}var dst,pst,owe=D(()=>{"use strict";n2();or();Tf();cn();aF();bt();vF();zK();dst={has:t=>{let r=t.resolve==="global"&&t.bind&&n$(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==Fv;return r&&!n&&st(it.LEGEND_BINDINGS_PROJECT_LENGTH),r&&n},parse:(t,r,n,o)=>{var i;if(o.on||delete r.events,o.clear||delete r.clear,o.on||o.clear){let l='event.item && indexof(event.item.mark.role, "legend") < 0';for(let u of r.events)u.filter=Nn((i=u.filter)!==null&&i!==void 0?i:[]),u.filter.indexOf(l)<0&&u.filter.push(l)}let s=mK(r.bind)?r.bind.legend:"click",a=dr(s)?ff(s,"view"):Nn(s);r.bind={legend:{merge:a}}},topLevelSignals:(t,r,n)=>{let o=r.name,i=mK(r.bind)&&r.bind.legend,s=a=>l=>{let u=ir(l);return u.markname=a,u};for(let a of r.project.items){if(!a.hasLegend)continue;let l=`${Tn(a.field)}_legend`,u=`${o}_${l}`;if(n.filter(f=>f.name===u).length===0){let f=i.merge.map(s(`${l}_symbols`)).concat(i.merge.map(s(`${l}_labels`))).concat(i.merge.map(s(`${l}_entries`)));n.unshift(Object.assign(Object.assign({name:u},r.init?{}:{value:null}),{on:[{events:f,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]}))}}return n},signals:(t,r,n)=>{let o=r.name,i=r.project,s=n.find(p=>p.name===o+fl),a=o+jv,l=i.items.filter(p=>p.hasLegend).map(p=>Tn(`${o}_${Tn(p.field)}_legend`)),c=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${a}, values: [${l.join(", ")}]} : null`;r.events&&l.length>0?s.on.push({events:l.map(p=>({signal:p})),update:c}):l.length>0&&(s.update=c,delete s.value,delete s.on);let f=n.find(p=>p.name===o+wF),d=mK(r.bind)&&r.bind.legend;return f&&(r.events?f.on.push(Object.assign(Object.assign({},f.on[0]),{events:d})):f.on[0].events=d),n}},pst=dst});function mst(t,r,n,o,i){var s;let a=r.name,l=a+gst,u=a+yst,c=n.channel,f=$p.has(r),d=i.filter(w=>w.name===n.signals[f?"data":"visual"])[0],p=t.getSizeSignalRef(o).signal,h=t.getScaleComponent(c),m=h.get("type"),g=f&&c===Jn?"-":"",y=`${l}.extent_${c}`,b=`${g}${u}.${c} / `+(f?`${p}`:`span(${y})`),v=`${f?m==="log"?"panLog":m==="pow"?"panPow":"panLinear":"panLinear"}(${y}, ${b}`+(f&&m==="pow"?`, ${(s=h.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";d.on.push({events:{signal:u},update:f?v:`clampRange(${v}, 0, ${p})`})}var gst,yst,cpr,bst,xst=D(()=>{"use strict";n2();Ar();VK();m$();gst="_translate_anchor",yst="_translate_delta",cpr={has:t=>t.type==="interval"&&t.translate,signals:(t,r,n)=>{let o=r.name,i=$p.has(r),s=o+gst,{x:a,y:l}=r.project.hasChannel,u=ff(r.translate,"scope");return i||(u=u.map(c=>(c.between[0].markname=o+hA,c))),n.push({name:s,value:{},on:[{events:u.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?", extent_x: "+(i?h$(t,Jn):`slice(${a.signals.visual})`):"")+(l!==void 0?", extent_y: "+(i?h$(t,ui):`slice(${l.signals.visual})`):"")+"}"}]},{name:o+yst,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&mst(t,r,a,"width",n),l!==void 0&&mst(t,r,l,"height",n),n}},bst=cpr});function vst(t,r,n,o,i){var s;let a=r.name,l=n.channel,u=$p.has(r),c=i.filter(x=>x.name===n.signals[u?"data":"visual"])[0],f=t.getSizeSignalRef(o).signal,d=t.getScaleComponent(l),p=d.get("type"),h=u?h$(t,l):c.name,m=a+_st,g=`${a}${wst}.${l}`,b=`${u?p==="log"?"zoomLog":p==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${g}, ${m}`+(u&&p==="pow"?`, ${(s=d.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";c.on.push({events:{signal:m},update:u?b:`clampRange(${b}, 0, ${f})`})}var wst,_st,fpr,Sst,Cst=D(()=>{"use strict";n2();or();Ar();VK();m$();wst="_zoom_anchor",_st="_zoom_delta",fpr={has:t=>t.type==="interval"&&t.zoom,signals:(t,r,n)=>{let o=r.name,i=$p.has(r),s=o+_st,{x:a,y:l}=r.project.hasChannel,u=Jr(t.scaleName(Jn)),c=Jr(t.scaleName(ui)),f=ff(r.zoom,"scope");return i||(f=f.map(d=>(d.markname=o+hA,d))),n.push({name:o+wst,on:[{events:f,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(d=>!!d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&vst(t,r,a,"width",n),l!==void 0&&vst(t,r,l,"height",n),n}},Sst=fpr});function _F(t,r){for(let n of dpr)n.has(t)&&r(n)}var dpr,iwe=D(()=>{"use strict";fst();rwe();ewe();vF();m$();owe();zK();xst();Cst();dpr=[ust,$K,$p,pst,bst,Sst,BK,LK,cst]});function w2(t,r=!0,n=iX){if(Lt(t)){let o=t.map(i=>w2(i,r,n));return r?`[${o.join(", ")}]`:o}else if(Oy(t))return n(r?c2(t):iot(t));return r?n(JSON.stringify(t)):t}function Est(t,r){return qy(t,(n,o)=>{let i=n.name,s=o.modifyExpr(t,n);r.push(...o.signals(t,n)),_F(n,a=>{a.signals&&(r=a.signals(t,n,r)),a.modifyExpr&&(s=a.modifyExpr(t,n,s))}),r.push({name:i+Nst,on:[{events:{signal:n.name+fl},update:`modify(${Jr(n.name+jm)}, ${s})`}]})}),awe(r)}function Tst(t,r){if(t.component.selection&&nt(t.component.selection).length){let n=Jr(t.getName("cell"));r.unshift({name:"facet",value:{},on:[{events:ff("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return awe(r)}function Ast(t,r){let n=!1;return qy(t,(o,i)=>{let s=o.name,a=Jr(s+jm);if(r.filter(u=>u.name===s).length===0){let u=o.resolve==="global"?"union":o.resolve,c=o.type==="multi"?", true)":")";r.push({name:o.name,update:`${UK}(${a}, ${Jr(u)}${c}`})}n=!0,i.topLevelSignals&&(r=i.topLevelSignals(t,o,r)),_F(o,u=>{u.topLevelSignals&&(r=u.topLevelSignals(t,o,r))})}),n&&r.filter(i=>i.name==="unit").length===0&&r.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),awe(r)}function kst(t,r){let n=[...r];return qy(t,o=>{let i={name:o.name+jm};if(o.init){let a=o.project.items.map(u=>{let{signals:c}=u;return Pt(u,["signals"])}),l=o.init.map(u=>w2(u,!1));i.values=o.type==="interval"?[{unit:Af(t,{escape:!1}),fields:a,values:l}]:l.map(u=>({unit:Af(t,{escape:!1}),fields:a,values:u}))}n.filter(a=>a.name===o.name+jm).length||n.push(i)}),n}function swe(t,r){return qy(t,(n,o)=>{r=o.marks?o.marks(t,n,r):r,_F(n,i=>{i.marks&&(r=i.marks(t,n,r))})}),r}function Ist(t,r){for(let n of t.children)to(n)&&(r=swe(n,r));return r}function Dst(t,r){let n=r.selection,o=t.getSelectionComponent(n,Tn(n));return{signal:GK(o,r)}}function awe(t){return t.map(r=>(r.on&&!r.on.length&&delete r.on,r))}var pA=D(()=>{"use strict";_o();n2();or();Tf();WO();bt();ss();iwe();fA()});function hpr(t,r,n,o){let i=n.channel,s=n.signals.visual,a=n.signals.data,l=$p.has(r),u=Jr(t.scaleName(i)),c=t.getScaleComponent(i),f=c?c.get("type"):void 0,d=g=>`scale(${u}, ${g})`,p=t.getSizeSignalRef(i===Jn?"width":"height").signal,h=`${i}(unit)`,m=Fst(r,(g,y)=>[...g,{events:y.between[0],update:`[${h}, ${h}]`},{events:y,update:`[${s}[0], clamp(${h}, 0, ${p})]`}]);return m.push({events:{signal:r.name+lwe},update:aa(f)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),l?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},o?{init:w2(o,!0,d)}:{value:[]}),{on:m}),Object.assign(Object.assign({name:a},o?{init:w2(o)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]})]}function Fst(t,r){return t.events.reduce((n,o)=>o.between?r(n,o):(st(`${o} is not an ordered event stream for interval selections.`),n),[])}var hA,lwe,ppr,Ost,VK=D(()=>{"use strict";_o();or();Tf();Ar();cn();vi();bt();pA();vF();m$();hA="_brush",lwe="_scale_trigger",ppr={signals:(t,r)=>{let n=r.name,o=n+jv,i=$p.has(r),s=[],a=[],l=[];if(r.translate&&!i){let f=`!event.item || event.item.mark.name !== ${Jr(n+hA)}`;Fst(r,(d,p)=>{var h;let m=Nn((h=p.between[0].filter)!==null&&h!==void 0?h:p.between[0].filter=[]);return m.indexOf(f)<0&&m.push(f),d})}r.project.items.forEach((f,d)=>{let p=f.channel;if(p!==Jn&&p!==ui){st("Interval selections only support x and y encoding channels.");return}let h=r.init?r.init[d]:null,m=hpr(t,r,f,h),g=f.signals.data,y=f.signals.visual,b=Jr(t.scaleName(p)),x=t.getScaleComponent(p).get("type"),v=aa(x)?"+":"";s.push(...m),a.push(g),l.push({scaleName:t.scaleName(p),expr:`(!isArray(${g}) || (${v}invert(${b}, ${y})[0] === ${v}${g}[0] && ${v}invert(${b}, ${y})[1] === ${v}${g}[1]))`})}),i||s.push({name:n+lwe,value:{},on:[{events:l.map(f=>({scale:f.scaleName})),update:l.map(f=>f.expr).join(" && ")+` ? ${n+lwe} : {}`}]});let u=r.init,c=`unit: ${Af(t)}, fields: ${o}, values`;return s.concat(Object.assign(Object.assign({name:n+fl},u?{init:`{${c}: ${w2(u)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+` ? {${c}: [${a}]} : null`}]}))},modifyExpr:(t,r)=>r.name+fl+", "+(r.resolve==="global"?"true":`{unit: ${Af(t)}}`),marks:(t,r,n)=>{let o=r.name,{x:i,y:s}=r.project.hasChannel,a=i&&i.signals.visual,l=s&&s.signals.visual,u=`data(${Jr(r.name+jm)})`;if($p.has(r))return n;let c={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${l}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(r.resolve==="global")for(let y of nt(c))c[y]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${Af(t)}`},c[y]),{value:0}];let f=r.mark,{fill:d,fillOpacity:p,cursor:h}=f,m=Pt(f,["fill","fillOpacity","cursor"]),g=nt(m).reduce((y,b)=>(y[b]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${l}[0] !== ${l}[1]`].filter(x=>x).join(" && "),value:m[b]},{value:null}],y),{});return[{name:o+hA+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:p}},update:c}},...n,{name:o+hA,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),g)}}]}},Ost=ppr});function uwe(t,r){let n=r.name,o=n+jv,i=r.project,s="(item().isVoronoi ? datum.datum : datum)",a=i.items.map(c=>{let f=t.fieldDef(c.channel);return f&&f.bin?`[${s}[${Jr(t.vgField(c.channel,{}))}], ${s}[${Jr(t.vgField(c.channel,{binSuffix:"end"}))}]]`:`${s}[${Jr(c.field)}]`}).join(", "),l=`unit: ${Af(t)}, fields: ${o}, values`,u=r.events;return[{name:n+fl,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${l}: [${a}]} : null`,force:!0}]:[]}]}var mpr,Rst,cwe=D(()=>{"use strict";or();Tf();vF();mpr={signals:uwe,modifyExpr:(t,r)=>r.name+fl+", "+(r.resolve==="global"?"null":`{unit: ${Af(t)}}`)},Rst=mpr});var gpr,Mst,Pst=D(()=>{"use strict";Tf();cwe();gpr={signals:uwe,modifyExpr:(t,r)=>r.name+fl+", "+(r.resolve==="global"?"true":`{unit: ${Af(t)}}`)},Mst=gpr});function qy(t,r){let n=t.component.selection;if(n){for(let o of Op(n))if(r(o,ypr[o.type])===!0)break}}function bpr(t){let r=t.parent;for(;r&&!dl(r);)r=r.parent;return r}function Af(t,{escape:r}={escape:!0}){let n=r?Jr(t.name):t.name,o=bpr(t);if(o){let{facet:i}=o;for(let s of al)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Jr(o.vgField(s))}])`)}return n}function g$(t){let r=!1;return qy(t,n=>{r=r||n.project.items.some(o=>o.field===Fv)}),r}var jm,fl,Nst,UK,ypr,Tf=D(()=>{"use strict";or();Ar();aF();bt();ss();VK();cwe();Pst();jm="_store",fl="_tuple",Nst="_modify",UK="vlSelectionResolve",ypr={single:Mst,multi:Rst,interval:Ost}});function kf(t){this.type=t}function xpr(t){switch(t.type){case zst:return t.elements;case Ust:case Wst:return[t.left,t.right];case Vst:return[t.callee].concat(t.arguments);case Gst:return[t.test,t.consequent,t.alternate];case qst:return[t.object,t.property];case Hst:return t.properties;case Bst:return[t.key,t.value];case Yst:return[t.argument];case $st:case Lst:case jst:default:return[]}}var jst,Lst,Bst,$st,zst,Ust,Vst,Gst,Wst,qst,Hst,Yst,fwe=D(()=>{"use strict";jst="RawCode",Lst="Literal",Bst="Property",$st="Identifier",zst="ArrayExpression",Ust="BinaryExpression",Vst="CallExpression",Gst="ConditionalExpression",Wst="LogicalExpression",qst="MemberExpression",Hst="ObjectExpression",Yst="UnaryExpression";kf.prototype.visit=function(t){let r,n,o;if(t(this))return 1;for(r=xpr(this),n=0,o=r.length;n<o;++n)if(r[n].visit(t))return 1}});function XK(t,r){if(!t)throw new Error("ASSERT: "+r)}function Lv(t){return t>=48&&t<=57}function ywe(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function b$(t){return"01234567".indexOf(t)>=0}function Bpr(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function v$(t){return t===10||t===13||t===8232||t===8233}function S$(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&jpr.test(String.fromCharCode(t))}function qK(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Lpr.test(String.fromCharCode(t))}function oat(){for(var t;dt<Du&&(t=gr.charCodeAt(dt),Bpr(t)||v$(t));)++dt}function gwe(t){var r,n,o,i=0;for(n=t==="u"?4:2,r=0;r<n;++r)dt<Du&&ywe(gr[dt])?(o=gr[dt++],i=i*16+"0123456789abcdef".indexOf(o.toLowerCase())):So({},Ul,Iu);return String.fromCharCode(i)}function zpr(){var t,r,n,o;for(t=gr[dt],r=0,t==="}"&&So({},Ul,Iu);dt<Du&&(t=gr[dt++],!!ywe(t));)r=r*16+"0123456789abcdef".indexOf(t.toLowerCase());return(r>1114111||t!=="}")&&So({},Ul,Iu),r<=65535?String.fromCharCode(r):(n=(r-65536>>10)+55296,o=(r-65536&1023)+56320,String.fromCharCode(n,o))}function iat(){var t,r;for(t=gr.charCodeAt(dt++),r=String.fromCharCode(t),t===92&&(gr.charCodeAt(dt)!==117&&So({},Ul,Iu),++dt,t=gwe("u"),(!t||t==="\\"||!S$(t.charCodeAt(0)))&&So({},Ul,Iu),r=t);dt<Du&&(t=gr.charCodeAt(dt),!!qK(t));)++dt,r+=String.fromCharCode(t),t===92&&(r=r.substr(0,r.length-1),gr.charCodeAt(dt)!==117&&So({},Ul,Iu),++dt,t=gwe("u"),(!t||t==="\\"||!qK(t.charCodeAt(0)))&&So({},Ul,Iu),r+=t);return r}function Upr(){var t,r;for(t=dt++;dt<Du;){if(r=gr.charCodeAt(dt),r===92)return dt=t,iat();if(qK(r))++dt;else break}return gr.slice(t,dt)}function Vpr(){var t,r,n;return t=dt,r=gr.charCodeAt(dt)===92?iat():Upr(),r.length===1?n=mA:$pr.hasOwnProperty(r)?n=_2:r==="null"?n=YK:r==="true"||r==="false"?n=HK:n=mA,{type:n,value:r,start:t,end:dt}}function pwe(){var t=dt,r=gr.charCodeAt(dt),n,o=gr[dt],i,s,a;switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++dt,{type:If,value:String.fromCharCode(r),start:t,end:dt};default:if(n=gr.charCodeAt(dt+1),n===61)switch(r){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return dt+=2,{type:If,value:String.fromCharCode(r)+String.fromCharCode(n),start:t,end:dt};case 33:case 61:return dt+=2,gr.charCodeAt(dt)===61&&++dt,{type:If,value:gr.slice(t,dt),start:t,end:dt}}}if(a=gr.substr(dt,4),a===">>>=")return dt+=4,{type:If,value:a,start:t,end:dt};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return dt+=3,{type:If,value:s,start:t,end:dt};if(i=s.substr(0,2),o===i[1]&&"+-<>&|".indexOf(o)>=0||i==="=>")return dt+=2,{type:If,value:i,start:t,end:dt};if("<>=!+-*%&|^/".indexOf(o)>=0)return++dt,{type:If,value:o,start:t,end:dt};So({},Ul,Iu)}function Gpr(t){for(var r="";dt<Du&&ywe(gr[dt]);)r+=gr[dt++];return r.length===0&&So({},Ul,Iu),S$(gr.charCodeAt(dt))&&So({},Ul,Iu),{type:yA,value:parseInt("0x"+r,16),start:t,end:dt}}function Wpr(t){for(var r="0"+gr[dt++];dt<Du&&b$(gr[dt]);)r+=gr[dt++];return(S$(gr.charCodeAt(dt))||Lv(gr.charCodeAt(dt)))&&So({},Ul,Iu),{type:yA,value:parseInt(r,8),octal:!0,start:t,end:dt}}function Xst(){var t,r,n;if(n=gr[dt],XK(Lv(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),r=dt,t="",n!=="."){if(t=gr[dt++],n=gr[dt],t==="0"){if(n==="x"||n==="X")return++dt,Gpr(r);if(b$(n))return Wpr(r);n&&Lv(n.charCodeAt(0))&&So({},Ul,Iu)}for(;Lv(gr.charCodeAt(dt));)t+=gr[dt++];n=gr[dt]}if(n==="."){for(t+=gr[dt++];Lv(gr.charCodeAt(dt));)t+=gr[dt++];n=gr[dt]}if(n==="e"||n==="E")if(t+=gr[dt++],n=gr[dt],(n==="+"||n==="-")&&(t+=gr[dt++]),Lv(gr.charCodeAt(dt)))for(;Lv(gr.charCodeAt(dt));)t+=gr[dt++];else So({},Ul,Iu);return S$(gr.charCodeAt(dt))&&So({},Ul,Iu),{type:yA,value:parseFloat(t),start:r,end:dt}}function qpr(){var t="",r,n,o,i,s=!1;for(r=gr[dt],XK(r==="'"||r==='"',"String literal must starts with a quote"),n=dt,++dt;dt<Du;)if(o=gr[dt++],o===r){r="";break}else if(o==="\\")if(o=gr[dt++],!o||!v$(o.charCodeAt(0)))switch(o){case"u":case"x":gr[dt]==="{"?(++dt,t+=zpr()):t+=gwe(o);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:b$(o)?(i="01234567".indexOf(o),i!==0&&(s=!0),dt<Du&&b$(gr[dt])&&(s=!0,i=i*8+"01234567".indexOf(gr[dt++]),"0123".indexOf(o)>=0&&dt<Du&&b$(gr[dt])&&(i=i*8+"01234567".indexOf(gr[dt++]))),t+=String.fromCharCode(i)):t+=o;break}else o==="\r"&&gr[dt]===`
`&&++dt;else{if(v$(o.charCodeAt(0)))break;t+=o}return r!==""&&So({},Ul,Iu),{type:_$,value:t,octal:s,start:n,end:dt}}function Hpr(t,r){var n=t;r.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(o,i){if(parseInt(i,16)<=1114111)return"x";So({},mwe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{So({},mwe)}try{return new RegExp(t,r)}catch{return null}}function Ypr(){var t,r,n,o,i;for(t=gr[dt],XK(t==="/","Regular expression literal must start with a slash"),r=gr[dt++],n=!1,o=!1;dt<Du;)if(t=gr[dt++],r+=t,t==="\\")t=gr[dt++],v$(t.charCodeAt(0))&&So({},dwe),r+=t;else if(v$(t.charCodeAt(0)))So({},dwe);else if(n)t==="]"&&(n=!1);else if(t==="/"){o=!0;break}else t==="["&&(n=!0);return o||So({},dwe),i=r.substr(1,r.length-2),{value:i,literal:r}}function Xpr(){var t,r,n;for(r="",n="";dt<Du&&(t=gr[dt],!!qK(t.charCodeAt(0)));)++dt,t==="\\"&&dt<Du?So({},Ul,Iu):(n+=t,r+=t);return n.search(/[^gimuy]/g)>=0&&So({},mwe,n),{value:n,literal:r}}function Kpr(){var t,r,n,o;return jo=null,oat(),t=dt,r=Ypr(),n=Xpr(),o=Hpr(r.value,n.value),{literal:r.literal+n.literal,value:o,regex:{pattern:r.value,flags:n.value},start:t,end:dt}}function Zpr(t){return t.type===mA||t.type===_2||t.type===HK||t.type===YK}function sat(){var t;return oat(),dt>=Du?{type:w$,start:dt,end:dt}:(t=gr.charCodeAt(dt),S$(t)?Vpr():t===40||t===41||t===59?pwe():t===39||t===34?qpr():t===46?Lv(gr.charCodeAt(dt+1))?Xst():pwe():Lv(t)?Xst():pwe())}function Df(){var t;return t=jo,dt=t.end,jo=sat(),dt=t.end,t}function aat(){var t;t=dt,jo=sat(),dt=t}function Qpr(t){var r=new kf(wpr);return r.elements=t,r}function Kst(t,r,n){var o=new kf(t==="||"||t==="&&"?Tpr:_pr);return o.operator=t,o.left=r,o.right=n,o}function Jpr(t,r){var n=new kf(Spr);return n.callee=t,n.arguments=r,n}function ehr(t,r,n){var o=new kf(Cpr);return o.test=t,o.consequent=r,o.alternate=n,o}function bwe(t){var r=new kf(rat);return r.name=t,r}function y$(t){var r=new kf(Epr);return r.value=t.value,r.raw=gr.slice(t.start,t.end),t.regex&&(r.raw==="//"&&(r.raw="/(?:)/"),r.regex=t.regex),r}function Zst(t,r,n){var o=new kf(Apr);return o.computed=t==="[",o.object=r,o.property=n,o.computed||(n.member=!0),o}function thr(t){var r=new kf(kpr);return r.properties=t,r}function Qst(t,r,n){var o=new kf(Ipr);return o.key=r,o.value=n,o.kind=t,o}function rhr(t,r){var n=new kf(Dpr);return n.operator=t,n.argument=r,n.prefix=!0,n}function So(t,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,function(s,a){return XK(a<o.length,"Message reference must be in range"),o[a]});throw n=new Error(i),n.index=dt,n.description=i,n}function KK(t){t.type===w$&&So(t,Mpr),t.type===yA&&So(t,Npr),t.type===_$&&So(t,Opr),t.type===mA&&So(t,Fpr),t.type===_2&&So(t,Rpr),So(t,Ul,t.value)}function Nu(t){var r=Df();(r.type!==If||r.value!==t)&&KK(r)}function Ri(t){return jo.type===If&&jo.value===t}function hwe(t){return jo.type===_2&&jo.value===t}function nhr(){var t=[];for(dt=jo.start,Nu("[");!Ri("]");)Ri(",")?(Df(),t.push(null)):(t.push(gA()),Ri("]")||Nu(","));return Df(),Qpr(t)}function Jst(){var t;return dt=jo.start,t=Df(),t.type===_$||t.type===yA?(t.octal&&So(t,nat),y$(t)):bwe(t.value)}function ohr(){var t,r,n,o;if(dt=jo.start,t=jo,t.type===mA)return n=Jst(),Nu(":"),o=gA(),Qst("init",n,o);if(t.type===w$||t.type===If)KK(t);else return r=Jst(),Nu(":"),o=gA(),Qst("init",r,o)}function ihr(){var t=[],r,n,o,i={},s=String;for(dt=jo.start,Nu("{");!Ri("}");)r=ohr(),r.key.type===rat?n=r.key.name:n=s(r.key.value),o="$"+n,Object.prototype.hasOwnProperty.call(i,o)?So({},Ppr):i[o]=!0,t.push(r),Ri("}")||Nu(",");return Nu("}"),thr(t)}function shr(){var t;return Nu("("),t=xwe(),Nu(")"),t}function lhr(){var t,r,n;if(Ri("("))return shr();if(Ri("["))return nhr();if(Ri("{"))return ihr();if(t=jo.type,dt=jo.start,t===mA||ahr[jo.value])n=bwe(Df().value);else if(t===_$||t===yA)jo.octal&&So(jo,nat),n=y$(Df());else{if(t===_2)throw new Error(x$);t===HK?(r=Df(),r.value=r.value==="true",n=y$(r)):t===YK?(r=Df(),r.value=null,n=y$(r)):Ri("/")||Ri("/=")?(n=y$(Kpr()),aat()):KK(Df())}return n}function uhr(){var t=[];if(Nu("("),!Ri(")"))for(;dt<Du&&(t.push(gA()),!Ri(")"));)Nu(",");return Nu(")"),t}function chr(){var t;return dt=jo.start,t=Df(),Zpr(t)||KK(t),bwe(t.value)}function fhr(){return Nu("."),chr()}function dhr(){var t;return Nu("["),t=xwe(),Nu("]"),t}function phr(){var t,r,n;for(t=lhr();;)if(Ri("."))n=fhr(),t=Zst(".",t,n);else if(Ri("("))r=uhr(),t=Jpr(t,r);else if(Ri("["))n=dhr(),t=Zst("[",t,n);else break;return t}function eat(){var t=phr();if(jo.type===If&&(Ri("++")||Ri("--")))throw new Error(x$);return t}function WK(){var t,r;if(jo.type!==If&&jo.type!==_2)r=eat();else{if(Ri("++")||Ri("--"))throw new Error(x$);if(Ri("+")||Ri("-")||Ri("~")||Ri("!"))t=Df(),r=WK(),r=rhr(t.value,r);else{if(hwe("delete")||hwe("void")||hwe("typeof"))throw new Error(x$);r=eat()}}return r}function tat(t){var r=0;if(t.type!==If&&t.type!==_2)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":r=7;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function hhr(){var t,r,n,o,i,s,a,l,u,c;if(t=jo,u=WK(),o=jo,i=tat(o),i===0)return u;for(o.prec=i,Df(),r=[t,jo],a=WK(),s=[u,o,a];(i=tat(jo))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),l=s.pop().value,u=s.pop(),r.pop(),n=Kst(l,u,a),s.push(n);o=Df(),o.prec=i,s.push(o),r.push(jo),n=WK(),s.push(n)}for(c=s.length-1,n=s[c],r.pop();c>1;)r.pop(),n=Kst(s[c-1].value,s[c-2],n),c-=2;return n}function gA(){var t,r,n;return t=hhr(),Ri("?")&&(Df(),r=gA(),Nu(":"),n=gA(),t=ehr(t,r,n)),t}function xwe(){var t=gA();if(Ri(","))throw new Error(x$);return t}function vwe(t){gr=t,dt=0,Du=gr.length,jo=null,aat();var r=xwe();if(jo.type!==w$)throw new Error("Unexpect token after expression.");return r}var Hy,gr,dt,Du,jo,HK,w$,mA,_2,YK,yA,If,_$,vpr,wpr,_pr,Spr,Cpr,rat,Epr,Tpr,Apr,kpr,Ipr,Dpr,Ul,Npr,Opr,Fpr,Rpr,Mpr,mwe,dwe,nat,Ppr,Iu,x$,jpr,Lpr,$pr,ahr,lat=D(()=>{"use strict";fwe();HK=1,w$=2,mA=3,_2=4,YK=5,yA=6,If=7,_$=8,vpr=9;Hy={};Hy[HK]="Boolean";Hy[w$]="<end>";Hy[mA]="Identifier";Hy[_2]="Keyword";Hy[YK]="Null";Hy[yA]="Numeric";Hy[If]="Punctuator";Hy[_$]="String";Hy[vpr]="RegularExpression";wpr="ArrayExpression",_pr="BinaryExpression",Spr="CallExpression",Cpr="ConditionalExpression",rat="Identifier",Epr="Literal",Tpr="LogicalExpression",Apr="MemberExpression",kpr="ObjectExpression",Ipr="Property",Dpr="UnaryExpression",Ul="Unexpected token %0",Npr="Unexpected number",Opr="Unexpected string",Fpr="Unexpected identifier",Rpr="Unexpected reserved word",Mpr="Unexpected end of input",mwe="Invalid regular expression",dwe="Invalid regular expression: missing /",nat="Octal literals are not allowed in strict mode.",Ppr="Duplicate data property in object literal not allowed in strict mode",Iu="ILLEGAL",x$="Disabled.",jpr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Lpr=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");$pr={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};ahr={if:1}});var wwe=D(()=>{"use strict"});function SF(t,r,n){return t.fields=r||[],t.fname=n,t}function mhr(t){return t.length===1?ghr(t[0]):yhr(t)}function C$(t){throw Error(t)}function bhr(t){let r=[],n=t.length,o=null,i=0,s="",a,l,u;t=t+"";function c(){r.push(s+t.substring(a,l)),s="",a=l+1}for(a=l=0;l<n;++l)if(u=t[l],u==="\\")s+=t.substring(a,l++),a=l;else if(u===o)c(),o=null,i=-1;else{if(o)continue;a===i&&u==='"'||a===i&&u==="'"?(a=l+1,o=u):u==="."&&!i?l>a?c():a=l+1:u==="["?(l>a&&c(),i=a=l+1):u==="]"&&(i||C$("Access path missing open bracket: "+t),i>0&&c(),i=0,a=l+1)}return i&&C$("Access path missing closing bracket: "+t),o&&C$("Access path missing closing quote: "+t),l>a&&(l++,c()),r}function xhr(t,r,n){let o=bhr(t);return t=o.length===1?o[0]:t,SF((n&&n.get||mhr)(o),[t],r||t)}var ghr,yhr,Zao,Qao,Jao,elo,tlo,rlo,nlo,_we=D(()=>{"use strict";ghr=t=>function(r){return r[t]},yhr=t=>{let r=t.length;return function(n){for(let o=0;o<r;++o)n=n[t[o]];return n}};Zao=xhr("id"),Qao=SF(t=>t,[],"identity"),Jao=SF(()=>0,[],"zero"),elo=SF(()=>1,[],"one"),tlo=SF(()=>!0,[],"true"),rlo=SF(()=>!1,[],"false"),nlo=Array.isArray});var Swe=D(()=>{"use strict";_we()});var uat=D(()=>{"use strict";wwe();Swe();_we()});var cat=D(()=>{"use strict";fwe();lat();uat();Swe();wwe()});function Cwe(t){let r=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(r.push(...Cwe(t.object)),r.push(...Cwe(t.property))),r)}function fat(t){return t.object.type==="MemberExpression"?fat(t.object):t.object.name==="datum"}function ZK(t){let r=vwe(t),n=new Set;return r.visit(o=>{o.type==="MemberExpression"&&fat(o)&&n.add(Cwe(o).slice(1).join("."))}),n}var Ewe=D(()=>{"use strict";cat()});var Yy,E$=D(()=>{"use strict";bt();NK();eo();Ewe();Yy=class t extends kr{constructor(r,n,o){super(r),this.model=n,this.filter=o,this.expr=dA(this.model,this.filter,this),this._dependentFields=ZK(this.expr)}clone(){return new t(null,this.model,ir(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}});function dat(t,r){var n;let o={},i=t.config.selection;for(let s of nt(r??{})){let a=ir(r[s]),l=i[a.type],{fields:u,encodings:c}=l,f=Pt(l,["fields","encodings"]);for(let h in f)h==="encodings"&&a.fields||h==="fields"&&a.encodings||(h==="mark"&&(a[h]=Object.assign(Object.assign({},f[h]),a[h])),(a[h]===void 0||a[h]===!0)&&(a[h]=(n=f[h])!==null&&n!==void 0?n:a[h]));let d=Tn(s),p=o[d]=Object.assign(Object.assign({},a),{name:d,events:dr(a.on)?ff(a.on,"scope"):ir(a.on)});_F(p,h=>{h.has(p)&&h.parse&&h.parse(t,p,a,r[s])})}return o}function DK(t,r,n,o="datum"){let i=[];function s(l){let u=Tn(l),c=t.getSelectionComponent(u,l),f=Jr(u+jm);if(c.project.timeUnit){let d=n??t.component.data.raw,p=c.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p}return c.empty!=="none"&&i.push(f),`vlSelectionTest(${f}, ${o}`+(c.resolve==="global"?")":`, ${Jr(c.resolve)})`)}let a=XT(r,s);return(i.length?"!("+i.map(l=>`length(data(${l}))`).join(" || ")+") || ":"")+`(${a})`}function GK(t,r){let n=r.encoding,o=r.field;if(!n&&!o)o=t.project.items[0].field,t.project.items.length>1&&st(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Jr(o)}.`);else if(n&&!o){let i=t.project.items.filter(s=>s.channel===n);!i.length||i.length>1?(o=t.project.items[0].field,st((i.length?"Multiple ":"No ")+`matching ${Jr(n)} encoding found for selection ${Jr(r.selection)}. Using "field": ${Jr(o)}.`)):o=i[0].field}return`${t.name}[${Jr(o)}]`}function pat(t,r){qy(t,n=>{let o=n.name,i=t.getName(`lookup_${o}`);t.component.data.outputNodes[i]=n.materialized=new is(new Yy(r,t,{selection:o}),i,"lookup",t.component.data.outputNodeRefCounts)})}var fA=D(()=>{"use strict";_o();n2();or();Tf();cn();bt();eo();E$();iwe()});function dA(t,r,n){return XT(r,o=>dr(o)?o:got(o)?DK(t,o.selection,n):zX(o))}var NK=D(()=>{"use strict";or();oA();bt();fA()});function _hr(t,r){if(t)return Lt(t)&&!Pm(t)?t.map(n=>g1e(n,r)).join(", "):t}function Twe(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function CF(t,r,n,o={header:!1}){var i,s;let a=t.combine(),{disable:l,orient:u,scale:c,labelExpr:f,title:d,zindex:p}=a,h=Pt(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!l){for(let m in h){let g=mnt[m],y=h[m];if(g&&g!==r&&g!=="both")delete h[m];else if(OO(y)){let{condition:b}=y,x=Pt(y,["condition"]),v=Nn(b),w=$ve[m];if(w){let{vgProp:_,part:C}=w,S=[...v.map(E=>{let{test:A}=E,N=Pt(E,["test"]);return Object.assign({test:dA(null,A)},N)}),x];Twe(h,C,_,S),delete h[m]}else if(w===null){let _={signal:v.map(C=>{let{test:S}=C,E=Pt(C,["test"]);return`${dA(null,S)} ? ${b1e(E)} : `}).join("")+b1e(x)};h[m]=_}}else if(tr(y)){let b=$ve[m];if(b){let{vgProp:x,part:v}=b;Twe(h,v,x,y),delete h[m]}}}if(r==="grid"){if(!h.grid)return;if(h.encode){let{grid:m}=h.encode;h.encode=Object.assign({},m?{grid:m}:{}),yn(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:c,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:On(p,0)})}else{if(!o.header&&t.mainExtracted)return;if(f!==void 0){let g=f;!((s=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&tr(h.encode.labels.update.text)&&(g=Iy(f,"datum.label",h.encode.labels.update.text.signal)),Twe(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(let g of CX)t.hasAxisPart(g)||delete h.encode[g];yn(h.encode)&&delete h.encode}let m=_hr(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:u,grid:!1},m?{title:m}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:On(p,0)})}}}function QK(t){let{axes:r}=t.component,n=[];for(let o of xs)if(r[o]){for(let i of r[o])if(!i.get("disable")&&!i.get("gridScale")){let s=o==="x"?"height":"width",a=t.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function hat(t,r){let{x:n=[],y:o=[]}=t;return[...n.map(i=>CF(i,"grid",r)),...o.map(i=>CF(i,"grid",r)),...n.map(i=>CF(i,"main",r)),...o.map(i=>CF(i,"main",r))].filter(i=>i)}var T$=D(()=>{"use strict";_o();or();LB();Ar();Dr();ZB();bt();fo();Po();NK()});var Awe,kwe,mat,gat,yat=D(()=>{"use strict";bt();Awe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},kwe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},mat=nt(Awe),gat=nt(kwe)});function bat(t,r,n,o){return Object.assign.apply(null,[{},...t.map(i=>{if(i==="axisOrient"){let s=n==="x"?"bottom":"left",a=r[n==="x"?"axisBottom":"axisLeft"]||{},l=r[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...nt(a),...nt(l)]),c={};for(let f of u.values())c[f]={signal:`${o.signal} === "${s}" ? ${h2(a[f])} : ${h2(l[f])}`};return c}return r[i]})])}function xat(t,r,n,o){let i=r==="band"?["axisDiscrete","axisBand"]:r==="point"?["axisDiscrete","axisPoint"]:Tot(r)?["axisQuantitative"]:r==="time"||r==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",a=tr(n)?"axisOrient":"axis"+KT(n),l=[...i,...i.map(c=>s+c.substr(4))],u=["axis",a,s];return{vlOnlyAxisConfig:bat(l,o,t,n),vgAxisConfig:bat(u,o,t,n),axisConfigStyle:Shr([...u,...l],o)}}function Shr(t,r){var n;let o=[{}];for(let i of t){let s=(n=r[i])===null||n===void 0?void 0:n.style;if(s){s=Nn(s);for(let a of s)o.push(r.style[a])}}return Object.assign.apply(null,o)}function A$(t,r,n,o={}){var i;let s=v1e(t,n,r.style);if(s!==void 0)return{configFrom:"style",configValue:s};for(let a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=o[a])===null||i===void 0?void 0:i[t])!==void 0)return{configFrom:a,configValue:o[a][t]};return{}}var Iwe=D(()=>{"use strict";or();vi();bt();fo();Po()});function Chr(t,r){return!Xi(t)&&Et(r)&&!_n(r?.bin)}function Ehr(t,r){let n=r==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function vat(t,r,n,o,i){let s=r?.labelAngle;if(s!==void 0)return tr(s)?s:ZT(s);{let{configValue:a}=A$("labelAngle",t.config,r?.style,i);return a!==void 0?ZT(a):n===Jn&&Gt([HB,qB],o.type)?270:void 0}}function Dwe(t){return`(((${t.signal} % 360) + 360) % 360)`}function Owe(t,r,n,o){if(t!==void 0)if(n==="x"){if(tr(t)){let i=Dwe(t),s=tr(r)?`(${r.signal} === "top")`:r==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(tr(r)){let i=t<=45||315<=t?"===":"!==";return{signal:`${r.signal} ${i} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(r==="top")?"bottom":"top"}else{if(tr(t)){let i=Dwe(t),s=tr(r)?`(${r.signal} === "left")`:r==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${o?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return o?"middle":null;if(tr(r)){let i=45<=t&&t<=135?"===":"!==";return{signal:`${r.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(r==="left")?"top":"bottom"}}function Fwe(t,r,n){if(t===void 0)return;let o=n==="x",i=o?0:90,s=o?"bottom":"left";if(tr(t)){let a=Dwe(t),l=tr(r)?`(${r.signal} === "${s}")`:r===s;return{signal:`(${i?"("+a+" + 90)":a} % 180 === 0) ? ${o?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${l} ? "left" : "right"`}}if((t+i)%180===0)return o?null:"center";if(tr(r)){let a=i<t&&t<180+i?"===":"!==";return{signal:`${`${r.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<t&&t<180+i)==(r===s)?"left":"right"}function Thr(t,r){if(r==="x"&&Gt(["quantitative","temporal"],t))return!0}function Ahr(t,r){if(t!=="nominal")return r==="log"?"greedy":!0}function wat(t){return t==="x"?"bottom":"left"}function khr({fieldOrDatumDef:t,scaleType:r,size:n,values:o}){var i;if(!o&&!Xi(r)&&r!=="log"){if(Et(t)){if(_n(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&Gt(["month","hours","day","quarter"],(i=os(t.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Rwe(t,r){let n=r==="x"?"x2":"y2",o=t.fieldDef(r),i=t.fieldDef(n),s=o?o.title:void 0,a=i?i.title:void 0;if(s&&a)return _1e(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function Ihr(t,r){let n=t.values;if(Lt(n))return tK(r,n);if(tr(n))return n}function Dhr(t,r){return t==="rect"&&h1e(r)?1:0}var Nwe,Mwe=D(()=>{"use strict";or();$l();Ar();Dr();vi();Fy();Od();bt();fo();Po();$y();Iwe();Nwe={scale:({model:t,channel:r})=>t.scaleName(r),format:({fieldOrDatumDef:t,config:r,axis:n})=>{let{format:o,formatType:i}=n;return WX(t,t.type,o,i,r,!0)},formatType:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return qX(o,r,n)},grid:({fieldOrDatumDef:t,axis:r,scaleType:n})=>{var o;return Et(t)&&Yi(t.bin)?!1:(o=r.grid)!==null&&o!==void 0?o:Chr(n,t)},gridScale:({model:t,channel:r})=>Ehr(t,r),labelAlign:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelAlign||Fwe(r,n,o),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:r,orient:n,channel:o})=>t.labelBaseline||Owe(r,n,o),labelFlush:({axis:t,fieldOrDatumDef:r,channel:n})=>{var o;return(o=t.labelFlush)!==null&&o!==void 0?o:Thr(r.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:r,scaleType:n})=>{var o;return(o=t.labelOverlap)!==null&&o!==void 0?o:Ahr(r.type,n)},orient:({orient:t})=>t,tickCount:({channel:t,model:r,axis:n,fieldOrDatumDef:o,scaleType:i})=>{var s;let a=t==="x"?"width":t==="y"?"height":void 0,l=a?r.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:khr({fieldOrDatumDef:o,scaleType:i,size:l,values:n.values})},title:({axis:t,model:r,channel:n})=>{if(t.title!==void 0)return t.title;let o=Rwe(r,n);if(o!==void 0)return o;let i=r.typedFieldDef(n),s=n==="x"?"x2":"y2",a=r.fieldDef(s);return w1e(i?[d1e(i)]:[],Et(a)?[d1e(a)]:[])},values:({axis:t,fieldOrDatumDef:r})=>Ihr(t,r),zindex:({axis:t,fieldOrDatumDef:r,mark:n})=>{var o;return(o=t.zindex)!==null&&o!==void 0?o:Dhr(n,r)}}});function Xy(t,r,n){return vt(t,Object.assign({prefix:r,suffix:"sort_index"},n??{}))}var bA,xA=D(()=>{"use strict";Dr();oA();Mm();bt();eo();Ewe();bA=class t extends kr{constructor(r,n){super(r),this.transform=n,this._dependentFields=ZK(this.transform.calculate)}clone(){return new t(null,ir(this.transform))}static parseAllForSortIndex(r,n){return n.forEachFieldDef((o,i)=>{if(QO(o)&&YX(o.sort)){let{field:s,timeUnit:a}=o,l=o.sort,u=l.map((c,f)=>`${zX({field:s,timeUnit:a,equal:c})} ? ${f} : `).join("")+l.length;r=new t(r,{calculate:u,as:Xy(o,i,{forAs:!0})})}}),r}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${_r(this.transform)}`}}});function EF(t,r){return Gt(["top","bottom"],r)?"column":Gt(["left","right"],r)||t==="row"?"row":"column"}function Bv(t,r,n,o){let i=o==="row"?n.headerRow:o==="column"?n.headerColumn:n.headerFacet;return On((r?.header||{})[t],i[t],n.header[t])}function k$(t,r,n,o){let i={};for(let s of t){let a=Bv(s,r,n,o);a!==void 0&&(i[s]=a)}return i}var JK=D(()=>{"use strict";bt()});var TF,AF,I$=D(()=>{"use strict";TF=["row","column"],AF=["header","footer"]});function _at(t,r){let n=t.component.layoutHeaders[r].title,o=t.config?t.config:void 0,i=t.component.layoutHeaders[r].facetFieldDef?t.component.layoutHeaders[r].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:l}=k$(["titleAnchor","titleAngle","titleOrient"],i,o,r),u=EF(r,l),c=ZT(a);return{name:`${r}-title`,type:"group",role:`${u}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},r==="row"?{orient:"left"}:{}),{style:"guide-title"}),Cat(c,u)),Sat(u,c,s)),Aat(o,i,r,mat,Awe))}}function Sat(t,r,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}let o=Fwe(r,t==="row"?"left":"top",t==="row"?"y":"x");return o?{align:o}:{}}function Cat(t,r){let n=Owe(t,r==="row"?"left":"top",r==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Eat(t,r){let n=t.component.layoutHeaders[r],o=[];for(let i of AF)if(n[i])for(let s of n[i]){let a=Ohr(t,r,i,n,s);a!=null&&o.push(a)}return o}function Nhr(t,r){var n;let{sort:o}=t;return cl(o)?{field:vt(o,{expr:"datum"}),order:(n=o.order)!==null&&n!==void 0?n:"ascending"}:Lt(o)?{field:Xy(t,r,{expr:"datum"}),order:"ascending"}:{field:vt(t,{expr:"datum"}),order:o??"ascending"}}function eZ(t,r,n){let{format:o,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:l,labelExpr:u}=k$(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,r),c=KO({fieldOrDatumDef:t,format:o,formatType:i,expr:"parent",config:n}).signal,f=EF(r,l);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?Iy(Iy(u,"datum.label",c),"datum.value",vt(t,{expr:"parent"})):c}},r==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Cat(s,f)),Sat(f,s,a)),Aat(n,t,r,gat,kwe))}function Ohr(t,r,n,o,i){if(i){let s=null,{facetFieldDef:a}=o,l=t.config?t.config:void 0;if(a&&i.labels){let{labelOrient:d}=k$(["labelOrient"],a,l,r);(r==="row"&&!Gt(["top","bottom"],d)||r==="column"&&!Gt(["left","right"],d))&&(s=eZ(a,r,l))}let u=dl(t)&&!zy(t.facet),c=i.axes,f=c?.length>0;if(s||f){let d=r==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${r}_${n}`),type:"group",role:`${r}-${n}`},o.facetFieldDef?{from:{data:t.getName(r+"_domain")},sort:Nhr(a,r)}:{}),f&&u?{from:{data:t.getName(`facet_domain_${r}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{}),f?{axes:c}:{})}}return null}function Rhr(t,r){return Fhr[r][t]}function Tat(t,r){let n={};for(let o of al){let i=t[o];if(i?.facetFieldDef){let{titleAnchor:s,titleOrient:a}=k$(["titleAnchor","titleOrient"],i.facetFieldDef,r,o),l=EF(o,a),u=Rhr(s,l);u!==void 0&&(n[l]=u)}}return yn(n)?void 0:n}function Aat(t,r,n,o,i){let s={};for(let a of o){if(!i[a])continue;let l=Bv(a,r,t,n);l!==void 0&&(s[i[a]]=l)}return s}var Fhr,Pwe=D(()=>{"use strict";or();Ar();Dr();yat();Mm();Ov();bt();Mwe();xA();$y();ss();JK();I$();Fhr={column:{start:0,end:1},row:{start:1,end:0}}});function kF(t){return[...tZ(t,"width"),...tZ(t,"height"),...tZ(t,"childWidth"),...tZ(t,"childHeight")]}function tZ(t,r){let n=r==="width"?"x":"y",o=t.component.layoutSize.get(r);if(!o||o==="merged")return[];let i=t.getSizeSignalRef(r).signal;if(o==="step"){let s=t.getScaleComponent(n);if(s){let a=s.get("type"),l=s.get("range");if(Xi(a)&&Eu(l)){let u=t.scaleName(n);return dl(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[kat(u,l)]:[kat(u,l),{name:i,update:jwe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(o=="container"){let s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",l=i$(t.config.view,s?"width":"height"),u=`isFinite(${a}) ? ${a} : ${l}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:o}]}function kat(t,r){return{name:t+"_step",value:r.step}}function jwe(t,r,n){let o=r.get("type"),i=r.get("padding"),s=On(r.get("paddingOuter"),i),a=r.get("paddingInner");return a=o==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${a}, ${s}) * ${t}_step`}var D$=D(()=>{"use strict";g2();vi();bt();fo();ss()});function rZ(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}var Lwe=D(()=>{"use strict"});function nZ(t,r){return nt(t).reduce((n,o)=>{let i=t[o];return Object.assign(Object.assign({},n),jp(r,i,o,s=>tr(s)?s:{value:s.value}))},{})}var Bwe=D(()=>{"use strict";bt();fo();Cc()});function Iat(t,r){if(zp(r)||dl(r))return"shared";if(DF(r))return ul(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function IF(t,r){let n=t.scale[r],o=ul(r)?"axis":"legend";return n==="independent"?(t[o][r]==="shared"&&st(it.independentScaleMeansIndependentGuide(r)),"independent"):t[o][r]||"shared"}var N$=D(()=>{"use strict";Ar();cn();ss()});var Mhr,$we,oZ,Dat=D(()=>{"use strict";r$();bt();Sc();Mhr=Object.assign(Object.assign({},O1e),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),$we=nt(Mhr),oZ=class extends Au{}});function Phr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i,legendType:s}){var a,l,u,c,f;if(s!=="symbol")return;let{markDef:d,encoding:p,config:h,mark:m}=n,g=d.filled&&m!=="trail",y=Object.assign(Object.assign({},qot({},n,vnt)),bF(n,{filled:g})),b=(a=Nat(p.opacity))!==null&&a!==void 0?a:d.opacity;if(y.fill){if(o==="fill"||g&&o===bs)delete y.fill;else if(y.fill.field)i.get("symbolFillColor")?delete y.fill:(y.fill=po((l=h.legend.symbolBaseFillColor)!==null&&l!==void 0?l:"black"),y.fillOpacity=po(b??1));else if(Lt(y.fill)){let x=(f=(c=iZ((u=p.fill)!==null&&u!==void 0?u:p.color))!==null&&c!==void 0?c:d.fill)!==null&&f!==void 0?f:g&&d.color;x&&(y.fill=po(x))}}if(y.stroke){if(o==="stroke"||!g&&o===bs)delete y.stroke;else if(y.stroke.field)delete y.stroke;else if(Lt(y.stroke)){let x=On(iZ(p.stroke||p.color),d.stroke,g?d.color:void 0);x&&(y.stroke={value:x})}}if(o!==wc){let x=Et(r)&&Fat(n,i,r);x?y.opacity=[Object.assign({test:x},po(b??1)),po(h.legend.unselectedOpacity)]:b&&(y.opacity=po(b))}return y=Object.assign(Object.assign({},y),t),yn(y)?void 0:y}function jhr(t,{model:r,legendType:n}){if(n!=="gradient")return;let o={},i=Nat(r.encoding.opacity)||r.markDef.opacity;return i&&(o.opacity=po(i)),o=Object.assign(Object.assign({},o),t),yn(o)?void 0:o}function Lhr(t,{fieldOrDatumDef:r,model:n,channel:o,legendCmpt:i}){let s=n.legend(o)||{},a=n.config,l=Et(r)?Fat(n,i,r):void 0,u=l?[{test:l,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:f}=s,d=By(f)?XB({fieldOrDatumDef:r,field:"datum.value",format:c,formatType:f,config:a}):void 0,p=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),d?{text:d}:{}),t);return yn(p)?void 0:p}function Bhr(t,{legendCmpt:r}){let n=r.get("selections");return n?.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function Nat(t){return Oat(t,(r,n)=>Math.max(r,n.value))}function iZ(t){return Oat(t,(r,n)=>On(r,n.value))}function Oat(t,r){if(Bot(t))return Nn(t.condition).reduce(r,t.value);if(Tu(t))return t.value}function Fat(t,r,n){let o=r.get("selections");if(!o?.length)return;let i=Jr(n.field);return o.map(s=>`(!length(data(${Jr(Tn(s)+jm)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}var zwe,Uwe=D(()=>{"use strict";or();Ar();Dr();sa();bt();Po();$y();Cc();Tf();zwe={symbols:Phr,gradient:jhr,labels:Lhr,entries:Bhr}});function $hr(t,r){let n=t.values;if(Lt(n))return tK(r,n);if(tr(n))return n}function zhr(t,r,n,o){var i;if(r!=="shape"){let s=(i=iZ(n))!==null&&i!==void 0?i:o;if(s)return s}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Mat(t){let{legend:r}=t;return On(r.type,Uhr(t))}function Uhr({channel:t,timeUnit:r,scaleType:n}){if(Iv(t)){if(Gt(["quarter","month","day"],r))return"symbol";if(vf(n))return"gradient"}return"symbol"}function Pat({legendConfig:t,legendType:r,orient:n,legend:o}){var i,s;return(s=(i=o.direction)!==null&&i!==void 0?i:t[r?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:Vhr(n,r)}function Vhr(t,r){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return r==="gradient"?"horizontal":void 0}}function Ghr({legendConfig:t,model:r,direction:n,orient:o,scaleType:i}){let{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:l,gradientVerticalMinLength:u}=t;if(vf(i))return n==="horizontal"?o==="top"||o==="bottom"?Rat(r,"width",a,s):a:Rat(r,"height",u,l)}function Rat(t,r,n,o){return{signal:`clamp(${t.getSizeSignalRef(r).signal}, ${n}, ${o})`}}function Whr(t){if(Gt(["quantile","threshold","log"],t))return"greedy"}var Vwe,jat=D(()=>{"use strict";or();Ar();Dr();vi();bt();fo();$y();Uwe();Vwe={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:r,config:n})=>{let{format:o,formatType:i}=r;return WX(t,t.type,o,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:r,scaleType:n})=>{let{formatType:o}=t;return qX(o,r,n)},gradientLength:t=>{var r,n;let{legend:o,legendConfig:i}=t;return(n=(r=o.gradientLength)!==null&&r!==void 0?r:i.gradientLength)!==null&&n!==void 0?n:Ghr(t)},labelOverlap:({legend:t,legendConfig:r,scaleType:n})=>{var o,i;return(i=(o=t.labelOverlap)!==null&&o!==void 0?o:r.labelOverlap)!==null&&i!==void 0?i:Whr(n)},symbolType:({legend:t,markDef:r,channel:n,encoding:o})=>{var i;return(i=t.symbolType)!==null&&i!==void 0?i:zhr(r.type,n,o.shape,r.shape)},title:({fieldOrDatumDef:t,config:r})=>Pp(t,r,{allowDisabling:!0}),type:({legendType:t,scaleType:r,channel:n})=>{if(Iv(n)&&vf(r)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:r})=>$hr(r,t)}});function Gwe(t){let r=to(t)?qhr(t):Khr(t);return t.component.legends=r,r}function qhr(t){let{encoding:r}=t,n={};for(let o of[bs,...hK]){let i=Io(r[o]);!i||!t.getScaleComponent(o)||o===ns&&Et(i)&&i.type===Rm||(n[o]=Xhr(t,o))}return n}function Hhr(t,r){let n=t.scaleName(r);if(t.mark==="trail"){if(r==="color")return{stroke:n};if(r==="size")return{strokeWidth:n}}return r==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[r]:n}}function Yhr(t,r,n,o){switch(r){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(r==="title"&&t===o?.title)return!0}return t===(n||{})[r]}function Xhr(t,r){var n,o,i;let s=t.legend(r),{markDef:a,encoding:l,config:u}=t,c=u.legend,f=new oZ({},Hhr(t,r));hst(t,r,f);let d=s!==void 0?!s:c.disable;if(f.set("disable",d,s!==void 0),d)return f;s=s||{};let p=t.getScaleComponent(r).get("type"),h=Io(l[r]),m=Et(h)?(n=os(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=s.orient||u.legend.orient||"right",y=Mat({legend:s,channel:r,timeUnit:m,scaleType:p}),b=Pat({legend:s,legendType:y,orient:g,legendConfig:c}),x={legend:s,channel:r,model:t,markDef:a,encoding:l,fieldOrDatumDef:h,legendConfig:c,config:u,scaleType:p,orient:g,legendType:y,direction:b};for(let S of $we){let E=S in Vwe?Vwe[S](x):s[S];if(E!==void 0){let A=Yhr(E,S,s,t.fieldDef(r));(A||u.legend[S]===void 0)&&f.set(S,E,A)}}let v=(o=s?.encoding)!==null&&o!==void 0?o:{},w=f.get("selections"),_={},C={fieldOrDatumDef:h,model:t,channel:r,legendCmpt:f,legendType:y};for(let S of["labels","legend","title","symbols","gradient","entries"]){let E=nZ((i=v[S])!==null&&i!==void 0?i:{},t),A=S in zwe?zwe[S](E,C):E;A!==void 0&&!yn(A)&&(_[S]=Object.assign(Object.assign(Object.assign({},w?.length&&Et(h)?{name:`${Tn(h.field)}_legend_${S}`}:{}),w?.length?{interactive:!!w}:{}),{update:A}))}return yn(_)||f.set("encode",_,!!s?.encoding),f}function Khr(t){let{legends:r,resolve:n}=t.component;for(let o of t.children){Gwe(o);for(let i of nt(o.component.legends))n.legend[i]=IF(t.component.resolve,i),n.legend[i]==="shared"&&(r[i]=Wwe(r[i],o.component.legends[i]),r[i]||(n.legend[i]="independent",delete r[i]))}for(let o of nt(r))for(let i of t.children)i.component.legends[o]&&n.legend[o]==="shared"&&delete i.component.legends[o];return r}function Wwe(t,r){var n,o,i,s;if(!t)return r.clone();let a=t.getWithExplicit("orient"),l=r.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;let u=!1;for(let c of $we){let f=Cf(t.getWithExplicit(c),r.getWithExplicit(c),c,"legend",(d,p)=>{switch(c){case"symbolType":return Zhr(d,p);case"title":return oK(d,p);case"type":return u=!0,ku("symbol")}return fF(d,p,c,"legend")});t.setWithExplicit(c,f)}return u&&(!((o=(n=t.implicit)===null||n===void 0?void 0:n.encode)===null||o===void 0)&&o.gradient&&xX(t.implicit,["encode","gradient"]),!((s=(i=t.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&xX(t.explicit,["encode","gradient"])),t}function Zhr(t,r){return r.value==="circle"?r:t}var qwe=D(()=>{"use strict";Ar();Dr();r$();Fy();Od();bt();Po();Bwe();ss();N$();owe();Sc();Dat();Uwe();jat()});function Lat(t,r,n,o){var i,s,a;t.encode=(i=t.encode)!==null&&i!==void 0?i:{},t.encode[r]=(s=t.encode[r])!==null&&s!==void 0?s:{},t.encode[r].update=(a=t.encode[r].update)!==null&&a!==void 0?a:{},t.encode[r].update[n]=o}function sZ(t){let r=t.component.legends,n={};for(let i of nt(r)){let s=t.getScaleComponent(i),a=li(s.get("domains"));if(n[a])for(let l of n[a])Wwe(l,r[i])||n[a].push(r[i]);else n[a]=[r[i].clone()]}return Op(n).flat().map(i=>Qhr(i,t.config)).filter(i=>i!==void 0)}function Qhr(t,r){var n,o,i;let s=t.combine(),{disable:a,labelExpr:l,selections:u}=s,c=Pt(s,["disable","labelExpr","selections"]);if(!a){if(r.aria===!1&&c.aria==null&&(c.aria=!1),!((n=c.encode)===null||n===void 0)&&n.symbols){let f=c.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!c.stroke&&(f.stroke={value:"transparent"});for(let d of hK)c[d]&&delete f[d]}if(c.title||delete c.title,l!==void 0){let f=l;!((i=(o=c.encode)===null||o===void 0?void 0:o.labels)===null||i===void 0)&&i.update&&tr(c.encode.labels.update.text)&&(f=Iy(l,"datum.label",c.encode.labels.update.text.signal)),Lat(c,"labels","text",{signal:f})}for(let f in c){let d=c[f];if(tr(d)){let p=cit[f];if(p){let{vgProp:h,part:m}=p;Lat(c,m,h,d),delete c[f]}}}return c}}var Hwe=D(()=>{"use strict";_o();r$();bt();fo();qwe()});function Bat(t){return zp(t)||DF(t)?Jhr(t):$at(t)}function Jhr(t){return t.children.reduce((r,n)=>r.concat(n.assembleProjections()),$at(t))}function $at(t){let r=t.component.projection;if(!r||r.merged)return[];let n=r.combine(),{name:o}=n;if(r.data){let i={signal:`[${r.size.map(a=>a.signal).join(", ")}]`},s=r.data.reduce((a,l)=>{let u=tr(l)?l.signal:`data('${t.lookupDataSource(l)}')`;return Gt(a,u)||a.push(u),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:o,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:o},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var zat=D(()=>{"use strict";bt();fo();ss()});var Uat,Vat=D(()=>{"use strict";Uat=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"]});var O$,Gat=D(()=>{"use strict";Sc();O$=class extends Au{constructor(r,n,o,i){super(Object.assign({},n),{name:r}),this.specifiedProjection=n,this.size=o,this.data=i,this.merged=!1}get isFit(){return!!this.data}}});function Ywe(t){t.component.projection=to(t)?emr(t):nmr(t)}function emr(t){var r;if(t.hasProjection){let n=t.specifiedProjection,o=!(n&&(n.scale!=null||n.translate!=null)),i=o?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=o?tmr(t):void 0;return new O$(t.projectionName(!0),Object.assign(Object.assign({},(r=t.config.projection)!==null&&r!==void 0?r:{}),n??{}),i,s)}}function tmr(t){let r=[],{encoding:n}=t;for(let o of[[vc,xc],[Ll,wu]])(Io(n[o[0]])||Io(n[o[1]]))&&r.push({signal:t.getName(`geojson_${r.length}`)});return t.channelHasField(ns)&&t.typedFieldDef(ns).type===Rm&&r.push({signal:t.getName(`geojson_${r.length}`)}),r.length===0&&r.push(t.requestDataName(Ps)),r}function rmr(t,r){let n=Pve(Uat,i=>!!(!Cd(t.explicit,i)&&!Cd(r.explicit,i)||Cd(t.explicit,i)&&Cd(r.explicit,i)&&li(t.get(i))===li(r.get(i))));if(li(t.size)===li(r.size)){if(n)return t;if(li(t.explicit)===li({}))return r;if(li(r.explicit)===li({}))return t}return null}function nmr(t){if(t.children.length===0)return;let r;for(let o of t.children)Ywe(o);let n=Pve(t.children,o=>{let i=o.component.projection;if(i)if(r){let s=rmr(r,i);return s&&(r=s),!!s}else return r=i,!0;else return!0});if(r&&n){let o=t.projectionName(!0),i=new O$(o,r.specifiedProjection,r.size,ir(r.data));for(let s of t.children){let a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),o),a.merged=!0)}return i}}var Wat=D(()=>{"use strict";or();Ar();Dr();Wy();Vat();Od();bt();ss();Gat()});function omr(t,r,n,o){var i,s;if(jy(r,n)){let a=to(t)?(s=(i=t.axis(n))!==null&&i!==void 0?i:t.legend(n))!==null&&s!==void 0?s:{}:{},l=vt(r,{expr:"datum"}),u=vt(r,{expr:"datum",binSuffix:"end"});return{formulaAs:vt(r,{binSuffix:"range",forAs:!0}),formula:ZO(l,u,a.format,a.formatType,o)}}return{}}function Hat(t,r){return`${MX(t)}_${r}`}function imr(t,r){return{signal:t.getName(`${r}_bins`),extentSignal:t.getName(`${r}_extent`)}}function NF(t,r,n){var o;let i=(o=VO(n,void 0))!==null&&o!==void 0?o:{},s=Hat(i,r);return t.getName(`${s}_bins`)}function smr(t){return"as"in t}function qat(t,r,n){let o,i;smr(t)?o=dr(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:o=[vt(t,{forAs:!0}),vt(t,{binSuffix:"end",forAs:!0})];let s=Object.assign({},VO(r,void 0)),a=Hat(s,t.field),{signal:l,extentSignal:u}=imr(n,a);if(UO(s.extent)){let f=s.extent,d=f.selection;i=GK(n.getSelectionComponent(Tn(d),d),f),delete s.extent}let c=Object.assign(Object.assign(Object.assign({bin:s,field:t.field,as:[o]},l?{signal:l}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:a,binComponent:c}}var Lm,vA=D(()=>{"use strict";_o();or();$l();Dr();bt();$y();ss();fA();eo();Lm=class t extends kr{constructor(r,n){super(r),this.bins=n}clone(){return new t(null,ir(this.bins))}static makeFromEncoding(r,n){let o=n.reduceFieldDef((i,s,a)=>{if(la(s)&&_n(s.bin)){let{key:l,binComponent:u}=qat(s,s.bin,n);i[l]=Object.assign(Object.assign(Object.assign({},u),i[l]),omr(n,s,a,n.config))}return i},{});return yn(o)?null:new t(r,o)}static makeFromTransform(r,n,o){let{key:i,binComponent:s}=qat(n,n.bin,o);return new t(r,{[i]:s})}merge(r,n){for(let o of nt(r.bins))o in this.bins?(n(r.bins[o].signal,this.bins[o].signal),this.bins[o].as=Ed([...this.bins[o].as,...r.bins[o].as],_r)):this.bins[o]=r.bins[o];for(let o of r.children)r.removeChild(o),o.parent=this;r.remove()}producedFields(){return new Set(Op(this.bins).map(r=>r.as).flat(2))}dependentFields(){return new Set(Op(this.bins).map(r=>r.field))}hash(){return`Bin ${_r(this.bins)}`}assemble(){return Op(this.bins).flatMap(r=>{let n=[],[o,...i]=r.as,s=r.bin,{extent:a}=s,l=Pt(s,["extent"]),u=Object.assign(Object.assign(Object.assign({type:"bin",field:pf(r.field),as:o,signal:r.signal},UO(a)?{extent:null}:{extent:a}),r.span?{span:{signal:`span(${r.span})`}}:{}),l);!a&&r.extentSignal&&(n.push({type:"extent",field:pf(r.field),signal:r.extentSignal}),u.extent={signal:r.extentSignal}),n.push(u);for(let c of i)for(let f=0;f<2;f++)n.push({type:"formula",expr:vt({field:o[f]},{expr:"datum"}),as:c[f]});return r.formula&&n.push({type:"formula",expr:r.formula,as:r.formulaAs}),n})}}});var Fd,OF=D(()=>{"use strict";Wy();bt();eo();Fd=class extends kr{constructor(r){super(null),r=r??{name:"source"};let n;if(Gy(r)||(n=r.format?Object.assign({},df(r.format,["parse"])):{}),dF(r))this._data={values:r.values};else if(y2(r)){if(this._data={url:r.url},!n.type){let o=/(?:\.([^.]+))?$/.exec(r.url)[1];Gt(["json","csv","tsv","dsv","topojson"],o)||(o="json"),n.type=o}}else W1e(r)?this._data={values:[{type:"Sphere"}]}:(IK(r)||Gy(r))&&(this._data={});this._generator=Gy(r),r.name&&(this._name=r.name),n&&!yn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(r){this._name=r}set parent(r){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}});function aZ(t){for(let r of t){for(let n of r.children)if(n.parent!==r)return console.error("Dataflow graph is inconsistent.",r,n),!1;if(!aZ(r.children))return!1}return!0}var Yat=D(()=>{"use strict";bt();eo();OF()});var S2,lZ=D(()=>{"use strict";bt();eo();S2=class t extends kr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${_r(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}});var C2,uZ=D(()=>{"use strict";bt();eo();C2=class t extends kr{constructor(r,n){super(r),this.params=n}clone(){return new t(null,this.params)}dependentFields(){return new Set}producedFields(){var r;return new Set([(r=this.params.as)!==null&&r!==void 0?r:"data"])}hash(){return`Hash ${_r(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}});function F$(t){return t instanceof Fd||t instanceof S2||t instanceof C2}var cZ,Rd,FF,Xwe=D(()=>{"use strict";OF();lZ();uZ();cZ=class{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}},Rd=class extends cZ{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:r,mutatedFlag:n}){r&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(r){if(F$(r))return!1;let n=r.parent,{continueFlag:o}=this.run(r);return o&&this.optimizeNextFromLeaves(n),this.mutatedFlag}},FF=class extends cZ{}});function amr(t,r,n,o){let i=to(o)?o.encoding[ll(r)]:void 0;if(la(n)&&to(o)&&eF(r,n,i,o.stack,o.markDef,o.config))t.add(vt(n,{})),t.add(vt(n,{suffix:"end"})),n.bin&&jy(n,r)&&t.add(vt(n,{binSuffix:"range"}));else if(Pnt(r)){let s=Mnt(r);t.add(o.getName(s))}else t.add(vt(n));return t}function lmr(t,r){var n;for(let o of nt(r)){let i=r[o];for(let s of nt(i))o in t?t[o][s]=new Set([...(n=t[o][s])!==null&&n!==void 0?n:[],...i[s]]):t[o]={[s]:i[s]}}}var Up,fZ=D(()=>{"use strict";Av();Ar();Dr();cn();bt();ss();eo();Up=class t extends kr{constructor(r,n,o){super(r),this.dimensions=n,this.measures=o}clone(){return new t(null,new Set(this.dimensions),ir(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(r,n){let o=!1;n.forEachFieldDef(a=>{a.aggregate&&(o=!0)});let i={},s=new Set;return!o||(n.forEachFieldDef((a,l)=>{var u,c,f,d;let{aggregate:p,field:h}=a;if(p)if(p==="count")i["*"]=(u=i["*"])!==null&&u!==void 0?u:{},i["*"].count=new Set([vt(a,{forAs:!0})]);else{if(Fp(p)||Dm(p)){let m=Fp(p)?"argmin":"argmax",g=p[m];i[g]=(c=i[g])!==null&&c!==void 0?c:{},i[g][m]=new Set([vt({op:m,field:g},{forAs:!0})])}else i[h]=(f=i[h])!==null&&f!==void 0?f:{},i[h][p]=new Set([vt(a,{forAs:!0})]);Cu(l)&&n.scaleDomain(l)==="unaggregated"&&(i[h]=(d=i[h])!==null&&d!==void 0?d:{},i[h].min=new Set([vt({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([vt({field:h,aggregate:"max"},{forAs:!0})]))}else amr(s,l,a,n)}),s.size+nt(i).length===0)?null:new t(r,s,i)}static makeFromTransform(r,n){var o,i,s;let a=new Set,l={};for(let u of n.aggregate){let{op:c,field:f,as:d}=u;c&&(c==="count"?(l["*"]=(o=l["*"])!==null&&o!==void 0?o:{},l["*"].count=new Set([d||vt(u,{forAs:!0})])):(l[f]=(i=l[f])!==null&&i!==void 0?i:{},l[f][c]=new Set([d||vt(u,{forAs:!0})])))}for(let u of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(u);return a.size+nt(l).length===0?null:new t(r,a,l)}merge(r){return dnt(this.dimensions,r.dimensions)?(lmr(this.measures,r.measures),!0):(tot("different dimensions, cannot merge"),!1)}addDimensions(r){r.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...nt(this.measures)])}producedFields(){let r=new Set;for(let n of nt(this.measures))for(let o of nt(this.measures[n])){let i=this.measures[n][o];i.size===0?r.add(`${o}_${n}`):i.forEach(r.add,r)}return r}hash(){return`Aggregate ${_r({dimensions:this.dimensions,measures:this.measures})}`}assemble(){let r=[],n=[],o=[];for(let s of nt(this.measures))for(let a of nt(this.measures[s]))for(let l of this.measures[s][a])o.push(l),r.push(a),n.push(s==="*"?null:pf(s));return{type:"aggregate",groupby:[...this.dimensions].map(pf),ops:r,fields:n,as:o}}}});var Bm,dZ=D(()=>{"use strict";or();$l();Ar();Dr();cn();vi();Mm();bt();fo();I$();MF();xA();eo();Bm=class extends kr{constructor(r,n,o,i){super(r),this.model=n,this.name=o,this.data=i;for(let s of al){let a=n.facet[s];if(a){let{bin:l,sort:u}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[vt(a),..._n(l)?[vt(a,{binSuffix:"end"})]:[]]},cl(u)?{sortField:u}:Lt(u)?{sortIndexField:Xy(a,s)}:{})}}this.childModel=n.child}hash(){let r="Facet";for(let n of al)this[n]&&(r+=` ${n.charAt(0)}:${_r(this[n])}`);return r}get fields(){var r;let n=[];for(let o of al)!((r=this[o])===null||r===void 0)&&r.fields&&n.push(...this[o].fields);return n}dependentFields(){let r=new Set(this.fields);for(let n of al)this[n]&&(this[n].sortField&&r.add(this[n].sortField.field),this[n].sortIndexField&&r.add(this[n].sortIndexField));return r}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){let r={};for(let n of xs){let o=this.childModel.component.scales[n];if(o&&!o.merged){let i=o.get("type"),s=o.get("range");if(Xi(i)&&Eu(s)){let a=E2(this.childModel,n),l=RF(a);l?r[n]=l:st(`Unknown field for ${n}. Cannot calculate view size.`)}}}return r}assembleRowColumnHeaderData(r,n,o){let i={row:"y",column:"x"}[r],s=[],a=[],l=[];o&&o[i]&&(n?(s.push(`distinct_${o[i]}`),a.push("max")):(s.push(o[i]),a.push("distinct")),l.push(`distinct_${o[i]}`));let{sortField:u,sortIndexField:c}=this[r];if(u){let{op:f=p2,field:d}=u;s.push(d),a.push(f),l.push(vt(u,{forAs:!0}))}else c&&(s.push(c),a.push("max"),l.push(c));return{name:this[r].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[r].fields},s.length?{fields:s,ops:a,as:l}:{})]}}assembleFacetHeaderData(r){var n,o;let{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],l={};for(let f of TF){for(let d of AF){let p=(n=s[f]&&s[f][d])!==null&&n!==void 0?n:[];for(let h of p)if(((o=h.axes)===null||o===void 0?void 0:o.length)>0){l[f]=!0;break}}if(l[f]){let d=`length(data("${this.facet.name}"))`,p=f==="row"?i?{signal:`ceil(${d} / ${i})`}:1:i?{signal:`min(${d}, ${i})`}:{signal:d};a.push({name:`${this.facet.name}_${f}`,transform:[{type:"sequence",start:0,stop:p}]})}}let{row:u,column:c}=l;return(u||c)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,r)),a}assemble(){var r,n;let o=[],i=null,s=this.getChildIndependentFieldsWithStep(),{column:a,row:l,facet:u}=this;if(a&&l&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;let c=[].concat((r=s.x)!==null&&r!==void 0?r:[],(n=s.y)!==null&&n!==void 0?n:[]),f=c.map(()=>"distinct");o.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:c,ops:f}]})}for(let c of[gf,mf])this[c]&&o.push(this.assembleRowColumnHeaderData(c,i,s));if(u){let c=this.assembleFacetHeaderData(s);c&&o.push(...c)}return o}}});function Xat(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.slice(1,-1):t}function umr(t,r){let n=vX(t);if(r==="number")return`toNumber(${n})`;if(r==="boolean")return`toBoolean(${n})`;if(r==="string")return`toString(${n})`;if(r==="date")return`toDate(${n})`;if(r==="flatten")return n;if(r.indexOf("date:")===0){let o=Xat(r.slice(5,r.length));return`timeParse(${n},'${o}')`}else if(r.indexOf("utc:")===0){let o=Xat(r.slice(4,r.length));return`utcParse(${n},'${o}')`}else return st(it.unrecognizedParse(r)),null}function Kat(t){let r={};return RB(t.filter,n=>{var o;if(r1e(n)){let i=null;LX(n)?i=n.equal:BX(n)?i=n.range[0]:$X(n)&&(i=((o=n.oneOf)!==null&&o!==void 0?o:n.in)[0]),i&&(Oy(i)?r[n.field]="date":wo(i)?r[n.field]="number":dr(i)&&(r[n.field]="string")),n.timeUnit&&(r[n.field]="date")}}),r}function Zat(t){let r={};function n(o){JO(o)?r[o.field]="date":o.type==="quantitative"&&Nnt(o.aggregate)?r[o.field]="number":NO(o.field)>1?o.field in r||(r[o.field]="flatten"):QO(o)&&cl(o.sort)&&NO(o.sort.field)>1&&(o.sort.field in r||(r[o.sort.field]="flatten"))}if((to(t)||dl(t))&&t.forEachFieldDef((o,i)=>{if(la(o))n(o);else{let s=Nd(i),a=t.fieldDef(s);n(Object.assign(Object.assign({},o),{type:a.type}))}}),to(t)){let{mark:o,markDef:i,encoding:s}=t;if(hf(o)&&!t.encoding.order){let a=i.orient==="horizontal"?"y":"x",l=s[a];Et(l)&&l.type==="quantitative"&&!(l.field in r)&&(r[l.field]="number")}}return r}function Qat(t){let r={};if(to(t)&&t.component.selection)for(let n of nt(t.component.selection)){let o=t.component.selection[n];for(let i of o.project.items)!i.channel&&NO(i.field)>1&&(r[i.field]="flatten")}return r}var pl,pZ=D(()=>{"use strict";or();Av();Ar();Dr();Wy();WO();cn();yX();sa();oA();Mm();bt();ss();Sc();eo();pl=class t extends kr{constructor(r,n){super(r),this._parse=n}clone(){return new t(null,ir(this._parse))}hash(){return`Parse ${_r(this._parse)}`}static makeExplicit(r,n,o){let i={},s=n.data;return!Gy(s)&&s&&s.format&&s.format.parse&&(i=s.format.parse),this.makeWithAncestors(r,i,{},o)}static makeWithAncestors(r,n,o,i){for(let l of nt(o)){let u=i.getWithExplicit(l);u.value!==void 0&&(u.explicit||u.value===o[l]||u.value==="derived"||o[l]==="flatten"?delete o[l]:st(it.differentParse(l,o[l],u.value)))}for(let l of nt(n)){let u=i.get(l);u!==void 0&&(u===n[l]?delete n[l]:st(it.differentParse(l,n[l],u)))}let s=new Au(n,o);i.copyAll(s);let a={};for(let l of nt(s.combine())){let u=s.get(l);u!==null&&(a[l]=u)}return nt(a).length===0||i.parseNothing?null:new t(r,a)}get parse(){return this._parse}merge(r){this._parse=Object.assign(Object.assign({},this._parse),r.parse),r.remove()}assembleFormatParse(){let r={};for(let n of nt(this._parse)){let o=this._parse[n];NO(n)===1&&(r[n]=o)}return r}producedFields(){return new Set(nt(this._parse))}dependentFields(){return new Set(nt(this._parse))}assembleTransforms(r=!1){return nt(this._parse).filter(n=>r?NO(n)>1:!0).map(n=>{let o=umr(n,this._parse[n]);return o?{type:"formula",expr:o,as:wX(n)}:null}).filter(n=>n!==null)}}});var $m,hZ=D(()=>{"use strict";aF();eo();$m=class t extends kr{clone(){return new t(null)}constructor(r){super(r)}dependentFields(){return new Set}producedFields(){return new Set([Fv])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Fv}}}});var zm,R$=D(()=>{"use strict";Dr();bt();bt();eo();zm=class t extends kr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,ir(this.transform))}addDimensions(r){this.transform.groupby=Ed(this.transform.groupby.concat(r),n=>n)}dependentFields(){let r=new Set;return this.transform.groupby&&this.transform.groupby.forEach(r.add,r),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`JoinAggregateTransform ${_r(this.transform)}`}assemble(){let r=[],n=[],o=[];for(let s of this.transform.joinaggregate)n.push(s.op),o.push(this.getDefaultName(s)),r.push(s.field===void 0?null:s.field);let i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:o,ops:n,fields:r},i!==void 0?{groupby:i}:{})}}});function cmr(t){return t.stack.stackBy.reduce((r,n)=>{let o=n.fieldDef,i=vt(o);return i&&r.push(i),r},[])}function fmr(t){return Lt(t)&&t.every(r=>dr(r))&&t.length>1}var Ky,mZ=D(()=>{"use strict";or();Dr();bt();Po();eo();Ky=class t extends kr{constructor(r,n){super(r),this._stack=n}clone(){return new t(null,ir(this._stack))}static makeFromTransform(r,n){let{stack:o,groupby:i,as:s,offset:a="zero"}=n,l=[],u=[];if(n.sort!==void 0)for(let d of n.sort)l.push(d.field),u.push(On(d.order,"ascending"));let c={field:l,order:u},f;return fmr(s)?f=s:dr(s)?f=[s,s+"_end"]:f=[n.stack+"_start",n.stack+"_end"],new t(r,{stackField:o,groupby:i,offset:a,sort:c,facetby:[],as:f})}static makeFromEncoding(r,n){let o=n.stack,{encoding:i}=n;if(!o)return null;let{groupbyChannel:s,fieldChannel:a,offset:l,impute:u}=o,c;if(s){let h=i[s];c=zl(h)}let f=cmr(n),d=n.encoding.order,p;return Lt(d)||Et(d)?p=nK(d):p=f.reduce((h,m)=>(h.field.push(m),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new t(r,{dimensionFieldDef:c,stackField:n.vgField(a),facetby:[],stackby:f,sort:p,offset:l,impute:u,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(r){this._stack.facetby.push(...r)}dependentFields(){let r=new Set;return r.add(this._stack.stackField),this.getGroupbyFields().forEach(r.add,r),this._stack.facetby.forEach(r.add,r),this._stack.sort.field.forEach(r.add,r),r}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${_r(this._stack)}`}getGroupbyFields(){let{dimensionFieldDef:r,impute:n,groupby:o}=this._stack;return r?r.bin?n?[vt(r,{binSuffix:"mid"})]:[vt(r,{}),vt(r,{binSuffix:"end"})]:[vt(r)]:o??[]}assemble(){let r=[],{facetby:n,dimensionFieldDef:o,stackField:i,stackby:s,sort:a,offset:l,impute:u,as:c}=this._stack;if(u&&o){let{band:f=.5,bin:d}=o;d&&r.push({type:"formula",expr:`${f}*`+vt(o,{expr:"datum"})+`+${1-f}*`+vt(o,{expr:"datum",binSuffix:"end"}),as:vt(o,{binSuffix:"mid",forAs:!0})}),r.push({type:"impute",field:i,groupby:[...s,...n],key:vt(o,{binSuffix:"mid"}),method:"value",value:0})}return r.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:l}),r}}});var $v,gZ=D(()=>{"use strict";Av();Dr();bt();bt();eo();$v=class t extends kr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,ir(this.transform))}addDimensions(r){this.transform.groupby=Ed(this.transform.groupby.concat(r),n=>n)}dependentFields(){var r,n;let o=new Set;return((r=this.transform.groupby)!==null&&r!==void 0?r:[]).forEach(o.add,o),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>o.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(o.add,o),o}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(r){var n;return(n=r.as)!==null&&n!==void 0?n:vt(r)}hash(){return`WindowTransform ${_r(this.transform)}`}assemble(){var r;let n=[],o=[],i=[],s=[];for(let p of this.transform.window)o.push(p.op),i.push(this.getDefaultName(p)),s.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);let a=this.transform.frame,l=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&o.every(p=>MO(p)))return Object.assign({type:"joinaggregate",as:i,ops:o,fields:n},l!==void 0?{groupby:l}:{});let u=[],c=[];if(this.transform.sort!==void 0)for(let p of this.transform.sort)u.push(p.field),c.push((r=p.order)!==null&&r!==void 0?r:"ascending");let f={field:u,order:c},d=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:o,fields:n,sort:f},d!==void 0?{ignorePeers:d}:{}),l!==void 0?{groupby:l}:{}),a!==void 0?{frame:a}:{})}}});function dmr(t){function r(n){if(!(n instanceof Bm)){let o=n.clone();if(o instanceof is){let i=M$+o.getSource();o.setSource(i),t.model.component.data.outputNodes[i]=o}else(o instanceof Up||o instanceof Ky||o instanceof $v||o instanceof zm)&&o.addDimensions(t.fields);for(let i of n.children.flatMap(r))i.parent=o;return[o]}return n.children.flatMap(r)}return r}function _Z(t){if(t instanceof Bm)if(t.numChildren()===1&&!(t.children[0]instanceof is)){let r=t.children[0];(r instanceof Up||r instanceof Ky||r instanceof $v||r instanceof zm)&&r.addDimensions(t.fields),r.swapWithParent(),_Z(t)}else{let r=t.model.component.data.main;Jat(r);let n=dmr(t),o=t.children.map(n).flat();for(let i of o)i.parent=r}else t.children.map(_Z)}function Jat(t){if(t instanceof is&&t.type===Ps&&t.numChildren()===1){let r=t.children[0];r instanceof Bm||(r.swapWithParent(),Jat(t))}}var yZ,bZ,xZ,vZ,wZ,SZ,CZ,EZ,TZ,AZ,kZ,elt=D(()=>{"use strict";Wy();bt();Tf();fZ();vA();eo();dZ();E$();pZ();hZ();R$();IZ();Xwe();mZ();p$();gZ();yZ=class extends Rd{run(r){let n=r.parent;if(r instanceof pl){if(F$(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof pl)this.setMutated(),n.merge(r);else{if(Lve(n.producedFields(),r.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),r.swapWithParent()}}return this.setContinue(),this.flags}},bZ=class extends FF{mergeNodes(r,n){let o=n.shift();for(let i of n)r.removeChild(i),i.parent=o,i.remove()}run(r){let n=r.children.map(i=>i.hash()),o={};for(let i=0;i<n.length;i++)o[n[i]]===void 0?o[n[i]]=[r.children[i]]:o[n[i]].push(r.children[i]);for(let i of nt(o))o[i].length>1&&(this.setMutated(),this.mergeNodes(r,o[i]));for(let i of r.children)this.run(i);return this.mutatedFlag}},xZ=class extends Rd{run(r){return r instanceof is||r.numChildren()>0||r instanceof Bm?this.flags:(this.setMutated(),r.remove(),this.flags)}},vZ=class extends Rd{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(r){if(this.setContinue(),r instanceof Bp){let n=r.producedFields();jve(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=r}return this.flags}reset(){this.fields.clear()}},wZ=class extends Rd{run(r){this.setContinue();let o=r.parent.children.filter(s=>s instanceof Bp),i=o.pop();for(let s of o)this.setMutated(),i.merge(s);return this.flags}};SZ=class extends FF{constructor(){super()}run(r){r instanceof is&&!r.isRequired()&&(this.setMutated(),r.remove());for(let n of r.children)this.run(n);return this.mutatedFlag}},CZ=class extends FF{constructor(r){super(),this.requiresSelectionId=r&&g$(r)}run(r){r instanceof $m&&(this.requiresSelectionId&&(F$(r.parent)||r.parent instanceof Up||r.parent instanceof pl)||(this.setMutated(),r.remove()));for(let n of r.children)this.run(n);return this.mutatedFlag}},EZ=class extends Rd{run(r){let n=r.parent,o=[...n.children],i=n.children.filter(s=>s instanceof pl);if(n.numChildren()>1&&i.length>=1){let s={},a=new Set;for(let l of i){let u=l.parse;for(let c of nt(u))c in s?s[c]!==u[c]&&a.add(c):s[c]=u[c]}for(let l of a)delete s[l];if(!yn(s)){this.setMutated();let l=new pl(n,s);for(let u of o){if(u instanceof pl)for(let c of nt(s))delete u.parse[c];n.removeChild(u),u.parent=l,u instanceof pl&&nt(u.parse).length===0&&u.remove()}}}return this.setContinue(),this.flags}},TZ=class extends Rd{run(r){let n=r.parent,o=n.children.filter(s=>s instanceof Up),i={};for(let s of o){let a=_r(s.groupBy);a in i||(i[a]=[]),i[a].push(s)}for(let s of nt(i)){let a=i[s];if(a.length>1){let l=a.pop();for(let u of a)l.merge(u)&&(n.removeChild(u),u.parent=l,u.remove(),this.setMutated())}}return this.setContinue(),this.flags}},AZ=class extends Rd{constructor(r){super(),this.model=r}run(r){let n=r.parent,o=!(F$(n)||n instanceof Yy||n instanceof pl||n instanceof $m),i=[],s=[];for(let a of n.children)a instanceof Lm&&(o&&!Lve(n.producedFields(),a.dependentFields())?i.push(a):s.push(a));if(i.length>0){let a=i.pop();for(let l of i)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof Lm?n.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){let a=s.pop();for(let l of s)a.merge(l,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}},kZ=class extends Rd{run(r){let n=r.parent,o=[...n.children];if(!i2(o,l=>l instanceof is)||n.numChildren()<=1)return this.setContinue(),this.flags;let s=[],a;for(let l of o)if(l instanceof is){let u=l;for(;u.numChildren()===1;){let c=u.children[0];if(c instanceof is)u=c;else break}s.push(...u.children),a?(n.removeChild(l),l.parent=a.parent,a.parent.removeChild(a),a.parent=u,this.setMutated()):a=u}else s.push(l);if(s.length){this.setMutated();for(let l of s)l.parent.removeChild(l),l.parent=a}return this.setContinue(),this.flags}}});function T2(t){let r=[];function n(o){if(o.numChildren()===0)r.push(o);else for(let i of o.children)n(i)}for(let o of t)n(o);return r}function hmr(t){return t}function Um(t,r){return r.map(o=>{if(t instanceof Rd){let i=t.optimizeNextFromLeaves(o);return t.reset(),i}else return t.run(o)}).some(hmr)}function tlt(t,r){let n=t.sources,o=new Set;return o.add(Um(new SZ,n)),o.add(Um(new CZ(r),n)),n=n.filter(i=>i.numChildren()>0),o.add(Um(new xZ,T2(n))),n=n.filter(i=>i.numChildren()>0),o.add(Um(new yZ,T2(n))),o.add(Um(new AZ(r),T2(n))),o.add(Um(new vZ,T2(n))),o.add(Um(new EZ,T2(n))),o.add(Um(new TZ,T2(n))),o.add(Um(new wZ,T2(n))),o.add(Um(new bZ,n)),o.add(Um(new kZ,T2(n))),t.sources=n,o.has(!0)}function rlt(t,r){aZ(t.sources);let n=0,o=0;for(let i=0;i<DZ&&tlt(t,r);i++)n++;t.sources.map(_Z);for(let i=0;i<DZ&&tlt(t,r);i++)o++;aZ(t.sources),Math.max(n,o)===DZ&&st(`Maximum optimization runs(${DZ}) reached.`)}var M$,DZ,IZ=D(()=>{"use strict";cn();Yat();Xwe();elt();M$="scale_",DZ=5});var Ou,NZ=D(()=>{"use strict";Ou=class t{constructor(r){Object.defineProperty(this,"signal",{enumerable:!0,get:r})}static fromName(r,n){return new t(()=>r(n))}}});function Jwe(t){to(t)?mmr(t):gmr(t)}function mmr(t){let r=t.component.scales;for(let n of nt(r)){let o=bmr(t,n);if(r[n].setWithExplicit("domains",o),vmr(t,n),t.component.data.isFaceted){let s=t;for(;!dl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(let l of o.value)Dv(l)&&(l.data=M$+l.data.replace(M$,""))}}}function gmr(t){for(let n of t.children)Jwe(n);let r=t.component.scales;for(let n of nt(r)){let o,i=null;for(let s of t.children){let a=s.component.scales[n];if(a){o===void 0?o=a.getWithExplicit("domains"):o=Cf(o,a.getWithExplicit("domains"),"domains","scale",Qwe);let l=a.get("selectionExtent");i&&l&&i.selection!==l.selection&&st("The same selection must be used to override scale domains in a layered view."),i=l}}r[n].setWithExplicit("domains",o),i&&r[n].set("selectionExtent",i,!0)}}function ymr(t,r,n,o){if(t==="unaggregated"){let{valid:i,reason:s}=nlt(r,n);if(!i){st(s);return}}else if(t===void 0&&o.useUnaggregatedDomain){let{valid:i}=nlt(r,n);if(i)return"unaggregated"}return t}function bmr(t,r){let n=t.getScaleComponent(r).get("type"),{encoding:o}=t,i=ymr(t.scaleDomain(r),t.typedFieldDef(r),n,t.config.scale);return i!==t.scaleDomain(r)&&(t.specifiedScales[r]=Object.assign(Object.assign({},t.specifiedScales[r]),{domain:i})),r==="x"&&Io(o.x2)?Io(o.x)?Cf(A2(n,i,t,"x"),A2(n,i,t,"x2"),"domain","scale",Qwe):A2(n,i,t,"x2"):r==="y"&&Io(o.y2)?Io(o.y)?Cf(A2(n,i,t,"y"),A2(n,i,t,"y2"),"domain","scale",Qwe):A2(n,i,t,"y2"):A2(n,i,t,r)}function xmr(t,r,n){return t.map(o=>({signal:`{data: ${WB(o,{timeUnit:n,type:r})}}`}))}function Kwe(t,r,n){var o;let i=(o=os(n))===null||o===void 0?void 0:o.unit;return r==="temporal"||i?xmr(t,r,i):[t]}function A2(t,r,n,o){let{encoding:i}=n,s=Io(i[o]),{type:a}=s,l=s.timeUnit;if(Iot(r)){let d=A2(t,void 0,n,o),p=Kwe(r.unionWith,a,l);return Pv([...d.value,...p])}else{if(tr(r))return Pv([r]);if(r&&r!=="unaggregated"&&!i1e(r))return Pv(Kwe(r,a,l))}let u=n.stack;if(u&&o===u.fieldChannel){if(u.offset==="normalize")return ku([[0,1]]);let d=n.requestDataName(Ps);return ku([{data:d,field:n.vgField(o,{suffix:"start"})},{data:d,field:n.vgField(o,{suffix:"end"})}])}let c=Cu(o)&&Et(s)?wmr(n,o,t):void 0;if(wf(s)){let d=Kwe([s.datum],a,l);return ku(d)}let f=s;if(r==="unaggregated"){let d=n.requestDataName(Ps),{field:p}=s;return ku([{data:d,field:vt({field:p,aggregate:"min"})},{data:d,field:vt({field:p,aggregate:"max"})}])}else if(_n(f.bin)){if(Xi(t))return t==="bin-ordinal"?ku([]):ku([{data:jB(c)?n.requestDataName(Ps):n.requestDataName(pF),field:n.vgField(o,jy(f,o)?{binSuffix:"range"}:{}),sort:c===!0||!vo(c)?{field:n.vgField(o,{}),op:"min"}:c}]);{let{bin:d}=f;if(_n(d)){let p=NF(n,f.field,d);return ku([new Ou(()=>{let h=n.getSignalName(p);return`[${h}.start, ${h}.stop]`})])}else return ku([{data:n.requestDataName(Ps),field:n.vgField(o,{})}])}}else if(f.timeUnit&&Gt(["time","utc"],t)&&eF(o,f,to(n)?n.encoding[ll(o)]:void 0,n.stack,n.markDef,n.config)){let d=n.requestDataName(Ps);return ku([{data:d,field:n.vgField(o)},{data:d,field:n.vgField(o,{suffix:"end"})}])}else return c?ku([{data:jB(c)?n.requestDataName(Ps):n.requestDataName(pF),field:n.vgField(o),sort:c}]):ku([{data:n.requestDataName(Ps),field:n.vgField(o)}])}function Zwe(t,r){let{op:n,field:o,order:i}=t;return Object.assign(Object.assign({op:n??(r?"sum":p2)},o?{field:pf(o)}:{}),i?{order:i}:{})}function vmr(t,r){var n;let o=t.component.scales[r],i=t.specifiedScales[r].domain,s=(n=t.fieldDef(r))===null||n===void 0?void 0:n.bin,a=i1e(i)&&i,l=u2(s)&&UO(s.extent)&&s.extent;(a||l)&&o.set("selectionExtent",a??l,!0)}function wmr(t,r,n){if(!Xi(n))return;let o=t.fieldDef(r),i=o.sort;if(YX(i))return{op:"min",field:Xy(o,r),order:"ascending"};let{stack:s}=t,a=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(l=>l.fieldDef.field)]:void 0;if(cl(i)){let l=s&&!Gt(a,i.field);return Zwe(i,l)}else if(HX(i)){let{encoding:l,order:u}=i,c=t.fieldDef(l),{aggregate:f,field:d}=c,p=s&&!Gt(a,d);if(Fp(f)||Dm(f))return Zwe({field:vt(c),order:u},p);if(MO(f)||!f)return Zwe({op:f,field:d,order:u},p)}else{if(i==="descending")return{op:"min",field:t.vgField(r),order:"descending"};if(Gt(["ascending",void 0],i))return!0}}function nlt(t,r){let{aggregate:n,type:o}=t;return n?dr(n)&&!Fnt[n]?{valid:!1,reason:it.unaggregateDomainWithNonSharedDomainOp(n)}:o==="quantitative"&&r==="log"?{valid:!1,reason:it.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:it.unaggregateDomainHasNoEffectForRawField(t)}}function Qwe(t,r,n,o){return t.explicit&&r.explicit&&st(it.mergeConflictingDomainProperty(n,o,t.value,r.value)),{explicit:t.explicit,value:[...t.value,...r.value]}}function _mr(t){let r=Ed(t.map(a=>{if(Dv(a)){let{sort:l}=a;return Pt(a,["sort"])}return a}),_r),n=Ed(t.map(a=>{if(Dv(a)){let l=a.sort;return l!==void 0&&!jB(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(a=>a!==void 0),_r);if(r.length===0)return;if(r.length===1){let a=t[0];if(Dv(a)&&n.length>0){let l=n[0];if(n.length>1)st(it.MORE_THAN_ONE_SORT),l=!0;else if(vo(l)&&"field"in l){let u=l.field;a.field===u&&(l=l.order?{order:l.order}:!0)}return Object.assign(Object.assign({},a),{sort:l})}return a}let o=Ed(n.map(a=>jB(a)||!("op"in a)||a.op in Dnt?a:(st(it.domainSortDropped(a)),!0)),_r),i;o.length===1?i=o[0]:o.length>1&&(st(it.MORE_THAN_ONE_SORT),i=!0);let s=Ed(t.map(a=>Dv(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:r.map(l=>l.field)},i?{sort:i}:{}):Object.assign({fields:r},i?{sort:i}:{})}function RF(t){if(Dv(t)&&dr(t.field))return t.field;if(dot(t)){let r;for(let n of t.fields)if(Dv(n)&&dr(n.field)){if(!r)r=n.field;else if(r!==n.field)return st(it.FACETED_INDEPENDENT_DIFFERENT_SOURCES),r}return st(it.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),r}else if(pot(t)){st(it.FACETED_INDEPENDENT_SAME_SOURCE);let r=t.fields[0];return dr(r)?r:void 0}}function E2(t,r){let o=t.component.scales[r].get("domains").map(i=>(Dv(i)&&(i.data=t.lookupDataSource(i.data)),i));return _mr(o)}var MF=D(()=>{"use strict";_o();or();Av();$l();Ar();Dr();Wy();cn();vi();Mm();Fy();bt();fo();vA();xA();IZ();ss();NZ();Sc()});function e_e(t){return zp(t)||DF(t)?t.children.reduce((r,n)=>r.concat(e_e(n)),olt(t)):olt(t)}function olt(t){return nt(t.component.scales).reduce((r,n)=>{let o=t.component.scales[n];if(o.merged)return r;let i=o.combine(),{name:s,type:a,selectionExtent:l,domains:u,range:c,reverse:f}=i,d=Pt(i,["name","type","selectionExtent","domains","range","reverse"]),p=Smr(i.range,s,n),h;l&&(h=Dst(t,l));let m=E2(t,n);return r.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},m?{domain:m}:{}),h?{domainRaw:h}:{}),{range:p}),f!==void 0?{reverse:f}:{}),d)),r},[])}function Smr(t,r,n){return ul(n)&&Eu(t)?{step:{signal:r+"_step"}}:t}var ilt=D(()=>{"use strict";_o();Ar();bt();fo();ss();pA();MF()});var P$,slt=D(()=>{"use strict";or();bt();Sc();P$=class extends Au{constructor(r,n){super({},{name:r}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:i2(this.get("domains"),r=>Lt(r)&&r.length===2&&r[0]<=0&&r[1]>=0)}}});function clt(t){return t==="x"?"width":t==="y"?"height":void 0}function flt(t){let r=t.component.scales;for(let n of l2){let o=r[n];if(!o)continue;let i=Emr(n,t);o.setWithExplicit("range",i)}}function alt(t,r){let n=t.fieldDef(r);if(n&&n.bin&&_n(n.bin)){let o=NF(t,n.field,n.bin),i=clt(r),s=t.getName(i);return new Ou(()=>{let a=t.getSignalName(o),l=`(${a}.stop - ${a}.start) / ${a}.step`;return`${t.getSignalName(s)} / (${l})`})}}function Emr(t,r){let n=r.specifiedScales[t],{size:o}=r,s=r.getScaleComponent(t).get("type");for(let a of Cmr)if(n[a]!==void 0){let l=UX(s,a),u=VX(t,a);if(!l)st(it.scalePropertyNotWorkWithScaleType(s,a,t));else if(u)st(u);else switch(a){case"range":return Lt(n.range)&&ul(t)?Pv(n.range.map(c=>{if(c==="width"||c==="height"){let f=r.getName(c),d=r.getSignalName.bind(r);return Ou.fromName(d,f)}return c})):Pv(n.range);case"scheme":return Pv(Tmr(n[a]))}}if(t===Jn||t===ui){let a=t===Jn?"width":"height",l=o[a];if(Sf(l)){if(Xi(s))return Pv({step:l.step});st(it.stepDropped(a))}}return ku(Amr(t,r))}function Tmr(t){return kot(t)?Object.assign({scheme:t.name},df(t,["name"])):{scheme:t}}function Amr(t,r){let{size:n,config:o,mark:i,encoding:s}=r,a=r.getSignalName.bind(r),{type:l}=Io(s[t]),c=r.getScaleComponent(t).get("type"),{domain:f,domainMid:d}=r.specifiedScales[t];switch(t){case Jn:case ui:{if(Gt(["point","band"],c)){if(t===Jn&&!n.width){let m=uA(o.view,"width");if(Sf(m))return m}else if(t===ui&&!n.height){let m=uA(o.view,"height");if(Sf(m))return m}}let p=clt(t),h=r.getName(p);return t===ui&&aa(c)?[Ou.fromName(a,h),0]:[0,Ou.fromName(a,h)]}case xf:{let p=r.component.scales[t].get("zero"),h=dlt(i,p,o),m=Dmr(i,n,r,o);return HO(c)?Imr(h,m,kmr(c,o,f,t)):[h,m]}case bc:return[0,Math.PI*2];case Fm:return[0,360];case bf:return[0,new Ou(()=>{let p=r.getSignalName("width"),h=r.getSignalName("height");return`min(${p},${h})/2`})];case Id:return[o.scale.minStrokeWidth,o.scale.maxStrokeWidth];case Dd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ns:return"symbol";case bs:case _u:case Su:return c==="ordinal"?l==="nominal"?"category":"ordinal":d!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case wc:case Ad:case kd:return[o.scale.minOpacity,o.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${t}`)}function kmr(t,r,n,o){switch(t){case"quantile":return r.scale.quantileCount;case"quantize":return r.scale.quantizeCount;case"threshold":return n!==void 0&&Lt(n)?n.length+1:(st(it.domainRequiredForThresholdScale(o)),3)}}function Imr(t,r,n){let o=()=>{let i=h2(r),s=h2(t),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return tr(r)?new Ou(o):{signal:o()}}function dlt(t,r,n){if(r)return tr(r)?{signal:`${r.signal} ? 0 : ${dlt(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(it.incompatibleChannel("size",t))}function Dmr(t,r,n,o){let i={x:alt(n,"x"),y:alt(n,"y")};switch(t){case"bar":case"tick":{if(o.scale.maxBandSize!==void 0)return o.scale.maxBandSize;let s=ult(r,i,o.view);return wo(s)?s-1:new Ou(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return o.scale.maxStrokeWidth;case"text":return o.scale.maxFontSize;case"point":case"square":case"circle":{if(o.scale.maxSize)return o.scale.maxSize;let s=ult(r,i,o.view);return wo(s)?Math.pow(llt*s,2):new Ou(()=>`pow(${llt} * ${s.signal}, 2)`)}}throw new Error(it.incompatibleChannel("size",t))}function ult(t,r,n){let o=Sf(t.width)?t.width.step:lA(n,"width"),i=Sf(t.height)?t.height.step:lA(n,"height");return r.x||r.y?new Ou(()=>`min(${[r.x?r.x.signal:o,r.y?r.y.signal:i].join(", ")})`):Math.min(o,i)}var Cmr,llt,plt=D(()=>{"use strict";or();$l();Ar();Dr();g2();cn();vi();aA();bt();fo();vA();NZ();Sc();Po();Cmr=["range","scheme"];llt=.95});function t_e(t,r){to(t)?Nmr(t,r):mlt(t,r)}function Nmr(t,r){let n=t.component.scales,{config:o,encoding:i,markDef:s,specifiedScales:a}=t;for(let l of nt(n)){let u=a[l],c=n[l],f=t.getScaleComponent(l),d=Io(i[l]),p=u[r],h=f.get("type"),m=f.get("padding"),g=f.get("paddingInner"),y=UX(h,r),b=VX(l,r);if(p!==void 0&&(y?b&&st(b):st(it.scalePropertyNotWorkWithScaleType(h,r,l))),y&&b===void 0)if(p!==void 0)c.copyKeyFromObject(r,u);else{let x=r in hlt?hlt[r]({model:t,channel:l,fieldOrDatumDef:d,scaleType:h,scalePadding:m,scalePaddingInner:g,domain:u.domain,markDef:s,config:o}):o.scale[r];x!==void 0&&c.set(r,x,!1)}}}function r_e(t){to(t)?flt(t):mlt(t,"range")}function mlt(t,r){let n=t.component.scales;for(let o of t.children)r==="range"?r_e(o):t_e(o,r);for(let o of nt(n)){let i;for(let s of t.children){let a=s.component.scales[o];if(a){let l=a.getWithExplicit(r);i=Cf(i,l,r,"scale",AK((u,c)=>{switch(r){case"range":return u.step&&c.step?u.step-c.step:0}return 0}))}}n[o].setWithExplicit(r,i)}}function Omr(t,r){let n=r.bin;if(_n(n)){let o=NF(t,r.field,n);return new Ou(()=>t.getSignalName(o))}else if(Yi(n)&&u2(n)&&n.step!==void 0)return{step:n.step}}function Fmr(t,r){if(Gt([bs,_u,Su],t)&&r!=="nominal")return"hcl"}function Rmr(t,r,n){var o;if(!(!((o=zl(n))===null||o===void 0)&&o.bin||Gt([Fi.TIME,Fi.UTC],t)))return r in Ny?!0:void 0}function Mmr(t,r,n,o,i,s){if(t in Ny){if(vf(r)){if(n.continuousPadding!==void 0)return n.continuousPadding;let{type:a,orient:l}=i;if(a==="bar"&&!(Et(o)&&(o.bin||o.timeUnit))&&(l==="vertical"&&t==="x"||l==="horizontal"&&t==="y"))return s.continuousBandSize}if(r===Fi.POINT)return n.pointPadding}}function Pmr(t,r,n,o){if(t===void 0&&r in Ny){let{bandPaddingInner:i,barBandPaddingInner:s,rectBandPaddingInner:a}=o;return On(i,n==="bar"?s:a)}}function jmr(t,r,n,o,i,s){if(t===void 0&&r in Ny&&n===Fi.BAND){let{bandPaddingOuter:a}=s;return On(a,tr(i)?{signal:`${i.signal}/2`}:i/2)}}function Lmr(t,r,n,o){if(n==="x"&&o.xReverse!==void 0)return aa(t)&&r==="descending"?tr(o.xReverse)?{signal:`!${o.xReverse.signal}`}:!o.xReverse:o.xReverse;if(aa(t)&&r==="descending")return!0}function Bmr(t,r,n,o,i){if(!!n&&n!=="unaggregated"&&aa(i)){if(Lt(n)){let a=n[0],l=n[n.length-1];if(a<=0&&l>=0)return!0}return!1}if(t==="size"&&r.type==="quantitative"&&!HO(i))return!0;if(!(Et(r)&&r.bin)&&Gt([...xs,...Gnt],t)){let{orient:a,type:l}=o;return!(Gt(["bar","area","line","trail"],l)&&(a==="horizontal"&&t==="y"||a==="vertical"&&t==="x"))}return!1}var hlt,glt=D(()=>{"use strict";or();$l();Ar();Dr();cn();vi();bt();bt();fo();vA();ss();NZ();Sc();plt();hlt={bins:({model:t,fieldOrDatumDef:r})=>Et(r)?Omr(t,r):void 0,interpolate:({channel:t,fieldOrDatumDef:r})=>Fmr(t,r.type),nice:({scaleType:t,channel:r,fieldOrDatumDef:n})=>Rmr(t,r,n),padding:({channel:t,scaleType:r,fieldOrDatumDef:n,markDef:o,config:i})=>Mmr(t,r,i.scale,n,o,i.bar),paddingInner:({scalePadding:t,channel:r,markDef:n,config:o})=>Pmr(t,r,n.type,o.scale),paddingOuter:({scalePadding:t,channel:r,scaleType:n,markDef:o,scalePaddingInner:i,config:s})=>jmr(t,r,n,o.type,i,s.scale),reverse:({fieldOrDatumDef:t,scaleType:r,channel:n,config:o})=>{let i=Et(t)?t.sort:void 0;return Lmr(r,i,n,o.scale)},zero:({channel:t,fieldOrDatumDef:r,domain:n,markDef:o,scaleType:i})=>Bmr(t,r,n,o,i)}});function ylt(t,r,n,o){let i=$mr(r,n,o),{type:s}=t;return Cu(r)?s!==void 0?l1e(r,s)?Et(n)&&!a1e(s,n.type)?(st(it.scaleTypeNotWorkWithFieldDef(s,i)),i):s:(st(it.scaleTypeNotWorkWithChannel(r,s,i)),i):i:null}function $mr(t,r,n){var o;switch(r.type){case"nominal":case"ordinal":if(Iv(t)||zO(t)==="discrete")return t==="shape"&&r.type==="ordinal"&&st(it.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in Ny){if(Gt(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&t in RX)return"band";return r.band!==void 0||JX(r)&&(!((o=r.axis)===null||o===void 0)&&o.tickBand)?"band":"point";case"temporal":return Iv(t)?"time":zO(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"temporal")),"ordinal"):Et(r)&&r.timeUnit&&os(r.timeUnit).utc?"utc":"time";case"quantitative":return Iv(t)?Et(r)&&_n(r.bin)?"bin-ordinal":"linear":zO(t)==="discrete"?(st(it.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(it.invalidFieldType(r.type))}var blt=D(()=>{"use strict";$l();Ar();Dr();cn();vi();Fy();bt();Ar()});function xlt(t,{ignoreRange:r}={}){vlt(t),Jwe(t);for(let n of Dot)t_e(t,n);r||r_e(t)}function vlt(t){to(t)?t.component.scales=zmr(t):t.component.scales=Vmr(t)}function zmr(t){let{encoding:r,mark:n}=t;return l2.reduce((o,i)=>{let s=Io(r[i]);if(s&&n===TX&&i===ns&&s.type===Rm)return o;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a=a??{};let l=ylt(a,i,s,n);o[i]=new P$(t.scaleName(i+"",!0),{value:l,explicit:a.type===l})}return o},{})}function Vmr(t){var r;let n=t.component.scales={},o={},i=t.component.resolve;for(let s of t.children){vlt(s);for(let a of nt(s.component.scales))if(i.scale[a]=(r=i.scale[a])!==null&&r!==void 0?r:Iat(a,t),i.scale[a]==="shared"){let l=o[a],u=s.component.scales[a].getWithExplicit("type");l?Cot(l.value,u.value)?o[a]=Cf(l,u,"type","scale",Umr):(i.scale[a]="independent",delete o[a]):o[a]=u}}for(let s of nt(o)){let a=t.scaleName(s,!0),l=o[s];n[s]=new P$(a,l);for(let u of t.children){let c=u.component.scales[s];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return n}var Umr,wlt=D(()=>{"use strict";Ar();Dr();sa();vi();Od();bt();ss();N$();Sc();slt();MF();glt();blt();Umr=AK((t,r)=>o1e(t)-o1e(r))});function to(t){return t?.type==="unit"}function dl(t){return t?.type==="facet"}function DF(t){return t?.type==="concat"}function zp(t){return t?.type==="layer"}var j$,wA,PF,ss=D(()=>{"use strict";_o();Ar();Dr();_c();cn();vi();uF();aA();ZB();a$();bt();fo();T$();Po();Pwe();I$();D$();Lwe();Hwe();qwe();zat();Wat();ilt();MF();wlt();Sc();j$=class{constructor(){this.nameMap={}}rename(r,n){this.nameMap[r]=n}has(r){return this.nameMap[r]!==void 0}get(r){for(;this.nameMap[r]&&r!==this.nameMap[r];)r=this.nameMap[r];return r}};wA=class{constructor(r,n,o,i,s,a,l){var u,c;this.type=n,this.parent=o,this.config=s,this.view=l,this.children=[],this.correctDataNames=f=>(f.from&&f.from.data&&(f.from.data=this.lookupDataSource(f.from.data)),f.from&&f.from.facet&&f.from.facet.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f),this.parent=o,this.config=s,this.name=(u=r.name)!==null&&u!==void 0?u:i,this.title=Pm(r.title)?{text:r.title}:r.title,this.scaleNameMap=o?o.scaleNameMap:new j$,this.projectionNameMap=o?o.projectionNameMap:new j$,this.signalNameMap=o?o.signalNameMap:new j$,this.data=r.data,this.description=r.description,this.transforms=nst((c=r.transform)!==null&&c!==void 0?c:[]),this.layout=n==="layer"||n==="unit"?{}:pit(r,n,s),this.component={data:{sources:o?o.component.data.sources:[],outputNodes:o?o.component.data.outputNodes:{},outputNodeRefCounts:o?o.component.data.outputNodeRefCounts:{},isFaceted:Nv(r)||o&&o.component.data.isFaceted&&r.data===void 0},layoutSize:new Au,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?ir(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){xlt(this)}parseProjection(){Ywe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Gwe(this)}assembleGroupStyle(){var r,n;if(this.type==="unit"||this.type==="layer")return(n=(r=this.view)===null||r===void 0?void 0:r.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(r){let{style:n}=r,o=Pt(r,["style"]),i={};for(let s of nt(o)){let a=o[s];a!==void 0&&(i[s]=po(a))}return i}assembleGroupEncodeEntry(r){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!r&&(this.description&&(n.description=po(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):yn(n)?void 0:n}assembleLayout(){if(!this.layout)return;let r=this.layout,{spacing:n}=r,o=Pt(r,["spacing"]),{component:i,config:s}=this,a=Tat(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),o),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){let{layoutHeaders:r}=this.component,n=[];for(let o of al)r[o].title&&n.push(_at(this,o));for(let o of TF)n=n.concat(Eat(this,o));return n}assembleAxes(){return hat(this.component.axes,this.config)}assembleLegends(){return sZ(this)}assembleProjections(){return Bat(this)}assembleTitle(){var r,n,o;let i=(r=this.title)!==null&&r!==void 0?r:{},{encoding:s}=i,a=Pt(i,["encoding"]),l=Object.assign(Object.assign(Object.assign({},rK(this.config.title).nonMark),a),s?{encode:{update:s}}:{});if(l.text)return Gt(["unit","layer"],this.type)?Gt(["middle",void 0],l.anchor)&&(l.frame=(n=l.frame)!==null&&n!==void 0?n:"group"):l.anchor=(o=l.anchor)!==null&&o!==void 0?o:"start",yn(l)?void 0:l}assembleGroup(r=[]){let n={};r=r.concat(this.assembleSignals()),r.length>0&&(n.signals=r);let o=this.assembleLayout();o&&(n.layout=o),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());let i=!this.parent||dl(this.parent)?e_e(this):[];i.length>0&&(n.scales=i);let s=this.assembleAxes();s.length>0&&(n.axes=s);let a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(r){return Tn((this.name?this.name+"_":"")+r)}requestDataName(r){var n;let o=this.getName(r),i=this.component.data.outputNodeRefCounts;return i[o]=((n=i[o])!==null&&n!==void 0?n:0)+1,o}getSizeSignalRef(r){if(dl(this.parent)){let n=rZ(r),o=a2(n),i=this.component.scales[o];if(i&&!i.merged){let s=i.get("type"),a=i.get("range");if(Xi(s)&&Eu(a)){let l=i.get("name"),u=E2(this,o),c=RF(u);if(c){let f=vt({aggregate:"distinct",field:c},{expr:"datum"});return{signal:jwe(l,i,f)}}else return st(`Unknown field for ${o}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(r))}}lookupDataSource(r){let n=this.component.data.outputNodes[r];return n?n.getSource():r}getSignalName(r){return this.signalNameMap.get(r)}renameSignal(r,n){this.signalNameMap.rename(r,n)}renameScale(r,n){this.scaleNameMap.rename(r,n)}renameProjection(r,n){this.projectionNameMap.rename(r,n)}scaleName(r,n){if(n)return this.getName(r);if(NX(r)&&Cu(r)&&this.component.scales[r]||this.scaleNameMap.has(this.getName(r)))return this.scaleNameMap.get(this.getName(r))}projectionName(r){if(r)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(r){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");let n=this.component.scales[r];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(r):void 0}getSelectionComponent(r,n){let o=this.component.selection[r];if(!o&&this.parent&&(o=this.parent.getSelectionComponent(r,n)),!o)throw new Error(it.selectionNotFound(n));return o}hasAxisOrientSignalRef(){var r,n;return((r=this.component.axes.x)===null||r===void 0?void 0:r.some(o=>o.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(o=>o.hasOrientSignalRef()))}},PF=class extends wA{vgField(r,n={}){let o=this.fieldDef(r);if(o)return vt(o,n)}reduceFieldDef(r,n){return iK(this.getMapping(),(o,i,s)=>{let a=zl(i);return a?r(o,a,s):o},n)}forEachFieldDef(r,n){JB(this.getMapping(),(o,i)=>{let s=zl(o);s&&r(s,i)},n)}}});var jF,n_e=D(()=>{"use strict";_o();bt();eo();jF=class t extends kr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=ir(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(s=a[1])!==null&&s!==void 0?s:"density"]}clone(){return new t(null,ir(this.transform))}dependentFields(){var r;return new Set([this.transform.density,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${_r(this.transform)}`}assemble(){let r=this.transform,{density:n}=r,o=Pt(r,["density"]);return Object.assign({type:"kde",field:n},o)}}});var LF,o_e=D(()=>{"use strict";Ar();Dr();sa();vi();bt();Po();eo();LF=class t extends kr{constructor(r,n){super(r),this.filter=n}clone(){return new t(null,Object.assign({},this.filter))}static make(r,n){let{config:o,mark:i,markDef:s}=n;if(ln("invalid",s,o)!=="filter")return null;let l=n.reduceFieldDef((u,c,f)=>{let d=Cu(f)&&n.getScaleComponent(f);if(d){let p=d.get("type");aa(p)&&c.aggregate!=="count"&&!hf(i)&&(u[c.field]=c)}return u},{});return nt(l).length?new t(r,l):null}dependentFields(){return new Set(nt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${_r(this.filter)}`}assemble(){let r=nt(this.filter).reduce((n,o)=>{let i=this.filter[o],s=vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return r.length>0?{type:"filter",expr:r.join(" && ")}:null}}});var BF,i_e=D(()=>{"use strict";bt();eo();BF=class t extends kr{constructor(r,n){super(r),this.transform=n,this.transform=ir(n);let{flatten:o,as:i=[]}=this.transform;this.transform.as=o.map((s,a)=>{var l;return(l=i[a])!==null&&l!==void 0?l:s})}clone(){return new t(this.parent,ir(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${_r(this.transform)}`}assemble(){let{flatten:r,as:n}=this.transform;return{type:"flatten",fields:r,as:n}}}});var $F,s_e=D(()=>{"use strict";bt();eo();$F=class t extends kr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=ir(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,ir(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${_r(this.transform)}`}assemble(){let{fold:r,as:n}=this.transform;return{type:"fold",fields:r,as:n}}}});var zF,a_e=D(()=>{"use strict";or();Ar();Dr();Od();bt();eo();zF=class t extends kr{constructor(r,n,o,i){super(r),this.fields=n,this.geojson=o,this.signal=i}clone(){return new t(null,ir(this.fields),this.geojson,this.signal)}static parseAll(r,n){if(n.component.projection&&!n.component.projection.isFit)return r;let o=0;for(let i of[[vc,xc],[Ll,wu]]){let s=i.map(a=>{let l=Io(n.encoding[a]);return Et(l)?l.field:wf(l)?{expr:`${l.datum}`}:Tu(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(r=new t(r,s,null,n.getName(`geojson_${o++}`)))}if(n.channelHasField(ns)){let i=n.typedFieldDef(ns);i.type===Rm&&(r=new t(r,null,i.field,n.getName(`geojson_${o++}`)))}return r}dependentFields(){var r;let n=((r=this.fields)!==null&&r!==void 0?r:[]).filter(dr);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${_r(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}});var UF,l_e=D(()=>{"use strict";or();Ar();Dr();bt();eo();UF=class t extends kr{constructor(r,n,o,i){super(r),this.projection=n,this.fields=o,this.as=i}clone(){return new t(null,this.projection,ir(this.fields),ir(this.as))}static parseAll(r,n){if(!n.projectionName())return r;for(let o of[[vc,xc],[Ll,wu]]){let i=o.map(a=>{let l=Io(n.encoding[a]);return Et(l)?l.field:wf(l)?{expr:`${l.datum}`}:Tu(l)?{expr:`${l.value}`}:void 0}),s=o[0]===Ll?"2":"";(i[0]||i[1])&&(r=new t(r,n.projectionName(),i,[n.getName("x"+s),n.getName("y"+s)]))}return r}dependentFields(){return new Set(this.fields.filter(dr))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${_r(this.fields)} ${_r(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}});var _A,u_e=D(()=>{"use strict";Dr();_c();a$();bt();eo();_A=class t extends kr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,ir(this.transform))}dependentFields(){var r;return new Set([this.transform.impute,this.transform.key,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(r){let{start:n=0,stop:o,step:i}=r;return{signal:`sequence(${[n,o,...i?[i]:[]].join(",")})`}}static makeFromTransform(r,n){return new t(r,n)}static makeFromEncoding(r,n){let o=n.encoding,i=o.x,s=o.y;if(Et(i)&&Et(s)){let a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;let l=i.impute?s:s.impute?i:void 0,{method:u,value:c,frame:f,keyvals:d}=a.impute,p=sK(n.mark,o);return new t(r,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:l.field},u?{method:u}:{}),c!==void 0?{value:c}:{}),f?{frame:f}:{}),d!==void 0?{keyvals:d}:{}),p.length?{groupby:p}:{}))}return null}hash(){return`Impute ${_r(this.transform)}`}assemble(){let{impute:r,key:n,keyvals:o,method:i,groupby:s,value:a,frame:l=[null,null]}=this.transform,u=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:r,key:n},o?{keyvals:jit(o)?this.processSequence(o):o}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){let c=Object.assign({type:"window",as:[`imputed_${r}_value`],ops:[i],fields:[r],frame:l,ignorePeers:!1},s?{groupby:s}:{}),f={type:"formula",expr:`datum.${r} === null ? datum.imputed_${r}_value : datum.${r}`,as:r};return[u,c,f]}else return[u]}}});var VF,c_e=D(()=>{"use strict";_o();bt();eo();VF=class t extends kr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=ir(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new t(null,ir(this.transform))}dependentFields(){var r;return new Set([this.transform.loess,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${_r(this.transform)}`}assemble(){let r=this.transform,{loess:n,on:o}=r,i=Pt(r,["loess","on"]);return Object.assign({type:"loess",x:o,y:n},i)}}});var GF,f_e=D(()=>{"use strict";or();cn();a$();bt();eo();WF();OF();GF=class t extends kr{constructor(r,n,o){super(r),this.transform=n,this.secondary=o}clone(){return new t(null,ir(this.transform),this.secondary)}static make(r,n,o,i){let s=n.component.data.sources,{from:a}=o,l=null;if(Bit(a)){let u=d_e(a.data,s);u||(u=new Fd(a.data),s.push(u));let c=n.getName(`lookup_${i}`);l=new is(u,c,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=l}else if($it(a)){let u=a.selection;if(o=Object.assign({as:u},o),l=n.getSelectionComponent(Tn(u),u).materialized,!l)throw new Error(it.noSameUnitLookup(u))}return new t(r,o,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Nn(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${_r({transform:this.transform,secondary:this.secondary})}`}assemble(){let r;if(this.transform.from.fields)r=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Nn(this.transform.as)}:{});else{let n=this.transform.as;dr(n)||(st(it.NO_FIELDS_NEEDS_AS),n="_lookup"),r={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},r),this.transform.default?{default:this.transform.default}:{})}}});var qF,p_e=D(()=>{"use strict";_o();bt();eo();qF=class t extends kr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=ir(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new t(null,ir(this.transform))}dependentFields(){var r;return new Set([this.transform.quantile,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${_r(this.transform)}`}assemble(){let r=this.transform,{quantile:n}=r,o=Pt(r,["quantile"]);return Object.assign({type:"quantile",field:n},o)}}});var HF,h_e=D(()=>{"use strict";_o();bt();eo();HF=class t extends kr{constructor(r,n){var o,i,s;super(r),this.transform=n,this.transform=ir(n);let a=(o=this.transform.as)!==null&&o!==void 0?o:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new t(null,ir(this.transform))}dependentFields(){var r;return new Set([this.transform.regression,this.transform.on,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${_r(this.transform)}`}assemble(){let r=this.transform,{regression:n,on:o}=r,i=Pt(r,["regression","on"]);return Object.assign({type:"regression",x:o,y:n},i)}}});var YF,m_e=D(()=>{"use strict";bt();eo();YF=class t extends kr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,ir(this.transform))}addDimensions(r){var n;this.transform.groupby=Ed(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(r),o=>o)}producedFields(){}dependentFields(){var r;return new Set([this.transform.pivot,this.transform.value,...(r=this.transform.groupby)!==null&&r!==void 0?r:[]])}hash(){return`PivotTransform ${_r(this.transform)}`}assemble(){let{pivot:r,value:n,groupby:o,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:r,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),o!==void 0?{groupby:o}:{})}}});var XF,g_e=D(()=>{"use strict";bt();eo();XF=class t extends kr{constructor(r,n){super(r),this.transform=n}clone(){return new t(null,ir(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${_r(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}});function _lt(t){let r=0;function n(o,i){var s;if(o instanceof Fd&&!o.isGenerator&&!y2(o.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),o instanceof pl&&(o.parent instanceof Fd&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:o.assembleFormatParse()}),i.transform.push(...o.assembleTransforms(!0))):i.transform.push(...o.assembleTransforms())),o instanceof Bm){i.name||(i.name=`data_${r++}`),!i.source||i.transform.length>0?(t.push(i),o.data=i.name):o.data=i.source;for(let a of o.assemble())t.push(a);return}switch((o instanceof S2||o instanceof C2||o instanceof LF||o instanceof Yy||o instanceof bA||o instanceof UF||o instanceof zF||o instanceof Up||o instanceof GF||o instanceof $v||o instanceof zm||o instanceof $F||o instanceof BF||o instanceof jF||o instanceof VF||o instanceof qF||o instanceof HF||o instanceof $m||o instanceof XF||o instanceof YF)&&i.transform.push(o.assemble()),(o instanceof Lm||o instanceof Bp||o instanceof _A||o instanceof Ky)&&i.transform.push(...o.assemble()),o instanceof is&&(i.source&&i.transform.length===0?o.setSource(i.source):o.parent instanceof is?o.setSource(i.name):(i.name||(i.name=`data_${r++}`),o.setSource(i.name),o.numChildren()===1&&(t.push(i),i={name:null,source:i.name,transform:[]}))),o.numChildren()){case 0:o instanceof is&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(o.children[0],i);break;default:{i.name||(i.name=`data_${r++}`);let a=i.name;!i.source||i.transform.length>0?t.push(i):a=i.source;for(let l of o.children)n(l,{name:null,source:a,transform:[]});break}}}return n}function Slt(t){let r=[],n=_lt(r);for(let o of t.children)n(o,{source:t.name,name:null,transform:[]});return r}function Clt(t,r){var n,o;let i=[],s=_lt(i),a=0;for(let u of t.sources){u.hasName()||(u.dataName=`source_${a++}`);let c=u.assemble();s(u,c)}for(let u of i)u.transform.length===0&&delete u.transform;let l=0;for(let[u,c]of i.entries())((n=c.transform)!==null&&n!==void 0?n:[]).length===0&&!c.source&&i.splice(l++,0,i.splice(u,1)[0]);for(let u of i)for(let c of(o=u.transform)!==null&&o!==void 0?o:[])c.type==="lookup"&&(c.from=t.outputNodes[c.from].getSource());for(let u of i)u.name in r&&(u.values=r[u.name]);return i}var y_e=D(()=>{"use strict";Wy();fZ();vA();xA();eo();n_e();dZ();E$();o_e();i_e();s_e();pZ();a_e();l_e();lZ();hZ();u_e();R$();c_e();f_e();p_e();h_e();m_e();g_e();uZ();OF();mZ();p$();gZ()});function Gmr(t){return t==="top"||t==="left"||tr(t)?"header":"footer"}function Tlt(t){for(let r of al)Wmr(t,r);Elt(t,"x"),Elt(t,"y")}function Wmr(t,r){var n;let{facet:o,config:i,child:s,component:a}=t;if(t.channelHasField(r)){let l=o[r],u=Bv("title",null,i,r),c=Pp(l,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});s.component.layoutHeaders[r].title&&(c=Lt(c)?c.join(", "):c,c+=" / "+s.component.layoutHeaders[r].title,s.component.layoutHeaders[r].title=null);let f=Bv("labelOrient",l,i,r),d=(n=l.header)!==null&&n!==void 0?n:{},p=On(d.labels,i.header.labels,!0),h=Gt(["bottom","right"],f)?"footer":"header";a.layoutHeaders[r]={title:c,facetFieldDef:l,[h]:r==="facet"?[]:[Alt(t,r,p)]}}}function Alt(t,r,n){let o=r==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(o)?t.child.getSizeSignalRef(o):void 0,axes:[]}}function Elt(t,r){var n;let{child:o}=t;if(o.component.axes[r]){let{layoutHeaders:i,resolve:s}=t.component;if(s.axis[r]=IF(s,r),s.axis[r]==="shared"){let a=r==="x"?"column":"row",l=i[a];for(let u of o.component.axes[r]){let c=Gmr(u.get("orient"));l[c]=(n=l[c])!==null&&n!==void 0?n:[Alt(t,a,!1)];let f=CF(u,"main",t.config,{header:!0});f&&l[c][0].axes.push(f),u.mainExtracted=!0}}}}var klt=D(()=>{"use strict";or();Ar();Dr();bt();fo();T$();N$();JK()});function Ilt(t){FZ(t),OZ(t,"width"),OZ(t,"height")}function Dlt(t){FZ(t);let r=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";OZ(t,r),OZ(t,n)}function FZ(t){for(let r of t.children)r.parseLayoutSize()}function OZ(t,r){let n=rZ(r),o=a2(n),i=t.component.resolve,s=t.component.layoutSize,a;for(let l of t.children){let u=l.component.layoutSize.getWithExplicit(n),c=i.scale[o];if(c==="independent"&&u.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==u.value){a=void 0;break}a=Cf(a,u,n,"")}else a=u}if(a){for(let l of t.children)t.renameSignal(l.getName(n),t.getName(r)),l.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(r,a)}else s.setWithExplicit(r,{explicit:!1,value:void 0})}function Nlt(t){let{size:r,component:n}=t;for(let o of xs){let i=Bl(o);if(r[i]){let s=r[i];n.layoutSize.set(i,Sf(s)?"step":s,!0)}else{let s=qmr(t,i);n.layoutSize.set(i,s,!1)}}}function qmr(t,r){let n=r==="width"?"x":"y",o=t.config,i=t.getScaleComponent(n);if(i){let s=i.get("type"),a=i.get("range");if(Xi(s)){let l=uA(o.view,r);return Eu(a)||Sf(l)?"step":l}else return i$(o.view,r)}else{if(t.hasProjection||t.mark==="arc")return i$(o.view,r);{let s=uA(o.view,r);return Sf(s)?s.step:s}}}var L$=D(()=>{"use strict";Ar();g2();vi();aA();fo();Sc();Lwe()});function RZ(t,r,n){return vt(r,Object.assign({suffix:`by_${vt(t)}`},n??{}))}var MZ,b_e=D(()=>{"use strict";or();$l();Ar();Dr();_c();cn();vi();Mm();Ov();bt();fo();PZ();y_e();xA();WF();Pwe();JK();I$();klt();L$();ss();MF();pA();MZ=class t extends PF{constructor(r,n,o,i){super(r,"facet",n,o,i,r.resolve),this.child=KF(r.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(r.facet,i)}initFacet(r,n){return zy(r)?iK(r,(o,i,s)=>Gt([mf,gf],s)?i.field===void 0?(st(it.emptyFieldDef(i,s)),o):(o[s]=KB(i,s,n),o):(st(it.incompatibleChannel(s,"facet")),o),{}):{facet:KB(r,"facet",n)}}channelHasField(r){return!!this.facet[r]}fieldDef(r){return this.facet[r]}parseData(){this.component.data=k2(this),this.child.parseData()}parseLayoutSize(){FZ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Tlt(this)}assembleSelectionTopLevelSignals(r){return this.child.assembleSelectionTopLevelSignals(r)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(r){return this.child.assembleSelectionData(r)}getHeaderLayoutMixins(){var r,n,o;let i={};for(let s of al)for(let a of AF){let l=this.component.layoutHeaders[s],u=l[a],{facetFieldDef:c}=l;if(c){let f=Bv("titleOrient",c,this.config,s);if(Gt(["right","bottom"],f)){let d=EF(s,f);i.titleAnchor=(r=i.titleAnchor)!==null&&r!==void 0?r:{},i.titleAnchor[d]="end"}}if(u?.[0]){let f=s==="row"?"height":"width",d=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(f)&&(i[d]=(n=i[d])!==null&&n!==void 0?n:{},i[d][s]=.5),l.title&&(i.offset=(o=i.offset)!==null&&o!==void 0?o:{},i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){let{column:r,row:n}=this.facet,o=r?this.columnDistinctSignal():n?1:void 0,i="all";return(!n&&this.component.resolve.scale.x==="independent"||!r&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),o?{columns:o}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof t))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(r){return this.parent&&this.parent instanceof t?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:vt(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(r)):super.assembleGroup(r)}getCardinalityAggregateForChild(){let r=[],n=[],o=[];if(this.child instanceof t){if(this.child.channelHasField("column")){let i=vt(this.child.facet.column);r.push(i),n.push("distinct"),o.push(`distinct_${i}`)}}else for(let i of xs){let s=this.child.component.scales[i];if(s&&!s.merged){let a=s.get("type"),l=s.get("range");if(Xi(a)&&Eu(l)){let u=E2(this.child,i),c=RF(u);c?(r.push(c),n.push("distinct"),o.push(`distinct_${c}`)):st(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:r,ops:n,as:o}}assembleFacet(){let{name:r,data:n}=this.component.data.facetRoot,{row:o,column:i}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),u=[];for(let f of al){let d=this.facet[f];if(d){u.push(vt(d));let{bin:p,sort:h}=d;if(_n(p)&&u.push(vt(d,{binSuffix:"end"})),cl(h)){let{field:m,op:g=p2}=h,y=RZ(d,h);o&&i?(s.push(y),a.push("max"),l.push(y)):(s.push(m),a.push(g),l.push(y))}else if(Lt(h)){let m=Xy(d,f);s.push(m),a.push("max"),l.push(m)}}}let c=!!o&&!!i;return Object.assign({name:r,data:n,groupby:u},c||s.length>0?{aggregate:Object.assign(Object.assign({},c?{cross:c}:{}),s.length?{fields:s,ops:a,as:l}:{})}:{})}facetSortFields(r){let{facet:n}=this,o=n[r];return o?cl(o.sort)?[RZ(o,o.sort,{expr:"datum"})]:Lt(o.sort)?[Xy(o,r,{expr:"datum"})]:[vt(o,{expr:"datum"})]:[]}facetSortOrder(r){let{facet:n}=this,o=n[r];if(o){let{sort:i}=o;return[(cl(i)?i.order:!Lt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){let{facet:r,config:n}=this;if(r.facet)return eZ(r.facet,"facet",n);let o={row:["top","bottom"],column:["left","right"]};for(let i of TF)if(r[i]){let s=Bv("labelOrient",r[i],n,i);if(Gt(o[i],s))return eZ(r[i],i,n)}}assembleMarks(){let{child:r}=this,n=this.component.data.facetRoot,o=Slt(n),i=r.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||r.assembleTitle(),a=r.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:al.map(u=>this.facetSortFields(u)).flat(),order:al.map(u=>this.facetSortOrder(u)).flat()}}),o.length>0?{data:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup(Tst(this,[])))]}getMapping(){return this.facet}}});function Olt(t,r){let{row:n,column:o}=r;if(n&&o){let i=null;for(let s of[n,o])if(cl(s.sort)){let{field:a,op:l=p2}=s.sort;t=i=new zm(t,{joinaggregate:[{op:l,field:a,as:RZ(s,s.sort,{forAs:!0})}],groupby:[vt(s)]})}return i}return null}var Flt=D(()=>{"use strict";Dr();Mm();b_e();R$()});function d_e(t,r){var n,o,i,s,a,l,u,c,f,d;for(let p of r){let h=p.data;if(!(t.name&&p.hasName()&&t.name!==p.dataName)&&!(!((n=t.format)===null||n===void 0)&&n.mesh&&(!((o=h.format)===null||o===void 0)&&o.feature))&&!((!((i=t.format)===null||i===void 0)&&i.feature||!((s=h.format)===null||s===void 0)&&s.feature)&&((a=t.format)===null||a===void 0?void 0:a.feature)!==((l=h.format)===null||l===void 0?void 0:l.feature))&&!((!((u=t.format)===null||u===void 0)&&u.mesh||!((c=h.format)===null||c===void 0)&&c.mesh)&&((f=t.format)===null||f===void 0?void 0:f.mesh)!==((d=h.format)===null||d===void 0?void 0:d.mesh))){if(dF(t)&&dF(h)){if(Tv(t.values,h.values))return p}else if(y2(t)&&y2(h)){if(t.url===h.url)return p}else if(IK(t)&&t.name===p.dataName)return p}}return null}function Hmr(t,r){if(t.data||!t.parent){if(t.data===null){let o=new Fd({values:[]});return r.push(o),o}let n=d_e(t.data,r);if(n)return Gy(t.data)||(n.data.format=fnt({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{let o=new Fd(t.data);return r.push(o),o}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function Ymr(t,r,n){var o,i;let s=0;for(let a of r.transforms){let l,u;if(Kit(a))u=t=new bA(t,a),l="derived";else if(q1e(a)){let c=Kat(a);u=t=(o=pl.makeWithAncestors(t,{},c,n))!==null&&o!==void 0?o:t,t=new Yy(t,r,a.filter)}else if(Zit(a))u=t=Lm.makeFromTransform(t,a,r),l="number";else if(Jit(a))l="date",n.getWithExplicit(a.field).value===void 0&&(t=new pl(t,{[a.field]:l}),n.set(a.field,l,!1)),u=t=Bp.makeFromTransform(t,a);else if(est(a))u=t=Up.makeFromTransform(t,a),l="number",g$(r)&&(t=new $m(t));else if(Lit(a))u=t=GF.make(t,r,a,s++),l="derived";else if(Hit(a))u=t=new $v(t,a),l="number";else if(Yit(a))u=t=new zm(t,a),l="number";else if(tst(a))u=t=Ky.makeFromTransform(t,a),l="derived";else if(rst(a))u=t=new $F(t,a),l="derived";else if(Xit(a))u=t=new BF(t,a),l="derived";else if(zit(a))u=t=new YF(t,a),l="derived";else if(qit(a))t=new XF(t,a);else if(Qit(a))u=t=_A.makeFromTransform(t,a),l="derived";else if(Uit(a))u=t=new jF(t,a),l="derived";else if(Vit(a))u=t=new qF(t,a),l="derived";else if(Git(a))u=t=new HF(t,a),l="derived";else if(Wit(a))u=t=new VF(t,a),l="derived";else{st(it.invalidTransformIgnored(a));continue}if(u&&l!==void 0)for(let c of(i=u.producedFields())!==null&&i!==void 0?i:[])n.set(c,l,!1)}return t}function k2(t){var r,n,o,i,s,a,l,u,c,f;let d=Hmr(t,t.component.data.sources),{outputNodes:p,outputNodeRefCounts:h}=t.component.data,m=t.parent?t.parent.component.data.ancestorParse.clone():new kK,g=t.data;Gy(g)?(G1e(g)?d=new C2(d,g.sequence):s$(g)&&(d=new S2(d,g.graticule)),m.parseNothing=!0):((r=g?.format)===null||r===void 0?void 0:r.parse)===null&&(m.parseNothing=!0),d=(n=pl.makeExplicit(d,t,m))!==null&&n!==void 0?n:d,d=new $m(d);let y=t.parent&&zp(t.parent);(to(t)||dl(t))&&y&&(d=(o=Lm.makeFromEncoding(d,t))!==null&&o!==void 0?o:d),t.transforms.length>0&&(d=Ymr(d,t,m));let b=Qat(t),x=Zat(t);d=(i=pl.makeWithAncestors(d,{},Object.assign(Object.assign({},b),x),m))!==null&&i!==void 0?i:d,to(t)&&(d=zF.parseAll(d,t),d=UF.parseAll(d,t)),(to(t)||dl(t))&&(y||(d=(s=Lm.makeFromEncoding(d,t))!==null&&s!==void 0?s:d),d=(a=Bp.makeFromEncoding(d,t))!==null&&a!==void 0?a:d,d=bA.parseAllForSortIndex(d,t));let v=t.getName(pF),w=new is(d,v,pF,h);if(p[v]=w,d=w,to(t)){let E=Up.makeFromEncoding(d,t);E&&(d=E,g$(t)&&(d=new $m(d))),d=(l=_A.makeFromEncoding(d,t))!==null&&l!==void 0?l:d,d=(u=Ky.makeFromEncoding(d,t))!==null&&u!==void 0?u:d}to(t)&&(d=(c=LF.make(d,t))!==null&&c!==void 0?c:d);let _=t.getName(Ps),C=new is(d,_,Ps,h);p[_]=C,d=C,to(t)&&pat(t,C);let S=null;if(dl(t)){let E=t.getName("facet");d=(f=Olt(d,t.facet))!==null&&f!==void 0?f:d,S=new Bm(d,t,E,C.getSource()),p[E]=S}return Object.assign(Object.assign({},t.component.data),{outputNodes:p,outputNodeRefCounts:h,raw:w,main:C,facetRoot:S,ancestorParse:m})}var WF=D(()=>{"use strict";Pit();Wy();cn();a$();bt();ss();Tf();fA();fZ();vA();xA();eo();n_e();dZ();E$();o_e();i_e();s_e();pZ();a_e();l_e();lZ();hZ();u_e();R$();Flt();c_e();f_e();m_e();p_e();h_e();g_e();uZ();OF();mZ();p$();gZ()});var jZ,Rlt=D(()=>{"use strict";cn();uF();bt();PZ();WF();D$();L$();ss();jZ=class extends wA{constructor(r,n,o,i){var s,a,l,u;super(r,"concat",n,o,i,r.resolve),(((a=(s=r.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((u=(l=r.resolve)===null||l===void 0?void 0:l.axis)===null||u===void 0?void 0:u.y)==="shared")&&st(it.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(r).map((c,f)=>KF(c,this,this.getName("concat_"+f),void 0,i))}parseData(){this.component.data=k2(this);for(let r of this.children)r.parseData()}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){for(let r of this.children)r.parseAxesAndHeaders()}getChildren(r){return m2(r)?r.vconcat:lF(r)?r.hconcat:r.concat}parseLayoutSize(){Dlt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.forEach(r=>r.assembleSignals()),[]}assembleLayoutSignals(){let r=kF(this);for(let n of this.children)r.push(...n.assembleLayoutSignals());return r}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleMarks(){return this.children.map(r=>{let n=r.assembleTitle(),o=r.assembleGroupStyle(),i=r.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:r.getName("group")},n?{title:n}:{}),o?{style:o}:{}),i?{encode:{update:i}}:{}),r.assembleGroup())})}assembleDefaultLayout(){let r=this.layout.columns;return Object.assign(Object.assign({},r!=null?{columns:r}:{}),{bounds:"full",align:"each"})}}});function Xmr(t){return t===!1||t===null}var Kmr,x_e,LZ,Mlt=D(()=>{"use strict";LB();bt();Sc();fo();Kmr=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},zve),{labelExpr:1,encode:1}),x_e=nt(Kmr),LZ=class t extends Au{constructor(r={},n={},o=!1){super(),this.explicit=r,this.implicit=n,this.mainExtracted=o}clone(){return new t(ir(this.explicit),ir(this.implicit),this.mainExtracted)}hasAxisPart(r){return r==="axis"?!0:r==="grid"||r==="title"?!!this.get(r):!Xmr(this.get(r))}hasOrientSignalRef(){return tr(this.explicit.orient)}}});function Plt(t,r,n){var o;let{encoding:i,config:s}=t,a=(o=Io(i[r]))!==null&&o!==void 0?o:Io(i[ll(r)]),l=t.axis(r)||{},{format:u,formatType:c}=l;return By(c)?Object.assign({text:XB({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:s})},n):n}var jlt=D(()=>{"use strict";Ar();Dr();$y()});function Llt(t){return xs.reduce((r,n)=>(t.component.scales[n]&&(r[n]=[ngr(n,t)]),r),{})}function Blt(t){var r;let{axes:n,resolve:o}=t.component,i={top:0,bottom:0,right:0,left:0};for(let s of t.children){s.parseAxesAndHeaders();for(let a of nt(s.component.axes))o.axis[a]=IF(t.component.resolve,a),o.axis[a]==="shared"&&(n[a]=Jmr(n[a],s.component.axes[a]),n[a]||(o.axis[a]="independent",delete n[a]))}for(let s of xs){for(let a of t.children)if(a.component.axes[s]){if(o.axis[s]==="independent"){n[s]=((r=n[s])!==null&&r!==void 0?r:[]).concat(a.component.axes[s]);for(let l of a.component.axes[s]){let{value:u,explicit:c}=l.getWithExplicit("orient");if(!tr(u)){if(i[u]>0&&!c){let f=Qmr[u];i[u]>i[f]&&l.set("orient",f,!1)}i[u]++}}}delete a.component.axes[s]}if(o.axis[s]==="independent"&&n[s]&&n[s].length>1)for(let a of n[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function Jmr(t,r){if(t){if(t.length!==r.length)return;let n=t.length;for(let o=0;o<n;o++){let i=t[o],s=r[o];if(!!i!=!!s)return;if(i&&s){let a=i.getWithExplicit("orient"),l=s.getWithExplicit("orient");if(a.explicit&&l.explicit&&a.value!==l.value)return;t[o]=egr(i,s)}}}else return r.map(n=>n.clone());return t}function egr(t,r){for(let n of x_e){let o=Cf(t.getWithExplicit(n),r.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return oK(i,s);case"gridScale":return{explicit:i.explicit,value:On(i.value,s.value)}}return fF(i,s,n,"axis")});t.setWithExplicit(n,o)}return t}function tgr(t,r,n,o,i){if(r==="disable")return n!==void 0;switch(n=n||{},r){case"titleAngle":case"labelAngle":return t===(tr(n.labelAngle)?n.labelAngle:ZT(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Rwe(o,i))return!0}return t===n[r]}function ngr(t,r){var n,o,i;let s=r.axis(t),a=new LZ,l=Io(r.encoding[t]),{mark:u,config:c}=r,f=s?.orient||((n=c[t==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((o=c.axis)===null||o===void 0?void 0:o.orient)||wat(t),d=r.getScaleComponent(t).get("type"),p=xat(t,d,f,r.config),h=s!==void 0?!s:A$("disable",c,s?.style,p).configValue;if(a.set("disable",h,s!==void 0),h)return a;s=s||{};let m=vat(r,s,t,l,p),g={fieldOrDatumDef:l,axis:s,channel:t,model:r,scaleType:d,orient:f,labelAngle:m,mark:u,config:c};for(let x of x_e){let v=x in Nwe?Nwe[x](g):Uve(x)?s[x]:void 0,w=v!==void 0,_=tgr(v,x,s,r,t);if(w&&_)a.set(x,v,_);else{let{configValue:C=void 0,configFrom:S=void 0}=Uve(x)&&x!=="values"?A$(x,r.config,s.style,p):{},E=C!==void 0;w&&!E?a.set(x,v,_):(S!=="vgAxisConfig"||rgr.has(x)&&E||OO(C)||tr(C))&&a.set(x,C,!1)}}let y=(i=s.encoding)!==null&&i!==void 0?i:{},b=CX.reduce((x,v)=>{var w;if(!a.hasAxisPart(v))return x;let _=nZ((w=y[v])!==null&&w!==void 0?w:{},r),C=v==="labels"?Plt(r,t,_):_;return C!==void 0&&!yn(C)&&(x[v]={update:C}),x},{});return yn(b)||a.set("encode",b,!!s.encoding||s.labelAngle!==void 0),a}var Qmr,rgr,v_e=D(()=>{"use strict";LB();Ar();Dr();bt();fo();Po();Bwe();N$();Sc();Mlt();Iwe();jlt();Mwe();Qmr={bottom:"top",top:"bottom",left:"right",right:"left"};rgr=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"])});function $lt({encoding:t,size:r}){for(let n of xs){let o=Bl(n);Sf(r[o])&&_f(t[n])&&(delete r[o],st(it.stepDropped(o)))}return r}var zlt=D(()=>{"use strict";Ar();Dr();cn();aA()});function Ult(t,r,n,{graticule:o}){let i=jl(t)?Object.assign({},t):{type:t},s=ln("orient",i,n);if(i.orient=agr(i.type,r,s),s!==void 0&&s!==i.orient&&st(it.orientOverridden(i.orient,s)),i.type==="bar"&&i.orient){let c=ln("cornerRadiusEnd",i,n);if(c!==void 0){let f=i.orient==="horizontal"&&r.x2||i.orient==="vertical"&&r.y2?["cornerRadius"]:Snt[i.orient];for(let d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return ln("opacity",i,n)===void 0&&(i.opacity=igr(i.type,r)),i.filled===void 0&&(i.filled=o?!1:sgr(i,n)),ln("cursor",i,n)===void 0&&(i.cursor=ogr(i,r,n)),i}function ogr(t,r,n){return r.href||t.href||ln("href",t,n)?"pointer":t.cursor}function igr(t,r){if(Gt([FO,BB,$B,zB],t)&&!oF(r))return .7}function sgr(t,r){let n=Uy("filled",t,r),o=t.type;return On(n,o!==FO&&o!==eA&&o!==RO)}function agr(t,r,n){switch(t){case FO:case $B:case zB:case EX:case bnt:case ynt:return}let{x:o,y:i,x2:s,y2:a}=r;switch(t){case JT:if(Et(o)&&(Yi(o.bin)||Et(i)&&i.aggregate&&!o.aggregate))return"vertical";if(Et(i)&&(Yi(i.bin)||Et(o)&&o.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s&&(Et(o)&&o.type===Mp&&!_n(o.bin)||QX(o)))return"horizontal";if(!a&&(Et(i)&&i.type===Mp&&!_n(i.bin)||QX(i)))return"vertical"}case RO:if(s&&!(Et(o)&&Yi(o.bin))&&a&&!(Et(i)&&Yi(i.bin)))return;case QT:if(a)return Et(i)&&Yi(i.bin)?"horizontal":"vertical";if(s)return Et(o)&&Yi(o.bin)?"vertical":"horizontal";if(t===RO){if(o&&!i)return"vertical";if(i&&!o)return"horizontal"}case eA:case BB:{let l=_f(o),u=_f(i);if(l&&!u)return t!=="tick"?"horizontal":"vertical";if(!l&&u)return t!=="tick"?"vertical":"horizontal";if(l&&u){let c=o,f=i,d=c.type===My,p=f.type===My;return d&&!p?t!=="tick"?"vertical":"horizontal":!d&&p?t!=="tick"?"horizontal":"vertical":!c.aggregate&&f.aggregate?t!=="tick"?"vertical":"horizontal":c.aggregate&&!f.aggregate?t!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}var Vlt=D(()=>{"use strict";$l();Dr();_c();cn();sa();Od();bt();Po()});var Glt,Wlt=D(()=>{"use strict";Cc();Glt={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ki("x",t,{defaultPos:"mid"})),Ki("y",t,{defaultPos:"mid"})),Ef(t,"radius","arc")),Ef(t,"theta","arc"))}});var qlt,Hlt=D(()=>{"use strict";Cc();qlt={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),v2("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),v2("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),xF(t))}});var Ylt,Xlt=D(()=>{"use strict";Cc();Ylt={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ef(t,"x","bar")),Ef(t,"y","bar"))}});var Klt,Zlt=D(()=>{"use strict";Dr();Od();Cc();Klt={vgMark:"shape",encodeEntry:t=>Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{let{encoding:r}=t,n=r.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&Et(n)&&n.type===Rm?{field:vt(n,{expr:"datum"})}:{})]}}});var Qlt,Jlt=D(()=>{"use strict";Cc();Qlt={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Ef(t,"x","image")),Ef(t,"y","image")),b2(t,"url"))}});var eut,tut,rut=D(()=>{"use strict";Cc();eut={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ki("x",t,{defaultPos:"mid"})),Ki("y",t,{defaultPos:"mid"})),Xo("size",t,{vgChannel:"strokeWidth"})),xF(t))},tut={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ki("x",t,{defaultPos:"mid"})),Ki("y",t,{defaultPos:"mid"})),Xo("size",t)),xF(t))}});function w_e(t,r){let{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ki("x",t,{defaultPos:"mid"})),Ki("y",t,{defaultPos:"mid"})),Xo("size",t)),Xo("angle",t)),lgr(t,n,r))}function lgr(t,r,n){return n?{shape:{value:n}}:Xo("shape",t)}var nut,out,iut,sut=D(()=>{"use strict";Cc();nut={vgMark:"symbol",encodeEntry:t=>w_e(t)},out={vgMark:"symbol",encodeEntry:t=>w_e(t,"circle")},iut={vgMark:"symbol",encodeEntry:t=>w_e(t,"square")}});var aut,lut=D(()=>{"use strict";Cc();aut={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ef(t,"x","rect")),Ef(t,"y","rect"))}});var uut,cut=D(()=>{"use strict";Cc();uut={vgMark:"rule",encodeEntry:t=>{let{markDef:r}=t,n=r.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),v2("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),v2("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Xo("size",t,{vgChannel:"strokeWidth"}))}}});function ugr(t,r,n){if(ln("align",t,n)===void 0)return"center"}function cgr(t,r,n){if(ln("baseline",t,n)===void 0)return"middle"}var fut,dut=D(()=>{"use strict";Po();Cc();fut={vgMark:"text",encodeEntry:t=>{let{config:r,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Ki("x",t,{defaultPos:"mid"})),Ki("y",t,{defaultPos:"mid"})),b2(t)),Xo("size",t,{vgChannel:"fontSize"})),Xo("angle",t)),jK("align",ugr(t.markDef,n,r))),jK("baseline",cgr(t.markDef,n,r))),Ki("radius",t,{defaultPos:null,isMidPoint:!0})),Ki("theta",t,{defaultPos:null,isMidPoint:!0}))}}});function fgr(t){var r;let{config:n,markDef:o}=t,{orient:i}=o,s=i==="horizontal"?"width":"height",a=t.getScaleComponent(i==="horizontal"?"x":"y"),l=(r=ln("size",o,n,{vgChannel:s}))!==null&&r!==void 0?r:n.tick.bandSize;if(l!==void 0)return l;{let u=a?a.get("range"):void 0;return u&&Eu(u)&&wo(u.step)?u.step*3/4:lA(n.view,s)*3/4}}var put,hut=D(()=>{"use strict";or();g2();fo();Po();Cc();put={vgMark:"rect",encodeEntry:t=>{let{config:r,markDef:n}=t,o=n.orient,i=o==="horizontal"?"width":"height",s=o==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zi(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ki("x",t,{defaultPos:"mid",vgChannel:"xc"})),Ki("y",t,{defaultPos:"mid",vgChannel:"yc"})),Xo("size",t,{defaultValue:fgr(t),vgChannel:i})),{[s]:po(ln("thickness",n,r))})}}});function yut(t){return Gt([eA,QT,xnt],t.mark)?dgr(t):Gt([JT],t.mark)?pgr(t):$Z(t)}function dgr(t){let r=sK(t.mark,t.encoding),n=$Z(t,{fromPrefix:r.length>0?mut:""});return r.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:mut+t.requestDataName(Ps),data:t.requestDataName(Ps),groupby:r}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}function pgr(t){let r=jX.some(n=>ln(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&r){let[n]=$Z(t,{fromPrefix:gut}),o=t.scaleName(t.stack.fieldChannel),i=(d={})=>t.vgField(t.stack.fieldChannel,d),s=(d,p)=>{let h=[i({prefix:"min",suffix:"start",expr:p}),i({prefix:"max",suffix:"start",expr:p}),i({prefix:"min",suffix:"end",expr:p}),i({prefix:"max",suffix:"end",expr:p})];return`${d}(${h.map(m=>`scale('${o}',${m})`).join(",")})`},a,l;t.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},o2(n.encode.update,["y","yc","y2","height",...jX])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),l={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},df(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},o2(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),l={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},df(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(let d of jX){let p=Uy(d,t.markDef,t.config);n.encode.update[d]?(a[d]=n.encode.update[d],delete n.encode.update[d]):p&&(a[d]=po(p)),p&&(n.encode.update[d]={value:0})}let u=t.fieldDef(t.stack.groupbyChannel),c=vt(u)?[vt(u)]:[];return(u?.bin||u?.timeUnit)&&c.push(vt(u,{binSuffix:"end"})),a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,p)=>{if(n.encode.update[p])return Object.assign(Object.assign({},d),{[p]:n.encode.update[p]});{let h=Uy(p,t.markDef,t.config);return h!==void 0?Object.assign(Object.assign({},d),{[p]:po(h)}):d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(Ps),name:gut+t.requestDataName(Ps),groupby:c,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:l},marks:[n]}]}]}else return $Z(t)}function hgr(t){let{encoding:r,stack:n,mark:o,markDef:i,config:s}=t,a=r.order;if(!(!Lt(a)&&Tu(a)&&Mve(a.value)||!a&&Mve(ln("order",i,s)))){if((Lt(a)||Et(a))&&!n)return nK(a,{expr:"datum"});if(hf(o)){let l=i.orient==="horizontal"?"y":"x",u=r[l];if(Et(u)){let c=u.sort;if(Lt(c))return{field:vt(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(cl(c))return{field:vt({aggregate:oF(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(HX(c)){let f=t.fieldDef(c.encoding);return{field:vt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:vt(u,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function $Z(t,r={fromPrefix:""}){let{mark:n,markDef:o,config:i}=t,s=On(o.clip,mgr(t),ggr(t)),a=x1e(o),l=t.encoding.key,u=hgr(t),c=ygr(t),f=ln("aria",o,i),d=BZ[n].postEncodingTransform?BZ[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:BZ[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:r.fromPrefix+t.requestDataName(Ps)},encode:{update:BZ[n].encodeEntry(t)}}),d?{transform:d}:{})]}function mgr(t){let r=t.getScaleComponent("x"),n=t.getScaleComponent("y");return r&&r.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function ggr(t){let r=t.component.projection;return r&&!r.isFit?!0:void 0}function ygr(t){if(!t.component.selection)return null;let r=nt(t.component.selection).length,n=r,o=t.parent;for(;o&&n===0;)n=nt(o.component.selection).length,o=o.parent;return n?{interactive:r>0}:null}var BZ,mut,gut,but=D(()=>{"use strict";or();Dr();Wy();_c();sa();Mm();bt();fo();Po();Wlt();Hlt();Xlt();Zlt();Jlt();rut();sut();lut();cut();dut();hut();BZ={arc:Glt,area:qlt,bar:Ylt,circle:out,geoshape:Klt,image:Qlt,line:eut,point:nut,rect:aut,rule:uut,square:iut,text:fut,tick:put,trail:tut};mut="faceted_path_";gut="stack_group_"});var ZF,__e=D(()=>{"use strict";Ar();Dr();Wy();_c();_c();sa();aA();B1e();T$();v_e();WF();D$();zlt();L$();Vlt();but();ss();pA();fA();ZF=class extends PF{constructor(r,n,o,i={},s){var a,l;super(r,"unit",n,o,s,void 0,R1e(r)?r.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];let u=jl(r.mark)?r.mark.type:r.mark;this.markDef=Ult(r.mark,(a=r.encoding)!==null&&a!==void 0?a:{},s,{graticule:r.data&&s$(r.data)});let c=this.encoding=Hot((l=r.encoding)!==null&&l!==void 0?l:{},this.markDef,s);this.size=$lt({encoding:c,size:R1e(r)?Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{}):i}),this.stack=vK(u,c),this.specifiedScales=this.initScales(u,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegend(c),this.specifiedProjection=r.projection,this.selection=r.selection}get hasProjection(){let{encoding:r}=this,n=this.mark===TX,o=r&&jnt.some(i=>Or(r[i]));return n||o}scaleDomain(r){let n=this.specifiedScales[r];return n?n.domain:void 0}axis(r){return this.specifiedAxes[r]}legend(r){return this.specifiedLegends[r]}initScales(r,n){return l2.reduce((o,i)=>{var s;let a=Io(n[i]);return a&&(o[i]=(s=a.scale)!==null&&s!==void 0?s:{}),o},{})}initAxes(r){return xs.reduce((n,o)=>{let i=r[o];if(Or(i)||o===Jn&&Or(r.x2)||o===ui&&Or(r.y2)){let s=Or(i)?i.axis:void 0;n[o]=s&&Object.assign({},s)}return n},{})}initLegend(r){return qnt.reduce((n,o)=>{let i=Io(r[o]);if(i&&Ynt(o)){let s=i.legend;n[o]=s&&Object.assign({},s)}return n},{})}parseData(){this.component.data=k2(this)}parseLayoutSize(){Nlt(this)}parseSelections(){this.component.selection=dat(this,this.selection)}parseMarkGroup(){this.component.mark=yut(this)}parseAxesAndHeaders(){this.component.axes=Llt(this)}assembleSelectionTopLevelSignals(r){return Ast(this,r)}assembleSignals(){return[...QK(this),...Est(this,[])]}assembleSelectionData(r){return kst(this,r)}assembleLayout(){return null}assembleLayoutSignals(){return kF(this)}assembleMarks(){var r;let n=(r=this.component.mark)!==null&&r!==void 0?r:[];return(!this.parent||!zp(this.parent))&&(n=swe(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(r){return Vy(this.encoding,r)}fieldDef(r){let n=this.encoding[r];return zl(n)}typedFieldDef(r){let n=this.fieldDef(r);return la(n)?n:null}}});var zZ,xut=D(()=>{"use strict";cn();uF();bt();T$();v_e();WF();D$();L$();Hwe();ss();pA();__e();zZ=class t extends wA{constructor(r,n,o,i,s){super(r,"layer",n,o,s,r.resolve,r.view);let a=Object.assign(Object.assign(Object.assign({},i),r.width?{width:r.width}:{}),r.height?{height:r.height}:{});this.children=r.layer.map((l,u)=>{if(Mv(l))return new t(l,this,this.getName("layer_"+u),a,s);if(Ia(l))return new ZF(l,this,this.getName("layer_"+u),a,s);throw new Error(it.invalidSpec(l))})}parseData(){this.component.data=k2(this);for(let r of this.children)r.parseData()}parseLayoutSize(){Ilt(this)}parseSelections(){this.component.selection={};for(let r of this.children){r.parseSelections();for(let n of nt(r.component.selection))this.component.selection[n]=r.component.selection[n]}}parseMarkGroup(){for(let r of this.children)r.parseMarkGroup()}parseAxesAndHeaders(){Blt(this)}assembleSelectionTopLevelSignals(r){return this.children.reduce((n,o)=>o.assembleSelectionTopLevelSignals(n),r)}assembleSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleSignals()),QK(this))}assembleLayoutSignals(){return this.children.reduce((r,n)=>r.concat(n.assembleLayoutSignals()),kF(this))}assembleSelectionData(r){return this.children.reduce((n,o)=>o.assembleSelectionData(n),r)}assembleTitle(){let r=super.assembleTitle();if(r)return r;for(let n of this.children)if(r=n.assembleTitle(),r)return r}assembleLayout(){return null}assembleMarks(){return Ist(this,this.children.flatMap(r=>r.assembleMarks()))}assembleLegends(){return this.children.reduce((r,n)=>r.concat(n.assembleLegends()),sZ(this))}}});function KF(t,r,n,o,i){if(Nv(t))return new MZ(t,r,n,i);if(Mv(t))return new zZ(t,r,n,o,i);if(Ia(t))return new ZF(t,r,n,o,i);if(F1e(t))return new jZ(t,r,n,i);throw new Error(it.invalidSpec(t))}var PZ=D(()=>{"use strict";cn();uF();Rlt();b_e();xut();__e()});function vut(t,r={}){r.logger&&Jnt(r.logger),r.fieldTitle&&m1e(r.fieldTitle);try{let n=bK(NB(r.config,t.config)),o=TK(t,n),i=KF(o,null,"",void 0,n);return i.parse(),rlt(i.component.data,i),{spec:xgr(i,bgr(t,o.autosize,n,i),t.datasets,t.usermeta),normalized:o}}finally{r.logger&&eot(),r.fieldTitle&&Wot()}}function bgr(t,r,n,o){let i=o.component.layoutSize.get("width"),s=o.component.layoutSize.get("height");if(r===void 0?(r={type:"pad"},o.hasAxisOrientSignalRef()&&(r.resize=!0)):dr(r)&&(r={type:r}),i&&s&&Fit(r.type)){if(i==="step"&&s==="step")st(it.droppingFit()),r.type="pad";else if(i==="step"||s==="step"){let a=i==="step"?"width":"height";st(it.droppingFit(a2(a)));let l=a==="width"?"height":"width";r.type=Rit(l)}}return Object.assign(Object.assign(Object.assign({},nt(r).length===1&&r.type?r.type==="pad"?{}:{autosize:r.type}:{autosize:r}),V1e(n)),V1e(t))}function xgr(t,r,n={},o){let i=t.config?git(t.config):void 0,s=[].concat(t.assembleSelectionData([]),Clt(t.component.data,n)),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0),f=t.assembleLayoutSignals();return f=f.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(r[d.name]=+d.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),r),l?{title:l}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:s}),a.length>0?{projections:a}:{}),t.assembleGroup([...f,...t.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),o?{usermeta:o}:{})}var wut=D(()=>{"use strict";or();Ar();Dr();g2();cn();U1e();Mit();bt();PZ();y_e();IZ()});function _ut(t,r){return vgr.map(t,{config:r})}var S_e,vgr,Sut=D(()=>{"use strict";_c();L1e();S_e=class extends cF{mapUnit(r,{config:n}){if(r.encoding){let{encoding:o,transform:i}=r,{bins:s,timeUnits:a,aggregate:l,groupby:u,encoding:c}=iF(o,n),f=[...i||[],...s,...a,...l.length===0?[]:[{aggregate:l,groupby:u}]];return Object.assign(Object.assign(Object.assign({},r),f.length>0?{transform:f}:{}),{encoding:c})}else return r}},vgr=new S_e});var C_e={};fn(C_e,{compile:()=>vut,extractTransforms:()=>_ut,normalize:()=>TK,version:()=>wgr});var wgr,Cut=D(()=>{"use strict";vrt();U1e();wut();Sut();wgr=wrt.version});function _gr(t){let[r,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:r,version:n}}var E_e,Eut=D(()=>{"use strict";E_e=_gr});var O_e={};fn(O_e,{carbong10:()=>v0r,carbong100:()=>_0r,carbong90:()=>w0r,carbonwhite:()=>x0r,dark:()=>Ugr,excel:()=>Vgr,fivethirtyeight:()=>qgr,ggplot2:()=>Hgr,googlecharts:()=>i0r,latimes:()=>Zgr,powerbi:()=>m0r,quartz:()=>Qgr,urbaninstitute:()=>o0r,version:()=>S0r,vox:()=>Jgr});function qZ({theme:t,background:r}){let n=["white","g10"].includes(t)?"light":"dark",o=WZ.gridBg[t],i=WZ.textPrimary[t],s=WZ.textSecondary[t],a=n==="dark"?y0r:b0r,l=n==="dark"?"#d4bbff":"#6929c4";return{background:r,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:o,stroke:o},group:{fill:o},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:I_e,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:g0r,labelFontWeight:D_e,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:WZ.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:I_e,fill:s,fontWeight:D_e},"guide-title":{font:I_e,fill:s,fontWeight:D_e}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}var Sgr,Cgr,Egr,Tgr,Agr,kgr,Igr,Dgr,Ngr,Ogr,Fgr,Rgr,Mgr,Pgr,jgr,Lgr,Bgr,$gr,zgr,QF,Tut,Ugr,SA,Vgr,CA,T_e,Ggr,Wgr,Aut,kut,qgr,EA,Hgr,Ygr,Xgr,Iut,Dut,Kgr,TA,A_e,Nut,Out,B$,Zgr,AA,UZ,Qgr,kA,Jgr,Vp,Fut,e0r,VZ,k_e,t0r,r0r,n0r,$$,o0r,IA,Rut,GZ,i0r,N_e,Mut,Put,jut,z$,Lut,But,U$,$ut,s0r,Vm,a0r,l0r,u0r,c0r,f0r,d0r,p0r,Uut,Vut,zut,h0r,m0r,I_e,g0r,D_e,WZ,y0r,b0r,x0r,v0r,w0r,_0r,S0r,Gut=D(()=>{"use strict";Sgr="vega-themes",Cgr="2.15.0",Egr="Themes for stylized Vega and Vega-Lite visualizations.",Tgr=["vega","vega-lite","themes","style"],Agr="BSD-3-Clause",kgr={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Igr=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Dgr="build/vega-themes.js",Ngr="build/vega-themes.module.js",Ogr="build/vega-themes.min.js",Fgr="build/vega-themes.min.js",Rgr="build/vega-themes.module.d.ts",Mgr={type:"git",url:"https://github.com/vega/vega-themes.git"},Pgr=["src","build"],jgr={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Lgr={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Bgr={vega:"*","vega-lite":"*"},$gr={},zgr={name:Sgr,version:Cgr,description:Egr,keywords:Tgr,license:Agr,author:kgr,contributors:Igr,main:Dgr,module:Ngr,unpkg:Ogr,jsdelivr:Fgr,types:Rgr,repository:Mgr,files:Pgr,scripts:jgr,devDependencies:Lgr,peerDependencies:Bgr,dependencies:$gr},QF="#fff",Tut="#888",Ugr={background:"#333",view:{stroke:Tut},title:{color:QF,subtitleColor:QF},style:{"guide-label":{fill:QF},"guide-title":{fill:QF}},axis:{domainColor:QF,gridColor:Tut,tickColor:QF}},SA="#4572a7",Vgr={background:"#fff",arc:{fill:SA},area:{fill:SA},line:{stroke:SA,strokeWidth:2},path:{stroke:SA},rect:{fill:SA},shape:{stroke:SA},symbol:{fill:SA,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},CA="#30a2da",T_e="#cbcbcb",Ggr="#999",Wgr="#333",Aut="#f0f0f0",kut="#333",qgr={arc:{fill:CA},area:{fill:CA},axis:{domainColor:T_e,grid:!0,gridColor:T_e,gridWidth:1,labelColor:Ggr,labelFontSize:10,titleColor:Wgr,tickColor:T_e,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Aut,group:{fill:Aut},legend:{labelColor:kut,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:kut,titleFontSize:14,titlePadding:10},line:{stroke:CA,strokeWidth:2},path:{stroke:CA,strokeWidth:.5},rect:{fill:CA},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:CA},bar:{binSpacing:2,fill:CA,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},EA="#000",Hgr={group:{fill:"#e5e5e5"},arc:{fill:EA},area:{fill:EA},line:{stroke:EA},path:{stroke:EA},rect:{fill:EA},shape:{stroke:EA},symbol:{fill:EA,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ygr=22,Xgr="normal",Iut="Benton Gothic, sans-serif",Dut=11.5,Kgr="normal",TA="#82c6df",A_e="Benton Gothic Bold, sans-serif",Nut="normal",Out=13,B$={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Zgr={background:"#ffffff",title:{anchor:"start",color:"#000000",font:A_e,fontSize:Ygr,fontWeight:Xgr},arc:{fill:TA},area:{fill:TA},line:{stroke:TA,strokeWidth:2},path:{stroke:TA},rect:{fill:TA},shape:{stroke:TA},symbol:{fill:TA,size:30},axis:{labelFont:Iut,labelFontSize:Dut,labelFontWeight:Kgr,titleFont:A_e,titleFontSize:Out,titleFontWeight:Nut},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Iut,labelFontSize:Dut,symbolType:"square",titleFont:A_e,titleFontSize:Out,titleFontWeight:Nut},range:{category:B$["category-6"],diverging:B$["fireandice-6"],heatmap:B$["fire-7"],ordinal:B$["fire-7"],ramp:B$["fire-7"]}},AA="#ab5787",UZ="#979797",Qgr={background:"#f9f9f9",arc:{fill:AA},area:{fill:AA},line:{stroke:AA},path:{stroke:AA},rect:{fill:AA},shape:{stroke:AA},symbol:{fill:AA,size:30},axis:{domainColor:UZ,domainWidth:.5,gridWidth:.2,labelColor:UZ,tickColor:UZ,tickWidth:.2,titleColor:UZ},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},kA="#3e5c69",Jgr={background:"#fff",arc:{fill:kA},area:{fill:kA},line:{stroke:kA},path:{stroke:kA},rect:{fill:kA},shape:{stroke:kA},symbol:{fill:kA},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Vp="#1696d2",Fut="#000000",e0r="#FFFFFF",VZ="Lato",k_e="Lato",t0r="Lato",r0r="#DEDDDD",n0r=18,$$={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},o0r={background:e0r,title:{anchor:"start",fontSize:n0r,font:VZ},axisX:{domain:!0,domainColor:Fut,domainWidth:1,grid:!1,labelFontSize:12,labelFont:k_e,labelAngle:0,tickColor:Fut,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:VZ},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:r0r,gridWidth:1,labelFontSize:12,labelFont:k_e,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:VZ,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:k_e,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:VZ,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$$["six-groups-cat-1"],diverging:$$["diverging-colors"],heatmap:$$["diverging-colors"],ordinal:$$["six-groups-seq"],ramp:$$["shades-blue"]},area:{fill:Vp},rect:{fill:Vp},line:{color:Vp,stroke:Vp,strokeWidth:5},trail:{color:Vp,stroke:Vp,strokeWidth:0,size:1},path:{stroke:Vp,strokeWidth:.5},point:{filled:!0},text:{font:t0r,color:Vp,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Vp,stroke:null}},arc:{fill:Vp},shape:{stroke:Vp},symbol:{fill:Vp,size:30}},IA="#3366CC",Rut="#ccc",GZ="Arial, sans-serif",i0r={arc:{fill:IA},area:{fill:IA},path:{stroke:IA},rect:{fill:IA},shape:{stroke:IA},symbol:{stroke:IA},circle:{fill:IA},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:GZ,fontSize:12},"guide-title":{font:GZ,fontSize:12},"group-title":{font:GZ,fontSize:12}},title:{font:GZ,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Rut,tickColor:Rut,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},N_e=t=>t*(1/3+1),Mut=N_e(9),Put=N_e(10),jut=N_e(12),z$="Segoe UI",Lut="wf_standard-font, helvetica, arial, sans-serif",But="#252423",U$="#605E5C",$ut="transparent",s0r="#C8C6C4",Vm="#118DFF",a0r="#12239E",l0r="#E66C37",u0r="#6B007B",c0r="#E044A7",f0r="#744EC2",d0r="#D9B300",p0r="#D64550",Uut=Vm,Vut="#DEEFFF",zut=[Vut,Uut],h0r=[Vut,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Uut],m0r={view:{stroke:$ut},background:$ut,font:z$,header:{titleFont:Lut,titleFontSize:jut,titleColor:But,labelFont:z$,labelFontSize:Put,labelColor:U$},axis:{ticks:!1,grid:!1,domain:!1,labelColor:U$,labelFontSize:Mut,titleFont:Lut,titleColor:But,titleFontSize:jut,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:s0r,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Vm},line:{stroke:Vm,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:z$,fontSize:Mut,fill:U$},arc:{fill:Vm},area:{fill:Vm,line:!0,opacity:.6},path:{stroke:Vm},rect:{fill:Vm},point:{fill:Vm,filled:!0,size:75},shape:{stroke:Vm},symbol:{fill:Vm,strokeWidth:1.5,size:50},legend:{titleFont:z$,titleFontWeight:"bold",titleColor:U$,labelFont:z$,labelFontSize:Put,labelColor:U$,symbolType:"circle",symbolSize:75},range:{category:[Vm,a0r,l0r,u0r,c0r,f0r,d0r,p0r],diverging:zut,heatmap:zut,ordinal:h0r}},I_e='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',g0r='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',D_e=400,WZ={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},y0r=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],b0r=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];x0r=qZ({theme:"white",background:"#ffffff"}),v0r=qZ({theme:"g10",background:"#f4f4f4"}),w0r=qZ({theme:"g90",background:"#262626"}),_0r=qZ({theme:"g100",background:"#161616"}),S0r=zgr.version});function q0r(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function H0r(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return G0r.toString().replace(qut,t)}function Y0r(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n}function X0r(t,r,n){if(Hr(t))return`[${t.map(o=>r(Zn(o)?o:Wut(o,n))).join(", ")}]`;if(un(t)){let o="",i=t,{title:s,image:a}=i,l=Y0r(i,["title","image"]);s&&(o+=`<h2>${r(s)}</h2>`),a&&(o+=`<img src="${r(a)}">`);let u=Object.keys(l);if(u.length>0){o+="<table>";for(let c of u){let f=l[c];f!==void 0&&(un(f)&&(f=Wut(f,n)),o+=`<tr><td class="key">${r(c)}:</td><td class="value">${r(f)}</td></tr>`)}o+="</table>"}return o||"{}"}return r(t)}function K0r(t){let r=[];return function(n,o){if(typeof o!="object"||o===null)return o;let i=r.indexOf(this)+1;return r.length=i,r.length>t?"[Object]":r.indexOf(o)>=0?"[Circular]":(r.push(o),o)}}function Wut(t,r){return JSON.stringify(t,K0r(r))}function Z0r(t,r,n,o){let i=t.clientX+n;i+r.width>window.innerWidth&&(i=+t.clientX-n-r.width);let s=t.clientY+o;return s+r.height>window.innerHeight&&(s=+t.clientY-o-r.height),{x:i,y:s}}var C0r,E0r,T0r,A0r,k0r,I0r,D0r,N0r,O0r,F0r,R0r,M0r,P0r,j0r,L0r,B0r,$0r,z0r,U0r,V0r,G0r,qut,W0r,HZ,Vxo,Hut=D(()=>{"use strict";Os();C0r="vega-tooltip",E0r="0.25.1",T0r="A tooltip plugin for Vega-Lite and Vega visualizations.",A0r=["vega-lite","vega","tooltip"],k0r={type:"git",url:"https://github.com/vega/vega-tooltip.git"},I0r={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},D0r=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],N0r="BSD-3-Clause",O0r={url:"https://github.com/vega/vega-tooltip/issues"},F0r="https://github.com/vega/vega-tooltip#readme",R0r="build/vega-tooltip.js",M0r="build/vega-tooltip.module.js",P0r="build/vega-tooltip.min.js",j0r="build/vega-tooltip.min.js",L0r="build/vega-tooltip.module.d.ts",B0r=["src","build","types"],$0r={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"beemo jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"beemo create-config && yarn copy:data",prettierbase:"beemo prettier '*.{css,scss,html}'",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check"},z0r={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@wessberg/rollup-plugin-ts":"^1.3.8","browser-sync":"^2.26.14",concurrently:"^6.0.0","gh-pages":"^3.1.0","node-sass":"^5.0.0",path:"^0.12.7",rollup:"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"~4.2.2","vega-datasets":"^2.2.0","vega-lite-dev-config":"^0.16.1","vega-typings":"^0.19.2"},U0r={"vega-util":"^1.16.0"},V0r={name:C0r,version:E0r,description:T0r,keywords:A0r,repository:k0r,author:I0r,collaborators:D0r,license:N0r,bugs:O0r,homepage:F0r,main:R0r,module:M0r,unpkg:P0r,jsdelivr:j0r,types:L0r,files:B0r,scripts:$0r,devDependencies:z0r,dependencies:U0r},G0r=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,qut="vg-tooltip-element",W0r={offsetX:10,offsetY:10,id:qut,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:q0r,maxDepth:2};HZ=class{constructor(r){this.options=Object.assign(Object.assign({},W0r),r);let n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){let o=document.createElement("style");o.setAttribute("id",this.options.styleId),o.innerHTML=H0r(n);let i=document.head;i.childNodes.length>0?i.insertBefore(o,i.childNodes[0]):i.appendChild(o)}}tooltipHandler(r,n,o,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=X0r(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);let{x:a,y:l}=Z0r(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${l}px; left: ${a}px`)}},Vxo=V0r.version});var DA={};fn(DA,{DEFAULT_ACTIONS:()=>Jut,default:()=>cyr,guessMode:()=>ect,vega:()=>zv,vegaLite:()=>JF});function KZ(t,r,n,o){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(f){try{c(o.next(f))}catch(d){a(d)}}function u(f){try{c(o.throw(f))}catch(d){a(d)}}function c(f){f.done?s(f.value):i(f.value).then(l,u)}c((o=o.apply(t,r||[])).next())})}function Q0r(t,r,n){let o=t.open(r),i=1e4,s=250,{origin:a}=new URL(r),l=~~(i/s);function u(f){f.source===o&&(l=0,t.removeEventListener("message",u,!1))}t.addEventListener("message",u,!1);function c(){l<=0||(o.postMessage(n,a),setTimeout(c,s),l-=1)}setTimeout(c,s)}function Qut(t,...r){for(let n of r)eyr(t,n);return t}function eyr(t,r){for(let n of Object.keys(r))Q3(t,n,r[n],!0)}function iyr(t){return typeof t=="function"}function Yut(t,r,n,o){let i=`<html><head>${r}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+s),a.document.title=`${V$[o]} JSON Source`}function ect(t,r){var n;if(t.$schema){let o=E_e(t.$schema);r&&r!==o.library&&console.warn(`The given visualization spec is written in ${V$[o.library]}, but mode argument sets ${(n=V$[r])!==null&&n!==void 0?n:r}.`);let i=o.library;return(0,R_e.satisfies)(ZZ[i],`^${o.version.slice(1)}`)||console.warn(`The input spec uses ${V$[i]} ${o.version}, but the current version of ${V$[i]} is v${ZZ[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":r??"vega"}function syr(t){return!!(t&&"load"in t)}function Xut(t){return syr(t)?t:zv.loader(t)}function Kut(t){var r;return(r=t.usermeta&&t.usermeta.embedOptions)!==null&&r!==void 0?r:{}}function ayr(t,r,n={}){var o,i,s;return KZ(this,void 0,void 0,function*(){let a,l;Zn(r)?(l=Xut(n.loader),a=JSON.parse(yield l.load(r))):a=r;let u=Kut(a).loader;(!l||u)&&(l=Xut((o=n.loader)!==null&&o!==void 0?o:u));let c=yield Zut(Kut(a),l),f=yield Zut(n,l),d=Object.assign(Object.assign({},Qut(f,c)),{config:tD((i=f.config)!==null&&i!==void 0?i:{},(s=c.config)!==null&&s!==void 0?s:{})});return yield uyr(t,a,d,l)})}function Zut(t,r){var n;return KZ(this,void 0,void 0,function*(){let o=Zn(t.config)?JSON.parse(yield r.load(t.config)):(n=t.config)!==null&&n!==void 0?n:{},i=Zn(t.patch)?JSON.parse(yield r.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),o?{config:o}:{})})}function lyr(t){var r;let n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(r=document.head)!==null&&r!==void 0?r:document.body}}function uyr(t,r,n={},o){var i,s,a,l,u,c;return KZ(this,void 0,void 0,function*(){let f=n.theme?tD(O_e[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,d=Qse(n.actions)?n.actions:Qut({},Jut,(s=n.actions)!==null&&s!==void 0?s:{}),p=Object.assign(Object.assign({},tyr),n.i18n),h=(a=n.renderer)!==null&&a!==void 0?a:"canvas",m=(l=n.logLevel)!==null&&l!==void 0?l:zv.Warn,g=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization",y=typeof t=="string"?document.querySelector(t):t;if(!y)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){let k="vega-embed-style",{root:R,rootContainer:I}=lyr(y);if(!R.getElementById(k)){let L=document.createElement("style");L.id=k,L.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?J0r.toString():n.defaultStyle,I.appendChild(L)}}let b=ect(r,n.mode),x=ryr[b](r,f);if(b==="vega-lite"&&x.$schema){let k=E_e(x.$schema);(0,R_e.satisfies)(ZZ.vega,`^${k.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${k.version}, but current version is v${ZZ.vega}.`)}y.classList.add("vega-embed"),d&&y.classList.add("has-actions"),y.innerHTML="";let v=y;if(d){let k=document.createElement("div");k.classList.add(oyr),y.appendChild(k),v=k}let w=n.patch;w&&(w instanceof Function?x=w(x):x=QI(x,w,!0,!1).newDocument),n.formatLocale&&zv.formatLocale(n.formatLocale),n.timeFormatLocale&&zv.timeFormatLocale(n.timeFormatLocale);let{ast:_}=n,C=zv.parse(x,b==="vega-lite"?{}:f,{ast:_}),S=new(n.viewClass||zv.View)(C,Object.assign({loader:o,logLevel:m,renderer:h},_?{expr:zv.expressionInterpreter}:{}));if(n.tooltip!==!1){let k;iyr(n.tooltip)?k=n.tooltip:k=new HZ(n.tooltip===!0?{}:n.tooltip).call,S.tooltip(k)}let{hover:E}=n;if(E===void 0&&(E=b==="vega"),E){let{hoverSet:k,updateSet:R}=typeof E=="boolean"?{}:E;S.hover(k,R)}n&&(n.width!=null&&S.width(n.width),n.height!=null&&S.height(n.height),n.padding!=null&&S.padding(n.padding)),yield S.initialize(v,n.bind).runAsync();let A;if(d!==!1){let k=y;if(n.defaultStyle!==!1){let I=document.createElement("details");I.title=p.CLICK_TO_VIEW_ACTIONS,y.append(I),k=I;let L=document.createElement("summary");L.innerHTML=nyr,I.append(L),A=j=>{I.contains(j.target)||I.removeAttribute("open")},document.addEventListener("click",A)}let R=document.createElement("div");if(k.append(R),R.classList.add("vega-actions"),d===!0||d.export!==!1){for(let I of["svg","png"])if(d===!0||d.export===!0||d.export[I]){let L=p[`${I.toUpperCase()}_ACTION`],j=document.createElement("a");j.text=L,j.href="#",j.target="_blank",j.download=`${g}.${I}`,j.addEventListener("mousedown",function(M){return KZ(this,void 0,void 0,function*(){M.preventDefault();let V=yield S.toImageURL(I,n.scaleFactor);this.href=V})}),R.append(j)}}if(d===!0||d.source!==!1){let I=document.createElement("a");I.text=p.SOURCE_ACTION,I.href="#",I.addEventListener("click",function(L){var j,M;Yut((0,XZ.default)(r),(j=n.sourceHeader)!==null&&j!==void 0?j:"",(M=n.sourceFooter)!==null&&M!==void 0?M:"",b),L.preventDefault()}),R.append(I)}if(b==="vega-lite"&&(d===!0||d.compiled!==!1)){let I=document.createElement("a");I.text=p.COMPILED_ACTION,I.href="#",I.addEventListener("click",function(L){var j,M;Yut((0,XZ.default)(x),(j=n.sourceHeader)!==null&&j!==void 0?j:"",(M=n.sourceFooter)!==null&&M!==void 0?M:"","vega"),L.preventDefault()}),R.append(I)}if(d===!0||d.editor!==!1){let I=(c=n.editorUrl)!==null&&c!==void 0?c:"https://vega.github.io/editor/",L=document.createElement("a");L.text=p.EDITOR_ACTION,L.href="#",L.addEventListener("click",function(j){Q0r(window,I,{config:f,mode:b,renderer:h,spec:(0,XZ.default)(r)}),j.preventDefault()}),R.append(L)}}function N(){A&&document.removeEventListener("click",A),S.finalize()}return{view:S,spec:r,vgSpec:x,finalize:N}})}var XZ,R_e,J0r,F_e,zv,JF,YZ,Jut,tyr,V$,ZZ,ryr,nyr,oyr,cyr,NA=D(()=>{"use strict";JPe();XZ=Bf(tje()),R_e=Bf(qLe());Sve();Sve();Cut();Eut();Gut();Hut();J0r=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(t,r){return this.substr(!r||r<0?0:+r,t.length)===t});zv=_ve,JF=C_e,YZ=typeof window<"u"?window:void 0;JF===void 0&&(!((F_e=YZ?.vl)===null||F_e===void 0)&&F_e.compile)&&(JF=YZ.vl);Jut={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},tyr={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},V$={vega:"Vega","vega-lite":"Vega-Lite"},ZZ={vega:zv.version,"vega-lite":JF?JF.version:"not available"},ryr={vega:t=>t,"vega-lite":(t,r)=>JF.compile(t,{config:r}).spec},nyr=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,oyr="chart-wrapper";cyr=ayr});var QZ=gt((Xxo,rct)=>{"use strict";var tct=Object.getOwnPropertySymbols,fyr=Object.prototype.hasOwnProperty,dyr=Object.prototype.propertyIsEnumerable;function pyr(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function hyr(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(r).map(function(s){return r[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}rct.exports=hyr()?Object.assign:function(t,r){for(var n,o=pyr(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)fyr.call(n,a)&&(o[a]=n[a]);if(tct){i=tct(n);for(var l=0;l<i.length;l++)dyr.call(n,i[l])&&(o[i[l]]=n[i[l]])}}return o}});var act=gt(P_e=>{"use strict";Object.defineProperty(P_e,"__esModule",{value:!0});P_e.StyleSheet=sct;var myr=QZ(),gyr=yyr(myr);function yyr(t){return t&&t.__esModule?t:{default:t}}function byr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function M_e(t){return t[t.length-1]}function nct(t){if(t.sheet)return t.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===t)return document.styleSheets[r]}var OA=typeof window<"u",ict=!1,xyr=!1,vyr=function(){if(OA){var t=document.createElement("div");return t.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",t.getElementsByTagName("i").length===1}}();function oct(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function sct(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.speedy,n=r===void 0?!ict&&!xyr:r,o=t.maxLength,i=o===void 0?OA&&vyr?4e3:65e3:o;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,gyr.default)(sct.prototype,{getSheet:function(){return nct(M_e(this.tags))},inject:function(){var r=this;if(this.injected)throw new Error("already injected stylesheet!");OA?this.tags[0]=oct():this.sheet={cssRules:[],insertRule:function(o){r.sheet.cssRules.push({cssText:o})}},this.injected=!0},speedy:function(r){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+r+") earlier in your app, or call flush() before speedy("+r+")");this.isSpeedy=!!r},_insert:function(r){try{var n=this.getSheet();n.insertRule(r,r.indexOf("@import")!==-1?0:n.cssRules.length)}catch{ict&&console.warn("whoops, illegal rule inserted",r)}},insert:function(r){if(OA)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(r);else if(r.indexOf("@import")!==-1){var n=M_e(this.tags);n.insertBefore(document.createTextNode(r),n.firstChild)}else M_e(this.tags).appendChild(document.createTextNode(r));else this.sheet.insertRule(r,r.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,OA&&this.ctr%this.maxLength===0&&this.tags.push(oct()),this.ctr-1},delete:function(r){return this.replace(r,"")},flush:function(){OA?(this.tags.forEach(function(r){return r.parentNode.removeChild(r)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!OA)return this.sheet.cssRules;var r=[];return this.tags.forEach(function(n){return r.splice.apply(r,[r.length,0].concat(byr(Array.from(nct(n).cssRules))))}),r}})});var uct=gt((Zxo,lct)=>{"use strict";var wyr=/-(.)/g;function _yr(t){return t.replace(wyr,function(r,n){return n.toUpperCase()})}lct.exports=_yr});var fct=gt((Qxo,cct)=>{"use strict";var Syr=uct(),Cyr=/^-ms-/;function Eyr(t){return Syr(t.replace(Cyr,"ms-"))}cct.exports=Eyr});var dct=gt(j_e=>{"use strict";Object.defineProperty(j_e,"__esModule",{value:!0});var JZ={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function Tyr(t,r){return t+r.charAt(0).toUpperCase()+r.substring(1)}var Ayr=["Webkit","ms","Moz","O"];Object.keys(JZ).forEach(function(t){Ayr.forEach(function(r){JZ[Tyr(r,t)]=JZ[t]})});var kyr={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},Iyr={isUnitlessNumber:JZ,shorthandPropertyExpansions:kyr};j_e.default=Iyr});var hct=gt((evo,pct)=>{"use strict";function eQ(t){return function(){return t}}var FA=function(){};FA.thatReturns=eQ;FA.thatReturnsFalse=eQ(!1);FA.thatReturnsTrue=eQ(!0);FA.thatReturnsNull=eQ(null);FA.thatReturnsThis=function(){return this};FA.thatReturnsArgument=function(t){return t};pct.exports=FA});var L_e=gt((tvo,mct)=>{"use strict";var Dyr=hct(),Nyr=Dyr;mct.exports=Nyr});var bct=gt(B_e=>{"use strict";Object.defineProperty(B_e,"__esModule",{value:!0});var Oyr=dct(),Fyr=yct(Oyr),Ryr=L_e(),rvo=yct(Ryr);function yct(t){return t&&t.__esModule?t:{default:t}}var gct=Fyr.default.isUnitlessNumber;function Myr(t,r,n){var o=r==null||typeof r=="boolean"||r==="";if(o)return"";var i=isNaN(r);if(i||r===0||gct.hasOwnProperty(t)&&gct[t])return""+r;if(typeof r=="string"){if(0&&n&&r!=="0"){var s,a,l;if(a)var u}r=r.trim()}return r+"px"}B_e.default=Myr});var vct=gt((ovo,xct)=>{"use strict";var Pyr=/([A-Z])/g;function jyr(t){return t.replace(Pyr,"-$1").toLowerCase()}xct.exports=jyr});var _ct=gt((ivo,wct)=>{"use strict";var Lyr=vct(),Byr=/^ms-/;function $yr(t){return Lyr(t).replace(Byr,"-ms-")}wct.exports=$yr});var Cct=gt((svo,Sct)=>{"use strict";function zyr(t){var r={};return function(n){return r.hasOwnProperty(n)||(r[n]=t.call(this,n)),r[n]}}Sct.exports=zyr});var $_e=gt(W$=>{"use strict";Object.defineProperty(W$,"__esModule",{value:!0});W$.processStyleName=void 0;W$.createMarkupForStyles=Zyr;var Uyr=fct(),avo=G$(Uyr),Vyr=bct(),Gyr=G$(Vyr),Wyr=_ct(),qyr=G$(Wyr),Hyr=Cct(),Yyr=G$(Hyr),Xyr=L_e(),lvo=G$(Xyr);function G$(t){return t&&t.__esModule?t:{default:t}}var Kyr=W$.processStyleName=(0,Yyr.default)(qyr.default);function Zyr(t,r){var n="";for(var o in t){var i=o.indexOf("--")===0;if(t.hasOwnProperty(o)&&o!=="label"){var s=t[o];s!=null&&(i?n+=o+":"+s+";":(n+=Kyr(o)+":",n+=(0,Gyr.default)(o,s,r)+";"))}}return n||null}});var Tct=gt(U_e=>{"use strict";Object.defineProperty(U_e,"__esModule",{value:!0});var Ect=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};U_e.default=z_e;function Qyr(t){return t==null||t===!1||(typeof t>"u"?"undefined":Ect(t))==="object"&&Object.keys(t).length===0}function Jyr(t){if(Qyr(t))return null;if((typeof t>"u"?"undefined":Ect(t))!=="object")return t;for(var r={},n=Object.keys(t),o=!1,i=0;i<n.length;i++){var s=t[n[i]],a=z_e(s);(a===null||a!==s)&&(o=!0),a!==null&&(r[n[i]]=a)}return Object.keys(r).length===0?null:o?r:t}function ebr(t){var r=!1,n=[];return t.forEach(function(o){var i=z_e(o);(i===null||i!==o)&&(r=!0),i!==null&&n.push(i)}),n.length==0?null:r?n:t}function z_e(t){return Array.isArray(t)?ebr(t):Jyr(t)}});var Ict=gt((tQ,kct)=>{"use strict";Object.defineProperty(tQ,"__esModule",{value:!0});var Xt=["Webkit"],Act=["Moz"],js=["ms"],Gm=["Webkit","Moz"],Zy=["Webkit","ms"],q$=["Webkit","Moz","ms"];tQ.default={plugins:[],prefixMap:{appearance:Gm,userSelect:q$,textEmphasisPosition:Xt,textEmphasis:Xt,textEmphasisStyle:Xt,textEmphasisColor:Xt,boxDecorationBreak:Xt,clipPath:Xt,maskImage:Xt,maskMode:Xt,maskRepeat:Xt,maskPosition:Xt,maskClip:Xt,maskOrigin:Xt,maskSize:Xt,maskComposite:Xt,mask:Xt,maskBorderSource:Xt,maskBorderMode:Xt,maskBorderSlice:Xt,maskBorderWidth:Xt,maskBorderOutset:Xt,maskBorderRepeat:Xt,maskBorder:Xt,maskType:Xt,textDecorationStyle:Xt,textDecorationSkip:Xt,textDecorationLine:Xt,textDecorationColor:Xt,filter:Xt,fontFeatureSettings:Xt,breakAfter:q$,breakBefore:q$,breakInside:q$,columnCount:Gm,columnFill:Gm,columnGap:Gm,columnRule:Gm,columnRuleColor:Gm,columnRuleStyle:Gm,columnRuleWidth:Gm,columns:Gm,columnSpan:Gm,columnWidth:Gm,writingMode:Zy,flex:Xt,flexBasis:Xt,flexDirection:Xt,flexGrow:Xt,flexFlow:Xt,flexShrink:Xt,flexWrap:Xt,alignContent:Xt,alignItems:Xt,alignSelf:Xt,justifyContent:Xt,order:Xt,transform:Xt,transformOrigin:Xt,transformOriginX:Xt,transformOriginY:Xt,backfaceVisibility:Xt,perspective:Xt,perspectiveOrigin:Xt,transformStyle:Xt,transformOriginZ:Xt,animation:Xt,animationDelay:Xt,animationDirection:Xt,animationFillMode:Xt,animationDuration:Xt,animationIterationCount:Xt,animationName:Xt,animationPlayState:Xt,animationTimingFunction:Xt,backdropFilter:Xt,fontKerning:Xt,scrollSnapType:Zy,scrollSnapPointsX:Zy,scrollSnapPointsY:Zy,scrollSnapDestination:Zy,scrollSnapCoordinate:Zy,shapeImageThreshold:Xt,shapeImageMargin:Xt,shapeImageOutside:Xt,hyphens:q$,flowInto:Zy,flowFrom:Zy,regionFragment:Zy,textAlignLast:Act,tabSize:Act,wrapFlow:js,wrapThrough:js,wrapMargin:js,gridTemplateColumns:js,gridTemplateRows:js,gridTemplateAreas:js,gridTemplate:js,gridAutoColumns:js,gridAutoRows:js,gridAutoFlow:js,grid:js,gridRowStart:js,gridColumnStart:js,gridRowEnd:js,gridRow:js,gridColumn:js,gridColumnEnd:js,gridColumnGap:js,gridRowGap:js,gridArea:js,gridGap:js,textSizeAdjust:Zy,borderImage:Xt,borderImageOutset:Xt,borderImageRepeat:Xt,borderImageSlice:Xt,borderImageSource:Xt,borderImageWidth:Xt,transitionDelay:Xt,transitionDuration:Xt,transitionProperty:Xt,transitionTimingFunction:Xt}};kct.exports=tQ.default});var V_e=gt((rQ,Dct)=>{"use strict";Object.defineProperty(rQ,"__esModule",{value:!0});rQ.default=tbr;function tbr(t){return t.charAt(0).toUpperCase()+t.slice(1)}Dct.exports=rQ.default});var Oct=gt((nQ,Nct)=>{"use strict";Object.defineProperty(nQ,"__esModule",{value:!0});nQ.default=ibr;var rbr=V_e(),nbr=obr(rbr);function obr(t){return t&&t.__esModule?t:{default:t}}function ibr(t,r,n){if(t.hasOwnProperty(r))for(var o=t[r],i=0,s=o.length;i<s;++i)n[o[i]+(0,nbr.default)(r)]=n[r]}Nct.exports=nQ.default});var Rct=gt((oQ,Fct)=>{"use strict";Object.defineProperty(oQ,"__esModule",{value:!0});oQ.default=sbr;function sbr(t,r,n,o,i){for(var s=0,a=t.length;s<a;++s){var l=t[s](r,n,o,i);if(l)return l}}Fct.exports=oQ.default});var Pct=gt((iQ,Mct)=>{"use strict";Object.defineProperty(iQ,"__esModule",{value:!0});iQ.default=ubr;var abr=["-webkit-","-moz-",""],lbr={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function ubr(t,r){if(t==="cursor"&&lbr.hasOwnProperty(r))return abr.map(function(n){return n+r})}Mct.exports=iQ.default});var eR=gt((sQ,jct)=>{"use strict";Object.defineProperty(sQ,"__esModule",{value:!0});sQ.default=fbr;var cbr=/-webkit-|-moz-|-ms-/;function fbr(t){return typeof t=="string"&&cbr.test(t)}jct.exports=sQ.default});var Bct=gt((aQ,Lct)=>{"use strict";Object.defineProperty(aQ,"__esModule",{value:!0});aQ.default=gbr;var dbr=eR(),pbr=hbr(dbr);function hbr(t){return t&&t.__esModule?t:{default:t}}var mbr=["-webkit-",""];function gbr(t,r){if(typeof r=="string"&&!(0,pbr.default)(r)&&r.indexOf("cross-fade(")>-1)return mbr.map(function(n){return r.replace(/cross-fade\(/g,n+"cross-fade(")})}Lct.exports=aQ.default});var zct=gt((lQ,$ct)=>{"use strict";Object.defineProperty(lQ,"__esModule",{value:!0});lQ.default=wbr;var ybr=eR(),bbr=xbr(ybr);function xbr(t){return t&&t.__esModule?t:{default:t}}var vbr=["-webkit-",""];function wbr(t,r){if(typeof r=="string"&&!(0,bbr.default)(r)&&r.indexOf("filter(")>-1)return vbr.map(function(n){return r.replace(/filter\(/g,n+"filter(")})}$ct.exports=lQ.default});var Gct=gt((uQ,Vct)=>{"use strict";Object.defineProperty(uQ,"__esModule",{value:!0});uQ.default=_br;var Uct={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function _br(t,r){if(t==="display"&&Uct.hasOwnProperty(r))return Uct[r]}Vct.exports=uQ.default});var Hct=gt((cQ,qct)=>{"use strict";Object.defineProperty(cQ,"__esModule",{value:!0});cQ.default=Cbr;var Sbr={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},Wct={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function Cbr(t,r,n){t==="flexDirection"&&typeof r=="string"&&(r.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",r.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),Wct.hasOwnProperty(t)&&(n[Wct[t]]=Sbr[r]||r)}qct.exports=cQ.default});var Xct=gt((fQ,Yct)=>{"use strict";Object.defineProperty(fQ,"__esModule",{value:!0});fQ.default=Dbr;var Ebr=eR(),Tbr=Abr(Ebr);function Abr(t){return t&&t.__esModule?t:{default:t}}var kbr=["-webkit-","-moz-",""],Ibr=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function Dbr(t,r){if(typeof r=="string"&&!(0,Tbr.default)(r)&&Ibr.test(r))return kbr.map(function(n){return n+r})}Yct.exports=fQ.default});var Zct=gt((dQ,Kct)=>{"use strict";Object.defineProperty(dQ,"__esModule",{value:!0});dQ.default=Mbr;var Nbr=eR(),Obr=Fbr(Nbr);function Fbr(t){return t&&t.__esModule?t:{default:t}}var Rbr=["-webkit-",""];function Mbr(t,r){if(typeof r=="string"&&!(0,Obr.default)(r)&&r.indexOf("image-set(")>-1)return Rbr.map(function(n){return r.replace(/image-set\(/g,n+"image-set(")})}Kct.exports=dQ.default});var Jct=gt((pQ,Qct)=>{"use strict";Object.defineProperty(pQ,"__esModule",{value:!0});pQ.default=Pbr;function Pbr(t,r){if(t==="position"&&r==="sticky")return["-webkit-sticky","sticky"]}Qct.exports=pQ.default});var tft=gt((hQ,eft)=>{"use strict";Object.defineProperty(hQ,"__esModule",{value:!0});hQ.default=$br;var jbr=["-webkit-","-moz-",""],Lbr={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},Bbr={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function $br(t,r){if(Lbr.hasOwnProperty(t)&&Bbr.hasOwnProperty(r))return jbr.map(function(n){return n+r})}eft.exports=hQ.default});var rft={};fn(rft,{default:()=>Wbr});function Vbr(t){return"-"+t.toLowerCase()}function Gbr(t){if(G_e.hasOwnProperty(t))return G_e[t];var r=t.replace(zbr,Vbr);return G_e[t]=Ubr.test(r)?"-"+r:r}var zbr,Ubr,G_e,Wbr,nft=D(()=>{"use strict";zbr=/[A-Z]/g,Ubr=/^ms-/,G_e={};Wbr=Gbr});var ift=gt((mQ,oft)=>{"use strict";Object.defineProperty(mQ,"__esModule",{value:!0});mQ.default=Xbr;var qbr=(nft(),vl(rft)),Hbr=Ybr(qbr);function Ybr(t){return t&&t.__esModule?t:{default:t}}function Xbr(t){return(0,Hbr.default)(t)}oft.exports=mQ.default});var lft=gt((gQ,aft)=>{"use strict";Object.defineProperty(gQ,"__esModule",{value:!0});gQ.default=oxr;var Kbr=ift(),Zbr=W_e(Kbr),Qbr=eR(),Jbr=W_e(Qbr),exr=V_e(),sft=W_e(exr);function W_e(t){return t&&t.__esModule?t:{default:t}}var txr={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},rxr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function nxr(t,r){if((0,Jbr.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,i=n.length;o<i;++o){var s=n[o],a=[s];for(var l in r){var u=(0,Zbr.default)(l);if(s.indexOf(u)>-1&&u!=="order")for(var c=r[l],f=0,d=c.length;f<d;++f)a.unshift(s.replace(u,rxr[c[f]]+u))}n[o]=a.join(",")}return n.join(",")}function oxr(t,r,n,o){if(typeof r=="string"&&txr.hasOwnProperty(t)){var i=nxr(r,o),s=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-moz-|-ms-/.test(l)}).join(",");if(t.indexOf("Webkit")>-1)return s;var a=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(l){return!/-webkit-|-ms-/.test(l)}).join(",");return t.indexOf("Moz")>-1?a:(n["Webkit"+(0,sft.default)(t)]=s,n["Moz"+(0,sft.default)(t)]=a,i)}}aft.exports=gQ.default});var cft=gt(q_e=>{"use strict";Object.defineProperty(q_e,"__esModule",{value:!0});q_e.default=Oxr;var ixr=Ict(),sxr=Md(ixr),axr=Oct(),lxr=Md(axr),uxr=Rct(),cxr=Md(uxr),fxr=Pct(),dxr=Md(fxr),pxr=Bct(),hxr=Md(pxr),mxr=zct(),gxr=Md(mxr),yxr=Gct(),bxr=Md(yxr),xxr=Hct(),vxr=Md(xxr),wxr=Xct(),_xr=Md(wxr),Sxr=Zct(),Cxr=Md(Sxr),Exr=Jct(),Txr=Md(Exr),Axr=tft(),kxr=Md(Axr),Ixr=lft(),Dxr=Md(Ixr);function Md(t){return t&&t.__esModule?t:{default:t}}var Nxr=[hxr.default,dxr.default,gxr.default,vxr.default,_xr.default,Cxr.default,Txr.default,kxr.default,Dxr.default,bxr.default],uft=sxr.default.prefixMap;function Oxr(t){for(var r in t){var n=t[r],o=(0,cxr.default)(Nxr,r,n,t,uft);o&&(t[r]=o),(0,lxr.default)(uft,r,t)}return t}});var pft=gt(tR=>{"use strict";Object.defineProperty(tR,"__esModule",{value:!0});var H_e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};tR.PluginSet=dft;tR.fallbacks=Lxr;tR.contentWrap=$xr;tR.prefixes=zxr;var Fxr=QZ(),Y_e=fft(Fxr),Rxr=$_e(),Mxr=cft(),Pxr=fft(Mxr);function fft(t){return t&&t.__esModule?t:{default:t}}var jxr=function(t){return t==="development"||!t}("production");function dft(t){this.fns=t||[]}(0,Y_e.default)(dft.prototype,{add:function(){for(var r=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach(function(s){r.fns.indexOf(s)>=0?jxr&&console.warn("adding the same plugin again, ignoring"):r.fns=[s].concat(r.fns)})},remove:function(r){this.fns=this.fns.filter(function(n){return n!==r})},clear:function(){this.fns=[]},transform:function(r){return this.fns.reduce(function(n,o){return o(n)},r)}});function Lxr(t){var r=Object.keys(t.style).map(function(i){return Array.isArray(t.style[i])}).indexOf(!0)>=0;if(r){var n=t.style,o=Object.keys(n).reduce(function(i,s){return i[s]=Array.isArray(n[s])?n[s].join("; "+(0,Rxr.processStyleName)(s)+": "):n[s],i},{});return(0,Y_e.default)({},t,{style:o})}return t}var Bxr=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function $xr(t){if(t.style.content){var r=t.style.content;return Bxr.indexOf(r)>=0||/^(attr|calc|counters?|url)\(/.test(r)||r.charAt(0)===r.charAt(r.length-1)&&(r.charAt(0)==='"'||r.charAt(0)==="'")?t:H_e({},t,{style:H_e({},t.style,{content:'"'+r+'"'})})}return t}function zxr(t){return(0,Y_e.default)({},t,{style:(0,Pxr.default)(H_e({},t.style))})}});var mft=gt(X_e=>{"use strict";Object.defineProperty(X_e,"__esModule",{value:!0});X_e.default=Uxr;function Uxr(t,r){for(var n=1540483477,o=24,i=r^t.length,s=t.length,a=0;s>=4;){var l=Vxr(t,a);l=RA(l,n),l^=l>>>o,l=RA(l,n),i=RA(i,n),i^=l,a+=4,s-=4}switch(s){case 3:i^=hft(t,a),i^=t.charCodeAt(a+2)<<16,i=RA(i,n);break;case 2:i^=hft(t,a),i=RA(i,n);break;case 1:i^=t.charCodeAt(a),i=RA(i,n);break}return i^=i>>>13,i=RA(i,n),i^=i>>>15,i>>>0}function Vxr(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)+(t.charCodeAt(r++)<<16)+(t.charCodeAt(r)<<24)}function hft(t,r){return t.charCodeAt(r++)+(t.charCodeAt(r++)<<8)}function RA(t,r){t=t|0,r=r|0;var n=t&65535,o=t>>>16,i=n*r+((o*r&65535)<<16)|0;return i}});var rR=gt(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.compose=jt.merge=jt.$=jt.style=jt.presets=jt.keyframes=jt.fontFace=jt.insertGlobal=jt.insertRule=jt.plugins=jt.styleSheet=void 0;jt.speedy=Zxr;jt.simulations=Jxr;jt.simulate=evr;jt.cssLabels=tvr;jt.isLikeRule=t2e;jt.idFor=r2e;jt.css=hl;jt.rehydrate=mvr;jt.flush=gvr;jt.select=n2e;jt.parent=bvr;jt.media=xvr;jt.pseudo=rn;jt.active=vvr;jt.any=wvr;jt.checked=_vr;jt.disabled=Svr;jt.empty=Cvr;jt.enabled=Evr;jt._default=Tvr;jt.first=Avr;jt.firstChild=kvr;jt.firstOfType=Ivr;jt.fullscreen=Dvr;jt.focus=Nvr;jt.hover=Ovr;jt.indeterminate=Fvr;jt.inRange=Rvr;jt.invalid=Mvr;jt.lastChild=Pvr;jt.lastOfType=jvr;jt.left=Lvr;jt.link=Bvr;jt.onlyChild=$vr;jt.onlyOfType=zvr;jt.optional=Uvr;jt.outOfRange=Vvr;jt.readOnly=Gvr;jt.readWrite=Wvr;jt.required=qvr;jt.right=Hvr;jt.root=Yvr;jt.scope=Xvr;jt.target=Kvr;jt.valid=Zvr;jt.visited=Qvr;jt.dir=Jvr;jt.lang=e1r;jt.not=t1r;jt.nthChild=r1r;jt.nthLastChild=n1r;jt.nthLastOfType=o1r;jt.nthOfType=i1r;jt.after=s1r;jt.before=a1r;jt.firstLetter=l1r;jt.firstLine=u1r;jt.selection=c1r;jt.backdrop=f1r;jt.placeholder=d1r;jt.cssFor=p1r;jt.attribsFor=h1r;var Gxr=QZ(),Wxr=J_e(Gxr),qxr=act(),Q_e=$_e(),Hxr=Tct(),I2=J_e(Hxr),Uv=pft(),Yxr=mft(),Xxr=J_e(Yxr);function J_e(t){return t&&t.__esModule?t:{default:t}}function Kxr(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}else return Array.from(t)}function Y$(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Pd=jt.styleSheet=new qxr.StyleSheet;Pd.inject();function Zxr(t){return Pd.speedy(t)}var X$=jt.plugins=Pd.plugins=new Uv.PluginSet([Uv.prefixes,Uv.contentWrap,Uv.fallbacks]);X$.media=new Uv.PluginSet;X$.fontFace=new Uv.PluginSet;X$.keyframes=new Uv.PluginSet([Uv.prefixes,Uv.fallbacks]);var K$=!1,Qxr=!1,SQ=typeof window<"u",e2e=K$,gft=!1,yft=!1;function Jxr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;e2e=!!t}function evr(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,I2.default)(r),r?e2e?r.reduce(function(o,i){return o["data-simulate-"+xQ(i)]="",o},{}):(gft||(console.warn("can't simulate without once calling simulations(true)"),gft=!0),!K$&&!Qxr&&!yft&&(console.warn("don't use simulation outside dev"),yft=!0),{}):{}}var Z$=K$;function tvr(t){Z$=!!t}function xQ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,r)}function Q$(t){var r=JSON.stringify(t),n=(0,Xxr.default)(r).toString(36);return t.label&&t.label.length>0&&K$?xQ(t.label.join("."),"-")+"-"+n:n}function t2e(t){var r=Object.keys(t).filter(function(n){return n!=="toString"});return r.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(r[0])}function r2e(t){var r=Object.keys(t).filter(function(i){return i!=="toString"});if(r.length!==1)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,o=n.exec(r[0]);if(!o)throw new Error("not a rule");return o[1]}var rvr=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function K_e(t){if(t.indexOf(",")===-1)return[t];for(var r=[],n=[],o=0,i;i=rvr.exec(t);)switch(i[0]){case"(":o++;break;case")":o--;break;case",":if(o)break;r.push(i.index)}for(i=r.length;i--;)n.unshift(t.slice(r[i]+1)),t=t.slice(0,r[i]);return n.unshift(t),n}function bft(t,r){if(!t)return r.replace(/\&/g,"");if(!r)return".css-"+t+",[data-css-"+t+"]";var n=K_e(r).map(function(o){return o.indexOf("&")>=0?[o.replace(/\&/mg,".css-"+t),o.replace(/\&/mg,"[data-css-"+t+"]")].join(","):".css-"+t+o+",[data-css-"+t+"]"+o}).join(",");return e2e&&/^\&\:/.exec(r)&&!/\s/.exec(r)&&(n+=",.css-"+t+"[data-simulate-"+xQ(r)+"],[data-css-"+t+"][data-simulate-"+xQ(r)+"]"),n}function Z_e(t){var r=t.selector,n=t.style,o=X$.transform({selector:r,style:n});return o.selector+"{"+(0,Q_e.createMarkupForStyles)(o.style)+"}"}function vQ(t){var r=void 0,n=void 0,o=void 0,i=void 0;return Object.keys(t).forEach(function(s){s.indexOf("&")>=0?(n=n||{},n[s]=t[s]):s.indexOf("@media")===0?(o=o||{},o[s]=vQ(t[s])):s.indexOf("@supports")===0?(i=i||{},i[s]=vQ(t[s])):s==="label"?t.label.length>0&&(r=r||{},r.label=Z$?t.label.join("."):""):(r=r||{},r[s]=t[s])}),{plain:r,selects:n,medias:o,supports:i}}function wQ(t,r){var n=[],o=r.plain,i=r.selects,s=r.medias,a=r.supports;return o&&n.push(Z_e({style:o,selector:bft(t)})),i&&Object.keys(i).forEach(function(l){return n.push(Z_e({style:i[l],selector:bft(t,l)}))}),s&&Object.keys(s).forEach(function(l){return n.push(l+"{"+wQ(t,s[l]).join("")+"}")}),a&&Object.keys(a).forEach(function(l){return n.push(l+"{"+wQ(t,a[l]).join("")+"}")}),n}var Wm=Pd.inserted={};function nvr(t){if(!Wm[t.id]){Wm[t.id]=!0;var r=vQ(t.style),n=wQ(t.id,r);Wm[t.id]=SQ?!0:n,n.forEach(function(o){return Pd.insert(o)})}}var H$=Pd.registered={};function CQ(t){H$[t.id]||(H$[t.id]=t)}function ovr(t){if(t2e(t)){var r=H$[r2e(t)];if(r==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return r}return t}var bQ={};function ivr(t){if(CQ(t),nvr(t),bQ[t.id])return bQ[t.id];var r=Y$({},"data-css-"+t.id,Z$&&t.label||"");return Object.defineProperty(r,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),bQ[t.id]=r,r}function svr(t){for(var r=[":",".","[",">"," "],n=!1,o=t.charAt(0),i=0;i<r.length;i++)if(o===r[i]){n=!0;break}return n||t.indexOf("&")>=0}function xft(t,r){var n=K_e(t).map(function(i){return i.indexOf("&")>=0?i:"&"+i}),o=K_e(r).map(function(i){return i.indexOf("&")>=0?i:"&"+i});return o.reduce(function(i,s){return i.concat(n.map(function(a){return s.replace(/\&/g,a)}))},[]).join(",")}function avr(t,r){return t?"@media "+t.substring(6)+" and "+r.substring(6):r}function lvr(t){return t.indexOf("@media")===0}function uvr(t){return t.indexOf("@supports")===0}function cvr(t,r){return t?"@supports "+t.substring(9)+" and "+r.substring(9):r}function Sft(t){for(var r=[],n=0;n<t.length;n++)Array.isArray(t[n])?r=r.concat(Sft(t[n])):r=r.concat(t[n]);return r}var vft={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function MA(t,r){var n=r.selector,o=n===void 0?"":n,i=r.mq,s=i===void 0?"":i,a=r.supp,l=a===void 0?"":a,u=r.src,c=u===void 0?{}:u;Array.isArray(c)||(c=[c]),c=Sft(c),c.forEach(function(f){if(t2e(f)){var d=ovr(f);if(d.type!=="css")throw new Error("cannot merge this rule");f=d.style}f=(0,I2.default)(f),f&&f.composes&&MA(t,{selector:o,mq:s,supp:l,src:f.composes}),Object.keys(f||{}).forEach(function(p){if(svr(p))vft[p]&&vft[p].forEach(function(m){return MA(t,{selector:xft(o,m),mq:s,supp:l,src:f[p]})}),MA(t,{selector:xft(o,p),mq:s,supp:l,src:f[p]});else if(lvr(p))MA(t,{selector:o,mq:avr(s,p),supp:l,src:f[p]});else if(uvr(p))MA(t,{selector:o,mq:s,supp:cvr(l,p),src:f[p]});else if(p!=="composes"){var h=t;l&&(h[l]=h[l]||{},h=h[l]),s&&(h[s]=h[s]||{},h=h[s]),o&&(h[o]=h[o]||{},h=h[o]),p==="label"?Z$&&(t.label=t.label.concat(f.label)):h[p]=f[p]}})})}function wft(t){var r={label:[]};MA(r,{src:t});var n={id:Q$(r),style:r,label:Z$?r.label.join("."):"",type:"css"};return ivr(n)}var _Q={};Object.defineProperty(_Q,"toString",{enumerable:!1,value:function(){return"css-nil"}});var yQ=typeof WeakMap<"u"?[_Q,new WeakMap,new WeakMap,new WeakMap]:[_Q],_ft=!1;function fvr(t){return function(r){if(yQ[r.length]){for(var n=yQ[r.length],o=0;o<r.length-1;)n.has(r[o])||n.set(r[o],new WeakMap),n=n.get(r[o]),o++;if(n.has(r[r.length-1])){var i=n.get(r[o]);if(H$[i.toString().substring(4)])return i}}var s=t(r);if(yQ[r.length]){for(var a=0,l=yQ[r.length];a<r.length-1;)l=l.get(r[a]),a++;try{l.set(r[a],s)}catch{if(K$&&!_ft){var u;_ft=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(Kxr(r))),console.warn("this should NOT happen, please file a bug on the github repo.")}}}return s}}var dvr=typeof WeakMap<"u"?fvr(wft):wft;function hl(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r[0]&&r[0].length&&r[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return r=(0,I2.default)(r),r?dvr(r):_Q}hl.insert=function(t){var r={id:Q$(t),css:t,type:"raw"};CQ(r),Wm[r.id]||(Pd.insert(r.css),Wm[r.id]=SQ?!0:[r.css])};var hvo=jt.insertRule=hl.insert;hl.global=function(t,r){if(r=(0,I2.default)(r),r)return hl.insert(Z_e({selector:t,style:r}))};var mvo=jt.insertGlobal=hl.global;function pvr(t){if(!Wm[t.id]){var r=Object.keys(t.keyframes).map(function(o){var i=X$.keyframes.transform({id:t.id,name:o,style:t.keyframes[o]});return i.name+"{"+(0,Q_e.createMarkupForStyles)(i.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(o){return"@"+o+"keyframes "+(t.name+"_"+t.id)+"{"+r+"}"});n.forEach(function(o){return Pd.insert(o)}),Wm[t.id]=SQ?!0:n}}hl.keyframes=function(t,r){r||(r=t,t="animation"),r=(0,I2.default)(r)||{};var n={id:Q$({name:t,kfs:r}),type:"keyframes",name:t,keyframes:r};return CQ(n),pvr(n),t+"_"+n.id};hl.fontFace=function(t){t=(0,I2.default)(t);var r={id:Q$(t),type:"font-face",font:t};return CQ(r),hvr(r),t.fontFamily};var gvo=jt.fontFace=hl.fontFace,yvo=jt.keyframes=hl.keyframes;function hvr(t){if(!Wm[t.id]){var r="@font-face{"+(0,Q_e.createMarkupForStyles)(t.font)+"}";Pd.insert(r),Wm[t.id]=SQ?!0:[r]}}function mvr(t){(0,Wxr.default)(Wm,t.reduce(function(r,n){return r[n]=!0,r},{}))}function gvr(){Wm=Pd.inserted={},H$=Pd.registered={},bQ={},Pd.flush(),Pd.inject()}var bvo=jt.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"},yvr=jt.style=hl;function n2e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t?hl(Y$({},t,n)):yvr(n)}var xvo=jt.$=n2e;function bvr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return hl(Y$({},t+" &",n))}var vvo=jt.merge=hl,wvo=jt.compose=hl;function xvr(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return hl(Y$({},"@media "+t,n))}function rn(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return hl(Y$({},t,n))}function vvr(t){return rn(":active",t)}function wvr(t){return rn(":any",t)}function _vr(t){return rn(":checked",t)}function Svr(t){return rn(":disabled",t)}function Cvr(t){return rn(":empty",t)}function Evr(t){return rn(":enabled",t)}function Tvr(t){return rn(":default",t)}function Avr(t){return rn(":first",t)}function kvr(t){return rn(":first-child",t)}function Ivr(t){return rn(":first-of-type",t)}function Dvr(t){return rn(":fullscreen",t)}function Nvr(t){return rn(":focus",t)}function Ovr(t){return rn(":hover",t)}function Fvr(t){return rn(":indeterminate",t)}function Rvr(t){return rn(":in-range",t)}function Mvr(t){return rn(":invalid",t)}function Pvr(t){return rn(":last-child",t)}function jvr(t){return rn(":last-of-type",t)}function Lvr(t){return rn(":left",t)}function Bvr(t){return rn(":link",t)}function $vr(t){return rn(":only-child",t)}function zvr(t){return rn(":only-of-type",t)}function Uvr(t){return rn(":optional",t)}function Vvr(t){return rn(":out-of-range",t)}function Gvr(t){return rn(":read-only",t)}function Wvr(t){return rn(":read-write",t)}function qvr(t){return rn(":required",t)}function Hvr(t){return rn(":right",t)}function Yvr(t){return rn(":root",t)}function Xvr(t){return rn(":scope",t)}function Kvr(t){return rn(":target",t)}function Zvr(t){return rn(":valid",t)}function Qvr(t){return rn(":visited",t)}function Jvr(t,r){return rn(":dir("+t+")",r)}function e1r(t,r){return rn(":lang("+t+")",r)}function t1r(t,r){var n=t.split(",").map(function(o){return o.trim()}).map(function(o){return":not("+o+")"});return n.length===1?rn(":not("+t+")",r):n2e(n.join(""),r)}function r1r(t,r){return rn(":nth-child("+t+")",r)}function n1r(t,r){return rn(":nth-last-child("+t+")",r)}function o1r(t,r){return rn(":nth-last-of-type("+t+")",r)}function i1r(t,r){return rn(":nth-of-type("+t+")",r)}function s1r(t){return rn("::after",t)}function a1r(t){return rn("::before",t)}function l1r(t){return rn("::first-letter",t)}function u1r(t){return rn("::first-line",t)}function c1r(t){return rn("::selection",t)}function f1r(t){return rn("::backdrop",t)}function d1r(t){return hl({"::placeholder":t})}function p1r(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r=(0,I2.default)(r),r?r.map(function(o){var i={label:[]};return MA(i,{src:o}),wQ(Q$(i),vQ(i)).join("")}).join(""):""}function h1r(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r=(0,I2.default)(r);var o=r?r.map(function(i){r2e(i);var s=Object.keys(i)[0],a=i[s];return s+'="'+(a||"")+'"'}).join(" "):"";return o}});var o2e=gt(EQ=>{"use strict";Object.defineProperty(EQ,"__esModule",{value:!0});function m1r(t){return t.name!=null}EQ.isSurfaceInfo=m1r;function g1r(t){return t.drawArea instanceof HTMLElement}EQ.isSurface=g1r});var NQ={};fn(NQ,{Component:()=>J$,cloneElement:()=>Aft,createElement:()=>TQ,default:()=>I1r,h:()=>TQ,options:()=>Nf,render:()=>jft,rerender:()=>l2e});function y1r(){}function TQ(t,r){var n=Cft,o,i,s,a;for(a=arguments.length;a-- >2;)nR.push(arguments[a]);for(r&&r.children!=null&&(nR.length||nR.push(r.children),delete r.children);nR.length;)if((i=nR.pop())&&i.pop!==void 0)for(a=i.length;a--;)nR.push(i[a]);else typeof i=="boolean"&&(i=null),(s=typeof t!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&o?n[n.length-1]+=i:n===Cft?n=[i]:n.push(i),o=s;var l=new y1r;return l.nodeName=t,l.children=n,l.attributes=r??void 0,l.key=r?.key,Nf.vnode!==void 0&&Nf.vnode(l),l}function N2(t,r){for(var n in r)t[n]=r[n];return t}function Aft(t,r){return TQ(t.nodeName,N2(N2({},t.attributes),r),arguments.length>2?[].slice.call(arguments,2):t.children)}function kft(t){!t._dirty&&(t._dirty=!0)&&i2e.push(t)==1&&(Nf.debounceRendering||b1r)(l2e)}function l2e(){var t,r=i2e;for(i2e=[];t=r.pop();)t._dirty&&IQ(t)}function v1r(t,r,n){return typeof r=="string"||typeof r=="number"?t.splitText!==void 0:typeof r.nodeName=="string"?!t._componentConstructor&&Ift(t,r.nodeName):n||t._componentConstructor===r.nodeName}function Ift(t,r){return t.normalizedNodeName===r||t.nodeName.toLowerCase()===r.toLowerCase()}function Dft(t){var r=N2({},t.attributes);r.children=t.children;var n=t.nodeName.defaultProps;if(n!==void 0)for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}function w1r(t,r){var n=r?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function u2e(t){var r=t.parentNode;r&&r.removeChild(t)}function Eft(t,r,n,o,i){if(r==="className"&&(r="class"),r!=="key")if(r==="ref")n&&n(null),o&&o(t);else if(r==="class"&&!i)t.className=o||"";else if(r==="style"){if((!o||typeof o=="string"||typeof n=="string")&&(t.style.cssText=o||""),o&&typeof o=="object"){if(typeof n!="string")for(var s in n)s in o||(t.style[s]="");for(var s in o)t.style[s]=typeof o[s]=="number"&&x1r.test(s)===!1?o[s]+"px":o[s]}}else if(r==="dangerouslySetInnerHTML")o&&(t.innerHTML=o.__html||"");else if(r[0]=="o"&&r[1]=="n"){var a=r!==(r=r.replace(/Capture$/,""));r=r.toLowerCase().substring(2),o?n||t.addEventListener(r,Tft,a):t.removeEventListener(r,Tft,a),(t._listeners||(t._listeners={}))[r]=o}else if(r!=="list"&&r!=="type"&&!i&&r in t)_1r(t,r,o??""),(o==null||o===!1)&&t.removeAttribute(r);else{var l=i&&r!==(r=r.replace(/^xlink:?/,""));o==null||o===!1?l?t.removeAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase()):t.removeAttribute(r):typeof o!="function"&&(l?t.setAttributeNS("http://www.w3.org/1999/xlink",r.toLowerCase(),o):t.setAttribute(r,o))}}function _1r(t,r,n){try{t[r]=n}catch{}}function Tft(t){return this._listeners[t.type](Nf.event&&Nf.event(t)||t)}function Oft(){for(var t;t=Nft.pop();)Nf.afterMount&&Nf.afterMount(t),t.componentDidMount&&t.componentDidMount()}function Fft(t,r,n,o,i,s){s2e++||(D2=i!=null&&i.ownerSVGElement!==void 0,AQ=t!=null&&!("__preactattr_"in t));var a=Rft(t,r,n,o,s);return i&&a.parentNode!==i&&i.appendChild(a),--s2e||(AQ=!1,s||Oft()),a}function Rft(t,r,n,o,i){var s=t,a=D2;if((r==null||typeof r=="boolean")&&(r=""),typeof r=="string"||typeof r=="number")return t&&t.splitText!==void 0&&t.parentNode&&(!t._component||i)?t.nodeValue!=r&&(t.nodeValue=r):(s=document.createTextNode(r),t&&(t.parentNode&&t.parentNode.replaceChild(s,t),PA(t,!0))),s.__preactattr_=!0,s;var l=r.nodeName;if(typeof l=="function")return A1r(t,r,n,o);if(D2=l==="svg"?!0:l==="foreignObject"?!1:D2,l=String(l),(!t||!Ift(t,l))&&(s=w1r(l,D2),t)){for(;t.firstChild;)s.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(s,t),PA(t,!0)}var u=s.firstChild,c=s.__preactattr_,f=r.children;if(c==null){c=s.__preactattr_={};for(var d=s.attributes,p=d.length;p--;)c[d[p].name]=d[p].value}return!AQ&&f&&f.length===1&&typeof f[0]=="string"&&u!=null&&u.splitText!==void 0&&u.nextSibling==null?u.nodeValue!=f[0]&&(u.nodeValue=f[0]):(f&&f.length||u!=null)&&S1r(s,f,n,o,AQ||c.dangerouslySetInnerHTML!=null),C1r(s,r.attributes,c),D2=a,s}function S1r(t,r,n,o,i){var s=t.childNodes,a=[],l={},u=0,c=0,f=s.length,d=0,p=r?r.length:0,h,m,g,y,b;if(f!==0)for(var x=0;x<f;x++){var v=s[x],w=v.__preactattr_,_=p&&w?v._component?v._component.__key:w.key:null;_!=null?(u++,l[_]=v):(w||(v.splitText!==void 0?!i||v.nodeValue.trim():i))&&(a[d++]=v)}if(p!==0)for(var x=0;x<p;x++){y=r[x],b=null;var _=y.key;if(_!=null)u&&l[_]!==void 0&&(b=l[_],l[_]=void 0,u--);else if(!b&&c<d){for(h=c;h<d;h++)if(a[h]!==void 0&&v1r(m=a[h],y,i)){b=m,a[h]=void 0,h===d-1&&d--,h===c&&c++;break}}b=Rft(b,y,n,o),g=s[x],b&&b!==t&&b!==g&&(g==null?t.appendChild(b):b===g.nextSibling?u2e(g):t.insertBefore(b,g))}if(u)for(var x in l)l[x]!==void 0&&PA(l[x],!1);for(;c<=d;)(b=a[d--])!==void 0&&PA(b,!1)}function PA(t,r){var n=t._component;n?DQ(n):(t.__preactattr_!=null&&t.__preactattr_.ref&&t.__preactattr_.ref(null),(r===!1||t.__preactattr_==null)&&u2e(t),Mft(t))}function Mft(t){for(t=t.lastChild;t;){var r=t.previousSibling;PA(t,!0),t=r}}function C1r(t,r,n){var o;for(o in n)!(r&&r[o]!=null)&&n[o]!=null&&Eft(t,o,n[o],n[o]=void 0,D2);for(o in r)o!=="children"&&o!=="innerHTML"&&(!(o in n)||r[o]!==(o==="value"||o==="checked"?t[o]:n[o]))&&Eft(t,o,n[o],n[o]=r[o],D2)}function E1r(t){var r=t.constructor.name;(a2e[r]||(a2e[r]=[])).push(t)}function Pft(t,r,n){var o=a2e[t.name],i;if(t.prototype&&t.prototype.render?(i=new t(r,n),J$.call(i,r,n)):(i=new J$(r,n),i.constructor=t,i.render=T1r),o){for(var s=o.length;s--;)if(o[s].constructor===t){i.nextBase=o[s].nextBase,o.splice(s,1);break}}return i}function T1r(t,r,n){return this.constructor(t,n)}function kQ(t,r,n,o,i){t._disable||(t._disable=!0,(t.__ref=r.ref)&&delete r.ref,(t.__key=r.key)&&delete r.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(r,o),o&&o!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=o),t.prevProps||(t.prevProps=t.props),t.props=r,t._disable=!1,n!==0&&(n===1||Nf.syncComponentUpdates!==!1||!t.base?IQ(t,1,i):kft(t)),t.__ref&&t.__ref(t))}function IQ(t,r,n,o){if(!t._disable){var i=t.props,s=t.state,a=t.context,l=t.prevProps||i,u=t.prevState||s,c=t.prevContext||a,f=t.base,d=t.nextBase,p=f||d,h=t._component,m=!1,g,y,b;if(f&&(t.props=l,t.state=u,t.context=c,r!==2&&t.shouldComponentUpdate&&t.shouldComponentUpdate(i,s,a)===!1?m=!0:t.componentWillUpdate&&t.componentWillUpdate(i,s,a),t.props=i,t.state=s,t.context=a),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!m){g=t.render(i,s,a),t.getChildContext&&(a=N2(N2({},a),t.getChildContext()));var x=g&&g.nodeName,v,w;if(typeof x=="function"){var _=Dft(g);y=h,y&&y.constructor===x&&_.key==y.__key?kQ(y,_,1,a,!1):(v=y,t._component=y=Pft(x,_,a),y.nextBase=y.nextBase||d,y._parentComponent=t,kQ(y,_,0,a,!1),IQ(y,1,n,!0)),w=y.base}else b=p,v=h,v&&(b=t._component=null),(p||r===1)&&(b&&(b._component=null),w=Fft(b,g,a,n||!f,p&&p.parentNode,!0));if(p&&w!==p&&y!==h){var C=p.parentNode;C&&w!==C&&(C.replaceChild(w,p),v||(p._component=null,PA(p,!1)))}if(v&&DQ(v),t.base=w,w&&!o){for(var S=t,E=t;E=E._parentComponent;)(S=E).base=w;w._component=S,w._componentConstructor=S.constructor}}if(!f||n?Nft.unshift(t):m||(t.componentDidUpdate&&t.componentDidUpdate(l,u,c),Nf.afterUpdate&&Nf.afterUpdate(t)),t._renderCallbacks!=null)for(;t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);!s2e&&!o&&Oft()}}function A1r(t,r,n,o){for(var i=t&&t._component,s=i,a=t,l=i&&t._componentConstructor===r.nodeName,u=l,c=Dft(r);i&&!u&&(i=i._parentComponent);)u=i.constructor===r.nodeName;return i&&u&&(!o||i._component)?(kQ(i,c,3,n,o),t=i.base):(s&&!l&&(DQ(s),t=a=null),i=Pft(r.nodeName,c,n),t&&!i.nextBase&&(i.nextBase=t,a=null),kQ(i,c,1,n,o),t=i.base,a&&t!==a&&(a._component=null,PA(a,!1))),t}function DQ(t){Nf.beforeUnmount&&Nf.beforeUnmount(t);var r=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?DQ(n):r&&(r.__preactattr_&&r.__preactattr_.ref&&r.__preactattr_.ref(null),t.nextBase=r,u2e(r),E1r(t),Mft(r)),t.__ref&&t.__ref(null)}function J$(t,r){this._dirty=!0,this.context=r,this.props=t,this.state=this.state||{}}function jft(t,r,n){return Fft(n,t,{},!1,r,!1)}var Nf,nR,Cft,b1r,x1r,i2e,Nft,s2e,D2,AQ,a2e,k1r,I1r,OQ=D(()=>{"use strict";Nf={},nR=[],Cft=[];b1r=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;x1r=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,i2e=[];Nft=[],s2e=0,D2=!1,AQ=!1;a2e={};N2(J$.prototype,{setState:function(r,n){var o=this.state;this.prevState||(this.prevState=N2({},o)),N2(o,typeof r=="function"?r(o,this.props):r),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),kft(this)},forceUpdate:function(r){r&&(this._renderCallbacks=this._renderCallbacks||[]).push(r),IQ(this,2)},render:function(){}});k1r={h:TQ,createElement:TQ,cloneElement:Aft,Component:J$,render:jft,rerender:l2e,options:Nf},I1r=k1r});var Lft=gt(f2e=>{"use strict";Object.defineProperty(f2e,"__esModule",{value:!0});var FQ=(OQ(),vl(NQ)),c2e=rR(),D1r=(()=>{class t extends FQ.Component{componentDidMount(){let{name:n,tab:o}=this.props;this.props.registerSurface(n,o,this)}componentDidUpdate(){return!1}render(){let{name:n,visible:o,styles:i}=this.props,s=Object.assign({},t.defaultStyles,i),{width:a,height:l}=s,{maxHeight:u,maxWidth:c}=s;u=l===t.defaultStyles.height?u:l,c=a===t.defaultStyles.width?c:a;let f=c2e.css({display:o?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:a,maxHeight:u,maxWidth:c,overflow:"auto"}),d=c2e.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),p=c2e.css({boxSizing:"border-box"});return FQ.h("div",{className:`${f} tf-surface`,ref:h=>this.container=h,"data-visible":o},FQ.h("div",{className:`${d} tf-label`,ref:h=>this.label=h},n),FQ.h("div",{className:`${p} tf-draw-area`,ref:h=>this.drawArea=h}))}}return t.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t})();f2e.SurfaceComponent=D1r});var $ft=gt(h2e=>{"use strict";Object.defineProperty(h2e,"__esModule",{value:!0});var e6=(OQ(),vl(NQ)),Bft=rR(),d2e=class extends e6.Component{render(){let{tabNames:r,activeTab:n,handleClick:o}=this.props,i=r.length>0?r.map(a=>e6.h(p2e,{key:a,id:a,handleClick:o,isActive:a===n},a)):null,s=Bft.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return e6.h("div",{className:`${s} visor-tabs`},i)}};h2e.Tabs=d2e;var p2e=class extends e6.Component{render(){let{children:r,isActive:n,handleClick:o,id:i}=this.props,s=Bft.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return e6.h("a",{className:`${s} tf-tab`,"data-isactive":n,onClick:()=>o(i)},r)}}});var zft=gt(g2e=>{"use strict";Object.defineProperty(g2e,"__esModule",{value:!0});var qm=(OQ(),vl(NQ)),jA=rR(),N1r=Lft(),O1r=$ft(),m2e=class t extends qm.Component{static render(r,n,o){return qm.render(qm.h(t,Object.assign({},o)),r,n)}constructor(r){super(r),this.surfaces=new Map;let n=r.startOpen==null?!0:r.startOpen;this.state={isOpen:n,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(r,n){let o=this.surfaceId(r,n),i;if(this.surfaces.has(o))i=this.surfaces.get(o);else throw Error(`Surface not found with id: ${o}`);return{container:i.container,label:i.label,drawArea:i.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(r,n){return r+n}setTabs(r){let n=r.map(s=>s.tab),o=this.state.tabs,i;for(let s of n)o.has(s)||(o.add(s),i=s);i!=null&&this.setState({tabs:o,activeTab:i})}getTabs(){return this.state.tabs}registerSurface(r,n,o){let i=this.surfaceId(r,n);this.surfaces.set(i,o)}keyHandler(r){r.keyCode===192&&(r.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(r){this.setState({activeTab:r})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(r){this.setTabs(r.surfaceList)}render(){let{isOpen:r,isFullscreen:n,activeTab:o}=this.state,{surfaceList:i}=this.props,s=Array.from(this.getTabs().values()),u=n?"90vw":"550px",c=jA.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),f=jA.css({right:"0"}),d=jA.css({right:`calc(-${u} - 10px)`}),p=r?f:d,h=jA.css({});return qm.h("div",{className:`${c} ${p} visor`,"data-isopen":r,"data-isfullscreen":n},qm.h(F1r,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:n}),qm.h(O1r.Tabs,{tabNames:s,activeTab:o,handleClick:this.setActiveTab.bind(this)}),qm.h("div",{className:`${h} visor-surfaces`},i.map(m=>qm.h(N1r.SurfaceComponent,{key:m.name+m.tab,name:m.name,tab:m.tab,styles:m.styles,registerSurface:this.registerSurface.bind(this),visible:o===m.tab}))))}};g2e.VisorComponent=m2e;function F1r(t){let{isFullScreen:r,fullScreenHandler:n,closeHandler:o}=t,i=jA.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=jA.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),a=jA.css({marginLeft:"auto"});return qm.h("div",{className:`${i} visor-controls`},qm.h("button",{className:`${s}`,onClick:n},r?"Minimize":"Maximize"),qm.h("button",{className:`${s} ${a}`,onClick:o},"Hide"))}});var b2e=gt(PQ=>{"use strict";Object.defineProperty(PQ,"__esModule",{value:!0});var R1r=zft(),RQ,M1r="Visor",y2e="tfjs-visor-container";function P1r(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(y2e)&&RQ!=null)return RQ;let t=document.getElementById(y2e);t==null&&(t=document.createElement("div"),t.id=y2e,document.body.appendChild(t));let r;function n(s,a){let l=null;return r=R1r.VisorComponent.render(s,r,{ref:u=>l=u,surfaceList:Array.from(a.values())}),l}let o=new Map,i=n(t,o);return RQ=new MQ(i,t,o,n),RQ}PQ.visor=P1r;var MQ=class{constructor(r,n,o,i){this.visorComponent=r,this.el=n,this.surfaceList=o,this.renderVisor=i}surface(r){let{name:n}=r,o=r.tab==null?M1r:r.tab;if(n==null||!(typeof n=="string"||n instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");let i=Object.assign({},r,{tab:o}),s=`${n}-${o}`;return this.surfaceList.has(s)||this.surfaceList.set(s,i),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(n,o)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(r){if(!this.visorComponent.state.tabs.has(r))throw new Error(`Tab '${r}' does not exist`);this.visorComponent.setState({activeTab:r})}};PQ.Visor=MQ});var Gp=gt(LA=>{"use strict";var j1r=LA&&LA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(LA,"__esModule",{value:!0});var Uft=o2e(),L1r=b2e();function B1r(t){if(t instanceof HTMLElement)return t;if(Uft.isSurface(t))return t.drawArea;if(Uft.isSurfaceInfo(t))return L1r.visor().surface({name:t.name,tab:t.tab,styles:t.styles}).drawArea;throw new Error("Not a drawable")}LA.getDrawArea=B1r;function $1r(t,r){let n=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(r);if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(t[s]!==r[s])return!1}return!0}LA.shallowEquals=$1r;function z1r(){return j1r(this,void 0,void 0,function*(){yield new Promise(t=>requestAnimationFrame(t))})}LA.nextFrame=z1r});var Vv=gt(t6=>{"use strict";Object.defineProperty(t6,"__esModule",{value:!0});var Vft=rR(),U1r=Gp(),V1r={prepend:!1};function G1r(t,r,n={}){let o=U1r.getDrawArea(t),i=Vft.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=Vft.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),a=Object.assign({},V1r,n),l=o.querySelector(`div[data-name=${r}]`);if(!l){if(l=document.createElement("div"),l.setAttribute("class",`${i}`),l.dataset.name=r,a.title){let u=document.createElement("div");u.setAttribute("class",`subsurface-title ${s}`),u.innerText=a.title,l.appendChild(u)}a.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l}t6.subSurface=G1r;function W1r(t){let n=0,o=t;for(;o&&o.clientWidth===0;)o=o.parentElement,n=50;return o.clientWidth-n}t6.getDefaultWidth=W1r;function q1r(t){return t.clientHeight===0?200:t.clientHeight}t6.getDefaultHeight=q1r});var Wft=gt(BA=>{"use strict";var H1r=BA&&BA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},Y1r=BA&&BA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BA,"__esModule",{value:!0});var X1r=Y1r((NA(),vl(DA))),Gft=Vv(),jQ=Gp();function K1r(t,r,n={}){return H1r(this,void 0,void 0,function*(){let o=jQ.getDrawArea(t),i=r,s=Object.assign({},Z1r,n);if(x2e.has(o)){let y=x2e.get(o);if(jQ.shallowEquals(s,y.lastOptions)){yield jQ.nextFrame();let b=y.view,x=b.changeset().remove(()=>!0).insert(i);yield b.change("values",x).runAsync();return}}let{xLabel:a,yLabel:l,xType:u,yType:c}=s,f=null;a!=null&&(f={title:a});let d=null;l!=null&&(d={title:l});let p={actions:!1,mode:"vega-lite",defaultStyle:!1},h;s.color!=null?Array.isArray(s.color)?h={field:"index",type:"nominal",scale:{range:s.color}}:h={value:s.color}:h={value:"#4C78A0"};let m={width:s.width||Gft.getDefaultWidth(o),height:s.height||Gft.getDefaultHeight(o),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:s.fontSize,titleFontSize:s.fontSize},text:{fontSize:s.fontSize},legend:{labelFontSize:s.fontSize,titleFontSize:s.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:u,axis:f},y:{field:"value",type:c,axis:d},color:h}};yield jQ.nextFrame();let g=yield X1r.default(o,m,p);x2e.set(o,{view:g.view,lastOptions:s})})}BA.barchart=K1r;var Z1r={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},x2e=new Map});var Hft=gt($A=>{"use strict";var Q1r=$A&&$A.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},J1r=$A&&$A.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($A,"__esModule",{value:!0});var ewr=J1r((NA(),vl(DA))),qft=Vv(),twr=Gp();function rwr(t,r,n={}){return Q1r(this,void 0,void 0,function*(){let o=Object.assign({},nwr,n),i=twr.getDrawArea(t),s=[],a=r.values,l=r.tickLabels||[],u=l.length===0,c=!0;for(let h=0;h<a.length;h++){let m=u?`Class ${h}`:l[h];u&&l.push(m);for(let g=0;g<a[h].length;g++){let y=u?`Class ${g}`:l[g],b=a[h][g];h===g&&!o.shadeDiagonal?s.push({label:m,prediction:y,count:b,noFill:!0}):(s.push({label:m,prediction:y,count:b,scaleCount:b}),b!==0&&(c=!1))}}if(!o.shadeDiagonal&&c)for(let h of s)h.noFill===!0&&(h.noFill=!1,h.scaleCount=h.count);let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||qft.getDefaultWidth(i),height:o.height||qft.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:s},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:l}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:l}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};o.shadeDiagonal===!1&&d.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&d.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});let p=typeof o.colorMap=="string"?{scheme:o.colorMap}:o.colorMap;d.layer[0].encoding.color.scale.range=p,yield ewr.default(i,d,f)})}$A.confusionMatrix=rwr;var nwr={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}});var r6=gt(oR=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});function Yft(t,r){if(!t)throw new Error(typeof r=="string"?r:r())}oR.assert=Yft;function owr(t,r,n=""){Yft(Xft(t,r),n+` Shapes ${t} and ${r} must match`)}oR.assertShapesMatch=owr;function Xft(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}oR.arraysEqual=Xft;oR.DECIMAL_PLACES_TO_CHECK=4});var Jft=gt(Gv=>{"use strict";var Qft=Gv&&Gv.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},iwr=Gv&&Gv.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r},swr=Gv&&Gv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gv,"__esModule",{value:!0});var n6=iwr((re(),vl(Oo))),awr=swr((NA(),vl(DA))),Kft=Vv(),o6=r6(),lwr=Gp();function uwr(t,r,n={}){return Qft(this,void 0,void 0,function*(){let o=Object.assign({},fwr,n),i=lwr.getDrawArea(t),s=r.values;o.rowMajor&&(s=yield cwr(r.values));let{xTickLabels:a,yTickLabels:l}=r;a!=null&&Zft(s,a,0),l!=null&&Zft(s,l,1);let u="@tfidx@",c=[];if(s instanceof n6.Tensor){o6.assert(s.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let g=yield s.data(),[y,b]=s.shape;for(let x=0;x<y;x++){let v=a?`${a[x]}${u}${x}`:x;for(let w=0;w<b;w++){let _=l?`${l[w]}${u}${w}`:w,C=x*b+w,S=g[C];c.push({x:v,y:_,value:S})}}}else{let g=s;for(let y=0;y<g.length;y++){let b=a?`${a[y]}${u}${y}`:y;for(let x=0;x<g[y].length;x++){let v=l?`${l[x]}${u}${x}`:x,w=g[y][x];c.push({x:b,y:v,value:w})}}}let f={actions:!1,mode:"vega-lite",defaultStyle:!1},d={width:o.width||Kft.getDefaultWidth(i),height:o.height||Kft.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:c},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},p=`${u}\\d+$`,h=new RegExp(p);a&&(d.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),l&&(d.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${p}/), '')`}),(a||l)&&(f.tooltip={sanitize:g=>String(g).replace(h,"")});let m;switch(o.colorMap){case"blues":m=["#f7fbff","#4292c6"];break;case"greyscale":m=["#000000","#ffffff"];break;case"viridis":default:m="viridis";break}if(m!=="viridis"){let g=d.encoding.fill;g.scale={range:m}}if(o.domain){let g=d.encoding.fill;g.scale!=null?g.scale=Object.assign({},g.scale,{domain:o.domain}):g.scale={domain:o.domain}}yield awr.default(i,d,f)})}Gv.heatmap=uwr;function cwr(t){return Qft(this,void 0,void 0,function*(){let r,n;t instanceof n6.Tensor?(r=t.shape,n=t.transpose()):(r=[t.length,t[0].length],n=n6.tidy(()=>n6.tensor2d(t).transpose())),o6.assert(n.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");let o=yield n.array();n.dispose();let i=[o.length,o[0].length];return o6.assert(r[0]===i[1]&&r[1]===i[0],`Unexpected transposed shape. Original ${r} : Transposed ${i}`),o})}function Zft(t,r,n){let o=t instanceof n6.Tensor?t.shape:[t.length,t[0].length];n===0?o6.assert(o[0]===r.length,`Length of xTickLabels (${r.length}) must match number of rows (${o[0]})`):n===1&&o6.assert(o[1]===r.length,`Length of yTickLabels (${r.length}) must match number of columns (${o[1]})`)}var fwr={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}});var i6=gt(Wv=>{"use strict";var LQ=Wv&&Wv.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(Wv,"__esModule",{value:!0});var zA=(re(),vl(Oo)),O2=r6();function dwr(t){if(!Array.isArray(t))throw new Error("input must be an array");if(t.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};let r=t.length,n=-1/0,o=1/0,i=0,s=0,a=0;for(let u=0;u<r;u++){let c=t[u];c>n&&(n=c),c<o&&(o=c),c===0&&(i+=1),isNaN(c)?s+=1:isFinite(c)||(a+=1)}let l={numVals:r,numZeros:i,numNans:s,max:n,min:o,numInfs:a};return l.max===-1/0&&(l.max=NaN),l.min===1/0&&(l.min=NaN),l}Wv.arrayStats=dwr;function pwr(t){return LQ(this,void 0,void 0,function*(){let[r,n,o]=zA.tidy(()=>{let i=zA.scalar(0,t.dtype),s=t.min(),a=t.max(),l=t.equal(i).sum();return[s,a,l]});return Promise.all([t.data(),r.data(),n.data(),o.data()]).then(([i,s,a,l])=>{let u=i.length,c=0,f=0;for(let m=0;m<u;m++){let g=i[m];isNaN(g)?c+=1:isFinite(g)||(f+=1)}let d=s[0],p=a[0];return c===u&&(d=NaN,p=NaN),{numVals:u,numZeros:l[0],numNans:c,min:d,max:p,numInfs:f}})})}Wv.tensorStats=pwr;function hwr(t,r,n,o){return LQ(this,void 0,void 0,function*(){O2.assert(t.rank===1,"labels must be a 1D tensor"),O2.assert(r.rank===1,"predictions must be a 1D tensor"),O2.assert(t.size===r.size,"labels and predictions must be the same length"),o!=null&&O2.assert(o.size===r.size,"labels and predictions must be the same length");let i=t.cast("int32"),s=r.cast("int32");n==null&&(n=zA.tidy(()=>zA.maximum(i.max(),s.max()).cast("int32").dataSync()[0]+1));let a=Promise.resolve(null);return o!=null&&(a=o.data()),Promise.all([i.data(),s.data(),a]).then(([l,u,c])=>{let f=Array(n).fill(0);for(let d=0;d<n;d++)f[d]=Array(n).fill(0);for(let d=0;d<l.length;d++){let p=l[d],h=u[d];c!=null?f[p][h]+=c[d]:f[p][h]+=1}return f})})}Wv.confusionMatrix=hwr;function mwr(t,r){return LQ(this,void 0,void 0,function*(){O2.assertShapesMatch(t.shape,r.shape,"Error computing accuracy.");let n=t.equal(r),o=n.mean(),i=(yield o.data())[0];return zA.dispose([n,o]),i})}Wv.accuracy=mwr;function gwr(t,r,n){return LQ(this,void 0,void 0,function*(){return O2.assert(t.rank===1,"labels must be a 1D tensor"),O2.assert(r.rank===1,"predictions must be a 1D tensor"),O2.assert(t.size===r.size,"labels and predictions must be the same length"),n==null&&(n=zA.tidy(()=>zA.maximum(t.max(),r.max()).dataSync()[0]+1)),Promise.all([t.data(),r.data()]).then(([o,i])=>{let s=Array(n).fill(0),a=Array(n).fill(0);for(let u=0;u<o.length;u++){let c=o[u],f=i[u];s[c]+=1,c===f&&(a[c]+=1)}let l=[];for(let u=0;u<s.length;u++)l.push({count:s[u],accuracy:s[u]===0?0:a[u]/s[u]});return l})})}Wv.perClassAccuracy=gwr});var BQ,s6,$Q=D(()=>{"use strict";BQ="http://www.w3.org/1999/xhtml",s6={svg:"http://www.w3.org/2000/svg",xhtml:BQ,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}});function iR(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),s6.hasOwnProperty(r)?{space:s6[r],local:t}:t}var zQ=D(()=>{"use strict";$Q()});function ywr(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===BQ&&r.documentElement.namespaceURI===BQ?r.createElement(t):r.createElementNS(n,t)}}function bwr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function F2(t){var r=iR(t);return(r.local?bwr:ywr)(r)}var a6=D(()=>{"use strict";zQ();$Q()});function xwr(){}function sR(t){return t==null?xwr:function(){return this.querySelector(t)}}var UQ=D(()=>{"use strict"});function edt(t){typeof t!="function"&&(t=sR(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=new Array(a),u,c,f=0;f<a;++f)(u=s[f])&&(c=t.call(u,u.__data__,f,s))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new Mi(o,this._parents)}var tdt=D(()=>{"use strict";Wp();UQ()});function vwr(){return[]}function VQ(t){return t==null?vwr:function(){return this.querySelectorAll(t)}}var v2e=D(()=>{"use strict"});function rdt(t){typeof t!="function"&&(t=VQ(t));for(var r=this._groups,n=r.length,o=[],i=[],s=0;s<n;++s)for(var a=r[s],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(o.push(t.call(u,u.__data__,c,a)),i.push(u));return new Mi(o,i)}var ndt=D(()=>{"use strict";Wp();v2e()});var idt,aR,odt,GQ,w2e=D(()=>{"use strict";idt=function(t){return function(){return this.matches(t)}};typeof document<"u"&&(aR=document.documentElement,aR.matches||(odt=aR.webkitMatchesSelector||aR.msMatchesSelector||aR.mozMatchesSelector||aR.oMatchesSelector,idt=function(t){return function(){return odt.call(this,t)}}));GQ=idt});function sdt(t){typeof t!="function"&&(t=GQ(t));for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i)for(var s=r[i],a=s.length,l=o[i]=[],u,c=0;c<a;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&l.push(u);return new Mi(o,this._parents)}var adt=D(()=>{"use strict";Wp();w2e()});function WQ(t){return new Array(t.length)}var _2e=D(()=>{"use strict"});function ldt(){return new Mi(this._enter||this._groups.map(WQ),this._parents)}function l6(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}var S2e=D(()=>{"use strict";_2e();Wp();l6.prototype={constructor:l6,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}});function udt(t){return function(){return t}}var cdt=D(()=>{"use strict"});function wwr(t,r,n,o,i,s){for(var a=0,l,u=r.length,c=s.length;a<c;++a)(l=r[a])?(l.__data__=s[a],o[a]=l):n[a]=new l6(t,s[a]);for(;a<u;++a)(l=r[a])&&(i[a]=l)}function _wr(t,r,n,o,i,s,a){var l,u,c={},f=r.length,d=s.length,p=new Array(f),h;for(l=0;l<f;++l)(u=r[l])&&(p[l]=h=fdt+a.call(u,u.__data__,l,r),h in c?i[l]=u:c[h]=u);for(l=0;l<d;++l)h=fdt+a.call(t,s[l],l,s),(u=c[h])?(o[l]=u,u.__data__=s[l],c[h]=null):n[l]=new l6(t,s[l]);for(l=0;l<f;++l)(u=r[l])&&c[p[l]]===u&&(i[l]=u)}function ddt(t,r){if(!t)return h=new Array(this.size()),c=-1,this.each(function(C){h[++c]=C}),h;var n=r?_wr:wwr,o=this._parents,i=this._groups;typeof t!="function"&&(t=udt(t));for(var s=i.length,a=new Array(s),l=new Array(s),u=new Array(s),c=0;c<s;++c){var f=o[c],d=i[c],p=d.length,h=t.call(f,f&&f.__data__,c,o),m=h.length,g=l[c]=new Array(m),y=a[c]=new Array(m),b=u[c]=new Array(p);n(f,d,g,y,b,h,r);for(var x=0,v=0,w,_;x<m;++x)if(w=g[x]){for(x>=v&&(v=x+1);!(_=y[v])&&++v<m;);w._next=_||null}}return a=new Mi(a,o),a._enter=l,a._exit=u,a}var fdt,pdt=D(()=>{"use strict";Wp();S2e();cdt();fdt="$"});function hdt(){return new Mi(this._exit||this._groups.map(WQ),this._parents)}var mdt=D(()=>{"use strict";_2e();Wp()});function gdt(t){for(var r=this._groups,n=t._groups,o=r.length,i=n.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var u=r[l],c=n[l],f=u.length,d=a[l]=new Array(f),p,h=0;h<f;++h)(p=u[h]||c[h])&&(d[h]=p);for(;l<o;++l)a[l]=r[l];return new Mi(a,this._parents)}var ydt=D(()=>{"use strict";Wp()});function bdt(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var o=t[r],i=o.length-1,s=o[i],a;--i>=0;)(a=o[i])&&(s&&s!==a.nextSibling&&s.parentNode.insertBefore(a,s),s=a);return this}var xdt=D(()=>{"use strict"});function vdt(t){t||(t=Swr);function r(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s){for(var a=n[s],l=a.length,u=i[s]=new Array(l),c,f=0;f<l;++f)(c=a[f])&&(u[f]=c);u.sort(r)}return new Mi(i,this._parents).order()}function Swr(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var wdt=D(()=>{"use strict";Wp()});function _dt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}var Sdt=D(()=>{"use strict"});function Cdt(){var t=new Array(this.size()),r=-1;return this.each(function(){t[++r]=this}),t}var Edt=D(()=>{"use strict"});function Tdt(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,s=o.length;i<s;++i){var a=o[i];if(a)return a}return null}var Adt=D(()=>{"use strict"});function kdt(){var t=0;return this.each(function(){++t}),t}var Idt=D(()=>{"use strict"});function Ddt(){return!this.node()}var Ndt=D(()=>{"use strict"});function Odt(t){for(var r=this._groups,n=0,o=r.length;n<o;++n)for(var i=r[n],s=0,a=i.length,l;s<a;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}var Fdt=D(()=>{"use strict"});function Cwr(t){return function(){this.removeAttribute(t)}}function Ewr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Twr(t,r){return function(){this.setAttribute(t,r)}}function Awr(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function kwr(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Iwr(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Rdt(t,r){var n=iR(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((r==null?n.local?Ewr:Cwr:typeof r=="function"?n.local?Iwr:kwr:n.local?Awr:Twr)(n,r))}var Mdt=D(()=>{"use strict";zQ()});function lR(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}var qQ=D(()=>{"use strict"});function Dwr(t){return function(){this.style.removeProperty(t)}}function Nwr(t,r,n){return function(){this.style.setProperty(t,r,n)}}function Owr(t,r,n){return function(){var o=r.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function Pdt(t,r,n){return arguments.length>1?this.each((r==null?Dwr:typeof r=="function"?Owr:Nwr)(t,r,n??"")):C2e(this.node(),t)}function C2e(t,r){return t.style.getPropertyValue(r)||lR(t).getComputedStyle(t,null).getPropertyValue(r)}var E2e=D(()=>{"use strict";qQ()});function Fwr(t){return function(){delete this[t]}}function Rwr(t,r){return function(){this[t]=r}}function Mwr(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function jdt(t,r){return arguments.length>1?this.each((r==null?Fwr:typeof r=="function"?Mwr:Rwr)(t,r)):this.node()[t]}var Ldt=D(()=>{"use strict"});function Bdt(t){return t.trim().split(/^|\s+/)}function T2e(t){return t.classList||new $dt(t)}function $dt(t){this._node=t,this._names=Bdt(t.getAttribute("class")||"")}function zdt(t,r){for(var n=T2e(t),o=-1,i=r.length;++o<i;)n.add(r[o])}function Udt(t,r){for(var n=T2e(t),o=-1,i=r.length;++o<i;)n.remove(r[o])}function Pwr(t){return function(){zdt(this,t)}}function jwr(t){return function(){Udt(this,t)}}function Lwr(t,r){return function(){(r.apply(this,arguments)?zdt:Udt)(this,t)}}function Vdt(t,r){var n=Bdt(t+"");if(arguments.length<2){for(var o=T2e(this.node()),i=-1,s=n.length;++i<s;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof r=="function"?Lwr:r?Pwr:jwr)(n,r))}var Gdt=D(()=>{"use strict";$dt.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}}});function Bwr(){this.textContent=""}function $wr(t){return function(){this.textContent=t}}function zwr(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Wdt(t){return arguments.length?this.each(t==null?Bwr:(typeof t=="function"?zwr:$wr)(t)):this.node().textContent}var qdt=D(()=>{"use strict"});function Uwr(){this.innerHTML=""}function Vwr(t){return function(){this.innerHTML=t}}function Gwr(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Hdt(t){return arguments.length?this.each(t==null?Uwr:(typeof t=="function"?Gwr:Vwr)(t)):this.node().innerHTML}var Ydt=D(()=>{"use strict"});function Wwr(){this.nextSibling&&this.parentNode.appendChild(this)}function Xdt(){return this.each(Wwr)}var Kdt=D(()=>{"use strict"});function qwr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zdt(){return this.each(qwr)}var Qdt=D(()=>{"use strict"});function Jdt(t){var r=typeof t=="function"?t:F2(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}var ept=D(()=>{"use strict";a6()});function Hwr(){return null}function tpt(t,r){var n=typeof t=="function"?t:F2(t),o=r==null?Hwr:typeof r=="function"?r:sR(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}var rpt=D(()=>{"use strict";a6();UQ()});function Ywr(){var t=this.parentNode;t&&t.removeChild(this)}function npt(){return this.each(Ywr)}var opt=D(()=>{"use strict"});function Xwr(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Kwr(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function ipt(t){return this.select(t?Kwr:Xwr)}var spt=D(()=>{"use strict"});function apt(t){return arguments.length?this.property("__data__",t):this.node().__data__}var lpt=D(()=>{"use strict"});function Zwr(t,r,n){return t=fpt(t,r,n),function(o){var i=o.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,o)}}function fpt(t,r,n){return function(o){var i=Hm;Hm=o;try{t.call(this,this.__data__,r,n)}finally{Hm=i}}}function Qwr(t){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");return o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),{type:r,name:n}})}function Jwr(t){return function(){var r=this.__on;if(r){for(var n=0,o=-1,i=r.length,s;n<i;++n)s=r[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.capture):r[++o]=s;++o?r.length=o:delete this.__on}}}function e_r(t,r,n){var o=cpt.hasOwnProperty(t.type)?Zwr:fpt;return function(i,s,a){var l=this.__on,u,c=o(r,s,a);if(l){for(var f=0,d=l.length;f<d;++f)if((u=l[f]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),u.value=r;return}}this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:r,listener:c,capture:n},l?l.push(u):this.__on=[u]}}function dpt(t,r,n){var o=Qwr(t+""),i,s=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(i=0,f=l[u];i<s;++i)if((a=o[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=r?e_r:Jwr,n==null&&(n=!1),i=0;i<s;++i)this.each(l(o[i],r,n));return this}function ppt(t,r,n,o){var i=Hm;t.sourceEvent=Hm,Hm=t;try{return r.apply(n,o)}finally{Hm=i}}var cpt,Hm,upt,HQ=D(()=>{"use strict";cpt={},Hm=null;typeof document<"u"&&(upt=document.documentElement,"onmouseenter"in upt||(cpt={mouseenter:"mouseover",mouseleave:"mouseout"}))});function hpt(t,r,n){var o=lR(t),i=o.CustomEvent;typeof i=="function"?i=new i(r,n):(i=o.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),t.dispatchEvent(i)}function t_r(t,r){return function(){return hpt(this,t,r)}}function r_r(t,r){return function(){return hpt(this,t,r.apply(this,arguments))}}function mpt(t,r){return this.each((typeof r=="function"?r_r:t_r)(t,r))}var gpt=D(()=>{"use strict";qQ()});function Mi(t,r){this._groups=t,this._parents=r}function ypt(){return new Mi([[document.documentElement]],u6)}var u6,bpt,Wp=D(()=>{"use strict";tdt();ndt();adt();pdt();S2e();mdt();ydt();xdt();wdt();Sdt();Edt();Adt();Idt();Ndt();Fdt();Mdt();E2e();Ldt();Gdt();qdt();Ydt();Kdt();Qdt();ept();rpt();opt();spt();lpt();HQ();gpt();u6=[null];Mi.prototype=ypt.prototype={constructor:Mi,select:edt,selectAll:rdt,filter:sdt,data:ddt,enter:ldt,exit:hdt,merge:gdt,order:bdt,sort:vdt,call:_dt,nodes:Cdt,node:Tdt,size:kdt,empty:Ddt,each:Odt,attr:Rdt,style:Pdt,property:jdt,classed:Vdt,text:Wdt,html:Hdt,raise:Xdt,lower:Zdt,append:Jdt,insert:tpt,remove:npt,clone:ipt,datum:apt,on:dpt,dispatch:mpt};bpt=ypt});function YQ(t){return typeof t=="string"?new Mi([[document.querySelector(t)]],[document.documentElement]):new Mi([[t]],u6)}var A2e=D(()=>{"use strict";Wp()});function xpt(t){return YQ(F2(t).call(document.documentElement))}var vpt=D(()=>{"use strict";a6();A2e()});function XQ(){return new k2e}function k2e(){this._="@"+(++n_r).toString(36)}var n_r,wpt=D(()=>{"use strict";n_r=0;k2e.prototype=XQ.prototype={constructor:k2e,get:function(t){for(var r=this._;!(r in t);)if(!(t=t.parentNode))return;return t[r]},set:function(t,r){return t[this._]=r},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}});function uR(){for(var t=Hm,r;r=t.sourceEvent;)t=r;return t}var KQ=D(()=>{"use strict";HQ()});function R2(t,r){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=r.clientX,o.y=r.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}var i=t.getBoundingClientRect();return[r.clientX-i.left-t.clientLeft,r.clientY-i.top-t.clientTop]}var c6=D(()=>{"use strict"});function _pt(t){var r=uR();return r.changedTouches&&(r=r.changedTouches[0]),R2(t,r)}var Spt=D(()=>{"use strict";KQ();c6()});function Cpt(t){return typeof t=="string"?new Mi([document.querySelectorAll(t)],[document.documentElement]):new Mi([t??[]],u6)}var Ept=D(()=>{"use strict";Wp()});function Tpt(t,r,n){arguments.length<3&&(n=r,r=uR().changedTouches);for(var o=0,i=r?r.length:0,s;o<i;++o)if((s=r[o]).identifier===n)return R2(t,s);return null}var Apt=D(()=>{"use strict";KQ();c6()});function kpt(t,r){r==null&&(r=uR().touches);for(var n=0,o=r?r.length:0,i=new Array(o);n<o;++n)i[n]=R2(t,r[n]);return i}var Ipt=D(()=>{"use strict";KQ();c6()});var Dpt={};fn(Dpt,{clientPoint:()=>R2,create:()=>xpt,creator:()=>F2,customEvent:()=>ppt,event:()=>Hm,local:()=>XQ,matcher:()=>GQ,mouse:()=>_pt,namespace:()=>iR,namespaces:()=>s6,select:()=>YQ,selectAll:()=>Cpt,selection:()=>bpt,selector:()=>sR,selectorAll:()=>VQ,style:()=>C2e,touch:()=>Tpt,touches:()=>kpt,window:()=>lR});var Npt=D(()=>{"use strict";vpt();a6();wpt();w2e();Spt();zQ();$Q();c6();A2e();Ept();Wp();UQ();v2e();E2e();Apt();Ipt();qQ();HQ()});var f6=gt(D2e=>{"use strict";Object.defineProperty(D2e,"__esModule",{value:!0});var o_r=(YE(),vl(Spe)),Opt=(Npt(),vl(Dpt)),I2e=rR(),i_r=Gp();function s_r(t,r,n={}){if(r&&r.headers==null)throw new Error('Data to render must have a "headers" property');if(r&&r.values==null)throw new Error('Data to render must have a "values" property');let o=i_r.getDrawArea(t),i=Object.assign({},a_r,n),s=Opt.select(o).select("table.tf-table"),a=I2e.css({fontSize:i.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(s.size()===0&&(s=Opt.select(o).append("table"),s.attr("class",` ${a} tf-table`),s.append("thead").append("tr"),s.append("tbody")),s.size()!==1)throw new Error("Error inserting table");let l=I2e.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),u=s.select("thead").select("tr").selectAll("th").data(r.headers),c=u.enter().append("th").attr("class",`${l}`);u.merge(c).html(y=>y),u.exit().remove();let f=o_r.format(",.4~f"),d=s.select("tbody").selectAll("tr").data(r.values),p=d.enter().append("tr"),h=I2e.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),m=d.merge(p).selectAll("td").data(y=>y),g=m.enter().append("td").attr("class",`${h}`);m.merge(g).html(y=>typeof y=="number"?f(y):y),m.exit().remove(),d.exit().remove()}D2e.table=s_r;var a_r={fontSize:14}});var QQ=gt(UA=>{"use strict";var l_r=UA&&UA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},u_r=UA&&UA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(UA,"__esModule",{value:!0});var Fpt=(YE(),vl(Spe)),c_r=u_r((NA(),vl(DA))),ZQ=Vv(),f_r=i6(),d_r=f6(),p_r={maxBins:12,fontSize:11};function h_r(t,r,n={}){return l_r(this,void 0,void 0,function*(){let o=g_r(r),i=Object.assign({},p_r,n),s={actions:!1,mode:"vega-lite",defaultStyle:!1},a=ZQ.subSurface(t,"histogram");if(n.stats!==!1){let c=ZQ.subSurface(t,"stats",{prepend:!0}),f;n.stats?f=n.stats:f=f_r.arrayStats(o.map(d=>d.value)),m_r(f,c,{fontSize:i.fontSize})}if(o.length===0)return;let l=[];for(let c=0;c<o.length;c++){let f=o[c].value;f!=null&&isFinite(f)&&l.push(o[c])}let u={width:i.width||ZQ.getDefaultWidth(a),height:i.height||ZQ.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:l},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return c_r.default(a,u,s)})}UA.histogram=h_r;function m_r(t,r,n){let o=Fpt.format(",.4~f"),i=Fpt.format(".4~p"),s=[],a=[];if(t.numVals!=null&&(s.push("Num Vals"),a.push(o(t.numVals))),t.min!=null&&(s.push("Min"),a.push(o(t.min))),t.max!=null&&(s.push("Max"),a.push(o(t.max))),t.numZeros!=null){s.push("# Zeros");let l="";t.numVals&&(l=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),a.push(`${o(t.numZeros)} ${l}`)}if(t.numNans!=null){s.push("# NaNs");let l="";t.numVals&&(l=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),a.push(`${o(t.numNans)} ${l}`)}if(t.numInfs!=null){s.push("# Infinity");let l="";t.numVals&&(l=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),a.push(`${o(t.numInfs)} ${l}`)}d_r.table(r,{headers:s,values:[a]},n)}function g_r(t){if(t.length==null)throw new Error("input data must be an array");if(t.length===0)return[];if(typeof t[0]=="object"){if(t[0].value==null)throw new Error("input data must have a value field");return t}else{let r=Array(t.length);for(let n=0;n<t.length;n++)r[n]={value:t[n]};return r}}});var N2e=gt(VA=>{"use strict";var y_r=VA&&VA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},b_r=VA&&VA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(VA,"__esModule",{value:!0});var x_r=b_r((NA(),vl(DA))),Rpt=Vv(),Mpt=r6(),v_r=Gp();function w_r(t,r,n={}){return y_r(this,void 0,void 0,function*(){let o=Array.isArray(r.values[0])?r.values:[r.values],i=o[0].length,s=r.series?r.series:o.map((g,y)=>`Series ${y+1}`);Mpt.assert(s.length===o.length,"Must have an equal number of series labels as there are data series"),n.seriesColors!=null&&Mpt.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=[];for(let g=0;g<i;g++){let y={x:g};s.forEach((b,x)=>{let v=o[x][g].y;y[b]=v,y[`${b}-name`]=b}),a.push(y)}let l=Object.assign({},__r,n),u=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},c={x:{field:"x",type:l.xType,title:l.xLabel},tooltip:[{field:"x",type:"quantitative"},...s.map(g=>({field:g,type:"quantitative"}))]},f=s.map(g=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:g,type:l.yType,title:l.yLabel,scale:u()},color:{field:`${g}-name`,type:"nominal",legend:{values:s,title:null},scale:{range:l.seriesColors}}}})),d={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},p=v_r.getDrawArea(t),h={width:l.width||Rpt.getDefaultWidth(p),height:l.height||Rpt.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:a},encoding:c,layer:[...f,d]},m={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield x_r.default(p,h,m),Promise.resolve()})}VA.linechart=w_r;var __r={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var jpt=gt(GA=>{"use strict";var S_r=GA&&GA.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})},C_r=GA&&GA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(GA,"__esModule",{value:!0});var E_r=C_r((NA(),vl(DA))),Ppt=Vv(),T_r=r6(),A_r=Gp();function k_r(t,r,n={}){return S_r(this,void 0,void 0,function*(){let o=r.values,i=r.series==null?[]:r.series;o=Array.isArray(o[0])?o:[o];let s=[];o.forEach((p,h)=>{let m=i[h]!=null?i[h]:`Series ${h+1}`,g=p.map(y=>Object.assign({},y,{series:m}));s.push(...g)}),n.seriesColors!=null&&T_r.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series");let a=A_r.getDrawArea(t),l=Object.assign({},I_r,n),u={actions:!1,mode:"vega-lite",defaultStyle:!1},c=()=>{if(l.zoomToFit)return{zero:!1};if(l.xAxisDomain!=null)return{domain:l.xAxisDomain}},f=()=>{if(l.zoomToFit)return{zero:!1};if(l.yAxisDomain!=null)return{domain:l.yAxisDomain}},d={width:l.width||Ppt.getDefaultWidth(a),height:l.height||Ppt.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:l.fontSize,titleFontSize:l.fontSize},text:{fontSize:l.fontSize},legend:{labelFontSize:l.fontSize,titleFontSize:l.fontSize}},data:{values:s},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:l.xType,title:l.xLabel,scale:c()},y:{field:"y",type:l.yType,title:l.yLabel,scale:f()},color:{field:"series",type:"nominal",scale:{range:l.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield E_r.default(a,d,u),Promise.resolve()})}GA.scatterplot=k_r;var I_r={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}});var Vpt=gt(cR=>{"use strict";var $pt=cR&&cR.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(cR,"__esModule",{value:!0});var D_r=N2e(),O2e=Gp(),zpt=Vv();function Upt(t,r,n,o={}){return $pt(this,void 0,void 0,function*(){let i=O2e.getDrawArea(t),s={};for(let c of n)if(/val_/.test(c)){let f=c.replace("val_","");Lpt(s,f);let d=Bpt(r,c,n.indexOf(c));s[f].series.push(c),s[f].values.push(d)}else{let f=Bpt(r,c,n.indexOf(c));Lpt(s,c),s[c].series.push(c),s[c].values.push(f)}let a=Object.keys(s),l=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},o),u=[];for(let c of a){let f=zpt.subSurface(i,c),d=s[c].series,p=s[c].values;d.every(m=>!!m.match("acc"))&&(l.zoomToFitAccuracy?l.zoomToFit=!0:(l.yAxisDomain=[0,1],delete l.zoomToFit));let h=D_r.linechart(f,{values:p,series:d},l);u.push(h)}yield Promise.all(u)})}cR.history=Upt;function Lpt(t,r){t[r]==null&&(t[r]={series:[],values:[]})}function Bpt(t,r,n){if(Array.isArray(t)){let o=Array.isArray(t[0])?t[n]:t,i=[];for(let s=0;s<o.length;s++){let a=o[s];i.push({x:s,y:a[r]})}return i}else return t.history[r].map((o,i)=>({x:i,y:o}))}function N_r(t,r,n={}){let o={},i=n.callbacks||["onEpochEnd","onBatchEnd"],s=O2e.getDrawArea(t),a=Object.assign({},n);delete a.callbacks;function l(c){return(f,d)=>$pt(this,void 0,void 0,function*(){/batch/i.test(c)?a.xLabel="Batch":/epoch/i.test(c)&&(a.xLabel="Epoch");let p=[],h=[];for(let g of r)if(d[g]!=null){h.push(g);let y=O_r(o,c,g);y.push({[g]:d[g]}),p.push(y)}let m=zpt.subSurface(s,c,{title:c});Upt(m,p,h,a),yield O2e.nextFrame()})}let u={};return i.forEach(c=>{u[c]=l(c)}),u}cR.fitCallbacks=N_r;function O_r(t,r,n){return t[r]==null&&(t[r]={}),t[r][n]==null&&(t[r][n]=[]),t[r][n]}});var qpt=gt(fR=>{"use strict";var JQ=fR&&fR.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(fR,"__esModule",{value:!0});var F_r=QQ(),Gpt=Gp(),Wpt=f6(),F2e=Vv(),R_r=i6();function M_r(t,r){return JQ(this,void 0,void 0,function*(){let n=Gpt.getDrawArea(t),o=j_r(r),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=o.layers.map(a=>[a.name,a.outputShape,a.parameters,a.trainable]);Wpt.table(n,{headers:i,values:s})})}fR.modelSummary=M_r;function P_r(t,r){return JQ(this,void 0,void 0,function*(){let n=Gpt.getDrawArea(t),o=yield B_r(r),i=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],s=F2e.subSurface(n,"layer-weights-info"),a=o.map(f=>[f.name,f.shape,f.stats.min,f.stats.max,f.weight.size,f.stats.numZeros,f.stats.numNans,f.stats.numInfs]);Wpt.table(s,{headers:i,values:a});let l=F2e.subSurface(n,"select-layer"),u=F2e.subSurface(n,"param-distribution"),c=f=>JQ(this,void 0,void 0,function*(){let p=yield o.filter(h=>h.name===f)[0].weight.data();F_r.histogram(u,p,{height:150,width:460,stats:!1})});$_r(o.map(f=>f.name),l,c)})}fR.layer=P_r;function j_r(t){return{layers:t.layers.map(L_r)}}function L_r(t){let r;return Array.isArray(t.outputShape[0])?r=`[${t.outputShape.map(o=>R2e(o)).join(", ")}]`:r=R2e(t.outputShape),{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:r}}function B_r(t){return JQ(this,void 0,void 0,function*(){let r=t.getWeights(),n=t.weights,o=r.map(R_r.tensorStats),i=yield Promise.all(o),s=r.map(a=>a.shape);return r.map((a,l)=>({name:n[l].name,stats:i[l],shape:R2e(s[l]),weight:a}))})}function R2e(t){let r=t.slice();return r.length===0?"Scalar":(r[0]===null&&(r[0]="batch"),`[${r.join(",")}]`)}function $_r(t,r,n){let s=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${t.map(u=>`<option value=${u}>${u}</option>`)}
    </select>
  `}</div>`;r.innerHTML=s;let a=r.querySelector("button"),l=r.querySelector("select");a.addEventListener("click",()=>{n(l.selectedOptions[0].label)})}});var Hpt=gt(d6=>{"use strict";var z_r=d6&&d6.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(d6,"__esModule",{value:!0});var U_r=Gp(),V_r=f6();function G_r(t,r,n){return z_r(this,void 0,void 0,function*(){let o=U_r.getDrawArea(t),i=["Class","Accuracy","# Samples"],s=[];for(let a=0;a<r.length;a++){let l=n?n[a]:a.toString(),u=r[a];s.push([l,u.accuracy,u.count])}return V_r.table(o,{headers:i,values:s})})}d6.perClassAccuracy=G_r});var Ypt=gt(p6=>{"use strict";var W_r=p6&&p6.__awaiter||function(t,r,n,o){return new(n||(n=Promise))(function(i,s){function a(c){try{u(o.next(c))}catch(f){s(f)}}function l(c){try{u(o.throw(c))}catch(f){s(f)}}function u(c){c.done?i(c.value):new n(function(f){f(c.value)}).then(a,l)}u((o=o.apply(t,r||[])).next())})};Object.defineProperty(p6,"__esModule",{value:!0});var q_r=QQ(),H_r=Gp(),Y_r=i6();function X_r(t,r){return W_r(this,void 0,void 0,function*(){let n=H_r.getDrawArea(t),o=yield Y_r.tensorStats(r),i=yield r.data();q_r.histogram(n,i,{height:150,stats:o})})}p6.valuesDistribution=X_r});var Xpt=gt(M2e=>{"use strict";Object.defineProperty(M2e,"__esModule",{value:!0});var K_r="1.5.1";M2e.version=K_r});var Qpt=gt(qv=>{"use strict";function Z_r(t){for(var r in t)qv.hasOwnProperty(r)||(qv[r]=t[r])}Object.defineProperty(qv,"__esModule",{value:!0});re();wse();var Q_r=Wft(),J_r=Hft(),e2r=Jft(),t2r=QQ(),r2r=N2e(),n2r=jpt(),o2r=f6(),Kpt=Vpt(),Zpt=qpt(),i2r=Hpt(),s2r=Ypt(),P2e=i6(),a2r=Xpt();qv.version_vis=a2r.version;var l2r={barchart:Q_r.barchart,table:o2r.table,histogram:t2r.histogram,linechart:r2r.linechart,scatterplot:n2r.scatterplot,confusionMatrix:J_r.confusionMatrix,heatmap:e2r.heatmap};qv.render=l2r;var u2r={accuracy:P2e.accuracy,perClassAccuracy:P2e.perClassAccuracy,confusionMatrix:P2e.confusionMatrix};qv.metrics=u2r;var c2r={history:Kpt.history,fitCallbacks:Kpt.fitCallbacks,perClassAccuracy:i2r.perClassAccuracy,valuesDistribution:s2r.valuesDistribution,layer:Zpt.layer,modelSummary:Zpt.modelSummary};qv.show=c2r;var f2r=b2e();qv.visor=f2r.visor;Z_r(o2e())});var ySt=gt((gSt,YEe)=>{"use strict";(function(t){typeof gSt=="object"&&typeof YEe<"u"?YEe.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).p5=t()})(function(){var t,r,n;return function o(i,s,a){function l(f,d){if(!s[f]){if(!i[f]){var p=typeof cM=="function"&&cM;if(!d&&p)return p(f,!0);if(u)return u(f,!0);throw(d=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",d}p=s[f]={exports:{}},i[f][0].call(p.exports,function(h){return l(i[f][1][h]||h)},p,p.exports,o,i,s,a)}return s[f].exports}for(var u=typeof cM=="function"&&cM,c=0;c<a.length;c++)l(a[c]);return l}({1:[function(o,i,s){"use strict";s.byteLength=function(g){var g=p(g),m=g[0],g=g[1];return 3*(m+g)/4-g},s.toByteArray=function(h){var m,g,b=p(h),y=b[0],b=b[1],x=new u(function(_,C){return 3*(_+C)/4-C}(y,b)),v=0,w=0<b?y-4:y;for(g=0;g<w;g+=4)m=l[h.charCodeAt(g)]<<18|l[h.charCodeAt(g+1)]<<12|l[h.charCodeAt(g+2)]<<6|l[h.charCodeAt(g+3)],x[v++]=m>>16&255,x[v++]=m>>8&255,x[v++]=255&m;return b===2&&(m=l[h.charCodeAt(g)]<<2|l[h.charCodeAt(g+1)]>>4,x[v++]=255&m),b===1&&(m=l[h.charCodeAt(g)]<<10|l[h.charCodeAt(g+1)]<<4|l[h.charCodeAt(g+2)]>>2,x[v++]=m>>8&255,x[v++]=255&m),x},s.fromByteArray=function(h){for(var m,g=h.length,y=g%3,b=[],x=0,v=g-y;x<v;x+=16383)b.push(function(w,_,C){for(var S,E=[],A=_;A<C;A+=3)S=(w[A]<<16&16711680)+(w[A+1]<<8&65280)+(255&w[A+2]),E.push(function(N){return a[N>>18&63]+a[N>>12&63]+a[N>>6&63]+a[63&N]}(S));return E.join("")}(h,x,v<x+16383?v:x+16383));return y==1?(m=h[g-1],b.push(a[m>>2]+a[m<<4&63]+"==")):y==2&&(m=(h[g-2]<<8)+h[g-1],b.push(a[m>>10]+a[m>>4&63]+a[m<<2&63]+"=")),b.join("")};for(var a=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=c.length;f<d;++f)a[f]=c[f],l[c.charCodeAt(f)]=f;function p(h){var m=h.length;if(0<m%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=h.indexOf("="),m=(h=h===-1?m:h)===m?0:4-h%4,[h,m]}l[45]=62,l[95]=63},{}],2:[function(o,i,s){},{}],3:[function(o,i,s){},{}],4:[function(o,i,s){(function(p){"use strict";var l=o("base64-js"),u=o("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(s.Buffer=p,s.SlowBuffer=function($){return+$!=$&&($=0),p.alloc(+$)},s.INSPECT_MAX_BYTES=50,2147483647);function d($){if(f<$)throw new RangeError('The value "'+$+'" is invalid for option "size"');return $=new Uint8Array($),Object.setPrototypeOf($,p.prototype),$}function p($,O,z){if(typeof $!="number")return h($,O,z);if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g($)}function h($,O,z){if(typeof $=="string"){var q=$,ee=O;if(p.isEncoding(ee=typeof ee=="string"&&ee!==""?ee:"utf8"))return ae=0|x(q,ee),Q=d(ae),Q=(q=Q.write(q,ee))!==ae?Q.slice(0,q):Q;throw new TypeError("Unknown encoding: "+ee)}if(ArrayBuffer.isView($))return y($);if($!=null){if(Y($,ArrayBuffer)||$&&Y($.buffer,ArrayBuffer)){var ae=$,q=O,Q=z;if(q<0||ae.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<q+(Q||0))throw new RangeError('"length" is outside of buffer bounds');return ae=q===void 0&&Q===void 0?new Uint8Array(ae):Q===void 0?new Uint8Array(ae,q):new Uint8Array(ae,q,Q),Object.setPrototypeOf(ae,p.prototype),ae}if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ee=$.valueOf&&$.valueOf(),ee!=null&&ee!==$)return p.from(ee,O,z);var le=function(ie){{var Z,ge;if(p.isBuffer(ie))return Z=0|b(ie.length),(ge=d(Z)).length!==0&&ie.copy(ge,0,0,Z),ge}if(ie.length!==void 0)return typeof ie.length!="number"||X(ie.length)?d(0):y(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return y(ie.data)}($);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return p.from($[Symbol.toPrimitive]("string"),O,z)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function m($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function g($){return m($),d($<0?0:0|b($))}function y($){for(var O=$.length<0?0:0|b($.length),z=d(O),q=0;q<O;q+=1)z[q]=255&$[q];return z}function b($){if(f<=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|$}function x($,O){if(p.isBuffer($))return $.length;if(ArrayBuffer.isView($)||Y($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var z=$.length,q=2<arguments.length&&arguments[2]===!0;if(!q&&z===0)return 0;for(var ee=!1;;)switch(O){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return V($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return G($).length;default:if(ee)return q?-1:V($).length;O=(""+O).toLowerCase(),ee=!0}}function v($,O,z){var q,ee=!1;if((O=O===void 0||O<0?0:O)>this.length||(z=z===void 0||z>this.length?this.length:z)<=0||(z>>>=0)<=(O>>>=0))return"";for($=$||"utf8";;)switch($){case"hex":var ae=this,Ae=O,Q=z,ge=ae.length;(!Q||Q<0||ge<Q)&&(Q=ge);for(var le="",ie=Ae=!Ae||Ae<0?0:Ae;ie<Q;++ie)le+=pe[ae[ie]];return le;case"utf8":case"utf-8":return A(this,O,z);case"ascii":var Z=this,ge=O,ne=z,ye="";ne=Math.min(Z.length,ne);for(var xe=ge;xe<ne;++xe)ye+=String.fromCharCode(127&Z[xe]);return ye;case"latin1":case"binary":var Ne=this,Ae=O,Re=z,ze="";Re=Math.min(Ne.length,Re);for(var lt=Ae;lt<Re;++lt)ze+=String.fromCharCode(Ne[lt]);return ze;case"base64":return We=this,q=z,(Bt=O)===0&&q===We.length?l.fromByteArray(We):l.fromByteArray(We.slice(Bt,q));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var We=O,Bt=z,Tt=this.slice(We,Bt),At="",Mt=0;Mt<Tt.length;Mt+=2)At+=String.fromCharCode(Tt[Mt]+256*Tt[Mt+1]);return At;default:if(ee)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),ee=!0}}function w($,O,z){var q=$[O];$[O]=$[z],$[z]=q}function _($,O,z,q,ee){if($.length===0)return-1;if(typeof z=="string"?(q=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),(z=(z=X(z=+z)?ee?0:$.length-1:z)<0?$.length+z:z)>=$.length){if(ee)return-1;z=$.length-1}else if(z<0){if(!ee)return-1;z=0}if(typeof O=="string"&&(O=p.from(O,q)),p.isBuffer(O))return O.length===0?-1:C($,O,z,q,ee);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?(ee?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call($,O,z):C($,[O],z,q,ee);throw new TypeError("val must be string, number or Buffer")}function C($,O,z,q,ee){var ae=1,Q=$.length,le=O.length;if(q!==void 0&&((q=String(q).toLowerCase())==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if($.length<2||O.length<2)return-1;Q/=ae=2,le/=2,z/=2}function ie(xe,Ne){return ae===1?xe[Ne]:xe.readUInt16BE(Ne*ae)}if(ee)for(var Z=-1,ge=z;ge<Q;ge++)if(ie($,ge)===ie(O,Z===-1?0:ge-Z)){if(ge-(Z=Z===-1?ge:Z)+1===le)return Z*ae}else Z!==-1&&(ge-=ge-Z),Z=-1;else for(ge=z=Q<z+le?Q-le:z;0<=ge;ge--){for(var ne=!0,ye=0;ye<le;ye++)if(ie($,ge+ye)!==ie(O,ye)){ne=!1;break}if(ne)return ge}return-1}function S($,O,z,q){return U(function(ee){for(var ae=[],Q=0;Q<ee.length;++Q)ae.push(255&ee.charCodeAt(Q));return ae}(O),$,z,q)}function E($,O,z,q){return U(function(ee,ae){for(var Q,le,ie=[],Z=0;Z<ee.length&&!((ae-=2)<0);++Z)le=ee.charCodeAt(Z),Q=le>>8,le=le%256,ie.push(le),ie.push(Q);return ie}(O,$.length-z),$,z,q)}function A($,O,z){z=Math.min($.length,z);for(var q=[],ee=O;ee<z;){var ae,Q,le,ie,Z=$[ee],ge=null,ne=239<Z?4:223<Z?3:191<Z?2:1;if(ee+ne<=z)switch(ne){case 1:Z<128&&(ge=Z);break;case 2:(192&(ae=$[ee+1]))==128&&127<(ie=(31&Z)<<6|63&ae)&&(ge=ie);break;case 3:ae=$[ee+1],Q=$[ee+2],(192&ae)==128&&(192&Q)==128&&2047<(ie=(15&Z)<<12|(63&ae)<<6|63&Q)&&(ie<55296||57343<ie)&&(ge=ie);break;case 4:ae=$[ee+1],Q=$[ee+2],le=$[ee+3],(192&ae)==128&&(192&Q)==128&&(192&le)==128&&65535<(ie=(15&Z)<<18|(63&ae)<<12|(63&Q)<<6|63&le)&&ie<1114112&&(ge=ie)}ge===null?(ge=65533,ne=1):65535<ge&&(ge-=65536,q.push(ge>>>10&1023|55296),ge=56320|1023&ge),q.push(ge),ee+=ne}var ye=q,xe=ye.length;if(xe<=N)return String.fromCharCode.apply(String,ye);for(var Ne="",Ae=0;Ae<xe;)Ne+=String.fromCharCode.apply(String,ye.slice(Ae,Ae+=N));return Ne}s.kMaxLength=f,(p.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf($,O),$.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=h,Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function($,O,z){return O=O,z=z,m($=$),!($<=0)&&O!==void 0?typeof z=="string"?d($).fill(O,z):d($).fill(O):d($)},p.allocUnsafe=g,p.allocUnsafeSlow=g,p.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==p.prototype},p.compare=function($,O){if(Y($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),Y(O,Uint8Array)&&(O=p.from(O,O.offset,O.byteLength)),!p.isBuffer($)||!p.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===O)return 0;for(var z=$.length,q=O.length,ee=0,ae=Math.min(z,q);ee<ae;++ee)if($[ee]!==O[ee]){z=$[ee],q=O[ee];break}return z<q?-1:q<z?1:0},p.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function($,O){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return p.alloc(0);if(O===void 0)for(ee=O=0;ee<$.length;++ee)O+=$[ee].length;for(var z=p.allocUnsafe(O),q=0,ee=0;ee<$.length;++ee){var ae=$[ee];if(Y(ae,Uint8Array)&&(ae=p.from(ae)),!p.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(z,q),q+=ae.length}return z},p.byteLength=x,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<$;O+=2)w(this,O,O+1);return this},p.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<$;O+=4)w(this,O,O+3),w(this,O+1,O+2);return this},p.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<$;O+=8)w(this,O,O+7),w(this,O+1,O+6),w(this,O+2,O+5),w(this,O+3,O+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?A(this,0,$):v.apply(this,arguments)},p.prototype.equals=function($){if(p.isBuffer($))return this===$||p.compare(this,$)===0;throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var O="",$=s.INSPECT_MAX_BYTES,O=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim();return this.length>$&&(O+=" ... "),"<Buffer "+O+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function($,O,z,q,ee){if(Y($,Uint8Array)&&($=p.from($,$.offset,$.byteLength)),!p.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(z===void 0&&(z=$?$.length:0),q===void 0&&(q=0),ee===void 0&&(ee=this.length),(O=O===void 0?0:O)<0||z>$.length||q<0||ee>this.length)throw new RangeError("out of range index");if(ee<=q&&z<=O)return 0;if(ee<=q)return-1;if(z<=O)return 1;if(this===$)return 0;for(var ae=(ee>>>=0)-(q>>>=0),Q=(z>>>=0)-(O>>>=0),le=Math.min(ae,Q),ie=this.slice(q,ee),Z=$.slice(O,z),ge=0;ge<le;++ge)if(ie[ge]!==Z[ge]){ae=ie[ge],Q=Z[ge];break}return ae<Q?-1:Q<ae?1:0},p.prototype.includes=function($,O,z){return this.indexOf($,O,z)!==-1},p.prototype.indexOf=function($,O,z){return _(this,$,O,z,!0)},p.prototype.lastIndexOf=function($,O,z){return _(this,$,O,z,!1)},p.prototype.write=function($,O,z,q){if(O===void 0)q="utf8",z=this.length,O=0;else if(z===void 0&&typeof O=="string")q=O,z=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(z)?(z>>>=0,q===void 0&&(q="utf8")):(q=z,z=void 0)}var ee=this.length-O;if((z===void 0||ee<z)&&(z=ee),0<$.length&&(z<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");q=q||"utf8";for(var ae,Q,le,ie=!1;;)switch(q){case"hex":var Z=this,ge=$,ne=O,ye=z,xe=(ne=Number(ne)||0,Z.length-ne);(!ye||xe<(ye=Number(ye)))&&(ye=xe),(xe=ge.length)/2<ye&&(ye=xe/2);for(var Ne=0;Ne<ye;++Ne){var Ae=parseInt(ge.substr(2*Ne,2),16);if(X(Ae))return Ne;Z[ne+Ne]=Ae}return Ne;case"utf8":case"utf-8":return xe=O,le=z,U(V($,(Q=this).length-xe),Q,xe,le);case"ascii":return S(this,$,O,z);case"latin1":case"binary":return S(this,$,O,z);case"base64":return Q=this,le=O,ae=z,U(G($),Q,le,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,$,O,z);default:if(ie)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),ie=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function k($,O,z){if($%1!=0||$<0)throw new RangeError("offset is not uint");if(z<$+O)throw new RangeError("Trying to access beyond buffer length")}function R($,O,z,q,ee,ae){if(!p.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee<O||O<ae)throw new RangeError('"value" argument is out of bounds');if(z+q>$.length)throw new RangeError("Index out of range")}function I($,O,z,q){if(z+q>$.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function L($,O,z,q,ee){return O=+O,z>>>=0,ee||I($,0,z,4),u.write($,O,z,q,23,4),z+4}function j($,O,z,q,ee){return O=+O,z>>>=0,ee||I($,0,z,8),u.write($,O,z,q,52,8),z+8}p.prototype.slice=function($,O){var z=this.length,z=(($=~~$)<0?($+=z)<0&&($=0):z<$&&($=z),(O=O===void 0?z:~~O)<0?(O+=z)<0&&(O=0):z<O&&(O=z),O<$&&(O=$),this.subarray($,O));return Object.setPrototypeOf(z,p.prototype),z},p.prototype.readUIntLE=function($,O,z){$>>>=0,O>>>=0,z||k($,O,this.length);for(var q=this[$],ee=1,ae=0;++ae<O&&(ee*=256);)q+=this[$+ae]*ee;return q},p.prototype.readUIntBE=function($,O,z){$>>>=0,O>>>=0,z||k($,O,this.length);for(var q=this[$+--O],ee=1;0<O&&(ee*=256);)q+=this[$+--O]*ee;return q},p.prototype.readUInt8=function($,O){return $>>>=0,O||k($,1,this.length),this[$]},p.prototype.readUInt16LE=function($,O){return $>>>=0,O||k($,2,this.length),this[$]|this[$+1]<<8},p.prototype.readUInt16BE=function($,O){return $>>>=0,O||k($,2,this.length),this[$]<<8|this[$+1]},p.prototype.readUInt32LE=function($,O){return $>>>=0,O||k($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},p.prototype.readUInt32BE=function($,O){return $>>>=0,O||k($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},p.prototype.readIntLE=function($,O,z){$>>>=0,O>>>=0,z||k($,O,this.length);for(var q=this[$],ee=1,ae=0;++ae<O&&(ee*=256);)q+=this[$+ae]*ee;return(ee*=128)<=q&&(q-=Math.pow(2,8*O)),q},p.prototype.readIntBE=function($,O,z){$>>>=0,O>>>=0,z||k($,O,this.length);for(var q=O,ee=1,ae=this[$+--q];0<q&&(ee*=256);)ae+=this[$+--q]*ee;return(ee*=128)<=ae&&(ae-=Math.pow(2,8*O)),ae},p.prototype.readInt8=function($,O){return $>>>=0,O||k($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},p.prototype.readInt16LE=function($,O){return $>>>=0,O||k($,2,this.length),O=this[$]|this[$+1]<<8,32768&O?4294901760|O:O},p.prototype.readInt16BE=function($,O){return $>>>=0,O||k($,2,this.length),O=this[$+1]|this[$]<<8,32768&O?4294901760|O:O},p.prototype.readInt32LE=function($,O){return $>>>=0,O||k($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},p.prototype.readInt32BE=function($,O){return $>>>=0,O||k($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},p.prototype.readFloatLE=function($,O){return $>>>=0,O||k($,4,this.length),u.read(this,$,!0,23,4)},p.prototype.readFloatBE=function($,O){return $>>>=0,O||k($,4,this.length),u.read(this,$,!1,23,4)},p.prototype.readDoubleLE=function($,O){return $>>>=0,O||k($,8,this.length),u.read(this,$,!0,52,8)},p.prototype.readDoubleBE=function($,O){return $>>>=0,O||k($,8,this.length),u.read(this,$,!1,52,8)},p.prototype.writeUIntLE=function($,O,z,q){$=+$,O>>>=0,z>>>=0,q||R(this,$,O,z,Math.pow(2,8*z)-1,0);var ee=1,ae=0;for(this[O]=255&$;++ae<z&&(ee*=256);)this[O+ae]=$/ee&255;return O+z},p.prototype.writeUIntBE=function($,O,z,q){$=+$,O>>>=0,z>>>=0,q||R(this,$,O,z,Math.pow(2,8*z)-1,0);var ee=z-1,ae=1;for(this[O+ee]=255&$;0<=--ee&&(ae*=256);)this[O+ee]=$/ae&255;return O+z},p.prototype.writeUInt8=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,1,255,0),this[O]=255&$,O+1},p.prototype.writeUInt16LE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,2,65535,0),this[O]=255&$,this[O+1]=$>>>8,O+2},p.prototype.writeUInt16BE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,2,65535,0),this[O]=$>>>8,this[O+1]=255&$,O+2},p.prototype.writeUInt32LE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,4,4294967295,0),this[O+3]=$>>>24,this[O+2]=$>>>16,this[O+1]=$>>>8,this[O]=255&$,O+4},p.prototype.writeUInt32BE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,4,4294967295,0),this[O]=$>>>24,this[O+1]=$>>>16,this[O+2]=$>>>8,this[O+3]=255&$,O+4},p.prototype.writeIntLE=function($,O,z,q){$=+$,O>>>=0,q||R(this,$,O,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=0,ae=1,Q=0;for(this[O]=255&$;++ee<z&&(ae*=256);)$<0&&Q===0&&this[O+ee-1]!==0&&(Q=1),this[O+ee]=($/ae>>0)-Q&255;return O+z},p.prototype.writeIntBE=function($,O,z,q){$=+$,O>>>=0,q||R(this,$,O,z,(q=Math.pow(2,8*z-1))-1,-q);var ee=z-1,ae=1,Q=0;for(this[O+ee]=255&$;0<=--ee&&(ae*=256);)$<0&&Q===0&&this[O+ee+1]!==0&&(Q=1),this[O+ee]=($/ae>>0)-Q&255;return O+z},p.prototype.writeInt8=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,1,127,-128),this[O]=255&($=$<0?255+$+1:$),O+1},p.prototype.writeInt16LE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,2,32767,-32768),this[O]=255&$,this[O+1]=$>>>8,O+2},p.prototype.writeInt16BE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,2,32767,-32768),this[O]=$>>>8,this[O+1]=255&$,O+2},p.prototype.writeInt32LE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,4,2147483647,-2147483648),this[O]=255&$,this[O+1]=$>>>8,this[O+2]=$>>>16,this[O+3]=$>>>24,O+4},p.prototype.writeInt32BE=function($,O,z){return $=+$,O>>>=0,z||R(this,$,O,4,2147483647,-2147483648),this[O]=($=$<0?4294967295+$+1:$)>>>24,this[O+1]=$>>>16,this[O+2]=$>>>8,this[O+3]=255&$,O+4},p.prototype.writeFloatLE=function($,O,z){return L(this,$,O,!0,z)},p.prototype.writeFloatBE=function($,O,z){return L(this,$,O,!1,z)},p.prototype.writeDoubleLE=function($,O,z){return j(this,$,O,!0,z)},p.prototype.writeDoubleBE=function($,O,z){return j(this,$,O,!1,z)},p.prototype.copy=function($,O,z,q){if(!p.isBuffer($))throw new TypeError("argument should be a Buffer");if(z=z||0,q||q===0||(q=this.length),O>=$.length&&(O=$.length),(q=0<q&&q<z?z:q)===z||$.length===0||this.length===0)return 0;if((O=O||0)<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length);var ee=(q=$.length-O<q-z?$.length-O+z:q)-z;if(this===$&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,z,q);else if(this===$&&z<O&&O<q)for(var ae=ee-1;0<=ae;--ae)$[ae+O]=this[ae+z];else Uint8Array.prototype.set.call($,this.subarray(z,q),O);return ee},p.prototype.fill=function($,O,z,q){if(typeof $=="string"){if(typeof O=="string"?(q=O,O=0,z=this.length):typeof z=="string"&&(q=z,z=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!p.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var ee;$.length===1&&(ee=$.charCodeAt(0),(q==="utf8"&&ee<128||q==="latin1")&&($=ee))}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(O<0||this.length<O||this.length<z)throw new RangeError("Out of range index");var ae;if(!(z<=O))if(O>>>=0,z=z===void 0?this.length:z>>>0,typeof($=$||0)=="number")for(ae=O;ae<z;++ae)this[ae]=$;else{var Q=p.isBuffer($)?$:p.from($,q),le=Q.length;if(le===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ae=0;ae<z-O;++ae)this[ae+O]=Q[ae%le]}return this};var M=/[^+/0-9A-Za-z-_]/g;function V($,O){O=O||1/0;for(var z,q=$.length,ee=null,ae=[],Q=0;Q<q;++Q){if(55295<(z=$.charCodeAt(Q))&&z<57344){if(!ee){if(56319<z){-1<(O-=3)&&ae.push(239,191,189);continue}if(Q+1===q){-1<(O-=3)&&ae.push(239,191,189);continue}ee=z;continue}if(z<56320){-1<(O-=3)&&ae.push(239,191,189),ee=z;continue}z=65536+(ee-55296<<10|z-56320)}else ee&&-1<(O-=3)&&ae.push(239,191,189);if(ee=null,z<128){if(--O<0)break;ae.push(z)}else if(z<2048){if((O-=2)<0)break;ae.push(z>>6|192,63&z|128)}else if(z<65536){if((O-=3)<0)break;ae.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;ae.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ae}function G($){return l.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}($))}function U($,O,z,q){for(var ee=0;ee<q&&!(ee+z>=O.length||ee>=$.length);++ee)O[ee+z]=$[ee];return ee}function Y($,O){return $ instanceof O||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===O.name}function X($){return $!=$}var pe=function(){for(var $="0123456789abcdef",O=new Array(256),z=0;z<16;++z)for(var q=16*z,ee=0;ee<16;++ee)O[q+ee]=$[z]+$[ee];return O}()}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(o,i,s){i.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l)||l===null)return l;throw TypeError("Can't set "+String(l)+" as a prototype")}},{"../internals/is-object":75}],7:[function(u,i,s){var a=u("../internals/well-known-symbol"),l=u("../internals/object-create"),u=u("../internals/object-define-property"),c=a("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),i.exports=function(d){f[c][d]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(o,i,s){"use strict";var a=o("../internals/string-multibyte").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},{"../internals/string-multibyte":124}],9:[function(o,i,s){i.exports=function(a,l,u){if(a instanceof l)return a;throw TypeError("Incorrect "+(u?u+" ":"")+"invocation")}},{}],10:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l){if(a(l))return l;throw TypeError(String(l)+" is not an object")}},{"../internals/is-object":75}],11:[function(o,i,s){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(I,i,s){"use strict";function a(j){return d(j)&&p(L,h(j))}var l,u=I("../internals/array-buffer-native"),c=I("../internals/descriptors"),f=I("../internals/global"),d=I("../internals/is-object"),p=I("../internals/has"),h=I("../internals/classof"),m=I("../internals/create-non-enumerable-property"),g=I("../internals/redefine"),y=I("../internals/object-define-property").f,b=I("../internals/object-get-prototype-of"),x=I("../internals/object-set-prototype-of"),N=I("../internals/well-known-symbol"),I=I("../internals/uid"),v=f.Int8Array,w=v&&v.prototype,_=f.Uint8ClampedArray,_=_&&_.prototype,C=v&&b(v),S=w&&b(w),E=Object.prototype,A=E.isPrototypeOf,N=N("toStringTag"),k=I("TYPED_ARRAY_TAG"),R=u&&!!x&&h(f.opera)!=="Opera",I=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(l in L)f[l]||(R=!1);if((!R||typeof C!="function"||C===Function.prototype)&&(C=function(){throw TypeError("Incorrect invocation")},R))for(l in L)f[l]&&x(f[l],C);if((!R||!S||S===E)&&(S=C.prototype,R))for(l in L)f[l]&&x(f[l].prototype,S);if(R&&b(_)!==S&&x(_,S),c&&!p(S,N))for(l in I=!0,y(S,N,{get:function(){return d(this)?this[k]:void 0}}),L)f[l]&&m(f[l],k,l);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:R,TYPED_ARRAY_TAG:I&&k,aTypedArray:function(j){if(a(j))return j;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(j){if(x){if(A.call(C,j))return j}else for(var M in L)if(p(L,l)&&(M=f[M],M&&(j===M||A.call(M,j))))return j;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(j,M,V){if(c){if(V)for(var G in L)G=f[G],G&&p(G.prototype,j)&&delete G.prototype[j];S[j]&&!V||g(S,j,!V&&R&&w[j]||M)}},exportTypedArrayStaticMethod:function(j,M,V){var G,U;if(c){if(x){if(V)for(G in L)(U=f[G])&&p(U,j)&&delete U[j];if(C[j]&&!V)return;try{return g(C,j,!V&&R&&v[j]||M)}catch{}}for(G in L)!(U=f[G])||U[j]&&!V||g(U,j,M)}},isView:function(j){return j=h(j),j==="DataView"||p(L,j)},isTypedArray:a,TypedArray:C,TypedArrayPrototype:S}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(z,i,s){"use strict";function a(ne){return[255&ne]}function l(ne){return[255&ne,ne>>8&255]}function u(ne){return[255&ne,ne>>8&255,ne>>16&255,ne>>24&255]}function c(ne){return ne[3]<<24|ne[2]<<16|ne[1]<<8|ne[0]}function f(ne){return ae(ne,23,4)}function d(ne){return ae(ne,52,8)}function p(ne,ye){I(ne[Y],ye,{get:function(){return M(this)[ye]}})}function h(ze,ye,Re,Ne){if(Re=E(Re),ze=M(ze),Re+ye>ze.byteLength)throw ee(X);var Ae=M(ze.buffer).bytes,Re=Re+ze.byteOffset,ze=Ae.slice(Re,Re+ye);return Ne?ze:ze.reverse()}function m(ne,ye,xe,Ne,Ae,Re){if(xe=E(xe),ne=M(ne),xe+ye>ne.byteLength)throw ee(X);for(var ze=M(ne.buffer).bytes,lt=xe+ne.byteOffset,We=Ne(+Ae),Bt=0;Bt<ye;Bt++)ze[lt+Bt]=We[Re?Bt:ye-Bt-1]}var g=z("../internals/global"),y=z("../internals/descriptors"),b=z("../internals/array-buffer-native"),x=z("../internals/create-non-enumerable-property"),v=z("../internals/redefine-all"),w=z("../internals/fails"),_=z("../internals/an-instance"),C=z("../internals/to-integer"),S=z("../internals/to-length"),E=z("../internals/to-index"),A=z("../internals/ieee754"),N=z("../internals/object-get-prototype-of"),k=z("../internals/object-set-prototype-of"),R=z("../internals/object-get-own-property-names").f,I=z("../internals/object-define-property").f,L=z("../internals/array-fill"),j=z("../internals/set-to-string-tag"),z=z("../internals/internal-state"),M=z.get,V=z.set,G="ArrayBuffer",U="DataView",Y="prototype",X="Wrong index",pe=g[G],$=pe,O=g[U],z=O&&O[Y],q=Object.prototype,ee=g.RangeError,ae=A.pack,Q=A.unpack;if(b){if(!w(function(){pe(1)})||!w(function(){new pe(-1)})||w(function(){return new pe,new pe(1.5),new pe(NaN),pe.name!=G})){for(var le,g=($=function(xe){return _(this,$),new pe(E(xe))})[Y]=pe[Y],ie=R(pe),Z=0;ie.length>Z;)(le=ie[Z++])in $||x($,le,pe[le]);g.constructor=$}k&&N(z)!==q&&k(z,q);var A=new O(new $(2)),ge=z.setInt8;A.setInt8(0,2147483648),A.setInt8(1,2147483649),!A.getInt8(0)&&A.getInt8(1)||v(z,{setInt8:function(ye,xe){ge.call(this,ye,xe<<24>>24)},setUint8:function(ye,xe){ge.call(this,ye,xe<<24>>24)}},{unsafe:!0})}else $=function(ne){_(this,$,G),ne=E(ne),V(this,{bytes:L.call(new Array(ne),0),byteLength:ne}),y||(this.byteLength=ne)},O=function(ne,Ae,xe){_(this,O,U),_(ne,$,U);var Ne=M(ne).byteLength,Ae=C(Ae);if(Ae<0||Ne<Ae)throw ee("Wrong offset");if(Ne<Ae+(xe=xe===void 0?Ne-Ae:S(xe)))throw ee("Wrong length");V(this,{buffer:ne,byteLength:xe,byteOffset:Ae}),y||(this.buffer=ne,this.byteLength=xe,this.byteOffset=Ae)},y&&(p($,"byteLength"),p(O,"buffer"),p(O,"byteLength"),p(O,"byteOffset")),v(O[Y],{getInt8:function(ne){return h(this,1,ne)[0]<<24>>24},getUint8:function(ne){return h(this,1,ne)[0]},getInt16:function(ne){return ne=h(this,2,ne,1<arguments.length?arguments[1]:void 0),(ne[1]<<8|ne[0])<<16>>16},getUint16:function(ne){return ne=h(this,2,ne,1<arguments.length?arguments[1]:void 0),ne[1]<<8|ne[0]},getInt32:function(ne){return c(h(this,4,ne,1<arguments.length?arguments[1]:void 0))},getUint32:function(ne){return c(h(this,4,ne,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ne){return Q(h(this,4,ne,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ne){return Q(h(this,8,ne,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ne,ye){m(this,1,ne,a,ye)},setUint8:function(ne,ye){m(this,1,ne,a,ye)},setInt16:function(ne,ye){m(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setUint16:function(ne,ye){m(this,2,ne,l,ye,2<arguments.length?arguments[2]:void 0)},setInt32:function(ne,ye){m(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setUint32:function(ne,ye){m(this,4,ne,u,ye,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ne,ye){m(this,4,ne,f,ye,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ne,ye){m(this,8,ne,d,ye,2<arguments.length?arguments[2]:void 0)}});j($,G),j(O,U),i.exports={ArrayBuffer:$,DataView:O}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length"),c=Math.min;i.exports=[].copyWithin||function(y,d){var p=a(this),h=u(p.length),m=l(y,h),g=l(d,h),y=2<arguments.length?arguments[2]:void 0,b=c((y===void 0?h:l(y,h))-g,h-m),x=1;for(g<m&&m<g+b&&(x=-1,g+=b-1,m+=b-1);0<b--;)g in p?p[m]=p[g]:delete p[m],m+=x,g+=x;return p}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(o,i,s){"use strict";var a=o("../internals/to-object"),l=o("../internals/to-absolute-index"),u=o("../internals/to-length");i.exports=function(c){for(var f=a(this),d=u(f.length),h=arguments.length,p=l(1<h?arguments[1]:void 0,d),h=2<h?arguments[2]:void 0,m=h===void 0?d:l(h,d);p<m;)f[p++]=c;return f}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(u,i,s){"use strict";var a=u("../internals/array-iteration").forEach,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("forEach"),u=u("forEach");i.exports=l&&u?[].forEach:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(o,i,s){"use strict";var a=o("../internals/function-bind-context"),l=o("../internals/to-object"),u=o("../internals/call-with-safe-iteration-closing"),c=o("../internals/is-array-iterator-method"),f=o("../internals/to-length"),d=o("../internals/create-property"),p=o("../internals/get-iterator-method");i.exports=function(_){var m,g,y,b,x,v,w=l(_),_=typeof this=="function"?this:Array,C=arguments.length,S=1<C?arguments[1]:void 0,E=S!==void 0,A=p(w),N=0;if(E&&(S=a(S,2<C?arguments[2]:void 0,2)),A==null||_==Array&&c(A))for(g=new _(m=f(w.length));N<m;N++)v=E?S(w[N],N):w[N],d(g,N,v);else for(x=(b=A.call(w)).next,g=new _;!(y=x.call(b)).done;N++)v=E?u(b,S,[y.value,N],!0):y.value,d(g,N,v);return g.length=N,g}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(o,i,s){function a(f){return function(d,p,h){var m,g=l(d),y=u(g.length),b=c(h,y);if(f&&p!=p){for(;b<y;)if((m=g[b++])!=m)return!0}else for(;b<y;b++)if((f||b in g)&&g[b]===p)return f||b||0;return!f&&-1}}var l=o("../internals/to-indexed-object"),u=o("../internals/to-length"),c=o("../internals/to-absolute-index");i.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(o,i,s){function a(h){var m=h==1,g=h==2,y=h==3,b=h==4,x=h==6,v=h==5||x;return function(w,_,C,S){for(var E,A,N=c(w),k=u(N),R=l(_,C,3),I=f(k.length),L=0,_=S||d,j=m?_(w,I):g?_(w,0):void 0;L<I;L++)if((v||L in k)&&(A=R(E=k[L],L,N),h)){if(m)j[L]=A;else if(A)switch(h){case 3:return!0;case 5:return E;case 6:return L;case 2:p.call(j,E)}else if(b)return!1}return x?-1:y||b?b:j}}var l=o("../internals/function-bind-context"),u=o("../internals/indexed-object"),c=o("../internals/to-object"),f=o("../internals/to-length"),d=o("../internals/array-species-create"),p=[].push;i.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(h,i,s){"use strict";var a=h("../internals/to-indexed-object"),l=h("../internals/to-integer"),u=h("../internals/to-length"),p=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),c=Math.min,f=[].lastIndexOf,d=!!f&&1/[1].lastIndexOf(1,-0)<0,p=p("lastIndexOf"),h=h("indexOf",{ACCESSORS:!0,1:0});i.exports=d||!p||!h?function(m){if(d)return f.apply(this,arguments)||0;var g=a(this),y=u(g.length),b=y-1;for((b=1<arguments.length?c(b,l(arguments[1])):b)<0&&(b=y+b);0<=b;b--)if(b in g&&g[b]===m)return b||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/engine-v8-version"),c=l("species");i.exports=function(f){return 51<=u||!a(function(){var d=[];return(d.constructor={})[c]=function(){return{foo:1}},d[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(o,i,s){"use strict";var a=o("../internals/fails");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(o,i,s){function a(p){throw p}var l=o("../internals/descriptors"),u=o("../internals/fails"),c=o("../internals/has"),f=Object.defineProperty,d={};i.exports=function(p,h){var m,g,y,b;return c(d,p)?d[p]:(m=[][p],g=!!c(h=h||{},"ACCESSORS")&&h.ACCESSORS,y=c(h,0)?h[0]:a,b=c(h,1)?h[1]:void 0,d[p]=!!m&&!u(function(){if(g&&!l)return!0;var x={length:-1};g?f(x,1,{enumerable:!0,get:a}):x[1]=1,m.call(x,y,b)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(o,i,s){function a(d){return function(p,h,m,g){l(h);var y=u(p),b=c(y),x=f(y.length),v=d?x-1:0,w=d?-1:1;if(m<2)for(;;){if(v in b){g=b[v],v+=w;break}if(v+=w,d?v<0:x<=v)throw TypeError("Reduce of empty array with no initial value")}for(;d?0<=v:v<x;v+=w)v in b&&(g=h(g,b[v],v,y));return g}}var l=o("../internals/a-function"),u=o("../internals/to-object"),c=o("../internals/indexed-object"),f=o("../internals/to-length");i.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/is-array"),u=o("../internals/well-known-symbol")("species");i.exports=function(c,f){var d;return new((d=l(c)&&(typeof(d=c.constructor)=="function"&&(d===Array||l(d.prototype))||a(d)&&(d=d[u])===null)?void 0:d)===void 0?Array:d)(f===0?0:f)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(o,i,s){var a=o("../internals/an-object");i.exports=function(l,u,c,f){try{return f?u(a(c)[0],c[1]):u(c)}catch(d){throw f=l.return,f!==void 0&&a(f.call(l)),d}}},{"../internals/an-object":10}],27:[function(o,i,s){var a=o("../internals/well-known-symbol")("iterator"),l=!1;try{var u=0,c={next:function(){return{done:!!u++}},return:function(){l=!0}};c[a]=function(){return this},Array.from(c,function(){throw 2})}catch{}i.exports=function(f,d){if(!d&&!l)return!1;var p=!1;try{var h={};h[a]=function(){return{next:function(){return{done:p=!0}}}},f(h)}catch{}return p}},{"../internals/well-known-symbol":149}],28:[function(o,i,s){var a={}.toString;i.exports=function(l){return a.call(l).slice(8,-1)}},{}],29:[function(o,i,s){var a=o("../internals/to-string-tag-support"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("toStringTag"),c=l(function(){return arguments}())=="Arguments";i.exports=a?l:function(f){var d;return f===void 0?"Undefined":f===null?"Null":typeof(d=function(p,h){try{return p[h]}catch{}}(f=Object(f),u))=="string"?d:c?l(f):(d=l(f))=="Object"&&typeof f.callee=="function"?"Arguments":d}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(y,i,s){"use strict";var a=y("../internals/object-define-property").f,l=y("../internals/object-create"),u=y("../internals/redefine-all"),c=y("../internals/function-bind-context"),f=y("../internals/an-instance"),d=y("../internals/iterate"),p=y("../internals/define-iterator"),h=y("../internals/set-species"),m=y("../internals/descriptors"),g=y("../internals/internal-metadata").fastKey,y=y("../internals/internal-state"),b=y.set,x=y.getterFor;i.exports={getConstructor:function(v,w,_,C){function S(k,R,I){var L,j=N(k),M=E(k,R);return M?M.value=I:(j.last=M={index:L=g(R,!0),key:R,value:I,previous:R=j.last,next:void 0,removed:!1},j.first||(j.first=M),R&&(R.next=M),m?j.size++:k.size++,L!=="F"&&(j.index[L]=M)),k}function E(L,R){var I,L=N(L),j=g(R);if(j!=="F")return L.index[j];for(I=L.first;I;I=I.next)if(I.key==R)return I}var A=v(function(k,R){f(k,A,w),b(k,{type:w,index:l(null),first:void 0,last:void 0,size:0}),m||(k.size=0),R!=null&&d(R,k[C],k,_)}),N=x(w);return u(A.prototype,{clear:function(){for(var k=N(this),R=k.index,I=k.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=void 0),delete R[I.index],I=I.next;k.first=k.last=void 0,m?k.size=0:this.size=0},delete:function(j){var R,I,L=N(this),j=E(this,j);return j&&(R=j.next,I=j.previous,delete L.index[j.index],j.removed=!0,I&&(I.next=R),R&&(R.previous=I),L.first==j&&(L.first=R),L.last==j&&(L.last=I),m?L.size--:this.size--),!!j},forEach:function(k){for(var R,I=N(this),L=c(k,1<arguments.length?arguments[1]:void 0,3);R=R?R.next:I.first;)for(L(R.value,R.key,this);R&&R.removed;)R=R.previous},has:function(k){return!!E(this,k)}}),u(A.prototype,_?{get:function(k){return k=E(this,k),k&&k.value},set:function(k,R){return S(this,k===0?0:k,R)}}:{add:function(k){return S(this,k=k===0?0:k,k)}}),m&&a(A.prototype,"size",{get:function(){return N(this).size}}),A},setStrong:function(v,w,_){var C=w+" Iterator",S=x(w),E=x(C);p(v,w,function(A,N){b(this,{type:C,target:A,state:S(A),kind:N,last:void 0})},function(){for(var A=E(this),N=A.kind,k=A.last;k&&k.removed;)k=k.previous;return A.target&&(A.last=k=k?k.next:A.state.first)?N=="keys"?{value:k.key,done:!1}:N=="values"?{value:k.value,done:!1}:{value:[k.key,k.value],done:!1}:{value:A.target=void 0,done:!0}},_?"entries":"values",!_,!0),h(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(b,i,s){"use strict";function a(S){return S.frozen||(S.frozen=new l)}function l(){this.entries=[]}function u(S,E){return w(S.entries,function(A){return A[0]===E})}var c=b("../internals/redefine-all"),f=b("../internals/internal-metadata").getWeakData,d=b("../internals/an-object"),p=b("../internals/is-object"),h=b("../internals/an-instance"),m=b("../internals/iterate"),g=b("../internals/array-iteration"),y=b("../internals/has"),b=b("../internals/internal-state"),x=b.set,v=b.getterFor,w=g.find,_=g.findIndex,C=0;l.prototype={get:function(S){if(S=u(this,S),S)return S[1]},has:function(S){return!!u(this,S)},set:function(S,E){var A=u(this,S);A?A[1]=E:this.entries.push([S,E])},delete:function(S){var E=_(this.entries,function(A){return A[0]===S});return~E&&this.entries.splice(E,1),!!~E}},i.exports={getConstructor:function(S,E,A,N){function k(L,j,M){var V=I(L),G=f(d(j),!0);return G===!0?a(V).set(j,M):G[V.id]=M,L}var R=S(function(L,j){h(L,R,E),x(L,{type:E,id:C++,frozen:void 0}),j!=null&&m(j,L[N],L,A)}),I=v(E);return c(R.prototype,{delete:function(L){var j,M=I(this);return!!p(L)&&((j=f(L))===!0?a(M).delete(L):j&&y(j,M.id)&&delete j[M.id])},has:function(L){var j,M=I(this);return!!p(L)&&((j=f(L))===!0?a(M).has(L):j&&y(j,M.id))}}),c(R.prototype,A?{get:function(L){var j,M=I(this);if(p(L))return(j=f(L))===!0?a(M).get(L):j?j[M.id]:void 0},set:function(L,j){return k(this,L,j)}}:{add:function(L){return k(this,L,!0)}}),R}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/redefine"),f=o("../internals/internal-metadata"),d=o("../internals/iterate"),p=o("../internals/an-instance"),h=o("../internals/is-object"),m=o("../internals/fails"),g=o("../internals/check-correctness-of-iteration"),y=o("../internals/set-to-string-tag"),b=o("../internals/inherit-if-required");i.exports=function(x,v,w){function _(G){var U=j[G];c(j,G,G=="add"?function(Y){return U.call(this,Y===0?0:Y),this}:G=="delete"?function(Y){return!(R&&!h(Y))&&U.call(this,Y===0?0:Y)}:G=="get"?function(Y){return R&&!h(Y)?void 0:U.call(this,Y===0?0:Y)}:G=="has"?function(Y){return!(R&&!h(Y))&&U.call(this,Y===0?0:Y)}:function(Y,X){return U.call(this,Y===0?0:Y,X),this})}var C,S,E,A,N,k=x.indexOf("Map")!==-1,R=x.indexOf("Weak")!==-1,I=k?"set":"add",L=l[x],j=L&&L.prototype,M=L,V={};return u(x,typeof L!="function"||!(R||j.forEach&&!m(function(){new L().entries().next()})))?(M=w.getConstructor(v,x,k,I),f.REQUIRED=!0):u(x,!0)&&(S=(C=new M)[I](R?{}:-0,1)!=C,E=m(function(){C.has(1)}),A=g(function(G){new L(G)}),N=!R&&m(function(){for(var G=new L,U=5;U--;)G[I](U,U);return!G.has(-0)}),A||(((M=v(function(G,U){return p(G,M,x),G=b(new L,G,M),U!=null&&d(U,G[I],G,k),G})).prototype=j).constructor=M),(E||N)&&(_("delete"),_("has"),k&&_("get")),(N||S)&&_(I),R&&j.clear&&delete j.clear),V[x]=M,a({global:!0,forced:M!=L},V),y(M,x),R||w.setStrong(M,x,k),M}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/own-keys"),u=o("../internals/object-get-own-property-descriptor"),c=o("../internals/object-define-property");i.exports=function(f,d){for(var p=l(d),h=c.f,m=u.f,g=0;g<p.length;g++){var y=p[g];a(f,y)||h(f,y,m(d,y))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(o,i,s){var a=o("../internals/well-known-symbol")("match");i.exports=function(l){var u=/./;try{"/./"[l](u)}catch{try{return u[a]=!1,"/./"[l](u)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(o,i,s){var a=o("../internals/require-object-coercible"),l=/"/g;i.exports=function(p,c,f,d){var p=String(a(p)),h="<"+c;return f!==""&&(h+=" "+f+'="'+String(d).replace(l,"&quot;")+'"'),h+">"+p+"</"+c+">"}},{"../internals/require-object-coercible":114}],37:[function(o,i,s){"use strict";function a(){return this}var l=o("../internals/iterators-core").IteratorPrototype,u=o("../internals/object-create"),c=o("../internals/create-property-descriptor"),f=o("../internals/set-to-string-tag"),d=o("../internals/iterators");i.exports=function(p,h,m){return h+=" Iterator",p.prototype=u(l,{next:c(1,m)}),f(p,h,!1,!0),d[h]=a,p}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=a?function(c,f,d){return l.f(c,f,u(1,d))}:function(c,f,d){return c[f]=d,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(o,i,s){i.exports=function(a,l){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:l}}},{}],40:[function(o,i,s){"use strict";var a=o("../internals/to-primitive"),l=o("../internals/object-define-property"),u=o("../internals/create-property-descriptor");i.exports=function(c,f,d){f=a(f),f in c?l.f(c,f,u(0,d)):c[f]=d}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(b,i,s){"use strict";function a(){return this}var l=b("../internals/export"),u=b("../internals/create-iterator-constructor"),c=b("../internals/object-get-prototype-of"),f=b("../internals/object-set-prototype-of"),d=b("../internals/set-to-string-tag"),p=b("../internals/create-non-enumerable-property"),h=b("../internals/redefine"),m=b("../internals/well-known-symbol"),g=b("../internals/is-pure"),y=b("../internals/iterators"),b=b("../internals/iterators-core"),x=b.IteratorPrototype,v=b.BUGGY_SAFARI_ITERATORS,w=m("iterator"),_="values",C="entries";i.exports=function(S,E,A,V,k,R,I){u(A,E,V);function L($){if($===k&&X)return X;if(!v&&$ in U)return U[$];switch($){case"keys":case _:case C:return function(){return new A(this,$)}}return function(){return new A(this)}}var j,M,V=E+" Iterator",G=!1,U=S.prototype,Y=U[w]||U["@@iterator"]||k&&U[k],X=!v&&Y||L(k),pe=E=="Array"&&U.entries||Y;if(pe&&(pe=c(pe.call(new S)),x!==Object.prototype&&pe.next&&(g||c(pe)===x||(f?f(pe,x):typeof pe[w]!="function"&&p(pe,w,a)),d(pe,V,!0,!0),g&&(y[V]=a))),k==_&&Y&&Y.name!==_&&(G=!0,X=function(){return Y.call(this)}),g&&!I||U[w]===X||p(U,w,X),y[E]=X,k)if(j={values:L(_),keys:R?X:L("keys"),entries:L(C)},I)for(M in j)!v&&!G&&M in U||h(U,M,j[M]);else l({target:E,proto:!0,forced:v||G},j);return j}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(o,i,s){var a=o("../internals/path"),l=o("../internals/has"),u=o("../internals/well-known-symbol-wrapped"),c=o("../internals/object-define-property").f;i.exports=function(f){var d=a.Symbol||(a.Symbol={});l(d,f)||c(d,f,{value:u.f(f)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(l,i,s){var a=l("../internals/global"),l=l("../internals/is-object"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(f){return c?u.createElement(f):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(o,i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(o)},{"../internals/engine-user-agent":47}],47:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(u,i,s){var a,l,c=u("../internals/global"),u=u("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?l=(a=c.split("."))[0]+a[1]:u&&(!(a=u.match(/Edge\/(\d+)/))||74<=a[1])&&(a=u.match(/Chrome\/(\d+)/))&&(l=a[1]),i.exports=l&&+l},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(o,i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/object-get-own-property-descriptor").f,u=o("../internals/create-non-enumerable-property"),c=o("../internals/redefine"),f=o("../internals/set-global"),d=o("../internals/copy-constructor-properties"),p=o("../internals/is-forced");i.exports=function(h,m){var g,y,b,x=h.target,v=h.global,w=h.stat,_=v?a:w?a[x]||f(x,{}):(a[x]||{}).prototype;if(_)for(g in m){if(y=m[g],b=h.noTargetGet?(b=l(_,g))&&b.value:_[g],!p(v?g:x+(w?".":"#")+g,h.forced)&&b!==void 0){if(typeof y==typeof b)continue;d(y,b)}(h.sham||b&&b.sham)&&u(y,"sham",!0),c(_,g,y,h)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(o,i,s){i.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(m,i,s){"use strict";m("../modules/es.regexp.exec");var a=m("../internals/redefine"),l=m("../internals/fails"),u=m("../internals/well-known-symbol"),c=m("../internals/regexp-exec"),f=m("../internals/create-non-enumerable-property"),d=u("species"),p=!l(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),h="a".replace(/./,"$0")==="$0",m=u("replace"),g=!!/./[m]&&/./[m]("a","$0")==="",y=!l(function(){var x=/(?:)/,b=x.exec,x=(x.exec=function(){return b.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});i.exports=function(b,x,v,w){var _,C,S=u(b),E=!l(function(){var N={};return N[S]=function(){return 7},""[b](N)!=7}),A=E&&!l(function(){var N=!1,k=/a/;return b==="split"&&((k={constructor:{}}).constructor[d]=function(){return k},k.flags="",k[S]=/./[S]),k.exec=function(){return N=!0,null},k[S](""),!N});E&&A&&(b!=="replace"||p&&h&&!g)&&(b!=="split"||y)||(_=/./[S],v=(A=v(S,""[b],function(N,k,R,I,L){return k.exec===c?E&&!L?{done:!0,value:_.call(k,R,I)}:{done:!0,value:N.call(R,k,I)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],C=A[1],a(String.prototype,b,v),a(RegExp.prototype,S,x==2?function(N,k){return C.call(N,this,k)}:function(N){return C.call(N,this)})),w&&f(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(o,i,s){"use strict";function a(f,d,p,h,m,g,y,b){for(var x,v=m,w=0,_=!!y&&c(y,b,3);w<h;){if(w in p){if(x=_?_(p[w],w,d):p[w],0<g&&l(x))v=a(f,d,x,u(x.length),v,g-1)-1;else{if(9007199254740991<=v)throw TypeError("Exceed the acceptable array length");f[v]=x}v++}w++}return v}var l=o("../internals/is-array"),u=o("../internals/to-length"),c=o("../internals/function-bind-context");i.exports=a},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(o,i,s){o=o("../internals/fails"),i.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(o,i,s){var a=o("../internals/a-function");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,d){return l.call(u,f,d)};case 3:return function(f,d,p){return l.call(u,f,d,p)}}return function(){return l.apply(u,arguments)}}},{"../internals/a-function":5}],56:[function(o,i,s){"use strict";var a=o("../internals/a-function"),l=o("../internals/is-object"),u=[].slice,c={};i.exports=Function.bind||function(f){var d=a(this),p=u.call(arguments,1),h=function(){var m=p.concat(u.call(arguments));if(this instanceof h){var g=d,y=m.length,b=m;if(!(y in c)){for(var x=[],v=0;v<y;v++)x[v]="a["+v+"]";c[y]=Function("C,a","return new C("+x.join(",")+")")}return c[y](g,b)}return d.apply(f,m)};return l(d.prototype)&&(h.prototype=d.prototype),h}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(o,i,s){function a(c){return typeof c=="function"?c:void 0}var l=o("../internals/path"),u=o("../internals/global");i.exports=function(c,f){return arguments.length<2?a(l[c])||a(u[c]):l[c]&&l[c][f]||u[c]&&u[c][f]}},{"../internals/global":60,"../internals/path":105}],58:[function(o,i,s){var a=o("../internals/classof"),l=o("../internals/iterators"),u=o("../internals/well-known-symbol")("iterator");i.exports=function(c){if(c!=null)return c[u]||c["@@iterator"]||l[a(c)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/get-iterator-method");i.exports=function(u){var c=l(u);if(typeof c!="function")throw TypeError(String(u)+" is not iterable");return a(c.call(u))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(o,i,s){(function(a){function l(u){return u&&u.Math==Math&&u}i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(o,i,s){var a={}.hasOwnProperty;i.exports=function(l,u){return a.call(l,u)}},{}],62:[function(o,i,s){i.exports={}},{}],63:[function(o,i,s){var a=o("../internals/global");i.exports=function(l,u){var c=a.console;c&&c.error&&(arguments.length===1?c.error(l):c.error(l,u))}},{"../internals/global":60}],64:[function(o,i,s){o=o("../internals/get-built-in"),i.exports=o("document","documentElement")},{"../internals/get-built-in":57}],65:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/document-create-element");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(o,i,s){var a=Math.abs,l=Math.pow,u=Math.floor,c=Math.log,f=Math.LN2;i.exports={pack:function(d,p,v){var m,g,y,b=new Array(v),x=8*v-p-1,v=(1<<x)-1,w=v>>1,_=p===23?l(2,-24)-l(2,-77):0,C=d<0||d===0&&1/d<0?1:0,S=0;for((d=a(d))!=d||d===1/0?(g=d!=d?1:0,m=v):(m=u(c(d)/f),d*(y=l(2,-m))<1&&(m--,y*=2),2<=(d+=1<=m+w?_/y:_*l(2,1-w))*y&&(m++,y/=2),v<=m+w?(g=0,m=v):1<=m+w?(g=(d*y-1)*l(2,p),m+=w):(g=d*l(2,w-1)*l(2,p),m=0));8<=p;b[S++]=255&g,g/=256,p-=8);for(m=m<<p|g,x+=p;0<x;b[S++]=255&m,m/=256,x-=8);return b[--S]|=128*C,b},unpack:function(d,p){var h,m=d.length,v=8*m-p-1,g=(1<<v)-1,y=g>>1,b=v-7,x=m-1,v=d[x--],w=127&v;for(v>>=7;0<b;w=256*w+d[x],x--,b-=8);for(h=w&(1<<-b)-1,w>>=-b,b+=p;0<b;h=256*h+d[x],x--,b-=8);if(w===0)w=1-y;else{if(w===g)return h?NaN:v?-1/0:1/0;h+=l(2,p),w-=y}return(v?-1:1)*h*l(2,w-p)}}},{}],67:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/classof-raw"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/object-set-prototype-of");i.exports=function(u,c,f){return l&&typeof(c=c.constructor)=="function"&&c!==f&&a(c=c.prototype)&&c!==f.prototype&&l(u,c),u}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(a,i,s){var a=a("../internals/shared-store"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},{"../internals/shared-store":120}],70:[function(o,i,s){function a(b){f(b,h,{value:{objectID:"O"+ ++m,weakData:{}}})}var l=o("../internals/hidden-keys"),u=o("../internals/is-object"),c=o("../internals/has"),f=o("../internals/object-define-property").f,d=o("../internals/uid"),p=o("../internals/freezing"),h=d("meta"),m=0,g=Object.isExtensible||function(){return!0},y=i.exports={REQUIRED:!1,fastKey:function(b,x){if(!u(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!c(b,h)){if(!g(b))return"F";if(!x)return"E";a(b)}return b[h].objectID},getWeakData:function(b,x){if(!c(b,h)){if(!g(b))return!0;if(!x)return!1;a(b)}return b[h].weakData},onFreeze:function(b){return p&&y.REQUIRED&&g(b)&&!c(b,h)&&a(b),b}};l[h]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(v,i,s){var a,l,u,c,f,d,p,h,m=v("../internals/native-weak-map"),w=v("../internals/global"),g=v("../internals/is-object"),y=v("../internals/create-non-enumerable-property"),b=v("../internals/has"),x=v("../internals/shared-key"),v=v("../internals/hidden-keys"),w=w.WeakMap;p=m?(a=new w,l=a.get,u=a.has,c=a.set,f=function(_,C){return c.call(a,_,C),C},d=function(_){return l.call(a,_)||{}},function(_){return u.call(a,_)}):(v[h=x("state")]=!0,f=function(_,C){return y(_,h,C),C},d=function(_){return b(_,h)?_[h]:{}},function(_){return b(_,h)}),i.exports={set:f,get:d,has:p,enforce:function(_){return p(_)?d(_):f(_,{})},getterFor:function(_){return function(C){if(g(C)&&(C=d(C)).type===_)return C;throw TypeError("Incompatible receiver, "+_+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(o,i,s){var a=o("../internals/well-known-symbol"),l=o("../internals/iterators"),u=a("iterator"),c=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=Array.isArray||function(l){return a(l)=="Array"}},{"../internals/classof-raw":28}],74:[function(o,i,s){function a(h,m){return(h=f[c(h)])==p||h!=d&&(typeof m=="function"?l(m):!!m)}var l=o("../internals/fails"),u=/#|\.prototype\./,c=a.normalize=function(h){return String(h).replace(u,".").toLowerCase()},f=a.data={},d=a.NATIVE="N",p=a.POLYFILL="P";i.exports=a},{"../internals/fails":51}],75:[function(o,i,s){i.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],76:[function(o,i,s){i.exports=!1},{}],77:[function(o,i,s){var a=o("../internals/is-object"),l=o("../internals/classof-raw"),u=o("../internals/well-known-symbol")("match");i.exports=function(c){var f;return a(c)&&((f=c[u])!==void 0?!!f:l(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(o,i,s){function a(h,m){this.stopped=h,this.result=m}var l=o("../internals/an-object"),u=o("../internals/is-array-iterator-method"),c=o("../internals/to-length"),f=o("../internals/function-bind-context"),d=o("../internals/get-iterator-method"),p=o("../internals/call-with-safe-iteration-closing");(i.exports=function(h,m,g,y,b){var x,v,w,_,C,S,E=f(m,g,y?2:1);if(b)x=h;else{if(typeof(m=d(h))!="function")throw TypeError("Target is not iterable");if(u(m)){for(v=0,w=c(h.length);v<w;v++)if((_=y?E(l(S=h[v])[0],S[1]):E(h[v]))&&_ instanceof a)return _;return new a(!1)}x=m.call(h)}for(C=x.next;!(S=C.call(x)).done;)if(typeof(_=p(x,E,S.value,y))=="object"&&_&&_ instanceof a)return _;return new a(!1)}).stop=function(h){return new a(!0,h)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(d,i,s){"use strict";var a,l,u=d("../internals/object-get-prototype-of"),c=d("../internals/create-non-enumerable-property"),f=d("../internals/has"),p=d("../internals/well-known-symbol"),d=d("../internals/is-pure"),p=p("iterator"),h=!1;[].keys&&("next"in(l=[].keys())?(u=u(u(l)))!==Object.prototype&&(a=u):h=!0),a==null&&(a={}),d||f(a,p)||c(a,p,function(){return this}),i.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(o,i,s){i.exports={}},{}],81:[function(o,i,s){i.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],82:[function(y,i,s){var a,l,u,c,f,d,p,h,m=y("../internals/global"),C=y("../internals/object-get-own-property-descriptor").f,_=y("../internals/classof-raw"),g=y("../internals/task").set,y=y("../internals/engine-is-ios"),b=m.MutationObserver||m.WebKitMutationObserver,x=m.process,v=m.Promise,w=_(x)=="process",_=C(m,"queueMicrotask"),C=_&&_.value;C||(a=function(){var S,E;for(w&&(S=x.domain)&&S.exit();l;){E=l.fn,l=l.next;try{E()}catch(A){throw l?c():u=void 0,A}}u=void 0,S&&S.enter()},c=w?function(){x.nextTick(a)}:b&&!y?(f=!0,d=document.createTextNode(""),new b(a).observe(d,{characterData:!0}),function(){d.data=f=!f}):v&&v.resolve?(p=v.resolve(void 0),h=p.then,function(){h.call(p,a)}):function(){g.call(m,a)}),i.exports=C||function(S){S={fn:S,next:void 0},u&&(u.next=S),l||(l=S,c()),u=S}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(o,i,s){o=o("../internals/global"),i.exports=o.Promise},{"../internals/global":60}],84:[function(o,i,s){o=o("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/well-known-symbol"),u=o("../internals/is-pure"),c=l("iterator");i.exports=!a(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),d=f.searchParams,p="";return f.pathname="c%20d",d.forEach(function(h,m){d.delete("b"),p+=m+h}),u&&!f.toJSON||!d.sort||f.href!=="http://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||p!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(a,i,s){var l=a("../internals/global"),a=a("../internals/inspect-source"),l=l.WeakMap;i.exports=typeof l=="function"&&/native code/.test(a(l))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(o,i,s){"use strict";function a(u){var c,f;this.promise=new u(function(d,p){if(c!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");c=d,f=p}),this.resolve=l(c),this.reject=l(f)}var l=o("../internals/a-function");i.exports.f=function(u){return new a(u)}},{"../internals/a-function":5}],88:[function(o,i,s){var a=o("../internals/is-regexp");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":77}],89:[function(o,i,s){var a=o("../internals/global").isFinite;i.exports=Number.isFinite||function(l){return typeof l=="number"&&a(l)}},{"../internals/global":60}],90:[function(o,i,s){"use strict";var a=o("../internals/descriptors"),l=o("../internals/fails"),u=o("../internals/object-keys"),c=o("../internals/object-get-own-property-symbols"),f=o("../internals/object-property-is-enumerable"),d=o("../internals/to-object"),p=o("../internals/indexed-object"),h=Object.assign,m=Object.defineProperty;i.exports=!h||l(function(){var g,y,b,x;return!(!a||h({b:1},h(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(y={},x="abcdefghijklmnopqrst",(g={})[b=Symbol()]=7,x.split("").forEach(function(v){y[v]=v}),h({},g)[b]!=7||u(h({},y)).join("")!=x)})?function(g,y){for(var b=d(g),x=arguments.length,v=1,w=c.f,_=f.f;v<x;)for(var C,S=p(arguments[v++]),E=w?u(S).concat(w(S)):u(S),A=E.length,N=0;N<A;)C=E[N++],a&&!_.call(S,C)||(b[C]=S[C]);return b}:h},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(m,i,s){function a(){}var l,u=m("../internals/an-object"),c=m("../internals/object-define-properties"),f=m("../internals/enum-bug-keys"),d=m("../internals/hidden-keys"),p=m("../internals/html"),h=m("../internals/document-create-element"),m=m("../internals/shared-key"),g="prototype",y="script",b=m("IE_PROTO"),x=function(w){return"<"+y+">"+w+"</"+y+">"},v=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch{}v=l?((w=l).write(x("")),w.close(),_=w.parentWindow.Object,w=null,_):(w=h("iframe"),_="java"+y+":",w.style.display="none",p.appendChild(w),w.src=String(_),(_=w.contentWindow.document).open(),_.write(x("document.F=Object")),_.close(),_.F);for(var w,_,C=f.length;C--;)delete v[g][f[C]];return v()};d[b]=!0,i.exports=Object.create||function(w,_){var C;return w!==null?(a[g]=u(w),C=new a,a[g]=null,C[b]=w):C=v(),_===void 0?C:c(C,_)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-define-property"),u=o("../internals/an-object"),c=o("../internals/object-keys");i.exports=a?Object.defineProperties:function(f,d){u(f);for(var p,h=c(d),m=h.length,g=0;g<m;)l.f(f,p=h[g++],d[p]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/ie8-dom-define"),u=o("../internals/an-object"),c=o("../internals/to-primitive"),f=Object.defineProperty;s.f=a?f:function(d,p,h){if(u(d),p=c(p,!0),u(h),l)try{return f(d,p,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(d[p]=h.value),d}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/object-property-is-enumerable"),u=o("../internals/create-property-descriptor"),c=o("../internals/to-indexed-object"),f=o("../internals/to-primitive"),d=o("../internals/has"),p=o("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;s.f=a?h:function(m,g){if(m=c(m),g=f(g,!0),p)try{return h(m,g)}catch{}if(d(m,g))return u(!l.f.call(m,g),m[g])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(o,i,s){var a=o("../internals/to-indexed-object"),l=o("../internals/object-get-own-property-names").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(f){if(!c||u.call(f)!="[object Window]")return l(a(f));try{return l(f)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(o,i,s){s.f=Object.getOwnPropertySymbols},{}],98:[function(c,i,s){var a=c("../internals/has"),l=c("../internals/to-object"),u=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),f=u("IE_PROTO"),d=Object.prototype;i.exports=c?Object.getPrototypeOf:function(p){return p=l(p),a(p,f)?p[f]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?d:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(o,i,s){var a=o("../internals/has"),l=o("../internals/to-indexed-object"),u=o("../internals/array-includes").indexOf,c=o("../internals/hidden-keys");i.exports=function(f,d){var p,h=l(f),m=0,g=[];for(p in h)!a(c,p)&&a(h,p)&&g.push(p);for(;d.length>m;)!a(h,p=d[m++])||~u(g,p)||g.push(p);return g}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(o,i,s){var a=o("../internals/object-keys-internal"),l=o("../internals/enum-bug-keys");i.exports=Object.keys||function(u){return a(u,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(o,i,s){"use strict";var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(c){return c=l(this,c),!!c&&c.enumerable}:a},{}],102:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,c=!1,f={};try{(u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),c=f instanceof Array}catch{}return function(d,p){return a(d),l(p),c?u.call(d,p):d.__proto__=p,d}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(o,i,s){"use strict";var a=o("../internals/to-string-tag-support"),l=o("../internals/classof");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(o,i,s){var a=o("../internals/get-built-in"),l=o("../internals/object-get-own-property-names"),u=o("../internals/object-get-own-property-symbols"),c=o("../internals/an-object");i.exports=a("Reflect","ownKeys")||function(f){var d=l.f(c(f)),p=u.f;return p?d.concat(p(f)):d}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(o,i,s){o=o("../internals/global"),i.exports=o},{"../internals/global":60}],106:[function(o,i,s){i.exports=function(a){try{return{error:!1,value:a()}}catch(l){return{error:!0,value:l}}}},{}],107:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/is-object"),u=o("../internals/new-promise-capability");i.exports=function(c,f){return a(c),l(f)&&f.constructor===c?f:((0,(c=u.f(c)).resolve)(f),c.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(o,i,s){var a=o("../internals/redefine");i.exports=function(l,u,c){for(var f in u)a(l,f,u[f],c);return l}},{"../internals/redefine":109}],109:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/create-non-enumerable-property"),u=d("../internals/has"),c=d("../internals/set-global"),f=d("../internals/inspect-source"),d=d("../internals/internal-state"),p=d.get,h=d.enforce,m=String(String).split("String");(i.exports=function(g,y,b,_){var v=!!_&&!!_.unsafe,w=!!_&&!!_.enumerable,_=!!_&&!!_.noTargetGet;typeof b=="function"&&(typeof y!="string"||u(b,"name")||l(b,"name",y),h(b).source=m.join(typeof y=="string"?y:"")),g===a?w?g[y]=b:c(y,b):(v?!_&&g[y]&&(w=!0):delete g[y],w?g[y]=b:l(g,y,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(o,i,s){var a=o("./classof-raw"),l=o("./regexp-exec");i.exports=function(u,c){var f=u.exec;if(typeof f=="function"){if(f=f.call(u,c),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(c,i,s){"use strict";var a,l,u=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),f=RegExp.prototype.exec,d=String.prototype.replace,p=f,h=(a=/a/,l=/b*/g,f.call(a,"a"),f.call(l,"a"),a.lastIndex!==0||l.lastIndex!==0),m=c.UNSUPPORTED_Y||c.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;i.exports=p=h||g||m?function(y){var b,x,v,w,_=this,C=m&&_.sticky,S=u.call(_),E=_.source,A=0,N=y;return C&&((S=S.replace("y","")).indexOf("g")===-1&&(S+="g"),N=String(y).slice(_.lastIndex),0<_.lastIndex&&(!_.multiline||_.multiline&&y[_.lastIndex-1]!==`
`)&&(E="(?: "+E+")",N=" "+N,A++),x=new RegExp("^(?:"+E+")",S)),g&&(x=new RegExp("^"+E+"$(?!\\s)",S)),h&&(b=_.lastIndex),v=f.call(C?x:_,N),C?v?(v.input=v.input.slice(A),v[0]=v[0].slice(A),v.index=_.lastIndex,_.lastIndex+=v[0].length):_.lastIndex=0:h&&v&&(_.lastIndex=_.global?v.index+v[0].length:b),g&&v&&1<v.length&&d.call(v[0],x,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(v[w]=void 0)}),v}:p},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(o,i,s){"use strict";var a=o("../internals/an-object");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},{"../internals/an-object":10}],113:[function(o,i,s){"use strict";o=o("./fails");function a(l,u){return RegExp(l,u)}s.UNSUPPORTED_Y=o(function(){var l=a("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),s.BROKEN_CARET=o(function(){var l=a("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},{"./fails":51}],114:[function(o,i,s){i.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],115:[function(o,i,s){i.exports=Object.is||function(a,l){return a===l?a!==0||1/a==1/l:a!=a&&l!=l}},{}],116:[function(o,i,s){var a=o("../internals/global"),l=o("../internals/create-non-enumerable-property");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(o,i,s){"use strict";var a=o("../internals/get-built-in"),l=o("../internals/object-define-property"),u=o("../internals/well-known-symbol"),c=o("../internals/descriptors"),f=u("species");i.exports=function(p){var p=a(p),h=l.f;c&&p&&!p[f]&&h(p,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(o,i,s){var a=o("../internals/object-define-property").f,l=o("../internals/has"),u=o("../internals/well-known-symbol")("toStringTag");i.exports=function(c,f,d){c&&!l(c=d?c:c.prototype,u)&&a(c,u,{configurable:!0,value:f})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(o,i,s){var a=o("../internals/shared"),l=o("../internals/uid"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(a,i,s){var u=a("../internals/global"),a=a("../internals/set-global"),l="__core-js_shared__",u=u[l]||a(l,{});i.exports=u},{"../internals/global":60,"../internals/set-global":116}],121:[function(o,i,s){var a=o("../internals/is-pure"),l=o("../internals/shared-store");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(o,i,s){var a=o("../internals/an-object"),l=o("../internals/a-function"),u=o("../internals/well-known-symbol")("species");i.exports=function(d,f){var d=a(d).constructor;return d===void 0||(d=a(d)[u])==null?f:l(d)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(o,i,s){var a=o("../internals/fails");i.exports=function(l){return a(function(){var u=""[l]('"');return u!==u.toLowerCase()||3<u.split('"').length})}},{"../internals/fails":51}],124:[function(o,i,s){function a(c){return function(h,m){var p,h=String(u(h)),m=l(m),g=h.length;return m<0||g<=m?c?"":void 0:(p=h.charCodeAt(m))<55296||56319<p||m+1===g||(g=h.charCodeAt(m+1))<56320||57343<g?c?h.charAt(m):p:c?h.slice(m,m+2):g-56320+(p-55296<<10)+65536}}var l=o("../internals/to-integer"),u=o("../internals/require-object-coercible");i.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(o,i,s){o=o("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},{"../internals/engine-user-agent":47}],126:[function(o,i,s){function a(d){return function(g,x,b){var g=String(c(g)),y=g.length,b=b===void 0?" ":String(b),x=l(x);return x<=y||b==""?g:((y=u.call(b,f((x=x-y)/b.length))).length>x&&(y=y.slice(0,x)),d?g+y:y+g)}}var l=o("../internals/to-length"),u=o("../internals/string-repeat"),c=o("../internals/require-object-coercible"),f=Math.ceil;i.exports={start:a(!1),end:a(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(o,i,s){"use strict";function a(v){return v+22+75*(v<26)}function l(v){var w,_=[],C=(v=function(Y){for(var X=[],pe=0,$=Y.length;pe<$;){var O,z=Y.charCodeAt(pe++);55296<=z&&z<=56319&&pe<$?(64512&(O=Y.charCodeAt(pe++)))==56320?X.push(((1023&z)<<10)+(1023&O)+65536):(X.push(z),pe--):X.push(z)}return X}(v)).length,S=128,E=0,A=72;for(I=0;I<v.length;I++)(w=v[I])<128&&_.push(x(w));var N=_.length,k=N;for(N&&_.push("-");k<C;){for(var R=u,I=0;I<v.length;I++)S<=(w=v[I])&&w<R&&(R=w);var L=k+1;if(R-S>b((u-E)/L))throw RangeError(g);for(E+=(R-S)*L,S=R,I=0;I<v.length;I++){if((w=v[I])<S&&++E>u)throw RangeError(g);if(w==S){for(var j=E,M=c;;M+=c){var V=M<=A?1:A+f<=M?f:M-A;if(j<V)break;var G=j-V,U=c-V;_.push(x(a(V+G%U))),j=b(G/U)}_.push(x(a(j))),A=function(Y,X,pe){var $=0;for(Y=pe?b(Y/p):Y>>1,Y+=b(Y/X);y*f>>1<Y;$+=c)Y=b(Y/y);return b($+(y+1)*Y/(Y+d))}(E,L,k==N),E=0,++k}}++E,++S}return _.join("")}var u=2147483647,c=36,f=26,d=38,p=700,h=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",y=c-1,b=Math.floor,x=String.fromCharCode;i.exports=function(v){for(var w,_=[],C=v.toLowerCase().replace(m,".").split("."),S=0;S<C.length;S++)w=C[S],_.push(h.test(w)?"xn--"+l(w):w);return _.join(".")}},{}],128:[function(o,i,s){"use strict";var a=o("../internals/to-integer"),l=o("../internals/require-object-coercible");i.exports="".repeat||function(u){var c=String(l(this)),f="",d=a(u);if(d<0||d==1/0)throw RangeError("Wrong number of repetitions");for(;0<d;(d>>>=1)&&(c+=c))1&d&&(f+=c);return f}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(o,i,s){var a=o("../internals/fails"),l=o("../internals/whitespaces");i.exports=function(u){return a(function(){return!!l[u]()||"\u200B\x85\u180E"[u]()!="\u200B\x85\u180E"||l[u].name!==u})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(u,i,s){function a(d){return function(p){return p=String(l(p)),1&d&&(p=p.replace(c,"")),p=2&d?p.replace(f,""):p}}var l=u("../internals/require-object-coercible"),u="["+u("../internals/whitespaces")+"]",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$");i.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(y,i,s){function a(k){return function(){N(k)}}function l(k){N(k.data)}function u(k){f.postMessage(k+"",b.protocol+"//"+b.host)}var c,f=y("../internals/global"),d=y("../internals/fails"),p=y("../internals/classof-raw"),h=y("../internals/function-bind-context"),m=y("../internals/html"),g=y("../internals/document-create-element"),y=y("../internals/engine-is-ios"),b=f.location,x=f.setImmediate,v=f.clearImmediate,w=f.process,_=f.MessageChannel,C=f.Dispatch,S=0,E={},A="onreadystatechange",N=function(k){var R;E.hasOwnProperty(k)&&(R=E[k],delete E[k],R())};x&&v||(x=function(k){for(var R=[],I=1;I<arguments.length;)R.push(arguments[I++]);return E[++S]=function(){(typeof k=="function"?k:Function(k)).apply(void 0,R)},c(S),S},v=function(k){delete E[k]},p(w)=="process"?c=function(k){w.nextTick(a(k))}:C&&C.now?c=function(k){C.now(a(k))}:_&&!y?(y=(p=new _).port2,p.port1.onmessage=l,c=h(y.postMessage,y,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||d(u)||b.protocol==="file:"?c=A in g("script")?function(k){m.appendChild(g("script"))[A]=function(){m.removeChild(this),N(k)}}:function(k){setTimeout(a(k),0)}:(c=u,f.addEventListener("message",l,!1))),i.exports={set:x,clear:v}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(o,i,s){var a=o("../internals/classof-raw");i.exports=function(l){if(typeof l!="number"&&a(l)!="Number")throw TypeError("Incorrect invocation");return+l}},{"../internals/classof-raw":28}],133:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.max,u=Math.min;i.exports=function(c,f){return c=a(c),c<0?l(c+f,0):u(c,f)}},{"../internals/to-integer":136}],134:[function(o,i,s){var a=o("../internals/to-integer"),l=o("../internals/to-length");i.exports=function(c){if(c===void 0)return 0;var c=a(c),f=l(c);if(c!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(o,i,s){var a=o("../internals/indexed-object"),l=o("../internals/require-object-coercible");i.exports=function(u){return a(l(u))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(o,i,s){var a=Math.ceil,l=Math.floor;i.exports=function(u){return isNaN(u=+u)?0:(0<u?l:a)(u)}},{}],137:[function(o,i,s){var a=o("../internals/to-integer"),l=Math.min;i.exports=function(u){return 0<u?l(a(u),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(o,i,s){var a=o("../internals/require-object-coercible");i.exports=function(l){return Object(a(l))}},{"../internals/require-object-coercible":114}],139:[function(o,i,s){var a=o("../internals/to-positive-integer");i.exports=function(l,u){if(l=a(l),l%u)throw RangeError("Wrong offset");return l}},{"../internals/to-positive-integer":140}],140:[function(o,i,s){var a=o("../internals/to-integer");i.exports=function(l){if(l=a(l),l<0)throw RangeError("The argument can't be less than 0");return l}},{"../internals/to-integer":136}],141:[function(o,i,s){var a=o("../internals/is-object");i.exports=function(l,u){if(!a(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(o,i,s){var a={};a[o("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(o,i,s){"use strict";function a(Ae,Re){for(var ze=0,lt=Re.length,We=new(ne(Ae))(lt);ze<lt;)We[ze]=Re[ze++];return We}function l(Ae,Re){O(Ae,Re,{get:function(){return pe(this)[Re]}})}function u(Ae){return Ae instanceof ae||(Ae=N(Ae))=="ArrayBuffer"||Ae=="SharedArrayBuffer"}function c(Ae,Re){return ye(Ae)&&typeof Re!="symbol"&&Re in Ae&&String(+Re)==String(Re)}function f(Ae,Re){return c(Ae,Re=E(Re,!0))?v(2,Ae[Re]):z(Ae,Re)}function d(Ae,Re,ze){return!(c(Ae,Re=E(Re,!0))&&k(ze)&&A(ze,"value"))||A(ze,"get")||A(ze,"set")||ze.configurable||A(ze,"writable")&&!ze.writable||A(ze,"enumerable")&&!ze.enumerable?O(Ae,Re,ze):(Ae[Re]=ze.value,Ae)}var p=o("../internals/export"),h=o("../internals/global"),m=o("../internals/descriptors"),g=o("../internals/typed-array-constructors-require-wrappers"),y=o("../internals/array-buffer-view-core"),b=o("../internals/array-buffer"),x=o("../internals/an-instance"),v=o("../internals/create-property-descriptor"),w=o("../internals/create-non-enumerable-property"),_=o("../internals/to-length"),C=o("../internals/to-index"),S=o("../internals/to-offset"),E=o("../internals/to-primitive"),A=o("../internals/has"),N=o("../internals/classof"),k=o("../internals/is-object"),R=o("../internals/object-create"),I=o("../internals/object-set-prototype-of"),L=o("../internals/object-get-own-property-names").f,j=o("../internals/typed-array-from"),M=o("../internals/array-iteration").forEach,V=o("../internals/set-species"),G=o("../internals/object-define-property"),U=o("../internals/object-get-own-property-descriptor"),Y=o("../internals/internal-state"),X=o("../internals/inherit-if-required"),pe=Y.get,$=Y.set,O=G.f,z=U.f,q=Math.round,ee=h.RangeError,ae=b.ArrayBuffer,Q=b.DataView,le=y.NATIVE_ARRAY_BUFFER_VIEWS,ie=y.TYPED_ARRAY_TAG,Z=y.TypedArray,ge=y.TypedArrayPrototype,ne=y.aTypedArrayConstructor,ye=y.isTypedArray,xe="BYTES_PER_ELEMENT",Ne="Wrong length";m?(le||(U.f=f,G.f=d,l(ge,"buffer"),l(ge,"byteOffset"),l(ge,"byteLength"),l(ge,"length")),p({target:"Object",stat:!0,forced:!le},{getOwnPropertyDescriptor:f,defineProperty:d}),i.exports=function(Le,Re,ze){function lt(Ge,fe){O(Ge,fe,{get:function(){var me=this,oe=fe;return(me=pe(me)).view[Tt](oe*We+me.byteOffset,!0)},set:function(me){var oe=this,be=fe;oe=pe(oe),ze&&(me=(me=q(me))<0?0:255<me?255:255&me),oe.view[At](be*We+oe.byteOffset,me,!0)},enumerable:!0})}var We=Le.match(/\d+$/)[0]/8,Bt=Le+(ze?"Clamped":"")+"Array",Tt="get"+Le,At="set"+Le,Mt=h[Bt],Ot=Mt,Le=Ot&&Ot.prototype,ut={};le?g&&(Ot=Re(function(Ge,fe,me,oe){return x(Ge,Ot,Bt),X(k(fe)?u(fe)?oe!==void 0?new Mt(fe,S(me,We),oe):me!==void 0?new Mt(fe,S(me,We)):new Mt(fe):ye(fe)?a(Ot,fe):j.call(Ot,fe):new Mt(C(fe)),Ge,Ot)}),I&&I(Ot,Z),M(L(Mt),function(Ge){Ge in Ot||w(Ot,Ge,Mt[Ge])}),Ot.prototype=Le):(Ot=Re(function(Ge,fe,me,oe){x(Ge,Ot,Bt);var be,Fe,Ve=0,Qe=0;if(k(fe)){if(!u(fe))return ye(fe)?a(Ot,fe):j.call(Ot,fe);var _t=fe,Qe=S(me,We),me=fe.byteLength;if(oe===void 0){if(me%We||(be=me-Qe)<0)throw ee(Ne)}else if(me<(be=_(oe)*We)+Qe)throw ee(Ne);Fe=be/We}else Fe=C(fe),_t=new ae(be=Fe*We);for($(Ge,{buffer:_t,byteOffset:Qe,byteLength:be,length:Fe,view:new Q(_t)});Ve<Fe;)lt(Ge,Ve++)}),I&&I(Ot,Z),Le=Ot.prototype=R(ge)),Le.constructor!==Ot&&w(Le,"constructor",Ot),ie&&w(Le,ie,Bt),ut[Bt]=Ot,p({global:!0,forced:Ot!=Mt,sham:!le},ut),xe in Ot||w(Ot,xe,We),xe in Le||w(Le,xe,We),V(Bt)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(c,i,s){var a=c("../internals/global"),l=c("../internals/fails"),u=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=a.ArrayBuffer,d=a.Int8Array;i.exports=!c||!l(function(){d(1)})||!l(function(){new d(-1)})||!u(function(p){new d,new d(null),new d(1.5),new d(p)},!0)||l(function(){return new d(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(o,i,s){var a=o("../internals/to-object"),l=o("../internals/to-length"),u=o("../internals/get-iterator-method"),c=o("../internals/is-array-iterator-method"),f=o("../internals/function-bind-context"),d=o("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(p){var h,m,g,y,b,x,v=a(p),w=arguments.length,_=1<w?arguments[1]:void 0,C=_!==void 0,S=u(v);if(S!=null&&!c(S))for(x=(b=S.call(v)).next,v=[];!(y=x.call(b)).done;)v.push(y.value);for(C&&2<w&&(_=f(_,arguments[2],2)),m=l(v.length),g=new(d(this))(m),h=0;h<m;h++)g[h]=C?_(v[h],h):v[h];return g}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(o,i,s){var a=0,l=Math.random();i.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++a+l).toString(36)}},{}],147:[function(o,i,s){o=o("../internals/native-symbol"),i.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(o,i,s){o=o("../internals/well-known-symbol"),s.f=o},{"../internals/well-known-symbol":149}],149:[function(d,i,s){var a=d("../internals/global"),l=d("../internals/shared"),u=d("../internals/has"),c=d("../internals/uid"),f=d("../internals/native-symbol"),d=d("../internals/use-symbol-as-uid"),p=l("wks"),h=a.Symbol,m=d?h:h&&h.withoutSetter||c;i.exports=function(g){return u(p,g)||(f&&u(h,g)?p[g]=h[g]:p[g]=m("Symbol."+g)),p[g]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(o,i,s){i.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],151:[function(u,i,s){"use strict";var a=u("../internals/export"),l=u("../internals/global"),f=u("../internals/array-buffer"),u=u("../internals/set-species"),c="ArrayBuffer",f=f[c];a({global:!0,forced:l[c]!==f},{ArrayBuffer:f}),u(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(v,i,s){"use strict";var a=v("../internals/export"),l=v("../internals/fails"),u=v("../internals/is-array"),c=v("../internals/is-object"),f=v("../internals/to-object"),d=v("../internals/to-length"),p=v("../internals/create-property"),h=v("../internals/array-species-create"),m=v("../internals/array-method-has-species-support"),x=v("../internals/well-known-symbol"),v=v("../internals/engine-v8-version"),g=x("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",x=51<=v||!l(function(){var w=[];return w[g]=!1,w.concat()[0]!==w}),v=m("concat");a({target:"Array",proto:!0,forced:!x||!v},{concat:function(w){for(var _,C,S,E,A,N=f(this),k=h(N,0),R=0,I=-1,L=arguments.length;I<L;I++)if(A=void 0,!c(E=S=I===-1?N:arguments[I])||((A=E[g])!==void 0?!A:!u(E))){if(y<=R)throw TypeError(b);p(k,R++,S)}else{if(C=d(S.length),y<R+C)throw TypeError(b);for(_=0;_<C;_++,R++)_ in S&&p(k,R,S[_])}return k.length=R,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-copy-within"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:l}),u("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").every,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("every"),c=c("every");a({target:"Array",proto:!0,forced:!u||!c},{every:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/array-fill"),u=u("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:l}),u("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").filter,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("filter"),c=c("filter");a({target:"Array",proto:!0,forced:!u||!c},{filter:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-iteration").findIndex,u=d("../internals/add-to-unscopables"),d=d("../internals/array-method-uses-to-length"),c="findIndex",f=!0,d=d(c);c in[]&&Array(1)[c](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!d},{findIndex:function(p){return l(this,p,1<arguments.length?arguments[1]:void 0)}}),u(c)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/a-function"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flatMap:function(p){var h,m=u(this),g=c(m.length);return f(p),(h=d(m,0)).length=l(h,m,m,g,0,1,p,1<arguments.length?arguments[1]:void 0),h}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/flatten-into-array"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/array-species-create");a({target:"Array",proto:!0},{flat:function(){var p=arguments.length?arguments[0]:void 0,h=u(this),m=c(h.length),g=d(h,0);return g.length=l(g,h,h,m,0,p===void 0?1:f(p)),g}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/array-from");a({target:"Array",stat:!0,forced:!o("../internals/check-correctness-of-iteration")(function(u){Array.from(u)})},{from:l})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/array-includes").includes,u=o("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!o("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return l(this,c,1<arguments.length?arguments[1]:void 0)}}),u("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/array-includes").indexOf,f=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),u=[].indexOf,c=!!u&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!f||!d},{indexOf:function(p){return c?u.apply(this,arguments)||0:l(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(f,i,s){"use strict";var a=f("../internals/to-indexed-object"),l=f("../internals/add-to-unscopables"),u=f("../internals/iterators"),c=f("../internals/internal-state"),f=f("../internals/define-iterator"),d="Array Iterator",p=c.set,h=c.getterFor(d);i.exports=f(Array,"Array",function(m,g){p(this,{type:d,target:a(m),index:0,kind:g})},function(){var m=h(this),g=m.target,y=m.kind,b=m.index++;return!g||b>=g.length?{value:m.target=void 0,done:!0}:y=="keys"?{value:b,done:!1}:y=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(f,i,s){"use strict";var a=f("../internals/export"),c=f("../internals/indexed-object"),l=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),u=[].join,c=c!=Object,f=f("join",",");a({target:"Array",proto:!0,forced:c||!f},{join:function(d){return u.call(l(this),d===void 0?",":d)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").map,u=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),u=u("map"),c=c("map");a({target:"Array",proto:!0,forced:!u||!c},{map:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(g,i,s){"use strict";var a=g("../internals/export"),l=g("../internals/is-object"),u=g("../internals/is-array"),c=g("../internals/to-absolute-index"),f=g("../internals/to-length"),d=g("../internals/to-indexed-object"),p=g("../internals/create-property"),h=g("../internals/well-known-symbol"),m=g("../internals/array-method-has-species-support"),g=g("../internals/array-method-uses-to-length"),m=m("slice"),g=g("slice",{ACCESSORS:!0,0:0,1:2}),y=h("species"),b=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!m||!g},{slice:function(v,w){var _,C,S,E=d(this),A=f(E.length),N=c(v,A),k=c(w===void 0?A:w,A);if(u(E)&&((_=typeof(_=E.constructor)=="function"&&(_===Array||u(_.prototype))||l(_)&&(_=_[y])===null?void 0:_)===Array||_===void 0))return b.call(E,N,k);for(C=new(_===void 0?Array:_)(x(k-N,0)),S=0;N<k;N++,S++)N in E&&p(C,S,E[N]);return C.length=S,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(c,i,s){"use strict";var a=c("../internals/export"),l=c("../internals/array-iteration").some,u=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),u=u("some"),c=c("some");a({target:"Array",proto:!0,forced:!u||!c},{some:function(f){return l(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(m,i,s){"use strict";var a=m("../internals/export"),l=m("../internals/to-absolute-index"),u=m("../internals/to-integer"),c=m("../internals/to-length"),f=m("../internals/to-object"),d=m("../internals/array-species-create"),p=m("../internals/create-property"),h=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),h=h("splice"),m=m("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,y=Math.min;a({target:"Array",proto:!0,forced:!h||!m},{splice:function(R,x){var v,w,_,C,S,E,A=f(this),N=c(A.length),k=l(R,N),R=arguments.length;if(R===0?v=w=0:w=R===1?(v=0,N-k):(v=R-2,y(g(u(x),0),N-k)),9007199254740991<N+v-w)throw TypeError("Maximum allowed length exceeded");for(_=d(A,w),C=0;C<w;C++)(S=k+C)in A&&p(_,C,A[S]);if(v<(_.length=w)){for(C=k;C<N-w;C++)E=C+v,(S=C+w)in A?A[E]=A[S]:delete A[E];for(C=N;N-w+v<C;C--)delete A[C-1]}else if(w<v)for(C=N-w;k<C;C--)E=C+v-1,(S=C+w-1)in A?A[E]=A[S]:delete A[E];for(C=0;C<v;C++)A[C+k]=arguments[C+2];return A.length=N-w+v,_}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(o,i,s){o("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(o,i,s){o("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(l,i,s){var a=l("../internals/descriptors"),l=l("../internals/object-define-property").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/;!a||"name"in u||l(u,"name",{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(a,i,s){var a=a("../internals/export"),l=Math.hypot,u=Math.abs,c=Math.sqrt;a({target:"Math",stat:!0,forced:!!l&&l(1/0,NaN)!==1/0},{hypot:function(f,d){for(var p,h,m=0,g=0,y=arguments.length,b=0;g<y;)b<(p=u(arguments[g++]))?(m=m*(h=b/p)*h+1,b=p):m+=0<p?(h=p/b)*h:p;return b===1/0?1/0:b*c(m)}})},{"../internals/export":50}],176:[function(a,i,s){var a=a("../internals/export"),l=Math.log,u=Math.LN2;a({target:"Math",stat:!0},{log2:function(c){return l(c)/u}})},{"../internals/export":50}],177:[function(o,i,s){o("../internals/export")({target:"Math",stat:!0},{sign:o("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(o,i,s){"use strict";function a(I){var L,j,M,V,G,U,Y,X=m(I,!1);if(typeof X=="string"&&2<X.length){if((I=(X=w(X)).charCodeAt(0))===43||I===45){if((L=X.charCodeAt(2))===88||L===120)return NaN}else if(I===48){switch(X.charCodeAt(1)){case 66:case 98:j=2,M=49;break;case 79:case 111:j=8,M=55;break;default:return+X}for(G=(V=X.slice(2)).length,U=0;U<G;U++)if((Y=V.charCodeAt(U))<48||M<Y)return NaN;return parseInt(V,j)}}return+X}var l=o("../internals/descriptors"),u=o("../internals/global"),c=o("../internals/is-forced"),f=o("../internals/redefine"),d=o("../internals/has"),p=o("../internals/classof-raw"),h=o("../internals/inherit-if-required"),m=o("../internals/to-primitive"),g=o("../internals/fails"),y=o("../internals/object-create"),b=o("../internals/object-get-own-property-names").f,x=o("../internals/object-get-own-property-descriptor").f,v=o("../internals/object-define-property").f,w=o("../internals/string-trim").trim,_="Number",C=u[_],S=C.prototype,E=p(y(S))==_;if(c(_,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var A,N=function(L){var L=arguments.length<1?0:L,j=this;return j instanceof N&&(E?g(function(){S.valueOf.call(j)}):p(j)!=_)?h(new C(a(L)),j,N):a(L)},k=l?b(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),R=0;k.length>R;R++)d(C,A=k[R])&&!d(N,A)&&v(N,A,x(C,A));(N.prototype=S).constructor=N,f(u,_,N)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(o,i,s){o("../internals/export")({target:"Number",stat:!0},{isFinite:o("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(d,i,s){"use strict";function a(m,g,y){return g===0?y:g%2==1?a(m,g-1,y*m):a(m*m,g/2,y)}var l=d("../internals/export"),u=d("../internals/to-integer"),c=d("../internals/this-number-value"),f=d("../internals/string-repeat"),d=d("../internals/fails"),p=1 .toFixed,h=Math.floor;l({target:"Number",proto:!0,forced:p&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!d(function(){p.call({})})},{toFixed:function(_){function g(A,N){for(var k=-1,R=N;++k<6;)R+=A*C[k],C[k]=R%1e7,R=h(R/1e7)}function y(A){for(var N=6,k=0;0<=--N;)k+=C[N],C[N]=h(k/A),k=k%A*1e7}function b(){for(var A,N=6,k="";0<=--N;)k===""&&N!==0&&C[N]===0||(A=String(C[N]),k=k===""?A:k+f.call("0",7-A.length)+A);return k}var x,v,w=c(this),_=u(_),C=[0,0,0,0,0,0],S="",E="0";if(_<0||20<_)throw RangeError("Incorrect fraction digits");if(w!=w)return"NaN";if(w<=-1e21||1e21<=w)return String(w);if(w<0&&(S="-",w=-w),1e-21<w)if(w=(x=function(A){for(var N=0,k=A;4096<=k;)N+=12,k/=4096;for(;2<=k;)N+=1,k/=2;return N}(w*a(2,69,1))-69)<0?w*a(2,-x,1):w/a(2,x,1),w*=4503599627370496,0<(x=52-x)){for(g(0,w),v=_;7<=v;)g(1e7,0),v-=7;for(g(a(10,v,1),0),v=x-1;23<=v;)y(1<<23),v-=23;y(1<<v),g(1,1),y(2),E=b()}else g(0,w),g(1<<-x,0),E=b()+f.call("0",_);return E=0<_?S+((w=E.length)<=_?"0."+f.call("0",_-w)+E:E.slice(0,w-_)+"."+E.slice(w-_)):S+E}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(l,i,s){var a=l("../internals/export"),l=l("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==l},{assign:l})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/iterate"),u=o("../internals/create-property");a({target:"Object",stat:!0},{fromEntries:function(c){var f={};return l(c,function(d,p){u(f,d,p)},void 0,!0),f}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(c,i,s){var a=c("../internals/export"),f=c("../internals/fails"),l=c("../internals/to-indexed-object"),u=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),f=f(function(){u(1)});a({target:"Object",stat:!0,forced:!c||f,sham:!c},{getOwnPropertyDescriptor:function(d,p){return u(l(d),p)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(u,i,s){var a=u("../internals/export"),l=u("../internals/fails"),u=u("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:l(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:u})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(f,i,s){var a=f("../internals/export"),l=f("../internals/fails"),u=f("../internals/to-object"),c=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:l(function(){c(1)}),sham:!f},{getPrototypeOf:function(d){return c(u(d))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/to-object"),u=o("../internals/object-keys");a({target:"Object",stat:!0,forced:o("../internals/fails")(function(){u(1)})},{keys:function(c){return u(l(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(u,i,s){var a=u("../internals/to-string-tag-support"),l=u("../internals/redefine"),u=u("../internals/object-to-string");a||l(Object.prototype,"toString",u,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(ze,i,s){"use strict";var a,l,u,c,f=ze("../internals/export"),d=ze("../internals/is-pure"),p=ze("../internals/global"),h=ze("../internals/get-built-in"),m=ze("../internals/native-promise-constructor"),g=ze("../internals/redefine"),y=ze("../internals/redefine-all"),b=ze("../internals/set-to-string-tag"),x=ze("../internals/set-species"),v=ze("../internals/is-object"),w=ze("../internals/a-function"),_=ze("../internals/an-instance"),C=ze("../internals/classof-raw"),S=ze("../internals/inspect-source"),E=ze("../internals/iterate"),A=ze("../internals/check-correctness-of-iteration"),N=ze("../internals/species-constructor"),k=ze("../internals/task").set,R=ze("../internals/microtask"),I=ze("../internals/promise-resolve"),L=ze("../internals/host-report-errors"),j=ze("../internals/new-promise-capability"),M=ze("../internals/perform"),V=ze("../internals/internal-state"),G=ze("../internals/is-forced"),lt=ze("../internals/well-known-symbol"),U=ze("../internals/engine-v8-version"),Y=lt("species"),X="Promise",pe=V.get,$=V.set,O=V.getterFor(X),z=m,q=p.TypeError,ee=p.document,ae=p.process,Q=h("fetch"),le=j.f,ie=le,Z=C(ae)=="process",ge=!!(ee&&ee.createEvent&&p.dispatchEvent),ne="unhandledrejection",ye="rejectionhandled",xe=1,Ne=2,Ae=1,Re=2,ze=G(X,function(){var ut,Ge;return S(z)===String(z)&&(U===66||!Z&&typeof PromiseRejectionEvent!="function")?!0:!(!d||z.prototype.finally)||!(51<=U&&/native code/.test(z))&&(Ge=function(fe){fe(function(){},function(){})},((ut=z.resolve(1)).constructor={})[Y]=Ge,!(ut.then(function(){})instanceof Ge))}),lt=ze||!A(function(ut){z.all(ut).catch(function(){})}),We=function(ut){var Ge;return!(!v(ut)||typeof(Ge=ut.then)!="function")&&Ge},Bt=function(ut,Ge,fe){var me;Ge.notified||(Ge.notified=!0,me=Ge.reactions,R(function(){for(var oe,be,Fe=Ge.value,Ve=Ge.state==xe,Qe=0;me.length>Qe;){var _t,Nt,Ft,Ut=me[Qe++],en=Ve?Ut.ok:Ut.fail,Mr=Ut.resolve,ur=Ut.reject,Yr=Ut.domain;try{en?(Ve||(Ge.rejection===Re&&function(Fr,hi){k.call(p,function(){Z?ae.emit("rejectionHandled",Fr):Tt(ye,Fr,hi.value)})}(ut,Ge),Ge.rejection=Ae),en===!0?_t=Fe:(Yr&&Yr.enter(),_t=en(Fe),Yr&&(Yr.exit(),Ft=!0)),_t===Ut.promise?ur(q("Promise-chain cycle")):(Nt=We(_t))?Nt.call(_t,Mr,ur):Mr(_t)):ur(Fe)}catch(Fr){Yr&&!Ft&&Yr.exit(),ur(Fr)}}Ge.reactions=[],Ge.notified=!1,fe&&!Ge.rejection&&(oe=ut,be=Ge,k.call(p,function(){var Fr=be.value,hi=At(be);if(hi&&(hi=M(function(){Z?ae.emit("unhandledRejection",Fr,oe):Tt(ne,oe,Fr)}),be.rejection=Z||At(be)?Re:Ae,hi.error))throw hi.value}))}))},Tt=function(ut,Ge,fe){var me;ge?((me=ee.createEvent("Event")).promise=Ge,me.reason=fe,me.initEvent(ut,!1,!0),p.dispatchEvent(me)):me={promise:Ge,reason:fe},(Ge=p["on"+ut])?Ge(me):ut===ne&&L("Unhandled promise rejection",fe)},At=function(ut){return ut.rejection!==Ae&&!ut.parent},Mt=function(ut,Ge,fe,me){return function(oe){ut(Ge,fe,oe,me)}},Ot=function(ut,Ge,fe,me){Ge.done||(Ge.done=!0,(Ge=me||Ge).value=fe,Ge.state=Ne,Bt(ut,Ge,!0))},Le=function(ut,Ge,fe,me){if(!Ge.done){Ge.done=!0,me&&(Ge=me);try{if(ut===fe)throw q("Promise can't be resolved itself");var oe=We(fe);oe?R(function(){var be={done:!1};try{oe.call(fe,Mt(Le,ut,be,Ge),Mt(Ot,ut,be,Ge))}catch(Fe){Ot(ut,be,Fe,Ge)}}):(Ge.value=fe,Ge.state=xe,Bt(ut,Ge,!1))}catch(be){Ot(ut,{done:!1},be,Ge)}}};ze&&(z=function(ut){_(this,z,X),w(ut),a.call(this);var Ge=pe(this);try{ut(Mt(Le,this,Ge),Mt(Ot,this,Ge))}catch(fe){Ot(this,Ge,fe)}},(a=function(ut){$(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=y(z.prototype,{then:function(ut,Ge){var fe=O(this),me=le(N(this,z));return me.ok=typeof ut!="function"||ut,me.fail=typeof Ge=="function"&&Ge,me.domain=Z?ae.domain:void 0,fe.parent=!0,fe.reactions.push(me),fe.state!=0&&Bt(this,fe,!1),me.promise},catch:function(ut){return this.then(void 0,ut)}}),l=function(){var ut=new a,Ge=pe(ut);this.promise=ut,this.resolve=Mt(Le,ut,Ge),this.reject=Mt(Ot,ut,Ge)},j.f=le=function(ut){return ut===z||ut===u?new l:ie(ut)},d||typeof m!="function"||(c=m.prototype.then,g(m.prototype,"then",function(ut,Ge){var fe=this;return new z(function(me,oe){c.call(fe,me,oe)}).then(ut,Ge)},{unsafe:!0}),typeof Q=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(ut){return I(z,Q.apply(p,arguments))}}))),f({global:!0,wrap:!0,forced:ze},{Promise:z}),b(z,X,!1,!0),x(X),u=h(X),f({target:X,stat:!0,forced:ze},{reject:function(ut){var Ge=le(this);return Ge.reject.call(void 0,ut),Ge.promise}}),f({target:X,stat:!0,forced:d||ze},{resolve:function(ut){return I(d&&this===u?z:this,ut)}}),f({target:X,stat:!0,forced:lt},{all:function(ut){var Ge=this,fe=le(Ge),me=fe.resolve,oe=fe.reject,be=M(function(){var Fe=w(Ge.resolve),Ve=[],Qe=0,_t=1;E(ut,function(Nt){var Ft=Qe++,Ut=!1;Ve.push(void 0),_t++,Fe.call(Ge,Nt).then(function(en){Ut||(Ut=!0,Ve[Ft]=en,--_t||me(Ve))},oe)}),--_t||me(Ve)});return be.error&&oe(be.value),fe.promise},race:function(ut){var Ge=this,fe=le(Ge),me=fe.reject,oe=M(function(){var be=w(Ge.resolve);E(ut,function(Fe){be.call(Ge,Fe).then(fe.resolve,me)})});return oe.error&&me(oe.value),fe.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(p,i,s){var a=p("../internals/export"),y=p("../internals/get-built-in"),l=p("../internals/a-function"),u=p("../internals/an-object"),c=p("../internals/is-object"),f=p("../internals/object-create"),d=p("../internals/function-bind"),p=p("../internals/fails"),h=y("Reflect","construct"),m=p(function(){function b(){}return!(h(function(){},[],b)instanceof b)}),g=!p(function(){h(function(){})}),y=m||g;a({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(b,x){l(b),u(x);var v=arguments.length<3?b:l(arguments[2]);if(g&&!m)return h(b,x,v);if(b==v){switch(x.length){case 0:return new b;case 1:return new b(x[0]);case 2:return new b(x[0],x[1]);case 3:return new b(x[0],x[1],x[2]);case 4:return new b(x[0],x[1],x[2],x[3])}var w=[null];return w.push.apply(w,x),new(d.apply(b,w))}return w=v.prototype,v=f(c(w)?w:Object.prototype),w=Function.apply.call(b,v,x),c(w)?w:v}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(o,i,s){var a=o("../internals/export"),l=o("../internals/is-object"),u=o("../internals/an-object"),c=o("../internals/has"),f=o("../internals/object-get-own-property-descriptor"),d=o("../internals/object-get-prototype-of");a({target:"Reflect",stat:!0},{get:function p(h,m){var g,y=arguments.length<3?h:arguments[2];return u(h)===y?h[m]:(g=f.f(h,m))?c(g,"value")?g.value:g.get===void 0?void 0:g.get.call(y):l(g=d(h))?p(g,m,y):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(o,i,s){var a=o("../internals/descriptors"),l=o("../internals/global"),u=o("../internals/is-forced"),c=o("../internals/inherit-if-required"),f=o("../internals/object-define-property").f,d=o("../internals/object-get-own-property-names").f,p=o("../internals/is-regexp"),h=o("../internals/regexp-flags"),m=o("../internals/regexp-sticky-helpers"),g=o("../internals/redefine"),y=o("../internals/fails"),b=o("../internals/internal-state").set,x=o("../internals/set-species"),v=o("../internals/well-known-symbol")("match"),w=l.RegExp,_=w.prototype,C=/a/g,S=/a/g,E=new w(C)!==C,A=m.UNSUPPORTED_Y;if(a&&u("RegExp",!E||A||y(function(){return S[v]=!1,w(C)!=C||w(S)==S||w(C,"i")!="/a/i"}))){for(var N=function(I,L){var j,M=this instanceof N,V=p(I),G=L===void 0;return!M&&V&&I.constructor===N&&G?I:(E?V&&!G&&(I=I.source):I instanceof N&&(G&&(L=h.call(I)),I=I.source),A&&(j=!!L&&-1<L.indexOf("y"))&&(L=L.replace(/y/g,"")),V=c(E?new w(I,L):w(I,L),M?this:_,N),A&&j&&b(V,{sticky:j}),V)},k=d(w),R=0;k.length>R;)(function(I){I in N||f(N,I,{configurable:!0,get:function(){return w[I]},set:function(L){w[I]=L}})})(k[R++]);(_.constructor=N).prototype=_,g(l,"RegExp",N)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(l,i,s){"use strict";var a=l("../internals/export"),l=l("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(c,i,s){"use strict";var a=c("../internals/redefine"),l=c("../internals/an-object"),p=c("../internals/fails"),u=c("../internals/regexp-flags"),c="toString",f=RegExp.prototype,d=f[c],p=p(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),h=d.name!=c;(p||h)&&a(RegExp.prototype,c,function(){var m=l(this),g=String(m.source),y=m.flags;return"/"+g+"/"+String(y===void 0&&m instanceof RegExp&&!("flags"in f)?u.call(m):y)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(l,i,s){"use strict";var a=l("../internals/collection"),l=l("../internals/collection-strong");i.exports=a("Set",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},l)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),m=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".endsWith,h=Math.min,m=m("endsWith");a({target:"String",proto:!0,forced:!!(d||m||!(a=l(String.prototype,"endsWith"))||a.writable)&&!m},{endsWith:function(g){var y=String(f(this)),b=(c(g),1<arguments.length?arguments[1]:void 0),x=u(y.length),b=b===void 0?x:h(u(b),x),x=String(g);return p?p.call(y,x,b):y.slice(b-x.length,b)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/not-a-regexp"),u=o("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!o("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(u(this)).indexOf(l(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(u,i,s){"use strict";var a=u("../internals/string-multibyte").charAt,l=u("../internals/internal-state"),u=u("../internals/define-iterator"),c="String Iterator",f=l.set,d=l.getterFor(c);u(String,"String",function(p){f(this,{type:c,string:String(p),index:0})},function(){var p=d(this),h=p.string,m=p.index;return m>=h.length?{value:void 0,done:!0}:(h=a(h,m),p.index+=h.length,{value:h,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-length"),c=o("../internals/require-object-coercible"),f=o("../internals/advance-string-index"),d=o("../internals/regexp-exec-abstract");a("match",1,function(p,h,m){return[function(g){var y=c(this),b=g?.[p];return b!==void 0?b.call(g,y):new RegExp(g)[p](String(y))},function(g){var y=m(h,g,this);if(y.done)return y.value;var b=l(g),x=String(this);if(!b.global)return d(b,x);for(var v=b.unicode,w=[],_=b.lastIndex=0;(C=d(b,x))!==null;){var C=String(C[0]);(w[_]=C)===""&&(b.lastIndex=f(x,u(b.lastIndex),v)),_++}return _===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-pad").start;a({target:"String",proto:!0,forced:o("../internals/string-pad-webkit-bug")},{padStart:function(u){return l(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(o,i,s){o("../internals/export")({target:"String",proto:!0},{repeat:o("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/to-object"),c=o("../internals/to-length"),f=o("../internals/to-integer"),d=o("../internals/require-object-coercible"),p=o("../internals/advance-string-index"),h=o("../internals/regexp-exec-abstract"),m=Math.max,g=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;a("replace",2,function(v,w,_,C){var S=C.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=C.REPLACE_KEEPS_$0,A=S?"$":"$0";return[function(N,k){var R=d(this),I=N?.[v];return I!==void 0?I.call(N,R,k):w.call(String(R),N,k)},function(N,k){if(!S&&E||typeof k=="string"&&k.indexOf(A)===-1){var R=_(w,N,this,k);if(R.done)return R.value}for(var I,L=l(N),j=String(this),M=typeof k=="function",V=(M||(k=String(k)),L.global),G=(V&&(I=L.unicode,L.lastIndex=0),[]);($=h(L,j))!==null&&(G.push($),V);)String($[0])===""&&(L.lastIndex=p(j,c(L.lastIndex),I));for(var U,Y="",X=0,pe=0;pe<G.length;pe++){for(var $=G[pe],O=String($[0]),z=m(g(f($.index),j.length),0),q=[],ee=1;ee<$.length;ee++)q.push((U=$[ee])===void 0?U:String(U));var ae=$.groups,Q=M?(Q=[O].concat(q,z,j),ae!==void 0&&Q.push(ae),String(k.apply(void 0,Q))):function(le,ie,Z,ge,ne,ye){var xe=Z+le.length,Ne=ge.length,Ae=x;return ne!==void 0&&(ne=u(ne),Ae=b),w.call(ye,Ae,function(Re,ze){var lt;switch(ze.charAt(0)){case"$":return"$";case"&":return le;case"`":return ie.slice(0,Z);case"'":return ie.slice(xe);case"<":lt=ne[ze.slice(1,-1)];break;default:var We,Bt=+ze;if(Bt==0)return Re;if(Ne<Bt)return(We=y(Bt/10))!==0&&We<=Ne?ge[We-1]===void 0?ze.charAt(1):ge[We-1]+ze.charAt(1):Re;lt=ge[Bt-1]}return lt===void 0?"":lt})}(O,j,z,q,ae,k);X<=z&&(Y+=j.slice(X,z)+Q,X=z+O.length)}return Y+j.slice(X)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(o,i,s){"use strict";var a=o("../internals/fix-regexp-well-known-symbol-logic"),l=o("../internals/an-object"),u=o("../internals/require-object-coercible"),c=o("../internals/same-value"),f=o("../internals/regexp-exec-abstract");a("search",1,function(d,p,h){return[function(m){var g=u(this),y=m?.[d];return y!==void 0?y.call(m,g):new RegExp(m)[d](String(g))},function(m){var g,y=h(p,m,this);return y.done?y.value:(y=l(m),m=String(this),g=y.lastIndex,c(g,0)||(y.lastIndex=0),m=f(y,m),c(y.lastIndex,g)||(y.lastIndex=g),m===null?-1:m.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(g,i,s){"use strict";var a=g("../internals/fix-regexp-well-known-symbol-logic"),l=g("../internals/is-regexp"),u=g("../internals/an-object"),c=g("../internals/require-object-coercible"),f=g("../internals/species-constructor"),d=g("../internals/advance-string-index"),p=g("../internals/to-length"),h=g("../internals/regexp-exec-abstract"),m=g("../internals/regexp-exec"),g=g("../internals/fails"),y=[].push,b=Math.min,x=4294967295,v=!g(function(){return!RegExp(x,"y")});a("split",2,function(w,_,C){var S="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(E,A){var N=String(c(this)),k=A===void 0?x:A>>>0;if(k==0)return[];if(E===void 0)return[N];if(!l(E))return _.call(N,E,k);for(var R,I,L,j=[],A=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(E.sticky?"y":""),M=0,V=new RegExp(E.source,A+"g");(R=m.call(V,N))&&!(M<(I=V.lastIndex)&&(j.push(N.slice(M,R.index)),1<R.length&&R.index<N.length&&y.apply(j,R.slice(1)),L=R[0].length,M=I,j.length>=k));)V.lastIndex===R.index&&V.lastIndex++;return M===N.length?!L&&V.test("")||j.push(""):j.push(N.slice(M)),j.length>k?j.slice(0,k):j}:"0".split(void 0,0).length?function(E,A){return E===void 0&&A===0?[]:_.call(this,E,A)}:_;return[function(E,A){var N=c(this),k=E?.[w];return k!==void 0?k.call(E,N,A):S.call(String(N),E,A)},function(R,A){var N=C(S,R,this,A,S!==_);if(N.done)return N.value;var N=u(R),k=String(this),R=f(N,RegExp),I=N.unicode,L=(N.ignoreCase?"i":"")+(N.multiline?"m":"")+(N.unicode?"u":"")+(v?"y":"g"),j=new R(v?N:"^(?:"+N.source+")",L),M=A===void 0?x:A>>>0;if(M==0)return[];if(k.length===0)return h(j,k)===null?[k]:[];for(var V=0,G=0,U=[];G<k.length;){j.lastIndex=v?G:0;var Y,X=h(j,v?k:k.slice(G));if(X===null||(Y=b(p(j.lastIndex+(v?0:G)),k.length))===V)G=d(k,G,I);else{if(U.push(k.slice(V,G)),U.length===M)return U;for(var pe=1;pe<=X.length-1;pe++)if(U.push(X[pe]),U.length===M)return U;G=V=Y}}return U.push(k.slice(V)),U}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(d,i,s){"use strict";var a=d("../internals/export"),l=d("../internals/object-get-own-property-descriptor").f,u=d("../internals/to-length"),c=d("../internals/not-a-regexp"),f=d("../internals/require-object-coercible"),m=d("../internals/correct-is-regexp-logic"),d=d("../internals/is-pure"),p="".startsWith,h=Math.min,m=m("startsWith");a({target:"String",proto:!0,forced:!!(d||m||!(a=l(String.prototype,"startsWith"))||a.writable)&&!m},{startsWith:function(x){var y=String(f(this)),b=(c(x),u(h(1<arguments.length?arguments[1]:void 0,y.length))),x=String(x);return p?p.call(y,x,b):y.slice(b,b+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/create-html");a({target:"String",proto:!0,forced:o("../internals/string-html-forced")("sub")},{sub:function(){return l(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(o,i,s){"use strict";var a=o("../internals/export"),l=o("../internals/string-trim").trim;a({target:"String",proto:!0,forced:o("../internals/string-trim-forced")("trim")},{trim:function(){return l(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(b,i,s){"use strict";var a,l,u,c,f,d=b("../internals/export"),p=b("../internals/descriptors"),h=b("../internals/global"),m=b("../internals/has"),g=b("../internals/is-object"),y=b("../internals/object-define-property").f,b=b("../internals/copy-constructor-properties"),x=h.Symbol;!p||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(a={},b(l=function(){var v=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof l?new x(v):v===void 0?x():x(v);return v===""&&(a[w]=!0),w},x),(h=l.prototype=x.prototype).constructor=l,u=h.toString,c=String(x("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,y(h,"description",{configurable:!0,get:function(){var v=g(this)?this.valueOf():this,w=u.call(v);return m(a,v)?"":(v=c?w.slice(7,-1):w.replace(f,"$1"))===""?void 0:v}}),d({global:!0,forced:!0},{Symbol:l}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(o,i,s){o("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(ie,i,s){"use strict";function a(oe,be){var Fe=lt[oe]=N(ye[le]);return Z(Fe,{type:Q,tag:oe,description:be}),m||(Fe.description=be),Fe}function l(oe,Ve){_(oe);var Fe=S(Ve),Ve=k(Fe).concat(me(Fe));return ee(Ve,function(Qe){m&&!fe.call(Fe,Qe)||Ge(oe,Qe,Fe[Qe])}),oe}function u(Ve,Qe){var Fe,Ve=S(Ve),Qe=E(Qe,!0);if(Ve!==ne||!x(lt,Qe)||x(We,Qe))return!(Fe=Ne(Ve,Qe))||!x(lt,Qe)||x(Ve,ae)&&Ve[ae][Qe]||(Fe.enumerable=!0),Fe}function c(be){var be=Re(S(be)),Fe=[];return ee(be,function(Ve){x(lt,Ve)||x(X,Ve)||Fe.push(Ve)}),Fe}var f=ie("../internals/export"),d=ie("../internals/global"),p=ie("../internals/get-built-in"),h=ie("../internals/is-pure"),m=ie("../internals/descriptors"),g=ie("../internals/native-symbol"),y=ie("../internals/use-symbol-as-uid"),b=ie("../internals/fails"),x=ie("../internals/has"),v=ie("../internals/is-array"),w=ie("../internals/is-object"),_=ie("../internals/an-object"),C=ie("../internals/to-object"),S=ie("../internals/to-indexed-object"),E=ie("../internals/to-primitive"),A=ie("../internals/create-property-descriptor"),N=ie("../internals/object-create"),k=ie("../internals/object-keys"),R=ie("../internals/object-get-own-property-names"),I=ie("../internals/object-get-own-property-names-external"),L=ie("../internals/object-get-own-property-symbols"),j=ie("../internals/object-get-own-property-descriptor"),M=ie("../internals/object-define-property"),V=ie("../internals/object-property-is-enumerable"),G=ie("../internals/create-non-enumerable-property"),U=ie("../internals/redefine"),Y=ie("../internals/shared"),At=ie("../internals/shared-key"),X=ie("../internals/hidden-keys"),pe=ie("../internals/uid"),$=ie("../internals/well-known-symbol"),O=ie("../internals/well-known-symbol-wrapped"),z=ie("../internals/define-well-known-symbol"),q=ie("../internals/set-to-string-tag"),Mt=ie("../internals/internal-state"),ee=ie("../internals/array-iteration").forEach,ae=At("hidden"),Q="Symbol",le="prototype",ie=$("toPrimitive"),Z=Mt.set,ge=Mt.getterFor(Q),ne=Object[le],ye=d.Symbol,xe=p("JSON","stringify"),Ne=j.f,Ae=M.f,Re=I.f,ze=V.f,lt=Y("symbols"),We=Y("op-symbols"),Bt=Y("string-to-symbol-registry"),Tt=Y("symbol-to-string-registry"),At=Y("wks"),Mt=d.QObject,Ot=!Mt||!Mt[le]||!Mt[le].findChild,Le=m&&b(function(){return N(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(oe,be,Fe){var Ve=Ne(ne,be);Ve&&delete ne[be],Ae(oe,be,Fe),Ve&&oe!==ne&&Ae(ne,be,Ve)}:Ae,ut=y?function(oe){return typeof oe=="symbol"}:function(oe){return Object(oe)instanceof ye},Ge=function(oe,be,Fe){return oe===ne&&Ge(We,be,Fe),_(oe),be=E(be,!0),_(Fe),(x(lt,be)?(Fe.enumerable?(x(oe,ae)&&oe[ae][be]&&(oe[ae][be]=!1),Fe=N(Fe,{enumerable:A(0,!1)})):(x(oe,ae)||Ae(oe,ae,A(1,{})),oe[ae][be]=!0),Le):Ae)(oe,be,Fe)},fe=function(be){var be=E(be,!0),Fe=ze.call(this,be);return!(this===ne&&x(lt,be)&&!x(We,be))&&(!(Fe||!x(this,be)||!x(lt,be)||x(this,ae)&&this[ae][be])||Fe)},me=function(Fe){var be=Fe===ne,Fe=Re(be?We:S(Fe)),Ve=[];return ee(Fe,function(Qe){!x(lt,Qe)||be&&!x(ne,Qe)||Ve.push(lt[Qe])}),Ve};g||(U((ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor");var oe=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,be=pe(oe),Fe=function(Ve){this===ne&&Fe.call(We,Ve),x(this,ae)&&x(this[ae],be)&&(this[ae][be]=!1),Le(this,be,A(1,Ve))};return m&&Ot&&Le(ne,be,{configurable:!0,set:Fe}),a(be,oe)})[le],"toString",function(){return ge(this).tag}),U(ye,"withoutSetter",function(oe){return a(pe(oe),oe)}),V.f=fe,M.f=Ge,j.f=u,R.f=I.f=c,L.f=me,O.f=function(oe){return a($(oe),oe)},m&&(Ae(ye[le],"description",{configurable:!0,get:function(){return ge(this).description}}),h||U(ne,"propertyIsEnumerable",fe,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:ye}),ee(k(At),function(oe){z(oe)}),f({target:Q,stat:!0,forced:!g},{for:function(Fe){var be,Fe=String(Fe);return x(Bt,Fe)?Bt[Fe]:(be=ye(Fe),Bt[Fe]=be,Tt[be]=Fe,be)},keyFor:function(oe){if(!ut(oe))throw TypeError(oe+" is not a symbol");if(x(Tt,oe))return Tt[oe]},useSetter:function(){Ot=!0},useSimple:function(){Ot=!1}}),f({target:"Object",stat:!0,forced:!g,sham:!m},{create:function(oe,be){return be===void 0?N(oe):l(N(oe),be)},defineProperty:Ge,defineProperties:l,getOwnPropertyDescriptor:u}),f({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:c,getOwnPropertySymbols:me}),f({target:"Object",stat:!0,forced:b(function(){L.f(1)})},{getOwnPropertySymbols:function(oe){return L.f(C(oe))}}),xe&&f({target:"JSON",stat:!0,forced:!g||b(function(){var oe=ye();return xe([oe])!="[null]"||xe({a:oe})!="{}"||xe(Object(oe))!="{}"})},{stringify:function(oe,be,Fe){for(var Ve,Qe=[oe],_t=1;_t<arguments.length;)Qe.push(arguments[_t++]);if((w(Ve=be)||oe!==void 0)&&!ut(oe))return v(be)||(be=function(Nt,Ft){if(typeof Ve=="function"&&(Ft=Ve.call(this,Nt,Ft)),!ut(Ft))return Ft}),Qe[1]=be,xe.apply(null,Qe)}}),ye[le][ie]||G(ye[le],ie,ye[le].valueOf),q(ye,Q),X[ae]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-copy-within"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(c,f){return l.call(u(this),c,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").every,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-fill"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").filter,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(d){for(var p=l(c(this),d,1<arguments.length?arguments[1]:void 0),d=u(this,this.constructor),h=0,m=p.length,g=new(f(d))(m);h<m;)g[h]=p[h++];return g})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").findIndex,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").find,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(o,i,s){o("../internals/typed-array-constructor")("Float32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],217:[function(o,i,s){o("../internals/typed-array-constructor")("Float64",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],218:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").forEach,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(c){l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").includes,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-includes").indexOf,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(o,i,s){o("../internals/typed-array-constructor")("Int16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],222:[function(o,i,s){o("../internals/typed-array-constructor")("Int32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],223:[function(l,i,s){"use strict";function a(){return u.call(d(this))}var m=l("../internals/global"),h=l("../internals/array-buffer-view-core"),p=l("../modules/es.array.iterator"),l=l("../internals/well-known-symbol")("iterator"),m=m.Uint8Array,u=p.values,c=p.keys,f=p.entries,d=h.aTypedArray,p=h.exportTypedArrayMethod,h=m&&m.prototype[l],m=!!h&&(h.name=="values"||h.name==null);p("entries",function(){return f.call(d(this))}),p("keys",function(){return c.call(d(this))}),p("values",a,!m),p(l,a,!m)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].join;l("join",function(c){return u.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-last-index-of"),u=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(c){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").map,u=o("../internals/species-constructor"),c=a.aTypedArray,f=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(d){return l(c(this),d,1<arguments.length?arguments[1]:void 0,function(p,h){return new(f(u(p,p.constructor)))(h)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").right,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-reduce").left,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(c){return l(u(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=Math.floor;l("reverse",function(){for(var c,f=a(this).length,d=u(f/2),p=0;p<d;)c=this[p],this[p++]=this[--f],this[f]=c;return this})},{"../internals/array-buffer-view-core":12}],230:[function(f,i,s){"use strict";var a=f("../internals/array-buffer-view-core"),l=f("../internals/to-length"),u=f("../internals/to-offset"),c=f("../internals/to-object"),f=f("../internals/fails"),d=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(p){d(this);var h=u(1<arguments.length?arguments[1]:void 0,1),m=this.length,g=c(p),y=l(g.length),b=0;if(m<y+h)throw RangeError("Wrong length");for(;b<y;)this[h+b]=g[b++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(l,i,s){"use strict";var f=l("../internals/array-buffer-view-core"),a=l("../internals/species-constructor"),l=l("../internals/fails"),u=f.aTypedArray,c=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,d=[].slice;f("slice",function(p,h){for(var m=d.call(u(this),p,h),p=a(this,this.constructor),g=0,y=m.length,b=new(c(p))(y);g<y;)b[g]=m[g++];return b},l(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/array-iteration").some,u=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(c){return l(u(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(l,i,s){"use strict";var l=l("../internals/array-buffer-view-core"),a=l.aTypedArray,l=l.exportTypedArrayMethod,u=[].sort;l("sort",function(c){return u.call(a(this),c)})},{"../internals/array-buffer-view-core":12}],234:[function(o,i,s){"use strict";var a=o("../internals/array-buffer-view-core"),l=o("../internals/to-length"),u=o("../internals/to-absolute-index"),c=o("../internals/species-constructor"),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(g,p){var h=f(this),m=h.length,g=u(g,m);return new(c(h,h.constructor))(h.buffer,h.byteOffset+g*h.BYTES_PER_ELEMENT,l((p===void 0?m:u(p,m))-g))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(l,i,s){"use strict";var f=l("../internals/global"),a=l("../internals/array-buffer-view-core"),l=l("../internals/fails"),u=f.Int8Array,c=a.aTypedArray,f=a.exportTypedArrayMethod,d=[].toLocaleString,p=[].slice,h=!!u&&l(function(){d.call(new u(1))});f("toLocaleString",function(){return d.apply(h?p.call(c(this)):c(this),arguments)},l(function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()})||!l(function(){u.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(l,i,s){"use strict";var a=l("../internals/array-buffer-view-core").exportTypedArrayMethod,f=l("../internals/fails"),l=l("../internals/global").Uint8Array,l=l&&l.prototype||{},u=[].toString,c=[].join,f=(f(function(){u.call({})})&&(u=function(){return c.call(this)}),l.toString!=u);a("toString",u,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(o,i,s){o("../internals/typed-array-constructor")("Uint16",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],238:[function(o,i,s){o("../internals/typed-array-constructor")("Uint32",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],239:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}})},{"../internals/typed-array-constructor":143}],240:[function(o,i,s){o("../internals/typed-array-constructor")("Uint8",function(a){return function(l,u,c){return a(this,l,u,c)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(x,_,s){"use strict";function a(C){return function(){return C(this,arguments.length?arguments[0]:void 0)}}var l,u,c,f,d,v=x("../internals/global"),p=x("../internals/redefine-all"),h=x("../internals/internal-metadata"),m=x("../internals/collection"),g=x("../internals/collection-weak"),y=x("../internals/is-object"),b=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),v=!v.ActiveXObject&&"ActiveXObject"in v,w=Object.isExtensible,_=_.exports=m("WeakMap",a,g);x&&v&&(l=g.getConstructor(a,"WeakMap",!0),h.REQUIRED=!0,m=_.prototype,u=m.delete,c=m.has,f=m.get,d=m.set,p(m,{delete:function(C){var S;return y(C)&&!w(C)?((S=b(this)).frozen||(S.frozen=new l),u.call(this,C)||S.frozen.delete(C)):u.call(this,C)},has:function(C){var S;return y(C)&&!w(C)?((S=b(this)).frozen||(S.frozen=new l),c.call(this,C)||S.frozen.has(C)):c.call(this,C)},get:function(C){var S;return!y(C)||w(C)||((S=b(this)).frozen||(S.frozen=new l),c.call(this,C))?f.call(this,C):S.frozen.get(C)},set:function(C,S){var E;return!y(C)||w(C)||((E=b(this)).frozen||(E.frozen=new l),c.call(this,C))?d.call(this,C,S):E.frozen.set(C,S),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(o,i,s){var a,l=o("../internals/global"),u=o("../internals/dom-iterables"),c=o("../internals/array-for-each"),f=o("../internals/create-non-enumerable-property");for(a in u){var d=l[a],d=d&&d.prototype;if(d&&d.forEach!==c)try{f(d,"forEach",c)}catch{d.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(d,i,s){var a,l=d("../internals/global"),u=d("../internals/dom-iterables"),c=d("../modules/es.array.iterator"),f=d("../internals/create-non-enumerable-property"),d=d("../internals/well-known-symbol"),p=d("iterator"),h=d("toStringTag"),m=c.values;for(a in u){var g=l[a],y=g&&g.prototype;if(y){if(y[p]!==m)try{f(y,p,m)}catch{y[p]=m}if(y[h]||f(y,h,a),u[a]){for(var b in c)if(y[b]!==c[b])try{f(y,b,c[b])}catch{y[b]=c[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(ae,i,s){"use strict";ae("../modules/es.array.iterator");function a(Q){try{return decodeURIComponent(Q)}catch{return Q}}function l(Q){return z[Q]}function u(Q){return encodeURIComponent(Q).replace(O,l)}function c(Q){this.entries.length=0,q(this.entries,Q)}function f(Q,le){if(Q<le)throw TypeError("Not enough arguments")}function d(){v(this,d,M);var Q,le,ie,Z,ge,ne,ye,xe,Ne=0<arguments.length?arguments[0]:void 0,Ae=[];if(G(this,{type:M,entries:Ae,updateURL:function(){},updateSearchParams:c}),Ne!==void 0)if(E(Ne))if(typeof(Q=R(Ne))=="function")for(ie=(le=Q.call(Ne)).next;!(Z=ie.call(le)).done;){if((ne=(ge=(Z=k(S(Z.value))).next).call(Z)).done||(ye=ge.call(Z)).done||!ge.call(Z).done)throw TypeError("Expected sequence with length 2");Ae.push({key:ne.value+"",value:ye.value+""})}else for(xe in Ne)w(Ne,xe)&&Ae.push({key:xe,value:Ne[xe]+""});else q(Ae,typeof Ne=="string"?Ne.charAt(0)==="?"?Ne.slice(1):Ne:Ne+"")}var p=ae("../internals/export"),j=ae("../internals/get-built-in"),h=ae("../internals/native-url"),m=ae("../internals/redefine"),g=ae("../internals/redefine-all"),y=ae("../internals/set-to-string-tag"),b=ae("../internals/create-iterator-constructor"),x=ae("../internals/internal-state"),v=ae("../internals/an-instance"),w=ae("../internals/has"),_=ae("../internals/function-bind-context"),C=ae("../internals/classof"),S=ae("../internals/an-object"),E=ae("../internals/is-object"),A=ae("../internals/object-create"),N=ae("../internals/create-property-descriptor"),k=ae("../internals/get-iterator"),R=ae("../internals/get-iterator-method"),ae=ae("../internals/well-known-symbol"),I=j("fetch"),L=j("Headers"),j=ae("iterator"),M="URLSearchParams",V=M+"Iterator",G=x.set,U=x.getterFor(M),Y=x.getterFor(V),X=/\+/g,pe=Array(4),$=function(Q){var le,ie=Q.replace(X," "),Z=4;try{return decodeURIComponent(ie)}catch{for(;Z;)ie=ie.replace((le=Z--,pe[le-1]||(pe[le-1]=RegExp("((?:%[\\da-f]{2}){"+le+"})","gi"))),a);return ie}},O=/[!'()~]|%20/g,z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},q=function(Q,le){if(le)for(var ie,Z=le.split("&"),ge=0;ge<Z.length;)(ie=Z[ge++]).length&&(ie=ie.split("="),Q.push({key:$(ie.shift()),value:$(ie.join("="))}))},ee=b(function(Q,le){G(this,{type:V,iterator:k(U(Q).entries),kind:le})},"Iterator",function(){var le=Y(this),Q=le.kind,le=le.iterator.next(),ie=le.value;return le.done||(le.value=Q==="keys"?ie.key:Q==="values"?ie.value:[ie.key,ie.value]),le}),ae=d.prototype;g(ae,{append:function(Q,le){f(arguments.length,2);var ie=U(this);ie.entries.push({key:Q+"",value:le+""}),ie.updateURL()},delete:function(Q){f(arguments.length,1);for(var le=U(this),ie=le.entries,Z=Q+"",ge=0;ge<ie.length;)ie[ge].key===Z?ie.splice(ge,1):ge++;le.updateURL()},get:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",Z=0;Z<le.length;Z++)if(le[Z].key===ie)return le[Z].value;return null},getAll:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",Z=[],ge=0;ge<le.length;ge++)le[ge].key===ie&&Z.push(le[ge].value);return Z},has:function(Q){f(arguments.length,1);for(var le=U(this).entries,ie=Q+"",Z=0;Z<le.length;)if(le[Z++].key===ie)return!0;return!1},set:function(Q,le){f(arguments.length,1);for(var ie,Z=U(this),ge=Z.entries,ne=!1,ye=Q+"",xe=le+"",Ne=0;Ne<ge.length;Ne++)(ie=ge[Ne]).key===ye&&(ne?ge.splice(Ne--,1):(ne=!0,ie.value=xe));ne||ge.push({key:ye,value:xe}),Z.updateURL()},sort:function(){for(var Q,le,ie=U(this),Z=ie.entries,ge=Z.slice(),ne=Z.length=0;ne<ge.length;ne++){for(Q=ge[ne],le=0;le<ne;le++)if(Z[le].key>Q.key){Z.splice(le,0,Q);break}le===ne&&Z.push(Q)}ie.updateURL()},forEach:function(Q){for(var le,ie=U(this).entries,Z=_(Q,1<arguments.length?arguments[1]:void 0,3),ge=0;ge<ie.length;)Z((le=ie[ge++]).value,le.key,this)},keys:function(){return new ee(this,"keys")},values:function(){return new ee(this,"values")},entries:function(){return new ee(this,"entries")}},{enumerable:!0}),m(ae,j,ae.entries),m(ae,"toString",function(){for(var Q,le=U(this).entries,ie=[],Z=0;Z<le.length;)Q=le[Z++],ie.push(u(Q.key)+"="+u(Q.value));return ie.join("&")},{enumerable:!0}),y(d,M),p({global:!0,forced:!h},{URLSearchParams:d}),h||typeof I!="function"||typeof L!="function"||p({global:!0,enumerable:!0,forced:!0},{fetch:function(ge){var le,ie,Z,ge=[ge];return 1<arguments.length&&(E(le=arguments[1])&&(ie=le.body,C(ie)===M&&((Z=le.headers?new L(le.headers):new L).has("content-type")||Z.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),le=A(le,{body:N(0,String(ie)),headers:N(0,Z)}))),ge.push(le)),I.apply(this,ge)}}),i.exports={URLSearchParams:d,getState:U}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(k,i,s){"use strict";k("../modules/es.string.iterator");function a(ke){var St,qt,xt,An;if(typeof ke=="number"){for(St=[],qt=0;qt<4;qt++)St.unshift(ke%256),ke=V(ke/256);return St.join(".")}if(typeof ke!="object")return ke;for(St="",xt=ye(ke),qt=0;qt<8;qt++)An&&ke[qt]===0||(An=An&&!1,xt===qt?(St+=qt?":":"::",An=!0):(St+=ke[qt].toString(16),qt<7&&(St+=":")));return"["+St+"]"}function l(ke){return!ke.host||ke.cannotBeABaseURL||ke.scheme=="file"}function u(ke,St,qt,xt){var An,mt,Yn,zt=qt||ut,Pn=0,Vt="",_s=!1,pa=!1,ls=!1;for(qt||(ke.scheme="",ke.username="",ke.password="",ke.host=null,ke.port=null,ke.path=[],ke.query=null,ke.fragment=null,ke.cannotBeABaseURL=!1,St=St.replace(Z,"")),St=St.replace(ge,""),An=C(St);Pn<=An.length;){switch(mt=An[Pn],zt){case ut:if(!mt||!$.test(mt)){if(qt)return Y;zt=fe;continue}Vt+=mt.toLowerCase(),zt=Ge;break;case Ge:if(mt&&(O.test(mt)||mt=="+"||mt=="-"||mt=="."))Vt+=mt.toLowerCase();else{if(mt!=":"){if(qt)return Y;Vt="",zt=fe,Pn=0;continue}if(qt&&(We(ke)!=w(lt,Vt)||Vt=="file"&&(Bt(ke)||ke.port!==null)||ke.scheme=="file"&&!ke.host))return;if(ke.scheme=Vt,qt)return void(We(ke)&&lt[ke.scheme]==ke.port&&(ke.port=null));Vt="",ke.scheme=="file"?zt=en:We(ke)&&xt&&xt.scheme==ke.scheme?zt=me:We(ke)?zt=Ve:An[Pn+1]=="/"?(zt=oe,Pn++):(ke.cannotBeABaseURL=!0,ke.path.push(""),zt=hi)}break;case fe:if(!xt||xt.cannotBeABaseURL&&mt!="#")return Y;if(xt.cannotBeABaseURL&&mt=="#"){ke.scheme=xt.scheme,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",ke.cannotBeABaseURL=!0,zt=$s;break}zt=xt.scheme=="file"?en:be;continue;case me:if(mt!="/"||An[Pn+1]!="/"){zt=be;continue}zt=Qe,Pn++;break;case oe:if(mt=="/"){zt=_t;break}zt=Fr;continue;case be:if(ke.scheme=xt.scheme,mt==d)ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query;else if(mt=="/"||mt=="\\"&&We(ke))zt=Fe;else if(mt=="?")ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query="",zt=ql;else{if(mt!="#"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.path.pop(),zt=Fr;continue}ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=$s}break;case Fe:if(!We(ke)||mt!="/"&&mt!="\\"){if(mt!="/"){ke.username=xt.username,ke.password=xt.password,ke.host=xt.host,ke.port=xt.port,zt=Fr;continue}zt=_t}else zt=Qe;break;case Ve:if(zt=Qe,mt!="/"||Vt.charAt(Pn+1)!="/")continue;Pn++;break;case Qe:if(mt=="/"||mt=="\\")break;zt=_t;continue;case _t:if(mt=="@"){_s&&(Vt="%40"+Vt);for(var _s=!0,Fa=C(Vt),ig=0;ig<Fa.length;ig++){var Lf=Fa[ig];Lf!=":"||ls?(Lf=ze(Lf,Re),ls?ke.password+=Lf:ke.username+=Lf):ls=!0}Vt=""}else if(mt==d||mt=="/"||mt=="?"||mt=="#"||mt=="\\"&&We(ke)){if(_s&&Vt=="")return U;Pn-=C(Vt).length+1,Vt="",zt=Nt}else Vt+=mt;break;case Nt:case Ft:if(qt&&ke.scheme=="file"){zt=ur;continue}if(mt!=":"||pa){if(mt==d||mt=="/"||mt=="?"||mt=="#"||mt=="\\"&&We(ke)){if(We(ke)&&Vt=="")return X;if(qt&&Vt==""&&(Bt(ke)||ke.port!==null))return;if(Yn=ne(ke,Vt))return Yn;if(Vt="",zt=Yr,qt)return;continue}mt=="["?pa=!0:mt=="]"&&(pa=!1),Vt+=mt}else{if(Vt=="")return X;if(Yn=ne(ke,Vt))return Yn;if(Vt="",zt=Ut,qt==Ft)return}break;case Ut:if(!z.test(mt)){if(mt==d||mt=="/"||mt=="?"||mt=="#"||mt=="\\"&&We(ke)||qt){if(Vt!=""){var sg=parseInt(Vt,10);if(65535<sg)return pe;ke.port=We(ke)&&sg===lt[ke.scheme]?null:sg,Vt=""}if(qt)return;zt=Yr;continue}return pe}Vt+=mt;break;case en:if(ke.scheme="file",mt=="/"||mt=="\\")zt=Mr;else{if(!xt||xt.scheme!="file"){zt=Fr;continue}if(mt==d)ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query;else if(mt=="?")ke.host=xt.host,ke.path=xt.path.slice(),ke.query="",zt=ql;else{if(mt!="#"){At(An.slice(Pn).join(""))||(ke.host=xt.host,ke.path=xt.path.slice(),Mt(ke)),zt=Fr;continue}ke.host=xt.host,ke.path=xt.path.slice(),ke.query=xt.query,ke.fragment="",zt=$s}}break;case Mr:if(mt=="/"||mt=="\\"){zt=ur;break}xt&&xt.scheme=="file"&&!At(An.slice(Pn).join(""))&&(Tt(xt.path[0],!0)?ke.path.push(xt.path[0]):ke.host=xt.host),zt=Fr;continue;case ur:if(mt==d||mt=="/"||mt=="\\"||mt=="?"||mt=="#"){if(!qt&&Tt(Vt))zt=Fr;else{if(Vt==""){if(ke.host="",qt)return}else{if(Yn=ne(ke,Vt))return Yn;if(ke.host=="localhost"&&(ke.host=""),qt)return;Vt=""}zt=Yr}continue}Vt+=mt;break;case Yr:if(We(ke)){if(zt=Fr,mt!="/"&&mt!="\\")continue}else if(qt||mt!="?")if(qt||mt!="#"){if(mt!=d&&(zt=Fr,mt!="/"))continue}else ke.fragment="",zt=$s;else ke.query="",zt=ql;break;case Fr:if(mt==d||mt=="/"||mt=="\\"&&We(ke)||!qt&&(mt=="?"||mt=="#")){if(Le(Vt)?(Mt(ke),mt=="/"||mt=="\\"&&We(ke)||ke.path.push("")):Ot(Vt)?mt=="/"||mt=="\\"&&We(ke)||ke.path.push(""):(ke.scheme=="file"&&!ke.path.length&&Tt(Vt)&&(ke.host&&(ke.host=""),Vt=Vt.charAt(0)+":"),ke.path.push(Vt)),Vt="",ke.scheme=="file"&&(mt==d||mt=="?"||mt=="#"))for(;1<ke.path.length&&ke.path[0]==="";)ke.path.shift();mt=="?"?(ke.query="",zt=ql):mt=="#"&&(ke.fragment="",zt=$s)}else Vt+=ze(mt,Ae);break;case hi:mt=="?"?(ke.query="",zt=ql):mt=="#"?(ke.fragment="",zt=$s):mt!=d&&(ke.path[0]+=ze(mt,xe));break;case ql:qt||mt!="#"?mt!=d&&(mt=="'"&&We(ke)?ke.query+="%27":ke.query+=mt=="#"?"%23":ze(mt,xe)):(ke.fragment="",zt=$s);break;case $s:mt!=d&&(ke.fragment+=ze(mt,Ne))}Pn++}}function c(mt){var St,qt,xt=v(this,c,"URL"),An=1<arguments.length?arguments[1]:void 0,mt=String(mt),Yn=j(xt,{type:"URL"});if(An!==void 0){if(An instanceof c)St=M(An);else if(qt=u(St={},String(An)))throw TypeError(qt)}if(qt=u(Yn,mt,null,St))throw TypeError(qt);var zt=Yn.searchParams=new I;(An=L(zt)).updateSearchParams(Yn.query),An.updateURL=function(){Yn.query=String(zt)||null},g||(xt.href=wi.call(xt),xt.origin=Hn.call(xt),xt.protocol=yl.call(xt),xt.username=Oa.call(xt),xt.password=Lo.call(xt),xt.host=bl.call(xt),xt.hostname=tM.call(xt),xt.port=rM.call(xt),xt.pathname=nM.call(xt),xt.search=az.call(xt),xt.searchParams=oM.call(xt),xt.hash=iM.call(xt))}function f(ke,St){return{get:ke,set:St,configurable:!0,enumerable:!0}}var d,p,h,m=k("../internals/export"),g=k("../internals/descriptors"),y=k("../internals/native-url"),Eo=k("../internals/global"),b=k("../internals/object-define-properties"),x=k("../internals/redefine"),v=k("../internals/an-instance"),w=k("../internals/has"),_=k("../internals/object-assign"),C=k("../internals/array-from"),S=k("../internals/string-multibyte").codeAt,E=k("../internals/string-punycode-to-ascii"),A=k("../internals/set-to-string-tag"),N=k("../modules/web.url-search-params"),k=k("../internals/internal-state"),R=Eo.URL,I=N.URLSearchParams,L=N.getState,j=k.set,M=k.getterFor("URL"),V=Math.floor,G=Math.pow,U="Invalid authority",Y="Invalid scheme",X="Invalid host",pe="Invalid port",$=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,z=/\d/,q=/^(0x|0X)/,ee=/^[0-7]+$/,ae=/^\d+$/,Q=/^[\dA-Fa-f]+$/,le=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ie=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ge=/[\u0009\u000A\u000D]/g,ne=function(ke,St){var qt,xt,An;if(St.charAt(0)=="[")return St.charAt(St.length-1)=="]"&&(qt=function(mt){var Yn=[0,0,0,0,0,0,0,0],zt=0,Pn=null,Vt=0,_s,pa,ls,Fa,ig,Lf,sg,Ra=function(){return mt.charAt(Vt)};if(Ra()==":"){if(mt.charAt(1)!=":")return;Vt+=2,zt++,Pn=zt}for(;Ra();){if(zt==8)return;if(Ra()==":"){if(Pn!==null)return;Vt++,zt++,Pn=zt;continue}for(_s=pa=0;pa<4&&Q.test(Ra());)_s=_s*16+parseInt(Ra(),16),Vt++,pa++;if(Ra()=="."){if(pa==0||(Vt-=pa,zt>6))return;for(ls=0;Ra();){if(Fa=null,ls>0)if(Ra()=="."&&ls<4)Vt++;else return;if(!z.test(Ra()))return;for(;z.test(Ra());){if(ig=parseInt(Ra(),10),Fa===null)Fa=ig;else{if(Fa==0)return;Fa=Fa*10+ig}if(Fa>255)return;Vt++}Yn[zt]=Yn[zt]*256+Fa,ls++,(ls==2||ls==4)&&zt++}if(ls!=4)return;break}else if(Ra()==":"){if(Vt++,!Ra())return}else if(Ra())return;Yn[zt++]=_s}if(Pn!==null)for(Lf=zt-Pn,zt=7;zt!=0&&Lf>0;)sg=Yn[zt],Yn[zt--]=Yn[Pn+Lf-1],Yn[Pn+--Lf]=sg;else if(zt!=8)return;return Yn}(St.slice(1,-1)))?void(ke.host=qt):X;if(We(ke))return St=E(St),le.test(St)||(qt=function(mt){var Yn=mt.split("."),zt,Pn,Vt,_s,pa,ls,Fa;if(Yn.length&&Yn[Yn.length-1]==""&&Yn.pop(),(zt=Yn.length)>4)return mt;for(Pn=[],Vt=0;Vt<zt;Vt++){if(_s=Yn[Vt],_s=="")return mt;if(pa=10,_s.length>1&&_s.charAt(0)=="0"&&(pa=q.test(_s)?16:8,_s=_s.slice(pa==8?1:2)),_s==="")ls=0;else{if(!(pa==10?ae:pa==8?ee:Q).test(_s))return mt;ls=parseInt(_s,pa)}Pn.push(ls)}for(Vt=0;Vt<zt;Vt++)if(ls=Pn[Vt],Vt==zt-1){if(ls>=G(256,5-zt))return null}else if(ls>255)return null;for(Fa=Pn.pop(),Vt=0;Vt<Pn.length;Vt++)Fa+=Pn[Vt]*G(256,3-Vt);return Fa}(St))===null?X:void(ke.host=qt);if(ie.test(St))return X;for(qt="",xt=C(St),An=0;An<xt.length;An++)qt+=ze(xt[An],xe);ke.host=qt},ye=function(ke){for(var St=null,qt=1,xt=null,An=0,mt=0;mt<8;mt++)ke[mt]!==0?(qt<An&&(St=xt,qt=An),xt=null,An=0):(xt===null&&(xt=mt),++An);return qt<An&&(St=xt,qt=An),St},xe={},Ne=_({},xe,{" ":1,'"':1,"<":1,">":1,"`":1}),Ae=_({},Ne,{"#":1,"?":1,"{":1,"}":1}),Re=_({},Ae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ze=function(ke,St){var qt=S(ke,0);return 32<qt&&qt<127&&!w(St,ke)?ke:encodeURIComponent(ke)},lt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},We=function(ke){return w(lt,ke.scheme)},Bt=function(ke){return ke.username!=""||ke.password!=""},Tt=function(ke,St){return ke.length==2&&$.test(ke.charAt(0))&&((ke=ke.charAt(1))==":"||!St&&ke=="|")},At=function(ke){return 1<ke.length&&Tt(ke.slice(0,2))&&(ke.length==2||(ke=ke.charAt(2))==="/"||ke==="\\"||ke==="?"||ke==="#")},Mt=function(ke){var St=ke.path,qt=St.length;!qt||ke.scheme=="file"&&qt==1&&Tt(St[0],!0)||St.pop()},Ot=function(ke){return ke==="."||ke.toLowerCase()==="%2e"},Le=function(ke){return(ke=ke.toLowerCase())===".."||ke==="%2e."||ke===".%2e"||ke==="%2e%2e"},ut={},Ge={},fe={},me={},oe={},be={},Fe={},Ve={},Qe={},_t={},Nt={},Ft={},Ut={},en={},Mr={},ur={},Yr={},Fr={},hi={},ql={},$s={},Eo=c.prototype,wi=function(){var ke=M(this),St=ke.scheme,qt=ke.username,xt=ke.password,An=ke.host,mt=ke.port,Yn=ke.path,zt=ke.query,Pn=ke.fragment,Vt=St+":";return An!==null?(Vt+="//",Bt(ke)&&(Vt+=qt+(xt?":"+xt:"")+"@"),Vt+=a(An),mt!==null&&(Vt+=":"+mt)):St=="file"&&(Vt+="//"),Vt+=ke.cannotBeABaseURL?Yn[0]:Yn.length?"/"+Yn.join("/"):"",zt!==null&&(Vt+="?"+zt),Pn!==null&&(Vt+="#"+Pn),Vt},Hn=function(){var ke=M(this),St=ke.scheme,qt=ke.port;if(St=="blob")try{return new URL(St.path[0]).origin}catch{return"null"}return St!="file"&&We(ke)?St+"://"+a(ke.host)+(qt!==null?":"+qt:""):"null"},yl=function(){return M(this).scheme+":"},Oa=function(){return M(this).username},Lo=function(){return M(this).password},bl=function(){var St=M(this),ke=St.host,St=St.port;return ke===null?"":St===null?a(ke):a(ke)+":"+St},tM=function(){var ke=M(this).host;return ke===null?"":a(ke)},rM=function(){var ke=M(this).port;return ke===null?"":String(ke)},nM=function(){var ke=M(this),St=ke.path;return ke.cannotBeABaseURL?St[0]:St.length?"/"+St.join("/"):""},az=function(){var ke=M(this).query;return ke?"?"+ke:""},oM=function(){return M(this).searchParams},iM=function(){var ke=M(this).fragment;return ke?"#"+ke:""};g&&b(Eo,{href:f(wi,function(qt){var St=M(this),qt=String(qt),qt=u(St,qt);if(qt)throw TypeError(qt);L(St.searchParams).updateSearchParams(St.query)}),origin:f(Hn),protocol:f(yl,function(ke){var St=M(this);u(St,String(ke)+":",ut)}),username:f(Oa,function(ke){var St=M(this),qt=C(String(ke));if(!l(St)){St.username="";for(var xt=0;xt<qt.length;xt++)St.username+=ze(qt[xt],Re)}}),password:f(Lo,function(ke){var St=M(this),qt=C(String(ke));if(!l(St)){St.password="";for(var xt=0;xt<qt.length;xt++)St.password+=ze(qt[xt],Re)}}),host:f(bl,function(ke){var St=M(this);St.cannotBeABaseURL||u(St,String(ke),Nt)}),hostname:f(tM,function(ke){var St=M(this);St.cannotBeABaseURL||u(St,String(ke),Ft)}),port:f(rM,function(ke){var St=M(this);l(St)||((ke=String(ke))==""?St.port=null:u(St,ke,Ut))}),pathname:f(nM,function(ke){var St=M(this);St.cannotBeABaseURL||(St.path=[],u(St,ke+"",Yr))}),search:f(az,function(ke){var St=M(this);(ke=String(ke))==""?St.query=null:(ke.charAt(0)=="?"&&(ke=ke.slice(1)),St.query="",u(St,ke,ql)),L(St.searchParams).updateSearchParams(St.query)}),searchParams:f(oM),hash:f(iM,function(ke){var St=M(this);(ke=String(ke))==""?St.fragment=null:(ke.charAt(0)=="#"&&(ke=ke.slice(1)),St.fragment="",u(St,ke,$s))})}),x(Eo,"toJSON",function(){return wi.call(this)},{enumerable:!0}),x(Eo,"toString",function(){return wi.call(this)},{enumerable:!0}),R&&(p=R.createObjectURL,h=R.revokeObjectURL,p&&x(c,"createObjectURL",function(ke){return p.apply(R,arguments)}),h&&x(c,"revokeObjectURL",function(ke){return h.apply(R,arguments)})),A(c,"URL"),m({global:!0,forced:!y,sham:!g},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(o,i,s){"use strict";i.exports=o("./").polyfill()},{"./":247}],247:[function(o,i,s){(function(a,l){var u,c;u=this,c=function(){"use strict";function f(ne){return typeof ne=="function"}var d=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},p=0,h=void 0,m=void 0,g=function(ne,ye){_[p]=ne,_[p+1]=ye,(p+=2)===2&&(m?m(C):I())},y=typeof window<"u"?window:void 0,b=y||{},b=b.MutationObserver||b.WebKitMutationObserver,x=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var ne=setTimeout;return function(){return ne(C,1)}}var _=new Array(1e3);function C(){for(var ne=0;ne<p;ne+=2)(0,_[ne])(_[ne+1]),_[ne]=void 0,_[ne+1]=void 0;p=0}function S(){try{var ne=Function("return this")().require("vertx");return(h=ne.runOnLoop||ne.runOnContext)!==void 0?function(){h(C)}:w()}catch{return w()}}var E,A,N,I=void 0;function k(ne,ye){var xe,Ne=this,Ae=new this.constructor(j),Re=(Ae[L]===void 0&&Q(Ae),Ne._state);return Re?(xe=arguments[Re-1],g(function(){return ee(Re,Ae,xe,Ne._result)})):z(Ne,Ae,ne,ye),Ae}function R(ne){var ye;return ne&&typeof ne=="object"&&ne.constructor===this?ne:(X(ye=new this(j),ne),ye)}var I=x?function(){return a.nextTick(C)}:b?(A=0,x=new b(C),N=document.createTextNode(""),x.observe(N,{characterData:!0}),function(){N.data=A=++A%2}):v?((E=new MessageChannel).port1.onmessage=C,function(){return E.port2.postMessage(0)}):(y===void 0&&typeof o=="function"?S:w)(),L=Math.random().toString(36).substring(2);function j(){}var M=void 0,V=1,G=2;function U(ne,ye,xe){g(function(Ne){var Ae=!1,Re=function(ze,lt,We,Bt){try{ze.call(lt,We,Bt)}catch(Tt){return Tt}}(xe,ye,function(ze){Ae||(Ae=!0,(ye!==ze?X:$)(Ne,ze))},function(ze){Ae||(Ae=!0,O(Ne,ze))},Ne._label);!Ae&&Re&&(Ae=!0,O(Ne,Re))},ne)}function Y(ne,ye,xe){var Ne,Ae;ye.constructor===ne.constructor&&xe===k&&ye.constructor.resolve===R?(Ne=ne,(Ae=ye)._state===V?$(Ne,Ae._result):Ae._state===G?O(Ne,Ae._result):z(Ae,void 0,function(Re){return X(Ne,Re)},function(Re){return O(Ne,Re)})):xe!==void 0&&f(xe)?U(ne,ye,xe):$(ne,ye)}function X(ne,ye){if(ne===ye)O(ne,new TypeError("You cannot resolve a promise with itself"));else if(xe=typeof ye,ye===null||xe!="object"&&xe!="function")$(ne,ye);else{xe=void 0;try{xe=ye.then}catch(Ne){return void O(ne,Ne)}Y(ne,ye,xe)}var xe}function pe(ne){ne._onerror&&ne._onerror(ne._result),q(ne)}function $(ne,ye){ne._state===M&&(ne._result=ye,ne._state=V,ne._subscribers.length!==0&&g(q,ne))}function O(ne,ye){ne._state===M&&(ne._state=G,ne._result=ye,g(pe,ne))}function z(ne,ye,xe,Ne){var Ae=ne._subscribers,Re=Ae.length;ne._onerror=null,Ae[Re]=ye,Ae[Re+V]=xe,Ae[Re+G]=Ne,Re===0&&ne._state&&g(q,ne)}function q(ne){var ye=ne._subscribers,xe=ne._state;if(ye.length!==0){for(var Ne,Ae=void 0,Re=ne._result,ze=0;ze<ye.length;ze+=3)Ne=ye[ze],Ae=ye[ze+xe],Ne?ee(xe,Ne,Ae,Re):Ae(Re);ne._subscribers.length=0}}function ee(ne,ye,xe,Ne){var Ae=f(xe),Re=void 0,ze=void 0,lt=!0;if(Ae){try{Re=xe(Ne)}catch(We){lt=!1,ze=We}if(ye===Re)return void O(ye,new TypeError("A promises callback cannot return that same promise."))}else Re=Ne;ye._state===M&&(Ae&&lt?X(ye,Re):lt===!1?O(ye,ze):ne===V?$(ye,Re):ne===G&&O(ye,Re))}var ae=0;function Q(ne){ne[L]=ae++,ne._state=void 0,ne._result=void 0,ne._subscribers=[]}ie.prototype._enumerate=function(ne){for(var ye=0;this._state===M&&ye<ne.length;ye++)this._eachEntry(ne[ye],ye)},ie.prototype._eachEntry=function(ne,ye){var xe=this._instanceConstructor,Ne=xe.resolve;if(Ne===R){var Ae,Re=void 0,ze=void 0,lt=!1;try{Re=ne.then}catch(We){lt=!0,ze=We}Re===k&&ne._state!==M?this._settledAt(ne._state,ye,ne._result):typeof Re!="function"?(this._remaining--,this._result[ye]=ne):xe===Z?(Ae=new xe(j),lt?O(Ae,ze):Y(Ae,ne,Re),this._willSettleAt(Ae,ye)):this._willSettleAt(new xe(function(We){return We(ne)}),ye)}else this._willSettleAt(Ne(ne),ye)},ie.prototype._settledAt=function(ne,ye,xe){var Ne=this.promise;Ne._state===M&&(this._remaining--,ne===G?O(Ne,xe):this._result[ye]=xe),this._remaining===0&&$(Ne,this._result)},ie.prototype._willSettleAt=function(ne,ye){var xe=this;z(ne,void 0,function(Ne){return xe._settledAt(V,ye,Ne)},function(Ne){return xe._settledAt(G,ye,Ne)})};var le=ie;function ie(ne,ye){this._instanceConstructor=ne,this.promise=new ne(j),this.promise[L]||Q(this.promise),d(ye)?(this.length=ye.length,this._remaining=ye.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ye),this._remaining!==0)||$(this.promise,this._result)):O(this.promise,new Error("Array Methods must be provided an Array"))}ge.prototype.catch=function(ne){return this.then(null,ne)},ge.prototype.finally=function(ne){var ye=this.constructor;return f(ne)?this.then(function(xe){return ye.resolve(ne()).then(function(){return xe})},function(xe){return ye.resolve(ne()).then(function(){throw xe})}):this.then(ne,ne)};var Z=ge;function ge(ne){if(this[L]=ae++,this._result=this._state=void 0,this._subscribers=[],j!==ne){if(typeof ne!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ge))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ye=this;try{ne(function(xe){X(ye,xe)},function(xe){O(ye,xe)})}catch(xe){O(ye,xe)}}}return Z.prototype.then=k,Z.all=function(ne){return new le(this,ne).promise},Z.race=function(ne){var ye=this;return d(ne)?new ye(function(xe,Ne){for(var Ae=ne.length,Re=0;Re<Ae;Re++)ye.resolve(ne[Re]).then(xe,Ne)}):new ye(function(xe,Ne){return Ne(new TypeError("You must pass an array to race."))})},Z.resolve=R,Z.reject=function(ne){var ye=new this(j);return O(ye,ne),ye},Z._setScheduler=function(ne){m=ne},Z._setAsap=function(ne){g=ne},Z._asap=g,Z.polyfill=function(){var ne=void 0;if(l!==void 0)ne=l;else if(typeof self<"u")ne=self;else try{ne=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ye=ne.Promise;if(ye){var xe=null;try{xe=Object.prototype.toString.call(ye.resolve())}catch{}if(xe==="[object Promise]"&&!ye.cast)return}ne.Promise=Z},Z.Promise=Z},typeof s=="object"&&i!==void 0?i.exports=c():typeof t=="function"&&t.amd?t(c):u.ES6Promise=c()}).call(this,o("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(o,i,s){var a,l;a=this,l=function(u,c){"use strict";var f=5e3,d="callback";function p(m){try{delete window[m]}catch{window[m]=void 0}}function h(m){m=document.getElementById(m),m&&document.getElementsByTagName("head")[0].removeChild(m)}c.exports=function(m){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],y=m,b=g.timeout||f,x=g.jsonpCallback||d,v=void 0;return new Promise(function(w,_){var C=g.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=x+"_"+C,E=(window[C]=function(A){w({ok:!0,json:function(){return Promise.resolve(A)}}),v&&clearTimeout(v),h(S),p(C)},y+=y.indexOf("?")===-1?"?":"&",document.createElement("script"));E.setAttribute("src",""+y+x+"="+C),g.charset&&E.setAttribute("charset",g.charset),E.id=S,document.getElementsByTagName("head")[0].appendChild(E),v=setTimeout(function(){_(new Error("JSONP request to "+m+" timed out")),p(C),h(S),window[C]=function(){p(C)}},b),E.onerror=function(){_(new Error("JSONP request to "+m+" failed")),p(C),h(S),v&&clearTimeout(v)}})}},typeof t=="function"&&t.amd?t(["exports","module"],l):s!==void 0&&i!==void 0?l(0,i):(l(l={exports:{}},l),a.fetchJsonp=l.exports)},{}],249:[function(o,i,s){var a=function(l){"use strict";var u,c,f,d,p,h,m,g,y,b,x;if(!(l===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=l.document,u=function(){return l.URL||l.webkitURL||l},c=x.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in c,d=/constructor/i.test(l.HTMLElement)||l.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(v){(l.setImmediate||l.setTimeout)(function(){throw v},0)},m=4e4,g=function(v){setTimeout(function(){typeof v=="string"?u().revokeObjectURL(v):v.remove()},m)},y=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v},x=(b=function(v,w,A){A||(v=y(v));var C,S,E=this,A=v.type==="application/octet-stream",N=function(){for(var k=E,R="writestart progress write writeend".split(" "),I=void 0,L=(R=[].concat(R)).length;L--;){var j=k["on"+R[L]];if(typeof j=="function")try{j.call(k,I||k)}catch(M){h(M)}}};E.readyState=E.INIT,f?(C=u().createObjectURL(v),setTimeout(function(){var k,R;c.href=C,c.download=w,k=c,R=new MouseEvent("click"),k.dispatchEvent(R),N(),g(C),E.readyState=E.DONE})):(p||A&&d)&&l.FileReader?((S=new FileReader).onloadend=function(){var k=p?S.result:S.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(k,"_blank")||(l.location.href=k),k=void 0,E.readyState=E.DONE,N()},S.readAsDataURL(v),E.readyState=E.INIT):(C=C||u().createObjectURL(v),!A&&l.open(C,"_blank")||(l.location.href=C),E.readyState=E.DONE,N(),g(C))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(v,w,_){return w=w||v.name||"download",_||(v=y(v)),navigator.msSaveOrOpenBlob(v,w)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(v,w,_){return new b(v,w||v.name||"download",_)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=a:t!=null&&t.amd!==null&&t("FileSaver.js",function(){return a})},{}],250:[function(o,i,s){var a,l=Object.defineProperty,u=(l(s,"__esModule",{value:!0}),s),c={GIFEncoder:()=>N,applyPalette:()=>function(M,V,G="rgb565"){if(!M||!M.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(M instanceof Uint8Array||M instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<V.length)throw new Error("applyPalette() only works with 256 colors or less");let U=new Uint32Array(M.buffer),Y=U.length,X=G==="rgb444"?4096:65536,pe=new Uint8Array(Y),$=new Array(X);if(G==="rgba4444")for(let ge=0;ge<Y;ge++){var ee=U[ge],O=ee>>24&255,z=ee>>16&255,q=ee>>8&255,ee=255&ee,ae=g(ee,q,z,O),ae=ae in $?$[ae]:$[ae]=function(ne,ye,xe,Ne,Ae){let Re=0,ze=1e100;for(let Tt=0;Tt<Ae.length;Tt++){var lt,We=Ae[Tt],Bt=S(We[3]-Ne);Bt>ze||(lt=We[0],(Bt+=S(lt-ne))>ze||(lt=We[1],(Bt+=S(lt-ye))>ze||(lt=We[2],(Bt+=S(lt-xe))>ze||(ze=Bt,Re=Tt))))}return Re}(ee,q,z,O,V);pe[ge]=ae}else{let ge=G==="rgb444"?y:m;for(let ne=0;ne<Y;ne++){var ie=U[ne],Q=ie>>16&255,le=ie>>8&255,ie=255&ie,Z=ge(ie,le,Q),Z=Z in $?$[Z]:$[Z]=function(ye,xe,Ne,Ae){let Re=0,ze=1e100;for(let Tt=0;Tt<Ae.length;Tt++){var lt,We=Ae[Tt],Bt=S(We[0]-ye);Bt>ze||(lt=We[1],(Bt+=S(lt-xe))>ze||(lt=We[2],(Bt+=S(lt-Ne))>ze||(ze=Bt,Re=Tt)))}return Re}(ie,le,Q,V);pe[ne]=Z}}return pe},default:()=>j,nearestColor:()=>function(M,V,G=_){return M[E(M,V,G)]},nearestColorIndex:()=>E,nearestColorIndexWithDistance:()=>A,prequantize:()=>function(M,{roundRGB:V=5,roundAlpha:G=10,oneBitAlpha:U=null}={}){let Y=new Uint32Array(M.buffer);for(let z=0;z<Y.length;z++){var O=Y[z];let q=O>>24&255;var X,pe=O>>16&255,$=O>>8&255,O=255&O;q=C(q,G),U&&(X=typeof U=="number"?U:127,q=q<=X?0:255),O=C(O,V),$=C($,V),pe=C(pe,V),Y[z]=q<<24|pe<<16|$<<8|O<<0}},quantize:()=>function(M,V,G={}){var{format:U="rgb565",clearAlpha:Y=!0,clearAlphaColor:X=0,clearAlphaThreshold:pe=0,oneBitAlpha:$=!1}=G;if(!M||!M.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(M instanceof Uint8Array||M instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");M=new Uint32Array(M.buffer);let O=G.useSqrt!==!1,z=U==="rgba4444",q=function(At,Mt){let Ot=Mt==="rgb444"?4096:65536,Le=new Array(Ot),ut=At.length;if(Mt==="rgba4444")for(let Mr=0;Mr<ut;++Mr){var oe=At[Mr],Ge=oe>>24&255,fe=oe>>16&255,me=oe>>8&255,oe=255&oe,be=g(oe,me,fe,Ge);let ur=be in Le?Le[be]:Le[be]=w();ur.rc+=oe,ur.gc+=me,ur.bc+=fe,ur.ac+=Ge,ur.cnt++}else if(Mt==="rgb444")for(let Mr=0;Mr<ut;++Mr){var Qe=At[Mr],Fe=Qe>>16&255,Ve=Qe>>8&255,Qe=255&Qe,_t=y(Qe,Ve,Fe);let ur=_t in Le?Le[_t]:Le[_t]=w();ur.rc+=Qe,ur.gc+=Ve,ur.bc+=Fe,ur.cnt++}else for(let Mr=0;Mr<ut;++Mr){var Ut=At[Mr],Nt=Ut>>16&255,Ft=Ut>>8&255,Ut=255&Ut,en=m(Ut,Ft,Nt);let ur=en in Le?Le[en]:Le[en]=w();ur.rc+=Ut,ur.gc+=Ft,ur.bc+=Nt,ur.cnt++}return Le}(M,U),ee=q.length,ae=ee-1,Q=new Uint32Array(ee+1);for(var le=0,ie=0;ie<ee;++ie){let At=q[ie];At!=null&&(We=1/At.cnt,z&&(At.ac*=We),At.rc*=We,At.gc*=We,At.bc*=We,q[le++]=At)}x(V)/le<.022&&(O=!1);for(var Z,ge,ne,ie=0;ie<le-1;++ie)q[ie].fw=ie+1,q[ie+1].bk=ie,O&&(q[ie].cnt=Math.sqrt(q[ie].cnt));for(O&&(q[ie].cnt=Math.sqrt(q[ie].cnt)),ie=0;ie<le;++ie){v(q,ie,!1);var ye=q[ie].err;for(ge=++Q[0];1<ge&&(ne=ge>>1,!(q[Z=Q[ne]].err<=ye));ge=ne)Q[ge]=Z;Q[ge]=ie}var xe,Ne=le-V;for(ie=0;ie<Ne;){for(;;){var Ae=Q[1];if((xe=q[Ae]).tm>=xe.mtm&&q[xe.nn].mtm<=xe.tm)break;for(xe.mtm==ae?Ae=Q[1]=Q[Q[0]--]:(v(q,Ae,!1),xe.tm=ie),ye=q[Ae].err,ge=1;(ne=ge+ge)<=Q[0]&&(ne<Q[0]&&q[Q[ne]].err>q[Q[ne+1]].err&&ne++,!(ye<=q[Z=Q[ne]].err));ge=ne)Q[ge]=Z;Q[ge]=Ae}var Re=q[xe.nn],ze=xe.cnt,lt=Re.cnt,We=1/(ze+lt);z&&(xe.ac=We*(ze*xe.ac+lt*Re.ac)),xe.rc=We*(ze*xe.rc+lt*Re.rc),xe.gc=We*(ze*xe.gc+lt*Re.gc),xe.bc=We*(ze*xe.bc+lt*Re.bc),xe.cnt+=Re.cnt,xe.mtm=++ie,q[Re.bk].fw=Re.fw,q[Re.fw].bk=Re.bk,Re.mtm=ae}let Bt=[];for(ie=0;;0){let At=b(Math.round(q[ie].rc),0,255),Mt=b(Math.round(q[ie].gc),0,255),Ot=b(Math.round(q[ie].bc),0,255),Le=255;z&&(Le=b(Math.round(q[ie].ac),0,255),$&&(Tt=typeof $=="number"?$:127,Le=Le<=Tt?0:255),Y&&Le<=pe&&(At=Mt=Ot=X,Le=0));var Tt=z?[At,Mt,Ot,Le]:[At,Mt,Ot];if(function(ut,Ge){for(let oe=0;oe<ut.length;oe++){var me=ut[oe],fe=me[0]===Ge[0]&&me[1]===Ge[1]&&me[2]===Ge[2],me=!(4<=me.length&&4<=Ge.length)||me[3]===Ge[3];if(fe&&me)return!0}return!1}(Bt,Tt)||Bt.push(Tt),(ie=q[ie].fw)==0)break}return Bt},snapColorsToPalette:()=>function(M,V,G=5){if(M.length&&V.length){var U=M.map(O=>O.slice(0,3)),Y=G*G,X=M[0].length;for(let O=0;O<V.length;O++){let z=V[O];z=z.length<X?[z[0],z[1],z[2],255]:z.length>X?z.slice(0,3):z.slice();var $=A(U,z.slice(0,3),_),pe=$[0],$=$[1];0<$&&$<=Y&&(M[pe]=z)}}}};for(a in c)l(u,a,{get:c[a],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function d(M=256){let V=0,G=new Uint8Array(M);return{get buffer(){return G.buffer},reset(){V=0},bytesView(){return G.subarray(0,V)},bytes(){return G.slice(0,V)},writeByte(Y){U(V+1),G[V]=Y,V++},writeBytes(Y,X=0,pe=Y.length){U(V+pe);for(let $=0;$<pe;$++)G[V++]=Y[$+X]},writeBytesView(Y,X=0,pe=Y.byteLength){U(V+pe),G.set(Y.subarray(X,X+pe),V),V+=pe}};function U(Y){var X=G.length;if(!(Y<=X)){Y=Math.max(Y,X*(X<1048576?2:1.125)>>>0),X!=0&&(Y=Math.max(Y,256));let pe=G;G=new Uint8Array(Y),0<V&&G.set(pe.subarray(0,V),0)}}}var p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],h=function(M,V,G,z,Y=d(512),X=new Uint8Array(256),pe=new Int32Array(5003),$=new Int32Array(5003)){var O=pe.length,z=Math.max(2,z);X.fill(0),$.fill(0),pe.fill(-1);let q=0,ee=0;var ae=z+1;let Q=ae,le=!1,ie=Q,Z=(1<<ie)-1;var ge=1<<ae-1;let ne=1+ge,ye=2+ge,xe=0,Ne=G[0],Ae=0;for(let Tt=O;Tt<65536;Tt*=2)++Ae;Ae=8-Ae,Y.writeByte(z),Bt(ge);var Re=G.length;for(let Tt=1;Tt<Re;Tt++)e:{var ze=G[Tt],lt=(ze<<12)+Ne;let At=ze<<Ae^Ne;if(pe[At]===lt)Ne=$[At];else{for(var We=At===0?1:O-At;0<=pe[At];)if((At-=We)<0&&(At+=O),pe[At]===lt){Ne=$[At];break e}Bt(Ne),Ne=ze,ye<4096?($[At]=ye++,pe[At]=lt):(pe.fill(-1),ye=2+ge,le=!0,Bt(ge))}}return Bt(Ne),Bt(ne),Y.writeByte(0),Y.bytesView();function Bt(Tt){for(q&=p[ee],0<ee?q|=Tt<<ee:q=Tt,ee+=ie;8<=ee;)X[xe++]=255&q,254<=xe&&(Y.writeByte(xe),Y.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;if((ye>Z||le)&&(le?(ie=Q,Z=(1<<ie)-1,le=!1):(++ie,Z=ie===12?1<<ie:(1<<ie)-1)),Tt==ne){for(;0<ee;)X[xe++]=255&q,254<=xe&&(Y.writeByte(xe),Y.writeBytesView(X,0,xe),xe=0),q>>=8,ee-=8;0<xe&&(Y.writeByte(xe),Y.writeBytesView(X,0,xe),xe=0)}}};function m(M,V,G){return M<<8&63488|V<<2&992|G>>3}function g(M,V,G,U){return M>>4|240&V|(240&G)<<4|(240&U)<<8}function y(M,V,G){return M>>4<<8|240&V|G>>4}function b(M,V,G){return M<V?V:G<M?G:M}function x(M){return M*M}function v(M,V,G){var U=0,Y=1e100;let X=M[V];for(var pe=X.cnt,$=X.ac,O=X.rc,z=X.gc,q=X.bc,ee=X.fw;ee!=0;ee=M[ee].fw){var ae,Q=M[ee],le=Q.cnt,le=pe*le/(pe+le);Y<=le||(ae=0,G&&Y<=(ae+=le*x(Q.ac-$))||Y<=(ae+=le*x(Q.rc-O))||Y<=(ae+=le*x(Q.gc-z))||Y<=(ae+=le*x(Q.bc-q))||(Y=ae,U=ee))}X.err=Y,X.nn=U}function w(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function _(M,V){for(var G=0,U=0;U<M.length;U++){var Y=M[U]-V[U];G+=Y*Y}return G}function C(M,V){return 1<V?Math.round(M/V)*V:M}function S(M){return M*M}function E(M,V,G=_){let U=1/0,Y=-1;for(let pe=0;pe<M.length;pe++){var X=G(V,M[pe]);X<U&&(U=X,Y=pe)}return Y}function A(M,V,G=_){let U=1/0,Y=-1;for(let pe=0;pe<M.length;pe++){var X=G(V,M[pe]);X<U&&(U=X,Y=pe)}return[Y,U]}function N(M={}){let{initialCapacity:V=4096,auto:G=!0}=M,U=d(V),Y=new Uint8Array(256),X=new Int32Array(5003),pe=new Int32Array(5003),$=!1;return{reset(){U.reset(),$=!1},finish(){U.writeByte(f.trailer)},bytes(){return U.bytes()},bytesView(){return U.bytesView()},get buffer(){return U.buffer},get stream(){return U},writeHeader:O,writeFrame(z,q,ee,Ne={}){var{transparent:Q=!1,transparentIndex:le=0,delay:We=0,palette:ie=null,repeat:Re=0,colorDepth:Z=8,dispose:ge=-1}=Ne;let ne=!1;if(G?$||(ne=!0,O(),$=!0):ne=!!Ne.first,q=Math.max(0,Math.floor(q)),ee=Math.max(0,Math.floor(ee)),ne){if(!ie)throw new Error("First frame must include a { palette } option");var[Ne,ze,xe,lt,Ae=8]=[U,q,ee,ie,Z];lt=L(lt.length)-1,Ae=128|Ae-1<<4|lt,R(Ne,ze),R(Ne,xe),Ne.writeBytes([Ae,0,0]),k(U,ie),0<=Re&&(lt=U,ze=Re,lt.writeByte(33),lt.writeByte(255),lt.writeByte(11),I(lt,"NETSCAPE2.0"),lt.writeByte(3),lt.writeByte(1),R(lt,ze),lt.writeByte(0))}var ye,xe=Math.round(We/10),Ne=U,Ae=ge,Re=xe,ze=Q,lt=le,We=(Ne.writeByte(33),Ne.writeByte(249),Ne.writeByte(4),lt<0&&(lt=0,ze=!1),ze=ze?(ye=1,2):ye=0,0<=Ae&&(ze=7&Ae),ze<<=2,Ne.writeByte(0|ze|ye),R(Ne,Re),Ne.writeByte(lt||0),Ne.writeByte(0),!!ie&&!ne);ge=U,Q=q,le=ee,ye=We?ie:null,ge.writeByte(44),R(ge,0),R(ge,0),R(ge,Q),R(ge,le),ye?(Q=L(ye.length)-1,ge.writeByte(128|Q)):ge.writeByte(0),We&&k(U,ie),[Re,Ne,le,Q,ge=8,We,ie,z]=[U,z,q,ee,Z,Y,X,pe],h(le,Q,Ne,ge,Re,We,ie,z)}};function O(){I(U,"GIF89a")}}function k(M,V){var G=1<<L(V.length);for(let U=0;U<G;U++){let Y=[0,0,0];U<V.length&&(Y=V[U]),M.writeByte(Y[0]),M.writeByte(Y[1]),M.writeByte(Y[2])}}function R(M,V){M.writeByte(255&V),M.writeByte(V>>8&255)}function I(M,V){for(var G=0;G<V.length;G++)M.writeByte(V.charCodeAt(G))}function L(M){return Math.max(Math.ceil(Math.log2(M)),1)}var j=N},{}],251:[function(o,i,s){s.read=function(a,l,u,c,v){var d,p,h=8*v-c-1,m=(1<<h)-1,g=m>>1,y=-7,b=u?v-1:0,x=u?-1:1,v=a[l+b];for(b+=x,d=v&(1<<-y)-1,v>>=-y,y+=h;0<y;d=256*d+a[l+b],b+=x,y-=8);for(p=d&(1<<-y)-1,d>>=-y,y+=c;0<y;p=256*p+a[l+b],b+=x,y-=8);if(d===0)d=1-g;else{if(d===m)return p?NaN:1/0*(v?-1:1);p+=Math.pow(2,c),d-=g}return(v?-1:1)*p*Math.pow(2,d-c)},s.write=function(a,l,u,c,f,w){var p,h,m=8*w-f-1,g=(1<<m)-1,y=g>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:w-1,v=c?1:-1,w=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(h=isNaN(l)?1:0,p=g):(p=Math.floor(Math.log(l)/Math.LN2),l*(c=Math.pow(2,-p))<1&&(p--,c*=2),2<=(l+=1<=p+y?b/c:b*Math.pow(2,1-y))*c&&(p++,c/=2),g<=p+y?(h=0,p=g):1<=p+y?(h=(l*c-1)*Math.pow(2,f),p+=y):(h=l*Math.pow(2,y-1)*Math.pow(2,f),p=0));8<=f;a[u+x]=255&h,x+=v,h/=256,f-=8);for(p=p<<f|h,m+=f;0<m;a[u+x]=255&p,x+=v,p/=256,m-=8);a[u+x-v]|=128*w}},{}],252:[function(o,i,s){"use strict";var a;function l(fe,me){return fe.b===me.b&&fe.a===me.a}function u(fe,me){return fe.b<me.b||fe.b===me.b&&fe.a<=me.a}function c(fe,me,oe){var be=me.b-fe.b,Fe=oe.b-me.b;return 0<be+Fe?be<Fe?me.a-fe.a+be/(be+Fe)*(fe.a-oe.a):me.a-oe.a+Fe/(be+Fe)*(oe.a-fe.a):0}function f(fe,me,oe){var be=me.b-fe.b,Fe=oe.b-me.b;return 0<be+Fe?(me.a-oe.a)*be+(me.a-fe.a)*Fe:0}function d(fe,me){return fe.a<me.a||fe.a===me.a&&fe.b<=me.b}function p(fe,me,oe){var be=me.a-fe.a,Fe=oe.a-me.a;return 0<be+Fe?be<Fe?me.b-fe.b+be/(be+Fe)*(fe.b-oe.b):me.b-oe.b+Fe/(be+Fe)*(oe.b-fe.b):0}function h(fe,me,oe){var be=me.a-fe.a,Fe=oe.a-me.a;return 0<be+Fe?(me.b-oe.b)*be+(me.b-fe.b)*Fe:0}function m(fe,me,oe,be){return(fe=fe<0?0:fe)<=(oe=oe<0?0:oe)?oe===0?(me+be)/2:me+fe/(fe+oe)*(be-me):be+oe/(fe+oe)*(me-be)}function g(fe){var me=w(fe.b);return C(me,fe.c),C(me.b,fe.c),S(me,fe.a),me}function y(fe,me){var oe=!1,be=!1;fe!==me&&(me.a!==fe.a&&(be=!0,A(me.a,fe.a)),me.d!==fe.d&&(oe=!0,N(me.d,fe.d)),_(me,fe),be||(C(me,fe.a),fe.a.c=fe),oe||(S(me,fe.d),fe.d.a=fe))}function b(fe){var me=fe.b,oe=!1;fe.d!==fe.b.d&&(oe=!0,N(fe.d,fe.b.d)),fe.c===fe?A(fe.a,null):(fe.b.d.a=fe.b.e,fe.a.c=fe.c,_(fe,fe.b.e),oe||S(fe,fe.d)),me.c===me?(A(me.a,null),N(me.d,null)):(fe.d.a=me.b.e,me.a.c=me.c,_(me,me.b.e)),E(fe)}function x(fe){var me=w(fe),oe=me.b;return _(me,fe.e),me.a=fe.b.a,C(oe,me.a),me.d=oe.d=fe.d,me=me.b,_(fe.b,fe.b.b.e),_(fe.b,me),fe.b.a=me.a,me.b.a.c=me.b,me.b.d=fe.b.d,me.f=fe.f,me.b.f=fe.b.f,me}function v(fe,me){var oe=!1,be=w(fe),Fe=be.b;return me.d!==fe.d&&(oe=!0,N(me.d,fe.d)),_(be,fe.e),_(Fe,me),be.a=fe.b.a,Fe.a=me.a,be.d=Fe.d=fe.d,fe.d.a=Fe,oe||S(be,fe.d),be}function w(fe){var me=new xe,oe=new xe,be=fe.b.h;return(((oe.h=be).b.h=me).h=fe).b.h=oe,me.b=oe,((me.c=me).e=oe).b=me,(oe.c=oe).e=me}function _(fe,me){var oe=fe.c,be=me.c;oe.b.e=me,(be.b.e=fe).c=be,me.c=oe}function C(fe,me){var oe=me.f,be=new Ae(me,oe);for(oe.e=be,oe=(me.f=be).c=fe;oe.a=be,(oe=oe.c)!==fe;);}function S(fe,me){var oe=me.d,be=new ye(me,oe);for(oe.b=be,(me.d=be).a=fe,be.c=me.c,oe=fe;oe.d=be,(oe=oe.e)!==fe;);}function E(fe){var me=fe.h;fe=fe.b.h,(me.b.h=fe).b.h=me}function A(fe,me){for(var oe=fe.c,be=oe;be.a=me,(be=be.c)!==oe;);oe=fe.f,((be=fe.e).f=oe).e=be}function N(fe,me){for(var oe=fe.a,be=oe;be.d=me,(be=be.e)!==oe;);oe=fe.d,((be=fe.b).d=oe).b=be}function k(fe){var me=0;return Math.abs(fe[1])>Math.abs(fe[0])&&(me=1),me=Math.abs(fe[2])>Math.abs(fe[me])?2:me}function R(fe,me){fe.f+=me.f,fe.b.f+=me.b.f}function I(fe,me,oe){return fe=fe.a,me=me.a,oe=oe.a,me.b.a===fe?oe.b.a===fe?u(me.a,oe.a)?f(oe.b.a,me.a,oe.a)<=0:0<=f(me.b.a,oe.a,me.a):f(oe.b.a,fe,oe.a)<=0:oe.b.a===fe?0<=f(me.b.a,fe,me.a):(me=c(me.b.a,fe,me.a),(fe=c(oe.b.a,fe,oe.a))<=me)}function L(fe){fe.a.i=null;var me=fe.e;me.a.c=me.c,me.c.a=me.a,fe.e=null}function j(fe,me){b(fe.a),fe.c=!1,(fe.a=me).i=fe}function M(fe){for(var me=fe.a.a;(fe=Ge(fe)).a.a===me;);return fe.c&&(j(fe,me=v(ut(fe).a.b,fe.a.e)),fe=Ge(fe)),fe}function V(fe,me,oe){var be=new Le;return be.a=oe,be.e=le(fe.f,me.e,be),oe.i=be}function G(fe,me){switch(fe.s){case 100130:return(1&me)!=0;case 100131:return me!==0;case 100132:return 0<me;case 100133:return me<0;case 100134:return 2<=me||me<=-2}return!1}function U(fe){var me=fe.a,oe=me.d;oe.c=fe.d,oe.a=me,L(fe)}function Y(fe,me,oe){for(me=(fe=me).a;fe!==oe;){fe.c=!1;var be=ut(fe),Fe=be.a;if(Fe.a!==me.a){if(!be.c){U(fe);break}j(be,Fe=v(me.c.b,Fe.b))}me.c!==Fe&&(y(Fe.b.e,Fe),y(me,Fe)),U(fe),me=be.a,fe=be}return me}function X(fe,me,oe,be,Fe,Ve){for(var Qe=!0;V(fe,me,oe.b),(oe=oe.c)!==be;);for(Fe===null&&(Fe=ut(me).a.b.c);(oe=(be=ut(me)).a.b).a===Fe.a;)oe.c!==Fe&&(y(oe.b.e,oe),y(Fe.b.e,oe)),be.f=me.f-oe.f,be.d=G(fe,be.f),me.b=!0,!Qe&&z(fe,me)&&(R(oe,Fe),L(me),b(Fe)),Qe=!1,me=be,Fe=oe;me.b=!0,Ve&&ee(fe,me)}function pe(fe,me,oe,be,Fe){var Ve=[me.g[0],me.g[1],me.g[2]];me.d=null,me.d=fe.o&&fe.o(Ve,oe,be,fe.c)||null,me.d===null&&(Fe?fe.n||(ne(fe,100156),fe.n=!0):me.d=oe[0])}function $(fe,me,oe){var be=[null,null,null,null];be[0]=me.a.d,be[1]=oe.a.d,pe(fe,me.a,be,[.5,.5,0,0],!1),y(me,oe)}function O(fe,me,oe,be,Fe){var Ve=Math.abs(me.b-fe.b)+Math.abs(me.a-fe.a),Qe=Math.abs(oe.b-fe.b)+Math.abs(oe.a-fe.a),_t=Fe+1;be[Fe]=.5*Qe/(Ve+Qe),be[_t]=.5*Ve/(Ve+Qe),fe.g[0]+=be[Fe]*me.g[0]+be[_t]*oe.g[0],fe.g[1]+=be[Fe]*me.g[1]+be[_t]*oe.g[1],fe.g[2]+=be[Fe]*me.g[2]+be[_t]*oe.g[2]}function z(fe,me){var oe=ut(me),be=me.a,Fe=oe.a;if(u(be.a,Fe.a)){if(0<f(Fe.b.a,be.a,Fe.a))return;if(l(be.a,Fe.a)){if(be.a!==Fe.a){var oe=fe.e,Ve=be.a.h;if(0<=Ve){var Qe=(oe=oe.b).d,_t=oe.e,Nt=oe.c,Ft=Nt[Ve];Qe[Ft]=Qe[oe.a],(Nt[Qe[Ft]]=Ft)<=--oe.a&&(Ft<=1||u(_t[Qe[Ft>>1]],_t[Qe[Ft]])?Mt:Ot)(oe,Ft),_t[Ve]=null,Nt[Ve]=oe.b,oe.b=Ve}else for(oe.c[-(Ve+1)]=null;0<oe.a&&oe.c[oe.d[oe.a-1]]===null;)--oe.a;$(fe,Fe.b.e,be)}}else x(Fe.b),y(be,Fe.b.e),me.b=oe.b=!0}else{if(f(be.b.a,Fe.a,be.a)<0)return;Ge(me).b=me.b=!0,x(be.b),y(Fe.b.e,be)}return 1}function q(fe,me){var oe=ut(me),be=me.a,Fe=oe.a,Ve=be.a,Qe=Fe.a,_t=be.b.a,Nt=Fe.b.a,Ft=new Ae;if(f(_t,fe.a,Ve),f(Nt,fe.a,Qe),!(Ve===Qe||Math.min(Ve.a,_t.a)>Math.max(Qe.a,Nt.a))){if(u(Ve,Qe)){if(0<f(Nt,Ve,Qe))return}else if(f(_t,Qe,Ve)<0)return;var Ut,en,Mr=_t,ur=Ve,Yr=Nt,Fr=Qe;if(u(Mr,ur)||(Ut=Mr,Mr=ur,ur=Ut),u(Yr,Fr)||(Ut=Yr,Yr=Fr,Fr=Ut),u(Mr,Yr)||(Ut=Mr,Mr=Yr,Yr=Ut,Ut=ur,ur=Fr,Fr=Ut),u(Yr,ur)?u(ur,Fr)?((Ut=c(Mr,Yr,ur))+(en=c(Yr,ur,Fr))<0&&(Ut=-Ut,en=-en),Ft.b=m(Ut,Yr.b,en,ur.b)):((Ut=f(Mr,Yr,ur))+(en=-f(Mr,Fr,ur))<0&&(Ut=-Ut,en=-en),Ft.b=m(Ut,Yr.b,en,Fr.b)):Ft.b=(Yr.b+ur.b)/2,d(Mr,ur)||(Ut=Mr,Mr=ur,ur=Ut),d(Yr,Fr)||(Ut=Yr,Yr=Fr,Fr=Ut),d(Mr,Yr)||(Ut=Mr,Mr=Yr,Yr=Ut,Ut=ur,ur=Fr,Fr=Ut),d(Yr,ur)?d(ur,Fr)?((Ut=p(Mr,Yr,ur))+(en=p(Yr,ur,Fr))<0&&(Ut=-Ut,en=-en),Ft.a=m(Ut,Yr.a,en,ur.a)):((Ut=h(Mr,Yr,ur))+(en=-h(Mr,Fr,ur))<0&&(Ut=-Ut,en=-en),Ft.a=m(Ut,Yr.a,en,Fr.a)):Ft.a=(Yr.a+ur.a)/2,u(Ft,fe.a)&&(Ft.b=fe.a.b,Ft.a=fe.a.a),Mr=u(Ve,Qe)?Ve:Qe,u(Mr,Ft)&&(Ft.b=Mr.b,Ft.a=Mr.a),l(Ft,Ve)||l(Ft,Qe))return z(fe,me),0;if(!l(_t,fe.a)&&0<=f(_t,fe.a,Ft)||!l(Nt,fe.a)&&f(Nt,fe.a,Ft)<=0){if(Nt===fe.a)x(be.b),y(Fe.b,be),be=ut(me=M(me)).a,Y(fe,ut(me),oe),X(fe,me,be.b.e,be,be,!0);else{if(_t!==fe.a)return 0<=f(_t,fe.a,Ft)&&(Ge(me).b=me.b=!0,x(be.b),be.a.b=fe.a.b,be.a.a=fe.a.a),void(f(Nt,fe.a,Ft)<=0&&(me.b=oe.b=!0,x(Fe.b),Fe.a.b=fe.a.b,Fe.a.a=fe.a.a));for(x(Fe.b),y(be.e,Fe.b.e),Qe=(Ve=oe=me).a.b.a;(Ve=Ge(Ve)).a.b.a===Qe;);Ve=ut(me=Ve).a.b.c,oe.a=Fe.b.e,X(fe,me,(Fe=Y(fe,oe,null)).c,be.b.c,Ve,!0)}return 1}x(be.b),x(Fe.b),y(Fe.b.e,be),be.a.b=Ft.b,be.a.a=Ft.a,be.a.h=ze(fe.e,be.a),be=be.a,Fe=[0,0,0,0],Ft=[Ve.d,_t.d,Qe.d,Nt.d],be.g[0]=be.g[1]=be.g[2]=0,O(be,Ve,_t,Fe,0),O(be,Qe,Nt,Fe,2),pe(fe,be,Ft,Fe,!0),Ge(me).b=me.b=oe.b=!0}}function ee(fe,me){for(var oe=ut(me);;){for(;oe.b;)oe=ut(me=oe);if(!me.b&&((me=Ge(oe=me))===null||!me.b))break;me.b=!1;var be=me.a,Fe=oe.a;if(Ve=be.b.a!==Fe.b.a)e:{var Ve,Qe=ut(Ve=me),_t=Ve.a,Nt=Qe.a,Ft=void 0;if(u(_t.b.a,Nt.b.a)){if(f(_t.b.a,Nt.b.a,_t.a)<0){Ve=!1;break e}Ge(Ve).b=Ve.b=!0,Ft=x(_t),y(Nt.b,Ft),Ft.d.c=Ve.d}else{if(0<f(Nt.b.a,_t.b.a,Nt.a)){Ve=!1;break e}Ve.b=Qe.b=!0,Ft=x(Nt),y(_t.e,Nt.b),Ft.b.d.c=Ve.d}Ve=!0}if(Ve&&(oe.c?(L(oe),b(Fe),Fe=(oe=ut(me)).a):me.c&&(L(me),b(be),be=(me=Ge(oe)).a)),be.a!==Fe.a){if(be.b.a===Fe.b.a||me.c||oe.c||be.b.a!==fe.a&&Fe.b.a!==fe.a)z(fe,me);else if(q(fe,me))break}be.a===Fe.a&&be.b.a===Fe.b.a&&(R(Fe,be),L(me),b(be),me=Ge(oe))}}function ae(fe,me){var oe=new Le,be=g(fe.b);be.a.b=4e150,be.a.a=me,be.b.a.b=-4e150,be.b.a.a=me,fe.a=be.b.a,oe.a=be,oe.f=0,oe.d=!1,oe.c=!1,oe.h=!0,oe.b=!1,be=le(be=fe.f,be.a,oe),oe.e=be}function Q(fe){this.a=new ie,this.b=fe,this.c=I}function le(fe,me,oe){for(;(me=me.c).b!==null&&!fe.c(fe.b,me.b,oe););return fe=new ie(oe,me.a,me),me.a.c=fe,me.a=fe}function ie(fe,me,oe){this.b=fe||null,this.a=me||this,this.c=oe||this}function Z(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ge(fe,me){if(fe.d!==me)for(;fe.d!==me;)if(fe.d<me)switch(fe.d){case 0:ne(fe,100151),fe.u(null);break;case 1:ne(fe,100152),fe.t()}else switch(fe.d){case 2:ne(fe,100154),fe.v();break;case 1:ne(fe,100153),fe.w()}}function ne(fe,me){fe.p&&fe.p(me,fe.c)}function ye(fe,me){this.b=fe||this,this.d=me||this,this.a=null,this.c=!1}function xe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ne(){this.c=new Ae,this.a=new ye,this.b=new xe,this.d=new xe,this.b.b=this.d,this.d.b=this.b}function Ae(fe,me){this.e=fe||this,this.f=me||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Re(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new We}function ze(fe,me){var oe,be,Fe;return fe.e?(2*(be=++(oe=fe.b).a)>oe.f&&(oe.f*=2,oe.c=Bt(oe.c,oe.f+1)),oe.b===0?Fe=be:(Fe=oe.b,oe.b=oe.c[oe.b]),oe.e[Fe]=me,oe.c[Fe]=be,oe.d[be]=Fe,oe.h&&Ot(oe,be),Fe):(oe=fe.a++,fe.c[oe]=me,-(oe+1))}function lt(fe){if(fe.a===0)return At(fe.b);var me=fe.c[fe.d[fe.a-1]];if(fe.b.a!==0&&u(Tt(fe.b),me))return At(fe.b);for(;--fe.a,0<fe.a&&fe.c[fe.d[fe.a-1]]===null;);return me}function We(){this.d=Bt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Bt(fe,me){for(var oe=Array(me),be=0;be<fe.length;be++)oe[be]=fe[be];for(;be<me;be++)oe[be]=0;return oe}function Tt(fe){return fe.e[fe.d[1]]}function At(fe){var me=fe.d,oe=fe.e,be=fe.c,Fe=me[1],Ve=oe[Fe];return 0<fe.a&&(me[1]=me[fe.a],be[me[1]]=1,oe[Fe]=null,be[Fe]=fe.b,fe.b=Fe,0<--fe.a&&Mt(fe,1)),Ve}function Mt(fe,me){for(var oe=fe.d,be=fe.e,Fe=fe.c,Ve=me,Qe=oe[Ve];;){var _t=Ve<<1,Nt=(_t<fe.a&&u(be[oe[_t+1]],be[oe[_t]])&&(_t+=1),oe[_t]);if(_t>fe.a||u(be[Qe],be[Nt])){Fe[oe[Ve]=Qe]=Ve;break}Fe[oe[Ve]=Nt]=Ve,Ve=_t}}function Ot(fe,me){for(var oe=fe.d,be=fe.e,Fe=fe.c,Ve=me,Qe=oe[Ve];;){var _t=Ve>>1,Nt=oe[_t];if(_t==0||u(be[Nt],be[Qe])){Fe[oe[Ve]=Qe]=Ve;break}Fe[oe[Ve]=Nt]=Ve,Ve=_t}}function Le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ut(fe){return fe.e.c.b}function Ge(fe){return fe.e.a.b}(a=Z.prototype).x=function(){ge(this,0)},a.B=function(fe,me){switch(fe){case 100142:return;case 100140:switch(me){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=me)}break;case 100141:return void(this.m=!!me);default:return void ne(this,100900)}ne(this,100901)},a.y=function(fe){switch(fe){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ne(this,100900)}return!1},a.A=function(fe,me,oe){this.j[0]=fe,this.j[1]=me,this.j[2]=oe},a.z=function(fe,me){var oe=me||null;switch(fe){case 100100:case 100106:this.h=oe;break;case 100104:case 100110:this.l=oe;break;case 100101:case 100107:this.k=oe;break;case 100102:case 100108:this.i=oe;break;case 100103:case 100109:this.p=oe;break;case 100105:case 100111:this.o=oe;break;case 100112:this.r=oe;break;default:ne(this,100900)}},a.C=function(fe,me){var oe=!1,be=[0,0,0];ge(this,2);for(var Fe=0;Fe<3;++Fe){var Ve=fe[Fe];Ve<-1e150&&(Ve=-1e150,oe=!0),1e150<Ve&&(Ve=1e150,oe=!0),be[Fe]=Ve}oe&&ne(this,100155),(oe=this.q)===null?y(oe=g(this.b),oe.b):(x(oe),oe=oe.e),oe.a.d=me,oe.a.g[0]=be[0],oe.a.g[1]=be[1],oe.a.g[2]=be[2],oe.f=1,oe.b.f=-1,this.q=oe},a.u=function(fe){ge(this,0),this.d=1,this.b=new Ne,this.c=fe},a.t=function(){ge(this,1),this.d=2,this.q=null},a.v=function(){ge(this,2),this.d=1},a.w=function(){ge(this,1),this.d=0;var fe,me,oe=this.j[0],be=this.j[1],Fe=this.j[2],Ve=!1,Qe=[oe,be,Fe];if(oe===0&&be===0&&Fe===0){for(var be=[-2e150,-2e150,-2e150],_t=[2e150,2e150,2e150],Fe=[],Nt=[],oe=(Ve=this.b.c).e;oe!==Ve;oe=oe.e)for(var Ft=0;Ft<3;++Ft){var Ut=oe.g[Ft];Ut<_t[Ft]&&(_t[Ft]=Ut,Nt[Ft]=oe),Ut>be[Ft]&&(be[Ft]=Ut,Fe[Ft]=oe)}if(be[1]-_t[1]>be[oe=0]-_t[0]&&(oe=1),_t[oe=be[2]-_t[2]>be[oe]-_t[oe]?2:oe]>=be[oe])Qe[0]=0,Qe[1]=0,Qe[2]=1;else{for(_t=Nt[oe],Fe=Fe[oe],Nt=[be=0,0,0],_t=[_t.g[0]-Fe.g[0],_t.g[1]-Fe.g[1],_t.g[2]-Fe.g[2]],Ft=[0,0,0],oe=Ve.e;oe!==Ve;oe=oe.e)Ft[0]=oe.g[0]-Fe.g[0],Ft[1]=oe.g[1]-Fe.g[1],Ft[2]=oe.g[2]-Fe.g[2],Nt[0]=_t[1]*Ft[2]-_t[2]*Ft[1],Nt[1]=_t[2]*Ft[0]-_t[0]*Ft[2],Nt[2]=_t[0]*Ft[1]-_t[1]*Ft[0],be<(Ut=Nt[0]*Nt[0]+Nt[1]*Nt[1]+Nt[2]*Nt[2])&&(be=Ut,Qe[0]=Nt[0],Qe[1]=Nt[1],Qe[2]=Nt[2]);be<=0&&(Qe[0]=Qe[1]=Qe[2]=0,Qe[k(_t)]=1)}Ve=!0}for(Nt=k(Qe),oe=this.b.c,be=(Nt+1)%3,Fe=(Nt+2)%3,Nt=0<Qe[Nt]?1:-1,Qe=oe.e;Qe!==oe;Qe=Qe.e)Qe.b=Qe.g[be],Qe.a=Nt*Qe.g[Fe];if(Ve){for(Qe=0,oe=(Ve=this.b.a).b;oe!==Ve;oe=oe.b)if(!((be=oe.a).f<=0))for(;Qe+=(be.a.b-be.b.a.b)*(be.a.a+be.b.a.a),(be=be.e)!==oe.a;);if(Qe<0)for(Ve=(Qe=this.b.c).e;Ve!==Qe;Ve=Ve.e)Ve.a=-Ve.a}for(this.n=!1,Qe=this.b.b,oe=Qe.h;oe!==Qe;oe=Ve)Ve=oe.h,be=oe.e,l(oe.a,oe.b.a)&&oe.e.e!==oe&&($(this,be,oe),b(oe),be=(oe=be).e),be.e===oe&&(be!==oe&&(be!==Ve&&be!==Ve.b||(Ve=Ve.h),b(be)),oe!==Ve&&oe!==Ve.b||(Ve=Ve.h),b(oe));for(this.e=Qe=new Re,Ve=this.b.c,oe=Ve.e;oe!==Ve;oe=oe.e)oe.h=ze(Qe,oe);var en=Qe;en.d=[];for(var Mr=0;Mr<en.a;Mr++)en.d[Mr]=Mr;en.d.sort(function(Fr){return function(hi,ql){return u(Fr[hi],Fr[ql])?1:-1}}(en.c)),en.e=!0;for(var ur=en.b,Yr=ur.a;1<=Yr;--Yr)Mt(ur,Yr);for(ur.h=!0,this.f=new Q(this),ae(this,-4e150),ae(this,4e150);(Qe=lt(this.e))!==null;){for(;;){e:if((oe=this.e).a===0)Ve=Tt(oe.b);else if(Ve=oe.c[oe.d[oe.a-1]],oe.b.a!==0&&u(oe=Tt(oe.b),Ve)){Ve=oe;break e}if(Ve===null||!l(Ve,Qe))break;Ve=lt(this.e),$(this,Qe.c,Ve.c)}(function Fr(hi,ql){for(var $s,Eo=(hi.a=ql).c;Eo.i===null;)if((Eo=Eo.c)===ql.c){var Eo=hi,wi=ql;(Lo=new Le).a=wi.c.b;for(var bl=(Hn=Eo.f).a;(bl=bl.a).b!==null&&!Hn.c(Hn.b,Lo,bl.b););var Hn,yl,Oa=ut(Hn=bl.b),Lo=Hn.a,bl=Oa.a;return void(f(Lo.b.a,wi,Lo.a)===0?l((Lo=Hn.a).a,wi)||l(Lo.b.a,wi)||(x(Lo.b),Hn.c&&(b(Lo.c),Hn.c=!1),y(wi.c,Lo),Fr(Eo,wi)):(yl=u(bl.b.a,Lo.b.a)?Hn:Oa,Oa=void 0,Hn.d||yl.c?(Oa=yl===Hn?v(wi.c.b,Lo.e):v(bl.b.c.b,wi.c).b,yl.c?j(yl,Oa):((Hn=V(Lo=Eo,Hn,Oa)).f=Ge(Hn).f+Hn.a.f,Hn.d=G(Lo,Hn.f)),Fr(Eo,wi)):X(Eo,Hn,wi.c,wi.c,null,!0)))}Hn=(Lo=ut(Eo=M(Eo.i))).a,(Lo=Y(hi,Lo,null)).c===Hn?(Lo=(Hn=Lo).c,bl=ut(Eo),Oa=Eo.a,yl=bl.a,$s=!1,Oa.b.a!==yl.b.a&&q(hi,Eo),l(Oa.a,hi.a)&&(y(Lo.b.e,Oa),Lo=ut(Eo=M(Eo)).a,Y(hi,ut(Eo),bl),$s=!0),l(yl.a,hi.a)&&(y(Hn,yl.b.e),Hn=Y(hi,bl,null),$s=!0),$s?X(hi,Eo,Hn.c,Lo,Lo,!0):(wi=u(yl.a,Oa.a)?yl.b.e:Oa,X(hi,Eo,wi=v(Hn.c.b,wi),wi.c,wi.c,!1),wi.b.i.c=!0,ee(hi,Eo))):X(hi,Eo,Lo.c,Hn,Hn,!0)})(this,Qe)}for(this.a=this.f.a.a.b.a.a,Qe=0;(Ve=this.f.a.a.b)!==null;)Ve.h||++Qe,L(Ve);for(this.f=null,(Qe=this.e).b=null,Qe.d=null,this.e=Qe.c=null,Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)Ve=oe.b,(oe=oe.a).e.e===oe&&(R(oe.c,oe),b(oe));if(!this.n){if(Qe=this.b,this.m)for(oe=Qe.b.h;oe!==Qe.b;oe=Ve)Ve=oe.h,oe.b.d.c!==oe.d.c?oe.f=oe.d.c?1:-1:b(oe);else for(oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,oe.c){for(oe=oe.a;u(oe.b.a,oe.a);oe=oe.c.b);for(;u(oe.a,oe.b.a);oe=oe.e);for(be=oe.c.b,Fe=void 0;oe.e!==be;)if(u(oe.b.a,be.a)){for(;be.e!==oe&&(u((me=be.e).b.a,me.a)||f(be.a,be.b.a,be.e.b.a)<=0);)be=(Fe=v(be.e,be)).b;be=be.c.b}else{for(;be.e!==oe&&(u((fe=oe.c.b).a,fe.b.a)||0<=f(oe.b.a,oe.a,oe.c.b.a));)oe=(Fe=v(oe,oe.c.b)).b;oe=oe.e}for(;be.e.e!==oe;)Fe=v(be.e,be),be=Fe.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ve=(Qe=this.b).a.b;Ve!==Qe.a;Ve=Ve.b)if(Ve.c){for(this.h&&this.h(2,this.c),oe=Ve.a;this.k&&this.k(oe.a.d,this.c),(oe=oe.e)!==Ve.a;);this.i&&this.i(this.c)}}else{for(Qe=this.b,Ve=!!this.l,oe=!1,be=-1,Fe=Qe.a.d;Fe!==Qe.a;Fe=Fe.d)if(Fe.c)for(oe||(this.h&&this.h(4,this.c),oe=!0),Nt=Fe.a;Ve&&(_t=Nt.b.d.c?0:1,be!==_t&&(be=_t,this.l&&this.l(!!be,this.c))),this.k&&this.k(Nt.a.d,this.c),(Nt=Nt.e)!==Fe.a;);oe&&this.i&&this.i(this.c)}if(this.r){for(Qe=this.b,oe=Qe.a.b;oe!==Qe.a;oe=Ve)if(Ve=oe.b,!oe.c){for(Fe=(be=oe.a).e,Nt=void 0;Fe=(Nt=Fe).e,(Nt.d=null)===Nt.b.d&&(Nt.c===Nt?A(Nt.a,null):(Nt.a.c=Nt.c,_(Nt,Nt.b.e)),(_t=Nt.b).c===_t?A(_t.a,null):(_t.a.c=_t.c,_(_t,_t.b.e)),E(Nt)),Nt!==be;);be=oe.d,((oe=oe.b).d=be).b=oe}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Z,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Z.prototype.gluDeleteTess=Z.prototype.x,Z.prototype.gluTessProperty=Z.prototype.B,Z.prototype.gluGetTessProperty=Z.prototype.y,Z.prototype.gluTessNormal=Z.prototype.A,Z.prototype.gluTessCallback=Z.prototype.z,Z.prototype.gluTessVertex=Z.prototype.C,Z.prototype.gluTessBeginPolygon=Z.prototype.u,Z.prototype.gluTessBeginContour=Z.prototype.t,Z.prototype.gluTessEndContour=Z.prototype.v,Z.prototype.gluTessEndPolygon=Z.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(o,i,s){"use strict";function a(u,c,f,d){var p=0,h=(d=d===void 0?{}:d).loop===void 0?null:d.loop,m=d.palette===void 0?null:d.palette;if(c<=0||f<=0||65535<c||65535<f)throw new Error("Width/Height invalid.");function g(S){if(S=S.length,S<2||256<S||S&S-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return S}u[p++]=71,u[p++]=73,u[p++]=70,u[p++]=56,u[p++]=57,u[p++]=97;var y=0,b=0;if(m!==null){for(var x=g(m);x>>=1;)++y;if(x=1<<y,--y,d.background!==void 0){if(x<=(b=d.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(u[p++]=255&c,u[p++]=c>>8&255,u[p++]=255&f,u[p++]=f>>8&255,u[p++]=(m!==null?128:0)|y,u[p++]=b,u[p++]=0,m!==null)for(var v=0,w=m.length;v<w;++v){var _=m[v];u[p++]=_>>16&255,u[p++]=_>>8&255,u[p++]=255&_}if(h!==null){if(h<0||65535<h)throw new Error("Loop count invalid.");u[p++]=33,u[p++]=255,u[p++]=11,u[p++]=78,u[p++]=69,u[p++]=84,u[p++]=83,u[p++]=67,u[p++]=65,u[p++]=80,u[p++]=69,u[p++]=50,u[p++]=46,u[p++]=48,u[p++]=3,u[p++]=1,u[p++]=255&h,u[p++]=h>>8&255,u[p++]=0}var C=!1;this.addFrame=function(S,E,A,N,k,R){if(C===!0&&(--p,C=!1),R=R===void 0?{}:R,S<0||E<0||65535<S||65535<E)throw new Error("x/y invalid.");if(A<=0||N<=0||65535<A||65535<N)throw new Error("Width/Height invalid.");if(k.length<A*N)throw new Error("Not enough pixels for the frame size.");var I=!0,L=R.palette;if(L==null&&(I=!1,L=m),L==null)throw new Error("Must supply either a local or global palette.");for(var M=g(L),j=0;M>>=1;)++j;var M=1<<j,V=R.delay===void 0?0:R.delay,G=R.disposal===void 0?0:R.disposal;if(G<0||3<G)throw new Error("Disposal out of range.");var U=!1,Y=0;if(R.transparent!==void 0&&R.transparent!==null&&(U=!0,(Y=R.transparent)<0||M<=Y))throw new Error("Transparent color index.");if(G===0&&!U&&V===0||(u[p++]=33,u[p++]=249,u[p++]=4,u[p++]=G<<2|(U===!0?1:0),u[p++]=255&V,u[p++]=V>>8&255,u[p++]=Y,u[p++]=0),u[p++]=44,u[p++]=255&S,u[p++]=S>>8&255,u[p++]=255&E,u[p++]=E>>8&255,u[p++]=255&A,u[p++]=A>>8&255,u[p++]=255&N,u[p++]=N>>8&255,u[p++]=I===!0?128|j-1:0,I===!0)for(var X=0,pe=L.length;X<pe;++X){var $=L[X];u[p++]=$>>16&255,u[p++]=$>>8&255,u[p++]=255&$}return p=function(O,z,q,ee){O[z++]=q;var ae=z++,Q=1<<q,le=Q-1,ie=1+Q,Z=1+ie,ge=q+1,ne=0,ye=0;function xe(At){for(;At<=ne;)O[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(O[ae]=255,ae=z++)}function Ne(At){ye|=At<<ne,ne+=ge,xe(8)}var Ae=ee[0]&le,Re={};Ne(Q);for(var ze=1,lt=ee.length;ze<lt;++ze){var We=ee[ze]&le,Bt=Ae<<8|We,Tt=Re[Bt];if(Tt===void 0){for(ye|=Ae<<ne,ne+=ge;8<=ne;)O[z++]=255&ye,ye>>=8,ne-=8,z===ae+256&&(O[ae]=255,ae=z++);Z===4096?(Ne(Q),Z=1+ie,ge=q+1,Re={}):(1<<ge<=Z&&++ge,Re[Bt]=Z++),Ae=We}else Ae=Tt}return Ne(Ae),Ne(ie),xe(1),ae+1===z?O[ae]=0:(O[ae]=z-ae-1,O[z++]=0),z}(u,p,j<2?2:j,k)},this.end=function(){return C===!1&&(u[p++]=59,C=!0),p},this.getOutputBuffer=function(){return u},this.setOutputBuffer=function(S){u=S},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(S){p=S}}function l(u,c,f,d){for(var p=u[c++],h=1<<p,m=1+h,g=1+m,y=p+1,b=(1<<y)-1,x=0,v=0,w=0,_=u[c++],C=new Int32Array(4096),S=null;;){for(;x<16&&_!==0;)v|=u[c++]<<x,x+=8,_===1?_=u[c++]:--_;if(x<y)break;var E=v&b;if(v>>=y,x-=y,E==h)g=1+m,b=(1<<(y=p+1))-1,S=null;else{if(E==m)break;for(var A=E<g?E:S,N=0,k=A;h<k;)k=C[k]>>8,++N;var R=k;if(d<w+N+(A!==E?1:0))return void console.log("Warning, gif stream longer than expected.");f[w++]=R;var I=w+=N;for(A!==E&&(f[w++]=R),k=A;N--;)k=C[k],f[--I]=255&k,k>>=8;S!==null&&g<4096&&(C[g++]=S<<8|R,b+1<=g&&y<12&&(++y,b=b<<1|1)),S=E}}w!==d&&console.log("Warning, gif stream shorter than expected.")}try{s.GifWriter=a,s.GifReader=function(u){var c=0;if(u[c++]!==71||u[c++]!==73||u[c++]!==70||u[c++]!==56||(u[c++]+1&253)!=56||u[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=u[c++]|u[c++]<<8,d=u[c++]|u[c++]<<8,p=u[c++],h=1<<1+(7&p),m=(u[c++],u[c++],null),g=null,y=(p>>7&&(m=c,c+=3*(g=h)),!0),b=[],x=0,v=null,w=0,_=null;for(this.width=f,this.height=d;y&&c<u.length;)switch(u[c++]){case 33:switch(u[c++]){case 255:if(u[c]!==11||u[c+1]==78&&u[c+2]==69&&u[c+3]==84&&u[c+4]==83&&u[c+5]==67&&u[c+6]==65&&u[c+7]==80&&u[c+8]==69&&u[c+9]==50&&u[c+10]==46&&u[c+11]==48&&u[c+12]==3&&u[c+13]==1&&u[c+16]==0)c+=14,_=u[c++]|u[c++]<<8,c++;else for(c+=12;;){if(!(0<=(S=u[c++])))throw Error("Invalid block size");if(S===0)break;c+=S}break;case 249:if(u[c++]!==4||u[c+4]!==0)throw new Error("Invalid graphics extension block.");var C=u[c++],x=u[c++]|u[c++]<<8,v=u[c++];!(1&C)&&(v=null),w=C>>2&7,c++;break;case 254:for(;;){if(!(0<=(S=u[c++])))throw Error("Invalid block size");if(S===0)break;c+=S}break;default:throw new Error("Unknown graphic control label: 0x"+u[c-1].toString(16))}break;case 44:var S,E=u[c++]|u[c++]<<8,A=u[c++]|u[c++]<<8,N=u[c++]|u[c++]<<8,k=u[c++]|u[c++]<<8,V=u[c++],R=V>>6&1,I=1<<1+(7&V),L=m,j=g,M=!1,V=(V>>7&&(M=!0,L=c,c+=3*(j=I)),c);for(c++;;){if(!(0<=(S=u[c++])))throw Error("Invalid block size");if(S===0)break;c+=S}b.push({x:E,y:A,width:N,height:k,has_local_palette:M,palette_offset:L,palette_size:j,data_offset:V,data_length:c-V,transparent_index:v,interlaced:!!R,delay:x,disposal:w});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+u[c-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return _},this.frameInfo=function(G){if(G<0||G>=b.length)throw new Error("Frame index out of range.");return b[G]},this.decodeAndBlitFrameBGRA=function(G,U){for(var G=this.frameInfo(G),Y=G.width*G.height,X=new Uint8Array(Y),pe=(l(u,G.data_offset,X,Y),G.palette_offset),$=G.transparent_index,O=($===null&&($=256),G.width),z=f-O,q=O,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),Z=0,ge=X.length;Z<ge;++Z){var ne,ye,xe=X[Z];q===0&&(q=O,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(O+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[pe+3*xe],ye=u[pe+3*xe+1],xe=u[pe+3*xe+2],U[Q++]=xe,U[Q++]=ye,U[Q++]=ne,U[Q++]=255),--q}},this.decodeAndBlitFrameRGBA=function(G,U){for(var G=this.frameInfo(G),Y=G.width*G.height,X=new Uint8Array(Y),pe=(l(u,G.data_offset,X,Y),G.palette_offset),$=G.transparent_index,O=($===null&&($=256),G.width),z=f-O,q=O,ee=4*(G.y*f+G.x),ae=4*((G.y+G.height)*f+G.x),Q=ee,le=4*z,ie=(G.interlaced===!0&&(le+=4*f*7),8),Z=0,ge=X.length;Z<ge;++Z){var ne,ye,xe=X[Z];q===0&&(q=O,ae<=(Q+=le)&&(le=4*z+4*f*(ie-1),Q=ee+(O+z)*(ie<<1),ie>>=1)),xe===$?Q+=4:(ne=u[pe+3*xe],ye=u[pe+3*xe+1],xe=u[pe+3*xe+2],U[Q++]=ne,U[Q++]=ye,U[Q++]=xe,U[Q++]=255),--q}}}}catch{}},{}],254:[function(o,i,s){(function(a){var l,u;l=this,u=function(c){"use strict";function f(W){if(this==null)throw TypeError();var F,P=String(this),B=P.length,W=W?Number(W):0;if(!((W=W!=W?0:W)<0||B<=W))return 55296<=(F=P.charCodeAt(W))&&F<=56319&&W+1<B&&56320<=(B=P.charCodeAt(W+1))&&B<=57343?1024*(F-55296)+B-56320+65536:F}String.prototype.codePointAt||((d=function(){try{var T={},F=Object.defineProperty,P=F(T,T,T)&&F}catch{}return P}())?d(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var d,p=0,h=-3;function m(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(T,F){this.source=T,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=F,this.destLen=0,this.ltree=new m,this.dtree=new m}var y=new m,b=new m,x=new Uint8Array(30),v=new Uint16Array(30),w=new Uint8Array(30),_=new Uint16Array(30),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new m,E=new Uint8Array(320);function A(T,F,P,B){for(var W,K=0;K<P;++K)T[K]=0;for(K=0;K<30-P;++K)T[K+P]=K/P|0;for(W=B,K=0;K<30;++K)F[K]=W,W+=1<<T[K]}var N=new Uint16Array(16);function k(T,F,P,B){for(var W,K=0;K<16;++K)T.table[K]=0;for(K=0;K<B;++K)T.table[F[P+K]]++;for(K=W=T.table[0]=0;K<16;++K)N[K]=W,W+=T.table[K];for(K=0;K<B;++K)F[P+K]&&(T.trans[N[F[P+K]]++]=K)}function R(T,F,P){if(!F)return P;for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;var B=T.tag&65535>>>16-F;return T.tag>>>=F,T.bitcount-=F,B+P}function I(T,F){for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;for(var P=0,B=0,W=0,K=T.tag;B=2*B+(1&K),K>>>=1,P+=F.table[++W],0<=(B-=F.table[W]););return T.tag=K,T.bitcount-=W,F.trans[P+B]}function L(T,F,P){for(;;){var B=I(T,F);if(B===256)return p;if(B<256)T.dest[T.destLen++]=B;else for(var W,K=R(T,x[B-=257],v[B]),B=I(T,P),te=W=T.destLen-R(T,w[B],_[B]);te<W+K;++te)T.dest[T.destLen++]=T.dest[te]}}for(var j=y,M=b,V=0;V<7;++V)j.table[V]=0;for(j.table[7]=24,j.table[8]=152,j.table[9]=112,V=0;V<24;++V)j.trans[V]=256+V;for(V=0;V<144;++V)j.trans[24+V]=V;for(V=0;V<8;++V)j.trans[168+V]=280+V;for(V=0;V<112;++V)j.trans[176+V]=144+V;for(V=0;V<5;++V)M.table[V]=0;for(M.table[5]=32,V=0;V<32;++V)M.trans[V]=V;A(x,v,4,3),A(w,_,2,1),x[28]=0,v[28]=258;var G=function(T,F){var P,B,W,K=new g(T,F);do{switch(W=void 0,(B=K).bitcount--||(B.tag=B.source[B.sourceIndex++],B.bitcount=7),W=1&B.tag,B.tag>>>=1,B=W,R(K,2,0)){case 0:P=function(Ye){for(var br,nn;8<Ye.bitcount;)Ye.sourceIndex--,Ye.bitcount-=8;if((br=256*Ye.source[Ye.sourceIndex+1]+Ye.source[Ye.sourceIndex])!==(65535&~(256*Ye.source[Ye.sourceIndex+3]+Ye.source[Ye.sourceIndex+2])))return h;for(Ye.sourceIndex+=4,nn=br;nn;--nn)Ye.dest[Ye.destLen++]=Ye.source[Ye.sourceIndex++];return Ye.bitcount=0,p}(K);break;case 1:P=L(K,y,b);break;case 2:ot=Xe=ht=He=te=Te=Ue=qe=Me=ve=_e=he=void 0;for(var te,he=K,_e=K.ltree,ve=K.dtree,Me=R(he,5,257),qe=R(he,5,1),Ue=R(he,4,4),Te=0;Te<19;++Te)E[Te]=0;for(Te=0;Te<Ue;++Te){var ht=R(he,3,0);E[C[Te]]=ht}for(k(S,E,0,19),te=0;te<Me+qe;){var Xe=I(he,S);switch(Xe){case 16:for(var ot=E[te-1],He=R(he,2,3);He;--He)E[te++]=ot;break;case 17:for(He=R(he,3,3);He;--He)E[te++]=0;break;case 18:for(He=R(he,7,11);He;--He)E[te++]=0;break;default:E[te++]=Xe}}k(_e,E,0,Me),k(ve,E,Me,qe),P=L(K,K.ltree,K.dtree);break;default:P=h}if(P!==p)throw new Error("Data error")}while(!B);return K.destLen<K.dest.length?typeof K.dest.slice=="function"?K.dest.slice(0,K.destLen):K.dest.subarray(0,K.destLen):K.dest};function U(T,F,P,B,W){return Math.pow(1-W,3)*T+3*Math.pow(1-W,2)*W*F+3*(1-W)*Math.pow(W,2)*P+Math.pow(W,3)*B}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function X(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function pe(T){throw new Error(T)}function $(T,F){T||pe(F)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(T,F){typeof T=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=T,this.x2=T),T<this.x1&&(this.x1=T),T>this.x2&&(this.x2=T)),typeof F=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=F,this.y2=F),F<this.y1&&(this.y1=F),F>this.y2&&(this.y2=F))},Y.prototype.addX=function(T){this.addPoint(T,null)},Y.prototype.addY=function(T){this.addPoint(null,T)},Y.prototype.addBezier=function(T,F,P,B,W,K,te,he){var _e=[T,F],ve=[P,B],Me=[W,K],qe=[te,he];this.addPoint(T,F),this.addPoint(te,he);for(var Ue=0;Ue<=1;Ue++){var Te,ht=6*_e[Ue]-12*ve[Ue]+6*Me[Ue],Xe=-3*_e[Ue]+9*ve[Ue]-9*Me[Ue]+3*qe[Ue],ot=3*ve[Ue]-3*_e[Ue];Xe==0?ht==0||0<(Te=-ot/ht)&&Te<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Me[Ue],qe[Ue],Te)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Me[Ue],qe[Ue],Te))):(Te=Math.pow(ht,2)-4*ot*Xe)<0||(0<(ot=(-ht+Math.sqrt(Te))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Me[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Me[Ue],qe[Ue],ot))),0<(ot=(-ht-Math.sqrt(Te))/(2*Xe))&&ot<1&&(Ue===0&&this.addX(U(_e[Ue],ve[Ue],Me[Ue],qe[Ue],ot)),Ue===1&&this.addY(U(_e[Ue],ve[Ue],Me[Ue],qe[Ue],ot))))}},Y.prototype.addQuad=function(T,F,P,B,W,K){P=T+2/3*(P-T),B=F+2/3*(B-F),this.addBezier(T,F,P,B,P+1/3*(W-T),B+1/3*(K-F),W,K)},X.prototype.moveTo=function(T,F){this.commands.push({type:"M",x:T,y:F})},X.prototype.lineTo=function(T,F){this.commands.push({type:"L",x:T,y:F})},X.prototype.curveTo=X.prototype.bezierCurveTo=function(T,F,P,B,W,K){this.commands.push({type:"C",x1:T,y1:F,x2:P,y2:B,x:W,y:K})},X.prototype.quadTo=X.prototype.quadraticCurveTo=function(T,F,P,B){this.commands.push({type:"Q",x1:T,y1:F,x:P,y:B})},X.prototype.close=X.prototype.closePath=function(){this.commands.push({type:"Z"})},X.prototype.extend=function(T){var F;if(T.commands)T=T.commands;else if(T instanceof Y)return F=T,this.moveTo(F.x1,F.y1),this.lineTo(F.x2,F.y1),this.lineTo(F.x2,F.y2),this.lineTo(F.x1,F.y2),void this.close();Array.prototype.push.apply(this.commands,T)},X.prototype.getBoundingBox=function(){for(var T=new Y,F=0,P=0,B=0,W=0,K=0;K<this.commands.length;K++){var te=this.commands[K];switch(te.type){case"M":T.addPoint(te.x,te.y),F=B=te.x,P=W=te.y;break;case"L":T.addPoint(te.x,te.y),B=te.x,W=te.y;break;case"Q":T.addQuad(B,W,te.x1,te.y1,te.x,te.y),B=te.x,W=te.y;break;case"C":T.addBezier(B,W,te.x1,te.y1,te.x2,te.y2,te.x,te.y),B=te.x,W=te.y;break;case"Z":B=F,W=P;break;default:throw new Error("Unexpected path command "+te.type)}}return T.isEmpty()&&T.addPoint(0,0),T},X.prototype.draw=function(T){T.beginPath();for(var F=0;F<this.commands.length;F+=1){var P=this.commands[F];P.type==="M"?T.moveTo(P.x,P.y):P.type==="L"?T.lineTo(P.x,P.y):P.type==="C"?T.bezierCurveTo(P.x1,P.y1,P.x2,P.y2,P.x,P.y):P.type==="Q"?T.quadraticCurveTo(P.x1,P.y1,P.x,P.y):P.type==="Z"&&T.closePath()}this.fill&&(T.fillStyle=this.fill,T.fill()),this.stroke&&(T.strokeStyle=this.stroke,T.lineWidth=this.strokeWidth,T.stroke())},X.prototype.toPathData=function(T){function F(){for(var K=arguments,te="",he=0;he<arguments.length;he+=1){var _e=K[he];0<=_e&&0<he&&(te+=" "),te+=(_e=_e,Math.round(_e)===_e?""+Math.round(_e):_e.toFixed(T))}return te}T=T!==void 0?T:2;for(var P="",B=0;B<this.commands.length;B+=1){var W=this.commands[B];W.type==="M"?P+="M"+F(W.x,W.y):W.type==="L"?P+="L"+F(W.x,W.y):W.type==="C"?P+="C"+F(W.x1,W.y1,W.x2,W.y2,W.x,W.y):W.type==="Q"?P+="Q"+F(W.x1,W.y1,W.x,W.y):W.type==="Z"&&(P+="Z")}return P},X.prototype.toSVG=function(T){var F=(F='<path d="')+this.toPathData(T)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?F+=' fill="none"':F+=' fill="'+this.fill+'"'),this.stroke&&(F+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),F+="/>"},X.prototype.toDOMElement=function(F){var F=this.toPathData(F),P=document.createElementNS("http://www.w3.org/2000/svg","path");return P.setAttribute("d",F),P};var O={fail:pe,argument:$,assert:$},z={},q={},ee={};function ae(T){return function(){return T}}q.BYTE=function(T){return O.argument(0<=T&&T<=255,"Byte value should be between 0 and 255."),[T]},ee.BYTE=ae(1),q.CHAR=function(T){return[T.charCodeAt(0)]},ee.CHAR=ae(1),q.CHARARRAY=function(T){for(var F=[],P=0;P<T.length;P+=1)F[P]=T.charCodeAt(P);return F},ee.CHARARRAY=function(T){return T.length},q.USHORT=function(T){return[T>>8&255,255&T]},ee.USHORT=ae(2),q.SHORT=function(T){return[(T=32768<=T?-(65536-T):T)>>8&255,255&T]},ee.SHORT=ae(2),q.UINT24=function(T){return[T>>16&255,T>>8&255,255&T]},ee.UINT24=ae(3),q.ULONG=function(T){return[T>>24&255,T>>16&255,T>>8&255,255&T]},ee.ULONG=ae(4),q.LONG=function(T){return[(T=2147483648<=T?-(4294967296-T):T)>>24&255,T>>16&255,T>>8&255,255&T]},ee.LONG=ae(4),q.FIXED=q.ULONG,ee.FIXED=ee.ULONG,q.FWORD=q.SHORT,ee.FWORD=ee.SHORT,q.UFWORD=q.USHORT,ee.UFWORD=ee.USHORT,q.LONGDATETIME=function(T){return[0,0,0,0,T>>24&255,T>>16&255,T>>8&255,255&T]},ee.LONGDATETIME=ae(8),q.TAG=function(T){return O.argument(T.length===4,"Tag should be exactly 4 ASCII characters."),[T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2),T.charCodeAt(3)]},ee.TAG=ae(4),q.Card8=q.BYTE,ee.Card8=ee.BYTE,q.Card16=q.USHORT,ee.Card16=ee.USHORT,q.OffSize=q.BYTE,ee.OffSize=ee.BYTE,q.SID=q.USHORT,ee.SID=ee.USHORT,q.NUMBER=function(T){return-107<=T&&T<=107?[T+139]:108<=T&&T<=1131?[247+((T-=108)>>8),255&T]:-1131<=T&&T<=-108?[251+((T=-T-108)>>8),255&T]:-32768<=T&&T<=32767?q.NUMBER16(T):q.NUMBER32(T)},ee.NUMBER=function(T){return q.NUMBER(T).length},q.NUMBER16=function(T){return[28,T>>8&255,255&T]},ee.NUMBER16=ae(3),q.NUMBER32=function(T){return[29,T>>24&255,T>>16&255,T>>8&255,255&T]},ee.NUMBER32=ae(5),q.REAL=function(T){for(var F=T.toString(),P=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(F),B=(P&&(P=parseFloat("1e"+((P[2]?+P[2]:0)+P[1].length)),F=(Math.round(T*P)/P).toString()),""),W=0,K=F.length;W<K;W+=1){var te=F[W];B+=te==="e"?F[++W]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var he=[30],_e=0,ve=(B+=1&B.length?"f":"ff").length;_e<ve;_e+=2)he.push(parseInt(B.substr(_e,2),16));return he},ee.REAL=function(T){return q.REAL(T).length},q.NAME=q.CHARARRAY,ee.NAME=ee.CHARARRAY,q.STRING=q.CHARARRAY,ee.STRING=ee.CHARARRAY,z.UTF8=function(T,F,P){for(var B=[],W=P,K=0;K<W;K++,F+=1)B[K]=T.getUint8(F);return String.fromCharCode.apply(null,B)},z.UTF16=function(T,F,P){for(var B=[],W=P/2,K=0;K<W;K++,F+=2)B[K]=T.getUint16(F);return String.fromCharCode.apply(null,B)},q.UTF16=function(T){for(var F=[],P=0;P<T.length;P+=1){var B=T.charCodeAt(P);F[F.length]=B>>8&255,F[F.length]=255&B}return F},ee.UTF16=function(T){return 2*T.length};var Q,le={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"},ie=(z.MACSTRING=function(T,F,P,B){var W=le[B];if(W!==void 0){for(var K="",te=0;te<P;te++){var he=T.getUint8(F+te);K+=he<=127?String.fromCharCode(he):W[127&he]}return K}},typeof WeakMap=="function"&&new WeakMap);function Z(T){return-128<=T&&T<=127}q.MACSTRING=function(T,F){var P=function(te){if(!Q)for(var he in Q={},le)Q[he]=new String(he);var _e=Q[te];if(_e!==void 0){if(ie){var ve=ie.get(_e);if(ve!==void 0)return ve}var Me=le[te];if(Me!==void 0){for(var qe={},Ue=0;Ue<Me.length;Ue++)qe[Me.charCodeAt(Ue)]=Ue+128;return ie&&ie.set(_e,qe),qe}}}(F);if(P!==void 0){for(var B=[],W=0;W<T.length;W++){var K=T.charCodeAt(W);if(128<=K&&(K=P[K])===void 0)return;B[W]=K}return B}},ee.MACSTRING=function(T,F){return T=q.MACSTRING(T,F),T!==void 0?T.length:0},q.VARDELTAS=function(T){for(var B=0,F=[];B<T.length;)var P=T[B],B=(P===0?function(W,K,te){for(var he=0,_e=W.length;K<_e&&he<64&&W[K]===0;)++K,++he;return te.push(128|he-1),K}:-128<=P&&P<=127?function(W,K,te){for(var he=0,_e=W.length,ve=K;ve<_e&&he<64;){var Me=W[ve];if(!Z(Me)||Me===0&&ve+1<_e&&W[ve+1]===0)break;++ve,++he}te.push(he-1);for(var qe=K;qe<ve;++qe)te.push(W[qe]+256&255);return ve}:function(W,K,te){for(var he=0,_e=W.length,ve=K;ve<_e&&he<64;){var Me=W[ve];if(Me===0||Z(Me)&&ve+1<_e&&Z(W[ve+1]))break;++ve,++he}te.push(64|he-1);for(var qe=K;qe<ve;++qe){var Ue=W[qe];te.push(Ue+65536>>8&255,Ue+256&255)}return ve})(T,B,F);return F},q.INDEX=function(T){for(var F=1,P=[F],B=[],W=0;W<T.length;W+=1){var K=q.OBJECT(T[W]);Array.prototype.push.apply(B,K),F+=K.length,P.push(F)}if(B.length===0)return[0,0];for(var te=[],he=1+Math.floor(Math.log(F)/Math.log(2))/8|0,_e=[void 0,q.BYTE,q.USHORT,q.UINT24,q.ULONG][he],ve=0;ve<P.length;ve+=1){var Me=_e(P[ve]);Array.prototype.push.apply(te,Me)}return Array.prototype.concat(q.Card16(T.length),q.OffSize(he),te,B)},ee.INDEX=function(T){return q.INDEX(T).length},q.DICT=function(T){for(var F=[],P=Object.keys(T),B=P.length,W=0;W<B;W+=1){var K=parseInt(P[W],0),te=T[K];F=(F=F.concat(q.OPERAND(te.value,te.type))).concat(q.OPERATOR(K))}return F},ee.DICT=function(T){return q.DICT(T).length},q.OPERATOR=function(T){return T<1200?[T]:[12,T-1200]},q.OPERAND=function(T,F){var P=[];if(Array.isArray(F))for(var B=0;B<F.length;B+=1)O.argument(T.length===F.length,"Not enough arguments given for type"+F),P=P.concat(q.OPERAND(T[B],F[B]));else if(F==="SID")P=P.concat(q.NUMBER(T));else if(F==="offset")P=P.concat(q.NUMBER32(T));else if(F==="number")P=P.concat(q.NUMBER(T));else{if(F!=="real")throw new Error("Unknown operand type "+F);P=P.concat(q.REAL(T))}return P},q.OP=q.BYTE,ee.OP=ee.BYTE;var ge=typeof WeakMap=="function"&&new WeakMap;function ne(T,F,P){for(var B=0;B<F.length;B+=1){var W=F[B];this[W.name]=W.value}if(this.tableName=T,this.fields=F,P)for(var K=Object.keys(P),te=0;te<K.length;te+=1){var he=K[te],_e=P[he];this[he]!==void 0&&(this[he]=_e)}}function ye(T,F,P){P===void 0&&(P=F.length);var B=new Array(F.length+1);B[0]={name:T+"Count",type:"USHORT",value:P};for(var W=0;W<F.length;W++)B[W+1]={name:T+W,type:"USHORT",value:F[W]};return B}function xe(T,F,P){var B=F.length,W=new Array(B+1);W[0]={name:T+"Count",type:"USHORT",value:B};for(var K=0;K<B;K++)W[K+1]={name:T+K,type:"TABLE",value:P(F[K],K)};return W}function Ne(T,F,P){var B=F.length,W=[];W[0]={name:T+"Count",type:"USHORT",value:B};for(var K=0;K<B;K++)W=W.concat(P(F[K],K));return W}function Ae(T){T.format===1?ne.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ye("glyph",T.glyphs))):O.assert(!1,"Can't create coverage table format 2 yet.")}function Re(T){ne.call(this,"scriptListTable",Ne("scriptRecord",T,function(F,P){var B=F.script,W=B.defaultLangSys;return O.assert(!!W,"Unable to write GSUB: script "+F.tag+" has no default language system."),[{name:"scriptTag"+P,type:"TAG",value:F.tag},{name:"script"+P,type:"TABLE",value:new ne("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ne("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:W.reqFeatureIndex}].concat(ye("featureIndex",W.featureIndexes)))}].concat(Ne("langSys",B.langSysRecords,function(K,te){var he=K.langSys;return[{name:"langSysTag"+te,type:"TAG",value:K.tag},{name:"langSys"+te,type:"TABLE",value:new ne("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:he.reqFeatureIndex}].concat(ye("featureIndex",he.featureIndexes)))}]})))}]}))}function ze(T){ne.call(this,"featureListTable",Ne("featureRecord",T,function(F,P){var B=F.feature;return[{name:"featureTag"+P,type:"TAG",value:F.tag},{name:"feature"+P,type:"TABLE",value:new ne("featureTable",[{name:"featureParams",type:"USHORT",value:B.featureParams}].concat(ye("lookupListIndex",B.lookupListIndexes)))}]}))}function lt(T,F){ne.call(this,"lookupListTable",xe("lookup",T,function(P){var B=F[P.lookupType];return O.assert(!!B,"Unable to write GSUB lookup type "+P.lookupType+" tables."),new ne("lookupTable",[{name:"lookupType",type:"USHORT",value:P.lookupType},{name:"lookupFlag",type:"USHORT",value:P.lookupFlag}].concat(xe("subtable",P.subtables,B)))}))}q.CHARSTRING=function(T){if(ge){var F=ge.get(T);if(F!==void 0)return F}for(var K=[],P=T.length,B=0;B<P;B+=1)var W=T[B],K=K.concat(q[W.type](W.value));return ge&&ge.set(T,K),K},ee.CHARSTRING=function(T){return q.CHARSTRING(T).length},q.OBJECT=function(T){var F=q[T.type];return O.argument(F!==void 0,"No encoding function for type "+T.type),F(T.value)},ee.OBJECT=function(T){var F=ee[T.type];return O.argument(F!==void 0,"No sizeOf function for type "+T.type),F(T.value)},q.TABLE=function(T){for(var F=[],P=T.fields.length,B=[],W=[],K=0;K<P;K+=1){var te=T.fields[K],_e=q[te.type],he=(O.argument(_e!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),T[te.name]),_e=_e(he=he===void 0?te.value:he);te.type==="TABLE"?(W.push(F.length),F=F.concat([0,0]),B.push(_e)):F=F.concat(_e)}for(var ve=0;ve<B.length;ve+=1){var Me=W[ve],qe=F.length;O.argument(qe<65536,"Table "+T.tableName+" too big."),F[Me]=qe>>8,F[Me+1]=255&qe,F=F.concat(B[ve])}return F},ee.TABLE=function(T){for(var F=0,P=T.fields.length,B=0;B<P;B+=1){var W=T.fields[B],K=ee[W.type],te=(O.argument(K!==void 0,"No sizeOf function for field type "+W.type+" ("+W.name+")"),T[W.name]);F+=K(te=te===void 0?W.value:te),W.type==="TABLE"&&(F+=2)}return F},q.RECORD=q.TABLE,ee.RECORD=ee.TABLE,q.LITERAL=function(T){return T},ee.LITERAL=function(T){return T.length},ne.prototype.encode=function(){return q.TABLE(this)},ne.prototype.sizeOf=function(){return ee.TABLE(this)};var We={Table:ne,Record:ne,Coverage:(Ae.prototype=Object.create(ne.prototype)).constructor=Ae,ScriptList:(Re.prototype=Object.create(ne.prototype)).constructor=Re,FeatureList:(ze.prototype=Object.create(ne.prototype)).constructor=ze,LookupList:(lt.prototype=Object.create(ne.prototype)).constructor=lt,ushortList:ye,tableList:xe,recordList:Ne};function Bt(T,F){return T.getUint8(F)}function Tt(T,F){return T.getUint16(F,!1)}function At(T,F){return T.getUint32(F,!1)}function Mt(T,F){return T.getInt16(F,!1)+T.getUint16(F+2,!1)/65535}var Ot={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Le(T,F){this.data=T,this.offset=F,this.relativeOffset=0}Le.prototype.parseByte=function(){var T=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},Le.prototype.parseChar=function(){var T=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},Le.prototype.parseCard8=Le.prototype.parseByte,Le.prototype.parseCard16=Le.prototype.parseUShort=function(){var T=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},Le.prototype.parseSID=Le.prototype.parseUShort,Le.prototype.parseOffset16=Le.prototype.parseUShort,Le.prototype.parseShort=function(){var T=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},Le.prototype.parseF2Dot14=function(){var T=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,T},Le.prototype.parseOffset32=Le.prototype.parseULong=function(){var T=At(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},Le.prototype.parseFixed=function(){var T=Mt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},Le.prototype.parseString=function(T){var F=this.data,P=this.offset+this.relativeOffset,B="";this.relativeOffset+=T;for(var W=0;W<T;W++)B+=String.fromCharCode(F.getUint8(P+W));return B},Le.prototype.parseTag=function(){return this.parseString(4)},Le.prototype.parseLongDateTime=function(){var T=At(this.data,this.offset+this.relativeOffset+4);return T-=2082844800,this.relativeOffset+=8,T},Le.prototype.parseVersion=function(T){var F=Tt(this.data,this.offset+this.relativeOffset),P=Tt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,F+P/(T=T===void 0?4096:T)/10},Le.prototype.skip=function(T,F){this.relativeOffset+=Ot[T]*(F=F===void 0?1:F)},Le.prototype.parseULongList=function(T){T===void 0&&(T=this.parseULong());for(var F=new Array(T),P=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)F[W]=P.getUint32(B),B+=4;return this.relativeOffset+=4*T,F},Le.prototype.parseOffset16List=Le.prototype.parseUShortList=function(T){T===void 0&&(T=this.parseUShort());for(var F=new Array(T),P=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)F[W]=P.getUint16(B),B+=2;return this.relativeOffset+=2*T,F},Le.prototype.parseShortList=function(T){for(var F=new Array(T),P=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)F[W]=P.getInt16(B),B+=2;return this.relativeOffset+=2*T,F},Le.prototype.parseByteList=function(T){for(var F=new Array(T),P=this.data,B=this.offset+this.relativeOffset,W=0;W<T;W++)F[W]=P.getUint8(B++);return this.relativeOffset+=T,F},Le.prototype.parseList=function(T,F){F||(F=T,T=this.parseUShort());for(var P=new Array(T),B=0;B<T;B++)P[B]=F.call(this);return P},Le.prototype.parseList32=function(T,F){F||(F=T,T=this.parseULong());for(var P=new Array(T),B=0;B<T;B++)P[B]=F.call(this);return P},Le.prototype.parseRecordList=function(T,F){F||(F=T,T=this.parseUShort());for(var P=new Array(T),B=Object.keys(F),W=0;W<T;W++){for(var K={},te=0;te<B.length;te++){var he=B[te],_e=F[he];K[he]=_e.call(this)}P[W]=K}return P},Le.prototype.parseRecordList32=function(T,F){F||(F=T,T=this.parseULong());for(var P=new Array(T),B=Object.keys(F),W=0;W<T;W++){for(var K={},te=0;te<B.length;te++){var he=B[te],_e=F[he];K[he]=_e.call(this)}P[W]=K}return P},Le.prototype.parseStruct=function(T){if(typeof T=="function")return T.call(this);for(var F=Object.keys(T),P={},B=0;B<F.length;B++){var W=F[B],K=T[W];P[W]=K.call(this)}return P},Le.prototype.parseValueRecord=function(T){var F;if((T=T===void 0?this.parseUShort():T)!==0)return F={},1&T&&(F.xPlacement=this.parseShort()),2&T&&(F.yPlacement=this.parseShort()),4&T&&(F.xAdvance=this.parseShort()),8&T&&(F.yAdvance=this.parseShort()),16&T&&(F.xPlaDevice=void 0,this.parseShort()),32&T&&(F.yPlaDevice=void 0,this.parseShort()),64&T&&(F.xAdvDevice=void 0,this.parseShort()),128&T&&(F.yAdvDevice=void 0,this.parseShort()),F},Le.prototype.parseValueRecordList=function(){for(var T=this.parseUShort(),F=this.parseUShort(),P=new Array(F),B=0;B<F;B++)P[B]=this.parseValueRecord(T);return P},Le.prototype.parsePointer=function(T){var F=this.parseOffset16();if(0<F)return new Le(this.data,this.offset+F).parseStruct(T)},Le.prototype.parsePointer32=function(T){var F=this.parseOffset32();if(0<F)return new Le(this.data,this.offset+F).parseStruct(T)},Le.prototype.parseListOfLists=function(T){for(var F=this.parseOffset16List(),P=F.length,B=this.relativeOffset,W=new Array(P),K=0;K<P;K++){var te=F[K];if(te===0)W[K]=void 0;else if(this.relativeOffset=te,T){for(var he=this.parseOffset16List(),_e=new Array(he.length),ve=0;ve<he.length;ve++)this.relativeOffset=te+he[ve],_e[ve]=T.call(this);W[K]=_e}else W[K]=this.parseUShortList()}return this.relativeOffset=B,W},Le.prototype.parseCoverage=function(){var T=this.offset+this.relativeOffset,F=this.parseUShort(),P=this.parseUShort();if(F===1)return{format:1,glyphs:this.parseUShortList(P)};if(F!==2)throw new Error("0x"+T.toString(16)+": Coverage format must be 1 or 2.");for(var B=new Array(P),W=0;W<P;W++)B[W]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:B}},Le.prototype.parseClassDef=function(){var T=this.offset+this.relativeOffset,F=this.parseUShort();if(F===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(F===2)return{format:2,ranges:this.parseRecordList({start:Le.uShort,end:Le.uShort,classId:Le.uShort})};throw new Error("0x"+T.toString(16)+": ClassDef format must be 1 or 2.")},Le.list=function(T,F){return function(){return this.parseList(T,F)}},Le.list32=function(T,F){return function(){return this.parseList32(T,F)}},Le.recordList=function(T,F){return function(){return this.parseRecordList(T,F)}},Le.recordList32=function(T,F){return function(){return this.parseRecordList32(T,F)}},Le.pointer=function(T){return function(){return this.parsePointer(T)}},Le.pointer32=function(T){return function(){return this.parsePointer32(T)}},Le.tag=Le.prototype.parseTag,Le.byte=Le.prototype.parseByte,Le.uShort=Le.offset16=Le.prototype.parseUShort,Le.uShortList=Le.prototype.parseUShortList,Le.uLong=Le.offset32=Le.prototype.parseULong,Le.uLongList=Le.prototype.parseULongList,Le.struct=Le.prototype.parseStruct,Le.coverage=Le.prototype.parseCoverage,Le.classDef=Le.prototype.parseClassDef;var ut={reserved:Le.uShort,reqFeatureIndex:Le.uShort,featureIndexes:Le.uShortList},Ge=(Le.prototype.parseScriptList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,script:Le.pointer({defaultLangSys:Le.pointer(ut),langSysRecords:Le.recordList({tag:Le.tag,langSys:Le.pointer(ut)})})}))||[]},Le.prototype.parseFeatureList=function(){return this.parsePointer(Le.recordList({tag:Le.tag,feature:Le.pointer({featureParams:Le.offset16,lookupListIndexes:Le.uShortList})}))||[]},Le.prototype.parseLookupList=function(T){return this.parsePointer(Le.list(Le.pointer(function(){var F=this.parseUShort(),P=(O.argument(1<=F&&F<=9,"GPOS/GSUB lookup type "+F+" unknown."),this.parseUShort()),B=16&P;return{lookupType:F,lookupFlag:P,subtables:this.parseList(Le.pointer(T[F])),markFilteringSet:B?this.parseUShort():void 0}})))||[]},Le.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var T=this.parseUShort(),F=this.parseUShort();return O.argument(T===1&&F<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Le.offset32,featureTableSubstitutionOffset:Le.offset32})})||[]},{getByte:Bt,getCard8:Bt,getUShort:Tt,getCard16:Tt,getShort:function(T,F){return T.getInt16(F,!1)},getULong:At,getFixed:Mt,getTag:function(T,F){for(var P="",B=F;B<F+4;B+=1)P+=String.fromCharCode(T.getInt8(B));return P},getOffset:function(T,F,P){for(var B=0,W=0;W<P;W+=1)B=(B<<=8)+T.getUint8(F+W);return B},getBytes:function(T,F,P){for(var B=[],W=F;W<P;W+=1)B.push(T.getUint8(W));return B},bytesToString:function(T){for(var F="",P=0;P<T.length;P+=1)F+=String.fromCharCode(T[P]);return F},Parser:Le}),fe={parse:function(T,F){for(var P={},B=(P.version=Ge.getUShort(T,F),O.argument(P.version===0,"cmap table version should be 0."),P.numTables=Ge.getUShort(T,F+2),-1),W=P.numTables-1;0<=W;--W){var K=Ge.getUShort(T,F+4+8*W),te=Ge.getUShort(T,F+4+8*W+2);if(K===3&&(te===0||te===1||te===10)||K===0&&(te===0||te===1||te===2||te===3||te===4)){B=Ge.getULong(T,F+4+8*W+4);break}}if(B===-1)throw new Error("No valid cmap sub-tables found.");var he=new Ge.Parser(T,F+B);if(P.format=he.parseUShort(),P.format===12){var _e,ve=P,Me=he;Me.parseUShort(),ve.length=Me.parseULong(),ve.language=Me.parseULong(),ve.groupCount=_e=Me.parseULong(),ve.glyphIndexMap={};for(var qe=0;qe<_e;qe+=1)for(var Ue=Me.parseULong(),Te=Me.parseULong(),ht=Me.parseULong(),Xe=Ue;Xe<=Te;Xe+=1)ve.glyphIndexMap[Xe]=ht,ht++}else{if(P.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+P.format+").");var ot=P,He=T,Ye=F,br=B;ot.length=he.parseUShort(),ot.language=he.parseUShort(),ot.segCount=nn=he.parseUShort()>>1,he.skip("uShort",3),ot.glyphIndexMap={};for(var nn,wr=new Ge.Parser(He,Ye+br+14),Cr=new Ge.Parser(He,Ye+br+16+2*nn),wn=new Ge.Parser(He,Ye+br+16+4*nn),mi=new Ge.Parser(He,Ye+br+16+6*nn),us=Ye+br+16+8*nn,Us=0;Us<nn-1;Us+=1)for(var Hl=void 0,Yl=wr.parseUShort(),lh=Cr.parseUShort(),Jo=wn.parseShort(),_i=mi.parseUShort(),Do=lh;Do<=Yl;Do+=1)_i!==0?(us=(us=mi.offset+mi.relativeOffset-2)+_i+2*(Do-lh),(Hl=Ge.getUShort(He,us))!==0&&(Hl=Hl+Jo&65535)):Hl=Do+Jo&65535,ot.glyphIndexMap[Do]=Hl}return P},make:function(T){for(var F=!0,P=T.length-1;0<P;--P)if(65535<T.get(P).unicode){console.log("Adding CMAP format 12 (needed!)"),F=!1;break}var B,W,K=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:F?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:F?12:20}],te=(K=(K=F?K:K.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new We.Table("cmap",K));for(te.segments=[],P=0;P<T.length;P+=1){for(var he=T.get(P),_e=0;_e<he.unicodes.length;_e+=1)B=he.unicodes[_e],W=P,te.segments.push({end:B,start:B,delta:-(B-W),offset:0,glyphIndex:W});te.segments=te.segments.sort(function(Ye,br){return Ye.start-br.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var ve=te.segments.length,Me=0,qe=[],Ue=[],Te=[],ht=[],Xe=[],ot=[];for(P=0;P<ve;P+=1){var He=te.segments[P];He.end<=65535&&He.start<=65535?(qe=qe.concat({name:"end_"+P,type:"USHORT",value:He.end}),Ue=Ue.concat({name:"start_"+P,type:"USHORT",value:He.start}),Te=Te.concat({name:"idDelta_"+P,type:"SHORT",value:He.delta}),ht=ht.concat({name:"idRangeOffset_"+P,type:"USHORT",value:He.offset}),He.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+P,type:"USHORT",value:He.glyphId}))):Me+=1,F||He.glyphIndex===void 0||(ot=(ot=(ot=ot.concat({name:"cmap12Start_"+P,type:"ULONG",value:He.start})).concat({name:"cmap12End_"+P,type:"ULONG",value:He.end})).concat({name:"cmap12Glyph_"+P,type:"ULONG",value:He.glyphIndex}))}return te.segCountX2=2*(ve-Me),te.searchRange=2*Math.pow(2,Math.floor(Math.log(ve-Me)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(qe),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Ue),te.fields=te.fields.concat(Te),te.fields=te.fields.concat(ht),te.fields=te.fields.concat(Xe),te.cmap4Length=14+2*qe.length+2+2*Ue.length+2*Te.length+2*ht.length+2*Xe.length,F||(K=16+4*ot.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:K},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ot.length/3}]),te.fields=te.fields.concat(ot)),te}},me=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],be=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Fe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ve(T){this.font=T}function Qe(T){this.cmap=T}function _t(T,F){this.encoding=T,this.charset=F}function Nt(T){switch(T.version){case 1:this.names=Fe.slice();break;case 2:this.names=new Array(T.numberOfGlyphs);for(var F=0;F<T.numberOfGlyphs;F++)T.glyphNameIndex[F]<Fe.length?this.names[F]=Fe[T.glyphNameIndex[F]]:this.names[F]=T.names[T.glyphNameIndex[F]-Fe.length];break;case 2.5:this.names=new Array(T.numberOfGlyphs);for(var P=0;P<T.numberOfGlyphs;P++)this.names[P]=Fe[P+T.glyphNameIndex[P]];break;default:this.names=[]}}Ve.prototype.charToGlyphIndex=function(T){var F=T.codePointAt(0),P=this.font.glyphs;if(P){for(var B=0;B<P.length;B+=1)for(var W=P.get(B),K=0;K<W.unicodes.length;K+=1)if(W.unicodes[K]===F)return B}return null},Qe.prototype.charToGlyphIndex=function(T){return this.cmap.glyphIndexMap[T.codePointAt(0)]||0},_t.prototype.charToGlyphIndex=function(T){return T=T.codePointAt(0),T=this.encoding[T],this.charset.indexOf(T)},Nt.prototype.nameToGlyphIndex=function(T){return this.names.indexOf(T)},Nt.prototype.glyphIndexToName=function(T){return this.names[T]};var Ft={line:function(T,F,P,B,W){T.beginPath(),T.moveTo(F,P),T.lineTo(B,W),T.stroke()}};function Ut(T){this.bindConstructorValues(T)}function en(T,F,P){Object.defineProperty(T,F,{get:function(){return T.path,T[P]},set:function(B){T[P]=B},enumerable:!0,configurable:!0})}function Mr(T,F){if(this.font=T,this.glyphs={},Array.isArray(F))for(var P=0;P<F.length;P++)this.glyphs[P]=F[P];this.length=F&&F.length||0}Ut.prototype.bindConstructorValues=function(T){var F;this.index=T.index||0,this.name=T.name||null,this.unicode=T.unicode||void 0,this.unicodes=T.unicodes||T.unicode!==void 0?[T.unicode]:[],T.xMin&&(this.xMin=T.xMin),T.yMin&&(this.yMin=T.yMin),T.xMax&&(this.xMax=T.xMax),T.yMax&&(this.yMax=T.yMax),T.advanceWidth&&(this.advanceWidth=T.advanceWidth),Object.defineProperty(this,"path",(T=T.path,F=T||new X,{configurable:!0,get:function(){return F=typeof F=="function"?F():F},set:function(P){F=P}}))},Ut.prototype.addUnicode=function(T){this.unicodes.length===0&&(this.unicode=T),this.unicodes.push(T)},Ut.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ut.prototype.getPath=function(T,F,P,B,W){T=T!==void 0?T:0,F=F!==void 0?F:0,P=P!==void 0?P:72;for(var K,te,he=(B=B||{}).xScale,_e=B.yScale,ve=((K=B.hinting&&W&&W.hinting?this.path&&W.hinting.exec(this,P):K)?(te=W.hinting.getCommands(K),T=Math.round(T),F=Math.round(F),he=_e=1):(te=this.path.commands,B=1/this.path.unitsPerEm*P,he===void 0&&(he=B),_e===void 0&&(_e=B)),new X),Me=0;Me<te.length;Me+=1){var qe=te[Me];qe.type==="M"?ve.moveTo(T+qe.x*he,F+-qe.y*_e):qe.type==="L"?ve.lineTo(T+qe.x*he,F+-qe.y*_e):qe.type==="Q"?ve.quadraticCurveTo(T+qe.x1*he,F+-qe.y1*_e,T+qe.x*he,F+-qe.y*_e):qe.type==="C"?ve.curveTo(T+qe.x1*he,F+-qe.y1*_e,T+qe.x2*he,F+-qe.y2*_e,T+qe.x*he,F+-qe.y*_e):qe.type==="Z"&&ve.closePath()}return ve},Ut.prototype.getContours=function(){if(this.points===void 0)return[];for(var T=[],F=[],P=0;P<this.points.length;P+=1){var B=this.points[P];F.push(B),B.lastPointOfContour&&(T.push(F),F=[])}return O.argument(F.length===0,"There are still points left in the current contour."),T},Ut.prototype.getMetrics=function(){for(var T=this.path.commands,F=[],P=[],B=0;B<T.length;B+=1){var W=T[B];W.type!=="Z"&&(F.push(W.x),P.push(W.y)),W.type!=="Q"&&W.type!=="C"||(F.push(W.x1),P.push(W.y1)),W.type==="C"&&(F.push(W.x2),P.push(W.y2))}var K={xMin:Math.min.apply(null,F),yMin:Math.min.apply(null,P),xMax:Math.max.apply(null,F),yMax:Math.max.apply(null,P),leftSideBearing:this.leftSideBearing};return isFinite(K.xMin)||(K.xMin=0),isFinite(K.xMax)||(K.xMax=this.advanceWidth),isFinite(K.yMin)||(K.yMin=0),isFinite(K.yMax)||(K.yMax=0),K.rightSideBearing=this.advanceWidth-K.leftSideBearing-(K.xMax-K.xMin),K},Ut.prototype.draw=function(T,F,P,B,W){this.getPath(F,P,B,W).draw(T)},Ut.prototype.drawPoints=function(T,F,P,B){function W(Me,qe,Ue,Te){var ht=2*Math.PI;T.beginPath();for(var Xe=0;Xe<Me.length;Xe+=1)T.moveTo(qe+Me[Xe].x*Te,Ue+Me[Xe].y*Te),T.arc(qe+Me[Xe].x*Te,Ue+Me[Xe].y*Te,2,0,ht,!1);T.closePath(),T.fill()}F=F!==void 0?F:0,P=P!==void 0?P:0;for(var B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),K=[],te=[],he=this.path,_e=0;_e<he.commands.length;_e+=1){var ve=he.commands[_e];ve.x!==void 0&&K.push({x:ve.x,y:-ve.y}),ve.x1!==void 0&&te.push({x:ve.x1,y:-ve.y1}),ve.x2!==void 0&&te.push({x:ve.x2,y:-ve.y2})}T.fillStyle="blue",W(K,F,P,B),T.fillStyle="red",W(te,F,P,B)},Ut.prototype.drawMetrics=function(T,F,P,B){F=F!==void 0?F:0,P=P!==void 0?P:0,B=1/this.path.unitsPerEm*(B=B!==void 0?B:24),T.lineWidth=1,T.strokeStyle="black",Ft.line(T,F,-1e4,F,1e4),Ft.line(T,-1e4,P,1e4,P);var W=this.xMin||0,K=this.yMin||0,te=this.xMax||0,he=this.yMax||0,_e=this.advanceWidth||0;T.strokeStyle="blue",Ft.line(T,F+W*B,-1e4,F+W*B,1e4),Ft.line(T,F+te*B,-1e4,F+te*B,1e4),Ft.line(T,-1e4,P+-K*B,1e4,P+-K*B),Ft.line(T,-1e4,P+-he*B,1e4,P+-he*B),T.strokeStyle="green",Ft.line(T,F+_e*B,-1e4,F+_e*B,1e4)},Mr.prototype.get=function(T){return typeof this.glyphs[T]=="function"&&(this.glyphs[T]=this.glyphs[T]()),this.glyphs[T]},Mr.prototype.push=function(T,F){this.glyphs[T]=F,this.length++};var ur={GlyphSet:Mr,glyphLoader:function(T,F){return new Ut({index:F,font:T})},ttfGlyphLoader:function(T,F,P,B,W,K){return function(){var te=new Ut({index:F,font:T});return te.path=function(){P(te,B,W);var he=K(T.glyphs,te);return he.unitsPerEm=T.unitsPerEm,he},en(te,"xMin","_xMin"),en(te,"xMax","_xMax"),en(te,"yMin","_yMin"),en(te,"yMax","_yMax"),te}},cffGlyphLoader:function(T,F,P,B){return function(){var W=new Ut({index:F,font:T});return W.path=function(){var K=P(T,W,B);return K.unitsPerEm=T.unitsPerEm,K},W}}};function Yr(T){return T=T.length<1240?107:T.length<33900?1131:32768,T}function Fr(T,F,P){var B,W=[],K=[],te=Ge.getCard16(T,F);if(te!==0){for(var he=Ge.getByte(T,F+2),_e=F+(te+1)*he+2,ve=F+3,Me=0;Me<te+1;Me+=1)W.push(Ge.getOffset(T,ve,he)),ve+=he;B=_e+W[te]}else B=F+2;for(var qe=0;qe<W.length-1;qe+=1){var Ue=Ge.getBytes(T,_e+W[qe],_e+W[qe+1]);P&&(Ue=P(Ue)),K.push(Ue)}return{objects:K,startOffset:F,endOffset:B}}function hi(T,F){if(F===28)return T.parseByte()<<8|T.parseByte();if(F===29)return T.parseByte()<<24|T.parseByte()<<16|T.parseByte()<<8|T.parseByte();if(F===30){for(var P=T,B="",W=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var te=P.parseByte(),K=te>>4,te=15&te;if(K==15||(B+=W[K],te==15))break;B+=W[te]}return parseFloat(B)}if(32<=F&&F<=246)return F-139;if(247<=F&&F<=250)return 256*(F-247)+T.parseByte()+108;if(251<=F&&F<=254)return 256*-(F-251)-T.parseByte()-108;throw new Error("Invalid b0 "+F)}function ql(T,F,P){var B=new Ge.Parser(T,F=F!==void 0?F:0),W=[],K=[];for(P=P!==void 0?P:T.length;B.relativeOffset<P;){var te=B.parseByte();te<=21?(te===12&&(te=1200+B.parseByte()),W.push([te,K]),K=[]):K.push(hi(B,te))}for(var he=W,_e={},ve=0;ve<he.length;ve+=1){var Me=he[ve][0],qe=he[ve][1],Ue=void 0,Ue=qe.length===1?qe[0]:qe;if(_e.hasOwnProperty(Me)&&!isNaN(_e[Me]))throw new Error("Object "+_e+" already has key "+Me);_e[Me]=Ue}return _e}function $s(T,F){return F=F<=390?me[F]:T[F-391]}function Eo(T,F,P){for(var B,W={},K=0;K<F.length;K+=1){var te=F[K];if(Array.isArray(te.type)){var he=[];he.length=te.type.length;for(var _e=0;_e<te.type.length;_e++)(B=T[te.op]!==void 0?T[te.op][_e]:void 0)===void 0&&(B=te.value!==void 0&&te.value[_e]!==void 0?te.value[_e]:null),te.type[_e]==="SID"&&(B=$s(P,B)),he[_e]=B;W[te.name]=he}else(B=T[te.op])===void 0&&(B=te.value!==void 0?te.value:null),te.type==="SID"&&(B=$s(P,B)),W[te.name]=B}return W}var wi=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Hn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function yl(T,F,P,B){return Eo(ql(T,F,P),Hn,B)}function Oa(T,F,P,B){for(var W=[],K=0;K<P.length;K+=1){var te=new DataView(new Uint8Array(P[K]).buffer),te=(he=B,Eo(ql(te,0,te.byteLength),wi,he)),he=(te._subrs=[],te._subrsBias=0,te.private[0]),_e=te.private[1];he!==0&&_e!==0&&(he=yl(T,_e+F,he,B),te._defaultWidthX=he.defaultWidthX,te._nominalWidthX=he.nominalWidthX,he.subrs!==0&&(_e=Fr(T,_e+he.subrs+F),te._subrs=_e.objects,te._subrsBias=Yr(te._subrs)),te._privateDict=he),W.push(te)}return W}function Lo(T,F,P){var B,W,K,te,he,_e,ve,Me,qe,Ue=new X,Te=[],ht=0,Xe=!1,ot=!1,He=0,Ye=0,br=(qe=(T.isCIDFont?(he=T.tables.cff.topDict._fdSelect[F.index],he=T.tables.cff.topDict._fdArray[he],_e=he._subrs,ve=he._subrsBias,Me=he._defaultWidthX,he):(_e=T.tables.cff.topDict._subrs,ve=T.tables.cff.topDict._subrsBias,Me=T.tables.cff.topDict._defaultWidthX,T.tables.cff.topDict))._nominalWidthX,Me);function nn(Cr,wn){ot&&Ue.closePath(),Ue.moveTo(Cr,wn),ot=!0}function wr(){Te.length%2==0||Xe||(br=Te.shift()+qe),ht+=Te.length>>1,Te.length=0,Xe=!0}return function Cr(wn){for(var mi,us,Us,Hl,Yl,lh,Jo,_i,Do,Xl,Ji,xl,Si=0;Si<wn.length;){var Ma=wn[Si];switch(Si+=1,Ma){case 1:case 3:wr();break;case 4:1<Te.length&&!Xe&&(br=Te.shift()+qe,Xe=!0),Ye+=Te.pop(),nn(He,Ye);break;case 5:for(;0<Te.length;)He+=Te.shift(),Ye+=Te.shift(),Ue.lineTo(He,Ye);break;case 6:for(;0<Te.length&&(He+=Te.shift(),Ue.lineTo(He,Ye),Te.length!==0);)Ye+=Te.shift(),Ue.lineTo(He,Ye);break;case 7:for(;0<Te.length&&(Ye+=Te.shift(),Ue.lineTo(He,Ye),Te.length!==0);)He+=Te.shift(),Ue.lineTo(He,Ye);break;case 8:for(;0<Te.length;)B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);break;case 10:Yl=Te.pop()+ve,(lh=_e[Yl])&&Cr(lh);break;case 11:return;case 12:switch(Ma=wn[Si],Si+=1,Ma){case 35:B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),_i=te+Te.shift(),Do=Jo+Te.shift(),Xl=_i+Te.shift(),Ji=Do+Te.shift(),xl=Xl+Te.shift(),He=Ji+Te.shift(),Ye=xl+Te.shift(),Te.shift(),Ue.curveTo(B,W,K,te,Jo,_i),Ue.curveTo(Do,Xl,Ji,xl,He,Ye);break;case 34:B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),_i=te,Do=Jo+Te.shift(),Xl=te,Ji=Do+Te.shift(),xl=Ye,He=Ji+Te.shift(),Ue.curveTo(B,W,K,te,Jo,_i),Ue.curveTo(Do,Xl,Ji,xl,He,Ye);break;case 36:B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),_i=te,Do=Jo+Te.shift(),Xl=te,Ji=Do+Te.shift(),xl=Xl+Te.shift(),He=Ji+Te.shift(),Ue.curveTo(B,W,K,te,Jo,_i),Ue.curveTo(Do,Xl,Ji,xl,He,Ye);break;case 37:B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),Jo=K+Te.shift(),_i=te+Te.shift(),Do=Jo+Te.shift(),Xl=_i+Te.shift(),Ji=Do+Te.shift(),xl=Xl+Te.shift(),Math.abs(Ji-He)>Math.abs(xl-Ye)?He=Ji+Te.shift():Ye=xl+Te.shift(),Ue.curveTo(B,W,K,te,Jo,_i),Ue.curveTo(Do,Xl,Ji,xl,He,Ye);break;default:console.log("Glyph "+F.index+": unknown operator 1200"+Ma),Te.length=0}break;case 14:0<Te.length&&!Xe&&(br=Te.shift()+qe,Xe=!0),ot&&(Ue.closePath(),ot=!1);break;case 18:wr();break;case 19:case 20:wr(),Si+=ht+7>>3;break;case 21:2<Te.length&&!Xe&&(br=Te.shift()+qe,Xe=!0),Ye+=Te.pop(),nn(He+=Te.pop(),Ye);break;case 22:1<Te.length&&!Xe&&(br=Te.shift()+qe,Xe=!0),nn(He+=Te.pop(),Ye);break;case 23:wr();break;case 24:for(;2<Te.length;)B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);He+=Te.shift(),Ye+=Te.shift(),Ue.lineTo(He,Ye);break;case 25:for(;6<Te.length;)He+=Te.shift(),Ye+=Te.shift(),Ue.lineTo(He,Ye);B=He+Te.shift(),W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);break;case 26:for(Te.length%2&&(He+=Te.shift());0<Te.length;)B=He,W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K,Ye=te+Te.shift(),Ue.curveTo(B,W,K,te,He,Ye);break;case 27:for(Te.length%2&&(Ye+=Te.shift());0<Te.length;)B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te,Ue.curveTo(B,W,K,te,He,Ye);break;case 28:mi=wn[Si],us=wn[Si+1],Te.push((mi<<24|us<<16)>>16),Si+=2;break;case 29:Yl=Te.pop()+T.gsubrsBias,(lh=T.gsubrs[Yl])&&Cr(lh);break;case 30:for(;0<Te.length&&(B=He,W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye),Te.length!==0);)B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),Ye=te+Te.shift(),He=K+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye);break;case 31:for(;0<Te.length&&(B=He+Te.shift(),W=Ye,K=B+Te.shift(),te=W+Te.shift(),Ye=te+Te.shift(),He=K+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye),Te.length!==0);)B=He,W=Ye+Te.shift(),K=B+Te.shift(),te=W+Te.shift(),He=K+Te.shift(),Ye=te+(Te.length===1?Te.shift():0),Ue.curveTo(B,W,K,te,He,Ye);break;default:Ma<32?console.log("Glyph "+F.index+": unknown operator "+Ma):Ma<247?Te.push(Ma-139):Ma<251?(mi=wn[Si],Si+=1,Te.push(256*(Ma-247)+mi+108)):Ma<255?(mi=wn[Si],Si+=1,Te.push(256*-(Ma-251)-mi-108)):(mi=wn[Si],us=wn[Si+1],Us=wn[Si+2],Hl=wn[Si+3],Si+=4,Te.push((mi<<24|us<<16|Us<<8|Hl)/65536))}}}(P),F.advanceWidth=br,Ue}function bl(T,F){var P,B=me.indexOf(T);return 0<=B&&(P=B),0<=(B=F.indexOf(T))?P=B+me.length:(P=me.length+F.length,F.push(T)),P}function tM(T,F,P){for(var B={},W=0;W<T.length;W+=1){var K=T[W],te=F[K.name];te===void 0||function he(_e,ve){if(_e===ve)return 1;if(Array.isArray(_e)&&Array.isArray(ve)&&_e.length===ve.length){for(var Me=0;Me<_e.length;Me+=1)if(!he(_e[Me],ve[Me]))return;return 1}}(te,K.value)||(K.type==="SID"&&(te=bl(te,P)),B[K.op]={name:K.name,type:K.type,value:te})}return B}function rM(T,F){var P=new We.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return P.dict=tM(wi,T,F),P}function nM(T){var F=new We.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return F.topDicts=[{name:"topDict_0",type:"TABLE",value:T}],F}function az(T){for(var F=new We.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),P=0;P<T.length;P+=1){var B=T.get(P),W=function(K){for(var te=[],he=K.path,_e=(te.push({name:"width",type:"NUMBER",value:K.advanceWidth}),0),ve=0,Me=0;Me<he.commands.length;Me+=1){var qe,Ue,Te,ht,Xe=void 0,ot=void 0,He=he.commands[Me];(He=He.type==="Q"?{type:"C",x:He.x,y:He.y,x1:1/3*_e+2/3*He.x1,y1:1/3*ve+2/3*He.y1,x2:1/3*He.x+2/3*He.x1,y2:1/3*He.y+2/3*He.y1}:He).type==="M"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rmoveto",type:"OP",value:21}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="L"?(Xe=Math.round(He.x-_e),ot=Math.round(He.y-ve),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rlineto",type:"OP",value:5}),_e=Math.round(He.x),ve=Math.round(He.y)):He.type==="C"&&(qe=Math.round(He.x1-_e),Ue=Math.round(He.y1-ve),Te=Math.round(He.x2-He.x1),ht=Math.round(He.y2-He.y1),Xe=Math.round(He.x-He.x2),ot=Math.round(He.y-He.y2),te.push({name:"dx1",type:"NUMBER",value:qe}),te.push({name:"dy1",type:"NUMBER",value:Ue}),te.push({name:"dx2",type:"NUMBER",value:Te}),te.push({name:"dy2",type:"NUMBER",value:ht}),te.push({name:"dx",type:"NUMBER",value:Xe}),te.push({name:"dy",type:"NUMBER",value:ot}),te.push({name:"rrcurveto",type:"OP",value:8}),_e=Math.round(He.x),ve=Math.round(He.y))}return te.push({name:"endchar",type:"OP",value:14}),te}(B);F.charStrings.push({name:B.name,type:"CHARSTRING",value:W})}return F}var oM={parse:function(T,F,P){P.tables.cff={},he=T,B=F,(W={}).formatMajor=Ge.getCard8(he,B),W.formatMinor=Ge.getCard8(he,B+1),W.size=Ge.getCard8(he,B+2),W.offsetSize=Ge.getCard8(he,B+3),W.startOffset=B,W.endOffset=B+4;var he=Fr(T,W.endOffset,Ge.bytesToString),B=Fr(T,he.endOffset),W=Fr(T,B.endOffset,Ge.bytesToString),he=Fr(T,W.endOffset);if(P.gsubrs=he.objects,P.gsubrsBias=Yr(P.gsubrs),(he=Oa(T,F,B.objects,W.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+he.length);if(B=he[0],(P.tables.cff.topDict=B)._privateDict&&(P.defaultWidthX=B._privateDict.defaultWidthX,P.nominalWidthX=B._privateDict.nominalWidthX),B.ros[0]!==void 0&&B.ros[1]!==void 0&&(P.isCIDFont=!0),P.isCIDFont){var he=B.fdArray,K=B.fdSelect;if(he===0||K===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");he=Oa(T,F,Fr(T,he+=F).objects,W.objects),B._fdArray=he,B._fdSelect=function(Ue,Te,ht,Xe){var ot,He=[],Ye=new Ge.Parser(Ue,Te);if((Ue=Ye.parseCard8())===0)for(var br=0;br<ht;br++){if(Xe<=(ot=Ye.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");He.push(ot)}else{if(Ue!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ue);var nn,wr=Ye.parseCard16(),Cr=Ye.parseCard16();if(Cr!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Cr);for(var wn=0;wn<wr;wn++){if(ot=Ye.parseCard8(),nn=Ye.parseCard16(),Xe<=ot)throw new Error("CFF table CID Font FDSelect has bad FD index value "+ot+" (FD count "+Xe+")");if(ht<nn)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+nn);for(;Cr<nn;Cr++)He.push(ot);Cr=nn}if(nn!==ht)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+nn)}return He}(T,K+=F,P.numGlyphs,he.length)}var K=F+B.private[1],he=yl(T,K,B.private[0],W.objects),te=(P.defaultWidthX=he.defaultWidthX,P.nominalWidthX=he.nominalWidthX,he.subrs!==0?(K=Fr(T,K+he.subrs),P.subrs=K.objects,P.subrsBias=Yr(P.subrs)):(P.subrs=[],P.subrsBias=0),Fr(T,F+B.charStrings)),he=(P.nGlyphs=te.objects.length,function(Me,qe,Ue,Te){var ht=new Ge.Parser(Me,qe),Xe=(--Ue,[".notdef"]);if((Me=ht.parseCard8())===0)for(var ot=0;ot<Ue;ot+=1)He=ht.parseSID(),Xe.push($s(Te,He));else if(Me===1)for(;Xe.length<=Ue;)for(var He=ht.parseSID(),Ye=ht.parseCard8(),br=0;br<=Ye;br+=1)Xe.push($s(Te,He)),He+=1;else{if(Me!==2)throw new Error("Unknown charset format "+Me);for(;Xe.length<=Ue;){He=ht.parseSID(),Ye=ht.parseCard16();for(var nn=0;nn<=Ye;nn+=1)Xe.push($s(Te,He)),He+=1}}return Xe}(T,F+B.charset,P.nGlyphs,W.objects));B.encoding===0?P.cffEncoding=new _t(oe,he):B.encoding===1?P.cffEncoding=new _t(be,he):P.cffEncoding=function(Me,qe,Ue){var Te={},ht=new Ge.Parser(Me,qe);if((Me=ht.parseCard8())===0)for(var Xe=ht.parseCard8(),ot=0;ot<Xe;ot+=1)Te[Ye=ht.parseCard8()]=ot;else{if(Me!==1)throw new Error("Unknown encoding format "+Me);for(var He=ht.parseCard8(),Ye=1,br=0;br<He;br+=1)for(var nn=ht.parseCard8(),wr=ht.parseCard8(),Cr=nn;Cr<=nn+wr;Cr+=1)Te[Cr]=Ye,Ye+=1}return new _t(Te,Ue)}(T,F+B.encoding,he),P.encoding=P.encoding||P.cffEncoding,P.glyphs=new ur.GlyphSet(P);for(var _e=0;_e<P.nGlyphs;_e+=1){var ve=te.objects[_e];P.glyphs.push(_e,ur.cffGlyphLoader(P,_e,Lo,ve))}},make:function(T,Me){for(var P,B=new We.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),W=1/Me.unitsPerEm,W={version:Me.version,fullName:Me.fullName,familyName:Me.familyName,weight:Me.weightName,fontBBox:Me.fontBBox||[0,0,0,0],fontMatrix:[W,0,0,W,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},K=[],te=1;te<T.length;te+=1)P=T.get(te),K.push(P.name);var he,_e,ve=[],Me=(B.header=new We.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),B.nameIndex=function(Ue){var Te=new We.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Te.names=[];for(var ht=0;ht<Ue.length;ht+=1)Te.names.push({name:"name_"+ht,type:"NAME",value:Ue[ht]});return Te}([Me.postScriptName]),rM(W,ve)),qe=(B.topDictIndex=nM(Me),B.globalSubrIndex=new We.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),B.charsets=function(Ue,Te){for(var ht=new We.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Ue.length;Xe+=1){var ot=bl(Ue[Xe],Te);ht.fields.push({name:"glyph_"+Xe,type:"SID",value:ot})}return ht}(K,ve),B.charStringsIndex=az(T),B.privateDict=(qe={},he=ve,(_e=new We.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=tM(Hn,qe,he),_e),B.stringIndex=function(Ue){var Te=new We.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Te.strings=[];for(var ht=0;ht<Ue.length;ht+=1)Te.strings.push({name:"string_"+ht,type:"STRING",value:Ue[ht]});return Te}(ve),B.header.sizeOf()+B.nameIndex.sizeOf()+B.topDictIndex.sizeOf()+B.stringIndex.sizeOf()+B.globalSubrIndex.sizeOf());return W.charset=qe,W.encoding=0,W.charStrings=W.charset+B.charsets.sizeOf(),W.private[1]=W.charStrings+B.charStringsIndex.sizeOf(),Me=rM(W,ve),B.topDictIndex=nM(Me),B}},iM={parse:function(B,F){var P={},B=new Ge.Parser(B,F);return P.version=B.parseVersion(),P.fontRevision=Math.round(1e3*B.parseFixed())/1e3,P.checkSumAdjustment=B.parseULong(),P.magicNumber=B.parseULong(),O.argument(P.magicNumber===1594834165,"Font header has wrong magic number."),P.flags=B.parseUShort(),P.unitsPerEm=B.parseUShort(),P.created=B.parseLongDateTime(),P.modified=B.parseLongDateTime(),P.xMin=B.parseShort(),P.yMin=B.parseShort(),P.xMax=B.parseShort(),P.yMax=B.parseShort(),P.macStyle=B.parseUShort(),P.lowestRecPPEM=B.parseUShort(),P.fontDirectionHint=B.parseShort(),P.indexToLocFormat=B.parseShort(),P.glyphDataFormat=B.parseShort(),P},make:function(T){var F=Math.round(new Date().getTime()/1e3)+2082844800,P=F;return T.createdTimestamp&&(P=T.createdTimestamp+2082844800),new We.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:P},{name:"modified",type:"LONGDATETIME",value:F},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],T)}},ke={parse:function(B,F){var P={},B=new Ge.Parser(B,F);return P.version=B.parseVersion(),P.ascender=B.parseShort(),P.descender=B.parseShort(),P.lineGap=B.parseShort(),P.advanceWidthMax=B.parseUShort(),P.minLeftSideBearing=B.parseShort(),P.minRightSideBearing=B.parseShort(),P.xMaxExtent=B.parseShort(),P.caretSlopeRise=B.parseShort(),P.caretSlopeRun=B.parseShort(),P.caretOffset=B.parseShort(),B.relativeOffset+=8,P.metricDataFormat=B.parseShort(),P.numberOfHMetrics=B.parseUShort(),P},make:function(T){return new We.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],T)}},St={parse:function(T,F,P,B,W){for(var K,te,he=new Ge.Parser(T,F),_e=0;_e<B;_e+=1){_e<P&&(K=he.parseUShort(),te=he.parseShort());var ve=W.get(_e);ve.advanceWidth=K,ve.leftSideBearing=te}},make:function(T){for(var F=new We.Table("hmtx",[]),P=0;P<T.length;P+=1){var W=T.get(P),B=W.advanceWidth||0,W=W.leftSideBearing||0;F.fields.push({name:"advanceWidth_"+P,type:"USHORT",value:B}),F.fields.push({name:"leftSideBearing_"+P,type:"SHORT",value:W})}return F}},qt={make:function(T){for(var F=new We.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:T.length}]),P="",B=12+4*T.length,W=0;W<T.length;++W){var K=P.indexOf(T[W]);K<0&&(K=P.length,P+=T[W]),F.fields.push({name:"offset "+W,type:"USHORT",value:B+K}),F.fields.push({name:"length "+W,type:"USHORT",value:T[W].length})}return F.fields.push({name:"stringPool",type:"CHARARRAY",value:P}),F},parse:function(T,F){for(var P=new Ge.Parser(T,F),B=P.parseULong(),W=(O.argument(B===1,"Unsupported ltag table version."),P.skip("uLong",1),P.parseULong()),K=[],te=0;te<W;te++){for(var he="",_e=F+P.parseUShort(),ve=P.parseUShort(),Me=_e;Me<_e+ve;++Me)he+=String.fromCharCode(T.getInt8(Me));K.push(he)}return K}},xt={parse:function(B,F){var P={},B=new Ge.Parser(B,F);return P.version=B.parseVersion(),P.numGlyphs=B.parseUShort(),P.version===1&&(P.maxPoints=B.parseUShort(),P.maxContours=B.parseUShort(),P.maxCompositePoints=B.parseUShort(),P.maxCompositeContours=B.parseUShort(),P.maxZones=B.parseUShort(),P.maxTwilightPoints=B.parseUShort(),P.maxStorage=B.parseUShort(),P.maxFunctionDefs=B.parseUShort(),P.maxInstructionDefs=B.parseUShort(),P.maxStackElements=B.parseUShort(),P.maxSizeOfInstructions=B.parseUShort(),P.maxComponentElements=B.parseUShort(),P.maxComponentDepth=B.parseUShort()),P},make:function(T){return new We.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:T}])}},An=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],mt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Yn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},zt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Pn="utf-16",Vt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},_s={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function pa(T,F,P){switch(T){case 0:return Pn;case 1:return _s[P]||Vt[F];case 3:if(F===1||F===10)return Pn}}function ls(T){var F,P={};for(F in T)P[T[F]]=parseInt(F);return P}function Fa(T,F,P,B,W,K){return new We.Record("NameRecord",[{name:"platformID",type:"USHORT",value:T},{name:"encodingID",type:"USHORT",value:F},{name:"languageID",type:"USHORT",value:P},{name:"nameID",type:"USHORT",value:B},{name:"length",type:"USHORT",value:W},{name:"offset",type:"USHORT",value:K}])}function ig(T,F){if((P=function(K,te){var he=K.length,_e=te.length-he+1;e:for(var ve=0;ve<_e;ve++)for(;ve<_e;ve++){for(var Me=0;Me<he;Me++)if(te[ve+Me]!==K[Me])continue e;return ve}return-1}(T,F))<0)for(var P=F.length,B=0,W=T.length;B<W;++B)F.push(T[B]);return P}var Lf={parse:function(T,F,P){for(var B={},W=new Ge.Parser(T,F),F=W.parseUShort(),K=W.parseUShort(),te=W.offset+W.parseUShort(),he=0;he<K;he++){var ht=W.parseUShort(),_e=W.parseUShort(),ve=W.parseUShort(),Me=W.parseUShort(),Me=An[Me]||Me,qe=W.parseUShort(),Ue=W.parseUShort(),Te=function(ot,He,Ye){switch(ot){case 0:if(He===65535)return"und";if(Ye)return Ye[He];break;case 1:return mt[He];case 3:return zt[He]}}(ht,ve,P),ht=pa(ht,_e,ve);ht!==void 0&&Te!==void 0&&(_e=void 0,(_e=ht===Pn?z.UTF16(T,te+Ue,qe):z.MACSTRING(T,te+Ue,qe,ht))&&((ve=(ve=B[Me])===void 0?B[Me]={}:ve)[Te]=_e))}return F===1&&W.parseUShort(),B},make:function(T,F){var P,B=[],W={},K=ls(An);for(P in T){var te=K[P];if(te===void 0&&(te=P),Ue=parseInt(te),isNaN(Ue))throw new Error('Name table entry "'+P+'" does not exist, see nameTableNames for complete list.');W[Ue]=T[P],B.push(Ue)}for(var he=ls(mt),_e=ls(zt),ve=[],Me=[],qe=0;qe<B.length;qe++){var Ue,Te,ht=W[Ue=B[qe]];for(Te in ht){var Xe=ht[Te],nn=1,ot=he[Te],He=Yn[ot],Ye=pa(nn,He,ot),Ye=q.MACSTRING(Xe,Ye),br=(Ye===void 0&&(nn=0,(ot=F.indexOf(Te))<0&&(ot=F.length,F.push(Te)),He=4,Ye=q.UTF16(Xe)),ig(Ye,Me)),nn=(ve.push(Fa(nn,He,ot,Ue,Ye.length,br)),_e[Te]);nn!==void 0&&(ot=ig(He=q.UTF16(Xe),Me),ve.push(Fa(3,1,nn,Ue,He.length,ot)))}}ve.sort(function(wn,mi){return wn.platformID-mi.platformID||wn.encodingID-mi.encodingID||wn.languageID-mi.languageID||wn.nameID-mi.nameID});for(var wr=new We.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ve.length},{name:"stringOffset",type:"USHORT",value:6+12*ve.length}]),Cr=0;Cr<ve.length;Cr++)wr.fields.push({name:"record_"+Cr,type:"RECORD",value:ve[Cr]});return wr.fields.push({name:"strings",type:"LITERAL",value:Me}),wr}},sg=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Ra={parse:function(T,F){var P={},B=new Ge.Parser(T,F);P.version=B.parseUShort(),P.xAvgCharWidth=B.parseShort(),P.usWeightClass=B.parseUShort(),P.usWidthClass=B.parseUShort(),P.fsType=B.parseUShort(),P.ySubscriptXSize=B.parseShort(),P.ySubscriptYSize=B.parseShort(),P.ySubscriptXOffset=B.parseShort(),P.ySubscriptYOffset=B.parseShort(),P.ySuperscriptXSize=B.parseShort(),P.ySuperscriptYSize=B.parseShort(),P.ySuperscriptXOffset=B.parseShort(),P.ySuperscriptYOffset=B.parseShort(),P.yStrikeoutSize=B.parseShort(),P.yStrikeoutPosition=B.parseShort(),P.sFamilyClass=B.parseShort(),P.panose=[];for(var W=0;W<10;W++)P.panose[W]=B.parseByte();return P.ulUnicodeRange1=B.parseULong(),P.ulUnicodeRange2=B.parseULong(),P.ulUnicodeRange3=B.parseULong(),P.ulUnicodeRange4=B.parseULong(),P.achVendID=String.fromCharCode(B.parseByte(),B.parseByte(),B.parseByte(),B.parseByte()),P.fsSelection=B.parseUShort(),P.usFirstCharIndex=B.parseUShort(),P.usLastCharIndex=B.parseUShort(),P.sTypoAscender=B.parseShort(),P.sTypoDescender=B.parseShort(),P.sTypoLineGap=B.parseShort(),P.usWinAscent=B.parseUShort(),P.usWinDescent=B.parseUShort(),1<=P.version&&(P.ulCodePageRange1=B.parseULong(),P.ulCodePageRange2=B.parseULong()),2<=P.version&&(P.sxHeight=B.parseShort(),P.sCapHeight=B.parseShort(),P.usDefaultChar=B.parseUShort(),P.usBreakChar=B.parseUShort(),P.usMaxContent=B.parseUShort()),P},make:function(T){return new We.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],T)},unicodeRanges:sg,getUnicodeRange:function(T){for(var F=0;F<sg.length;F+=1){var P=sg[F];if(T>=P.begin&&T<P.end)return F}return-1}},ETe={parse:function(T,F){var P={},B=new Ge.Parser(T,F);switch(P.version=B.parseVersion(),P.italicAngle=B.parseFixed(),P.underlinePosition=B.parseShort(),P.underlineThickness=B.parseShort(),P.isFixedPitch=B.parseULong(),P.minMemType42=B.parseULong(),P.maxMemType42=B.parseULong(),P.minMemType1=B.parseULong(),P.maxMemType1=B.parseULong(),P.version){case 1:P.names=Fe.slice();break;case 2:P.numberOfGlyphs=B.parseUShort(),P.glyphNameIndex=new Array(P.numberOfGlyphs);for(var W=0;W<P.numberOfGlyphs;W++)P.glyphNameIndex[W]=B.parseUShort();P.names=[];for(var K,te=0;te<P.numberOfGlyphs;te++)P.glyphNameIndex[te]>=Fe.length&&(K=B.parseChar(),P.names.push(B.parseString(K)));break;case 2.5:P.numberOfGlyphs=B.parseUShort(),P.offset=new Array(P.numberOfGlyphs);for(var he=0;he<P.numberOfGlyphs;he++)P.offset[he]=B.parseChar()}return P},make:function(){return new We.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},sh=new Array(9),gk=(sh[1]=function(){var T=this.offset+this.relativeOffset,F=this.parseUShort();return F===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),deltaGlyphId:this.parseUShort()}:F===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),substitute:this.parseOffset16List()}:void O.assert(!1,"0x"+T.toString(16)+": lookup type 1 format must be 1 or 2.")},sh[2]=function(){var T=this.parseUShort();return O.argument(T===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),sequences:this.parseListOfLists()}},sh[3]=function(){var T=this.parseUShort();return O.argument(T===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),alternateSets:this.parseListOfLists()}},sh[4]=function(){var T=this.parseUShort();return O.argument(T===1,"GSUB ligature table identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Le.uShort,lookupListIndex:Le.uShort});sh[5]=function(){var T,F,P=this.offset+this.relativeOffset,B=this.parseUShort();return B===1?{substFormat:B,coverage:this.parsePointer(Le.coverage),ruleSets:this.parseListOfLists(function(){var W=this.parseUShort(),K=this.parseUShort();return{input:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(K,gk)}})}:B===2?{substFormat:B,coverage:this.parsePointer(Le.coverage),classDef:this.parsePointer(Le.classDef),classSets:this.parseListOfLists(function(){var W=this.parseUShort(),K=this.parseUShort();return{classes:this.parseUShortList(W-1),lookupRecords:this.parseRecordList(K,gk)}})}:B===3?(T=this.parseUShort(),F=this.parseUShort(),{substFormat:B,coverages:this.parseList(T,Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(F,gk)}):void O.assert(!1,"0x"+P.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},sh[6]=function(){var T=this.offset+this.relativeOffset,F=this.parseUShort();return F===1?{substFormat:1,coverage:this.parsePointer(Le.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gk)}})}:F===2?{substFormat:2,coverage:this.parsePointer(Le.coverage),backtrackClassDef:this.parsePointer(Le.classDef),inputClassDef:this.parsePointer(Le.classDef),lookaheadClassDef:this.parsePointer(Le.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gk)}})}:F===3?{substFormat:3,backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),inputCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),lookupRecords:this.parseRecordList(gk)}:void O.assert(!1,"0x"+T.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},sh[7]=function(){var T=this.parseUShort(),T=(O.argument(T===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),F=new Le(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:T,extension:sh[T].call(F)}},sh[8]=function(){var T=this.parseUShort();return O.argument(T===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(Le.coverage),backtrackCoverage:this.parseList(Le.pointer(Le.coverage)),lookaheadCoverage:this.parseList(Le.pointer(Le.coverage)),substitutes:this.parseUShortList()}};var lz=new Array(9);lz[1]=function(T){return T.substFormat===1?new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)},{name:"deltaGlyphID",type:"USHORT",value:T.deltaGlyphId}]):new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)}].concat(We.ushortList("substitute",T.substitute)))},lz[3]=function(T){return O.assert(T.substFormat===1,"Lookup type 3 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)}].concat(We.tableList("altSet",T.alternateSets,function(F){return new We.Table("alternateSetTable",We.ushortList("alternate",F))})))},lz[4]=function(T){return O.assert(T.substFormat===1,"Lookup type 4 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(T.coverage)}].concat(We.tableList("ligSet",T.ligatureSets,function(F){return new We.Table("ligatureSetTable",We.tableList("ligature",F,function(P){return new We.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:P.ligGlyph}].concat(We.ushortList("component",P.components,P.components.length+1)))}))})))};var TTe={parse:function(T,F){return F=(T=new Le(T,F=F||0)).parseVersion(1),O.argument(F===1||F===1.1,"Unsupported GSUB table version."),F===1?{version:F,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(sh)}:{version:F,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(sh),variations:T.parseFeatureVariationsList()}},make:function(T){return new We.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(T.lookups,lz)}])}},ATe={parse:function(T,F){for(var P=new Ge.Parser(T,F),B=P.parseULong(),W=(O.argument(B===1,"Unsupported META table version."),P.parseULong(),P.parseULong(),P.parseULong()),K={},te=0;te<W;te++){var he=P.parseTag(),ve=P.parseULong(),_e=P.parseULong(),ve=z.UTF8(T,F+ve,_e);K[he]=ve}return K},make:function(T){var F,P=Object.keys(T).length,B="",W=16+12*P,K=new We.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:W},{name:"numTags",type:"ULONG",value:P}]);for(F in T){var te=B.length;B+=T[F],K.fields.push({name:"tag "+F,type:"TAG",value:F}),K.fields.push({name:"offset "+F,type:"ULONG",value:W+te}),K.fields.push({name:"length "+F,type:"ULONG",value:T[F].length})}return K.fields.push({name:"stringPool",type:"CHARARRAY",value:B}),K}};function kTe(T){return Math.log(T)/Math.log(2)|0}function Ire(T){for(;T.length%4!=0;)T.push(0);for(var F=0,P=0;P<T.length;P+=4)F+=(T[P]<<24)+(T[P+1]<<16)+(T[P+2]<<8)+T[P+3];return F%=Math.pow(2,32)}function ITe(T,F,P,B){return new We.Record("Table Record",[{name:"tag",type:"TAG",value:T!==void 0?T:""},{name:"checkSum",type:"ULONG",value:F!==void 0?F:0},{name:"offset",type:"ULONG",value:P!==void 0?P:0},{name:"length",type:"ULONG",value:B!==void 0?B:0}])}function DTe(T){for(var F=new We.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),P=(F.tables=T,F.numTables=T.length,Math.pow(2,kTe(F.numTables))),B=(F.searchRange=16*P,F.entrySelector=kTe(P),F.rangeShift=16*F.numTables-F.searchRange,[]),W=[],K=F.sizeOf()+ITe().sizeOf()*F.numTables;K%4!=0;)K+=1,W.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<T.length;te+=1){var he=T[te],_e=(O.argument(he.tableName.length===4,"Table name"+he.tableName+" is invalid."),he.sizeOf()),ve=ITe(he.tableName,Ire(he.encode()),K,_e);for(B.push({name:ve.tag+" Table Record",type:"RECORD",value:ve}),W.push({name:he.tableName+" table",type:"RECORD",value:he}),K+=_e,O.argument(!isNaN(K),"Something went wrong calculating the offset.");K%4!=0;)K+=1,W.push({name:"padding",type:"BYTE",value:0})}return B.sort(function(Me,qe){return Me.value.tag>qe.value.tag?1:-1}),F.fields=F.fields.concat(B),F.fields=F.fields.concat(W),F}function NTe(T,F,P){for(var B=0;B<F.length;B+=1){var W=T.charToGlyphIndex(F[B]);if(0<W)return T.glyphs.get(W).getMetrics()}return P}var wCt={make:DTe,fontToTable:function(T){for(var F,P=[],B=[],W=[],K=[],te=[],he=[],_e=[],ve=0,Me=0,qe=0,Ue=0,Te=0,ht=0;ht<T.glyphs.length;ht+=1){var Xe=T.glyphs.get(ht),ot=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+ht+"): advanceWidth is not a number.");(ot<F||F===void 0)&&0<ot&&(F=ot),ve<ot&&(ve=ot);var ot=Ra.getUnicodeRange(ot);if(ot<32)Me|=1<<ot;else if(ot<64)qe|=1<<ot-32;else if(ot<96)Ue|=1<<ot-64;else{if(!(ot<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Te|=1<<ot-96}Xe.name!==".notdef"&&(ot=Xe.getMetrics(),P.push(ot.xMin),B.push(ot.yMin),W.push(ot.xMax),K.push(ot.yMax),he.push(ot.leftSideBearing),_e.push(ot.rightSideBearing),te.push(Xe.advanceWidth))}var He,Ye={xMin:Math.min.apply(null,P),yMin:Math.min.apply(null,B),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,K),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(Ma){for(var uM=0,xk=0;xk<Ma.length;xk+=1)uM+=Ma[xk];return uM/Ma.length}(te),minLeftSideBearing:Math.min.apply(null,he),maxLeftSideBearing:Math.max.apply(null,he),minRightSideBearing:Math.min.apply(null,_e)},br=(Ye.ascender=T.ascender,Ye.descender=T.descender,iM.make({flags:3,unitsPerEm:T.unitsPerEm,xMin:Ye.xMin,yMin:Ye.yMin,xMax:Ye.xMax,yMax:Ye.yMax,lowestRecPPEM:3,createdTimestamp:T.createdTimestamp})),nn=ke.make({ascender:Ye.ascender,descender:Ye.descender,advanceWidthMax:Ye.advanceWidthMax,minLeftSideBearing:Ye.minLeftSideBearing,minRightSideBearing:Ye.minRightSideBearing,xMaxExtent:Ye.maxLeftSideBearing+(Ye.xMax-Ye.xMin),numberOfHMetrics:T.glyphs.length}),wr=xt.make(T.glyphs.length),Cr=Ra.make({xAvgCharWidth:Math.round(Ye.advanceWidthAvg),usWeightClass:T.tables.os2.usWeightClass,usWidthClass:T.tables.os2.usWidthClass,usFirstCharIndex:F,usLastCharIndex:ve,ulUnicodeRange1:Me,ulUnicodeRange2:qe,ulUnicodeRange3:Ue,ulUnicodeRange4:Te,fsSelection:T.tables.os2.fsSelection,sTypoAscender:Ye.ascender,sTypoDescender:Ye.descender,sTypoLineGap:0,usWinAscent:Ye.yMax,usWinDescent:Math.abs(Ye.yMin),ulCodePageRange1:1,sxHeight:NTe(T,"xyvw",{yMax:Math.round(Ye.ascender/2)}).yMax,sCapHeight:NTe(T,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ye).yMax,usDefaultChar:T.hasChar(" ")?32:0,usBreakChar:T.hasChar(" ")?32:0}),wn=St.make(T.glyphs),mi=fe.make(T.glyphs),_i=T.getEnglishName("fontFamily"),Do=T.getEnglishName("fontSubfamily"),Jo=_i+" "+Do,us=(us=T.getEnglishName("postScriptName"))||_i.replace(/\s/g,"")+"-"+Do,Us={};for(He in T.names)Us[He]=T.names[He];Us.uniqueID||(Us.uniqueID={en:T.getEnglishName("manufacturer")+":"+Jo}),Us.postScriptName||(Us.postScriptName={en:us}),Us.preferredFamily||(Us.preferredFamily=T.names.fontFamily),Us.preferredSubfamily||(Us.preferredSubfamily=T.names.fontSubfamily);var Yl=[],Hl=Lf.make(Us,Yl),Yl=0<Yl.length?qt.make(Yl):void 0,lh=ETe.make(),Jo=oM.make(T.glyphs,{version:T.getEnglishName("version"),fullName:Jo,familyName:_i,weightName:Do,postScriptName:us,unitsPerEm:T.unitsPerEm,fontBBox:[0,Ye.yMin,Ye.ascender,Ye.advanceWidthMax]}),_i=T.metas&&0<Object.keys(T.metas).length?ATe.make(T.metas):void 0,Do=[br,nn,wr,Cr,Hl,mi,lh,Jo,wn];Yl&&Do.push(Yl),T.tables.gsub&&Do.push(TTe.make(T.tables.gsub)),_i&&Do.push(_i);for(var Xl=Ire((us=DTe(Do)).encode()),Ji=us.fields,xl=!1,Si=0;Si<Ji.length;Si+=1)if(Ji[Si].name==="head table"){Ji[Si].value.checkSumAdjustment=2981146554-Xl,xl=!0;break}if(xl)return us;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Ire};function Dre(T,F){for(var P=0,B=T.length-1;P<=B;){var W=P+B>>>1,K=T[W].tag;if(K===F)return W;K<F?P=1+W:B=W-1}return-P-1}function OTe(T,F){for(var P=0,B=T.length-1;P<=B;){var W=P+B>>>1,K=T[W];if(K===F)return W;K<F?P=1+W:B=W-1}return-P-1}function FTe(T,F){for(var P=0,B=T.length-1;P<=B;){var W,K=P+B>>>1,te=(W=T[K]).start;if(te===F)return W;te<F?P=1+K:B=K-1}if(0<P)return F>(W=T[P-1]).end?0:W}function uz(T,F){this.font=T,this.tableName=F}function cz(T){uz.call(this,T,"gpos")}function ag(T){uz.call(this,T,"gsub")}function RTe(T,F,P){for(var B=T.subtables,W=0;W<B.length;W++){var K=B[W];if(K.substFormat===F)return K}if(P)return B.push(P),P}function MTe(T){for(var F=new ArrayBuffer(T.length),P=new Uint8Array(F),B=0;B<T.length;++B)P[B]=T[B];return F}function yk(T,F){if(!T)throw F}function PTe(T,F,P,B,W){var K=0<(F&B)?(K=T.parseByte(),P+(K=F&W?K:-K)):0<(F&W)?P:P+T.parseShort();return K}function _Ct(T,F,P){var B,W=new Ge.Parser(F,P);if(T.numberOfContours=W.parseShort(),T._xMin=W.parseShort(),T._yMin=W.parseShort(),T._xMax=W.parseShort(),T._yMax=W.parseShort(),0<T.numberOfContours){for(var K=T.endPointIndices=[],te=0;te<T.numberOfContours;te+=1)K.push(W.parseUShort());T.instructionLength=W.parseUShort(),T.instructions=[];for(var he=0;he<T.instructionLength;he+=1)T.instructions.push(W.parseByte());for(var _e=K[K.length-1]+1,ve=[],Me=0;Me<_e;Me+=1)if(B=W.parseByte(),ve.push(B),0<(8&B))for(var qe=W.parseByte(),Ue=0;Ue<qe;Ue+=1)ve.push(B),Me+=1;if(O.argument(ve.length===_e,"Bad flags."),0<K.length){var Te,ht=[];if(0<_e){for(var Xe=0;Xe<_e;Xe+=1)B=ve[Xe],(Te={}).onCurve=!!(1&B),Te.lastPointOfContour=0<=K.indexOf(Xe),ht.push(Te);for(var ot=0,He=0;He<_e;He+=1)B=ve[He],(Te=ht[He]).x=PTe(W,B,ot,2,16),ot=Te.x;for(var Ye=0,br=0;br<_e;br+=1)B=ve[br],(Te=ht[br]).y=PTe(W,B,Ye,4,32),Ye=Te.y}T.points=ht}else T.points=[]}else if(T.numberOfContours===0)T.points=[];else{T.isComposite=!0,T.points=[],T.components=[];for(var nn=!0;nn;){ve=W.parseUShort();var wr={glyphIndex:W.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ve)?0<(2&ve)?(wr.dx=W.parseShort(),wr.dy=W.parseShort()):wr.matchedPoints=[W.parseUShort(),W.parseUShort()]:0<(2&ve)?(wr.dx=W.parseChar(),wr.dy=W.parseChar()):wr.matchedPoints=[W.parseByte(),W.parseByte()],0<(8&ve)?wr.xScale=wr.yScale=W.parseF2Dot14():0<(64&ve)?(wr.xScale=W.parseF2Dot14(),wr.yScale=W.parseF2Dot14()):0<(128&ve)&&(wr.xScale=W.parseF2Dot14(),wr.scale01=W.parseF2Dot14(),wr.scale10=W.parseF2Dot14(),wr.yScale=W.parseF2Dot14()),T.components.push(wr),nn=!!(32&ve)}if(256&ve){T.instructionLength=W.parseUShort(),T.instructions=[];for(var Cr=0;Cr<T.instructionLength;Cr+=1)T.instructions.push(W.parseByte())}}}function Nre(T,F){for(var P=[],B=0;B<T.length;B+=1){var W=T[B],W={x:F.xScale*W.x+F.scale01*W.y+F.dx,y:F.scale10*W.x+F.yScale*W.y+F.dy,onCurve:W.onCurve,lastPointOfContour:W.lastPointOfContour};P.push(W)}return P}function jTe(T){var F=new X;if(T)for(var P=function(qe){for(var Ue=[],Te=[],ht=0;ht<qe.length;ht+=1){var Xe=qe[ht];Te.push(Xe),Xe.lastPointOfContour&&(Ue.push(Te),Te=[])}return O.argument(Te.length===0,"There are still points left in the current contour."),Ue}(T),B=0;B<P.length;++B){var W,K=P[B],te=K[K.length-1],he=K[0];te.onCurve?F.moveTo(te.x,te.y):he.onCurve?F.moveTo(he.x,he.y):(W={x:.5*(te.x+he.x),y:.5*(te.y+he.y)},F.moveTo(W.x,W.y));for(var _e=0;_e<K.length;++_e){var ve,Me=te,te=he,he=K[(_e+1)%K.length];te.onCurve?F.lineTo(te.x,te.y):(ve=he,Me.onCurve||(te.x,Me.x,te.y,Me.y),he.onCurve||(ve={x:.5*(te.x+he.x),y:.5*(te.y+he.y)}),F.quadraticCurveTo(te.x,te.y,ve.x,ve.y))}F.closePath()}return F}function SCt(T,F){if(F.isComposite)for(var P=0;P<F.components.length;P+=1){var B=F.components[P],W=T.get(B.glyphIndex);if(W.getPath(),W.points){var K=void 0;if(B.matchedPoints===void 0)K=Nre(W.points,B);else{if(B.matchedPoints[0]>F.points.length-1||B.matchedPoints[1]>W.points.length-1)throw Error("Matched points out of range in "+F.name);var te=F.points[B.matchedPoints[0]],he=W.points[B.matchedPoints[1]],B={xScale:B.xScale,scale01:B.scale01,scale10:B.scale10,yScale:B.yScale,dx:0,dy:0},he=Nre([he],B)[0];B.dx=te.x-he.x,B.dy=te.y-he.y,K=Nre(W.points,B)}F.points=F.points.concat(K)}}return jTe(F.points)}(cz.prototype=uz.prototype={searchTag:Dre,binSearch:OTe,getTable:function(T){var F=this.font.tables[this.tableName];return F=!F&&T?this.font.tables[this.tableName]=this.createDefaultTable():F},getScriptNames:function(){var T=this.getTable();return T?T.scripts.map(function(F){return F.tag}):[]},getDefaultScriptName:function(){var T=this.getTable();if(T){for(var F=!1,P=0;P<T.scripts.length;P++){var B=T.scripts[P].tag;if(B==="DFLT")return B;B==="latn"&&(F=!0)}return F?"latn":void 0}},getScriptTable:function(T,F){var P,B=this.getTable(F);if(B)return P=B.scripts,0<=(B=Dre(B.scripts,T=T||"DFLT"))?P[B].script:F?(P.splice(-1-B,0,F={tag:T,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),F.script):void 0},getLangSysTable:function(W,F,P){var B,W=this.getScriptTable(W,P);if(W)return F&&F!=="dflt"&&F!=="DFLT"?0<=(B=Dre(W.langSysRecords,F))?W.langSysRecords[B].langSys:P?(W.langSysRecords.splice(-1-B,0,P={tag:F,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),P.langSys):void 0:W.defaultLangSys},getFeatureTable:function(T,F,P,B){if(T=this.getLangSysTable(T,F,B),T){for(var W,K=T.featureIndexes,te=this.font.tables[this.tableName].features,he=0;he<K.length;he++)if((W=te[K[he]]).tag===P)return W.feature;if(B)return F=te.length,O.assert(F===0||P>=te[F-1].tag,"Features must be added in alphabetical order."),te.push(W={tag:P,feature:{params:0,lookupListIndexes:[]}}),K.push(F),W.feature}},getLookupTables:function(K,F,P,B,W){var K=this.getFeatureTable(K,F,P,W),te=[];if(K){for(var he,_e=K.lookupListIndexes,ve=this.font.tables[this.tableName].lookups,Me=0;Me<_e.length;Me++)(he=ve[_e[Me]]).lookupType===B&&te.push(he);if(te.length===0&&W)return F=ve.length,ve.push(he={lookupType:B,lookupFlag:0,subtables:[],markFilteringSet:void 0}),_e.push(F),[he]}return te},getGlyphClass:function(T,F){switch(T.format){case 1:return T.startGlyph<=F&&F<T.startGlyph+T.classes.length?T.classes[F-T.startGlyph]:0;case 2:var P=FTe(T.ranges,F);return P?P.classId:0}},getCoverageIndex:function(T,F){switch(T.format){case 1:var P=OTe(T.glyphs,F);return 0<=P?P:-1;case 2:return P=FTe(T.ranges,F),P?P.index+F-P.start:-1}},expandCoverage:function(T){if(T.format===1)return T.glyphs;for(var F=[],P=T.ranges,B=0;B<P.length;B++)for(var W=P[B],K=W.start,te=W.end,he=K;he<=te;he++)F.push(he);return F}}).init=function(){var T=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(T)},cz.prototype.getKerningValue=function(T,F,P){for(var B=0;B<T.length;B++)for(var W=T[B].subtables,K=0;K<W.length;K++){var te=W[K],he=this.getCoverageIndex(te.coverage,F);if(!(he<0))switch(te.posFormat){case 1:for(var _e=te.pairSets[he],ve=0;ve<_e.length;ve++){var Me=_e[ve];if(Me.secondGlyph===P)return Me.value1&&Me.value1.xAdvance||0}break;case 2:var Ue=this.getGlyphClass(te.classDef1,F),qe=this.getGlyphClass(te.classDef2,P),Ue=te.classRecords[Ue][qe];return Ue.value1&&Ue.value1.xAdvance||0}}return 0},cz.prototype.getKerningTables=function(T,F){if(this.font.tables.gpos)return this.getLookupTables(T,F,"kern",2)},(ag.prototype=uz.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},ag.prototype.getSingle=function(T,F,P){for(var B=[],W=this.getLookupTables(F,P,T,1),K=0;K<W.length;K++)for(var te=W[K].subtables,he=0;he<te.length;he++){var _e=te[he],ve=this.expandCoverage(_e.coverage),Me=void 0;if(_e.substFormat===1)for(var qe=_e.deltaGlyphId,Me=0;Me<ve.length;Me++){var Ue=ve[Me];B.push({sub:Ue,by:Ue+qe})}else{var Te=_e.substitute;for(Me=0;Me<ve.length;Me++)B.push({sub:ve[Me],by:Te[Me]})}}return B},ag.prototype.getAlternates=function(T,F,P){for(var B=[],W=this.getLookupTables(F,P,T,3),K=0;K<W.length;K++)for(var te=W[K].subtables,he=0;he<te.length;he++)for(var _e=te[he],ve=this.expandCoverage(_e.coverage),Me=_e.alternateSets,qe=0;qe<ve.length;qe++)B.push({sub:ve[qe],by:Me[qe]});return B},ag.prototype.getLigatures=function(T,F,P){for(var B=[],W=this.getLookupTables(F,P,T,4),K=0;K<W.length;K++)for(var te=W[K].subtables,he=0;he<te.length;he++)for(var _e=te[he],ve=this.expandCoverage(_e.coverage),Me=_e.ligatureSets,qe=0;qe<ve.length;qe++)for(var Ue=ve[qe],Te=Me[qe],ht=0;ht<Te.length;ht++){var Xe=Te[ht];B.push({sub:[Ue].concat(Xe.components),by:Xe.ligGlyph})}return B},ag.prototype.addSingle=function(T,F,P,B){P=RTe(this.getLookupTables(P,B,T,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),O.assert(P.coverage.format===1,"Ligature: unable to modify coverage table format "+P.coverage.format),B=F.sub,T=this.binSearch(P.coverage.glyphs,B),T<0&&(P.coverage.glyphs.splice(T=-1-T,0,B),P.substitute.splice(T,0,0)),P.substitute[T]=F.by},ag.prototype.addAlternate=function(T,F,P,B){P=RTe(this.getLookupTables(P,B,T,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),O.assert(P.coverage.format===1,"Ligature: unable to modify coverage table format "+P.coverage.format),B=F.sub,T=this.binSearch(P.coverage.glyphs,B),T<0&&(P.coverage.glyphs.splice(T=-1-T,0,B),P.alternateSets.splice(T,0,0)),P.alternateSets[T]=F.by},ag.prototype.addLigature=function(K,_e,he,W){var he=this.getLookupTables(he,W,K,4,!0)[0],W=he.subtables[0],K=(W||(he.subtables[0]=W={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),O.assert(W.coverage.format===1,"Ligature: unable to modify coverage table format "+W.coverage.format),_e.sub[0]),te=_e.sub.slice(1),he={ligGlyph:_e.by,components:te},_e=this.binSearch(W.coverage.glyphs,K);if(0<=_e){for(var ve=W.ligatureSets[_e],Me=0;Me<ve.length;Me++)if(function(qe,Ue){var Te=qe.length;if(Te===Ue.length){for(var ht=0;ht<Te;ht++)if(qe[ht]!==Ue[ht])return;return 1}}(ve[Me].components,te))return;ve.push(he)}else W.coverage.glyphs.splice(_e=-1-_e,0,K),W.ligatureSets.splice(_e,0,[he])},ag.prototype.getFeature=function(T,F,P){if(/ss\d\d/.test(T))return this.getSingle(T,F,P);switch(T){case"aalt":case"salt":return this.getSingle(T,F,P).concat(this.getAlternates(T,F,P));case"dlig":case"liga":case"rlig":return this.getLigatures(T,F,P)}},ag.prototype.add=function(T,F,P,B){if(/ss\d\d/.test(T))return this.addSingle(T,F,P,B);switch(T){case"aalt":case"salt":return typeof F.by=="number"?this.addSingle(T,F,P,B):this.addAlternate(T,F,P,B);case"dlig":case"liga":case"rlig":return this.addLigature(T,F,P,B)}};var LTe={getPath:jTe,parse:function(T,F,P,B){for(var W=new ur.GlyphSet(B),K=0;K<P.length-1;K+=1){var te=P[K];te!==P[K+1]?W.push(K,ur.ttfGlyphLoader(B,K,_Ct,T,F+te,SCt)):W.push(K,ur.glyphLoader(B,K))}return W}};function BTe(T){this.font=T,this.getCommands=function(F){return LTe.getPath(F).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function CCt(T){return T}function $Te(T){return Math.sign(T)*Math.round(Math.abs(T))}function ECt(T){return Math.sign(T)*Math.round(Math.abs(2*T))/2}function TCt(T){return Math.sign(T)*(Math.round(Math.abs(T)+.5)-.5)}function ACt(T){return Math.sign(T)*Math.ceil(Math.abs(T))}function kCt(T){return Math.sign(T)*Math.floor(Math.abs(T))}function zTe(T){var F=this.srPeriod,P=this.srPhase,B=1;return T<0&&(T=-T,B=-1),T+=this.srThreshold-P,T=Math.trunc(T/F)*F,(T+=P)<0?P*B:T*B}var lg={x:1,y:0,axis:"x",distance:function(T,F,P,B){return(P?T.xo:T.x)-(B?F.xo:F.x)},interpolate:function(T,F,P,B){var W,K,te,he,_e,ve,Me;if(!B||B===this)return W=T.xo-F.xo,K=T.xo-P.xo,_e=F.x-F.xo,ve=P.x-P.xo,(Me=(te=Math.abs(W))+(he=Math.abs(K)))===0?void(T.x=T.xo+(_e+ve)/2):void(T.x=T.xo+(_e*he+ve*te)/Me);W=B.distance(T,F,!0,!0),K=B.distance(T,P,!0,!0),_e=B.distance(F,F,!1,!0),ve=B.distance(P,P,!1,!0),(Me=(te=Math.abs(W))+(he=Math.abs(K)))===0?lg.setRelative(T,T,(_e+ve)/2,B,!0):lg.setRelative(T,T,(_e*he+ve*te)/Me,B,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(T,F,P,B,W){var K,te;B&&B!==this?(K=W?F.xo:F.x,te=W?F.yo:F.y,K+=P*B.x,te+=P*B.y,T.x=K+(T.y-te)/B.normalSlope):T.x=(W?F.xo:F.x)+P},slope:0,touch:function(T){T.xTouched=!0},touched:function(T){return T.xTouched},untouch:function(T){T.xTouched=!1}},ab={x:0,y:1,axis:"y",distance:function(T,F,P,B){return(P?T.yo:T.y)-(B?F.yo:F.y)},interpolate:function(T,F,P,B){var W,K,te,he,_e,ve,Me;if(!B||B===this)return W=T.yo-F.yo,K=T.yo-P.yo,_e=F.y-F.yo,ve=P.y-P.yo,(Me=(te=Math.abs(W))+(he=Math.abs(K)))===0?void(T.y=T.yo+(_e+ve)/2):void(T.y=T.yo+(_e*he+ve*te)/Me);W=B.distance(T,F,!0,!0),K=B.distance(T,P,!0,!0),_e=B.distance(F,F,!1,!0),ve=B.distance(P,P,!1,!0),(Me=(te=Math.abs(W))+(he=Math.abs(K)))===0?ab.setRelative(T,T,(_e+ve)/2,B,!0):ab.setRelative(T,T,(_e*he+ve*te)/Me,B,!0)},normalSlope:0,setRelative:function(T,F,P,B,W){var K,te;B&&B!==this?(K=W?F.xo:F.x,te=W?F.yo:F.y,K+=P*B.x,te+=P*B.y,T.y=te+B.normalSlope*(T.x-K)):T.y=(W?F.yo:F.y)+P},slope:Number.POSITIVE_INFINITY,touch:function(T){T.yTouched=!0},touched:function(T){return T.yTouched},untouch:function(T){T.yTouched=!1}};function sM(T,F){this.x=T,this.y=F,this.axis=void 0,this.slope=F/T,this.normalSlope=-T/F,Object.freeze(this)}function aM(T,F){var P=Math.sqrt(T*T+F*F);return F/=P,(T/=P)===1&&F===0?lg:T===0&&F===1?ab:new sM(T,F)}function lb(T,F,P,B){this.x=this.xo=Math.round(64*T)/64,this.y=this.yo=Math.round(64*F)/64,this.lastPointOfContour=P,this.onCurve=B,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(lg),Object.freeze(ab),sM.prototype.distance=function(T,F,P,B){return this.x*lg.distance(T,F,P,B)+this.y*ab.distance(T,F,P,B)},sM.prototype.interpolate=function(T,W,K,B){var te=B.distance(T,W,!0,!0),he=B.distance(T,K,!0,!0),W=B.distance(W,W,!1,!0),K=B.distance(K,K,!1,!0),te=Math.abs(te),he=Math.abs(he),_e=te+he;_e===0?this.setRelative(T,T,(W+K)/2,B,!0):this.setRelative(T,T,(W*he+K*te)/_e,B,!0)},sM.prototype.setRelative=function(T,K,_e,ve,he){var te=he?K.xo:K.x,he=he?K.yo:K.y,K=te+_e*(ve=ve||this).x,te=he+_e*ve.y,he=ve.normalSlope,_e=this.slope,ve=T.x,Me=T.y;T.x=(_e*ve-he*K+te-Me)/(_e-he),T.y=_e*(T.x-ve)+Me},sM.prototype.touch=function(T){T.xTouched=!0,T.yTouched=!0},lb.prototype.nextTouched=function(T){for(var F=this.nextPointOnContour;!T.touched(F)&&F!==this;)F=F.nextPointOnContour;return F},lb.prototype.prevTouched=function(T){for(var F=this.prevPointOnContour;!T.touched(F)&&F!==this;)F=F.prevPointOnContour;return F};var lM=Object.freeze(new lb(0,0)),ICt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function f1(T,F){switch(this.env=T,this.stack=[],this.prog=F,T){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=lg,this.round=$Te}}function fz(T){for(var F=T.tZone=new Array(T.gZone.length),P=0;P<F.length;P++)F[P]=new lb(0,0)}function UTe(T,F){var P,B=T.prog,W=T.ip,K=1;do if((P=B[++W])===88)K++;else if(P===89)K--;else if(P===64)W+=B[W+1]+1;else if(P===65)W+=2*B[W+1]+1;else if(176<=P&&P<=183)W+=P-176+1;else if(184<=P&&P<=191)W+=2*(P-184+1);else if(F&&K===1&&P===27)break;while(0<K);T.ip=W}function VTe(T,F){c.DEBUG&&console.log(F.step,"SVTCA["+T.axis+"]"),F.fv=F.pv=F.dpv=T}function GTe(T,F){c.DEBUG&&console.log(F.step,"SPVTCA["+T.axis+"]"),F.pv=F.dpv=T}function WTe(T,F){c.DEBUG&&console.log(F.step,"SFVTCA["+T.axis+"]"),F.fv=T}function qTe(T,F){var P,W=F.stack,B=W.pop(),W=W.pop(),K=F.z2[B],te=F.z1[W];c.DEBUG&&console.log("SPVTL["+T+"]",B,W),B=T?(P=K.y-te.y,te.x-K.x):(P=te.x-K.x,te.y-K.y),F.pv=F.dpv=aM(P,B)}function HTe(T,F){var P,W=F.stack,B=W.pop(),W=W.pop(),K=F.z2[B],te=F.z1[W];c.DEBUG&&console.log("SFVTL["+T+"]",B,W),B=T?(P=K.y-te.y,te.x-K.x):(P=te.x-K.x,te.y-K.y),F.fv=aM(P,B)}function Ore(T){c.DEBUG&&console.log(T.step,"POP[]"),T.stack.pop()}function YTe(T,F){var P=F.stack.pop(),B=F.z0[P],W=F.fv,K=F.pv,te=(c.DEBUG&&console.log(F.step,"MDAP["+T+"]",P),K.distance(B,lM));T&&(te=F.round(te)),W.setRelative(B,lM,te,K),W.touch(B),F.rp0=F.rp1=P}function XTe(T,F){var P,B,W,K=F.z2,te=K.length-2;c.DEBUG&&console.log(F.step,"IUP["+T.axis+"]");for(var he=0;he<te;he++)P=K[he],T.touched(P)||(B=P.prevTouched(T))!==P&&(B===(W=P.nextTouched(T))&&T.setRelative(P,P,T.distance(B,B,!1,!0),T,!0),T.interpolate(P,B,W,T))}function KTe(T,F){for(var P=F.stack,B=T?F.rp1:F.rp2,W=(T?F.z0:F.z1)[B],K=F.fv,te=F.pv,he=F.loop,_e=F.z2;he--;){var ve=P.pop(),Me=_e[ve],qe=te.distance(W,W,!1,!0);K.setRelative(Me,Me,qe,te),K.touch(Me),c.DEBUG&&console.log(F.step,(1<F.loop?"loop "+(F.loop-he)+": ":"")+"SHP["+(T?"rp1":"rp2")+"]",ve)}F.loop=1}function ZTe(T,F){for(var P=F.stack,te=T?F.rp1:F.rp2,B=(T?F.z0:F.z1)[te],W=F.fv,K=F.pv,te=P.pop(),he=F.z2[F.contours[te]],_e=he,ve=(c.DEBUG&&console.log(F.step,"SHC["+T+"]",te),K.distance(B,B,!1,!0));_e!==B&&W.setRelative(_e,_e,ve,K),(_e=_e.nextPointOnContour)!==he;);}function QTe(T,F){var P,B,he=F.stack,W=T?F.rp1:F.rp2,W=(T?F.z0:F.z1)[W],K=F.fv,te=F.pv,he=he.pop();switch(c.DEBUG&&console.log(F.step,"SHZ["+T+"]",he),he){case 0:P=F.tZone;break;case 1:P=F.gZone;break;default:throw new Error("Invalid zone")}for(var _e=te.distance(W,W,!1,!0),ve=P.length-2,Me=0;Me<ve;Me++)B=P[Me],K.setRelative(B,B,_e,te)}function JTe(T,F){var B=F.stack,P=B.pop()/64,B=B.pop(),W=F.z1[B],K=F.z0[F.rp0],te=F.fv,he=F.pv;te.setRelative(W,K,P,he),te.touch(W),c.DEBUG&&console.log(F.step,"MSIRP["+T+"]",P,B),F.rp1=F.rp0,F.rp2=B,T&&(F.rp0=B)}function eAe(T,F){var P=F.stack,he=P.pop(),P=P.pop(),B=F.z0[P],W=F.fv,K=F.pv,te=F.cvt[he],he=(c.DEBUG&&console.log(F.step,"MIAP["+T+"]",he,"(",te,")",P),K.distance(B,lM));T&&(Math.abs(he-te)<F.cvCutIn&&(he=te),he=F.round(he)),W.setRelative(B,lM,he,K),F.zp0===0&&(B.xo=B.x,B.yo=B.y),W.touch(B),F.rp0=F.rp1=P}function tAe(T,F){var P=F.stack,B=P.pop(),W=F.z2[B];c.DEBUG&&console.log(F.step,"GC["+T+"]",B),P.push(64*F.dpv.distance(W,lM,T,!1))}function rAe(T,F){var B=F.stack,P=B.pop(),B=B.pop(),W=F.z1[P],K=F.z0[B],K=F.dpv.distance(K,W,T,T);c.DEBUG&&console.log(F.step,"MD["+T+"]",P,B,"->",K),F.stack.push(Math.round(64*K))}function Fre(T,F){var P=F.stack,B=P.pop(),W=F.fv,K=F.pv,te=F.ppem,he=F.deltaBase+16*(T-1),_e=F.deltaShift,ve=F.z0;c.DEBUG&&console.log(F.step,"DELTAP["+T+"]",B,P);for(var Me=0;Me<B;Me++){var qe=P.pop(),Ue=P.pop();he+((240&Ue)>>4)===te&&(0<=(Ue=(15&Ue)-8)&&Ue++,c.DEBUG&&console.log(F.step,"DELTAPFIX",qe,"by",Ue*_e),qe=ve[qe],W.setRelative(qe,qe,Ue*_e,K))}}function dz(T,F){var P=F.stack,B=P.pop();c.DEBUG&&console.log(F.step,"ROUND[]"),P.push(64*F.round(B/64))}function Rre(T,F){var P=F.stack,B=P.pop(),W=F.ppem,K=F.deltaBase+16*(T-1),te=F.deltaShift;c.DEBUG&&console.log(F.step,"DELTAC["+T+"]",B,P);for(var he=0;he<B;he++){var _e=P.pop(),ve=P.pop();K+((240&ve)>>4)===W&&(0<=(ve=(15&ve)-8)&&ve++,ve=ve*te,c.DEBUG&&console.log(F.step,"DELTACFIX",_e,"by",ve),F.cvt[_e]+=ve)}}function nAe(T,F){var P,W=F.stack,B=W.pop(),W=W.pop(),K=F.z2[B],te=F.z1[W];c.DEBUG&&console.log(F.step,"SDPVTL["+T+"]",B,W),B=T?(P=K.y-te.y,te.x-K.x):(P=te.x-K.x,te.y-K.y),F.dpv=aM(P,B)}function d1(T,F){var P=F.stack,B=F.prog,W=F.ip;c.DEBUG&&console.log(F.step,"PUSHB["+T+"]");for(var K=0;K<T;K++)P.push(B[++W]);F.ip=W}function p1(T,F){var P=F.ip,B=F.prog,W=F.stack;c.DEBUG&&console.log(F.ip,"PUSHW["+T+"]");for(var K=0;K<T;K++){var te=B[++P]<<8|B[++P];32768&te&&(te=-(1+(65535^te))),W.push(te)}F.ip=P}function cr(T,F,P,B,W,K){var te,he,ve=K.stack,_e=T&&ve.pop(),ve=ve.pop(),Me=K.rp0,Me=K.z0[Me],qe=K.z1[ve],Ue=K.minDis,Te=K.fv,ht=K.dpv,Xe=te=ht.distance(qe,Me,!0,!0),ot=0<=Xe?1:-1;Xe=Math.abs(Xe),T&&(he=K.cvt[_e],B&&Math.abs(Xe-he)<K.cvCutIn&&(Xe=he)),P&&Xe<Ue&&(Xe=Ue),B&&(Xe=K.round(Xe)),Te.setRelative(qe,Me,ot*Xe,ht),Te.touch(qe),c.DEBUG&&console.log(K.step,(T?"MIRP[":"MDRP[")+(F?"M":"m")+(P?">":"_")+(B?"R":"_")+(W===0?"Gr":W===1?"Bl":W===2?"Wh":"")+"]",T?_e+"("+K.cvt[_e]+","+he+")":"",ve,"(d =",te,"->",ot*Xe,")"),K.rp1=K.rp0,K.rp2=ve,F&&(K.rp0=ve)}BTe.prototype.exec=function(T,F){if(typeof F!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var P=this.font,B=this._prepState;if(!B||B.ppem!==F){var W=this._fpgmState;if(!W){f1.prototype=ICt,(W=this._fpgmState=new f1("fpgm",P.tables.fpgm)).funcs=[],W.font=P,c.DEBUG&&(console.log("---EXEC FPGM---"),W.step=-1);try{bk(W)}catch(ve){return console.log("Hinting error in FPGM:"+ve),void(this._errorState=3)}}f1.prototype=W,(B=this._prepState=new f1("prep",P.tables.prep)).ppem=F;var K=P.tables.cvt;if(K)for(var te=B.cvt=new Array(K.length),he=F/P.unitsPerEm,_e=0;_e<K.length;_e++)te[_e]=K[_e]*he;else B.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),B.step=-1);try{bk(B)}catch(ve){this._errorState<2&&console.log("Hinting error in PREP:"+ve),this._errorState=2}}if(!(1<this._errorState))try{return DCt(T,B)}catch(ve){this._errorState<1&&(console.log("Hinting error:"+ve),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var DCt=function(T,F){var P=F.ppem/F.font.unitsPerEm,B=P,W=T.components;if(f1.prototype=F,W){for(var K=F.font,te=[],he=[],_e=0;_e<W.length;_e++){var ve=W[_e],Me=K.glyphs.get(ve.glyphIndex),qe=new f1("glyf",Me.instructions);c.DEBUG&&(console.log("---EXEC COMP "+_e+"---"),qe.step=-1),oAe(Me,qe,P,B);for(var Ue=Math.round(ve.dx*P),Te=Math.round(ve.dy*B),ht=qe.gZone,Xe=qe.contours,ot=0;ot<ht.length;ot++){var He=ht[ot];He.xTouched=He.yTouched=!1,He.xo=He.x=He.x+Ue,He.yo=He.y=He.y+Te}var Ye=te.length;te.push.apply(te,ht);for(var br=0;br<Xe.length;br++)he.push(Xe[br]+Ye)}T.instructions&&!qe.inhibitGridFit&&((qe=new f1("glyf",T.instructions)).gZone=qe.z0=qe.z1=qe.z2=te,qe.contours=he,te.push(new lb(0,0),new lb(Math.round(T.advanceWidth*P),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),qe.step=-1),bk(qe),te.length-=2)}else qe=new f1("glyf",T.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),qe.step=-1),oAe(T,qe,P,B),te=qe.gZone;return te},oAe=function(T,F,P,B){for(var W,K,te,he=T.points||[],_e=he.length,ve=F.gZone=F.z0=F.z1=F.z2=[],Me=F.contours=[],qe=0;qe<_e;qe++)W=he[qe],ve[qe]=new lb(W.x*P,W.y*B,W.lastPointOfContour,W.onCurve);for(var Ue=0;Ue<_e;Ue++)W=ve[Ue],K||(K=W,Me.push(Ue)),W.lastPointOfContour?((W.nextPointOnContour=K).prevPointOnContour=W,K=void 0):(te=ve[Ue+1],(W.nextPointOnContour=te).prevPointOnContour=W);if(!F.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",F.stack);for(var Te=0;Te<_e;Te++)console.log(Te,ve[Te].x,ve[Te].y)}if(ve.push(new lb(0,0),new lb(Math.round(T.advanceWidth*P),0)),bk(F),ve.length-=2,c.DEBUG){console.log("FINISHED GLYPH",F.stack);for(var ht=0;ht<_e;ht++)console.log(ht,ve[ht].x,ve[ht].y)}}},bk=function(T){var F=T.prog;if(F){var P,B=F.length;for(T.ip=0;T.ip<B;T.ip++){if(c.DEBUG&&T.step++,!(P=NCt[F[T.ip]]))throw new Error("unknown instruction: 0x"+Number(F[T.ip]).toString(16));P(T)}}},NCt=[VTe.bind(void 0,ab),VTe.bind(void 0,lg),GTe.bind(void 0,ab),GTe.bind(void 0,lg),WTe.bind(void 0,ab),WTe.bind(void 0,lg),qTe.bind(void 0,0),qTe.bind(void 0,1),HTe.bind(void 0,0),HTe.bind(void 0,1),function(T){var F=(P=T.stack).pop(),P=P.pop();c.DEBUG&&console.log(T.step,"SPVFS[]",F,P),T.pv=T.dpv=aM(P,F)},function(T){var F=(P=T.stack).pop(),P=P.pop();c.DEBUG&&console.log(T.step,"SPVFS[]",F,P),T.fv=aM(P,F)},function(T){var F=T.stack,P=T.pv;c.DEBUG&&console.log(T.step,"GPV[]"),F.push(16384*P.x),F.push(16384*P.y)},function(T){var F=T.stack,P=T.fv;c.DEBUG&&console.log(T.step,"GFV[]"),F.push(16384*P.x),F.push(16384*P.y)},function(T){T.fv=T.pv,c.DEBUG&&console.log(T.step,"SFVTPV[]")},function(F){var P=(te=F.stack).pop(),B=te.pop(),W=te.pop(),K=te.pop(),te=te.pop(),_e=F.z0,Me=F.z1,he=_e[P],_e=_e[B],ve=Me[W],Me=Me[K],F=F.z2[te],P=(c.DEBUG&&console.log("ISECT[], ",P,B,W,K,te),he.x),B=he.y,W=_e.x,K=_e.y,te=ve.x,he=ve.y,_e=Me.x,ve=Me.y,Me=(P-W)*(he-ve)-(B-K)*(te-_e),qe=P*K-B*W,Ue=te*ve-he*_e;F.x=(qe*(te-_e)-Ue*(P-W))/Me,F.y=(qe*(he-ve)-Ue*(B-K))/Me},function(T){T.rp0=T.stack.pop(),c.DEBUG&&console.log(T.step,"SRP0[]",T.rp0)},function(T){T.rp1=T.stack.pop(),c.DEBUG&&console.log(T.step,"SRP1[]",T.rp1)},function(T){T.rp2=T.stack.pop(),c.DEBUG&&console.log(T.step,"SRP2[]",T.rp2)},function(T){var F=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZP0[]",F),T.zp0=F){case 0:T.tZone||fz(T),T.z0=T.tZone;break;case 1:T.z0=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var F=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZP1[]",F),T.zp1=F){case 0:T.tZone||fz(T),T.z1=T.tZone;break;case 1:T.z1=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var F=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZP2[]",F),T.zp2=F){case 0:T.tZone||fz(T),T.z2=T.tZone;break;case 1:T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var F=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SZPS[]",F),T.zp0=T.zp1=T.zp2=F){case 0:T.tZone||fz(T),T.z0=T.z1=T.z2=T.tZone;break;case 1:T.z0=T.z1=T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){T.loop=T.stack.pop(),c.DEBUG&&console.log(T.step,"SLOOP[]",T.loop)},function(T){c.DEBUG&&console.log(T.step,"RTG[]"),T.round=$Te},function(T){c.DEBUG&&console.log(T.step,"RTHG[]"),T.round=TCt},function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"SMD[]",F),T.minDis=F/64},function(T){c.DEBUG&&console.log(T.step,"ELSE[]"),UTe(T,!1)},function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"JMPR[]",F),T.ip+=F-1},function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"SCVTCI[]",F),T.cvCutIn=F/64},void 0,void 0,function(T){var F=T.stack;c.DEBUG&&console.log(T.step,"DUP[]"),F.push(F[F.length-1])},Ore,function(T){c.DEBUG&&console.log(T.step,"CLEAR[]"),T.stack.length=0},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"SWAP[]"),F.push(P),F.push(B)},function(T){var F=T.stack;c.DEBUG&&console.log(T.step,"DEPTH[]"),F.push(F.length)},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"CINDEX[]",P),F.push(F[F.length-P])},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"MINDEX[]",P),F.push(F.splice(F.length-P,1)[0])},void 0,void 0,void 0,function(T){var F=(B=T.stack).pop(),P=B.pop(),B=(c.DEBUG&&console.log(T.step,"LOOPCALL[]",F,P),T.ip),W=T.prog;T.prog=T.funcs[F];for(var K=0;K<P;K++)bk(T),c.DEBUG&&console.log(++T.step,K+1<P?"next loopcall":"done loopcall",K);T.ip=B,T.prog=W},function(T){var F=T.stack.pop(),P=(c.DEBUG&&console.log(T.step,"CALL[]",F),T.ip),B=T.prog;T.prog=T.funcs[F],bk(T),T.ip=P,T.prog=B,c.DEBUG&&console.log(++T.step,"returning from",F)},function(T){if(T.env!=="fpgm")throw new Error("FDEF not allowed here");var B=T.stack,F=T.prog,P=T.ip,B=B.pop(),W=P;for(c.DEBUG&&console.log(T.step,"FDEF[]",B);F[++P]!==45;);T.ip=P,T.funcs[B]=F.slice(W+1,P)},void 0,YTe.bind(void 0,0),YTe.bind(void 0,1),XTe.bind(void 0,ab),XTe.bind(void 0,lg),KTe.bind(void 0,0),KTe.bind(void 0,1),ZTe.bind(void 0,0),ZTe.bind(void 0,1),QTe.bind(void 0,0),QTe.bind(void 0,1),function(T){for(var F=T.stack,P=T.loop,B=T.fv,W=F.pop()/64,K=T.z2;P--;){var te=F.pop(),he=K[te];c.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-P)+": ":"")+"SHPIX[]",te,W),B.setRelative(he,he,W),B.touch(he)}T.loop=1},function(T){for(var F=T.stack,P=T.rp1,B=T.rp2,W=T.loop,K=T.z0[P],te=T.z1[B],he=T.fv,_e=T.dpv,ve=T.z2;W--;){var Me=F.pop(),qe=ve[Me];c.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-W)+": ":"")+"IP[]",Me,P,"<->",B),he.interpolate(qe,K,te,_e),he.touch(qe)}T.loop=1},JTe.bind(void 0,0),JTe.bind(void 0,1),function(T){for(var F=T.stack,P=T.rp0,B=T.z0[P],W=T.loop,K=T.fv,te=T.pv,he=T.z1;W--;){var _e=F.pop(),ve=he[_e];c.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-W)+": ":"")+"ALIGNRP[]",_e),K.setRelative(ve,B,0,te),K.touch(ve)}T.loop=1},function(T){c.DEBUG&&console.log(T.step,"RTDG[]"),T.round=ECt},eAe.bind(void 0,0),eAe.bind(void 0,1),function(T){var F=T.prog,P=T.ip,B=T.stack,W=F[++P];c.DEBUG&&console.log(T.step,"NPUSHB[]",W);for(var K=0;K<W;K++)B.push(F[++P]);T.ip=P},function(T){var F=T.ip,P=T.prog,B=T.stack,W=P[++F];c.DEBUG&&console.log(T.step,"NPUSHW[]",W);for(var K=0;K<W;K++){var te=P[++F]<<8|P[++F];32768&te&&(te=-(1+(65535^te))),B.push(te)}T.ip=F},function(T){var B=T.stack,F=(F=T.store)||(T.store=[]),P=B.pop(),B=B.pop();c.DEBUG&&console.log(T.step,"WS",P,B),F[B]=P},function(W){var F=W.stack,P=W.store,B=F.pop(),W=(c.DEBUG&&console.log(W.step,"RS",B),P&&P[B]||0);F.push(W)},function(T){var F=(P=T.stack).pop(),P=P.pop();c.DEBUG&&console.log(T.step,"WCVTP",F,P),T.cvt[P]=F/64},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"RCVT",P),F.push(64*T.cvt[P])},tAe.bind(void 0,0),tAe.bind(void 0,1),void 0,rAe.bind(void 0,0),rAe.bind(void 0,1),function(T){c.DEBUG&&console.log(T.step,"MPPEM[]"),T.stack.push(T.ppem)},void 0,function(T){c.DEBUG&&console.log(T.step,"FLIPON[]"),T.autoFlip=!0},void 0,void 0,function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"LT[]",P,B),F.push(B<P?1:0)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"LTEQ[]",P,B),F.push(B<=P?1:0)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"GT[]",P,B),F.push(P<B?1:0)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"GTEQ[]",P,B),F.push(P<=B?1:0)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"EQ[]",P,B),F.push(P===B?1:0)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"NEQ[]",P,B),F.push(P!==B?1:0)},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"ODD[]",P),F.push(Math.trunc(P)%2?1:0)},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"EVEN[]",P),F.push(Math.trunc(P)%2?0:1)},function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"IF[]",F),F||(UTe(T,!0),c.DEBUG&&console.log(T.step,"EIF[]"))},function(T){c.DEBUG&&console.log(T.step,"EIF[]")},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"AND[]",P,B),F.push(P&&B?1:0)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"OR[]",P,B),F.push(P||B?1:0)},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"NOT[]",P),F.push(P?0:1)},Fre.bind(void 0,1),function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"SDB[]",F),T.deltaBase=F},function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"SDS[]",F),T.deltaShift=Math.pow(.5,F)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"ADD[]",P,B),F.push(B+P)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"SUB[]",P,B),F.push(B-P)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"DIV[]",P,B),F.push(64*B/P)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"MUL[]",P,B),F.push(B*P/64)},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"ABS[]",P),F.push(Math.abs(P))},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"NEG[]",P),F.push(-P)},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"FLOOR[]",P),F.push(64*Math.floor(P/64))},function(T){var F=T.stack,P=F.pop();c.DEBUG&&console.log(T.step,"CEILING[]",P),F.push(64*Math.ceil(P/64))},dz.bind(void 0,0),dz.bind(void 0,1),dz.bind(void 0,2),dz.bind(void 0,3),void 0,void 0,void 0,void 0,function(T){var F=(P=T.stack).pop(),P=P.pop();c.DEBUG&&console.log(T.step,"WCVTF[]",F,P),T.cvt[P]=F*T.ppem/T.font.unitsPerEm},Fre.bind(void 0,2),Fre.bind(void 0,3),Rre.bind(void 0,1),Rre.bind(void 0,2),Rre.bind(void 0,3),function(T){var F,P=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"SROUND[]",P),T.round=zTe,192&P){case 0:F=.5;break;case 64:F=1;break;case 128:F=2;break;default:throw new Error("invalid SROUND value")}switch(T.srPeriod=F,48&P){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*F;break;case 32:T.srPhase=.5*F;break;case 48:T.srPhase=.75*F;break;default:throw new Error("invalid SROUND value")}T.srThreshold=(P&=15)===0?0:(P/8-.5)*F},function(T){var F,P=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"S45ROUND[]",P),T.round=zTe,192&P){case 0:F=Math.sqrt(2)/2;break;case 64:F=Math.sqrt(2);break;case 128:F=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(T.srPeriod=F,48&P){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*F;break;case 32:T.srPhase=.5*F;break;case 48:T.srPhase=.75*F;break;default:throw new Error("invalid S45ROUND value")}T.srThreshold=(P&=15)===0?0:(P/8-.5)*F},void 0,void 0,function(T){c.DEBUG&&console.log(T.step,"ROFF[]"),T.round=CCt},void 0,function(T){c.DEBUG&&console.log(T.step,"RUTG[]"),T.round=ACt},function(T){c.DEBUG&&console.log(T.step,"RDTG[]"),T.round=kCt},Ore,Ore,void 0,void 0,void 0,void 0,void 0,function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"SCANCTRL[]",F)},nAe.bind(void 0,0),nAe.bind(void 0,1),function(T){var F=T.stack,P=F.pop(),B=0;c.DEBUG&&console.log(T.step,"GETINFO[]",P),1&P&&(B=35),32&P&&(B|=4096),F.push(B)},void 0,function(T){var F=T.stack,P=F.pop(),B=F.pop(),W=F.pop();c.DEBUG&&console.log(T.step,"ROLL[]"),F.push(B),F.push(P),F.push(W)},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"MAX[]",P,B),F.push(Math.max(B,P))},function(T){var F=T.stack,P=F.pop(),B=F.pop();c.DEBUG&&console.log(T.step,"MIN[]",P,B),F.push(Math.min(B,P))},function(T){var F=T.stack.pop();c.DEBUG&&console.log(T.step,"SCANTYPE[]",F)},function(T){var F=T.stack.pop(),P=T.stack.pop();switch(c.DEBUG&&console.log(T.step,"INSTCTRL[]",F,P),F){case 1:return void(T.inhibitGridFit=!!P);case 2:return void(T.ignoreCvt=!!P);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,d1.bind(void 0,1),d1.bind(void 0,2),d1.bind(void 0,3),d1.bind(void 0,4),d1.bind(void 0,5),d1.bind(void 0,6),d1.bind(void 0,7),d1.bind(void 0,8),p1.bind(void 0,1),p1.bind(void 0,2),p1.bind(void 0,3),p1.bind(void 0,4),p1.bind(void 0,5),p1.bind(void 0,6),p1.bind(void 0,7),p1.bind(void 0,8),cr.bind(void 0,0,0,0,0,0),cr.bind(void 0,0,0,0,0,1),cr.bind(void 0,0,0,0,0,2),cr.bind(void 0,0,0,0,0,3),cr.bind(void 0,0,0,0,1,0),cr.bind(void 0,0,0,0,1,1),cr.bind(void 0,0,0,0,1,2),cr.bind(void 0,0,0,0,1,3),cr.bind(void 0,0,0,1,0,0),cr.bind(void 0,0,0,1,0,1),cr.bind(void 0,0,0,1,0,2),cr.bind(void 0,0,0,1,0,3),cr.bind(void 0,0,0,1,1,0),cr.bind(void 0,0,0,1,1,1),cr.bind(void 0,0,0,1,1,2),cr.bind(void 0,0,0,1,1,3),cr.bind(void 0,0,1,0,0,0),cr.bind(void 0,0,1,0,0,1),cr.bind(void 0,0,1,0,0,2),cr.bind(void 0,0,1,0,0,3),cr.bind(void 0,0,1,0,1,0),cr.bind(void 0,0,1,0,1,1),cr.bind(void 0,0,1,0,1,2),cr.bind(void 0,0,1,0,1,3),cr.bind(void 0,0,1,1,0,0),cr.bind(void 0,0,1,1,0,1),cr.bind(void 0,0,1,1,0,2),cr.bind(void 0,0,1,1,0,3),cr.bind(void 0,0,1,1,1,0),cr.bind(void 0,0,1,1,1,1),cr.bind(void 0,0,1,1,1,2),cr.bind(void 0,0,1,1,1,3),cr.bind(void 0,1,0,0,0,0),cr.bind(void 0,1,0,0,0,1),cr.bind(void 0,1,0,0,0,2),cr.bind(void 0,1,0,0,0,3),cr.bind(void 0,1,0,0,1,0),cr.bind(void 0,1,0,0,1,1),cr.bind(void 0,1,0,0,1,2),cr.bind(void 0,1,0,0,1,3),cr.bind(void 0,1,0,1,0,0),cr.bind(void 0,1,0,1,0,1),cr.bind(void 0,1,0,1,0,2),cr.bind(void 0,1,0,1,0,3),cr.bind(void 0,1,0,1,1,0),cr.bind(void 0,1,0,1,1,1),cr.bind(void 0,1,0,1,1,2),cr.bind(void 0,1,0,1,1,3),cr.bind(void 0,1,1,0,0,0),cr.bind(void 0,1,1,0,0,1),cr.bind(void 0,1,1,0,0,2),cr.bind(void 0,1,1,0,0,3),cr.bind(void 0,1,1,0,1,0),cr.bind(void 0,1,1,0,1,1),cr.bind(void 0,1,1,0,1,2),cr.bind(void 0,1,1,0,1,3),cr.bind(void 0,1,1,1,0,0),cr.bind(void 0,1,1,1,0,1),cr.bind(void 0,1,1,1,0,2),cr.bind(void 0,1,1,1,0,3),cr.bind(void 0,1,1,1,1,0),cr.bind(void 0,1,1,1,1,1),cr.bind(void 0,1,1,1,1,2),cr.bind(void 0,1,1,1,1,3)],OCt=Array.from||function(T){return T.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Qo(T){(T=T||{}).empty||(yk(T.familyName,"When creating a new Font object, familyName is required."),yk(T.styleName,"When creating a new Font object, styleName is required."),yk(T.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),yk(T.ascender,"When creating a new Font object, ascender is required."),yk(T.descender,"When creating a new Font object, descender is required."),yk(T.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:T.familyName||" "},fontSubfamily:{en:T.styleName||" "},fullName:{en:T.fullName||T.familyName+" "+T.styleName},postScriptName:{en:T.postScriptName||(T.familyName+T.styleName).replace(/\s/g,"")},designer:{en:T.designer||" "},designerURL:{en:T.designerURL||" "},manufacturer:{en:T.manufacturer||" "},manufacturerURL:{en:T.manufacturerURL||" "},license:{en:T.license||" "},licenseURL:{en:T.licenseURL||" "},version:{en:T.version||"Version 0.1"},description:{en:T.description||" "},copyright:{en:T.copyright||" "},trademark:{en:T.trademark||" "}},this.unitsPerEm=T.unitsPerEm||1e3,this.ascender=T.ascender,this.descender=T.descender,this.createdTimestamp=T.createdTimestamp,this.tables={os2:{usWeightClass:T.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:T.widthClass||this.usWidthClasses.MEDIUM,fsSelection:T.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ur.GlyphSet(this,T.glyphs||[]),this.encoding=new Ve(this),this.position=new cz(this),this.substitution=new ag(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new BTe(this):void 0)}})}function iAe(T,F){var P,B=JSON.stringify(T),W=256;for(P in F){var K=parseInt(P);if(K&&!(K<256)){if(JSON.stringify(F[P])===B)return K;W<=K&&(W=K+1)}}return F[W]=T,W}Qo.prototype.hasChar=function(T){return this.encoding.charToGlyphIndex(T)!==null},Qo.prototype.charToGlyphIndex=function(T){return this.encoding.charToGlyphIndex(T)},Qo.prototype.charToGlyph=function(T){return T=this.charToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},Qo.prototype.stringToGlyphs=function(T,F){F=F||this.defaultRenderOptions;for(var P=OCt(T),B=[],W=0;W<P.length;W+=1){var K=P[W];B.push(this.charToGlyphIndex(K))}var te=B.length;if(F.features){var T=F.script||this.substitution.getDefaultScriptName(),he=[];F.features.liga&&(he=he.concat(this.substitution.getFeature("liga",T,F.language))),F.features.rlig&&(he=he.concat(this.substitution.getFeature("rlig",T,F.language)));for(var _e=0;_e<te;_e+=1)for(var ve=0;ve<he.length;ve++){for(var Me=he[ve],qe=Me.sub,Ue=qe.length,Te=0;Te<Ue&&qe[Te]===B[_e+Te];)Te++;Te===Ue&&(B.splice(_e,Ue,Me.by),te=te-Ue+1)}}for(var ht=new Array(te),Xe=this.glyphs.get(0),ot=0;ot<te;ot+=1)ht[ot]=this.glyphs.get(B[ot])||Xe;return ht},Qo.prototype.nameToGlyphIndex=function(T){return this.glyphNames.nameToGlyphIndex(T)},Qo.prototype.nameToGlyph=function(T){return T=this.nameToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},Qo.prototype.glyphIndexToName=function(T){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(T):""},Qo.prototype.getKerningValue=function(T,F){T=T.index||T,F=F.index||F;var P=this.position.defaultKerningTables;return P?this.position.getKerningValue(P,T,F):this.kerningPairs[T+","+F]||0},Qo.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Qo.prototype.forEachGlyph=function(T,F,P,B,W,K){F=F!==void 0?F:0,P=P!==void 0?P:0,W=W||this.defaultRenderOptions;var te,he=1/this.unitsPerEm*(B=B!==void 0?B:72),_e=this.stringToGlyphs(T,W);W.kerning&&(T=W.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(T,W.language));for(var ve=0;ve<_e.length;ve+=1){var Me=_e[ve];K.call(this,Me,F,P,B,W),Me.advanceWidth&&(F+=Me.advanceWidth*he),W.kerning&&ve<_e.length-1&&(F+=(te?this.position.getKerningValue(te,Me.index,_e[ve+1].index):this.getKerningValue(Me,_e[ve+1]))*he),W.letterSpacing?F+=W.letterSpacing*B:W.tracking&&(F+=W.tracking/1e3*B)}return F},Qo.prototype.getPath=function(T,F,P,B,W){var K=new X;return this.forEachGlyph(T,F,P,B,W,function(te,he,_e,ve){te=te.getPath(he,_e,ve,W,this),K.extend(te)}),K},Qo.prototype.getPaths=function(T,F,P,B,W){var K=[];return this.forEachGlyph(T,F,P,B,W,function(te,he,_e,ve){te=te.getPath(he,_e,ve,W,this),K.push(te)}),K},Qo.prototype.getAdvanceWidth=function(T,F,P){return this.forEachGlyph(T,0,0,F,P,function(){})},Qo.prototype.draw=function(T,F,P,B,W,K){this.getPath(F,P,B,W,K).draw(T)},Qo.prototype.drawPoints=function(T,F,P,B,W,K){this.forEachGlyph(F,P,B,W,K,function(te,he,_e,ve){te.drawPoints(T,he,_e,ve)})},Qo.prototype.drawMetrics=function(T,F,P,B,W,K){this.forEachGlyph(F,P,B,W,K,function(te,he,_e,ve){te.drawMetrics(T,he,_e,ve)})},Qo.prototype.getEnglishName=function(T){if(T=this.names[T],T)return T.en},Qo.prototype.validate=function(){var T=this;function F(P){P=T.getEnglishName(P),P&&P.trim().length}F("fontFamily"),F("weightName"),F("manufacturer"),F("copyright"),F("version"),this.unitsPerEm},Qo.prototype.toTables=function(){return wCt.fontToTable(this)},Qo.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Qo.prototype.toArrayBuffer=function(){for(var T=this.toTables().encode(),F=new ArrayBuffer(T.length),P=new Uint8Array(F),B=0;B<T.length;B++)P[B]=T[B];return F},Qo.prototype.download=function(T){var F=this.getEnglishName("fontFamily"),P=this.getEnglishName("fontSubfamily"),B=(T=T||F.replace(/\s/g,"")+"-"+P+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,B.byteLength,function(W){W.root.getFile(T,{create:!0},function(K){K.createWriter(function(te){var he=new DataView(B),he=new Blob([he],{type:"font/opentype"});te.write(he),te.addEventListener("writeend",function(){location.href=K.toURL()},!1)})})},function(W){throw new Error(W.name+": "+W.message)})):(F=o("fs"),P=function(W){for(var K=new a(W.byteLength),te=new Uint8Array(W),he=0;he<K.length;++he)K[he]=te[he];return K}(B),F.writeFileSync(T,P))},Qo.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Qo.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Qo.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var FCt={make:function(T,F){var P=new We.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:T.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:T.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*T.axes.length}]);P.offsetToData=P.sizeOf();for(var B,W,K,te=0;te<T.axes.length;te++)P.fields=P.fields.concat((B=te,W=T.axes[te],K=F,K=iAe(W.name,F),[{name:"tag_"+B,type:"TAG",value:W.tag},{name:"minValue_"+B,type:"FIXED",value:W.minValue<<16},{name:"defaultValue_"+B,type:"FIXED",value:W.defaultValue<<16},{name:"maxValue_"+B,type:"FIXED",value:W.maxValue<<16},{name:"flags_"+B,type:"USHORT",value:0},{name:"nameID_"+B,type:"USHORT",value:K}]));for(var he=0;he<T.instances.length;he++)P.fields=P.fields.concat(function(_e,ve,Me,qe){for(var Ue=[{name:"nameID_"+_e,type:"USHORT",value:iAe(ve.name,qe)},{name:"flags_"+_e,type:"USHORT",value:0}],Te=0;Te<Me.length;++Te){var ht=Me[Te].tag;Ue.push({name:"axis_"+_e+" "+ht,type:"FIXED",value:ve.coordinates[ht]<<16})}return Ue}(he,T.instances[he],T.axes,F));return P},parse:function(T,F,P){for(var B,W,K,te,he=new Ge.Parser(T,F),_e=he.parseULong(),ve=(O.argument(_e===65536,"Unsupported fvar table version."),he.parseOffset16()),Me=(he.skip("uShort",1),he.parseUShort()),qe=he.parseUShort(),Ue=he.parseUShort(),Te=he.parseUShort(),ht=[],Xe=0;Xe<Me;Xe++)ht.push((B=T,W=F+ve+Xe*qe,K=P,te={},B=new Ge.Parser(B,W),te.tag=B.parseTag(),te.minValue=B.parseFixed(),te.defaultValue=B.parseFixed(),te.maxValue=B.parseFixed(),B.skip("uShort",1),te.name=K[B.parseUShort()]||{},te));for(var ot=[],He=F+ve+Me*qe,Ye=0;Ye<Ue;Ye++)ot.push(function(br,nn,wr,Cr){var wn={},mi=new Ge.Parser(br,nn);wn.name=Cr[mi.parseUShort()]||{},mi.skip("uShort",1),wn.coordinates={};for(var us=0;us<wr.length;++us)wn.coordinates[wr[us].tag]=mi.parseFixed();return wn}(T,He+Ye*Te,ht,P));return{axes:ht,instances:ot}}},ah=new Array(10);ah[1]=function(){var T=this.offset+this.relativeOffset,F=this.parseUShort();return F===1?{posFormat:1,coverage:this.parsePointer(Le.coverage),value:this.parseValueRecord()}:F===2?{posFormat:2,coverage:this.parsePointer(Le.coverage),values:this.parseValueRecordList()}:void O.assert(!1,"0x"+T.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ah[2]=function(){var T,F,P,B,K=this.offset+this.relativeOffset,W=this.parseUShort(),K=(O.assert(W===1||W===2,"0x"+K.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Le.coverage)),te=this.parseUShort(),he=this.parseUShort();return W===1?{posFormat:W,coverage:K,valueFormat1:te,valueFormat2:he,pairSets:this.parseList(Le.pointer(Le.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(he)}})))}:W===2?(T=this.parsePointer(Le.classDef),F=this.parsePointer(Le.classDef),P=this.parseUShort(),B=this.parseUShort(),{posFormat:W,coverage:K,valueFormat1:te,valueFormat2:he,classDef1:T,classDef2:F,class1Count:P,class2Count:B,classRecords:this.parseList(P,Le.list(B,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(he)}}))}):void 0},ah[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ah[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ah[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ah[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ah[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ah[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ah[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var RCt=new Array(10),MCt={parse:function(T,F){return F=(T=new Le(T,F=F||0)).parseVersion(1),O.argument(F===1||F===1.1,"Unsupported GPOS table version "+F),F===1?{version:F,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(ah)}:{version:F,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(ah),variations:T.parseFeatureVariationsList()}},make:function(T){return new We.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(T.lookups,RCt)}])}},PCt={parse:function(T,F){if(T=new Ge.Parser(T,F),(F=T.parseUShort())===0){var P=T,B={},qe=(P.skip("uShort"),P.parseUShort()),W=(O.argument(qe===0,"Unsupported kern sub-table version."),P.skip("uShort",2),P.parseUShort());P.skip("uShort",3);for(var K=0;K<W;K+=1){var te=P.parseUShort(),he=P.parseUShort(),_e=P.parseShort();B[te+","+he]=_e}return B}if(F!==1)throw new Error("Unsupported kern table version ("+F+").");var ve=T,Me={},qe=(ve.skip("uShort"),1<ve.parseULong()&&console.warn("Only the first kern subtable is supported."),ve.skip("uLong"),255&ve.parseUShort());if(ve.skip("uShort"),qe==0){var Ue=ve.parseUShort();ve.skip("uShort",3);for(var Te=0;Te<Ue;Te+=1){var ht=ve.parseUShort(),Xe=ve.parseUShort(),ot=ve.parseShort();Me[ht+","+Xe]=ot}}return Me}},jCt={parse:function(T,F,P,B){for(var W=new Ge.Parser(T,F),K=B?W.parseUShort:W.parseULong,te=[],he=0;he<P+1;he+=1){var _e=K.call(W);B&&(_e*=2),te.push(_e)}return te}};function LCt(T,F){o("fs").readFile(T,function(P,B){if(P)return F(P.message);F(null,MTe(B))})}function BCt(T,F){var P=new XMLHttpRequest;P.open("get",T,!0),P.responseType="arraybuffer",P.onload=function(){return P.response?F(null,P.response):F("Font could not be loaded: "+P.statusText)},P.onerror=function(){F("Font could not be loaded")},P.send()}function sAe(T,F){for(var P=[],B=12,W=0;W<F;W+=1){var K=Ge.getTag(T,B),te=Ge.getULong(T,B+4),he=Ge.getULong(T,B+8),_e=Ge.getULong(T,B+12);P.push({tag:K,checksum:te,offset:he,length:_e,compression:!1}),B+=16}return P}function zs(P,F){if(F.compression!=="WOFF")return{data:P,offset:F.offset};var P=new Uint8Array(P.buffer,F.offset+2,F.compressedLength-2),B=new Uint8Array(F.length);if(G(P,B),B.byteLength!==F.length)throw new Error("Decompression error: "+F.tag+" decompressed length doesn't match recorded length");return{data:new DataView(B.buffer,0),offset:0}}function Mre(Ye){var F,P,B,W,K,te,he,_e,ve,Me,qe,Ue,Te,ht,Xe=new Qo({empty:!0}),ot=new DataView(Ye,0),He=[],Ye=Ge.getTag(ot,0);if(Ye==="\0\0\0"||Ye==="true"||Ye==="typ1")Xe.outlinesFormat="truetype",He=sAe(ot,B=Ge.getUShort(ot,4));else if(Ye==="OTTO")Xe.outlinesFormat="cff",He=sAe(ot,B=Ge.getUShort(ot,4));else{if(Ye!=="wOFF")throw new Error("Unsupported OpenType signature "+Ye);var br=Ge.getTag(ot,4);if(br==="\0\0\0")Xe.outlinesFormat="truetype";else{if(br!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ye);Xe.outlinesFormat="cff"}He=function(_i,Do){for(var Xl=[],Ji=44,xl=0;xl<Do;xl+=1){var Si=Ge.getTag(_i,Ji),Ma=Ge.getULong(_i,Ji+4),uM=Ge.getULong(_i,Ji+8),xk=Ge.getULong(_i,Ji+12),aAe=void 0,aAe=uM<xk&&"WOFF";Xl.push({tag:Si,offset:Ma,compression:aAe,compressedLength:uM,length:xk}),Ji+=20}return Xl}(ot,B=Ge.getUShort(ot,12))}for(var nn=0;nn<B;nn+=1){var wr=He[nn],Cr=void 0;switch(wr.tag){case"cmap":Cr=zs(ot,wr),Xe.tables.cmap=fe.parse(Cr.data,Cr.offset),Xe.encoding=new Qe(Xe.tables.cmap);break;case"cvt ":Cr=zs(ot,wr),ht=new Ge.Parser(Cr.data,Cr.offset),Xe.tables.cvt=ht.parseShortList(wr.length/2);break;case"fvar":K=wr;break;case"fpgm":Cr=zs(ot,wr),ht=new Ge.Parser(Cr.data,Cr.offset),Xe.tables.fpgm=ht.parseByteList(wr.length);break;case"head":Cr=zs(ot,wr),Xe.tables.head=iM.parse(Cr.data,Cr.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,F=Xe.tables.head.indexToLocFormat;break;case"hhea":Cr=zs(ot,wr),Xe.tables.hhea=ke.parse(Cr.data,Cr.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":ve=wr;break;case"ltag":Cr=zs(ot,wr),P=qt.parse(Cr.data,Cr.offset);break;case"maxp":Cr=zs(ot,wr),Xe.tables.maxp=xt.parse(Cr.data,Cr.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Ue=wr;break;case"OS/2":Cr=zs(ot,wr),Xe.tables.os2=Ra.parse(Cr.data,Cr.offset);break;case"post":Cr=zs(ot,wr),Xe.tables.post=ETe.parse(Cr.data,Cr.offset),Xe.glyphNames=new Nt(Xe.tables.post);break;case"prep":Cr=zs(ot,wr),ht=new Ge.Parser(Cr.data,Cr.offset),Xe.tables.prep=ht.parseByteList(wr.length);break;case"glyf":te=wr;break;case"loca":qe=wr;break;case"CFF ":W=wr;break;case"kern":Me=wr;break;case"GPOS":he=wr;break;case"GSUB":_e=wr;break;case"meta":Te=wr}}if(br=zs(ot,Ue),Xe.tables.name=Lf.parse(br.data,br.offset,P),Xe.names=Xe.tables.name,te&&qe)Ye=F===0,br=zs(ot,qe),br=jCt.parse(br.data,br.offset,Xe.numGlyphs,Ye),Ye=zs(ot,te),Xe.glyphs=LTe.parse(Ye.data,Ye.offset,br,Xe);else{if(!W)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ye=zs(ot,W),oM.parse(Ye.data,Ye.offset,Xe)}for(var br=zs(ot,ve),wn=(St.parse(br.data,br.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),mi=wn.tables.cmap.glyphIndexMap,us=Object.keys(mi),Us=0;Us<us.length;Us+=1){var Hl,Yl=us[Us],lh=mi[Yl];(Hl=wn.glyphs.get(lh)).addUnicode(parseInt(Yl))}for(var Jo=0;Jo<wn.glyphs.length;Jo+=1)Hl=wn.glyphs.get(Jo),wn.cffEncoding?wn.isCIDFont?Hl.name="gid"+Jo:Hl.name=wn.cffEncoding.charset[Jo]:wn.glyphNames.names&&(Hl.name=wn.glyphNames.glyphIndexToName(Jo));return Me?(Ye=zs(ot,Me),Xe.kerningPairs=PCt.parse(Ye.data,Ye.offset)):Xe.kerningPairs={},he&&(br=zs(ot,he),Xe.tables.gpos=MCt.parse(br.data,br.offset),Xe.position.init()),_e&&(Ye=zs(ot,_e),Xe.tables.gsub=TTe.parse(Ye.data,Ye.offset)),K&&(br=zs(ot,K),Xe.tables.fvar=FCt.parse(br.data,br.offset,Xe.names)),Te&&(Ye=zs(ot,Te),Xe.tables.meta=ATe.parse(Ye.data,Ye.offset),Xe.metas=Xe.tables.meta),Xe}c.Font=Qo,c.Glyph=Ut,c.Path=X,c.BoundingBox=Y,c._parse=Ge,c.parse=Mre,c.load=function(T,F){(typeof window>"u"?LCt:BCt)(T,function(P,B){if(P)return F(P);var W;try{W=Mre(B)}catch(K){return F(K,null)}return F(null,W)})},c.loadSync=function(T){return Mre(MTe(o("fs").readFileSync(T)))},Object.defineProperty(c,"__esModule",{value:!0})},typeof s=="object"&&i!==void 0?u(s):typeof t=="function"&&t.amd?t(["exports"],u):u(l.opentype={})}).call(this,o("buffer").Buffer)},{buffer:4,fs:2}],255:[function(o,i,s){(function(a){function l(f,d){for(var p=0,h=f.length-1;0<=h;h--){var m=f[h];m==="."?f.splice(h,1):m===".."?(f.splice(h,1),p++):p&&(f.splice(h,1),p--)}if(d)for(;p--;)f.unshift("..");return f}function u(f,d){if(f.filter)return f.filter(d);for(var p=[],h=0;h<f.length;h++)d(f[h],h,f)&&p.push(f[h]);return p}s.resolve=function(){for(var f="",d=!1,p=arguments.length-1;-1<=p&&!d;p--){var h=0<=p?arguments[p]:a.cwd();if(typeof h!="string")throw new TypeError("Arguments to path.resolve must be strings");h&&(f=h+"/"+f,d=h.charAt(0)==="/")}return(d?"/":"")+(f=l(u(f.split("/"),function(m){return!!m}),!d).join("/"))||"."},s.normalize=function(f){var d=s.isAbsolute(f),p=c(f,-1)==="/";return(f=(f=l(u(f.split("/"),function(h){return!!h}),!d).join("/"))||d?f:".")&&p&&(f+="/"),(d?"/":"")+f},s.isAbsolute=function(f){return f.charAt(0)==="/"},s.join=function(){var f=Array.prototype.slice.call(arguments,0);return s.normalize(u(f,function(d,p){if(typeof d!="string")throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))},s.relative=function(f,d){function p(v){for(var w=0;w<v.length&&v[w]==="";w++);for(var _=v.length-1;0<=_&&v[_]==="";_--);return _<w?[]:v.slice(w,_-w+1)}f=s.resolve(f).substr(1),d=s.resolve(d).substr(1);for(var h=p(f.split("/")),m=p(d.split("/")),g=Math.min(h.length,m.length),y=g,b=0;b<g;b++)if(h[b]!==m[b]){y=b;break}for(var x=[],b=y;b<h.length;b++)x.push("..");return(x=x.concat(m.slice(y))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var d=f.charCodeAt(0)===47,p=-1,h=!0,m=f.length-1;1<=m;--m)if(f.charCodeAt(m)===47){if(!h){p=m;break}}else h=!1;return p===-1?d?"/":".":d&&p===1?"/":f.slice(0,p)},s.basename=function(f,d){return f=function(p){typeof p!="string"&&(p+="");for(var h=0,m=-1,g=!0,y=p.length-1;0<=y;--y)if(p.charCodeAt(y)===47){if(!g){h=y+1;break}}else m===-1&&(g=!1,m=y+1);return m===-1?"":p.slice(h,m)}(f),f=d&&f.substr(-1*d.length)===d?f.substr(0,f.length-d.length):f},s.extname=function(f){typeof f!="string"&&(f+="");for(var d=-1,p=0,h=-1,m=!0,g=0,y=f.length-1;0<=y;--y){var b=f.charCodeAt(y);if(b===47){if(m)continue;p=y+1;break}h===-1&&(m=!1,h=y+1),b===46?d===-1?d=y:g!==1&&(g=1):d!==-1&&(g=-1)}return d===-1||h===-1||g===0||g===1&&d===h-1&&d===p+1?"":f.slice(d,h)};var c="ab".substr(-1)==="b"?function(f,d,p){return f.substr(d,p)}:function(f,d,p){return d<0&&(d=f.length+d),f.substr(d,p)}}).call(this,o("_process"))},{_process:256}],256:[function(o,u,s){var a,l,u=u.exports={};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:c}catch{a=c}try{l=typeof clearTimeout=="function"?clearTimeout:f}catch{l=f}function d(w){if(a===setTimeout)return setTimeout(w,0);if((a===c||!a)&&setTimeout)return(a=setTimeout)(w,0);try{return a(w,0)}catch{try{return a.call(null,w,0)}catch{return a.call(this,w,0)}}}var p,h=[],m=!1,g=-1;function y(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&b())}function b(){if(!m){for(var w=d(y),_=(m=!0,h.length);_;){for(p=h,h=[];++g<_;)p&&p[g].run();g=-1,_=h.length}p=null,m=!1,function(C){if(l===clearTimeout)return clearTimeout(C);if((l===f||!l)&&clearTimeout)return(l=clearTimeout)(C);try{l(C)}catch{try{return l.call(null,C)}catch{return l.call(this,C)}}}(w)}}function x(w,_){this.fun=w,this.array=_}function v(){}u.nextTick=function(w){var _=new Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)_[C-1]=arguments[C];h.push(new x(w,_)),h.length!==1||m||d(b)},x.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=v,u.addListener=v,u.once=v,u.off=v,u.removeListener=v,u.removeAllListeners=v,u.emit=v,u.prependListener=v,u.prependOnceListener=v,u.listeners=function(w){return[]},u.binding=function(w){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(w){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],257:[function(o,i,s){i=function(a){"use strict";var l,u=Object.prototype,c=u.hasOwnProperty,S=typeof Symbol=="function"?Symbol:{},f=S.iterator||"@@iterator",d=S.asyncIterator||"@@asyncIterator",p=S.toStringTag||"@@toStringTag";function h(V,z,U,q){var X,pe,$,O,z=z&&z.prototype instanceof w?z:w,z=Object.create(z.prototype),q=new L(q||[]);return z._invoke=(X=V,pe=U,$=q,O=g,function(ee,ae){if(O===b)throw new Error("Generator is already running");if(O===x){if(ee==="throw")throw ae;return M()}for($.method=ee,$.arg=ae;;){var Q=$.delegate;if(Q&&(Q=function le(ie,Z){var ge=ie.iterator[Z.method];if(ge===l){if(Z.delegate=null,Z.method==="throw"){if(ie.iterator.return&&(Z.method="return",Z.arg=l,le(ie,Z),Z.method==="throw"))return v;Z.method="throw",Z.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}if(ge=m(ge,ie.iterator,Z.arg),ge.type==="throw")return Z.method="throw",Z.arg=ge.arg,Z.delegate=null,v;if(ge=ge.arg,!ge)return Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,v;{if(!ge.done)return ge;Z[ie.resultName]=ge.value,Z.next=ie.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=l)}return Z.delegate=null,v}(Q,$),Q)){if(Q===v)continue;return Q}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(O===g)throw O=x,$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);if(O=b,Q=m(X,pe,$),Q.type==="normal"){if(O=$.done?x:y,Q.arg!==v)return{value:Q.arg,done:$.done}}else Q.type==="throw"&&(O=x,$.method="throw",$.arg=Q.arg)}}),z}function m(V,G,U){try{return{type:"normal",arg:V.call(G,U)}}catch(Y){return{type:"throw",arg:Y}}}a.wrap=h;var g="suspendedStart",y="suspendedYield",b="executing",x="completed",v={};function w(){}function _(){}function C(){}var S={},E=(S[f]=function(){return this},Object.getPrototypeOf),E=E&&E(E(j([]))),A=(E&&E!==u&&c.call(E,f)&&(S=E),C.prototype=w.prototype=Object.create(S));function N(V){["next","throw","return"].forEach(function(G){V[G]=function(U){return this._invoke(G,U)}})}function k(V){var G;this._invoke=function(U,Y){function X(){return new Promise(function(pe,$){(function O(le,q,ee,ae){var Q,le=m(V[le],V,q);if(le.type!=="throw")return(q=(Q=le.arg).value)&&typeof q=="object"&&c.call(q,"__await")?Promise.resolve(q.__await).then(function(ie){O("next",ie,ee,ae)},function(ie){O("throw",ie,ee,ae)}):Promise.resolve(q).then(function(ie){Q.value=ie,ee(Q)},function(ie){return O("throw",ie,ee,ae)});ae(le.arg)})(U,Y,pe,$)})}return G=G?G.then(X,X):X()}}function R(V){var G={tryLoc:V[0]};1 in V&&(G.catchLoc=V[1]),2 in V&&(G.finallyLoc=V[2],G.afterLoc=V[3]),this.tryEntries.push(G)}function I(V){var G=V.completion||{};G.type="normal",delete G.arg,V.completion=G}function L(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(R,this),this.reset(!0)}function j(V){if(V){var G,U=V[f];if(U)return U.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length))return G=-1,(U=function Y(){for(;++G<V.length;)if(c.call(V,G))return Y.value=V[G],Y.done=!1,Y;return Y.value=l,Y.done=!0,Y}).next=U}return{next:M}}function M(){return{value:l,done:!0}}return(_.prototype=A.constructor=C).constructor=_,C[p]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(V){return V=typeof V=="function"&&V.constructor,!!V&&(V===_||(V.displayName||V.name)==="GeneratorFunction")},a.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,C):(V.__proto__=C,p in V||(V[p]="GeneratorFunction")),V.prototype=Object.create(A),V},a.awrap=function(V){return{__await:V}},N(k.prototype),k.prototype[d]=function(){return this},a.AsyncIterator=k,a.async=function(V,G,U,Y){var X=new k(h(V,G,U,Y));return a.isGeneratorFunction(G)?X:X.next().then(function(pe){return pe.done?pe.value:X.next()})},N(A),A[p]="Generator",A[f]=function(){return this},A.toString=function(){return"[object Generator]"},a.keys=function(V){var G,U=[];for(G in V)U.push(G);return U.reverse(),function Y(){for(;U.length;){var X=U.pop();if(X in V)return Y.value=X,Y.done=!1,Y}return Y.done=!0,Y}},a.values=j,L.prototype={constructor:L,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(I),!V)for(var G in this)G.charAt(0)==="t"&&c.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=l)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var G=this;function U(z,q){return pe.type="throw",pe.arg=V,G.next=z,q&&(G.method="next",G.arg=l),!!q}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var X=this.tryEntries[Y],pe=X.completion;if(X.tryLoc==="root")return U("end");if(X.tryLoc<=this.prev){var $=c.call(X,"catchLoc"),O=c.call(X,"finallyLoc");if($&&O){if(this.prev<X.catchLoc)return U(X.catchLoc,!0);if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else if($){if(this.prev<X.catchLoc)return U(X.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return U(X.finallyLoc)}}}},abrupt:function(V,G){for(var U=this.tryEntries.length-1;0<=U;--U){var Y=this.tryEntries[U];if(Y.tryLoc<=this.prev&&c.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var X=Y;break}}var pe=(X=X&&(V==="break"||V==="continue")&&X.tryLoc<=G&&G<=X.finallyLoc?null:X)?X.completion:{};return pe.type=V,pe.arg=G,X?(this.method="next",this.next=X.finallyLoc,v):this.complete(pe)},complete:function(V,G){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&G&&(this.next=G),v},finish:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U=this.tryEntries[G];if(U.finallyLoc===V)return this.complete(U.completion,U.afterLoc),I(U),v}},catch:function(V){for(var G=this.tryEntries.length-1;0<=G;--G){var U,Y,X=this.tryEntries[G];if(X.tryLoc===V)return(U=X.completion).type==="throw"&&(Y=U.arg,I(X)),Y}throw new Error("illegal catch attempt")},delegateYield:function(V,G,U){return this.delegate={iterator:j(V),resultName:G,nextLoc:U},this.method==="next"&&(this.arg=l),v}},a}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(o,i,s){(function(a){"use strict";var l,u,c,f,d,p,h,m,g,y;function b(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function x(I){return I=typeof I!="string"?String(I):I}function v(I){var L={next:function(){var j=I.shift();return{done:j===void 0,value:j}}};return u&&(L[Symbol.iterator]=function(){return L}),L}function w(I){this.map={},I instanceof w?I.forEach(function(L,j){this.append(j,L)},this):Array.isArray(I)?I.forEach(function(L){this.append(L[0],L[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(L){this.append(L,I[L])},this)}function _(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function C(I){return new Promise(function(L,j){I.onload=function(){L(I.result)},I.onerror=function(){j(I.error)}})}function S(I){var L=new FileReader,j=C(L);return L.readAsArrayBuffer(I),j}function E(I){var L;return I.slice?I.slice(0):((L=new Uint8Array(I.byteLength)).set(new Uint8Array(I)),L.buffer)}function A(){return this.bodyUsed=!1,this._initBody=function(I){if(this._bodyInit=I)if(typeof I=="string")this._bodyText=I;else if(c&&Blob.prototype.isPrototypeOf(I))this._bodyBlob=I;else if(f&&FormData.prototype.isPrototypeOf(I))this._bodyFormData=I;else if(l&&URLSearchParams.prototype.isPrototypeOf(I))this._bodyText=I.toString();else if(d&&c&&h(I))this._bodyArrayBuffer=E(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d||!ArrayBuffer.prototype.isPrototypeOf(I)&&!m(I))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=E(I)}else this._bodyText="";this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var I=_(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var I,L,j=_(this);if(j)return j;if(this._bodyBlob)return j=this._bodyBlob,I=new FileReader,L=C(I),I.readAsText(j),L;if(this._bodyArrayBuffer)return Promise.resolve(function(M){for(var V=new Uint8Array(M),G=new Array(V.length),U=0;U<V.length;U++)G[U]=String.fromCharCode(V[U]);return G.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function N(I,L){var j,M=(L=L||{}).body;if(I instanceof N){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,L.headers||(this.headers=new w(I.headers)),this.method=I.method,this.mode=I.mode,M||I._bodyInit==null||(M=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=L.credentials||this.credentials||"omit",!L.headers&&this.headers||(this.headers=new w(L.headers)),this.method=(I=L.method||this.method||"GET",j=I.toUpperCase(),-1<g.indexOf(j)?j:I),this.mode=L.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}function k(I){var L=new FormData;return I.trim().split("&").forEach(function(j){var M;j&&(M=(j=j.split("=")).shift().replace(/\+/g," "),j=j.join("=").replace(/\+/g," "),L.append(decodeURIComponent(M),decodeURIComponent(j)))}),L}function R(I,L){L=L||{},this.type="default",this.status=L.status===void 0?200:L.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in L?L.statusText:"OK",this.headers=new w(L.headers),this.url=L.url||"",this._initBody(I)}a.fetch||(l="URLSearchParams"in a,u="Symbol"in a&&"iterator"in Symbol,c="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in a,(d="ArrayBuffer"in a)&&(p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=function(I){return I&&DataView.prototype.isPrototypeOf(I)},m=ArrayBuffer.isView||function(I){return I&&-1<p.indexOf(Object.prototype.toString.call(I))}),w.prototype.append=function(I,L){I=b(I),L=x(L);var j=this.map[I];this.map[I]=j?j+","+L:L},w.prototype.delete=function(I){delete this.map[b(I)]},w.prototype.get=function(I){return I=b(I),this.has(I)?this.map[I]:null},w.prototype.has=function(I){return this.map.hasOwnProperty(b(I))},w.prototype.set=function(I,L){this.map[b(I)]=x(L)},w.prototype.forEach=function(I,L){for(var j in this.map)this.map.hasOwnProperty(j)&&I.call(L,this.map[j],j,this)},w.prototype.keys=function(){var I=[];return this.forEach(function(L,j){I.push(j)}),v(I)},w.prototype.values=function(){var I=[];return this.forEach(function(L){I.push(L)}),v(I)},w.prototype.entries=function(){var I=[];return this.forEach(function(L,j){I.push([j,L])}),v(I)},u&&(w.prototype[Symbol.iterator]=w.prototype.entries),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],N.prototype.clone=function(){return new N(this,{body:this._bodyInit})},A.call(N.prototype),A.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},R.error=function(){var I=new R(null,{status:0,statusText:""});return I.type="error",I},y=[301,302,303,307,308],R.redirect=function(I,L){if(y.indexOf(L)===-1)throw new RangeError("Invalid status code");return new R(null,{status:L,headers:{location:I}})},a.Headers=w,a.Request=N,a.Response=R,a.fetch=function(I,L){return new Promise(function(j,M){var V=new N(I,L),G=new XMLHttpRequest;G.onload=function(){var U,Y={status:G.status,statusText:G.statusText,headers:(Y=G.getAllResponseHeaders()||"",U=new w,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function($){var $=$.split(":"),O=$.shift().trim();O&&($=$.join(":").trim(),U.append(O,$))}),U)},X=(Y.url="responseURL"in G?G.responseURL:Y.headers.get("X-Request-URL"),"response"in G?G.response:G.responseText);j(new R(X,Y))},G.onerror=function(){M(new TypeError("Network request failed"))},G.ontimeout=function(){M(new TypeError("Network request failed"))},G.open(V.method,V.url,!0),V.credentials==="include"?G.withCredentials=!0:V.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&c&&(G.responseType="blob"),V.headers.forEach(function(U,Y){G.setRequestHeader(Y,U)}),G.send(V._bodyInit===void 0?null:V._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(o,i,s){"use strict";o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l=c(o("../core/main")),u=c(o("../color/color_conversion"));function c(p){return p&&p.__esModule?p:{default:p}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],d=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];l.default.prototype._rgbColorName=function(g){var h,m,g=u.default._rgbaToHSBA(g),y=[(a=g)[0],g[1],g[2]];y[0]!==0&&(y[0]=Math.round(100*y[0]),(g=y[0].toString().split(""))[m=g.length-1]=parseInt(g[m]),g[m]<2.5?g[m]=0:2.5<=g[m]&&g[m]<7.5&&(g[m]=5),g.length===2?(g[0]=parseInt(g[0]),7.5<=g[m]&&(g[m]=0,g[0]=g[0]+1),y[0]=10*g[0]+g[1]):7.5<=g[m]?y[0]=10:y[0]=g[m]),y[2]=y[2]/255;for(var b=y.length-1;1<=b;b--)y[b]<=.25?y[b]=0:.25<y[b]&&y[b]<.75?y[b]=.5:y[b]=1;if(y[0]===0&&y[1]===0&&y[2]===1){for(var x=2;0<=x;x--)a[x]=Math.round(1e4*a[x])/1e4;for(var v=0;v<f.length;v++){if(f[v].h===a[0]&&f[v].s===a[1]&&f[v].b===a[2]){h=f[v].name;break}h="white"}}else for(var w=0;w<d.length;w++)if(d[w].h===y[0]&&d[w].s===y[1]&&d[w].b===y[2]){h=d[w].name;break}return h},o=l.default,s.default=o},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o},l="_Description",u="_fallbackDesc",c="_fallbackTable",f="_Label",d="_labelDesc",p="_labelTable";function h(m){if(m==="label"||m==="fallback")throw new Error("description should not be LABEL or FALLBACK");return m.endsWith(".")||m.endsWith(";")||m.endsWith(",")||m.endsWith("?")||m.endsWith("!")||(m+="."),m}a.default.prototype.describe=function(m,g){var y;a.default._validateParameters("describe",arguments),typeof m=="string"&&(y=this.canvas.id,m=h(m),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==m&&(this.descriptions.fallback.innerHTML=m):this._describeHTML("fallback",m),g===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==m&&(this.descriptions.label.innerHTML=m):this._describeHTML("label",m)))},a.default.prototype.describeElement=function(m,g,y){var b,x;a.default._validateParameters("describeElement",arguments),typeof g=="string"&&typeof m=="string"&&(b=this.canvas.id,g=h(g),x=function(v){if(v==="label"||v==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return v.endsWith(".")||v.endsWith(";")||v.endsWith(",")?v=v.replace(/.$/,":"):v.endsWith(":")||(v+=":"),v}(m),m=m.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(g,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[m]?this.descriptions.fallbackElements[m].innerHTML!==x&&(this.descriptions.fallbackElements[m].innerHTML=x):this._describeElementHTML("fallback",m,x),y===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[m]?this.descriptions.labelElements[m].innerHTML!==x&&(this.descriptions.labelElements[m].innerHTML=x):this._describeElementHTML("label",m,x)))},a.default.prototype._describeHTML=function(m,g){var y,b=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(b+l))?this.dummyDOM.querySelector("#"+b+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(b+u,'"></p>')):(y='<div id="'.concat(b).concat(l,'" role="region" aria-label="Canvas Description"><p id="').concat(b).concat(u,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(b)).innerHTML=y),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(b).concat(u)),this.descriptions.fallback.innerHTML=g):m==="label"&&(this.dummyDOM.querySelector("#".concat(b+f))?this.dummyDOM.querySelector("#".concat(b+p))&&this.dummyDOM.querySelector("#".concat(b+p)).insertAdjacentHTML("beforebegin",'<p id="'.concat(b).concat(d,'"></p>')):(y='<div id="'.concat(b).concat(f,'" class="p5Label"><p id="').concat(b).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",y)),this.descriptions.label=this.dummyDOM.querySelector("#"+b+d),this.descriptions.label.innerHTML=g)},a.default.prototype._describeElementHTML=function(m,g,y){var b,x=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(x+l))?this.dummyDOM.querySelector("#"+x+c)||this.dummyDOM.querySelector("#"+x+u).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(b='<div id="'.concat(x).concat(l,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).innerHTML=b),(b=document.createElement("tr")).id=x+"_fte_"+g,this.dummyDOM.querySelector("#"+x+c).appendChild(b),this.descriptions.fallbackElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(g)),this.descriptions.fallbackElements[g].innerHTML=y):m==="label"&&(this.dummyDOM.querySelector("#".concat(x+f))?this.dummyDOM.querySelector("#".concat(x+p))||this.dummyDOM.querySelector("#"+x+d).insertAdjacentHTML("afterend",'<table id="'.concat(x+p,'"></table>')):(b='<div id="'.concat(x).concat(f,'" class="p5Label"><table id="').concat(x).concat(p,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",b)),(m=document.createElement("tr")).id=x+"_lte_"+g,this.dummyDOM.querySelector("#"+x+p).appendChild(m),this.descriptions.labelElements[g]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(g)),this.descriptions.labelElements[g].innerHTML=y)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.map"),o("core-js/modules/es.string.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateGridOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,h,m){return p="".concat(p," canvas, ").concat(h," by ").concat(m," pixels, contains ").concat(d[0]),p=(d[0]===1?"".concat(p," shape: "):"".concat(p," shapes: ")).concat(d[1]),p}((u=function(d,p){var h,m="",g="",y=0;for(h in p){var b,x=0;for(b in p[h]){var v='<li id="'.concat(d,"shape").concat(y,'">').concat(p[h][b].color," ").concat(h,",");h==="line"?v+=" location = ".concat(p[h][b].pos,", length = ").concat(p[h][b].length," pixels"):(v+=" location = ".concat(p[h][b].pos),h!=="point"&&(v+=", area = ".concat(p[h][b].area," %")),v+="</li>"),m+=v,x++,y++}g=1<x?"".concat(g," ").concat(x," ").concat(h,"s"):"".concat(g," ").concat(x," ").concat(h)}return{numShapes:[y,g],details:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var h,m,g=0,y="",b=Array.from(Array(10),function(){return Array(10)});for(h in p)for(var x in p[h]){var v=void 0;v=h!=="line"?'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][x].color," ").concat(h,"</a>"):'<a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][x].color," ").concat(h," midpoint</a>"),b[p[h][x].loc.locY][p[h][x].loc.locX]?b[p[h][x].loc.locY][p[h][x].loc.locX]=b[p[h][x].loc.locY][p[h][x].loc.locX]+"  "+v:b[p[h][x].loc.locY][p[h][x].loc.locX]=v,g++}for(m in b){var w,_="<tr>";for(w in b[m])_+="<td>",b[m][w]!==void 0&&(_+=b[m][w]),_+="</td>";y=y+_+"</tr>"}return y}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),f!==l.map.innerHTML&&(l.map.innerHTML=f),u.details!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=u.details),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.to-fixed"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c){return function(f){if(Array.isArray(f)){for(var d=0,p=new Array(f.length);d<f.length;d++)p[d]=f[d];return p}}(c)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(c,f,d){return f=Math.floor(c[0]/f*10),c=Math.floor(c[1]/d*10),f===10&&(f-=1),c===10&&(c-=1),{locX:f,locY:c}}a.default.prototype.textOutput=function(c){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(c){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(c,f){var d,p,h,m=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),"");f==="Fallback"?(d=m+c,this.dummyDOM.querySelector("#".concat(p=m+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(m,"_Description"))?this.dummyDOM.querySelector("#".concat(m,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(m)).innerHTML='<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(d=m+c+(g=f),this.dummyDOM.querySelector("#".concat(p=m+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(m,"_Label"))?this.dummyDOM.querySelector("#".concat(m,"_Label")):this.dummyDOM.querySelector("#".concat(m))).insertAdjacentHTML("afterend",'<div id="'.concat(p,'"></div>'))),this._accessibleOutputs[d]={},c==="textOutput"?(g="#".concat(m,"gridOutput").concat(g),h='<div id="'.concat(d,'">Text Output<div id="').concat(d,'Summary" aria-label="text output summary"><p id="').concat(d,'_summary"></p><ul id="').concat(d,'_list"></ul></div><table id="').concat(d,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h,this._accessibleOutputs[d].list=this.dummyDOM.querySelector("#".concat(d,"_list"))):c==="gridOutput"&&(g="#".concat(m,"textOutput").concat(g),h='<div id="'.concat(d,'">Grid Output<p id="').concat(d,'_summary" aria-label="grid output summary"><table id="').concat(d,'_map" summary="grid output content"></table><ul id="').concat(d,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h,this._accessibleOutputs[d].map=this.dummyDOM.querySelector("#".concat(d,"_map"))),this._accessibleOutputs[d].shapeDetails=this.dummyDOM.querySelector("#".concat(d,"_shapeDetails")),this._accessibleOutputs[d].summary=this.dummyDOM.querySelector("#".concat(d,"_summary"))},a.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},a.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},a.default.prototype._accsCanvasColors=function(c,f){c==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},a.default.prototype._accsOutput=function(c,f){c==="ellipse"&&f[2]===f[3]?c="circle":c==="rectangle"&&f[2]===f[3]&&(c="square");var d,p,h={},m=!0,g=function(b,x){var v;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(v=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):b==="triangle"?(v=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):b==="quadrilateral"?(v=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):b==="line"?(v=(x[0]+x[2])/2,(x[1]+x[3])/2):(v=x[0],x[1]),[v,b]}(c,f);if(c==="line"?(h.color=this.ingredients.colors.stroke,h.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),d=this._getPos(f[0],[1]),p=this._getPos(f[2],[3]),h.loc=u(g,this.width,this.height),h.pos=d===p?"at ".concat(d):"from ".concat(d," to ").concat(p)):(c==="point"?h.color=this.ingredients.colors.stroke:(h.color=this.ingredients.colors.fill,h.area=this._getArea(c,f)),h.pos=this._getPos.apply(this,l(g)),h.loc=u(g,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[h]){for(var y in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][y])===JSON.stringify(h)&&(m=!1);m===!0&&this.ingredients.shapes[c].push(h)}}else this.ingredients.shapes[c]=[h]},a.default.prototype._getPos=function(p,d){var p=new DOMPointReadOnly(p,d),d=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),p=p.matrixTransform(d),d=p.x,p=p.y,h=this.width*this._pixelDensity,m=this.height*this._pixelDensity;return d<.4*h?p<.4*m?"top left":.6*m<p?"bottom left":"mid left":.6*h<d?p<.4*m?"top right":.6*m<p?"bottom right":"mid right":p<.4*m?"top middle":.6*m<p?"bottom middle":"middle"},a.default.prototype._getArea=function(c,f){var d,p,h=0,m=(c==="arc"?(h=(d=((f[5]-f[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*f[2]*f[3]/8,f[6]!=="open"&&f[6]!=="chord"||(p=f[0],x=f[1],m=f[0]+f[2]/2*Math.cos(f[4]).toFixed(2),v=f[1]+f[3]/2*Math.sin(f[4]).toFixed(2),y=f[0]+f[2]/2*Math.cos(f[5]).toFixed(2),g=f[1]+f[3]/2*Math.sin(f[5]).toFixed(2),p=Math.abs(p*(v-g)+m*(g-x)+y*(x-v))/2,d>Math.PI?h+=p:h-=p)):c==="ellipse"||c==="circle"?h=3.14*f[2]/2*f[3]/2:c==="line"||c==="point"?h=0:c==="quadrilateral"?h=Math.abs((f[6]+f[0])*(f[7]-f[1])+(f[0]+f[2])*(f[1]-f[3])+(f[2]+f[4])*(f[3]-f[5])+(f[4]+f[6])*(f[5]-f[7]))/2:c==="rectangle"||c==="square"?h=f[2]*f[3]:c==="triangle"&&(h=Math.abs(f[0]*(f[3]-f[5])+f[2]*(f[5]-f[1])+f[4]*(f[1]-f[3]))/2),this.width*this._pixelDensity),g=this.height*this._pixelDensity,y=[new DOMPoint(0,0),new DOMPoint(m,0),new DOMPoint(m,g),new DOMPoint(0,g)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=y.map(function(w){return w.matrixTransform(b)}),v=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*h/v)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.concat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype._updateTextOutput=function(a){var l,u,c,f;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(l=this._accessibleOutputs[a],c=function(d,p,h,m){return h="Your output is a, ".concat(h," by ").concat(m," pixels, ").concat(p," canvas containing the following"),h=d===1?"".concat(h," shape:"):"".concat(h," ").concat(d," shapes:"),h}((u=function(d,p){var h,m="",g=0;for(h in p)for(var y in p[h]){var b='<li><a href="#'.concat(d,"shape").concat(g,'">').concat(p[h][y].color," ").concat(h,"</a>");h==="line"?b+=", ".concat(p[h][y].pos,", ").concat(p[h][y].length," pixels long.</li>"):(b+=", at ".concat(p[h][y].pos),h!=="point"&&(b+=", covering ".concat(p[h][y].area,"% of the canvas")),b+=".</li>"),m+=b,g++}return{numShapes:g,listShapes:m}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(d,p){var h,m="",g=0;for(h in p)for(var y in p[h]){var b='<tr id="'.concat(d,"shape").concat(g,'"><th>').concat(p[h][y].color," ").concat(h,"</th>");h==="line"?b+="<td>location = ".concat(p[h][y].pos,"</td><td>length = ").concat(p[h][y].length," pixels</td></tr>"):(b+="<td>location = ".concat(p[h][y].pos,"</td>"),h!=="point"&&(b+="<td> area = ".concat(p[h][y].area,"%</td>")),b+="</tr>"),m+=b,g++}return m}(a,this.ingredients.shapes),c!==l.summary.innerHTML&&(l.summary.innerHTML=c),u.listShapes!==l.list.innerHTML&&(l.list.innerHTML=u.listShapes),f!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=f),this._accessibleOutputs[a]=l)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(o,i,s){"use strict";var a=(a=o("./core/main"))&&a.__esModule?a:{default:a};o("./core/constants"),o("./core/environment"),o("./core/friendly_errors/stacktrace"),o("./core/friendly_errors/validate_params"),o("./core/friendly_errors/file_errors"),o("./core/friendly_errors/fes_core"),o("./core/friendly_errors/sketch_reader"),o("./core/helpers"),o("./core/legacy"),o("./core/preload"),o("./core/p5.Element"),o("./core/p5.Graphics"),o("./core/p5.Renderer"),o("./core/p5.Renderer2D"),o("./core/rendering"),o("./core/shim"),o("./core/structure"),o("./core/transform"),o("./core/shape/2d_primitives"),o("./core/shape/attributes"),o("./core/shape/curves"),o("./core/shape/vertex"),o("./accessibility/outputs"),o("./accessibility/textOutput"),o("./accessibility/gridOutput"),o("./accessibility/color_namer"),o("./color/color_conversion"),o("./color/creating_reading"),o("./color/p5.Color"),o("./color/setting"),o("./data/p5.TypedDict"),o("./data/local_storage.js"),o("./dom/dom"),o("./accessibility/describe"),o("./events/acceleration"),o("./events/keyboard"),o("./events/mouse"),o("./events/touch"),o("./image/filters"),o("./image/image"),o("./image/loading_displaying"),o("./image/p5.Image"),o("./image/pixels"),o("./io/files"),o("./io/p5.Table"),o("./io/p5.TableRow"),o("./io/p5.XML"),o("./math/calculation"),o("./math/math"),o("./math/noise"),o("./math/p5.Vector"),o("./math/random"),o("./math/trigonometry"),o("./typography/attributes"),o("./typography/loading_displaying"),o("./typography/p5.Font"),o("./utilities/array_functions"),o("./utilities/conversion"),o("./utilities/string_functions"),o("./utilities/time_date"),o("./webgl/3d_primitives"),o("./webgl/interaction"),o("./webgl/light"),o("./webgl/loading"),o("./webgl/material"),o("./webgl/p5.Camera"),o("./webgl/p5.DataArray"),o("./webgl/p5.Geometry"),o("./webgl/p5.Matrix"),o("./webgl/p5.RendererGL.Immediate"),o("./webgl/p5.RendererGL"),o("./webgl/p5.RendererGL.Retained"),o("./webgl/p5.Framebuffer"),o("./webgl/p5.Shader"),o("./webgl/p5.RenderBuffer"),o("./webgl/p5.Texture"),o("./webgl/text"),o("./core/init"),i.exports=a.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.ColorConversion={_hsbaToHSLA:function(a){var l=a[0],u=a[1],c=a[2],f=(2-u)*c/2;return f!=0&&(f==1?u=0:f<.5?u/=2-u:u=u*c/(2-2*f)),[l,u,f,a[3]]},_hsbaToRGBA:function(a){var l,u,c,f,d,p=6*a[0],h=a[1],m=a[2];return h===0?[m,m,m,a[3]]:(u=m*(1-h),c=m*(1-h*(p-(l=Math.floor(p)))),h=m*(1-h*(1+l-p)),p=l===1?(f=c,d=m,u):l===2?(f=u,d=m,h):l===3?(f=u,d=c,m):l===4?(f=h,d=u,m):l===5?(f=m,d=u,c):(f=m,d=h,u),[f,d,p,a[3]])},_hslaToHSBA:function(a){var l=a[0],u=a[1],c=a[2],f=c<.5?(1+u)*c:c+u-c*u;return[l,u=2*(f-c)/f,f,a[3]]},_hslaToRGBA:function(a){var l,u=6*a[0],c=a[1],f=a[2];return c===0?[f,f,f,a[3]]:[(l=function(d,p,h){return d<0?d+=6:6<=d&&(d-=6),d<1?p+(h-p)*d:d<3?h:d<4?p+(h-p)*(4-d):p})(2+u,c=2*f-(f=f<.5?(1+c)*f:f+c-f*c),f),l(u,c,f),l(u-2,c,f),a[3]]},_rgbaToHSBA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),h=p-Math.min(c,f,d);return h==0?u=l=0:(u=h/p,c===p?l=(f-d)/h:f===p?l=2+(d-c)/h:d===p&&(l=4+(c-f)/h),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,p,a[3]]},_rgbaToHSLA:function(a){var l,u,c=a[0],f=a[1],d=a[2],p=Math.max(c,f,d),m=Math.min(c,f,d),h=p+m,m=p-m;return m==0?u=l=0:(u=h<1?m/h:m/(2-h),c===p?l=(f-d)/m:f===p?l=2+(d-c)/m:d===p&&(l=4+(c-f)/m),l<0?l+=6:6<=l&&(l-=6)),[l/6,u,h/2,a[3]]}},o=o.default.ColorConversion,s.default=o},{"../core/main":280}],266:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.alpha=function(p){return u.default._validateParameters("alpha",arguments),this.color(p)._getAlpha()},u.default.prototype.blue=function(p){return u.default._validateParameters("blue",arguments),this.color(p)._getBlue()},u.default.prototype.brightness=function(p){return u.default._validateParameters("brightness",arguments),this.color(p)._getBrightness()},u.default.prototype.color=function(){for(var p,h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];return u.default._validateParameters("color",m),m[0]instanceof u.default.Color?m[0]:(p=Array.isArray(m[0])?m[0]:m,new u.default.Color(this,p))},u.default.prototype.green=function(p){return u.default._validateParameters("green",arguments),this.color(p)._getGreen()},u.default.prototype.hue=function(p){return u.default._validateParameters("hue",arguments),this.color(p)._getHue()},u.default.prototype.lerpColor=function(p,h,m){u.default._validateParameters("lerpColor",arguments);var g,y,b,x=this._colorMode,v=this._colorMaxes;if(x===c.RGB)y=p.levels.map(function(w){return w/255}),b=h.levels.map(function(w){return w/255});else if(x===c.HSB)p._getBrightness(),h._getBrightness(),y=p.hsba,b=h.hsba;else{if(x!==c.HSL)throw new Error("".concat(x," cannot be used for interpolation."));p._getLightness(),h._getLightness(),y=p.hsla,b=h.hsla}return m=Math.max(Math.min(m,1),0),this.lerp===void 0&&(this.lerp=function(w,_,C){return C*(_-w)+w}),x===c.RGB?g=this.lerp(y[0],b[0],m):(.5<Math.abs(y[0]-b[0])&&(y[0]>b[0]?b[0]+=1:y[0]+=1),1<=(g=this.lerp(y[0],b[0],m))&&--g),p=this.lerp(y[1],b[1],m),h=this.lerp(y[2],b[2],m),y=this.lerp(y[3],b[3],m),g*=v[x][0],p*=v[x][1],h*=v[x][2],y*=v[x][3],this.color(g,p,h,y)},u.default.prototype.lightness=function(p){return u.default._validateParameters("lightness",arguments),this.color(p)._getLightness()},u.default.prototype.red=function(p){return u.default._validateParameters("red",arguments),this.color(p)._getRed()},u.default.prototype.saturation=function(p){return u.default._validateParameters("saturation",arguments),this.color(p)._getSaturation()};var d=u.default;s.default=d},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(g,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}g("core-js/modules/es.symbol"),g("core-js/modules/es.symbol.description"),g("core-js/modules/es.symbol.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.iterator"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.get-own-property-descriptor"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.iterator"),g("core-js/modules/es.string.trim"),g("core-js/modules/es.weak-map"),g("core-js/modules/web.dom-collections.iterator"),g("core-js/modules/es.array.includes"),g("core-js/modules/es.array.join"),g("core-js/modules/es.array.map"),g("core-js/modules/es.array.slice"),g("core-js/modules/es.object.to-string"),g("core-js/modules/es.regexp.constructor"),g("core-js/modules/es.regexp.exec"),g("core-js/modules/es.regexp.to-string"),g("core-js/modules/es.string.includes"),g("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(g("../core/main")),c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=d();if(_&&_.has(w))return _.get(w);var C,S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in w){var A;Object.prototype.hasOwnProperty.call(w,C)&&((A=E?Object.getOwnPropertyDescriptor(w,C):null)&&(A.get||A.set)?Object.defineProperty(S,C,A):S[C]=w[C])}return S.default=w,_&&_.set(w,S),S}(g("../core/constants")),f=p(g("./color_conversion"));function d(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,d=function(){return w},w)}function p(w){return w&&w.__esModule?w:{default:w}}function h(w,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=/\s*/,v=/(\d{1,3})/,y=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(y.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(g.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),RGBA:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",y.source,"\\)$"].join(g.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSL:new RegExp(["^hsl\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSLA:new RegExp(["^hsla\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i"),HSB:new RegExp(["^hsb\\(",v.source,",",b.source,",",b.source,"\\)$"].join(g.source),"i"),HSBA:new RegExp(["^hsba\\(",v.source,",",b.source,",",b.source,",",y.source,"\\)$"].join(g.source),"i")},v=(u.default.Color=function(){function w(E,A){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(E._colorMode,E._colorMaxes),![c.RGB,c.HSL,c.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=w._parseInputs.apply(this,A),this._calculateLevels()}var _,C,S;return _=w,S=[{key:"_parseInputs",value:function(E,A,N,k){var R,I=arguments.length,L=this.mode,j=this.maxes[L],M=[];if(3<=I){for(M[0]=E/j[0],M[1]=A/j[1],M[2]=N/j[2],M[3]=typeof k=="number"?k/j[3]:1,R=M.length-1;0<=R;--R){var V=M[R];V<0?M[R]=0:1<V&&(M[R]=1)}return L===c.HSL?f.default._hslaToRGBA(M):L===c.HSB?f.default._hsbaToRGBA(M):M}if(I===1&&typeof E=="string"){if(N=E.trim().toLowerCase(),m[N])return w._parseInputs.call(this,m[N]);if(x.HEX3.test(N))return(M=x.HEX3.exec(N).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,M;if(x.HEX6.test(N))return(M=x.HEX6.exec(N).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,M;if(x.HEX4.test(N))return M=x.HEX4.exec(N).slice(1).map(function(G){return parseInt(G+G,16)/255});if(x.HEX8.test(N))return M=x.HEX8.exec(N).slice(1).map(function(G){return parseInt(G,16)/255});if(x.RGB.test(N))return(M=x.RGB.exec(N).slice(1).map(function(G){return G/255}))[3]=1,M;if(x.RGB_PERCENT.test(N))return(M=x.RGB_PERCENT.exec(N).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,M;if(x.RGBA.test(N))return M=x.RGBA.exec(N).slice(1).map(function(G,U){return U===3?parseFloat(G):G/255});if(x.RGBA_PERCENT.test(N))return M=x.RGBA_PERCENT.exec(N).slice(1).map(function(G,U){return U===3?parseFloat(G):parseFloat(G)/100});if(x.HSL.test(N)?(M=x.HSL.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSLA.test(N)&&(M=x.HSLA.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),(M=M.map(function(G){return Math.max(Math.min(G,1),0)})).length)return f.default._hslaToRGBA(M);if(x.HSB.test(N)?(M=x.HSB.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:x.HSBA.test(N)&&(M=x.HSBA.exec(N).slice(1).map(function(G,U){return U===0?parseInt(G,10)/360:U===3?parseFloat(G):parseInt(G,10)/100})),M.length){for(R=M.length-1;0<=R;--R)M[R]=Math.max(Math.min(M[R],1),0);return f.default._hsbaToRGBA(M)}M=[1,1,1,1]}else{if(I!==1&&I!==2||typeof E!="number")throw new Error("".concat(arguments,"is not a valid color representation."));M[0]=E/j[2],M[1]=E/j[2],M[2]=E/j[2],M[3]=typeof A=="number"?A/j[3]:1,M=M.map(function(G){return Math.max(Math.min(G,1),0)})}return M}}],(C=[{key:"toString",value:function(E){var A=this.levels,N=this._array,k=N[3];switch(E){case"#rrggbb":return"#".concat(A[0]<16?"0".concat(A[0].toString(16)):A[0].toString(16),A[1]<16?"0".concat(A[1].toString(16)):A[1].toString(16),A[2]<16?"0".concat(A[2].toString(16)):A[2].toString(16));case"#rrggbbaa":return"#".concat(A[0]<16?"0".concat(A[0].toString(16)):A[0].toString(16),A[1]<16?"0".concat(A[1].toString(16)):A[1].toString(16),A[2]<16?"0".concat(A[2].toString(16)):A[2].toString(16),A[3]<16?"0".concat(A[3].toString(16)):A[3].toString(16));case"#rgb":return"#".concat(Math.round(15*N[0]).toString(16),Math.round(15*N[1]).toString(16),Math.round(15*N[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*N[0]).toString(16),Math.round(15*N[1]).toString(16),Math.round(15*N[2]).toString(16),Math.round(15*N[3]).toString(16));case"rgb":return"rgb(".concat(A[0],", ",A[1],", ",A[2],")");case"rgb%":return"rgb(".concat((100*N[0]).toPrecision(3),"%, ",(100*N[1]).toPrecision(3),"%, ",(100*N[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*N[0]).toPrecision(3),"%, ",(100*N[1]).toPrecision(3),"%, ",(100*N[2]).toPrecision(3),"%, ",(100*N[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",k,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",k,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*k).toPrecision(3),"%)");default:return"rgba(".concat(A[0],",",A[1],",",A[2],",",k,")")}}},{key:"setRed",value:function(E){this._array[0]=E/this.maxes[c.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(E){this._array[1]=E/this.maxes[c.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(E){this._array[2]=E/this.maxes[c.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(E){this._array[3]=E/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var E=this._array,A=this.levels=new Array(E.length),N=E.length-1;0<=N;--N)A[N]=Math.round(255*E[N]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(E,A){this.mode=E,this.maxes=A}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[c.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[c.RGB][1]}},{key:"_getHue",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[c.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===c.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])}}])&&h(_.prototype,C),S&&h(_,S),w}(),u.default.Color);s.default=v},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.fill"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Color"),u.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},u.default.prototype.endClip=function(){this._renderer.endClip()},u.default.prototype.clip=function(p,h){this._renderer.beginClip(h),p(),this._renderer.endClip(h)},u.default.prototype.background=function(){var p;return(p=this._renderer).background.apply(p,arguments),this},u.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},u.default.prototype.colorMode=function(p,h,m,g,y){return u.default._validateParameters("colorMode",arguments),p!==c.RGB&&p!==c.HSB&&p!==c.HSL||(this._colorMode=p,p=this._colorMaxes[p],arguments.length===2?(p[0]=h,p[1]=h,p[2]=h,p[3]=h):arguments.length===4?(p[0]=h,p[1]=m,p[2]=g):arguments.length===5&&(p[0]=h,p[1]=m,p[2]=g,p[3]=y)),this},u.default.prototype.fill=function(){var p;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(p=this._renderer).fill.apply(p,arguments),this},u.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},u.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},u.default.prototype.stroke=function(){var p;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(p=this._renderer).stroke.apply(p,arguments),this},u.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},u.default.prototype.noErase=function(){return this._renderer.noErase(),this};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QUADRATIC=s.LINEAR=s._CTX_MIDDLE=s._DEFAULT_LEADMULT=s._DEFAULT_TEXT_FILL=s.WORD=s.CHAR=s.BOLDITALIC=s.BOLD=s.ITALIC=s.NORMAL=s.BLUR=s.ERODE=s.DILATE=s.POSTERIZE=s.INVERT=s.OPAQUE=s.GRAY=s.THRESHOLD=s.BURN=s.DODGE=s.SOFT_LIGHT=s.HARD_LIGHT=s.OVERLAY=s.REPLACE=s.SCREEN=s.MULTIPLY=s.EXCLUSION=s.SUBTRACT=s.DIFFERENCE=s.LIGHTEST=s.DARKEST=s.ADD=s.REMOVE=s.BLEND=s.UP_ARROW=s.TAB=s.SHIFT=s.RIGHT_ARROW=s.RETURN=s.OPTION=s.LEFT_ARROW=s.ESCAPE=s.ENTER=s.DOWN_ARROW=s.DELETE=s.CONTROL=s.BACKSPACE=s.ALT=s.AUTO=s.HSL=s.HSB=s.RGB=s.MITER=s.BEVEL=s.ROUND=s.SQUARE=s.PROJECT=s.PIE=s.CHORD=s.OPEN=s.CLOSE=s.TESS=s.QUAD_STRIP=s.QUADS=s.TRIANGLE_STRIP=s.TRIANGLE_FAN=s.TRIANGLES=s.LINE_LOOP=s.LINE_STRIP=s.LINES=s.POINTS=s.BASELINE=s.BOTTOM=s.TOP=s.CENTER=s.LEFT=s.RIGHT=s.RADIUS=s.CORNERS=s.CORNER=s.RAD_TO_DEG=s.DEG_TO_RAD=s.RADIANS=s.DEGREES=s.TWO_PI=s.TAU=s.QUARTER_PI=s.PI=s.HALF_PI=s.WAIT=s.TEXT=s.MOVE=s.HAND=s.CROSS=s.ARROW=s.WEBGL2=s.WEBGL=s.P2D=s.VERSION=void 0,s.RGBA=s.HALF_FLOAT=s.FLOAT=s.UNSIGNED_INT=s.UNSIGNED_BYTE=s.COVER=s.CONTAIN=s.FALLBACK=s.LABEL=s.AXES=s.GRID=s._DEFAULT_FILL=s._DEFAULT_STROKE=s.PORTRAIT=s.LANDSCAPE=s.SMOOTH=s.FLAT=s.MIRROR=s.CLAMP=s.REPEAT=s.NEAREST=s.IMAGE=s.IMMEDIATE=s.TEXTURE=s.FILL=s.STROKE=s.CURVE=s.BEZIER=void 0;var a=Math.PI,l=(s.VERSION="1.9.4",s.P2D="p2d",s.WEBGL="webgl",s.WEBGL2="webgl2",s.ARROW="default",s.CROSS="crosshair",s.HAND="pointer",s.MOVE="move",s.TEXT="text",s.WAIT="wait",a/2),l=(s.HALF_PI=l,a),l=(s.PI=l,a/4),l=(s.QUARTER_PI=l,2*a),l=(s.TAU=l,2*a),l=(s.TWO_PI=l,s.DEGREES="degrees",s.RADIANS="radians",a/180),l=(s.DEG_TO_RAD=l,180/a);s.RAD_TO_DEG=l,s.CORNER="corner",s.CORNERS="corners",s.RADIUS="radius",s.RIGHT="right",s.LEFT="left",s.CENTER="center",s.TOP="top",s.BOTTOM="bottom",s.BASELINE="alphabetic",s.POINTS=0,s.LINES=1,s.LINE_STRIP=3,s.LINE_LOOP=2,s.TRIANGLES=4,s.TRIANGLE_FAN=6,s.TRIANGLE_STRIP=5,s.QUADS="quads",s.QUAD_STRIP="quad_strip",s.TESS="tess",s.CLOSE="close",s.OPEN="open",s.CHORD="chord",s.PIE="pie",s.PROJECT="square",s.SQUARE="butt",s.ROUND="round",s.BEVEL="bevel",s.MITER="miter",s.RGB="rgb",s.HSB="hsb",s.HSL="hsl",s.AUTO="auto",s.ALT=18,s.BACKSPACE=8,s.CONTROL=17,s.DELETE=46,s.DOWN_ARROW=40,s.ENTER=13,s.ESCAPE=27,s.LEFT_ARROW=37,s.OPTION=18,s.RETURN=13,s.RIGHT_ARROW=39,s.SHIFT=16,s.TAB=9,s.UP_ARROW=38,s.BLEND="source-over",s.REMOVE="destination-out",s.ADD="lighter",s.DARKEST="darken",s.LIGHTEST="lighten",s.DIFFERENCE="difference",s.SUBTRACT="subtract",s.EXCLUSION="exclusion",s.MULTIPLY="multiply",s.SCREEN="screen",s.REPLACE="copy",s.OVERLAY="overlay",s.HARD_LIGHT="hard-light",s.SOFT_LIGHT="soft-light",s.DODGE="color-dodge",s.BURN="color-burn",s.THRESHOLD="threshold",s.GRAY="gray",s.OPAQUE="opaque",s.INVERT="invert",s.POSTERIZE="posterize",s.DILATE="dilate",s.ERODE="erode",s.BLUR="blur",s.NORMAL="normal",s.ITALIC="italic",s.BOLD="bold",s.BOLDITALIC="bold italic",s.CHAR="CHAR",s.WORD="WORD",s._DEFAULT_TEXT_FILL="#000000",s._DEFAULT_LEADMULT=1.25,s._CTX_MIDDLE="middle",s.LINEAR="linear",s.QUADRATIC="quadratic",s.BEZIER="bezier",s.CURVE="curve",s.STROKE="stroke",s.FILL="fill",s.TEXTURE="texture",s.IMMEDIATE="immediate",s.IMAGE="image",s.NEAREST="nearest",s.REPEAT="repeat",s.CLAMP="clamp",s.MIRROR="mirror",s.FLAT="flat",s.SMOOTH="smooth",s.LANDSCAPE="landscape",s.PORTRAIT="portrait",s._DEFAULT_STROKE="#000000",s._DEFAULT_FILL="#FFFFFF",s.GRID="grid",s.AXES="axes",s.LABEL="label",s.FALLBACK="fallback",s.CONTAIN="contain",s.COVER="cover",s.UNSIGNED_BYTE="unsigned-byte",s.UNSIGNED_INT="unsigned-int",s.FLOAT="float",s.HALF_FLOAT="half-float",s.RGBA="rgba"},{}],270:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.search"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(c=o("./main"))&&c.__esModule?c:{default:c},c=function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=f();if(b&&b.has(y))return b.get(y);var x,v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var _;Object.prototype.hasOwnProperty.call(y,x)&&((_=w?Object.getOwnPropertyDescriptor(y,x):null)&&(_.get||_.set)?Object.defineProperty(v,x,_):v[x]=y[x])}return v.default=y,b&&b.set(y,v),v}(o("./constants"));function f(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,f=function(){return y},y)}var d=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],p=(u.default.prototype._frameRate=0,u.default.prototype._lastFrameTime=window.performance.now(),u.default.prototype._targetFrameRate=60,window.print),h=!1;function m(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}u.default.prototype.print=function(){var y;arguments.length?(y=console).log.apply(y,arguments):h||(p(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(h=!0))},u.default.prototype.frameCount=0,u.default.prototype.deltaTime=0,u.default.prototype.focused=document.hasFocus(),u.default.prototype.cursor=function(y,b,x){var v,w="auto",_=this._curElement.elt;d.includes(y)?w=y:typeof y=="string"&&(v="",b&&x&&typeof b=="number"&&typeof x=="number"&&(v="".concat(b," ").concat(x)),w=y.substring(0,7)==="http://"||y.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(y)?"url(".concat(y,") ").concat(v,", auto"):y),_.style.cursor=w},u.default.prototype.frameRate=function(y){return u.default._validateParameters("frameRate",arguments),typeof y!="number"||y<0?this._frameRate:(this._setProperty("_targetFrameRate",y),y===0&&this._setProperty("_frameRate",y),this)},u.default.prototype.getFrameRate=function(){return this.frameRate()},u.default.prototype.setFrameRate=function(y){return this.frameRate(y)},u.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},u.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},u.default.prototype.webglVersion=c.P2D,u.default.prototype.displayWidth=screen.width,u.default.prototype.displayHeight=screen.height,u.default.prototype.windowWidth=m(),u.default.prototype.windowHeight=g(),u.default.prototype._onresize=function(y){this._setProperty("windowWidth",m()),this._setProperty("windowHeight",g());var b=this._isGlobal?window:this;typeof b.windowResized!="function"||(b=b.windowResized(y))===void 0||b||y.preventDefault()},u.default.prototype.width=0,u.default.prototype.height=0,u.default.prototype.fullscreen=function(y){if(u.default._validateParameters("fullscreen",arguments),y===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(y){if(y=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");y.requestFullscreen?y.requestFullscreen():y.mozRequestFullScreen?y.mozRequestFullScreen():y.webkitRequestFullscreen?y.webkitRequestFullscreen():y.msRequestFullscreen&&y.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},u.default.prototype.pixelDensity=function(y){var b;return u.default._validateParameters("pixelDensity",arguments),typeof y=="number"?(y!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=y),(b=this).resizeCanvas(this.width,this.height,!0)):b=this._pixelDensity,b},u.default.prototype.displayDensity=function(){return window.devicePixelRatio},u.default.prototype.getURL=function(){return location.href},u.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(y){return y!==""})},u.default.prototype.getURLParams=function(){for(var y,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(y=b.exec(location.search))!=null;)y.index===b.lastIndex&&b.lastIndex++,x[y[1]]=y[2];return x},o=u.default,s.default=o},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.starts-with"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(d=o("../main"))&&d.__esModule?d:{default:d};o("../internationalization");function l(p,h){h=h||console.log.bind(console),u||f(),u.some(function(m){var g;if(p.message&&p.message.match("\\W?".concat(m.name,"\\W"))!==null)return g=m.type==="function"?"".concat(m.name,"()"):m.name,h("Did you just try to use p5.js's ".concat(g," ").concat(m.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var u=null,f=null,c=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},u=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function p(m){return Object.getOwnPropertyNames(m).filter(function(g){return g[0]!=="_"&&!(g in h)&&(h[g]=!0)}).map(function(g){var y=typeof m[g]=="function"?"function":g===g.toUpperCase()?"constant":"variable";return{name:g,type:y}})}var h={};(u=[].concat(p(a.default.prototype),p(o("../constants")))).sort(function(m,g){return g.name.length-m.name.length})},d=(a.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)})),a.default);s.default=d},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(a=o("../main"))&&a.__esModule?a:{default:a};o("../internationalization"),a.default._friendlyFileLoadError=function(){},o=a.default,s.default=o},{"../internationalization":278,"../main":280}],273:[function(o,i,s){"use strict";function a(O){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(O)}function l(O){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(z){return a(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":a(z)})(O)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=G(o("../main")),c=o("../internationalization"),f=V(o("../constants")),d,p,h,m,g,y,b,x,v,w,_,C,S,E,A,N,k,R,I,L,j;function M(){var O;return typeof WeakMap!="function"?null:(O=new WeakMap,M=function(){return O},O)}function V(O){if(O&&O.__esModule)return O;if(O===null||l(O)!=="object"&&typeof O!="function")return{default:O};var z=M();if(z&&z.has(O))return z.get(O);var q,ee,ae={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in O)Object.prototype.hasOwnProperty.call(O,q)&&((ee=Q?Object.getOwnPropertyDescriptor(O,q):null)&&(ee.get||ee.set)?Object.defineProperty(ae,q,ee):ae[q]=O[q]);return ae.default=O,z&&z.set(O,ae),ae}function G(O){return O&&O.__esModule?O:{default:O}}function U(O){return pe(O)||X(O)||Y()}function Y(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function X(O){if(Symbol.iterator in Object(O)||Object.prototype.toString.call(O)==="[object Arguments]")return Array.from(O)}function pe(O){if(Array.isArray(O)){for(var z=0,q=new Array(O.length);z<O.length;z++)q[z]=O[z];return q}}u.default._fesCodeReader=function(){};var $=u.default;s.default=$},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../main"))&&o.__esModule?o:{default:o};function a(){var l=/(^|@)\S+:\d+/,u=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(u)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(u)},this).map(function(d){var p=(d=-1<d.indexOf("(eval ")?d.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):d).replace(/^\s+/,"").replace(/\(eval code/g,"("),h=p.match(/ (\((.+):(\d+):(\d+)\)$)/),p=(p=h?p.replace(h[0],""):p).split(/\s+/).slice(1),h=this.extractLocation(h?h[1]:p.pop());return{functionName:p.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(h[0])?void 0:h[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(d){return!d.match(c)},this).map(function(d){var p,h;return(d=-1<d.indexOf(" > eval")?d.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):d).indexOf("@")===-1&&d.indexOf(":")===-1?{functionName:d}:{functionName:(h=d.match(p=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&h[1]?h[1]:void 0,fileName:(h=this.extractLocation(d.replace(p,"")))[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)/i,p=f.message.split(`
`),h=[],m=2,g=p.length;m<g;m+=2){var y=d.exec(p[m]);y&&h.push({fileName:y[2],lineNumber:y[1],source:p[m]})}return h},parseOpera10:function(f){for(var d=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,p=f.stacktrace.split(`
`),h=[],m=0,g=p.length;m<g;m+=2){var y=d.exec(p[m]);y&&h.push({functionName:y[3]||void 0,fileName:y[2],lineNumber:y[1],source:p[m]})}return h},parseOpera11:function(f){return f.stack.split(`
`).filter(function(d){return!!d.match(l)&&!d.match(/^Error created at/)},this).map(function(d){var p,m=d.split("@"),h=this.extractLocation(m.pop()),m=m.shift()||"";return{functionName:m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(p=m.match(/\(([^)]*)\)/)?m.replace(/^[^(]+\(([^)]*)\)$/,"$1"):p)===void 0||p==="[arguments not available]"?void 0:p.split(","),fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:d}},this)}}}o.default._getErrorStackParser=function(){return new a},o=o.default,s.default=o},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../main"))&&l.__esModule?l:{default:l};(function(f){if(!(f&&f.__esModule)&&!(f===null||c(f)!=="object"&&typeof f!="function")){var d=u();if(d&&d.has(f))return d.get(f);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=m?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=f[p])}h.default=f,d&&d.set(f,h)}})(o("../constants")),o("../internationalization");function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default._validateParameters=l.default._clearValidateParamsCache=function(){},o=l.default,s.default=o},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function l(f){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var d=c();if(d&&d.has(f))return d.get(f);var p,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var g;Object.prototype.hasOwnProperty.call(f,p)&&((g=m?Object.getOwnPropertyDescriptor(f,p):null)&&(g.get||g.set)?Object.defineProperty(h,p,g):h[p]=f[p])}return h.default=f,d&&d.set(f,h),h}(o("./constants"));function c(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,c=function(){return f},f)}s.default={modeAdjust:function(f,d,p,h,m){return m===u.CORNER?{x:f,y:d,w:p,h}:m===u.CORNERS?{x:f,y:d,w:p-f,h:h-d}:m===u.RADIUS?{x:f-p,y:d-h,w:2*p,h:2*h}:m===u.CENTER?{x:f-.5*p,y:d-.5*h,w:p,h}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(l=o("../core/main"))&&l.__esModule?l:{default:l};o("./internationalization");var l=Promise.resolve();Promise.all([new Promise(function(u,c){document.readyState==="complete"?u():window.addEventListener("load",u,!1)}),l]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(o,i,s){"use strict";o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.setTranslatorLanguage=s.currentTranslatorLanguage=s.availableTranslatorLanguages=s.initialize=s.translator=void 0;var a,l,u=f(o("i18next")),c=f(o("i18next-browser-languagedetector"));function f(h){return h&&h.__esModule?h:{default:h}}function d(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var p=function(){function h(b,x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.init(b,x)}var m,g,y;return m=h,(g=[{key:"fetchWithTimeout",value:function(b,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(b,x),new Promise(function(w,_){return setTimeout(function(){return _(new Error("timeout"))},v)})])}},{key:"init",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=b,this.options=x}},{key:"read",value:function(b,x,v){var w=this.options.loadPath;b===this.options.fallback?v(null,a[b][x]):l.includes(b)?(w=this.services.interpolator.interpolate(w,{lng:b,ns:x}),this.loadUrl(w,v)):v("Not found",!1)}},{key:"loadUrl",value:function(b,x){this.fetchWithTimeout(b).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(b))},function(){throw new Error("failed loading ".concat(b))}).then(function(v){return x(null,v)}).catch(x)}}])&&d(m.prototype,g),y&&d(m,y),h}();p.type="backend",s.translator=function(h,m){console.debug("p5.js translator called before translations were loaded"),u.default.t(h,m)},s.initialize=function(){return u.default.use(c.default).use(p).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(h){s.translator=h},function(h){return console.debug("Translations failed to load (".concat(h,")"))})},s.availableTranslatorLanguages=function(){return u.default.languages},s.currentTranslatorLanguage=function(h){return u.default.language},s.setTranslatorLanguage=function(h){return u.default.changeLanguage(h||void 0,function(m){return console.debug("Translations failed to load (".concat(m,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},o.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},o.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},o.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},o=o.default,s.default=o},{"./main":280}],280:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-names"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("./shim");var u=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function f(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}var d,p=function(){function h(b,w){var v=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(h.prototype._registeredMethods),_=!0,C=!1,S=void 0;try{for(var E,A=w[Symbol.iterator]();!(_=(E=A.next()).done);_=!0){var N=E.value;this._registeredMethods[N]=h.prototype._registeredMethods[N].slice()}}catch(U){C=!0,S=U}finally{try{_||A.return==null||A.return()}finally{if(C)throw S}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),h.prototype.callRegisteredHooksFor=function(U){var Y=this||h.prototype,X=this._isGlobal?window:this;if(Y._registeredMethods.hasOwnProperty(U)){var Y=Y._registeredMethods[U],pe=!0,U=!1,$=void 0;try{for(var O,z=Y[Symbol.iterator]();!(pe=(O=z.next()).done);pe=!0){var q=O.value;typeof q=="function"&&q.call(X)}}catch(Q){U=!0,$=Q}finally{try{pe||z.return==null||z.return()}finally{if(U)throw $}}}},this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var U=v._isGlobal?window:v;if(U.preload){v.callRegisteredHooksFor("beforePreload");var Y,X=document.getElementById(v._loadingScreenId),pe=(X||((X=document.createElement("div")).innerHTML="Loading...",X.style.position="absolute",X.id=v._loadingScreenId,(v._userNode||document.body).appendChild(X)),v._preloadMethods);for(Y in pe){pe[Y]=pe[Y]||h;var $=pe[Y];$!==h.prototype&&$!==h||(v._isGlobal&&(window[Y]=v._wrapPreload(v,Y)),$=v),v._registeredPreloadMethods[Y]=$[Y],$[Y]=v._wrapPreload($,Y)}U.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var U,Y=this._isGlobal?window:this;Y._preloadCount===0&&((U=document.getElementById(Y._loadingScreenId))&&U.parentNode.removeChild(U),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Y._setup(),this._recording||Y._draw()))},this._decrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||typeof U.preload!="function"||(U._setProperty("_preloadCount",U._preloadCount-1),U._runIfPreloadsAreDone())},this._wrapPreload=function(U,Y){var X=this;return function(){X._incrementPreload();for(var pe=arguments.length,$=new Array(pe),O=0;O<pe;O++)$[O]=arguments[O];return X._registeredPreloadMethods[Y].apply(U,$)}},this._incrementPreload=function(){var U=this._isGlobal?window:this;U._preloadDone||U._setProperty("_preloadCount",U._preloadCount+1)},this._setup=function(){v.callRegisteredHooksFor("beforeSetup"),v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var U=v._isGlobal?window:v;if(typeof U.preload=="function")for(var Y in v._preloadMethods)U[Y]=v._preloadMethods[Y][Y],U[Y]&&v&&(U[Y]=U[Y].bind(v));v._millisStart=window.performance.now(),U._preloadDone=!0,typeof U.setup=="function"&&U.setup();var X=document.getElementsByTagName("canvas"),pe=!0,$=!1,O=void 0;try{for(var z,q=X[Symbol.iterator]();!(pe=(z=q.next()).done);pe=!0){var ee=z.value;ee.dataset.hidden==="true"&&(ee.style.visibility="",delete ee.dataset.hidden)}}catch(ae){$=!0,O=ae}finally{try{pe||q.return==null||q.return()}finally{if($)throw O}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput(),v.callRegisteredHooksFor("afterSetup")},this._draw=function(){var U=window.performance.now(),Y=U-v._lastTargetFrameTime,X=1e3/v._targetFrameRate;(!v._loop||X-5<=Y)&&(v.deltaTime=U-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+X,U),v._lastRealFrameTime=U,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(U,Y){v[U]=Y,v._isGlobal&&(window[U]=Y)},this.remove=function(){v._startListener&&window.removeEventListener("load",v._startListener,!1);var U=document.getElementById(v._loadingScreenId);if(U&&(U.parentNode.removeChild(U),v._incrementPreload()),v._curElement){for(var Y in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(Y,v._events[Y]);var X=!0,U=!1,pe=void 0;try{for(var $,O=v._elements[Symbol.iterator]();!(X=($=O.next()).done);X=!0){var z,q=$.value;for(z in q.elt&&q.elt.parentNode&&q.elt.parentNode.removeChild(q.elt),q._events)q.elt.removeEventListener(z,q._events[z])}}catch(ie){U=!0,pe=ie}finally{try{X||O.return==null||O.return()}finally{if(U)throw pe}}var ee=v;v._registeredMethods.remove.forEach(function(ie){ie!==void 0&&ie.call(ee)})}if(v._isGlobal){for(var ae in h.prototype)try{delete window[ae]}catch{window[ae]=void 0}for(var Q in v)if(v.hasOwnProperty(Q))try{delete window[Q]}catch{window[Q]=void 0}h.instance=null}},this._registeredMethods.init.forEach(function(U){U!==void 0&&U.call(this)},this),this._setupPromisePreloads();var k,R,I=this._createFriendlyGlobalFunctionBinder();if(b)b(this),h._checkForUserDefinedFunctions(this);else{for(var L in this._isGlobal=!0,h.instance=this,h.prototype)typeof h.prototype[L]=="function"?(k=L.substring(2),this._events.hasOwnProperty(k)||(Math.hasOwnProperty(L)&&Math[L]===h.prototype[L]?I(L,h.prototype[L]):I(L,h.prototype[L].bind(this)))):I(L,h.prototype[L]);for(var j in this)this.hasOwnProperty(j)&&I(j,this[j])}for(R in this._events){var M=this["_on".concat(R)];M&&(M=M.bind(this),window.addEventListener(R,M,{passive:!1}),this._events[R]=M)}function V(){v._setProperty("focused",!0)}function G(){v._setProperty("focused",!1)}window.addEventListener("focus",V),window.addEventListener("blur",G),this.registerMethod("remove",function(){window.removeEventListener("focus",V),window.removeEventListener("blur",G)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var m,g,y;return m=h,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=u.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(b,x){h.prototype._preloadMethods.hasOwnProperty(b)||(h.prototype._preloadMethods[b]=x)}},{key:"registerMethod",value:function(b,x){var v=this||h.prototype;v._registeredMethods.hasOwnProperty(b)||(v._registeredMethods[b]=[]),v._registeredMethods[b].push(x)}},{key:"unregisterMethod",value:function(b,x){var v=this||h.prototype;if(v._registeredMethods.hasOwnProperty(b)){for(var w=v._registeredMethods[b],_=[],C=0;C<w.length;C++)w[C]===x&&_.push(C);for(var S=_.length-1;0<=S;S--)w.splice(_[S],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=b.globalObject||window;return b.log||console.log.bind(console),function(v,w){h.disableFriendlyErrors,x[v]=w}}}])&&f(m.prototype,g),y&&f(m,y),h}();for(d in p.instance=null,p.disableFriendlyErrors=!1,u)p.prototype[d]=u[d];p.VERSION=u.VERSION,p.prototype._preloadMethods={loadJSON:p.prototype,loadImage:p.prototype,loadStrings:p.prototype,loadXML:p.prototype,loadBytes:p.prototype,loadTable:p.prototype,loadFont:p.prototype,loadModel:p.prototype,loadShader:p.prototype},p.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},p.prototype._registeredPreloadMethods={},s.default=p},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Element=function(){function u(p,h){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.elt=p,this._pInst=this._pixelsState=h,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var c,f,d;return c=u,d=[{key:"_adjustListener",value:function(p,h,m){return h===!1?a.default.Element._detachListener(p,m):a.default.Element._attachListener(p,h,m),this}},{key:"_attachListener",value:function(p,h,m){m._events[p]&&a.default.Element._detachListener(p,m),h=h.bind(m),m.elt.addEventListener(p,h,!1),m._events[p]=h}},{key:"_detachListener",value:function(p,h){var m=h._events[p];h.elt.removeEventListener(p,m,!1),h._events[p]=null}}],(f=[{key:"parent",value:function(p){return p===void 0?this.elt.parentNode:(typeof p=="string"?(p[0]==="#"&&(p=p.substring(1)),p=document.getElementById(p)):p instanceof a.default.Element&&(p=p.elt),p.appendChild(this.elt),this)}},{key:"id",value:function(p){return p===void 0?this.elt.id:(this.elt.id=p,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(p){return p===void 0?this.elt.className:(this.elt.className=p,this)}},{key:"mousePressed",value:function(p){return a.default.Element._adjustListener("mousedown",function(h){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(h),p.call(this,h)},this),this}},{key:"doubleClicked",value:function(p){return a.default.Element._adjustListener("dblclick",p,this),this}},{key:"mouseWheel",value:function(p){return a.default.Element._adjustListener("wheel",p,this),this}},{key:"mouseReleased",value:function(p){return a.default.Element._adjustListener("mouseup",p,this),this}},{key:"mouseClicked",value:function(p){return a.default.Element._adjustListener("click",p,this),this}},{key:"mouseMoved",value:function(p){return a.default.Element._adjustListener("mousemove",p,this),this}},{key:"mouseOver",value:function(p){return a.default.Element._adjustListener("mouseover",p,this),this}},{key:"mouseOut",value:function(p){return a.default.Element._adjustListener("mouseout",p,this),this}},{key:"touchStarted",value:function(p){return a.default.Element._adjustListener("touchstart",p,this),this}},{key:"touchMoved",value:function(p){return a.default.Element._adjustListener("touchmove",p,this),this}},{key:"touchEnded",value:function(p){return a.default.Element._adjustListener("touchend",p,this),this}},{key:"dragOver",value:function(p){return a.default.Element._adjustListener("dragover",p,this),this}},{key:"dragLeave",value:function(p){return a.default.Element._adjustListener("dragleave",p,this),this}},{key:"_setProperty",value:function(p,h){this[p]=h}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Element,s.default=o},{"./main":280}],282:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=o("./main"))&&b.__esModule?b:{default:b},c=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=f();if(v&&v.has(x))return v.get(x);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var S;Object.prototype.hasOwnProperty.call(x,w)&&((S=C?Object.getOwnPropertyDescriptor(x,w):null)&&(S.get||S.set)?Object.defineProperty(_,w,S):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("./constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function h(x){return function(){var v,w=y(x);return m(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=y(this).constructor,Reflect.construct(w,arguments,v)):w.apply(this,arguments))}}function m(x,v){return!v||l(v)!=="object"&&typeof v!="function"?g(x):v}function g(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}u.default.Graphics=function(x){var v=C;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=h(C);function C(S,E,j,N,k){var R;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");L=k||document.createElement("canvas"),(R=_.call(this,L,N)).canvas=L;var I,L=j||c.P2D,j=N._userNode||document.body;for(I in k||j.appendChild(R.canvas),u.default.prototype)R[I]||(typeof u.default.prototype[I]=="function"?R[I]=u.default.prototype[I].bind(g(R)):R[I]=u.default.prototype[I]);return u.default.prototype._initializeInstanceVariables.apply(g(R)),R.width=S,R.height=E,R._pixelDensity=N._pixelDensity,L===c.WEBGL?(R._renderer=new u.default.RendererGL(R.canvas,g(R),!1),S=(k=R._renderer._adjustDimensions(S,E)).adjustedWidth,E=k.adjustedHeight):R._renderer=new u.default.Renderer2D(R.canvas,g(R),!1),N._elements.push(g(R)),Object.defineProperty(g(R),"deltaTime",{get:function(){return this._pInst.deltaTime}}),R._renderer.resize(S,E),R._renderer._applyDefaults(),m(R,g(R))}return v=C,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var S,E=this._pInst._elements.indexOf(this);for(S in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(S,this._events[S])}},{key:"createFramebuffer",value:function(S){return new u.default.Framebuffer(this,S)}}])&&d(v.prototype,x),w&&d(v,w),C}(u.default.Element);var b=u.default.Graphics;s.default=b},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(y=o("./main"))&&y.__esModule?y:{default:y},u=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var v=c();if(v&&v.has(x))return v.get(x);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var S;Object.prototype.hasOwnProperty.call(x,w)&&((S=C?Object.getOwnPropertyDescriptor(x,w):null)&&(S.get||S.set)?Object.defineProperty(_,w,S):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants"));function c(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,c=function(){return x},x)}function f(x){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}function d(x,v){for(var w=0;w<v.length;w++){var _=v[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function p(x,v){return(p=Object.setPrototypeOf||function(w,_){return w.__proto__=_,w})(x,v)}function h(x){return function(){var v,w,_=g(x);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=g(this).constructor,Reflect.construct(_,arguments,v)):_.apply(this,arguments),_=this,!(w=v)||f(w)!=="object"&&typeof w!="function"?m(_):w}}function m(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function g(x){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(x)}var y=function(x){var v=C;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&p(v,x);var w,_=h(C);function C(S,E,A){var N;if(this instanceof C)return(N=_.call(this,S,E)).canvas=S,N._pixelsState=E,A?(N._isMainCanvas=!0,N._pInst._setProperty("_curElement",m(N)),N._pInst._setProperty("canvas",N.canvas),N._pInst._setProperty("width",N.width),N._pInst._setProperty("height",N.height)):(N.canvas.style.display="none",N._styles=[]),N._clipping=!1,N._clipInvert=!1,N._textSize=12,N._textLeading=15,N._textFont="sans-serif",N._textStyle=u.NORMAL,N._textAscent=null,N._textDescent=null,N._textAlign=u.LEFT,N._textBaseline=u.BASELINE,N._textWrap=u.WORD,N._rectMode=u.CORNER,N._ellipseMode=u.CENTER,N._curveTightness=0,N._imageMode=u.CORNER,N._tint=null,N._doStroke=!0,N._doFill=!0,N._strokeSet=!1,N._fillSet=!1,N._leadingSet=!1,N._pushPopDepth=0,N;throw new TypeError("Cannot call a class as a function")}return v=C,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(S){this._pushPopDepth--,S.properties&&Object.assign(this,S.properties)}},{key:"beginClip",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=S.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(S,E){this.width=S,this.height=E,this.elt.width=S*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(S,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(S,E,A,N){var k=this._pixelsState,R=k._pixelDensity,I=this.canvas;if(S===void 0&&E===void 0)S=E=0,A=k.width,N=k.height;else if(S*=R,E*=R,A===void 0&&N===void 0)return S<0||E<0||S>=I.width||E>=I.height?[0,0,0,0]:this._getPixel(S,E);return k=new l.default.Image(A*R,N*R),k.pixelDensity(R),k.canvas.getContext("2d").drawImage(I,S,E,A*R,N*R,0,0,A*R,N*R),k}},{key:"textLeading",value:function(S){return typeof S=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",S),this._pInst):this._textLeading}},{key:"textStyle",value:function(S){return S?(S!==u.NORMAL&&S!==u.ITALIC&&S!==u.BOLD&&S!==u.BOLDITALIC||this._setProperty("_textStyle",S),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(S,E){return S!==void 0?(this._setProperty("_textAlign",S),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(S){return this._setProperty("_textWrap",S),this._textWrap}},{key:"text",value:function(S,E,A,N,k){var R,I,L,j,M=this._pInst,V=this._textWrap,G=Number.MAX_VALUE,U=A;if((this._doFill||this._doStroke)&&S!==void 0){if(R=(S=(S=typeof S!="string"?S.toString():S).replace(/(\t)/g,"  ")).split(`
`),N!==void 0){switch(this._rectMode===u.CENTER&&(E-=N/2),this._textAlign){case u.CENTER:E+=N/2;break;case u.RIGHT:E+=N}if(k!==void 0){this._rectMode===u.CENTER&&(A-=k/2,U-=k/2);var S=A,Y=M.textAscent();switch(this._textBaseline){case u.BOTTOM:j=A+k,A=Math.max(j,A),U+=Y;break;case u.CENTER:j=A+k/2,A=Math.max(j,A),U+=Y/2}G=A+k-Y,this._textBaseline===u.CENTER&&(G=S+k-Y/2)}else this._textBaseline!==u.BOTTOM&&this._textBaseline!==u.CENTER||(U=A-(S=M.textSize()*this._textLeading)/2,G=A+S/2);if(V===u.WORD){for(var X=[],pe=0;pe<R.length;pe++){for(var $="",O=R[pe].split(" "),z=0;z<O.length;z++)I="".concat($+O[z])+" ",$=N<(L=this.textWidth(I))&&0<$.length?(X.push($),"".concat(O[z])+" "):I;X.push($)}var q=0;this._textBaseline===u.CENTER?q=(X.length-1)*M.textLeading()/2:this._textBaseline===u.BOTTOM&&(q=(X.length-1)*M.textLeading());for(var ee=0;ee<R.length;ee++){$="",O=R[ee].split(" ");for(var ae=0;ae<O.length;ae++)I="".concat($+O[ae])+" ",N<(L=this.textWidth(I))&&0<$.length?(this._renderText(M,$.trim(),E,A-q,G,U),$="".concat(O[ae])+" ",A+=M.textLeading()):$=I;this._renderText(M,$.trim(),E,A-q,G,U),A+=M.textLeading()}}else{for(var Q=[],le=0;le<R.length;le++)for(var ie=R[le].split($=""),Z=0;Z<ie.length;Z++)I="".concat($+ie[Z]),(L=this.textWidth(I))<=N?$+=ie[Z]:N<L&&0<$.length&&(Q.push($),$="".concat(ie[Z]));Q.push($);var ge=0;this._textBaseline===u.CENTER?ge=(Q.length-1)*M.textLeading()/2:this._textBaseline===u.BOTTOM&&(ge=(Q.length-1)*M.textLeading());for(var ne=0;ne<R.length;ne++){ie=R[ne].split($="");for(var ye=0;ye<ie.length;ye++)I="".concat($+ie[ye]),(L=this.textWidth(I))<=N?$+=ie[ye]:N<L&&0<$.length&&(this._renderText(M,$.trim(),E,A-ge,G,U),A+=M.textLeading(),$="".concat(ie[ye]))}this._renderText(M,$.trim(),E,A-ge,G,U),A+=M.textLeading()}}else{var xe=0;this._textBaseline===u.CENTER?xe=(R.length-1)*M.textLeading()/2:this._textBaseline===u.BOTTOM&&(xe=(R.length-1)*M.textLeading());for(var Ne=0;Ne<R.length;Ne++)this._renderText(M,R[Ne],E,A-xe,G,U-xe),A+=M.textLeading()}return M}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var S=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(S)==="object"&&S.font&&S.font.supported}},{key:"_updateTextMetrics",value:function(){var S,E,A,N,k,R;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((S=document.createElement("span")).style.fontFamily=this._textFont,S.style.fontSize="".concat(this._textSize,"px"),S.innerHTML="ABCjgq|",(R=document.createElement("div")).style.display="inline-block",R.style.width="1px",R.style.height="0px",N=((E=document.createElement("div")).appendChild(S),E.appendChild(R),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),R.style.verticalAlign="baseline",b(R)),k=b(S),A=N[1]-k[1],N=(R.style.verticalAlign="bottom",b(R)),k=b(S),R=N[1]-k[1]-A,document.body.removeChild(E),this._setProperty("_textAscent",A),this._setProperty("_textDescent",R)),this}}])&&d(v.prototype,x),w&&d(v,w),C}(l.default.Element);function b(x){var v=0,w=0;if(x.offsetParent)for(;v+=x.offsetLeft,w+=x.offsetTop,x=x.offsetParent;);else v+=x.offsetLeft,w+=x.offsetTop;return[v,w]}y.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*u._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer=y,o=l.default.Renderer,s.default=o},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(x,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(b=x("./main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=S?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=v[_])}return C.default=v,w&&w.set(v,C),C}(x("./constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function p(v,w,_){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(A,S,E){var A=function(N,k){for(;!Object.prototype.hasOwnProperty.call(N,k)&&(N=g(N))!==null;);return N}(A,S);if(A)return(A=Object.getOwnPropertyDescriptor(A,S)).get?A.get.call(E):A.value})(v,w,_||v)}function h(v,w){return(h=Object.setPrototypeOf||function(_,C){return _.__proto__=C,_})(v,w)}function m(v){return function(){var w,_=g(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=g(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function g(v){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}x("./p5.Renderer");var y="rgba(0,0,0,0)",b=function(v){var w=S;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&h(w,v);var _,C=m(S);function S(E,A,N){if(this instanceof S)return(E=C.call(this,E,A,N)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return w=S,(v=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof u.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new u.default.Graphics(this.width,this.height,c.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,A){p(g(S.prototype),"resize",this).call(this,E,A),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,A;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof u.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),A=(A=this._pInst).color.apply(A,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(A.levels),A=A.toString(),this._setFill(A),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,A){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,A).toString(),this.drawingContext.strokeStyle=E,A=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=A,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(p(g(S.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(c.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),p(g(S.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,A,N,k,R,I,L,j,M){E.gifProperties&&E._animateGif(this._pInst);try{u.default.MediaElement&&E instanceof u.default.MediaElement&&E._ensureCanvas();var V=(V=this._tint&&E.canvas?this._getTintedImageCanvas(E):V)||E.canvas||E.elt,G=1;E.width&&0<E.width&&(G=V.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(V,G*A,G*N,G*k,G*R,I,L,j,M),this._isErasing&&this._pInst.erase()}catch(U){if(U.name!=="NS_ERROR_NOT_AVAILABLE")throw U}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var A=E.tintCanvas.getContext("2d");return A.save(),A.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(A.drawImage(E.canvas,0,0),A.globalCompositeOperation="luminosity",A.drawImage(E.canvas,0,0),A.globalCompositeOperation="color",A.drawImage(E.canvas,0,0),A.globalCompositeOperation="multiply",A.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),A.fillRect(0,0,E.canvas.width,E.canvas.height),A.globalCompositeOperation="destination-in"),A.globalAlpha=this._tint[3]/255,A.drawImage(E.canvas,0,0),A.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==c.BLEND&&E!==c.REMOVE&&E!==c.DARKEST&&E!==c.LIGHTEST&&E!==c.DIFFERENCE&&E!==c.MULTIPLY&&E!==c.EXCLUSION&&E!==c.SCREEN&&E!==c.REPLACE&&E!==c.OVERLAY&&E!==c.HARD_LIGHT&&E!==c.SOFT_LIGHT&&E!==c.DODGE&&E!==c.BURN&&E!==c.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,A=arguments.length,N=new Array(A),k=0;k<A;k++)N[k]=arguments[k];var R=N[N.length-1],I=Array.prototype.slice.call(N,0,N.length-1);this.drawingContext.globalCompositeOperation=R,u.default.prototype.copy.apply(this,I),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,A){return E=this.drawingContext.getImageData(E,A,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,A=E._pixelDensity,N=this.width*A,A=this.height*A,N=this.drawingContext.getImageData(0,0,N,A);E._setProperty("imageData",N),E._setProperty("pixels",N.data)}},{key:"set",value:function(E,A,N){E=Math.floor(E),A=Math.floor(A);var k=this._pixelsState;if(N instanceof u.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(k._pixelDensity,k._pixelDensity),this.drawingContext.clearRect(E,A,N.width,N.height),this.drawingContext.drawImage(N.canvas,E,A),this.drawingContext.restore();else{var R=0,I=0,L=0,j=0,M=4*(A*k._pixelDensity*(this.width*k._pixelDensity)+E*k._pixelDensity);if(k.imageData||k.loadPixels(),typeof N=="number")M<k.pixels.length&&(L=I=R=N,j=255);else if(Array.isArray(N)){if(N.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");M<k.pixels.length&&(R=N[0],I=N[1],L=N[2],j=N[3])}else N instanceof u.default.Color&&M<k.pixels.length&&(R=N.levels[0],I=N.levels[1],L=N.levels[2],j=N.levels[3]);for(var V=0;V<k._pixelDensity;V++)for(var G=0;G<k._pixelDensity;G++)M=4*((A*k._pixelDensity+G)*this.width*k._pixelDensity+(E*k._pixelDensity+V)),k.pixels[M]=R,k.pixels[M+1]=I,k.pixels[M+2]=L,k.pixels[M+3]=j}}},{key:"updatePixels",value:function(E,A,N,k){var R=this._pixelsState,I=R._pixelDensity;E===void 0&&A===void 0&&N===void 0&&k===void 0&&(A=E=0,N=this.width,k=this.height),E*=I,A*=I,N*=I,k*=I,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=R.imageData),this.drawingContext.putImageData(R.imageData,E,A,0,0,N,k)}},{key:"_acuteArcToBezier",value:function(E,A){var I=A/2,N=Math.cos(I),j=Math.sin(I),k=1/Math.tan(I),I=E+I,R=Math.cos(I),I=Math.sin(I),L=(4-N)/3,j=j+(N-L)*k;return{ax:Math.cos(E).toFixed(7),ay:Math.sin(E).toFixed(7),bx:(L*R+j*I).toFixed(7),by:(L*I-j*R).toFixed(7),cx:(L*R-j*I).toFixed(7),cy:(L*I+j*R).toFixed(7),dx:Math.cos(E+A).toFixed(7),dy:Math.sin(E+A).toFixed(7)}}},{key:"arc",value:function(E,A,N,k,R,I,L){var j,M=this.drawingContext,V=N/2,G=k/2,U=[];for(E+=V,A+=G;1e-5<=I-R;)j=Math.min(I-R,c.HALF_PI),U.push(this._acuteArcToBezier(R,j)),R+=j;return this._doFill&&(this._clipping||M.beginPath(),U.forEach(function(Y,X){X===0&&M.moveTo(E+Y.ax*V,A+Y.ay*G),M.bezierCurveTo(E+Y.bx*V,A+Y.by*G,E+Y.cx*V,A+Y.cy*G,E+Y.dx*V,A+Y.dy*G)}),L!==c.PIE&&L!=null||M.lineTo(E,A),M.closePath(),this._clipping||M.fill()),this._doStroke&&(this._clipping||M.beginPath(),U.forEach(function(Y,X){X===0&&M.moveTo(E+Y.ax*V,A+Y.ay*G),M.bezierCurveTo(E+Y.bx*V,A+Y.by*G,E+Y.cx*V,A+Y.cy*G,E+Y.dx*V,A+Y.dy*G)}),L===c.PIE?(M.lineTo(E,A),M.closePath()):L===c.CHORD&&M.closePath(),this._clipping||M.stroke()),this}},{key:"ellipse",value:function(j){var A=this.drawingContext,N=this._doFill,k=this._doStroke,R=parseFloat(j[0]),I=parseFloat(j[1]),L=parseFloat(j[2]),j=parseFloat(j[3]);if(N&&!k){if(this._getFill()===y)return this}else if(!N&&k&&this._getStroke()===y)return this;R+=L/2,I+=j/2,L/=2,j/=2,this._clipping||A.beginPath(),A.ellipse(R,I,L,j,0,0,2*Math.PI),!this._clipping&&N&&A.fill(),!this._clipping&&k&&A.stroke()}},{key:"line",value:function(E,A,N,k){var R=this.drawingContext;return this._doStroke&&this._getStroke()!==y&&(this._clipping||R.beginPath(),R.moveTo(E,A),R.lineTo(N,k),R.stroke()),this}},{key:"point",value:function(E,A){var N,k,R=this.drawingContext;return!this._doStroke||this._getStroke()===y?this:(N=this._getStroke(),k=this._getFill(),this._clipping||this._setFill(N),this._clipping||R.beginPath(),R.arc(E,A,R.lineWidth/2,0,c.TWO_PI,!1),void(this._clipping||(R.fill(),this._setFill(k))))}},{key:"quad",value:function(E,A,N,k,R,I,L,j){var M=this.drawingContext,V=this._doFill,G=this._doStroke;if(V&&!G){if(this._getFill()===y)return this}else if(!V&&G&&this._getStroke()===y)return this;return this._clipping||M.beginPath(),M.moveTo(E,A),M.lineTo(N,k),M.lineTo(R,I),M.lineTo(L,j),M.closePath(),!this._clipping&&V&&M.fill(),!this._clipping&&G&&M.stroke(),this}},{key:"rect",value:function(G){var A,N,k=G[0],R=G[1],I=G[2],L=G[3],j=G[4],M=G[5],V=G[6],G=G[7],U=this.drawingContext,Y=this._doFill,X=this._doStroke;if(Y&&!X){if(this._getFill()===y)return this}else if(!Y&&X&&this._getStroke()===y)return this;return this._clipping||U.beginPath(),j===void 0?U.rect(k,R,I,L):(M===void 0&&(M=j),V===void 0&&(V=M),G===void 0&&(G=V),X=(Y=Math.abs(I))/2,N=(A=Math.abs(L))/2,A<2*(j=Y<2*j?X:j)&&(j=N),A<2*(M=Y<2*M?X:M)&&(M=N),A<2*(V=Y<2*V?X:V)&&(V=N),A<2*(G=Y<2*G?X:G)&&(G=N),this._clipping||U.beginPath(),U.moveTo(k+j,R),U.arcTo(k+I,R,k+I,R+L,M),U.arcTo(k+I,R+L,k,R+L,V),U.arcTo(k,R+L,k,R,G),U.arcTo(k,R,k+I,R,j),U.closePath()),!this._clipping&&this._doFill&&U.fill(),!this._clipping&&this._doStroke&&U.stroke(),this}},{key:"triangle",value:function(V){var A=this.drawingContext,N=this._doFill,k=this._doStroke,R=V[0],I=V[1],L=V[2],j=V[3],M=V[4],V=V[5];if(N&&!k){if(this._getFill()===y)return this}else if(!N&&k&&this._getStroke()===y)return this;this._clipping||A.beginPath(),A.moveTo(R,I),A.lineTo(L,j),A.lineTo(M,V),A.closePath(),!this._clipping&&N&&A.fill(),!this._clipping&&k&&A.stroke()}},{key:"endShape",value:function(E,A,N,k,R,I,L){if(A.length!==0&&(this._doStroke||this._doFill)){var j,M,V,G=E===c.CLOSE,U=(G&&!I&&A.push(A[0]),A.length);if(N&&L===null){if(3<U){var Y=[],X=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(A[1][0],A[1][1]),M=1;M+2<U;M++)j=A[M],Y[0]=[j[0],j[1]],Y[1]=[j[0]+(X*A[M+1][0]-X*A[M-1][0])/6,j[1]+(X*A[M+1][1]-X*A[M-1][1])/6],Y[2]=[A[M+1][0]+(X*A[M][0]-X*A[M+2][0])/6,A[M+1][1]+(X*A[M][1]-X*A[M+2][1])/6],Y[3]=[A[M+1][0],A[M+1][1]],this.drawingContext.bezierCurveTo(Y[1][0],Y[1][1],Y[2][0],Y[2][1],Y[3][0],Y[3][1]);G&&this.drawingContext.lineTo(A[M+1][0],A[M+1][1]),this._doFillStrokeClose(G)}}else if(k&&L===null){for(this._clipping||this.drawingContext.beginPath(),M=0;M<U;M++)A[M].isVert?A[M].moveTo?this.drawingContext.moveTo(A[M][0],A[M][1]):this.drawingContext.lineTo(A[M][0],A[M][1]):this.drawingContext.bezierCurveTo(A[M][0],A[M][1],A[M][2],A[M][3],A[M][4],A[M][5]);this._doFillStrokeClose(G)}else if(R&&L===null){for(this._clipping||this.drawingContext.beginPath(),M=0;M<U;M++)A[M].isVert?A[M].moveTo?this.drawingContext.moveTo(A[M][0],A[M][1]):this.drawingContext.lineTo(A[M][0],A[M][1]):this.drawingContext.quadraticCurveTo(A[M][0],A[M][1],A[M][2],A[M][3]);this._doFillStrokeClose(G)}else if(L===c.POINTS)for(M=0;M<U;M++)j=A[M],this._doStroke&&this._pInst.stroke(j[6]),this._pInst.point(j[0],j[1]);else if(L===c.LINES)for(M=0;M+1<U;M+=2)j=A[M],this._doStroke&&this._pInst.stroke(A[M+1][6]),this._pInst.line(j[0],j[1],A[M+1][0],A[M+1][1]);else if(L===c.TRIANGLES)for(M=0;M+2<U;M+=3)j=A[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(j[0],j[1]),this.drawingContext.lineTo(A[M+1][0],A[M+1][1]),this.drawingContext.lineTo(A[M+2][0],A[M+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(A[M+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(A[M+2][6]),this.drawingContext.stroke());else if(L===c.TRIANGLE_STRIP)for(M=0;M+1<U;M++)j=A[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(A[M+1][0],A[M+1][1]),this.drawingContext.lineTo(j[0],j[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[M+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(A[M+1][5]),M+2<U&&(this.drawingContext.lineTo(A[M+2][0],A[M+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[M+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(A[M+2][5])),this._doFillStrokeClose(G);else if(L===c.TRIANGLE_FAN){if(2<U){for(this._clipping||this.drawingContext.beginPath(),M=2;M<U;M++)j=A[M],this.drawingContext.moveTo(A[0][0],A[0][1]),this.drawingContext.lineTo(A[M-1][0],A[M-1][1]),this.drawingContext.lineTo(j[0],j[1]),this.drawingContext.lineTo(A[0][0],A[0][1]),M<U-1&&(this._doFill&&j[5]!==A[M+1][5]||this._doStroke&&j[6]!==A[M+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(j[5]),this.drawingContext.fill(),this._pInst.fill(A[M+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(j[6]),this.drawingContext.stroke(),this._pInst.stroke(A[M+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(G)}}else if(L===c.QUADS)for(M=0;M+3<U;M+=4){for(j=A[M],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(j[0],j[1]),V=1;V<4;V++)this.drawingContext.lineTo(A[M+V][0],A[M+V][1]);this.drawingContext.lineTo(j[0],j[1]),!this._clipping&&this._doFill&&this._pInst.fill(A[M+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[M+3][6]),this._doFillStrokeClose(G)}else if(L===c.QUAD_STRIP){if(3<U)for(M=0;M+1<U;M+=2)j=A[M],this._clipping||this.drawingContext.beginPath(),M+3<U?(this.drawingContext.moveTo(A[M+2][0],A[M+2][1]),this.drawingContext.lineTo(j[0],j[1]),this.drawingContext.lineTo(A[M+1][0],A[M+1][1]),this.drawingContext.lineTo(A[M+3][0],A[M+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(A[M+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(A[M+3][6])):(this.drawingContext.moveTo(j[0],j[1]),this.drawingContext.lineTo(A[M+1][0],A[M+1][1])),this._doFillStrokeClose(G)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(A[0][0],A[0][1]),M=1;M<U;M++)(j=A[M]).isVert&&(j.moveTo?(G&&this.drawingContext.closePath(),this.drawingContext.moveTo(j[0],j[1])):this.drawingContext.lineTo(j[0],j[1]));this._doFillStrokeClose(G)}I=R=k=N=!1,G&&A.pop()}return this}},{key:"strokeCap",value:function(E){return E!==c.ROUND&&E!==c.SQUARE&&E!==c.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==c.ROUND&&E!==c.BEVEL&&E!==c.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,A,N,k,R,I,L,j){return this._pInst.beginShape(),this._pInst.vertex(E,A),this._pInst.bezierVertex(N,k,R,I,L,j),this._pInst.endShape(),this}},{key:"curve",value:function(E,A,N,k,R,I,L,j){return this._pInst.beginShape(),this._pInst.curveVertex(E,A),this._pInst.curveVertex(N,k),this._pInst.curveVertex(R,I),this._pInst.curveVertex(L,j),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,A,N,k,R,I){this.drawingContext.transform(E,A,N,k,R,I)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,A){return this.drawingContext.scale(E,A),this}},{key:"translate",value:function(E,A){return E instanceof u.default.Vector&&(A=E.y,E=E.x),this.drawingContext.translate(E,A),this}},{key:"_renderText",value:function(E,A,N,k,R,I){if(!(k<I||R<=k))return E.push(),this._isOpenType()?this._textFont._renderPath(A,N,k,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(A,N,k),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(A,N,k))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E=this._pInst,A=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),A=this._textFont,this._isOpenType()&&(A=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),A||"sans-serif");return/\s/.exec(A)&&(A='"'.concat(A,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(A),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,E}},{key:"push",value:function(){return this.drawingContext.save(),p(g(S.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,p(g(S.prototype),"pop",this).call(this,E)}}])&&d(w.prototype,v),_&&d(w,_),S}(u.default.Renderer),x=(b.prototype.text=function(v,w,_,A,S){A!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(E=!0,this.drawingContext.textBaseline=c.TOP);var E,A=u.default.Renderer.prototype.text.apply(this,arguments);return E&&(this.drawingContext.textBaseline=c.BASELINE),A},u.default.Renderer2D=b,u.default.Renderer2D);s.default=x},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator");var a=(o=o("./main"))&&o.__esModule?o:{default:o};a.default.prototype._promisePreloads=[];function l(){return{}}var u=!(a.default.prototype.registerPromisePreload=function(c){a.default.prototype._promisePreloads.push(c)});a.default.prototype._setupPromisePreloads=function(){var c=!0,f=!1,d=void 0;try{for(var p,h=this._promisePreloads[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value,g=this,y=m.method,b=m.addCallbacks,x=m.legacyPreloadSetup,v=m.target||this,w=v[y].bind(v);if(v===a.default.prototype){if(u)continue;g=null,w=v[y]}v[y]=this._wrapPromisePreload(g,w,b),x&&(v[x.method]=this._legacyPreloadGenerator(g,x,v[y]))}}catch(_){f=!0,d=_}finally{try{c||h.return==null||h.return()}finally{if(f)throw d}}u=!0},a.default.prototype._wrapPromisePreload=function(c,f,d){var p=function(){for(var h=this,m=(this._incrementPreload(),null),g=null,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];if(d)for(var v=b.length-1;0<=v&&!g&&typeof b[v]=="function";v--)g=m,m=b.pop();var w=Promise.resolve(f.apply(this,b));return m&&w.then(m),g&&w.catch(g),w.then(function(){return h._decrementPreload()}),w};return p=c?p.bind(c):p},a.default.prototype._legacyPreloadGenerator=function(c,h,d){var p=h.createBaseObject||l,h=function(){var m=this;this._incrementPreload();for(var g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];var x=p.apply(this,y);return d.apply(this,y).then(function(v){Object.assign(x,v),m._decrementPreload()}),x};return h=c?h.bind(c):h}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=o("./main"))&&p.__esModule?p:{default:p},u=function(h){if(h&&h.__esModule)return h;if(h===null||f(h)!=="object"&&typeof h!="function")return{default:h};var m=c();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("./constants"));function c(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,c=function(){return h},h)}function f(h){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("./p5.Graphics"),o("./p5.Renderer2D"),o("../webgl/p5.RendererGL");var d="defaultCanvas0",p=(l.default.prototype.createCanvas=function(h,m,g,y){var b,x,v;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(g=u.P2D,y=arguments[2]):b=g||u.P2D,y)(v=document.getElementById(d))&&v.parentNode.removeChild(v),v=y,this._defaultGraphicsCreated=!1;else{if(b===u.WEBGL)(v=document.getElementById(d))&&(v.parentNode.removeChild(v),x=this._renderer,this._elements=this._elements.filter(function(_){return _!==x})),(v=document.createElement("canvas")).id=d,v.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)v=this.canvas;else{v=y||document.createElement("canvas");for(var w=0;document.getElementById("defaultCanvas".concat(w));)w++;d="defaultCanvas".concat(w),v.id=d,v.classList.add("p5Canvas")}this._setupDone||(v.dataset.hidden=!0,v.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(g=document.createElement("main"),document.body.appendChild(g)),document.getElementsByTagName("main")[0])).appendChild(v)}return b===u.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(v,this,!0)),this._elements.push(this._renderer),h=(y=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=y.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(v,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(h,m),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(h,m,g){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var y,b,x,v={};for(y in this.drawingContext){var w=this.drawingContext[y];f(w)!=="object"&&typeof w!="function"&&(v[y]=w)}for(x in this._renderer instanceof l.default.RendererGL&&(h=(b=this._renderer._adjustDimensions(h,m)).adjustedWidth,m=b.adjustedHeight),this.width=h,this.height=m,this._renderer.resize(h,m),v)try{this.drawingContext[x]=v[x]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},l.default.prototype.createGraphics=function(h,m){for(var g=arguments.length,y=new Array(2<g?g-2:0),b=2;b<g;b++)y[b-2]=arguments[b];return y[0]instanceof HTMLCanvasElement&&(y[1]=y[0],y[0]=u.P2D),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(h,m,y[0],this,y[1])},l.default.prototype.createFramebuffer=function(h){return new l.default.Framebuffer(this,h)},l.default.prototype.clearDepth=function(h){this._assert3d("clearDepth"),this._renderer.clearDepth(h)},l.default.prototype.blendMode=function(h){l.default._validateParameters("blendMode",arguments),h===u.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),h=u.BLEND),this._renderer.blendMode(h)},l.default);s.default=p},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=p(o("../main")),c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=d();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../constants")),f=p(o("../helpers"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){return m&&m.__esModule?m:{default:m}}function h(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),u.default.prototype._normalizeArcAngles=function(m,g,y,b,x){var v;return m-=c.TWO_PI*Math.floor(m/c.TWO_PI),g-=c.TWO_PI*Math.floor(g/c.TWO_PI),v=Math.min(Math.abs(m-g),c.TWO_PI-Math.abs(m-g)),x&&(m=m<=c.HALF_PI?Math.atan(y/b*Math.tan(m)):m>c.HALF_PI&&m<=3*c.HALF_PI?Math.atan(y/b*Math.tan(m))+c.PI:Math.atan(y/b*Math.tan(m))+c.TWO_PI,g=g<=c.HALF_PI?Math.atan(y/b*Math.tan(g)):g>c.HALF_PI&&g<=3*c.HALF_PI?Math.atan(y/b*Math.tan(g))+c.PI:Math.atan(y/b*Math.tan(g))+c.TWO_PI),g<m&&(g+=c.TWO_PI),{start:m,stop:g,correspondToSamePoint:v<1e-5}},u.default.prototype.arc=function(m,g,y,b,x,v,w,_){return u.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==v&&(x=this._toRadians(x),v=this._toRadians(v),y=Math.abs(y),b=Math.abs(b),m=f.default.modeAdjust(m,g,y,b,this._renderer._ellipseMode),(g=this._normalizeArcAngles(x,v,m.w,m.h,!0)).correspondToSamePoint?this._renderer.ellipse([m.x,m.y,m.w,m.h,_]):(this._renderer.arc(m.x,m.y,m.w,m.h,g.start,g.stop,w,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[m.x,m.y,m.w,m.h,g.start,g.stop,w]))),this},u.default.prototype.ellipse=function(m,g,y,b,x){return u.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},u.default.prototype.circle=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];u.default._validateParameters("circle",g);var b=g.slice(0,2);return b.push(g[2],g[2]),this._renderEllipse.apply(this,h(b))},u.default.prototype._renderEllipse=function(m,g,y,b,x){return(this._renderer._doStroke||this._renderer._doFill)&&(y<0&&(y=Math.abs(y)),b===void 0?b=y:b<0&&(b=Math.abs(b)),m=f.default.modeAdjust(m,g,y,b,this._renderer._ellipseMode),this._renderer.ellipse([m.x,m.y,m.w,m.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[m.x,m.y,m.w,m.h])),this},u.default.prototype.line=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("line",y),this._renderer._doStroke&&(m=this._renderer).line.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",y),this},u.default.prototype.point=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("point",y),this._renderer._doStroke&&(y.length===1&&y[0]instanceof u.default.Vector?this._renderer.point.call(this._renderer,y[0].x,y[0].y,y[0].z):((m=this._renderer).point.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",y))),this},u.default.prototype.quad=function(){for(var m,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return u.default._validateParameters("quad",y),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&y.length<12?this._renderer.quad.call(this._renderer,y[0],y[1],0,y[2],y[3],0,y[4],y[5],0,y[6],y[7],0,y[8],y[9]):((m=this._renderer).quad.apply(m,y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",y))),this},u.default.prototype.rect=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return u.default._validateParameters("rect",g),this._renderRect.apply(this,g)},u.default.prototype.square=function(m,g,y,b,x,v,w){return u.default._validateParameters("square",arguments),this._renderRect.call(this,m,g,y,y,b,x,v,w)},u.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var m=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),g=[m.x,m.y,m.w,m.h],y=4;y<arguments.length;y++)g[y]=arguments[y];this._renderer.rect(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[m.x,m.y,m.w,m.h])}return this},u.default.prototype.triangle=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return u.default._validateParameters("triangle",g),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",g),this},o=u.default,s.default=o},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype.ellipseMode=function(p){return u.default._validateParameters("ellipseMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._ellipseMode=p),this},u.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},u.default.prototype.rectMode=function(p){return u.default._validateParameters("rectMode",arguments),p!==c.CORNER&&p!==c.CORNERS&&p!==c.RADIUS&&p!==c.CENTER||(this._renderer._rectMode=p),this},u.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},u.default.prototype.strokeCap=function(p){return u.default._validateParameters("strokeCap",arguments),p!==c.ROUND&&p!==c.SQUARE&&p!==c.PROJECT||this._renderer.strokeCap(p),this},u.default.prototype.strokeJoin=function(p){return u.default._validateParameters("strokeJoin",arguments),p!==c.ROUND&&p!==c.BEVEL&&p!==c.MITER||this._renderer.strokeJoin(p),this},u.default.prototype.strokeWeight=function(p){return u.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(p),this};var d=u.default;s.default=d},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(l=o("../main"))&&l.__esModule?l:{default:l};o("../friendly_errors/fes_core"),o("../friendly_errors/file_errors"),o("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(u=this._renderer).bezier.apply(u,f),this},a.default.prototype.bezierDetail=function(u){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=u,this},a.default.prototype.bezierPoint=function(u,c,f,d,p){a.default._validateParameters("bezierPoint",arguments);var h=1-p;return Math.pow(h,3)*u+3*Math.pow(h,2)*p*c+3*h*Math.pow(p,2)*f+Math.pow(p,3)*d},a.default.prototype.bezierTangent=function(u,c,f,d,p){a.default._validateParameters("bezierTangent",arguments);var h=1-p;return 3*d*Math.pow(p,2)-3*f*Math.pow(p,2)+6*f*h*p-6*c*h*p+3*c*Math.pow(h,2)-3*u*Math.pow(h,2)},a.default.prototype.curve=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("curve",f),this._renderer._doStroke&&(u=this._renderer).curve.apply(u,f),this},a.default.prototype.curveDetail=function(u){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=u<3?3:u,this},a.default.prototype.curveTightness=function(u){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=u,this},a.default.prototype.curvePoint=function(u,c,f,d,p){a.default._validateParameters("curvePoint",arguments);var h=this._renderer._curveTightness,m=p*p*p,g=p*p;return u*((h-1)/2*m+(1-h)*g+(h-1)/2*p)+c*((h+3)/2*m+(-5-h)/2*g+1)+f*((-3-h)/2*m+(h+2)*g+(1-h)/2*p)+d*((1-h)/2*m+(h-1)/2*g)},a.default.prototype.curveTangent=function(u,c,f,d,g){a.default._validateParameters("curveTangent",arguments);var h=this._renderer._curveTightness,m=g*g*3,g=2*g;return u*((h-1)/2*m+(1-h)*g+(h-1)/2)+c*((h+3)/2*m+(-5-h)/2*g)+f*((-3-h)/2*m+(h+2)*g+(1-h)/2)+d*((1-h)/2*m+(h-1)/2*g)};var l=a.default;s.default=l},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(o,i,s){"use strict";function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}function l(w){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(w)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(v=o("../main"))&&v.__esModule?v:{default:v},c=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var _=f();if(_&&_.has(w))return _.get(w);var C,S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in w){var A;Object.prototype.hasOwnProperty.call(w,C)&&((A=E?Object.getOwnPropertyDescriptor(w,C):null)&&(A.get||A.set)?Object.defineProperty(S,C,A):S[C]=w[C])}return S.default=w,_&&_.set(w,S),S}(o("../constants"));function f(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,f=function(){return w},w)}var d=null,p=[],h=[],m=!1,g=!1,y=!1,b=!1,x=!0,v=(u.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(h=[],b=!0),this},u.default.prototype.beginShape=function(w){var _;return u.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(_=this._renderer).beginShape.apply(_,arguments):(d=w===c.POINTS||w===c.LINES||w===c.TRIANGLES||w===c.TRIANGLE_FAN||w===c.TRIANGLE_STRIP||w===c.QUADS||w===c.QUAD_STRIP?w:null,p=[],h=[]),this},u.default.prototype.bezierVertex=function(){for(var w,_=arguments.length,C=new Array(_),S=0;S<_;S++)C[S]=arguments[S];if(u.default._validateParameters("bezierVertex",C),this._renderer.isP3D)(w=this._renderer).bezierVertex.apply(w,C);else if(p.length===0)u.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{m=!0;for(var E=[],A=0;A<C.length;A++)E[A]=C[A];E.isVert=!1,(b?h:p).push(E)}return this},u.default.prototype.curveVertex=function(){for(var w,_=arguments.length,C=new Array(_),S=0;S<_;S++)C[S]=arguments[S];return u.default._validateParameters("curveVertex",C),this._renderer.isP3D?(w=this._renderer).curveVertex.apply(w,C):(g=!0,this.vertex(C[0],C[1])),this},u.default.prototype.endContour=function(){if(!this._renderer.isP3D){var w=h[0].slice();w.isVert=h[0].isVert,w.moveTo=!1,h.push(w),x&&(p.push(p[0]),x=!1);for(var _=0;_<h.length;_++)p.push(h[_])}return this},u.default.prototype.endShape=function(w){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(u.default._validateParameters("endShape",arguments),_<1&&(console.log("\u{1F338} p5.js says: You can not have less than one instance"),_=1),this._renderer.isP3D)this._renderer.endShape(w,g,m,y,b,d,_);else{if(_!==1&&console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode"),p.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;_=w===c.CLOSE,_&&!b&&p.push(p[0]),this._renderer.endShape(w,p,g,m,y,b,d),x=!(b=y=m=g=!1),_&&p.pop()}return this},u.default.prototype.quadraticVertex=function(){for(var w,_=arguments.length,C=new Array(_),S=0;S<_;S++)C[S]=arguments[S];if(u.default._validateParameters("quadraticVertex",C),this._renderer.isP3D)(w=this._renderer).quadraticVertex.apply(w,C);else{if(this._contourInited)return(w={}).x=C[0],w.y=C[1],w.x3=C[2],w.y3=C[3],w.type=c.QUADRATIC,this._contourVertices.push(w),this;if(0<p.length){y=!0;for(var E=[],A=0;A<C.length;A++)E[A]=C[A];E.isVert=!1,(b?h:p).push(E)}else u.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},u.default.prototype.vertex=function(w,_,C,S,E){var A;return this._renderer.isP3D?(A=this._renderer).vertex.apply(A,arguments):((A=[]).isVert=!0,A[0]=w,A[1]=_,A[2]=0,A[3]=0,A[4]=0,A[5]=this._renderer._getFill(),A[6]=this._renderer._getStroke(),C&&(A.moveTo=C),(b?(h.length===0&&(A.moveTo=!0),h):p).push(A)),this},u.default.prototype.normal=function(w,_,C){var S;return this._assert3d("normal"),u.default._validateParameters("normal",arguments),(S=this._renderer).normal.apply(S,arguments),this},u.default);s.default=v},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(o,i,s){},{}],292:[function(o,i,s){"use strict";o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("./main"))&&o.__esModule?o:{default:o},o.default.prototype.noLoop=function(){this._loop=!1},o.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},o.default.prototype.isLooping=function(){return this._loop},o.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},o.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},o.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var l=parseInt(a),u=((isNaN(l)||l<1)&&(l=1),this._isGlobal?window:this);if(typeof u.draw=="function"){u.setup===void 0&&u.scale(u._pixelDensity,u._pixelDensity);for(var c=0;c<l;c++){u.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),u._renderer.isP3D&&u._renderer._update(),u._setProperty("frameCount",u.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{u.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},o=o.default,s.default=o},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("./main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var u=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||u?(u=this._renderer).applyMatrix.apply(u,l(arguments.length<=0?void 0:arguments[0])):(u=this._renderer).applyMatrix.apply(u,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(u,c){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(u),c),this},a.default.prototype.rotateX=function(u){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(u)),this},a.default.prototype.rotateY=function(u){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(u)),this},a.default.prototype.rotateZ=function(u){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(u)),this},a.default.prototype.scale=function(u,c,f){var d;return a.default._validateParameters("scale",arguments),u instanceof a.default.Vector?(u=(d=u).x,c=d.y,f=d.z):Array.isArray(u)&&(u=(d=u)[0],c=d[1],f=d[2]||1),isNaN(c)?c=f=u:isNaN(f)&&(f=1),this._renderer.scale(u,c,f),this},a.default.prototype.shearX=function(u){return a.default._validateParameters("shearX",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,0,Math.tan(u),1,0,0),this},a.default.prototype.shearY=function(u){return a.default._validateParameters("shearY",arguments),u=this._toRadians(u),this._renderer.applyMatrix(1,Math.tan(u),0,1,0,0),this},a.default.prototype.translate=function(u,c,f){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(u,c,f):this._renderer.translate(u,c),this},o=a.default,s.default=o},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(o,i,s){"use strict";function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.ends-with"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator");var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(f){return function(d){if(Array.isArray(d)){for(var p=0,h=new Array(d.length);p<d.length;p++)h[p]=d[p];return h}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(f){return(c=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(d){return a(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":a(d)})(f)}l.default.prototype.storeItem=function(f,d){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),d===void 0&&console.log("You cannot store undefined variables using storeItem().");var p=c(d);switch(p){case"number":case"boolean":d=d.toString();break;case"object":d instanceof l.default.Color?p="p5.Color":d instanceof l.default.Vector&&(p="p5.Vector",d=[d.x,d.y,d.z]),d=JSON.stringify(d)}localStorage.setItem(f,d),f="".concat(f,"p5TypeID"),localStorage.setItem(f,p)},l.default.prototype.getItem=function(f){var d=localStorage.getItem(f),p=localStorage.getItem("".concat(f,"p5TypeID"));if(p===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(d!==null)switch(p){case"number":d=parseFloat(d);break;case"boolean":d=d==="true";break;case"object":d=JSON.parse(d);break;case"p5.Color":d=JSON.parse(d),d=this.color.apply(this,u(d.levels));break;case"p5.Vector":d=JSON.parse(d),d=this.createVector.apply(this,u(d))}return d},l.default.prototype.clearStorage=function(){var f=this;Object.keys(localStorage).forEach(function(d){d.endsWith("p5TypeID")&&f.removeItem(d.replace("p5TypeID",""))})},l.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(o,i,s){"use strict";function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(y)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.object.keys"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(o=o("../core/main"))&&o.__esModule?o:{default:o};function c(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&f(y,b)}function f(y,b){return(f=Object.setPrototypeOf||function(x,v){return x.__proto__=v,x})(y,b)}function d(y){return function(){var b,x=p(y),x=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=p(this).constructor,Reflect.construct(x,arguments,b)):x.apply(this,arguments),this);if(!b||l(b)!=="object"&&typeof b!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function p(y){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(y)}function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function m(y,b){for(var x=0;x<b.length;x++){var v=b[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}function g(y,b,x){b&&m(y.prototype,b),x&&m(y,x)}u.default.prototype.createStringDict=function(y,b){return u.default._validateParameters("createStringDict",arguments),new u.default.StringDict(y,b)},u.default.prototype.createNumberDict=function(y,b){return u.default._validateParameters("createNumberDict",arguments),new u.default.NumberDict(y,b)},u.default.TypedDict=function(){function y(b,x){return h(this,y),b instanceof Object?this.data=b:(this.data={},this.data[b]=x),this}return g(y,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,x){this._validate(x)?this.data[b]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var x in b)this.set(x,b[x])}},{key:"create",value:function(b,x){b instanceof Object&&x===void 0?this._addObj(b):b!==void 0?this.set(b,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var x,v="";for(x in this.data)v+="".concat(x,",").concat(this.data[x],`
`);var w=new Blob([v],{type:"text/csv"});u.default.prototype.downloadFile(w,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,x){u.default.prototype.saveJSON(this.data,b,x)}},{key:"_validate",value:function(b){return!0}}]),y}(),u.default.StringDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){h(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="string"}}]),b}(),u.default.NumberDict=function(){c(b,u.default.TypedDict);var y=d(b);function b(){h(this,b);for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];return y.call.apply(y,[this].concat(v))}return g(b,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]+=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,v){this.add(x,-v)}},{key:"mult",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]*=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,v){this.data.hasOwnProperty(x)?this.data[x]/=v:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var v,w=this.data[Object.keys(this.data)[0]];for(v in this.data)this.data[v]*x<w*x&&(w=this.data[v]);return w}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var v=Object.keys(this.data)[0],w=1;w<Object.keys(this.data).length;w++)Object.keys(this.data)[w]*x<v*x&&(v=Object.keys(this.data)[w]);return v}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),o=u.default.TypedDict,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(o=o("../core/main"))&&o.__esModule?o:{default:o};function u(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function c(v,w,_){w&&u(v.prototype,w),_&&u(v,_)}function f(v,w){return(f=Object.setPrototypeOf||function(_,C){return _.__proto__=C,_})(v,w)}function d(v){return function(){var w,_,C=h(v);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(C,arguments,w)):C.apply(this,arguments),C=this,!(_=w)||g(_)!=="object"&&typeof _!="function"?p(C):_}}function p(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v){return(g=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}function y(v,w,_){return(w._userNode||document.body).appendChild(v),_=new(_?l.default.MediaElement:l.default.Element)(v,w),w._elements.push(_),_}function b(v,A,_,C){var S=document.createElement(A),E=(typeof(_=_||"")=="string"&&(_=[_]),!0),A=!1,N=void 0;try{for(var k,R=_[Symbol.iterator]();!(E=(k=R.next()).done);E=!0){var I=k.value,L=document.createElement("source");L.setAttribute("src",I),S.appendChild(L)}}catch(M){A=!0,N=M}finally{try{E||R.return==null||R.return()}finally{if(A)throw N}}typeof C=="function"&&S.addEventListener("canplaythrough",function M(){C(),S.removeEventListener("canplaythrough",M)});var j=y(S,v,!0);return j.loadedmetadata=!1,S.addEventListener("loadedmetadata",function(){j.width=S.videoWidth,j.height=S.videoHeight,j.elt.width===0&&(j.elt.width=S.videoWidth),j.elt.height===0&&(j.elt.height=S.videoHeight),j.presetPlaybackRate&&(j.elt.playbackRate=j.presetPlaybackRate,delete j.presetPlaybackRate),j.loadedmetadata=!0}),j}l.default.prototype.select=function(v,w){return l.default._validateParameters("select",arguments),w=this._getContainer(w).querySelector(v),w?this._wrapElement(w):null},l.default.prototype.selectAll=function(v,w){l.default._validateParameters("selectAll",arguments);var _=[],C=this._getContainer(w).querySelectorAll(v);if(C)for(var S=0;S<C.length;S++){var E=this._wrapElement(C[S]);_.push(E)}return _},l.default.prototype._getContainer=function(v){var w=document;return typeof v=="string"?w=document.querySelector(v)||document:v instanceof l.default.Element?w=v.elt:v instanceof HTMLElement&&(w=v),w},l.default.prototype._wrapElement=function(v){var w,_=Array.prototype.slice.call(v.children);return v.tagName==="INPUT"&&v.type==="checkbox"?((w=new l.default.Element(v,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},w):v.tagName==="VIDEO"||v.tagName==="AUDIO"?new l.default.MediaElement(v,this):v.tagName==="SELECT"?this.createSelect(new l.default.Element(v,this)):0<_.length&&_.every(function(C){return C.tagName==="INPUT"||C.tagName==="LABEL"})?this.createRadio(new l.default.Element(v,this)):new l.default.Element(v,this)},l.default.prototype.removeElements=function(v){l.default._validateParameters("removeElements",arguments),this._elements.filter(function(w){return!(w.elt instanceof HTMLCanvasElement)}).map(function(w){return w.remove()})},l.default.Element.prototype.changed=function(v){return l.default.Element._adjustListener("change",v,this),this},l.default.Element.prototype.input=function(v){return l.default.Element._adjustListener("input",v,this),this},l.default.prototype.createDiv=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("div");return w.innerHTML=v,y(w,this)},l.default.prototype.createP=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("p");return w.innerHTML=v,y(w,this)},l.default.prototype.createSpan=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("span");return w.innerHTML=v,y(w,this)},l.default.prototype.createImg=function(){l.default._validateParameters("createImg",arguments);var v,w=document.createElement("img"),_=arguments;return 1<_.length&&typeof _[1]=="string"&&(w.alt=_[1]),2<_.length&&typeof _[2]=="string"&&(w.crossOrigin=_[2]),w.src=_[0],v=y(w,this),w.addEventListener("load",function(){v.width=w.offsetWidth||w.width,v.height=w.offsetHeight||w.height;var C=_[_.length-1];typeof C=="function"&&C(v)}),v},l.default.prototype.createA=function(v,w,_){l.default._validateParameters("createA",arguments);var C=document.createElement("a");return C.href=v,C.innerHTML=w,_&&(C.target=_),y(C,this)},l.default.prototype.createSlider=function(v,w,_,C){l.default._validateParameters("createSlider",arguments);var S=document.createElement("input");return S.type="range",S.min=v,S.max=w,C===0?S.step=1e-18:C&&(S.step=C),typeof _=="number"&&(S.value=_),y(S,this)},l.default.prototype.createButton=function(v,w){l.default._validateParameters("createButton",arguments);var _=document.createElement("button");return _.innerHTML=v,w&&(_.value=w),y(_,this)},l.default.prototype.createCheckbox=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];l.default._validateParameters("createCheckbox",w);var C=document.createElement("div"),S=document.createElement("input"),E=(S.type="checkbox",document.createElement("label")),A=(E.appendChild(S),C.appendChild(E),y(C,this));return A.checked=function(){var N=A.elt.firstElementChild.getElementsByTagName("input")[0];if(N){if(arguments.length===0)return N.checked;N.checked=!(arguments.length<=0||!arguments[0])}return A},this.value=function(N){return A.value=N,this},w[0]&&(A.value(w[0]),(C=document.createElement("span")).innerHTML=w[0],E.appendChild(C)),w[1]&&(S.checked=!0),A},l.default.prototype.createSelect=function(){for(var v,w=arguments.length,_=new Array(w),C=0;C<w;C++)_[C]=arguments[C];l.default._validateParameters("createSelect",_);var S,E=_[0];return E instanceof l.default.Element&&E.elt instanceof HTMLSelectElement?this.elt=(v=E).elt:E instanceof HTMLSelectElement?(v=y(E,this),this.elt=E):(S=document.createElement("select"),E&&typeof E=="boolean"&&S.setAttribute("multiple","true"),v=y(S,this),this.elt=S),v.option=function(A,N){var k;if(A!==void 0){for(var R,I=0;I<this.elt.length;I+=1)if(this.elt[I].textContent===A){k=I;break}k!==void 0?N===!1?this.elt.remove(k):this.elt[k].value=N:((R=document.createElement("option")).textContent=A,R.value=N===void 0?A:N,this.elt.appendChild(R),this._pInst._elements.push(R))}},v.selected=function(A){if(A!==void 0){for(var N=0;N<this.elt.length;N+=1)this.elt[N].value.toString()===A.toString()&&(this.elt.selectedIndex=N);return this}if(this.elt.getAttribute("multiple")){var k=[],R=!0,I=!1,L=void 0;try{for(var j,M=this.elt.selectedOptions[Symbol.iterator]();!(R=(j=M.next()).done);R=!0){var V=j.value;k.push(V.value)}}catch(G){I=!0,L=G}finally{try{R||M.return==null||M.return()}finally{if(I)throw L}}return k}return this.elt.value},v.disable=function(A){if(typeof A=="string")for(var N=0;N<this.elt.length;N++)this.elt[N].value.toString()===A&&(this.elt[N].disabled=!0,this.elt[N].selected=!1);else this.elt.disabled=!0;return this},v.enable=function(A){if(typeof A=="string")for(var N=0;N<this.elt.length;N++)this.elt[N].value.toString()===A&&(this.elt[N].disabled=!1,this.elt[N].selected=!1);else{this.elt.disabled=!1;for(var k=0;k<this.elt.length;k++)this.elt[k].disabled=!1,this.elt[k].selected=!1}return this},v},l.default.prototype.createRadio=function(){function v(A){return A instanceof HTMLInputElement&&A.type==="radio"}function w(A){return A instanceof HTMLLabelElement}var _,C,S,E=arguments.length<=0?void 0:arguments[0];return E instanceof l.default.Element&&(E.elt instanceof HTMLDivElement||E.elt instanceof HTMLSpanElement)?(_=E,this.elt=E.elt):E instanceof HTMLDivElement||E instanceof HTMLSpanElement?(_=y(E,this),C=this.elt=E,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(S=arguments.length<=1?void 0:arguments[1])):(typeof E=="string"&&(S=E),C=document.createElement("div"),_=y(C,this),this.elt=C),_._name=S||"radioOption",_._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(A){return v(A)||w(A)&&v(A.firstElementChild)}).map(function(A){return v(A)?A:A.firstElementChild})},_.option=function(A,N){var k,R,I,L=!0,j=!1,M=void 0;try{for(var V,G=_._getOptionsArray()[Symbol.iterator]();!(L=(V=G.next()).done);L=!0){var U=V.value;if(U.value===A){k=U;break}}}catch(Y){j=!0,M=Y}finally{try{L||G.return==null||G.return()}finally{if(j)throw M}}return k===void 0&&((k=document.createElement("input")).setAttribute("type","radio"),k.setAttribute("value",A)),k.setAttribute("name",_._name),w(k.parentElement)?R=k.parentElement:(R=document.createElement("label")).insertAdjacentElement("afterbegin",k),R.lastElementChild instanceof HTMLSpanElement?I=R.lastElementChild:(I=document.createElement("span"),k.insertAdjacentElement("afterend",I)),I.innerHTML=N===void 0?A:N,this.elt.appendChild(R),k},_.remove=function(A){var N=!0,k=!1,R=void 0;try{for(var I,L=_._getOptionsArray()[Symbol.iterator]();!(N=(I=L.next()).done);N=!0){var j=I.value;if(j.value===A)return void(w(j.parentElement)?j.parentElement:j).remove()}}catch(M){k=!0,R=M}finally{try{N||L.return==null||L.return()}finally{if(k)throw R}}},_.value=function(){var A="",N=!0,k=!1,R=void 0;try{for(var I,L=_._getOptionsArray()[Symbol.iterator]();!(N=(I=L.next()).done);N=!0){var j=I.value;if(j.checked){A=j.value;break}}}catch(M){k=!0,R=M}finally{try{N||L.return==null||L.return()}finally{if(k)throw R}}return A},_.selected=function(A){var N=null;if(A===void 0){var k=!0,R=!1,I=void 0;try{for(var L,j=_._getOptionsArray()[Symbol.iterator]();!(k=(L=j.next()).done);k=!0){var M=L.value;if(M.checked){N=M;break}}}catch(X){R=!0,I=X}finally{try{k||j.return==null||j.return()}finally{if(R)throw I}}}else{_._getOptionsArray().forEach(function($){$.checked=!1,$.removeAttribute("checked")});var V=!0,R=!1,I=void 0;try{for(var G,U=_._getOptionsArray()[Symbol.iterator]();!(V=(G=U.next()).done);V=!0){var Y=G.value;Y.value===A&&(Y.setAttribute("checked",!0),Y.checked=!0,N=Y)}}catch($){R=!0,I=$}finally{try{V||U.return==null||U.return()}finally{if(R)throw I}}}return N},_.disable=function(){var A=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],N=!0,k=!1,R=void 0;try{for(var I,L=_._getOptionsArray()[Symbol.iterator]();!(N=(I=L.next()).done);N=!0)I.value.setAttribute("disabled",A)}catch(j){k=!0,R=j}finally{try{N||L.return==null||L.return()}finally{if(k)throw R}}},_},l.default.prototype.createColorPicker=function(v){l.default._validateParameters("createColorPicker",arguments);var w=document.createElement("input");return w.type="color",v?v instanceof l.default.Color?w.value=v.toString("#rrggbb"):(l.default.prototype._colorMode="rgb",l.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},w.value=l.default.prototype.color(v).toString("#rrggbb")):w.value="#000000",(w=y(w,this)).color=function(){return v&&(v.mode&&(l.default.prototype._colorMode=v.mode),v.maxes&&(l.default.prototype._colorMaxes=v.maxes)),l.default.prototype.color(this.elt.value)},w},l.default.prototype.createInput=function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",_=(l.default._validateParameters("createInput",arguments),document.createElement("input"));return _.setAttribute("value",v),_.setAttribute("type",w),y(_,this)},l.default.prototype.createFileInput=function(v){var w,_=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(l.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(w=document.createElement("input")).setAttribute("type","file"),_&&w.setAttribute("multiple",!0),w.addEventListener("change",function(C){var S=!0,E=!1,A=void 0;try{for(var N,k=C.target.files[Symbol.iterator]();!(S=(N=k.next()).done);S=!0){var R=N.value;l.default.File._load(R,v)}}catch(I){E=!0,A=I}finally{try{S||k.return==null||k.return()}finally{if(E)throw A}}},!1),y(w,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},l.default.prototype.createVideo=function(v,w){return l.default._validateParameters("createVideo",arguments),b(this,"video",v,w)},l.default.prototype.createAudio=function(v,w){return l.default._validateParameters("createAudio",arguments),b(this,"audio",v,w)},l.default.prototype.VIDEO="video",l.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(v){var w=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return w?new Promise(function(_,C){w.call(navigator,v,_,C)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),l.default.prototype.createCapture=function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];if(l.default._validateParameters("createCapture",w),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var C,S=!0,E=!0,A=!1,N=0,k=w;N<k.length;N++){var R=k[N];R===l.default.prototype.VIDEO?E=!1:R===l.default.prototype.AUDIO?S=!1:g(R)==="object"?(R.flipped!==void 0&&(A=R.flipped,delete R.flipped),I=Object.assign({},I,R)):typeof R=="function"&&(C=R)}var I=Object.assign({},{video:S,audio:E},I),L=document.createElement("video"),j=(L.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(I).then(function(M){try{"srcObject"in L?L.srcObject=M:L.src=window.URL.createObjectURL(M)}catch{L.src=M}}).catch(function(M){M.name==="NotFoundError"&&l.default._friendlyError("No webcam found on this device","createCapture"),M.name==="NotAllowedError"&&l.default._friendlyError("Access to the camera was denied","createCapture"),console.error(M)}),y(L,this,!0));return j.loadedmetadata=!1,L.addEventListener("loadedmetadata",function(){L.play(),L.width?(j.width=L.width,j.height=L.height,A&&(j.elt.style.transform="scaleX(-1)")):(j.width=j.elt.width=L.videoWidth,j.height=j.elt.height=L.videoHeight),j.loadedmetadata=!0,C&&C(L.srcObject)}),j.flipped=A,j},l.default.prototype.createElement=function(v,w){return l.default._validateParameters("createElement",arguments),v=document.createElement(v),w!==void 0&&(v.innerHTML=w),y(v,this)},l.default.Element.prototype.addClass=function(v){return this.elt.className?this.hasClass(v)||(this.elt.className=this.elt.className+" "+v):this.elt.className=v,this},l.default.Element.prototype.removeClass=function(v){return this.elt.classList.remove(v),this},l.default.Element.prototype.hasClass=function(v){return this.elt.classList.contains(v)},l.default.Element.prototype.toggleClass=function(v){return this.elt.classList.contains(v)?this.elt.classList.remove(v):this.elt.classList.add(v),this},l.default.Element.prototype.child=function(v){return v===void 0?this.elt.childNodes:(typeof v=="string"?(v[0]==="#"&&(v=v.substring(1)),v=document.getElementById(v)):v instanceof l.default.Element&&(v=v.elt),v instanceof HTMLElement&&this.elt.appendChild(v),this)},l.default.Element.prototype.center=function(v){var w=this.elt.style.display,_=this.elt.style.display==="none",C=this.parent().style.display==="none",S={x:this.elt.offsetLeft,y:this.elt.offsetTop},E=(_&&this.show(),C&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),A=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return v==="both"||v===void 0?this.position(E/2+this.parent().offsetLeft,A/2+this.parent().offsetTop):v==="horizontal"?this.position(E/2+this.parent().offsetLeft,S.y):v==="vertical"&&this.position(S.x,A/2+this.parent().offsetTop),this.style("display",w),_&&this.hide(),C&&this.parent().hide(),this},l.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},l.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},l.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=v,this},l.default.Element.prototype._rotate=function(){var v="";return this.elt.style.transform&&(v=(v=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=v,this},l.default.Element.prototype.style=function(v,w){if((w=w instanceof l.default.Color?"rgba("+w.levels[0]+","+w.levels[1]+","+w.levels[2]+","+w.levels[3]/255+")":w)===void 0){if(v.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(v);for(var _=v.split(";"),C=0;C<_.length;C++){var S=_[C].split(":");S[0]&&S[1]&&(this.elt.style[S[0].trim()]=S[1].trim())}}else this.elt.style[v]=w,v!=="width"&&v!=="height"&&v!=="left"&&v!=="top"||(w=window.getComputedStyle(this.elt).getPropertyValue(v).replace(/[^\d.]/g,""),this[v]=Math.round(parseFloat(w,10)));return this},l.default.Element.prototype.attribute=function(v,w){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return w===void 0?this.elt.getAttribute(v):(this.elt.setAttribute(v,w),this);if(w===void 0)return this.elt.firstChild.getAttribute(v);for(var _=0;_<this.elt.childNodes.length;_++)this.elt.childNodes[_].setAttribute(v,w)},l.default.Element.prototype.removeAttribute=function(v){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var w=0;w<this.elt.childNodes.length;w++)this.elt.childNodes[w].removeAttribute(v);return this.elt.removeAttribute(v),this},l.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},l.default.Element.prototype.show=function(){return this.elt.style.display="block",this},l.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},l.default.Element.prototype.size=function(v,w){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var _=v,C=w,S=l.default.prototype.AUTO;if(_!==S||C!==S){if(_===S?_=w*this.width/this.height:C===S&&(C=v*this.height/this.width),this.elt instanceof HTMLCanvasElement){var E,A={},N=this.elt.getContext("2d");for(E in N)A[E]=N[E];for(E in this.elt.setAttribute("width",_*this._pInst._pixelDensity),this.elt.setAttribute("height",C*this._pInst._pixelDensity),this.elt.style.width=_+"px",this.elt.style.height=C+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),A)this.elt.getContext("2d")[E]=A[E]}else this.elt.style.width=_+"px",this.elt.style.height=C+"px",this.elt.width=_,this.elt.height=C;this.width=_,this.height=C,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",_),this._pInst._setProperty("height",C))}return this},l.default.Element.prototype.remove=function(){this instanceof l.default.MediaElement&&(this.stop(),(w=this.elt.srcObject)!==null&&w.getTracks().forEach(function(_){_.stop()}));var v,w=this._pInst._elements.indexOf(this);for(v in w!==-1&&this._pInst._elements.splice(w,1),this._events)this.elt.removeEventListener(v,this._events[v]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},l.default.Element.prototype.drop=function(v,w){var _;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",_=function(C){C.preventDefault()}),this.elt.addEventListener("dragleave",_)),l.default.Element._attachListener("drop",function(S){S.preventDefault(),typeof w=="function"&&w.call(this,S);var S=S.dataTransfer.files,E=!0,A=!1,N=void 0;try{for(var k,R=S[Symbol.iterator]();!(E=(k=R.next()).done);E=!0){var I=k.value;l.default.File._load(I,v)}}catch(L){A=!0,N=L}finally{try{E||R.return==null||R.return()}finally{if(A)throw N}}},this)):console.log("The File APIs are not fully supported in this browser."),this},l.default.Element.prototype.draggable=function(v){var w,_="ontouchstart"in window,C=0,S=0,E=0,A=0,N=_?"touchend":"mouseup",k=_?"touchmove":"mousemove";function R(L){var j;L=L||window.event,A=_?(j=L.changedTouches,C=E-parseInt(j[0].clientX),S=A-parseInt(j[0].clientY),E=parseInt(j[0].clientX),parseInt(j[0].clientY)):(C=E-parseInt(L.clientX),S=A-parseInt(L.clientY),E=parseInt(L.clientX),parseInt(L.clientY)),v.style.left=v.offsetLeft-C+"px",v.style.top=v.offsetTop-S+"px"}function I(){document.removeEventListener(N,I,!1),document.removeEventListener(k,R,!1)}return v===void 0?w=v=this.elt:v!==this.elt&&v.elt!==this.elt&&(v=v.elt,w=this.elt),w.addEventListener(_?"touchstart":"mousedown",function(L){{var j;L=L||window.event,A=_?(j=L.changedTouches,E=parseInt(j[0].clientX),parseInt(j[0].clientY)):(E=parseInt(L.clientX),parseInt(L.clientY))}return document.addEventListener(N,I,!1),document.addEventListener(k,R,!1),!1},!1),w.style.cursor="move",this};function x(v,w,_,C){m(this,x),this.callback=v,this.time=w,this.id=_,this.val=C}o=function(v){var w=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&f(w,v);var _=d(C);function C(S,E){m(this,C);var A=p(E=_.call(this,S,E));return E.elt.crossOrigin="anonymous",E._prevTime=0,E._cueIDCounter=0,E._cues=[],E.pixels=[],E._pixelsState=p(E),E._pixelDensity=1,E._modified=!1,E._frameOnCanvas=-1,Object.defineProperty(A,"src",{get:function(){var N=A.elt.children[0].src,k=A.elt.src===window.location.href?"":A.elt.src;return N===window.location.href?k:N},set:function(N){for(var k=0;k<A.elt.children.length;k++)A.elt.removeChild(A.elt.children[k]);var R=document.createElement("source");R.src=N,S.appendChild(R),A.elt.src=N,A.modified=!0}}),A._onended=function(){},A.elt.onended=function(){A._onended(A)},E}return c(C,[{key:"play",value:function(){var S;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(S=this.elt.play())&&S.catch&&S.catch(function(E){E.name==="NotAllowedError"?console.error(E):console.error("Media play method encountered an unexpected error",E)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var S=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(S)},{passive:!0,once:!0})}},{key:"autoplay",value:function(S){var E=this,A=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",S),S&&!A&&(S=function(){return E._setupAutoplayFailDetection()},this.elt.readyState===4?S():this.elt.addEventListener("canplay",S,{passive:!0,once:!0})),this}},{key:"volume",value:function(S){if(S===void 0)return this.elt.volume;this.elt.volume=S}},{key:"speed",value:function(S){if(S===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=S:this.presetPlaybackRate=S}},{key:"time",value:function(S){return S===void 0?this.elt.currentTime:(this.elt.currentTime=S,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var S=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&S&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return l.default.Renderer2D.prototype.loadPixels.apply(this,E)}},{key:"updatePixels",value:function(S,E,A,N){return this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.updatePixels.call(this,S,E,A,N)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return l.default.Renderer2D.prototype.get.apply(this,E)}},{key:"_getPixel",value:function(){this.loadPixels();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];return l.default.Renderer2D.prototype._getPixel.apply(this,E)}},{key:"set",value:function(S,E,A){this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.set.call(this,S,E,A),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];l.default.prototype.copy.apply(this,E)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var S=arguments.length,E=new Array(S),A=0;A<S;A++)E[A]=arguments[A];l.default.Image.prototype.mask.apply(this,E)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(S){this._modified=S}},{key:"onended",value:function(S){return this._onended=S,this}},{key:"connect",value:function(S){var E,A;if(typeof l.default.prototype.getAudioContext=="function")E=l.default.prototype.getAudioContext(),A=l.default.soundOut.input;else try{A=(E=S.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=E.createMediaElementSource(this.elt),this.audioSourceNode.connect(A)),S?S.input?this.audioSourceNode.connect(S.input):this.audioSourceNode.connect(S):this.audioSourceNode.connect(A)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(S,k,A){var N=this._cueIDCounter++,k=new x(k,S,N,A);return this._cues.push(k),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),N}},{key:"removeCue",value:function(S){for(var E=0;E<this._cues.length;E++)this._cues[E].id===S&&(console.log(S),this._cues.splice(E,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var S=this.time(),E=0;E<this._cues.length;E++){var A=this._cues[E].time,N=this._cues[E].val;this._prevTime<A&&A<=S&&this._cues[E].callback(N)}this._prevTime=S}}]),C}(l.default.Element),l.default.MediaElement=o,o=function(){function v(w,_){m(this,v),this.file=w,this._pInst=_,_=w.type.split("/"),this.type=_[0],this.subtype=_[1],this.name=w.name,this.size=w.size,this.data=void 0}return c(v,null,[{key:"_createLoader",value:function(w,_){var C=new FileReader;return C.onload=function(S){var E,A=new l.default.File(w);A.file.type==="application/json"?A.data=JSON.parse(S.target.result):A.file.type==="text/xml"?(E=new DOMParser().parseFromString(S.target.result,"text/xml"),A.data=new l.default.XML(E.documentElement)):A.data=S.target.result,_(A)},C}},{key:"_load",value:function(w,_){var C;/^text\//.test(w.type)||w.type==="application/json"?l.default.File._createLoader(w,_).readAsText(w):/^(video|audio)\//.test(w.type)?((C=new l.default.File(w)).data=URL.createObjectURL(w),_(C)):l.default.File._createLoader(w,_).readAsDataURL(w)}}]),v}(),l.default.File=o,o=l.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(g,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(g=g("../core/main"))&&g.__esModule?g:{default:g};a.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",a.default.prototype.accelerationX=0,a.default.prototype.accelerationY=0,a.default.prototype.accelerationZ=0,a.default.prototype.pAccelerationX=0,a.default.prototype.pAccelerationY=0,a.default.prototype.pAccelerationZ=0,a.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},a.default.prototype.rotationX=0,a.default.prototype.rotationY=0,a.default.prototype.rotationZ=0,a.default.prototype.pRotationX=0,a.default.prototype.pRotationY=0;var l=a.default.prototype.pRotationZ=0,u=0,c=0,f="clockwise",d="clockwise",p="clockwise",h=(a.default.prototype.pRotateDirectionX=void 0,a.default.prototype.pRotateDirectionY=void 0,a.default.prototype.pRotateDirectionZ=void 0,a.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},a.default.prototype.turnAxis=void 0,.5),m=30,g=(a.default.prototype.setMoveThreshold=function(y){a.default._validateParameters("setMoveThreshold",arguments),h=y},a.default.prototype.setShakeThreshold=function(y){a.default._validateParameters("setShakeThreshold",arguments),m=y},a.default.prototype._ondeviceorientation=function(y){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(y.beta)),this._setProperty("rotationY",this._fromDegrees(y.gamma)),this._setProperty("rotationZ",this._fromDegrees(y.alpha)),this._handleMotion()},a.default.prototype._ondevicemotion=function(y){this._updatePAccelerations(),this._setProperty("accelerationX",2*y.acceleration.x),this._setProperty("accelerationY",2*y.acceleration.y),this._setProperty("accelerationZ",2*y.acceleration.z),this._handleMotion()},a.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var y,b,x,v,w,_=this._isGlobal?window:this;typeof _.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&_.deviceMoved(),typeof _.deviceTurned=="function"&&(b=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,y=l+180,0<b-x&&b-x<270||b-x<-270?f="clockwise":(b-x<0||270<b-x)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(y=b),90<Math.abs(b-y)&&Math.abs(b-y)<270&&(y=b,this._setProperty("turnAxis","X"),_.deviceTurned()),this.pRotateDirectionX=f,l=y-180,x=this._toDegrees(this.rotationY)+180,b=this._toDegrees(this.pRotationY)+180,y=u+180,0<x-b&&x-b<270||x-b<-270?d="clockwise":(x-b<0||270<x-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(y=x),90<Math.abs(x-y)&&Math.abs(x-y)<270&&(y=x,this._setProperty("turnAxis","Y"),_.deviceTurned()),this.pRotateDirectionY=d,u=y-180,0<(b=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&b-x<270||b-x<-270?p="clockwise":(b-x<0||270<b-x)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(c=b),90<Math.abs(b-c)&&Math.abs(b-c)<270&&(c=b,this._setProperty("turnAxis","Z"),_.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),typeof _.deviceShaken=="function"&&(this.pAccelerationX!==null&&(v=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),m<v+w&&_.deviceShaken())},a.default);s.default=g},{"../core/main":280}],298:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(l){var u;this._downKeys[l.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",l.which),this._downKeys[l.which]=!0,this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyPressed!="function"||l.charCode||u.keyPressed(l)===!1&&l.preventDefault())},a.default.prototype._onkeyup=function(l){this._downKeys[l.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),this._setProperty("keyCode",l.which);var u=this._isGlobal?window:this;typeof u.keyReleased=="function"&&u.keyReleased(l)===!1&&l.preventDefault()},a.default.prototype._onkeypress=function(l){var u;l.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",l.which),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(u=this._isGlobal?window:this).keyTyped=="function"&&u.keyTyped(l)===!1&&l.preventDefault())},a.default.prototype._onblur=function(l){this._downKeys={}},a.default.prototype.keyIsDown=function(l){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[l]||!1},a.default.prototype._areDownKeys=function(){for(var l in this._downKeys)if(this._downKeys.hasOwnProperty(l)&&this._downKeys[l]===!0)return!0;return!1},o=a.default,s.default=o},{"../core/main":280}],299:[function(o,i,s){"use strict";function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}function l(d){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(d)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(u=o("../core/main"))&&u.__esModule?u:{default:u},c=function(d){if(d&&d.__esModule)return d;if(d===null||l(d)!=="object"&&typeof d!="function")return{default:d};var p=f();if(p&&p.has(d))return p.get(d);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var y;Object.prototype.hasOwnProperty.call(d,h)&&((y=g?Object.getOwnPropertyDescriptor(d,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=d[h])}return m.default=d,p&&p.set(d,m),m}(o("../core/constants"));function f(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,f=function(){return d},d)}u.default.prototype.movedX=0,u.default.prototype.movedY=0,u.default.prototype._hasMouseInteracted=!1,u.default.prototype.mouseX=0,u.default.prototype.mouseY=0,u.default.prototype.pmouseX=0,u.default.prototype.pmouseY=0,u.default.prototype.winMouseX=0,u.default.prototype.winMouseY=0,u.default.prototype.pwinMouseX=0,u.default.prototype.pwinMouseY=0,u.default.prototype.mouseButton=0,u.default.prototype.mouseIsPressed=!1,u.default.prototype._updateNextMouseCoords=function(d){var p,h,m,g,y;this._curElement!==null&&(!d.touches||0<d.touches.length)&&(p=this._curElement.elt,h=this.width,m=this.height,(g=d)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),y=p.getBoundingClientRect(),h=p.scrollWidth/h||1,p=p.scrollHeight/m||1,m={x:(g.clientX-y.left)/h,y:(g.clientY-y.top)/p,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",d.movementX),this._setProperty("movedY",d.movementY),this._setProperty("mouseX",m.x),this._setProperty("mouseY",m.y),this._setProperty("winMouseX",m.winX),this._setProperty("winMouseY",m.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},u.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},u.default.prototype._setMouseButton=function(d){d.button===1?this._setProperty("mouseButton",c.CENTER):d.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},u.default.prototype._onmousemove=function(d){var p=this._isGlobal?window:this;this._updateNextMouseCoords(d),this.mouseIsPressed?typeof p.mouseDragged=="function"?p.mouseDragged(d)===!1&&d.preventDefault():typeof p.touchMoved=="function"&&p.touchMoved(d)===!1&&d.preventDefault():typeof p.mouseMoved=="function"&&p.mouseMoved(d)===!1&&d.preventDefault()},u.default.prototype._onmousedown=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(d),this._updateNextMouseCoords(d),this.touchstart||(typeof p.mousePressed=="function"?p.mousePressed(d)===!1&&d.preventDefault():typeof p.touchStarted=="function"&&p.touchStarted(d)===!1&&d.preventDefault(),this.touchstart=!1)},u.default.prototype._onmouseup=function(d){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof p.mouseReleased=="function"?p.mouseReleased(d)===!1&&d.preventDefault():typeof p.touchEnded=="function"&&p.touchEnded(d)===!1&&d.preventDefault(),this.touchend=!1)},u.default.prototype._ondragend=u.default.prototype._onmouseup,u.default.prototype._ondragover=u.default.prototype._onmousemove,u.default.prototype._onclick=function(d){var p=this._isGlobal?window:this;typeof p.mouseClicked=="function"&&p.mouseClicked(d)===!1&&d.preventDefault()},u.default.prototype._ondblclick=function(d){var p=this._isGlobal?window:this;typeof p.doubleClicked=="function"&&p.doubleClicked(d)===!1&&d.preventDefault()},u.default.prototype._mouseWheelDeltaY=0,u.default.prototype._pmouseWheelDeltaY=0,u.default.prototype._onwheel=function(d){var p=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",d.deltaY),typeof p.mouseWheel=="function"&&(d.delta=d.deltaY,p.mouseWheel(d)===!1&&d.preventDefault())},u.default.prototype.requestPointerLock=function(){var d=this._curElement.elt;return d.requestPointerLock=d.requestPointerLock||d.mozRequestPointerLock,d.requestPointerLock?(d.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},u.default.prototype.exitPointerLock=function(){document.exitPointerLock()},o=u.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.touches=[],o.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var l=[],u=0;u<a.touches.length;u++)l[u]=function(y,g,b,p){var h=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,m=y.getBoundingClientRect(),g=y.scrollWidth/g||1,y=y.scrollHeight/b||1,b=p.touches[h]||p.changedTouches[h];return{x:(b.clientX-m.left)/g,y:(b.clientY-m.top)/y,winX:b.clientX,winY:b.clientY,id:b.identifier}}(this._curElement.elt,this.width,this.height,a,u);this._setProperty("touches",l)}},o.default.prototype._ontouchstart=function(a){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof l.touchStarted=="function"&&(l.touchStarted(a)===!1&&a.preventDefault(),this.touchstart=!0)},o.default.prototype._ontouchmove=function(a){var l=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof l.touchMoved=="function"?l.touchMoved(a)===!1&&a.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(a)===!1&&a.preventDefault()},o.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"&&(l.touchEnded(a)===!1&&a.preventDefault(),this.touchend=!0)},o=o.default,s.default=o},{"../core/main":280}],301:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.int32-array"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a,l,u,c,f={_toPixels:function(d){var p,h;return d instanceof ImageData?d.data:d.getContext("2d")?d.getContext("2d").getImageData(0,0,d.width,d.height).data:d.getContext("webgl")?(h=(p=d.getContext("webgl")).drawingBufferWidth*p.drawingBufferHeight*4,h=new Uint8Array(h),p.readPixels(0,0,d.width,d.height,p.RGBA,p.UNSIGNED_BYTE,h),h):void 0},_getARGB:function(d,p){return p*=4,d[3+p]<<24&4278190080|d[p]<<16&16711680|d[1+p]<<8&65280|255&d[2+p]},_setPixels:function(d,p){for(var h,m=0,g=d.length;m<g;m++)d[0+(h=4*m)]=(16711680&p[m])>>>16,d[1+h]=(65280&p[m])>>>8,d[2+h]=255&p[m],d[3+h]=(4278190080&p[m])>>>24},_toImageData:function(d){return d instanceof ImageData?d:d.getContext("2d").getImageData(0,0,d.width,d.height)},_createImageData:function(d,p){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(d,p)},apply:function(d,y,h){var m=d.getContext("2d"),g=m.getImageData(0,0,d.width,d.height),y=y(g,h);y instanceof ImageData?m.putImageData(y,0,0,0,0,d.width,d.height):m.putImageData(g,0,0,0,0,d.width,d.height)},threshold:function(d){for(var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,h=f._toPixels(d),m=Math.floor(255*p),g=0;g<h.length;g+=4){var y=void 0,y=m<=.2126*h[g]+.7152*h[g+1]+.0722*h[g+2]?255:0;h[g]=h[g+1]=h[g+2]=y}},gray:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4){var m=p[h],g=p[h+1],y=p[h+2];p[h]=p[h+1]=p[h+2]=.2126*m+.7152*g+.0722*y}},opaque:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4)p[h+3]=255;return p},invert:function(d){for(var p=f._toPixels(d),h=0;h<p.length;h+=4)p[h]=255-p[h],p[h+1]=255-p[h+1],p[h+2]=255-p[h+2]},posterize:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,h=f._toPixels(d);if(p<2||255<p)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var m=p-1,g=0;g<h.length;g+=4){var y=h[g],b=h[g+1],x=h[g+2];h[g]=255*(y*p>>8)/m,h[g+1]=255*(b*p>>8)/m,h[g+2]=255*(x*p>>8)/m}},dilate:function(d){for(var p,h,m,g,y,b,x,v,w,_=f._toPixels(d),C=0,S=_.length?_.length/4:0,E=new Int32Array(S);C<S;)for(h=(p=C)+d.width;C<h;)g=m=f._getARGB(_,C),(w=C-1)<p&&(w=C),h<=(v=C+1)&&(v=C),(y=C-d.width)<0&&(y=0),S<=(b=C+d.width)&&(b=C),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,g=x),g<(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,g=x),g<(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(m=y,g=v),g<(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(m=b,g=w),E[C++]=m;f._setPixels(_,E)},erode:function(d){for(var p,h,m,g,y,b,x,v,w,_=f._toPixels(d),C=0,S=_.length?_.length/4:0,E=new Int32Array(S);C<S;)for(h=(p=C)+d.width;C<h;)g=m=f._getARGB(_,C),(w=C-1)<p&&(w=C),h<=(v=C+1)&&(v=C),(y=C-d.width)<0&&(y=0),S<=(b=C+d.width)&&(b=C),y=f._getARGB(_,y),w=f._getARGB(_,w),b=f._getARGB(_,b),(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(m=w,g=x),(x=77*((w=f._getARGB(_,v))>>16&255)+151*(w>>8&255)+28*(255&w))<g&&(m=w,g=x),(v=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<g&&(m=y,g=v),(w=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<g&&(m=b,g=w),E[C++]=m;f._setPixels(_,E)},blur:function(d,p){for(var h,m,g,y,b,x,v,w,_,C,S=f._toPixels(d),E=d.width,A=d.height,N=E*A,k=new Int32Array(N),R=0;R<N;R++)k[R]=f._getARGB(S,R);var I,L,j,M,V,G,U,Y,X=new Int32Array(N),pe=new Int32Array(N),$=new Int32Array(N),O=new Int32Array(N),z=0,q=3.5*p|0;if(a!==(q=q<1?1:q<248?q:248)){l=1+(a=q)<<1,u=new Int32Array(l),c=new Array(l);for(var ee=0;ee<l;ee++)c[ee]=new Int32Array(256);for(var ae=1,Q=q-1;ae<q;ae++){u[q+ae]=u[Q]=G=Q*Q,U=c[q+ae],Y=c[Q--];for(var le=0;le<256;le++)U[le]=Y[le]=G*le}V=u[q]=q*q,U=c[q];for(var ie=0;ie<256;ie++)U[ie]=V*ie}for(L=0;L<A;L++){for(I=0;I<E;I++){if(y=g=m=b=h=0,(x=I-a)<0)C=-x,x=0;else{if(E<=x)break;C=0}for(j=C;j<l&&!(E<=x);j++){var Z=k[x+z];M=c[j],b+=M[(-16777216&Z)>>>24],m+=M[(16711680&Z)>>16],g+=M[(65280&Z)>>8],y+=M[255&Z],h+=u[j],x++}X[v=z+I]=b/h,pe[v]=m/h,$[v]=g/h,O[v]=y/h}z+=E}for(_=(w=-a)*E,L=z=0;L<A;L++){for(I=0;I<E;I++){if(y=g=m=b=h=0,w<0)C=v=-w,x=I;else{if(A<=w)break;C=0,v=w,x=I+_}for(j=C;j<l&&!(A<=v);j++)M=c[j],b+=M[X[x]],m+=M[pe[x]],g+=M[$[x]],y+=M[O[x]],h+=u[j],v++,x+=E;k[I+z]=b/h<<24|m/h<<16|g/h<<8|y/h}z+=E,_+=E,w++}f._setPixels(S,k)}};s.default=f},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("omggif"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f){return function(d){if(Array.isArray(d)){for(var p=0,h=new Array(d.length);p<d.length;p++)h[p]=d[p];return h}}(f)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(f,d){return a.default._validateParameters("createImage",arguments),new a.default.Image(f,d)},a.default.prototype.saveCanvas=function(){for(var f,d,p,h,m,g,y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];switch(a.default._validateParameters("saveCanvas",b),b[0]instanceof HTMLCanvasElement?(f=b[0],b.shift()):b[0]instanceof a.default.Element?(f=b[0].elt,b.shift()):b[0]instanceof a.default.Framebuffer?(h=b[0],(m=this.createGraphics(h.width,h.height)).pixelDensity(pixelDensity()),h.loadPixels(),m.loadPixels(),m.pixels.set(h.pixels),m.updatePixels(),f=m.elt,b.shift()):f=this._curElement&&this._curElement.elt,1<=b.length&&(d=b[0]),p=(p=2<=b.length?b[1]:p)||a.default.prototype._checkFileExtension(d,p)[1]||"png"){default:g="image/png";break;case"jpeg":case"jpg":g="image/jpeg"}f.toBlob(function(v){a.default.prototype.downloadFile(v,d,p),m&&m.remove()},g)},a.default.prototype.encodeAndDownloadGif=function(f,d){for(var p=f.gifProperties,h=p.loopLimit,m=(h===1?h=null:h===null&&(h=0),new Uint8Array(f.width*f.height*p.numFrames)),g=[],y={},b=0;b<p.numFrames;b++){for(var x=new Set,v=p.frames[b].image.data,w=v.length,_=new Uint32Array(f.width*f.height),C=0,S=0;C<w;C+=4,S++){var E=v[C+0]<<16|v[C+1]<<8|v[C+2]<<0;x.add(E),_[S]=E}var A=c(x).sort().toString();y[A]===void 0?y[A]={freq:1,frames:[b]}:(y[A].freq+=1,y[A].frames.push(b)),g.push(_)}for(var R=[],N=Object.keys(y).sort(function($,O){return y[O].freq-y[$].freq}),k=N[0].split(",").map(function($){return parseInt($)}),R=R.concat(y[k].frames),I=new Set(k),L=1;L<N.length;L++){var j=N[L].split(",").map(function($){return parseInt($)}).filter(function($){return!I.has($)});if(k.length+j.length<=256){for(var M=0;M<j.length;M++)k.push(j[M]),I.add(j[M]);R=R.concat(y[N[L]].frames)}}R=new Set(R);for(var V={},G=0;G<k.length;G++)V[k[G]]||(V[k[G]]=G);for(var U=1;U<k.length;)U<<=1;k.length=U;for(var h={loop:h,palette:new Uint32Array(k)},Y=new l.default.GifWriter(m,f.width,f.height,h),X={},pe=0;pe<p.numFrames;pe++)(function(O){var z=!R.has(O),q=z?[]:k,ee=new Uint8Array(f.width*f.height),ae={},Q=new Set,le=(g[O].forEach(function(ye,xe){z?(ae[ye]===void 0&&(ae[ye]=q.length,q.push(ye)),ee[xe]=ae[ye]):ee[xe]=V[ye],0<O&&g[O-1][xe]!==ye&&Q.add(ye)}),{}),ie=q.filter(function(ye){return!Q.has(ye)});if(0<ie.length){var ie=ie[0],Z=(z?ae:V)[ie];if(0<O){for(var ge=0;ge<g[O].length;ge++)g[O-1][ge]===g[O][ge]&&(ee[ge]=Z);le.transparent=Z,X.frameOpts.disposal=1}}if(le.delay=p.frames[O].delay/10,z){for(var ne=1;ne<q.length;)ne<<=1;q.length=ne,le.palette=new Uint32Array(q)}0<O&&Y.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),X={pixelPaletteIndex:ee,frameOpts:le}})(pe);X.frameOpts.disposal=1,Y.addFrame(0,0,f.width,f.height,X.pixelPaletteIndex,X.frameOpts),h=new Blob([m.slice(0,Y.end())],{type:"image/gif"}),a.default.prototype.downloadFile(h,d,"gif")},a.default.prototype.saveFrames=function(f,d,p,g,m){a.default._validateParameters("saveFrames",arguments),p=a.default.prototype.constrain(p=p||3,0,15),p*=1e3;var g=a.default.prototype.constrain(g||15,0,22),y=0,b=a.default.prototype._makeFrame,x=this._curElement.elt,v=[],w=setInterval(function(){v.push(b(f+y,d,x)),y++},1e3/g);setTimeout(function(){if(clearInterval(w),m)m(v);else for(var _=0,C=v;_<C.length;_++){var S=C[_];a.default.prototype.downloadFile(S.imageData,S.filename,S.ext)}v=[]},.01+p)},a.default.prototype._makeFrame=function(f,d,m){var h,m=this?this._curElement.elt:m;if(d)switch(d.toLowerCase()){case"png":h="image/png";break;case"jpeg":case"jpg":h="image/jpeg";break;default:h="image/png"}else d="png",h="image/png";var m=(m=m.toDataURL(h)).replace(h,"image/octet-stream"),g={};return g.imageData=m,g.filename=f,g.ext=d,g},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(o,i,s){"use strict";function a(x){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(x)}function l(x){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(v){return a(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":a(v)})(x)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.copy-within"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.uint8-clamped-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var u=m(o("../core/main")),c=m(o("../core/helpers")),f=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var v=h();if(v&&v.has(x))return v.get(x);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var S;Object.prototype.hasOwnProperty.call(x,w)&&((S=C?Object.getOwnPropertyDescriptor(x,w):null)&&(S.get||S.set)?Object.defineProperty(_,w,S):_[w]=x[w])}return _.default=x,v&&v.set(x,_),_}(o("../core/constants")),d=m(o("omggif")),p=o("gifenc");function h(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,h=function(){return x},x)}function m(x){return x&&x.__esModule?x:{default:x}}function g(x,v,w,_,C,S,E){try{var A=x[S](E),N=A.value}catch(k){return void w(k)}A.done?v(N):Promise.resolve(N).then(_,C)}function y(x,v,w,_,C,S,E,A,N,k,R){var I,L,j,M,V,G,U,Y,X;return x===f.COVER&&(I=v,j=w,U=S,Y=E,G=A,X=N,L=k,M=R,V=Math.max(U/L,Y/M),U/=V,Y/=V,V=G,G=X,I===f.CENTER?V+=(L-U)/2:I===f.RIGHT&&(V+=L-U),j===f.CENTER?G+=(M-Y)/2:j===f.BOTTOM&&(G+=M-Y),A=(X={x:V,y:G,w:U,h:Y}).x,N=X.y,k=X.w,R=X.h),x===f.CONTAIN&&(I=v,L=w,j=_,M=C,V=S,G=E,U=k,Y=R,X=Math.max(U/V,Y/G),U/=X,Y/=X,X=j,j=M,I===f.CENTER?X+=(V-U)/2:I===f.RIGHT&&(X+=V-U),L===f.CENTER?j+=(G-Y)/2:L===f.BOTTOM&&(j+=G-Y),_=(x={x:X,y:j,w:U,h:Y}).x,C=x.y,S=x.w,E=x.h),{sx:A,sy:N,sw:k,sh:R,dx:_,dy:C,dw:S,dh:E}}function b(x,v){return 0<x&&x<v?x:v}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadImage=function(x,v,w){u.default._validateParameters("loadImage",arguments);var _=new u.default.Image(1,1,this),C=this,S=new Request(x,{method:"GET",mode:"cors"});return fetch(x,S).then(function(E){var A,N=E.headers.get("content-type");N===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),N&&N.includes("image/gif")?E.arrayBuffer().then(function(k){if(k){for(var k=new Uint8Array(k),R=_,I=v,L=w,j=(function(z){C._decrementPreload()}).bind(C),M=new d.default.GifReader(k),V=(R.width=R.canvas.width=M.width,R.height=R.canvas.height=M.height,[]),G=M.numFrames(),U=new Uint8ClampedArray(R.width*R.height*4),Y=0;Y<G;Y++){var X=M.frameInfo(Y),pe=R.drawingContext.getImageData(0,0,R.width,R.height),$=(U=pe.data.slice(),function(z,q){try{q.decodeAndBlitFrameRGBA(z,U)}catch(ee){u.default._friendlyFileLoadError(8,R.src),typeof L=="function"?L(ee):console.error(ee)}}(Y,M),new ImageData(U,R.width,R.height)),$=(R.drawingContext.putImageData($,0,0),X.delay);$===0&&($=10),V.push({image:R.drawingContext.getImageData(0,0,R.width,R.height),delay:10*$}),X.disposal===2?R.drawingContext.clearRect(X.x,X.y,X.width,X.height):X.disposal===3&&R.drawingContext.putImageData(pe,0,0,X.x,X.y,X.width,X.height)}(k=M.loopCount())===null?k=1:k===0&&(k=null),R.drawingContext.putImageData(V[0].image,0,0),1<V.length&&(R.gifProperties={displayIndex:0,loopLimit:k,loopCount:0,frames:V,numFrames:G,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof I=="function"&&I(R),j()}},function(k){typeof w=="function"?(w(k),C._decrementPreload()):console.error(k)}):((A=new Image).onload=function(){_.width=_.canvas.width=A.width,_.height=_.canvas.height=A.height,_.drawingContext.drawImage(A,0,0),_.modified=!0,typeof v=="function"&&v(_),C._decrementPreload()},A.onerror=function(k){u.default._friendlyFileLoadError(0,A.src),typeof w=="function"?(w(k),C._decrementPreload()):console.error(k)},x.indexOf("data:image/")!==0&&(A.crossOrigin="Anonymous"),A.src=x),_.modified=!0}).catch(function(E){u.default._friendlyFileLoadError(0,x),typeof w=="function"?(w(E),C._decrementPreload()):console.error(E)}),_},u.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function w(_,C){var S,E,A,N,k,R,I,L,j,M,V,G,U,Y,X,pe,$,O,z,q,ee,ae,Q,le,ie,Z,ge=arguments;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(S=2<ge.length&&ge[2]!==void 0?ge[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof _!="string")throw TypeError("fileName parameter must be a string");ne.next=3;break;case 3:if(typeof C!="number")throw TypeError("Duration parameter must be a number");ne.next=5;break;case 5:if(E=S&&S.delay||0,A=S&&S.units||"seconds",N=S&&S.silent||!1,k=S&&S.notificationDuration||0,R=S&&S.notificationID||"progressBar",typeof E!="number")throw TypeError("Delay parameter must be a number");ne.next=12;break;case 12:if(A!=="seconds"&&A!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ne.next=14;break;case 14:if(typeof N!="boolean")throw TypeError("Silent parameter must be a boolean");ne.next=16;break;case 16:if(typeof k!="number")throw TypeError("Notification duration parameter must be a number");ne.next=18;break;case 18:if(typeof R!="string")throw TypeError("Notification ID parameter must be a string");ne.next=20;break;case 20:return this._recording=!0,M=this._targetFrameRate,I=(I=1/(M=M!==1/0&&M!==void 0&&M!==0?M:60)*1e3)<20?20:I,j=(L=A==="seconds"?C*M:C)+(M=A==="seconds"?E*M:E),M=M,this.frameCount=M,V=this._pixelDensity,this.pixelDensity(1),G=[],document.getElementById(R)!==null&&document.getElementById(R).remove(),N||((U=this.createP("")).id(R),U.style("font-size","16px"),U.style("font-family","Montserrat"),U.style("background-color","#ffffffa0"),U.style("padding","8px"),U.style("border-radius","10px"),U.position(0,0)),this._renderer instanceof u.default.RendererGL&&(X=this.drawingContext,Y=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4)),this.noLoop(),ne.next=39,Promise.resolve();case 39:if(M<j)return this.redraw(),le=void 0,le=this._renderer instanceof u.default.RendererGL?(Y=new Uint8Array(X.drawingBufferWidth*X.drawingBufferHeight*4),X.readPixels(0,0,X.drawingBufferWidth,X.drawingBufferHeight,X.RGBA,X.UNSIGNED_BYTE,Y),function(ye,xe,Ne){for(var Ae=parseInt(Ne/2),Re=4*xe,ze=new Uint8Array(4*xe),lt=0;lt<Ae;++lt){var We=lt*Re,Bt=(Ne-lt-1)*Re;ze.set(ye.subarray(We,We+Re)),ye.copyWithin(We,Bt,Bt+Re),ye.set(ze,Bt)}return ye}(Y,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,G.push(le),M++,N||U.html("Saved frame <b>"+G.length.toString()+"</b> out of "+L.toString()),ne.next=48,new Promise(function(ye){return setTimeout(ye,0)});ne.next=50;break;case 48:ne.next=39;break;case 50:N||U.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(V),pe=(0,p.GIFEncoder)(),$=function(ye){for(var xe=new Uint8Array(ye.length*ye[0].length),Ne=0;Ne<ye.length;Ne++)xe.set(ye[Ne],Ne*ye[0].length);var Ae=(0,p.quantize)(xe,256,{format:"rgba4444",oneBitAlpha:!0});return Ae.length===256?Ae[Ae.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Ae.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Ae}(G),O={},z=function(ye){for(var xe=ye.length/4,Ne=new Uint8Array(xe),Ae=0;Ae<xe;Ae++){var Re=ye[4*Ae]<<24|ye[4*Ae+1]<<16|ye[4*Ae+2]<<8|ye[4*Ae+3];O[Re]===void 0&&(O[Re]=(0,p.nearestColorIndex)($,ye.slice(4*Ae,4*(Ae+1)))),Ne[Ae]=O[Re]}return Ne},q=$.length-1,ee=[],ae=0;case 60:if(!(ae<G.length)){ne.next=71;break}if(Q=z(G[ae]),le=Q.slice(),ae===0)pe.writeFrame(Q,this.width,this.height,{palette:$,delay:I,dispose:1});else{for(ie=0;ie<Q.length;ie++)Q[ie]===ee[ie]&&(Q[ie]=q);pe.writeFrame(Q,this.width,this.height,{delay:I,transparent:!0,transparentIndex:q,dispose:1})}return ee=le,N||U.html("Rendered frame <b>"+ae.toString()+"</b> out of "+L.toString()),ne.next=68,new Promise(function(ye){return setTimeout(ye,0)});case 68:ae++,ne.next=60;break;case 71:pe.finish(),Z=pe.bytesView(),Z=new Blob([Z],{type:"image/gif"}),G=[],this._recording=!1,this.loop(),N||(U.html("Done. Downloading your gif!\u{1F338}"),0<k&&setTimeout(function(){return U.remove()},1e3*k)),u.default.prototype.downloadFile(Z,_,"gif");case 80:case"end":return ne.stop()}},w,this)});var x,v=function(){var w=this,_=arguments;return new Promise(function(C,S){var E=x.apply(w,_);function A(k){g(E,C,S,A,N,"next",k)}function N(k){g(E,C,S,A,N,"throw",k)}A(void 0)})};return function(w,_){return v.apply(this,arguments)}}(),u.default.prototype.image=function(x,v,w,_,M,V,G,U,X,k,R,I){u.default._validateParameters("image",arguments);var Y=x.width,L=x.height,j=(I=I||f.CENTER,R=R||f.CENTER,x.elt&&(Y=Y!==void 0?Y:x.elt.width,L=L!==void 0?L:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(Y=Y!==void 0?Y:x.elt.videoWidth,L=L!==void 0?L:x.elt.videoHeight),_||Y),M=M||L,V=V||0,G=G||0,U=b(U!==void 0?U:Y,Y),Y=b(X!==void 0?X:L,L),X=1;x.elt&&!x.canvas&&x.elt.style.width&&(X=x.elt.videoWidth&&!_?x.elt.videoWidth:x.elt.width,X/=parseInt(x.elt.style.width,10)),V*=X,G*=X,Y*=X,U*=X,L=y(k,R,I,(L=c.default.modeAdjust(v,w,j,M,this._renderer._imageMode)).x,L.y,L.w,L.h,V,G,U,Y),this._renderer.image(x,L.sx,L.sy,L.sw,L.sh,L.dx,L.dy,L.dw,L.dh)},u.default.prototype.tint=function(){for(var x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];u.default._validateParameters("tint",v);var _=this.color.apply(this,v);this._renderer._tint=_.levels},u.default.prototype.noTint=function(){this._renderer._tint=null},u.default.prototype._getTintedImageCanvas=u.default.Renderer2D.prototype._getTintedImageCanvas,u.default.prototype.imageMode=function(x){u.default._validateParameters("imageMode",arguments),x!==f.CORNER&&x!==f.CORNERS&&x!==f.CENTER||(this._renderer._imageMode=x)},o=u.default,s.default=o},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(f){return f&&f.__esModule?f:{default:f}}function c(f,d){for(var p=0;p<d.length;p++){var h=d[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}a.default.Image=function(){function f(m,g){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.width=m,this.height=g,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var d,p,h;return d=f,(p=[{key:"pixelDensity",value:function(m){return m!==void 0?(m<=0&&(a.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),m=1),this._pixelDensity=m,this.width/=m,this.height/=m,this):this._pixelDensity}},{key:"_animateGif",value:function(b){var g,y=this.gifProperties,b=b._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=b),y.playing&&(y.timeDisplayed=b-y.lastChangeTime,g=y.frames[y.displayIndex].delay,y.timeDisplayed>=g&&(g=Math.floor(y.timeDisplayed/g),y.timeDisplayed=0,y.lastChangeTime=b,y.displayIndex+=g,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(b=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[b].image,0,0),y.displayIndex=b,this.setModified(!0))))}},{key:"_setProperty",value:function(m,g){this[m]=g,this.setModified(!0)}},{key:"loadPixels",value:function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(m,g,y,b){a.default.Renderer2D.prototype.updatePixels.call(this,m,g,y,b),this.setModified(!0)}},{key:"get",value:function(m,g,y,b){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return a.default.Renderer2D.prototype._getPixel.apply(this,g)}},{key:"set",value:function(m,g,y){a.default.Renderer2D.prototype.set.call(this,m,g,y),this.setModified(!0)}},{key:"resize",value:function(m,g){m===0&&g===0?(m=this.canvas.width,g=this.canvas.height):m===0?m=this.canvas.width*g/this.canvas.height:g===0&&(g=this.canvas.height*m/this.canvas.width),m=Math.floor(m),g=Math.floor(g);var y=document.createElement("canvas");if(y.width=m,y.height=g,this.gifProperties)for(var b=this.gifProperties,x=0;x<b.numFrames;x++){for(var v=this.drawingContext.createImageData(m,g),w=(A=A=E=S=C=void 0,b.frames[x].image),_=v,C=0,S=0;S<_.height;S++)for(var E=0;E<_.width;E++){var A=Math.floor(E*w.width/_.width),A=4*(Math.floor(S*w.height/_.height)*w.width+A);_.data[C++]=w.data[A++],_.data[C++]=w.data[A++],_.data[C++]=w.data[A++],_.data[C++]=w.data[+A]}b.frames[x].image=v}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=m,this.canvas.height=this.height=g,this.drawingContext.drawImage(y,0,0,m,g,0,0,m,g),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];a.default.prototype.copy.apply(this,g)}},{key:"mask",value:function(m){var g=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,b=1,x=[m=m===void 0?this:m,0,0,(b=m instanceof a.default.Renderer?m._pInst._pixelDensity:b)*m.width,b*m.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var v=0;v<this.gifProperties.frames.length;v++)this.drawingContext.putImageData(this.gifProperties.frames[v].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[v].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=g,this.setModified(!0)}},{key:"filter",value:function(m,g){l.default.apply(this.canvas,l.default[m],g),this.setModified(!0)}},{key:"blend",value:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,g),this.setModified(!0)}},{key:"setModified",value:function(m){this._modified=m}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(m,g){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,m):a.default.prototype.saveCanvas(this.canvas,m,g)}},{key:"reset",value:function(){var m;this.gifProperties&&((m=this.gifProperties).playing=!0,m.timeSinceStart=0,m.timeDisplayed=0,m.lastChangeTime=0,m.loopCount=0,m.displayIndex=0,this.drawingContext.putImageData(m.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var m;if(this.gifProperties)return(m=this.gifProperties).displayIndex%m.numFrames}},{key:"setFrame",value:function(m){var g;this.gifProperties&&(m<(g=this.gifProperties).numFrames&&0<=m?(g.timeDisplayed=0,g.lastChangeTime=0,g.displayIndex=m,this.drawingContext.putImageData(g.frames[m].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(m,g){if(this.gifProperties){var y=this.gifProperties;if(g<y.numFrames&&0<=g)y.frames[g].delay=m;else{var b=!0,g=!1,x=void 0;try{for(var v,w=y.frames[Symbol.iterator]();!(b=(v=w.next()).done);b=!0)v.value.delay=m}catch(C){g=!0,x=C}finally{try{b||w.return==null||w.return()}finally{if(g)throw x}}}}}}])&&c(d.prototype,p),h&&c(d,h),f}(),o=a.default.Image,s.default=o},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=u(o("../core/main")),l=u(o("./filters"));function u(c){return c&&c.__esModule?c:{default:c}}o("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var c,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];a.default._validateParameters("blend",d),this._renderer?(c=this._renderer).blend.apply(c,d):a.default.Renderer2D.prototype.blend.apply(this,d)},a.default.prototype.copy=function(){for(var c,f,d,p,h,m,g,y,b,x=arguments.length,v=new Array(x),w=0;w<x;w++)v[w]=arguments[w];if(a.default._validateParameters("copy",v),v.length===9)c=v[0],f=v[1],d=v[2],p=v[3],h=v[4],m=v[5],g=v[6],y=v[7],b=v[8];else{if(v.length!==8)throw new Error("Signature not supported");c=this,f=v[0],d=v[1],p=v[2],h=v[3],m=v[4],g=v[5],y=v[6],b=v[7]}a.default.prototype._copyHelper(this,c,f,d,p,h,m,g,y,b)},a.default.prototype._copyHelper=function(c,f,d,p,h,m,g,y,b,x){var v=f.canvas.width/f.width,w=0,_=0;f._renderer&&f._renderer.isP3D&&(w=f.width/2,_=f.height/2),c._renderer&&c._renderer.isP3D?(c.push(),c.resetMatrix(),c.noLights(),c.blendMode(c.BLEND),c.imageMode(c.CORNER),a.default.RendererGL.prototype.image.call(c._renderer,f,d+w,p+_,h,m,g,y,b,x),c.pop()):c.drawingContext.drawImage(f.canvas,v*(d+w),v*(p+_),v*h,v*m,g,y,b,x)},a.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},a.default.prototype.filter=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("filter",f);var g=(function(){var y,b={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof a.default.Shader?b.shader=arguments.length<=0?void 0:arguments[0]:(b.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(b.value=arguments.length<=1?void 0:arguments[1]),((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])===!1&&(b.useWebGL=!1)),b}).apply(void 0,f),p=g.shader,h=g.operation,m=g.value,g=g.useWebGL;this._renderer.isP3D&&p?a.default.RendererGL.prototype.filter.call(this._renderer,p):g||this._renderer.isP3D?(!g&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?a.default.RendererGL.prototype.filter.call(this._renderer,h,m):((p=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),p.filter.apply(p,f),this.copy(p._renderer,0,0,this.width,this.height,0,0,this.width,this.height),p.clear())):this.canvas!==void 0?l.default.apply(this.canvas,l.default[h],m):l.default.apply(this.elt,l.default[h],m)},a.default.prototype.get=function(c,f,d,p){var h;return a.default._validateParameters("get",arguments),(h=this._renderer).get.apply(h,arguments)},a.default.prototype.loadPixels=function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];a.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},a.default.prototype.set=function(c,f,d){this._renderer.set(c,f,d)},a.default.prototype.updatePixels=function(c,f,d,p){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,f,d,p)},o=a.default,s.default=o},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=f(o("../core/main")),u=(o("whatwg-fetch"),o("es6-promise/auto"),f(o("fetch-jsonp"))),c=f(o("file-saver"));function f(m){return m&&m.__esModule?m:{default:m}}function d(m){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}function p(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(m,g){g&&g!==!0&&g!=="true"||(g="");var y="";return(m=m||"untitled")&&m.includes(".")&&(y=m.split(".").pop()),g&&y!==g&&(y=g,m="".concat(m,".").concat(y)),[m,y]}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),l.default.prototype.loadJSON=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];l.default._validateParameters("loadJSON",g);for(var b,x,v,w=g[0],_={},C="json",S=1;S<g.length;S++){var E=g[S];typeof E=="string"?E!=="jsonp"&&E!=="json"||(C=E):typeof E=="function"?b?x=E:b=E:d(E)==="object"&&(E.hasOwnProperty("jsonpCallback")||E.hasOwnProperty("jsonpCallbackFunction"))&&(C="jsonp",v=E)}var A=this;return this.httpDo(w,"GET",v,C,function(N){for(var k in N)_[k]=N[k];b!==void 0&&b(N),A._decrementPreload()},function(N){if(l.default._friendlyFileLoadError(5,w),!x)throw N;x(N)}),_},l.default.prototype.loadStrings=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];l.default._validateParameters("loadStrings",g);for(var b,x,v=[],w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var C=this;return l.default.prototype.httpDo.call(this,g[0],"GET","text",function(S){for(var E=S.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),A=0,N=E.length;A<N;A+=32768)Array.prototype.push.apply(v,E.slice(A,Math.min(A+32768,N)));b!==void 0&&b(v),C._decrementPreload()},function(S){if(l.default._friendlyFileLoadError(3,S),!x)throw S;x(S)}),v},l.default.prototype.loadTable=function(m){var g,y,b,x=[],v=!1,w=m.substring(m.lastIndexOf(".")+1,m.length);w==="csv"?b=",":w==="ssv"?b=";":w==="tsv"&&(b="	");for(var _=1;_<arguments.length;_++)typeof arguments[_]=="function"?g===void 0?g=arguments[_]:y===void 0&&(y=arguments[_]):typeof arguments[_]=="string"&&(x.push(arguments[_]),arguments[_]==="header"&&(v=!0),arguments[_]==="csv"?b=",":arguments[_]==="ssv"?b=";":arguments[_]==="tsv"&&(b="	"));var C=new l.default.Table,S=this;return this.httpDo(m,"GET","table",function(E){for(var A,N,k={},R=0,I=[],L=0,j=null,M=function(){k.currentState=R,k.token=""},V=function(){j.push(k.token),M()},G=function(){k.currentState=4,I.push(j),j=null};;){if((A=E[L++])==null){if(k.escaped)throw new Error("Unclosed quote in file.");if(j){V(),G();break}}if(j===null&&(k.escaped=!1,j=[],M()),k.currentState===R){if(A==='"'){k.escaped=!0,k.currentState=1;continue}k.currentState=1}if(k.currentState===1&&k.escaped)if(A==='"')E[L]==='"'?(k.token+='"',L++):(k.escaped=!1,k.currentState=2);else{if(A==="\r")continue;k.token+=A}else A==="\r"?(E[L]===`
`&&L++,V(),G()):A===`
`?(V(),G()):A===b?V():k.currentState===1&&(k.token+=A)}if(v)C.columns=I.shift();else for(var U=0;U<I[0].length;U++)C.columns[U]="null";for(var Y=0;Y<I.length;Y++)(I[Y].length!==1||I[Y][0]!=="undefined"&&I[Y][0]!=="")&&((N=new l.default.TableRow).arr=I[Y],N.obj=function(X,pe){if((pe=pe||[])===void 0)for(var $=0;$<X.length;$++)pe[$.toString()]=$;return Object.fromEntries(pe.map(function(O,z){return[O,X[z]]}))}(I[Y],C.columns),C.addRow(N));typeof g=="function"&&g(C),S._decrementPreload()},function(E){l.default._friendlyFileLoadError(2,m),y?y(E):console.error(E)}),C},l.default.prototype.loadXML=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];for(var b,x,v=new l.default.XML,w=1;w<g.length;w++){var _=g[w];typeof _=="function"&&(b===void 0?b=_:x===void 0&&(x=_))}var C=this;return this.httpDo(g[0],"GET","xml",function(S){for(var E in S)v[E]=S[E];b!==void 0&&b(v),C._decrementPreload()},function(S){if(l.default._friendlyFileLoadError(1,S),!x)throw S;x(S)}),v},l.default.prototype.loadBytes=function(m,g,y){var b={},x=this;return this.httpDo(m,"GET","arrayBuffer",function(v){b.bytes=new Uint8Array(v),typeof g=="function"&&g(b),x._decrementPreload()},function(v){if(l.default._friendlyFileLoadError(6,m),!y)throw v;y(v)}),b},l.default.prototype.httpGet=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return l.default._validateParameters("httpGet",g),g.splice(1,0,"GET"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpPost=function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return l.default._validateParameters("httpPost",g),g.splice(1,0,"POST"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpDo=function(){for(var m,g,y,b={},x=0,v="text/plain",w=arguments.length-1;0<w&&typeof(w<0||arguments.length<=w?void 0:arguments[w])=="function";w--)x++;var _=arguments.length-x,C=arguments.length<=0?void 0:arguments[0];if(_==2&&typeof C=="string"&&d(arguments.length<=1?void 0:arguments[1])==="object")R=new Request(C,arguments.length<=1?void 0:arguments[1]),g=arguments.length<=2?void 0:arguments[2],y=arguments.length<=3?void 0:arguments[3];else{for(var S,E="GET",A=1;A<arguments.length;A++){var N=A<0||arguments.length<=A?void 0:arguments[A];if(typeof N=="string")N==="GET"||N==="POST"||N==="PUT"||N==="DELETE"?E=N:N==="json"||N==="jsonp"||N==="binary"||N==="arrayBuffer"||N==="xml"||N==="text"||N==="table"?m=N:S=N;else if(typeof N=="number")S=N.toString();else if(d(N)==="object")if(N.hasOwnProperty("jsonpCallback")||N.hasOwnProperty("jsonpCallbackFunction"))for(var k in N)b[k]=N[k];else v=N instanceof l.default.XML?(S=N.serialize(),"application/xml"):(S=JSON.stringify(N),"application/json");else typeof N=="function"&&(g?y=N:g=N)}var _=E==="GET"?new Headers:new Headers({"Content-Type":v}),R=new Request(C,{method:E,mode:"cors",body:S,headers:_})}return(_=(_=(m=m||(C.includes("json")?"json":C.includes("xml")?"xml":"text"))==="jsonp"?(0,u.default)(C,b):fetch(R)).then(function(I){if(!I.ok)throw(L=new Error(I.body)).status=I.status,L.ok=!1,L;var L=0;switch((L=m!=="jsonp"?I.headers.get("content-length"):L)&&64e6<L&&l.default._friendlyFileLoadError(7,C),m){case"json":case"jsonp":return I.json();case"binary":return I.blob();case"arrayBuffer":return I.arrayBuffer();case"xml":return I.text().then(function(j){return j=new DOMParser().parseFromString(j,"text/xml"),new l.default.XML(j.documentElement)});default:return I.text()}})).then(g||function(){}),_.catch(y||console.error),_},window.URL=window.URL||window.webkitURL,l.default.prototype._pWriters=[],l.default.prototype.createWriter=function(m,g){var y,b;for(b in l.default.prototype._pWriters)if(l.default.prototype._pWriters[b].name===m)return y=new l.default.PrintWriter(m+this.millis(),g),l.default.prototype._pWriters.push(y),y;return y=new l.default.PrintWriter(m,g),l.default.prototype._pWriters.push(y),y},l.default.PrintWriter=function(m,g){var y=this;this.name=m,this.content="",this.write=function(b){this.content+=b},this.print=function(b){this.content+="".concat(b,`
`)},this.clear=function(){this.content=""},this.close=function(){var b,x=[];for(b in x.push(this.content),l.default.prototype.writeFile(x,m,g),l.default.prototype._pWriters)l.default.prototype._pWriters[b].name===this.name&&l.default.prototype._pWriters.splice(b,1);y.clear(),y={}}},l.default.prototype.save=function(m,g,y){var b=arguments,x=(this._curElement||this).elt;if(b.length===0)l.default.prototype.saveCanvas(x);else if(b[0]instanceof l.default.Renderer||b[0]instanceof l.default.Graphics)l.default.prototype.saveCanvas(b[0].elt,b[1],b[2]);else if(b.length===1&&typeof b[0]=="string")l.default.prototype.saveCanvas(x,b[0]);else switch(h(b[1],b[2])[1]){case"json":return void l.default.prototype.saveJSON(b[0],b[1],b[2]);case"txt":return void l.default.prototype.saveStrings(b[0],b[1],b[2]);default:b[0]instanceof Array?l.default.prototype.saveStrings(b[0],b[1],b[2]):b[0]instanceof l.default.Table?l.default.prototype.saveTable(b[0],b[1],b[2]):b[0]instanceof l.default.Image?l.default.prototype.saveCanvas(b[0].canvas,b[1]):b[0]instanceof l.default.SoundFile&&l.default.prototype.saveSound(b[0],b[1],b[2],b[3])}},l.default.prototype.saveJSON=function(m,g,y){l.default._validateParameters("saveJSON",arguments),y=y?JSON.stringify(m):JSON.stringify(m,void 0,2),this.saveStrings(y.split(`
`),g,"json")},l.default.prototype.saveJSONObject=l.default.prototype.saveJSON,l.default.prototype.saveJSONArray=l.default.prototype.saveJSON,l.default.prototype.saveStrings=function(m,g,y,b){l.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(g,y||"txt"),v=0;v<m.length;v++)b?x.write(m[v]+`\r
`):x.write(m[v]+`
`);x.close(),x.clear()},l.default.prototype.saveTable=function(m,g,y){l.default._validateParameters("saveTable",arguments),b=y===void 0?g.substring(g.lastIndexOf(".")+1,g.length):y;var b,x=this.createWriter(g,b),v=m.columns,w=b==="tsv"?"	":",";if(b!=="html"){if(v[0]!=="0"){for(var _=0;_<v.length;_++)_<v.length-1?x.write(v[_]+w):x.write(v[_]);x.write(`
`)}for(var C=0;C<m.rows.length;C++){for(var S=void 0,S=0;S<m.rows[C].arr.length;S++)S<m.rows[C].arr.length-1?b==="csv"&&String(m.rows[C].arr[S]).includes(",")?x.write('"'+m.rows[C].arr[S]+'"'+w):x.write(m.rows[C].arr[S]+w):b==="csv"&&String(m.rows[C].arr[S]).includes(",")?x.write('"'+m.rows[C].arr[S]+'"'):x.write(m.rows[C].arr[S]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),v[0]!=="0"){x.print("    <tr>");for(var E=0;E<v.length;E++){var A=p(v[E]);x.print("      <td>".concat(A)),x.print("      </td>")}x.print("    </tr>")}for(var N=0;N<m.rows.length;N++){x.print("    <tr>");for(var k=0;k<m.columns.length;k++){var R=p(m.rows[N].getString(k));x.print("      <td>".concat(R)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},l.default.prototype.writeFile=function(x,g,y){var b="application/octet-stream",x=(l.default.prototype._isSafari()&&(b="text/plain"),new Blob(x,{type:b}));l.default.prototype.downloadFile(x,g,y)},l.default.prototype.downloadFile=function(m,x,v){var b,x=h(x,v),v=x[0];m instanceof Blob?c.default.saveAs(m,v):((b=document.createElement("a")).href=m,b.download=v,b.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},b.style.display="none",document.body.appendChild(b),l.default.prototype._isSafari()&&(m=(m=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(m)),b.click())},l.default.prototype._checkFileExtension=h,l.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},o=l.default,s.default=o},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Table=function(){function u(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],h=this,m=u;if(!(h instanceof m))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=p}var c,f,d;return c=u,(f=[{key:"addRow",value:function(p){if(p=p||new a.default.TableRow,p.arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,h){if(typeof h=="string"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[h]===p)return this.rows[m]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].arr[h]===p)return this.rows[g];return null}},{key:"findRows",value:function(p,h){var m=[];if(typeof h=="string")for(var g=0;g<this.rows.length;g++)this.rows[g].obj[h]===p&&m.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[h]===p&&m.push(this.rows[y]);return m}},{key:"matchRow",value:function(p,h){if(typeof h=="number"){for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[h].match(p))return this.rows[m]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].obj[h].match(p))return this.rows[g];return null}},{key:"matchRows",value:function(p,h){var m=[];if(typeof h=="number")for(var g=0;g<this.rows.length;g++)this.rows[g].arr[h].match(p)&&m.push(this.rows[g]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[h].match(p)&&m.push(this.rows[y]);return m}},{key:"getColumn",value:function(p){var h=[];if(typeof p=="string")for(var m=0;m<this.rows.length;m++)h.push(this.rows[m].obj[p]);else for(var g=0;g<this.rows.length;g++)h.push(this.rows[g].arr[p]);return h}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,h){for(var m=[],g=0;g<p.length;g++)m.push(p.charAt(g).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(m.join("|"),"g");if(h===void 0)for(var b=0;b<this.columns.length;b++)for(var x=0;x<this.rows.length;x++){var v=(v=this.rows[x].arr[b]).replace(y,"");this.rows[x].arr[b]=v,this.rows[x].obj[this.columns[b]]=v}else if(typeof h=="string")for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].obj[h]).replace(y,""),C=(this.rows[w].obj[h]=_,this.columns.indexOf(h));this.rows[w].arr[C]=_}else for(var S=0;S<this.rows.length;S++){var E=(E=this.rows[S].arr[h]).replace(y,"");this.rows[S].arr[h]=E,this.rows[S].obj[this.columns[h]]=E}}},{key:"trim",value:function(p){var h=new RegExp(" ","g");if(p===void 0)for(var m=0;m<this.columns.length;m++)for(var g=0;g<this.rows.length;g++){var y=(y=this.rows[g].arr[m]).replace(h,"");this.rows[g].arr[m]=y,this.rows[g].obj[this.columns[m]]=y}else if(typeof p=="string")for(var b=0;b<this.rows.length;b++){var x=(x=this.rows[b].obj[p]).replace(h,""),v=(this.rows[b].obj[p]=x,this.columns.indexOf(p));this.rows[b].arr[v]=x}else for(var w=0;w<this.rows.length;w++){var _=(_=this.rows[w].arr[p]).replace(h,"");this.rows[w].arr[p]=_,this.rows[w].obj[this.columns[p]]=_}}},{key:"removeColumn",value:function(g){typeof g=="string"?m=this.columns.indexOf(h=g):h=this.columns[m=g];var h,m,g=this.columns.splice(m+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(g);for(var y=0;y<this.rows.length;y++){var b=this.rows[y].arr,x=b.splice(m+1,b.length);b.pop(),this.rows[y].arr=b.concat(x),delete this.rows[y].obj[h]}}},{key:"set",value:function(p,h,m){this.rows[p].set(h,m)}},{key:"setNum",value:function(p,h,m){this.rows[p].setNum(h,m)}},{key:"setString",value:function(p,h,m){this.rows[p].setString(h,m)}},{key:"get",value:function(p,h){return this.rows[p].get(h)}},{key:"getNum",value:function(p,h){return this.rows[p].getNum(h)}},{key:"getString",value:function(p,h){return this.rows[p].getString(h)}},{key:"getObject",value:function(p){for(var h,m={},g=0;g<this.rows.length;g++)if(h=this.rows[g].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));m[h[p]]=h}else m[g]=this.rows[g].obj;return m}},{key:"getArray",value:function(){for(var p=[],h=0;h<this.rows.length;h++)p.push(this.rows[h].arr);return p}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(o,i,s){"use strict";o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.from-entries"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.TableRow=function(){function l(d,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var h=[];d&&(h=d.split(p=p||",")),this.arr=h,this.obj=Object.fromEntries(h.entries()),this.table=null}var u,c,f;return u=l,(c=[{key:"set",value:function(d,p){if(typeof d=="string"){var h=this.table.columns.indexOf(d);if(!(0<=h))throw new Error('This table has no column named "'.concat(d,'"'));this.obj[d]=p,this.arr[h]=p}else{if(!(d<this.table.columns.length))throw new Error("Column #".concat(d," is out of the range of this table"));this.arr[d]=p,h=this.table.columns[d],this.obj[h]=p}}},{key:"setNum",value:function(d,p){p=parseFloat(p),this.set(d,p)}},{key:"setString",value:function(d,p){p=p.toString(),this.set(d,p)}},{key:"get",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d]}},{key:"getNum",value:function(d){var p=parseFloat(typeof d=="string"?this.obj[d]:this.arr[d]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[d]," is NaN (Not a Number)");return p}},{key:"getString",value:function(d){return(typeof d=="string"?this.obj:this.arr)[d].toString()}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function u(c){for(var f=[],d=0;d<c.length;d++)f.push(new a.default.XML(c[d]));return f}a.default.XML=function(){function c(h){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");h?this.DOM=h:(h=document.implementation.createDocument(null,"doc"),this.DOM=h.createElement("root"))}var f,d,p;return f=c,(d=[{key:"getParent",value:function(){return new a.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(h){var m=this.DOM.innerHTML,g=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(h);y.innerHTML=m;for(var b=0;b<g.length;b++)y.setAttribute(g[b].nodeName,g[b].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var h=[],m=0;m<this.DOM.childNodes.length;m++)h.push(this.DOM.childNodes[m].nodeName);return h}},{key:"getChildren",value:function(h){return u(h?this.DOM.getElementsByTagName(h):this.DOM.children)}},{key:"getChild",value:function(h){if(typeof h!="string")return new a.default.XML(this.DOM.children[h]);var m=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.children[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var v=b.value;if(v.tagName===h)return new a.default.XML(v)}}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}}},{key:"addChild",value:function(h){h instanceof a.default.XML&&this.DOM.appendChild(h.DOM)}},{key:"removeChild",value:function(h){var m=-1;if(typeof h=="string"){for(var g=0;g<this.DOM.children.length;g++)if(this.DOM.children[g].tagName===h){m=g;break}}else m=h;m!==-1&&this.DOM.removeChild(this.DOM.children[m])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var h=[],m=!0,g=!1,y=void 0;try{for(var b,x=this.DOM.attributes[Symbol.iterator]();!(m=(b=x.next()).done);m=!0){var v=b.value;h.push(v.nodeName)}}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}return h}},{key:"hasAttribute",value:function(h){var m={},g=!0,y=!1,b=void 0;try{for(var x,v=this.DOM.attributes[Symbol.iterator]();!(g=(x=v.next()).done);g=!0){var w=x.value;m[w.nodeName]=w.nodeValue}}catch(_){y=!0,b=_}finally{try{g||v.return==null||v.return()}finally{if(y)throw b}}return!!m[h]}},{key:"getNum",value:function(h,m){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(C){b=!0,x=C}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return Number(g[h])||m||0}},{key:"getString",value:function(h,m){var g={},y=!0,b=!1,x=void 0;try{for(var v,w=this.DOM.attributes[Symbol.iterator]();!(y=(v=w.next()).done);y=!0){var _=v.value;g[_.nodeName]=_.nodeValue}}catch(C){b=!0,x=C}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}return g[h]?String(g[h]):m||null}},{key:"setAttribute",value:function(h,m){this.DOM.setAttribute(h,m)}},{key:"getContent",value:function(h){var m=this.DOM.textContent;return(m=m.replace(/\s\s+/g,","))||h||null}},{key:"setContent",value:function(h){this.DOM.children.length||(this.DOM.textContent=h)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&l(f.prototype,d),p&&l(f,p),c}(),o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u){return function(c){if(Array.isArray(c)){for(var f=0,d=new Array(c.length);f<c.length;f++)d[f]=c[f];return d}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(u,c,f){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(u,f),c)},a.default.prototype.dist=function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return a.default._validateParameters("dist",c),c.length===4?Math.hypot(c[2]-c[0],c[3]-c[1]):c.length===6?Math.hypot(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(u,c,f){return a.default._validateParameters("lerp",arguments),f*(c-u)+u},a.default.prototype.log=Math.log,a.default.prototype.mag=function(u,c){return a.default._validateParameters("mag",arguments),Math.hypot(u,c)},a.default.prototype.map=function(u,c,f,d,p,h){return a.default._validateParameters("map",arguments),u=(u-c)/(f-c)*(p-d)+d,h?d<p?this.constrain(u,d,p):this.constrain(u,p,d):u},a.default.prototype.max=function(){for(var u=function(p){return Math.max.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.min=function(){for(var u=function(p){return Math.min.apply(Math,l(p))},c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return Array.isArray(f[0])?u(f[0]):u(f)},a.default.prototype.norm=function(u,c,f){return a.default._validateParameters("norm",arguments),this.map(u,c,f,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(u,c){return c?(c=Math.pow(10,c),Math.round(u*c)/c):Math.round(u)},a.default.prototype.sq=function(u){return u*u},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(d){a.default._validateParameters("fract",arguments);var c,f=0,d=Number(d);return isNaN(d)||Math.abs(d)===1/0?d:(d<0&&(d=-d,f=1),String(d).includes(".")&&!String(d).includes("e")?(c=String(d),c=+("0"+c.slice(c.indexOf("."))),Math.abs(f-c)):d<1?Math.abs(f-d):0)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(c,f,d){return(l=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(p,h,m){var g=[null];return g.push.apply(g,h),h=new(Function.bind.apply(p,g)),m&&u(h,m.prototype),h}).apply(null,arguments)}function u(c,f){return(u=Object.setPrototypeOf||function(d,p){return d.__proto__=p,d})(c,f)}a.default.prototype.createVector=function(c,f,d){return this instanceof a.default?l(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(c,f,d)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(d,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,d=(d=d("../core/main"))&&d.__esModule?d:{default:d};function a(p){return .5*(1-Math.cos(p*Math.PI))}var l,u=4095,c=4,f=.5,d=(d.default.prototype.noise=function(p){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(l==null){l=new Array(4096);for(var g=0;g<4096;g++)l[g]=Math.random()}p<0&&(p=-p),h<0&&(h=-h),m<0&&(m=-m);for(var y,b,x=Math.floor(p),v=Math.floor(h),w=Math.floor(m),_=p-x,C=h-v,S=m-w,E=0,A=.5,N=0;N<c;N++){var k=x+(v<<4)+(w<<8),R=a(_),I=a(C),L=l[k&u];L+=R*(l[k+1&u]-L),y=l[k+16&u],L+=I*((y+=R*(l[k+16+1&u]-y))-L),y=l[(k+=256)&u],y+=R*(l[k+1&u]-y),b=l[k+16&u],y+=I*((b+=R*(l[k+16+1&u]-b))-y),E+=(L+=a(S)*(y-L))*A,A*=f,x<<=1,v<<=1,w<<=1,1<=(_*=2)&&(x++,_--),1<=(C*=2)&&(v++,C--),1<=(S*=2)&&(w++,S--)}return E},d.default.prototype.noiseDetail=function(p,h){0<p&&(c=p),0<h&&(f=h)},d.default.prototype.noiseSeed=function(p){g=4294967296;var h,m,g,y={setSeed:function(x){m=h=(x??Math.random()*g)>>>0},getSeed:function(){return h},rand:function(){return(m=(1664525*m+1013904223)%g)/g}};y.setSeed(p),l=new Array(4096);for(var b=0;b<4096;b++)l[b]=y.rand()},d.default);s.default=d},{"../core/main":280}],313:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.some"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.number.is-finite"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("../core/constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}function d(h,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}u.default.Vector=function(){function h(){var w=this,b=h;if(!(w instanceof b))throw new TypeError("Cannot call a class as a function");var x,v,w=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,v=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,v=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=v,this.z=w}var m,g,y;return m=h,y=[{key:"fromAngle",value:function(b){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new u.default.Vector(x*Math.cos(b),x*Math.sin(b),0)}},{key:"fromAngles",value:function(S,_){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,w=Math.cos(_),_=Math.sin(_),C=Math.cos(S),S=Math.sin(S);return new u.default.Vector(v*S*_,-v*C,v*S*w)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*c.TWO_PI)}},{key:"random3D",value:function(){var b=Math.random()*c.TWO_PI,x=2*Math.random()-1,w=Math.sqrt(1-x*x),v=w*Math.cos(b),w=w*Math.sin(b);return new u.default.Vector(v,w,x)}},{key:"copy",value:function(b){return b.copy(b)}},{key:"add",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),C.add(_),C}},{key:"rem",value:function(b,x){if(b instanceof u.default.Vector&&x instanceof u.default.Vector)return(b=b.copy()).rem(x),b}},{key:"sub",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),C.sub(_),C}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),C.mult(_),C}},{key:"rotate",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length===2?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),C.set(w)),C.rotate(_),C}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return C?C.set(w):(C=w.copy(),x.length===3&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),C.div(_),C}},{key:"dot",value:function(b,x){return b.dot(x)}},{key:"cross",value:function(b,x){return b.cross(x)}},{key:"dist",value:function(b,x){return b.dist(x)}},{key:"lerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2],S=x[3];return S?S.set(w):(S=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),S.lerp(_,C),S}},{key:"slerp",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2],S=x[3];return S?S.set(w):(S=w.copy(),x.length===4&&u.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),S.slerp(_,C),S}},{key:"mag",value:function(b){return b.mag()}},{key:"magSq",value:function(b){return b.magSq()}},{key:"normalize",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1];return x.length<2?_=w.copy():(_ instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),_.set(w)),_.normalize()}},{key:"limit",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length<3?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),C.set(w)),C.limit(_)}},{key:"setMag",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length<3?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),C.set(w)),C.setMag(_)}},{key:"heading",value:function(b){return b.heading()}},{key:"angleBetween",value:function(b,x){return b.angleBetween(x)}},{key:"reflect",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];return x.length<3?C=w.copy():(C instanceof u.default.Vector||u.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),C.set(w)),C.reflect(_)}},{key:"array",value:function(b){return b.array()}},{key:"equals",value:function(b,x){var v;return b instanceof u.default.Vector?v=b:Array.isArray(b)?v=new u.default.Vector().set(b):u.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),v.equals(x)}}],(g=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(b,x,v){return b instanceof u.default.Vector?(this.x=b.x||0,this.y=b.y||0,this.z=b.z||0):Array.isArray(b)?(this.x=b[0]||0,this.y=b[1]||0,this.z=b[2]||0):(this.x=b||0,this.y=x||0,this.z=v||0),this}},{key:"copy",value:function(){return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new u.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(b,x,v){return b instanceof u.default.Vector?(this.x+=b.x||0,this.y+=b.y||0,this.z+=b.z||0):Array.isArray(b)?(this.x+=b[0]||0,this.y+=b[1]||0,this.z+=b[2]||0):(this.x+=b||0,this.y+=x||0,this.z+=v||0),this}},{key:"calculateRemainder2D",value:function(b,x){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(b,x,v){return b!==0&&(this.x=this.x%b),x!==0&&(this.y=this.y%x),v!==0&&(this.z=this.z%v),this}},{key:"rem",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_,C,S=x[0],E=x[1],A=x[2];if(S instanceof u.default.Vector){if([S.x,S.y,S.z].every(Number.isFinite))return w=parseFloat(S.x),_=parseFloat(S.y),C=parseFloat(S.z),this.calculateRemainder3D(w,_,C)}else if(Array.isArray(S)){if(S.every(Number.isFinite))return S.length===2?this.calculateRemainder2D(S[0],S[1]):S.length===3?this.calculateRemainder3D(S[0],S[1],S[2]):void 0}else if(x.length===1){if(Number.isFinite(S)&&S!==0)return this.x=this.x%S,this.y=this.y%S,this.z=this.z%S,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(S,E)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(S,E,A)}},{key:"sub",value:function(b,x,v){return b instanceof u.default.Vector?(this.x-=b.x||0,this.y-=b.y||0,this.z-=b.z||0):Array.isArray(b)?(this.x-=b[0]||0,this.y-=b[1]||0,this.z-=b[2]||0):(this.x-=b||0,this.y-=x||0,this.z-=v||0),this}},{key:"mult",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w,_=x[0],C=x[1],S=x[2];return _ instanceof u.default.Vector?Number.isFinite(_.x)&&Number.isFinite(_.y)&&Number.isFinite(_.z)&&typeof _.x=="number"&&typeof _.y=="number"&&typeof _.z=="number"?(this.x*=_.x,this.y*=_.y,this.z*=_.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(_)?_.every(function(E){return Number.isFinite(E)})&&_.every(function(E){return typeof E=="number"})?_.length===1?(this.x*=_[0],this.y*=_[0],this.z*=_[0]):_.length===2?(this.x*=_[0],this.y*=_[1]):_.length===3&&(this.x*=_[0],this.y*=_[1],this.z*=_[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(w=x).every(function(E){return Number.isFinite(E)})&&w.every(function(E){return typeof E=="number"})?(x.length===1&&(this.x*=_,this.y*=_,this.z*=_),x.length===2&&(this.x*=_,this.y*=C),x.length===3&&(this.x*=_,this.y*=C,this.z*=S)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var b=arguments.length,x=new Array(b),v=0;v<b;v++)x[v]=arguments[v];var w=x[0],_=x[1],C=x[2];if(w instanceof u.default.Vector)if(Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"){var S=w.z===0&&this.z===0;if(w.x===0||w.y===0||!S&&w.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=w.x,this.y/=w.y,S||(this.z/=w.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(w))if(w.every(Number.isFinite)&&w.every(function(E){return typeof E=="number"})){if(w.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;w.length===1?(this.x/=w[0],this.y/=w[0],this.z/=w[0]):w.length===2?(this.x/=w[0],this.y/=w[1]):w.length===3&&(this.x/=w[0],this.y/=w[1],this.z/=w[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(E){return typeof E=="number"})){if(x.some(function(E){return E===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=w,this.y/=w,this.z/=w),x.length===2&&(this.x/=w,this.y/=_),x.length===3&&(this.x/=w,this.y/=_,this.z/=C)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var b=this.x,x=this.y,v=this.z;return b*b+x*x+v*v}},{key:"dot",value:function(b,x,v){return b instanceof u.default.Vector?this.dot(b.x,b.y,b.z):this.x*(b||0)+this.y*(x||0)+this.z*(v||0)}},{key:"cross",value:function(w){var x=this.y*w.z-this.z*w.y,v=this.z*w.x-this.x*w.z,w=this.x*w.y-this.y*w.x;return this.isPInst?new u.default.Vector(this._fromRadians,this._toRadians,x,v,w):new u.default.Vector(x,v,w)}},{key:"dist",value:function(b){return b.copy().sub(this).mag()}},{key:"normalize",value:function(){var b=this.mag();return b!==0&&this.mult(1/b),this}},{key:"limit",value:function(b){var x=this.magSq();return b*b<x&&this.div(Math.sqrt(x)).mult(b),this}},{key:"setMag",value:function(b){return this.normalize().mult(b)}},{key:"heading",value:function(){var b=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(b):b}},{key:"setHeading",value:function(b){this.isPInst&&(b=this._toRadians(b));var x=this.mag();return this.x=x*Math.cos(b),this.y=x*Math.sin(b),this}},{key:"rotate",value:function(x){var x=this.heading()+x,v=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*v,this.y=Math.sin(x)*v,this}},{key:"angleBetween",value:function(b){var x;return this.magSq()*b.magSq()==0?NaN:(x=this.cross(b),b=Math.atan2(x.mag(),this.dot(b))*Math.sign(x.z||1),this.isPInst?this._fromRadians(b):b)}},{key:"lerp",value:function(b,x,v,w){return b instanceof u.default.Vector?this.lerp(b.x,b.y,b.z,x):(this.x+=(b-this.x)*w||0,this.y+=(x-this.y)*w||0,this.z+=(v-this.z)*w||0,this)}},{key:"slerp",value:function(b,x){if(x!==0){if(x===1)return this.set(b);var v=this.mag(),w=b.mag();if(v*w==0)this.mult(1-x).add(b.x*x,b.y*x,b.z*x);else{var _=this.cross(b),C=_.mag(),S=Math.atan2(C,this.dot(b));if(0<C)_.x/=C,_.y/=C,_.z/=C;else{if(S<.5*Math.PI)return this.mult(1-x).add(b.x*x,b.y*x,b.z*x),this;this.z===0&&b.z===0?_.set(0,0,1):this.x!==0?_.set(this.y,-this.x,0).normalize():_.set(1,0,0)}C=_.cross(this),b=1-x+x*w/v,_=b*Math.cos(x*S),w=b*Math.sin(x*S),this.x=this.x*_+C.x*w,this.y=this.y*_+C.y*w,this.z=this.z*_+C.z*w}}return this}},{key:"reflect",value:function(b){return b.normalize(),this.sub(b.mult(2*this.dot(b)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(C,x,v){var w,_,C=C instanceof u.default.Vector?(w=C.x||0,_=C.y||0,C.z||0):Array.isArray(C)?(w=C[0]||0,_=C[1]||0,C[2]||0):(w=C||0,_=x||0,v||0);return this.x===w&&this.y===_&&this.z===C}}])&&d(m.prototype,g),y&&d(m,y),h}();var p=u.default.Vector;s.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(f,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f},l="_lcg_random_state",u=4294967296,c=0,f=(a.default.prototype._lcg=function(d){return this[d]=(1664525*this[d]+1013904223)%u,this[d]/u},a.default.prototype._lcgSetSeed=function(d,p){this[d]=(p??Math.random()*u)>>>0},a.default.prototype.randomSeed=function(d){this._lcgSetSeed(l,d),this._gaussian_previous=!1},a.default.prototype.random=function(d,p){var h,m;return a.default._validateParameters("random",arguments),h=this[l]!=null?this._lcg(l):Math.random(),d===void 0?h:p===void 0?Array.isArray(d)?d[Math.floor(h*d.length)]:h*d:(p<d&&(m=d,d=p,p=m),h*(p-d)+d)},a.default.prototype.randomGaussian=function(d){var p,h,m,g,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)p=c,this._gaussian_previous=!1;else{for(;1<=(g=(h=this.random(2)-1)*h+(m=this.random(2)-1)*m););p=h*(g=Math.sqrt(-2*Math.log(g)/g)),c=m*g,this._gaussian_previous=!0}return p*y+(d||0)},a.default);s.default=f},{"../core/main":280}],315:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.prototype._angleMode=c.RADIANS,u.default.prototype.acos=function(p){return this._fromRadians(Math.acos(p))},u.default.prototype.asin=function(p){return this._fromRadians(Math.asin(p))},u.default.prototype.atan=function(p){return this._fromRadians(Math.atan(p))},u.default.prototype.atan2=function(p,h){return this._fromRadians(Math.atan2(p,h))},u.default.prototype.cos=function(p){return Math.cos(this._toRadians(p))},u.default.prototype.sin=function(p){return Math.sin(this._toRadians(p))},u.default.prototype.tan=function(p){return Math.tan(this._toRadians(p))},u.default.prototype.degrees=function(p){return p*c.RAD_TO_DEG},u.default.prototype.radians=function(p){return p*c.DEG_TO_RAD},u.default.prototype.angleMode=function(p){if(u.default._validateParameters("angleMode",arguments),p===void 0)return this._angleMode;p!==c.DEGREES&&p!==c.RADIANS||p!==this._angleMode&&(p===c.RADIANS?(this._setProperty("pRotationX",this.pRotationX*c.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*c.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*c.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*c.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*c.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*c.RAD_TO_DEG)),this._angleMode=p)},u.default.prototype._toRadians=function(p){return this._angleMode===c.DEGREES?p*c.DEG_TO_RAD:p},u.default.prototype._toDegrees=function(p){return this._angleMode===c.RADIANS?p*c.RAD_TO_DEG:p},u.default.prototype._fromRadians=function(p){return this._angleMode===c.DEGREES?p*c.RAD_TO_DEG:p},u.default.prototype._fromDegrees=function(p){return this._angleMode===c.RADIANS?p*c.DEG_TO_RAD:p};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(o,i,s){"use strict";o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.textAlign=function(l,u){var c;return a.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},a.default.prototype.textLeading=function(l){var u;return a.default._validateParameters("textLeading",arguments),(u=this._renderer).textLeading.apply(u,arguments)},a.default.prototype.textSize=function(l){var u;return a.default._validateParameters("textSize",arguments),(u=this._renderer).textSize.apply(u,arguments)},a.default.prototype.textStyle=function(l){var u;return a.default._validateParameters("textStyle",arguments),(u=this._renderer).textStyle.apply(u,arguments)},a.default.prototype.textWidth=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];if(u[0]+="",a.default._validateParameters("textWidth",u),u[0].length===0)return 0;for(var f=u[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),d=[],p=0;p<f.length;p++)d.push(this._renderer.textWidth(f[p]));return Math.max.apply(Math,d)},a.default.prototype.textAscent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textAscent",u),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("textDescent",u),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(l){return a.default._validateParameters("textWrap",[l]),this._renderer.textWrap(l)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.last-index-of"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=p(o("../core/constants")),f=p(o("opentype.js"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}function p(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=d();if(g&&g.has(m))return g.get(m);var y,b,x={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&((b=v?Object.getOwnPropertyDescriptor(m,y):null)&&(b.get||b.set)?Object.defineProperty(x,y,b):x[y]=m[y]);return x.default=m,g&&g.set(m,x),x}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),u.default.prototype.loadFont=function(m,g,y){u.default._validateParameters("loadFont",arguments);var b=new u.default.Font(this),x=this;return f.load(m,function(_,C){if(_)return u.default._friendlyFileLoadError(4,m),y!==void 0?y(_):void console.error(_,m);b.font=C,g!==void 0&&g(b),x._decrementPreload();var _=m.split("\\").pop().split("/").pop(),C=_.lastIndexOf("."),S=C<1?null:_.slice(C+1);["ttf","otf","woff","woff2"].includes(S)&&(S=_.slice(0,C!==-1?C:0),(_=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(m,`);
}
`))),document.head.appendChild(_))}),b},u.default.prototype.text=function(m,g,y,b,x){var v;return u.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(v=this._renderer).text.apply(v,arguments):this},u.default.prototype.textFont=function(m,g){if(u.default._validateParameters("textFont",arguments),arguments.length){if(m)return this._renderer._setProperty("_textFont",m),g&&(this._renderer._setProperty("_textSize",g),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",g*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var h=u.default;s.default=h},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(o,i,s){"use strict";function a(E){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.function.name"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=o("../core/main"))&&l.__esModule?l:{default:l},u=function(E){if(E&&E.__esModule)return E;if(E===null||f(E)!=="object"&&typeof E!="function")return{default:E};var A=c();if(A&&A.has(E))return A.get(E);var N,k={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in E){var I;Object.prototype.hasOwnProperty.call(E,N)&&((I=R?Object.getOwnPropertyDescriptor(E,N):null)&&(I.get||I.set)?Object.defineProperty(k,N,I):k[N]=E[N])}return k.default=E,A&&A.set(E,k),k}(o("../core/constants"));function c(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,c=function(){return E},E)}function f(E){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(A){return a(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":a(A)})(E)}function d(E,A){for(var N=0;N<A.length;N++){var k=A[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,k.key,k)}}function p(E,A){var N=E.length;return E[A<0?A%N+N:A%N]}function h(E,A,N,k){var R,I,L;return k?(h.tmpPoint1===void 0&&(h.tmpPoint1=[],h.tmpPoint2=[]),I=h.tmpPoint1,L=h.tmpPoint2,I.x=A.x-E.x,I.y=A.y-E.y,L.x=N.x-A.x,L.y=N.y-A.y,R=I.x*L.x+I.y*L.y,I=Math.sqrt(I.x*I.x+I.y*I.y),L=Math.sqrt(L.x*L.x+L.y*L.y),Math.acos(R/(I*L))<k):(A[0]-E[0])*(N[1]-E[1])-(N[0]-E[0])*(A[1]-E[1])==0}function m(O,q,z,ee,ae,I,L,j,M){var V=1-M,U=Math.pow(V,3),Y=Math.pow(V,2),$=M*M,X=$*M,G=U*O+3*Y*M*z+3*V*M*M*ae+X*L,U=U*q+3*Y*M*ee+3*V*M*M*I+X*j,Y=O+2*M*(z-O)+$*(ae-2*z+O),X=q+2*M*(ee-q)+$*(I-2*ee+q),pe=z+2*M*(ae-z)+$*(L-2*ae+z),$=ee+2*M*(I-ee)+$*(j-2*I+ee),O=V*O+M*z,z=V*q+M*ee,q=V*ae+M*L,ee=V*I+M*j,ae=90-180*Math.atan2(Y-pe,X-$)/Math.PI;return(pe<Y||X<$)&&(ae+=180),{x:G,y:U,m:{x:Y,y:X},n:{x:pe,y:$},start:{x:O,y:z},end:{x:q,y:ee},alpha:ae}}function g(E,A,N,k,R,I,L,j,M){return M==null?C(E,A,N,k,R,I,L,j):m(E,A,N,k,R,I,L,j,function(V,G,U,Y,X,pe,$,O,z){if(!(z<0||C(V,G,U,Y,X,pe,$,O)<z)){var q,ee=.5,ae=1-ee;for(q=C(V,G,U,Y,X,pe,$,O,ae);.01<Math.abs(q-z);)q=C(V,G,U,Y,X,pe,$,O,ae+=(q<z?1:-1)*(ee/=2));return ae}}(E,A,N,k,R,I,L,j,M))}function y(E,A,N){for(var k,R,I,L,j,M=0,V=0,G=(E=function(U,Y){function X(Ae,Re,ze){var lt,We;if(!Ae)return["C",Re.x,Re.y,Re.x,Re.y,Re.x,Re.y];switch(Ae[0]in{T:1,Q:1}||(Re.qx=Re.qy=null),Ae[0]){case"M":Re.X=Ae[1],Re.Y=Ae[2];break;case"A":Ae=["C"].concat(x.apply(0,[Re.x,Re.y].concat(Ae.slice(1))));break;case"S":We=ze==="C"||ze==="S"?(lt=2*Re.x-Re.bx,2*Re.y-Re.by):(lt=Re.x,Re.y),Ae=["C",lt,We].concat(Ae.slice(1));break;case"T":ze==="Q"||ze==="T"?(Re.qx=2*Re.x-Re.qx,Re.qy=2*Re.y-Re.qy):(Re.qx=Re.x,Re.qy=Re.y),Ae=["C"].concat(_(Re.x,Re.y,Re.qx,Re.qy,Ae[1],Ae[2]));break;case"Q":Re.qx=Ae[1],Re.qy=Ae[2],Ae=["C"].concat(_(Re.x,Re.y,Ae[1],Ae[2],Ae[3],Ae[4]));break;case"L":Ae=["C"].concat(w(Re.x,Re.y,Ae[1],Ae[2]));break;case"H":Ae=["C"].concat(w(Re.x,Re.y,Ae[1],Re.y));break;case"V":Ae=["C"].concat(w(Re.x,Re.y,Re.x,Ae[1]));break;case"Z":Ae=["C"].concat(w(Re.x,Re.y,Re.X,Re.Y))}return Ae}function pe(Ae,Re){if(7<Ae[Re].length){Ae[Re].shift();for(var ze=Ae[Re];ze.length;)Q[Re]="A",q&&(le[Re]="A"),Ae.splice(Re++,0,["C"].concat(ze.splice(0,6)));Ae.splice(Re,1),O=Math.max(z.length,q&&q.length||0)}}function $(Ae,Re,ze,lt,We){Ae&&Re&&Ae[We][0]==="M"&&Re[We][0]!=="M"&&(Re.splice(We,0,["M",lt.x,lt.y]),ze.bx=0,ze.by=0,ze.x=Ae[We][1],ze.y=Ae[We][2],O=Math.max(z.length,q&&q.length||0))}var O,z=b(U),q=Y&&b(Y),ee={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],le=[],ie="",Z="";O=Math.max(z.length,q&&q.length||0);for(var ge=0;ge<O;ge++){(ie=z[ge]?z[ge][0]:ie)!=="C"&&(Q[ge]=ie,ge&&(Z=Q[ge-1])),z[ge]=X(z[ge],ee,Z),Q[ge]!=="A"&&ie==="C"&&(Q[ge]="C"),pe(z,ge),q&&((ie=q[ge]?q[ge][0]:ie)!=="C"&&(le[ge]=ie,ge&&(Z=le[ge-1])),q[ge]=X(q[ge],ae,Z),le[ge]!=="A"&&ie==="C"&&(le[ge]="C"),pe(q,ge)),$(z,q,ee,ae,ge),$(q,z,ae,ee,ge);var ne=z[ge],ye=q&&q[ge],xe=ne.length,Ne=q&&ye.length;ee.x=ne[xe-2],ee.y=ne[xe-1],ee.bx=parseFloat(ne[xe-4])||ee.x,ee.by=parseFloat(ne[xe-3])||ee.y,ae.bx=q&&(parseFloat(ye[Ne-4])||ae.x),ae.by=q&&(parseFloat(ye[Ne-3])||ae.y),ae.x=q&&ye[Ne-2],ae.y=q&&ye[Ne-1]}return q?[z,q]:z}(E)).length;V<G;V++){if((I=E[V])[0]==="M")k=+I[1],R=+I[2];else{if(A<M+(L=g(k,R,I[1],I[2],I[3],I[4],I[5],I[6]))&&!N)return{x:(j=g(k,R,I[1],I[2],I[3],I[4],I[5],I[6],A-M)).x,y:j.y,alpha:j.alpha};M+=L,k=+I[5],R=+I[6]}I.shift()}return j=(j=N?M:m(k,R,I[0],I[1],I[2],I[3],I[4],I[5],1)).alpha?{x:j.x,y:j.y,alpha:j.alpha}:j}function b(E){var A=[],N=0,k=0,R=0,I=0,L=0;if(E){E[0][0]==="M"&&(R=N=+E[0][1],I=k=+E[0][2],L++,A[0]=["M",N,k]);for(var j,M,V=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",G=L,U=E.length;G<U;G++){if(A.push(j=[]),(M=E[G])[0]!==M[0].toUpperCase())switch(j[0]=M[0].toUpperCase(),j[0]){case"A":j[1]=M[1],j[2]=M[2],j[3]=M[3],j[4]=M[4],j[5]=M[5],j[6]=+(M[6]+N),j[7]=+(M[7]+k);break;case"V":j[1]=+M[1]+k;break;case"H":j[1]=+M[1]+N;break;case"R":for(var Y,X=2,pe=(Y=[N,k].concat(M.slice(1))).length;X<pe;X++)Y[X]=+Y[X]+N,Y[++X]=+Y[X]+k;A.pop(),A=A.concat(v(Y,V));break;case"M":R=+M[1]+N,I=+M[2]+k;break;default:for(var $=1,O=M.length;$<O;$++)j[$]=+M[$]+($%2?N:k)}else if(M[0]==="R")Y=[N,k].concat(M.slice(1)),A.pop(),A=A.concat(v(Y,V)),j=["R"].concat(M.slice(-2));else for(var z=0,q=M.length;z<q;z++)j[z]=M[z];switch(j[0]){case"Z":N=R,k=I;break;case"H":N=j[1];break;case"V":k=j[1];break;case"M":R=j[j.length-2],I=j[j.length-1];break;default:N=j[j.length-2],k=j[j.length-1]}}}return A}function x(E,A,N,k,q,Q,ee,j,M,V){function G(Ne,Ae,Re){return{x:Ne*Math.cos(Re)-Ae*Math.sin(Re),y:Ne*Math.sin(Re)+Ae*Math.cos(Re)}}var U,O=Math.PI,z=120*O/180,Y=O/180*(+q||0),X=[],pe=(V?(ge=V[0],U=V[1],ie=V[2],Z=V[3]):(E=(ae=G(E,A,-Y)).x,A=ae.y,1<(pe=($=(E-(j=(ae=G(j,M,-Y)).x))/2)*$/(N*N)+(ae=(A-(M=ae.y))/2)*ae/(k*k))&&(N*=pe=Math.sqrt(pe),k*=pe),pe=N*N,le=k*k,ie=(Q=(Q===ee?-1:1)*Math.sqrt(Math.abs((pe*le-pe*ae*ae-le*$*$)/(pe*ae*ae+le*$*$))))*N*ae/k+(E+j)/2,Z=Q*-k*$/N+(A+M)/2,ge=Math.asin(((A-Z)/k).toFixed(9)),U=Math.asin(((M-Z)/k).toFixed(9)),(ge=E<ie?O-ge:ge)<0&&(ge=2*O+ge),(U=j<ie?O-U:U)<0&&(U=2*O+U),ee&&U<ge&&(ge-=2*O),!ee&&ge<U&&(U-=2*O)),U-ge),$=(Math.abs(pe)>z&&(le=U,ae=j,Q=M,U=ge+z*(ee&&ge<U?1:-1),X=x(j=ie+N*Math.cos(U),M=Z+k*Math.sin(U),N,k,q,0,ee,ae,Q,[U,le,ie,Z])),pe=U-ge,Math.cos(ge)),O=Math.sin(ge),z=Math.cos(U),q=Math.sin(U),ee=Math.tan(pe/4),ae=4/3*N*ee,Q=4/3*k*ee,le=[E,A],ie=[E+ae*O,A-Q*$],Z=[j+ae*q,M-Q*z],ge=[j,M];if(ie[0]=2*le[0]-ie[0],ie[1]=2*le[1]-ie[1],V)return[ie,Z,ge].concat(X);for(var ne=[],ye=0,xe=(X=[ie,Z,ge].concat(X).join().split(",")).length;ye<xe;ye++)ne[ye]=ye%2?G(X[ye-1],X[ye],Y).y:G(X[ye],X[ye+1],Y).x;return ne}function v(E,A){for(var N=[],k=0,R=E.length;k<R-2*!A;k+=2){var I=[{x:+E[k-2],y:+E[k-1]},{x:+E[k],y:+E[k+1]},{x:+E[k+2],y:+E[k+3]},{x:+E[k+4],y:+E[k+5]}];A?k?R-4===k?I[3]={x:+E[0],y:+E[1]}:R-2===k&&(I[2]={x:+E[0],y:+E[1]},I[3]={x:+E[2],y:+E[3]}):I[0]={x:+E[R-2],y:+E[R-1]}:R-4===k?I[3]=I[2]:k||(I[0]={x:+E[k],y:+E[k+1]}),N.push(["C",(-I[0].x+6*I[1].x+I[2].x)/6,(-I[0].y+6*I[1].y+I[2].y)/6,(I[1].x+6*I[2].x-I[3].x)/6,(I[1].y+6*I[2].y-I[3].y)/6,I[2].x,I[2].y])}return N}function w(E,A,N,k){return[E,A,N,k,N,k]}function _(E,A,N,k,R,I){return[1/3*E+2/3*N,1/3*A+2/3*k,1/3*R+2/3*N,1/3*I+2/3*k,R,I]}function C(E,A,N,k,R,I,L,j,M){for(var V=(M=1<(M=M??1)?1:M<0?0:M)/2,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],U=0,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],X=0;X<12;X++){var $=V*G[X]+V,pe=S($,E,N,R,L),$=S($,A,k,I,j);U+=Y[X]*Math.sqrt(pe*pe+$*$)}return V*U}function S(E,A,N,k,R){return E*(E*(-3*A+9*N-9*k+3*R)+6*A-12*N+6*k)-3*A+3*N}l.default.Font=function(){function E(R){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.parent=R,this.cache={},this.font=void 0}var A,N,k;return A=E,(N=[{key:"textBounds",value:function(R){var I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,j=4<arguments.length?arguments[4]:void 0,M=j&&j.renderer&&j.renderer._pInst||this.parent,V=M._renderer.drawingContext,G=(V.textAlign||u.LEFT,V.textBaseline||u.BASELINE,G||M._renderer._textSize);if(!Q){for(var U=[],Y=[],X=[],pe=(X[0]=[],[]),$=this._scale(G),O=M._renderer.textLeading(),z=0,q=(this.font.forEachGlyph(R,I,L,G,j,function(Z,ge,ne,ye){var xe=Z.getMetrics();Z.index===0?X[z+=1]=[]:(X[z].push(ge+xe.xMin*$),X[z].push(ge+xe.xMax*$),pe.push(ne+z*O+-xe.yMin*$),pe.push(ne+z*O+-xe.yMax*$))}),0<X[z].length&&(U[z]=Math.min.apply(null,X[z]),Y[z]=Math.max.apply(null,X[z])),0),ee=0;ee<=z;ee++){U[ee]=Math.min.apply(null,X[ee]),Y[ee]=Math.max.apply(null,X[ee]);var ae=Y[ee]-U[ee];q<ae&&(q=ae)}var V=Math.min.apply(null,U),Q={x:V,y:L=Math.min.apply(null,pe),h:Math.max.apply(null,pe)-L,w:q,advance:V-I},G=this._handleAlignment(M._renderer,R,Q.x,Q.y,Q.w+Q.advance);Q.x=G.x,Q.y=G.y}return Q}},{key:"textToPoints",value:function(R,I,L,j,M){var V=I,G=[],U=R.split(/\r?\n|\r|\n/g);j=j||this.parent._renderer._textSize;for(var Y,X,pe,$=0;$<U.length;$++){var O=0;I=V;for(var z=(z=U[$]).replace("	","  "),q=this._getGlyphs(z),ee=0;ee<q.length;ee++){if(X=z,!((pe=q)[Y=ee].name&&pe[Y].name==="space"||X.length===pe.length&&X[Y]===" "))for(var ae=function(Z){for(var ge,ne=[],ye=0;ye<Z.length;ye++)Z[ye].type==="M"&&(ge&&ne.push(ge),ge=[]),ge.push(function(xe){var Ne=[xe.type];return xe.type==="M"||xe.type==="L"?Ne.push(xe.x,xe.y):xe.type==="C"?Ne.push(xe.x1,xe.y1,xe.x2,xe.y2,xe.x,xe.y):xe.type==="Q"&&Ne.push(xe.x1,xe.y1,xe.x,xe.y),Ne}(Z[ye]));return ne.push(ge),ne}(q[ee].getPath(I,L,j).commands),Q=0;Q<ae.length;Q++)for(var le=function(Z,ge){for(var ge=function(Re,ze){if(f(Re)!=="object")Re=ze;else for(var lt in ze)Re[lt]===void 0&&(Re[lt]=ze[lt]);return Re}(ge,{sampleFactor:.1,simplifyThreshold:0}),ne=y(Z,0,1),ye=ne/(ne*ge.sampleFactor),xe=[],Ne=0;Ne<ne;Ne+=ye)xe.push(y(Z,Ne));return ge.simplifyThreshold&&function(Ae){for(var Re=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ze=0,lt=Ae.length-1;3<Ae.length&&0<=lt;--lt)h(p(Ae,lt-1),p(Ae,lt),p(Ae,lt+1),Re)&&(Ae.splice(lt%Ae.length,1),ze++)}(xe,ge.simplifyThreshold),xe}(ae[Q],M),ie=0;ie<le.length;ie++)le[ie].x+=O,G.push(le[ie]);O+=q[ee].advanceWidth*this._scale(j)}L+=this.parent._renderer._textLeading}return G}},{key:"_getGlyphs",value:function(R){return this.font.stringToGlyphs(R)}},{key:"_getPath",value:function(R,V,L,j){var M=(j&&j.renderer&&j.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(M,R,V,L);return this.font.getPath(R,V.x,V.y,M._textSize,j)}},{key:"_getPathData",value:function(R,I,L,j){var M=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,I,L,j):f(I)==="object"&&(j=I),j&&typeof j.decimals=="number"&&(M=j.decimals),R.toPathData(M)}},{key:"_getSVG",value:function(R,I,L,j){var M=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,I,L,j):f(I)==="object"&&(j=I),j&&(typeof j.decimals=="number"&&(M=j.decimals),typeof j.strokeWidth=="number"&&(R.strokeWidth=j.strokeWidth),j.fill!==void 0&&(R.fill=j.fill),j.stroke!==void 0&&(R.stroke=j.stroke)),R.toSVG(M)}},{key:"_renderPath",value:function(G,Y,X,j){var M=j&&j.renderer||this.parent._renderer,V=M.drawingContext,G=(f(G)==="object"&&G.commands?G:this._getPath(G,Y,X,j)).commands,U=(V.beginPath(),!0),Y=!1,X=void 0;try{for(var pe,$=G[Symbol.iterator]();!(U=(pe=$.next()).done);U=!0){var O=pe.value;O.type==="M"?V.moveTo(O.x,O.y):O.type==="L"?V.lineTo(O.x,O.y):O.type==="C"?V.bezierCurveTo(O.x1,O.y1,O.x2,O.y2,O.x,O.y):O.type==="Q"?V.quadraticCurveTo(O.x1,O.y1,O.x,O.y):O.type==="Z"&&V.closePath()}}catch(z){Y=!0,X=z}finally{try{U||$.return==null||$.return()}finally{if(Y)throw X}}return M._doStroke&&M._strokeSet&&!M._clipping&&V.stroke(),M._doFill&&!M._clipping&&(M._fillSet||M._setFill(u._DEFAULT_TEXT_FILL),V.fill()),this}},{key:"_textWidth",value:function(R,I){return this.font.getAdvanceWidth(R,I)}},{key:"_textAscent",value:function(R){return this.font.ascender*this._scale(R)}},{key:"_textDescent",value:function(R){return-this.font.descender*this._scale(R)}},{key:"_scale",value:function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(R,I,L,j,M){var V=R._textSize;switch(M===void 0&&(M=this._textWidth(I,V)),R._textAlign){case u.CENTER:L-=M/2;break;case u.RIGHT:L-=M}switch(R._textBaseline){case u.TOP:j+=this._textAscent(V);break;case u.CENTER:j+=this._textAscent(V)/2;break;case u.BOTTOM:j-=this._textDescent(V)}return{x:L,y:j}}}])&&d(A.prototype,N),k&&d(A,k),E}(),o=l.default,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(o,i,s){"use strict";o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.array-buffer.constructor"),o("core-js/modules/es.object.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.append=function(a,l){return a.push(l),a},o.default.prototype.arrayCopy=function(a,l,u,c,f){var d,p;a=f!==void 0?(p=Math.min(f,a.length),d=c,a.slice(l,p+l)):(p=u!==void 0?(p=u,Math.min(p,a.length)):a.length,u=l,a.slice(d=0,p)),Array.prototype.splice.apply(u,[d,p].concat(a))},o.default.prototype.concat=function(a,l){return a.concat(l)},o.default.prototype.reverse=function(a){return a.reverse()},o.default.prototype.shorten=function(a){return a.pop(),a},o.default.prototype.shuffle=function(a,l){for(var u,c,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),d=(a=l||f?a:a.slice()).length;1<d;)u=this.random(0,1)*d|0,c=a[--d],a[d]=a[u],a[u]=c;return a},o.default.prototype.sort=function(a,c){var u=c?a.slice(0,Math.min(c,a.length)):a,c=c?a.slice(Math.min(c,a.length)):[];return(u=typeof u[0]=="string"?u.sort():u.sort(function(f,d){return f-d})).concat(c)},o.default.prototype.splice=function(a,l,u){return Array.prototype.splice.apply(a,[u,0].concat(l)),a},o.default.prototype.subset=function(a,l,u){return u!==void 0?a.slice(l,l+u):a.slice(l,a.length)},o=o.default,s.default=o},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),o("core-js/modules/es.array.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.repeat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.float=function(l){return l instanceof Array?l.map(parseFloat):parseFloat(l)},a.default.prototype.int=function(l){var u=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return l===1/0||l==="Infinity"?1/0:l===-1/0||l==="-Infinity"?-1/0:typeof l=="string"?parseInt(l,u):typeof l=="number"?0|l:typeof l=="boolean"?l?1:0:l instanceof Array?l.map(function(c){return a.default.prototype.int(c,u)}):void 0},a.default.prototype.str=function(l){return l instanceof Array?l.map(a.default.prototype.str):String(l)},a.default.prototype.boolean=function(l){return typeof l=="number"?l!==0:typeof l=="string"?l.toLowerCase()==="true":typeof l=="boolean"?l:l instanceof Array?l.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(l){return l=a.default.prototype.int(l,10),typeof l=="number"?(l+128)%256-128:l instanceof Array?l.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(l){return typeof l!="number"||isNaN(l)?l instanceof Array?l.map(a.default.prototype.char):typeof l=="string"?a.default.prototype.char(parseInt(l,10)):void 0:String.fromCharCode(l)},a.default.prototype.unchar=function(l){return typeof l=="string"&&l.length===1?l.charCodeAt(0):l instanceof Array?l.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(l,u){if(u=u??8,l instanceof Array)return l.map(function(f){return a.default.prototype.hex(f,u)});if(l===1/0||l===-1/0)return(l===1/0?"F":"0").repeat(u);if(typeof l=="number"){l<0&&(l=4294967295+l+1);for(var c=Number(l).toString(16).toUpperCase();c.length<u;)c="0".concat(c);return c=c.length>=u?c.substring(c.length-u,c.length):c}},a.default.prototype.unhex=function(l){return l instanceof Array?l.map(a.default.prototype.unhex):parseInt("0x".concat(l),16)},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.pad-start"),o("core-js/modules/es.string.replace"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(p=o("../core/main"))&&p.__esModule?p:{default:p};function l(h,m){return function(g){if(Array.isArray(g))return g}(h)||function(g,y){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]"){var b=[],x=!0,v=!1,w=void 0;try{for(var _,C=g[Symbol.iterator]();!(x=(_=C.next()).done)&&(b.push(_.value),!y||b.length!==y);x=!0);}catch(S){v=!0,w=S}finally{try{x||C.return==null||C.return()}finally{if(v)throw w}}return b}}(h,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(h,m,g){var b=l(h.toString().split("."),2),y=b[0],b=b[1];return g===void 0?(y=y.padStart(m,"0"),b?y+"."+b:y):(y=(h=l(h.toFixed(g).toString().split("."),2))[0],b=h[1],y=y.padStart(m,"0"),b===void 0?y:y+"."+b)}function c(b,m){var g=(b=b.toString()).indexOf("."),y=g!==-1?b.substring(g):"",b=(b=g!==-1?b.substring(0,g):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(m===0)y="";else if(m!==void 0)if(m>y.length)for(var x=m-(y+=g===-1?".":"").length+1,v=0;v<x;v++)y+="0";else y=y.substring(0,m+1);return b+y}function f(h){return 0<parseFloat(h)?"+".concat(h.toString()):h.toString()}function d(h){return 0<=parseFloat(h)?" ".concat(h.toString()):h.toString()}o("../core/friendly_errors/validate_params"),o("../core/friendly_errors/file_errors"),o("../core/friendly_errors/fes_core"),a.default.prototype.join=function(h,m){return a.default._validateParameters("join",arguments),h.join(m)},a.default.prototype.match=function(h,m){return a.default._validateParameters("match",arguments),h.match(m)},a.default.prototype.matchAll=function(h,m){a.default._validateParameters("matchAll",arguments);for(var g=new RegExp(m,"g"),y=g.exec(h),b=[];y!==null;)b.push(y),y=g.exec(h);return b},a.default.prototype.nf=function(h,m,g){return a.default._validateParameters("nf",arguments),h instanceof Array?h.map(function(y){return u(y,m,g)}):Object.prototype.toString.call(h)==="[object Arguments]"?h.length===3?this.nf(h[0],h[1],h[2]):h.length===2?this.nf(h[0],h[1]):this.nf(h[0]):u(h,m,g)},a.default.prototype.nfc=function(h,m){return a.default._validateParameters("nfc",arguments),h instanceof Array?h.map(function(g){return c(g,m)}):c(h,m)},a.default.prototype.nfp=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("nfp",m);var y=a.default.prototype.nf.apply(this,m);return y instanceof Array?y.map(f):f(y)},a.default.prototype.nfs=function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];a.default._validateParameters("nfs",m);var y=a.default.prototype.nf.apply(this,m);return y instanceof Array?y.map(d):d(y)},a.default.prototype.split=function(h,m){return a.default._validateParameters("split",arguments),h.split(m)},a.default.prototype.splitTokens=function(h,m){var g,y;return a.default._validateParameters("splitTokens",arguments),y=m!==void 0?(y=/\]/g.exec(m=m),(g=/\[/g.exec(m))&&y?(m=m.slice(0,y.index)+m.slice(y.index+1),g=/\[/g.exec(m),m=m.slice(0,g.index)+m.slice(g.index+1),new RegExp("[\\[".concat(m,"\\]]"),"g")):y?(m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[".concat(m,"\\]]"),"g")):g?(m=m.slice(0,g.index)+m.slice(g.index+1),new RegExp("[".concat(m,"\\[]"),"g")):new RegExp("[".concat(m,"]"),"g")):/\s/g,h.split(y).filter(function(b){return b})},a.default.prototype.trim=function(h){return a.default._validateParameters("trim",arguments),h instanceof Array?h.map(this.trim):h.trim()};var p=a.default;s.default=p},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(o,i,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o},o.default.prototype.day=function(){return new Date().getDate()},o.default.prototype.hour=function(){return new Date().getHours()},o.default.prototype.minute=function(){return new Date().getMinutes()},o.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},o.default.prototype.month=function(){return new Date().getMonth()+1},o.default.prototype.second=function(){return new Date().getSeconds()},o.default.prototype.year=function(){return new Date().getFullYear()},o=o.default,s.default=o},{"../core/main":280}],323:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.number.to-fixed"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(p=o("../core/main"))&&p.__esModule?p:{default:p},c=(o("./p5.Geometry"),function(h){if(h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=b?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(o("../core/constants")));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}u.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},u.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},u.default.prototype.buildGeometry=function(h){return this._renderer.buildGeometry(h)},u.default.prototype.freeGeometry=function(h){this._renderer._freeBuffers(h.gid)},u.default.prototype.plane=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),u.default._validateParameters("plane",arguments),"plane|".concat(y,"|").concat(b));return this._renderer.geometryInHash(x)||((h=new u.default.Geometry(y,b,function(){for(var v,w,_=0;_<=this.detailY;_++)for(var C=_/this.detailY,S=0;S<=this.detailX;S++)v=S/this.detailX,w=new u.default.Vector(v-.5,C-.5,0),this.vertices.push(w),this.uvs.push(v,C)})).computeFaces().computeNormals(),y<=1&&b<=1?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,h)),this._renderer.drawBuffersScaled(x,m,g,1),this},u.default.prototype.box=function(h,m,g,y,b){this._assert3d("box"),u.default._validateParameters("box",arguments),h===void 0&&(h=50),m===void 0&&(m=h),g===void 0&&(g=m);var x,v=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,v=(b===void 0&&(b=v?1:4),"box|".concat(y=y===void 0?v?1:4:y,"|").concat(b));return this._renderer.geometryInHash(v)||((x=new u.default.Geometry(y,b,function(){var w=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(_,C){for(var C=4*C,S=0;S<4;S++){var E=_[S],E=new u.default.Vector((2*(1&E)-1)/2,((2&E)-1)/2,((4&E)/2-1)/2);w.vertices.push(E),w.uvs.push(1&S,(2&S)/2)}w.faces.push([C,1+C,2+C]),w.faces.push([2+C,1+C,3+C])})})).computeNormals(),y<=4&&b<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,x)),this._renderer.drawBuffersScaled(v,h,m,g),this},u.default.prototype.sphere=function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),u.default._validateParameters("sphere",arguments),this.ellipsoid(h,h,h,m,g),this};function d(h,m,g,y,b,x,v){h=h<=0?1:h,m=m<0?0:m,g=g<=0?h:g,y=y<3?3:y;for(var w,_,C=(x=x===void 0||x)?-2:0,S=(b=b<1?1:b)+((v=v===void 0?m!==0:v)?2:0),E=Math.atan2(h-m,g),A=Math.sin(E),N=Math.cos(E),k=C;k<=S;++k){var R=k/b,I=g*R,L=void 0,L=k<0?(R=I=0,h):b<k?(I=g,R=1,m):h+(m-h)*R;for(k!==-2&&k!==b+2||(L=0),I-=g/2,w=0;w<y;++w){var j=w/(y-1),V=2*Math.PI*j,M=Math.sin(V),V=Math.cos(V),G=(this.vertices.push(new u.default.Vector(M*L,I,V*L)),void 0),G=k<0?new u.default.Vector(0,-1,0):b<k&&m?new u.default.Vector(0,1,0):new u.default.Vector(M*N,A,V*N);this.vertexNormals.push(G),this.uvs.push(j,R)}}var U=0;if(x){for(_=0;_<y;++_)this.faces.push([U+_,U+y+(_+1)%y,U+y+_]);U+=2*y}for(k=0;k<b;++k){for(w=0;w<y;++w){var Y=(w+1)%y;this.faces.push([U+w,U+Y,U+y+Y]),this.faces.push([U+w,U+y+Y,U+y+w])}U+=y}if(v)for(U+=y,w=0;w<y;++w)this.faces.push([U+w,U+(w+1)%y,U+y])}u.default.prototype.cylinder=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],w=(this._assert3d("cylinder"),u.default._validateParameters("cylinder",arguments),"cylinder|".concat(y,"|").concat(b,"|").concat(x,"|").concat(v));return this._renderer.geometryInHash(w)||(h=new u.default.Geometry(y,b),d.call(h,1,1,1,y,b,x,v),y<=24&&b<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,h)),this._renderer.drawBuffersScaled(w,m,g,m),this},u.default.prototype.cone=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],v=(this._assert3d("cone"),u.default._validateParameters("cone",arguments),"cone|".concat(y,"|").concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||(h=new u.default.Geometry(y,b),d.call(h,1,0,1,y,b,x,!1),y<=24&&b<=16?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,m,g,m),this},u.default.prototype.ellipsoid=function(){var h,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:m,b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,v=(this._assert3d("ellipsoid"),u.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(b,"|").concat(x));return this._renderer.geometryInHash(v)||((h=new u.default.Geometry(b,x,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,C=Math.PI*_-Math.PI/2,S=Math.cos(C),E=Math.sin(C),A=0;A<=this.detailX;A++){var N=A/this.detailX,R=2*Math.PI*N,k=Math.cos(R),R=Math.sin(R),R=new u.default.Vector(S*R,E,S*k);this.vertices.push(R),this.vertexNormals.push(R),this.uvs.push(N,_)}})).computeFaces(),b<=24&&x<=24?h._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(v,h)),this._renderer.drawBuffersScaled(v,m,g,y),this},u.default.prototype.torus=function(h,v,g,y){if(this._assert3d("torus"),u.default._validateParameters("torus",arguments),h===void 0)h=50;else if(!h)return;if(v===void 0)v=10;else if(!v)return;g===void 0&&(g=24),y===void 0&&(y=16);var b,x=(v/h).toPrecision(4),v="torus|".concat(x,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(v)||((b=new u.default.Geometry(g,y,function(){for(var w=0;w<=this.detailY;w++)for(var _=w/this.detailY,C=2*Math.PI*_,S=Math.cos(C),E=Math.sin(C),A=1+x*S,N=0;N<=this.detailX;N++){var k=N/this.detailX,R=2*Math.PI*k,L=Math.cos(R),R=Math.sin(R),I=new u.default.Vector(A*L,A*R,x*E),L=new u.default.Vector(S*L,S*R,E);this.vertices.push(I),this.vertexNormals.push(L),this.uvs.push(k,_)}})).computeFaces(),g<=24&&y<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,b)),this._renderer.drawBuffersScaled(v,h,h,h),this},u.default.RendererGL.prototype.point=function(h,m){var g=[];return g.push(new u.default.Vector(h,m,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(g,this.immediateMode.buffers.point),this},u.default.RendererGL.prototype.triangle=function(v){var m=v[0],g=v[1],y=v[2],b=v[3],x=v[4],v=v[5],w=(this.geometryInHash("tri")||((w=new u.default.Geometry(1,1,function(){var S=[];S.push(new u.default.Vector(0,0,0)),S.push(new u.default.Vector(1,0,0)),S.push(new u.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=S,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var _=Math.sign(m*b-y*g+y*v-x*b+x*g-m*v),C=new u.default.Matrix([y-m,b-g,0,0,x-m,v-g,0,0,0,0,_,0,m,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=C,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},u.default.RendererGL.prototype.ellipse=function(h){this.arc(h[0],h[1],h[2],h[3],0,c.TWO_PI,c.OPEN,h[4])},u.default.RendererGL.prototype.arc=function(){var h,m=arguments.length<=0?void 0:arguments[0],g=arguments.length<=1?void 0:arguments[1],y=arguments.length<=2?void 0:arguments[2],b=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],v=arguments.length<=5?void 0:arguments[5],w=arguments.length<=6?void 0:arguments[6],_=(arguments.length<=7?void 0:arguments[7])||25,C=(Math.abs(v-x)>=c.TWO_PI?"".concat(S="ellipse","|"):"".concat(S="arc","|").concat(x,"|").concat(v,"|").concat(w,"|")).concat(_,"|"),S=(this.geometryInHash(C)||((h=new u.default.Geometry(_,1,function(){if(x.toFixed(10)!==v.toFixed(10)){w!==c.PIE&&w!==void 0||(this.vertices.push(new u.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var E=0;E<=_;E++){var N=(v-x)*(E/_)+x,A=.5+Math.cos(N)/2,N=.5+Math.sin(N)/2;this.vertices.push(new u.default.Vector(A,N,0)),this.uvs.push([A,N]),E<_-1&&(this.faces.push([0,E+1,E+2]),this.edges.push([E+1,E+2]))}switch(w){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case c.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case c.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),_<=50?h._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(S," with more than 50 detail")),this.createBuffers(C,h)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(C)}finally{this.uMVMatrix=S}return this},u.default.RendererGL.prototype.rect=function(h){var m=h[0],g=h[1],y=h[2],b=h[3];if(h[4]===void 0){var w=this._pInst._glAttributes.perPixelLighting,x=h[4]||(w?1:24),v=h[5]||(w?1:16),w="rect|".concat(x,"|").concat(v),_=(this.geometryInHash(w)||((_=new u.default.Geometry(x,v,function(){for(var G=0;G<=this.detailY;G++)for(var U=G/this.detailY,Y=0;Y<=this.detailX;Y++){var X=Y/this.detailX,pe=new u.default.Vector(X,U,0);this.vertices.push(pe),this.uvs.push(X,U)}0<x&&0<v&&(this.edges=[[0,x],[x,(x+1)*(v+1)-1],[(x+1)*(v+1)-1,(x+1)*v],[(x+1)*v,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(w,_)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,g,0]),this.uMVMatrix.scale(y,b,1),this.drawBuffers(w)}finally{this.uMVMatrix=_}}else{var w=h[4],_=h[5]===void 0?w:h[5],C=h[6]===void 0?_:h[6],h=h[7]===void 0?C:h[7],R=y,S=b,N=((R+=m)<m&&(N=m,m=R,R=N),(S+=g)<g&&(N=g,g=S,S=N),Math.min((R-m)/2,(S-g)/2)),E=(N<w&&(w=N),N<_&&(_=N),N<C&&(C=N),N<h&&(h=N),m),A=g,N=R,m=S,k=(this.beginShape(),_!==0?(this.vertex(N-_,A),this.quadraticVertex(N,A,N,A+_)):this.vertex(N,A),C!==0?(this.vertex(N,m-C),this.quadraticVertex(N,m,N-C,m)):this.vertex(N,m),h!==0?(this.vertex(E+h,m),this.quadraticVertex(E,m,E,m-h)):this.vertex(E,m),w!==0?(this.vertex(E,A+w),this.quadraticVertex(E,A,E+w,A)):this.vertex(E,A),!(this.immediateMode.geometry.uvs.length=0)),g=!1,R=void 0;try{for(var I,L=this.immediateMode.geometry.vertices[Symbol.iterator]();!(k=(I=L.next()).done);k=!0){var j=I.value,M=(j.x-E)/y,V=(j.y-A)/b;this.immediateMode.geometry.uvs.push(M,V)}}catch($){g=!0,R=$}finally{try{k||L.return==null||L.return()}finally{if(g)throw R}}this.endShape(c.CLOSE)}return this},u.default.RendererGL.prototype.quad=function(h,m,g,y,b,x,v,w,_,C,S,E){var A=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,N=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,k="quad|".concat(h,"|").concat(m,"|").concat(g,"|").concat(y,"|").concat(b,"|").concat(x,"|").concat(v,"|").concat(w,"|").concat(_,"|").concat(C,"|").concat(S,"|").concat(E,"|").concat(A,"|").concat(N);if(!this.geometryInHash(k)){var R=new u.default.Geometry(A,N,function(){for(var Y=1/(this.detailX-1),X=1/(this.detailY-1),pe=0;pe<this.detailY;pe++)for(var $=0;$<this.detailX;$++){var O=$*Y,z=pe*X;this.vertices.push(new u.default.Vector((1-O)*((1-z)*h+z*C)+O*((1-z)*y+z*v),(1-O)*((1-z)*m+z*S)+O*((1-z)*b+z*w),(1-O)*((1-z)*g+z*E)+O*((1-z)*x+z*_))),this.uvs.push([O,z])}});R.faces=[];for(var I=0;I<N-1;I++)for(var L=0;L<A-1;L++){var j=L+I*A,M=L+1+(I+1)*A,V=L+(I+1)*A;R.faces.push([j,L+1+I*A,M]),R.faces.push([j,M,V])}R.computeNormals();for(var G=[R.edges.length=0,2,3,1],U=0;U<G.length;U++)R.edges.push([G[U],G[(U+1)%G.length]]);R._edgesToVertices(),this.createBuffers(k,R)}return this.drawBuffers(k),this},u.default.RendererGL.prototype.bezier=function(h,m,g,y,b,x,v,w,_,C,S,E){arguments.length===8&&(S=w,C=v,w=x,v=b,b=y,y=g,g=x=_=E=0);var A=this._pInst._bezierDetail||20;this.beginShape();for(var N=0;N<=A;N++){var k=Math.pow(1-N/A,3),R=N/A*3*Math.pow(1-N/A,2),I=3*Math.pow(N/A,2)*(1-N/A),L=Math.pow(N/A,3);this.vertex(h*k+y*R+v*I+C*L,m*k+b*R+w*I+S*L,g*k+x*R+_*I+E*L)}return this.endShape(),this},u.default.RendererGL.prototype.curve=function(h,m,g,y,b,x,v,w,_,C,S,E){arguments.length===8&&(C=v,S=w,v=b,w=y,b=y=g,g=x=_=E=0);var A=this._pInst._curveDetail;this.beginShape();for(var N=0;N<=A;N++){var k=.5*Math.pow(N/A,3),R=.5*Math.pow(N/A,2),I=N/A*.5;this.vertex(k*(3*y-h-3*v+C)+R*(2*h-5*y+4*v-C)+I*(-h+v)+2*y*.5,k*(3*b-m-3*w+S)+R*(2*m-5*b+4*w-S)+I*(-m+w)+2*b*.5,k*(3*x-g-3*_+E)+R*(2*g-5*x+4*_-E)+I*(-g+_)+2*x*.5)}return this.endShape(),this},u.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},u.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,S=0,E=1,A=0;S<1;){if(x=parseFloat(S.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(x),E.toFixed(6)===C.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(S.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(x);break}S+=C,E-=C,++A}}for(var N=this._lookUpTableBezier.length,k=[],R=0;R<4;R++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[3]=this.curFillColor.slice();var I=[];for(R=0;R<4;R++)I.push([]);if(I[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),I[3]=this.curStrokeColor.slice(),_===6){this.isBezier=!0;var v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],L=Math.hypot(v[0]-v[1],w[0]-w[1]),M=Math.hypot(v[1]-v[2],w[1]-w[2]),j=Math.hypot(v[2]-v[3],w[2]-w[3]),M=L+M+j;for(L/=M,j/=M,b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[3][b]*L),k[2].push(k[0][b]*j+k[3][b]*(1-j)),I[1].push(I[0][b]*(1-L)+I[3][b]*L),I[2].push(I[0][b]*j+I[3][b]*(1-j));for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],R=h=m=0;R<4;R++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][R]*k[R][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][R]*I[R][b];h+=v[R]*this._lookUpTableBezier[y][R],m+=w[R]*this._lookUpTableBezier[y][R]}this.vertex(h,m)}this.curFillColor=k[3],this.curStrokeColor=I[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(_===9){this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var V=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],G=Math.hypot(v[0]-v[1],w[0]-w[1],V[0]-V[1]),M=Math.hypot(v[1]-v[2],w[1]-w[2],V[1]-V[2]),U=Math.hypot(v[2]-v[3],w[2]-w[3],V[2]-V[3]),_=G+M+U;for(G/=_,U/=_,b=0;b<4;b++)k[1].push(k[0][b]*(1-G)+k[3][b]*G),k[2].push(k[0][b]*U+k[3][b]*(1-U)),I[1].push(I[0][b]*(1-G)+I[3][b]*G),I[2].push(I[0][b]*U+I[3][b]*(1-U));for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],R=h=m=g=0;R<4;R++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[y][R]*k[R][b],this.curStrokeColor[b]+=this._lookUpTableBezier[y][R]*I[R][b];h+=v[R]*this._lookUpTableBezier[y][R],m+=w[R]*this._lookUpTableBezier[y][R],g+=V[R]*this._lookUpTableBezier[y][R]}this.vertex(h,m,g)}this.curFillColor=k[3],this.curStrokeColor=I[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},u.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var C=1/this._lutQuadraticDetail,S=0,E=1,A=0;S<1;){if(x=parseFloat(S.toFixed(6)),this._lookUpTableQuadratic[A]=this._quadraticCoefficients(x),E.toFixed(6)===C.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(S.toFixed(6)),++A,this._lookUpTableQuadratic[A]=this._quadraticCoefficients(x);break}S+=C,E-=C,++A}}for(var N=this._lookUpTableQuadratic.length,k=[],R=0;R<3;R++)k.push([]);k[0]=this.immediateMode.geometry.vertexColors.slice(-4),k[2]=this.curFillColor.slice();var I=[];for(R=0;R<3;R++)I.push([]);if(I[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),I[2]=this.curStrokeColor.slice(),_===4){this.isQuadratic=!0;var v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],L=Math.hypot(v[0]-v[1],w[0]-w[1]);for(L/=L+Math.hypot(v[1]-v[2],w[1]-w[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-L)+k[2][b]*L),I[1].push(I[0][b]*(1-L)+I[2][b]*L);for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],R=h=m=0;R<3;R++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][R]*k[R][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][R]*I[R][b];h+=v[R]*this._lookUpTableQuadratic[y][R],m+=w[R]*this._lookUpTableQuadratic[y][R]}this.vertex(h,m)}this.curFillColor=k[2],this.curStrokeColor=I[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(_===6){this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var j=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],M=Math.hypot(v[0]-v[1],w[0]-w[1],j[0]-j[1]);for(M/=M+Math.hypot(v[1]-v[2],w[1]-w[2],j[1]-j[2]),b=0;b<4;b++)k[1].push(k[0][b]*(1-M)+k[2][b]*M),I[1].push(I[0][b]*(1-M)+I[2][b]*M);for(y=0;y<N;y++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],R=h=m=g=0;R<3;R++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[y][R]*k[R][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[y][R]*I[R][b];h+=v[R]*this._lookUpTableQuadratic[y][R],m+=w[R]*this._lookUpTableQuadratic[y][R],g+=j[R]*this._lookUpTableQuadratic[y][R]}this.vertex(h,m,g)}this.curFillColor=k[2],this.curStrokeColor=I[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},u.default.RendererGL.prototype.curveVertex=function(){var h,m,g,y,b,x,v=[],w=[],_=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,S=0,E=1,A=0;S<1;){if(x=parseFloat(S.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(x),E.toFixed(6)===C.toFixed(6)){x=parseFloat(E.toFixed(6))+parseFloat(S.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(x);break}S+=C,E-=C,++A}}var N=this._lookUpTableBezier.length;if(_===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<N;b++)m=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],this.vertex(m,g);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}}else if(_===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),h=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<N;b++)m=v[0]*this._lookUpTableBezier[b][0]+v[1]*this._lookUpTableBezier[b][1]+v[2]*this._lookUpTableBezier[b][2]+v[3]*this._lookUpTableBezier[b][3],g=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],y=h[0]*this._lookUpTableBezier[b][0]+h[1]*this._lookUpTableBezier[b][1]+h[2]*this._lookUpTableBezier[b][2]+h[3]*this._lookUpTableBezier[b][3],this.vertex(m,g,y);for(b=0;b<_;b++)this.immediateMode._curveVertex.shift()}},u.default.RendererGL.prototype.image=function(h,E,g,A,b,x,v,w,_){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(h),this._pInst.textureMode(c.NORMAL);var C=0,S=(E<=h.width&&(C=E/h.width),1),E=(E+A<=h.width&&(S=(E+A)/h.width),0),A=(g<=h.height&&(E=g/h.height),1);g+b<=h.height&&(A=(g+b)/h.height),this.beginShape(),this.vertex(x,v,0,C,E),this.vertex(x+w,v,0,S,E),this.vertex(x+w,v+_,0,S,A),this.vertex(x,v+_,0,C,A),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var p=u.default;s.default=p},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.every"),o("core-js/modules/es.array.map"),o("core-js/modules/es.object.assign"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(m,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}var h=function(){function m(x){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new u.default.Matrix,x.uMVMatrix=new u.default.Matrix,this.geometry=new u.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(m.nextGeometryId),m.nextGeometryId++,this.hasTransform=!1}var g,y,b;return g=m,(y=[{key:"transformVertices",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uMVMatrix.multiplyPoint(w)}):x}},{key:"transformNormals",value:function(x){var v=this;return this.hasTransform?x.map(function(w){return v.renderer.uNMatrix.multiplyVec3(w)}):x}},{key:"addGeometry",value:function(x){for(var v,w=this,_=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(S,E){return S===w.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),C=((v=this.geometry.vertices).push.apply(v,d(this.transformVertices(x.vertices))),(v=this.geometry.vertexNormals).push.apply(v,d(this.transformNormals(x.vertexNormals))),(v=this.geometry.uvs).push.apply(v,d(x.uvs)),this.renderer._doFill&&(v=this.geometry.faces).push.apply(v,d(x.faces.map(function(S){return S.map(function(E){return E+_})}))),this.renderer._doStroke&&(v=this.geometry.edges).push.apply(v,d(x.edges.map(function(S){return S.map(function(E){return E+_})}))),d(x.vertexColors));C.length<4*x.vertices.length;)C.push.apply(C,d(this.renderer.curFillColor));(v=this.geometry.vertexColors).push.apply(v,d(C))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,v=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(v===c.TRIANGLE_STRIP||v===c.QUAD_STRIP)for(var _=2;_<x.vertices.length;_++)_%2==0?w.push([_,_-1,_-2]):w.push([_,_-2,_-1]);else if(v===c.TRIANGLE_FAN)for(var C=2;C<x.vertices.length;C++)w.push([0,C-1,C]);else for(var S=0;S<x.vertices.length;S+=3)w.push([S,S+1,S+2]);this.addGeometry(Object.assign({},x,{faces:w}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&p(g.prototype,y),b&&p(g,b),m}();h.nextGeometryId=0,s.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.math.sign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=o("../core/main"))&&d.__esModule?d:{default:d},u=function(p){if(p&&p.__esModule)return p;if(p===null||f(p)!=="object"&&typeof p!="function")return{default:p};var h=c();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function c(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,c=function(){return p},p)}function f(p){return(f=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}l.default.prototype.orbitControl=function(p,h,m,_){var y=this,b=(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);p===void 0&&(p=1),h===void 0&&(h=p),m===void 0&&(m=1),f(_)!=="object"&&(_={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var S=_.disableTouchActions;this.touchActionsDisabled===!0||S!==void 0&&!S||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,v,w,S=_.freeRotation,_=S!==void 0&&S,C=[],S=(this.touches.forEach(function(L){y._renderer.prevTouches.forEach(function(j){L.id===j.id&&(j={x:L.x,y:L.y,px:j.x,py:j.y},C.push(j))})}),this._renderer.prevTouches=this.touches,0),E=0,A=0,N=0,k=0,R=this.height<this.width?this.height:this.width,I=!1;return 0<C.length?(I=0<C[0].x&&C[0].x<this.width&&0<C[0].y&&C[0].y<this.height,C.length===1?(E=-p*((x=C[0]).x-x.px)/R,A=h*(x.y-x.py)/R):(x=C[0],v=C[1],S=-(Math.hypot(x.x-v.x,x.y-v.y)-Math.hypot(x.px-v.px,x.py-v.py))*m*4e-4,N=.5*(x.x+v.x)-.5*(x.px+v.px),k=.5*(x.y+v.y)-.5*(x.py+v.py)),0<this.touches.length?I&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(I=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(S=Math.sign(this._mouseWheelDeltaY)*m,S*=.01,this._mouseWheelDeltaY=0,I&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(E=-p*this.movedX/R,A=h*this.movedY/R):this.mouseButton===this.RIGHT&&(N=this.movedX,k=this.movedY*b.yScale),I&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),S!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=S),.001<Math.abs(this._renderer.zoomVelocity)?(_?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,E===0&&A===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*E,.6*A),1e-6<this._renderer.rotateVelocity.magSq()?(_?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),N===0&&k===0||!this._renderer.executeRotateAndMove||(x=2*N/this.width,v=2*-k/this.height,this._renderer.moveVelocity.add(.15*x,.15*v)),1e-6<this._renderer.moveVelocity.magSq()?(m=b._getLocalAxes(),p=b.eyeX-b.centerX,h=b.eyeY-b.centerY,R=b.eyeZ-b.centerZ,I=Math.sqrt(p*p+h*h+R*R),S=new l.default.Vector(b.centerX,b.centerY,b.centerZ),S=b.cameraMatrix.multiplyPoint(S),(S=this._renderer.uPMatrix.multiplyAndNormalizePoint(S)).x-=this._renderer.moveVelocity.x,S.y-=this._renderer.moveVelocity.y,A=(E=this._renderer.uPMatrix.mat4)[15]===0?(w=(E[8]+S.x)/E[0]*I,(E[9]+S.y)/E[5]*I):(w=(S.x-E[12])/E[0],(S.y-E[13])/E[5]),b.setPosition(b.eyeX+w*m.x[0]+A*m.y[0],b.eyeY+w*m.x[1]+A*m.y[1],b.eyeZ+w*m.x[2]+A*m.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];l.default._validateParameters("debugMode",h);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);h[0]===u.GRID?this.registerMethod("post",this._grid(h[1],h[2],h[3],h[4],h[5])):h[0]===u.AXES?this.registerMethod("post",this._axesIcon(h[1],h[2],h[3],h[4])):(this.registerMethod("post",this._grid(h[0],h[1],h[2],h[3],h[4])),this.registerMethod("post",this._axesIcon(h[5],h[6],h[7],h[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1)},l.default.prototype._grid=function(p,h,m,g,y){p===void 0&&(p=this.width/2),h===void 0&&(h=Math.round(p/30)<4?4:Math.round(p/30)),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0);var b=p/h,x=p/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var v=0;v<=h;v++)this.beginShape(this.LINES),this.vertex(-x+m,g,v*b-x+y),this.vertex(x+m,g,v*b-x+y),this.endShape();for(var w=0;w<=h;w++)this.beginShape(this.LINES),this.vertex(w*b-x+m,g,-x+y),this.vertex(w*b-x+m,g,x+y),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(p,h,m,g){return p===void 0&&(p=40<this.width/20?this.width/20:40),h===void 0&&(h=-this.width/4),m===void 0&&(m=h),g===void 0&&(g=h),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h+p,m,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h,m+p,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(h,m,g),this.vertex(h,m,g+p),this.endShape(),this.pop()}};var d=l.default;s.default=d},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(o,i,s){"use strict";o("core-js/modules/es.array.filter"),o("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};a.default.prototype.ambientLight=function(l,u,c,f){this._assert3d("ambientLight"),a.default._validateParameters("ambientLight",arguments);var d=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(d._array[0],d._array[1],d._array[2]),this._renderer._enableLighting=!0,this},a.default.prototype.specularColor=function(l,u,c){this._assert3d("specularColor"),a.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},a.default.prototype.directionalLight=function(l,y,g,f,d,p){this._assert3d("directionalLight"),a.default._validateParameters("directionalLight",arguments),l=l instanceof a.default.Color?l:this.color(l,y,g);var h,m,y=arguments[arguments.length-1],g=typeof y=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=y.x,m=y.y,y.z),y=Math.sqrt(h*h+m*m+g*g);return this._renderer.directionalLightDirections.push(h/y,m/y,g/y),this._renderer.directionalLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.pointLight=function(l,g,y,f,d,p){this._assert3d("pointLight"),a.default._validateParameters("pointLight",arguments),l=l instanceof a.default.Color?l:this.color(l,g,y);var h,m,g=arguments[arguments.length-1],y=typeof g=="number"?(h=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(h=g.x,m=g.y,g.z);return this._renderer.pointLightPositions.push(h,m,y),this._renderer.pointLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},a.default.prototype.imageLight=function(l){this._renderer.activeImageLight=l,this._renderer._enableLighting=!0},a.default.prototype.panorama=function(l){this.filter(this._renderer._getSphereMapping(l))},a.default.prototype.lights=function(){this._assert3d("lights");var l=this.color("rgb(128,128,128)");return this.ambientLight(l),this.directionalLight(l,0,0,-1),this},a.default.prototype.lightFalloff=function(l,u,c){return this._assert3d("lightFalloff"),a.default._validateParameters("lightFalloff",arguments),l<0&&(l=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),l===0&&u===0&&c===0&&(l=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=l,this._renderer.linearAttenuation=u,this._renderer.quadraticAttenuation=c,this},a.default.prototype.spotLight=function(l,u,c,f,d,p,h,m,g,y,b){this._assert3d("spotLight"),a.default._validateParameters("spotLight",arguments);var x,v,w,_=arguments.length;switch(_){case 11:case 10:x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(h,m,g);break;case 9:l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),w=new a.default.Vector(d,p,h),y=m,b=g):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=new a.default.Vector(d,p,h),y=m,b=g):h instanceof a.default.Vector?(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=h,y=m,b=g):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),w=new a.default.Vector(h,m,g));break;case 8:y=(w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,h)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,h)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),h),m);break;case 7:l instanceof a.default.Color&&u instanceof a.default.Vector?(x=l,v=u,w=new a.default.Vector(c,f,d),y=p,b=h):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p,b=h):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p,b=h):w=l instanceof a.default.Color?(x=l,v=new a.default.Vector(u,c,f),new a.default.Vector(d,p,h)):f instanceof a.default.Vector?(x=this.color(l,u,c),v=f,new a.default.Vector(d,p,h)):(x=this.color(l,u,c),v=new a.default.Vector(f,d,p),h);break;case 6:f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d,y=p):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d,y=p):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d),y=p);break;case 5:l instanceof a.default.Color&&u instanceof a.default.Vector&&c instanceof a.default.Vector?(x=l,v=u,w=c,y=f,b=d):f instanceof a.default.Vector&&d instanceof a.default.Vector?(x=this.color(l,u,c),v=f,w=d):l instanceof a.default.Color&&d instanceof a.default.Vector?(x=l,v=new a.default.Vector(u,c,f),w=d):l instanceof a.default.Color&&u instanceof a.default.Vector&&(x=l,v=u,w=new a.default.Vector(c,f,d));break;case 4:x=l,v=u,w=c,y=f;break;case 3:x=l,v=u,w=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(_<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(v.x,v.y,v.z),w.normalize(),this._renderer.spotLightDirections.push(w.x,w.y,w.z),y===void 0&&(y=Math.PI/3),b!==void 0&&b<1?(b=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):b===void 0&&(b=100),y=this._renderer._pInst._toRadians(y),this._renderer.spotLightAngle.push(Math.cos(y)),this._renderer.spotLightConc.push(b),this._renderer._enableLighting=!0,this},a.default.prototype.noLights=function(){this._assert3d("noLights");for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a.default._validateParameters("noLights",u),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},o=a.default,s.default=o},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(o,i,s){"use strict";function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.splice"),o("core-js/modules/es.object.assign"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.promise"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.match"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.trim"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o("regenerator-runtime/runtime");var l=(p=o("../core/main"))&&p.__esModule?p:{default:p};function u(h){return function(m){if(Array.isArray(m)){for(var g=0,y=new Array(m.length);g<m.length;g++)y[g]=m[g];return y}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(h,m,g,y,b,x,v){try{var w=h[x](v),_=w.value}catch(C){return void g(C)}w.done?m(_):Promise.resolve(_).then(y,b)}function f(h){return function(){var m=this,g=arguments;return new Promise(function(y,b){var x=h.apply(m,g);function v(_){c(x,y,b,v,w,"next",_)}function w(_){c(x,y,b,v,w,"throw",_)}v(void 0)})}}function d(h){return(d=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}o("./p5.Geometry"),l.default.prototype.loadModel=function(h,m){l.default._validateParameters("loadModel",arguments);var g,y,b=!1,x=!1,v=!1,w=h.slice(-4),_=(m&&d(m)==="object"?(b=m.normalize||!1,g=m.successCallback,y=m.failureCallback,w=m.fileType||w,x=m.flipU||!1,v=m.flipV||!1):typeof m=="boolean"?(b=m,g=arguments[2],y=arguments[3],arguments[4]!==void 0&&(w=arguments[4])):(g=typeof m=="function"?m:void 0,y=arguments[2],arguments[3]!==void 0&&(w=arguments[3])),new l.default.Geometry),C=(_.gid="".concat(h,"|").concat(b),this);function S(){return(S=f(regeneratorRuntime.mark(function A(N){var k,R,I,L;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:for(k=[],R=0;R<N.length;R++)(I=N[R].match(/^mtllib (.+)/))&&function(){var M="",V=I[1],G=h.split("/");M=1<G.length?(G.pop(),G.join("/")+"/"+V):V,k.push(function(){return E.apply(this,arguments)}(M).then(function(U){return U?(Y=C,X=M,new Promise(function(pe,$){var O=null,z={};Y.loadStrings(X,function(q){for(var ee=0;ee<q.length;++ee){var ae,Q=q[ee].trim().split(/\s+/);Q[0]==="newmtl"?(ae=Q[1],z[O=ae]={}):Q[0]==="Kd"?z[O].diffuseColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ka"?z[O].ambientColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="Ks"?z[O].specularColor=[parseFloat(Q[1]),parseFloat(Q[2]),parseFloat(Q[3])]:Q[0]==="map_Kd"&&(z[O].texturePath=Q[1])}pe(z)},$)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(M)),{});var Y,X}).catch(function(U){return console.warn("Error loading MTL file: ".concat(M),U),{}}))}();return j.prev=2,j.next=5,Promise.all(k);case 5:return L=j.sent,L=Object.assign.apply(Object,[{}].concat(u(L))),j.abrupt("return",L);case 10:return j.prev=10,j.t0=j.catch(2),j.abrupt("return",{});case 13:case"end":return j.stop()}},A,null,[[2,10]])}))).apply(this,arguments)}function E(){return(E=f(regeneratorRuntime.mark(function A(N){var k;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,fetch(N,{method:"HEAD"});case 3:return k=R.sent,R.abrupt("return",k.ok);case 7:return R.prev=7,R.t0=R.catch(0),R.abrupt("return",!1);case 10:case"end":return R.stop()}},A,null,[[0,7]])}))).apply(this,arguments)}return w.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(A){(function(N,k){if(function(R){for(var I=new DataView(R),L=[115,111,108,105,100],j=0;j<5;j++)if(function(M,V,G){for(var U=0,Y=M.length;U<Y;U++)if(M[U]!==V.getUint8(G+U,!1))return;return 1}(L,I,j))return;return 1}(k))(function(R,I){for(var L,j,M,V,G,U,Y,X=new DataView(I),pe=X.getUint32(80,!0),$=!1,O=0;O<70;O++)X.getUint32(O,!1)===1129270351&&X.getUint8(O+4)===82&&X.getUint8(O+5)===61&&($=!0,V=[],G=X.getUint8(O+6)/255,U=X.getUint8(O+7)/255,Y=X.getUint8(O+8)/255);for(var z=0;z<pe;z++){for(var q,ee=84+50*z,ae=X.getFloat32(ee,!0),Q=X.getFloat32(4+ee,!0),le=X.getFloat32(8+ee,!0),ie=($&&(q=X.getUint16(48+ee,!0),M=32768&q?(L=G,j=U,Y):(L=(31&q)/31,j=(q>>5&31)/31,(q>>10&31)/31)),new l.default.Vector(ae,Q,le)),Z=1;Z<=3;Z++){var ge=ee+12*Z,ge=new l.default.Vector(X.getFloat32(ge,!0),X.getFloat32(4+ge,!0),X.getFloat32(8+ge,!0));R.vertices.push(ge),R.vertexNormals.push(ie),$&&V.push(L,j,M)}R.faces.push([3*z,3*z+1,3*z+2]),R.uvs.push([0,0],[0,0],[0,0])}})(N,k);else{if(k=new DataView(k),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");k=new TextDecoder("utf-8").decode(k).split(`
`),function(R,I){for(var L,j,M="",V=[],G=0;G<I.length;++G){for(var U=I[G].trim(),Y=U.split(" "),X=0;X<Y.length;++X)Y[X]===""&&Y.splice(X,1);if(Y.length!==0)switch(M){case"":if(Y[0]!=="solid")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "solid"'));M="solid";break;case"solid":if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "facet normal"'));L=new l.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),R.vertexNormals.push(L,L,L),M="facet normal";break;case"facet normal":if(Y[0]!=="outer"||Y[1]!=="loop")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "outer loop"'));M="vertex";break;case"vertex":if(Y[0]==="vertex")j=new l.default.Vector(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])),R.vertices.push(j),R.uvs.push([0,0]),V.push(R.vertices.indexOf(j));else{if(Y[0]!=="endloop")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "vertex" or "endloop"'));R.faces.push(V),V=[],M="endloop"}break;case"endloop":if(Y[0]!=="endfacet")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "endfacet"'));M="endfacet";break;case"endfacet":if(Y[0]!=="endsolid"){if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(U),console.error('Invalid state "'.concat(Y[0],'", should be "endsolid" or "facet normal"'));L=new l.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),R.vertexNormals.push(L,L,L),M="facet normal"}break;default:console.error('Invalid state "'.concat(M,'"'))}}}(N,k)}})(_,A),b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),C._decrementPreload(),typeof g=="function"&&g(_)},y):w.match(/\.obj$/i)?this.loadStrings(h,function(){var A=f(regeneratorRuntime.mark(function N(k){var R;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,function(){return S.apply(this,arguments)}(k);case 3:R=I.sent,function(L,j){for(var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},V={v:[],vt:[],vn:[]},G={},U=null,Y=new Set,X=!1,pe=!1,$=0;$<j.length;++$){var O=j[$].trim().split(/\b\s+/);if(0<O.length){if(O[0]==="usemtl")U=O[1];else if(O[0]==="v"||O[0]==="vn"){var z=new l.default.Vector(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3]));V[O[0]].push(z)}else if(O[0]==="vt")z=[parseFloat(O[1]),1-parseFloat(O[2])],V[O[0]].push(z);else if(O[0]==="f")for(var q=3;q<O.length;++q){for(var ee=[],ae=[1,q-1,q],Q=0;Q<ae.length;++Q){for(var le,ie=O[ae[Q]],Z=ie.split("/"),ge=0;ge<Z.length;ge++)Z[ge]=parseInt(Z[ge])-1;G[ie]||(G[ie]={}),G[ie][U]===void 0?(le=L.vertices.length,L.vertices.push(V.v[Z[0]].copy()),L.uvs.push(V.vt[Z[1]]?V.vt[Z[1]].slice():[0,0]),L.vertexNormals.push(V.vn[Z[2]]?V.vn[Z[2]].copy():new l.default.Vector),G[ie][U]=le,ee.push(le),U&&M[U]&&M[U].diffuseColor&&Y.add(V.v[Z[0]])):ee.push(G[ie][U])}if(ee[0]!==ee[1]&&ee[0]!==ee[2]&&ee[1]!==ee[2])if(L.faces.push(ee),U&&M[U]&&M[U].diffuseColor){X=X=!0;for(var ne=M[U].diffuseColor,ye=0;ye<ee.length;ye++)L.vertexColors.push(ne[0]),L.vertexColors.push(ne[1]),L.vertexColors.push(ne[2])}else pe=!0}}}if(L.vertexNormals.length===0&&L.computeNormals(),X===pe)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(_,k,R),I.next=11;break;case 7:return I.prev=7,I.t0=I.catch(0),y?y(I.t0):l.default._friendlyError("Error during parsing: "+I.t0.message),I.abrupt("return");case 11:return I.prev=11,b&&_.normalize(),x&&_.flipU(),v&&_.flipV(),C._decrementPreload(),typeof g=="function"&&g(_),I.finish(11);case 18:case"end":return I.stop()}},N,null,[[0,7,11,18]])}));return function(N){return A.apply(this,arguments)}}(),y):(l.default._friendlyFileLoadError(3,h),y?y():l.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),_},l.default.prototype.model=function(h){this._assert3d("model"),l.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h.edges.length===0&&h._makeTriangleEdges(),h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var p=l.default;s.default=p},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}o("./p5.Texture"),u.default.prototype.loadShader=function(p,h,m,g){u.default._validateParameters("loadShader",arguments),g=g||console.error;function y(){x._decrementPreload(),m&&m(b)}var b=new u.default.Shader,x=this,v=!1,w=!1;return this.loadStrings(p,function(_){b._vertSrc=_.join(`
`),w=!0,v&&y()},g),this.loadStrings(h,function(_){b._fragSrc=_.join(`
`),v=!0,w&&y()},g),b},u.default.prototype.createShader=function(p,h){return u.default._validateParameters("createShader",arguments),new u.default.Shader(this._renderer,p,h)},u.default.prototype.createFilterShader=function(p){u.default._validateParameters("createFilterShader",arguments);var h=p.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,h=new u.default.Shader(this._renderer,h,p);return this._renderer.GL?h.ensureCompiledOnContext(this):h.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),h},u.default.prototype.shader=function(p){return this._assert3d("shader"),u.default._validateParameters("shader",arguments),p.ensureCompiledOnContext(this),p.isStrokeShader()?this._renderer.userStrokeShader=p:(this._renderer.userFillShader=p,this._renderer._useNormalMaterial=!1),this},u.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},u.default.prototype.texture=function(p){return this._assert3d("texture"),u.default._validateParameters("texture",arguments),p.gifProperties&&p._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=p,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.textureMode=function(p){p!==c.IMAGE&&p!==c.NORMAL?console.warn("You tried to set ".concat(p," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=p},u.default.prototype.textureWrap=function(p){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,m=(this._renderer.textureWrapX=p,this._renderer.textureWrapY=h,!0),g=!1,y=void 0;try{for(var b,x=this._renderer.textures.values()[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)b.value.setWrapMode(p,h)}catch(v){g=!0,y=v}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}},u.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var p=arguments.length,h=new Array(p),m=0;m<p;m++)h[m]=arguments[m];return u.default._validateParameters("normalMaterial",h),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},u.default.prototype.ambientMaterial=function(p,h,m){this._assert3d("ambientMaterial"),u.default._validateParameters("ambientMaterial",arguments);var g=u.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},u.default.prototype.emissiveMaterial=function(p,h,m,g){this._assert3d("emissiveMaterial"),u.default._validateParameters("emissiveMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=y._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.specularMaterial=function(p,h,m,g){this._assert3d("specularMaterial"),u.default._validateParameters("specularMaterial",arguments);var y=u.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=y._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},u.default.prototype.shininess=function(p){return this._assert3d("shininess"),u.default._validateParameters("shininess",arguments),this._renderer._useShininess=p=p<1?1:p,this},u.default.prototype.metalness=function(p){return this._assert3d("metalness"),p=1-Math.exp(-p/100),this._renderer._useMetalness=p,this},u.default.RendererGL.prototype._applyColorBlend=function(p,y){var m=this.GL,g=this.drawMode===c.TEXTURE,y=y||this.userFillShader||this.userStrokeShader||this.userPointShader||g||this.curBlendMode!==c.BLEND||p[p.length-1]<1||this._isErasing;return y!==this._isBlending&&(y||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?m.enable(m.BLEND):m.disable(m.BLEND),m.depthMask(!0),this._isBlending=y),this._applyBlendMode(),p},u.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var p=this.GL;switch(this.curBlendMode){case c.BLEND:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.ADD:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE);break;case c.REMOVE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_ALPHA);break;case c.MULTIPLY:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.DST_COLOR,p.ONE_MINUS_SRC_ALPHA);break;case c.SCREEN:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_COLOR);break;case c.EXCLUSION:p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.ONE_MINUS_DST_COLOR,p.ONE_MINUS_SRC_COLOR,p.ONE,p.ONE);break;case c.REPLACE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ZERO);break;case c.SUBTRACT:p.blendEquationSeparate(p.FUNC_REVERSE_SUBTRACT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case c.DARKEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var d=u.default;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(o,i,s){"use strict";o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.hypot"),o("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.prototype.camera=function(){var u;this._assert3d("camera");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("camera",f),(u=this._renderer._curCamera).camera.apply(u,f),this},a.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("perspective",f),(u=this._renderer._curCamera).perspective.apply(u,f),this},a.default.prototype.linePerspective=function(u){if(a.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof a.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(u===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=u},a.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("ortho",f),(u=this._renderer._curCamera).ortho.apply(u,f),this},a.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return a.default._validateParameters("frustum",f),(u=this._renderer._curCamera).frustum.apply(u,f),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new a.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},a.default.Camera=function(){function u(p){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix,this.yScale=1}var c,f,d;return c=u,(f=[{key:"perspective",value:function(y,h,m,g){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),h===void 0&&(h=this.defaultAspectRatio),m===void 0&&(m=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),m<=1e-4&&(m=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),g<m&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=h,this.cameraNear=m,this.cameraFar=g,this.projMatrix=a.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),b=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/h,0,0,0,0,-y*this.yScale,0,0,0,0,(g+m)*b,-1,0,0,2*g*m*b,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,S,m,g,y,b){E===void 0&&(E=-this._renderer.width/2),S===void 0&&(S=+this._renderer.width/2),m===void 0&&(m=-this._renderer.height/2),g===void 0&&(g=+this._renderer.height/2),y===void 0&&(y=0),b===void 0&&(b=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=y;var A=S-E,x=g-m,v=(this.cameraFar=b)-y,w=2/A,_=2/x*this.yScale,C=-2/v,S=-(S+E)/A,E=-(g+m)/x,A=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,0,0,C,0,S,E,A,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,S,m,g,y,b){E===void 0&&(E=.05*-this._renderer.width),S===void 0&&(S=.05*+this._renderer.width),m===void 0&&(m=.05*+this._renderer.height),g===void 0&&(g=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),this.cameraNear=y;var A=S-E,x=g-m,v=(this.cameraFar=b)-y,w=2*y/A,_=2*y/x*this.yScale,C=-2*b*y/v,S=(S+E)/A,E=(g+m)/x,A=-(b+y)/v;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-_,0,0,S,E,A,-1,0,0,C,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,h,m,g){var y=this.centerX,b=this.centerY,x=this.centerZ,v=(y-=this.eyeX,b-=this.eyeY,x-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),w=(v.rotate(this._renderer._pInst._toRadians(w),h,m,g),[y*v.mat4[0]+b*v.mat4[4]+x*v.mat4[8],y*v.mat4[1]+b*v.mat4[5]+x*v.mat4[9],y*v.mat4[2]+b*v.mat4[6]+x*v.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var h=this._getLocalAxes();this._rotateView(p,h.y[0],h.y[1],h.y[2])}},{key:"tilt",value:function(p){var h=this._getLocalAxes();this._rotateView(p,h.x[0],h.x[1],h.x[2])}},{key:"lookAt",value:function(p,h,m){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,h,m,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,h,m,g,y,b,x,v,w){return p===void 0&&(p=this.defaultEyeX,h=this.defaultEyeY,m=this.defaultEyeZ,g=p,y=h,v=1,w=x=b=0),this.eyeX=p,this.eyeY=h,this.eyeZ=m,g!==void 0&&(this.centerX=g,this.centerY=y,this.centerZ=b),x!==void 0&&(this.upX=x,this.upY=v,this.upZ=w),g=this._getLocalAxes(),this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1),y=-p,this.cameraMatrix.translate([y,-h,-m]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(g,y,m){var b=this._getLocalAxes(),g=[b.x[0]*g,b.x[1]*g,b.x[2]*g],y=[b.y[0]*y,b.y[1]*y,b.y[2]*y],b=[b.z[0]*m,b.z[1]*m,b.z[2]*m];this.camera(this.eyeX+g[0]+y[0]+b[0],this.eyeY+g[1]+y[1]+b[1],this.eyeZ+g[2]+y[2]+b[2],this.centerX+g[0]+y[0]+b[0],this.centerY+g[1]+y[1]+b[1],this.centerZ+g[2]+y[2]+b[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,h,m){var g=p-this.eyeX,y=h-this.eyeY,b=m-this.eyeZ;this.camera(p,h,m,this.centerX+g,this.centerY+y,this.centerZ+b,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var h=0,m=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];h<m.length;h++){var g=m[h];this[g]=p[g]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,h,m){var g,y,b,x,v,w,_,C,S,E,A,N,k,R,I,L,j,M;m===0?this.set(p):m===1?this.set(h):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(h.projMatrix.mat4[0]/p.projMatrix.mat4[0],m),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(h.projMatrix.mat4[5]/p.projMatrix.mat4[5],m),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new a.default.Vector(p.eyeX,p.eyeY,p.eyeZ),v=new a.default.Vector(h.eyeX,h.eyeY,h.eyeZ),L=new a.default.Vector(p.centerX,p.centerY,p.centerZ),M=new a.default.Vector(h.centerX,h.centerY,h.centerZ),b=a.default.Vector.dist(x,L),g=a.default.Vector.dist(v,M),g=b*Math.pow(g/b,m),b=a.default.Vector.sub(x,v),y=1,1e-6<(j=(R=x.copy().sub(v).sub(L).add(M)).magSq())&&(y=a.default.Vector.dot(b,R)/j,y=Math.max(0,Math.min(y,1))),b=a.default.Vector.lerp(a.default.Vector.lerp(x,L,y),a.default.Vector.lerp(v,M,y),m),R=p.cameraMatrix.createSubMatrix3x3(),j=h.cameraMatrix.createSubMatrix3x3(),x=R.row(2),L=j.row(2),v=R.row(1),M=j.row(1),p=new a.default.Vector,h=new a.default.Vector,w=new a.default.Vector,_=new a.default.Vector,1-(C=.5*((R=(j=j.mult3x3(R.copy().transpose3x3())).diagonal())[0]+R[1]+R[2]-1))<1e-7?(p.set(a.default.Vector.lerp(x,L,m)).normalize(),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),h.set(a.default.Vector.lerp(v,M,m)).normalize()):(L=1/(1-C),M=Math.max(R[0],R[1],R[2]),N=j.mat3[1]+j.mat3[3],k=j.mat3[2]+j.mat3[6],I=j.mat3[5]+j.mat3[7],M=M===R[0]?(E=.5*N*(L/=S=Math.sqrt((R[0]-C)*L)),A=.5*k*L,.5*(j.mat3[7]-j.mat3[5])/S):M===R[1]?(A=.5*I*(L/=E=Math.sqrt((R[1]-C)*L)),S=.5*N*L,.5*(j.mat3[2]-j.mat3[6])/E):(S=.5*k*(L/=A=Math.sqrt((R[2]-C)*L)),E=.5*I*L,.5*(j.mat3[3]-j.mat3[1])/A),N=m*Math.atan2(M,C),k=Math.cos(N),R=Math.sin(N),(M=new a.default.Matrix("mat3",[k+(I=1-k)*S*S,I*(L=S*E)+R*A,I*(j=A*S)-R*E,I*L-R*A,k+I*E*E,I*(m=E*A)+R*S,I*j+R*E,I*m-R*S,k+I*A*A])).multiplyVec3(x,p),w.set(p).mult(y*g).add(b),_.set(p).mult((y-1)*g).add(b),M.multiplyVec3(v,h)),this.camera(w.x,w.y,w.z,_.x,_.y,_.z,h.x,h.y,h.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var p=new a.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p.yScale=this.yScale,p}},{key:"_getLocalAxes",value:function(){var p=this.eyeX-this.centerX,h=this.eyeY-this.centerY,m=this.eyeZ-this.centerZ,x=Math.sqrt(p*p+h*h+m*m),x=(x!==0&&(p/=x,h/=x,m/=x),this.upX),g=(v=this.upY)*m-(w=this.upZ)*h,y=-x*m+w*p,b=x*h-v*p,x=h*b-m*y,v=-p*b+m*g,w=p*y-h*g,_=Math.sqrt(g*g+y*y+b*b),_=(_!==0&&(g/=_,y/=_,b/=_),Math.sqrt(x*x+v*v+w*w));return _!==0&&(x/=_,v/=_,w/=_),{x:[g,y,b],y:[x,v,w],z:[p,h,m]}}},{key:"_orbit",value:function(p,_,w){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(x,b),w=((g=(g*=Math.pow(10,w))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,a.default.Vector.dot(y,b))))+_),_=p;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),b.mult(Math.cos(w)),v.mult(Math.cos(_)*Math.sin(w)),x.mult(Math.sin(_)*Math.sin(w)),y.set(b).add(v).add(x),this.eyeX=g*y.x+this.centerX,this.eyeY=g*y.y+this.centerY,this.eyeZ=g*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,_,S){var y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,g=Math.hypot(y,b,x),y=new a.default.Vector(y,b,x).normalize(),b=new a.default.Vector(this.upX,this.upY,this.upZ),x=a.default.Vector.cross(b,y).normalize(),v=a.default.Vector.cross(y,x),E=Math.atan2(_,w),E=(v.mult(Math.sin(E)),x.mult(Math.cos(E)).add(v),Math.sqrt(w*w+_*_)),v=a.default.Vector.cross(y,x),w=((g=(g*=Math.pow(10,S))<this.cameraNear?this.cameraNear:g)>this.cameraFar&&(g=this.cameraFar),Math.cos(E)),_=Math.sin(E),S=b.dot(y),E=b.dot(x),C=S*w+E*_,S=-S*_+E*w,E=b.dot(v);b.x=C*y.x+S*x.x+E*v.x,b.y=C*y.y+S*x.y+E*v.y,b.z=C*y.z+S*x.z+E*v.z,x.mult(-_),y.mult(w).add(x).mult(g),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,b.x,b.y,b.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&l(c.prototype,f),d&&l(c,d),u}(),a.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix)},o=a.default.Camera,s.default=o},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(o,i,s){"use strict";o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.math.log2"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.DataArray=function(){function l(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,p=this,h=l;if(!(p instanceof h))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(d),this.initialLength=d}var u,c,f;return u=l,(c=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var d;this.length<this.data.length/2&&(d=1<<Math.ceil(Math.log2(this.length)),(d=new Float32Array(d)).set(this.data.subarray(0,this.length),0),this.data=d)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];this.ensureLength(this.length+p.length),this.data.set(p,this.length),this.length+=p.length}},{key:"slice",value:function(d,p){return this.data.slice(d,Math.min(p,this.length))}},{key:"subArray",value:function(d,p){return this.data.subarray(d,Math.min(p,this.length))}},{key:"ensureLength",value:function(d){for(;this.data.length<d;){var p=new Float32Array(2*this.data.length);p.set(this.data,0),this.data=p}}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.DataArray,s.default=o},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(A,i,s){"use strict";function a(N){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(N)}function l(N){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(k){return a(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":a(k)})(N)}A("core-js/modules/es.symbol"),A("core-js/modules/es.symbol.description"),A("core-js/modules/es.symbol.iterator"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.object.get-own-property-descriptor"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.reflect.construct"),A("core-js/modules/es.reflect.get"),A("core-js/modules/es.regexp.to-string"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.string.iterator"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint8-clamped-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),A("core-js/modules/es.weak-map"),A("core-js/modules/web.dom-collections.iterator"),A("core-js/modules/es.array.fill"),A("core-js/modules/es.array.includes"),A("core-js/modules/es.array.iterator"),A("core-js/modules/es.object.get-prototype-of"),A("core-js/modules/es.object.to-string"),A("core-js/modules/es.string.includes"),A("core-js/modules/es.typed-array.float32-array"),A("core-js/modules/es.typed-array.uint8-array"),A("core-js/modules/es.typed-array.uint8-clamped-array"),A("core-js/modules/es.typed-array.copy-within"),A("core-js/modules/es.typed-array.every"),A("core-js/modules/es.typed-array.fill"),A("core-js/modules/es.typed-array.filter"),A("core-js/modules/es.typed-array.find"),A("core-js/modules/es.typed-array.find-index"),A("core-js/modules/es.typed-array.for-each"),A("core-js/modules/es.typed-array.includes"),A("core-js/modules/es.typed-array.index-of"),A("core-js/modules/es.typed-array.iterator"),A("core-js/modules/es.typed-array.join"),A("core-js/modules/es.typed-array.last-index-of"),A("core-js/modules/es.typed-array.map"),A("core-js/modules/es.typed-array.reduce"),A("core-js/modules/es.typed-array.reduce-right"),A("core-js/modules/es.typed-array.reverse"),A("core-js/modules/es.typed-array.set"),A("core-js/modules/es.typed-array.slice"),A("core-js/modules/es.typed-array.some"),A("core-js/modules/es.typed-array.sort"),A("core-js/modules/es.typed-array.subarray"),A("core-js/modules/es.typed-array.to-locale-string"),A("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(E=A("../core/main"))&&E.__esModule?E:{default:E},c=function(N){if(N&&N.__esModule)return N;if(N===null||l(N)!=="object"&&typeof N!="function")return{default:N};var k=p();if(k&&k.has(N))return k.get(N);var R,I={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in N){var j;Object.prototype.hasOwnProperty.call(N,R)&&((j=L?Object.getOwnPropertyDescriptor(N,R):null)&&(j.get||j.set)?Object.defineProperty(I,R,j):I[R]=N[R])}return I.default=N,k&&k.set(N,I),I}(A("../core/constants")),f=A("./p5.Texture"),d=A("./p5.RendererGL");function p(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,p=function(){return N},N)}function h(N,k){return function(R){if(Array.isArray(R))return R}(N)||function(R,I){if(Symbol.iterator in Object(R)||Object.prototype.toString.call(R)==="[object Arguments]"){var L=[],j=!0,M=!1,V=void 0;try{for(var G,U=R[Symbol.iterator]();!(j=(G=U.next()).done)&&(L.push(G.value),!I||L.length!==I);j=!0);}catch(Y){M=!0,V=Y}finally{try{j||U.return==null||U.return()}finally{if(M)throw V}}return L}}(N,k)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(N,k,R){return k in N?Object.defineProperty(N,k,{value:R,enumerable:!0,configurable:!0,writable:!0}):N[k]=R,N}function g(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function y(N,k){for(var R=0;R<k.length;R++){var I=k[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function b(N,k,R){k&&y(N.prototype,k),R&&y(N,R)}function x(N,k,R){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(M,L,j){var M=function(V,G){for(;!Object.prototype.hasOwnProperty.call(V,G)&&(V=_(V))!==null;);return V}(M,L);if(M)return(M=Object.getOwnPropertyDescriptor(M,L)).get?M.get.call(j):M.value})(N,k,R||N)}function v(N,k){return(v=Object.setPrototypeOf||function(R,I){return R.__proto__=I,R})(N,k)}function w(N){return function(){var k,R=_(N),R=(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=_(this).constructor,Reflect.construct(R,arguments,k)):R.apply(this,arguments),this);if(!k||l(k)!=="object"&&typeof k!="function"){if(R!==void 0)return R;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}function _(N){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(N)}var C=function(N){var k=I;if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(N&&N.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),N&&v(k,N);var R=w(I);function I(L){var j;return g(this,I),(j=R.call(this,L.target._renderer)).fbo=L,j.yScale=-1,j}return b(I,[{key:"_computeCameraDefaultSettings",value:function(){x(_(I.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),I}(u.default.Camera),S=(u.default.FramebufferCamera=C,function(){function N(k,R){g(this,N),this.framebuffer=k,this.property=R}return b(N,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),N}()),E=(u.default.FramebufferTexture=S,function(){function N(k){var R=this,I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},L=(g(this,N),this.target=k,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=I.format||c.UNSIGNED_BYTE,this.channels=I.channels||(k._renderer._pInst._glAttributes.alpha?c.RGBA:c.RGB),this.useDepth=I.depth===void 0||I.depth,this.depthFormat=I.depthFormat||c.FLOAT,this.textureFiltering=I.textureFiltering||c.LINEAR,I.antialias===void 0?this.antialiasSamples=k._renderer._pInst._glAttributes.antialias?2:0:typeof I.antialias=="number"?this.antialiasSamples=I.antialias:this.antialiasSamples=I.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&k.webglVersion!==c.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=I.density||k.pixelDensity(),k._renderer.GL);if(this.gl=L,I.width&&I.height?(j=k._renderer._adjustDimensions(I.width,I.height),this.width=j.adjustedWidth,this.height=j.adjustedHeight,this._autoSized=!1):(I.width===void 0!=(I.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=k.width,this.height=k.height,this._autoSized=!0),this._checkIfFormatsAvailable(),I.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(I.stencil===void 0||I.stencil),this.framebuffer=L.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=L.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var j=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=j,this.draw(function(){return R.target.clear()})}return b(N,[{key:"resize",value:function(k,R){this._autoSized=!1;var I=this.target._renderer._adjustDimensions(k,R);k=I.adjustedWidth,R=I.adjustedHeight,this.width=k,this.height=R,this._handleResize()}},{key:"pixelDensity",value:function(k){if(!k)return this.density;this._autoSized=!1,this.density=k,this._handleResize()}},{key:"autoSized",value:function(k){if(k===void 0)return this._autoSized;this._autoSized=k,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var k=this.gl,k=(this.useDepth&&this.target.webglVersion===c.WEBGL&&!k.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===c.WEBGL&&this.depthFormat===c.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),[c.UNSIGNED_BYTE,c.FLOAT,c.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&![c.UNSIGNED_INT,c.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=c.FLOAT),(0,f.checkWebGLCapabilities)(this.target._renderer));k.float||this.format!==c.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.useDepth&&!k.float&&this.depthFormat===c.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=c.UNSIGNED_INT),k.halfFloat||this.format!==c.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=c.UNSIGNED_BYTE),this.channels===c.RGB&&[c.FLOAT,c.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=c.RGBA)}},{key:"_recreateTextures",value:function(){var k=this.gl,R=(this._updateSize(),k.getParameter(k.TEXTURE_BINDING_2D)),I=k.getParameter(k.FRAMEBUFFER_BINDING),L=k.createTexture();if(!L)throw new Error("Unable to create color texture");k.bindTexture(k.TEXTURE_2D,L);var j=this._glColorFormat();if(k.texImage2D(k.TEXTURE_2D,0,j.internalFormat,this.width*this.density,this.height*this.density,0,j.format,j.type,null),this.colorTexture=L,k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,L,0),this.useDepth){var L=k.createTexture();if(!L)throw new Error("Unable to create depth texture");var M=this._glDepthFormat();k.bindTexture(k.TEXTURE_2D,L),k.texImage2D(k.TEXTURE_2D,0,M.internalFormat,this.width*this.density,this.height*this.density,0,M.format,M.type,null),k.framebufferTexture2D(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.TEXTURE_2D,L,0),this.depthTexture=L}this.antialias&&(this.colorRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.colorRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),j.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(M=this._glDepthFormat(),this.depthRenderbuffer=k.createRenderbuffer(),k.bindRenderbuffer(k.RENDERBUFFER,this.depthRenderbuffer),k.renderbufferStorageMultisample(k.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,k.getParameter(k.MAX_SAMPLES))),M.internalFormat,this.width*this.density,this.height*this.density)),k.bindFramebuffer(k.FRAMEBUFFER,this.aaFramebuffer),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&k.framebufferRenderbuffer(k.FRAMEBUFFER,this.useStencil?k.DEPTH_STENCIL_ATTACHMENT:k.DEPTH_ATTACHMENT,k.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new S(this,"depthTexture"),L=k.NEAREST,this.depthP5Texture=new u.default.Texture(this.target._renderer,this.depth,{minFilter:L,magFilter:L}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new S(this,"colorTexture"),j=this.textureFiltering===c.LINEAR?k.LINEAR:k.NEAREST,this.colorP5Texture=new u.default.Texture(this.target._renderer,this.color,{minFilter:j,magFilter:j}),this.target._renderer.textures.set(this.color,this.colorP5Texture),k.bindTexture(k.TEXTURE_2D,R),k.bindFramebuffer(k.FRAMEBUFFER,I)}},{key:"_glColorFormat",value:function(){var k,R,I=this.gl,L=this.format===c.FLOAT?I.FLOAT:this.format===c.HALF_FLOAT?this.target.webglVersion===c.WEBGL2?I.HALF_FLOAT:I.getExtension("OES_texture_half_float").HALF_FLOAT_OES:I.UNSIGNED_BYTE,j=this.channels===c.RGBA?I.RGBA:I.RGB;return{internalFormat:this.target.webglVersion===c.WEBGL2?(m(R={},I.FLOAT,m({},I.RGBA,I.RGBA32F)),m(R,I.HALF_FLOAT,m({},I.RGBA,I.RGBA16F)),m(R,I.UNSIGNED_BYTE,(m(k={},I.RGBA,I.RGBA8),m(k,I.RGB,I.RGB8),k)),R[L][j]):this.format===c.HALF_FLOAT?I.RGBA:j,format:j,type:L}}},{key:"_glDepthFormat",value:function(){var I=this.gl,k=this.useStencil?this.depthFormat===c.FLOAT?I.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===c.WEBGL2?I.UNSIGNED_INT_24_8:I.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===c.FLOAT?I.FLOAT:I.UNSIGNED_INT,R=this.useStencil?I.DEPTH_STENCIL:I.DEPTH_COMPONENT,I=this.useStencil?this.depthFormat===c.FLOAT?I.DEPTH32F_STENCIL8:this.target.webglVersion===c.WEBGL2?I.DEPTH24_STENCIL8:I.DEPTH_STENCIL:this.target.webglVersion===c.WEBGL2?this.depthFormat===c.FLOAT?I.DEPTH_COMPONENT32F:I.DEPTH_COMPONENT24:I.DEPTH_COMPONENT;return{internalFormat:I,format:R,type:k}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var L=this.color,k=this.depth,R=this.colorRenderbuffer,I=this.depthRenderbuffer,L=(this._deleteTexture(L),k&&this._deleteTexture(k),this.gl);R&&L.deleteRenderbuffer(R),I&&L.deleteRenderbuffer(I),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var k=new C(this);return k._computeCameraDefaultSettings(),k._setDefaultCamera(),this.target._renderer._curCamera=k}},{key:"_deleteTexture",value:function(k){this.gl.deleteTexture(k.rawTexture()),this.target._renderer.textures.delete(k)}},{key:"remove",value:function(){var k=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),k.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&k.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&k.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&k.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var k=this.gl,R=(k.bindFramebuffer(k.READ_FRAMEBUFFER,this.aaFramebuffer),k.bindFramebuffer(k.DRAW_FRAMEBUFFER,this.framebuffer),[[k.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&R.push([k.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var I=0,L=R;I<L.length;I++){var M=h(L[I],2),j=M[0],M=M[1];k.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,j,M)}}}},{key:"end",value:function(){var k=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(k.bindFramebuffer(k.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(k){this.begin(),k(),this.end()}},{key:"loadPixels",value:function(){var k=this.gl,R=this.target._renderer.activeFramebuffer(),I=(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,d.readPixelsWebGL)(this.pixels,k,this.framebuffer,0,0,this.width*this.density,this.height*this.density,I.format,I.type),R?k.bindFramebuffer(k.FRAMEBUFFER,R._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null)}},{key:"get",value:function(k,R,I,L){u.default._validateParameters("p5.Framebuffer.get",arguments);var j=this._glColorFormat();if(k===void 0&&R===void 0)R=k=0,I=this.width,L=this.height;else if(I===void 0&&L===void 0)return(k<0||R<0||k>=this.width||R>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),k=this.target.constrain(k,0,this.width-1),R=this.target.constrain(R,0,this.height-1)),(0,d.readPixelWebGL)(this.gl,this.framebuffer,k*this.density,R*this.density,j.format,j.type);k=this.target.constrain(k,0,this.width-1),R=this.target.constrain(R,0,this.height-1),I=this.target.constrain(I,1,this.width-k),L=this.target.constrain(L,1,this.height-R);for(var M=(0,d.readPixelsWebGL)(void 0,this.gl,this.framebuffer,k*this.density,R*this.density,I*this.density,L*this.density,j.format,j.type),V=new Uint8ClampedArray(I*L*this.density*this.density*4),G=(V.fill(255),j.type===this.gl.RGB?3:4),U=0;U<L*this.density;U++)for(var Y=0;Y<I*this.density;Y++)for(var X=0;X<4;X++){var pe,$=4*(U*I*this.density+Y)+X;X<G&&(pe=G==4?$:(U*I*this.density+Y)*G+X,V[$]=M[pe])}return k=new u.default.Image(I*this.density,L*this.density),k.imageData=k.canvas.getContext("2d").createImageData(k.width,k.height),k.imageData.data.set(V),k.pixels=k.imageData.data,k.updatePixels(),this.density!==1&&k.resize(I,L),k}},{key:"updatePixels",value:function(){var k=this.gl,R=(this.colorP5Texture.bindTexture(),this._glColorFormat()),I=R.format===k.RGBA?4:3,I=this.width*this.height*this.density*this.density*I,L=R.type===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof L)||this.pixels.length!==I)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");k.texImage2D(k.TEXTURE_2D,0,R.internalFormat,this.width*this.density,this.height*this.density,0,R.format,R.type,this.pixels),this.colorP5Texture.unbindTexture(),L=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),this.end()):(k.bindFramebuffer(k.FRAMEBUFFER,this.framebuffer),this.useDepth&&(k.clearDepth(1),k.clear(k.DEPTH_BUFFER_BIT)),L?k.bindFramebuffer(k.FRAMEBUFFER,L._framebufferToBind()):k.bindFramebuffer(k.FRAMEBUFFER,null))}}]),N}()),A=u.default.Framebuffer=E;s.default=A},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.flat"),o("core-js/modules/es.array.for-each"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.unscopables.flat"),o("core-js/modules/es.map"),o("core-js/modules/es.number.constructor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.set"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.for-each"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(m,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}u.default.Geometry=function(){function m(x,v,w){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new u.default.DataArray,this.lineTangentsIn=new u.default.DataArray,this.lineTangentsOut=new u.default.DataArray,this.lineSides=new u.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new u.default.DataArray,this.detailX=x!==void 0?x:1,this.detailY=v!==void 0?v:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,w instanceof Function&&w.call(this)}var g,y,b;return g=m,(y=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var x=new u.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),v=new u.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),w=0;w<this.vertices.length;w++){var _=this.vertices[w];x.x=Math.min(x.x,_.x),x.y=Math.min(x.y,_.y),x.z=Math.min(x.z,_.z),v.x=Math.max(v.x,_.x),v.y=Math.max(v.y,_.y),v.z=Math.max(v.z,_.z)}var C=new u.default.Vector(v.x-x.x,v.y-x.y,v.z-x.z),S=new u.default.Vector((x.x+v.x)/2,(x.y+v.y)/2,(x.z+v.z)/2);this.boundingBoxCache={min:x,max:v,size:C,offset:S}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var x=0;x<this.vertexColors.length;x+=4)if(this.vertexColors[x+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var x=0;x<this.lineVertexColors.length;x+=4)if(this.lineVertexColors[x+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?1-x:x})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(x,v){return v%2==0?x:1-x})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var x,v,w,_=this.detailX+1,C=0;C<this.detailY;C++)for(var S=0;S<this.detailX;S++)v=(C+1)*_+S+1,this.faces.push([C*_+S,x=C*_+S+1,w=(C+1)*_+S]),this.faces.push([w,x,v]);return this}},{key:"_getFaceNormal",value:function(v){var v=this.faces[v],w=this.vertices[v[0]],C=this.vertices[v[1]],v=this.vertices[v[2]],C=u.default.Vector.sub(C,w),v=u.default.Vector.sub(v,w),w=u.default.Vector.cross(C,v),_=u.default.Vector.mag(w),C=_/(u.default.Vector.mag(C)*u.default.Vector.mag(v));return C===0||isNaN(C)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),w):(1<C&&(C=1),w.mult(Math.asin(C)/_))}},{key:"computeNormals",value:function(){var x,v=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:c.FLAT,_=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,C=this.vertexNormals,S=this.vertices,E=this.faces;if(w===c.SMOOTH){for(var A={},N=[],k=Math.pow(10,_===void 0?3:_),R=function(V){return Math.round(V*k)/k},I=function(V){return"".concat(R(V.x),",").concat(R(V.y),",").concat(R(V.z))},L=0;L<S.length;L++){var j=S[L],M=I(j);A[M]===void 0&&(A[M]=N.length,N.push(j))}E.forEach(function(V){for(var G=0;G<3;++G){var U=V[G],U=S[U],U=I(U);V[G]=A[U]}}),this.edges.forEach(function(V){for(var G=0;G<2;++G){var U=V[G],U=S[U],U=I(U);V[G]=A[U]}}),this.vertices=S=N}for(x=C.length=0;x<S.length;++x)C.push(new u.default.Vector);for(E.forEach(function(V,G){for(var U=v._getFaceNormal(G),Y=0;Y<3;++Y){var X=V[Y];C[X].add(U)}}),x=0;x<S.length;++x)C[x].normalize();return this}},{key:"averageNormals",value:function(){for(var x=0;x<=this.detailY;x++){var v=this.detailX+1,w=u.default.Vector.add(this.vertexNormals[x*v],this.vertexNormals[x*v+this.detailX]),w=u.default.Vector.div(w,2);this.vertexNormals[x*v]=w,this.vertexNormals[x*v+this.detailX]=w}return this}},{key:"averagePoleNormals",value:function(){for(var x=new u.default.Vector(0,0,0),v=0;v<this.detailX;v++)x.add(this.vertexNormals[v]);for(var x=u.default.Vector.div(x,this.detailX),w=0;w<this.detailX;w++)this.vertexNormals[w]=x;x=new u.default.Vector(0,0,0);for(var _=this.vertices.length-1;_>this.vertices.length-1-this.detailX;_--)x.add(this.vertexNormals[_]);x=u.default.Vector.div(x,this.detailX);for(var C=this.vertices.length-1;C>this.vertices.length-1-this.detailX;C--)this.vertexNormals[C]=x;return this}},{key:"_makeTriangleEdges",value:function(){for(var x=this.edges.length=0;x<this.faces.length;x++)this.edges.push([this.faces[x][0],this.faces[x][1]]),this.edges.push([this.faces[x][1],this.faces[x][2]]),this.edges.push([this.faces[x][2],this.faces[x][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var x,v=new Map,w=new Set,_=0;_<this.edges.length;_++){var C,S=this.edges[_-1],E=this.edges[_],A=this.vertices[E[0]],N=this.vertices[E[1]],k=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[0],4*(E[0]+1)):[0,0,0,0],R=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*E[1],4*(E[1]+1)):[0,0,0,0],I=N.copy().sub(A).normalize(),L=0<I.magSq();L&&this._addSegment(A,N,k,R,I),0<_&&S[1]===E[0]?w.has(E[0])||(w.add(E[0]),v.delete(E[0]),x&&L&&I.dot(x)<1-1e-8&&this._addJoin(A,x,I,k)):(L&&!w.has(E[0])&&((C=v.get(E[0]))?(this._addJoin(A,C.dir,I,k),v.delete(E[0]),w.add(E[0])):v.set(E[0],{point:A,dir:I.copy().mult(-1),color:k})),x&&!w.has(S[1])&&((C=v.get(S[1]))?(this._addJoin(this.vertices[S[1]],x,C.dir.copy().mult(-1),k),v.delete(S[1]),w.add(S[1])):v.set(S[1],{point:this.vertices[S[1]],dir:x,color:k}),x=void 0)),_!==this.edges.length-1||w.has(E[1])||((A=v.get(E[1]))?(this._addJoin(N,I,A.dir.copy().mult(-1),R),v.delete(E[1]),w.add(E[1])):v.set(E[1],{point:N,dir:I,color:R})),L&&(x=I)}var j=!0,M=!1,V=void 0;try{for(var G,U=v.values()[Symbol.iterator]();!(j=(G=U.next()).done);j=!0){var Y=G.value,X=Y.point,pe=Y.dir,$=Y.color;this._addCap(X,pe,$)}}catch(O){M=!0,V=O}finally{try{j||U.return==null||U.return()}finally{if(M)throw V}}return this}},{key:"_addSegment",value:function(S,E,w,_,C){var S=S.array(),E=E.array(),A=C.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var N=0,k=[this.lineTangentsIn,this.lineTangentsOut];N<k.length;N++)for(var R=k[N],I=0;I<6;I++)R.push.apply(R,d(A));return(C=this.lineVertices).push.apply(C,d(S).concat(d(E),d(S),d(E),d(E),d(S))),(C=this.lineVertexColors).push.apply(C,d(w).concat(d(_),d(w),d(_),d(_),d(w))),this}},{key:"_addCap",value:function(x,v,w){for(var _,C=x.array(),S=v.array(),E=[0,0,0],A=0;A<6;A++)(_=this.lineVertices).push.apply(_,d(C)),(_=this.lineTangentsIn).push.apply(_,d(S)),(_=this.lineTangentsOut).push.apply(_,E),(_=this.lineVertexColors).push.apply(_,d(w));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(x,v,w,_){for(var C,S=x.array(),E=v.array(),A=w.array(),N=0;N<12;N++)(C=this.lineVertices).push.apply(C,d(S)),(C=this.lineTangentsIn).push.apply(C,d(E)),(C=this.lineTangentsOut).push.apply(C,d(A)),(C=this.lineVertexColors).push.apply(C,d(_));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var x=this.vertices[0].copy(),v=this.vertices[0].copy(),w=0;w<this.vertices.length;w++)x.x=Math.max(x.x,this.vertices[w].x),v.x=Math.min(v.x,this.vertices[w].x),x.y=Math.max(x.y,this.vertices[w].y),v.y=Math.min(v.y,this.vertices[w].y),x.z=Math.max(x.z,this.vertices[w].z),v.z=Math.min(v.z,this.vertices[w].z);for(var _=u.default.Vector.lerp(x,v,.5),C=u.default.Vector.sub(x,v),S=200/Math.max(Math.max(C.x,C.y),C.z),E=0;E<this.vertices.length;E++)this.vertices[E].sub(_),this.vertices[E].mult(S)}return this}}])&&p(g.prototype,y),b&&p(g,b),m}();var h=u.default.Geometry;s.default=h},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(f,i,s){"use strict";f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(f=f("../core/main"))&&f.__esModule?f:{default:f};function l(d,p){for(var h=0;h<p.length;h++){var m=p[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}var u=Array,c=function(d){return Array.isArray(d)},f=(typeof Float32Array<"u"&&(u=Float32Array,c=function(d){return Array.isArray(d)||d instanceof Float32Array}),a.default.Matrix=function(){function d(){var g=this,y=d;if(g instanceof y)return arguments.length&&((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])instanceof a.default&&(this.p5=(y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new u([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new u([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var p,h,m;return p=d,m=[{key:"identity",value:function(g){return new a.default.Matrix(g)}}],(h=[{key:"set",value:function(g){var y=arguments;if(g instanceof a.default.Matrix?y=g.mat4:c(g)&&(y=g),y.length!==16)a.default._friendlyError("Expected 16 values but received ".concat(y.length,"."),"p5.Matrix.set");else for(var b=0;b<16;b++)this.mat4[b]=y[b];return this}},{key:"get",value:function(){return new a.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var g;return this.mat3!==void 0?((g=new a.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],g.mat3[1]=this.mat3[1],g.mat3[2]=this.mat3[2],g.mat3[3]=this.mat3[3],g.mat3[4]=this.mat3[4],g.mat3[5]=this.mat3[5],g.mat3[6]=this.mat3[6],g.mat3[7]=this.mat3[7],g.mat3[8]=this.mat3[8]):((g=new a.default.Matrix(this.p5)).mat4[0]=this.mat4[0],g.mat4[1]=this.mat4[1],g.mat4[2]=this.mat4[2],g.mat4[3]=this.mat4[3],g.mat4[4]=this.mat4[4],g.mat4[5]=this.mat4[5],g.mat4[6]=this.mat4[6],g.mat4[7]=this.mat4[7],g.mat4[8]=this.mat4[8],g.mat4[9]=this.mat4[9],g.mat4[10]=this.mat4[10],g.mat4[11]=this.mat4[11],g.mat4[12]=this.mat4[12],g.mat4[13]=this.mat4[13],g.mat4[14]=this.mat4[14],g.mat4[15]=this.mat4[15]),g}},{key:"transpose",value:function(g){var y,b,x,v,w,_;return g instanceof a.default.Matrix?(y=g.mat4[1],b=g.mat4[2],x=g.mat4[3],v=g.mat4[6],w=g.mat4[7],_=g.mat4[11],this.mat4[0]=g.mat4[0],this.mat4[1]=g.mat4[4],this.mat4[2]=g.mat4[8],this.mat4[3]=g.mat4[12],this.mat4[4]=y,this.mat4[5]=g.mat4[5],this.mat4[6]=g.mat4[9],this.mat4[7]=g.mat4[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g.mat4[10],this.mat4[11]=g.mat4[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g.mat4[15]):c(g)&&(y=g[1],b=g[2],x=g[3],v=g[6],w=g[7],_=g[11],this.mat4[0]=g[0],this.mat4[1]=g[4],this.mat4[2]=g[8],this.mat4[3]=g[12],this.mat4[4]=y,this.mat4[5]=g[5],this.mat4[6]=g[9],this.mat4[7]=g[13],this.mat4[8]=b,this.mat4[9]=v,this.mat4[10]=g[10],this.mat4[11]=g[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=_,this.mat4[15]=g[15]),this}},{key:"invert",value:function(M){M instanceof a.default.Matrix?(y=M.mat4[0],b=M.mat4[1],x=M.mat4[2],v=M.mat4[3],w=M.mat4[4],_=M.mat4[5],C=M.mat4[6],S=M.mat4[7],E=M.mat4[8],A=M.mat4[9],N=M.mat4[10],k=M.mat4[11],R=M.mat4[12],I=M.mat4[13],L=M.mat4[14],j=M.mat4[15]):c(M)&&(y=M[0],b=M[1],x=M[2],v=M[3],w=M[4],_=M[5],C=M[6],S=M[7],E=M[8],A=M[9],N=M[10],k=M[11],R=M[12],I=M[13],L=M[14],j=M[15]);var y,b,x,v,w,_,C,S,E,A,N,k,R,I,L,j,M=y*_-b*w,V=y*C-x*w,G=y*S-v*w,U=b*C-x*_,Y=b*S-v*_,X=x*S-v*C,pe=E*I-A*R,$=E*L-N*R,O=E*j-k*R,z=A*L-N*I,q=A*j-k*I,ee=N*j-k*L,ae=M*ee-V*q+G*z+U*O-Y*$+X*pe;return ae?(this.mat4[0]=(_*ee-C*q+S*z)*(ae=1/ae),this.mat4[1]=(x*q-b*ee-v*z)*ae,this.mat4[2]=(I*X-L*Y+j*U)*ae,this.mat4[3]=(N*Y-A*X-k*U)*ae,this.mat4[4]=(C*O-w*ee-S*$)*ae,this.mat4[5]=(y*ee-x*O+v*$)*ae,this.mat4[6]=(L*G-R*X-j*V)*ae,this.mat4[7]=(E*X-N*G+k*V)*ae,this.mat4[8]=(w*q-_*O+S*pe)*ae,this.mat4[9]=(b*O-y*q-v*pe)*ae,this.mat4[10]=(R*Y-I*G+j*M)*ae,this.mat4[11]=(A*G-E*Y-k*M)*ae,this.mat4[12]=(_*$-w*z-C*pe)*ae,this.mat4[13]=(y*z-b*$+x*pe)*ae,this.mat4[14]=(I*V-R*U-L*M)*ae,this.mat4[15]=(E*U-A*V+N*M)*ae,this):null}},{key:"invert3x3",value:function(){var g=this.mat3[0],y=this.mat3[1],b=this.mat3[2],x=this.mat3[3],v=this.mat3[4],w=this.mat3[5],_=this.mat3[6],C=this.mat3[7],S=this.mat3[8],E=S*v-w*C,A=-S*x+w*_,N=C*x-v*_,k=g*E+y*A+b*N;return k?(this.mat3[0]=E*(k=1/k),this.mat3[1]=(-S*y+b*C)*k,this.mat3[2]=(w*y-b*v)*k,this.mat3[3]=A*k,this.mat3[4]=(S*g-b*_)*k,this.mat3[5]=(-w*g+b*x)*k,this.mat3[6]=N*k,this.mat3[7]=(-C*g+y*_)*k,this.mat3[8]=(v*g-y*x)*k,this):null}},{key:"transpose3x3",value:function(g){var y=(g=g===void 0?this.mat3:g)[1],b=g[2],x=g[5];return this.mat3[0]=g[0],this.mat3[1]=g[3],this.mat3[2]=g[6],this.mat3[3]=y,this.mat3[4]=g[4],this.mat3[5]=g[7],this.mat3[6]=b,this.mat3[7]=x,this.mat3[8]=g[8],this}},{key:"inverseTranspose",value:function(g){if(g=g.mat4,this.mat3===void 0?a.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=g[0],this.mat3[1]=g[1],this.mat3[2]=g[2],this.mat3[3]=g[4],this.mat3[4]=g[5],this.mat3[5]=g[6],this.mat3[6]=g[8],this.mat3[7]=g[9],this.mat3[8]=g[10]),g=this.invert3x3(),g)g.transpose3x3(this.mat3);else for(var y=0;y<9;y++)this.mat3[y]=0;return this}},{key:"determinant",value:function(){var g=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],y=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],v=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],w=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],_=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],C=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],S=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],E=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],A=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return g*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-y*A+b*E+x*S-v*C+w*_}},{key:"mult",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4[0],x=this.mat4[1],v=this.mat4[2],w=this.mat4[3];return this.mat4[0]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[1]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[2]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[3]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[4],x=this.mat4[5],v=this.mat4[6],w=this.mat4[7],this.mat4[4]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[5]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[6]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[7]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[8],x=this.mat4[9],v=this.mat4[10],w=this.mat4[11],this.mat4[8]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[9]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[10]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[11]=b*y[3]+x*y[7]+v*y[11]+w*y[15],b=this.mat4[12],x=this.mat4[13],v=this.mat4[14],w=this.mat4[15],this.mat4[12]=b*y[0]+x*y[4]+v*y[8]+w*y[12],this.mat4[13]=b*y[1]+x*y[5]+v*y[9]+w*y[13],this.mat4[14]=b*y[2]+x*y[6]+v*y[10]+w*y[14],this.mat4[15]=b*y[3]+x*y[7]+v*y[11]+w*y[15],this}},{key:"apply",value:function(b){var y;if(b===this||b===this.mat4)y=this.copy().mat4;else if(b instanceof a.default.Matrix)y=b.mat4;else if(c(b))y=b;else{if(arguments.length!==16)return;y=arguments}var b=this.mat4,x=b[0],v=b[4],w=b[8],_=b[12],x=(b[0]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[4]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[8]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[12]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[1]),v=b[5],w=b[9],_=b[13],x=(b[1]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[5]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[9]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[13]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[2]),v=b[6],w=b[10],_=b[14],x=(b[2]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[6]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[10]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[14]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,b[3]),v=b[7],w=b[11],_=b[15];return b[3]=y[0]*x+y[1]*v+y[2]*w+y[3]*_,b[7]=y[4]*x+y[5]*v+y[6]*w+y[7]*_,b[11]=y[8]*x+y[9]*v+y[10]*w+y[11]*_,b[15]=y[12]*x+y[13]*v+y[14]*w+y[15]*_,this}},{key:"scale",value:function(g,y,b){return g instanceof a.default.Vector?(y=g.y,b=g.z,g=g.x):g instanceof Array&&(y=g[1],b=g[2],g=g[0]),this.mat4[0]*=g,this.mat4[1]*=g,this.mat4[2]*=g,this.mat4[3]*=g,this.mat4[4]*=y,this.mat4[5]*=y,this.mat4[6]*=y,this.mat4[7]*=y,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(M,q,z,x){q instanceof a.default.Vector?(z=q.y,x=q.z,q=q.x):q instanceof Array&&(z=q[1],x=q[2],q=q[0]);var v=Math.sqrt(q*q+z*z+x*x),v=(q*=1/v,z*=1/v,x*=1/v,this.mat4[0]),w=this.mat4[1],_=this.mat4[2],C=this.mat4[3],S=this.mat4[4],E=this.mat4[5],A=this.mat4[6],N=this.mat4[7],k=this.mat4[8],R=this.mat4[9],I=this.mat4[10],L=this.mat4[11],j=Math.sin(M),M=Math.cos(M),V=1-M,G=q*q*V+M,U=z*q*V+x*j,Y=x*q*V-z*j,X=q*z*V-x*j,pe=z*z*V+M,$=x*z*V+q*j,O=q*x*V+z*j,z=z*x*V-q*j,q=x*x*V+M;return this.mat4[0]=v*G+S*U+k*Y,this.mat4[1]=w*G+E*U+R*Y,this.mat4[2]=_*G+A*U+I*Y,this.mat4[3]=C*G+N*U+L*Y,this.mat4[4]=v*X+S*pe+k*$,this.mat4[5]=w*X+E*pe+R*$,this.mat4[6]=_*X+A*pe+I*$,this.mat4[7]=C*X+N*pe+L*$,this.mat4[8]=v*O+S*z+k*q,this.mat4[9]=w*O+E*z+R*q,this.mat4[10]=_*O+A*z+I*q,this.mat4[11]=C*O+N*z+L*q,this}},{key:"translate",value:function(x){var y=x[0],b=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*y+this.mat4[4]*b+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*y+this.mat4[5]*b+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*y+this.mat4[6]*b+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*y+this.mat4[7]*b+this.mat4[11]*x}},{key:"rotateX",value:function(g){this.rotate(g,1,0,0)}},{key:"rotateY",value:function(g){this.rotate(g,0,1,0)}},{key:"rotateZ",value:function(g){this.rotate(g,0,0,1)}},{key:"perspective",value:function(v,y,b,x){var v=1/Math.tan(v/2),w=1/(b-x);return this.mat4[0]=v/y,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=v,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+b)*w,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*b*w,this.mat4[15]=0,this}},{key:"ortho",value:function(g,y,b,x,v,w){var _=1/(g-y),C=1/(b-x),S=1/(v-w);return this.mat4[0]=-2*_,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*C,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*S,this.mat4[11]=0,this.mat4[12]=(g+y)*_,this.mat4[13]=(x+b)*C,this.mat4[14]=(w+v)*S,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(g,y,b,x){var v=new Array(4),w=this.mat4;return v[0]=w[0]*g+w[4]*y+w[8]*b+w[12]*x,v[1]=w[1]*g+w[5]*y+w[9]*b+w[13]*x,v[2]=w[2]*g+w[6]*y+w[10]*b+w[14]*x,v[3]=w[3]*g+w[7]*y+w[11]*b+w[15]*x,v}},{key:"multiplyPoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new a.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(b){var x=b.x,y=b.y,b=b.z,x=this.multiplyVec4(x,y,b,0);return new a.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(b){var y;if(b===this||b===this.mat3)y=this.copy().mat3;else if(b instanceof a.default.Matrix)y=b.mat3;else if(c(b))y=b;else{if(arguments.length!==9)return;y=arguments}var b=this.mat3[0],x=this.mat3[1],v=this.mat3[2];return this.mat3[0]=b*y[0]+x*y[3]+v*y[6],this.mat3[1]=b*y[1]+x*y[4]+v*y[7],this.mat3[2]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[3],x=this.mat3[4],v=this.mat3[5],this.mat3[3]=b*y[0]+x*y[3]+v*y[6],this.mat3[4]=b*y[1]+x*y[4]+v*y[7],this.mat3[5]=b*y[2]+x*y[5]+v*y[8],b=this.mat3[6],x=this.mat3[7],v=this.mat3[8],this.mat3[6]=b*y[0]+x*y[3]+v*y[6],this.mat3[7]=b*y[1]+x*y[4]+v*y[7],this.mat3[8]=b*y[2]+x*y[5]+v*y[8],this}},{key:"column",value:function(g){return new a.default.Vector(this.mat3[3*g],this.mat3[3*g+1],this.mat3[3*g+2])}},{key:"row",value:function(g){return new a.default.Vector(this.mat3[g],this.mat3[g+3],this.mat3[g+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(g,y){return(y=y===void 0?g.copy():y).x=this.row(0).dot(g),y.y=this.row(1).dot(g),y.z=this.row(2).dot(g),y}},{key:"createSubMatrix3x3",value:function(){var g=new a.default.Matrix("mat3");return g.mat3[0]=this.mat4[0],g.mat3[1]=this.mat4[1],g.mat3[2]=this.mat4[2],g.mat3[3]=this.mat4[4],g.mat3[4]=this.mat4[5],g.mat3[5]=this.mat4[6],g.mat3[6]=this.mat4[8],g.mat3[7]=this.mat4[9],g.mat3[8]=this.mat4[10],g}}])&&l(p.prototype,h),m&&l(p,m),d}(),a.default.Matrix);s.default=f},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(o,i,s){"use strict";o("core-js/modules/es.array.map"),o("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,o=(o=o("../core/main"))&&o.__esModule?o:{default:o};function a(l,u){for(var c=0;c<u.length;c++){var f=u[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}o.default.RenderBuffer=function(){function l(d,p,h,m,g,y){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.size=d,this.src=p,this.dst=h,this.attr=m,this._renderer=g,this.map=y}var u,c,f;return u=l,(c=[{key:"_prepareBuffer",value:function(d,p){var h,m,g,x=p.attributes,y=this._renderer.GL,b=d.model||d,x=x[this.attr];x&&(h=d[this.dst],0<(m=b[this.src]).length?((g=!h)&&(d[this.dst]=h=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,h),!g&&b.dirtyFlags[this.src]===!1||(g=(d=this.map)?d(m):m,this._renderer._bindBuffer(h,y.ARRAY_BUFFER,g),b.dirtyFlags[this.src]=!1),p.enableAttrib(x,this.size)):(d=x.location)!==-1&&this._renderer.registerEnabled.has(d)&&(y.disableVertexAttribArray(d),this._renderer.registerEnabled.delete(d)))}}])&&a(u.prototype,c),f&&a(u,f),l}(),o=o.default.RenderBuffer,s.default=o},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(o,i,s){"use strict";function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function l(m){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(m)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.from"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.concat"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.find-index"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.map"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(h=o("../core/main"))&&h.__esModule?h:{default:h},c=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var g=f();if(g&&g.has(m))return g.get(m);var y,b={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var v;Object.prototype.hasOwnProperty.call(m,y)&&((v=x?Object.getOwnPropertyDescriptor(m,y):null)&&(v.get||v.set)?Object.defineProperty(b,y,v):b[y]=m[y])}return b.default=m,g&&g.set(m,b),b}(o("../core/constants"));function f(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,f=function(){return m},m)}function d(m){return function(g){if(Array.isArray(g)){for(var y=0,b=new Array(g.length);y<g.length;y++)b[y]=g[y];return b}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o("./p5.RenderBuffer"),u.default.RendererGL.prototype.beginShape=function(m){return this.immediateMode.shapeMode=m!==void 0?m:c.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var p={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},h=(u.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==c.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},u.default.RendererGL.prototype.vertex=function(m,g){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var y in p){var b=p[y],y=this.immediateMode.geometry[y];y.push.apply(y,d(y.slice(y.length-3*b,y.length-2*b)).concat(d(y.slice(y.length-b,y.length))))}var x,v,w=x=v=0,_=(arguments.length===3?w=arguments[2]:arguments.length===4?(x=arguments[2],v=arguments[3]):arguments.length===5&&(w=arguments[2],x=arguments[3],v=arguments[4]),new u.default.Vector(m,g,w)),_=(this.immediateMode.geometry.vertices.push(_),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),_=(this.immediateMode.geometry.vertexColors.push(_[0],_[1],_[2],_[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(_[0],_[1],_[2],_[3]),this.textureMode!==c.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,v/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,v),this.immediateMode._bezierVertex[0]=m,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=w,this.immediateMode._quadraticVertex[0]=m,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=w,this},u.default.RendererGL.prototype.normal=function(m,g,y){return m instanceof u.default.Vector?this._currentNormal=m:this._currentNormal=new u.default.Vector(m,g,y),this},u.default.RendererGL.prototype.endShape=function(m,g,y,b,x,v){var w,_=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===c.TESS&&(this.immediateMode.shapeMode,c.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),w=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN,w=!0),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._doFill&&!w&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(_),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},u.default.RendererGL.prototype._processVertices=function(m){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,m=m===c.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,m),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===c.TESS,m=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g||m)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},u.default.RendererGL.prototype._calculateEdges=function(m,g,y){var b=[],x=0,v=this.immediateMode.contourIndices.slice(),w=0;switch(m){case c.TRIANGLE_STRIP:for(x=0;x<g.length-2;x++)b.push([x,x+1]),b.push([x,x+2]);b.push([x,x+1]);break;case c.TRIANGLE_FAN:for(x=1;x<g.length-1;x++)b.push([0,x]),b.push([x,x+1]);b.push([0,g.length-1]);break;case c.TRIANGLES:for(x=0;x<g.length-2;x+=3)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+2,x]);break;case c.LINES:for(x=0;x<g.length-1;x+=2)b.push([x,x+1]);break;case c.QUADS:for(x=0;x<g.length-5;x+=6)b.push([x,x+1]),b.push([x+1,x+2]),b.push([x+3,x+5]),b.push([x+4,x+5]);break;case c.QUAD_STRIP:for(x=0;x<g.length-2;x+=2)b.push([x,x+1]),b.push([x,x+2]),b.push([x+1,x+3]);b.push([x,x+1]);break;default:for(x=0;x<g.length;x++)x+1<g.length&&x+1!==v[0]?b.push([x,x+1]):((y||w)&&b.push([x,w]),0<v.length&&(w=v.shift()))}return m!==c.TESS&&y&&b.push([g.length-1,0]),b},u.default.RendererGL.prototype._tesselateShape=function(){for(var m=this,g=(this.immediateMode.shapeMode=c.TRIANGLES,[[]]),y=0;y<this.immediateMode.geometry.vertices.length;y++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===y&&(this.immediateMode.contourIndices.shift(),g.push([])),g[g.length-1].push(this.immediateMode.geometry.vertices[y].x,this.immediateMode.geometry.vertices[y].y,this.immediateMode.geometry.vertices[y].z,this.immediateMode.geometry.uvs[2*y],this.immediateMode.geometry.uvs[2*y+1],this.immediateMode.geometry.vertexColors[4*y],this.immediateMode.geometry.vertexColors[4*y+1],this.immediateMode.geometry.vertexColors[4*y+2],this.immediateMode.geometry.vertexColors[4*y+3],this.immediateMode.geometry.vertexNormals[y].x,this.immediateMode.geometry.vertexNormals[y].y,this.immediateMode.geometry.vertexNormals[y].z);for(var b,x=this._triangulate(g),v=this.immediateMode.geometry.vertices,w=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),_=0,C=x.length;_<C;_+=u.default.RendererGL.prototype.tessyVertexSize)w.push.apply(w,d(x.slice(_+5,_+9))),this.normal.apply(this,d(x.slice(_+9,_+12))),this.vertex.apply(this,d(x.slice(_,_+5)));this.geometryBuilder&&(b=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(S){return S.map(function(E){if(!b.has(E)){var A=v[E],N=m.immediateMode.geometry.vertices.findIndex(function(V){return A.x===V.x&&A.y===V.y&&A.z===V.z});if(N===-1){for(var k=1/0,R=0,I=0;I<m.immediateMode.geometry.vertices.length;I++){var j=m.immediateMode.geometry.vertices[I],M=A.x-j.x,L=A.y-j.y,j=A.z-j.z,M=M*M+L*L+j*j;M<k&&(k=M,R=I)}N=R}b.set(E,N)}return b.get(E)})})),this.immediateMode.geometry.vertexColors=w},u.default.RendererGL.prototype._drawImmediateFill=function(){var m,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,y=this.GL,b=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,m=this._getImmediateFillShader(),this._setFillUniforms(m),!0),x=!1,v=void 0;try{for(var w,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(b=(w=_.next()).done);b=!0)w.value._prepareBuffer(this.immediateMode.geometry,m)}catch(C){x=!0,v=C}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}if(m.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),g===1)y.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{y.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,g)}catch{console.log("\u{1F338} p5.js says: Instancing is only supported in WebGL2 mode")}m.unbindShader()},u.default.RendererGL.prototype._drawImmediateStroke=function(){var m=this.GL,g=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),y=(this._setStrokeUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(this.immediateMode.geometry,g)}catch(_){b=!0,x=_}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),m.drawArrays(m.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),g.unbindShader()},u.default.RendererGL);s.default=h},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(o,i,s){"use strict";function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(p)}function l(p){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(h){return a(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":a(h)})(p)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.fill"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.some"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.float32-array"),o("core-js/modules/es.typed-array.uint16-array"),o("core-js/modules/es.typed-array.uint32-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=(d=o("../core/main"))&&d.__esModule?d:{default:d},c=(o("./p5.RendererGL"),o("./p5.RenderBuffer"),function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var h=f();if(h&&h.has(p))return h.get(p);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in p){var b;Object.prototype.hasOwnProperty.call(p,m)&&((b=y?Object.getOwnPropertyDescriptor(p,m):null)&&(b.get||b.set)?Object.defineProperty(g,m,b):g[m]=p[m])}return g.default=p,h&&h.set(p,g),g}(o("../core/constants")));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}u.default.RendererGL.prototype.freeGeometry=function(p){p.gid?this._freeBuffers(p.gid):console.warn("The model you passed to freeGeometry does not have an id!")},u.default.RendererGL.prototype._initBufferDefaults=function(p){var h;return this._freeBuffers(p),1e3<Object.keys(this.retainedMode.geometry).length&&(h=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(h)),this.retainedMode.geometry[p]={}},u.default.RendererGL.prototype._freeBuffers=function(p){var h,m=this.retainedMode.geometry[p];function g(y){var b=!0,x=!1,v=void 0;try{for(var w,_=y[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var C=w.value;m[C.dst]&&(h.deleteBuffer(m[C.dst]),m[C.dst]=null)}}catch(S){x=!0,v=S}finally{try{b||_.return==null||_.return()}finally{if(x)throw v}}}m&&(delete this.retainedMode.geometry[p],h=this.GL,m.indexBuffer&&h.deleteBuffer(m.indexBuffer),g(this.retainedMode.buffers.stroke),g(this.retainedMode.buffers.fill))},u.default.RendererGL.prototype.createBuffers=function(x,h){var m,g,y,b=this.GL,x=this._initBufferDefaults(x),v=(x.model=h,x.indexBuffer);return h.faces.length?(v=v||(x.indexBuffer=b.createBuffer()),y=(g=(m=u.default.RendererGL.prototype._flatten(h.faces)).some(function(w){return 65535<w}))?Uint32Array:Uint16Array,this._bindBuffer(v,b.ELEMENT_ARRAY_BUFFER,m,y),x.indexBufferType=g?b.UNSIGNED_INT:b.UNSIGNED_SHORT,x.vertexCount=3*h.faces.length):(v&&(b.deleteBuffer(v),x.indexBuffer=null),x.vertexCount=h.vertices?h.vertices.length:0),x.lineVertexCount=h.lineVertices?h.lineVertices.length/3:0,x},u.default.RendererGL.prototype.drawBuffers=function(p){var h=this.GL,m=this.retainedMode.geometry[p];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[p].vertexCount){this._useVertexColor=0<m.model.vertexColors.length;var g=this._getRetainedFillShader(),y=(this._setFillUniforms(g),!0),b=!1,x=void 0;try{for(var v,w=this.retainedMode.buffers.fill[Symbol.iterator]();!(y=(v=w.next()).done);y=!0)v.value._prepareBuffer(m,g)}catch(A){b=!0,x=A}finally{try{y||w.return==null||w.return()}finally{if(b)throw x}}g.disableRemainingAttributes(),m.indexBuffer&&this._bindBuffer(m.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,m.model.hasFillTransparency()),this._drawElements(h.TRIANGLES,p),g.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<m.lineVertexCount){this._useLineColor=0<m.model.vertexStrokeColors.length;var _=this._getRetainedStrokeShader(),C=(this._setStrokeUniforms(_),!0),b=!1,x=void 0;try{for(var S,E=this.retainedMode.buffers.stroke[Symbol.iterator]();!(C=(S=E.next()).done);C=!0)S.value._prepareBuffer(m,_)}catch(k){b=!0,x=k}finally{try{C||E.return==null||E.return()}finally{if(b)throw x}}_.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,m.model.hasStrokeTransparency()),this._drawArrays(h.TRIANGLES,p),_.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(m),this},u.default.RendererGL.prototype.drawBuffersScaled=function(p,h,m,g){var y=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,m,g),this.drawBuffers(p)}finally{this.uMVMatrix=y}},u.default.RendererGL.prototype._drawArrays=function(p,h){return this.GL.drawArrays(p,0,this.retainedMode.geometry[h].lineVertexCount),this},u.default.RendererGL.prototype._drawElements=function(p,m){var m=this.retainedMode.geometry[m],g=this.GL;if(m.indexBuffer){if(this._pInst.webglVersion!==c.WEBGL2&&m.indexBufferType===g.UNSIGNED_INT&&!g.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");g.drawElements(g.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else g.drawArrays(p||g.TRIANGLES,0,m.vertexCount)},u.default.RendererGL.prototype._drawPoints=function(p,h){var m=this.GL,g=this._getImmediatePointShader();this._setPointUniforms(g),this._bindBuffer(h,m.ARRAY_BUFFER,this._vToNArray(p),Float32Array,m.STATIC_DRAW),g.enableAttrib(g.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),m.drawArrays(m.Points,0,p.length),g.unbindShader()};var d=u.default.RendererGL;s.default=d},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(I,i,s){"use strict";function a(U){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(U)}function l(U){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(Y){return a(Y)}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":a(Y)})(U)}I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.concat"),I("core-js/modules/es.array.copy-within"),I("core-js/modules/es.array.every"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.flat"),I("core-js/modules/es.array.flat-map"),I("core-js/modules/es.array.from"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.array.map"),I("core-js/modules/es.array.slice"),I("core-js/modules/es.array.some"),I("core-js/modules/es.array.unscopables.flat"),I("core-js/modules/es.array.unscopables.flat-map"),I("core-js/modules/es.map"),I("core-js/modules/es.object.assign"),I("core-js/modules/es.object.get-own-property-descriptor"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.reflect.construct"),I("core-js/modules/es.reflect.get"),I("core-js/modules/es.regexp.to-string"),I("core-js/modules/es.set"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.float64-array"),I("core-js/modules/es.typed-array.int16-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint16-array"),I("core-js/modules/es.typed-array.uint32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.weak-map"),I("core-js/modules/web.dom-collections.iterator"),I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.concat"),I("core-js/modules/es.array.copy-within"),I("core-js/modules/es.array.every"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.flat"),I("core-js/modules/es.array.flat-map"),I("core-js/modules/es.array.from"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.array.map"),I("core-js/modules/es.array.slice"),I("core-js/modules/es.array.some"),I("core-js/modules/es.array.unscopables.flat"),I("core-js/modules/es.array.unscopables.flat-map"),I("core-js/modules/es.map"),I("core-js/modules/es.object.assign"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.set"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.float64-array"),I("core-js/modules/es.typed-array.int16-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint16-array"),I("core-js/modules/es.typed-array.uint32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.readPixelsWebGL=V,s.readPixelWebGL=G,s.default=void 0;var u=m(I("../core/main")),c=function(U){if(U&&U.__esModule)return U;if(U===null||l(U)!=="object"&&typeof U!="function")return{default:U};var Y=h();if(Y&&Y.has(U))return Y.get(U);var X,pe={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(X in U){var O;Object.prototype.hasOwnProperty.call(U,X)&&((O=$?Object.getOwnPropertyDescriptor(U,X):null)&&(O.get||O.set)?Object.defineProperty(pe,X,O):pe[X]=U[X])}return pe.default=U,Y&&Y.set(U,pe),pe}(I("../core/constants")),f=m(I("./GeometryBuilder")),d=m(I("libtess")),p=(I("./p5.Shader"),I("./p5.Camera"),I("../core/p5.Renderer"),I("./p5.Matrix"),I("./p5.Framebuffer"),I("path"),I("./p5.Texture"));function h(){var U;return typeof WeakMap!="function"?null:(U=new WeakMap,h=function(){return U},U)}function m(U){return U&&U.__esModule?U:{default:U}}function g(U){return function(Y){if(Array.isArray(Y)){for(var X=0,pe=new Array(Y.length);X<Y.length;X++)pe[X]=Y[X];return pe}}(U)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(U)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(U,Y){for(var X=0;X<Y.length;X++){var pe=Y[X];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(U,pe.key,pe)}}function b(U,Y,X){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(z,$,O){var z=function(q,ee){for(;!Object.prototype.hasOwnProperty.call(q,ee)&&(q=_(q))!==null;);return q}(z,$);if(z)return(z=Object.getOwnPropertyDescriptor(z,$)).get?z.get.call(O):z.value})(U,Y,X||U)}function x(U,Y){return(x=Object.setPrototypeOf||function(X,pe){return X.__proto__=pe,X})(U,Y)}function v(U){return function(){var Y,X,pe=_(U);return Y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Y=_(this).constructor,Reflect.construct(pe,arguments,Y)):pe.apply(this,arguments),pe=this,!(X=Y)||l(X)!=="object"&&typeof X!="function"?w(pe):X}}function w(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function _(U){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(U)}function C(U,Y,X){Y in U?Object.defineProperty(U,Y,{value:X,enumerable:!0,configurable:!0,writable:!0}):U[Y]=X}function S(U,Y){R+="#define STROKE_CAP_".concat(U," ").concat(Y,`
`),N[c[U]]=Y}function E(U,Y){R+="#define STROKE_JOIN_".concat(U," ").concat(Y,`
`),k[c[U]]=Y}var A,N={},k={},R="",I=(S("ROUND",0),S("PROJECT",1),S("SQUARE",2),E("ROUND",0),E("MITER",1),E("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),L={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:I+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:I+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:R+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:R+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},j=L.sphereMappingFrag;for(A in L)L[A]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+L[A];C(I={},c.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),C(I,c.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),C(I,c.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),C(I,c.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),C(I,c.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),C(I,c.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),C(I,c.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),C(I,c.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var M=I;function V(U,Y,le,pe,$,O,z,q,ee,ae){var Q=Y.getParameter(Y.FRAMEBUFFER_BINDING),le=(Y.bindFramebuffer(Y.FRAMEBUFFER,le),q===Y.RGBA?4:3),ie=O*z*le,Z=ee===Y.UNSIGNED_BYTE?Uint8Array:Float32Array;if(U instanceof Z&&U.length===ie||(U=new Z(ie)),Y.readPixels(pe,ae?ae-$-z:$,O,z,q,ee,U),Y.bindFramebuffer(Y.FRAMEBUFFER,Q),ae)for(var ge=Math.floor(z/2),ne=new Z(O*le),ye=0;ye<ge;ye++){var xe=ye*O*4,Ne=(z-ye-1)*O*4;ne.set(U.subarray(xe,xe+4*O)),U.copyWithin(xe,Ne,Ne+4*O),U.set(ne,Ne)}return U}function G(U,ee,X,pe,$,O,z){var q=U.getParameter(U.FRAMEBUFFER_BINDING),ee=(U.bindFramebuffer(U.FRAMEBUFFER,ee),$===U.RGBA?4:3),ee=new(O===U.UNSIGNED_BYTE?Uint8Array:Float32Array)(ee);return U.readPixels(X,z?z-pe-1:pe,1,1,$,O,ee),U.bindFramebuffer(U.FRAMEBUFFER,q),Array.from(ee)}u.default.prototype.setAttributes=function(U,Y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var X=!0;if(Y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[U]!==Y&&(this._glAttributes[U]=Y,X=!1)):U instanceof Object&&this._glAttributes!==U&&(this._glAttributes=U,X=!1),this._renderer.isP3D&&!X){if(!this._setupDone){for(var pe in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(pe))return void u.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},u.default.RendererGL=function(U){var Y=$;if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(U&&U.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),U&&x(Y,U);var X,pe=v($);function $(O,z,q,ee){if(this instanceof $)return(O=pe.call(this,O,z,q))._setAttributeDefaults(z),O._initContext(),O.isP3D=!0,O.geometryBuilder=void 0,O.GL=O.drawingContext,O._pInst._setProperty("drawingContext",O.drawingContext),O._isErasing=!1,O._clipDepths=[],O._isClipApplied=!1,O._stencilTestOn=!1,O._enableLighting=!1,O.ambientLightColors=[],O.mixedAmbientLight=[],O.mixedSpecularColor=[],O.specularColors=[1,1,1],O.directionalLightDirections=[],O.directionalLightDiffuseColors=[],O.directionalLightSpecularColors=[],O.pointLightPositions=[],O.pointLightDiffuseColors=[],O.pointLightSpecularColors=[],O.spotLightPositions=[],O.spotLightDirections=[],O.spotLightDiffuseColors=[],O.spotLightSpecularColors=[],O.spotLightAngle=[],O.spotLightConc=[],O.activeImageLight=null,O.diffusedTextures=new Map,O.specularTextures=new Map,O.drawMode=c.FILL,O.curFillColor=O._cachedFillStyle=[1,1,1,1],O.curAmbientColor=O._cachedFillStyle=[1,1,1,1],O.curSpecularColor=O._cachedFillStyle=[0,0,0,0],O.curEmissiveColor=O._cachedFillStyle=[0,0,0,0],O.curStrokeColor=O._cachedStrokeStyle=[0,0,0,1],O.curBlendMode=c.BLEND,O.preEraseBlend=void 0,O._cachedBlendMode=void 0,O.webglVersion===c.WEBGL2?O.blendExt=O.GL:O.blendExt=O.GL.getExtension("EXT_blend_minmax"),O._isBlending=!1,O._hasSetAmbient=!1,O._useSpecularMaterial=!1,O._useEmissiveMaterial=!1,O._useNormalMaterial=!1,O._useShininess=1,O._useMetalness=0,O._useLineColor=!1,O._useVertexColor=!1,O.registerEnabled=new Set,O._tint=[255,255,255,255],O.constantAttenuation=1,O.linearAttenuation=0,O.quadraticAttenuation=0,O.uMVMatrix=new u.default.Matrix,O.uPMatrix=new u.default.Matrix,O.uNMatrix=new u.default.Matrix("mat3"),O.curMatrix=new u.default.Matrix("mat3"),O._currentNormal=new u.default.Vector(0,0,1),O._curCamera=new u.default.Camera(w(O)),O._curCamera._computeCameraDefaultSettings(),O._curCamera._setDefaultCamera(),O.filterCamera=new u.default.Camera(w(O)),O.filterCamera._computeCameraDefaultSettings(),O.filterCamera._setDefaultCamera(),O.prevTouches=[],O.zoomVelocity=0,O.rotateVelocity=new u.default.Vector(0,0),O.moveVelocity=new u.default.Vector(0,0),O.executeZoom=!1,O.executeRotateAndMove=!1,O.specularShader=void 0,O.sphereMapping=void 0,O.diffusedShader=void 0,O._defaultLightShader=void 0,O._defaultImmediateModeShader=void 0,O._defaultNormalShader=void 0,O._defaultColorShader=void 0,O._defaultPointShader=void 0,O.userFillShader=void 0,O.userStrokeShader=void 0,O.userPointShader=void 0,O.retainedMode={geometry:{},buffers:{stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(O)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(O)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(O)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(O)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(O))],fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(O),O._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(O),O._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(O)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(O)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(O),O._flatten)],text:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(O),O._vToNArray),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(O),O._flatten)]}},O.immediateMode={geometry:new u.default.Geometry,shapeMode:c.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new u.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(O),O._vToNArray),new u.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(O),O._vToNArray),new u.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(O)),new u.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(O)),new u.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(O),O._flatten)],stroke:[new u.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(O)),new u.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(O)),new u.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(O)),new u.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(O)),new u.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(O))],point:O.GL.createBuffer()}},O.pointSize=5,O.curStrokeWeight=1,O.curStrokeCap=c.ROUND,O.curStrokeJoin=c.ROUND,O.textures=new Map,O.framebuffers=new Set,O.activeFramebuffers=[],O.filterShader=void 0,O.filterLayer=void 0,O.filterLayerTemp=void 0,O.defaultFilterShaders={},O.textureMode=c.IMAGE,O.textureWrapX=c.CLAMP,O.textureWrapY=c.CLAMP,O._tex=null,O._curveTightness=6,O._lookUpTableBezier=[],O._lookUpTableQuadratic=[],O._lutBezierDetail=0,O._lutQuadraticDetail=0,O.isProcessingVertices=!1,O._tessy=O._initTessy(),O.fontInfos={},O._curShader=void 0,O;throw new TypeError("Cannot call a class as a function")}return Y=$,(U=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new f.default(this)}},{key:"endGeometry",value:function(){var O;if(this.geometryBuilder)return O=this.geometryBuilder.finish(),this.geometryBuilder=void 0,O;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(O){return this.beginGeometry(),O(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(O){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};O._glAttributes===null?O._glAttributes=z:O._glAttributes=Object.assign(z,O._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?c.WEBGL2:c.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var O=this.drawingContext;O.enable(O.DEPTH_TEST),O.depthFunc(O.LEQUAL),O.viewport(0,0,O.drawingBufferWidth,O.drawingBufferHeight),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var O=this.drawingContext;return O.getParameter(O.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(O,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var ee=this._maxTextureSize,ee=(u.default.prototype._maxAllowedPixelDimensions,Math.floor(ee/this.pixelDensity())),q=Math.min(O,ee),ee=Math.min(z,ee);return q===O&&ee===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(q,", height: ").concat(ee,".")),{adjustedWidth:q,adjustedHeight:ee}}},{key:"_resetContext",value:function(O,z){var q,ee=this.width,ae=this.height,le=this.canvas.id,Q=this._pInst instanceof u.default.Graphics,le=(Q?((q=this._pInst).canvas.parentNode.removeChild(q.canvas),q.canvas=document.createElement("canvas"),(q._pInst._userNode||document.body).appendChild(q.canvas),u.default.Element.call(q,q.canvas,q._pInst),q.width=ee,q.height=ae):((q=this.canvas)&&q.parentNode.removeChild(q),(q=document.createElement("canvas")).id=le,(this._pInst._userNode||document.body).appendChild(q),this._pInst.canvas=q,this.canvas=q),new u.default.RendererGL(this._pInst.canvas,this._pInst,!Q));this._pInst._setProperty("_renderer",le),le.resize(ee,ae),le._applyDefaults(),Q||this._pInst._elements.push(le),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,O)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var ee=(ee=this._pInst).color.apply(ee,arguments),O=ee.levels[0]/255,z=ee.levels[1]/255,q=ee.levels[2]/255,ee=ee.levels[3]/255;this.clear(O,z,q,ee)}},{key:"fill",value:function(O,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ae._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(O,z,q,ee){var ae=u.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ae._array}},{key:"strokeCap",value:function(O){this.curStrokeCap=O}},{key:"strokeJoin",value:function(O){this.curStrokeJoin=O}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(O,z){O.width===z.width&&O.height===z.height||O.resize(z.width,z.height),O.pixelDensity()!==z.pixelDensity()&&O.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var O,z,q=this,ee=this.getFilterLayer(),ae=void 0,Q=void 0,le=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(Q=arguments.length<=0?void 0:arguments[0],C(O={},c.BLUR,3),C(O,c.POSTERIZE,4),C(O,c.THRESHOLD,.5),ae=Q in(O=O)&&(arguments.length<=1?void 0:arguments[1])===void 0?O[Q]:arguments.length<=1?void 0:arguments[1],Q in this.defaultFilterShaders||(this.defaultFilterShaders[Q]=new u.default.Shader(ee._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,M[Q])),this.filterShader=this.defaultFilterShaders[Q]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ie=(this.matchSize(ee,le),ee.draw(function(){return q._pInst.clear()}),[1/(le.width*le.pixelDensity()),1/(le.height*le.pixelDensity())]);Q===c.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,le),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(c.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ie),this.filterShader.setUniform("canvasSize",[le.width,le.height]),this.filterShader.setUniform("radius",Math.max(1,ae)),z.draw(function(){q.filterShader.setUniform("direction",[1,0]),q.filterShader.setUniform("tex0",le),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),ee.draw(function(){q.filterShader.setUniform("direction",[0,1]),q.filterShader.setUniform("tex0",z),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.pop()):ee.draw(function(){q._pInst.noStroke(),q._pInst.blendMode(c.BLEND),q._pInst.shader(q.filterShader),q.filterShader.setUniform("tex0",le),q.filterShader.setUniform("texelSize",ie),q.filterShader.setUniform("canvasSize",[le.width,le.height]),q.filterShader.setUniform("filterParameter",ae),q._pInst.noLights(),q._pInst.plane(le.width,le.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(c.CORNER),this._pInst.blendMode(c.BLEND),le.filterCamera._resize(),this._pInst.setCamera(le.filterCamera),this._pInst.resetMatrix(),this._pInst.image(ee,-le.width/2,-le.height/2,le.width,le.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(O){return O?this._pInst.pixelDensity(O):this._pInst.pixelDensity()}},{key:"blendMode",value:function(O){O===c.DARKEST||O===c.LIGHTEST||O===c.ADD||O===c.BLEND||O===c.SUBTRACT||O===c.SCREEN||O===c.EXCLUSION||O===c.REPLACE||O===c.MULTIPLY||O===c.REMOVE?this.curBlendMode=O:O!==c.BURN&&O!==c.OVERLAY&&O!==c.HARD_LIGHT&&O!==c.SOFT_LIGHT&&O!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(O,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(c.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,O/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var O=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},O=(b(_($.prototype),"beginClip",this).call(this,O),this.drawTarget()._isClipApplied=!0,this.GL);O.clearStencil(0),O.clear(O.STENCIL_BUFFER_BIT),O.enable(O.STENCIL_TEST),this._stencilTestOn=!0,O.stencilFunc(O.ALWAYS,1,255),O.stencilOp(O.KEEP,O.KEEP,O.REPLACE),O.disable(O.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var O=this.GL;O.stencilOp(O.KEEP,O.KEEP,O.KEEP),O.stencilFunc(this._clipInvert?O.EQUAL:O.NOTEQUAL,0,255),O.enable(O.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),b(_($.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(O){this.curStrokeWeight!==O&&(this.pointSize=O,this.curStrokeWeight=O)}},{key:"_getPixel",value:function(O,z){var q=this.GL;return G(q,null,O,z,q.RGBA,q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var O,z,q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(O=this._pInst._pixelDensity,z=this.GL,q._setProperty("pixels",V(q.pixels,z,null,0,0,this.width*O,this.height*O,z.RGBA,z.UNSIGNED_BYTE,this.height*O)))}},{key:"updatePixels",value:function(){var O=this._getTempFramebuffer();O.pixels=this._pixelsState.pixels,O.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(c.CENTER),this._pInst.image(O,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:c.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:c.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(O){return this.retainedMode.geometry[O]!==void 0}},{key:"viewport",value:function(O,z){this._viewport=[0,0,O,z],this.GL.viewport(0,0,O,z)}},{key:"resize",value:function(ae,ee){u.default.Renderer.prototype.resize.call(this,ae,ee),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var ae=this._pixelsState,q=(ae.pixels!==void 0&&ae._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),ee=!1,ae=void 0;try{for(var Q,le=this.framebuffers[Symbol.iterator]();!(q=(Q=le.next()).done);q=!0)Q.value._canvasSizeChanged()}catch(ie){ee=!0,ae=ie}finally{try{q||le.return==null||le.return()}finally{if(ee)throw ae}}}},{key:"clear",value:function(){var O=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,q=(arguments.length<=2?void 0:arguments[2])||0,ee=(arguments.length<=3?void 0:arguments[3])||0,ae=this.activeFramebuffer();ae&&ae.format===c.UNSIGNED_BYTE&&!ae.antialias&&ee===0&&(ee=1e-10),this.GL.clearColor(O*ee,z*ee,q*ee,ee),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(O,z,q,ee,ae,Q){arguments.length===16?u.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([O,z,0,0,q,ee,0,0,0,0,1,0,ae,Q,0,1])}},{key:"translate",value:function(O,z,q){return O instanceof u.default.Vector&&(q=O.z,z=O.y,O=O.x),this.uMVMatrix.translate([O,z,q]),this}},{key:"scale",value:function(O,z,q){return this.uMVMatrix.scale(O,z,q),this}},{key:"rotate",value:function(O,z){return z===void 0?this.rotateZ(O):(u.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(O){return this.rotate(O,1,0,0),this}},{key:"rotateY",value:function(O){return this.rotate(O,0,1,0),this}},{key:"rotateZ",value:function(O){return this.rotate(O,0,0,1),this}},{key:"push",value:function(){var O=u.default.Renderer.prototype.push.apply(this),z=O.properties;return z.uMVMatrix=this.uMVMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,O}},{key:"pop",value:function(){var O;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,q=new Array(z),ee=0;ee<z;ee++)q[ee]=arguments[ee];(O=b(_($.prototype),"pop",this)).call.apply(O,[this].concat(q)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var O=this.drawTarget();O._isClipApplied!==this._stencilTestOn&&(O._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var O=this.userStrokeShader;return O&&O.isStrokeShader()?O:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(O){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(j)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",O),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var O=this.userFillShader;if(this._useNormalMaterial&&(!O||!O.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!O||!O.isLightShader())return this._getLightShader()}else if(this._tex){if(!O||!O.isTextureShader())return this._getLightShader()}else if(!O)return this._getImmediateModeShader();return O}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var O=this.userFillShader;if(this._enableLighting){if(!O||!O.isLightShader())return this._getLightShader()}else if(this._tex){if(!O||!O.isTextureShader())return this._getLightShader()}else if(!O)return this._getColorShader();return O}},{key:"_getImmediatePointShader",value:function(){var O=this.userPointShader;return O&&O.isPointShader()?O:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+L.phongFrag):this._defaultLightShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+L.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+L.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===c.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new u.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(O,z){var q="";return this.webglVersion===c.WEBGL2&&(q+=`#version 300 es
#define WEBGL2
`),O==="vert"?q+=`#define VERTEX_SHADER
`:O==="frag"&&(q+=`#define FRAGMENT_SHADER
`),z&&(q+="precision ".concat(z,` float;
`)),q}},{key:"_getEmptyTexture",value:function(){var O;return this._emptyTexture||((O=new u.default.Image(1,1)).set(0,0,255),this._emptyTexture=new u.default.Texture(this,O)),this._emptyTexture}},{key:"getTexture",value:function(O){O instanceof u.default.Framebuffer&&(O=O.color);var z=this.textures.get(O);return z||(z=new u.default.Texture(this,O),this.textures.set(O,z),z)}},{key:"getDiffusedTexture",value:function(O){var z,q,ee=this;return this.diffusedTextures.get(O)!=null?this.diffusedTextures.get(O):(z=Math.floor(O.height/O.width*200),q=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(L.imageLightVert,L.imageLightDiffusedFrag)),q.draw(function(){ee._pInst.shader(ee.diffusedShader),ee.diffusedShader.setUniform("environmentMap",O),ee._pInst.noStroke(),ee._pInst.rectMode(c.CENTER),ee._pInst.noLights(),ee._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(O,q),q)}},{key:"getSpecularTexture",value:function(O){var z=this;if(this.specularTextures.get(O)!=null)return this.specularTextures.get(O);for(var q,ee=[],ae=this._pInst.createFramebuffer({width:512,height:512,density:1}),Q=Math.log(512)/Math.log(2),le=(this.specularShader||(this.specularShader=this._pInst.createShader(L.imageLightVert,L.imageLightSpecularFrag)),512);1<=le;le/=2)(function(ie){ae.resize(ie,ie);var Z=1-Math.log(ie)/Math.log(2)/Q;ae.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",O),z.specularShader.setUniform("roughness",Z),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(ie,ie)}),ee.push(ae.get().drawingContext.getImageData(0,0,ie,ie))})(le);return ae.remove(),q=new p.MipmapTexture(this,ee,{}),this.specularTextures.set(O,q),q}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(O){return new u.default.Framebuffer(this,O)}},{key:"_setStrokeUniforms",value:function(O){O.bindShader(),O.setUniform("uUseLineColor",this._useLineColor),O.setUniform("uMaterialColor",this.curStrokeColor),O.setUniform("uStrokeWeight",this.curStrokeWeight),O.setUniform("uStrokeCap",N[this.curStrokeCap]),O.setUniform("uStrokeJoin",k[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(O){var z=this,q=(O.bindShader(),this.mixedSpecularColor=g(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(ee,ae){return z.curFillColor[ae]*z._useMetalness+ee*(1-z._useMetalness)})),O.setUniform("uUseVertexColor",this._useVertexColor),O.setUniform("uMaterialColor",this.curFillColor),O.setUniform("isTexture",!!this._tex),this._tex&&O.setUniform("uSampler",this._tex),O.setUniform("uTint",this._tint),O.setUniform("uHasSetAmbient",this._hasSetAmbient),O.setUniform("uAmbientMatColor",this.curAmbientColor),O.setUniform("uSpecularMatColor",this.mixedSpecularColor),O.setUniform("uEmissiveMatColor",this.curEmissiveColor),O.setUniform("uSpecular",this._useSpecularMaterial),O.setUniform("uEmissive",this._useEmissiveMaterial),O.setUniform("uShininess",this._useShininess),O.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(O),O.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),q=(O.setUniform("uPointLightCount",q),O.setUniform("uPointLightLocation",this.pointLightPositions),O.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),O.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),q=(O.setUniform("uDirectionalLightCount",q),O.setUniform("uLightingDirection",this.directionalLightDirections),O.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),O.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),q=(this.mixedAmbientLight=g(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(ee){return ee-=z._useMetalness,Math.max(0,ee)})),O.setUniform("uAmbientLightCount",q),O.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);O.setUniform("uSpotLightCount",q),O.setUniform("uSpotLightAngle",this.spotLightAngle),O.setUniform("uSpotLightConc",this.spotLightConc),O.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),O.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),O.setUniform("uSpotLightLocation",this.spotLightPositions),O.setUniform("uSpotLightDirection",this.spotLightDirections),O.setUniform("uConstantAttenuation",this.constantAttenuation),O.setUniform("uLinearAttenuation",this.linearAttenuation),O.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),O.bindTextures()}},{key:"_setImageLightUniforms",value:function(O){var z,q;O.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),O.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),q=20/this._useShininess,O.setUniform("levelOfDetail",8*q),O.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(O){O.bindShader(),O.setUniform("uMaterialColor",this.curStrokeColor),O.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(O,z,q,ee,ae){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,O),q!==void 0&&((O=q)instanceof u.default.DataArray?O=q.dataArray():O instanceof(ee||Float32Array)||(O=new(ee||Float32Array)(O)),this.GL.bufferData(z,O,ae||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(O,z){return O.length===z.length&&O.every(function(q,ee){return q===z[ee]})}},{key:"_isTypedArray",value:function(O){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return O instanceof z})}},{key:"_flatten",value:function(O){return O.flat()}},{key:"_vToNArray",value:function(O){return O.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(O){var z=O*O,q=1-O,ee=q*q;return[ee*q,3*ee*O,3*q*z,z*O]}},{key:"_quadraticCoefficients",value:function(O){var z=1-O;return[z*z,2*z*O,O*O]}},{key:"_bezierToCatmull",value:function(O){return[O[1],O[1]+(O[2]-O[0])/this._curveTightness,O[2]-(O[3]-O[1])/this._curveTightness,O[2]]}},{key:"_initTessy",value:function(){var O=new d.default.GluTesselator;return O.gluTessCallback(d.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,q){var ee=!0,ae=!1,Q=void 0;try{for(var le,ie=z[Symbol.iterator]();!(ee=(le=ie.next()).done);ee=!0){var Z=le.value;q.push(Z)}}catch(ge){ae=!0,Q=ge}finally{try{ee||ie.return==null||ie.return()}finally{if(ae)throw Q}}}),O.gluTessCallback(d.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==d.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),O.gluTessCallback(d.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),O.gluTessCallback(d.default.gluEnum.GLU_TESS_COMBINE,function(z,q,ee){for(var ae=new Array(u.default.RendererGL.prototype.tessyVertexSize).fill(0),Q=0;Q<ee.length;Q++)for(var le=0;le<ae.length;le++)ee[Q]!==0&&q[Q]&&(ae[le]+=q[Q][le]*ee[Q]);return ae}),O.gluTessCallback(d.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),O.gluTessProperty(d.default.gluEnum.GLU_TESS_WINDING_RULE,d.default.windingRule.GLU_TESS_WINDING_NONZERO),O}},{key:"_triangulate",value:function(O){var z=O[0]?O[0][2]:void 0,q=!0,ee=!0,Z=!1,ne=void 0;try{for(var ae,Q=O[Symbol.iterator]();!(ee=(ae=Q.next()).done);ee=!0)for(var le=ae.value,ie=0;ie<le.length;ie+=u.default.RendererGL.prototype.tessyVertexSize)if(le[ie+2]!==z){q=!1;break}}catch(lt){Z=!0,ne=lt}finally{try{ee||Q.return==null||Q.return()}finally{if(Z)throw ne}}q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var Z=[],ge=(this._tessy.gluTessBeginPolygon(Z),!0),ne=!1,ye=void 0;try{for(var xe,Ne=O[Symbol.iterator]();!(ge=(xe=Ne.next()).done);ge=!0){var Ae=xe.value;this._tessy.gluTessBeginContour();for(var Re=0;Re<Ae.length;Re+=u.default.RendererGL.prototype.tessyVertexSize){var ze=Ae.slice(Re,Re+u.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(ze,ze)}this._tessy.gluTessEndContour()}}catch(lt){ne=!0,ye=lt}finally{try{ge||Ne.return==null||Ne.return()}finally{if(ne)throw ye}}return this._tessy.gluTessEndPolygon(),Z}}])&&y(Y.prototype,U),X&&y(Y,X),$}(u.default.Renderer),u.default.prototype._assert3d=function(U){if(!this._renderer.isP3D)throw new Error("".concat(U,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},u.default.RendererGL.prototype.tessyVertexSize=12,I=u.default.RendererGL,s.default=I},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(o,i,s){"use strict";o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.index-of"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.array.some"),o("core-js/modules/es.function.name"),o("core-js/modules/es.object.keys"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(o=o("../core/main"))&&o.__esModule?o:{default:o};function l(u,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}a.default.Shader=function(){function u(p,h,m){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=h,this._fragSrc=m,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var c,f,d;return c=u,(f=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return a.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return a.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||a.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(p){var h=new a.default.Shader(p._renderer,this._vertSrc,this._fragSrc);return h.ensureCompiledOnContext(p),h}},{key:"ensureCompiledOnContext",value:function(p){if(this._glProgram!==0&&this._renderer!==p._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=p._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,h=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),m=0;m<h;++m){var g=p.getActiveAttrib(this._glProgram,m),y=g.name,b=p.getAttribLocation(this._glProgram,y),x={};x.name=y,x.location=b,x.index=m,x.type=g.type,x.size=g.size,this.attributes[y]=x}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,h=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),m=0,g=0;g<h;++g){var y=p.getActiveUniform(this._glProgram,g),b={},x=(b.location=p.getUniformLocation(this._glProgram,y.name),b.size=y.size,y.name);1<y.size&&(x=x.substring(0,x.indexOf("[0]"))),b.name=x,b.type=y.type,b._cachedData=void 0,b.type===p.SAMPLER_2D&&(b.samplerIndex=m,m++,this.samplers.push(b)),b.isArray=1<y.size||b.type===p.FLOAT_MAT3||b.type===p.FLOAT_MAT4||b.type===p.FLOAT_VEC2||b.type===p.FLOAT_VEC3||b.type===p.FLOAT_VEC4||b.type===p.INT_VEC2||b.type===p.INT_VEC4||b.type===p.INT_VEC3,this.uniforms[x]=b}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,h=!0,m=!1,g=void 0;try{for(var y,b=this.samplers[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var x=y.value,v=x.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+x.samplerIndex),v.bindTexture(),v.update(),p.uniform1i(x.location,x.samplerIndex)}}catch(w){m=!0,g=w}finally{try{h||b.return==null||b.return()}finally{if(m)throw g}}}},{key:"updateTextures",value:function(){var p=!0,h=!1,m=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value.texture;b&&b.update()}}catch(x){h=!0,m=x}finally{try{p||y.return==null||y.return()}finally{if(h)throw m}}}},{key:"unbindTextures",value:function(){var p=!0,h=!1,m=void 0;try{for(var g,y=this.samplers[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;this.setUniform(b.name,this._renderer._getEmptyTexture())}}catch(x){h=!0,m=x}finally{try{p||y.return==null||y.return()}finally{if(h)throw m}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,h=this._renderer.uPMatrix,m=this._renderer.uMVMatrix,g=m.copy();g.mult(h),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",h.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,h){var m=this.uniforms[p];if(m){var g=this._renderer.GL;if(m.isArray){if(m._cachedData&&this._renderer._arraysEqual(m._cachedData,h))return;m._cachedData=h.slice(0)}else{if(m._cachedData&&m._cachedData===h)return;Array.isArray(h)?m._cachedData=h.slice(0):m._cachedData=h}var y=m.location;switch(this.useProgram(),m.type){case g.BOOL:h===!0?g.uniform1i(y,1):g.uniform1i(y,0);break;case g.INT:1<m.size?h.length&&g.uniform1iv(y,h):g.uniform1i(y,h);break;case g.FLOAT:1<m.size?h.length&&g.uniform1fv(y,h):g.uniform1f(y,h);break;case g.FLOAT_MAT3:g.uniformMatrix3fv(y,!1,h);break;case g.FLOAT_MAT4:g.uniformMatrix4fv(y,!1,h);break;case g.FLOAT_VEC2:1<m.size?h.length&&g.uniform2fv(y,h):g.uniform2f(y,h[0],h[1]);break;case g.FLOAT_VEC3:1<m.size?h.length&&g.uniform3fv(y,h):g.uniform3f(y,h[0],h[1],h[2]);break;case g.FLOAT_VEC4:1<m.size?h.length&&g.uniform4fv(y,h):g.uniform4f(y,h[0],h[1],h[2],h[3]);break;case g.INT_VEC2:1<m.size?h.length&&g.uniform2iv(y,h):g.uniform2i(y,h[0],h[1]);break;case g.INT_VEC3:1<m.size?h.length&&g.uniform3iv(y,h):g.uniform3i(y,h[0],h[1],h[2]);break;case g.INT_VEC4:1<m.size?h.length&&g.uniform4iv(y,h):g.uniform4i(y,h[0],h[1],h[2],h[3]);break;case g.SAMPLER_2D:g.activeTexture(g.TEXTURE0+m.samplerIndex),m.texture=h instanceof a.default.Texture?h:this._renderer.getTexture(h),g.uniform1i(y,m.samplerIndex),m.texture.src.gifProperties&&m.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(p){return p!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,h,m,g,y,b){var x;return p&&(p=p.location)!==-1&&(x=this._renderer.GL,this._renderer.registerEnabled.has(p)||(x.enableVertexAttribArray(p),this._renderer.registerEnabled.add(p)),this._renderer.GL.vertexAttribPointer(p,h,m||x.FLOAT,g||!1,y||0,b||0)),this}},{key:"disableRemainingAttributes",value:function(){var p=this,h=!0,m=!1,g=void 0;try{for(var y,b=this._renderer.registerEnabled.values()[Symbol.iterator]();!(h=(y=b.next()).done);h=!0)(function(){var x=y.value;Object.keys(p.attributes).some(function(v){return p.attributes[v].location===x})||(p._renderer.GL.disableVertexAttribArray(x),p._renderer.registerEnabled.delete(x))})()}catch(x){m=!0,g=x}finally{try{h||b.return==null||b.return()}finally{if(m)throw g}}}}])&&l(c.prototype,f),d&&l(c,d),u}(),o=a.default.Shader,s.default=o},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.get-prototype-of"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.reflect.construct"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.typed-array.uint8-array"),o("core-js/modules/es.typed-array.copy-within"),o("core-js/modules/es.typed-array.every"),o("core-js/modules/es.typed-array.fill"),o("core-js/modules/es.typed-array.filter"),o("core-js/modules/es.typed-array.find"),o("core-js/modules/es.typed-array.find-index"),o("core-js/modules/es.typed-array.for-each"),o("core-js/modules/es.typed-array.includes"),o("core-js/modules/es.typed-array.index-of"),o("core-js/modules/es.typed-array.iterator"),o("core-js/modules/es.typed-array.join"),o("core-js/modules/es.typed-array.last-index-of"),o("core-js/modules/es.typed-array.map"),o("core-js/modules/es.typed-array.reduce"),o("core-js/modules/es.typed-array.reduce-right"),o("core-js/modules/es.typed-array.reverse"),o("core-js/modules/es.typed-array.set"),o("core-js/modules/es.typed-array.slice"),o("core-js/modules/es.typed-array.some"),o("core-js/modules/es.typed-array.sort"),o("core-js/modules/es.typed-array.subarray"),o("core-js/modules/es.typed-array.to-locale-string"),o("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.checkWebGLCapabilities=x,s.default=s.MipmapTexture=void 0;var u=(b=o("../core/main"))&&b.__esModule?b:{default:b},c=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=f();if(w&&w.has(v))return w.get(v);var _,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=S?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=v[_])}return C.default=v,w&&w.set(v,C),C}(o("../core/constants"));function f(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,f=function(){return v},v)}function d(v,w){return(d=Object.setPrototypeOf||function(_,C){return _.__proto__=C,_})(v,w)}function p(v){return function(){var w,_=h(v),_=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(_,arguments,w)):_.apply(this,arguments),this);if(!w||l(w)!=="object"&&typeof w!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function h(v){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(v)}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function g(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function y(v,w,_){w&&g(v.prototype,w),_&&g(v,_)}u.default.Texture=function(){function v(A,_,E){m(this,v),this._renderer=A;var S=this._renderer.GL,E=(E=E||{},this.src=_,this.glTex=void 0,this.glTarget=S.TEXTURE_2D,this.glFormat=E.format||S.RGBA,this.mipmaps=!1,this.glMinFilter=E.minFilter||S.LINEAR,this.glMagFilter=E.magFilter||S.LINEAR,this.glWrapS=E.wrapS||S.CLAMP_TO_EDGE,this.glWrapT=E.wrapT||S.CLAMP_TO_EDGE,this.glDataType=E.dataType||S.UNSIGNED_BYTE,x(A)),A=(this.glFormat!==S.HALF_FLOAT||E.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=S.FLOAT),this.glFormat!==S.HALF_FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||E.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.glFormat!==S.FLOAT||E.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=S.UNSIGNED_BYTE),this.glFormat!==S.FLOAT||this.glMinFilter!==S.LINEAR&&this.glMagFilter!==S.LINEAR||E.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===S.LINEAR&&(this.glMinFilter=S.NEAREST),this.glMagFilter===S.LINEAR&&(this.glMagFilter=S.NEAREST)),this.isSrcMediaElement=u.default.MediaElement!==void 0&&_ instanceof u.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=u.default.Element!==void 0&&_ instanceof u.default.Element&&!(_ instanceof u.default.Graphics)&&!(_ instanceof u.default.Renderer),this.isSrcP5Image=_ instanceof u.default.Image,this.isSrcP5Graphics=_ instanceof u.default.Graphics,this.isSrcP5Renderer=_ instanceof u.default.Renderer,this.isImageData=typeof ImageData<"u"&&_ instanceof ImageData,this.isFramebufferTexture=_ instanceof u.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=A.width,this.height=A.height,this.init(A),this}return y(v,[{key:"_getTextureDataFromSource",value:function(){var w;return this.isFramebufferTexture?w=this.src.rawTexture():this.isSrcP5Image?w=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?w=this.src.elt:this.isImageData&&(w=this.src),w}},{key:"init",value:function(w){var _,C=this._renderer.GL;this.isFramebufferTexture||(this.glTex=C.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(_=new Uint8Array([1,1,1,1]),C.texImage2D(this.glTarget,0,C.RGBA,1,1,0,this.glFormat,this.glDataType,_)):C.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w))}},{key:"update",value:function(){var w,_,C,S=this.src;return S.width!==0&&S.height!==0&&!this.isFramebufferTexture&&(w=this._getTextureDataFromSource(),_=!1,C=this._renderer.GL,w.width!==this.width||w.height!==this.height?(_=!0,this.width=w.width||S.width,this.height=w.height||S.height,this.isSrcP5Image?S.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&S.setModified(!0)):this.isSrcP5Image?S.isModified()&&S.setModified(!(_=!0)):this.isSrcMediaElement?S.isModified()?S.setModified(!(_=!0)):S.loadedmetadata&&this._videoPrevUpdateTime!==S.time()&&(this._videoPrevUpdateTime=S.time(),_=!0):this.isImageData?S._dirty&&(_=!(S._dirty=!1)):_=!0,_&&(this.bindTexture(),C.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w)),_)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(w,_){var C=this._renderer.GL;this.glMinFilter=this.glFilter(w),this.glMagFilter=this.glFilter(_),this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,this.glMinFilter),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(w){var _=this._renderer.GL;return w===c.NEAREST?_.NEAREST:_.LINEAR}},{key:"setWrapMode",value:function(w,_){function C(N){return(N&N-1)==0}var S=this._renderer.GL,A=this._getTextureDataFromSource(),A=A.naturalWidth&&A.naturalHeight?(E=A.naturalWidth,A.naturalHeight):(E=this.width,this.height),E=C(E),A=C(A);w===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapS=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):w===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapS=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=S.CLAMP_TO_EDGE):this.glWrapS=S.CLAMP_TO_EDGE,_===c.REPEAT?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapT=S.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):_===c.MIRROR?this._renderer.webglVersion===c.WEBGL2||E&&A?this.glWrapT=S.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=S.CLAMP_TO_EDGE):this.glWrapT=S.CLAMP_TO_EDGE,this.bindTexture(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this.glWrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),v}();var b=function(v){var w=C;if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),v&&d(w,v);var _=p(C);function C(S,E,A){return m(this,C),E=(S=_.call(this,S,E,A))._renderer.GL,S.glMinFilter===E.LINEAR&&(S.glMinFilter=E.LINEAR_MIPMAP_LINEAR),S}return y(C,[{key:"glFilter",value:function(S){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(S){var E=this._renderer.GL;this.glTex=E.createTexture(),this.bindTexture();for(var A=0;A<S.length;A++)E.texImage2D(this.glTarget,A,this.glFormat,this.glFormat,this.glDataType,S[A]);this.glMinFilter=E.LINEAR_MIPMAP_LINEAR,E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,this.glMagFilter),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),C}(u.default.Texture);function x(S){var w=S.GL,S=S.webglVersion,_=S===c.WEBGL2?w.getExtension("EXT_color_buffer_float")&&w.getExtension("EXT_float_blend"):w.getExtension("OES_texture_float"),C=_&&w.getExtension("OES_texture_float_linear"),S=S===c.WEBGL2?w.getExtension("EXT_color_buffer_float"):w.getExtension("OES_texture_half_float");return{float:_,floatLinear:C,halfFloat:S,halfFloatLinear:S&&w.getExtension("OES_texture_half_float_linear")}}s.MipmapTexture=b,o=u.default.Texture,s.default=o},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(o,i,s){"use strict";function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(v)}function l(v){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(w){return a(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":a(w)})(v)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.split"),o("core-js/modules/es.string.sub"),o("core-js/modules/web.dom-collections.iterator");var u,c=(u=o("../core/main"))&&u.__esModule?u:{default:u},f=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var w=d();if(w&&w.has(v))return w.get(v);var _,C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=S?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=v[_])}return C.default=v,w&&w.set(v,C),C}(o("../core/constants"));function d(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,d=function(){return v},v)}function p(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}function m(v,w,_){w&&h(v.prototype,w),_&&h(v,_)}o("./p5.Shader"),o("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(v){return this._isOpenType()?this._textFont._textWidth(v,this._textSize):0};var g=function(){function v(w,_){p(this,v),this.width=w,this.height=_,this.infos=[]}return m(v,[{key:"findImage",value:function(w){var _,C,S=this.width*this.height;if(S<w)throw new Error("font is too complex to render in 3D");for(var E=this.infos.length-1;0<=E;--E){var A=this.infos[E];if(A.index+w<S){C=(_=A).imageData;break}}if(!_){try{C=new ImageData(this.width,this.height)}catch{var N=document.getElementsByTagName("canvas")[0],k=!N,R=(N||((N=document.createElement("canvas")).style.display="none",document.body.appendChild(N)),N.getContext("2d"));R&&(C=R.createImageData(this.width,this.height)),k&&document.body.removeChild(N)}this.infos.push(_={index:0,imageData:C})}return R=_.index,_.index+=w,C._dirty=!0,{imageData:C,index:R}}}]),v}();function y(A,w,_,C,S){var E=A.imageData.data,A=4*A.index++;E[A++]=w,E[A++]=_,E[A++]=C,E[+A]=S}var b=Math.sqrt(3),x=function(){function v(w){p(this,v),this.font=w,this.strokeImageInfos=new g(64,64),this.colDimImageInfos=new g(64,64),this.rowDimImageInfos=new g(64,64),this.colCellImageInfos=new g(64,64),this.rowCellImageInfos=new g(64,64),this.glyphInfos={}}return m(v,[{key:"getGlyphInfo",value:function(w){var _=this.glyphInfos[w.index];if(!_){var C=w.getBoundingBox(),S=C.x1,E=C.y1,A=C.x2-S,N=C.y2-E,k=w.path.commands;if(A==0||N==0||!k.length)return this.glyphInfos[w.index]={};for(var R=[],I=[],L=[],j=8;0<=j;--j)L.push([]);for(j=8;0<=j;--j)I.push([]);var M,V,G,U,Y=function(){function Tt(At,Mt,Ot,Le){p(this,Tt),this.p0=At,this.c0=Mt,this.c1=Ot,this.p1=Le}return m(Tt,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(ut){var Mt=c.default.Vector.lerp(this.p0,this.c0,ut),Le=c.default.Vector.lerp(this.c0,this.c1,ut),Ot=c.default.Vector.lerp(Mt,Le,ut),Le=(this.c1=c.default.Vector.lerp(this.c1,this.p1,ut),this.c0=c.default.Vector.lerp(Le,this.c1,ut),c.default.Vector.lerp(Ot,this.c0,ut)),ut=new Tt(this.p0,Mt,Ot,Le);return this.p0=Le,ut}},{key:"splitInflections",value:function(){var At=c.default.Vector.sub(this.c0,this.p0),Mt=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),At),Ot=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),At),c.default.Vector.mult(Mt,2)),Le=[],ut=Mt.x*Ot.y-Mt.y*Ot.x;return ut!==0&&0<=(At=(Ot=At.x*Ot.y-At.y*Ot.x)*Ot-4*ut*(At.x*Mt.y-At.y*Mt.x))&&(ut<0&&(ut=-ut,Ot=-Ot),At=(-Ot+(Mt=Math.sqrt(At)))/(2*ut),0<(Ot=(-Ot-Mt)/(2*ut))&&Ot<1&&(Le.push(this.split(Ot)),At=1-(1-At)/(1-Ot)),0<At&&At<1&&Le.push(this.split(At))),Le.push(this),Le}}]),Tt}(),X=!0,pe=!1,$=void 0;try{for(var O,z=k[Symbol.iterator]();!(X=(O=z.next()).done);X=!0){var q=O.value,ee=(q.x-S)/A,ae=(q.y-E)/N;if(!We(M,V,ee,ae)){switch(q.type){case"M":G=ee,U=ae;break;case"L":lt(M,V,ee,ae);break;case"Q":var Q=(q.x1-S)/A,le=(q.y1-E)/N;Re([M,ee,Q],[V,ae,le],{x:M,y:V,cx:Q,cy:le});break;case"Z":We(M,V,G,U)?R.push({x:M,y:V}):(lt(M,V,G,U),R.push({x:G,y:U}));break;case"C":for(var ie=function(me,Ve,Qe,Ot,Le,ut,Ge,fe){var me=new Y(new c.default.Vector(me,Ve),new c.default.Vector(Qe,Ot),new c.default.Vector(Le,ut),new c.default.Vector(Ge,fe)).splitInflections(),oe=[],be=30/b,Fe=!0,Ve=!1,Qe=void 0;try{for(var _t,Nt=me[Symbol.iterator]();!(Fe=(_t=Nt.next()).done);Fe=!0){for(var Ft=_t.value,Ut=[],en=void 0;!(.125<=(en=be/Ft.quadError()));){var Mr=Math.pow(en,.3333333333333333),ur=Ft.split(Mr),Yr=Ft.split(1-Mr/(1-Mr));oe.push(ur),Ut.push(Ft),Ft=Yr}en<1&&oe.push(Ft.split(.5)),oe.push(Ft),Array.prototype.push.apply(oe,Ut.reverse())}}catch(Fr){Ve=!0,Qe=Fr}finally{try{Fe||Nt.return==null||Nt.return()}finally{if(Ve)throw Qe}}return oe}(M,V,(q.x1-S)/A,(q.y1-E)/N,(q.x2-S)/A,(q.y2-E)/N,ee,ae),Z=0;Z<ie.length;Z++){var ge=ie[Z].toQuadratic();Re([ge.x,ge.x1,ge.cx],[ge.y,ge.y1,ge.cy],ge)}break;default:throw new Error("unknown command type: ".concat(q.type))}M=ee,V=ae}}}catch(Tt){pe=!0,$=Tt}finally{try{X||z.return==null||z.return()}finally{if(pe)throw $}}for(var ne=R.length,ye=this.strokeImageInfos.findImage(ne),xe=ye.index,Ne=0;Ne<ne;++Ne){var Ae=R[Ne];y(ye,ze(Ae.x),ze(Ae.y),ze(Ae.cx),ze(Ae.cy))}(_=this.glyphInfos[w.index]={glyph:w,uGlyphRect:[C.x1,-C.y1,C.x2,-C.y2],strokeImageInfo:ye,strokes:R,colInfo:Bt(L,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Bt(I,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[_.colInfo.dimOffset,_.rowInfo.dimOffset]}return _;function Re(Tt,At,Mt){var Ot=R.length;function Le(oe,be,Fe){for(var Ve=oe.length;0<Ve--;){var Qe=oe[Ve];Qe<be&&(be=Qe),Fe<Qe&&(Fe=Qe)}return{min:be,max:Fe}}R.push(Mt);for(var Mt=Le(Tt,1,0),Tt=Math.max(Math.floor(9*Mt.min-.5),0),ut=Math.min(Math.ceil(9*Mt.max+.5),9),Ge=Tt;Ge<ut;++Ge)L[Ge].push(Ot);for(var Mt=Le(At,1,0),Tt=Math.max(Math.floor(9*Mt.min-.5),0),fe=Math.min(Math.ceil(9*Mt.max+.5),9),me=Tt;me<fe;++me)I[me].push(Ot)}function ze(Tt){return(Tt=(Mt=255)*Tt)<(At=0)?At:Mt<Tt?Mt:Tt;var At,Mt}function lt(Tt,At,Mt,Ot){Re([Tt,Mt],[At,Ot],{x:Tt,y:At,cx:(Tt+Mt)/2,cy:(At+Ot)/2})}function We(Tt,At,Mt,Ot){return Math.abs(Mt-Tt)<1e-5&&Math.abs(Ot-At)<1e-5}function Bt(Tt,At,Mt){for(var Ot=Tt.length,Le=At.findImage(Ot),At=Le.index,ut=0,Ge=0;Ge<Ot;++Ge)ut+=Tt[Ge].length;for(var fe=Mt.findImage(ut),me=0;me<Ot;++me){var oe=Tt[me],be=oe.length,Fe=fe.index;y(Le,Fe>>7,127&Fe,be>>7,127&be);for(var Ve=0;Ve<be;++Ve){var Qe=oe[Ve]+xe;y(fe,Qe>>7,127&Qe,0,0)}}return{cellImageInfo:fe,dimOffset:At,dimImageInfo:Le}}}}]),v}();c.default.RendererGL.prototype._renderText=function(v,w,_,C,S){if(this._textFont&&typeof this._textFont!="string"){if(!(S<=C)&&this._doFill){if(this._isOpenType()){v.push();var S=this._doStroke,E=this.drawMode,A=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),N=(N=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(A)),_=this._textFont._handleAlignment(this,w,_,C),C=this._textSize/A.unitsPerEm,k=(this.translate(_.x,_.y,0),this.scale(C,C,1),this.GL),_=!this._defaultFontShader,R=this._getFontShader(),I=(R.init(),R.bindShader(),_&&(R.setUniform("uGridImageSize",[64,64]),R.setUniform("uCellsImageSize",[64,64]),R.setUniform("uStrokeImageSize",[64,64]),R.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),L=(I||((C=this._textGeom=new c.default.Geometry(1,1,function(){for(var Z=0;Z<=1;Z++)for(var ge=0;ge<=1;ge++)this.vertices.push(new c.default.Vector(ge,Z,0)),this.uvs.push(ge,Z)})).computeFaces().computeNormals(),I=this.createBuffers("glyph",C)),!0),_=!1,C=void 0;try{for(var j,M=this.retainedMode.buffers.text[Symbol.iterator]();!(L=(j=M.next()).done);L=!0)j.value._prepareBuffer(I,R)}catch(Z){_=!0,C=Z}finally{try{L||M.return==null||M.return()}finally{if(_)throw C}}this._bindBuffer(I.indexBuffer,k.ELEMENT_ARRAY_BUFFER),R.setUniform("uMaterialColor",this.curFillColor),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var V=0,G=null,U=A.stringToGlyphs(w),Y=!0,X=!1,pe=void 0;try{for(var $,O=U[Symbol.iterator]();!(Y=($=O.next()).done);Y=!0){var z,q,ee=$.value,ae=(G&&(V+=A.getKerningValue(G,ee)),N.getGlyphInfo(ee));ae.uGlyphRect&&(z=ae.rowInfo,q=ae.colInfo,R.setUniform("uSamplerStrokes",ae.strokeImageInfo.imageData),R.setUniform("uSamplerRowStrokes",z.cellImageInfo.imageData),R.setUniform("uSamplerRows",z.dimImageInfo.imageData),R.setUniform("uSamplerColStrokes",q.cellImageInfo.imageData),R.setUniform("uSamplerCols",q.dimImageInfo.imageData),R.setUniform("uGridOffset",ae.uGridOffset),R.setUniform("uGlyphRect",ae.uGlyphRect),R.setUniform("uGlyphOffset",V),R.bindTextures(),k.drawElements(k.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),V+=ee.advanceWidth,G=ee}}catch(Z){X=!0,pe=Z}finally{try{Y||O.return==null||O.return()}finally{if(X)throw pe}}}finally{R.unbindShader(),this._doStroke=S,this.drawMode=E,k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),v.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return v}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})});var Xre=class{};var Dk=class t{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?typeof r=="string"?this.lazyInit=()=>{this.headers=new Map,r.split(`
`).forEach(n=>{let o=n.indexOf(":");if(o>0){let i=n.slice(0,o),s=i.toLowerCase(),a=n.slice(o+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&r instanceof Headers?(this.headers=new Map,r.forEach((n,o)=>{this.setHeaderEntries(o,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(r).forEach(([n,o])=>{this.setHeaderEntries(n,o)})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();let n=this.headers.get(r.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,n){return this.clone({name:r,value:n,op:"a"})}set(r,n){return this.clone({name:r,value:n,op:"s"})}delete(r,n){return this.clone({name:r,value:n,op:"d"})}maybeSetNormalizedName(r,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,r)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(n=>{this.headers.set(n,r.headers.get(n)),this.normalizedNames.set(n,r.normalizedNames.get(n))})}clone(r){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([r]),n}applyUpdate(r){let n=r.name.toLowerCase();switch(r.op){case"a":case"s":let o=r.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(r.name,n);let i=(r.op==="a"?this.headers.get(n):void 0)||[];i.push(...o),this.headers.set(n,i);break;case"d":let s=r.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(l=>s.indexOf(l)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(r,n){let o=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=r.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(r,i)}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>r(this.normalizedNames.get(n),this.headers.get(n)))}};var Kre=class{encodeKey(r){return YAe(r)}encodeValue(r){return YAe(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}};function $Ct(t,r){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[a,l]=s==-1?[r.decodeKey(i),""]:[r.decodeKey(i.slice(0,s)),r.decodeValue(i.slice(s+1))],u=n.get(a)||[];u.push(l),n.set(a,u)}),n}var zCt=/%(\d[a-f0-9])/gi,UCt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function YAe(t){return encodeURIComponent(t).replace(zCt,(r,n)=>UCt[n]??r)}function _z(t){return`${t}`}var b1=class t{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new Kre,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=$Ct(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(n=>{let o=r.fromObject[n],i=Array.isArray(o)?o.map(_z):[_z(o)];this.map.set(n,i)})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();let n=this.map.get(r);return n?n[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,n){return this.clone({param:r,value:n,op:"a"})}appendAll(r){let n=[];return Object.keys(r).forEach(o=>{let i=r[o];Array.isArray(i)?i.forEach(s=>{n.push({param:o,value:s,op:"a"})}):n.push({param:o,value:i,op:"a"})}),this.clone(n)}set(r,n){return this.clone({param:r,value:n,op:"s"})}delete(r,n){return this.clone({param:r,value:n,op:"d"})}toString(){return this.init(),this.keys().map(r=>{let n=this.encoder.encodeKey(r);return this.map.get(r).map(o=>n+"="+this.encoder.encodeValue(o)).join("&")}).filter(r=>r!=="").join("&")}clone(r){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(r),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":let n=(r.op==="a"?this.map.get(r.param):void 0)||[];n.push(_z(r.value)),this.map.set(r.param,n);break;case"d":if(r.value!==void 0){let o=this.map.get(r.param)||[],i=o.indexOf(_z(r.value));i!==-1&&o.splice(i,1),o.length>0?this.map.set(r.param,o):this.map.delete(r.param)}else{this.map.delete(r.param);break}}}),this.cloneFrom=this.updates=null)}};var Zre=class{constructor(){this.map=new Map}set(r,n){return this.map.set(r,n),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}};function VCt(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function XAe(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function KAe(t){return typeof Blob<"u"&&t instanceof Blob}function ZAe(t){return typeof FormData<"u"&&t instanceof FormData}function GCt(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var EM=class t{constructor(r,n,o,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase();let s;if(VCt(this.method)||i?(this.body=o!==void 0?o:null,s=i):s=o,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Dk,this.context??=new Zre,!this.params)this.params=new b1,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let l=n.indexOf("?"),u=l===-1?"?":l<n.length-1?"&":"";this.urlWithParams=n+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||XAe(this.body)||KAe(this.body)||ZAe(this.body)||GCt(this.body)?this.body:this.body instanceof b1?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ZAe(this.body)?null:KAe(this.body)?this.body.type||null:XAe(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof b1?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(r={}){let n=r.method||this.method,o=r.url||this.url,i=r.responseType||this.responseType,s=r.transferCache??this.transferCache,a=r.body!==void 0?r.body:this.body,l=r.withCredentials??this.withCredentials,u=r.reportProgress??this.reportProgress,c=r.headers||this.headers,f=r.params||this.params,d=r.context??this.context;return r.setHeaders!==void 0&&(c=Object.keys(r.setHeaders).reduce((p,h)=>p.set(h,r.setHeaders[h]),c)),r.setParams&&(f=Object.keys(r.setParams).reduce((p,h)=>p.set(h,r.setParams[h]),f)),new t(n,o,a,{params:f,headers:c,context:d,reportProgress:u,responseType:i,withCredentials:l,transferCache:s})}},QAe=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(QAe||{}),Qre=class{constructor(r,n=200,o="OK"){this.headers=r.headers||new Dk,this.status=r.status!==void 0?r.status:n,this.statusText=r.statusText||o,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}};var Jre=class t extends Qre{constructor(r={}){super(r),this.type=QAe.Response,this.body=r.body!==void 0?r.body:null}clone(r={}){return new t({body:r.body!==void 0?r.body:this.body,headers:r.headers||this.headers,status:r.status!==void 0?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}};function Yre(t,r){return{body:r,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var JAe=(()=>{let r=class r{constructor(o){this.handler=o}request(o,i,s={}){let a;if(o instanceof EM)a=o;else{let c;s.headers instanceof Dk?c=s.headers:c=new Dk(s.headers);let f;s.params&&(s.params instanceof b1?f=s.params:f=new b1({fromObject:s.params})),a=new EM(o,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let l=Pr(a).pipe(Y2(c=>this.handler.handle(c)));if(o instanceof EM||s.observe==="events")return l;let u=l.pipe(Vs(c=>c instanceof Jre));switch(s.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return u.pipe(dn(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(dn(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(dn(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(dn(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(o,i={}){return this.request("DELETE",o,i)}get(o,i={}){return this.request("GET",o,i)}head(o,i={}){return this.request("HEAD",o,i)}jsonp(o,i){return this.request("JSONP",o,{params:new b1().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,i={}){return this.request("OPTIONS",o,i)}patch(o,i,s={}){return this.request("PATCH",o,Yre(s,i))}post(o,i,s={}){return this.request("POST",o,Yre(s,i))}put(o,i,s={}){return this.request("PUT",o,Yre(s,i))}};r.\u0275fac=function(i){return new(i||r)(kt(Xre))},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})();var rne=class extends UAe{constructor(){super(...arguments),this.supportsDOMEvents=!0}},nne=class t extends rne{static makeCurrent(){zAe(new t)}onAndCancel(r,n,o){return r.addEventListener(n,o),()=>{r.removeEventListener(n,o)}}dispatchEvent(r,n){r.dispatchEvent(n)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,n){return n=n||this.getDefaultDocument(),n.createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,n){return n==="window"?window:n==="document"?r:n==="body"?r.body:null}getBaseHref(r){let n=HCt();return n==null?null:YCt(n)}resetBaseElement(){TM=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return VAe(document.cookie,r)}},TM=null;function HCt(){return TM=TM||document.querySelector("base"),TM?TM.getAttribute("href"):null}function YCt(t){return new URL(t,document.baseURI).pathname}var XCt=(()=>{let r=class r{build(){return new XMLHttpRequest}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})(),one=new jn(""),oke=(()=>{let r=class r{constructor(o,i){this._zone=i,this._eventNameToPlugin=new Map,o.forEach(s=>{s.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,i,s){return this._findPluginFor(i).addEventListener(o,i,s)}getZone(){return this._zone}_findPluginFor(o){let i=this._eventNameToPlugin.get(o);if(i)return i;if(i=this._plugins.find(a=>a.supports(o)),!i)throw new es(5101,!1);return this._eventNameToPlugin.set(o,i),i}};r.\u0275fac=function(i){return new(i||r)(kt(one),kt(kn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})(),Sz=class{constructor(r){this._doc=r}},ene="ng-app-id",ike=(()=>{let r=class r{constructor(o,i,s,a={}){this.doc=o,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hre(a),this.resetHostNodes()}addStyles(o){for(let i of o)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(o){for(let i of o)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(i=>i.remove()),o.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let i of this.getAllStyles())this.addStyleToHost(o,i)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let i of this.hostNodes)this.addStyleToHost(i,o)}onStyleRemoved(o){let i=this.styleRef;i.get(o)?.elements?.forEach(s=>s.remove()),i.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${ene}="${this.appId}"]`);if(o?.length){let i=new Map;return o.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(o,i){let s=this.styleRef;if(s.has(o)){let a=s.get(o);return a.usage+=i,a.usage}return s.set(o,{usage:i,elements:[]}),i}getStyleElement(o,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===o)return s.delete(i),a.removeAttribute(ene),a;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(ene,this.appId),o.appendChild(l),l}}addStyleToHost(o,i){let s=this.getStyleElement(o,i),a=this.styleRef,l=a.get(i)?.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};r.\u0275fac=function(i){return new(i||r)(kt(xn),kt(yz),kt(vM,8),kt(Q2))},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})(),tne={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sne=/%COMP%/g,ske="%COMP%",KCt=`_nghost-${ske}`,ZCt=`_ngcontent-${ske}`,QCt=!0,JCt=new jn("",{providedIn:"root",factory:()=>QCt});function eEt(t){return ZCt.replace(sne,t)}function tEt(t){return KCt.replace(sne,t)}function ake(t,r){return r.map(n=>n.replace(sne,t))}var Cz=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f=null){this.eventManager=o,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=u,this.ngZone=c,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Hre(u),this.defaultRenderer=new AM(o,l,c,this.platformIsServer)}createRenderer(o,i){if(!o||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===gM.ShadowDom&&(i=Ss(Kt({},i),{encapsulation:gM.Emulated}));let s=this.getOrCreateRenderer(o,i);return s instanceof Ez?s.applyToHost(o):s instanceof kM&&s.applyStyles(),s}getOrCreateRenderer(o,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let l=this.doc,u=this.ngZone,c=this.eventManager,f=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case gM.Emulated:a=new Ez(c,f,i,this.appId,d,l,u,p);break;case gM.ShadowDom:return new ine(c,f,o,i,l,u,this.nonce,p);default:a=new kM(c,f,i,d,l,u,p);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};r.\u0275fac=function(i){return new(i||r)(kt(oke),kt(ike),kt(yz),kt(JCt),kt(xn),kt(Q2),kt(kn),kt(vM))},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})(),AM=class{constructor(r,n,o,i){this.eventManager=r,this.doc=n,this.ngZone=o,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(r,n){return n?this.doc.createElementNS(tne[n]||n,r):this.doc.createElement(r)}createComment(r){return this.doc.createComment(r)}createText(r){return this.doc.createTextNode(r)}appendChild(r,n){(eke(r)?r.content:r).appendChild(n)}insertBefore(r,n,o){r&&(eke(r)?r.content:r).insertBefore(n,o)}removeChild(r,n){r&&r.removeChild(n)}selectRootElement(r,n){let o=typeof r=="string"?this.doc.querySelector(r):r;if(!o)throw new es(-5104,!1);return n||(o.textContent=""),o}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,n,o,i){if(i){n=i+":"+n;let s=tne[i];s?r.setAttributeNS(s,n,o):r.setAttribute(n,o)}else r.setAttribute(n,o)}removeAttribute(r,n,o){if(o){let i=tne[o];i?r.removeAttributeNS(i,n):r.removeAttribute(`${o}:${n}`)}else r.removeAttribute(n)}addClass(r,n){r.classList.add(n)}removeClass(r,n){r.classList.remove(n)}setStyle(r,n,o,i){i&(wM.DashCase|wM.Important)?r.style.setProperty(n,o,i&wM.Important?"important":""):r.style[n]=o}removeStyle(r,n,o){o&wM.DashCase?r.style.removeProperty(n):r.style[n]=""}setProperty(r,n,o){r!=null&&(r[n]=o)}setValue(r,n){r.nodeValue=n}listen(r,n,o){if(typeof r=="string"&&(r=qre().getGlobalEventTarget(this.doc,r),!r))throw new Error(`Unsupported event target ${r} for event ${n}`);return this.eventManager.addEventListener(r,n,this.decoratePreventDefault(o))}decoratePreventDefault(r){return n=>{if(n==="__ngUnwrap__")return r;(this.platformIsServer?this.ngZone.runGuarded(()=>r(n)):r(n))===!1&&n.preventDefault()}}};function eke(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ine=class extends AM{constructor(r,n,o,i,s,a,l,u){super(r,s,a,u),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=ake(i.id,i.styles);for(let f of c){let d=document.createElement("style");l&&d.setAttribute("nonce",l),d.textContent=f,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}appendChild(r,n){return super.appendChild(this.nodeOrShadowRoot(r),n)}insertBefore(r,n,o){return super.insertBefore(this.nodeOrShadowRoot(r),n,o)}removeChild(r,n){return super.removeChild(this.nodeOrShadowRoot(r),n)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},kM=class extends AM{constructor(r,n,o,i,s,a,l,u){super(r,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?ake(u,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ez=class extends kM{constructor(r,n,o,i,s,a,l,u){let c=i+"-"+o.id;super(r,n,o,s,a,l,u,c),this.contentAttr=eEt(c),this.hostAttr=tEt(c)}applyToHost(r){this.applyStyles(),this.setAttribute(r,this.hostAttr,"")}createElement(r,n){let o=super.createElement(r,n);return super.setAttribute(o,this.contentAttr,""),o}},rEt=(()=>{let r=class r extends Sz{constructor(o){super(o)}supports(o){return!0}addEventListener(o,i,s){return o.addEventListener(i,s,!1),()=>this.removeEventListener(o,i,s)}removeEventListener(o,i,s){return o.removeEventListener(i,s)}};r.\u0275fac=function(i){return new(i||r)(kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})(),tke=["alt","control","meta","shift"],nEt={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oEt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},iEt=(()=>{let r=class r extends Sz{constructor(o){super(o)}supports(o){return r.parseEventName(o)!=null}addEventListener(o,i,s){let a=r.parseEventName(i),l=r.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qre().onAndCancel(o,a.domEventName,l))}static parseEventName(o){let i=o.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=r._normalizeKey(i.pop()),l="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),l="code."),tke.forEach(f=>{let d=i.indexOf(f);d>-1&&(i.splice(d,1),l+=f+".")}),l+=a,i.length!=0||a.length===0)return null;let c={};return c.domEventName=s,c.fullKey=l,c}static matchEventFullKeyCode(o,i){let s=nEt[o.key]||o.key,a="";return i.indexOf("code.")>-1&&(s=o.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),tke.forEach(l=>{if(l!==s){let u=oEt[l];u(o)&&(a+=l+".")}}),a+=s,a===i)}static eventCallback(o,i,s){return a=>{r.matchEventFullKeyCode(a,o)&&s.runGuarded(()=>i(a))}}static _normalizeKey(o){return o==="esc"?"escape":o}};r.\u0275fac=function(i){return new(i||r)(kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})();function lke(t,r){return BAe(Kt({rootComponent:t},sEt(r)))}function sEt(t){return{appProviders:[...fEt,...t?.providers??[]],platformProviders:cEt}}function aEt(){nne.makeCurrent()}function lEt(){return new Z2}function uEt(){return bAe(document),document}var cEt=[{provide:Q2,useValue:WAe},{provide:xAe,useValue:aEt,multi:!0},{provide:xn,useFactory:uEt,deps:[]}];var fEt=[{provide:yAe,useValue:"root"},{provide:Z2,useFactory:lEt,deps:[]},{provide:one,useClass:rEt,multi:!0,deps:[xn,kn,Q2]},{provide:one,useClass:iEt,multi:!0,deps:[xn]},Cz,ike,oke,{provide:xz,useExisting:Cz},{provide:HAe,useClass:XCt,deps:[]},[]];var uke=(()=>{let r=class r{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};r.\u0275fac=function(i){return new(i||r)(kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var ane=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:function(i){let s=null;return i?s=new(i||r):s=kt(dEt),s},providedIn:"root"});let t=r;return t})(),dEt=(()=>{let r=class r extends ane{constructor(o){super(),this._doc=o}sanitize(o,i){if(i==null)return null;switch(o){case zf.NONE:return i;case zf.HTML:return Sk(i,"HTML")?_k(i):TAe(this._doc,String(i)).toString();case zf.STYLE:return Sk(i,"Style")?_k(i):i;case zf.SCRIPT:if(Sk(i,"Script"))return _k(i);throw new es(5200,!1);case zf.URL:return Sk(i,"URL")?_k(i):EAe(String(i));case zf.RESOURCE_URL:if(Sk(i,"ResourceURL"))return _k(i);throw new es(5201,!1);default:throw new es(5202,!1)}}bypassSecurityTrustHtml(o){return vAe(o)}bypassSecurityTrustStyle(o){return wAe(o)}bypassSecurityTrustScript(o){return _Ae(o)}bypassSecurityTrustUrl(o){return SAe(o)}bypassSecurityTrustResourceUrl(o){return CAe(o)}};r.\u0275fac=function(i){return new(i||r)(kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var vn="primary",WM=Symbol("RouteTitle"),dne=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n[0]:n}return null}getAll(r){if(this.has(r)){let n=this.params[r];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Pk(t){return new dne(t)}function hEt(t,r,n){let o=n.path.split("/");if(o.length>t.length||n.pathMatch==="full"&&(r.hasChildren()||o.length<t.length))return null;let i={};for(let s=0;s<o.length;s++){let a=o[s],l=t[s];if(a[0]===":")i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:t.slice(0,o.length),posParams:i}}function mEt(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!dg(t[n],r[n]))return!1;return!0}function dg(t,r){let n=t?pne(t):void 0,o=r?pne(r):void 0;if(!n||!o||n.length!=o.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!bke(t[i],r[i]))return!1;return!0}function pne(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function bke(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;let n=[...t].sort(),o=[...r].sort();return n.every((i,s)=>o[s]===i)}else return t===r}function xke(t){return t.length>0?t[t.length-1]:null}function v1(t){return Lre(t)?t:PAe(t)?$d(Promise.resolve(t)):Pr(t)}var gEt={exact:wke,subset:_ke},vke={exact:yEt,subset:bEt,ignored:()=>!0};function fke(t,r,n){return gEt[n.paths](t.root,r.root,n.matrixParams)&&vke[n.queryParams](t.queryParams,r.queryParams)&&!(n.fragment==="exact"&&t.fragment!==r.fragment)}function yEt(t,r){return dg(t,r)}function wke(t,r,n){if(!oS(t.segments,r.segments)||!kz(t.segments,r.segments,n)||t.numberOfChildren!==r.numberOfChildren)return!1;for(let o in r.children)if(!t.children[o]||!wke(t.children[o],r.children[o],n))return!1;return!0}function bEt(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(n=>bke(t[n],r[n]))}function _ke(t,r,n){return Ske(t,r,r.segments,n)}function Ske(t,r,n,o){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!oS(i,n)||r.hasChildren()||!kz(i,n,o))}else if(t.segments.length===n.length){if(!oS(t.segments,n)||!kz(t.segments,n,o))return!1;for(let i in r.children)if(!t.children[i]||!_ke(t.children[i],r.children[i],o))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!oS(t.segments,i)||!kz(t.segments,i,o)||!t.children[vn]?!1:Ske(t.children[vn],r,s,o)}}function kz(t,r,n){return r.every((o,i)=>vke[n](t[i].parameters,o.parameters))}var x1=class{constructor(r=new To([],{}),n={},o=null){this.root=r,this.queryParams=n,this.fragment=o}get queryParamMap(){return this._queryParamMap??=Pk(this.queryParams),this._queryParamMap}toString(){return wEt.serialize(this)}},To=class{constructor(r,n){this.segments=r,this.children=n,this.parent=null,Object.values(n).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iz(this)}},nS=class{constructor(r,n){this.path=r,this.parameters=n}get parameterMap(){return this._parameterMap??=Pk(this.parameters),this._parameterMap}toString(){return Eke(this)}};function xEt(t,r){return oS(t,r)&&t.every((n,o)=>dg(n.parameters,r[o].parameters))}function oS(t,r){return t.length!==r.length?!1:t.every((n,o)=>n.path===r[o].path)}function vEt(t,r){let n=[];return Object.entries(t.children).forEach(([o,i])=>{o===vn&&(n=n.concat(r(i,o)))}),Object.entries(t.children).forEach(([o,i])=>{o!==vn&&(n=n.concat(r(i,o)))}),n}var Bne=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:()=>new MM,providedIn:"root"});let t=r;return t})(),MM=class{parse(r){let n=new mne(r);return new x1(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(r){let n=`/${IM(r.root,!0)}`,o=CEt(r.queryParams),i=typeof r.fragment=="string"?`#${_Et(r.fragment)}`:"";return`${n}${o}${i}`}},wEt=new MM;function Iz(t){return t.segments.map(r=>Eke(r)).join("/")}function IM(t,r){if(!t.hasChildren())return Iz(t);if(r){let n=t.children[vn]?IM(t.children[vn],!1):"",o=[];return Object.entries(t.children).forEach(([i,s])=>{i!==vn&&o.push(`${i}:${IM(s,!1)}`)}),o.length>0?`${n}(${o.join("//")})`:n}else{let n=vEt(t,(o,i)=>i===vn?[IM(t.children[vn],!1)]:[`${i}:${IM(o,!1)}`]);return Object.keys(t.children).length===1&&t.children[vn]!=null?`${Iz(t)}/${n[0]}`:`${Iz(t)}/(${n.join("//")})`}}function Cke(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tz(t){return Cke(t).replace(/%3B/gi,";")}function _Et(t){return encodeURI(t)}function hne(t){return Cke(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dz(t){return decodeURIComponent(t)}function dke(t){return Dz(t.replace(/\+/g,"%20"))}function Eke(t){return`${hne(t.path)}${SEt(t.parameters)}`}function SEt(t){return Object.entries(t).map(([r,n])=>`;${hne(r)}=${hne(n)}`).join("")}function CEt(t){let r=Object.entries(t).map(([n,o])=>Array.isArray(o)?o.map(i=>`${Tz(n)}=${Tz(i)}`).join("&"):`${Tz(n)}=${Tz(o)}`).filter(n=>n);return r.length?`?${r.join("&")}`:""}var EEt=/^[^\/()?;#]+/;function lne(t){let r=t.match(EEt);return r?r[0]:""}var TEt=/^[^\/()?;=#]+/;function AEt(t){let r=t.match(TEt);return r?r[0]:""}var kEt=/^[^=?&#]+/;function IEt(t){let r=t.match(kEt);return r?r[0]:""}var DEt=/^[^&#]+/;function NEt(t){let r=t.match(DEt);return r?r[0]:""}var mne=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new To([],{}):new To([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(r.length>0||Object.keys(n).length>0)&&(o[vn]=new To(r,n)),o}parseSegment(){let r=lne(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new es(4009,!1);return this.capture(r),new nS(Dz(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let n=AEt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let i=lne(this.remaining);i&&(o=i,this.capture(o))}r[Dz(n)]=Dz(o)}parseQueryParam(r){let n=IEt(this.remaining);if(!n)return;this.capture(n);let o="";if(this.consumeOptional("=")){let a=NEt(this.remaining);a&&(o=a,this.capture(o))}let i=dke(n),s=dke(o);if(r.hasOwnProperty(i)){let a=r[i];Array.isArray(a)||(a=[a],r[i]=a),a.push(s)}else r[i]=s}parseParens(r){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=lne(this.remaining),i=this.remaining[o.length];if(i!=="/"&&i!==")"&&i!==";")throw new es(4010,!1);let s;o.indexOf(":")>-1?(s=o.slice(0,o.indexOf(":")),this.capture(s),this.capture(":")):r&&(s=vn);let a=this.parseChildren();n[s]=Object.keys(a).length===1?a[vn]:new To([],a),this.consumeOptional("//")}return n}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new es(4011,!1)}};function Tke(t){return t.segments.length>0?new To([],{[vn]:t}):t}function Ake(t){let r={};for(let[o,i]of Object.entries(t.children)){let s=Ake(i);if(o===vn&&s.segments.length===0&&s.hasChildren())for(let[a,l]of Object.entries(s.children))r[a]=l;else(s.segments.length>0||s.hasChildren())&&(r[o]=s)}let n=new To(t.segments,r);return OEt(n)}function OEt(t){if(t.numberOfChildren===1&&t.children[vn]){let r=t.children[vn];return new To(t.segments.concat(r.segments),r.children)}return t}function PM(t){return t instanceof x1}function FEt(t,r,n=null,o=null){let i=kke(t);return Ike(i,r,n,o)}function kke(t){let r;function n(s){let a={};for(let u of s.children){let c=n(u);a[u.outlet]=c}let l=new To(s.url,a);return s===t&&(r=l),l}let o=n(t.root),i=Tke(o);return r??i}function Ike(t,r,n,o){let i=t;for(;i.parent;)i=i.parent;if(r.length===0)return une(i,i,i,n,o);let s=REt(r);if(s.toRoot())return une(i,i,new To([],{}),n,o);let a=MEt(s,i,t),l=a.processChildren?OM(a.segmentGroup,a.index,s.commands):Nke(a.segmentGroup,a.index,s.commands);return une(i,a.segmentGroup,l,n,o)}function Nz(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function jM(t){return typeof t=="object"&&t!=null&&t.outlets}function une(t,r,n,o,i){let s={};o&&Object.entries(o).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let a;t===r?a=n:a=Dke(t,r,n);let l=Tke(Ake(a));return new x1(l,s,i)}function Dke(t,r,n){let o={};return Object.entries(t.children).forEach(([i,s])=>{s===r?o[i]=n:o[i]=Dke(s,r,n)}),new To(t.segments,o)}var Oz=class{constructor(r,n,o){if(this.isAbsolute=r,this.numberOfDoubleDots=n,this.commands=o,r&&o.length>0&&Nz(o[0]))throw new es(4003,!1);let i=o.find(jM);if(i&&i!==xke(o))throw new es(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function REt(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Oz(!0,0,t);let r=0,n=!1,o=t.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([u,c])=>{l[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((l,u)=>{u==0&&l==="."||(u==0&&l===""?n=!0:l===".."?r++:l!=""&&i.push(l))}),i):[...i,s]},[]);return new Oz(n,r,o)}var Fk=class{constructor(r,n,o){this.segmentGroup=r,this.processChildren=n,this.index=o}};function MEt(t,r,n){if(t.isAbsolute)return new Fk(r,!0,0);if(!n)return new Fk(r,!1,NaN);if(n.parent===null)return new Fk(n,!0,0);let o=Nz(t.commands[0])?0:1,i=n.segments.length-1+o;return PEt(n,i,t.numberOfDoubleDots)}function PEt(t,r,n){let o=t,i=r,s=n;for(;s>i;){if(s-=i,o=o.parent,!o)throw new es(4005,!1);i=o.segments.length}return new Fk(o,!1,i-s)}function jEt(t){return jM(t[0])?t[0].outlets:{[vn]:t}}function Nke(t,r,n){if(t??=new To([],{}),t.segments.length===0&&t.hasChildren())return OM(t,r,n);let o=LEt(t,r,n),i=n.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){let s=new To(t.segments.slice(0,o.pathIndex),{});return s.children[vn]=new To(t.segments.slice(o.pathIndex),t.children),OM(s,0,i)}else return o.match&&i.length===0?new To(t.segments,{}):o.match&&!t.hasChildren()?gne(t,r,n):o.match?OM(t,0,i):gne(t,r,n)}function OM(t,r,n){if(n.length===0)return new To(t.segments,{});{let o=jEt(n),i={};if(Object.keys(o).some(s=>s!==vn)&&t.children[vn]&&t.numberOfChildren===1&&t.children[vn].segments.length===0){let s=OM(t.children[vn],r,n);return new To(t.segments,s.children)}return Object.entries(o).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=Nke(t.children[s],r,a))}),Object.entries(t.children).forEach(([s,a])=>{o[s]===void 0&&(i[s]=a)}),new To(t.segments,i)}}function LEt(t,r,n){let o=0,i=r,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(o>=n.length)return s;let a=t.segments[i],l=n[o];if(jM(l))break;let u=`${l}`,c=o<n.length-1?n[o+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!hke(u,c,a))return s;o+=2}else{if(!hke(u,{},a))return s;o++}i++}return{match:!0,pathIndex:i,commandIndex:o}}function gne(t,r,n){let o=t.segments.slice(0,r),i=0;for(;i<n.length;){let s=n[i];if(jM(s)){let u=BEt(s.outlets);return new To(o,u)}if(i===0&&Nz(n[0])){let u=t.segments[r];o.push(new nS(u.path,pke(n[0]))),i++;continue}let a=jM(s)?s.outlets[vn]:`${s}`,l=i<n.length-1?n[i+1]:null;a&&l&&Nz(l)?(o.push(new nS(a,pke(l))),i+=2):(o.push(new nS(a,{})),i++)}return new To(o,{})}function BEt(t){let r={};return Object.entries(t).forEach(([n,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[n]=gne(new To([],{}),0,o))}),r}function pke(t){let r={};return Object.entries(t).forEach(([n,o])=>r[n]=`${o}`),r}function hke(t,r,n){return t==n.path&&dg(r,n.parameters)}var FM="imperative",wl=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(wl||{}),Yd=class{constructor(r,n){this.id=r,this.url=n}},LM=class extends Yd{constructor(r,n,o="imperative",i=null){super(r,n),this.type=wl.NavigationStart,this.navigationTrigger=o,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},iS=class extends Yd{constructor(r,n,o){super(r,n),this.urlAfterRedirects=o,this.type=wl.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wf=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Wf||{}),yne=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(yne||{}),xb=class extends Yd{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=wl.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},sS=class extends Yd{constructor(r,n,o,i){super(r,n),this.reason=o,this.code=i,this.type=wl.NavigationSkipped}},BM=class extends Yd{constructor(r,n,o,i){super(r,n),this.error=o,this.target=i,this.type=wl.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fz=class extends Yd{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bne=class extends Yd{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xne=class extends Yd{constructor(r,n,o,i,s){super(r,n),this.urlAfterRedirects=o,this.state=i,this.shouldActivate=s,this.type=wl.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vne=class extends Yd{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wne=class extends Yd{constructor(r,n,o,i){super(r,n),this.urlAfterRedirects=o,this.state=i,this.type=wl.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_ne=class{constructor(r){this.route=r,this.type=wl.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sne=class{constructor(r){this.route=r,this.type=wl.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cne=class{constructor(r){this.snapshot=r,this.type=wl.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ene=class{constructor(r){this.snapshot=r,this.type=wl.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tne=class{constructor(r){this.snapshot=r,this.type=wl.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ane=class{constructor(r){this.snapshot=r,this.type=wl.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var $M=class{},jk=class{constructor(r,n){this.url=r,this.navigationBehaviorOptions=n}};var kne=class{constructor(r){this.injector=r,this.outlet=null,this.route=null,this.children=new $z(this.injector),this.attachRef=null}},$z=(()=>{let r=class r{constructor(o){this.parentInjector=o,this.contexts=new Map}onChildOutletCreated(o,i){let s=this.getOrCreateContext(o);s.outlet=i,this.contexts.set(o,s)}onChildOutletDestroyed(o){let i=this.getContext(o);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let i=this.getContext(o);return i||(i=new kne(this.parentInjector),this.contexts.set(o,i)),i}getContext(o){return this.contexts.get(o)||null}};r.\u0275fac=function(i){return new(i||r)(kt(K2))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Rz=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let n=this.pathFromRoot(r);return n.length>1?n[n.length-2]:null}children(r){let n=Ine(r,this._root);return n?n.children.map(o=>o.value):[]}firstChild(r){let n=Ine(r,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(r){let n=Dne(r,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return Dne(r,this._root).map(n=>n.value)}};function Ine(t,r){if(t===r.value)return r;for(let n of r.children){let o=Ine(t,n);if(o)return o}return null}function Dne(t,r){if(t===r.value)return[r];for(let n of r.children){let o=Dne(t,n);if(o.length)return o.unshift(r),o}return[]}var Gf=class{constructor(r,n){this.value=r,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ok(t){let r={};return t&&t.children.forEach(n=>r[n.value.outlet]=n),r}var Mz=class extends Rz{constructor(r,n){super(r),this.snapshot=n,$ne(this,r)}toString(){return this.snapshot.toString()}};function Oke(t){let r=$Et(t),n=new Pa([new nS("",{})]),o=new Pa({}),i=new Pa({}),s=new Pa({}),a=new Pa(""),l=new Lk(n,o,s,a,i,vn,t,r.root);return l.snapshot=r.root,new Mz(new Gf(l,[]),r)}function $Et(t){let r={},n={},o={},i="",s=new Rk([],r,o,i,n,vn,t,null,{});return new jz("",new Gf(s,[]))}var Lk=class{constructor(r,n,o,i,s,a,l,u){this.urlSubject=r,this.paramsSubject=n,this.queryParamsSubject=o,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(dn(c=>c[WM]))??Pr(void 0),this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(dn(r=>Pk(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(dn(r=>Pk(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pz(t,r,n="emptyOnly"){let o,{routeConfig:i}=t;return r!==null&&(n==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?o={params:Kt(Kt({},r.params),t.params),data:Kt(Kt({},r.data),t.data),resolve:Kt(Kt(Kt(Kt({},t.data),r.data),i?.data),t._resolvedData)}:o={params:Kt({},t.params),data:Kt({},t.data),resolve:Kt(Kt({},t.data),t._resolvedData??{})},i&&Rke(i)&&(o.resolve[WM]=i.title),o}var Rk=class{get title(){return this.data?.[WM]}constructor(r,n,o,i,s,a,l,u,c){this.url=r,this.params=n,this.queryParams=o,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pk(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pk(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(o=>o.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${n}')`}},jz=class extends Rz{constructor(r,n){super(n),this.url=r,$ne(this,n)}toString(){return Fke(this._root)}};function $ne(t,r){r.value._routerState=t,r.children.forEach(n=>$ne(t,n))}function Fke(t){let r=t.children.length>0?` { ${t.children.map(Fke).join(", ")} } `:"";return`${t.value}${r}`}function cne(t){if(t.snapshot){let r=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dg(r.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),r.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),dg(r.params,n.params)||t.paramsSubject.next(n.params),mEt(r.url,n.url)||t.urlSubject.next(n.url),dg(r.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Nne(t,r){let n=dg(t.params,r.params)&&xEt(t.url,r.url),o=!t.parent!=!r.parent;return n&&!o&&(!t.parent||Nne(t.parent,r.parent))}function Rke(t){return typeof t.title=="string"||t.title===null}var zne=(()=>{let r=class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=vn,this.activateEvents=new ha,this.deactivateEvents=new ha,this.attachEvents=new ha,this.detachEvents=new ha,this.parentContexts=ar($z),this.location=ar(Ck),this.changeDetector=ar(Hd),this.inputBinder=ar(Une,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:i,previousValue:s}=o.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new es(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new es(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new es(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,i){this.activated=o,this._activatedRoute=i,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,i){if(this.isActivated)throw new es(4013,!1);this._activatedRoute=o;let s=this.location,l=o.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new One(o,u,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=Kl({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wk]});let t=r;return t})(),One=class t{__ngOutletInjector(r){return new t(this.route,this.childContexts,r)}constructor(r,n,o){this.route=r,this.childContexts=n,this.parent=o}get(r,n){return r===Lk?this.route:r===$z?this.childContexts:this.parent.get(r,n)}},Une=new jn("");function zEt(t,r,n){let o=zM(t,r._root,n?n._root:void 0);return new Mz(o,r)}function zM(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){let o=n.value;o._futureSnapshot=r.value;let i=UEt(t,r,n);return new Gf(o,i)}else{if(t.shouldAttach(r.value)){let s=t.retrieve(r.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=r.value,a.children=r.children.map(l=>zM(t,l)),a}}let o=VEt(r.value),i=r.children.map(s=>zM(t,s));return new Gf(o,i)}}function UEt(t,r,n){return r.children.map(o=>{for(let i of n.children)if(t.shouldReuseRoute(o.value,i.value.snapshot))return zM(t,o,i);return zM(t,o)})}function VEt(t){return new Lk(new Pa(t.url),new Pa(t.params),new Pa(t.queryParams),new Pa(t.fragment),new Pa(t.data),t.outlet,t.component,t)}var UM=class{constructor(r,n){this.redirectTo=r,this.navigationBehaviorOptions=n}},Mke="ngNavigationCancelingError";function Lz(t,r){let{redirectTo:n,navigationBehaviorOptions:o}=PM(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=Pke(!1,Wf.Redirect);return i.url=n,i.navigationBehaviorOptions=o,i}function Pke(t,r){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Mke]=!0,n.cancellationCode=r,n}function GEt(t){return jke(t)&&PM(t.url)}function jke(t){return!!t&&t[Mke]}var WEt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=Es({type:r,selectors:[["ng-component"]],standalone:!0,features:[Ts],decls:1,vars:0,template:function(i,s){i&1&&Zl(0,"router-outlet")},dependencies:[zne],encapsulation:2});let t=r;return t})();function qEt(t,r){return t.providers&&!t._injector&&(t._injector=OAe(t.providers,r,`Route: ${t.path}`)),t._injector??r}function Vne(t){let r=t.children&&t.children.map(Vne),n=r?Ss(Kt({},t),{children:r}):Kt({},t);return!n.component&&!n.loadComponent&&(r||n.loadChildren)&&n.outlet&&n.outlet!==vn&&(n.component=WEt),n}function fh(t){return t.outlet||vn}function HEt(t,r){let n=t.filter(o=>fh(o)===r);return n.push(...t.filter(o=>fh(o)!==r)),n}function qM(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let r=t.parent;r;r=r.parent){let n=r.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var YEt=(t,r,n,o)=>dn(i=>(new Fne(r,i.targetRouterState,i.currentRouterState,n,o).activate(t),i)),Fne=class{constructor(r,n,o,i,s){this.routeReuseStrategy=r,this.futureState=n,this.currState=o,this.forwardEvent=i,this.inputBindingEnabled=s}activate(r){let n=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,o,r),cne(this.futureState.root),this.activateChildRoutes(n,o,r)}deactivateChildRoutes(r,n,o){let i=Ok(n);r.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],o),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,o)})}deactivateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(i===s)if(i.component){let a=o.getContext(i.outlet);a&&this.deactivateChildRoutes(r,n,a.children)}else this.deactivateChildRoutes(r,n,o);else s&&this.deactivateRouteAndItsChildren(n,o)}deactivateRouteAndItsChildren(r,n){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,n):this.deactivateRouteAndOutlet(r,n)}detachAndStoreRouteSubtree(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=Ok(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(o&&o.outlet){let a=o.outlet.detach(),l=o.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:a,route:r,contexts:l})}}deactivateRouteAndOutlet(r,n){let o=n.getContext(r.value.outlet),i=o&&r.value.component?o.children:n,s=Ok(r);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(r,n,o){let i=Ok(n);r.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],o),this.forwardEvent(new Ane(s.value.snapshot))}),r.children.length&&this.forwardEvent(new Ene(r.value.snapshot))}activateRoutes(r,n,o){let i=r.value,s=n?n.value:null;if(cne(i),i===s)if(i.component){let a=o.getOrCreateContext(i.outlet);this.activateChildRoutes(r,n,a.children)}else this.activateChildRoutes(r,n,o);else if(i.component){let a=o.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),cne(l.route.value),this.activateChildRoutes(r,null,a.children)}else{let l=qM(i.snapshot);a.attachRef=null,a.route=i,a.injector=l??a.injector,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(r,null,a.children)}}else this.activateChildRoutes(r,null,o)}},Bz=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},Mk=class{constructor(r,n){this.component=r,this.route=n}};function XEt(t,r,n){let o=t._root,i=r?r._root:null;return DM(o,i,n,[o.value])}function KEt(t){let r=t.routeConfig?t.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:t,guards:r}}function $k(t,r){let n=Symbol(),o=r.get(t,n);return o===n?typeof t=="function"&&!gAe(t)?t:r.get(t):o}function DM(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ok(r);return t.children.forEach(a=>{ZEt(a,s[a.value.outlet],n,o.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,l])=>RM(l,n.getContext(a),i)),i}function ZEt(t,r,n,o,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,a=r?r.value:null,l=n?n.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=QEt(a,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Bz(o)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?DM(t,r,l?l.children:null,o,i):DM(t,r,n,o,i),u&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Mk(l.outlet.component,a))}else a&&RM(r,l,i),i.canActivateChecks.push(new Bz(o)),s.component?DM(t,null,l?l.children:null,o,i):DM(t,null,n,o,i);return i}function QEt(t,r,n){if(typeof n=="function")return n(t,r);switch(n){case"pathParamsChange":return!oS(t.url,r.url);case"pathParamsOrQueryParamsChange":return!oS(t.url,r.url)||!dg(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nne(t,r)||!dg(t.queryParams,r.queryParams);case"paramsChange":default:return!Nne(t,r)}}function RM(t,r,n){let o=Ok(t),i=t.value;Object.entries(o).forEach(([s,a])=>{i.component?r?RM(a,r.children.getContext(s),n):RM(a,null,n):RM(a,r,n)}),i.component?r&&r.outlet&&r.outlet.isActivated?n.canDeactivateChecks.push(new Mk(r.outlet.component,i)):n.canDeactivateChecks.push(new Mk(null,i)):n.canDeactivateChecks.push(new Mk(null,i))}function HM(t){return typeof t=="function"}function JEt(t){return typeof t=="boolean"}function eTt(t){return t&&HM(t.canLoad)}function tTt(t){return t&&HM(t.canActivate)}function rTt(t){return t&&HM(t.canActivateChild)}function nTt(t){return t&&HM(t.canDeactivate)}function oTt(t){return t&&HM(t.canMatch)}function Lke(t){return t instanceof cAe||t?.name==="EmptyError"}var Az=Symbol("INITIAL_VALUE");function Bk(){return Ud(t=>fM(t.map(r=>r.pipe(Dc(1),y1(Az)))).pipe(dn(r=>{for(let n of r)if(n!==!0){if(n===Az)return Az;if(n===!1||iTt(n))return n}return!0}),Vs(r=>r!==Az),Dc(1)))}function iTt(t){return PM(t)||t instanceof UM}function sTt(t,r){return zd(n=>{let{targetSnapshot:o,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return a.length===0&&s.length===0?Pr(Ss(Kt({},n),{guardsResult:!0})):aTt(a,o,i,t).pipe(zd(l=>l&&JEt(l)?lTt(o,s,t,r):Pr(l)),dn(l=>Ss(Kt({},n),{guardsResult:l})))})}function aTt(t,r,n,o){return $d(t).pipe(zd(i=>pTt(i.component,i.route,n,r,o)),g1(i=>i!==!0,!0))}function lTt(t,r,n,o){return $d(r).pipe(Y2(i=>pz(cTt(i.route.parent,o),uTt(i.route,o),dTt(t,i.path,n),fTt(t,i.route,n))),g1(i=>i!==!0,!0))}function uTt(t,r){return t!==null&&r&&r(new Tne(t)),Pr(!0)}function cTt(t,r){return t!==null&&r&&r(new Cne(t)),Pr(!0)}function fTt(t,r,n){let o=r.routeConfig?r.routeConfig.canActivate:null;if(!o||o.length===0)return Pr(!0);let i=o.map(s=>Bre(()=>{let a=qM(r)??n,l=$k(s,a),u=tTt(l)?l.canActivate(r,t):fb(a,()=>l(r,t));return v1(u).pipe(g1())}));return Pr(i).pipe(Bk())}function dTt(t,r,n){let o=r[r.length-1],s=r.slice(0,r.length-1).reverse().map(a=>KEt(a)).filter(a=>a!==null).map(a=>Bre(()=>{let l=a.guards.map(u=>{let c=qM(a.node)??n,f=$k(u,c),d=rTt(f)?f.canActivateChild(o,t):fb(c,()=>f(o,t));return v1(d).pipe(g1())});return Pr(l).pipe(Bk())}));return Pr(s).pipe(Bk())}function pTt(t,r,n,o,i){let s=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!s||s.length===0)return Pr(!0);let a=s.map(l=>{let u=qM(r)??i,c=$k(l,u),f=nTt(c)?c.canDeactivate(t,r,n,o):fb(u,()=>c(t,r,n,o));return v1(f).pipe(g1())});return Pr(a).pipe(Bk())}function hTt(t,r,n,o){let i=r.canLoad;if(i===void 0||i.length===0)return Pr(!0);let s=i.map(a=>{let l=$k(a,t),u=eTt(l)?l.canLoad(r,n):fb(t,()=>l(r,n));return v1(u)});return Pr(s).pipe(Bk(),Bke(o))}function Bke(t){return uAe(Bi(r=>{if(typeof r!="boolean")throw Lz(t,r)}),dn(r=>r===!0))}function mTt(t,r,n,o){let i=r.canMatch;if(!i||i.length===0)return Pr(!0);let s=i.map(a=>{let l=$k(a,t),u=oTt(l)?l.canMatch(r,n):fb(t,()=>l(r,n));return v1(u)});return Pr(s).pipe(Bk(),Bke(o))}var VM=class{constructor(r){this.segmentGroup=r||null}},GM=class extends Error{constructor(r){super(),this.urlTree=r}};function Nk(t){return H2(new VM(t))}function gTt(t){return H2(new es(4e3,!1))}function yTt(t){return H2(Pke(!1,Wf.GuardRejected))}var Rne=class{constructor(r,n){this.urlSerializer=r,this.urlTree=n}lineralizeSegments(r,n){let o=[],i=n.root;for(;;){if(o=o.concat(i.segments),i.numberOfChildren===0)return Pr(o);if(i.numberOfChildren>1||!i.children[vn])return gTt(`${r.redirectTo}`);i=i.children[vn]}}applyRedirectCommands(r,n,o,i,s){if(typeof n!="string"){let l=n,{queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,params:h,data:m,title:g}=i,y=fb(s,()=>l({params:h,data:m,queryParams:u,fragment:c,routeConfig:f,url:d,outlet:p,title:g}));if(y instanceof x1)throw new GM(y);n=y}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),r,o);if(n[0]==="/")throw new GM(a);return a}applyRedirectCreateUrlTree(r,n,o,i){let s=this.createSegmentGroup(r,n.root,o,i);return new x1(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(r,n){let o={};return Object.entries(r).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);o[i]=n[l]}else o[i]=s}),o}createSegmentGroup(r,n,o,i){let s=this.createSegments(r,n.segments,o,i),a={};return Object.entries(n.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(r,u,o,i)}),new To(s,a)}createSegments(r,n,o,i){return n.map(s=>s.path[0]===":"?this.findPosParam(r,s,i):this.findOrReturn(s,o))}findPosParam(r,n,o){let i=o[n.path.substring(1)];if(!i)throw new es(4001,!1);return i}findOrReturn(r,n){let o=0;for(let i of n){if(i.path===r.path)return n.splice(o),i;o++}return r}},Mne={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bTt(t,r,n,o,i){let s=Gne(t,r,n);return s.matched?(o=qEt(r,o),mTt(o,r,n,i).pipe(dn(a=>a===!0?s:Kt({},Mne)))):Pr(s)}function Gne(t,r,n){if(r.path==="**")return xTt(n);if(r.path==="")return r.pathMatch==="full"&&(t.hasChildren()||n.length>0)?Kt({},Mne):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(r.matcher||hEt)(n,t,r);if(!i)return Kt({},Mne);let s={};Object.entries(i.posParams??{}).forEach(([l,u])=>{s[l]=u.path});let a=i.consumed.length>0?Kt(Kt({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function xTt(t){return{matched:!0,parameters:t.length>0?xke(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function mke(t,r,n,o){return n.length>0&&_Tt(t,n,o)?{segmentGroup:new To(r,wTt(o,new To(n,t.children))),slicedSegments:[]}:n.length===0&&STt(t,n,o)?{segmentGroup:new To(t.segments,vTt(t,n,o,t.children)),slicedSegments:n}:{segmentGroup:new To(t.segments,t.children),slicedSegments:n}}function vTt(t,r,n,o){let i={};for(let s of n)if(zz(t,r,s)&&!o[fh(s)]){let a=new To([],{});i[fh(s)]=a}return Kt(Kt({},o),i)}function wTt(t,r){let n={};n[vn]=r;for(let o of t)if(o.path===""&&fh(o)!==vn){let i=new To([],{});n[fh(o)]=i}return n}function _Tt(t,r,n){return n.some(o=>zz(t,r,o)&&fh(o)!==vn)}function STt(t,r,n){return n.some(o=>zz(t,r,o))}function zz(t,r,n){return(t.hasChildren()||r.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CTt(t,r,n,o){return fh(t)!==o&&(o===vn||!zz(r,n,t))?!1:Gne(r,t,n).matched}function ETt(t,r,n){return r.length===0&&!t.children[n]}var Pne=class{};function TTt(t,r,n,o,i,s,a="emptyOnly"){return new jne(t,r,n,o,i,a,s).recognize()}var ATt=31,jne=class{constructor(r,n,o,i,s,a,l){this.injector=r,this.configLoader=n,this.rootComponentType=o,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.applyRedirects=new Rne(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new es(4002,`'${r.segmentGroup}'`)}recognize(){let r=mke(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(dn(({children:n,rootSnapshot:o})=>{let i=new Gf(o,n),s=new jz("",i),a=FEt(o,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(r){let n=new Rk([],Object.freeze({}),Object.freeze(Kt({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),vn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,r,vn,n).pipe(dn(o=>({children:o,rootSnapshot:n})),m1(o=>{if(o instanceof GM)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof VM?this.noMatchError(o):o}))}processSegmentGroup(r,n,o,i,s){return o.segments.length===0&&o.hasChildren()?this.processChildren(r,n,o,s):this.processSegment(r,n,o,o.segments,i,!0,s).pipe(dn(a=>a instanceof Gf?[a]:[]))}processChildren(r,n,o,i){let s=[];for(let a of Object.keys(o.children))a==="primary"?s.unshift(a):s.push(a);return $d(s).pipe(Y2(a=>{let l=o.children[a],u=HEt(n,a);return this.processSegmentGroup(r,u,l,a,i)}),pAe((a,l)=>(a.push(...l),a)),zre(null),dAe(),zd(a=>{if(a===null)return Nk(o);let l=$ke(a);return kTt(l),Pr(l)}))}processSegment(r,n,o,i,s,a,l){return $d(n).pipe(Y2(u=>this.processSegmentAgainstRoute(u._injector??r,n,u,o,i,s,a,l).pipe(m1(c=>{if(c instanceof VM)return Pr(null);throw c}))),g1(u=>!!u),m1(u=>{if(Lke(u))return ETt(o,i,s)?Pr(new Pne):Nk(o);throw u}))}processSegmentAgainstRoute(r,n,o,i,s,a,l,u){return CTt(o,i,s,a)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(r,i,o,s,a,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(r,i,n,o,s,a,u):Nk(i):Nk(i)}expandSegmentAgainstRouteUsingRedirect(r,n,o,i,s,a,l){let{matched:u,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:p}=Gne(n,i,s);if(!u)return Nk(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ATt&&(this.allowRedirects=!1));let h=new Rk(s,c,Object.freeze(Kt({},this.urlTree.queryParams)),this.urlTree.fragment,gke(i),fh(i),i.component??i._loadedComponent??null,i,yke(i)),m=Pz(h,l,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let g=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,d,h,r);return this.applyRedirects.lineralizeSegments(i,g).pipe(zd(y=>this.processSegment(r,o,n,y.concat(p),a,!1,l)))}matchSegmentAgainstRoute(r,n,o,i,s,a){let l=bTt(n,o,i,r,this.urlSerializer);return o.path==="**"&&(n.children={}),l.pipe(Ud(u=>u.matched?(r=o._injector??r,this.getChildConfig(r,o,i).pipe(Ud(({routes:c})=>{let f=o._loadedInjector??r,{parameters:d,consumedSegments:p,remainingSegments:h}=u,m=new Rk(p,d,Object.freeze(Kt({},this.urlTree.queryParams)),this.urlTree.fragment,gke(o),fh(o),o.component??o._loadedComponent??null,o,yke(o)),g=Pz(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:y,slicedSegments:b}=mke(n,p,h,c);if(b.length===0&&y.hasChildren())return this.processChildren(f,c,y,m).pipe(dn(v=>new Gf(m,v)));if(c.length===0&&b.length===0)return Pr(new Gf(m,[]));let x=fh(o)===s;return this.processSegment(f,c,y,b,x?vn:s,!0,m).pipe(dn(v=>new Gf(m,v instanceof Gf?[v]:[])))}))):Nk(n)))}getChildConfig(r,n,o){return n.children?Pr({routes:n.children,injector:r}):n.loadChildren?n._loadedRoutes!==void 0?Pr({routes:n._loadedRoutes,injector:n._loadedInjector}):hTt(r,n,o,this.urlSerializer).pipe(zd(i=>i?this.configLoader.loadChildren(r,n).pipe(Bi(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):yTt(n))):Pr({routes:[],injector:r})}};function kTt(t){t.sort((r,n)=>r.value.outlet===vn?-1:n.value.outlet===vn?1:r.value.outlet.localeCompare(n.value.outlet))}function ITt(t){let r=t.value.routeConfig;return r&&r.path===""}function $ke(t){let r=[],n=new Set;for(let o of t){if(!ITt(o)){r.push(o);continue}let i=r.find(s=>o.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...o.children),n.add(i)):r.push(o)}for(let o of n){let i=$ke(o.children);r.push(new Gf(o.value,i))}return r.filter(o=>!n.has(o))}function gke(t){return t.data||{}}function yke(t){return t.resolve||{}}function DTt(t,r,n,o,i,s){return zd(a=>TTt(t,r,n,o,a.extractedUrl,i,s).pipe(dn(({state:l,tree:u})=>Ss(Kt({},a),{targetSnapshot:l,urlAfterRedirects:u}))))}function NTt(t,r){return zd(n=>{let{targetSnapshot:o,guards:{canActivateChecks:i}}=n;if(!i.length)return Pr(n);let s=new Set(i.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let c of zke(u))a.add(c);let l=0;return $d(a).pipe(Y2(u=>s.has(u)?OTt(u,o,t,r):(u.data=Pz(u,u.parent,t).resolve,Pr(void 0))),Bi(()=>l++),Ure(1),zd(u=>l===a.size?Pr(n):h1))})}function zke(t){let r=t.children.map(n=>zke(n)).flat();return[t,...r]}function OTt(t,r,n,o){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Rke(i)&&(s[WM]=i.title),FTt(s,t,r,o).pipe(dn(a=>(t._resolvedData=a,t.data=Pz(t,t.parent,n).resolve,null)))}function FTt(t,r,n,o){let i=pne(t);if(i.length===0)return Pr({});let s={};return $d(i).pipe(zd(a=>RTt(t[a],r,n,o).pipe(g1(),Bi(l=>{if(l instanceof UM)throw Lz(new MM,l);s[a]=l}))),Ure(1),hM(s),m1(a=>Lke(a)?h1:H2(a)))}function RTt(t,r,n,o){let i=qM(r)??o,s=$k(t,i),a=s.resolve?s.resolve(r,n):fb(i,()=>s(r,n));return v1(a)}function fne(t){return Ud(r=>{let n=t(r);return n?$d(n).pipe(dn(()=>r)):Pr(r)})}var Uke=(()=>{let r=class r{buildTitle(o){let i,s=o.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===vn);return i}getResolvedTitleForRoute(o){return o.data[WM]}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:()=>ar(MTt),providedIn:"root"});let t=r;return t})(),MTt=(()=>{let r=class r extends Uke{constructor(o){super(),this.title=o}updateTitle(o){let i=this.buildTitle(o);i!==void 0&&this.title.setTitle(i)}};r.\u0275fac=function(i){return new(i||r)(kt(uke))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Wne=new jn("",{providedIn:"root",factory:()=>({})}),qne=new jn(""),PTt=(()=>{let r=class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ar(Wre)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return Pr(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let i=v1(o.loadComponent()).pipe(dn(Vke),Bi(a=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=a}),X2(()=>{this.componentLoaders.delete(o)})),s=new jre(i,()=>new no).pipe(Pre());return this.componentLoaders.set(o,s),s}loadChildren(o,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Pr({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=jTt(i,this.compiler,o,this.onLoadEndListener).pipe(X2(()=>{this.childrenLoaders.delete(i)})),l=new jre(a,()=>new no).pipe(Pre());return this.childrenLoaders.set(i,l),l}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function jTt(t,r,n,o){return v1(t.loadChildren()).pipe(dn(Vke),zd(i=>i instanceof NAe||Array.isArray(i)?Pr(i):$d(r.compileModuleAsync(i))),dn(i=>{o&&o(t);let s,a,l=!1;return Array.isArray(i)?(a=i,l=!0):(s=i.create(n).injector,a=s.get(qne,[],{optional:!0,self:!0}).flat()),{routes:a.map(Vne),injector:s}}))}function LTt(t){return t&&typeof t=="object"&&"default"in t}function Vke(t){return LTt(t)?t.default:t}var Hne=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:()=>ar(BTt),providedIn:"root"});let t=r;return t})(),BTt=(()=>{let r=class r{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,i){return o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),$Tt=new jn("");var zTt=new jn(""),UTt=(()=>{let r=class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new no,this.transitionAbortSubject=new no,this.configLoader=ar(PTt),this.environmentInjector=ar(K2),this.urlSerializer=ar(Bne),this.rootContexts=ar($z),this.location=ar(kk),this.inputBindingEnabled=ar(Une,{optional:!0})!==null,this.titleStrategy=ar(Uke),this.options=ar(Wne,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ar(Hne),this.createViewTransition=ar($Tt,{optional:!0}),this.navigationErrorHandler=ar(zTt,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Pr(void 0),this.rootComponentType=null;let o=s=>this.events.next(new _ne(s)),i=s=>this.events.next(new Sne(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let i=++this.navigationId;this.transitions?.next(Ss(Kt(Kt({},this.transitions.value),o),{id:i}))}setupNavigations(o,i,s){return this.transitions=new Pa({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:FM,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vs(a=>a.id!==0),dn(a=>Ss(Kt({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Ud(a=>{let l=!1,u=!1;return Pr(a).pipe(Ud(c=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",Wf.SupersededByNewNavigation),h1;this.currentTransition=a,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ss(Kt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!f&&d!=="reload"){let p="";return this.events.next(new sS(c.id,this.urlSerializer.serialize(c.rawUrl),p,yne.IgnoredSameUrlNavigation)),c.resolve(!1),h1}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Pr(c).pipe(Ud(p=>{let h=this.transitions?.getValue();return this.events.next(new LM(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),h!==this.transitions?.getValue()?h1:Promise.resolve(p)}),DTt(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),Bi(p=>{a.targetSnapshot=p.targetSnapshot,a.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ss(Kt({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let h=new Fz(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:h,source:m,restoredState:g,extras:y}=c,b=new LM(p,this.urlSerializer.serialize(h),m,g);this.events.next(b);let x=Oke(this.rootComponentType).snapshot;return this.currentTransition=a=Ss(Kt({},c),{targetSnapshot:x,urlAfterRedirects:h,extras:Ss(Kt({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Pr(a)}else{let p="";return this.events.next(new sS(c.id,this.urlSerializer.serialize(c.extractedUrl),p,yne.IgnoredByUrlHandlingStrategy)),c.resolve(!1),h1}}),Bi(c=>{let f=new bne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),dn(c=>(this.currentTransition=a=Ss(Kt({},c),{guards:XEt(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),a)),sTt(this.environmentInjector,c=>this.events.next(c)),Bi(c=>{if(a.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Lz(this.urlSerializer,c.guardsResult);let f=new xne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),Vs(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Wf.GuardRejected),!1)),fne(c=>{if(c.guards.canActivateChecks.length)return Pr(c).pipe(Bi(f=>{let d=new vne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}),Ud(f=>{let d=!1;return Pr(f).pipe(NTt(this.paramsInheritanceStrategy,this.environmentInjector),Bi({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(f,"",Wf.NoDataFromResolver)}}))}),Bi(f=>{let d=new wne(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(d)}))}),fne(c=>{let f=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Bi(h=>{d.component=h}),dn(()=>{})));for(let h of d.children)p.push(...f(h));return p};return fM(f(c.targetSnapshot.root)).pipe(zre(null),Dc(1))}),fne(()=>this.afterPreactivation()),Ud(()=>{let{currentSnapshot:c,targetSnapshot:f}=a,d=this.createViewTransition?.(this.environmentInjector,c.root,f.root);return d?$d(d).pipe(dn(()=>a)):Pr(a)}),dn(c=>{let f=zEt(o.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=a=Ss(Kt({},c),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,a}),Bi(()=>{this.events.next(new $M)}),YEt(this.rootContexts,o.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Dc(1),Bi({next:c=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new iS(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{l=!0}}),Cs(this.transitionAbortSubject.pipe(Bi(c=>{throw c}))),X2(()=>{!l&&!u&&this.cancelNavigationTransition(a,"",Wf.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),m1(c=>{if(u=!0,jke(c))this.events.next(new xb(a.id,this.urlSerializer.serialize(a.extractedUrl),c.message,c.cancellationCode)),GEt(c)?this.events.next(new jk(c.url,c.navigationBehaviorOptions)):a.resolve(!1);else{let f=new BM(a.id,this.urlSerializer.serialize(a.extractedUrl),c,a.targetSnapshot??void 0);try{let d=fb(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(d instanceof UM){let{message:p,cancellationCode:h}=Lz(this.urlSerializer,d);this.events.next(new xb(a.id,this.urlSerializer.serialize(a.extractedUrl),p,h)),this.events.next(new jk(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(f);let p=o.errorHandler(c);a.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(d)}}return h1}))}))}cancelNavigationTransition(o,i,s){let a=new xb(o.id,this.urlSerializer.serialize(o.extractedUrl),i,s);this.events.next(a),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function VTt(t){return t!==FM}var GTt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:()=>ar(WTt),providedIn:"root"});let t=r;return t})(),Lne=class{shouldDetach(r){return!1}store(r,n){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,n){return r.routeConfig===n.routeConfig}},WTt=(()=>{let r=class r extends Lne{};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=bM(r)))(s||r)}})(),r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Gke=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:()=>ar(qTt),providedIn:"root"});let t=r;return t})(),qTt=(()=>{let r=class r extends Gke{constructor(){super(...arguments),this.location=ar(kk),this.urlSerializer=ar(Bne),this.options=ar(Wne,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ar(Hne),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new x1,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Oke(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(i=>{i.type==="popstate"&&o(i.url,i.state)})}handleRouterEvent(o,i){if(o instanceof LM)this.stateMemento=this.createStateMemento();else if(o instanceof sS)this.rawUrlTree=i.initialUrl;else if(o instanceof Fz){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else o instanceof $M?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):o instanceof xb&&(o.code===Wf.GuardRejected||o.code===Wf.NoDataFromResolver)?this.restoreHistory(i):o instanceof BM?this.restoreHistory(i,!0):o instanceof iS&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,i){let s=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,l=Kt(Kt({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",l)}else{let a=Kt(Kt({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(o,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===o.finalUrl&&a===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,i){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:i}:{navigationId:o}}};r.\u0275fac=(()=>{let o;return function(s){return(o||(o=bM(r)))(s||r)}})(),r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),NM=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(NM||{});function HTt(t,r){t.events.pipe(Vs(n=>n instanceof iS||n instanceof xb||n instanceof BM||n instanceof sS),dn(n=>n instanceof iS||n instanceof sS?NM.COMPLETE:(n instanceof xb?n.code===Wf.Redirect||n.code===Wf.SupersededByNewNavigation:!1)?NM.REDIRECTING:NM.FAILED),Vs(n=>n!==NM.REDIRECTING),Dc(1)).subscribe(()=>{r()})}function YTt(t){throw t}var XTt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KTt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wke=(()=>{let r=class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=ar(wz),this.stateManager=ar(Gke),this.options=ar(Wne,{optional:!0})||{},this.pendingTasks=ar(FAe),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ar(UTt),this.urlSerializer=ar(Bne),this.location=ar(kk),this.urlHandlingStrategy=ar(Hne),this._events=new no,this.errorHandler=this.options.errorHandler||YTt,this.navigated=!1,this.routeReuseStrategy=ar(GTt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ar(qne,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ar(Une,{optional:!0}),this.eventsSubscription=new ub,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof xb&&i.code!==Wf.Redirect&&i.code!==Wf.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof iS)this.navigated=!0;else if(i instanceof jk){let l=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c=Kt({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||VTt(s.source)},l);this.scheduleNavigation(u,FM,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}QTt(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),FM,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",i)},0)})}navigateToSyncWithBrowser(o,i,s){let a={replaceUrl:!0},l=s?.navigationId?s:null;if(s){let c=Kt({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(a.state=c)}let u=this.parseUrl(o);this.scheduleNavigation(u,i,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(Vne),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,i={}){let{relativeTo:s,queryParams:a,fragment:l,queryParamsHandling:u,preserveFragment:c}=i,f=c?this.currentUrlTree.fragment:l,d=null;switch(u){case"merge":d=Kt(Kt({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let h=s?s.snapshot:this.routerState.snapshot.root;p=kke(h)}catch{(typeof o[0]!="string"||o[0][0]!=="/")&&(o=[]),p=this.currentUrlTree.root}return Ike(p,o,d,f??null)}navigateByUrl(o,i={skipLocationChange:!1}){let s=PM(o)?o:this.parseUrl(o),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,FM,null,i)}navigate(o,i={skipLocationChange:!1}){return ZTt(o),this.navigateByUrl(this.createUrlTree(o,i),i)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,i){let s;if(i===!0?s=Kt({},XTt):i===!1?s=Kt({},KTt):s=i,PM(o))return fke(this.currentUrlTree,o,s);let a=this.parseUrl(o);return fke(this.currentUrlTree,a,s)}removeEmptyProps(o){return Object.entries(o).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(o,i,s,a,l){if(this.disposed)return Promise.resolve(!1);let u,c,f;l?(u=l.resolve,c=l.reject,f=l.promise):f=new Promise((p,h)=>{u=p,c=h});let d=this.pendingTasks.add();return HTt(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:a,resolve:u,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(p=>Promise.reject(p))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function ZTt(t){for(let r=0;r<t.length;r++)if(t[r]==null)throw new es(4008,!1)}function QTt(t){return!(t instanceof $M)&&!(t instanceof jk)}var JTt=new jn("");function qke(t,...r){return yM([{provide:qne,multi:!0,useValue:t},[],{provide:Lk,useFactory:eAt,deps:[Wke]},{provide:jAe,multi:!0,useFactory:tAt},r.map(n=>n.\u0275providers)])}function eAt(t){return t.routerState.root}function tAt(){let t=ar($f);return r=>{let n=t.get(Ak);if(r!==n.components[0])return;let o=t.get(Wke),i=t.get(rAt);t.get(nAt)===1&&o.initialNavigation(),t.get(oAt,null,Vre.Optional)?.setUpPreloading(),t.get(JTt,null,Vre.Optional)?.init(),o.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rAt=new jn("",{factory:()=>new no}),nAt=new jn("",{providedIn:"root",factory:()=>1});var oAt=new jn("");var hSt=Bf(Qpt());re();Ee();pn();fr();UI();var eJ={kernelName:wb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,rp(rt(n,"float32"),-1))}}};Ee();pn();Xn();Ks();Uo();Ch();fs();io();var Jpt={kernelName:gg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=qr(rt(n,"float32")),i=Kn(wt(Rt(1),o));return Zr(Ct(t,i))}}}};Ee();pn();Xn();Ch();fs();io();var eht={kernelName:yg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Kn(wt(qr(rt(n,"float32")),1));return Ct(t,o)}}}};Ee();ko();Ht();Ci();var tht={kernelName:Xd,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=t,u=oo(n.shape,i);return u.length>0&&(l=It(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=oo(o.shape,i);return u.length>0&&(l=It(l,u)),Se(l,o.shape)}}}};Ee();var rht={kernelName:_b,saveAllInputs:!0,gradFunc:(t,r)=>{let n={};return r.forEach((o,i)=>{n[i]=()=>t.clone()}),n}};Ee();zo();var nht={kernelName:Sb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>sr(n)}}};Ee();zo();var oht={kernelName:Cb,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>sr(n)}}};Ee();pn();Xn();Uo();Ch();fs();io();var iht={kernelName:bg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Kn(wt(Rt(1),qr(rt(n,"float32")))))}}};Ee();$o();pn();Xn();Uo();Ch();fs();var sht={kernelName:xg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=Kn(Ke(Rt(1),qr(rt(n,"float32"))));return Ct(t,o)}}}};Ee();$o();ko();Xn();fr();Ks();Ht();fs();Ci();var aht={kernelName:_g,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Ke(qr(n),qr(o)),u=we(t,Ct(o,l)),c=oo(n.shape,i);return c.length>0&&(u=It(u,c)),Se(u,n.shape)},b:()=>{let l=Ke(qr(n),qr(o)),u=Zr(we(t,Ct(n,l))),c=oo(o.shape,i);return c.length>0&&(u=It(u,c)),Se(u,o.shape)}}}};Ee();$o();pn();Xn();fs();var lht={kernelName:vg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Ke(qr(rt(n,"float32")),1))}}};Ee();pn();Xn();fs();io();Uo();var uht={kernelName:wg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,wt(Rt(1),qr(rt(n,"float32"))))}}};Ee();$e();Ee();Pe();Ze();Is();De();Ht();function d2r(t,r,n,o,i,s){let a=J(t,"dy","avgPool3dGrad"),l=J(r,"input","avgPool3dGrad"),u=a,c=l,f=!1;l.rank===4&&(f=!0,u=Se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),de(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),de(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),go("avgPool3dGrad",i,s);let d={dy:u,input:c},p={filterSize:n,strides:o,pad:i,dimRoundingMode:s},h=ue.runKernel(pS,d,p);return f?Se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var cht=se({avgPool3dGrad_:d2r});var fht={kernelName:Tb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>cht(t,o,i,s,a,l)}}};Ee();$e();Ee();Pe();Ze();De();Ht();function p2r(t,r,n,o,i){let s=J(t,"dy","avgPoolGrad"),a=J(r,"input","avgPoolGrad");de(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let l=a,u=s,c=!1;a.rank===3&&(c=!0,l=Se(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=Se(s,[1,s.shape[0],s.shape[1],s.shape[2]])),de(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),de(l.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${l.rank}.`);let f={dy:u,input:l},d={filterSize:n,strides:o,pad:i},p=ue.runKernel(dS,f,d);return c?Se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var dht=se({avgPoolGrad_:p2r});var pht={kernelName:Eb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{filterSize:i,strides:s,pad:a}=n;return{x:()=>dht(t,o,i,s,a)}}};Ee();wh();var hht={kernelName:Ab,inputsToSave:["a","b"],gradFunc:(t,r,n)=>{let[o,i]=r,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>Vr(t,i,!1,!0),b:()=>Vr(o,t,!0,!1)}:!s&&a?{a:()=>Vr(t,i,!1,!1),b:()=>Vr(t,o,!0,!1)}:s&&!a?{a:()=>Vr(i,t,!1,!0),b:()=>Vr(o,t,!1,!1)}:{a:()=>Vr(i,t,!0,!0),b:()=>Vr(t,o,!0,!0)}}};Ee();E3();var mht={kernelName:kb,gradFunc:(t,r,n)=>{let{blockShape:o,crops:i}=n;return{x:()=>nw(t,o,i)}}};Ee();Ci();var ght={kernelName:noe,gradFunc:(t,r,n)=>{let o=n,i=o.inputShape,s=o.shape,a=Array.from(s);for(let u=i.length-1;u>=0;u--)if(i[u]===s[u])a[u]=1;else if(i[u]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);let l=[];for(let u=0;u<a.length;u++)a[u]>1&&l.push(u);return{x:()=>It(t,l,!0)}}};Ee();var yht={kernelName:ph,gradFunc:t=>({x:()=>t.clone()})};Ee();zo();var bht={kernelName:Sg,gradFunc:t=>({x:()=>sr(t)})};Ee();NC();Z1();OC();Zf();zo();var xht={kernelName:Cg,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>yo(za(tu(o,i),Pc(o,s)),t,sr(t))}}};Ee();var vht={kernelName:Ib,inputsToSave:["x"],gradFunc:eJ.gradFunc};Ee();BC();Ze();var wht={kernelName:Db,saveAllInputs:!0,gradFunc:(t,r,n)=>{let o=r.map(u=>u.shape),{axis:i}=n,s=cs(i,r[0].shape)[0],a=o.map(u=>u[s]);return ps(t,a,s).map(u=>()=>u)}};Ee();PU();D8();Is();Ze();var _ht={kernelName:Nb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{dilations:s,strides:a,pad:l,dataFormat:u}=n;return de(Yf(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>bI(o.shape,t,i,a,l,u),filter:()=>HI(o,t,i.shape,a,l,u)}}};Ee();kC();PU();var Sht={kernelName:Ob,inputsToSave:["dy","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,{strides:s,pad:a,dataFormat:l,dimRoundingMode:u}=n;return{dy:()=>qu(t,i,s,a,l,1,u),filter:()=>HI(t,o,i.shape,s,a,l,u)}}};Ee();$e();Ee();Ze();De();Ht();function h2r(t,r,n,o,i){let s=t;t.rank===4&&(s=Se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=r;a.rank===4&&(a=Se(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),de(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),de(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),de(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),de(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),de(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);let l={x:s,dy:a},u={strides:o,pad:i,filterShape:n};return ue.runKernel(bS,l,u)}var Cht=se({conv3DBackpropFilter_:h2r});Koe();Is();Ze();var Eht={kernelName:Fb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s}=n;de(Yf(o),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let[a,l]=r;return{x:()=>O8(a.shape,t,l,i,s),filter:()=>Cht(a,t,l.shape,i,s)}}};Ee();pn();fr();Ks();Oie();var Tht={kernelName:Eg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(Zr(PI(rt(n,"float32"))),t)}}};Ee();pn();fr();Fie();var Aht={kernelName:Tg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(jI(rt(n,"float32")),t)}}};Ee();Sh();P8();Ax();var kht={kernelName:Rb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{let l=iie([i],o.rank),u=wI(t,i,s,!a);return l!=null&&(u=Gr(u,l)),u}}}};Ee();Is();Vie();Gie();Ze();var Iht={kernelName:Mb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let{dilations:o,strides:i,pad:s,dimRoundingMode:a}=n,l=o??[1,1];de(Yf(l),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${l}'`);let[u,c]=r;return de(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),de(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),de(u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),de(ba(i,l),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${l}'.`),go("depthwiseConv2d",s,a),{x:()=>LU(u.shape,t,c,i,s,l,a),filter:()=>jU(u,t,c.shape,i,s,l,a)}}};$e();Ee();var Dht={kernelName:Pb,inputsToSave:["x","filter"],gradFunc:(t,r,n)=>{let[o,i]=r,s={x:o,filter:i,dy:t},a={x:o,filter:i,dy:t};return{x:()=>ue.runKernel(qk,s,n),filter:()=>ue.runKernel(Hk,a,n)}}};$e();Ee();var Nht={kernelName:kg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r,o={dy:t,y:n};return{x:()=>ue.runKernel(kS,o)}}};Ee();g0();fr();Ks();fs();var Oht={kernelName:Ig,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(bi(Zr(qr(n))),2/Math.sqrt(Math.PI));return{x:()=>we(t,o)}}};Ee();fr();var Fht={kernelName:Dg,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,n)}}};Ee();Ht();var Rht={kernelName:jb,inputsToSave:["input"],gradFunc:(t,r)=>{let[n]=r;return{input:()=>Se(t,n.shape)}}};Ee();g0();fr();var Mht={kernelName:Ng,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,bi(n))}}};Ee();zo();var Pht={kernelName:Og,gradFunc:t=>({x:()=>sr(t)})};Ee();ko();pn();Xn();fr();Ks();Ht();fs();Ci();var jht={kernelName:Fg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Ct(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);u.length>0&&(l=Se(It(l,u),o.shape));let c=qr(o);return Zr(Ct(l,rt(c,"float32")))}}}};Ee();$o();ko();fr();Ht();Iie();Uo();io();Ci();EI();var Lht={kernelName:Lb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,r,n)=>{let{varianceEpsilon:o}=n,[i,s,a,l]=r,u=l??Rt(1),c=oo(s.shape,i.shape),f=[];if(s.rank===1){for(let w=0;w<i.shape.length-1;++w)f.push(i.shape[w]);f.push(1)}let d=wt(i,s),p=we(t,u),h=FI(Ke(a,Rt(o))),m=we(we(we(h,h),h),Rt(-.5));return{x:()=>s.rank===1?Se(we(we(t,xa(Se(h,[1,1,1,s.shape[0]]),f)),u),i.shape):Se(we(we(t,h),u),i.shape),mean:()=>{let w=we(we(h,Rt(-1)),p);return s.rank===1&&(w=It(w,c)),Se(w,s.shape)},variance:()=>{let w=we(we(m,d),p);return s.rank===1&&(w=It(w,c)),Se(w,s.shape)},scale:()=>{let w=we(d,h),_=we(t,w);return s.rank===1&&(_=It(_,c)),Se(_,s.shape)},offset:()=>{let w=t;return s.rank===1&&(w=It(w,c)),Se(w,s.shape)}}}};Ee();Sh();Ht();lw();Ax();OU();Ze();var zht={kernelName:Bb,inputsToSave:["x","indices"],gradFunc:(t,r,n)=>{let[o,i]=r,{axis:s,batchDims:a}=n,l=cs(s,o.shape)[0],u=(c,f,d)=>()=>{let p=c.shape,h=f.size,m=p.slice(0,l),g=m.length,y=p.slice(s,p.length).slice(1),b=y.length,x=Bht(0,g),v=Bht(g+1,g+1+b),w=$ht([m,[h],y]),_=Se(d,w),C=Se(f,[h]),S=$ht([[g],x,v]),E=Gr(_,S),A=WI(E,C,c.shape[l]),N=h3(S);return A=Gr(A,N),A};if(a===1){let c=o.shape[0],f=o.split(c,0);return{x:()=>ts(f.map((h,m)=>u(h,i.slice(m,1),t.slice(m,1))())).reshape(o.shape),indices:()=>i}}else return{x:u(o,i,t),indices:()=>i}}};function Bht(t,r){let n=[];for(let o=t;o<r;++o)n.push(o);return n}function $ht(t){let r=[];for(let n=0;n<t.length;++n)for(let o=0;o<t[n].length;++o)r.push(t[n][o]);return r}Ee();zo();var Uht={kernelName:Rg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>sr(n),b:()=>sr(o)}}};Ee();pn();var Vht={kernelName:hh,gradFunc:t=>({x:()=>rt(t,"float32")})};Ee();zo();var Ght={kernelName:Mg,gradFunc:t=>({x:()=>sr(t)})};Ee();zo();var Wht={kernelName:Pg,gradFunc:t=>({x:()=>sr(t)})};Ee();zo();var qht={kernelName:jg,gradFunc:t=>({x:()=>sr(t)})};Ee();x0();fr();Zf();var Hht={kernelName:$b,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{alpha:i}=n,s=oi(o,0);return{x:()=>yo(s,t,we(t,i))}}};Ee();$o();Xn();var Yht={kernelName:Bg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Ke(n,1))}}};Ee();pn();Xn();var Xht={kernelName:Lg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,rt(n,"float32"))}}};Ee();g0();fr();io();Ci();var Kht={kernelName:ooe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n;return{logits:()=>{let a=bi(o);return wt(t,we(It(t,i,!0),a))}}}};Ee();$e();Ee();De();function m2r(t,r,n,o=5,i=1,s=1,a=.5){let l={x:t,y:r,dy:n},u={depthRadius:o,bias:i,alpha:s,beta:a};return ue.runKernel(PS,l,u)}var Zht=se({localResponseNormalizationBackprop_:m2r});var Qht={kernelName:zb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{depthRadius:s,bias:a,alpha:l,beta:u}=n;return{x:()=>Zht(o,i,t,s,a,l,u)}}};Ee();Ze();Sh();pn();p3();fr();Ht();function tJ(t,r,n,o){return r.rank<n.rank&&(r=Se(r,tp(r.shape,o))),t.rank<n.rank&&(t=Se(t,tp(t.shape,o))),{x:()=>we(t,rt(Sl(n,r),t.dtype))}}var j2e={kernelName:Ub,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{reductionIndices:i}=o,s=r[0],a=r[1],l=cs(i,s.shape),u=tJ(t,a,s,l);return{x:()=>u.x()}}};Ee();pn();NC();b3();fr();var Jht={kernelName:$g,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(tu(n,o),"float32")),b:()=>we(t,rt(_x(n,o),"float32"))}}};Ee();$e();Ee();Pe();Ze();Is();De();Ht();function g2r(t,r,n,o,i,s,a){let l=J(t,"dy","maxPool3dGrad"),u=J(r,"input","maxPool3dGrad"),c=J(n,"output","maxPool3dGrad"),f=l,d=u,p=c,h=!1;u.rank===4&&(h=!0,f=Se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Se(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=Se(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),de(f.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${f.rank}.`),de(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),de(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),go("maxPool3dGrad",s,a);let m={dy:f,input:d,output:p},g={filterSize:o,strides:i,pad:s,dimRoundingMode:a},y=ue.runKernel(LS,m,g);return h?Se(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var emt=se({maxPool3dGrad_:g2r});var tmt={kernelName:Gb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=n;return{x:()=>emt(t,o,i,s,a,l,u)}}};Ee();$e();Ee();Pe();Ze();Is();De();function y2r(t,r,n,o,i,s,a){let l=J(t,"dy","maxPoolGrad"),u=J(r,"input","maxPoolGrad"),c=J(n,"output","maxPoolGrad");de(u.rank===l.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${l.rank})`),de(l.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),de(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),go("maxPoolGrad",s,a);let f={dy:l,input:u,output:c},d={filterSize:o,strides:i,pad:s,dimRoundingMode:a};return ue.runKernel(jS,f,d)}var rmt=se({maxPoolGrad_:y2r});var nmt={kernelName:Vb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o,i]=r,{filterSize:s,strides:a,pad:l}=n;return{x:()=>rmt(t,o,i,s,a,l)}}};Ee();Sh();Xn();fr();FC();Ht();Ze();var omt={kernelName:Wb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=cs(i,o.shape),l=oie(o.shape,s)[1],u=on(l);return{x:()=>{let f=o.shape.slice();s.forEach(h=>{f[h]=1});let d=Se(t,f);return Ct(we(d,Ui(o.shape,"float32")),u)}}}};Ee();Ze();var imt={kernelName:qb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,r,n)=>{let o=n,{axis:i}=o,[s,a]=r,l=cs(i,s.shape),u=tJ(t,a,s,l);return{x:()=>u.x()}}};Ee();pn();x0();Z1();fr();var smt={kernelName:zg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r;return{a:()=>we(t,rt(Pc(n,o),"float32")),b:()=>we(t,rt(oi(n,o),"float32"))}}};Ee();Wu();var amt={kernelName:Hb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>$r(t,s,o.shape)}}};Ee();ko();Xn();W8();fr();Ks();Ht();Ci();var lmt={kernelName:Ug,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=oo(n.shape,i);return l.length>0?Se(It(t,l),n.shape):t},b:()=>{let l=we(t,Zr(y0(Ct(n,o)))),u=oo(o.shape,i);return u.length>0?Se(It(l,u),o.shape):l}}}};Ee();ko();pn();fr();Ht();Ci();var umt={kernelName:Vg,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=we(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);return u.length>0?Se(It(l,u),o.shape):l}}}};Ee();Ks();var cmt={kernelName:Yb,gradFunc:t=>({x:()=>Zr(t)})};Ee();II();var fmt={kernelName:Kb,inputsToSave:["indices"],gradFunc:(t,r)=>{let n=r[0];return{indices:()=>xo(n.shape,"float32")}}};Ee();zo();var dmt={kernelName:Xb,gradFunc:t=>({x:()=>sr(t)})};Ee();qI();var pmt={kernelName:Zb,saveAllInputs:!0,gradFunc:(t,r,n)=>{let{axis:o}=n;return Ua(t,o).map(s=>()=>s)}};Ee();Wu();var L2e={kernelName:Qb,inputsToSave:["x"],gradFunc:(t,r,n)=>{let o=r[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>$r(t,s,o.shape)}}};Ee();ko();pn();x0();TI();fr();Y1();Ht();Uo();io();Ci();Zf();zo();var hmt={kernelName:Gg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,r)=>{let[n,o,i]=r,s=n,a=o,l=jr(s.shape,a.shape);return{a:()=>{let f=rt(a,"float32"),d=we(t,we(f,$a(s,wt(f,Rt(1))))),p=oo(s.shape,l);return p.length>0&&(d=It(d,p)),Se(d,s.shape)},b:()=>{let f=oi(s,0),d=yo(f,Xs(s),sr(s)),p=we(t,we(i,d)),h=oo(a.shape,l);return h.length>0&&(p=It(p,h)),Se(p,a.shape)}}}};Ee();ko();x0();fr();Ht();Ci();Zf();zo();var mmt={kernelName:Jb,inputsToSave:["x","alpha"],gradFunc:(t,r)=>{let[n,o]=r,i=oi(n,0);return{x:()=>yo(i,t,we(t,o)),alpha:()=>{let s=yo(i,sr(t),we(t,n)),a=oo(o.shape,t.shape);return a.length>0&&(s=It(s,a)),Se(s,o.shape)}}}};vse();Ee();M8();fr();Ht();Ax();function b2r(t,r,n){let o=t.shape.slice();o[n]=1;let i=Se(r,o),s=IC(t,n,!0,!1),a=IC(t,n,!0,!0),l=we(s,a);return we(i,l)}function x2r(t,r,n){let o=t.shape.length,i=o-n.length,s=ce.getAxesPermutation(n,o),a=t;s!=null&&(a=Gr(t,s));let l=a.shape.slice(),c=l.splice(o-n.length,n.length).reduce((p,h)=>p*h,1);l.push(c);let f=a.reshape(l),d=b2r(f,r,i);if(d=d.reshape(a.shape),s!=null){let p=ce.getUndoAxesPermutation(s);d=Gr(d,p)}return d}var gmt={kernelName:ex,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{axis:i}=n,s=[];return i==null?s=o.shape.map((a,l)=>l):typeof i=="number"?s=[i]:s=i,{x:()=>x2r(o,t,s)}}};Ee();ko();pn();Xn();fr();Ks();Ht();fs();Ci();var ymt={kernelName:Ag,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=Ct(t,rt(o,"float32")),u=oo(n.shape,i);return u.length>0?Se(It(l,u),n.shape):l},b:()=>{let l=we(t,rt(n,"float32")),u=oo(o.shape,i);u.length>0&&(l=Se(It(l,u),o.shape));let c=qr(o);return Zr(Ct(l,rt(c,"float32")))}}}};Ee();Xn();Ks();fs();var bmt={kernelName:Wg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,Zr(qr(n)))}}};Ee();pn();Z1();fr();UI();var xmt={kernelName:Hg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r,o=we(Pc(n,6),rp(n));return{x:()=>we(t,rt(o,"float32"))}}};Ee();pn();fr();UI();var vmt={kernelName:qg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,rt(rp(n),"float32"))}}};Ee();Ht();var wmt={kernelName:tx,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Se(t,n.shape)}}};$e();Ee();var _mt={kernelName:nx,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(KS,i,n)}}};$e();Ee();var Smt={kernelName:rx,inputsToSave:["images"],gradFunc:(t,r,n)=>{let[o]=r,i={dy:t,images:o};return{images:()=>ue.runKernel(XS,i,n)}}};Ee();Ex();Ze();var Cmt={kernelName:ox,gradFunc:(t,r,n)=>{let{dims:o}=n,i=cs(o,t.shape);return{x:()=>ds(t,i)}}};Ee();zo();var Emt={kernelName:Yg,gradFunc:t=>({x:()=>sr(t)})};Ee();Xn();fr();Ks();Y1();var Tmt={kernelName:Xg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Zr(Ct(t,we($a(n,1.5),2)))}}};Ee();pn();v3();fr();zo();var Amt={kernelName:ix,inputsToSave:["condition"],gradFunc:(t,r)=>{let[n]=r;return{condition:()=>rt(sr(n),"float32"),t:()=>we(t,rt(n,t.dtype)),e:()=>we(t,rt(ew(n),t.dtype))}}};Ee();pn();g0();x0();fr();Uo();yse();Zf();var kmt={kernelName:Kg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>{let o=oi(n,Rt(0)),i=Rt(mse),s=Rt(gse),a=we(t,s),l=we(we(t,i),bi(rt(n,"float32")));return yo(o,a,l)}}}};Ee();fr();Uo();io();var Imt={kernelName:e0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(n,wt(Rt(1),n)))}}};Ee();zo();var Dmt={kernelName:Jg,gradFunc:t=>({x:()=>sr(t)})};Ee();pn();R8();fr();var Nmt={kernelName:Zg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(q1(rt(n,"float32")),t)}}};Ee();pn();Zoe();fr();var Omt={kernelName:Qg,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(vI(rt(n,"float32")),t)}}};Ee();rw();o7();var Fmt={kernelName:sx,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{begin:i,size:s}=n,a=o.shape,[l,u]=fse(o,i,s),c=[];for(let f=0;f<t.rank;f++)c.push([l[f],a[f]-l[f]-u[f]]);return{x:()=>ru(t,c)}}};Ee();fr();io();Ci();var Rmt={kernelName:cx,outputsToSave:[!0],gradFunc:(t,r,n)=>{let[o]=r,{dim:i}=n,s=!0,a=we(t,o);return{logits:()=>wt(a,we(It(a,[i],s),o))}}};Ee();fr();hI();var Mmt={kernelName:t0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,_l(n))}}};Ee();c3();var B2e={kernelName:lx,gradFunc:(t,r,n)=>{let{blockShape:o,paddings:i}=n;return{x:()=>W1(t,o,i)}}};Ee();Kf();var $2e={kernelName:ux,gradFunc:(t,r,n)=>{let{axis:o}=n;return{x:()=>Fn(t,o)}}};Ee();pn();Xn();fr();Ch();var Pmt={kernelName:r0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,we(Kn(rt(n,"float32")),2))}}};Ee();pn();fr();var jmt={kernelName:iC,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(t,we(rt(n,"float32"),2))}}};Ee();fr();Uo();io();var Lmt={kernelName:n0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=Rt(2);return{a:()=>we(t,we(i,wt(n,o))),b:()=>we(t,we(i,wt(o,n)))}}};Ee();zo();var Bmt={kernelName:a0,gradFunc:t=>({x:()=>sr(t)})};Ee();ko();Ks();Ht();Ci();var $mt={kernelName:o0,inputsToSave:["a","b"],gradFunc:(t,r)=>{let[n,o]=r,i=jr(n.shape,o.shape);return{a:()=>{let l=t,u=oo(n.shape,i);return u.length>0&&(l=It(l,u)),Se(l,n.shape)},b:()=>{let l=t,u=oo(o.shape,i);return u.length>0&&(l=It(l,u)),Se(Zr(l),o.shape)}}}};Ee();fr();FC();Ht();Ze();var zmt={kernelName:ax,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,i=o.shape.slice(),{axis:s}=n;cs(s,o.shape).forEach(c=>{i[c]=1});let l=Se(t,i),u=we(l,Ui(o.shape,"float32"));return{x:()=>u}}};Ee();R8();Xn();fs();var Umt={kernelName:i0,inputsToSave:["x"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>Ct(t,qr(q1(n)))}}};Ee();fr();Uo();fs();io();var Vmt={kernelName:s0,outputsToSave:[!0],gradFunc:(t,r)=>{let[n]=r;return{x:()=>we(wt(Rt(1),qr(n)),t)}}};Ee();$o();Wu();zo();var Gmt={kernelName:mh,inputsToSave:["x"],gradFunc:(t,r,n)=>{let[o]=r,{reps:i}=n;return{x:()=>{let a=sr(o);if(o.rank===1)for(let l=0;l<i[0];++l)a=Ke(a,$r(t,[l*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)a=Ke(a,$r(t,[l*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)a=Ke(a,$r(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else if(o.rank===4)for(let l=0;l<i[0];++l)for(let u=0;u<i[1];++u)for(let c=0;c<i[2];++c)for(let f=0;f<i[3];++f)a=Ke(a,$r(t,[l*o.shape[0],u*o.shape[1],c*o.shape[2],f*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${o.rank} tensors yet.`);return a}}}};Ee();Sh();Ax();var Wmt={kernelName:gh,gradFunc:(t,r,n)=>{let o=n,{perm:i}=o,s=h3(i);return{x:()=>Gr(t,s)}}};Ee();lw();var qmt={kernelName:fx,gradFunc:(t,r,n)=>{let o=n,{axis:i}=o;return{value:()=>ts(t,i)}}};Ee();CI();g3();NC();OC();_3();FC();Uo();Zf();zo();var Hmt={kernelName:dx,inputsToSave:["segmentIds"],gradFunc:(t,r)=>{let[n]=r;return{x:()=>v2r(t,n)}}};function v2r(t,r){let n=Yu(r,sr(r)),o=b0(t,n),i=tu(r,Rt(0,"int32")),s=o.rank-i.rank;for(let l=0;l<s;++l)i=Ei(i,l+1);i=za(i,Ui(o.shape,"bool"));let a=sr(o);return yo(i,o,a)}Ee();zo();var Ymt={kernelName:px,gradFunc:t=>({x:()=>sr(t)})};QM();var w2r=[eJ,Jpt,eht,tht,rht,nht,oht,iht,sht,aht,lht,uht,fht,pht,hht,mht,ght,yht,bht,xht,vht,wht,Sht,_ht,Eht,Tht,Aht,kht,Iht,Dht,ymt,Nht,Oht,Fht,Rht,Mht,jht,Pht,Lht,zht,Uht,Vht,Ght,Wht,qht,Hht,Yht,Xht,Kht,Qht,j2e,j2e,Jht,tmt,nmt,omt,imt,smt,amt,lmt,umt,cmt,fmt,dmt,pmt,L2e,L2e,hmt,mmt,gmt,bmt,xmt,vmt,wmt,_mt,Smt,Cmt,Emt,Tmt,Amt,kmt,Imt,Dmt,Nmt,Omt,Fmt,Rmt,Mmt,B2e,B2e,$2e,$2e,Pmt,Lmt,jmt,Bmt,$mt,zmt,Umt,Vmt,Gmt,Wmt,qmt,Hmt,Ymt];for(let t of w2r)ioe(t);wse();re();re();re();var jd=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},Fu=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},Ie=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},vr=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}},rJ=class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}};var h6=class{constructor(r){this.maxEntries=r||100,this.cache=new Map}get(r){let n;return this.cache.has(r)&&(n=this.cache.get(r),this.cache.delete(r),this.cache.set(r,n)),n}put(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxEntries){let o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(r,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(r){if(r<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${r}.`);if(this.maxEntries>r)for(let n=0;n<this.maxEntries-r;n++){let o=this.cache.keys().next().value;this.cache.delete(o)}this.maxEntries=r}};re();function Hp(t,r){if(Array.isArray(t)){let n=[];for(let o=0;o<r;o++)n=n.concat(t);return n}else{let n=new Array(r);return n.fill(t),n}}function Ld(t,r){if(!t)throw new rJ(r)}function U2e(t,r){let n=0;for(let o of t)o===r&&n++;return n}function ua(t){return t.length===1?t[0]:t}function Rn(t){return Array.isArray(t)?t:[t]}function Yp(t){let n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Hv(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(r,n)=>n.toUpperCase())}var qp={};function dR(t){if(t==null)return null;let r={};return r.className=t.getClassName(),r.config=t.getConfig(),r}function z2e(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(r=>z2e(r));else{let r=Object.keys(t);for(let n of r){let o=t[n];o!=null&&typeof o=="object"&&(!Array.isArray(o)&&o.type==="ndarray"&&typeof o.value=="number"?t[n]=o.value:z2e(o))}}}function Qy(t,r={},n={},o="object",i=!1){if(typeof t=="string"){let s=t,a;if(s in n)a=n[s];else if(s in qp)a=qp[s];else if(a=r[s],a==null)throw new Ie(`Unknown ${o}: ${t}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{let s=t;if(s.className==null||s.config==null)throw new Ie(`${o}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);let a=s.className,l,u;if(a in n?[l,u]=n[a]:a in qp?[l,u]=qp.className:a in r&&([l,u]=r[a]),l==null)throw new Ie(`Unknown ${o}: ${a}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){let c={};for(let h of Object.keys(qp))c[h]=qp[h];for(let h of Object.keys(n))c[h]=n[h];let f=s.config;f.customObjects=c;let d=Object.assign({},qp);for(let h of Object.keys(n))qp[h]=n[h];z2e(s.config);let p=u(l,s.config,n,i);return qp=Object.assign({},d),p}else{let c=Object.assign({},qp);for(let d of Object.keys(n))qp[d]=n[d];let f=new l(s.config);return qp=Object.assign({},c),f}}}function _2r(t,r){return t<r?-1:t>r?1:0}function m6(t,r){return-1*_2r(t,r)}function Xp(t){if(t==null)return t;let r=[];for(let n of t)r.indexOf(n)===-1&&r.push(n);return r}function Xmt(t){if(t==null)throw new Ie(`Invalid value in obj: ${JSON.stringify(t)}`);for(let r in t)if(t.hasOwnProperty(r))return!1;return!0}function Jy(t,r,n){if(n!=null&&t.indexOf(n)<0)throw new Ie(`${n} is not a valid ${r}.  Valid values are ${t} or null/undefined.`)}function nJ(t,r,n=0,o=1/0){return Ld(n>=0),Ld(o>=n),Array.isArray(t)&&t.length>=n&&t.length<=o&&t.every(i=>typeof i===r)}function Pi(t,r){Array.isArray(t)?(H.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((n,o)=>Pi(n,`element ${o+1} of ${r}`))):H.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got ${Kmt(t)}.`)}function Kmt(t){return t===null?"null":Array.isArray(t)?"["+t.map(r=>Kmt(r)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Zmt(t,r,n){let o=n!=null?n():H.now(),i;return(...a)=>{let l=n!=null?n():H.now();return l-o<r||(o=l,i=t(...a)),i}}function oJ(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}re();var S2r=0;function sJ(){return S2r++}var iJ={};function M2(t=""){return t in iJ||(iJ[t]=0),iJ[t]+=1,t+iJ[t].toString()}re();var Qmt=["channelsFirst","channelsLast"],Jmt=["nearest","bilinear"],egt=["valid","same","causal"],tgt=["max","avg"],rgt=["sum","mul","concat","ave"];var pR=new Map;function Ko(t){Jy(Qmt,"DataFormat",t)}function ogt(t){Jy(Jmt,"InterpolationFormat",t)}function Ru(t){Jy(egt,"PaddingMode",t)}function V2e(t){Jy(tgt,"PoolMode",t)}var g6=[],ngt="/";function Xm(t,r){g6.push(t);try{let n=r();return g6.pop(),n}catch(n){throw g6.pop(),n}}function C2r(){return g6.length===0?"":g6.join(ngt)+ngt}function aJ(t){if(!igt(t))throw new Error("Not a valid tensor name: '"+t+"'");return C2r()+t}function lJ(t){if(!igt(t))throw new Error("Not a valid tensor name: '"+t+"'");pR.has(t)||pR.set(t,0);let r=pR.get(t);if(pR.set(t,pR.get(t)+1),r>0){let n=`${t}_${r}`;return pR.set(n,1),n}else return t}var E2r=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function igt(t){return!!t.match(E2r)}re();re();re();function sgt(t){return t===parseInt(t.toString(),10)}function Kp(t,r,n){r==null&&(r=0),n==null&&(n=t.length);let o=1;for(let i=r;i<n;++i)o*=t[i];return o}function WA(t){if(t.length===0)return Number.NaN;let r=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o<r&&(r=o)}return r}function Km(t){if(t.length===0)return Number.NaN;let r=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){let o=t[n];o>r&&(r=o)}return r}function Mu(t,r){if(r<t)throw new Ie(`end (${r}) < begin (${t}) is forbidden.`);let n=[];for(let o=t;o<r;++o)n.push(o);return n}re();var G2e;function as(){return G2e==null&&(G2e=s3().epsilon()),G2e}function Pu(){return"channelsLast"}function Vl(t,r){return rt(t,r)}function Xv(t,r=-1){let n=t.shape.slice();return r<0&&(r=n.length+r+1),n.splice(r,0,1),Se(t,n)}function agt(t,r){return je(()=>{if(t.shape.length!==2)throw new Ie(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let n=Xv(t,1);return cJ(n,[1,r,1])})}function lgt(t){let r=[Kp(t.shape)];return Se(t,r)}function ugt(t){if(t.rank<=1)throw new Ie(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let r=[t.shape[0],Kp(t.shape,1)];return Se(t,r)}function Yv(t,r,n){return je(()=>{switch(t.rank){case 1:return LI(t,r,n);case 2:return I3(t,[r,0],[n,t.shape[1]]);case 3:return BI(t,[r,0,0],[n,t.shape[1],t.shape[2]]);case 4:return LC(t,[r,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return $r(t,[r,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return $r(t,[r,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Ie(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function W2e(t,r,n){return je(()=>{switch(t.rank){case 1:return LI(t,r,n);case 2:return I3(t,[0,r],[t.shape[0],n]);case 3:return BI(t,[0,0,r],[t.shape[0],t.shape[1],n]);case 4:return LC(t,[0,0,0,r],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function y6(t,r,n,o){return je(()=>{switch(t.rank){case 1:return LI(t,r,n);case 2:switch(o){case 1:return Yv(t,r,n);case 2:return W2e(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 3:switch(o){case 1:return Yv(t,r,n);case 2:return BI(t,[0,r,0],[t.shape[0],n,t.shape[2]]);case 3:return W2e(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}case 4:switch(o){case 1:return Yv(t,r,n);case 2:return LC(t,[0,r,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return LC(t,[0,0,r,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return W2e(t,r,n);default:throw new Ie(`The axis is not within the rank of the tensor ${o}`)}default:throw new Ie(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function hR(t,r=-1){let n;return r<0&&(n=t[0].rank,n!==0?r=n:r=0),r===t[0].rank&&(r=-1),Fn(t,r)}function H2e(t,r){switch(t.rank){case 1:return T8([t,r]);case 2:return A8([t,r],0);case 3:return k8([t,r],0);case 4:return I8([t,r],0);default:throw new Ie(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function cJ(t,r){if(Array.isArray(r)||(r=[r]),t.rank!==r.length)throw new Ie(`The length of input n (${r.length}) does not match the number of dimensions in input x (${t.rank})`);return xa(t,r)}function mR(t,r=0,n=1,o,i){return jC(t,r,n,o,i)}function Zp(t,r,n,o){if(t.rank<2||r.rank<2)throw new vr(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${r.shape}`);if(r.rank>=3){let i=t.shape.slice(-1)[0],s=r.shape.slice(-2)[0];if(i!==s)throw new vr(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${r.shape}`)}if(t.rank===2&&r.rank===2)return cw.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?q2e(t.rank,o,Pu()):null,activation:n});{let i=t.shape.slice(),s=i.pop();t=Se(t,[-1,s]);let a=r.shape.slice(),l=a.pop(),u=a.pop(),c=[...a,l],f=Array.from({length:r.rank},(m,g)=>g===0?r.rank-2:g<=r.rank-2?g-1:g);r=Se(Gr(r,f),[u,-1]);let d=[...i,...c];return Se(cw.matMul({a:t,b:r,transposeA:!1,transposeB:!1,bias:o?q2e(t.rank,o,Pu()):null,activation:n}),d)}}function fJ(t,r,n){return je(()=>(Array.isArray(r)?r=No(r,"int32"):r=rt(r,"int32"),b0(t,r,n)))}function qA(t){return we(t,t)}function q2e(t,r,n){let o=r.shape;if(r.rank!==1&&r.rank!==t)throw new Ie(`Unexpected bias dimensions: ${r.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1,1]):Se(r,[1,o[3],o[0],o[1],o[2]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===4){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1,1]):Se(r,[1,o[2],o[0],o[1]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,1,o[0]]):Se(r,[1].concat(o))}else if(t===3){if(n==="channelsFirst")return o.length===1?Se(r,[1,o[0],1]):Se(r,[1,o[1],o[0]]);if(n==="channelsLast")return o.length===1?Se(r,[1,1,o[0]]):Se(r,[1].concat(o))}else if(t<3)return r;throw new Ie(`Unsupported input rank by biasAdd: ${r.rank}`)}function ju(t,r,n){return je(()=>(n==null&&(n=Pu()),Ko(n),Ke(t,q2e(t.rank,r,n))))}function cgt(t,r=1){if(r!==1)throw new vr(`Support for alpha values other than 1 (${r}) is not implemented yet.`);return m0(t)}function fgt(t){return je(()=>Ct(t,Ke(Ao(t),1)))}function dJ(t,r,n,o){return je(()=>zie(t,r,n,o))}function dgt(t){return je(()=>{let r=Ke(.5,we(.2,t));return Hs(r,0,1)})}function P2(t,r,n=!1){return n?t():r()}var pgt=["fanIn","fanOut","fanAvg"],hgt=["normal","uniform","truncatedNormal"];function T2r(t){Jy(pgt,"FanMode",t)}function A2r(t){Jy(hgt,"Distribution",t)}var Lu=class extends tt.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},ygt=(()=>{class t extends Lu{apply(n,o){return xo(n,o)}}return t.className="Zeros",t})();tt.registerClass(ygt);var pJ=(()=>{class t extends Lu{apply(n,o){return Ui(n,o)}}return t.className="Ones",t})();tt.registerClass(pJ);var bgt=(()=>{class t extends Lu{constructor(n){if(super(),typeof n!="object")throw new Ie(`Expected argument of type ConstantConfig but got ${n}`);if(n.value===void 0)throw new Ie(`config must have value set but got ${n}`);this.value=n.value}apply(n,o){return je(()=>we(Rt(this.value),Ui(n,o)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();tt.registerClass(bgt);var xgt=(()=>{class t extends Lu{constructor(n){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=n.minval||this.DEFAULT_MINVAL,this.maxval=n.maxval||this.DEFAULT_MAXVAL,this.seed=n.seed}apply(n,o){return jc(n,this.minval,this.maxval,o,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();tt.registerClass(xgt);var vgt=(()=>{class t extends Lu{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new vr(`randomNormal does not support dType ${o}.`);return mR(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();tt.registerClass(vgt);var wgt=(()=>{class t extends Lu{constructor(n){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=n.mean||this.DEFAULT_MEAN,this.stddev=n.stddev||this.DEFAULT_STDDEV,this.seed=n.seed}apply(n,o){if(o=o||"float32",o!=="float32"&&o!=="int32")throw new vr(`truncatedNormal does not support dType ${o}.`);return GI(n,this.mean,this.stddev,o,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();tt.registerClass(wgt);var _gt=(()=>{class t extends Lu{constructor(n){super(),this.gain=n.gain!=null?n.gain:1}apply(n,o){return je(()=>{if(n.length!==2||n[0]!==n[1])throw new Ie("Identity matrix initializer can only be used for 2D square matrices.");return we(this.gain,DC(n[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();tt.registerClass(_gt);function k2r(t,r="channelsLast"){let n,o;if(Ko(r),t.length===2)n=t[0],o=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(r==="channelsFirst"){let i=Kp(t,2);n=t[1]*i,o=t[0]*i}else if(r==="channelsLast"){let i=Kp(t,0,t.length-2);n=t[t.length-2]*i,o=t[t.length-1]*i}}else{let i=Kp(t);n=Math.sqrt(i),o=Math.sqrt(i)}return[n,o]}var Of=(()=>{class t extends Lu{constructor(n){if(super(),n.scale<0)throw new Ie(`scale must be a positive float. Got: ${n.scale}`);this.scale=n.scale==null?1:n.scale,this.mode=n.mode==null?"fanIn":n.mode,T2r(this.mode),this.distribution=n.distribution==null?"normal":n.distribution,A2r(this.distribution),this.seed=n.seed}apply(n,o){let i=k2r(n),s=i[0],a=i[1],l=this.scale;if(this.mode==="fanIn"?l/=Math.max(1,s):this.mode==="fanOut"?l/=Math.max(1,a):l/=Math.max(1,(s+a)/2),this.distribution==="normal"){let u=Math.sqrt(l);if(o=o||"float32",o!=="float32"&&o!=="int32")throw new vr(`${this.getClassName()} does not support dType ${o}.`);return GI(n,0,u,o,this.seed)}else{let u=Math.sqrt(3*l);return jc(n,-u,u,o,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();tt.registerClass(Of);var Y2e=(()=>{class t extends Of{constructor(n){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Of.className}}return t.className="GlorotUniform",t})();tt.registerClass(Y2e);var X2e=(()=>{class t extends Of{constructor(n){super({scale:1,mode:"fanAvg",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Of.className}}return t.className="GlorotNormal",t})();tt.registerClass(X2e);var K2e=(()=>{class t extends Of{constructor(n){super({scale:2,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Of.className}}return t.className="HeNormal",t})();tt.registerClass(K2e);var Z2e=(()=>{class t extends Of{constructor(n){super({scale:2,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Of.className}}return t.className="HeUniform",t})();tt.registerClass(Z2e);var Q2e=(()=>{class t extends Of{constructor(n){super({scale:1,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})}getClassName(){return Of.className}}return t.className="LeCunNormal",t})();tt.registerClass(Q2e);var J2e=(()=>{class t extends Of{constructor(n){super({scale:1,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})}getClassName(){return Of.className}}return t.className="LeCunUniform",t})();tt.registerClass(J2e);var Sgt=(()=>{class t extends Lu{constructor(n){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=n.gain==null?this.DEFAULT_GAIN:n.gain,this.seed=n.seed}apply(n,o){return je(()=>{if(n.length<2)throw new vr("Shape must be at least 2D.");if(o!=="int32"&&o!=="float32"&&o!==void 0)throw new TypeError(`Unsupported data type ${o}.`);o=o;let i=H.sizeFromShape(n.slice(0,-1)),s=n[n.length-1],a=i*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);let l=[Math.max(s,i),Math.min(s,i)],u=mR(l,0,1,o,this.seed),c=Kie.qr(u,!1),f=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(s,i)*Math.min(s,i)],[Math.min(s,i)+1]);return f=we(f,p.sign()),i<s&&(f=f.transpose()),we(Rt(this.gain),f.reshape(n))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();tt.registerClass(Sgt);var mgt={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ggt(t,r={}){return Qy(t,tt.SerializationMap.getMap().classNameMap,r,"initializer")}function Co(t){return dR(t)}function ro(t){if(typeof t=="string"){let r=t in mgt?mgt[t]:t;if(r==="GlorotNormal")return new X2e;if(r==="GlorotUniform")return new Y2e;if(r==="HeNormal")return new K2e;if(r==="HeUniform")return new Z2e;if(r==="LeCunNormal")return new Q2e;if(r==="LeCunUniform")return new J2e;{let n={};return n.className=r,n.config={},ggt(n)}}else return t instanceof Lu?t:ggt(t)}function hJ(t){return Array.isArray(t)&&Array.isArray(t[0])}function gR(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function lr(t){let r;if(Array.isArray(t)){if(t.length!==1)throw new Ie(`Expected Tensor length to be 1; got ${t.length}`);r=t[0]}else r=t;return r}function Wr(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Ie(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function yR(t){let r=0;for(let n of t)n.shape.length===0?r+=1:r+=n.shape.reduce((o,i)=>o*i);return r}re();re();var Egt="Variable",b6=class{constructor(r,n="float32",o=Egt,i=!0,s=null){this.dtype=n??"float32",this.shape=r.shape,this.id=sJ(),o=o??Egt,this.originalName=aJ(o),this.name=lJ(this.originalName),this.trainable_=i,this.constraint=s,this.val=FU(r,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(r){return this.assertNotDisposed(),D2r(this.val,r),this.val.id!==r.id&&(this.val.assign(r),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(r){this.trainable_=r,this.val.trainable=r}};function D2r(t,r){if(t.shape.toString()!==r.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(r.shape))}function x6(t){return t.map(r=>r.read())}function bR(t){t.forEach(r=>{r[0].write(r[1])})}var ho=class{constructor(r){this.dtype=r.dtype,this.shape=r.shape,r.shape!=null?this.ndim=r.shape.length:this.ndim=r.ndim,this.maxNDim=r.maxNDim,this.minNDim=r.minNDim,this.axes=r.axes||{}}},Gl=class{constructor(r,n,o,i,s,a,l){this.dtype=r,this.shape=n,this.sourceLayer=o,this.inputs=i,this.callArgs=s,this.outputTensorIndex=l,this.id=sJ(),a!=null&&(this.originalName=aJ(a),this.name=lJ(this.originalName)),this.rank=n.length}},N2r=0,Kv=class{constructor(r,n){this.callArgs=n,this.id=N2r++,this.outboundLayer=r.outboundLayer,this.inboundLayers=r.inboundLayers,this.nodeIndices=r.nodeIndices,this.tensorIndices=r.tensorIndices,this.inputTensors=r.inputTensors,this.outputTensors=r.outputTensors,this.inputMasks=r.inputMasks,this.outputMasks=r.outputMasks,this.inputShapes=r.inputShapes,this.outputShapes=r.outputShapes;for(let o of r.inboundLayers)o?.outboundNodes.push(this);r.outboundLayer.inboundNodes.push(this)}getConfig(){let r=[];for(let n of this.inboundLayers)n!=null?r.push(n.name):r.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:r,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},O2r=0,yr=class extends tt.Serializable{constructor(r={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=O2r++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=r.name;if(!n){let o=this.getClassName();n=Yp(o)+"_"+M2(o)}if(this.name=n,this.trainable_=r.trainable==null?!0:r.trainable,r.inputShape!=null||r.batchInputShape!=null){let o;if(r.batchInputShape!=null)o=r.batchInputShape;else if(r.inputShape!=null){let s=null;r.batchSize!=null&&(s=r.batchSize),o=[s].concat(r.inputShape)}this.batchInputShape=o;let i=r.dtype;i==null&&(i=r.inputDType),i==null&&(i="float32"),this.dtype=i}r.weights!=null?this.initialWeights=r.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(r,n){return r.name+"_ib-"+n.toString()}getNodeAtIndex(r,n){if(this.inboundNodes.length===0)throw new Fu(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=r)throw new Ie(`Asked to get ${n} at node ${r}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[r]}getInputAt(r){return ua(this.getNodeAtIndex(r,"input").inputTensors)}getOutputAt(r){return ua(this.getNodeAtIndex(r,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new jd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new jd(`Layer ${this.name} is not connected, no input to return.`);return ua(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new jd(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new jd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ua(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(r=>r())}get updates(){return this._updates}get built(){return this._built}set built(r){this._built=r}get trainable(){return this.trainable_}set trainable(r){this._trainableWeights.forEach(n=>n.trainable=r),this.trainable_=r}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(r=>r.trainable):[]}set trainableWeights(r){this._trainableWeights=r}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(r=>!r.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(r){this._nonTrainableWeights=r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(r){let n=Rn(r);if(this.inputSpec==null||this.inputSpec.length===0)return;let o=Rn(this.inputSpec);if(n.length!==o.length)throw new Ie(`Layer ${this.name} expects ${o.length} inputs, but it received ${n.length} input tensors. Input received: ${r}`);for(let i=0;i<n.length;i++){let s=n[i],a=o[i];if(a==null)continue;let l=s.rank;if(a.ndim!=null&&l!==a.ndim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${l}`);if(a.maxNDim!=null&&l>a.maxNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${l}`);if(a.minNDim!=null&&l<a.minNDim)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${l}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new Ie(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){let u=s.shape;for(let c in a.axes){let f=Number(c),d=a.axes[c],p=f>=0?u[f]:u[u.length+f];if(d!=null&&[d,null].indexOf(p)===-1)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected axis ${f} of input shape to have value ${d} but got shape ${u}.`)}}if(a.shape!=null)for(let u=0;u<a.shape.length;++u){let c=a.shape[u],f=s.shape[u];if(c!=null&&f!=null&&c!==f)throw new Ie(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(r,n){return r}invokeCallHook(r,n){this._callHook!=null&&this._callHook(r,n)}setCallHook(r){this._callHook=r}clearCallHook(){this._callHook=null}apply(r,n){n=n||{},this.assertNotDisposed();let o=Rn(r),i=M2r(r),s=P2r(r);if(i===s)throw new Ie("Arguments to apply() must be all SymbolicTensors or all Tensors");return Xm(this.name,()=>{if(!this.built){this.assertInputCompatibility(r);let a=[];for(let l of Rn(r))a.push(l.shape);this.build(ua(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(r),s){let a=this.call(r,n);this.supportsMasking&&this.setMaskMetadata(r,a);let l=Rn(a),u=[];for(let c of l)o.indexOf(c)!==-1&&(c=c.clone()),u.push(c);if(a=ua(u),this.activityRegularizer!=null)throw new vr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{let a=F2r(r),l=this.computeOutputShape(a),u,c=R2r(r);if(this.warnOnIncompatibleInputShape(Array.isArray(r)?a[0]:a),l!=null&&l.length>0&&Array.isArray(l[0])?u=l.map((f,d)=>new Gl(c,f,this,Rn(r),n,this.name,d)):u=new Gl(c,l,this,Rn(r),n,this.name),this.addInboundNode(r,u,null,null,a,l,n),this._refCount++,this.activityRegularizer!=null)throw new vr("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(r){if(this.batchInputShape!=null)if(r.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(r)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((o,i)=>{o!=null&&r[i]!=null&&r[i]!==o&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(r)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new jd(`The layer ${this.name} has never been called and thus has no defined output shape.`);let r=[];for(let n of this.inboundNodes){let o=JSON.stringify(n.outputShapes);r.indexOf(o)===-1&&r.push(o)}if(r.length===1){let n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new jd(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Fu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return yR(this.weights)}build(r){this.built=!0}getWeights(r=!1){return x6(r?this.trainableWeights:this.weights)}setWeights(r){je(()=>{let n=this.weights;if(n.length!==r.length)throw new Ie(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${r.length}, but the layer was expecting ${n.length} weights. Provided weights: ${r}...`);if(n.length===0)return;let o=[],i=x6(n);for(let s=0;s<i.length;++s){let a=i[s],l=n[s],u=r[s];if(!H.arraysEqual(a.shape,u.shape))throw new Ie(`Layer weight shape ${a.shape} not compatible with provided weight shape ${u.shape}`);o.push([l,u])}bR(o)})}addWeight(r,n,o,i,s,a,l,u){if(this._addedWeightNames.indexOf(r)!==-1)throw new Ie(`Duplicate weight name ${r} for layer ${this.name}`);this._addedWeightNames.push(r),o==null&&(o="float32"),this.fastWeightInitDuringBuild&&(i=u!=null?u():ro("zeros"));let c=i.apply(n,o),f=new b6(c,o,r,a,l);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(f.read())),a==null&&(a=!0),a?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(r){this.fastWeightInitDuringBuild=r}addLoss(r){r==null||Array.isArray(r)&&r.length===0||(r=Rn(r),this._losses!==void 0&&this._losses!==null&&this.losses.push(...r))}computeOutputShape(r){return r}computeMask(r,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(o=>{if(o!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(r,n,o){if(!this.supportsMasking)return;let i=this.computeMask(r,o),s=Rn(n),a=Rn(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let l=0;l<s.length;l++)s[l].kerasMask=a[l]}addInboundNode(r,n,o,i,s,a,l=null){let u=Rn(r);n=Rn(n),o=Rn(o),i=Rn(i),s=gR(s),a=gR(a);let c=[],f=[],d=[];for(let p of u)c.push(p.sourceLayer),f.push(p.nodeIndex),d.push(p.tensorIndex);new Kv({outboundLayer:this,inboundLayers:c,nodeIndices:f,tensorIndices:d,inputTensors:u,outputTensors:n,inputMasks:o,outputMasks:i,inputShapes:s,outputShapes:a},l);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){let r={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(r.batchInputShape=this.batchInputShape),this.dtype!=null&&(r.dtype=this.dtype),r}disposeWeights(){return this.weights.forEach(r=>r.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let r=0;return--this._refCount===0&&(r=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:r}}};function F2r(t){t=Rn(t);let r=[];for(let n of t)r.push(n.shape);return ua(r)}function R2r(t){return"float32"}function eSe(t,r,n){if((r==null||n!=null&&n>0)&&(r=t.sourceLayer,n=t.nodeIndex),r.inboundNodes.length===0)return[t];{let o=r.inboundNodes[n];if(o.inboundLayers.length===0)return o.inputTensors;{let i=[];for(let s=0;s<o.inboundLayers.length;s++){let a=o.inputTensors[s],l=o.inboundLayers[s],u=o.nodeIndices[s],c=eSe(a,l,u);for(let f of c)i.indexOf(f)===-1&&i.push(f)}return i}}}function M2r(t){let r=!0;for(let n of Rn(t))if(!(n instanceof Gl)){r=!1;break}return r}function P2r(t){let r=!0;for(let n of Rn(t))if(n instanceof Gl){r=!1;break}return r}var j2=(()=>{class t extends yr{constructor(n){if(super({dtype:n.dtype,name:n.name!=null?n.name:M2("input").toString()}),n.batchSize==null&&(n.batchSize=null),n.sparse==null&&(n.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=n.sparse,n.inputShape!=null&&n.batchInputShape!=null)throw new Ie("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let o=n.batchInputShape;if(o==null){if(n.inputShape==null)throw new Ie("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");o=[n.batchSize].concat(n.inputShape)}else if(n.batchSize!=null)throw new Ie("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let i=n.dtype||"float32";this.batchInputShape=o,this.dtype=i,this.inputSpec=[{shape:o}];let s=new Gl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Kv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[o],outputShapes:[o]})}apply(n,o){throw new Ie(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();tt.registerClass(j2);function mJ(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Ie("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let r=t.batchShape;t.shape!=null&&r==null&&(r=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new j2({batchInputShape:r,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function j2r(t,r){if(t.dtype==null||t.dtype===r.dtype)return r;try{return rt(r,t.dtype)}catch{throw new Ie(`The dtype of the feed (${r.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var eb=class t{constructor(r){if(this.id2Value={},this.id2Mask={},this.name2Id={},r instanceof t)for(let n in r.id2Value)this.id2Value[n]=r.id2Value[n],n in r.id2Mask&&(this.id2Mask[n]=r.id2Mask[n]);else{if(r==null)return;for(let n of r)this.add(n.key,n.value)}}add(r,n,o){if(this.id2Value[r.id]==null)this.id2Value[r.id]=j2r(r,n),this.name2Id[r.name]=r.id,o!=null&&(this.id2Mask[r.id]=o);else throw new Ie(`Duplicate key: name=${r.name}, id=${r.id}`);return this}addFeed(r){this.add(r.key,r.value)}hasKey(r){return this.id2Value[r.id]!=null}names(){return Object.keys(this.name2Id)}getValue(r){if(r instanceof Gl){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Value[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Value[n]}}getMask(r){if(r instanceof Gl){if(this.id2Value[r.id]==null)throw new Ie(`Nonexistent key: ${r.name}`);return this.id2Mask[r.id]}else{let n=this.name2Id[r];if(n==null)throw new Ie(`Feed dict has no SymbolicTensor name: ${r}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Tr(this.id2Mask)}},gJ=new h6,yJ=new h6;function Agt(t){gJ?.setMaxEntries(t),yJ?.setMaxEntries(t)}function HA(t,r,n,o){let i=n==null?!1:n.training,s=Array.isArray(t),a=s?t:[t],l=a.map(m=>m.name),u=[],c=r.names();for(let m of l)c.indexOf(m)!==-1?u.push(r.getValue(m)):u.push(null);o!=null&&(o.maxNumTensors=-1/0,o.minNumTensors=1/0);let f=l.join(",")+"|"+r.names().sort().join(","),d=gJ.get(f),p;if(d==null){let m=L2r(a,r);d=m.sorted,p=m.recipientCounts,gJ.put(f,d),yJ.put(f,p)}p={},i||Object.assign(p,yJ.get(f));let h=new eb(r);for(let m=0;m<d.length;++m){if(o!=null){let A=iI().numTensors;A>o.maxNumTensors&&(o.maxNumTensors=A),A<o.minNumTensors&&(o.minNumTensors=A)}let g=d[m],y=g.sourceLayer;if(y instanceof j2)continue;let b=[],x=[],v=[],w=!1;for(let A of g.inputs){let N=h.getValue(A),k=h.getMask(A);b.push(N),x.push(k),k!=null&&(w=!0),i||(p[A.name]--,p[A.name]===0&&!r.hasKey(A)&&l.indexOf(A.name)===-1&&!N.isDisposed&&A.sourceLayer.stateful!==!0&&v.push(N))}w&&(n=n||{},n.mask=x[0]);let _=Rn(y.apply(b,n)),C=null;y.supportsMasking&&(C=y.computeMask(b,x));let S=$2r(g),E=Array.isArray(S)?S:[S];for(let A=0;A<E.length;++A){h.hasKey(E[A])||h.add(E[A],_[A],Array.isArray(C)?C[0]:C);let N=l.indexOf(E[A].name);N!==-1&&(u[N]=_[A])}i||Tr(v)}return h.disposeMasks(),s?u:u[0]}function L2r(t,r){H.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],o={};if(t.length===1){let i=Tgt(t[0],r);n=i.sorted,o=i.recipientMap}else{let i=new Set;for(let s of t){let{sorted:a,recipientMap:l}=Tgt(s,r);for(let u of a)i.has(u.name)||(n.push(u),i.add(u.name));for(let u in l)o[u]==null&&(o[u]=new Set),l[u].forEach(c=>o[u].add(c))}}return{sorted:n,recipientCounts:B2r(o)}}function B2r(t){let r={};for(let n in t)r[n]=t[n].size;return r}function Tgt(t,r){let n=new Set,o=[],i={};for(let l of r.names())n.add(l);let s=[],a=[];for(s.push(t);s.length>0;){let l=s[s.length-1];if(n.has(l.name)){s.pop();continue}let u=a[a.length-1]===s.length-1;if(l.inputs.length===0||u)s.pop(),o.push(l),n.add(l.name),u&&a.pop();else{a.push(s.length-1);for(let c of l.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(l.name),!n.has(c.name)&&s.push(c)}}return{sorted:o,recipientMap:i}}function $2r(t){let r;if(t.sourceLayer.inboundNodes.length===1)r=t.sourceLayer.output;else{let n=null;for(let o=0;o<t.sourceLayer.inboundNodes.length;++o)for(let i of t.sourceLayer.inboundNodes[o].outputTensors)if(i.id===t.id){n=o;break}r=t.sourceLayer.getOutputAt(n)}return r}var z2r=Oe();z2r.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Agt);re();re();re();function tSe(t,r){return je(()=>Kn(It(we(t,t),r,!0)))}var YA=class extends tt.Serializable{getConfig(){return{}}},Dgt=(()=>{class t extends YA{constructor(n){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return je(()=>{let o=tSe(n,this.axis),i=Hs(o,0,this.maxValue);return we(n,Ct(i,Ke(as(),o)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();tt.registerClass(Dgt);var Ngt=(()=>{class t extends YA{constructor(n){super(),this.defaultAxis=0,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return je(()=>Ct(n,Ke(as(),tSe(n,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();tt.registerClass(Ngt);var Ogt=(()=>{class t extends YA{apply(n){return va(n)}}return t.className="NonNeg",t})();tt.registerClass(Ogt);var Fgt=(()=>{class t extends YA{constructor(n){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=n.minValue!=null?n.minValue:this.defaultMinValue,this.maxValue=n.maxValue!=null?n.maxValue:this.defaultMaxValue,this.rate=n.rate!=null?n.rate:this.defaultRate,this.axis=n.axis!=null?n.axis:this.defaultAxis}apply(n){return je(()=>{let o=tSe(n,this.axis),i=Ke(we(this.rate,Hs(o,this.minValue,this.maxValue)),we(1-this.rate,o));return we(n,Ct(i,Ke(as(),o)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();tt.registerClass(Fgt);var kgt={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ci(t){return dR(t)}function Igt(t,r={}){return Qy(t,tt.SerializationMap.getMap().classNameMap,r,"constraint")}function fi(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in kgt?kgt[t]:t,config:{}};return Igt(n)}else return t instanceof YA?t:Igt(t)}var D6={};fn(D6,{Layer:()=>yr,RNN:()=>tb,RNNCell:()=>Jv,activation:()=>SCr,add:()=>OCr,alphaDropout:()=>mEr,average:()=>FCr,averagePooling1d:()=>xCe,averagePooling2d:()=>vCe,averagePooling3d:()=>wCe,avgPool1d:()=>UCr,avgPool2d:()=>GCr,avgPool3d:()=>qCr,avgPooling1d:()=>VCr,avgPooling2d:()=>WCr,avgPooling3d:()=>HCr,batchNormalization:()=>BCr,bidirectional:()=>aEr,categoryEncoding:()=>vEr,centerCrop:()=>bEr,concatenate:()=>RCr,conv1d:()=>hCr,conv2d:()=>mCr,conv2dTranspose:()=>gCr,conv3d:()=>yCr,conv3dTranspose:()=>bCr,convLstm2d:()=>nEr,convLstm2dCell:()=>oEr,cropping2D:()=>vCr,dense:()=>CCr,depthwiseConv2d:()=>_Cr,dot:()=>LCr,dropout:()=>ECr,elu:()=>lCr,embedding:()=>NCr,flatten:()=>ACr,gaussianDropout:()=>hEr,gaussianNoise:()=>pEr,globalAveragePooling1d:()=>YCr,globalAveragePooling2d:()=>XCr,globalMaxPool1d:()=>uEr,globalMaxPool2d:()=>cEr,globalMaxPooling1d:()=>a0t,globalMaxPooling2d:()=>l0t,gru:()=>ZCr,gruCell:()=>QCr,input:()=>fSe,inputLayer:()=>aCr,layerNormalization:()=>$Cr,leakyReLU:()=>cCr,lstm:()=>JCr,lstmCell:()=>eEr,masking:()=>gEr,maxPool1d:()=>fEr,maxPool2d:()=>dEr,maxPooling1d:()=>u0t,maxPooling2d:()=>c0t,maxPooling3d:()=>KCr,maximum:()=>MCr,minimum:()=>PCr,multiply:()=>jCr,permute:()=>DCr,prelu:()=>fCr,randomWidth:()=>wEr,reLU:()=>uCr,repeatVector:()=>kCr,rescaling:()=>yEr,reshape:()=>ICr,resizing:()=>xEr,rnn:()=>iEr,separableConv2d:()=>xCr,simpleRNN:()=>tEr,simpleRNNCell:()=>rEr,softmax:()=>dCr,spatialDropout1d:()=>TCr,stackedRNNCells:()=>sEr,thresholdedReLU:()=>pCr,timeDistributed:()=>lEr,upSampling2d:()=>wCr,zeroPadding2d:()=>zCr});re();re();function Zv(t){return Be(this,null,function*(){if(t==null)return;let r=[],n=[],o=[];for(let i in t){let s=t[i];if(typeof s!="number"){let a=s;r.push(a.data()),n.push(i),o.push(a)}}if(r.length>0){let i=yield Promise.all(r);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Tr(o)}})}function bJ(t){if(t!=null)for(let r in t){let n=t[r];typeof n!="number"&&n.dispose()}}var G2r=125,L2=class{constructor(){this.validationData=null}setParams(r){this.params=r}onEpochBegin(r,n){return Be(this,null,function*(){})}onEpochEnd(r,n){return Be(this,null,function*(){})}onBatchBegin(r,n){return Be(this,null,function*(){})}onBatchEnd(r,n){return Be(this,null,function*(){})}onTrainBegin(r){return Be(this,null,function*(){})}onTrainEnd(r){return Be(this,null,function*(){})}setModel(r){}},xJ=class{constructor(r,n=10){r==null&&(r=[]),this.callbacks=r,this.queueLength=n}append(r){this.callbacks.push(r)}setParams(r){for(let n of this.callbacks)n.setParams(r)}setModel(r){for(let n of this.callbacks)n.setModel(r)}onEpochBegin(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochBegin(r,n)})}onEpochEnd(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onEpochEnd(r,n)})}onBatchBegin(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchBegin(r,n)})}onBatchEnd(r,n){return Be(this,null,function*(){n==null&&(n={});for(let o of this.callbacks)yield o.onBatchEnd(r,n)})}onTrainBegin(r){return Be(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainBegin(r)})}onTrainEnd(r){return Be(this,null,function*(){r==null&&(r={});for(let n of this.callbacks)yield n.onTrainEnd(r)})}},rSe=class extends L2{constructor(){super()}onEpochBegin(r){return Be(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(r,n){return Be(this,null,function*(){n==null&&(n={});let o=n.size==null?0:n.size;this.seen+=o;for(let i in n){let s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*o;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;let l=je(()=>Ke(this.totals[i],we(s,o)));this.totals[i]=l,a?.dispose()}}})}onEpochEnd(r,n){return Be(this,null,function*(){if(n!=null)for(let o of this.params.metrics)this.totals[o]!=null&&(typeof this.totals[o]=="number"?n[o]=this.totals[o]/this.seen:je(()=>{let i=we(Ct(1,this.seen),this.totals[o]);n[o]=i,this.totals[o].dispose(),ks(n[o])}))})}},vJ=class extends L2{onTrainBegin(r){return Be(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(r,n){return Be(this,null,function*(){n==null&&(n={}),this.epoch.push(r);for(let o in n)this.history[o]==null&&(this.history[o]=[]),this.history[o].push(n[o])})}syncData(){return Be(this,null,function*(){let r=[],n=[],o=[];for(let s in this.history){let a=this.history[s];for(let l=0;l<a.length;++l)if(typeof a[l]!="number"){let u=a[l];r.push(u.data()),n.push(s),o.push(l)}}let i=yield Promise.all(r);for(let s=0;s<i.length;++s)this.history[n[s]][o[s]].dispose(),this.history[n[s]][o[s]]=i[s][0]})}},wJ=class extends L2{constructor(r,n){if(super(),this.currentEpoch=0,this.nowFunc=r.nowFunc,this.nextFrameFunc=r.nextFrameFunc||KI,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=G2r),this.yieldEvery==="never"&&r.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");H.isNumber(this.yieldEvery)&&(this.maybeWait=Zmt(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=r.onTrainBegin,this.trainEnd=r.onTrainEnd,this.epochBegin=r.onEpochBegin,this.epochEnd=r.onEpochEnd,this.batchBegin=r.onBatchBegin,this.batchEnd=r.onBatchEnd,this.yield=r.onYield}maybeWait(r,n,o){return Be(this,null,function*(){let i=[];this.yield!=null&&(yield Zv(o),i.push(this.yield(r,n,o))),i.push(this.nextFrameFunc()),yield Promise.all(i)})}onEpochBegin(r,n){return Be(this,null,function*(){this.currentEpoch=r,this.epochBegin!=null&&(yield Zv(n),yield this.epochBegin(r,n))})}onEpochEnd(r,n){return Be(this,null,function*(){let o=[];this.epochEnd!=null&&(yield Zv(n),o.push(this.epochEnd(r,n))),this.yieldEvery==="epoch"&&o.push(this.nextFrameFunc()),yield Promise.all(o)})}onBatchBegin(r,n){return Be(this,null,function*(){this.batchBegin!=null&&(yield Zv(n),yield this.batchBegin(r,n))})}onBatchEnd(r,n){return Be(this,null,function*(){let o=[];this.batchEnd!=null&&(yield Zv(n),o.push(this.batchEnd(r,n))),this.yieldEvery==="batch"?o.push(this.nextFrameFunc()):H.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,r,n)),yield Promise.all(o)})}onTrainBegin(r){return Be(this,null,function*(){this.trainBegin!=null&&(yield Zv(r),yield this.trainBegin(r))})}onTrainEnd(r){return Be(this,null,function*(){this.trainEnd!=null&&(yield Zv(r),yield this.trainEnd(r))})}};function _J(t,r){return t==null&&(t={}),t instanceof L2?[t]:Array.isArray(t)&&t[0]instanceof L2?t:Rn(t).map(o=>new wJ(o,r))}var Rgt=(()=>{class t{constructor(){}static registerCallbackConstructor(n,o){H.assert(n>=0&&Number.isInteger(n),()=>`Verbosity level is expected to be an integer >= 0, but got ${n}`),t.checkForDuplicate(o),t.constructors[n]==null&&(t.constructors[n]=[]),t.constructors[n].push(o)}static checkForDuplicate(n){for(let o in t.constructors)t.constructors[+o].forEach(s=>{if(s===n)throw new Ie("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(n){let o=[];for(let i in t.constructors){let s=+i;n>=s&&o.push(...t.constructors[s])}return o.map(i=>new i)}}return t.constructors={},t})();function SJ(t,r,n,o,i,s,a,l,u){let c=new vJ,f=[new rSe,...Rgt.createCallbacks(r)];t!=null&&f.push(...t),f.push(c);let d=new xJ(f);return d.setParams({epochs:n,initialEpoch:o,samples:i,steps:s,batchSize:a,verbose:r,doValidation:l,metrics:u}),{callbackList:d,history:c}}re();re();re();function Ff(t,r={},n=!1){return Qy(t,tt.SerializationMap.getMap().classNameMap,r,"layer",n)}re();re();function v6(t,r){return je(()=>{t.dtype!=="float32"&&(t=rt(t,"float32"));let n=It(qA(t),r,!0),o=ep(n.shape,as()),i=Kn(Yu(n,o));return Ct(t,i)})}function XA(t,r){return je(()=>bo(qA(wt(r,t)),-1))}function _6(t,r){return je(()=>bo(Ao(wt(r,t)),-1))}function S6(t,r){return je(()=>{let n=wt(t,r),o=Hs(Ao(t),as(),Number.MAX_VALUE),i=Ao(Ct(n,o));return we(100,bo(i,-1))})}function W2r(t,r){return je(()=>{let n=Hs(r,as(),Number.MAX_VALUE),o=Xs(Ke(1,n)),i=Hs(t,as(),Number.MAX_VALUE),s=Xs(Ke(1,i));return bo(qA(wt(o,s)),-1)})}function q2r(t,r){return je(()=>{let n=Yu(0,wt(1,we(t,r)));return bo(qA(n),-1)})}function H2r(t,r){return je(()=>{let n=Yu(0,wt(1,we(t,r)));return bo(n,-1)})}function Y2r(t,r){return je(()=>{let n=It(we(t,r),-1),o=Ys(we(wt(1,t),r),-1);return Yu(0,Ke(1,wt(o,n)))})}function X2r(t,r){return je(()=>{let n=Math.log(2),o=wt(r,t),i=wt(Ke(o,Eh(we(-2,o))),n);return bo(i,-1)})}function KA(t,r,n=!1){return je(()=>{if(n)r=iw(r);else{let o=It(r,r.shape.length-1,!0);r=Ct(r,o)}return r=Hs(r,as(),1-as()),Zr(It(we(rt(t,"float32"),Xs(r)),r.shape.length-1))})}function xR(t,r,n=!1){return je(()=>{let o=rt(y0(lgt(t)),"int32");r=Hs(r,as(),1-as());let i=r.shape,s=Se(v0(o,i[i.length-1]),i);return KA(s,r,n)})}function K2r(t,r){if(!H.arraysEqual(t.shape,r.shape))throw new Ie(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(r.shape)}`);return je(()=>{let n=va(r),o=Zr(Ao(r));return Ke(wt(n,we(r,t)),Q1(bi(o)))})}function vR(t,r){return je(()=>{let n;return n=Hs(r,as(),1-as()),n=Xs(Ct(n,wt(1,n))),bo(K2r(t,n),-1)})}function Z2r(t,r){return je(()=>{let n=Hs(t,as(),1),o=Hs(r,as(),1);return It(we(t,Xs(Ct(n,o))),-1)})}function Q2r(t,r){return je(()=>{let n=Xs(Ke(as(),r));return bo(wt(r,we(t,n)),-1)})}function CJ(t,r){return je(()=>{let n=v6(t,-1),o=v6(r,-1),i=we(n,o);return Zr(It(i,-1))})}var w6={meanSquaredError:XA,meanAbsoluteError:_6,meanAbsolutePercentageError:S6,meanSquaredLogarithmicError:W2r,squaredHinge:q2r,hinge:H2r,categoricalHinge:Y2r,logcosh:X2r,categoricalCrossentropy:KA,sparseCategoricalCrossentropy:xR,binaryCrossentropy:vR,kullbackLeiblerDivergence:Z2r,poisson:Q2r,cosineProximity:CJ};function EJ(t){if(typeof t=="string"){if(t in w6)return w6[t];let r=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ie(r)}else return t}re();re();function AJ(t,r){return je(()=>{let n=we(.5,Ds(r)),o=Vl(oi(r,n),t.dtype);return bo(Sl(t,o),-1)})}function kJ(t,r){return je(()=>Vl(Sl(Jd(t,-1),Jd(r,-1)),"float32"))}function J2r(t,r){return je(()=>rt(It(za(Sl(t,1),Sl(r,1))),"float32"))}function eSr(t,r){return je(()=>rt(It(za(Sl(t,0),Sl(r,1))),"float32"))}function Pgt(t,r){return je(()=>{let n=J2r(t,r),o=eSr(t,r),i=Ke(n,o);return rt(yo(oi(i,0),Ct(n,i),0),"float32")})}function nSe(t,r){return vR(t,r)}function oSe(t,r){return t.rank===r.rank&&(t=Lc(t,[t.rank-1])),r=Jd(r,-1),r.dtype!==t.dtype&&(r=rt(r,t.dtype)),rt(Sl(t,r),"float32")}var tSr=XA,rSr=XA,nSr=_6,oSr=_6,iSr=S6,sSr=S6,IJ=KA,aSr=CJ,iSe=xR,TJ={binaryAccuracy:AJ,categoricalAccuracy:kJ,precision:Pgt,categoricalCrossentropy:IJ,sparseCategoricalCrossentropy:iSe,mse:tSr,MSE:rSr,mae:nSr,MAE:oSr,mape:iSr,MAPE:sSr,cosine:aSr};function jgt(t){if(typeof t=="string"&&t in TJ)return TJ[t];if(typeof t!="string"&&t!=null)return t;throw new Ie(`Unknown metric ${t}`)}function C6(t){if(Ld(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let r;for(let n of Object.keys(w6))if(w6[n]===t){r=n;break}if(r!==void 0)return r;for(let n of Object.keys(TJ))if(TJ[n]===t){r=n;break}return r!==void 0?r:t.name}}re();function Bgt(t){let r={Adagrad:()=>op.adagrad(.01),Adadelta:()=>op.adadelta(1,.95,as()),Adam:()=>op.adam(.001,.9,.999,as()),Adamax:()=>op.adamax(.002,.9,.999,as(),0),RMSProp:()=>op.rmsprop(.001,.9,0,as()),SGD:()=>op.sgd(.01)};if(r.adagrad=r.Adagrad,r.adadelta=r.Adadelta,r.adam=r.Adam,r.adamax=r.Adamax,r.rmsprop=r.RMSProp,r.sgd=r.SGD,t in r)return r[t]();throw new Ie(`Unknown Optimizer ${t}`)}function aSe(t,r,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!sSe(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let o=JSON.stringify(t);o.length>1048576&&console.warn(`User-defined metadata of model "${r}" is too large in size (length=${o.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function sSe(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let r=Object.keys(t);for(let n of r)if(typeof n!="string"||!sSe(t[n]))return!1;return!0}else if(Array.isArray(t)){for(let r of t)if(!sSe(r))return!1;return!0}else return!1;else{let r=typeof t;return r==="string"||r==="number"||r==="boolean"}}function $gt(t,r,n,o=console.log){let i=cSr(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(r=r||90,n=n||[.32,.61,.89,1]):(r=r||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(f=>Math.floor(r*f)));let a;if(!i){s.push("Receives inputs"),a=[];for(let f in t.nodesByDepth)a.push(...t.nodesByDepth[f])}o("_".repeat(r)),DJ(s,n,o),o("=".repeat(r));let l=t.layers;for(let f=0;f<l.length;++f)i?fSr(l[f],n,o):dSr(l[f],n,a,o),o((f===l.length-1?"=":"_").repeat(r));t.checkTrainableWeightsConsistency();let u=uSr(t),c=yR(t.nonTrainableWeights);o(`Total params: ${u+c}`),o(`Trainable params: ${u}`),o(`Non-trainable params: ${c}`),o("_".repeat(r))}function uSr(t){let r;return t.collectedTrainableWeights!=null?r=yR(t.collectedTrainableWeights):r=yR(t.trainableWeights),r}function cSr(t){let r=!0,n=[],o=[];for(let i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(let i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){r=!1;break}o.push(...i)}if(r)for(let i of t.layers){let s=!1;for(let a of i.inboundNodes)if(o.indexOf(a)!==-1)if(s){r=!1;break}else s=!0;if(!r)break}return r}function DJ(t,r,n=console.log){let o="";for(let i=0;i<t.length;++i)i>0&&(o=o.slice(0,o.length-1)+" "),o+=t[i],o=o.slice(0,r[i]),o+=" ".repeat(r[i]-o.length);n(o)}function fSr(t,r,n){let o,i;try{i=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=t.name,a=t.getClassName(),l=[`${s} (${a})`,i,o,t.countParams().toString()];DJ(l,r,n)}function dSr(t,r,n,o){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}let a=[];for(let d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,m=d.nodeIndices[p],g=d.tensorIndices[p];a.push(`${h}[${m}][${g}]`)}let l=t.name,u=t.getClassName(),c=a.length===0?"":a[0],f=[`${l} (${u})`,s,i,t.countParams().toString(),c];DJ(f,r,o);for(let d=1;d<a.length;++d)DJ(["","","","",a[d]],r,o)}function zgt(t,r,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&r===0&&typeof n=="string"}function E6(t,r){if(t===null)return null;if(typeof t=="string")return Hv(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];zgt(r,i,s)?n.push(s):n.push(E6(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o];if(o==="name"&&typeof i=="string")n[o]=i;else{let s=Hv(o);n[s]=E6(i,s)}}return n}}function NJ(t,r){if(t==null)return null;if(typeof t=="string")return Yp(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let n=[],o=t.length;for(let i=0;i<o;++i){let s=t[i];zgt(r,i,s)?n.push(s):n.push(NJ(s,r))}return n}else{let n={};for(let o of Object.keys(t)){let i=t[o],s=Yp(o);(o==="name"||o==="className")&&typeof i=="string"?n[s]=i:n[s]=NJ(i,o)}return n}}var wR="4.19.0";re();var pSr=t=>{let r=Object.keys(t);if(r.length===0)return!1;let n=r[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},OJ=class t extends yr{constructor(r){if(super({}),this.containerNodes=new Set,this.name=r.name,this.name==null){let x=this.getClassName().toLowerCase();this.name=M2(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(r.inputs)?this.inputs=r.inputs.slice():this.inputs=[r.inputs],Array.isArray(r.outputs)?this.outputs=r.outputs.slice():this.outputs=[r.outputs],Xp(this.inputs).length!==this.inputs.length)throw new Ie(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);Xp(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let x of this.outputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(_)}for(let x of this.inputs){let v=x.sourceLayer,w=x.nodeIndex,_=x.tensorIndex;Ld(w===0,"input layer has >1 nodes"),Ld(_===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){let v=this.inputLayers[x];if(!(v instanceof j2))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${r.inputs}. Input ${x} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(let x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);let n={},o={},i={},s={},a={},l=[],u=(x,v,w,_,C,S)=>{(_==null||C==null||S==null)&&(_=x.sourceLayer,C=x.nodeIndex,S=x.tensorIndex);let E=_.inboundNodes[C];if(w.indexOf(E)!==-1)throw new Fu(`The tensor ${x.name} at layer "${_.name}" is part of a cycle.`);if(v.indexOf(E)!==-1)return;this.containerNodes.add(t.nodeKey(_,C)),_.id in a||(a[_.id]=Object.keys(a).length),w.indexOf(E)===-1&&w.push(E);let A=E.inboundLayers.length;for(let N=0;N<A;N++){let k=E.inputTensors[N],R=E.inboundLayers[N],I=E.nodeIndices[N],L=E.tensorIndices[N];u(k,v,w,R,I,L)}for(v.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);l.push(E)},c=[],f=[];for(let x of this.outputs)u(x,c,f);let d=l.slice().reverse();for(let x of d){o[x.id]=x,x.id in n||(n[x.id]=0);let v=n[x.id],w=i[x.outboundLayer.id]==null?0:i[x.outboundLayer.id];v=Math.max(v,w),i[x.outboundLayer.id]=v,s[x.outboundLayer.id]=x.outboundLayer,n[x.id]=v;for(let _=0;_<x.inboundLayers.length;_++){let C=x.inboundLayers[_],S=x.nodeIndices[_],E=C.inboundNodes[S],A=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(v+1,A),o[E.id]=E}}let p={};for(let x in n){let v=n[x];v in p||(p[v]=[]),p[v].push(o[x])}let h={};for(let x in i){let v=i[x];v in h||(h[v]=[]),h[v].push(s[x])}let m=Object.keys(h).map(x=>parseInt(x,10)).sort(m6);this.layers=[];for(let x of m){let v=h[x];v.sort((w,_)=>{let C=a[w.id],S=a[_.id];return C<S?-1:C>S?1:0});for(let w of v)w instanceof t&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=h,m=Object.keys(p).map(x=>parseInt(x,10)).sort(m6);let g=this.inputs.slice(),y=[];for(let x of m)for(let v of p[x]){let w=v.outboundLayer;if(w!=null){for(let _ of v.inputTensors)if(g.indexOf(_)===-1)throw new Fu(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${w.name}". The following previous layers were accessed without issue: ${y}`);for(let _ of v.outputTensors)g.push(_);y.push(w.name)}}this.nodesByDepth=p;let b=this.layers.map(x=>x.name);for(let x of b){let v=b.filter(w=>w===x).length;if(v!==1)throw new Fu(`The name "${x}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new Kv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let r={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let n of this.layers)r.numDisposedVariables+=n.dispose().numDisposedVariables;for(let n of this.internalContainerRefs)r.numDisposedVariables+=n.dispose().numDisposedVariables}return r.refCountAfterDispose=this._refCount,r}get trainable(){return this.trainable_}set trainable(r){this.layers.forEach(n=>{n._trainableWeights.forEach(o=>o.trainable=r)}),this.trainable_=r}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ie("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let r=[];for(let n of this.layers)r=r.concat(n.trainableWeights);return r}get nonTrainableWeights(){let r=[];for(let n of this.layers)r.push(...n.nonTrainableWeights);if(!this.trainable){let n=[];for(let o of this.layers)n.push(...o.trainableWeights);return n.concat(r)}return r}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(r,n=!0){let o={},i=0,s=pSr(r);s&&this.parseWeights(r);for(let l of this.layers)for(let[u,c]of l.weights.entries()){let f=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${u}`:c.originalName;if(o[f]!=null)throw new Ie(`Duplicate weight name: ${f}`);o[f]=c,i++}let a=[];for(let l in r){let u=l;if(o[l]==null){let c=l.split("/");u=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(o[u]!=null)a.push([o[u],r[l]]);else if(n)throw new Ie(`Provided weight data has no target variable: ${l}`);delete o[u]}if(n){let l=[];for(let u in o)l.push(u);if(l.length>0)throw new Ie(`${l.length} of ${i} weights are not set: ${l}`)}bR(a)}parseWeights(r){for(let n in Object.keys(r)){let o=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=o.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(r[s]=r[n],delete r[n])}}updatedConfig(){let r=this.getConfig(),n={};return n.className=this.getClassName(),n.config=r,n.kerasVersion=`tfjs-layers ${wR}`,n.backend="TensorFlow.js",n}toJSON(r,n=!0){let o=NJ(this.updatedConfig());return n?JSON.stringify(o):o}call(r,n){return je(()=>{r=Rn(r);let o=new eb;for(let i=0;i<this.inputs.length;++i)o.add(this.inputs[i],r[i]);return HA(this.outputs,o,n)})}computeMask(r,n){return je(()=>{r=Rn(r);let o;return n==null?o=Hp(null,r.length):o=Rn(n),this.runInternalGraph(r,o)[1]})}computeOutputShape(r){let n=gR(r);if(n.length!==this.inputLayers.length)throw new Ie(`Invalid inputShape argument ${r}: model has ${this.inputLayers.length} tensor inputs.`);let o={};for(let l=0;l<n.length;l++){let u=this.inputLayers[l],c=n[l],f=u.name+"_0_0";o[f]=c}let i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(m6);if(i.length>1)for(let l of i){let u=this.nodesByDepth[l];for(let c of u){let f=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(f.id)!==-1)continue;let d=[];for(let g=0;g<c.inboundLayers.length;g++){let y=c.inboundLayers[g],b=c.nodeIndices[g],x=c.tensorIndices[g],v=`${y.name}_${b}_${x}`,w=o[v];d.push(w)}let p=f.computeOutputShape(ua(d)),h=gR(p),m=f.inboundNodes.indexOf(c);for(let g=0;g<h.length;g++){let y=`${f.name}_${m}_${g}`;o[y]=h[g]}}}let s=[],a=[];for(let l=0;l<this.outputLayers.length;l++){let u=this.outputLayers[l],c=this.outputLayersNodeIndices[l],f=this.outputLayersTensorIndices[l],d=`${u.name}_${c}_${f}`;a.push(d)}for(let l=0;l<a.length;l++){let u=a[l];Ld(u in o),s.push(o[u])}return ua(s)}runInternalGraph(r,n){n==null&&(n=Hp(null,r.length));let o={};for(let u=0;u<this.inputs.length;++u){let c=this.inputs[u],f=r[u],d=n[u];o[c.id]=[f,d]}let i=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(m6);for(let u of i){let c=this.nodesByDepth[u];for(let f of c){let d=f.outboundLayer,p=f.inputTensors,h=f.outputTensors,m=new Array;for(let g of p)g.id in o&&m.push(o[g.id]);if(m.length===p.length){let g={},y,b,x,v;if(f.callArgs!=null&&(g=f.callArgs),m.length===1){let[w,_]=m[0];g.mask==null&&(g.mask=_),x=Rn(d.call(w,g)),v=Rn(d.computeMask(w,_)),y=[w],b=[_]}else y=m.map(w=>w[0]),b=m.map(w=>w[1]),g.mask==null&&(g.mask=b),x=Rn(d.call(y,g)),v=Rn(d.computeMask(y,b));if(d.activityRegularizer)throw new vr("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<h.length;++w){let _=h[w],C=x[w],S=v[w];o[_.id]=[C,S]}}}}let s=[],a=[],l=[];for(let u of this.outputs){Ld(u.id in o,`Could not compute output ${u.name} : ${u.id}`);let[c,f]=o[u.id];l.push(c.shape),s.push(c),a.push(f)}return[s,a,l]}buildNodeConversionMap(r){let n={},o;for(let i of this.layers){o=i instanceof t?1:0;for(let s=0;s<i.inboundNodes.length;s++){let a=t.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=o,o+=1)}}return n}getLayer(r,n){if(n!=null)return this.findLayer(n);if(r==null)throw new Ie("Provide either a layer name or layer index");if(typeof r=="number")return this.findLayer(r);for(let o of this.layers)if(o.name===r)return o;throw new Ie(`No such layer: ${r}`)}findLayer(r){if(this.layers.length<=r)throw new Ie(`Was asked to retrieve layer at index ${r}, but model only has ${this.layers.length} layer(s).`);return this.layers[r]}calculateLosses(){return je(()=>{let r=[];for(let n of this.layers)for(let o=0;o<n.inboundNodes.length;++o){let i=t.nodeKey(n,o);this.containerNodes.has(i)&&r.push(...n.calculateLosses())}return r})}getConfig(){let r={name:this.name},n=this.buildNodeConversionMap(this.layers),o=[];for(let a of this.layers){let l=a.getClassName(),u=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){let p=a.inboundNodes[d],h=t.nodeKey(a,d),m={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),m=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(p.inboundLayers.length>0){let g=[];for(let y=0;y<p.inboundLayers.length;y++){let b=p.inboundLayers[y],x=p.nodeIndices[y],v=p.tensorIndices[y],w=t.nodeKey(b,x),_=n[w];_==null&&(_=0),g.push([b.name,_,v,m])}c.push(g)}}}let f={};f.name=a.name,f.className=l,f.config=u,f.inboundNodes=c,o.push(f)}r.layers=o;let i=[];for(let a=0;a<this.inputLayers.length;a++){let l=this.inputLayers[a],u=this.inputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.inputLayersTensorIndices[a];i.push([l.name,f,d])}r.inputLayers=i;let s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=t.nodeKey(l,u);if(!this.containerNodes.has(c))continue;let f=n[c];f==null&&(f=0);let d=this.outputLayersTensorIndices[a];s.push([l.name,f,d])}return r.outputLayers=s,r}static fromConfig(r,n,o={},i=!1){let s={},a={};function l(y,b){y.name in a?a[y.name].push(b):a[y.name]=[b]}function u(y,b){let x=[],v;for(let w of b){let _=w[0],C=w[1],S=w[2];if(v=w[3]==null?{}:w[3],!(_ in s)){l(y,b);return}let E=s[_];if(E.inboundNodes.length<=C){l(y,b);return}let A=E.inboundNodes[C];x.push(A.outputTensors[S])}x.length>0&&y.apply(ua(x),v)}function c(y){let b=y.name,x=Ff(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(i),s[b]=x,y.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new Ie(`Corrupted configuration, expected array for nodeData: ${w}`);l(x,w)})}let f=n.name,d=n.layers;for(let y of d)c(y);for(;!Xmt(a);)for(let y of d){let b=s[y.name];if(b.name in a){let x=a[b.name];delete a[b.name];for(let v of x)u(b,v)}}let p=[],h=[],m=n.inputLayers;for(let y of m){let b=y[0],x=y[1],v=y[2];Ld(b in s);let _=s[b].inboundNodes[x].outputTensors;p.push(_[v])}let g=n.outputLayers;for(let y of g){let b=y[0],x=y[1],v=y[2];Ld(b in s);let _=s[b].inboundNodes[x].outputTensors;h.push(_[v])}return new r({inputs:p,outputs:h,name:f})}get stateful(){if(this._stateful)throw new Ie("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let r of this.layers)if(r.stateful)return!0;return!1}resetStates(){je(()=>{this.layers.forEach(r=>{r.stateful&&r.resetStates()})})}};re();re();re();function hSr(t,r,n){let o=r.length;if(t==null||Array.isArray(t)&&t.length===0)return r.map(i=>null);if(o===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&r[0]in t?[t[r[0]]]:[t];if(Array.isArray(t)){if(t.length!==o)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${o} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let i=[];return r.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${o}) outputs, so ${n} must be either an array with ${o} elements or an object with ${r} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function FJ(t,r){return hSr(t,r,"classWeight")}function RJ(t,r,n,o){return Be(this,null,function*(){if(r!=null||o!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let i=je(()=>{if(t.shape.length===1)return Gu(t);if(t.shape.length===2){if(t.shape[1]>1)return Jd(t,1);if(t.shape[1]===1)return Se(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(yield i.data());Tr(i);let a=[];return s.forEach(l=>{if(n[l]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${l} exists in the data but not in classWeight`);a.push(n[l])}),No(a,"float32")}else return null})}function Ugt(t,r){return we(t,r)}var mSr=32;function Wgt(t,r){let n,o,i=r;n=i.xs,o=i.ys,H.assert(n!=null&&o!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${r}`);let s=Vgt("input",t.inputNames,n),a=Vgt("output",t.outputNames,o),l=s[0].shape[0];H.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),H.assert(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<s.length;u++)H.assert(s[u].shape[0]===l,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${s[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);for(let u=0;u<a.length;u++)H.assert(a[u].shape[0]===l,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${a[u].shape[0]}; expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:s,ys:a}}function Vgt(t,r,n){if(n instanceof tn)return[n];if(Array.isArray(n))return H.assert(n.length===r.length,()=>`Received an array of ${n.length} Tensors, but expected ${r.length} to match the ${t} keys ${r}.`),n;{let o=[];for(let i of r){if(n[i]==null)throw new Ie(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);o.push(n[i])}return o}}function gSr(t){if(t.length===3)throw new vr("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function qgt(t,r,n){return Be(this,null,function*(){let o=n.batchesPerEpoch!=null;if(H.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),H.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),H.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),H.assert(!o||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),H.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let i=n.validationData!=null,s,a;if(i)if(Ggt(n.validationData))H.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let y=gSr(n.validationData);s=y.xs,a=y.ys}let l=t.makeTrainFunction(),u=t.getDedupedMetricsNames(),c;i?c=u.slice().concat(u.map(y=>"val_"+y)):c=u.slice();let f=_J(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:h}=SJ(f,d,n.epochs,null,null,ySr(r,n),null,i,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=yield r.iterator();for(;m<n.epochs;){let y={};yield p.onEpochBegin(m);let b=0,x=0;for(o||(g=yield r.iterator());!o||b<n.batchesPerEpoch;){let v=yield g.next();if(o&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){let{xs:w,ys:_}=Wgt(t,v.value),C={};C.batch=x,C.size=w[0].shape[0],yield p.onBatchBegin(x,C);let S=[];if(n.classWeight!=null){let N=FJ(n.classWeight,t.outputNames);for(let k=0;k<N.length;++k)S.push(yield RJ(_[k],null,N[k]))}let E=w.concat(_).concat(S),A=l(E);Tr(E);for(let N=0;N<u.length;++N){let k=u[N],R=A[N];C[k]=R,ks(R)}yield p.onBatchEnd(x,C),bJ(C),x++,b++}if(o?b>=n.batchesPerEpoch:v.done){if(i){let w;Ggt(n.validationData)?w=Rn(yield t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=Rn(t.evaluate(s,a,{batchSize:n.validationBatchSize==null?mSr:n.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)y[`val_${t.metricsNames[_]}`]=w[_]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(m,y),m++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function ySr(t,r){let n=null;return r.batchesPerEpoch!=null?n=r.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Ggt(t){return typeof t.iterator=="function"}function bSr(t){return typeof t.next=="function"}function Hgt(t,r,n){return Be(this,null,function*(){n=n||{};let o=n.batches!=null,i=t.testFunction,s=[];if(n.verbose>0)throw new vr("Verbose mode is not implemented yet.");H.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let a=bSr(r)?r:yield r.iterator(),l=0,u=0;for(;!o||u<n.batches;){let c=yield a.next();if(s=je(()=>{if(c.value){let{xs:f,ys:d}=Wgt(t,c.value),p=f.concat(d),h=je(()=>i(p));if(Tr(p),u===0)for(let g=0;g<h.length;++g)s.push(Rt(0));let m=p[0].shape[0];for(let g=0;g<h.length;++g){let y=h[g],b=s[g];s[g]=je(()=>Ke(s[g],we(m,y))),u>0&&Tr(b)}Tr(h),l+=m,++u}return s}),c.done){o&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){let f=s[c];s[c]=Ct(s[c],l),Tr(f)}return ua(s)})}re();re();function MJ(t){H.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function _R(t,r,n){return t==null?[null]:Array.isArray(t)?t.map(o=>Yv(o,r,n-r)):Yv(t,r,n-r)}function PJ(t,r){return je(()=>t==null?null:Array.isArray(t)?t.map(n=>PJ(n,r)):fJ(t,r.dtype==="int32"?r:rt(r,"int32")))}function jJ(t,r){let n=[],o=0,i=null;for(;o<t;)i=o+r,i>=t&&(i=t),n.push([o,i]),o=i;return n}function lSe(t){let r=[];t instanceof tn&&(t=[t]);for(let n=0;n<t.length;++n){let o=t[n];if(o.rank===1)r.push(Xv(o,1));else{if(o.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");r.push(o)}}return r}function Qp(t,r){if(t==null)return;let n=[];if(r instanceof tn)n.push(r.id);else if(Array.isArray(r))r.forEach(i=>n.push(i.id));else if(r!=null)for(let i in r){let s=r[i];n.push(s.id)}let o=[];if(t instanceof tn)n.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&o.push(i)});else if(t!=null)for(let i in t){let s=t[i];n.indexOf(s.id)===-1&&o.push(s)}o.forEach(i=>{i.isDisposed||i.dispose()})}function xSr(t){return t instanceof tn}function uSe(t){return Array.isArray(t)}function Ygt(t){return!xSr(t)&&!uSe(t)}function Xgt(t,r,n,o=!0,i=""){if(r==null||r.length===0){if(t!=null){let a=!1;if(uSe(t)&&t.length>0)a=!0;else if(Ygt(t)){for(let l in t)if(t.hasOwnProperty(l)){a=!0;break}}else a=!0;if(a)throw new Ie(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return r.map(a=>null);let s;if(Ygt(t)){t=t,s=[];for(let a of r){if(t[a]==null)throw new Ie(`No data provided for "${a}". Need data for each key in: ${r}`);s.push(t[a])}}else if(uSe(t)){if(t=t,t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${r.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,r.length>1)throw new Ie(`The model ${i} expects ${r.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=lSe(s),n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s). but got array with shape ${l.shape}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f>=0&&c!==f)throw new Ie(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${l.shape[0]} examples, each with shape [${l.shape.slice(1,l.shape.length)}] (tensor shape [${l.shape}])`)}}return s}function vSr(t,r,n){let o=Xp(t.map(s=>s.shape[0]));o.sort();let i=Xp(r.map(s=>s.shape[0]));if(i.sort(),o.length>1)throw new Ie(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new Ie(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(r.map(s=>s.shape))}`);if(o.length>0&&i.length>0&&!H.arraysEqual(o,i))throw new Ie(`Input Tensors should have the same number of samples as target Tensors. Found ${o[0]} input sample(s) and ${i[0]} target sample(s).`)}function wSr(t,r,n){let o=[XA,vR,KA];for(let i=0;i<t.length;++i){let s=t[i],a=r[i],l=n[i];if(a!=null){if(a===KA&&s.shape[s.shape.length-1]===1)throw new Ie(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(o.indexOf(a)!==-1){let u=s.shape.slice(1),c=l.slice(1);for(let f=0;f<u.length;++f){let d=u[f],p=c[f];if(p!=null&&d!==p)throw new Ie(`A target Tensor with shape ${s.shape} was passed for an output of shape ${l}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Kgt(t,r,n,o=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==r.length)throw new Ie(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${r.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(r.length>1)throw new Ie(`The model expects ${r.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let a=0;a<r.length;++a){if(n[a]==null)continue;let l=s[a];if(l.shape.length!==n[a].length)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(l.shape)}`);for(let u=0;u<n[a].length;++u){if(u===0&&!o)continue;let c=l.shape[u],f=n[a][u];if(f!=null&&f!==c)throw new Ie(`Error when checking ${i}: expected ${r[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(l.shape)}.`)}}}function _Sr(t,r){if(t==null||Array.isArray(t)&&t.length===0)return r.map(o=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return r.map(o=>n);{let o=[];for(let i of r){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),o.push(s)}return o}}var SSr="layers-model",Qv=(()=>{class t extends OJ{constructor(n){super(n),this.isTraining=!1}summary(n,o,i=console.log){if(!this.built)throw new Ie("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");$gt(this,n,o,i)}compile(n){if(n.loss==null&&(n.loss=[]),this.loss=n.loss,typeof n.optimizer=="string")this.optimizer_=Bgt(n.optimizer),this.isOptimizerOwned=!0;else{if(!(n.optimizer instanceof wa))throw new Ie("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=n.optimizer,this.isOptimizerOwned=!1}let o=[];if(!Array.isArray(n.loss)&&typeof n.loss!="string"&&typeof n.loss!="function"){n.loss=n.loss;for(let l in n.loss)if(this.outputNames.indexOf(l)===-1)throw new Ie(`Unknown entry in loss dictionary: "${l}". Only expected the following keys: ${this.outputNames}`);for(let l of this.outputNames)n.loss[l]==null&&console.warn(`Output "${l}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${l} during training`),o.push(EJ(n.loss[l]))}else if(Array.isArray(n.loss)){if(n.loss.length!==this.outputs.length)throw new Ie(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${n.loss}.`);o=n.loss.map(u=>EJ(u))}else{let l=EJ(n.loss);this.outputs.forEach(u=>{o.push(l)})}this.lossFunctions=o,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let l=0;l<this.outputs.length;++l){let u=this.internalOutputShapes[l],c=this.outputNames[l];this.feedOutputNames.push(c),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[l])}let i=[];this.metrics=n.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Xm("loss",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=this.lossFunctions[l];this.outputs.length>1&&(this.metricsTensors.push([u,l]),this.metricsNames.push(this.outputNames[l]+"_loss"))}});let s=_Sr(n.metrics,this.outputNames),a=(l,u,c)=>{this.outputNames.length>1&&(u=this.outputNames[l]+"_"+u),this.metricsNames.push(u),this.metricsTensors.push([c,l])};Xm("metric",()=>{for(let l=0;l<this.outputs.length;++l){if(i.indexOf(l)!==-1)continue;let u=s[l];(f=>{let d="",p,h,m;for(let g of f){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let b=this.internalOutputShapes[l];b[b.length-1]===1||this.lossFunctions[l]===vR?["accuracy","acc"].indexOf(g)!==-1?h=AJ:["crossentropy","ce"].indexOf(g)!==-1&&(h=nSe):this.lossFunctions[l]===xR?["accuracy","acc"].indexOf(g)!==-1?h=oSe:["crossentropy","ce"].indexOf(g)!==-1&&(h=iSe):["accuracy","acc"].indexOf(g)!==-1?h=kJ:["crossentropy","ce"].indexOf(g)!==-1&&(h=IJ);let x;["accuracy","acc"].indexOf(g)!==-1?x="acc":["crossentropy","ce"].indexOf(g)!==-1&&(x="ce"),m=h,p=d+x}else m=jgt(g),p=d+C6(g);let y;Xm(p,()=>{y=m}),a(l,p,y)}})(u)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(n,o,i={}){let s=i.batchSize==null?32:i.batchSize;MJ(s);let l=this.standardizeUserDataXY(n,o,!0,s);try{let u=l[0].concat(l[1]);this.makeTestFunction();let c=this.testFunction,f=this.testLoop(c,u,s,i.verbose,i.steps);return ua(f)}finally{Qp(l[0],n),Qp(l[1],o)}}evaluateDataset(n,o){return Be(this,null,function*(){return this.makeTestFunction(),Hgt(this,n,o)})}checkNumSamples(n,o,i,s="steps"){let a;if(i!=null){if(a=null,o!=null)throw new Ie(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${o}`)}else if(n!=null)Array.isArray(n)?a=n[0].shape[0]:a=n.shape[0];else throw new Ie(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(n,o){if(Array.isArray(o)&&o.length===0)throw new Ie("`outputs` is an empty Array, which is not allowed.");let i=Array.isArray(o),s=i?o:[o],a=this.retrieveSymbolicTensors(s),l=new eb;if(n instanceof tn&&(n=[n]),Array.isArray(n)){if(n.length!==this.inputs.length)throw new Ie(`The number of inputs provided (${n.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)l.add(this.inputs[c],n[c])}else for(let c of this.inputs){let f=n[c.name];if(f==null)throw new Ie(`No value is provided for the model's input ${c.name}`);l.add(c,f)}let u=HA(a,l);return i?u:u[0]}retrieveSymbolicTensors(n){let o=Hp(null,n.length),i=n.length;for(let s of this.layers){let a=Array.isArray(s.output)?s.output:[s.output],l=a.map(u=>u.name);for(let u=0;u<n.length;++u){let c=l.indexOf(n[u]);if(c!==-1&&(o[u]=a[c],i--),i===0)break}if(i===0)break}if(i>0){let s=[];throw o.forEach((a,l)=>{a==null&&s.push(n[l])}),new Ie(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return o}predictLoop(n,o=32,i=!1){return je(()=>{let s=this.checkNumSamples(n);if(i)throw new vr("Verbose predictLoop() is not implemented yet.");let a=jJ(s,o),l=this.outputs.map(u=>[]);for(let u=0;u<a.length;++u)je(()=>{let f=a[u][0],d=a[u][1],p=_R(n,f,d),h=[];if(Array.isArray(p))for(let g=0;g<p.length;++g)h.push({key:this.inputs[g],value:p[g]});else h.push({key:this.inputs[0],value:p});let m=new eb(h);return HA(this.outputs,m)}).forEach((f,d)=>l[d].push(f));return ua(l.map(u=>Fn(u,0)))})}predict(n,o={}){let i=lSe(n);Kgt(i,this.inputNames,this.feedInputShapes,!1);try{let s=o.batchSize==null?32:o.batchSize;return MJ(s),this.predictLoop(i,s)}finally{Qp(i,n)}}predictOnBatch(n){Kgt(n,this.inputNames,this.feedInputShapes,!0);let o=(Array.isArray(n)?n[0]:n).shape[0];return this.predictLoop(n,o)}standardizeUserDataXY(n,o,i=!0,s){if(this.optimizer_==null)throw new Fu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let l=0;l<this.feedOutputShapes.length;++l){let u=this.feedOutputShapes[l];this.feedLossFns[l]===xR?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(n=Xgt(n,this.feedInputNames,this.feedInputShapes,!1,"input"),o=Xgt(o,this.feedOutputNames,a,!1,"target"),vSr(n,o,null),wSr(o,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&n[0].shape[0]%s!==0)throw new Ie(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${n[0].shape[0]} sample(s).`);return[n,o]}standardizeUserData(n,o,i,s,a=!0,l){return Be(this,null,function*(){let[u,c]=this.standardizeUserDataXY(n,o,a,l);if(i!=null)throw new Error("sample weight is not supported yet.");let f=null;if(s!=null){let d=FJ(s,this.outputNames);f=[];for(let p=0;p<d.length;++p)f.push(yield RJ(c[p],null,d[p]))}return[u,c,f]})}testLoop(n,o,i,s=0,a){return je(()=>{let l=this.checkNumSamples(o,i,a,"steps"),u=[];if(s>0)throw new vr("Verbose mode is not implemented yet.");if(a!=null)throw new vr("steps mode in testLoop() is not implemented yet");{let c=jJ(l,i),f=No(Mu(0,l));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],m=Yv(f,p,h-p),g=PJ(o,m),y=n(g);if(d===0)for(let b=0;b<y.length;++b)u.push(Rt(0));for(let b=0;b<y.length;++b){let x=y[b];u[b]=Ke(u[b],we(h-p,x))}}for(let d=0;d<u.length;++d)u[d]=Ct(u[d],l)}return u})}getDedupedMetricsNames(){let n=this.metricsNames,o=[];for(let i=0;i<n.length;++i){let s=n[i],a=s;if(U2e(n,s)>1){let l=U2e(n.slice(0,i),s);a+=`_${l}`}o.push(a)}return o}makeTrainFunction(){return n=>{let o=[],i=n.slice(0,this.inputs.length),s=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=n.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),l=[],u=()=>{let p=[];for(let y=0;y<this.inputs.length;++y)p.push({key:this.inputs[y],value:i[y]});let h=new eb(p),m=HA(this.outputs,h,{training:!0}),g;for(let y=0;y<this.lossFunctions.length;++y){let b=this.lossFunctions[y],x=b(s[y],m[y]);a[y]!=null&&(x=Ugt(x,a[y]));let v=bo(x);o.push(v),y===0?g=x:g=Ke(g,x)}for(let y=0;y<this.metricsTensors.length;++y){let b;if(this.outputs.length>1&&y<this.outputs.length)b=o[y];else{let x=this.metricsTensors[y][0],v=this.metricsTensors[y][1];b=bo(x(s[v],m[v]))}ks(b),l.push(b)}return g=bo(g),this.calculateLosses().forEach(y=>{g=Ke(g,y)}),g},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(u,!0,c)].concat(l)}}makeTestFunction(){this.testFunction=n=>je(()=>{let o=[],i,s=n.slice(0,this.inputs.length),a=n.slice(this.inputs.length,this.inputs.length+this.outputs.length),l=[];for(let f=0;f<this.inputs.length;++f)l.push({key:this.inputs[f],value:s[f]});let u=new eb(l),c=HA(this.outputs,u);for(let f=0;f<this.lossFunctions.length;++f){let d=this.lossFunctions[f],p=bo(d(a[f],c[f]));f===0?i=p:i=Ke(i,p),o.push(i)}for(let f=0;f<this.metricsTensors.length;++f){let d=this.metricsTensors[f][0],p=this.metricsTensors[f][1],h=bo(d(a[p],c[p]));o.push(h)}return o})}fit(s,a){return Be(this,arguments,function*(n,o,i={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let l,u,c,f,d,p,h,m,g;try{let y=i.batchSize==null?32:i.batchSize;MJ(y);let x=yield this.standardizeUserData(n,o,i.sampleWeight,i.classWeight,!1,y);l=x[0],u=x[1],g=x[2];let v=!1,w;if(i.validationData!=null&&i.validationData.length>0){if(v=!0,i.validationData.length===2)d=i.validationData[0],p=i.validationData[1];else throw i.validationData.length===3?new vr("validationData including sample weights is not supported yet."):new Ie(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${i.validationData} is invalid.`);let I=yield this.standardizeUserData(d,p,null,null,!0,y);h=I[0],m=I[1],w=h.concat(m)}else if(i.validationSplit!=null&&i.validationSplit>0&&i.validationSplit<1){v=!0;let R=Math.floor(l[0].shape[0]*(1-i.validationSplit)),I=l[0].shape[0];h=_R(l,R,I),c=l,l=_R(l,0,R),m=_R(u,R,I),f=u,u=_R(u,0,R),w=h.concat(m)}else i.validationSteps!=null&&(v=!0);let _=l.concat(u).concat(g);this.checkTrainableWeightsConsistency();let C=this.makeTrainFunction(),S=this.getDedupedMetricsNames(),E,A;v?(this.makeTestFunction(),E=this.testFunction,A=S.slice().concat(S.map(R=>"val_"+R))):(E=null,w=[],A=S.slice());let N=_J(i.callbacks,i.yieldEvery);return yield this.fitLoop(C,_,S,y,i.epochs,i.verbose,N,E,w,i.shuffle,A,i.initialEpoch,null,null)}finally{this.isTraining=!1,Qp(l,n),Qp(u,o),Qp(c,n),Qp(f,o),Qp(h,d),Qp(m,p),g!=null&&Tr(g)}})}fitLoop(n,o,i,s,a,l,u,c,f,d,p,h,m,g){return Be(this,null,function*(){s==null&&(s=32),a==null&&(a=1),d==null&&(d=!0),h==null&&(h=0);let y=!1;if(c!=null&&f!=null&&(y=!0),g!=null&&(y=!0,m==null))throw new Ie("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let b=this.checkNumSamples(o,s,m,"steps_per_epoch"),x;b!=null&&(x=Mu(0,b)),l==null&&(l=1);let{callbackList:v,history:w}=SJ(u,l,a,h,b,m,s,y,p);v.setModel(this),this.history=w,yield v.onTrainBegin(),this.stopTraining_=!1;for(let _=h;_<a;++_){yield v.onEpochBegin(_);let C={};if(m!=null)throw new vr("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new vr("batch shuffling is not implemneted yet");d&&H.shuffle(x);let S=No(x),E=jJ(b,s);for(let A=0;A<E.length;++A){let N={};if(yield v.onBatchBegin(A,N),je(()=>{let k=E[A][0],R=E[A][1],I=Yv(S,k,R-k);N.batch=A,N.size=R-k;let L=PJ(o,I),j=n(L);for(let M=0;M<i.length;++M){let V=i[M],G=j[M];N[V]=G,ks(G)}if(A===E.length-1&&y){let M=this.testLoop(c,f,s);for(let V=0;V<i.length;++V){let G=i[V],U=M[V];ks(U),C["val_"+G]=U}}}),yield v.onBatchEnd(A,N),bJ(N),this.stopTraining_)break}S.dispose()}if(yield v.onEpochEnd(_,C),this.stopTraining_)break}return yield v.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(n,o){return Be(this,null,function*(){return qgt(this,n,o)})}trainOnBatch(n,o){return Be(this,null,function*(){let i=yield this.standardizeUserData(n,o),s=i[0],a=i[1],u=this.makeTrainFunction()(s.concat(a)),c=[];for(let f of u){let d=yield f.data();c.push(d[0])}return Tr(u),Qp(i[0],n),Qp(i[1],o),ua(c)})}getNamedWeights(n){let o=[],i=n!=null&&n.trainableOnly,s=i?this.trainableWeights:this.weights,a=this.getWeights(i);for(let l=0;l<s.length;++l)i&&!s[l].trainable||o.push({name:s[l].originalName,tensor:a[l]});return o}set stopTraining(n){this.stopTraining_=n}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(n){this.optimizer_!==n&&(this.optimizer_=n,this.isOptimizerOwned=!1)}dispose(){let n=super.dispose();if(n.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let o=iI().numTensors;this.optimizer_.dispose(),n.numDisposedVariables+=o-iI().numTensors}return n}getLossIdentifiers(){let n;if(typeof this.loss=="string")n=Yp(this.loss);else if(Array.isArray(this.loss)){for(let o of this.loss)if(typeof o!="string")throw new Error("Serialization of non-string loss is not supported.");n=this.loss.map(o=>Yp(o))}else{let o=Object.keys(this.loss);n={};let i=this.loss;for(let s of o)if(typeof i[s]=="string")n[s]=Yp(i[s]);else throw new Error("Serialization of non-string loss is not supported.")}return n}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Yp(C6(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(n=>Yp(C6(n)));{let n={};for(let o in this.metrics)n[o]=Yp(C6(this.metrics[o]));return n}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(n){if(n.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(n.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(n.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let o=E6(n.optimizer_config),i=Ff(o),s;if(typeof n.loss=="string")s=Hv(n.loss);else if(Array.isArray(n.loss))s=n.loss.map(l=>Hv(l));else if(n.loss!=null){s={};for(let l in n.loss)s[l]=Hv(n.loss[l])}let a;if(Array.isArray(n.metrics))a=n.metrics.map(l=>Hv(l));else if(n.metrics!=null){a={};for(let l in n.metrics)a[l]=Hv(n.metrics[l])}this.compile({loss:s,metrics:a,optimizer:i})}save(n,o){return Be(this,null,function*(){if(typeof n=="string"){let f=C0.getSaveHandlers(n);if(f.length===0)throw new Ie(`Cannot find any save handlers for URL '${n}'`);if(f.length>1)throw new Ie(`Found more than one (${f.length}) save handlers for URL '${n}'`);n=f[0]}if(n.save==null)throw new Ie("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let i=yield C0.encodeWeights(this.getNamedWeights(o)),u={modelTopology:this.toJSON(null,!1),format:SSr,generatedBy:`TensorFlow.js tfjs-layers v${wR}`,convertedBy:null};if((o==null?!1:o.includeOptimizer)&&this.optimizer!=null){u.trainingConfig=this.getTrainingConfig();let f="optimizer",{data:d,specs:p}=yield C0.encodeWeights(yield this.optimizer.getWeights(),f);i.specs.push(...p),i.data=C0.concatenateArrayBuffers([i.data,d])}return this.userDefinedMetadata!=null&&(aSe(this.userDefinedMetadata,this.name,!0),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=i.data,u.weightSpecs=i.specs,n.save(u)})}setUserDefinedMetadata(n){aSe(n,this.name),this.userDefinedMetadata=n}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();tt.registerClass(Qv);var CSr=(()=>{class t extends Qv{}return t.className="Functional",t})();tt.registerClass(CSr);re();var LJ=(()=>{class t extends Qv{constructor(n){if(super({inputs:[],outputs:[]}),n=n||{},this.trainable=!0,this.built=!1,this.name=n.name!=null?n.name:M2("sequential_"),n.layers!=null)for(let o of n.layers)this.add(o)}checkShape(n){if(n.inboundNodes[0].outputTensors[0].shape.some(i=>i<0))throw new Ie(`Negative dimension size caused by adding layer ${n.name} with input shape [${n.inboundNodes[0].inputTensors[0].shape}]`)}add(n){let o=n instanceof t||n instanceof Qv,i;if(o){if(i=n,i.outputs.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(i.inputs.length!==1)throw new Ie("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(n.inboundNodes.length===0){if(n.batchInputShape==null)throw new Ie("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let s=mJ({batchShape:n.batchInputShape,dtype:n.dtype,name:n.name+"_input"});n.apply(s)}if(o)this.outputs=i.outputs,this.inputs=i.inputs;else{if(n.inboundNodes.length!==1)throw new Ie(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${n.name} which has ${n.inboundNodes.length} pre-existing inbound connections.`);if(n.inboundNodes[0].outputTensors.length!==1)throw new Ie("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[n.inboundNodes[0].outputTensors[0]],this.inputs=eSe(this.outputs[0])}this.inboundNodes=[],new Kv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Hp(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{let s=n.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(n),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let n=this.layers.length-1;this.layers[n].outboundNodes=[],this.outputs=[this.layers[n].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(n,o){return this.model==null&&this.build(),this.model.call(n,o)}build(n){if(Wr(n),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Qv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(n,o,i=console.log){this.built||this.build(),super.summary(n,o,i)}setWeights(n){this.model==null&&this.build(),this.model.setWeights(n)}evaluate(n,o,i={}){if(!this.built)throw new Fu("The model needs to be compiled before being used.");return this.model.evaluate(n,o,i)}evaluateDataset(n,o){return Be(this,null,function*(){if(!this.built)throw new Fu("The model needs to be compiled before being used.");return this.model.evaluateDataset(n,o)})}predict(n,o={}){return this.model==null&&this.build(),this.model.predict(n,o)}predictOnBatch(n){return this.model==null&&this.build(),this.model.predictOnBatch(n)}compile(n){this.build(),this.model.compile(n),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(n){this.model.optimizer=n}fit(s,a){return Be(this,arguments,function*(n,o,i={}){if(!this.built)throw new Fu("The model needs to be compiled before being used.");return this.model.fit(n,o,i)})}fitDataset(n,o){return Be(this,null,function*(){if(!this.built)throw new Fu("The model needs to be compiled before being used.");return this.model.fitDataset(n,o)})}trainOnBatch(n,o){return Be(this,null,function*(){return this.model.trainOnBatch(n,o)})}static fromConfig(n,o,i={},s=!1){let a,l={};if(o instanceof Array){if(o[0].className==null||o[0].className==="Merge")throw new Ie("Legacy serialization format not supported yet.");a=o}else H.assert(o.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=o.layers,delete o.layers,l=o;let u=new n(l);if(!(u instanceof t))throw new vr(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(let c of a){let d=Ff(c,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),u.add(d)}return u}set stopTraining(n){if(this.model==null)throw new Ie("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=n}get stopTraining(){if(this.model==null)throw new Ie("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let n=[];for(let o of this.layers){let i={};i.className=o.getClassName(),i.config=o.getConfig(),n.push(i)}return{name:this.name,layers:n}}}return t.className="Sequential",t})();tt.registerClass(LJ);function cSe(t){return new LJ(t)}function fSe(t){return mJ(t)}re();re();re();var Da=class extends tt.Serializable{getConfig(){return{}}},TSr=(()=>{class t extends Da{apply(n,o=1){return cgt(n,o)}}return t.className="elu",t})();tt.registerClass(TSr);var ASr=(()=>{class t extends Da{apply(n){return RI(n)}}return t.className="selu",t})();tt.registerClass(ASr);var kSr=(()=>{class t extends Da{apply(n){return va(n)}}return t.className="relu",t})();tt.registerClass(kSr);var ISr=(()=>{class t extends Da{apply(n){return je(()=>Qf(6,va(n)))}}return t.className="relu6",t})();tt.registerClass(ISr);var DSr=(()=>{class t extends Da{apply(n){return n}}return t.className="linear",t})();tt.registerClass(DSr);var NSr=(()=>{class t extends Da{apply(n){return _l(n)}}return t.className="sigmoid",t})();tt.registerClass(NSr);var OSr=(()=>{class t extends Da{apply(n){return dgt(n)}}return t.className="hardSigmoid",t})();tt.registerClass(OSr);var FSr=(()=>{class t extends Da{apply(n){return Eh(n)}}return t.className="softplus",t})();tt.registerClass(FSr);var RSr=(()=>{class t extends Da{apply(n){return fgt(n)}}return t.className="softsign",t})();tt.registerClass(RSr);var MSr=(()=>{class t extends Da{apply(n){return _h(n)}}return t.className="tanh",t})();tt.registerClass(MSr);var pSe=(()=>{class t extends Da{apply(n,o=-1){return iw(n,o)}}return t.className="softmax",t})();tt.registerClass(pSe);var PSr=(()=>{class t extends Da{apply(n,o=-1){return AI(n,o)}}return t.className="logSoftmax",t})();tt.registerClass(PSr);var jSr=(()=>{class t extends Da{apply(n){return je(()=>je(()=>{let o=Math.sqrt(2),i=we(.5,Ke(1,_I(Ct(n,o))));return we(n,i)}))}}return t.className="gelu",t})();tt.registerClass(jSr);var LSr=(()=>{class t extends Da{apply(n){return je(()=>we(.5,we(n,Ke(1,_h(we(Kn(Ct(2,Math.PI)),Ke(n,we(.044715,$a(n,3)))))))))}}return t.className="gelu_new",t})();tt.registerClass(LSr);var BSr=(()=>{class t extends Da{apply(n){return je(()=>we(n,_h(Eh(n))))}}return t.className="mish",t})();tt.registerClass(BSr);var $Sr=(()=>{class t extends Da{apply(n,o=1){return je(()=>we(_l(we(n,o)),n))}}return t.className="swish",t})();tt.registerClass($Sr);function Zm(t){return t.getClassName()}function dSe(t,r={}){return Qy(t,tt.SerializationMap.getMap().classNameMap,r,"activation")}function Qm(t){if(t==null){let r={};return r.className="linear",r.config={},dSe(r)}if(typeof t=="string"){let r={};return r.className=t,r.config={},dSe(r)}else return t instanceof Da?t:dSe(t)}re();re();function zSr(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var BJ=class extends tt.Serializable{},Jgt=(()=>{class t extends BJ{constructor(n){super(),zSr(n),this.l1=n==null||n.l1==null?.01:n.l1,this.l2=n==null||n.l2==null?.01:n.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(n){return je(()=>{let o=xo([1]);return this.hasL1&&(o=Ke(o,It(we(this.l1,Ao(n))))),this.hasL2&&(o=Ke(o,It(we(this.l2,qA(n))))),Se(o,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(n,o){return new n({l1:o.l1,l2:o.l2})}}return t.className="L1L2",t})();tt.registerClass(Jgt);var Zgt={l1l2:"L1L2"};function Ln(t){return dR(t)}function Qgt(t,r={}){return Qy(t,tt.SerializationMap.getMap().classNameMap,r,"regularizer")}function mo(t){if(t==null)return null;if(typeof t=="string"){let n={className:t in Zgt?Zgt[t]:t,config:{}};return Qgt(n)}else return t instanceof BJ?t:Qgt(t)}var hSe=(()=>{class t extends yr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null&&(this.maxValue=n.maxValue)}call(n,o){n=lr(n);let i=va(n);return this.maxValue!=null&&(i=Hs(i,0,this.maxValue)),i}computeOutputShape(n){return n}getConfig(){let n={maxValue:this.maxValue},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ReLU",t})();tt.registerClass(hSe);var mSe=(()=>{class t extends yr{constructor(n){super(n??{}),this.DEFAULT_ALPHA=.3,n==null&&(n={}),this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=lr(n);return K1(i,this.alpha)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LeakyReLU",t})();tt.registerClass(mSe);var gSe=(()=>{class t extends yr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",n==null&&(n={}),this.supportsMasking=!0,this.alphaInitializer=ro(n.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=mo(n.alphaRegularizer),this.alphaConstraint=fi(n.alphaConstraint),n.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(n.sharedAxes))this.sharedAxes=n.sharedAxes;else if(typeof n.sharedAxes=="number")this.sharedAxes=[n.sharedAxes];else throw new Ie(`Expected sharedAxes to be a number or an array of numbers, but got ${n.sharedAxes}`)}build(n){n=Wr(n);let o=n.slice(1);if(this.sharedAxes!=null)for(let s of this.sharedAxes)o[s-1]=1;this.alpha=this.addWeight("alpha",o,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let i={};if(this.sharedAxes!=null)for(let s=1;s<n.length;++s)i[s]=n[s];this.inputSpec=[new ho({ndim:n.length,axes:i})],this.built=!0}call(n,o){return n=lr(n),ow(n,this.alpha.read())}getConfig(){let n={alphaInitializer:Co(this.alphaInitializer),alphaRegularizer:Ln(this.alphaRegularizer),alphaConstraint:ci(this.alphaConstraint),sharedAxes:this.sharedAxes},o=super.getConfig();return Object.assign(n,o),n}}return t.className="PReLU",t})();tt.registerClass(gSe);var ySe=(()=>{class t extends yr{constructor(n){if(super(n??{}),this.DEFAULT_ALPHA=1,n==null&&(n={}),n.alpha!=null&&n.alpha!==this.DEFAULT_ALPHA)throw new vr(`Non-default alpha value (${n.alpha}) is not supported by the ELU layer yet.`);this.alpha=n.alpha==null?this.DEFAULT_ALPHA:n.alpha}call(n,o){let i=lr(n);return m0(i)}computeOutputShape(n){return n}getConfig(){let n={alpha:this.alpha},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ELU",t})();tt.registerClass(ySe);var bSe=(()=>{class t extends yr{constructor(n){super(n??{}),this.DEFAULT_THETA=1,n==null&&(n={}),this.theta=n.theta==null?this.DEFAULT_THETA:n.theta}call(n,o){let i=lr(n);return we(i,rt(oi(i,this.theta),"float32"))}computeOutputShape(n){return n}getConfig(){let n={theta:this.theta},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ThresholdedReLU",t})();tt.registerClass(bSe);var xSe=(()=>{class t extends yr{constructor(n){super(n??{}),this.DEFAULT_AXIS=1,n==null&&(n={}),this.softmax=new pSe().apply,this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis}call(n,o){return je(()=>{let i=lr(n),s=o.mask;if(s!=null){let a=we(wt(Ui(i.shape),rt(s,i.dtype)),Rt(-1e9));i=Ke(i,a)}return this.axis instanceof Array?this.axis.length>1?bi(wt(i,J1(i,this.axis,!0))):this.softmax(i,this.axis[0]):this.softmax(i,this.axis)})}computeOutputShape(n){return n}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Softmax",t})();tt.registerClass(xSe);re();re();function B2(t,r,n){if(typeof t=="number")return Hp(t,r);if(t.length!==r)throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${t.length} elements.`);for(let o=0;o<r;++o){let i=t[o];if(!sgt(i))throw new Ie(`The ${n} argument must be an integer or tuple of ${r} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Ec(t,r,n,o,i=1){if(t==null)return t;let s=r+(r-1)*(i-1),a;return n==="same"?a=t:a=t-s+1,Math.floor((a+o-1)/o)}function Jm(t,r,n,o){if(t==null)return null;if(o==="valid")t=t*r+Km([n-r,0]);else if(o==="same")t=t*r;else throw new Ie(`Unsupport padding mode: ${o}.`);return t}function A6(t,r){return je(()=>(Ko(r),r==="channelsFirst"?Gr(t,[0,2,3,1]):t))}function vSe(t,r){return je(()=>(Ko(r),r==="channelsFirst"?Gr(t,[0,2,3,4,1]):t))}function VSr(t,r,n,o=1,i="valid",s,a=1){return je(()=>{if(s==null&&(s=Pu()),Ko(s),t.shape.length!==3)throw new Ie(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(r.shape.length!==3)throw new Ie(`The kernel for a conv1dWithBias operation should be 3, but is ${r.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ie(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=Gr(t,[0,2,1])),i==="causal")throw new vr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=yI(t,r,o,i==="same"?"same":"valid","NWC",a);return n!=null&&(l=ju(l,n)),l})}function e0t(t,r,n,o=[1,1],i="valid",s,a,l=null){return je(()=>{if(s==null&&(s=Pu()),Ko(s),t.rank!==3&&t.rank!==4)throw new Ie(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(r.rank!==3&&r.rank!==4)throw new Ie(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=A6(t,s);if(i==="causal")throw new vr("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=cw.conv2d({x:u,filter:r,strides:o,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:l}),s==="channelsFirst"&&(u=Gr(u,[0,3,1,2])),u})}function GSr(t,r,n,o=[1,1,1],i="valid",s,a){return je(()=>{if(s==null&&(s=Pu()),Ko(s),t.rank!==4&&t.rank!==5)throw new Ie(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(r.rank!==4&&r.rank!==5)throw new Ie(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let l=vSe(t,s);if(i==="causal")throw new vr("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=N8(l,r,o,i==="same"?"same":"valid","NDHWC",a),n!=null&&(l=ju(l,n)),s==="channelsFirst"&&(l=Gr(l,[0,4,1,2,3])),l})}var T6=class t extends yr{constructor(r,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(n),this.rank=r,Pi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new vr(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=B2(n.kernelSize,r,"kernelSize"),this.strides=B2(n.strides==null?1:n.strides,r,"strides"),this.padding=n.padding==null?"valid":n.padding,Ru(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ko(this.dataFormat),this.activation=Qm(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ro(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=fi(n.biasConstraint),this.biasRegularizer=mo(n.biasRegularizer),this.activityRegularizer=mo(n.activityRegularizer),this.dilationRate=B2(n.dilationRate==null?1:n.dilationRate,r,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ie(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ie(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ie(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(r){if(Ld("kernelSize"in r,"required key 'kernelSize' not in config"),typeof r.kernelSize!="number"&&!nJ(r.kernelSize,"number",1,3))throw new Ie(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(r.kernelSize)}.`)}getConfig(){let r={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Zm(this.activation),useBias:this.useBias,biasInitializer:Co(this.biasInitializer),biasRegularizer:Ln(this.biasRegularizer),activityRegularizer:Ln(this.activityRegularizer),biasConstraint:ci(this.biasConstraint)},n=super.getConfig();return Object.assign(r,n),r}},SR=class t extends T6{constructor(r,n){super(r,n),this.kernel=null,t.verifyArgs(n),this.filters=n.filters,Pi(this.filters,"filters"),this.kernelInitializer=ro(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=fi(n.kernelConstraint),this.kernelRegularizer=mo(n.kernelRegularizer)}build(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?1:r.length-1;if(r[n]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${r[n]}`);let o=r[n],i=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:o}}],this.built=!0}call(r,n){return je(()=>{r=lr(r);let o,i=this.bias==null?null:this.bias.read(),s=oJ(this.activation.getClassName());if(s!=null&&this.rank===2)o=e0t(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)o=VSr(r,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)o=e0t(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)o=GSr(r,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new vr("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(o=this.activation.apply(o))}return o})}computeOutputShape(r){r=Wr(r);let n=[],o=this.dataFormat==="channelsLast"?r.slice(1,r.length-1):r.slice(2);for(let s=0;s<o.length;++s){let a=Ec(o[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[r[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){let r={filters:this.filters,kernelInitializer:Co(this.kernelInitializer),kernelRegularizer:Ln(this.kernelRegularizer),kernelConstraint:ci(this.kernelConstraint)},n=super.getConfig();return Object.assign(r,n),r}static verifyArgs(r){if(!("filters"in r)||typeof r.filters!="number"||r.filters<1)throw new Ie(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(r.filters)}`)}},$J=(()=>{class t extends SR{constructor(n){super(2,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!nJ(n.kernelSize,"number",1,2))throw new Ie(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv2D",t})();tt.registerClass($J);var zJ=(()=>{class t extends SR{constructor(n){super(3,n),t.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!(Array.isArray(n.kernelSize)&&(n.kernelSize.length===1||n.kernelSize.length===3)))throw new Ie(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv3D",t})();tt.registerClass(zJ);var wSe=(()=>{class t extends $J{constructor(n){if(super(n),this.inputSpec=[new ho({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Wr(n),n.length!==4)throw new Ie("Input should have rank 4; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ho({ndim:4,axes:{[o]:i}})],this.built=!0}call(n,o){return je(()=>{let i=lr(n);if(i.shape.length!==4)throw new Ie(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u;this.dataFormat==="channelsFirst"?(l=2,u=3):(l=1,u=2);let c=s[l],f=s[u],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],m=this.strides[1],g=Jm(c,h,d,this.padding),y=Jm(f,m,p,this.padding),b=[a,g,y,this.filters];this.dataFormat!=="channelsLast"&&(i=Gr(i,[0,2,3,1]));let x=xI(i,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Gr(x,[0,3,1,2])),this.bias!=null&&(x=ju(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(n){n=Wr(n);let o=n.slice(),i,s,a;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3):(i=3,s=1,a=2);let l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],f=this.strides[1];return o[i]=this.filters,o[s]=Jm(o[s],c,l,this.padding),o[a]=Jm(o[a],f,u,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv2DTranspose",t})();tt.registerClass(wSe);var _Se=(()=>{class t extends zJ{constructor(n){if(super(n),this.inputSpec=[new ho({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ie(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(n){if(n=Wr(n),n.length!==5)throw new Ie("Input should have rank 5; Received input shape: "+JSON.stringify(n));let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null)throw new Ie("The channel dimension of the inputs should be defined. Found `None`.");let i=n[o],s=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ho({ndim:5,axes:{[o]:i}})],this.built=!0}call(n,o){return je(()=>{let i=lr(n);if(i.shape.length!==5)throw new Ie(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);let s=i.shape,a=s[0],l,u,c;this.dataFormat==="channelsFirst"?(c=2,l=3,u=4):(c=1,l=2,u=3);let f=s[c],d=s[l],p=s[u],h=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[0],b=this.strides[1],x=this.strides[2],v=Jm(f,y,h,this.padding),w=Jm(d,b,m,this.padding),_=Jm(p,x,g,this.padding),C=[a,v,w,_,this.filters];this.dataFormat!=="channelsLast"&&(i=Gr(i,[0,2,3,4,1]));let S=F8(i,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Gr(S,[0,4,1,2,3])),this.bias!==null&&(S=ju(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(n){n=Wr(n);let o=n.slice(),i,s,a,l;this.dataFormat==="channelsFirst"?(i=1,s=2,a=3,l=4):(i=4,s=1,a=2,l=3);let u=this.kernelSize[0],c=this.kernelSize[1],f=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return o[i]=this.filters,o[s]=Jm(o[s],d,u,this.padding),o[a]=Jm(o[a],p,c,this.padding),o[l]=Jm(o[l],h,f,this.padding),o}getConfig(){let n=super.getConfig();return delete n.dilationRate,n}}return t.className="Conv3DTranspose",t})();tt.registerClass(_Se);var WSr=(()=>{class t extends SR{constructor(n,o){if(super(n,o),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,o.filters==null)throw new Ie("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(o.kernelInitializer!=null||o.kernelRegularizer!=null||o.kernelConstraint!=null)throw new Ie("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(o.padding!=null&&o.padding!=="same"&&o.padding!=="valid")throw new Ie(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(o.padding)}`);this.depthMultiplier=o.depthMultiplier==null?1:o.depthMultiplier,this.depthwiseInitializer=ro(o.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=mo(o.depthwiseRegularizer),this.depthwiseConstraint=fi(o.depthwiseConstraint),this.pointwiseInitializer=ro(o.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=mo(o.pointwiseRegularizer),this.pointwiseConstraint=fi(o.pointwiseConstraint)}build(n){if(n=Wr(n),n.length<this.rank+2)throw new Ie(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(n)}`);let o=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(n[o])}`);let i=n[o],s=this.kernelSize.concat([i,this.depthMultiplier]),a=[];for(let u=0;u<this.rank;++u)a.push(1);a.push(i*this.depthMultiplier,this.filters);let l=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,l,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,l,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,l,this.biasConstraint):this.bias=null,this.inputSpec=[new ho({ndim:this.rank+2,axes:{[o]:i}})],this.built=!0}call(n,o){return je(()=>{n=lr(n);let i;if(this.rank===1)throw new vr("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(n=Gr(n,[0,2,3,1])),i=MI(n,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=ju(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),this.dataFormat==="channelsFirst"&&(i=Gr(i,[0,3,1,2])),i})}getConfig(){let n=super.getConfig();return delete n.rank,delete n.kernelInitializer,delete n.kernelRegularizer,delete n.kernelConstraint,n.depthwiseInitializer=Co(this.depthwiseInitializer),n.pointwiseInitializer=Co(this.pointwiseInitializer),n.depthwiseRegularizer=Ln(this.depthwiseRegularizer),n.pointwiseRegularizer=Ln(this.pointwiseRegularizer),n.depthwiseConstraint=ci(this.depthwiseConstraint),n.pointwiseConstraint=ci(this.pointwiseConstraint),n}}return t.className="SeparableConv",t})();var SSe=(()=>{class t extends WSr{constructor(n){super(2,n)}}return t.className="SeparableConv2D",t})();tt.registerClass(SSe);var CSe=(()=>{class t extends SR{constructor(n){super(1,n),t.verifyArgs(n),this.inputSpec=[{ndim:3}]}getConfig(){let n=super.getConfig();return delete n.rank,delete n.dataFormat,n}static verifyArgs(n){if(typeof n.kernelSize!="number"&&!nJ(n.kernelSize,"number",1,1))throw new Ie(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(n.kernelSize)}.`)}}return t.className="Conv1D",t})();tt.registerClass(CSe);var ESe=(()=>{class t extends yr{constructor(n){super(n),typeof n.cropping=="number"?this.cropping=[[n.cropping,n.cropping],[n.cropping,n.cropping]]:typeof n.cropping[0]=="number"?this.cropping=[[n.cropping[0],n.cropping[0]],[n.cropping[1],n.cropping[1]]]:this.cropping=n.cropping,this.dataFormat=n.dataFormat===void 0?"channelsLast":n.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(n){return this.dataFormat==="channelsFirst"?[n[0],n[1],n[2]-this.cropping[0][0]-this.cropping[0][1],n[3]-this.cropping[1][0]-this.cropping[1][1]]:[n[0],n[1]-this.cropping[0][0]-this.cropping[0][1],n[2]-this.cropping[1][0]-this.cropping[1][1],n[3]]}call(n,o){return je(()=>{if(n=lr(n),this.dataFormat==="channelsLast"){let i=y6(n,this.cropping[0][0],n.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return y6(i,this.cropping[1][0],n.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let i=y6(n,this.cropping[0][0],n.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return y6(i,this.cropping[1][0],n.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let n={cropping:this.cropping,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Cropping2D",t})();tt.registerClass(ESe);var TSe=(()=>{class t extends yr{constructor(n){super(n),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=n.size==null?this.DEFAULT_SIZE:n.size,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ko(this.dataFormat),this.interpolation=n.interpolation==null?"nearest":n.interpolation,ogt(this.interpolation)}computeOutputShape(n){if(this.dataFormat==="channelsFirst"){let o=n[2]==null?null:this.size[0]*n[2],i=n[3]==null?null:this.size[1]*n[3];return[n[0],n[1],o,i]}else{let o=n[1]==null?null:this.size[0]*n[1],i=n[2]==null?null:this.size[1]*n[2];return[n[0],o,i,n[3]]}}call(n,o){return je(()=>{let i=lr(n),s=i.shape;if(this.dataFormat==="channelsFirst"){i=Gr(i,[0,2,3,1]);let a=this.size[0]*s[2],l=this.size[1]*s[3],u=this.interpolation==="nearest"?Xu.resizeNearestNeighbor(i,[a,l]):Xu.resizeBilinear(i,[a,l]);return Gr(u,[0,3,1,2])}else{let a=this.size[0]*s[1],l=this.size[1]*s[2];return this.interpolation==="nearest"?Xu.resizeNearestNeighbor(i,[a,l]):Xu.resizeBilinear(i,[a,l])}})}getConfig(){let n={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}}return t.className="UpSampling2D",t})();tt.registerClass(TSe);re();re();function qSr(t,r,n=[1,1],o="valid",i,s){return je(()=>{i==null&&(i=Pu()),Ko(i);let a=A6(t,i);if(t.rank!==4)throw new Ie(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(r.rank!==4)throw new Ie(`depthwiseKernel is required to be 4-D, but is instead ${r.rank}-D`);return a=h0(a,r,n,o==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=Gr(a,[0,3,1,2])),a})}var ASe=(()=>{class t extends T6{constructor(n){super(2,n),this.depthwiseKernel=null,this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ro(n.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=fi(n.depthwiseConstraint),this.depthwiseRegularizer=mo(n.depthwiseRegularizer)}build(n){if(n=Wr(n),n.length<4)throw new Ie(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(n)}.`);let o=this.dataFormat==="channelsFirst"?1:3;if(n[o]==null||n[o]<0)throw new Ie(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${n[o]}).`);let i=n[o],s=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return je(()=>{n=lr(n);let i=qSr(n,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(i=ju(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),i})}computeOutputShape(n){n=Wr(n);let o=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2],s=this.dataFormat==="channelsFirst"?n[1]*this.depthMultiplier:n[3]*this.depthMultiplier,a=Ec(o,this.kernelSize[0],this.padding,this.strides[0]),l=Ec(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[n[0],s,a,l]:[n[0],a,l,s]}getConfig(){let n=super.getConfig();return n.depthMultiplier=this.depthMultiplier,n.depthwiseInitializer=Co(this.depthwiseInitializer),n.depthwiseRegularizer=Ln(this.depthwiseRegularizer),n.depthwiseConstraint=ci(this.depthwiseRegularizer),n}}return t.className="DepthwiseConv2D",t})();tt.registerClass(ASe);re();re();re();re();function kSe(t,r,n,o){if(Array.isArray(t)){if(r!=null||n!=null)throw new Ie("When inputs is an array, neither initialState or constants should be provided");o!=null&&(n=t.slice(t.length-o,t.length),t=t.slice(0,t.length-o)),t.length>1&&(r=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return r=i(r),n=i(n),{inputs:t,initialState:r,constants:n}}function ISe(t,r,n,o=!1,i,s,a=!1,l=!1){return je(()=>{let u=r.shape.length;if(u<3)throw new Ie(`Input should be at least 3D, but is ${u}D.`);let c=[1,0].concat(Mu(2,u));if(r=Gr(r,c),s!=null)throw new vr("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=rt(rt(i,"bool"),"float32"),i.rank===u-1&&(i=Ei(i,-1)),i=Gr(i,c)),o&&(r=ds(r,0),i!=null&&(i=ds(i,0)));let f=[],d,p=n,h=r.shape[0],m=Ua(r),g;i!=null&&(g=Ua(i));for(let b=0;b<h;++b){let x=m[b],v=je(()=>t(x,p));if(i==null)d=v[0],p=v[1];else{let w=je(()=>{let _=g[b],C=wt(Ds(_),_),S=Ke(we(v[0],_),we(p[0],C)),E=p.map((A,N)=>Ke(we(v[1][N],_),we(A,C)));return{output:S,newStates:E}});d=w.output,p=w.newStates}l&&f.push(d)}let y;return l&&(y=ts(f,1)),[d,y,p]})}var tb=(()=>{class t extends yr{constructor(n){super(n);let o;if(n.cell==null)throw new Ie("cell property is missing for the constructor of RNN.");if(Array.isArray(n.cell)?o=new GJ({cells:n.cell}):o=n.cell,o.stateSize==null)throw new Ie("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=o,this.returnSequences=n.returnSequences==null?!1:n.returnSequences,this.returnState=n.returnState==null?!1:n.returnState,this.goBackwards=n.goBackwards==null?!1:n.goBackwards,this._stateful=n.stateful==null?!1:n.stateful,this.unroll=n.unroll==null?!1:n.unroll,this.supportsMasking=!0,this.inputSpec=[new ho({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Mu(0,n).map(o=>null)}else return this.states_}setStates(n){this.states_=n}computeOutputShape(n){hJ(n)&&(n=n[0]),n=n;let o=this.cell.stateSize;Array.isArray(o)||(o=[o]);let i=o[0],s;if(this.returnSequences?s=[n[0],n[1],i]:s=[n[0],i],this.returnState){let a=[];for(let l of o)a.push([n[0],l]);return[s].concat(a)}else return s}computeMask(n,o){return je(()=>{Array.isArray(o)&&(o=o[0]);let i=this.returnSequences?o:null;if(this.returnState){let s=this.states.map(a=>null);return[i].concat(s)}else return i})}get states(){if(this.states_==null){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,o=[];for(let i=0;i<n;++i)o.push(null);return o}else return this.states_}set states(n){this.states_=n}build(n){if(this.numConstants!=null)throw new vr("Constants support is not implemented in RNN yet.");hJ(n)&&(n=n[0]),n=n;let i=this.stateful?n[0]:null,s=n.slice(2);this.inputSpec[0]=new ho({shape:[i,null,...s]});let a=[n[0]].concat(n.slice(2));this.cell.build(a);let l;if(Array.isArray(this.cell.stateSize)?l=this.cell.stateSize:l=[this.cell.stateSize],this.stateSpec!=null){if(!H.arraysEqual(this.stateSpec.map(u=>u.shape[u.shape.length-1]),l))throw new Ie(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(u=>new ho({shape:[null,u]}));this.stateful&&this.resetStates()}resetStates(n,o=!1){je(()=>{if(!this.stateful)throw new jd("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape[0];if(i==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>xo([i,s])):this.states_=[xo([i,this.cell.stateSize])];else if(n==null)Tr(this.states_),this.keptStates!=null&&(Tr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>xo([i,s])):this.states_[0]=xo([i,this.cell.stateSize]);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o===!0?this.keptStates.push(this.states_.slice()):Tr(this.states_);for(let s=0;s<this.states_.length;++s){let a=n[s],l=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,u=[i,l];if(!H.arraysEqual(a.shape,u))throw new Ie(`State ${s} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>ks(s.clone()))})}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=kSe(n,i,s,this.numConstants);n=a.inputs,i=a.initialState,s=a.constants;let l=[],u=[];if(i!=null){o.initialState=i,l=l.concat(i),this.stateSpec=[];for(let f of i)this.stateSpec.push(new ho({shape:f.shape}));u=u.concat(this.stateSpec)}if(s!=null&&(o.constants=s,l=l.concat(s),this.numConstants=s.length),l[0]instanceof Gl){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let h=super.apply(f,o);return this.inputSpec=p,h}else return super.apply(n,o)}call(n,o){return je(()=>{let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;n=lr(n),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(n));let l=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==l)throw new Ie(`RNN Layer has ${l} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let u={training:s},f=ISe((g,y)=>{let b=this.cell.call([g].concat(y),u);return[b[0],b.slice(1)]},n,a,this.goBackwards,i,null,this.unroll,this.returnSequences),d=f[0],p=f[1],h=f[2];this.stateful&&this.resetStates(h,s);let m=this.returnSequences?p:d;return this.returnState?[m].concat(h):m})}getInitialState(n){return je(()=>{let o=xo(n.shape);return o=It(o,[1,2]),o=Xv(o),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>i>1?cJ(o,[1,i]):o):this.cell.stateSize>1?[cJ(o,[1,this.cell.stateSize])]:[o]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(n)}getConfig(){let n=super.getConfig(),o={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(o.numConstants=this.numConstants);let i=this.cell.getConfig();return this.getClassName()===t.className&&(o.cell={className:this.cell.getClassName(),config:i}),Object.assign(Object.assign(Object.assign({},i),n),o)}static fromConfig(n,o,i={}){let s=o.cell,a=Ff(s,i);return new n(Object.assign(o,{cell:a}))}}return t.className="RNN",t})();tt.registerClass(tb);var Jv=class extends yr{},UJ=(()=>{class t extends Jv{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Pi(this.units,"units"),this.activation=Qm(n.activation==null?this.DEFAULT_ACTIVATION:n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=ro(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ro(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ro(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mo(n.kernelRegularizer),this.recurrentRegularizer=mo(n.recurrentRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.kernelConstraint=fi(n.kernelConstraint),this.recurrentConstraint=fi(n.recurrentConstraint),this.biasConstraint=fi(n.biasConstraint),this.dropout=WA([1,Km([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=WA([1,Km([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Wr(n),this.kernel=this.addWeight("kernel",[n[n.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return je(()=>{if(n=n,n.length!==2)throw new Ie(`SimpleRNNCell expects 2 input Tensors, got ${n.length}.`);let i=n[1];n=n[0];let s=o.training==null?!1:o.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=e1({ones:()=>Ds(n),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=e1({ones:()=>Ds(i),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a,l=this.dropoutMask,u=this.recurrentDropoutMask;l!=null?a=Zp(we(n,l),this.kernel.read()):a=Zp(n,this.kernel.read()),this.bias!=null&&(a=ju(a,this.bias.read())),u!=null&&(i=we(i,u));let c=Ke(a,Zp(i,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Zm(this.activation),useBias:this.useBias,kernelInitializer:Co(this.kernelInitializer),recurrentInitializer:Co(this.recurrentInitializer),biasInitializer:Co(this.biasInitializer),kernelRegularizer:Ln(this.kernelRegularizer),recurrentRegularizer:Ln(this.recurrentRegularizer),biasRegularizer:Ln(this.biasRegularizer),activityRegularizer:Ln(this.activityRegularizer),kernelConstraint:ci(this.kernelConstraint),recurrentConstraint:ci(this.recurrentConstraint),biasConstraint:ci(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},n),o)}}return t.className="SimpleRNNCell",t})();tt.registerClass(UJ);var DSe=(()=>{class t extends tb{constructor(n){n.cell=new UJ(n),super(n)}call(n,o){return je(()=>{this.cell.dropoutMask!=null&&(Tr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Tr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return new n(o)}}return t.className="SimpleRNN",t})();tt.registerClass(DSe);var VJ=(()=>{class t extends Jv{constructor(n){if(super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.resetAfter)throw new Ie("GRUCell does not support reset_after parameter set to true.");this.units=n.units,Pi(this.units,"units"),this.activation=Qm(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Qm(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=ro(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ro(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ro(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mo(n.kernelRegularizer),this.recurrentRegularizer=mo(n.recurrentRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.kernelConstraint=fi(n.kernelConstraint),this.recurrentConstraint=fi(n.recurrentConstraint),this.biasConstraint=fi(n.biasConstraint),this.dropout=WA([1,Km([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=WA([1,Km([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){n=Wr(n);let o=n[n.length-1];this.kernel=this.addWeight("kernel",[o,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(n,o){return je(()=>{if(n=n,n.length!==2)throw new Ie(`GRUCell expects 2 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training==null?!1:o.training,s=n[1];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=e1({ones:()=>Ds(n),rate:this.dropout,training:i,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=e1({ones:()=>Ds(s),rate:this.recurrentDropout,training:i,count:3,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,u,c,f;0<this.dropout&&this.dropout<1&&(n=we(n,a[0]));let d=Zp(n,this.kernel.read());this.useBias&&(d=ju(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,l[0]));let p=this.recurrentKernel.read(),[h,m]=ps(p,[2*this.units,this.units],p.rank-1),g=Zp(s,h),[y,b,x]=ps(d,3,d.rank-1),[v,w]=ps(g,2,g.rank-1);u=this.recurrentActivation.apply(Ke(y,v)),c=this.recurrentActivation.apply(Ke(b,w));let _=Zp(we(c,s),m);f=this.activation.apply(Ke(x,_));let C=Ke(we(u,s),we(Ke(1,Zr(u)),f));return[C,C]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Zm(this.activation),recurrentActivation:Zm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Co(this.kernelInitializer),recurrentInitializer:Co(this.recurrentInitializer),biasInitializer:Co(this.biasInitializer),kernelRegularizer:Ln(this.kernelRegularizer),recurrentRegularizer:Ln(this.recurrentRegularizer),biasRegularizer:Ln(this.biasRegularizer),activityRegularizer:Ln(this.activityRegularizer),kernelConstraint:ci(this.kernelConstraint),recurrentConstraint:ci(this.recurrentConstraint),biasConstraint:ci(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},n),o)}}return t.className="GRUCell",t})();tt.registerClass(VJ);var NSe=(()=>{class t extends tb{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new VJ(n),super(n)}call(n,o){return je(()=>{this.cell.dropoutMask!=null&&(Tr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Tr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="GRU",t})();tt.registerClass(NSe);var CR=(()=>{class t extends Jv{constructor(n){super(n),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=n.units,Pi(this.units,"units"),this.activation=Qm(n.activation===void 0?this.DEFAULT_ACTIVATION:n.activation),this.recurrentActivation=Qm(n.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),this.useBias=n.useBias==null?!0:n.useBias,this.kernelInitializer=ro(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ro(n.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ro(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=n.unitForgetBias,this.kernelRegularizer=mo(n.kernelRegularizer),this.recurrentRegularizer=mo(n.recurrentRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.kernelConstraint=fi(n.kernelConstraint),this.recurrentConstraint=fi(n.recurrentConstraint),this.biasConstraint=fi(n.biasConstraint),this.dropout=WA([1,Km([0,n.dropout==null?0:n.dropout])]),this.recurrentDropout=WA([1,Km([0,n.recurrentDropout==null?0:n.recurrentDropout])]),this.dropoutFunc=n.dropoutFunc,this.implementation=n.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(n){var o;n=Wr(n);let i=n[n.length-1];this.kernel=this.addWeight("kernel",[i,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){let a=this.biasInitializer,l=this.units;s=new(o=class extends Lu{apply(c,f){let d=a.apply([l]),p=new pJ().apply([l]),h=a.apply([l*2]);return H2e(H2e(d,p),h)}},o.className="CustomInit",o)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(n,o){return je(()=>{let i=o.training==null?!1:o.training;if(n=n,n.length!==3)throw new Ie(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let s=n[1],a=n[2];n=n[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=e1({ones:()=>Ds(n),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=e1({ones:()=>Ds(s),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));let l=this.dropoutMask,u=this.recurrentDropoutMask,c,f,d,p;0<this.dropout&&this.dropout<1&&(n=we(n,l[0]));let h=Zp(n,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=we(s,u[0])),h=Ke(h,Zp(s,this.recurrentKernel.read())),this.useBias&&(h=ju(h,this.bias.read()));let[m,g,y,b]=ps(h,4,h.rank-1);c=this.recurrentActivation.apply(m),f=this.recurrentActivation.apply(g),d=Ke(we(f,a),we(c,this.activation.apply(y))),p=this.recurrentActivation.apply(b);let x=we(p,this.activation.apply(d));return[x,x,d]})}getConfig(){let n=super.getConfig(),o={units:this.units,activation:Zm(this.activation),recurrentActivation:Zm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Co(this.kernelInitializer),recurrentInitializer:Co(this.recurrentInitializer),biasInitializer:Co(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ln(this.kernelRegularizer),recurrentRegularizer:Ln(this.recurrentRegularizer),biasRegularizer:Ln(this.biasRegularizer),activityRegularizer:Ln(this.activityRegularizer),kernelConstraint:ci(this.kernelConstraint),recurrentConstraint:ci(this.recurrentConstraint),biasConstraint:ci(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},n),o)}}return t.className="LSTMCell",t})();tt.registerClass(CR);var OSe=(()=>{class t extends tb{constructor(n){n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new CR(n),super(n)}call(n,o){return je(()=>{this.cell.dropoutMask!=null&&(Tr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Tr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}static fromConfig(n,o){return o.implmentation===0&&(o.implementation=1),new n(o)}}return t.className="LSTM",t})();tt.registerClass(OSe);var GJ=(()=>{class t extends Jv{constructor(n){super(n),this.cells=n.cells}get stateSize(){let n=[];for(let o of this.cells.slice().reverse())Array.isArray(o.stateSize)?n.push(...o.stateSize):n.push(o.stateSize);return n}call(n,o){return je(()=>{n=n;let i=n.slice(1),s=[];for(let u of this.cells.slice().reverse())Array.isArray(u.stateSize)?s.push(i.splice(0,u.stateSize.length)):s.push(i.splice(0,1));s.reverse();let a=[],l;for(let u=0;u<this.cells.length;++u){let c=this.cells[u];i=s[u],u===0?l=[n[0]].concat(i):l=[l[0]].concat(i),l=c.call(l,o),a.push(l.slice(1))}i=[];for(let u of a.slice().reverse())i.push(...u);return[l[0]].concat(i)})}build(n){hJ(n)&&(n=n[0]),n=n;let o;this.cells.forEach((i,s)=>{Xm(`RNNCell_${s}`,()=>{i.build(n),Array.isArray(i.stateSize)?o=i.stateSize[0]:o=i.stateSize,n=[n[0],o]})}),this.built=!0}getConfig(){let n=super.getConfig(),o=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(o)};return Object.assign(Object.assign({},n),s)}static fromConfig(n,o,i={}){let s=[];for(let a of o.cells)s.push(Ff(a,i));return new n({cells:s})}get trainableWeights(){if(!this.trainable)return[];let n=[];for(let o of this.cells)n.push(...o.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let o of this.cells)n.push(...o.nonTrainableWeights);if(!this.trainable){let o=[];for(let i of this.cells)o.push(...i.trainableWeights);return o.concat(n)}return n}getWeights(){let n=[];for(let o of this.cells)n.push(...o.weights);return x6(n)}setWeights(n){let o=[];for(let i of this.cells){let s=i.weights.length,a=n.splice(s);for(let l=0;l<i.weights.length;++l)o.push([i.weights[l],a[l]])}bR(o)}}return t.className="StackedRNNCells",t})();tt.registerClass(GJ);function e1(t){let{ones:r,rate:n,training:o=!1,count:i=1,dropoutFunc:s}=t,a=()=>s!=null?s(r(),n):dJ(r(),n),l=()=>P2(a,r,o);return!i||i<=1?ks(l().clone()):Array(i).fill(void 0).map(l).map(c=>ks(c.clone()))}var HSr=function(t,r){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(t);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]]);return n};var YSr=(()=>{class t extends tb{constructor(n){if(n.unroll)throw new vr("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(n.cell))throw new vr("It is not possible at the moment to stack convolutional cells.");super(n),this.inputSpec=[new ho({ndim:5})]}call(n,o){return je(()=>{if(this.cell.dropoutMask!=null&&(Tr(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Tr(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),o&&o.constants)throw new Ie("ConvRNN2D cell does not support constants");let i=o==null?null:o.mask,s=o==null?null:o.training,a=o==null?null:o.initialState;return super.call(n,{mask:i,training:s,initialState:a})})}computeOutputShape(n){let o=this.computeSingleOutputShape(n);return this.returnSequences||(o=[o[0],...o.slice(2)]),this.returnState&&(o=[o,...Array(2).fill([n[0],...o.slice(-3)])]),o}getInitialState(n){return je(()=>{let{stateSize:o}=this.cell,i=n.shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)],l=xo(a);return Array.isArray(o)?Array(o.length).fill(l):[l]})}resetStates(n,o=!1){je(()=>{if(!this.stateful)throw new jd("Cannot call resetStates() on an RNN Layer that is not stateful.");let i=this.inputSpec[0].shape,s=this.computeSingleOutputShape(i),a=[s[0],...s.slice(2)];if(i[0]==null)throw new Ie("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xo(a)):this.states_=[xo(a)];else if(n==null)Tr(this.states_),this.keptStates!=null&&(Tr(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>xo(a)):this.states_[0]=xo(a);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new Ie(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);o?this.keptStates.push(this.states_.slice()):Tr(this.states_);for(let u=0;u<this.states_.length;++u){let c=n[u],f=a;if(!H.arraysEqual(c.shape,f))throw new Ie(`State ${u} is incompatible with layer ${this.name}: expected shape=${f}, received shape=${c.shape}`);this.states_[u]=c}}this.states_=this.states_.map(u=>ks(u.clone()))})}computeSingleOutputShape(n){let{dataFormat:o,filters:i,kernelSize:s,padding:a,strides:l,dilationRate:u}=this.cell,c=o==="channelsFirst",f=n[c?3:2],d=n[c?4:3],p=Ec(f,s[0],a,l[0],u[0]),h=Ec(d,s[1],a,l[1],u[1]);return[...n.slice(0,2),...c?[i,p,h]:[p,h,i]]}}return t.className="ConvRNN2D",t})(),WJ=(()=>{class t extends CR{constructor(n){let{filters:o,kernelSize:i,strides:s,padding:a,dataFormat:l,dilationRate:u}=n;super(Object.assign(Object.assign({},n),{units:o})),this.filters=o,Pi(this.filters,"filters"),this.kernelSize=B2(i,2,"kernelSize"),this.kernelSize.forEach(c=>Pi(c,"kernelSize")),this.strides=B2(s||1,2,"strides"),this.strides.forEach(c=>Pi(c,"strides")),this.padding=a||"valid",Ru(this.padding),this.dataFormat=l||"channelsLast",Ko(this.dataFormat),this.dilationRate=B2(u||1,2,"dilationRate"),this.dilationRate.forEach(c=>Pi(c,"dilationRate"))}build(n){var o;n=Wr(n);let i=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[i]==null)throw new Ie(`The channel dimension of the input should be defined. Found ${n[i]}`);let s=n[i],a=4,l=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",l,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let u=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let f=this.biasInitializer,d=this.filters;c=new(o=class extends Lu{apply(h,m){let g=f.apply([d]),y=Ui([d]),b=f.apply([d*2]);return hR([g,y,b])}},o.className="CustomInit",o)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(n,o){return je(()=>{if(n.length!==3)throw new Ie(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${n.length}.`);let i=o.training||!1,s=n[0],a=n[1],l=n[2],u=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=e1({ones:()=>Ds(s),rate:this.dropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,f=(X,pe,$)=>!pe||!pe[$]?X:we(pe[$],X),d=f(s,c,0),p=f(s,c,1),h=f(s,c,2),m=f(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=e1({ones:()=>Ds(a),rate:this.recurrentDropout,training:i,count:u,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,y=f(a,g,0),b=f(a,g,1),x=f(a,g,2),v=f(a,g,3),w=3,[_,C,S,E]=ps(this.kernel.read(),u,w),[A,N,k,R]=this.useBias?ps(this.bias.read(),u):[null,null,null,null];d=this.inputConv(d,_,A,this.padding),p=this.inputConv(p,C,N,this.padding),h=this.inputConv(h,S,k,this.padding),m=this.inputConv(m,E,R,this.padding);let[I,L,j,M]=ps(this.recurrentKernel.read(),u,w);y=this.recurrentConv(y,I),b=this.recurrentConv(b,L),x=this.recurrentConv(x,j),v=this.recurrentConv(v,M);let V=this.recurrentActivation.apply(Ke(d,y)),G=this.recurrentActivation.apply(Ke(p,b)),U=Ke(we(G,l),we(V,this.activation.apply(Ke(h,x)))),Y=we(this.recurrentActivation.apply(Ke(m,v)),this.activation.apply(U));return[Y,Y,U]})}getConfig(){let n=super.getConfig(),{units:o}=n,i=HSr(n,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},i),s)}inputConv(n,o,i,s){let a=qu(n,o,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return i?ju(a,i,this.dataFormat):a}recurrentConv(n,o){return qu(n,o,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();tt.registerClass(WJ);var FSe=(()=>{class t extends YSr{constructor(n){let o=new WJ(n);super(Object.assign(Object.assign({},n),{cell:o}))}static fromConfig(n,o){return new n(o)}}return t.className="ConvLSTM2D",t})();tt.registerClass(FSe);re();var qJ=(()=>{class t extends yr{constructor(n){super(n),this.rate=Math.max(Math.min(n.rate,1),0),this.noiseShape=n.noiseShape,this.seed=n.seed,this.supportsMasking=!0}getNoiseShape(n){if(this.noiseShape==null)return this.noiseShape;let o=n.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(this.noiseShape[s]==null?o[s]:this.noiseShape[s]);return i}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n);if(0<this.rate&&this.rate<1){let s=o.training==null?!1:o.training,a=this.getNoiseShape(i);return P2(()=>dJ(i,this.rate,a,this.seed),()=>i,s)}return n})}getConfig(){let n={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},o=super.getConfig();return Object.assign(n,o),n}dispose(){return super.dispose()}}return t.className="Dropout",t})();tt.registerClass(qJ);var RSe=(()=>{class t extends qJ{constructor(n){super(n),this.inputSpec=[{ndim:3}]}getNoiseShape(n){let o=n.shape;return[o[0],1,o[2]]}}return t.className="SpatialDropout1D",t})();tt.registerClass(RSe);var MSe=(()=>{class t extends yr{constructor(n){if(super(n),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",n.batchInputShape==null&&n.inputShape==null&&n.inputDim!=null){let o=null;n.batchSize!=null&&(o=n.batchSize),this.batchInputShape=[o,n.inputDim]}this.units=n.units,Pi(this.units,"units"),this.activation=Qm(n.activation),n.useBias!=null&&(this.useBias=n.useBias),this.kernelInitializer=ro(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ro(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=fi(n.kernelConstraint),this.biasConstraint=fi(n.biasConstraint),this.kernelRegularizer=mo(n.kernelRegularizer),this.biasRegularizer=mo(n.biasRegularizer),this.activityRegularizer=mo(n.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(n){n=Wr(n);let o=n[n.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[o,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:o}}],this.built=!0}computeOutputShape(n){n=Wr(n);let o=n.slice();return o[o.length-1]=this.units,o}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n),s=oJ(this.activation.getClassName()),a;return s!=null?a=Zp(i,this.kernel.read(),s,this.bias?this.bias.read():null):(a=Zp(i,this.kernel.read()),this.bias!=null&&(a=ju(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){let n={units:this.units,activation:Zm(this.activation),useBias:this.useBias,kernelInitializer:Co(this.kernelInitializer),biasInitializer:Co(this.biasInitializer),kernelRegularizer:Ln(this.kernelRegularizer),biasRegularizer:Ln(this.biasRegularizer),activityRegularizer:Ln(this.activityRegularizer),kernelConstraint:ci(this.kernelConstraint),biasConstraint:ci(this.biasConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dense",t})();tt.registerClass(MSe);var PSe=(()=>{class t extends yr{constructor(n){n=n||{},super(n),this.inputSpec=[{minNDim:3}],this.dataFormat=n.dataFormat}computeOutputShape(n){n=Wr(n);for(let o of n.slice(1))if(o==null)throw new Ie(`The shape of the input to "Flatten" is not fully defined (got ${n.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[n[0],Kp(n,1)]}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n);if(this.dataFormat==="channelsFirst"&&i.rank>1){let s=[0];for(let a=2;a<i.rank;++a)s.push(a);s.push(1),i=Gr(i,s)}return ugt(i)})}getConfig(){let n={};this.dataFormat!=null&&(n.dataFormat=this.dataFormat);let o=super.getConfig();return Object.assign(n,o),n}}return t.className="Flatten",t})();tt.registerClass(PSe);var jSe=(()=>{class t extends yr{constructor(n){super(n),this.supportsMasking=!0,this.activation=Qm(n.activation)}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n);return this.activation.apply(i)})}getConfig(){let n={activation:Zm(this.activation)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Activation",t})();tt.registerClass(jSe);var LSe=(()=>{class t extends yr{constructor(n){super(n),this.n=n.n,this.inputSpec=[{ndim:2}]}computeOutputShape(n){return[n[0],this.n,n[1]]}call(n,o){return je(()=>(n=lr(n),agt(n,this.n)))}getConfig(){let n={n:this.n},o=super.getConfig();return Object.assign(n,o),n}}return t.className="RepeatVector",t})();tt.registerClass(LSe);var BSe=(()=>{class t extends yr{constructor(n){super(n),this.targetShape=n.targetShape;for(let o=0;o<this.targetShape.length;++o)this.isUnknown(this.targetShape[o])&&(this.targetShape[o]=null)}isUnknown(n){return n<0||n==null}fixUnknownDimension(n,o){let i="Total size of new array must be unchanged.",s=o.slice(),a=1,l=null;for(let c=0;c<s.length;++c){let f=s[c];if(this.isUnknown(f))if(l===null)l=c;else throw new Ie("Can only specifiy one unknown dimension.");else a*=f}let u=Kp(n);if(l!==null){if(a===0||u%a!==0)throw new Ie(i);s[l]=u/a}else if(u!==a)throw new Ie(i);return s}computeOutputShape(n){let o=!1;for(let i=0;i<n.length;++i)if(this.isUnknown(n[i])){o=!0;break}return o?n.slice(0,1).concat(this.targetShape):n.slice(0,1).concat(this.fixUnknownDimension(n.slice(1),this.targetShape))}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n),s=i.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Se(i,a)})}getConfig(){let n={targetShape:this.targetShape},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Reshape",t})();tt.registerClass(BSe);var $Se=(()=>{class t extends yr{constructor(n){if(super(n),n.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(n.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${n.dims} instead.`);let o=Mu(1,n.dims.length+1);if(!H.arraysEqual(n.dims.slice().sort(),o))throw new Error("Invalid permutation `dims`: "+JSON.stringify(n.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=n.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new ho({ndim:this.dims.length+1})]}computeOutputShape(n){n=Wr(n);let o=n.slice();return this.dims.forEach((i,s)=>{o[s+1]=n[i]}),o}call(n,o){return Gr(lr(n),this.dimsIncludingBatch)}getConfig(){let n={dims:this.dims},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Permute",t})();tt.registerClass($Se);var zSe=(()=>{class t extends yr{constructor(n){super(n??{}),this.supportsMasking=!0,n!=null?this.maskValue=n.maskValue==null?0:n.maskValue:this.maskValue=0}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={maskValue:this.maskValue};return Object.assign(o,n),o}computeMask(n,o){let i=lr(n);return TC(Th(i,this.maskValue),-1)}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n),l=TC(Th(i,this.maskValue),-1,!0);return we(i,rt(l,i.dtype))})}}return t.className="Masking",t})();tt.registerClass(zSe);re();var USe=(()=>{class t extends yr{constructor(n){if(super(n),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",n.batchInputShape==null&&n.inputShape==null){let o=null;n.batchSize!=null&&(o=n.batchSize),n.inputLength==null?this.batchInputShape=[o,null]:this.batchInputShape=[o].concat(Rn(n.inputLength))}this.inputDim=n.inputDim,Pi(this.inputDim,"inputDim"),this.outputDim=n.outputDim,Pi(this.outputDim,"outputDim"),this.embeddingsInitializer=ro(n.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=mo(n.embeddingsRegularizer),this.activityRegularizer=mo(n.activityRegularizer),this.embeddingsConstraint=fi(n.embeddingsConstraint),this.maskZero=n.maskZero,this.supportsMasking=n.maskZero,this.inputLength=n.inputLength}build(n){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(n){}computeMask(n,o){return je(()=>this.maskZero?(n=lr(n),Th(n,sr(n))):null)}computeOutputShape(n){if(n=Wr(n),this.inputLength==null)return[...n,this.outputDim];let o=Rn(this.inputLength);if(o.length!==n.length-1)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);{let i=0;for(let s=0;s<o.length;++s){let a=o[s],l=n[s+1];if(a!=null&&l!=null&&a!==l)throw new Ie(`"inputLength" is ${this.inputLength}, but received input shape has shape ${n}`);a==null&&(o[i]=l),i++}}return[n[0],...o,this.outputDim]}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n);i.dtype!=="int32"&&(i=Vl(i,"int32"));let s=fJ(this.embeddings.read(),Se(i,[i.size]));return Se(s,Wr(this.computeOutputShape(i.shape)))})}getConfig(){let n={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Co(this.embeddingsInitializer),embeddingsRegularizer:Ln(this.embeddingsRegularizer),activityRegularizer:Ln(this.activityRegularizer),embeddingsConstraint:ci(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Embedding",t})();tt.registerClass(USe);re();re();var t1=class extends yr{constructor(r){super(r||{}),this.supportsMasking=!0}mergeFunction(r){throw new vr}computeElementwiseOpOutputShape(r,n){if(r==null||n==null)return null;if(r.length<n.length)return this.computeElementwiseOpOutputShape(n,r);if(n.length===0)return r;let o=r.slice(0,r.length-n.length);for(let i=0;i<n.length;++i){let s=r[r.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)o.push(null);else if(s===1)o.push(a);else if(a===1)o.push(s);else{if(s!==a)throw new Ie("Operands could not be broadcast together with shapes "+JSON.stringify(r)+" "+JSON.stringify(n));o.push(s)}}return o}build(r){if(Array.isArray(r)&&!Array.isArray(r[0])&&(r=[Wr(r)]),r=r,r.length<2)throw new Ie(`A merge layer should be called on an Array of at least 2 inputs. Got ${r.length} input(s).`);let n=[];for(let s of r)s!=null&&s[0]!==null&&n.push(s[0]);if(n=Xp(n),n.length>1)throw new Ie(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(r)}.`);let o=r[0]==null?null:r[0].slice(1);for(let s=1;s<r.length;++s){let a=r[s]==null?null:r[s].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}let i=r.map(s=>s.length);r.indexOf(null)===-1&&Xp(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return je(()=>{if(r=r,this.reshapeRequired){let o=[],i=r.map(s=>s.rank);if(i.indexOf(null)===-1){let s=Km(i);for(let a of r){let l=a.rank;for(let u=0;u<s-l;++u)a=Xv(a,1);o.push(a)}return this.mergeFunction(o)}else{let s=!1;for(let u of r){let c=u.rank;if(c==null){let f=u.shape,d=f[0],p=f.slice(1).concat([d]),h=Se(u,[d].concat(Kp(f.slice(1))));h=Gr(h,[1,0]),h=Se(h,p),o.push(h),s=!0}else if(c>1){let f=Mu(1,c).concat([0]);o.push(Gr(u,f)),s=!0}else o.push(u)}let a=this.mergeFunction(o),l=a.rank;if(s){if(l==null){let u=a.shape,c=u.length,f=u[c-1],d=[f].concat(u.slice(0,u.length-1));a=Se(Gr(Se(a,[-1,f]),[1,0]),d)}else if(l>1){let u=[l-1].concat(Mu(0,l-1));a=Gr(a,u)}}return a}}else return this.mergeFunction(r)})}computeOutputShape(r){r=r;let n;r[0]==null?n=null:n=r[0].slice(1);for(let i=1;i<r.length;++i){let s=r[i]==null?null:r[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let o=[];for(let i of r)i!=null&&i[0]!==null&&o.push(i[0]);return o=Xp(o),o.length===1?n=o.concat(n):n=[null].concat(n),n}computeMask(r,n){return je(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ie("`mask` should be an Array");if(!Array.isArray(r))throw new Ie("`inputs` should be an Array");if(n.length!==r.length)throw new Ie(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${r.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Ei(i,0));let o=n[0];for(let i=1;i<n.length-1;++i)o=za(o,n[i]);return o})}},VSe=(()=>{class t extends t1{constructor(n){super(n)}mergeFunction(n){return je(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return o})}}return t.className="Add",t})();tt.registerClass(VSe);var GSe=(()=>{class t extends t1{constructor(n){super(n)}mergeFunction(n){return je(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=we(o,n[i]);return o})}}return t.className="Multiply",t})();tt.registerClass(GSe);var WSe=(()=>{class t extends t1{constructor(n){super(n)}mergeFunction(n){return je(()=>{let o=n[0].clone();for(let i=1;i<n.length;++i)o=Ke(o,n[i]);return we(1/n.length,o)})}}return t.className="Average",t})();tt.registerClass(WSe);var qSe=(()=>{class t extends t1{constructor(n){super(n)}mergeFunction(n){return je(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=Yu(o,n[i]);return o})}}return t.className="Maximum",t})();tt.registerClass(qSe);var HSe=(()=>{class t extends t1{constructor(n){super(n)}mergeFunction(n){return je(()=>{let o=n[0];for(let i=1;i<n.length;++i)o=Qf(o,n[i]);return o})}}return t.className="Minimum",t})();tt.registerClass(HSe);var YSe=(()=>{class t extends t1{constructor(n){super(n),this.DEFAULT_AXIS=-1,n==null&&(n={}),this.axis=n.axis==null?this.DEFAULT_AXIS:n.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){if(!(Array.isArray(n)&&Array.isArray(n[0]))||n.length===1)throw new Ie("A `Concatenate` layer should be called on a list of at least 2 inputs");n=n;let o=!0;for(let s of n)if(s!=null){o=!1;break}if(o)return;let i=[];for(let s=0;s<n.length;++s){let a=n[s].slice();a.splice(this.axis,1);let l=!1;for(let u of i)if(H.arraysEqual(u,a)){l=!0;break}l||i.push(a)}if(i.length>1)throw new Ie("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(n))}mergeFunction(n){return je(()=>hR(n,this.axis))}computeOutputShape(n){if(!(Array.isArray(n)&&Array.isArray(n[0])))throw new Ie("A `Concatenate` layer should be called on a list of inputs.");let o=n,i=o[0].slice(),s=this.axis<0?i.length+this.axis:this.axis;for(let a of o.slice(1)){if(i[s]==null||a[s]==null){i[s]=null;break}i[s]+=a[s]}return i}computeMask(n,o){if(o==null)return null;if(!Array.isArray(o))throw new Ie("`mask` should be an array for Concatenate");if(!Array.isArray(n))throw new Ie("`inputs` should be an array for Concatenate");if(o.length!==n.length)throw new Ie(`Mismatch in the length of mask (${o.length}) and the legnth of inputs (${n.length})`);return je(()=>{let i=!0;if(o.forEach(l=>{if(l!=null){i=!1;return}}),i)return null;let s=[];for(let l=0;l<n.length;++l)o[l]==null?s.push(rt(Ds(n[l]),"bool")):o[l].rank<n[l].rank?s.push(Ei(o[l],-1)):s.push(o[l]);let a=Fn(s,this.axis);return dI(a,-1,!1)})}getConfig(){let n={axis:this.axis},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Concatenate",t})();tt.registerClass(YSe);function k6(t,r){for(;t<0;)t+=r;return t}function XSr(t,r,n){if(t.shape.length>3||r.shape.length>3)throw new vr("batchDot is not implemented for tensors of 4D or higher rank yet");if(H.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),H.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${r.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||r.dtype==="complex64")throw new vr("batchDot is not implemented for complex64-type Tensors yet.");let o=t.shape.length,i=r.shape.length;n==null&&(n=[o-1,i-2]);let s=n;return je(()=>{let a;if(o>i){a=o-i;let u=[];for(let c=0;c<a;++c)u.push(1);r=Se(r,r.shape.concat(u))}else if(i>o){a=i-o;let u=[];for(let c=0;c<a;++c)u.push(1);t=Se(t,t.shape.concat(u))}else a=0;let l;if(t.shape.length===2&&r.shape.length===2)s[0]===s[1]?l=It(we(t,r),s[0]):l=It(we(Gr(t,[1,0]),r),s[1]);else{let u=s[0]!==t.shape.length-1,c=s[1]===r.shape.length-1;l=Vr(t,r,u,c)}if(a>0){let u;o>i?u=o+i-3:u=o-1;let c=[];for(let f=u;f<u+a;++f)c.push(f);l=Lc(l,c)}return l.shape.length===1&&(l=Ei(l,1)),l})}var XSe=(()=>{class t extends t1{constructor(n){super(n),this.axes=n.axes,this.normalize=n.normalize==null?!1:n.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(n){H.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0],i=n[1];if(o.length>3||i.length>3)throw new vr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);if(o[s[0]]!==i[s[1]])throw new Ie(`Dimension incompatibility: ${o[s[0]]} !== ${i[s[1]]}`)}mergeFunction(n){if(n.length!==2)throw new Ie(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${n.length} input(s).`);let o=n[0],i=n[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,l)=>k6(a,n[l].shape.length)):s=[k6(this.axes,o.shape.length),k6(this.axes,i.shape.length)],this.normalize&&(o=v6(o,s[0]),i=v6(i,s[1])),XSr(o,i,s)}interpretAxes(n,o){let i;return Array.isArray(this.axes)?i=this.axes:i=[k6(this.axes,n.length),k6(this.axes,o.length)],i}computeOutputShape(n){H.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let o=n[0].slice(),i=n[1].slice();if(o.length>3||i.length>3)throw new vr("Dot layer does not support tensors of 4D or higher rank yet.");let s=this.interpretAxes(o,i);o.splice(s[0],1),i.splice(s[1],1),i.splice(0,1);let a=o.concat(i);return a.length===1&&a.push(1),a}computeMask(n,o){return null}getConfig(){let n={axes:this.axes,normalize:this.normalize},o=super.getConfig();return Object.assign(n,o),n}}return t.className="Dot",t})();tt.registerClass(XSe);re();var KSe=(()=>{class t extends yr{constructor(n){super(n),this.supportsMasking=!0,this.stddev=n.stddev}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={stddev:this.stddev};return Object.assign(o,n),o}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n);return P2(()=>Ke(mR(i.shape,0,this.stddev),i),()=>i,o.training||!1)})}}return t.className="GaussianNoise",t})();tt.registerClass(KSe);var ZSe=(()=>{class t extends yr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return je(()=>{this.invokeCallHook(n,o);let i=lr(n);return this.rate>0&&this.rate<1?P2(()=>{let a=Math.sqrt(this.rate/(1-this.rate));return we(i,mR(i.shape,1,a))},()=>i,o.training||!1):i})}}return t.className="GaussianDropout",t})();tt.registerClass(ZSe);var QSe=(()=>{class t extends yr{constructor(n){super(n),this.supportsMasking=!0,this.rate=n.rate,this.noiseShape=n.noiseShape}_getNoiseShape(n){return this.noiseShape||lr(n).shape}computeOutputShape(n){return n}getConfig(){let n=super.getConfig(),o={rate:this.rate};return Object.assign(o,n),o}call(n,o){return je(()=>{if(this.rate<1&&this.rate>0){let i=this._getNoiseShape(n);return P2(()=>{let a=lr(n),c=-1.6732632423543772*1.0507009873554805,f=tu(jc(i),this.rate);f=Vl(f,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=Ke(we(a,f),we(Ke(f,-1),c));return Ke(we(h,d),p)},()=>lr(n),o.training||!1)}return n})}}return t.className="AlphaDropout",t})();tt.registerClass(QSe);re();re();function I6(t,r,n,o,i,s=.001){let a;if(t.rank===2)a=v8(t,r,n,o,i,s);else if(t.rank===3)a=w8(t,r,n,o,i,s);else if(t.rank===4)a=_8(t,r,n,o,i,s);else throw new vr(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function KSr(t,r,n,o,i=.001){return je(()=>{let s=RC(t,o),a=s.mean,l=s.variance;return[I6(t,a,l,n,r,i),a,l]})}function ZSr(t,r,n,o,i=.001){return je(()=>{let s=RC(t,o),a=s.mean,l=s.variance,u=[];for(let m of Mu(0,t.rank))o.indexOf(m)!==-1?u.push(1):u.push(t.shape[m]);let c=Se(a,u),f=Se(l,u),d=r==null?null:Se(r,u),p=n==null?null:Se(n,u);return[I6(t,c,f,p,d,i),a,l]})}function QSr(t,r,n,o,i=.001){return H.arraysEqual(o.slice().sort(),Mu(0,t.rank-1))?KSr(t,r,n,o,i):ZSr(t,r,n,o,i)}var JSe=(()=>{class t extends yr{constructor(n){n==null&&(n={}),super(n),this.supportsMasking=!0,this.axis=n.axis==null?-1:n.axis,this.momentum=n.momentum==null?.99:n.momentum,this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=ro(n.betaInitializer||"zeros"),this.gammaInitializer=ro(n.gammaInitializer||"ones"),this.movingMeanInitializer=ro(n.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ro(n.movingVarianceInitializer||"ones"),this.betaConstraint=fi(n.betaConstraint),this.gammaConstraint=fi(n.gammaConstraint),this.betaRegularizer=mo(n.betaRegularizer),this.gammaRegularizer=mo(n.gammaRegularizer)}build(n){n=Wr(n);let o=this.axis>=0?this.axis:this.axis+n.length,i=n[o];if(i==null)throw new Ie(`Axis ${o} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(n)}.`);this.inputSpec=[new ho({ndim:n.length,axes:{[o]:i}})];let s=[i];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(n,o){return je(()=>{let i=o.training==null?!1:o.training,s=lr(n),a=s.shape,l=a.length,u=Mu(0,l),c=this.axis>=0?this.axis:this.axis+l;u.splice(c,1);let f=Hp(1,l);f[c]=a[c];let d=u.slice();d.sort();let p=!H.arraysEqual(d,Mu(0,l).slice(0,l-1)),h=()=>{if(p){let v=Se(this.movingMean.read(),f),w=Se(this.movingVariance.read(),f),_=this.center?Se(this.beta.read(),f):null,C=this.scale?Se(this.gamma.read(),f):null;return I6(s,v,w,_,C,this.epsilon)}else return I6(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!i)return h();let[m,g,y]=QSr(s,this.gamma.read(),this.beta.read(),u,this.epsilon),b=(v,w,_)=>{je(()=>{let C=1-_,S=v.read(),E=we(wt(S,w),C);v.write(wt(S,E))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,y,this.momentum)})(),m})}getConfig(){let n={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Co(this.betaInitializer),gammaInitializer:Co(this.gammaInitializer),movingMeanInitializer:Co(this.movingMeanInitializer),movingVarianceInitializer:Co(this.movingVarianceInitializer),betaRegularizer:Ln(this.betaRegularizer),gammaRegularizer:Ln(this.gammaRegularizer),betaConstraint:ci(this.betaConstraint),gammaConstraint:ci(this.gammaConstraint)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BatchNormalization",t})();tt.registerClass(JSe);var eCe=(()=>{class t extends yr{constructor(n){if(n==null&&(n={}),super(n),this.axis=n.axis==null?-1:n.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let o of this.axis)if(!Number.isInteger(o))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=n.epsilon==null?.001:n.epsilon,this.center=n.center==null?!0:n.center,this.scale=n.scale==null?!0:n.scale,this.betaInitializer=ro(n.betaInitializer||"zeros"),this.gammaInitializer=ro(n.gammaInitializer||"ones"),this.betaRegularizer=mo(n.betaRegularizer),this.gammaRegularizer=mo(n.gammaRegularizer),this.supportsMasking=!0}build(n){n=Wr(n);let o=n.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=o);for(let a of this.axis)if(a<0||a>=o)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==Xp(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let i=this.axis.map(a=>n[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(n,o){let i=lr(n),s=i.shape,a=s.length;return je(()=>{let{mean:u,variance:c}=RC(i,this.axis,!0),f=Hp(1,a);for(let y of this.axis)f[y]=s[y];let d=y=>y!=null&&y.shape.length!==a?Se(y,f):y,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,m=[],g=[];for(let y=0;y<a;++y)this.axis.indexOf(y)!==-1?(m.push(s[y]),g.push(1)):(m.push(1),g.push(s[y]));return u=xa(u,m),c=xa(c,m),p!=null&&(p=xa(p,g)),h!=null&&(h=xa(h,g)),I6(i,u,c,h,p,this.epsilon)})}getConfig(){let n={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Co(this.betaInitializer),gammaInitializer:Co(this.gammaInitializer),betaRegularizer:Ln(this.betaRegularizer),gammaRegularizer:Ln(this.gammaRegularizer)},o=super.getConfig();return Object.assign(n,o),n}}return t.className="LayerNormalization",t})();tt.registerClass(eCe);re();re();function JSr(t,r,n){return je(()=>{if(t.rank!==4)throw new Ie(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(r==null&&(r=[[1,1],[1,1]]),r.length!==2||r[0].length!==2||r[1].length!==2)throw new Ie("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Pu()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ie(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let o;return n==="channelsFirst"?o=[[0,0],[0,0],r[0],r[1]]:o=[[0,0],r[0],r[1],[0,0]],ru(t,o)})}var tCe=(()=>{class t extends yr{constructor(n){if(n==null&&(n={}),super(n),this.dataFormat=n.dataFormat==null?Pu():n.dataFormat,n.padding==null)this.padding=[[1,1],[1,1]];else if(typeof n.padding=="number")this.padding=[[n.padding,n.padding],[n.padding,n.padding]];else{if(n.padding=n.padding,n.padding.length!==2)throw new Ie(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${n.padding.length} array.`);let o,i;if(typeof n.padding[0]=="number")o=[n.padding[0],n.padding[0]],i=[n.padding[1],n.padding[1]];else{if(n.padding=n.padding,n.padding[0].length!==2)throw new Ie(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${n.padding[0].length} array.`);if(o=n.padding[0],n.padding[1].length!==2)throw new Ie(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${n.padding[1].length} array.`);i=n.padding[1]}this.padding=[o,i]}this.inputSpec=[new ho({ndim:4})]}computeOutputShape(n){n=Wr(n);let o,i;return this.dataFormat==="channelsFirst"?(n[2]!=null&&n[2]>=0?o=n[2]+this.padding[0][0]+this.padding[0][1]:o=null,n[3]!=null&&n[3]>=0?i=n[3]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],n[1],o,i]):(n[1]!=null&&n[1]>=0?o=n[1]+this.padding[0][0]+this.padding[0][1]:o=null,n[2]!=null&&n[2]>=0?i=n[2]+this.padding[1][0]+this.padding[1][1]:i=null,[n[0],o,i,n[3]])}call(n,o){return je(()=>JSr(lr(n),this.padding,this.dataFormat))}getConfig(){let n={padding:this.padding,dataFormat:this.dataFormat},o=super.getConfig();return Object.assign(n,o),n}}return t.className="ZeroPadding2D",t})();tt.registerClass(tCe);re();re();function QJ(t,r,n,o,i,s){return je(()=>{Ko(i),V2e(s),Ru(o),n==null&&(n=[1,1]),o==null&&(o="valid"),i==null&&(i=Pu()),s==null&&(s="max"),t=A6(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=tw(t,r,n,l):a=G1(t,r,n,l),i==="channelsFirst"&&(a=Gr(a,[0,3,1,2])),a})}function t0t(t,r,n,o,i,s){return je(()=>{Ko(i),V2e(s),Ru(o),n==null&&(n=[1,1,1]),o==null&&(o="valid"),i==null&&(i=Pu()),s==null&&(s="max"),t=vSe(t,i);let a,l=o==="same"?"same":"valid";return s==="max"?a=iU(t,r,n,l):a=x8(t,r,n,l),i==="channelsFirst"&&(a=Gr(a,[0,4,1,2,3])),a})}var HJ=class extends yr{constructor(r){if(r.poolSize==null&&(r.poolSize=2),super(r),typeof r.poolSize=="number")this.poolSize=[r.poolSize];else if(Array.isArray(r.poolSize)&&r.poolSize.length===1&&typeof r.poolSize[0]=="number")this.poolSize=r.poolSize;else throw new Ie(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.poolSize)}`);if(Pi(this.poolSize,"poolSize"),r.strides==null)this.strides=this.poolSize;else if(typeof r.strides=="number")this.strides=[r.strides];else if(Array.isArray(r.strides)&&r.strides.length===1&&typeof r.strides[0]=="number")this.strides=r.strides;else throw new Ie(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(r.strides)}`);Pi(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,Ru(this.padding),this.inputSpec=[new ho({ndim:3})]}computeOutputShape(r){r=Wr(r);let n=Ec(r[1],this.poolSize[0],this.padding,this.strides[0]);return[r[0],n,r[2]]}call(r,n){return je(()=>{this.invokeCallHook(r,n),r=Xv(lr(r),2);let o=this.poolingFunction(lr(r),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Lc(o,[2])})}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(r,n),r}},rCe=(()=>{class t extends HJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Ru(s),QJ(n,o,i,s,a,"max")}}return t.className="MaxPooling1D",t})();tt.registerClass(rCe);var nCe=(()=>{class t extends HJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Ru(s),QJ(n,o,i,s,a,"avg")}}return t.className="AveragePooling1D",t})();tt.registerClass(nCe);var YJ=class extends yr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==2)throw new Ie(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides];Pi(this.poolSize,"poolSize"),Pi(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ko(this.dataFormat),Ru(this.padding),this.inputSpec=[new ho({ndim:4})]}computeOutputShape(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2];return n=Ec(n,this.poolSize[0],this.padding,this.strides[0]),o=Ec(o,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o]:[r[0],n,o,r[3]]}call(r,n){return je(()=>(this.invokeCallHook(r,n),this.poolingFunction(lr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},oCe=(()=>{class t extends YJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Ru(s),QJ(n,o,i,s,a,"max")}}return t.className="MaxPooling2D",t})();tt.registerClass(oCe);var iCe=(()=>{class t extends YJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Ru(s),QJ(n,o,i,s,a,"avg")}}return t.className="AveragePooling2D",t})();tt.registerClass(iCe);var XJ=class extends yr{constructor(r){if(r.poolSize==null&&(r.poolSize=[2,2,2]),super(r),this.poolSize=Array.isArray(r.poolSize)?r.poolSize:[r.poolSize,r.poolSize,r.poolSize],r.strides==null)this.strides=this.poolSize;else if(Array.isArray(r.strides)){if(r.strides.length!==3)throw new Ie(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${r.strides.length}.`);this.strides=r.strides}else this.strides=[r.strides,r.strides,r.strides];Pi(this.poolSize,"poolSize"),Pi(this.strides,"strides"),this.padding=r.padding==null?"valid":r.padding,this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ko(this.dataFormat),Ru(this.padding),this.inputSpec=[new ho({ndim:5})]}computeOutputShape(r){r=Wr(r);let n=this.dataFormat==="channelsFirst"?r[2]:r[1],o=this.dataFormat==="channelsFirst"?r[3]:r[2],i=this.dataFormat==="channelsFirst"?r[4]:r[3];return n=Ec(n,this.poolSize[0],this.padding,this.strides[0]),o=Ec(o,this.poolSize[1],this.padding,this.strides[1]),i=Ec(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[r[0],r[1],n,o,i]:[r[0],n,o,i,r[4]]}call(r,n){return je(()=>(this.invokeCallHook(r,n),this.poolingFunction(lr(r),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let r={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},sCe=(()=>{class t extends XJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Ru(s),t0t(n,o,i,s,a,"max")}}return t.className="MaxPooling3D",t})();tt.registerClass(sCe);var aCe=(()=>{class t extends XJ{constructor(n){super(n)}poolingFunction(n,o,i,s,a){return Ko(a),Ru(s),t0t(n,o,i,s,a,"avg")}}return t.className="AveragePooling3D",t})();tt.registerClass(aCe);var KJ=class extends yr{constructor(r){super(r),this.inputSpec=[new ho({ndim:3})]}computeOutputShape(r){return[r[0],r[2]]}call(r,n){throw new vr}},lCe=(()=>{class t extends KJ{constructor(n){super(n||{})}call(n,o){return je(()=>{let i=lr(n);return bo(i,1)})}}return t.className="GlobalAveragePooling1D",t})();tt.registerClass(lCe);var uCe=(()=>{class t extends KJ{constructor(n){super(n||{})}call(n,o){return je(()=>{let i=lr(n);return Ys(i,1)})}}return t.className="GlobalMaxPooling1D",t})();tt.registerClass(uCe);var ZJ=class extends yr{constructor(r){super(r),this.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Ko(this.dataFormat),this.inputSpec=[new ho({ndim:4})]}computeOutputShape(r){return r=r,this.dataFormat==="channelsLast"?[r[0],r[3]]:[r[0],r[1]]}call(r,n){throw new vr}getConfig(){let r={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(r,n),r}},cCe=(()=>{class t extends ZJ{call(n,o){return je(()=>{let i=lr(n);return this.dataFormat==="channelsLast"?bo(i,[1,2]):bo(i,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();tt.registerClass(cCe);var fCe=(()=>{class t extends ZJ{call(n,o){return je(()=>{let i=lr(n);return this.dataFormat==="channelsLast"?Ys(i,[1,2]):Ys(i,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();tt.registerClass(fCe);re();re();var JJ=class extends yr{constructor(r){super(r),this.layer=r.layer}build(r){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(r){this.layer!=null&&(this.layer.trainable=r)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(r){this.layer.setWeights(r)}getConfig(){let r={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(r,n),r}setFastWeightInitDuringBuild(r){super.setFastWeightInitDuringBuild(r),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(r)}static fromConfig(r,n,o={}){let i=n.layer,s=Ff(i,o);delete n.layer;let a={layer:s};return Object.assign(a,n),new r(a)}},dCe=(()=>{class t extends JJ{constructor(n){super(n),this.supportsMasking=!0}build(n){if(n=Wr(n),n.length<3)throw new Ie(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(n)}`);this.inputSpec=[{shape:n}];let o=[n[0]].concat(n.slice(2));this.layer.built||(this.layer.build(o),this.layer.built=!0),super.build(n)}computeOutputShape(n){n=Wr(n);let o=[n[0]].concat(n.slice(2)),i=this.layer.computeOutputShape(o),s=n[1];return[i[0],s].concat(i.slice(1))}call(n,o){return je(()=>(n=lr(n),ISe((l,u)=>[lr(this.layer.call(l,o)),[]],n,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();tt.registerClass(dCe);function eCr(t){Jy(rgt,"BidirectionalMergeMode",t)}var tCr="concat",pCe=(()=>{class t extends JJ{constructor(n){super(n);let o=n.layer.getConfig(),i={};i.className=n.layer.getClassName(),i.config=o,this.forwardLayer=Ff(i),o.goBackwards=o.goBackwards!==!0;let s={};if(s.className=n.layer.getClassName(),s.config=o,this.backwardLayer=Ff(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=n.mergeMode===void 0?tCr:n.mergeMode,eCr(this.mergeMode),n.weights)throw new vr("weights support is not implemented for Bidirectional layer yet.");this._stateful=n.layer.stateful,this.returnSequences=n.layer.returnSequences,this.returnState=n.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=n.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(n){this._trainable=n,this.forwardLayer!=null&&(this.forwardLayer.trainable=n),this.backwardLayer!=null&&(this.backwardLayer.trainable=n)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(n){let o=n.length,i=Math.floor(o/2);this.forwardLayer.setWeights(n.slice(0,i)),this.backwardLayer.setWeights(n.slice(i))}computeOutputShape(n){let o=this.forwardLayer.computeOutputShape(n);Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),o=o;let i,s,a;return this.returnState&&(a=o.slice(1)),i=o[0],i=i,this.mergeMode==="concat"?(i[i.length-1]*=2,s=[i]):this.mergeMode==null?s=[i,i.slice()]:s=[i],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[i].concat(a).concat(a.slice()):ua(s)}apply(n,o){let i=o==null?null:o.initialState,s=o==null?null:o.constants;o==null&&(o={});let a=kSe(n,i,s,this.numConstants);if(n=a.inputs,i=a.initialState,s=a.constants,Array.isArray(n)&&(i=n.slice(1),n=n[0]),(i==null||i.length===0)&&s==null)return super.apply(n,o);let l=[],u=[];if(i!=null){let f=i.length;if(f%2>0)throw new Ie("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");o.initialState=i,l.push(...i);let d=i.map(p=>new ho({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,f/2),this.backwardLayer.stateSpec=d.slice(f/2),u.push(...d)}if(s!=null)throw new vr("Support for constants in Bidirectional layers is not implemented yet.");let c=l[0]instanceof Gl;for(let f of l)if(f instanceof Gl!==c)throw new Ie("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let f=[n].concat(l),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;let h=super.apply(f,o);return this.inputSpec=p,h}else return super.apply(n,o)}call(n,o){return je(()=>{let i=o.initialState,s,a;if(i==null)s=this.forwardLayer.call(n,o),a=this.backwardLayer.call(n,o);else{let c=i.slice(0,i.length/2),f=i.slice(i.length/2);s=this.forwardLayer.call(n,Object.assign(o,{initialState:c})),a=this.backwardLayer.call(n,Object.assign(o,{initialState:f}))}let l;this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=ds(a,1));let u;return this.mergeMode==="concat"?u=hR([s,a]):this.mergeMode==="sum"?u=Ke(s,a):this.mergeMode==="ave"?u=we(.5,Ke(s,a)):this.mergeMode==="mul"?u=we(s,a):this.mergeMode==null&&(u=[s,a]),this.returnState?this.mergeMode==null?u.concat(l):[u].concat(l):u})}resetStates(n){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(n){Xm(this.forwardLayer.name,()=>{this.forwardLayer.build(n)}),Xm(this.backwardLayer.name,()=>{this.backwardLayer.build(n)}),this.built=!0}computeMask(n,o){Array.isArray(o)&&(o=o[0]);let i;if(this.returnSequences?this.mergeMode==null?i=[o,o]:i=o:this.mergeMode==null?i=[null,null]:i=null,this.returnState){let a=this.forwardLayer.states.map(l=>null);return Array.isArray(i)?i.concat(a).concat(a):[i].concat(a).concat(a)}else return i}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(n),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(n)}getConfig(){let n={mergeMode:this.mergeMode},o=super.getConfig();return Object.assign(n,o),n}static fromConfig(n,o){let i=Ff(o.layer);if(delete o.layer,o.numConstants!=null)throw new vr("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let s=o;return s.layer=i,new n(s)}}return t.className="Bidirectional",t})();tt.registerClass(pCe);re();var hCe=(()=>{class t extends yr{constructor(n){super(n),this.scale=n.scale,n.offset?this.offset=n.offset:this.offset=0}getConfig(){let n={scale:this.scale,offset:this.offset},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return je(()=>(n=lr(n),n.dtype!=="float32"&&(n=Vl(n,"float32")),Ke(we(n,this.scale),this.offset)))}}return t.className="Rescaling",t})();tt.registerClass(hCe);re();var{resizeBilinear:rCr,cropAndResize:nCr}=Xu,mCe=(()=>{class t extends yr{constructor(n){super(n),this.height=n.height,this.width=n.width}centerCrop(n,o,i,s,a,l,u,c){return je(()=>{let f,d=!1,p=o/l,h=i/u,m=(s+o)/l,g=(a+i)/u,y=[p,h,m,g],b=[];n.rank===3?(d=!0,f=ts([n])):f=n;for(let C=0;C<f.shape[0];C++)b.push(y);let x=La(b,[b.length,4]),v=w0(0,b.length,1,"int32"),_=nCr(f,x,v,[s,a],"nearest");return d?Vl(lr(Ua(_)),c):Vl(_,c)})}upsize(n,o,i,s){return je(()=>{let a=rCr(n,[o,i]);return Vl(a,s)})}call(n,o){return je(()=>{let i=lr(n),s=i.dtype,a=i.shape,l=a[a.length-3],u=a[a.length-2],c=0;l!==this.height&&(c=Math.floor((l-this.height)/2));let f=0;return u!==this.width&&(f=Math.floor((u-this.width)/2),f===0&&(f=1)),c>=0&&f>=0?this.centerCrop(i,c,f,this.height,this.width,l,u,s):this.upsize(n,this.height,this.width,s)})}getConfig(){let n={height:this.height,width:this.width},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Wr(n);let o=n.length-3,i=n.length-2;return n[o]=this.height,n[i]=this.width,n}}return t.className="CenterCrop",t})();tt.registerClass(mCe);re();re();re();re();function r0t(t,r,n,o){let i=lr(t);if(i.dtype!=="int32"&&(i=Vl(i,"int32")),r==="int")return i;let s=i.shape;if(i.rank===0&&(i=Ei(i,-1)),r==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Ei(i,-1)),i.rank>2)throw new Ie(`When outputMode is not int, maximum output rank is 2 Received outputMode ${r} and input shape ${s} which would result in output rank ${i.rank}.`);let a=["multiHot","oneHot"].includes(r),l=i,u;if(typeof o<"u"&&r==="count"?u=f3(l,o,n,a):u=f3(l,[],n,a),r!=="tfIdf")return u;if(o)return we(u,o);throw new Ie("When outputMode is 'tfIdf', weights must be provided.")}var gCe=(()=>{class t extends yr{constructor(n){super(n),this.numTokens=n.numTokens,n.outputMode?this.outputMode=n.outputMode:this.outputMode="multiHot"}getConfig(){let n={numTokens:this.numTokens,outputMode:this.outputMode},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){return n=Wr(n),n==null?[this.numTokens]:this.outputMode==="oneHot"&&n[n.length-1]!==1?(n.push(this.numTokens),n):(n[n.length-1]=this.numTokens,n)}call(n,o){return je(()=>{n=lr(n),n.dtype!=="int32"&&(n=Vl(n,"int32"));let i;if(typeof o.countWeights<"u"){if(this.outputMode!=="count")throw new Ie(`countWeights is not used when outputMode !== count.
              Received countWeights=${o.countWeights}`);i=lr(o.countWeights)}let s=Ys(n),a=vx(n),l=oi(this.numTokens,s).bufferSync().get(0),u=tu(a,0).bufferSync().get(0);if(!(l&&u))throw new Ie(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return r0t(n,this.outputMode,this.numTokens,i)})}}return t.className="CategoryEncoding",t})();tt.registerClass(gCe);re();var iCr=["bilinear","nearest"],n0t=new Set(iCr),yCe=(()=>{class t extends yr{constructor(n){if(super(n),this.height=n.height,this.width=n.width,n.interpolation)if(n0t.has(n.interpolation))this.interpolation=n.interpolation;else throw new Ie(`Invalid interpolation parameter: ${n.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!n.cropToAspectRatio}computeOutputShape(n){n=Wr(n);let o=n[2];return[this.height,this.width,o]}getConfig(){let n={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},o=super.getConfig();return Object.assign(n,o),n}call(n,o){return je(()=>{let i=[this.height,this.width];if(this.interpolation==="bilinear")return Xu.resizeBilinear(n,i,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Xu.resizeNearestNeighbor(n,i,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...n0t]} are supported`)})}}return t.className="Resizing",t})();tt.registerClass(yCe);re();var o0t=(()=>{class t{constructor(n){this.seed=n}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var i0t=(()=>{class t extends yr{constructor(n){super(n),this.randomGenerator=new o0t(n.seed)}getConfig(){let n={seed:this.randomGenerator.seed},o=super.getConfig();return Object.assign(n,o),n}}return t.className="BaseRandomLayer",t})();re();var sCr=["bilinear","nearest"],s0t=new Set(sCr),bCe=(()=>{class t extends i0t{constructor(n){super(n);let{factor:o,interpolation:i="bilinear"}=n;if(this.factor=o,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ie(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ie(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ie(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(i)if(s0t.has(i))this.interpolation=i;else throw new Ie(`Invalid interpolation parameter: ${i} is not implemented`)}getConfig(){let n={factor:this.factor,interpolation:this.interpolation},o=super.getConfig();return Object.assign(n,o),n}computeOutputShape(n){n=Wr(n);let o=n[2];return[this.imgHeight,-1,o]}call(n,o){return je(()=>{let i=lr(n);this.imgHeight=i.shape[i.shape.length-3];let s=i.shape[i.shape.length-2];this.widthFactor=jc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);let l=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return Xu.resizeBilinear(n,l);case"nearest":return Xu.resizeNearestNeighbor(n,l);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...s0t]} are supported`)}})}}return t.className="RandomWidth",t})();tt.registerClass(bCe);function aCr(t){return new j2(t)}function lCr(t){return new ySe(t)}function uCr(t){return new hSe(t)}function cCr(t){return new mSe(t)}function fCr(t){return new gSe(t)}function dCr(t){return new xSe(t)}function pCr(t){return new bSe(t)}function hCr(t){return new CSe(t)}function mCr(t){return new $J(t)}function gCr(t){return new wSe(t)}function yCr(t){return new zJ(t)}function bCr(t){return new _Se(t)}function xCr(t){return new SSe(t)}function vCr(t){return new ESe(t)}function wCr(t){return new TSe(t)}function _Cr(t){return new ASe(t)}function SCr(t){return new jSe(t)}function CCr(t){return new MSe(t)}function ECr(t){return new qJ(t)}function TCr(t){return new RSe(t)}function ACr(t){return new PSe(t)}function kCr(t){return new LSe(t)}function ICr(t){return new BSe(t)}function DCr(t){return new $Se(t)}function NCr(t){return new USe(t)}function OCr(t){return new VSe(t)}function FCr(t){return new WSe(t)}function RCr(t){return new YSe(t)}function MCr(t){return new qSe(t)}function PCr(t){return new HSe(t)}function jCr(t){return new GSe(t)}function LCr(t){return new XSe(t)}function BCr(t){return new JSe(t)}function $Cr(t){return new eCe(t)}function zCr(t){return new tCe(t)}function xCe(t){return new nCe(t)}function UCr(t){return xCe(t)}function VCr(t){return xCe(t)}function vCe(t){return new iCe(t)}function GCr(t){return vCe(t)}function WCr(t){return vCe(t)}function wCe(t){return new aCe(t)}function qCr(t){return wCe(t)}function HCr(t){return wCe(t)}function YCr(t){return new lCe(t)}function XCr(t){return new cCe(t)}function a0t(t){return new uCe(t)}function l0t(t){return new fCe(t)}function u0t(t){return new rCe(t)}function c0t(t){return new oCe(t)}function KCr(t){return new sCe(t)}function ZCr(t){return new NSe(t)}function QCr(t){return new VJ(t)}function JCr(t){return new OSe(t)}function eEr(t){return new CR(t)}function tEr(t){return new DSe(t)}function rEr(t){return new UJ(t)}function nEr(t){return new FSe(t)}function oEr(t){return new WJ(t)}function iEr(t){return new tb(t)}function sEr(t){return new GJ(t)}function aEr(t){return new pCe(t)}function lEr(t){return new dCe(t)}var uEr=a0t,cEr=l0t,fEr=u0t,dEr=c0t;function pEr(t){return new KSe(t)}function hEr(t){return new ZSe(t)}function mEr(t){return new QSe(t)}function gEr(t){return new zSe(t)}function yEr(t){return new hCe(t)}function bEr(t){return new mCe(t)}function xEr(t){return new yCe(t)}function vEr(t){return new gCe(t)}function wEr(t){return new bCe(t)}re();var EEr=Oe();EEr.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});re();re();var f0t;(function(t){let r;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(r=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(f0t||(f0t={}));re();re();re();re();re();re();re();re();re();U1();re();var STr=Bf(T3());re();var wTr=Bf(T3());re();re();re();var PBo=Symbol("out"),jBo=Symbol("field"),LBo=Symbol("quote"),BBo=Symbol("quoteafterquote"),$Bo=Symbol("quoteinquote");re();re();re();re();re();re();re();re();re();function at(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&H.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the CPU backend.`)})}var RTr=_a.whereImpl,p0t=(()=>{class t extends pg{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new w1(this,Hf())}write(n,o,i){this.firstUse&&(this.firstUse=!1,Oe().get("IS_NODE")&&ce.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let s={id:this.nextDataId()};return this.data.set(s,{values:n,dtype:i,refCount:1}),s}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&H.isString(i[0])){let a=i.map(l=>H.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return{dataId:s,shape:n,dtype:o}}refCount(n){return this.data.has(n)?this.data.get(n).refCount:0}incRef(n){let o=this.data.get(n);o.refCount++}decRef(n){if(this.data.has(n)){let o=this.data.get(n);o.refCount--}}move(n,o,i,s,a){this.data.set(n,{values:o,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}read(n){return Be(this,null,function*(){return this.readSync(n)})}readSync(n){let{dtype:o,complexTensorInfos:i}=this.data.get(n);if(o==="complex64"){let s=this.readSync(i.real.dataId),a=this.readSync(i.imag.dataId);return ce.mergeRealAndImagArrays(s,a)}return H.convertBackendValuesAndArrayBuffer(this.data.get(n).values,o)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>H.decodeString(s));return Jt(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Jt(n.shape,n.dtype,o)}makeOutput(n,o,i){return Hf().makeTensorFromTensorInfo(this.makeTensorInfo(o,i,n),this)}disposeData(n,o=!1){if(this.data.has(n)){if(this.data.get(n).refCount--,!o&&this.data.get(n).refCount>0)return!1;let{complexTensorInfos:i}=this.data.get(n);i!=null&&(this.disposeData(i.real.dataId,!0),this.disposeData(i.imag.dataId,!0)),this.data.delete(n)}return!0}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}time(n){return Be(this,null,function*(){let o=H.now();return n(),{kernelMs:H.now()-o}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(n){at([n],"where");let o=this.readSync(n.dataId);return RTr(n.shape,o)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var JCe={};fn(JCe,{addImpl:()=>ECe,bincountImpl:()=>AR,bincountReduceImpl:()=>tee,bitwiseAndImpl:()=>TCe,castImpl:()=>CCe,ceilImpl:()=>ACe,concatImpl:()=>ree,equalImpl:()=>kCe,expImpl:()=>DCe,expm1Impl:()=>OCe,floorDivImpl:()=>RCe,floorImpl:()=>FCe,gatherNdImpl:()=>nee,gatherV2Impl:()=>oee,greaterEqualImpl:()=>PCe,greaterImpl:()=>MCe,lessEqualImpl:()=>LCe,lessImpl:()=>jCe,linSpaceImpl:()=>iee,logImpl:()=>BCe,maxImpl:()=>see,maximumImpl:()=>$Ce,minimumImpl:()=>zCe,multiplyImpl:()=>N6,negImpl:()=>UCe,notEqualImpl:()=>VCe,prodImpl:()=>GCe,raggedGatherImpl:()=>aee,raggedRangeImpl:()=>lee,raggedTensorToTensorImpl:()=>uee,rangeImpl:()=>cee,rsqrtImpl:()=>qCe,scatterImpl:()=>eg,sigmoidImpl:()=>G0t,simpleAbsImpl:()=>SCe,sliceImpl:()=>YCe,sparseFillEmptyRowsImpl:()=>fee,sparseReshapeImpl:()=>dee,sparseSegmentReductionImpl:()=>IR,sqrtImpl:()=>H0t,squaredDifferenceImpl:()=>XCe,staticRegexReplaceImpl:()=>KCe,stridedSliceImpl:()=>pee,stringNGramsImpl:()=>hee,stringSplitImpl:()=>mee,stringToHashBucketFastImpl:()=>gee,subImpl:()=>QCe,tileImpl:()=>yee,topKImpl:()=>bee,transposeImpl:()=>kR,uniqueImpl:()=>xee});re();function SCe(t){let r=new Float32Array(t.length);for(let n=0;n<t.length;++n)r[n]=Math.abs(t[n]);return r}var MTr=t=>{let{x:r}=t.inputs,n=t.backend;at(r,"abs");let o=new Float32Array(H.sizeFromShape(r.shape)),i=n.data.get(r.dataId).values;return o=SCe(i),n.makeOutput(o,r.shape,r.dtype)},h0t={kernelName:wb,backendName:"cpu",kernelFunc:MTr};re();re();function hn(t){return(r,n,o,i,s)=>{let a=ce.assertAndGetBroadcastShape(r,n),l=a.length,u=H.computeStrides(a),c=H.sizeFromShape(a),f=H.getTypedArrayFromDType(s,c),d=r.length,p=n.length,h=H.computeStrides(r),m=H.computeStrides(n),g=ce.getBroadcastDims(r,a),y=ce.getBroadcastDims(n,a);if(g.length+y.length===0)for(let b=0;b<f.length;++b)f[b]=t(o[b%o.length],i[b%i.length]);else for(let b=0;b<f.length;++b){let x=H.indexToLoc(b,l,u),v=x.slice(-d);g.forEach(S=>v[S]=0);let w=H.locToIndex(v,d,h),_=x.slice(-p);y.forEach(S=>_[S]=0);let C=H.locToIndex(_,p,m);f[b]=t(o[w],i[C])}return[f,a]}}re();re();re();re();function Ls(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=n.makeTensorInfo(o.shape,"complex64"),u=n.data.get(l.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(o.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},l}var m0t={kernelName:gS,backendName:"cpu",kernelFunc:Ls};function ER(t,r,n="float32"){if(n==="complex64"){let i=ER(t,r,"float32"),s=ER(t,r,"float32");return Ls({inputs:{real:i,imag:s},backend:t})}let o=H.makeZerosTypedArray(H.sizeFromShape(r),n);return t.makeTensorInfo(r,n,o)}re();function ml(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var g0t={kernelName:hh,backendName:"cpu",kernelFunc:ml};re();function Jp(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var y0t={kernelName:YS,backendName:"cpu",kernelFunc:Jp};function CCe(t,r,n,o){if(o==="int32"){let i=Int32Array.from(t);return[r,"int32",i]}if(o==="bool"){let i=H.toTypedArray([0],n),[s,a]=hn((l,u)=>l!==u?1:0)(r,[],t,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${o}`)}function eh(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return ml({inputs:{x:i},backend:n});let f=ER(n,i.shape,i.dtype),d=eh({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=Ls({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){let f=Jp({inputs:{input:i},backend:n}),d=eh({inputs:{x:f},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(f),d}if(!H.hasEncodingLoss(i.dtype,s)){let f=ml({inputs:{x:i},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:s}}let a=n.data.get(i.dataId).values,[l,u,c]=CCe(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}var b0t={kernelName:ph,backendName:"cpu",kernelFunc:eh};function Sn(t,r,n,o){return n==null?({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;at([a,l],t);let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=a.dtype==="string"?ce.fromUint8ToStringArray(c):c,p=a.dtype==="string"?ce.fromUint8ToStringArray(f):f,h=o||a.dtype,[m,g]=r(a.shape,l.shape,d,p,h);return u.makeTensorInfo(g,h,m)}:({inputs:i,backend:s})=>{let{a,b:l}=i,u=s;if(a.dtype==="complex64"||l.dtype==="complex64"){let c=eh({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),f=u.data.get(c.dataId),d=f.complexTensorInfos.real,p=f.complexTensorInfos.imag,h=u.data.get(d.dataId).values,m=u.data.get(p.dataId).values,g=eh({inputs:{x:l},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(g.dataId),b=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,v=u.data.get(b.dataId).values,w=u.data.get(x.dataId).values,[_,C,S]=n(a.shape,l.shape,h,m,v,w),E=u.makeTensorInfo(S,"float32",_),A=u.makeTensorInfo(S,"float32",C),N=Ls({inputs:{real:E,imag:A},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(A),N}else{let c=u.data.get(a.dataId).values,f=u.data.get(l.dataId).values,d=o||a.dtype,[p,h]=r(a.shape,l.shape,c,f,d);return u.makeTensorInfo(h,d,p)}}}function TR(t){return(r,n,o,i,s,a)=>{let l=ce.assertAndGetBroadcastShape(r,n),u=H.sizeFromShape(l),c=l.length,f=H.computeStrides(l),d=H.getTypedArrayFromDType("float32",u),p=H.getTypedArrayFromDType("float32",u),h=ce.getBroadcastDims(r,l),m=ce.getBroadcastDims(n,l),g=ce.mergeRealAndImagArrays(o,i),y=ce.mergeRealAndImagArrays(s,a),b=r.length,x=H.computeStrides(r),v=n.length,w=H.computeStrides(n);if(h.length+m.length===0)for(let _=0;_<d.length;_++){let C=_%g.length,S=_%y.length,E=t(g[C*2],g[C*2+1],y[S*2],y[S*2+1]);d[_]=E.real,p[_]=E.imag}else for(let _=0;_<d.length;_++){let C=H.indexToLoc(_,c,f),S=C.slice(-b);h.forEach(R=>S[R]=0);let E=H.locToIndex(S,b,x),A=C.slice(-v);m.forEach(R=>A[R]=0);let N=H.locToIndex(A,v,w),k=t(g[E*2],g[E*2+1],y[N*2],y[N*2+1]);d[_]=k.real,p[_]=k.imag}return[d,p,l]}}var ECe=hn((t,r)=>t+r),PTr=TR((t,r,n,o)=>({real:t+n,imag:r+o})),rb=Sn(Xd,ECe,PTr),x0t={kernelName:Xd,backendName:"cpu",kernelFunc:rb};re();function AR(t,r,n,o,i){let s=H.sizeFromShape(o),a=H.makeZerosTypedArray(i,n);for(let l=0;l<t.length;l++){let u=t[l];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(s>0?a[u]+=r[l]:a[u]+=1)}return a}function tee(t,r,n,o=!1){let i=t.shape[0],s=t.shape[1],a=Jt([i,n],r.dtype);for(let l=0;l<i;l++)for(let u=0;u<s;u++){let c=t.get(l,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(o?a.set(1,l,c):r.size>0?a.set(a.get(l,c)+r.get(l,u),l,c):a.set(a.get(l,c)+1,l,c))}return a}re();var TCe=hn((t,r)=>t&r),jTr=Sn(S1,TCe),v0t={kernelName:S1,backendName:"cpu",kernelFunc:jTr};re();re();function da(t){return(r,n,o)=>{let i=H.getArrayFromDType(n,r.length);for(let s=0;s<r.length;++s)i[s]=t(r[s],o);return i}}re();function Sr(t,r,n){let o=da(r);return Tc(t,o,n)}function Tc(t,r,n){return({inputs:o,attrs:i,backend:s})=>{let{x:a}=o;at(a,t);let l=s,u=l.data.get(a.dataId).values,c;if(a.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=ce.fromUint8ToStringArray(u)}else c=u;let f=n||a.dtype,d=r(c,f,i);return l.makeTensorInfo(a.shape,f,d)}}var ACe=da(t=>Math.ceil(t)),LTr=Tc(Sg,ACe),w0t={kernelName:Sg,backendName:"cpu",kernelFunc:LTr};re();function ree(t,r,n,o){let i=H.getArrayFromDType(n,H.sizeFromShape(r));if(o&&n!=="string"){let s=0;t.forEach(a=>{let l=H.sizeFromShape(a.shape);i.set(a.vals,s),s+=l})}else{let s=0;t.forEach(a=>{let l=n==="string"?ce.fromUint8ToStringArray(a.vals):a.vals,u=0;for(let c=0;c<a.shape[0];++c){let f=c*r[1]+s;for(let d=0;d<a.shape[1];++d)i[f+d]=l[u++]}s+=a.shape[1]})}return i}re();var kCe=hn((t,r)=>t===r?1:0),ICe=Sn(C1,kCe,null,"bool"),_0t={kernelName:C1,backendName:"cpu",kernelFunc:ICe};re();var DCe=da(t=>Math.exp(t)),NCe=Tc(Dg,DCe,"float32"),S0t={kernelName:Dg,backendName:"cpu",kernelFunc:NCe};re();var OCe=da(t=>Math.expm1(t)),BTr=Tc(Ng,OCe),C0t={kernelName:Ng,backendName:"cpu",kernelFunc:BTr};re();var FCe=da(t=>Math.floor(t)),$Tr=Tc(Og,FCe),E0t={kernelName:Og,backendName:"cpu",kernelFunc:$Tr};re();var RCe=hn((t,r)=>Math.floor(t/r)),zTr=Sn(Fg,RCe,null,"int32"),T0t={kernelName:Fg,backendName:"cpu",kernelFunc:zTr};re();function nee(t,r,n,o,i,s,a,l,u){let c=Jt([o,s],n);for(let f=0;f<o;f++){let d=[],p=0;for(let h=0;h<i;h++){let m=t[f*i+h];p+=m*a[h],d.push(m)}if(p<0||p>=u/s)throw new Error(`Invalid indices: ${d} does not index into ${l}`);for(let h=0;h<s;h++)c.values[f*s+h]=r.get(...r.indexToLoc(p*s+h))}return c}re();function oee(t,r,n){let o=Jt(n,t.dtype);for(let i=0;i<o.size;++i){let a=o.indexToLoc(i).slice(),l=a[0],u=a[2],c=r.locToIndex([l,u]);a[2]=r.values[c];let f=t.locToIndex(a);0<=f&&f<t.values.length&&(o.values[i]=t.values[f])}return o}re();var MCe=hn((t,r)=>t>r?1:0),UTr=Sn(E1,MCe,null,"bool"),A0t={kernelName:E1,backendName:"cpu",kernelFunc:UTr};re();var PCe=hn((t,r)=>t>=r?1:0),VTr=Sn(Rg,PCe,null,"bool"),k0t={kernelName:Rg,backendName:"cpu",kernelFunc:VTr};re();var jCe=hn((t,r)=>t<r?1:0),GTr=Sn(T1,jCe,null,"bool"),I0t={kernelName:T1,backendName:"cpu",kernelFunc:GTr};re();var LCe=hn((t,r)=>t<=r?1:0),WTr=Sn(A1,LCe,null,"bool"),D0t={kernelName:A1,backendName:"cpu",kernelFunc:WTr};re();function iee(t,r,n){let o=(r-t)/(n-1),i=H.makeZerosTypedArray(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+o;return i}re();var BCe=da(t=>Math.log(t)),qTr=Tc(Lg,BCe),N0t={kernelName:Lg,backendName:"cpu",kernelFunc:qTr};re();function see(t,r,n,o){let i=H.getTypedArrayFromDType(o,H.sizeFromShape(n));for(let s=0;s<i.length;++s){let a=s*r,l=t[a];for(let u=0;u<r;++u){let c=t[a+u];(Number.isNaN(c)||c>l)&&(l=c)}i[s]=l}return i}re();var $Ce=hn((t,r)=>Math.max(t,r)),HTr=Sn($g,$Ce),O0t={kernelName:$g,backendName:"cpu",kernelFunc:HTr};re();var zCe=hn((t,r)=>Math.min(t,r)),YTr=Sn(zg,zCe),F0t={kernelName:zg,backendName:"cpu",kernelFunc:YTr};re();var N6=hn((t,r)=>t*r),XTr=TR((t,r,n,o)=>({real:t*n-r*o,imag:t*o+r*n})),ZA=Sn(Vg,N6,XTr),R0t={kernelName:Vg,backendName:"cpu",kernelFunc:ZA};re();function UCe(t,r,n){let o=H.createScalarValue(-1,n);return N6([],r,o,t,n)}function KTr(t){let{inputs:r,backend:n}=t,{x:o}=r;at(o,"neg");let i=n.data.get(o.dataId).values,[s,a]=UCe(i,o.shape,o.dtype);return n.makeTensorInfo(a,o.dtype,s)}var M0t={kernelName:Yb,backendName:"cpu",kernelFunc:KTr};re();var VCe=hn((t,r)=>t!==r?1:0),ZTr=Sn(N1,VCe,null,"bool"),P0t={kernelName:N1,backendName:"cpu",kernelFunc:ZTr};re();re();re();function kR(t,r,n,o,i){let s=r.length,a=H.sizeFromShape(r),l=H.computeStrides(r),u=H.computeStrides(i),c=H.getTypedArrayFromDType(n,H.sizeFromShape(i));for(let f=0;f<a;++f){let d=H.indexToLoc(f,s,l),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[o[m]];let h=H.locToIndex(p,s,u);c[h]=t[f]}return c}function di(t){let{inputs:r,attrs:n,backend:o}=t,{x:i}=r,{perm:s}=n;at(i,"transpose");let a=i.shape.length,l=new Array(a);for(let d=0;d<l.length;d++)l[d]=i.shape[s[d]];let u=o.data.get(i.dataId).values,c=kR(u,i.shape,i.dtype,s,l);return{dataId:o.write(c,l,i.dtype),shape:l,dtype:i.dtype}}var j0t={kernelName:gh,backendName:"cpu",kernelFunc:di};function GCe(t,r,n,o){let[i,s]=ce.computeOutAndReduceShapes(t,o),a=zi(r,"int32"),l=H.makeZerosTypedArray(H.sizeFromShape(i),a),u=H.sizeFromShape(s);for(let c=0;c<l.length;++c){let f=c*u,d=1;for(let p=0;p<u;++p)d*=n[f+p];l[c]=d}return{outVals:l,outShape:i,outDtype:a}}function QTr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"prod");let l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=ce.getAxesPermutation(u,l),f=u,d=i,p=[];c!=null&&(d=di({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),f=ce.getInnerMostAxes(f.length,l));let h=n.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=GCe(d.shape,d.dtype,h,f),b=g;return a&&(b=ce.expandShapeToKeepDim(g,u)),p.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,y,m)}var L0t={kernelName:ex,backendName:"cpu",kernelFunc:QTr};re();function JTr(t,r,n){t.forEach((o,i)=>{if(o<0||o>=n){let s=H.indexToLoc(i,r.length,H.computeStrides(r)).join(",");throw new Error(`indices[${s}] = ${o} is not in [0, ${n})`)}})}function eAr(t,r){for(let n=0;n<t.length;++n){let o=t[n],i=n===t.length-1?r:t[n+1].length;if(o.length===0)throw new Error("Ragged splits may not be empty");if(o[0]<0)throw new Error("Ragged splits must be non-negative");if(o[o.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<o.length;++s)if(o[s-1]>o[s])throw new Error("Ragged splits must be sorted in ascending order")}}function tAr(t,r,n,o){let i=[],s=0,a=r.length-1+n.length,l=new Array(a).fill(null).map(()=>[0]);eAr(n,o);let u=1;for(let c=0;c<r.length-1;++c){u*=r[c];let f=r[c+1];for(let d=1;d<u+1;++d)l[c].push(d*f)}for(let c=0;c<t.length;++c){let f=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){let h=n[p],m=p+r.length-1;if(m>=0){let g=l[m],y=g[g.length-1]-h[f];for(let b=f;b<d;++b)l[m].push(h[b+1]+y)}f=h[f],d=h[d]}d!==f&&(i.push([f,d]),s+=d-f)}return{outSplits:l,valueSlices:i,numValues:s}}function rAr(t){let r=[];for(let n=0;n<t.length;++n){let o=t[n].length,i=H.getArrayFromDType("int32",o);r.push(i),t[n].forEach((s,a)=>i[a]=s)}return r}function B0t(t,r){let n=t.slice(0,r);for(;n.length<r;)n.push(1);for(let o=r;o<t.length;o++)n[r-1]*=t[o];return n}function nAr(t,r,n,o,i,s){let a=B0t(r,2)[1],l=B0t(s,2)[1],u=0;for(let c of n)for(let f=c[0];f<c[1];++f){for(let d=0;d<o;++d)i[u*l+d]=t[f*a+d];++u}}function oAr(t,r,n,o,i){let s=r.slice();s[0]=i;let a=H.getArrayFromDType(n,H.sizeFromShape(s)),l=t.length,u=l===0?0:l/r[0];return nAr(t,r,o,u,a,s),[a,s]}function aee(t,r,n,o,i,s,a,l){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(r[0].length===0)throw new Error("Split tensors must not be scalars");let u=r[0][0]-1;if(JTr(s,a,u),o.length===0)throw new Error("params.rank must be nonzero");let c=o[0],{outSplits:f,valueSlices:d,numValues:p}=tAr(s,a,t,c),h=rAr(f),m=oAr(n,o,i,d,p);return[h,m[0],m[1]]}re();var $0t=2147483647;function lee(t,r,n,o,i,s,a){if(r.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");let l=r.length===0,u=i.length===0,c=a.length===0,f=[];l||f.push(r[0]),u||f.push(i[0]),c||f.push(a[0]);for(let y=1;y<f.length;++y)if(f[y]!==f[y-1])throw new Error("starts, limits, and deltas must have the same shape");let d=f.length===0?1:f[0],p=H.getArrayFromDType("int32",d+1);p[0]=0;for(let y=0;y<d;++y){let b=l?t[0]:t[y],x=u?o[0]:o[y],v=c?s[0]:s[y];if(v===0)throw new Error("Requires delta != 0");let w;if(v>0&&x<b||v<0&&x>b)w=0;else if(w=Math.ceil(Math.abs((x-b)/v)),w>$0t)throw new Error(`Requires ((limit - start) / delta) <= ${$0t}`);p[y+1]=p[y]+w}let h=p[d],m=H.getArrayFromDType(n,h),g=0;for(let y=0;y<d;++y){let b=p[y+1]-p[y],x=l?t[0]:t[y],v=c?s[0]:s[y];for(let w=0;w<b;++w)m[g++]=x,x+=v}return[p,m]}re();var th=ce.RowPartitionType,WCe=class t{constructor(r,n,o,i,s,a,l,u,c,f){this.shape=r,this.shapeShape=n,this.values=o,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=l,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=ce.getRowPartitionTypesHelper(f),this.raggedRank=ce.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(r){return this.rowPartitionTypes[0]===th.FIRST_DIM_SIZE?this.rowPartitionTypes[r+1]:this.rowPartitionTypes[r]}getRowPartitionTensor(r){return this.rowPartitionTypes[0]===th.FIRST_DIM_SIZE?this.rowPartitionValues[r+1]:this.rowPartitionValues[r]}getMaxWidth(r){let n=this.getRowPartitionTensor(r-1);switch(this.getRowPartitionTypeByDimension(r-1)){case th.VALUE_ROWIDS:return t.getMaxWidthValueRowID(n);case th.ROW_SPLITS:return t.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${th[this.getRowPartitionTypeByDimension(r-1)]}`)}}static getMaxWidthRowSplit(r){let n=r.length;if(n===0||n===1)return 0;let o=0;for(let i=0;i<n-1;++i){let s=r[i+1]-r[i];s>o&&(o=s)}return o}static getMaxWidthValueRowID(r){let n=r.length;if(n===0)return 0;let o=0,i=r[0],s=0;for(let a=1;a<n;++a){let l=r[a];l!==i&&(i=l,s=Math.max(a-o,s),o=a)}return Math.max(n-o,s)}tensorShapeFromTensor(r,n,o=!0){if(n.length===0){if(r[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return U0t(r,o)}calculateOutputSize(r){let n=this.valuesShape,o=this.defaultValueShape;ce.validateDefaultValueShape(o,n);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=ce.combineRaggedTensorToTensorShapes(this.raggedRank,i,n);a[0]<0&&(a[0]=r);for(let l=1;l<=this.raggedRank;++l)a[l]<0&&(a[l]=this.getMaxWidth(l));return a}calculateFirstParentOutputIndex(r,n,o){let i=Math.min(r,o),s=[],a=0;for(let l=0;l<i;++l,a+=n)s.push(a);for(let l=i;l<r;++l)s.push(-1);return H.assert(s.length===r,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(r,n,o,i){let s=r.length,a=[];for(let l=0;l<s-1;++l){let u=r[l+1]-r[l],c=Math.min(i,u),f=n[l];f===-1&&(c=0);for(let d=0;d<c;++d)a.push(f),f+=o;for(let d=0;d<u-c;++d)a.push(-1)}if(s>0&&a.length!==r[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(r,n,o,i){let s=r.length,a=[];if(s===0)return[];let l=0,u=r[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];a.push(c);for(let f=1;f<s;++f){let d=r[f];if(d===u)c>=0&&(++l,l<i?c+=o:c=-1);else{if(l=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==r.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(r,n,o,i){let s=this.getRowPartitionTensor(r),a=this.getRowPartitionTypeByDimension(r);switch(a){case th.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,o,i);case th.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,o,i);default:throw new Error(`Unsupported partition type: ${th[a]}`)}}getFirstDimensionSize(){let r=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case th.FIRST_DIM_SIZE:return r[0];case th.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case th.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${th[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),o=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*o[u+1];let s=U0t(o,!1),a=H.getArrayFromDType(this.valuesDType,H.sizeFromShape(s));if(i[0]*o[0]>0){let u=this.calculateFirstParentOutputIndex(n,i[0],o[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,i[c],o[c]);this.setOutput(this.raggedRank,u,a,s)}return[s,a]}setOutput(r,n,o,i){if(o.length===0)return;let s=this.values,a=o,l=i.slice();l=l.slice(r+1);let u=H.sizeFromShape(l),c=n.length,f=this.defaultValue;if(f.length!==u&&f.length!==1){let m=this.defaultValueShape;je(()=>{let g=Se(f,m);f=p0(g,l).dataSync()})}let d=0,p=0,h=0;for(let m=0;m<=c;++m){let g=m<c?n[m]:-1;if(g===h){++h;continue}if(p<h){let y=s.subarray(d*u),b=a.subarray(p*u),x=(h-p)*u;z0t(b,y,x)}if(m>=c){let y=o.length;g=Math.floor(y/u)}if(g>h)if(this.defaultValue.length===1)a.subarray(h*u,g*u).fill(this.defaultValue[0]),h=g;else for(;g>h;){let y=a.slice(h*u);z0t(y,f,u),++h}g<0?(d=m+1,p=h):(d=m,p=h,h=p+1)}}};function z0t(t,r,n){for(let o=0;o<n;o++)t[o]=r[o]}function U0t(t,r){let n=[];for(let o of t){if(o<0){if(!r)throw new Error(`Dimension ${o} must be >= 0`);if(o<-1)throw new Error(`Dimension ${o} must be >= -1`);o=-1}n.push(o)}return n}function uee(t,r,n,o,i,s,a,l,u,c){return new WCe(t,r,n,o,i,s,a,l,u,c).compute()}re();function cee(t,r,n,o){let i=t===r,s=t<r&&n<0,a=r<t&&n>1;if(i||s||a)return H.makeZerosTypedArray(0,o);let l=Math.abs(Math.ceil((r-t)/n)),u=H.makeZerosTypedArray(l,o);r<t&&n===1&&(n=-1),u[0]=t;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}re();var qCe=da(t=>1/Math.sqrt(t)),iAr=Tc(Xg,qCe),V0t={kernelName:Xg,backendName:"cpu",kernelFunc:iAr};re();function eg(t,r,n,o,i,s,a,l,u,c){let f=[o/i,i],d=t.values,p=r.values;if(o===0)return Jt(n,r.dtype);let h=u instanceof Cn?u:Jt(f,r.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let m=0;m<s;m++){let g=[],y=0;for(let b=0;b<a;b++){let x=d[m*a+b];g.push(x),y+=x*l[b]}if(y<0||y>=o/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let b=0;b<i;b++)c?h.values[y*i+b]+=p[m*i+b]:h.values[y*i+b]=r.rank===0?p[0]:p[m*i+b]}return h}re();var G0t=da(t=>1/(1+Math.exp(-t))),HCe=Sr(e0,t=>1/(1+Math.exp(-t))),W0t={kernelName:e0,backendName:"cpu",kernelFunc:HCe};re();function YCe(t,r,n,o,i){let s=Ns.isSliceContinous(o,r,n),a=H.sizeFromShape(n),l=H.computeStrides(o);if(s){let d=Ns.computeFlatOffset(r,l);return i==="string"?t.slice(d,d+a):t.subarray(d,d+a)}let u=i==="string"?ce.fromUint8ToStringArray(t):t,c=Jt(o,i,u),f=Jt(n,i);for(let d=0;d<f.size;++d){let p=f.indexToLoc(d),h=p.map((m,g)=>m+r[g]);f.set(c.get(...h),...p)}return i==="string"?ce.fromStringArrayToUint8(f.values):f.values}function rh(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o;at(i,"slice");let[l,u]=Ns.parseSliceParams(i,s,a);Ns.assertParamsValid(i,l,u);let c=n.data.get(i.dataId).values,f=YCe(c,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,f)}var q0t={kernelName:sx,backendName:"cpu",kernelFunc:rh};re();function fee(t,r,n,o,i,s,a){let l=r[0],u=s[0],c=new Array(u),f=new Array(l),d=r[1];if(u===0){if(l!==0)throw new Error(ce.getSparseFillEmptyRowsIndicesDenseShapeMismatch(l));let y=H.getArrayFromDType(n,0),b=H.getArrayFromDType(i,0);return[y,[0,d],b,c,f]}let p=!0,h=0,m=new Array(u).fill(0);for(let y=0;y<l;++y){let b=t[y*d];if(b<0)throw new Error(ce.getSparseFillEmptyRowsNegativeIndexErrorMessage(y,b));if(b>=u)throw new Error(ce.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(y,b,u));++m[b],p=p&&b>=h,h=b}let g=!0;for(let y=0;y<u;++y){let b=m[y]===0;c[y]=b,g=g&&!b,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&p){let y=t,b=o;for(let x=0;x<l;++x)f[x]=x;return[y,[l,d],b,c,f]}else{let y=m[u-1],b=H.getArrayFromDType(n,y*d),x=H.getArrayFromDType(i,y),v=new Array(u).fill(0);for(let w=0;w<l;++w){let _=t[w*d],C=v[_],S=(_===0?0:m[_-1])+C;v[_]++;for(let E=0;E<d;++E)b[S*d+E]=t[w*d+E];x[S]=o[w],f[w]=S}for(let w=0;w<u;++w)if(v[w]===0){let C=w===0?0:m[w-1];b[C*d+0]=w;for(let S=1;S<d;++S)b[C*d+S]=0;x[C]=a}return[b,[y,d],x,c,f]}}re();function dee(t,r,n,o,i){let s=H.sizeFromShape(o),a=r[0],l=i.length,u=[],c=1,f=-1;for(let y=0;y<l;++y){let b=i[y];if(b===-1){if(f!==-1)throw new Error(ce.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(f,y));f=y,u.push(1)}else{if(b<0)throw new Error(ce.getSparseReshapeNegativeOutputDimErrorMessage(y,b));c*=b,u.push(b)}}if(f!==-1){if(c<=0)throw new Error(ce.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let y=Math.trunc(s/c);if(c*y!==s)throw new Error(ce.getSparseReshapeInputOutputMultipleErrorMessage(o,u));u[f]=y}if(H.sizeFromShape(u)!==s)throw new Error(ce.getSparseReshapeInputOutputMismatchErrorMessage(o,u));let p=o.length,h=[];if(p>0){h[p-1]=1;for(let y=p-2;y>=0;--y)h[y]=h[y+1]*o[y+1]}let m=[];if(l>0){m[l-1]=1;for(let y=l-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}let g=H.getArrayFromDType(n,a*l);for(let y=0;y<a;++y){let b=0;for(let x=0;x<p;++x)b+=t[y*p+x]*h[x];for(let x=0;x<l;++x)g[y*l+x]=Math.trunc(b/m[x]),b%=m[x]}return[g,[a,l],u]}re();function IR(t,r,n,o,i,s=!1,a=0){let l=o.length,u=[r[0],t.length/r[0]],c=u[1],d=l>0?i[l-1]+1:0;if(d<0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=r.slice();p[0]=d;let h=p.reduce((v,w)=>v*w,1),m=H.getArrayFromDType(n,h);if(l===0)return d>0&&m.fill(a),[m,p];if(d<=0)throw new Error(ce.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,y=1,b=0,x=i[g];for(;;){let v=0;if(y<l){if(v=i[y],x===v){++y;continue}if(x>=v)throw new Error(ce.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(x<0||x>=d)throw new Error(ce.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(x,d));x>b&&m.fill(a,b*c,x*c);for(let w=g;w<y;++w){let _=o[w];if(_<0||_>=u[0])throw new Error(ce.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(w,o[w],u[0]));for(let C=0;C<c;C++)m[x*c+C]+=t[_*c+C]}if(s)for(let w=0;w<c;w++)m[x*c+w]/=y-g;if(g=y,++y,b=x+1,x=v,y>l)break}return b<d&&m.fill(a,b*c,d*c),[m,p]}re();var H0t=da(t=>Math.sqrt(t)),sAr=Sr(r0,t=>Math.sqrt(t)),Y0t={kernelName:r0,backendName:"cpu",kernelFunc:sAr};re();var XCe=hn((t,r)=>{let n=t-r;return n*n}),aAr=Sn(n0,XCe),X0t={kernelName:n0,backendName:"cpu",kernelFunc:aAr};re();var KCe=da((t,r)=>{let{pattern:n,replaceGlobal:o,rewrite:i}=r;return t.replace(new RegExp(n,o?"g":""),i)}),lAr=Tc(O1,KCe),K0t={kernelName:O1,backendName:"cpu",kernelFunc:lAr};re();function pee(t,r,n,o){let i=Jt(t,r.dtype);for(let s=0;s<i.size;s++){let a=i.indexToLoc(s),l=new Array(a.length);for(let u=0;u<l.length;u++)l[u]=a[u]*n[u]+o[u];i.set(r.get(...l),...a)}return i}re();var ZCe=class{constructor(r,n,o,i,s,a){this.separator=H.encodeString(r),this.nGramWidths=n,this.leftPad=H.encodeString(o),this.rightPad=H.encodeString(i),this.padWidth=s,this.preserveShort=a}getPadWidth(r){return Math.min(this.padWidth<0?r-1:this.padWidth,r-1)}getNumNGrams(r,n){let o=this.getPadWidth(n);return Math.max(0,r+2*o-n+1)}createNGrams(r,n,o,i,s,a){for(let l=0;l<s;++l){let u=this.getPadWidth(a),c=Math.max(0,u-l),f=Math.max(0,u-(s-(l+1))),d=a-(c+f),p=n+(c>0?0:l-u),h=0;h+=c*this.leftPad.length;for(let x=0;x<d;++x)h+=r[p+x].length;h+=f*this.rightPad.length;let m=c+f+d-1;h+=m*this.separator.length,o[i+l]=new Uint8Array(h);let g=o[i+l],y=0,b=x=>x.forEach(v=>g[y++]=v);for(let x=0;x<c;++x)b(this.leftPad),b(this.separator);for(let x=0;x<d-1;++x)b(r[p+x]),b(this.separator);if(d>0){b(r[p+d-1]);for(let x=0;x<f;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<f-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(r,n){let o=r.length,i=n.length;if(i>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<i;++c){let f=n[c]>=u;if(f=f&&n[c]<=o,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${o}]`);u=n[c]}if(u!==o)throw new Error(`Last split value must be data size. Expected ${o}, got ${u}`)}let s=i-1,a=H.getArrayFromDType("int32",i);if(o===0||i===0){let u=new Array(o);for(let c=0;c<=s;++c)a[c]=0;return[u,a]}a[0]=0;for(let u=1;u<=s;++u){let c=n[u]-n[u-1],f=0;this.nGramWidths.forEach(d=>{f+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&f===0&&(f=1),a[u]=a[u-1]+f}let l=new Array(a[s]);for(let u=0;u<s;++u){let c=n[u],f=a[u];if(this.nGramWidths.forEach(d=>{let p=n[u+1]-n[u],h=this.getNumNGrams(p,d);this.createNGrams(r,c,l,f,h,d),f+=h}),this.preserveShort&&f===a[u]){let d=n[u+1]-n[u];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(r,c,l,f,1,p)}}return[l,a]}};function hee(t,r,n,o,i,s,a,l){return new ZCe(n,o,i,s,a,l).compute(t,r)}re();function uAr(t,r,n,o){if(!t.length)return;if(r.length===0){for(let s=0;s<t.length;++s)o.push(t.subarray(s,s+1));return}if(r.length===1){let s=r[0],a=t.indexOf(s);for(;a!==-1;){let l=t.subarray(0,a);(!n||l.length!==0)&&o.push(l),t=t.subarray(a+1),a=t.indexOf(s)}(!n||t.length!==0)&&o.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||r.indexOf(t[s])!==-1){let a=t.subarray(i,s);(!n||a.length!==0)&&o.push(a),i=s+1}}function mee(t,r,n){let o=t.length,i=[],s=0,a=0,l=new Array(o);for(let p=0;p<o;++p){let h=i.length;uAr(t[p],r,n,i);let m=i.length-h;l[p]=m,s+=m,a=Math.max(a,m)}let u=H.getArrayFromDType("int32",s*2),c=new Array(s),f=[o,a],d=0;for(let p=0;p<o;++p)for(let h=0;h<l[p];++h)u[d*2]=p,u[d*2+1]=h,c[d]=i[d],++d;return[u,c,f]}re();function gee(t,r){let n=H.getArrayFromDType("int32",t.length);for(let o=0;o<t.length;++o)n[o]=H.fingerPrint64(t[o]).modulo(r).getLowBitsUnsigned();return n}re();var QCe=hn((t,r)=>t-r),cAr=TR((t,r,n,o)=>({real:t-n,imag:r-o})),O6=Sn(o0,QCe,cAr),Z0t={kernelName:o0,backendName:"cpu",kernelFunc:O6};re();function yee(t,r){let n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*r[i];let o=Jt(n,t.dtype);for(let i=0;i<o.values.length;++i){let s=o.indexToLoc(i),a=new Array(t.rank);for(let u=0;u<a.length;u++)a[u]=s[u]%t.shape[u];let l=t.locToIndex(a);o.values[i]=t.values[l]}return o}re();var F6=(t,r)=>{let n=r.value-t.value;return n===0?t.index-r.index:n};function Q0t(t,r,n=0,o=t.length-1){for(;o>n;){if(o-n>600){let l=o-n+1,u=r-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*Math.sign(u-l/2),p=Math.max(n,Math.floor(r-u*f/l+d)),h=Math.min(o,Math.floor(r+(l-u)*f/l+d));Q0t(t,r,p,h)}let i=t[r],s=n,a=o;for(H.swap(t,n,r),F6(t[o],i)>0&&H.swap(t,n,o);s<a;){for(H.swap(t,s,a),s++,a--;F6(t[s],i)<0;)s=s+1;for(;F6(t[a],i)>0;)a=a-1}F6(t[n],i)===0?H.swap(t,n,a):(a=a+1,H.swap(t,a,o)),a<=r&&(n=a+1),r<=a&&(o=a-1)}}function bee(t,r,n,o,i){let s=r[r.length-1],[a,l]=[t.length/s,s],u=H.getTypedArrayFromDType(n,a*o),c=H.getTypedArrayFromDType("int32",a*o);for(let d=0;d<a;d++){let p=d*l,h=t.subarray(p,p+l),m=new Array(h.length);h.forEach((x,v)=>m[v]={value:x,index:v}),o<m.length&&(Q0t(m,o),m=m.slice(0,o)),i&&m.sort(F6);let g=d*o,y=u.subarray(g,g+o),b=c.subarray(g,g+o);for(let x=0;x<o;x++)y[x]=m[x].value,b[x]=m[x].index}let f=r.slice();return f[f.length-1]=o,[Jt(f,n,u),Jt(f,"int32",c)]}re();function xee(t,r,n,o){let i=H.parseAxisParam(r,n)[0],s=[1,n[0],1];for(let m=0;m<i;m++)s[0]*=n[m];s[1]=n[i];for(let m=i+1;m<n.length;m++)s[2]*=n[m];let a=new Map,l=new Int32Array(n[i]),u=new Cn(s,o,t),c=[],f=s[0]===1&&s[2]===1;for(let m=0;m<n[i];m++){let g;if(f)g=t[m].toString();else{let b=[];for(let x=0;x<s[0];x++)for(let v=0;v<s[2];v++)b.push(u.get(x,m,v));g=b.join(",")}let y=a.get(g);if(y!=null)l[m]=y;else{let b=a.size;a.set(g,b),l[m]=b,c.push(m)}}let d=s.slice();d[1]=a.size;let p=new Cn(d,o);c.forEach((m,g)=>{for(let y=0;y<s[0];y++)for(let b=0;b<s[2];b++)p.set(u.get(y,m,b),y,g,b)});let h=n.slice();return h[i]=d[1],{outputValues:p.values,outputShape:h,indices:l}}i3("cpu",()=>new p0t,1);re();re();re();var eEe=Sr(kg,t=>t>=0?t:Math.exp(t)-1),J0t={kernelName:kg,backendName:"cpu",kernelFunc:eEe};re();function tEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o;at([i],"leakyRelu");let a=H.sizeFromShape(i.shape),l=n.data.get(i.dataId).values,u=H.getTypedArrayFromDType("float32",a);for(let c=0;c<l.length;c++)u[c]=l[c]<0?s*l[c]:l[c];return n.makeTensorInfo(i.shape,"float32",u)}var eyt={kernelName:$b,backendName:"cpu",kernelFunc:tEe};re();var fAr=hn((t,r)=>t<0?r*t:t);function rEe(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r;at([o,i],"prelu");let s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,[l,u]=fAr(o.shape,i.shape,s,a,"float32");return n.makeTensorInfo(u,"float32",l)}var tyt={kernelName:Jb,backendName:"cpu",kernelFunc:rEe};re();var nEe=Sr(qg,t=>Math.max(0,t)),ryt={kernelName:qg,backendName:"cpu",kernelFunc:nEe};re();var oEe=Sr(Hg,t=>Math.min(Math.max(0,t),6)),nyt={kernelName:Hg,backendName:"cpu",kernelFunc:oEe};function QA(t,r,n,o,i){if(n==="linear")return ml({inputs:{x:r},backend:t});if(n==="relu")return nEe({inputs:{x:r},backend:t});if(n==="elu")return eEe({inputs:{x:r},backend:t});if(n==="relu6")return oEe({inputs:{x:r},backend:t});if(n==="prelu")return rEe({inputs:{x:r,alpha:o},backend:t});if(n==="leakyrelu")return tEe({inputs:{x:r},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return HCe({inputs:{x:r},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}re();re();function mn(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=H.sizeFromShape(i.shape),l=H.inferFromImplicitShape(s,a),u=H.sizeFromShape(l);H.assert(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){let f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;f.shape=l,d.shape=l}return{dataId:i.dataId,shape:l,dtype:i.dtype}}var oyt={kernelName:tx,backendName:"cpu",kernelFunc:mn};function iEe(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;at([i,s],"matMul");let u=i.shape.length,c=s.shape.length,f=a?i.shape[u-2]:i.shape[u-1],d=l?s.shape[c-1]:s.shape[c-2],p=a?i.shape[u-1]:i.shape[u-2],h=l?s.shape[c-2]:s.shape[c-1],m=i.shape.slice(0,-2),g=s.shape.slice(0,-2),y=H.sizeFromShape(m),b=H.sizeFromShape(g),v=Hu.assertAndGetBroadcastShape(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([p,h]);H.assert(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${l} must match.`);let w=a?[y,f,p]:[y,p,f],_=l?[b,h,d]:[b,d,h],C=mn({inputs:{x:i},backend:n,attrs:{shape:w}}),S=mn({inputs:{x:s},backend:n,attrs:{shape:_}}),E=a?C.shape[1]:C.shape[2],A=a?C.shape[2]:C.shape[1],N=l?S.shape[1]:S.shape[2],k=Math.max(y,b),R=n.data.get(C.dataId).values,I=n.data.get(S.dataId).values,L=H.computeStrides(C.shape),j=H.computeStrides(S.shape),[M,V,G]=a?[L[0],1,L[1]]:[L[0],L[1],1],[U,Y,X]=l?[1,j[1],j[0]]:[j[1],1,j[0]],pe=A*N,$=Jt([k,A,N],C.dtype),O=$.values,z=n.blockSize;for(let q=0;q<k;q++){let ee=q%y,ae=q%b;for(let Q=0;Q<A;Q+=z){let le=Math.min(Q+z,A);for(let ie=0;ie<N;ie+=z){let Z=Math.min(ie+z,N);for(let ge=0;ge<E;ge+=z){let ne=Math.min(ge+z,E);for(let ye=Q;ye<le;ye++)for(let xe=ie;xe<Z;xe++){let Ne=0;for(let Ae=ge;Ae<ne;Ae++){let Re=R[ee*M+ye*V+Ae*G],ze=I[Ae*U+xe*Y+ae*X];Ne+=Re*ze}O[q*pe+(ye*N+xe)]+=Ne}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(S),n.makeTensorInfo(v,$.dtype,$.values)}var iyt={kernelName:Ab,backendName:"cpu",kernelFunc:iEe};function dAr(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o,p,h,m,g=[];p=iEe({inputs:{a:i,b:s},attrs:{transposeA:u,transposeB:c},backend:n}),a&&(h=rb({inputs:{a:p,b:a},backend:n}),g.push(p),p=h),f&&(m=QA(n,p,f,l,d),g.push(p),p=m);for(let b of g)n.disposeIntermediateTensorInfo(b);return p}var syt={kernelName:F1,backendName:"cpu",kernelFunc:dAr};re();var pAr=Sr(gg,t=>Math.acos(t)),ayt={kernelName:gg,backendName:"cpu",kernelFunc:pAr};re();var hAr=Sr(yg,t=>Math.acosh(t)),lyt={kernelName:yg,backendName:"cpu",kernelFunc:hAr};re();function mAr(t){let{inputs:r,backend:n}=t,o=r;at(r,"addN");let i=o.map(l=>n.data.get(l.dataId).values),s=Jt(o[0].shape,o[0].dtype),a=s.values;for(let l=0;l<o.length;l++){let u=i[l];for(let c=0;c<a.length;c++)a[c]+=u[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}var uyt={kernelName:_b,backendName:"cpu",kernelFunc:mAr};re();function gAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"all");let l=H.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=di({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("all",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=H.sizeFromShape(p),m=H.makeZerosTypedArray(H.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];v=v&&_}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var cyt={kernelName:cS,backendName:"cpu",kernelFunc:gAr};re();function yAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"any");let l=H.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=di({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("any",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=H.sizeFromShape(p),m=H.makeZerosTypedArray(H.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];v=v||_}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var fyt={kernelName:fS,backendName:"cpu",kernelFunc:yAr};re();function bAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;at(i,"argMax");let a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=di({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMax",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=H.sizeFromShape(f),h=H.makeZerosTypedArray(p,"int32"),m=H.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){let b=y*m,x=g[b],v=0;for(let w=0;w<m;++w){let _=g[b+w];_>x&&(x=_,v=w)}h[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",h)}var dyt={kernelName:Sb,backendName:"cpu",kernelFunc:bAr};re();function xAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o;at(i,"argMin");let a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=di({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),a=[a[0]],ce.assertAxesAreInnerMostDims("argMin",a,u.shape.length);let[f,d]=ce.computeOutAndReduceShapes(u.shape,a),p=H.sizeFromShape(f),h=H.makeZerosTypedArray(p,"int32"),m=H.sizeFromShape(d),g=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){let b=y*m,x=g[b],v=0;for(let w=0;w<m;++w){let _=g[b+w];_<x&&(x=_,v=w)}h[y]=v}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(f,"int32",h)}var pyt={kernelName:Cb,backendName:"cpu",kernelFunc:xAr};re();var vAr=Sr(bg,t=>Math.asin(t)),hyt={kernelName:bg,backendName:"cpu",kernelFunc:vAr};re();var wAr=Sr(xg,t=>Math.asinh(t)),myt={kernelName:xg,backendName:"cpu",kernelFunc:wAr};re();var _Ar=Sr(vg,t=>Math.atan(t)),gyt={kernelName:vg,backendName:"cpu",kernelFunc:_Ar};re();var SAr=hn((t,r)=>Math.atan2(t,r)),CAr=Sn(_g,SAr),yyt={kernelName:_g,backendName:"cpu",kernelFunc:CAr};re();var EAr=Sr(wg,t=>Math.atanh(t)),byt={kernelName:wg,backendName:"cpu",kernelFunc:EAr};re();re();function DR(t,r,n,o,i,s){let a=i.strideHeight,l=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,m=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Jt(i.outShape,n),y=g.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],x=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let w=0;w<i.batchSize;++w){let _=w*b,C=w*o[0];for(let S=0;S<i.inChannels;++S)for(let E=0;E<i.outHeight;++E){let A=E*a-p,N=Math.max(0,A),k=Math.min(i.inHeight,f+A),R=_+E*x;for(let I=0;I<i.outWidth;++I){let L=I*l-h,j=Math.max(0,L),M=Math.min(i.inWidth,d+L),V=m,G=0,U=0;for(let X=N;X<k;X+=u){let pe=C+X*o[1];for(let $=j;$<M;$+=c){let O=pe+$*o[2],z=t[O+S];s==="max"&&z>V?V=z:s==="avg"&&(G+=z,U++)}if(isNaN(V))break}let Y=R+I*v+S;y[Y]=s==="avg"?G/U:V}}}return g}function vee(t,r,n,o,i=!1,s=!1){let a=Jt(o.outShape,"int32"),l=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,f=o.dilationWidth,d=o.effectiveFilterHeight,p=o.effectiveFilterWidth,h=o.padInfo.top,m=o.padInfo.left,g=Jt(r,n,t);for(let y=0;y<o.batchSize;++y)for(let b=0;b<o.inChannels;++b)for(let x=0;x<o.outHeight;++x){let v=x*l-h,w=v;for(;w<0;)w+=c;let _=Math.min(o.inHeight,d+v);for(let C=0;C<o.outWidth;++C){let S=C*u-m,E=S;for(;E<0;)E+=f;let A=Math.min(o.inWidth,p+S),N=Number.NEGATIVE_INFINITY,k=-1;for(let R=w;R<_;R+=c){let I=R-v;for(let L=E;L<A;L+=f){let j=L-S,M=g.get(y,R,L,b);M>N&&(N=M,i?k=s?((y*o.inHeight+R)*o.inWidth+L)*o.inChannels+b:(R*o.inWidth+L)*o.inChannels+b:k=I*p+j)}}a.set(k,y,x,C,b)}}return a}function wee(t,r,n,o,i,s){let a=i.strideDepth,l=i.strideHeight,u=i.strideWidth,c=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=i.padInfo.front,y=i.padInfo.top,b=i.padInfo.left,x=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Jt(i.outShape,n),w=v.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let A=0;A<i.batchSize;++A){let N=A*_,k=A*o[0];for(let R=0;R<i.inChannels;++R)for(let I=0;I<i.outDepth;++I){let L=I*a-g,j=L;for(;j<0;)j+=c;let M=Math.min(i.inDepth,p+L),V=N+I*C;for(let G=0;G<i.outHeight;++G){let U=G*l-y,Y=U;for(;Y<0;)Y+=f;let X=Math.min(i.inHeight,h+U),pe=V+G*S;for(let $=0;$<i.outWidth;++$){let O=$*u-b,z=O;for(;z<0;)z+=d;let q=Math.min(i.inWidth,m+O),ee=pe+$*E,ae=x,Q=0,le=0;for(let Z=j;Z<M;Z+=c){let ge=k+Z*o[1];for(let ne=Y;ne<X;ne+=f){let ye=ge+ne*o[2];for(let xe=z;xe<q;xe+=d){let Ne=ye+xe*o[3],Ae=t[Ne+R];if(s==="max"&&Ae>ae?ae=Ae:s==="avg"&&(Q+=Ae,le++),isNaN(ae))break}if(isNaN(ae))break}if(isNaN(ae))break}let ie=ee+R;w[ie]=s==="avg"?Q/Math.max(le,1):ae}}}}return v}function xyt(t,r){let n=Jt(r.outShape,"int32"),o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,a=r.dilationDepth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,h=r.padInfo.top,m=r.padInfo.left;for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outDepth;++b){let x=b*o-p,v=x;for(;v<0;)v+=a;let w=Math.min(r.inDepth,c+x);for(let _=0;_<r.outHeight;++_){let C=_*i-h,S=C;for(;S<0;)S+=l;let E=Math.min(r.inHeight,f+C);for(let A=0;A<r.outWidth;++A){let N=A*s-m,k=N;for(;k<0;)k+=u;let R=Math.min(r.inWidth,d+N),I=Number.NEGATIVE_INFINITY,L=-1;for(let j=v;j<w;j+=a){let M=j-x;for(let V=S;V<E;V+=l){let G=V-C;for(let U=k;U<R;U+=u){let Y=U-N,X=t.get(g,j,V,U,y);X>=I&&(I=X,L=M*f*d+G*f+Y)}}}n.set(L,g,b,_,A,y)}}}return n}function TAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;at(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))d=ml({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=H.computeStrides(i.shape),m=DR(p,i.shape,i.dtype,h,f,"avg");d=n.makeTensorInfo(f.outShape,i.dtype,m.values)}return d}var vyt={kernelName:Eb,backendName:"cpu",kernelFunc:TAr};re();function AAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;at(i,"avgPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=wee(d,i.shape,i.dtype,H.computeStrides(i.shape),f,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}var wyt={kernelName:Tb,backendName:"cpu",kernelFunc:AAr};re();function kAr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;at([i,s],"avgPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=f.strideDepth,p=f.strideHeight,h=f.strideWidth,m=f.filterDepth,g=f.filterHeight,y=f.filterWidth,b=f.dilationDepth,x=f.dilationHeight,v=f.dilationWidth,w=f.effectiveFilterDepth,_=f.effectiveFilterHeight,C=f.effectiveFilterWidth,S=w-1-f.padInfo.front,E=C-1-f.padInfo.left,A=_-1-f.padInfo.top,N=Jt(s.shape,"float32"),k=1/(m*g*y),R=n.bufferSync(i);for(let I=0;I<f.batchSize;++I)for(let L=0;L<f.inChannels;++L)for(let j=0;j<f.inDepth;++j)for(let M=0;M<f.inHeight;++M)for(let V=0;V<f.inWidth;++V){let G=j-S,U=M-A,Y=V-E,X=0;for(let pe=0;pe<w;pe+=b){let $=(G+pe)/d;if(!($<0||$>=f.outDepth||Math.floor($)!==$))for(let O=0;O<_;O+=x){let z=(U+O)/p;if(!(z<0||z>=f.outHeight||Math.floor(z)!==z))for(let q=0;q<C;q+=v){let ee=(Y+q)/h;if(ee<0||ee>=f.outWidth||Math.floor(ee)!==ee)continue;let ae=R.get(I,$,z,ee,L);X+=ae}}}N.set(X*k,I,j,M,V,L)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}var _yt={kernelName:pS,backendName:"cpu",kernelFunc:kAr};re();function IAr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;at([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=f.strideHeight,p=f.strideWidth,h=f.filterHeight,m=f.filterWidth,g=f.dilationHeight,y=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,v=x-1-f.padInfo.left,w=b-1-f.padInfo.top,_=Jt(a.shape,"float32"),C=1/(h*m),S=n.data.get(i.dataId).values,E=Jt(i.shape,"float32",S);for(let A=0;A<f.batchSize;++A)for(let N=0;N<f.inChannels;++N)for(let k=0;k<f.inHeight;++k)for(let R=0;R<f.inWidth;++R){let I=k-w,L=R-v,j=0;for(let M=0;M<b;M+=g){let V=(I+M)/d;if(!(V<0||V>=f.outHeight||Math.floor(V)!==V))for(let G=0;G<x;G+=y){let U=(L+G)/p;if(U<0||U>=f.outWidth||Math.floor(U)!==U)continue;let Y=E.get(A,V,U,N);j+=Y}}_.set(j*C,A,k,R,N)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}var Syt={kernelName:dS,backendName:"cpu",kernelFunc:IAr};re();function DAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,scale:s,offset:a,mean:l,variance:u}=r;H.assert(l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),H.assert(a==null||l.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),H.assert(s==null||l.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),at([i,l,u,s,a],"batchNorm");let{varianceEpsilon:c}=o;c==null&&(c=.001);let f=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),m=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(f.length),y=m.length,b=h.length,x=p.length,v=d.length,w=0,_=0,C=0,S=0;for(let E=0;E<f.length;++E)g[E]=m[w++]+(f[E]-d[_++])*h[C++]/Math.sqrt(p[S++]+c),w>=y&&(w=0),_>=v&&(_=0),C>=b&&(C=0),S>=x&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,g)}var Cyt={kernelName:Lb,backendName:"cpu",kernelFunc:DAr};re();function NAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;at([i],"batchToSpaceND");let l=s.reduce((b,x)=>b*x),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),h=mn({inputs:{x:i},backend:n,attrs:{shape:u}}),m=di({inputs:{x:h},backend:n,attrs:{perm:c}}),g=mn({inputs:{x:m},backend:n,attrs:{shape:f}}),y=rh({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var Eyt={kernelName:kb,backendName:"cpu",kernelFunc:NAr};re();function OAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=AR(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var Tyt={kernelName:hS,backendName:"cpu",kernelFunc:OAr};re();function FAr(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.data.get(o.dataId).values,a=n.data.get(i.dataId).values,l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var Ayt={kernelName:mS,backendName:"cpu",kernelFunc:FAr};re();var RAr=Sr(Cg,(t,r)=>{let n=r;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),kyt={kernelName:Cg,backendName:"cpu",kernelFunc:RAr};re();var MAr=t=>{let{x:r}=t.inputs,n=t.backend,o=new Float32Array(H.sizeFromShape(r.shape)),i=n.data.get(r.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values;for(let c=0;c<l.length;c++){let f=l[c],d=u[c];o[c]=Math.hypot(f,d)}return n.makeOutput(o,r.shape,"float32")},Iyt={kernelName:Ib,backendName:"cpu",kernelFunc:MAr};re();re();function nb(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.data.get(o.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}var Dyt={kernelName:RS,backendName:"cpu",kernelFunc:nb};function $2(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=H.parseAxisParam(i,r[0].shape)[0],a=r.map(g=>g.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(g=>g.shape),s);if(H.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(g=>H.sizeFromShape(g.shape)>0);if(u.length===1)return ml({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){let g=u.map(w=>Jp({inputs:{input:w},backend:n})),y=u.map(w=>nb({inputs:{input:w},backend:n})),b=$2({inputs:g,backend:n,attrs:{axis:s}}),x=$2({inputs:y,backend:n,attrs:{axis:s}}),v=Ls({inputs:{real:b,imag:x},backend:n});return g.forEach(w=>n.disposeIntermediateTensorInfo(w)),y.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),v}let c=u.map(g=>{let b=[-1,H.sizeFromShape(g.shape.slice(s))];return mn({inputs:{x:g},backend:n,attrs:{shape:b}})}),f=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));l=ce.computeOutShape(c.map(g=>g.shape),1);let d=c[0].shape[0]===1,p=ree(f,l,r[0].dtype,d),h=ce.computeOutShape(u.map(g=>g.shape),s),m=n.makeTensorInfo(h,r[0].dtype,p);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var Nyt={kernelName:Db,backendName:"cpu",kernelFunc:$2};re();function sEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o;at([i,s],"conv2d");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,b=p.padInfo.left,x=p.padInfo.top,v=p.dataFormat==="channelsLast",w=new Cn(p.outShape,i.dtype),_=H.computeStrides(i.shape),C=H.computeStrides(s.shape),S=_[0],E=v?_[1]:_[2],A=v?_[2]:1,N=v?1:_[1],k=w.strides[0],R=v?w.strides[1]:w.strides[2],I=v?w.strides[2]:1,L=v?1:w.strides[1],j=n.data.get(i.dataId).values,M=n.data.get(s.dataId).values,V=w.values;for(let G=0;G<p.batchSize;++G){let U=G*S,Y=G*k;for(let X=0;X<p.outHeight;++X){let pe=Y+X*R,$=X*p.strideHeight-x;for(let O=0;O<h;++O){let z=$+O*g;if(z<0||z>=p.inHeight)continue;let q=O*C[0],ee=U+z*E;for(let ae=0;ae<p.outWidth;++ae){let Q=pe+ae*I,le=ae*p.strideWidth-b;for(let ie=0;ie<m;++ie){let Z=le+ie*y;if(Z<0||Z>=p.inWidth)continue;let ge=q+ie*C[1],ne=ee+Z*A,ye=ge;for(let xe=0;xe<p.inChannels;++xe){let Ne=j[ne+xe*N];for(let Ae=0;Ae<p.outChannels;++Ae)V[Q+Ae*L]+=Ne*M[ye+Ae];ye+=p.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,V)}var Oyt={kernelName:Nb,backendName:"cpu",kernelFunc:sEe};re();function PAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o;at([i,s],"conv2dBackpropFilter");let d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:y}=p,b=p.dataFormat==="channelsLast",x=new Cn(p.filterShape,"float32"),v=p.padInfo.left,w=p.padInfo.top,_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,S=new Cn(i.shape,i.dtype,_),E=new Cn(s.shape,s.dtype,C);for(let A=0;A<g;++A){let N=Math.max(0,Math.ceil((w-A)/h)),k=Math.min(p.outHeight,(p.inHeight+w-A)/h);for(let R=0;R<y;++R){let I=Math.max(0,Math.ceil((v-R)/m)),L=Math.min(p.outWidth,(p.inWidth+v-R)/m);for(let j=0;j<p.inChannels;++j)for(let M=0;M<p.outChannels;++M){let V=0;for(let G=0;G<p.batchSize;++G)for(let U=N;U<k;++U){let Y=A+U*h-w;for(let X=I;X<L;++X){let pe=R+X*m-v;b?V+=S.get(G,Y,pe,j)*E.get(G,U,X,M):V+=S.get(G,j,Y,pe)*E.get(G,M,U,X)}}x.set(V,A,R,j,M)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var Fyt={kernelName:yS,backendName:"cpu",kernelFunc:PAr};re();function jAr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o;at([i,s],"conv2dBackpropInput");let d=H.computeStrides(s.shape),p=H.computeStrides(i.shape),h=ce.convertConv2DDataFormat(c),m=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,h),g=new Cn(m.inShape,"float32"),y=g.values,b=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,[v,w,_]=d,{batchSize:C,filterHeight:S,filterWidth:E,inChannels:A,inHeight:N,inWidth:k,outChannels:R,outHeight:I,outWidth:L,strideHeight:j,strideWidth:M}=m;h=m.dataFormat;let V=S-1-m.padInfo.top,G=E-1-m.padInfo.left,U=h==="channelsLast",Y=g.strides[0],X=U?g.strides[1]:g.strides[2],pe=U?g.strides[2]:1,$=U?1:g.strides[1],O=p[0],z=U?p[1]:p[2],q=U?p[2]:1,ee=U?1:p[1];for(let ae=0;ae<C;++ae)for(let Q=0;Q<A;++Q)for(let le=0;le<N;++le){let ie=le-V,Z=Math.max(0,Math.ceil(ie/j)),ge=Math.min(I,(S+ie)/j);for(let ne=0;ne<k;++ne){let ye=ne-G,xe=Math.max(0,Math.ceil(ye/M)),Ne=Math.min(L,(E+ye)/M),Ae=0;for(let ze=Z;ze<ge;++ze){let lt=ze*j-ie;for(let We=xe;We<Ne;++We){let Bt=We*M-ye,Tt=O*ae+z*ze+q*We,At=v*(S-1-lt)+w*(E-1-Bt)+_*Q;for(let Mt=0;Mt<R;++Mt){let Ot=b[Tt+ee*Mt],Le=x[At+Mt];Ae+=Ot*Le}}}let Re=Y*ae+X*le+pe*ne+$*Q;y[Re]=Ae}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var Ryt={kernelName:Ob,backendName:"cpu",kernelFunc:jAr};re();function LAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o;at([i,s],"conv3d");let c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),{filterDepth:f,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:y}=c,b=y.front,x=y.left,v=y.top,w=new Cn(c.outShape,i.dtype),_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,S=w.values,E=H.computeStrides(i.shape),A=H.computeStrides(s.shape);for(let N=0;N<c.batchSize;++N){let k=N*E[0],R=N*w.strides[0];for(let I=0;I<c.outDepth;++I){let L=R+I*w.strides[1],j=I*c.strideDepth-b;for(let M=0;M<f;++M){let V=j+M*h;if(V<0||V>=c.inDepth)continue;let G=M*A[0],U=k+V*E[1];for(let Y=0;Y<c.outHeight;++Y){let X=L+Y*w.strides[2],pe=Y*c.strideHeight-v;for(let $=0;$<d;++$){let O=pe+$*m;if(O<0||O>=c.inHeight)continue;let z=G+$*A[1],q=U+O*E[2];for(let ee=0;ee<c.outWidth;++ee){let ae=X+ee*c.outChannels,Q=ee*c.strideWidth-x;for(let le=0;le<p;++le){let ie=Q+le*g;if(ie<0||ie>=c.inWidth)continue;let Z=z+le*A[2],ge=q+ie*c.inChannels,ne=Z;for(let ye=0;ye<c.inChannels;++ye){let xe=_[ge+ye];for(let Ne=0;Ne<c.outChannels;++Ne)S[ae+Ne]+=xe*C[ne+Ne];ne+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var Myt={kernelName:Fb,backendName:"cpu",kernelFunc:LAr};re();function BAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o;at([i,s],"conv3dBackpropFilterV2");let c=H.computeStrides(i.shape),f=H.computeStrides(s.shape),d=ce.computeConv3DInfo(i.shape,u,a,1,l),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,g=d.filterDepth,y=d.filterHeight,b=d.filterWidth,x=new Cn(d.filterShape,"float32"),v=x.values,[w,_,C,S]=x.strides,E=n.data.get(s.dataId).values,[A,N,k,R]=f,I=n.data.get(i.dataId).values,[L,j,M,V]=c,G=d.padInfo.front,U=d.padInfo.left,Y=d.padInfo.top;for(let X=0;X<g;++X){let pe=Math.max(0,Math.ceil((G-X)/p)),$=Math.min(d.outDepth,(d.inDepth+G-X)/p),O=X*w;for(let z=0;z<y;++z){let q=Math.max(0,Math.ceil((Y-z)/h)),ee=Math.min(d.outHeight,(d.inHeight+Y-z)/h),ae=z*_+O;for(let Q=0;Q<b;++Q){let le=Math.max(0,Math.ceil((U-Q)/m)),ie=Math.min(d.outWidth,(d.inWidth+U-Q)/m),Z=Q*C+ae;for(let ge=0;ge<d.inChannels;++ge){let ne=ge*S+Z;for(let ye=0;ye<d.outChannels;++ye){let xe=0;for(let Ne=0;Ne<d.batchSize;++Ne){let Ae=Ne*L,Re=Ne*A;for(let ze=pe;ze<$;++ze){let We=(X+ze*p-G)*j+Ae,Bt=ze*N+Re;for(let Tt=q;Tt<ee;++Tt){let Mt=(z+Tt*h-Y)*M+We,Ot=Tt*k+Bt;for(let Le=le;Le<ie;++Le){let Ge=(Q+Le*m-U)*V+Mt,fe=Le*R+Ot;xe+=I[Ge+ge]*E[fe+ye]}}}}v[ne+ye]=xe}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var Pyt={kernelName:bS,backendName:"cpu",kernelFunc:BAr};re();function $Ar(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o;at([i],"conv3dBackpropInputV2");let c=H.computeStrides(i.shape),f=H.computeStrides(s.shape),d=ce.computeConv3DInfo(u,s.shape,l,1,a),p=new Cn(d.inShape,"float32"),h=p.values,[m,g,y,b]=p.strides,x=n.data.get(i.dataId).values,[v,w,_,C]=c,S=n.data.get(s.dataId).values,[E,A,N,k]=f,{batchSize:R,filterDepth:I,filterHeight:L,filterWidth:j,inChannels:M,inDepth:V,inHeight:G,inWidth:U,outChannels:Y,outDepth:X,outHeight:pe,outWidth:$,strideDepth:O,strideHeight:z,strideWidth:q}=d,ee=I-1-d.padInfo.front,ae=L-1-d.padInfo.top,Q=j-1-d.padInfo.left;for(let le=0;le<R;++le)for(let ie=0;ie<M;++ie)for(let Z=0;Z<V;++Z){let ge=Z-ee,ne=Math.max(0,Math.ceil(ge/O)),ye=Math.min(X,(I+ge)/O);for(let xe=0;xe<G;++xe){let Ne=xe-ae,Ae=Math.max(0,Math.ceil(Ne/z)),Re=Math.min(pe,(L+Ne)/z);for(let ze=0;ze<U;++ze){let lt=ze-Q,We=Math.max(0,Math.ceil(lt/q)),Bt=Math.min($,(j+lt)/q),Tt=0;for(let At=ne;At<ye;++At){let Mt=At*O-ge;for(let Ot=Ae;Ot<Re;++Ot){let Le=Ot*z-Ne;for(let ut=We;ut<Bt;++ut){let Ge=ut*q-lt,fe=v*le+w*At+_*Ot+C*ut,me=E*(I-1-Mt)+A*(L-1-Le)+N*(j-1-Ge)+k*ie;for(let oe=0;oe<Y;++oe){let be=x[fe+oe],Fe=S[me+oe];Tt+=be*Fe}}}}h[m*le+g*Z+y*xe+b*ze+ie]=Tt}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}var jyt={kernelName:xS,backendName:"cpu",kernelFunc:$Ar};re();var zAr=Sr(Eg,t=>Math.cos(t)),Lyt={kernelName:Eg,backendName:"cpu",kernelFunc:zAr};re();var UAr=Sr(Tg,t=>Math.cosh(t)),Byt={kernelName:Tg,backendName:"cpu",kernelFunc:UAr};re();function VAr(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,[f,d,p,h]=i.shape,m=s.shape[0],[g,y]=l,b=Jt([m,g,y,h],"float32"),x=n.data.get(s.dataId).values,v=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,_=H.computeStrides(i.shape),C=H.computeStrides(b.shape);for(let S=0;S<m;S++){let E=S*4,A=x[E],N=x[E+1],k=x[E+2],R=x[E+3],I=v[S];if(I>=f)continue;let L=g>1?(k-A)*(d-1)/(g-1):0,j=y>1?(R-N)*(p-1)/(y-1):0;for(let M=0;M<g;M++){let V=g>1?A*(d-1)+M*L:.5*(A+k)*(d-1);if(V<0||V>d-1){for(let G=0;G<y;G++)for(let U=0;U<h;U++){let Y=U+G*C[2]+M*C[1]+S*C[0];b.values[Y]=c}continue}if(u==="bilinear"){let G=Math.floor(V),U=Math.ceil(V),Y=V-G;for(let X=0;X<y;X++){let pe=y>1?N*(p-1)+X*j:.5*(N+R)*(p-1);if(pe<0||pe>p-1){for(let q=0;q<h;q++){let ee=q+X*C[2]+M*C[1]+S*C[0];b.values[ee]=c}continue}let $=Math.floor(pe),O=Math.ceil(pe),z=pe-$;for(let q=0;q<h;q++){let ee=q+$*_[2]+G*_[1]+I*_[0],ae=w[ee];ee=q+O*_[2]+G*_[1]+I*_[0];let Q=w[ee];ee=q+$*_[2]+U*_[1]+I*_[0];let le=w[ee];ee=q+O*_[2]+U*_[1]+I*_[0];let ie=w[ee],Z=ae+(Q-ae)*z,ge=le+(ie-le)*z;ee=q+X*C[2]+M*C[1]+S*C[0],b.values[ee]=Z+(ge-Z)*Y}}}else for(let G=0;G<y;++G){let U=y>1?N*(p-1)+G*j:.5*(N+R)*(p-1);if(U<0||U>p-1){for(let pe=0;pe<h;pe++){let $=pe+G*C[2]+M*C[1]+S*C[0];b.values[$]=c}continue}let Y=Math.round(U),X=Math.round(V);for(let pe=0;pe<h;pe++){let $=pe+Y*_[2]+X*_[1]+I*_[0],O=pe+G*C[2]+M*C[1]+S*C[0];b.values[O]=w[$]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var $yt={kernelName:wS,backendName:"cpu",kernelFunc:VAr};re();function GAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;at(i,"cumprod");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=di({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=zi(c.dtype,"int32"),p=H.makeOnesTypedArray(H.sizeFromShape(c.shape),d),h=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=l?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){let v=g(b,x);if(x===0)p[v]=a?1:h[v];else{let w=g(b,x-1);p[v]=a?h[w]*p[w]:h[v]*p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=di({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var zyt={kernelName:vS,backendName:"cpu",kernelFunc:GAr};re();function WAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;at(i,"cumsum");let u=ce.getAxesPermutation([s],i.shape.length),c=i;u!=null&&(c=di({inputs:{x:i},backend:n,attrs:{perm:u}}));let f=ce.getInnerMostAxes(1,i.shape.length)[0];if(f!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${f}`);let d=zi(c.dtype,"int32"),p=H.makeZerosTypedArray(H.sizeFromShape(c.shape),d),h=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=l?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){let v=g(b,x);if(x===0)p[v]=a?0:h[v];else{let w=g(b,x-1);p[v]=a?h[w]+p[w]:h[v]+p[w]}}let y=n.makeTensorInfo(c.shape,d,p);if(u!=null){let b=ce.getUndoAxesPermutation(u),x=di({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),x}return y}var Uyt={kernelName:Rb,backendName:"cpu",kernelFunc:WAr};re();function qAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=AR(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=tee(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var Vyt={kernelName:_S,backendName:"cpu",kernelFunc:qAr};re();function HAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o;H.assert(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);let l=i.shape[0],u=i.shape[1],c=i.shape[2],f=i.shape[3],d=u*s,p=c*s,h=f/(s*s),m=n.data.get(i.dataId).values,g=new Float32Array(l*d*p*h),y=0;for(let b=0;b<l;++b)for(let x=0;x<d;++x){let v=Math.floor(x/s),w=x%s;for(let _=0;_<p;++_){let C=Math.floor(_/s),S=_%s,E=(w*s+S)*h;for(let A=0;A<h;++A){let k=A+E+f*(C+c*(v+u*b));g[y++]=m[k]}}}return n.makeTensorInfo([l,d,p,h],i.dtype,g)}var Gyt={kernelName:SS,backendName:"cpu",kernelFunc:HAr};re();function aEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;at([i,s],"depthwiseConv2DNative");let f=H.computeStrides(i.shape),d=H.computeStrides(s.shape),p=u;p==null&&(p=[1,1]),H.assert(ce.eitherStridesOrDilationsAreOne(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);let h=ce.computeConv2DInfo(i.shape,s.shape,a,p,l,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:y,dilationWidth:b,padInfo:x}=h,v=x.left,w=x.top,_=h.outChannels/h.inChannels,C=new Cn(h.outShape,i.dtype),S=n.data.get(i.dataId).values,E=n.data.get(s.dataId).values,A=C.values;for(let N=0;N<h.batchSize;++N){let k=N*f[0],R=N*C.strides[0];for(let I=0;I<h.outHeight;++I){let L=R+I*C.strides[1],j=I*h.strideHeight-w;for(let M=0;M<m;++M){let V=j+M*y;if(V<0||V>=h.inHeight)continue;let G=M*d[0],U=k+V*f[1];for(let Y=0;Y<h.outWidth;++Y){let X=L+Y*C.strides[2],pe=Y*h.strideWidth-v;for(let $=0;$<g;++$){let O=pe+$*b;if(O<0||O>=h.inWidth)continue;let z=G+$*d[1],q=U+O*h.inChannels,ee=X,ae=z;for(let Q=0;Q<h.inChannels;++Q){let le=S[q+Q];for(let ie=0;ie<_;++ie)A[ee+ie]+=le*E[ae+ie];ee+=_,ae+=_}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var Wyt={kernelName:Mb,backendName:"cpu",kernelFunc:aEe};re();function YAr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o;at([i,s],"depthwiseConv2dNativeBackpropFilter");let d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=d,y=new Cn(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,v=d.outChannels/d.inChannels,w=n.data.get(i.dataId).values,_=new Cn(i.shape,i.dtype,w),C=n.data.get(s.dataId).values,S=new Cn(s.shape,s.dtype,C);for(let E=0;E<m;++E){let A=Math.max(0,Math.ceil((x-E)/p)),N=Math.min(d.outHeight,(d.inHeight+x-E)/p);for(let k=0;k<g;++k){let R=Math.max(0,Math.ceil((b-k)/h)),I=Math.min(d.outWidth,(d.inWidth+b-k)/h);for(let L=0;L<d.outChannels;++L){let j=Math.trunc(L/v),M=L%v,V=0;for(let G=0;G<d.batchSize;++G)for(let U=A;U<N;++U){let Y=E+U*p-x;for(let X=R;X<I;++X){let pe=k+X*h-b;V+=_.get(G,Y,pe,j)*S.get(G,U,X,L)}}y.set(V,E,k,j,M)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var qyt={kernelName:CS,backendName:"cpu",kernelFunc:YAr};re();function XAr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o;at([i,s],"depthwiseConv2DNativeBackpropInput");let d=H.computeStrides(i.shape),p=H.computeStrides(s.shape),h=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),m=new Cn(h.inShape,"float32"),g=m.values,[y,b,x]=m.strides,v=n.data.get(i.dataId).values,[w,_,C]=d,S=n.data.get(s.dataId).values,[E,A,N]=p,{batchSize:k,filterHeight:R,filterWidth:I,inChannels:L,inHeight:j,inWidth:M,outChannels:V,outHeight:G,outWidth:U,strideHeight:Y,strideWidth:X}=h,pe=R-1-h.padInfo.top,$=I-1-h.padInfo.left,O=V/L;for(let z=0;z<k;++z)for(let q=0;q<L;++q)for(let ee=0;ee<j;++ee){let ae=ee-pe,Q=Math.max(0,Math.ceil(ae/Y)),le=Math.min(G,(R+ae)/Y);for(let ie=0;ie<M;++ie){let Z=ie-$,ge=Math.max(0,Math.ceil(Z/X)),ne=Math.min(U,(I+Z)/X),ye=0;for(let xe=Q;xe<le;++xe){let Ne=xe*Y-ae;for(let Ae=ge;Ae<ne;++Ae){let Re=Ae*X-Z,ze=w*z+_*xe+C*Ae,lt=E*(R-1-Ne)+A*(I-1-Re)+N*q;for(let We=0;We<O;++We){let Bt=q*O+We,Tt=v[ze+Bt],At=S[lt+We];ye+=Tt*At}}}g[y*z+b*ee+x*ie+q]=ye}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var Hyt={kernelName:ES,backendName:"cpu",kernelFunc:XAr};re();function KAr(t){let{inputs:r,backend:n}=t,{x:o}=r,i=H.sizeFromShape(o.shape),s=n.data.get(o.dataId).values,a=Jt([i,i],o.dtype),l=a.values;for(let c=0;c<s.length;c++)l[c*i+c]=s[c];let u=[...o.shape,...o.shape];return n.makeTensorInfo(u,a.dtype,a.values)}var Yyt={kernelName:TS,backendName:"cpu",kernelFunc:KAr};re();var Xyt={kernelName:Pb,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i}=t,{strides:s,pad:a,dilations:l}=n,u=r,c=u.data.get(o.dataId).values,f=o.shape.length,d=u.data.get(i.dataId).values,p=i.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:y,outHeight:b,outWidth:x,padInfo:v,strideHeight:w,strideWidth:_,filterHeight:C,filterWidth:S,dilationHeight:E,dilationWidth:A,outShape:N}=ce.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),k=H.sizeFromShape(N),R=N.length,I=H.getArrayFromDType(o.dtype,k);for(let j=0;j<h;++j)for(let M=0;M<b;++M){let V=M*w-v.top;for(let G=0;G<x;++G){let U=G*_-v.left;for(let Y=0;Y<y;++Y){let X=Number.MIN_SAFE_INTEGER;for(let $=0;$<C;++$){let O=V+$*E;if(O>=0&&O<m)for(let z=0;z<S;++z){let q=U+z*A;if(q>=0&&q<g){let ee=H.locToIndex([j,O,q,Y],f,H.computeStrides(o.shape)),ae=H.locToIndex([$,z,Y],p,H.computeStrides(i.shape)),Q=c[ee]+d[ae];Q>X&&(X=Q)}}}let pe=H.locToIndex([j,M,G,Y],R,H.computeStrides(N));I[pe]=X}}}return{dataId:u.write(H.toTypedArray(I,o.dtype),N,o.dtype),shape:N,dtype:o.dtype}}};re();var Kyt={kernelName:Hk,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=H.toNestedArray(o.shape,c.data.get(o.dataId).values),d=H.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:A}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);H.assert(s.rank===A.length,()=>`Error in ${Hk}, dy must have the same rank as output ${A.length}, but got ${s.rank}`);let N=H.toNestedArray(A,c.data.get(s.dataId).values),k=H.makeZerosNestedTypedArray(i.shape,i.dtype);for(let I=0;I<p;++I)for(let L=0;L<y;++L){let j=L*v-x.top;for(let M=0;M<b;++M){let V=M*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,Y=0,X=0;for(let pe=0;pe<_;++pe){let $=j+pe*S;if($>=0&&$<h)for(let O=0;O<C;++O){let z=V+O*E;if(z>=0&&z<m){let q=f[I][$][z][G]+d[pe][O][G];q>U&&(U=q,Y=pe,X=O)}}}k[Y][X][G]+=N[I][L][M][G]}}}return{dataId:c.write(H.toTypedArray(k,o.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};re();var Zyt={kernelName:qk,backendName:"cpu",kernelFunc:({inputs:t,backend:r,attrs:n})=>{let{x:o,filter:i,dy:s}=t,{strides:a,pad:l,dilations:u}=n,c=r,f=H.toNestedArray(o.shape,c.data.get(o.dataId).values),d=H.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:x,strideHeight:v,strideWidth:w,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:A}=ce.computeDilation2DInfo(o.shape,i.shape,a,l,"NHWC",u);H.assert(s.rank===A.length,()=>`Error in ${qk}, dy must have the same rank as output ${A.length}, but got ${s.rank}`);let N=H.toNestedArray(A,c.data.get(s.dataId).values),k=H.makeZerosNestedTypedArray(o.shape,o.dtype);for(let I=0;I<p;++I)for(let L=0;L<y;++L){let j=L*v-x.top;for(let M=0;M<b;++M){let V=M*w-x.left;for(let G=0;G<g;++G){let U=Number.MIN_SAFE_INTEGER,Y=j<0?0:j,X=V<0?0:V;for(let pe=0;pe<_;++pe){let $=j+pe*S;if($>=0&&$<h)for(let O=0;O<C;++O){let z=V+O*E;if(z>=0&&z<m){let q=f[I][$][z][G]+d[pe][O][G];q>U&&(U=q,Y=$,X=z)}}}k[I][Y][X][G]+=N[I][L][M][G]}}}return{dataId:c.write(H.toTypedArray(k,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function ZAr(t){let{inputs:r,backend:n,attrs:o}=t,{image:i}=r,{canvas:s,options:a}=o,{contextOptions:l,imageOptions:u}=a||{},c=u?.alpha||1,f=l?.contextType||"2d";if(f!=="2d")throw new Error(`Context type ${l.contextType} is not supported by the CPU backend.`);let d=s.getContext(f,l?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${f} type.`);let[p,h]=i.shape.slice(0,2),m=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,y=i.dtype==="float32"?255:1,b=new Uint8ClampedArray(h*p*4);for(let v=0;v<p*h;++v){let w=[0,0,0,255*c];for(let C=0;C<m;C++){let S=g[v*m+C];if(i.dtype==="float32"){if(S<0||S>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${S}.`)}else if(i.dtype==="int32"&&(S<0||S>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${S}.`);m===1?(w[0]=S*y,w[1]=S*y,w[2]=S*y):w[C]=S*y}let _=v*4;b[_+0]=Math.round(w[0]),b[_+1]=Math.round(w[1]),b[_+2]=Math.round(w[2]),b[_+3]=Math.round(w[3])}s.width=h,s.height=p;let x=new ImageData(b,h,p);return d.putImageData(x,0,0),i}var Qyt={kernelName:Yk,backendName:"cpu",kernelFunc:ZAr};re();re();function r1(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"sum");let l;i.dtype==="bool"?l=eh({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):l=ml({inputs:{x:i},backend:n});let u=l.shape.length,c=H.parseAxisParam(s,l.shape),f=ce.getAxesPermutation(c,u),d=c,p=l;f!=null&&(p=di({inputs:{x:l},backend:n,attrs:{perm:f}}),d=ce.getInnerMostAxes(d.length,u)),ce.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,m]=ce.computeOutAndReduceShapes(p.shape,d),g=ce.upcastType(p.dtype,"int32"),y=ER(n,h,g),b=H.sizeFromShape(m),x=n.data.get(y.dataId).values,v=n.data.get(p.dataId).values;for(let w=0;w<x.length;++w){let _=w*b,C=0;for(let S=0;S<b;++S)C+=v[_+S];x[w]=C}if(a){let w=ce.expandShapeToKeepDim(y.shape,c),_=y;y=mn({inputs:{x:y},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(_)}return n.disposeIntermediateTensorInfo(l),f!=null&&n.disposeIntermediateTensorInfo(p),y}var Jyt={kernelName:ax,backendName:"cpu",kernelFunc:r1};function QAr(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,h=a.length,m=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(h,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=di({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);H.arraysEqual(v.shape,w)||(v=mn({inputs:{x:v},backend:n,attrs:{shape:w}}),m.push(v)),p===null?p=v:(p=ZA({inputs:{a:v,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=r1({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var ebt={kernelName:AS,backendName:"cpu",kernelFunc:QAr};re();function JAr(t){let{inputs:r,backend:n}=t,{dy:o,y:i}=r;at([o,i],"eluGrad");let s=new Float32Array(H.sizeFromShape(i.shape)),a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;++u){let c=a[u];c>=0?s[u]=l[u]:s[u]=l[u]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}var tbt={kernelName:kS,backendName:"cpu",kernelFunc:JAr};re();var ekr=ce.ERF_P,tkr=ce.ERF_A1,rkr=ce.ERF_A2,nkr=ce.ERF_A3,okr=ce.ERF_A4,ikr=ce.ERF_A5,skr=Sr(Ig,t=>{let r=Math.sign(t),n=Math.abs(t),o=1/(1+ekr*n);return r*(1-((((ikr*o+okr)*o+nkr)*o+rkr)*o+tkr)*o*Math.exp(-n*n))}),rbt={kernelName:Ig,backendName:"cpu",kernelFunc:skr};re();function NR(t){let{inputs:r,backend:n,attrs:o}=t,{input:i}=r,{dim:s}=o,a=i.shape.length,l=i.shape.slice(),u=s;return s<0&&(H.assert(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+s+1),l.splice(u,0,1),mn({inputs:{x:i},backend:n,attrs:{shape:l}})}var nbt={kernelName:jb,backendName:"cpu",kernelFunc:NR};re();re();re();var akr=hn((t,r)=>t/r),R6=Sn(Ag,akr),M6={kernelName:Ag,backendName:"cpu",kernelFunc:R6};function _ee(t,r,n){let o=t.shape,i=o[0],s=o[1],a=n.data.get(t.dataId),l=a.complexTensorInfos.real,u=a.complexTensorInfos.imag,c=[i,s],f=H.sizeFromShape(c),d=H.getTypedArrayFromDType("float32",f),p=H.getTypedArrayFromDType("float32",f);for(let y=0;y<i;y++){let b=rh({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,s]}}),x=rh({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,s]}}),v=Ls({inputs:{real:b,imag:x},backend:n}),{real:w,imag:_}=lkr(v,r,n),C=ce.mergeRealAndImagArrays(w,_);for(let S=0;S<s;S++){let E=ce.getComplexWithIndex(C,S);d[y*s+S]=E.real,p[y*s+S]=E.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v)}let h=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",p),g=Ls({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}function lkr(t,r,n){let o=H.sizeFromShape(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(ukr(o)){let l=lEe(s,a,o,r,n),u=[t.shape[0],t.shape[1]];if(r){let c=n.makeTensorInfo(u,"float32",l.real),f=n.makeTensorInfo(u,"float32",l.imag),d=n.makeTensorInfo([],"float32",H.createScalarValue(o,"float32")),p=ml({inputs:{x:d},backend:n}),h=M6.kernelFunc({inputs:{a:c,b:d},backend:n}),m=M6.kernelFunc({inputs:{a:f,b:p},backend:n}),g=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return l}else{let l=ce.mergeRealAndImagArrays(s,a),u=ckr(l,o,r);return ce.splitRealAndImagArrays(u)}}function ukr(t){return(t&t-1)===0}function lEe(t,r,n,o,i){if(n===1)return{real:t,imag:r};let s=ce.mergeRealAndImagArrays(t,r),a=n/2,l=ce.complexWithEvenIndex(s),u=l.real,c=l.imag,f=[u.length],d=i.makeTensorInfo(f,"float32",u),p=i.makeTensorInfo(f,"float32",c),h=Ls({inputs:{real:d,imag:p},backend:i}),m=ce.complexWithOddIndex(s),g=m.real,y=m.imag,b=[g.length],x=i.makeTensorInfo(b,"float32",g),v=i.makeTensorInfo(b,"float32",y),w=Ls({inputs:{real:x,imag:v},backend:i}),_=lEe(u,c,a,o,i),C=_.real,S=_.imag,E=[C.length],A=i.makeTensorInfo(E,"float32",C),N=i.makeTensorInfo(E,"float32",S),k=Ls({inputs:{real:A,imag:N},backend:i}),R=lEe(g,y,a,o,i),I=R.real,L=R.imag,j=[I.length],M=i.makeTensorInfo(j,"float32",I),V=i.makeTensorInfo(j,"float32",L),G=Ls({inputs:{real:M,imag:V},backend:i}),U=ce.exponents(n,o),Y=[U.real.length],X=i.makeTensorInfo(Y,"float32",U.real),pe=i.makeTensorInfo(Y,"float32",U.imag),$=Ls({inputs:{real:X,imag:pe},backend:i}),O=ZA({inputs:{a:$,b:G},backend:i}),z=rb({inputs:{a:k,b:O},backend:i}),q=O6({inputs:{a:k,b:O},backend:i}),ee=Jp({inputs:{input:z},backend:i}),ae=Jp({inputs:{input:q},backend:i}),Q=nb({inputs:{input:z},backend:i}),le=nb({inputs:{input:q},backend:i}),ie=$2({inputs:[ee,ae],backend:i,attrs:{axis:0}}),Z=$2({inputs:[Q,le],backend:i,attrs:{axis:0}}),ge=i.data.get(ie.dataId).values,ne=i.data.get(Z.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(A),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(Z),{real:ge,imag:ne}}function ckr(t,r,n){let o=new Float32Array(r*2);for(let i=0;i<r;i++){let s=0,a=0;for(let l=0;l<r;l++){let u=ce.exponent(i*l,r,n),c=ce.getComplexWithIndex(t,l);s+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(s/=r,a/=r),ce.assignToTypedArray(o,s,a,i)}return o}function fkr(t){let{inputs:r,backend:n}=t,{input:o}=r,i=H.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=mn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=_ee(l,!1,n),c=mn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var obt={kernelName:IS,backendName:"cpu",kernelFunc:fkr};re();function P6(t){let{backend:r,attrs:n}=t,{shape:o,value:i,dtype:s}=n,a=s||H.inferDtype(i),l=H.getArrayFromDType(a,H.sizeFromShape(o));return dkr(l,i,a),r.makeTensorInfo(o,a,l)}var ibt={kernelName:DS,backendName:"cpu",kernelFunc:P6};function dkr(t,r,n){t.fill(r)}re();var sbt={kernelName:NS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,i=n,s=H.getTypedArrayFromDType(o.dtype,H.sizeFromShape(o.shape)),[a,l,u,c]=o.shape,f=i.data.get(o.dataId).values;for(let p=0;p<a;p++){let h=p*u*l*c;for(let m=0;m<l;m++){let g=m*(u*c);for(let y=0;y<u;y++){let b=y*c;for(let x=0;x<c;x++){let v=Math.round(u-y-1),w=h+g+b+x,_=f[w];if(v>=0&&v<u){let C=v*c,S=h+g+C+x;_=f[S]}s[w]=_}}}}return{dataId:i.write(s,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();function pkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=sEe({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;if(f==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){let b=mn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=rb({inputs:{a:g,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else g=rb({inputs:{a:g,b:a},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){let y=g;if(f==="NCHW"&&h==="prelu"&&l.shape.length===1&&l.shape[0]!==1){let b=mn({inputs:{x:l},backend:n,attrs:{shape:[l.shape[0],1,1]}});g=QA(n,g,h,b,m),n.disposeIntermediateTensorInfo(b)}else g=QA(n,g,h,l,m);n.disposeIntermediateTensorInfo(y)}return g}var abt={kernelName:R1,backendName:"cpu",kernelFunc:pkr};re();function hkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=aEe({inputs:{x:i,filter:s},backend:n,attrs:{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p}});if(a){let y=g;g=rb({inputs:{a:g,b:a},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){let y=g;g=QA(n,g,h,l,m),n.disposeIntermediateTensorInfo(y)}return g}var lbt={kernelName:M1,backendName:"cpu",kernelFunc:hkr};re();function mkr(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=H.sizeFromShape(o.shape),a=i.shape,l=a[a.length-1],[u,c,f,d]=ce.prepareAndValidate(o,i);if(c===0)return n.makeTensorInfo(u,o.dtype,[]);let p=n.data.get(i.dataId).values,h=n.bufferSync(o),m=nee(p,h,o.dtype,c,l,f,d,o.shape,s);return n.makeTensorInfo(u,o.dtype,m.values)}var ubt={kernelName:OS,backendName:"cpu",kernelFunc:mkr};re();function gkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o;at([i,s],"gatherV2");let u=H.parseAxisParam(a,i.shape)[0],c=n.data.get(s.dataId).values,f=i.shape[u];for(let w=0;w<c.length;++w){let _=c[w];H.assert(_<=f-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${f-1}]`)}let d=l;l==null&&(d=0);let p=H.sizeFromShape(s.shape),h=ce.segment_util.collectGatherOpShapeInfo(i,s,u,d),m=mn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=mn({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),y=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],b=n.bufferSync(g),x=n.bufferSync(m),v=oee(x,b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,v.dtype,v.values)}var cbt={kernelName:Bb,backendName:"cpu",kernelFunc:gkr};re();function ykr(t){let{inputs:r,backend:n}=t,{input:o}=r,i=H.sizeFromShape(o.shape),s=o.shape[o.shape.length-1],a=i/s,l=mn({inputs:{x:o},backend:n,attrs:{shape:[a,s]}}),u=_ee(l,!0,n),c=mn({inputs:{x:u},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}var fbt={kernelName:FS,backendName:"cpu",kernelFunc:ykr};re();var bkr=Sr(Mg,t=>Number.isFinite(t)?1:0,"bool"),dbt={kernelName:Mg,backendName:"cpu",kernelFunc:bkr};re();var xkr=Sr(Pg,t=>Math.abs(t)===1/0?1:0,"bool"),pbt={kernelName:Pg,backendName:"cpu",kernelFunc:xkr};re();var vkr=Sr(jg,t=>Number.isNaN(t)?1:0,"bool"),hbt={kernelName:jg,backendName:"cpu",kernelFunc:vkr};re();function wkr(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=iee(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var mbt={kernelName:MS,backendName:"cpu",kernelFunc:wkr};re();var _kr=Sr(Bg,t=>Math.log1p(t)),gbt={kernelName:Bg,backendName:"cpu",kernelFunc:_kr};re();var Skr=hn((t,r)=>t&&r),Ckr=Sn(k1,Skr,null,"bool"),ybt={kernelName:k1,backendName:"cpu",kernelFunc:Ckr};re();var Ekr=Sr(I1,t=>t?0:1,"bool"),bbt={kernelName:I1,backendName:"cpu",kernelFunc:Ekr};re();var Tkr=hn((t,r)=>t||r),Akr=Sn(D1,Tkr,null,"bool"),xbt={kernelName:D1,backendName:"cpu",kernelFunc:Akr};re();function kkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o;at(i,"LRN");let c=i.shape[3],f=c-1,d=n.data.get(i.dataId).values,p=H.sizeFromShape(i.shape),h=new Float32Array(p);function m(g){let y=g%c,b=g-y+Math.max(0,y-s),x=g-y+Math.min(y+s,f),v=0;for(;b<=x;b++){let w=d[b];v+=w*w}return v}for(let g=0;g<p;g++){let y=m(g),b=d[g]*Math.pow(a+l*y,-u);h[g]=b}return n.makeTensorInfo(i.shape,i.dtype,h)}var vbt={kernelName:zb,backendName:"cpu",kernelFunc:kkr};re();function Ikr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o;at(a,"LRNGrad");let d=H.sizeFromShape(a.shape),p=a.shape[3],h=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,y=new Float32Array(d),b=d;for(let x=0;x<b;x++){let v=x%p,w=x-v+Math.max(0,v-l),_=x-v+Math.min(p,v+l+1),C=0;for(let S=w;S<_;S++)C+=Math.pow(m[S],2);C=c*C+u;for(let S=w;S<_;S++){let E=-2*c*f*m[S]*g[x]/C;x===S&&(E+=Math.pow(C,-f)),E*=h[x],y[S]+=E}}return n.makeTensorInfo(a.shape,i.dtype,y)}var wbt={kernelName:PS,backendName:"cpu",kernelFunc:Ikr};re();re();re();function uEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=n,u=i.shape,c=u.length,f=H.parseAxisParam(s,u),d=f,p=ce.getAxesPermutation(d,c),h=l.data.get(i.dataId).values;if(p!=null){let w=new Array(c);for(let _=0;_<w.length;_++)w[_]=u[p[_]];h=kR(h,u,i.dtype,p,w),d=ce.getInnerMostAxes(d.length,c),u=w}at(i,"max"),ce.assertAxesAreInnerMostDims("max",d,c);let[m,g]=ce.computeOutAndReduceShapes(u,d),y=H.sizeFromShape(g),b=see(h,y,m,i.dtype),x=l.write(b,m,i.dtype),v=m;return a&&(v=ce.expandShapeToKeepDim(m,f)),{dataId:x,shape:v,dtype:i.dtype}}var _bt={kernelName:Ub,backendName:"cpu",kernelFunc:uEe};re();function Dkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;at(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u),d;if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))d=ml({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=H.computeStrides(i.shape),m=DR(p,i.shape,i.dtype,h,f,"max");d=n.makeTensorInfo(f.outShape,i.dtype,m.values)}return d}var Sbt={kernelName:Vb,backendName:"cpu",kernelFunc:Dkr};re();function Nkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o;at(i,"maxPool3d");let f=ce.computePool3DInfo(i.shape,s,a,1,l,u,c),d=n.data.get(i.dataId).values,p=wee(d,i.shape,i.dtype,H.computeStrides(i.shape),f,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}var Cbt={kernelName:Gb,backendName:"cpu",kernelFunc:Nkr};re();function Okr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=o;at([i,s],"maxPool3DGrad");let f=ce.computePool3DInfo(s.shape,a,l,1,u,c),d=n.bufferSync(s),p=xyt(d,f),h=f.strideDepth,m=f.strideHeight,g=f.strideWidth,y=f.dilationDepth,b=f.dilationHeight,x=f.dilationWidth,v=f.effectiveFilterDepth,w=f.effectiveFilterHeight,_=f.effectiveFilterWidth,C=v-1-f.padInfo.front,S=_-1-f.padInfo.left,E=w-1-f.padInfo.top,A=Jt(s.shape,"float32"),N=n.bufferSync(i);for(let k=0;k<f.batchSize;++k)for(let R=0;R<f.inChannels;++R)for(let I=0;I<f.inDepth;++I)for(let L=0;L<f.inHeight;++L)for(let j=0;j<f.inWidth;++j){let M=I-C,V=L-E,G=j-S,U=0;for(let Y=0;Y<v;Y+=y){let X=(M+Y)/h;if(!(X<0||X>=f.outDepth||Math.floor(X)!==X))for(let pe=0;pe<w;pe+=b){let $=(V+pe)/m;if(!($<0||$>=f.outHeight||Math.floor($)!==$))for(let O=0;O<_;O+=x){let z=(G+O)/g;if(z<0||z>=f.outWidth||Math.floor(z)!==z)continue;let q=v*w*_-1-p.get(k,X,$,z,R),ee=Y*w*_+pe*_+O,ae=q===ee?1:0;if(ae===0)continue;let Q=N.get(k,X,$,z,R);U+=Q*ae}}}A.set(U,k,I,L,j,R)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}var Ebt={kernelName:LS,backendName:"cpu",kernelFunc:Okr};re();function Fkr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;at([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),h=n.data.get(l.dataId).values,m=Jt(p.outShape,l.dtype,vee(h,l.shape,l.dtype,p).values),g=p.strideHeight,y=p.strideWidth,b=p.dilationHeight,x=p.dilationWidth,v=p.effectiveFilterHeight,w=p.effectiveFilterWidth,_=w-1-p.padInfo.left,C=v-1-p.padInfo.top,S=Jt(l.shape,"float32"),E=n.data.get(i.dataId).values,A=Jt(i.shape,"float32",E);for(let N=0;N<p.batchSize;++N)for(let k=0;k<p.inChannels;++k)for(let R=0;R<p.inHeight;++R)for(let I=0;I<p.inWidth;++I){let L=R-C,j=I-_,M=0;for(let V=0;V<v;V+=b){let G=(L+V)/g;if(!(G<0||G>=p.outHeight||Math.floor(G)!==G))for(let U=0;U<w;U+=x){let Y=(j+U)/y;if(Y<0||Y>=p.outWidth||Math.floor(Y)!==Y)continue;let X=v*w-1-m.get(N,G,Y,k),pe=V*w+U,$=X===pe?1:0;if($===0)continue;let O=A.get(N,G,Y,k);M+=O*$}}S.set(M,N,R,I,k)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}var Tbt={kernelName:jS,backendName:"cpu",kernelFunc:Fkr};re();re();re();function Abt(t,r,n,o,i){let s=H.computeStrides(r),a=DR(t,r,n,s,i,"max"),l=vee(t,r,n,i,!0,o);return[a.values,l.values]}var kbt={kernelName:BS,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;at(o,"MaxPoolWithArgmax");let c=u.data.get(o.dataId).values,f=ce.computePool2DInfo(o.shape,i,s,[1,1],a),[d,p]=Abt(c,o.shape,o.dtype,l,f),h=u.write(d,f.outShape,o.dtype),m=u.write(p,f.outShape,o.dtype);return[{dataId:h,shape:f.outShape,dtype:o.dtype},{dataId:m,shape:f.outShape,dtype:"int32"}]}};re();function Rkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=H.parseAxisParam(s,i.shape),c=ce.computeOutAndReduceShapes(i.shape,l)[1],f=H.sizeFromShape(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([f]));d.push(p);let h=eh({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);let m=R6({inputs:{a:h,b:p},backend:n});d.push(m);let g=r1({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:a}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}var Ibt={kernelName:Wb,backendName:"cpu",kernelFunc:Rkr};re();function Mkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;at(i,"min");let l=H.parseAxisParam(s,i.shape),u=l,c=ce.getAxesPermutation(u,i.shape.length),f=i;c!=null&&(f=di({inputs:{x:i},backend:n,attrs:{perm:c}}),u=ce.getInnerMostAxes(u.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",u,f.shape.length);let[d,p]=ce.computeOutAndReduceShapes(f.shape,u),h=H.sizeFromShape(p),m=H.makeZerosTypedArray(H.sizeFromShape(d),f.dtype),g=n.data.get(f.dataId).values;for(let b=0;b<m.length;++b){let x=b*h,v=g[x];for(let w=0;w<h;++w){let _=g[x+w];(Number.isNaN(_)||_<v)&&(v=_)}m[b]=v}c!=null&&n.disposeIntermediateTensorInfo(f);let y=n.makeTensorInfo(d,f.dtype,m);if(a){let b=ce.expandShapeToKeepDim(d,l),x=mn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}var Dbt={kernelName:qb,backendName:"cpu",kernelFunc:Mkr};re();function Pkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,mode:a}=o;at(i,"mirrorPad");let l=s.map((v,w)=>v[0]+i.shape[w]+v[1]),u=s.map(v=>v[0]),c=s.map((v,w)=>v[0]+i.shape[w]),f=a==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,h=H.computeStrides(i.shape),m=H.sizeFromShape(l),g=l.length,y=H.computeStrides(l),b=H.getTypedArrayFromDType(i.dtype,m);for(let v=0;v<m;v++){let w=H.indexToLoc(v,g,y);for(let C=0;C<g;C++)w[C]<u[C]?w[C]=u[C]*2-w[C]-f:w[C]>=c[C]&&(w[C]=(c[C]-1)*2-w[C]+f);w=w.map((C,S)=>C-u[S]);let _=H.locToIndex(w,p,h);b[v]=d[_]}return{dataId:n.write(b,l,i.dtype),shape:l,dtype:i.dtype}}var Nbt={kernelName:Hb,backendName:"cpu",kernelFunc:Pkr};re();var jkr=hn((t,r)=>{let n=t%r;return t<0&&r<0||t>=0&&r>=0?n:(n+r)%r}),Lkr=Sn(Ug,jkr),Obt={kernelName:Ug,backendName:"cpu",kernelFunc:Lkr};re();var Rbt=Bf(T3());re();function cEe(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=i.shape.length,l=s;if(l===-1&&(l=a-1),l!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${l}`);let u=H.parseAxisParam([l],i.shape),c=uEe({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),f=ce.expandShapeToKeepDim(c.shape,u),d=mn({inputs:{x:c},backend:n,attrs:{shape:f}}),p=O6({inputs:{a:i,b:d},backend:n}),h=NCe({inputs:{x:p},backend:n}),m=r1({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),g=mn({inputs:{x:m},backend:n,attrs:{shape:f}}),y=R6({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var Fbt={kernelName:cx,backendName:"cpu",kernelFunc:cEe};function Bkr(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o;at(i,"multinomial");let u=l?i:cEe({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=u.shape[0],f=u.shape[1],d=n.data.get(u.dataId).values,p=[c,s],h=H.makeZerosTypedArray(H.sizeFromShape(p),"int32");for(let m=0;m<c;++m){let g=m*f,y=new Float32Array(f-1);y[0]=d[g];for(let v=1;v<y.length;++v)y[v]=y[v-1]+d[g+v];let b=Rbt.alea(a.toString()),x=m*s;for(let v=0;v<s;++v){let w=b();h[x+v]=y.length;for(let _=0;_<y.length;_++)if(w<y[_]){h[x+v]=_;break}}}return l||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",h)}var Mbt={kernelName:$S,backendName:"cpu",kernelFunc:Bkr};re();var $kr=_a.nonMaxSuppressionV3Impl;function zkr(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o;at(i,"NonMaxSuppression");let c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d}=$kr(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Pbt={kernelName:zS,backendName:"cpu",kernelFunc:zkr};re();var Ukr=_a.nonMaxSuppressionV4Impl;function Vkr(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o;at(i,"NonMaxSuppressionPadded");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:p,validOutputs:h}=Ukr(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var jbt={kernelName:US,backendName:"cpu",kernelFunc:Vkr};re();var Gkr=_a.nonMaxSuppressionV5Impl;function Wkr(t){let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o;at(i,"NonMaxSuppressionWithScore");let f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=a,h=l,m=u,g=c,{selectedIndices:y,selectedScores:b}=Gkr(f,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var Lbt={kernelName:VS,backendName:"cpu",kernelFunc:Wkr};re();function qkr(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o;at(i,"oneHot");let c=H.sizeFromShape(i.shape),f=new Float32Array(c*a);f.fill(u);let d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<a&&(f[p*a+d[p]]=l);return n.makeTensorInfo([...i.shape,a],s,f)}var Bbt={kernelName:Kb,backendName:"cpu",kernelFunc:qkr};re();re();function j6(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(o.dtype==="complex64"){let i=Jp({inputs:{input:o},backend:n}),s=j6({inputs:{x:i},backend:n}),a=nb({inputs:{input:o},backend:n}),l=j6({inputs:{x:a},backend:n}),u=Ls({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return P6({backend:n,attrs:{shape:o.shape,value:0,dtype:o.dtype}})}var $bt={kernelName:px,backendName:"cpu",kernelFunc:j6};function zbt(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(o.dtype==="complex64"){let i=Jp({inputs:{input:o},backend:n}),s=zbt({inputs:{x:i},backend:n}),a=nb({inputs:{input:o},backend:n}),l=j6({inputs:{x:a},backend:n}),u=Ls({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return P6({backend:n,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}var Ubt={kernelName:Xb,backendName:"cpu",kernelFunc:zbt};re();function fEe(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return NR({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{H.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),H.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=NR({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=$2({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var Vbt={kernelName:Zb,backendName:"cpu",kernelFunc:fEe};re();function Hkr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;at(i,"pad");let l=s.map((x,v)=>x[0]+i.shape[v]+x[1]),u=s.map(x=>x[0]),c=n.data.get(i.dataId).values,f=H.sizeFromShape(i.shape),d=i.shape.length,p=H.computeStrides(i.shape),h=H.sizeFromShape(l),m=l.length,g=H.computeStrides(l),y=H.getTypedArrayFromDType(i.dtype,h);a!==0&&y.fill(a);for(let x=0;x<f;x++){let w=H.indexToLoc(x,d,p).map((C,S)=>C+u[S]),_=H.locToIndex(w,m,g);y[_]=c[x]}return{dataId:n.write(y,l,i.dtype),shape:l,dtype:i.dtype}}var See={kernelName:Qb,backendName:"cpu",kernelFunc:Hkr};re();var Ykr=hn((t,r)=>Math.pow(t,r)),Xkr=Sn(Gg,Ykr),Gbt={kernelName:Gg,backendName:"cpu",kernelFunc:Xkr};re();function Kkr(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.data.get(b.dataId).values),c=i.map(b=>b.shape),f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,[p,h,m]=aee(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return g.concat([y])}var Wbt={kernelName:GS,backendName:"cpu",kernelFunc:Kkr};re();function Zkr(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=lee(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var qbt={kernelName:WS,backendName:"cpu",kernelFunc:Zkr};re();function Qkr(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,p=l.map(y=>n.data.get(y.dataId).values),h=l.map(y=>y.shape),[m,g]=uee(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,h,u);return n.makeTensorInfo(m,s.dtype,g)}var Hbt={kernelName:qS,backendName:"cpu",kernelFunc:Qkr};re();function Jkr(t){let{backend:r,attrs:n}=t,{start:o,stop:i,dtype:s,step:a}=n,l=cee(o,i,a,s);return r.makeTensorInfo([l.length],s,l)}var Ybt={kernelName:HS,backendName:"cpu",kernelFunc:Jkr};re();var eIr=Sr(Wg,t=>1/t),Xbt={kernelName:Wg,backendName:"cpu",kernelFunc:eIr};re();function tIr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;at(i,"resizeBilinear");let u=H.computeStrides(i.shape),[c,f]=l,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(H.sizeFromShape([d,c,f,m])),b=[s&&c>1?p-1:p,s&&f>1?h-1:h],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=0,w=b[0]/x[0],_=b[1]/x[1];for(let C=0;C<d;C++)for(let S=0;S<c;S++){let E;a?E=w*(S+.5)-.5:E=w*S;let A=Math.max(0,Math.floor(E)),N=E-A,k=Math.min(p-1,Math.ceil(E)),R=C*u[0]+A*u[1],I=C*u[0]+k*u[1];for(let L=0;L<f;L++){let j;a?j=_*(L+.5)-.5:j=_*L;let M=Math.max(0,Math.floor(j)),V=j-M,G=Math.min(h-1,Math.ceil(j)),U=R+M*u[2],Y=I+M*u[2],X=R+G*u[2],pe=I+G*u[2];for(let $=0;$<m;$++){let O=g[U+$],z=g[Y+$],q=g[X+$],ee=g[pe+$],ae=O+(q-O)*V,Q=z+(ee-z)*V,le=ae+(Q-ae)*N;y[v++]=le}}}return n.makeTensorInfo([d,c,f,m],"float32",y)}var Kbt={kernelName:nx,backendName:"cpu",kernelFunc:tIr};re();function rIr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;at([s,i],"resizeBilinearGrad");let l=H.computeStrides(i.shape),[u,c,f,d]=i.shape,[,p,h]=s.shape,m=new Float32Array(u*c*f*d),g=[a&&p>1?c-1:c,a&&h>1?f-1:f],y=[a&&p>1?p-1:p,a&&h>1?h-1:h],b=g[0]/y[0],x=g[1]/y[1],v=n.data.get(s.dataId).values,w=0;for(let _=0;_<u;_++){let C=_*l[0];for(let S=0;S<p;S++){let E=S*b,A=Math.floor(E),N=Math.min(Math.ceil(E),c-1),k=C+A*l[1],R=C+N*l[1],I=E-A,L=1-I;for(let j=0;j<h;j++){let M=j*x,V=Math.floor(M),G=Math.min(Math.ceil(M),f-1),U=M-V,Y=1-U,X=k+V*l[2],pe=k+G*l[2],$=R+V*l[2],O=R+G*l[2],z=L*Y,q=L*U,ee=I*Y,ae=I*U;for(let Q=0;Q<d;Q++){let le=v[w++];m[X+Q]+=le*z,m[pe+Q]+=le*q,m[$+Q]+=le*ee,m[O+Q]+=le*ae}}}}return n.makeTensorInfo([u,f,c,d],"float32",m)}var Zbt={kernelName:KS,backendName:"cpu",kernelFunc:rIr};re();function nIr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o;at(i,"resizeNearestNeighbor");let u=H.computeStrides(i.shape),[c,f]=l,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(d*c*f*m),b=[s&&c>1?p-1:p,s&&f>1?h-1:h],x=[s&&c>1?c-1:c,s&&f>1?f-1:f],v=b[0]/x[0],w=b[1]/x[1],_=0;for(let C=0;C<d;C++){let S=C*u[0];for(let E=0;E<c;E++){let A=a?v*(E+.5):v*E,N=Math.min(p-1,s?Math.round(A):Math.floor(A));a&&(N=Math.max(0,N));let k=S+N*u[1];for(let R=0;R<f;R++){let I=a?w*(R+.5):w*R,L=Math.min(h-1,s?Math.round(I):Math.floor(I));a&&(L=Math.max(0,L));let j=k+L*u[2];for(let M=0;M<m;M++){let V=g[j+M];y[_++]=V}}}}return n.makeTensorInfo([d,c,f,m],i.dtype,y)}var Qbt={kernelName:rx,backendName:"cpu",kernelFunc:nIr};re();function oIr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o;at([s,i],"resizeNearestNeighborGrad");let l=H.computeStrides(i.shape),u=H.computeStrides(s.shape),[c,f,d,p]=i.shape,[,h,m]=s.shape,g=new Float32Array(c*f*d*p),y=n.data.get(s.dataId).values,b=[a&&h>1?f-1:f,a&&m>1?d-1:d],x=[a&&h>1?h-1:h,a&&m>1?m-1:m],v=b[0]/x[0],w=b[1]/x[1],_=1/v,C=1/w,S=Math.ceil(_)*2+2,E=Math.ceil(C)*2+2;for(let A=0;A<c;A++){let N=A*l[0];for(let k=0;k<f;k++){let R=N+k*l[1],I=Math.floor(k*_),L=Math.floor(I-S/2);for(let j=0;j<d;j++){let M=R+j*l[2],V=Math.floor(j*C),G=Math.floor(V-E/2);for(let U=0;U<p;U++){let Y=0;for(let X=0;X<S;X++){let pe=X+L;if(pe<0||pe>=h)continue;let $=N+pe*u[1],O=pe*v,z=Math.min(f-1,a?Math.round(O):Math.floor(O));if(k===z)for(let q=0;q<E;q++){let ee=q+G;if(ee<0||ee>=m)continue;let ae=$+ee*u[2],Q=ee*w,le=Math.min(d-1,a?Math.round(Q):Math.floor(Q));j===le&&(Y+=y[ae+U])}}g[M+U]=Y}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}var Jbt={kernelName:XS,backendName:"cpu",kernelFunc:oIr};re();function iIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o;at(i,"reverse");let a=i.shape.length,l=H.parseAxisParam(s,i.shape);if(a===0)return ml({inputs:{x:i},backend:n});let u=new Cn(i.shape,i.dtype),c=n.bufferSync(i);for(let f=0;f<u.size;f++){let d=u.indexToLoc(f),p=d.slice();l.forEach(h=>p[h]=i.shape[h]-1-p[h]),u.set(c.get(...p),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}var ext={kernelName:ox,backendName:"cpu",kernelFunc:iIr};re();var txt={kernelName:pC,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=H.getTypedArrayFromDType(o.dtype,H.sizeFromShape(o.shape)),[c,f,d,p]=o.shape,[h,m]=ce.getImageCenter(a,f,d),g=255,y=Math.sin(i),b=Math.cos(i),x=l.data.get(o.dataId).values;for(let w=0;w<c;w++){let _=w*d*f*p;for(let C=0;C<f;C++){let S=C*(d*p);for(let E=0;E<d;E++){let A=E*p;for(let N=0;N<p;N++){let k=[c,C,E,N],R=k[2],I=k[1],L=(R-h)*b-(I-m)*y,j=(R-h)*y+(I-m)*b;L=Math.round(L+h),j=Math.round(j+m);let M=s;if(typeof s!="number"&&(N===3?M=g:M=s[N]),L>=0&&L<d&&j>=0&&j<f){let G=j*(d*p),U=L*p,Y=_+G+U+N;M=x[Y]}let V=_+S+A+N;u[V]=M}}}}return{dataId:l.write(u,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};re();var sIr=Sr(Yg,t=>{let r=Math.floor(t);return t-r<.5?Math.floor(t):t-r>.5?Math.ceil(t):r%2===0?r:r+1}),rxt={kernelName:Yg,backendName:"cpu",kernelFunc:sIr};re();function aIr(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=!0,h=n.bufferSync(i),m=n.bufferSync(s),g=eg(h,m,a,d,c,u,l,f,0,p);return n.makeTensorInfo(a,g.dtype,g.values)}var nxt={kernelName:ZS,backendName:"cpu",kernelFunc:aIr};re();re();function lIr(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<r?n=i+1:o=i;return o}function uIr(t,r){let n=0,o=t.length,i=0;for(;n<o;)i=Math.floor((n+o)/2),t[i]<=r?n=i+1:o=i;return o}function oxt(t,r,n,o,i,s){let a=H.getArrayFromDType("int32",n*i);for(let l=0;l<n;++l){let u=t.slice(l*o,(l+1)*o),c=l*i;for(let f=0;f<i;++f)a[c+f]=s==="left"?lIr(u,r[f+c]):uIr(u,r[f+c])}return a}function cIr(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=oxt(l,u,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",c)}var ixt={kernelName:JS,backendName:"cpu",kernelFunc:cIr};re();function fIr(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r;at([o,i,s],"select");let a=o.shape.length,l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=zi(i.dtype,s.dtype),d=H.makeZerosTypedArray(H.sizeFromShape(i.shape),f),p=0,h=a===0||a>1||i.shape.length===1?1:H.sizeFromShape(i.shape.slice(1));for(let m=0;m<l.length;m++)for(let g=0;g<h;g++)l[m]===1?d[p++]=u[m]:d[p++]=c[m];return n.makeTensorInfo(i.shape,f,d)}var sxt={kernelName:ix,backendName:"cpu",kernelFunc:fIr};re();var dIr=ce.SELU_SCALEALPHA,pIr=ce.SELU_SCALE,hIr=Sr(Kg,t=>t>=0?pIr*t:dIr*(Math.exp(t)-1)),axt={kernelName:Kg,backendName:"cpu",kernelFunc:hIr};re();var mIr=Sr(Jg,t=>t<0?-1:t>0?1:0),lxt={kernelName:Jg,backendName:"cpu",kernelFunc:mIr};re();var gIr=Sr(Zg,t=>Math.sin(t)),uxt={kernelName:Zg,backendName:"cpu",kernelFunc:gIr};re();var yIr=Sr(Qg,t=>Math.sinh(t)),cxt={kernelName:Qg,backendName:"cpu",kernelFunc:yIr};re();var bIr=11920928955078125e-23,fxt=Math.log(bIr)+2,xIr=Sr(t0,t=>{let r=t>-fxt,n=t<fxt,o=Math.exp(t),i;return n?i=o:r?i=t:i=Math.log(1+o),i}),dxt={kernelName:t0,backendName:"cpu",kernelFunc:xIr};re();function vIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;at([i],"spaceToBatchND");let l=H.sizeFromShape(s),u=[[0,0]];u.push(...a);for(let C=1+s.length;C<i.shape.length;++C)u.push([0,0]);let c=See.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),f=ce.getReshaped(c.shape,s,l,!1),d=ce.getPermuted(f.length,s.length,!1),p=ce.getReshapedPermuted(c.shape,s,l,!1),g=mn({inputs:{x:c},backend:n,attrs:{shape:f}}),x=di({inputs:{x:g},backend:n,attrs:{perm:d}}),_=mn({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),_}var pxt={kernelName:lx,backendName:"cpu",kernelFunc:vIr};re();function wIr(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values[0],[d,p,h,m,g]=fee(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var hxt={kernelName:eC,backendName:"cpu",kernelFunc:wIr};re();function _Ir(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.data.get(i.dataId).values),l=n.data.get(o.dataId).values,u=Array.from(n.data.get(s.dataId).values),[c,f,d]=dee(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var mxt={kernelName:tC,backendName:"cpu",kernelFunc:_Ir};re();function SIr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=IR(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var gxt={kernelName:rC,backendName:"cpu",kernelFunc:SIr};re();function CIr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,f]=IR(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var yxt={kernelName:nC,backendName:"cpu",kernelFunc:CIr};re();function EIr(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),h=!1,m=n.bufferSync(i),g;switch(s.dtype){case"bool":{let y=n.bufferSync(s),b=!!n.data.get(a.dataId).values[0];g=eg(m,y,l,p,f,c,u,d,b,h);break}case"float32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=eg(m,y,l,p,f,c,u,d,b,h);break}case"int32":{let y=n.bufferSync(s),b=n.data.get(a.dataId).values[0];g=eg(m,y,l,p,f,c,u,d,b,h);break}case"string":{let y=n.bufferSync(s),b=H.decodeString(n.data.get(a.dataId).values[0]);g=eg(m,y,l,p,f,c,u,d,b,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(l,g.dtype,g.values)}var bxt={kernelName:oC,backendName:"cpu",kernelFunc:EIr};re();re();function TIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=H.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=new Array(i.shape.length).fill(0),f=i.shape.slice();return u.map(d=>{let p=[...f];p[l]=d;let h=rh({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[l]+=d,h})}var xxt={kernelName:ux,backendName:"cpu",kernelFunc:TIr};re();var vxt={kernelName:iC,backendName:"cpu",kernelFunc:({inputs:t,backend:r})=>{let{x:n}=t,o=r;at(n,"square");let i=o.data.get(n.dataId).values,s=new Float32Array(i.length);for(let l=0;l<i.length;++l){let u=i[l];s[l]=u*u}return{dataId:o.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};re();var AIr=Sr(a0,(t,r)=>{let n=r;return isNaN(t)?NaN:t>0?1:n.alpha}),wxt={kernelName:a0,backendName:"cpu",kernelFunc:AIr};re();function kIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o;at(i,"stridedSlice");let{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Ns.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=mn({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||b){H.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let C=Ns.computeOutShape(x,v,w),S=rh({inputs:{x:i},backend:n,attrs:{begin:x,size:C}});_=mn({inputs:{x:S},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(S)}else{let C=n.bufferSync(i),S=pee(h,C,w,x);_=n.makeTensorInfo(m,S.dtype,S.values)}return _}var _xt={kernelName:sC,backendName:"cpu",kernelFunc:kIr};re();function IIr(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.data.get(f.dataId).values,h=n.data.get(d.dataId).values,[m,g]=hee(p,h,i,s,a,l,u,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var Sxt={kernelName:aC,backendName:"cpu",kernelFunc:IIr};re();function DIr(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values[0],[c,f,d]=mee(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var Cxt={kernelName:lC,backendName:"cpu",kernelFunc:DIr};re();function NIr(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.data.get(s.dataId).values,l=gee(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var Ext={kernelName:uC,backendName:"cpu",kernelFunc:NIr};re();var OIr=Sr(i0,t=>Math.tan(t)),Txt={kernelName:i0,backendName:"cpu",kernelFunc:OIr};re();var FIr=Sr(s0,t=>Math.tanh(t)),Axt={kernelName:s0,backendName:"cpu",kernelFunc:FIr};re();function RIr(t){let{inputs:r,backend:n}=t,{tensor:o,indices:i,updates:s}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=ce.calculateShapes(s,i,o.shape),d=!1,p=n.bufferSync(i),h=n.bufferSync(s),m=n.bufferSync(o),g=eg(p,h,o.shape,f,u,l,a,c,m,d);return n.makeTensorInfo(o.shape,g.dtype,g.values)}var kxt={kernelName:QS,backendName:"cpu",kernelFunc:RIr};re();function MIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;at(i,"tile");let a=yee(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}var Ixt={kernelName:mh,backendName:"cpu",kernelFunc:MIr};re();function PIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o;at(i,"topk");let l=n.data.get(i.dataId).values,[u,c]=bee(l,i.shape,i.dtype,s,a);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}var Dxt={kernelName:cC,backendName:"cpu",kernelFunc:PIr};re();function jIr(t){let{inputs:r,attrs:n,backend:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=n,[f,d,p,h]=i.shape,[m,g]=c??[d,p],y=[f,m,g,h],b=H.computeStrides(i.shape),x=b[0],v=b[1],w=b[2],_=H.computeStrides(y),C=_[0],S=_[1],E=_[2],A=H.getTypedArrayFromDType(i.dtype,H.sizeFromShape(y));A.fill(u);let N=o.data.get(i.dataId).values,k=o.data.get(s.dataId).values;for(let I=0;I<f;++I){let L=s.shape[0]===1?k:k.subarray(I*8,I*8+8);for(let j=0;j<m;++j)for(let M=0;M<g;++M)for(let V=0;V<h;++V){let G,U=L[6]*M+L[7]*j+1;if(U===0)continue;let Y=(L[0]*M+L[1]*j+L[2])/U,X=(L[3]*M+L[4]*j+L[5])/U,pe=Nxt(Y,p,l),$=Nxt(X,d,l);switch(a){case"nearest":G=UIr(N,d,p,x,v,w,I,$,pe,V,u);break;case"bilinear":G=VIr(N,d,p,x,v,w,I,$,pe,V,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}let O=I*C+j*S+M*E+V;A[O]=G}return o.makeTensorInfo(y,i.dtype,A)}return{dataId:o.write(A,y,i.dtype),shape:i.shape,dtype:i.dtype}}var Oxt={kernelName:fC,backendName:"cpu",kernelFunc:jIr};function Nxt(t,r,n){switch(n){case"reflect":return LIr(t,r);case"wrap":return BIr(t,r);case"nearest":return zIr(t,r);case"constant":default:return $Ir(t,r)}}function LIr(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=2*r;n<o&&(n=o*Math.trunc(-n/o)+n),n=n<-r?n+o:-n-1}else if(n>r-1)if(r<=1)n=0;else{let o=2*r;n-=o*Math.trunc(n/o),n>=r&&(n=o-n-1)}return H.clamp(0,n,r-1)}function BIr(t,r){let n=t;if(n<0)if(r<=1)n=0;else{let o=r-1;n+=r*(Math.trunc(-n/o)+1)}else if(n>r-1)if(r<=1)n=0;else{let o=r-1;n-=r*Math.trunc(n/o)}return H.clamp(0,n,r-1)}function $Ir(t,r){return t}function zIr(t,r){return H.clamp(0,t,r-1)}function L6(t,r,n,o,i,s,a,l,u,c,f){let d=a*o+l*i+u*s+c;return 0<=l&&l<r&&0<=u&&u<n?t[d]:f}function UIr(t,r,n,o,i,s,a,l,u,c,f){let d=Math.round(l),p=Math.round(u);return L6(t,r,n,o,i,s,a,d,p,c,f)}function VIr(t,r,n,o,i,s,a,l,u,c,f){let d=Math.floor(l),p=Math.floor(u),h=d+1,m=p+1,g=(m-u)*L6(t,r,n,o,i,s,a,d,p,c,f)+(u-p)*L6(t,r,n,o,i,s,a,d,m,c,f),y=(m-u)*L6(t,r,n,o,i,s,a,h,p,c,f)+(u-p)*L6(t,r,n,o,i,s,a,h,m,c,f);return(h-l)*g+(l-d)*y}re();function GIr(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;at(s,"unique");let a=o.data.get(s.dataId).values,{outputValues:l,outputShape:u,indices:c}=xee(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var Fxt={kernelName:dC,backendName:"cpu",kernelFunc:GIr};re();function WIr(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i.shape.length,l=i.shape[s],u=new Array(a-1),c=0;for(let h=0;h<a;h++)h!==s&&(u[c++]=i.shape[h]);let f=new Array(a).fill(0),d=i.shape.slice();d[s]=1;let p=new Array(l);for(let h=0;h<p.length;h++){f[s]=h;let m=rh({inputs:{x:i},backend:n,attrs:{begin:f,size:d}});p[h]=mn({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}var Rxt={kernelName:fx,backendName:"cpu",kernelFunc:WIr};re();function qIr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o;at(i,"unsortedSegmentSum");let l=i.shape.length,u=s.shape.length,c=[],f=[],d=l-u,p=s;for(let m=0;m<d;++m){let g=NR({inputs:{input:p},backend:n,attrs:{dim:m+1}});p=g,f.push(g)}for(let m=0;m<a;++m){let g=H.createScalarValue(m,"int32"),y=n.makeTensorInfo([],"int32",g),b=ICe({inputs:{a:y,b:p},backend:n}),x=eh({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),v=ZA({inputs:{a:x,b:i},backend:n}),w=r1({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(w),f.push(y),f.push(b),f.push(x),f.push(v),f.push(w)}let h=fEe({inputs:c,backend:n,attrs:{axis:0}});return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var Mxt={kernelName:dx,backendName:"cpu",kernelFunc:qIr};var HIr=[syt,h0t,ayt,lyt,x0t,uyt,cyt,fyt,dyt,pyt,hyt,myt,gyt,yyt,byt,vyt,wyt,_yt,Syt,iyt,Cyt,Eyt,Tyt,v0t,Ayt,b0t,w0t,kyt,m0t,Iyt,Nyt,Oyt,Fyt,Ryt,Myt,Pyt,jyt,Lyt,Byt,$yt,zyt,Uyt,Vyt,Gyt,Wyt,qyt,Hyt,Yyt,Xyt,Kyt,Zyt,Qyt,ebt,J0t,tbt,_0t,rbt,S0t,nbt,C0t,obt,ibt,sbt,E0t,T0t,abt,lbt,ubt,cbt,A0t,k0t,g0t,fbt,Dyt,dbt,pbt,hbt,eyt,I0t,D0t,mbt,N0t,gbt,ybt,bbt,xbt,vbt,wbt,_bt,O0t,Sbt,Cbt,Ebt,Tbt,kbt,Ibt,Dbt,F0t,Nbt,Obt,Mbt,R0t,M0t,Pbt,jbt,Lbt,P0t,Bbt,Ubt,Vbt,See,Gbt,tyt,L0t,Wbt,qbt,Hbt,Ybt,y0t,M6,Xbt,ryt,nyt,oyt,Kbt,Zbt,Qbt,Jbt,ext,txt,rxt,V0t,nxt,ixt,sxt,axt,W0t,lxt,uxt,cxt,q0t,Fbt,dxt,pxt,hxt,mxt,gxt,yxt,bxt,xxt,Y0t,vxt,X0t,K0t,wxt,_xt,Sxt,Cxt,Ext,Z0t,Jyt,Txt,Axt,kxt,Ixt,Dxt,Oxt,j0t,Fxt,Rxt,Mxt,$bt];for(let t of HIr)Zk(t);re();re();re();re();var JA={},Cee={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Pxt(t,r){JA[t]=r}function Rf(t,r){if(!(t in JA)||r!=null){let o=XIr(t,r);if(o!==null)JA[t]=o;else return console.log("Could not get context for WebGL version",t),null}let n=JA[t];return n==null||n.isContextLost()?(delete JA[t],Rf(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),JA[t])}function YIr(t){if(!Oe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function XIr(t,r){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=r??YIr(t);return n.addEventListener("webglcontextlost",o=>{o.preventDefault(),delete JA[t]},!1),Oe().getBool("SOFTWARE_WEBGL_ENABLED")&&(Cee.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Cee)||n.getContext("experimental-webgl",Cee):n.getContext("webgl2",Cee)}re();var ek=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(ek||{}),Wl=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Wl||{}),gl=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(gl||{});function tk(t,r){return[r,t]}function jxt(t,r){return t*r}function B6(t){let r=H.sizeFromShape(t),n=Math.ceil(r/4);return H.sizeToSquarishShape(n)}function ob(t,r){return[Math.max(1,Math.ceil(r/2)),Math.max(1,Math.ceil(t/2))]}function Lxt(t,r){let[n,o]=ob(t,r);return n*o*4}function $6(t,r){let n=t,o,i,s,a,l,u,c,f,d,p;return Oe().getNumber("WEBGL_VERSION")===2?(o=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,l=n.RED,c=4,f=1,d=n.HALF_FLOAT,p=n.FLOAT,u=n.RGBA8):(o=t.RGBA,i=t.RGBA,s=t.RGBA,a=n.RGBA,l=t.RGBA,c=4,f=4,d=r!=null?r.HALF_FLOAT_OES:null,p=t.FLOAT,u=t.RGBA),{internalFormatFloat:o,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:l,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:d,textureTypeFloat:p}}function Wt(t,r){let n=r();return Oe().getBool("DEBUG")&&KIr(t),n}function KIr(t){let r=t.getError();if(r!==t.NO_ERROR)throw new Error("WebGL Error: "+JIr(t,r))}var ZIr=596e-10,QIr=65504;function Bxt(t){return!!(Oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||ZIr<Math.abs(t)&&Math.abs(t)<QIr)}function JIr(t,r){switch(r){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function z6(t,r){return n1(t,()=>t.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function $xt(t,r){let n=n1(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function zxt(t,r){let n=n1(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Wt(t,()=>t.shaderSource(n,r)),Wt(t,()=>t.compileShader(n)),Oe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw gEe(r,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var eDr=/ERROR: [0-9]+:([0-9]+):/g;function gEe(t,r){let n=eDr.exec(r);if(n==null){console.log(`Couldn't parse line number in error: ${r}`),console.log(t);return}let o=+n[1],i=t.split(`
`),s=i.length.toString().length+2,a=i.map((d,p)=>H.rightPad((p+1).toString(),s)+d),l=0;for(let d=0;d<a.length;d++)l=Math.max(a[d].length,l);let u=a.slice(0,o-1),c=a.slice(o-1,o),f=a.slice(o);console.log(u.join(`
`)),console.log(r.split(`
`)[0]),console.log(`%c ${H.rightPad(c[0],l)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function Uxt(t){return n1(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Vxt(t,r){if(Wt(t,()=>t.linkProgram(r)),!Oe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(r,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function Tee(t,r){if(Wt(t,()=>t.validateProgram(r)),t.getProgramParameter(r,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function Gxt(t,r){let n=n1(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function Wxt(t,r){let n=n1(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Wt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Wt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW)),n}function qxt(t){return n1(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function Hxt(t,r){let n=Oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||r<=0){let o=`[${t}x${r}]`;throw new Error("Requested texture size "+o+" is invalid.")}if(t>n||r>n){let o=`[${t}x${r}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+i+".")}}function Yxt(t){return n1(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function yEe(t,r,n,o,i,s,a){let l=t.getAttribLocation(r,n);return l===-1?!1:(Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,o)),Wt(t,()=>t.vertexAttribPointer(l,i,t.FLOAT,!1,s,a)),Wt(t,()=>t.enableVertexAttribArray(l)),!0)}function tDr(t,r,n){nDr(t,n),Wt(t,()=>t.activeTexture(t.TEXTURE0+n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r))}function Xxt(t,r,n){return n1(t,()=>t.getUniformLocation(r,n),'uniform "'+n+'" not present in program.')}function Kxt(t,r,n){return t.getUniformLocation(r,n)}function Zxt(t,r,n,o){Wt(t,()=>tDr(t,r,o)),Wt(t,()=>t.uniform1i(n,o))}function Aee(t,r,n){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0))}function bEe(t,r){Wt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,r)),Wt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function U6(t){let r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+rDr(t,r))}function rDr(t,r){switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function n1(t,r,n){let o=Wt(t,()=>r());if(o==null)throw new Error(n);return o}function nDr(t,r){let n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,o=r+t.TEXTURE0;if(o<t.TEXTURE0||o>n){let i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function z2(t,r=2){return H.sizeFromShape(t.slice(0,t.length-r))}function U2(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function V6(t){let r=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(r=[z2(t),...U2(t)]),r}function Qxt(t,r=!1){let n=Oe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=Oe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");o===1/0&&Oe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),r&&(n=n*2,o=o*2,t=t.map((l,u)=>u>=t.length-2?H.nearestLargerEven(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=H.squeezeShape(t).newShape);let i=H.sizeFromShape(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);let a=s!=null&&Math.max(...s)>o&&Math.min(...s)<=(r?2:1)&&Math.min(...s)>0;if(s==null||a)if(r){let l=z2(t),u=2,c=2;t.length&&([u,c]=U2(t)),i=l*(u/2)*(c/2),s=H.sizeToSquarishShape(i).map(f=>f*2)}else s=H.sizeToSquarishShape(i);return s}function Eee(t){return t%2===0}function rk(t,r){if(t=t.slice(-2),r=r.slice(-2),H.arraysEqual(t,r)||!t.length||!r.length||t[0]===0||t[1]===0||r[0]===0||r[1]===0)return!0;if(t.length!==r.length){let n=t[t.length-1],o=r[r.length-1];if(n===o||Eee(n)&&Eee(o)&&(t[0]===1||r[0]===1))return!0}return t[1]===r[1]&&Eee(t[0])&&Eee(r[0])}var pEe,hEe;function Jxt(t){if(pEe==null){let r=Rf(t);pEe=r.getParameter(r.MAX_TEXTURE_SIZE)}return pEe}function evt(t){if(hEe==null){let r=Rf(t);hEe=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,hEe)}function tvt(t){if(t===0)return 0;let r,n=Rf(t);return Bd(n,"EXT_disjoint_timer_query_webgl2")&&t===2?r=2:Bd(n,"EXT_disjoint_timer_query")?r=1:r=0,r}function Bd(t,r){return t.getExtension(r)!=null}function xEe(t){try{if(Rf(t)!=null)return!0}catch(r){return console.log("Error when getting WebGL context: ",r),!1}return!1}function rvt(t){if(t===0)return!1;let r=Rf(t);if(t===1){if(!Bd(r,"OES_texture_float"))return!1}else if(!Bd(r,"EXT_color_buffer_float"))return!1;return mEe(r)}function nvt(t){if(t===0)return!1;let r=Rf(t);if(t===1){if(!Bd(r,"OES_texture_float")||!Bd(r,"WEBGL_color_buffer_float"))return!1}else{if(Bd(r,"EXT_color_buffer_float"))return mEe(r);let o="EXT_color_buffer_half_float";if(Bd(r,o)){let i=r.getExtension(o);return oDr(r,i)}return!1}return mEe(r)}function mEe(t){let r=$6(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),a}function oDr(t,r){let n=$6(t,r),o=t.createTexture();t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);let l=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(o),t.deleteFramebuffer(a),l}function ovt(t){return t!==2?!1:Rf(t).fenceSync!=null}function ib(t,r){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&H.assert(n.dtype!=="complex64",()=>`${r} does not support complex64 tensors in the WebGL backend.`)})}var pr=Oe();pr.registerFlag("HAS_WEBGL",()=>pr.getNumber("WEBGL_VERSION")>0);pr.registerFlag("WEBGL_VERSION",()=>xEe(2)?2:xEe(1)?1:0);pr.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);pr.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>pr.get("WEBGL_VERSION")===2);pr.registerFlag("WEBGL_CPU_FORWARD",()=>!0);pr.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);pr.registerFlag("WEBGL_PACK",()=>pr.getBool("HAS_WEBGL"));pr.registerFlag("WEBGL_PACK_NORMALIZATION",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_CLIP",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_REDUCE",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_LAZILY_UNPACK",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_CONV_IM2COL",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>pr.getBool("WEBGL_PACK"));pr.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Jxt(pr.getNumber("WEBGL_VERSION")));pr.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>evt(pr.getNumber("WEBGL_VERSION")));pr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=pr.getNumber("WEBGL_VERSION");return t===0?0:tvt(t)});pr.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>pr.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!hx.isMobile());pr.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>rvt(pr.getNumber("WEBGL_VERSION")));pr.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>pr.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:pr.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));pr.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>nvt(pr.getNumber("WEBGL_VERSION")));pr.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ovt(pr.getNumber("WEBGL_VERSION")));pr.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>pr.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);pr.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});pr.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>hx.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});pr.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);pr.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);pr.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);pr.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);pr.registerFlag("WEBGL_EXP_CONV",()=>!1);pr.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>pr.getBool("IS_TEST"));pr.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);pr.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);pr.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);pr.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);re();re();function pi(){let t,r,n,o,i,s,a,l,u,c;return Oe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",r="in",n="out",o="in",i="texture",s="outputColor",a="out vec4 outputColor;",l=Oe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",r="attribute",n="varying",o="varying",i="texture2D",s="gl_FragColor",a="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:r,varyingVs:n,varyingFs:o,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:l,defineSpecialInf:u,defineRound:c}}re();re();re();function tg(t,r,n="index"){let o=H.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / ${i}`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${a}; ${l};`}).join("")}function nk(t,r,n="index"){let o=H.computeStrides(r);return o.map((i,s)=>{let a=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,l=s===o.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${a}; ${l};`}).join("")}function iDr(t,r){let n=t.length,o=t.map(s=>`${r}[${s}]`),i=new Array(n-1);i[n-2]=o[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${o[s+1]})`;return i}function ivt(t,r,n="index"){let o=t.map((s,a)=>a),i=iDr(o,r);return i.map((s,a)=>{let l=`int ${t[a]} = ${n} / ${i[a]}`,u=a===i.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i[a]}`:`index -= ${t[a]} * ${i[a]}`;return`${l}; ${u};`}).join("")}function OR(t){let r=H.computeStrides(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${r[0]} + coords.y * ${r[1]} + coords.z;
  }
`}function FR(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var Iee=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:svt}=ce;function avt(t,r,n){let o=[];if(t.forEach(h=>{let m=H.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?o.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(o.push(`uniform sampler2D ${h.name};`),o.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){let{uniformShape:g}=Dee(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:o.push(`uniform int ${h.name}Shape;`);break;case 2:o.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:o.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:o.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}o.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(r.logicalShape.length){case 1:o.push("uniform int outShape;");break;case 2:o.push("uniform ivec2 outShape;"),o.push("uniform int outShapeStrides;");break;case 3:o.push("uniform ivec3 outShape;"),o.push("uniform ivec2 outShapeStrides;");break;case 4:o.push("uniform ivec4 outShape;"),o.push("uniform ivec3 outShapeStrides;");break;default:break}o.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{o.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let i=o.join(`
`),s=t.map(h=>sDr(h,r,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=r.texShape,l=pi(),u=uDr(l),c,f,d=dDr(l);return r.isPacked?(c=aDr(r.logicalShape,a,n.enableShapeUniforms),f=fDr(l)):(c=lDr(r.logicalShape,a,n.enableShapeUniforms),f=cDr(l)),n.packedInputs&&(d+=gDr),[d,u,f,i,c,s,n.userCode].join(`
`)}function MR(t,r=!1){let n=t.shapeInfo.logicalShape;switch(n.length){case 0:return kDr(t,r);case 1:return DDr(t,r);case 2:return ODr(t,r);case 3:return RDr(t,r);case 4:return PDr(t,r);case 5:return jDr(t);case 6:return LDr(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function lvt(t,r){switch(t.shapeInfo.logicalShape.length){case 0:return ADr(t);case 1:return IDr(t,r);case 2:return NDr(t,r);case 3:return FDr(t,r);default:return MDr(t,r)}}function sDr(t,r,n=!1,o){let i="";n?i+=lvt(t,o):i+=MR(t,o);let s=t.shapeInfo.logicalShape,a=r.logicalShape;return s.length<=a.length&&(n?i+=BDr(t,r):i+=$Dr(t,r)),i}function aDr(t,r,n){switch(t.length){case 0:return uvt();case 1:return yDr(t,r,n);case 2:return EDr(t,r,n);case 3:return xDr(t,r,n);default:return wDr(t,r,n)}}function lDr(t,r,n){switch(t.length){case 0:return uvt();case 1:return bDr(t,r,n);case 2:return TDr(t,r,n);case 3:return vDr(t,r,n);case 4:return _Dr(t,r,n);case 5:return SDr(t,r);case 6:return CDr(t,r);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function uDr(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function cDr(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function fDr(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function dDr(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${pDr}
    ${hDr}
    ${mDr}
  `}var pDr=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hDr=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,mDr=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,gDr=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function uvt(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function yDr(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return o[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${o[1]}.0);
      }
    `:o[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${o[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      return 2 * (resTexRC.x * ${o[1]} + resTexRC.y);
    }
  `}function bDr(t,r,n){return r[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return resTexRC.x * ${r[1]} + resTexRC.y;
    }
  `}function xDr(t,r,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function vDr(t,r,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${nk(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let o=tg(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec3(r, c, d);
    }
  `}function wDr(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2),a=s,l="",u="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],l=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+l,u=`b${c}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      ${l}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${u});
    }
  `}function _Dr(t,r,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${nk(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let o=tg(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      ${o}
      return ivec4(r, c, d, d2);
    }
  `}function SDr(t,r){let n=tg(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${r[0]},
                             ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function CDr(t,r){let n=tg(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function EDr(t,r,n){let o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(H.arraysEqual(t,r))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));
      }
    `;let i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));

      int index = resTexRC.x * ${o[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function TDr(t,r,n){return H.arraysEqual(t,r)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.x * ${r[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function ok(t){return`offset${t}`}function ADr(t){let r=t.name,n="get"+r.charAt(0).toUpperCase()+r.slice(1),o=pi();return`
    vec4 ${n}() {
      return ${o.texture2D}(${r}, halfCR);
    }
  `}function kDr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${o}() {return ${n};}`;let[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${o}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let a=ok(n);if(r)return`
    float ${o}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;let[l,u]=t.shapeInfo.texShape;return`
    float ${o}() {
      vec2 uv = uvFromFlat(${l}, ${u}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function IDr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=pi();if(r)return`
    vec4 ${o}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;let a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function DDr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${o}(int index) {
        ${PR(t)}
      }
    `;let i=t.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${o}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let l=ok(n);return a===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${l}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?r?`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${l}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:r?`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${l});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${l});
      return sampleTexture(${n}, uv);
    }
  `}function NDr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=s[0],l=s[1],u=pi();if(s!=null&&H.arraysEqual(n,s))return r?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);

        return ${u.texture2D}(${o}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${a}.0);

        return ${u.texture2D}(${o}, uv);
      }
    `;if(r)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `;let c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${u.texture2D}(${o}, uv);
    }
  `}function ODr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape;if(s!=null&&H.arraysEqual(n,s)){if(r)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `;let p=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${o}, uv);
    }
  `}let{newShape:a,keptDims:l}=H.squeezeShape(n),u=a;if(u.length<n.length){let p=jR(t,u),h=["row","col"];return`
      ${MR(p,r)}
      float ${i}(int row, int col) {
        return ${i}(${LR(h,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${PR(t)}
      }
    `;let c=s[0],f=s[1],d=ok(o);return f===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${o}, uv);
    }
  `:c===1?r?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${o}, uv);
    }
  `:r?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
        return sampleTexture(${o}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${o}, uv);
  }
`}function FDr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=t.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){let p=n.slice(1),h=[1,2],m=jR(t,p),g=["b","row","col"];return`
        ${lvt(m,r)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${LR(g,h)});
        }
      `}let l=pi();if(r)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `;let u=a[0],c=a[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${c}, ${d}, ${f}, b, row, col);
      return ${l.texture2D}(${o}, uv);
    }
  `}function RDr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[1]*n[2],a=n[2],{newShape:l,keptDims:u}=H.squeezeShape(n),c=l;if(c.length<n.length){let g=jR(t,c),y=["row","col","depth"];return`
        ${MR(g,r)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${LR(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${PR(t)}
      }
    `;let f=t.shapeInfo.texShape,d=f[0],p=f[1],h=t.shapeInfo.flatOffset;if(p===s&&h==null)return r?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${o}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${o}, uv);
        }
      `;if(p===a&&h==null)return r?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${o}, uv);
    }
  `;let m=ok(o);return r?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${o}Shape[1] * ${o}Shape[2];
      int stride1 = ${o}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
      return sampleTexture(${o}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${o}, uv);
      }
  `}function MDr(t,r){let n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=pi();if(r)return`
    vec4 ${o}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;let s=t.shapeInfo.logicalShape,a=s.length,l=t.shapeInfo.texShape,u=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],c=u[0],f=u[1],d=Math.ceil(s[a-1]/2),p=d*Math.ceil(s[a-2]/2),h="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<a-1;g++)h=`int b${g}, `+h,p*=s[a-g-1],m=`b${g} * ${p} + `+m;return`
    vec4 ${o}(${h}) {
      int index = ${m};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function PDr(t,r){let n=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=n[3],a=n[2]*s,l=n[1]*a,{newShape:u,keptDims:c}=H.squeezeShape(n);if(u.length<n.length){let x=jR(t,u),v=["row","col","depth","depth2"];return`
      ${MR(x,r)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${LR(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${l}, ${a}, ${s}, 1)));
        ${PR(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],m=`int stride2 = ${o}Shape[3];`,g=`int stride1 = ${o}Shape[2] * stride2;`,y=`int stride0 = ${o}Shape[1] * stride1;`;if(h===l&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;if(h===s&&f==null)return r?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${o}, uv);
      }
    `;let b=ok(o);return r?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${b});
      return sampleTexture(${o}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${b});
      return sampleTexture(${o}, uv);
    }
  `}function jDr(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r[4],s=r[3]*i,a=r[2]*s,l=r[1]*a,{newShape:u,keptDims:c}=H.squeezeShape(r);if(u.length<r.length){let g=jR(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${MR(g)}
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        return ${o}(${LR(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${l}, ${a}, ${s}, ${i})) +
          depth3;
        ${PR(t)}
      }
    `;let f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===l&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&f==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]},
               ${r[2]*r[3]}, ${r[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;let m=ok(n);return`
    float ${o}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${l} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function LDr(t){let r=t.shapeInfo.logicalShape,n=t.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=H.squeezeShape(r);if(i.length<r.length){let y=jR(t,i),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${MR(y)}
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${o}(${LR(b,s)});
      }
    `}let a=r[5],l=r[4]*a,u=r[3]*l,c=r[2]*u,f=r[1]*c;if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${u}, ${l})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${PR(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],m=p[1];if(m===f&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${u}, ${l}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===a&&d==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${r[1]*r[2]*r[3]*r[4]},
               ${r[2]*r[3]*r[4]},
               ${r[3]*r[4]},
               ${r[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;let g=ok(n);return`
    float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${u} +
          depth2 * ${l} + depth3 * ${a} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function PR(t){let r=t.name,n=H.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${r};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${r}[i];
      }
    }
  `}function BDr(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=t.shapeInfo.logicalShape.length,a=r.logicalShape.length,l=svt(t.shapeInfo.logicalShape,r.logicalShape),u=zr(a),c=a-s,f,d=["x","y","z","w","u","v"];s===0?f="":a<2&&l.length>=1?f="coords = 0;":f=l.map(x=>`coords.${d[x+c]} = 0;`).join(`
`);let p="";a<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((x,v)=>`coords.${d[v+c]}`).join(", ");let h="return outputValue;",g=H.sizeFromShape(t.shapeInfo.logicalShape)===1,b=H.sizeFromShape(r.logicalShape)===1;if(s===1&&!g&&!b)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!b)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(l.length){let x=s-2,v=s-1;l.indexOf(x)>-1&&l.indexOf(v)>-1?h="return vec4(outputValue.x);":l.indexOf(x)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${o}(${p});
      ${h}
    }
  `}function $Dr(t,r){let n=t.name,o=n.charAt(0).toUpperCase()+n.slice(1),i="get"+o+"AtOutCoords",s=r.texShape,a=t.shapeInfo.texShape,l=t.shapeInfo.logicalShape.length,u=r.logicalShape.length;if(!t.shapeInfo.isUniform&&l===u&&t.shapeInfo.flatOffset==null&&H.arraysEqual(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let c=zr(u),f=svt(t.shapeInfo.logicalShape,r.logicalShape),d=u-l,p,h=["x","y","z","w","u","v"];l===0?p="":u<2&&f.length>=1?p="coords = 0;":p=f.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return u<2&&l>0?m="coords":m=t.shapeInfo.logicalShape.map((g,y)=>`coords.${h[y+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${o}(${m});
    }
  `}function zr(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Dee(t,r,n){let{newShape:o,keptDims:i}=H.squeezeShape(r),s=r.length,a=t&&s===3&&r[0]===1,l=a?r.slice(1):o,u=!t&&s>1&&!H.arraysEqual(r,n)&&o.length<s||a;return{useSqueezeShape:u,uniformShape:u?l:r,keptDims:i}}function jR(t,r){let n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=r,n}function LR(t,r){return r.map(n=>t[n]).join(", ")}function fvt(t,r,n,o){let i=n.map((f,d)=>{let p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:r.variableNames[d],shapeInfo:p}}),s=i.map(f=>f.shapeInfo),a={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},l=avt(i,a,r),u=zxt(t.gl,l),c=t.createProgram(u);return Oe().get("ENGINE_COMPILE_ONLY")?{program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:r,fragmentShader:u,source:l,webGLProgram:c,inShapeInfos:s,outShapeInfo:a},vEe(t,r,c)))}function vEe(t,r,n){let o=[],i=[],s,a,l,u=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Oe().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));let f=!1;for(let d of r.variableNames){let p={name:d,uniform:t.getUniformLocation(n,d,f),offset:t.getUniformLocation(n,`offset${d}`,f)};r.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,f),p.texShape=t.getUniformLocation(n,`${d}TexShape`,f)),o.push(p)}if(r.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",f),l=t.getUniformLocation(n,"outShapeStrides",f),a=t.getUniformLocation(n,"outTexShape",f)),r.customUniforms)for(let d of r.customUniforms)i.push(t.getUniformLocation(n,d.name,f));return{variablesLocations:o,customUniformLocations:i,infLoc:u,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:a}}function cvt(t,r){if(t.length!==r.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${r.length} inputs`);t.forEach((n,o)=>{let i=n.logicalShape,s=r[o],a=s.shape;if(!H.arraysEqual(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;let l=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!H.arraysEqual(l,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${l} and ${u} must match`)})}function dvt(t,r,n,o,i){r.program.enableShapeUniforms||(cvt(r.inShapeInfos,n),cvt([r.outShapeInfo],[o]));let s=o.texData.texture,a=o.texData.texShape;o.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):t.setOutputMatrixTexture(s.texture,a[0],a[1]),t.setProgram(r.webGLProgram),t.bindVertexArray(r.webGLProgram.vao),Oe().getNumber("WEBGL_VERSION")===1&&r.infLoc!==null&&t.gl.uniform1f(r.infLoc,1/0),r.nanLoc!==null&&t.gl.uniform1f(r.nanLoc,NaN);for(let u=0;u<n.length;++u){let c=n[u],{uniform:f,offset:d,shape:p,texShape:h}=r.variablesLocations[u];if(p){let{uniformShape:m}=Dee(r.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(p,new Int32Array(m));break;case 2:t.gl.uniform2iv(p,new Int32Array(m));break;case 3:t.gl.uniform3iv(p,new Int32Array(m));break;case 4:t.gl.uniform4iv(p,new Int32Array(m));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(H.sizeFromShape(c.shape)<2)t.gl.uniform1f(f,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(f,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,f,u)}}let l=r.outShapeLocation;if(l)switch(o.shape.length){case 1:t.gl.uniform1iv(l,new Int32Array(o.shape));break;case 2:t.gl.uniform2iv(l,new Int32Array(o.shape));break;case 3:t.gl.uniform3iv(l,new Int32Array(o.shape));break;case 4:t.gl.uniform4iv(l,new Int32Array(o.shape));break;default:break}if(r.outShapeStridesLocation){let u=H.computeStrides(o.shape);switch(o.shape.length){case 2:t.gl.uniform1iv(r.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(r.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(r.outShapeStridesLocation,new Int32Array(u));break;default:break}}if(r.outTexShapeLocation&&t.gl.uniform2i(r.outTexShapeLocation,o.texData.texShape[0],o.texData.texShape[1]),r.program.customUniforms&&i)for(let u=0;u<r.program.customUniforms.length;++u){let c=r.program.customUniforms[u],f=r.customUniformLocations[u],d=i[u];if(c.type==="float")t.gl.uniform1fv(f,d);else if(c.type==="vec2")t.gl.uniform2fv(f,d);else if(c.type==="vec3")t.gl.uniform3fv(f,d);else if(c.type==="vec4")t.gl.uniform4fv(f,d);else if(c.type==="int")t.gl.uniform1iv(f,d);else if(c.type==="ivec2")t.gl.uniform2iv(f,d);else if(c.type==="ivec3")t.gl.uniform3iv(f,d);else if(c.type==="ivec4")t.gl.uniform4iv(f,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function pvt(t,r,n){let o="";r.concat(n).forEach(a=>{let l=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){let u=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:d}=Dee(t.packedInputs,a.shape,u),p="",h="",m="";if(f.length===1&&t.packedInputs){let _=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];p=`${_[0]>1}_${_[1]>1}`}else if(f.length===2&&!t.packedInputs)h=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!t.packedInputs){let _=H.computeStrides(f);m=`${_[0]===u[1]}_${_[_.length-1]===u[1]}`}let g=a.shape.length,y=f.length===2&&H.arraysEqual(a.shape,u),b=H.sizeFromShape(a.shape)===1,x=ce.getBroadcastDims(a.shape,n.shape),v=!t.packedInputs&&g===n.shape.length&&H.arraysEqual(u,n.texData.texShape),w=t.packedInputs||f.length>2?"":`${u[0]>1}_${u[1]>1}`;o+=`${g}_${v}_${c?d:""}_${f.length}_${b}_${x}_${y}_${p}_${h}_${m}_${w}_${l}`}else{let u=a.isUniform?"uniform":a.texData.texShape;o+=`${a.shape}_${u}_${l}`}});let i=t.userCode,s=t.constructor.name;return s+="_"+o+"_"+i+`${Oe().getNumber("WEBGL_VERSION")}`,s}function qn(t){return Oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var Nee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ek.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=pi();this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?nk(["r","c","d"],r):tg(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};var Oee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ek.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=pi();this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?nk(["r","c","d"],r):tg(["r","c","d"],r)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};var Fee=class{constructor(r){this.variableNames=["A"],this.outTexUsage=Wl.DOWNLOAD;let n=pi();this.outputShape=r,this.userCode=`
      ${Iee}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}};var Ree=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Wl.DOWNLOAD;let n=pi();this.outputShape=r,this.userCode=`
      ${Iee}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}};var VDr={R:0,G:1,B:2,A:3},G6=class{constructor(r,n=!1,o="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=pi();this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let l=0;l<o.length;l++){let u=o[l];a+=`
          if(offset == ${l}) {
            result = values[${VDr[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?FR():OR(r)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${o.length});

        flatIndex = idiv(flatIndex, ${o.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}};var Mee=class{constructor(r,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=pi();this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){let u=a*2+l;i+=`
          localCoords = coords;
          if(localCoords[2] + ${l} < ${this.enableShapeUniforms?"outShape[2]":`${r[2]}`}) {
          localCoords[2] += ${l};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${r[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${o.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?FR():OR(r)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${o.output} = ${s};
        }
    `}};re();re();function hvt(t){let r=pi(),n=`${r.version}
    precision highp float;
    ${r.attribute} vec3 clipSpacePos;
    ${r.attribute} vec2 uv;
    ${r.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return $xt(t,n)}function mvt(t){let r=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Gxt(t,r)}function gvt(t){let r=new Uint16Array([0,1,2,2,1,3]);return Wxt(t,r)}function W6(t,r,n,o,i,s){Hxt(r,n);let a=qxt(t),l=t.TEXTURE_2D;return Wt(t,()=>t.bindTexture(l,a)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MIN_FILTER,t.NEAREST)),Wt(t,()=>t.texParameteri(l,t.TEXTURE_MAG_FILTER,t.NEAREST)),Oe().getNumber("WEBGL_VERSION")===1?Wt(t,()=>t.texImage2D(l,0,o,r,n,0,i,s,null)):Wt(t,()=>t.texStorage2D(l,1,o,r,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,r]}}function wEe(t){return t.internalFormatFloat}function yvt(t,r,n,o){let[i,s]=tk(r,n);return W6(t,i,s,wEe(o),o.textureFormatFloat,t.FLOAT)}function _Ee(t){return t.internalFormatHalfFloat}function bvt(t,r,n,o){let[i,s]=tk(r,n);return W6(t,i,s,_Ee(o),o.textureFormatFloat,o.textureTypeHalfFloat)}function SEe(t){return t.downloadTextureFormat}function xvt(t,r,n,o){let[i,s]=tk(r,n);return W6(t,i,s,SEe(o),t.RGBA,t.UNSIGNED_BYTE)}function CEe(t){return t.internalFormatPackedFloat}function vvt(t,r,n,o){let[i,s]=ob(r,n);return W6(t,i,s,CEe(o),t.RGBA,t.FLOAT)}function EEe(t){return t.internalFormatPackedHalfFloat}function wvt(t,r,n,o){let[i,s]=ob(r,n);return W6(t,i,s,EEe(o),t.RGBA,o.textureTypeHalfFloat)}function _vt(t,r,n){return Wt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),yEe(t,r,"clipSpacePos",n,3,20,0)&&yEe(t,r,"uv",n,2,20,12)}function Svt(t,r,n,o,i,s){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r));let a,l,u;i instanceof Uint8Array?(a=new Uint8Array(n*o*4),l=t.UNSIGNED_BYTE,u=t.RGBA):(a=new Float32Array(n*o*4),l=t.FLOAT,u=s.internalFormatPackedFloat),a.set(i),Oe().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,o,t.RGBA,l,a)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,o,0,t.RGBA,l,a)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Cvt(t,r,n){Wt(t,()=>t.bindTexture(t.TEXTURE_2D,r)),n.data instanceof Uint8Array?Oe().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Oe().getNumber("WEBGL_VERSION")===2?Wt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Wt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Wt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Evt(t,r,n,o){let i=t.createBuffer();Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));let l=4*4*r*n;return Wt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,l,t.STREAM_READ)),Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,0)),Wt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function Tvt(t,r,n){let o=t,i=new Float32Array(n);return o.bindBuffer(o.PIXEL_PACK_BUFFER,r),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,i),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),i}function Avt(t,r,n,o){let[i,s]=tk(r,n),a=4,l=new Uint8Array(jxt(r*n,a));return Wt(t,()=>t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)}function kvt(t,r,n,o,i,s,a,l){let u=t,c=new Float32Array(Lxt(s,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,r),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function Ivt(t,r,n){let o=new Float32Array(r*n*4);return Wt(t,()=>t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,o)),o}var BR=class{constructor(r){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=Oe().getNumber("WEBGL_VERSION");if(r!=null?(this.gl=r,Pxt(n,r)):this.gl=Rf(n),r=this.gl,Oe().getNumber("WEBGL_VERSION")===2){let s=r;this.createVertexArray=()=>Wt(s,()=>s.createVertexArray()),this.bindVertexArray=a=>Wt(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>Wt(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>Wt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(r!=null){let s=r.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Wt(r,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>Wt(r,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Wt(r,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>Wt(r,()=>r.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Oe().getNumber("WEBGL_VERSION")===1){let s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=z6(this.gl,s),Bd(this.gl,a))this.textureHalfFloatExtension=z6(this.gl,a);else if(Oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),Bd(this.gl,i))this.colorBufferHalfFloatExtension=z6(this.gl,i);else if(Oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",Bd(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else if(Bd(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=mvt(this.gl),this.indexBuffer=gvt(this.gl),this.framebuffer=Yxt(this.gl),this.textureConfig=$6(this.gl,this.textureHalfFloatExtension)}get debug(){return Oe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let r=this.gl;Wt(r,()=>r.finish()),Wt(r,()=>r.bindFramebuffer(r.FRAMEBUFFER,null)),Wt(r,()=>r.deleteFramebuffer(this.framebuffer)),Wt(r,()=>r.bindBuffer(r.ARRAY_BUFFER,null)),Wt(r,()=>r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)),Wt(r,()=>r.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(r,n){return this.throwIfDisposed(),yvt(this.gl,r,n,this.textureConfig)}createFloat16MatrixTexture(r,n){return this.throwIfDisposed(),bvt(this.gl,r,n,this.textureConfig)}createUnsignedBytesMatrixTexture(r,n){return this.throwIfDisposed(),xvt(this.gl,r,n,this.textureConfig)}uploadPixelDataToTexture(r,n){this.throwIfDisposed(),Cvt(this.gl,r,n)}uploadDenseMatrixToTexture(r,n,o,i){this.throwIfDisposed(),Svt(this.gl,r,n,o,i,this.textureConfig)}createFloat16PackedMatrixTexture(r,n){return this.throwIfDisposed(),wvt(this.gl,r,n,this.textureConfig)}createPackedMatrixTexture(r,n){return this.throwIfDisposed(),vvt(this.gl,r,n,this.textureConfig)}deleteMatrixTexture(r){this.throwIfDisposed(),this.outputTexture===r&&(bEe(this.gl,this.framebuffer),this.outputTexture=null),Wt(this.gl,()=>this.gl.deleteTexture(r))}downloadByteEncodedFloatMatrixFromOutputTexture(r,n,o){return this.downloadMatrixDriver(r,()=>Avt(this.gl,n,o,this.textureConfig))}downloadPackedMatrixFromBuffer(r,n,o,i,s,a){return kvt(this.gl,r,n,o,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(r,n){return Tvt(this.gl,r,n)}createBufferFromTexture(r,n,o){this.bindTextureToFrameBuffer(r);let i=Evt(this.gl,n,o,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){let r=this.createFence(this.gl);return this.pollFence(r)}createFence(r){let n,o;if(Oe().getBool("WEBGL_FENCE_API_ENABLED")){let i=r,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),o=()=>{let a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),o=()=>this.isQueryAvailable(n,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):o=()=>!0;return{query:n,isFencePassed:o}}downloadMatrixFromPackedTexture(r,n,o){return this.downloadMatrixDriver(r,()=>Ivt(this.gl,n,o))}createProgram(r){this.throwIfDisposed();let n=this.gl;this.vertexShader==null&&(this.vertexShader=hvt(n));let o=Uxt(n);Wt(n,()=>n.attachShader(o,this.vertexShader)),Wt(n,()=>n.attachShader(o,r)),Vxt(n,o);let i=Object.assign(o,{vao:this.createVertexArray()});return this.debug&&Tee(n,i),i}buildVao(r){this.setProgram(r),this.bindVertexArray(r.vao);let n=this.gl;Wt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),_vt(n,r,this.vertexBuffer)}deleteProgram(r){this.throwIfDisposed(),r===this.program&&(this.program=null),r!=null&&(Wt(this.gl,()=>this.gl.deleteProgram(r)),this.deleteVertexArray(r.vao))}setProgram(r){this.throwIfDisposed(),this.program=r,this.program!=null&&this.debug&&Tee(this.gl,this.program),Wt(this.gl,()=>this.gl.useProgram(r))}getUniformLocation(r,n,o=!0){return this.throwIfDisposed(),o?Xxt(this.gl,r,n):Kxt(this.gl,r,n)}getAttributeLocation(r,n){return this.throwIfDisposed(),Wt(this.gl,()=>this.gl.getAttribLocation(r,n))}getUniformLocationNoThrow(r,n){return this.throwIfDisposed(),this.gl.getUniformLocation(r,n)}setInputMatrixTexture(r,n,o){this.throwIfDisposed(),this.throwIfNoProgram(),Zxt(this.gl,r,n,o)}setOutputMatrixTexture(r,n,o){this.setOutputMatrixTextureDriver(r,o,n)}setOutputPackedMatrixTexture(r,n,o){this.throwIfDisposed();let[i,s]=ob(n,o);this.setOutputMatrixTextureDriver(r,i,s)}setOutputMatrixWriteRegion(r,n,o,i){this.setOutputMatrixWriteRegionDriver(o,r,i,n)}setOutputPackedMatrixWriteRegion(r,n,o,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Tee(this.gl,this.program),U6(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let r=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Wt(r,()=>r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=z6(this.gl,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.createQuery();return o.beginQuery(i.TIME_ELAPSED_EXT,s),s}let r=this.getQueryTimerExtensionWebGL1(),n=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,n),n}endQuery(){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,o=this.getQueryTimerExtensionWebGL2();n.endQuery(o.TIME_ELAPSED_EXT);return}let r=this.getQueryTimerExtensionWebGL1();r.endQueryEXT(r.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(r){return Be(this,null,function*(){return yield H.repeatedTry(()=>this.disposed||this.isQueryAvailable(r,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(r,Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(r,n){if(n===0)return null;if(n===2){let o=this.gl;return o.getQueryParameter(r,o.QUERY_RESULT)/1e6}else{let o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(r,n){if(n===0)return!0;if(n===2){let o=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=o.getQueryParameter(r,o.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{let o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(r,o.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(r){return new Promise(n=>{this.addItemToPoll(()=>r.isFencePassed(),()=>n())})}pollItems(){let r=WDr(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=r;++n){let{resolveFn:o}=this.itemsToPoll[n];o()}this.itemsToPoll=this.itemsToPoll.slice(r+1)}addItemToPoll(r,n){if(this.itemsToPoll.push({isDoneFn:r,resolveFn:n}),this.itemsToPoll.length>1)return;let o;"setTimeoutCustom"in Oe().platform&&(o=Oe().platform.setTimeoutCustom.bind(Oe().platform)),H.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,o)}bindTextureToFrameBuffer(r){this.throwIfDisposed(),Aee(this.gl,r,this.framebuffer),this.debug&&U6(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Aee(this.gl,this.outputTexture,this.framebuffer),this.debug&&U6(this.gl)):bEe(this.gl,this.framebuffer)}downloadMatrixDriver(r,n){this.bindTextureToFrameBuffer(r);let o=n();return this.unbindTextureToFrameBuffer(),o}setOutputMatrixTextureDriver(r,n,o){this.throwIfDisposed();let i=this.gl;Aee(i,r,this.framebuffer),this.debug&&U6(i),this.outputTexture=r,Wt(i,()=>i.viewport(0,0,n,o)),Wt(i,()=>i.scissor(0,0,n,o))}setOutputMatrixWriteRegionDriver(r,n,o,i){this.throwIfDisposed(),Wt(this.gl,()=>this.gl.scissor(r,n,o,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function WDr(t){let r=0;for(;r<t.length&&t[r]();++r);return r-1}var{addImpl:Dvt,bincountImpl:Pee,bincountReduceImpl:Nvt,bitwiseAndImpl:Ovt,castImpl:Fvt,ceilImpl:Rvt,concatImpl:Mvt,equalImpl:Pvt,expImpl:jvt,expm1Impl:Lvt,floorImpl:Bvt,gatherNdImpl:$vt,gatherV2Impl:zvt,greaterImpl:Uvt,greaterEqualImpl:Vvt,lessImpl:Gvt,lessEqualImpl:Wvt,linSpaceImpl:qvt,logImpl:Hvt,maxImpl:Yvt,maximumImpl:Xvt,minimumImpl:Kvt,multiplyImpl:Zvt,negImpl:Qvt,notEqualImpl:Jvt,prodImpl:e1t,raggedGatherImpl:t1t,raggedRangeImpl:r1t,raggedTensorToTensorImpl:n1t,rangeImpl:o1t,rsqrtImpl:i1t,scatterImpl:s1t,sigmoidImpl:a1t,simpleAbsImpl:jee,sliceImpl:l1t,sparseFillEmptyRowsImpl:u1t,sparseReshapeImpl:c1t,sparseSegmentReductionImpl:Lee,sqrtImpl:f1t,staticRegexReplaceImpl:d1t,stridedSliceImpl:p1t,stringNGramsImpl:h1t,stringSplitImpl:m1t,stringToHashBucketFastImpl:g1t,subImpl:y1t,tileImpl:b1t,topKImpl:x1t,transposeImpl:ik,uniqueImpl:v1t}=JCe;function TEe(t,r){return["x","y","z","w","u","v"].slice(0,r).map(n=>`${t}.${n}`)}function ji(t,r){return r===1?[t]:TEe(t,r)}function w1t(t,r){if(t===1)return"rc";let n="";for(let o=0;o<t;o++)n+=r[o],o<t-1&&(n+=",");return n}var Bee=class{constructor(r){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.enableShapeUniforms=qn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=ji("rc",this.rank),o=zr(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(r){let n=[];for(let o=0;o<=1;o++)for(let i=0;i<=1;i++){let s=`${o===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${r[r.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(r){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let o=this.rank-2;o<this.rank;o++)n+=`${r[o]} >= ${this.enableShapeUniforms?`outShape[${o}]`:this.outputShape[o]}`,o<this.rank-1&&(n+="||");return n}getSetup(r){if(this.rank===1)return"";let n=r.slice(-2),o=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${o};
      bool rEdge = rp1 >= ${i};
    `}getOutput(r){let n=this.getSourceCoordsArr(r);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}};var $R=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length);let o="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),o+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${qDr(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?FR():OR(r)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":r[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":r[2]};

        ${o}

        setOutput(result);
      }
    `}};function qDr(t,r){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${r?ivt(["r","c","d"],"inputShape"):tg(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}re();var $ee=class{constructor(r){this.gpgpu=r,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(r,n,o){let i=S1t(n,o),s=C1t(r,i,o);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);let a=_1t(r,i,this.gpgpu.gl,this.gpgpu.textureConfig,o);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let l;return i===gl.PACKED_2X2_FLOAT32?l=this.gpgpu.createPackedMatrixTexture(r[0],r[1]):i===gl.PACKED_2X2_FLOAT16?l=this.gpgpu.createFloat16PackedMatrixTexture(r[0],r[1]):i===gl.UNPACKED_FLOAT32?l=this.gpgpu.createFloat32MatrixTexture(r[0],r[1]):i===gl.UNPACKED_FLOAT16?l=this.gpgpu.createFloat16MatrixTexture(r[0],r[1]):i===gl.PACKED_4X1_UNSIGNED_BYTE&&(l=this.gpgpu.createUnsignedBytesMatrixTexture(r[0],r[1])),this.usedTextures[s].push(l),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),l}releaseTexture(r,n,o,i){if(this.freeTextures==null)return;let s=S1t(o,i),a=C1t(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);let l=_1t(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=Oe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(r.texture),this._numBytesAllocated-=l):(this.freeTextures[a].push(r),this.numFreeTextures++,this._numBytesFree+=l),this.numUsedTextures--;let c=this.usedTextures[a],f=c&&c.indexOf(r);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let r=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${r})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let r in this.freeTextures)this.freeTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let r in this.usedTextures)this.usedTextures[r].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function HDr(t,r){let n=t;if(r===n.R32F)return 4;if(r===n.R16F)return 2;if(r===n.RGBA32F)return 16;if(r===t.RGBA)return 16;if(r===n.RGBA16F)return 8;if(r===n.RGBA8)return 4;throw new Error(`Unknown internal format ${r}`)}function _1t(t,r,n,o,i){let s=YDr(r,o),a;if(i){let[u,c]=ob(t[0],t[1]);a=u*c}else{let[u,c]=tk(t[0],t[1]);a=u*c}let l=HDr(n,s);return a*l}function YDr(t,r){switch(t){case gl.PACKED_2X2_FLOAT32:return CEe(r);case gl.PACKED_2X2_FLOAT16:return EEe(r);case gl.UNPACKED_FLOAT32:return wEe(r);case gl.UNPACKED_FLOAT16:return _Ee(r);case gl.PACKED_4X1_UNSIGNED_BYTE:return SEe(r);default:throw new Error(`Unknown physical texture type ${t}`)}}function XDr(t){return Oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?gl.PACKED_2X2_FLOAT32:gl.UNPACKED_FLOAT32:t?gl.PACKED_2X2_FLOAT16:gl.UNPACKED_FLOAT16}function S1t(t,r){if(t===Wl.UPLOAD)return gl.PACKED_2X2_FLOAT32;if(t===Wl.RENDER||t==null)return XDr(r);if(t===Wl.DOWNLOAD||t===Wl.PIXELS)return gl.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function C1t(t,r,n){return`${t[0]}_${t[1]}_${r}_${n}`}var Na=class{constructor(r,n){this.variableNames=["A"],this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},vs="if (isnan(x)) return x;",E1t="return x;",AEe="return abs(x);";var T1t="return (x >= 0.0) ? x : (exp(x) - 1.0);",A1t=vs+`
  return (x < 0.0) ? 0.0 : x;
`,k1t=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,sb="return x;",I1t="return 1.0 / (1.0 + exp(-1.0 * x));";var N1t="return x;",O1t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,F1t=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,R1t=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,M1t="return 1.0 / (1.0 + exp(-1.0 * x));",Ac=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var zee=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length);let n=r.length,o=ji("rc",n),i=zr(n),s=w1t(n,o),a=o.slice(-2),l=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${l}));
      }
    `}};var ZDr=_a.whereImpl,QDr=1e-7,JDr=1e-4,Uee={};function eNr(t){return t in Uee||(Uee[t]={}),Uee[t]}var tNr=Oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),rNr=600;function nNr(){return Oe().global.screen==null?1024:Oe().global.screen.height*Oe().global.screen.width*window.devicePixelRatio*rNr/1024/1024}var P1t=(()=>{class t extends pg{nextDataId(){return t.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let o;if(n!=null){if(n instanceof BR)o=n;else{let i=Rf(Oe().getNumber("WEBGL_VERSION"),n);o=new BR(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let i=Rf(Oe().getNumber("WEBGL_VERSION"));o=new BR(i),this.binaryCache=eNr(Oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=o,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new $ee(this.gpgpu),this.numMBBeforeWarning=nNr(),this.texData=new w1(this,Hf())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,o,i,s,a,l){let u=this.makeTensorInfo(o,i),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:n,texShape:[s,a]},c.texShape=[s,a];let f=V6(o),d=new G6(f,!1,l),p=this.runWebGLProgram(d,[u],i,[[s,a]]);return p.shape=o,c.texture=null,this.disposeIntermediateTensorInfo(u),p.dataId}write(n,o,i){if((Oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Oe().getBool("DEBUG"))&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let s={id:this.nextDataId()};return this.texData.set(s,{shape:o,dtype:i,values:n,usage:Wl.UPLOAD,refCount:1}),s}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){let o=this.texData.get(n);o.refCount++}decRef(n){if(this.texData.has(n)){let o=this.texData.get(n);o.refCount--}}move(n,o,i,s,a){if(Oe().getBool("DEBUG")&&this.checkNumericalProblems(o),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:s,values:o,usage:Wl.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let o=this.texData.get(n),{values:i,dtype:s,complexTensorInfos:a,slice:l,shape:u,isPacked:c}=o;if(l!=null){let h;c?h=new Ac(u,sb):h=new Na(u,sb);let m=this.runWebGLProgram(h,[{dataId:n,shape:u,dtype:s}],s),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(i!=null)return this.convertAndCacheOnCPU(n);if(s==="string")return i;let f=this.activeTimers!=null,d;f&&(d=H.now());let p;if(s==="complex64"){let h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);p=ce.mergeRealAndImagArrays(h,m)}else p=this.getValuesFromTexture(n);return f&&(this.downloadWaitMs+=H.now()-d),this.convertAndCacheOnCPU(n,p)}read(n){return Be(this,null,function*(){if(this.pendingRead.has(n)){let g=this.pendingRead.get(n);return new Promise(y=>g.push(y))}let o=this.texData.get(n),{values:i,shape:s,slice:a,dtype:l,complexTensorInfos:u,isPacked:c}=o;if(a!=null){let g;c?g=new Ac(s,sb):g=new Na(s,sb);let y=this.runWebGLProgram(g,[{dataId:n,shape:s,dtype:l}],l),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(i!=null)return this.convertAndCacheOnCPU(n);if(Oe().getBool("DEBUG")&&!Oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let f=null,d;if(l!=="complex64"&&Oe().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(n);let g=this.texData.get(d.dataId);f=this.gpgpu.createBufferFromTexture(g.texture.texture,...B6(s))}this.pendingRead.set(n,[]),l!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(l==="complex64"){let g=yield Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),y=g[0],b=g[1];p=ce.mergeRealAndImagArrays(y,b)}else if(f==null)p=this.getValuesFromTexture(n);else{let g=H.sizeFromShape(s);p=this.gpgpu.downloadFloat32MatrixFromBuffer(f,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),f!=null){let g=this.gpgpu.gl;Wt(g,()=>g.deleteBuffer(f))}let h=this.convertAndCacheOnCPU(n,p),m=this.pendingRead.get(n);return this.pendingRead.delete(n),m.forEach(g=>g(h)),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&Hf().removeDataId(n,this),this.pendingDeletes--),h})}readToGPU(n,o={}){let i=this.texData.get(n),{values:s,shape:a,slice:l,dtype:u,isPacked:c,texture:f}=i;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(l!=null){let m;c?m=new Ac(a,sb):m=new Na(a,sb);let g=this.runWebGLProgram(m,[{dataId:n,shape:a,dtype:u}],u),y=this.readToGPU(g,o);return this.disposeIntermediateTensorInfo(g),y}if(f==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(n,o.customTexShape),p=Hf().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(n){let o=this.readSync(n.dataId);if(n.dtype==="string")try{let i=o.map(s=>H.decodeString(s));return Jt(n.shape,n.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Jt(n.shape,n.dtype,o)}checkNumericalProblems(n){if(n!=null)for(let o=0;o<n.length;o++){let i=n[o];if(!Bxt(i))throw Oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:o,dtype:i,isPacked:s}=this.texData.get(n),a=H.sizeFromShape(o);if(Oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(n),m=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...B6(o)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),g}let l=Oe().getBool("WEBGL_PACK")&&s===!0,u=l?V6(o):o,c=l?new Ree(u):new Fee(u),f=this.runWebGLProgram(c,[{shape:u,dtype:i,dataId:n}],"float32"),d=this.texData.get(f.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(f),p}timerAvailable(){return Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){let o=this.activeTimers,i=[],s=!1;this.programTimersStack==null?(this.programTimersStack=i,s=!0):this.activeTimers.push(i),this.activeTimers=i,n();let a=H.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),l=H.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=o,s&&(this.programTimersStack=null);let u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Be(this,null,function*(){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(a);u.kernelMs=H.sum(c),u.getExtraProfileInfo=()=>c.map((f,d)=>({name:l[d],ms:f})).map(f=>`${f.name}: ${f.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:H.now(),endMs:null}}endTimer(n){return Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=H.now(),n)}getQueryTime(n){return Be(this,null,function*(){if(Oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(n);let o=n;return o.endMs-o.startMs})}disposeData(n,o=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(o?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!o&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:i}=this.texData.get(n);return i!=null&&(this.disposeData(i.real.dataId,o),this.disposeData(i.imag.dataId,o)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:o,dtype:i,texShape:s,usage:a,isPacked:l,slice:u}=this.texData.get(n),c=u&&u.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(o,s,a,l)));let d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,o=tNr){return Oe().getBool("WEBGL_CPU_FORWARD")&&n.every(i=>this.texData.get(i.dataId).texture==null&&H.sizeFromShape(i.shape)<o)}getGPGPUContext(){return this.gpgpu}where(n){ce.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let o=n.dataSync();return ZDr(n.shape,o)}packedUnaryOp(n,o,i){let s=new Ac(n.shape,o),a=this.compileAndRun(s,[n],i);return Hf().makeTensorFromTensorInfo(a)}abs(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let s=jee(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,s)}if(Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,AEe,n.dtype);let o=new Na(n.shape,AEe),i=this.compileAndRun(o,[n]);return Hf().makeTensorFromTensorInfo(i)}makeTensorInfo(n,o,i){let s;if(o==="string"&&i!=null&&i.length>0&&H.isString(i[0])){let a=i.map(l=>H.encodeString(l));s=this.write(a,n,o)}else s=this.write(i,n,o);return this.texData.get(s).usage=null,{dataId:s,shape:n,dtype:o}}makeOutput(n,o,i){return Hf().makeTensorFromTensorInfo(this.makeTensorInfo(n,o,i),this)}unpackTensor(n){let o=new zee(n.shape);return this.runWebGLProgram(o,[n],n.dtype)}packTensor(n){let o=new Bee(n.shape);return this.runWebGLProgram(o,[n],n.dtype,null,!0)}packedReshape(n,o){let i=[z2(n.shape),...U2(n.shape)],s={dtype:n.dtype,shape:i,dataId:n.dataId},a=[z2(o),...U2(o)],l=new $R(a,i),u=!0,c=[i],f=this.runWebGLProgram(l,[s],n.dtype,c,u);return{dataId:f.dataId,shape:o,dtype:f.dtype}}decode(n,o){let i=this.texData.get(n),{isPacked:s,shape:a,dtype:l}=i;if(o!=null){let h=H.sizeFromShape(a),m=o[0]*o[1]*4;H.assert(h<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let u=V6(a),c;s?c=new Oee(u):c=new Nee(u);let f=!0,d=[o??B6(u)],p=this.runWebGLProgram(c,[{shape:u,dtype:l,dataId:n}],l,d,f,o);return{dtype:l,shape:a,dataId:p.dataId}}runWebGLProgram(n,o,i,s,a=!1,l){let u=this.makeTensorInfo(n.outputShape,i),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===ek.DENSE){let x=l??B6(n.outputShape);c.texShape=x.map(v=>v*2)}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),H.sizeFromShape(u.shape)===0)return c.values=H.getTypedArrayFromDType(u.dtype,0),u;let f=[],d=o.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(x.dataId);if(v.texture==null){if(!n.packedInputs&&H.sizeFromShape(x.shape)<=Oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:v.values};n.packedInputs&&(v.isPacked=!0,v.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!v.isPacked!=!!n.packedInputs)x=v.isPacked?this.unpackTensor(x):this.packTensor(x),f.push(x),v=this.texData.get(x.dataId);else if(v.isPacked&&!rk(v.shape,x.shape)){let w=x,_=x.shape;x.shape=v.shape,x=this.packedReshape(x,_),f.push(x),v=this.texData.get(x.dataId),w.shape=_}return{shape:x.shape,texData:v,isUniform:!1}});this.uploadToGPU(u.dataId);let p={shape:u.shape,texData:c,isUniform:!1},h=pvt(n,d,p),m=this.getAndSaveBinary(h,()=>fvt(this.gpgpu,n,d,p)),g=this.activeTimers!=null,y;g&&(y=this.startTimer()),Oe().get("ENGINE_COMPILE_ONLY")||dvt(this.gpgpu,m,d,p,s),f.forEach(x=>this.disposeIntermediateTensorInfo(x)),g&&(y=this.endTimer(y),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(y)}));let b=Oe().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){let x=H.now();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!Oe().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&a===!1){let x=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),x}return u}compileAndRun(n,o,i,s,a=!1){return i=i||o[0].dtype,this.runWebGLProgram(n,o,i,s,a)}getAndSaveBinary(n,o){return n in this.binaryCache||(this.binaryCache[n]=o()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(o=>{this.gpgpu.deleteProgram(this.binaryCache[o].webGLProgram),delete this.binaryCache[o]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=je(()=>{if(!Oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=Oe().getBool("DEBUG");Oe().set("DEBUG",!1);let o=this.abs(Rt(1e-8)).dataSync()[0];if(Oe().set("DEBUG",n),o>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?QDr:JDr}uploadToGPU(n){let o=this.texData.get(n),{shape:i,dtype:s,values:a,texture:l,usage:u,isPacked:c}=o;if(l!=null)return;let f=this.activeTimers!=null,d;f&&(d=H.now());let p=o.texShape;if(p==null&&(p=Qxt(i,c),o.texShape=p),a!=null){let h=V6(i),m,g=p[1],y=p[0],b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(c||!b)&&([g,y]=ob(p[0],p[1])),c?m=new Mee(h,b):m=new G6(h,b);let x=b?[y,g]:p,v=this.makeTensorInfo(x,s),w=this.texData.get(v.dataId);b?w.usage=Wl.PIXELS:w.usage=Wl.UPLOAD,w.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),g,y,a);let _=[[y,g]],S=this.runWebGLProgram(m,[v],s,_,!0),E=this.texData.get(S.dataId);o.texShape=E.texShape,o.isPacked=E.isPacked,o.usage=E.usage,Oe().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(o.texture=E.texture,o.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),f&&(this.uploadWaitMs+=H.now()-d)}else{let h=this.acquireTexture(p,u,s,c);o.texture=h}}convertAndCacheOnCPU(n,o){let i=this.texData.get(n),{dtype:s}=i;return o!=null&&(i.values=oNr(o,s)),i.values}acquireTexture(n,o,i,s){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,o,s)}computeBytes(n,o){return n[0]*n[1]*H.bytesPerElement(o)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){return Be(this,null,function*(){let n=[];if(this.gpgpu.parallelCompilationExtension){for(let[,o]of Object.entries(this.binaryCache))n.push(this.checkCompletionAsync_(o));return Promise.all(n)}else{for(let[,o]of Object.entries(this.binaryCache)){let i=new Promise(s=>{try{this.checkCompletion_(o),s(!0)}catch(a){throw a}});n.push(i)}return Promise.all(n)}})}checkCompletionAsync_(n){return Be(this,null,function*(){return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(n):(yield KI(),this.checkCompletionAsync_(n))})}checkCompletion_(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(gEe(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:o,customUniformLocations:i,infLoc:s,nanLoc:a,outShapeLocation:l,outShapeStridesLocation:u,outTexShapeLocation:c}=vEe(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=o,n.customUniformLocations=i,n.infLoc=s,n.nanLoc=a,n.outShapeLocation=l,n.outShapeStridesLocation=u,n.outTexShapeLocation=c}}createTensorFromGPUData(n,o,i){n.channels=n.channels||"RGBA";let{texture:s,height:a,width:l,channels:u}=n,c=Hf().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let f=c.writeTexture(s,o,i,a,l,u);return Hf().makeTensorFromDataId(f,o,i,c)}}return t.nextDataId=0,t})();function oNr(t,r){if(r==="float32"||r==="complex64")return t;if(r==="int32"||r==="bool"){let n=r==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let o=0;o<n.length;++o)n[o]=Math.round(t[o]);return n}else throw new Error(`Unknown dtype ${r}`)}hx.isBrowser()&&i3("webgl",()=>new P1t,2);re();re();re();re();re();var zR=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var kc=class{constructor(r,n,o){this.variableNames=["A","B"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${r}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};re();var Pf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Mf=class{constructor(r,n,o,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ce.assertAndGetBroadcastShape(n,o);let s=this.outputShape.length;this.enableShapeUniforms=qn(s);let a="";if(i)if(s===0||H.sizeFromShape(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${zr(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let u=ji("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${r}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}};re();re();function Li(t){let{inputs:r,backend:n}=t,{x:o}=r;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}var j1t={kernelName:hh,backendName:"webgl",kernelFunc:Li};function Ic(t){let{inputs:r,backend:n}=t,{real:o,imag:i}=r,s=n.makeTensorInfo(o.shape,"complex64"),a=n.texData.get(s.dataId),l=Li({inputs:{x:o},backend:n}),u=Li({inputs:{x:i},backend:n});return a.complexTensorInfos={real:l,imag:u},s}var L1t={kernelName:gS,backendName:"webgl",kernelFunc:Ic};re();var kEe="return (a < 0.) ? b * a : a;",IEe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function iNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{alpha:s}=o,a=n.makeTensorInfo([],"float32",H.createScalarValue(s,"float32")),l=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mf(IEe,i.shape,a.shape):new kc(kEe,i.shape,a.shape),u=n.runWebGLProgram(l,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),u}var B1t={kernelName:$b,backendName:"webgl",kernelFunc:iNr};re();var DEe="return (a < 0.) ? b * a : a;",NEe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function sNr(t){let{inputs:r,backend:n}=t,{x:o,alpha:i}=r,s=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mf(NEe,o.shape,i.shape):new kc(DEe,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],"float32")}var $1t={kernelName:Jb,backendName:"webgl",kernelFunc:sNr};var nh="if (isnan(x)) return x;";function er({opSnippet:t,packedOpSnippet:r,cpuKernelImpl:n,dtype:o}){return({inputs:i,backend:s})=>{let{x:a}=i,l=s,u=o||a.dtype;if(l.shouldExecuteOnCPU([a])&&n!=null){let d=l.texData.get(a.dataId),p=n(d.values,u);return l.makeTensorInfo(a.shape,u,p)}let c=Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&r!=null,f;return c?f=new Ac(a.shape,r):f=new Na(a.shape,t),l.runWebGLProgram(f,[a],u)}}function Mn({opSnippet:t,packedOpSnippet:r,checkOutOfBounds:n=!1,supportsComplex:o=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:l})=>{let{a:u,b:c}=a,f=l;if(o&&u.dtype==="complex64"){let m=f.texData.get(u.dataId),g=f.texData.get(c.dataId),[y,b]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(v=>{let[w,_]=v,C={dataId:w.dataId,dtype:w.dtype,shape:u.shape},S={dataId:_.dataId,dtype:_.dtype,shape:c.shape},E=new kc(t,u.shape,c.shape);return f.runWebGLProgram(E,[C,S],zi(w.dtype,_.dtype))}),x=Ic({inputs:{real:y,imag:b},backend:f});return f.disposeIntermediateTensorInfo(y),f.disposeIntermediateTensorInfo(b),x}let d=s||zi(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([u,c]))&&i!=null){let m=f.texData.get(u.dataId).values,g=f.texData.get(c.dataId).values,y=u.dtype==="string"?ce.fromUint8ToStringArray(m):m,b=u.dtype==="string"?ce.fromUint8ToStringArray(g):g,[x,v]=i(u.shape,c.shape,y,b,d),w=f.makeTensorInfo(v,d),_=f.texData.get(w.dataId);return _.values=x,w}let p=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&r!=null,h;return p?h=new Mf(r,u.shape,c.shape,n):h=new kc(t,u.shape,c.shape),f.runWebGLProgram(h,[u,c],d)}}function o1(t,r=!1){if(t==="linear")return r?N1t:E1t;if(t==="relu")return r?F1t:A1t;if(t==="elu")return r?O1t:T1t;if(t==="relu6")return r?R1t:k1t;if(t==="prelu")return r?NEe:DEe;if(t==="leakyrelu")return r?IEe:kEe;if(t==="sigmoid")return r?M1t:I1t;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var UR=class{constructor(r,n,o,i=!1,s=!1,a=!1,l=null,u=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=qn(this.outputShape.length);let f=i?r[1]:r[2],d=Math.ceil(f/2),p=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",m=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],y="",b="";l&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${l}
        }`:c?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${l}
        }`:y=`vec4 activation(vec4 x) {
          ${l}
        }`,b="result = activation(result);");let x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",w="rc.x";r[0]<n[0]?v=`imod(rc.x, ${r[0]})`:n[0]<r[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}};re();re();var OEe={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},q6=class{constructor(r,n,o){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ce.assertAndGetBroadcastShape(n,o),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${r}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var z1t="return a * b;";function H6(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=ce.upcastType(o.dtype,i.dtype);if(o.dtype==="complex64"){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),c=new q6(OEe.REAL,o.shape,i.shape),f=new q6(OEe.IMAG,o.shape,i.shape),d=[{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(f,d,"float32"),m=Ic({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([o,i])){let l=n.texData.get(o.dataId),u=n.texData.get(i.dataId),[c,f]=Zvt(o.shape,i.shape,l.values,u.values,s),d=n.makeTensorInfo(f,s),p=n.texData.get(d.dataId);return p.values=c,d}let a;return Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Mf(z1t,o.shape,i.shape):a=new kc(z1t,o.shape,i.shape),n.runWebGLProgram(a,[o,i],s)}var U1t={kernelName:Vg,backendName:"webgl",kernelFunc:H6};re();function V1t(t,r,n){let o=[z2(t.shape),...U2(t.shape)],i={dtype:t.dtype,shape:o,dataId:t.dataId},s=[z2(r),...U2(r)],a=new $R(s,o),l=!0,u=[o],c=n.runWebGLProgram(a,[i],t.dtype,u,l);return{dataId:c.dataId,shape:r,dtype:c.dtype}}function yt(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{shape:s}=o,a=n,l=H.sizeFromShape(i.shape),u=H.inferFromImplicitShape(s,l),c=H.sizeFromShape(u);H.assert(l===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${l} elements. The new shape and old shape must have the same number of elements.`);let f=a.texData.get(i.dataId);return f.isPacked&&!rk(i.shape,u)&&!(f.texture!==null&&rk(f.shape,u))?V1t(i,u,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}var G1t={kernelName:tx,backendName:"webgl",kernelFunc:yt};re();re();re();re();var Y6=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l=Math.floor(o/4)*4,u=o%4,c="sumValue += dot(values, ones);";if(n!=null){let d=1/n;c=`sumValue += dot(values * ${H.isInt(d)?d.toPrecision(2):d}, ones);`}let f="";s%o>0&&(f=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        float sumValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${l};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var Vee=class{constructor(r,n){this.variableNames=["x"];let{windowSize:o,batchSize:i,inSize:s,outSize:a}=r;this.outputShape=[i,a];let l="0.0",u="";n==="prod"?l="1.0":n==="min"?(l="1.0 / 1e-20",u="min"):n==="max"&&(l="-1.0 / 1e-20",u="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");let f=Math.floor(o/4)*4,d=o%4,p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(l="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(l="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${l};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        vec4 minMaxValue = vec4(${l});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function lNr(t){let r=[];for(;r.length===0||r[r.length-1].outSize!==1;){let n=r.length?r[r.length-1].outSize:t[1],o=ce.computeOptimalWindowSize(n);r.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return r}function jf(t,r,n,o){let i=lNr(t.shape),s=t;for(let a=0;a<i.length;a++){let{inSize:l,windowSize:u,outSize:c}=i[a],f,d;n==="mean"?f=a===0?new Y6({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},l):new Y6({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c}):f=new Vee({windowSize:u,inSize:l,batchSize:t.shape[0],outSize:c},n),d=s,s=o.runWebGLProgram(f,[s],r),d.dataId!==t.dataId&&o.disposeIntermediateTensorInfo(d)}return s}re();var Gee=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[n[a]];this.outputShape=o,this.rank=o.length;let i=zr(this.rank),s=uNr(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}};function uNr(t){let r=t.length;if(r>6)throw Error(`Transpose for rank ${r} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],o=new Array(r);for(let i=0;i<t.length;i++)o[t[i]]=n[i];return o.join()}var Wee=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let o=new Array(r.length);for(let f=0;f<o.length;f++)o[f]=r[n[f]];if(this.outputShape=o,this.rank=o.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let i=zr(this.rank),s=TEe("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=s[f];let l=`vec2(${a.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${o[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${l})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${u}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${o[this.rank-2]}) {
        result[2] = ${c};
        if(${u}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function V2(t,r,n){let o=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wee(t.shape,r):new Gee(t.shape,r);return n.runWebGLProgram(o,[t],t.dtype)}function W1t(t,r,n,o){let i=r,s=t.shape.length,a=H.parseAxisParam(i,t.shape),l=a,u=ce.getAxesPermutation(l,s),c=u!=null,f=t;c&&(f=V2(t,u,o),l=ce.getInnerMostAxes(l.length,s)),ce.assertAxesAreInnerMostDims("sum",l,s);let[d,p]=ce.computeOutAndReduceShapes(f.shape,l),h=d;n&&(h=ce.expandShapeToKeepDim(d,a));let m=H.sizeFromShape(p),y=H.sizeFromShape(t.shape)/m,b=yt({inputs:{x:f},attrs:{shape:[y,m]},backend:o}),x=L1(t.dtype),v=jf(b,x,"sum",o),w=yt({inputs:{x:v},attrs:{shape:h},backend:o});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(v),c&&o.disposeIntermediateTensorInfo(f),w}function sk(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o;return W1t(i,s,a,n)}var q1t={kernelName:ax,backendName:"webgl",kernelFunc:sk};re();function Zo(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{perm:s}=o,a=n,l=i.shape.length,u=new Array(l);for(let f=0;f<u.length;f++)u[f]=i.shape[s[f]];let c;if(a.shouldExecuteOnCPU([i])){let d=a.texData.get(i.dataId).values,p=ik(d,i.shape,i.dtype,s,u);c=a.makeTensorInfo(u,i.dtype);let h=a.texData.get(c.dataId);h.values=p}else c=V2(i,s,a);return c}var H1t={kernelName:gh,backendName:"webgl",kernelFunc:Zo};var FEe=1e3;function ak({a:t,b:r,transposeA:n,transposeB:o,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:u=null}){let c=t.shape.length,f=r.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=o?r.shape[f-1]:r.shape[f-2],h=n?t.shape[c-1]:t.shape[c-2],m=o?r.shape[f-2]:r.shape[f-1],g=t.shape.slice(0,-2),y=r.shape.slice(0,-2),b=H.sizeFromShape(g),x=H.sizeFromShape(y),w=Hu.assertAndGetBroadcastShape(t.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,m]);H.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${r.shape} and transposeA=${n} and transposeB=${o} must match.`);let _=n?[b,d,h]:[b,h,d],C=o?[x,m,p]:[x,p,m],S=yt({inputs:{x:t},backend:i,attrs:{shape:_}}),E=yt({inputs:{x:r},backend:i,attrs:{shape:C}}),A=[S,E],N=Math.max(b,x),k=n?S.shape[1]:S.shape[2],R=s!=null,I=a!=null,L=u==="leakyrelu",j=u!=null?o1(u,!0):null,M=R||I||L||j!=null,V;if((h===1||m===1)&&k>FEe&&M===!1){let U=S,Y=E;n&&(U=Zo({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),A.push(U)),o&&(Y=Zo({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(Y));let X=m!==1,pe=m===1,$=U;X&&($=yt({inputs:{x:U},backend:i,attrs:{shape:[N,k,1]}}),A.push($));let O=m===1?2:1,z=Y;pe&&(z=yt({inputs:{x:Y},backend:i,attrs:{shape:[N,1,k]}}),A.push(z));let q=H6({inputs:{a:$,b:z},backend:i});V=sk({inputs:{x:q},backend:i,attrs:{axis:O,keepDims:!0}}),A.push(q)}else{let U=zi(t.dtype,r.dtype),Y=new UR(_,C,[N,h,m],n,o,R,j,I,L),X=[S,E];if(s!=null&&X.push(s),I&&X.push(a),L){let pe=i.makeTensorInfo([],"float32",H.createScalarValue(l,"float32"));X.push(pe),A.push(pe)}V=i.runWebGLProgram(Y,X,U)}let G=yt({inputs:{x:V},backend:i,attrs:{shape:w}});A.push(V);for(let U of A)i.disposeIntermediateTensorInfo(U);return G}function cNr(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s,bias:a,preluActivationWeights:l}=r,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=o;return ak({a:i,b:s,transposeA:u,transposeB:c,backend:n,bias:a,preluActivationWeights:l,leakyreluAlpha:d,activation:f})}var Y1t={kernelName:F1,backendName:"webgl",kernelFunc:cNr};re();var X1t="return abs(x);";function fNr(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])&&o.dtype!=="complex64"){let s=n.texData.get(o.dataId),a=jee(s.values);return n.makeTensorInfo(o.shape,o.dtype,a)}let i;return Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Ac(o.shape,X1t):i=new Na(o.shape,X1t),n.runWebGLProgram(i,[o],o.dtype)}var K1t={kernelName:wb,backendName:"webgl",kernelFunc:fNr};re();var dNr=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,pNr=er({opSnippet:dNr}),Z1t={kernelName:gg,backendName:"webgl",kernelFunc:pNr};re();var hNr=vs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,mNr=er({opSnippet:hNr}),Q1t={kernelName:yg,backendName:"webgl",kernelFunc:mNr};re();var J1t="return a + b;",gNr=Mn({opSnippet:J1t,packedOpSnippet:J1t,supportsComplex:!0,cpuKernelImpl:Dvt}),ewt={kernelName:Xd,backendName:"webgl",kernelFunc:gNr};re();var qee=class{constructor(r,n){this.outputShape=[],this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`float v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}};var Hee=class{constructor(r,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.variableNames=n.map((s,a)=>`T${a}`);let o=[];this.variableNames.forEach(s=>{o.push(`vec4 v${s} = get${s}AtOutCoords();`)});let i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}};function Yee(t){let{inputs:r,backend:n}=t,o=r;if(o.length===1)return Li({inputs:{x:o[0]},backend:n});if(o.length>Oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(o.length/2),c=Yee({inputs:o.slice(0,u),backend:n}),f=Yee({inputs:o.slice(u),backend:n});return Yee({inputs:[c,f],backend:n})}let i=o.map(u=>u.dtype).reduce((u,c)=>zi(u,c)),s=o.map(u=>u.shape),l=Oe().getBool("WEBGL_PACK")?new Hee(o[0].shape,s):new qee(o[0].shape,s);return n.runWebGLProgram(l,o,i)}var twt={kernelName:_b,backendName:"webgl",kernelFunc:Yee};re();function yNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("all",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=H.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=jf(g,g.dtype,"all",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var rwt={kernelName:cS,backendName:"webgl",kernelFunc:yNr};re();function bNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,l)),ce.assertAxesAreInnerMostDims("any",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=H.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=jf(g,g.dtype,"any",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var nwt={kernelName:fS,backendName:"webgl",kernelFunc:bNr};re();re();var Xee=class{constructor(r,n,o){this.variableNames=["A"];let{windowSize:i,batchSize:s,outSize:a}=r;o||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];let l=n==="max"?">":"<",u=o?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${l} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};re();var Kee=class{constructor(r,n,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,H.assert(r.length>2,()=>`Packed arg${o.charAt(0).toUpperCase()+o.slice(1)} supports only inputs with rank above 2.`);let s=r[r.length-1],a=Math.ceil(s/n);this.outputShape=r.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");let l=this.outputShape,u=l.length,c=zr(u),f=ji("coords",u),d,p;if(a===1){p=u+1;let E=zr(p);d=`
        ${E} sourceLocR = ${E}(${f.join()}, 0);
        ++${f[u-1]};
        ${E} sourceLocG = ${E}(${f.join()}, 0);
        ++${f[u-2]};
        ${E} sourceLocA = ${E}(${f.join()}, 0);
        --${f[u-1]};
        ${E} sourceLocB = ${E}(${f.join()}, 0);
        --${f[u-2]};`}else p=u,d=`
        ${c} sourceLocR = coords;
        ++${f[u-1]};
        ${c} sourceLocG = coords;
        ++${f[u-2]};
        ${c} sourceLocA = coords;
        --${f[u-1]};
        ${c} sourceLocB = coords;
        --${f[u-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),m="."+h[p-1],g=h.map(E=>"int "+E),y=ji("sourceLocR",p-1).concat("inIdx.r"),b=ji("sourceLocG",p-1).concat("inIdx.g"),x=ji("sourceLocB",p-1).concat("inIdx.b"),v=ji("sourceLocA",p-1).concat("inIdx.a"),w=o==="max"?"greaterThan":"lessThan",_=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${v.join()})));`,C=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,S=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${S}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[u-1]} < ${l[u-1]-1};
        bool hasNextRow = ${f[u-2]} < ${l[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function owt(t,r,n,o=null){let i=r.shape[0],s=r.shape[1];o!=null&&(i=o.shape[0],s=o.shape[1]);let a=ce.computeOptimalWindowSize(s),l={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},u=new Xee(l,n,o==null),c=[r];o!=null&&c.push(o);let f=t.runWebGLProgram(u,c,"int32");if(f.shape[1]===1)return f;let d=owt(t,r,n,f);return t.disposeIntermediateTensorInfo(f),d}function iwt(t,r,n,o=null){let i=o!=null?o.shape:r.shape,s=i[i.length-1],a=ce.computeOptimalWindowSize(s),l=new Kee(i,a,n,o==null),u=o==null?[r]:[r,o],c=t.runWebGLProgram(l,u,"int32");if(c.shape.length===r.shape.length){let f=iwt(t,r,n,c);return t.disposeIntermediateTensorInfo(c),f}return c}function Zee(t,r,n,o){let i=[n];if(ce.assertAxesAreInnerMostDims("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,r.shape.length),!Oe().getBool("WEBGL_PACK_REDUCE")||r.shape.length<=2){let s=[],a=t.texData.get(r.dataId),l=a!==null&&a.isPacked,u=r;l&&(u=t.unpackTensor(r),s.push(u));let[c,f]=ce.computeOutAndReduceShapes(u.shape,i),d=H.sizeFromShape(f),p=yt({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});s.push(p);let h=owt(t,p,o);s.push(h);let m=yt({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return iwt(t,r,o)}function xNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Zo({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMax",[a[0]],u.shape.length);let f=Zee(n,u,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var swt={kernelName:Sb,backendName:"webgl",kernelFunc:xNr};re();function vNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s}=o,a=H.parseAxisParam(s,i.shape),l=ce.getAxesPermutation(a,i.shape.length),u=i,c=[];l!=null&&(u=Zo({inputs:{x:i},backend:n,attrs:{perm:l}}),c.push(u),a=ce.getInnerMostAxes(a.length,u.shape.length)),ce.assertAxesAreInnerMostDims("argMin",[a[0]],u.shape.length);let f=Zee(n,u,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var awt={kernelName:Cb,backendName:"webgl",kernelFunc:vNr};re();var wNr=vs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,_Nr=er({opSnippet:wNr}),lwt={kernelName:bg,backendName:"webgl",kernelFunc:_Nr};re();var SNr=vs+"return log(x + sqrt(x * x + 1.0));",CNr=er({opSnippet:SNr}),uwt={kernelName:xg,backendName:"webgl",kernelFunc:CNr};re();var ENr=vs+`
  return atan(x);
`,TNr=er({opSnippet:ENr}),cwt={kernelName:vg,backendName:"webgl",kernelFunc:TNr};re();var ANr=zR+`
  return atan(a, b);
`,kNr=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Pf+`
  return result;
`,INr=Mn({opSnippet:ANr,packedOpSnippet:kNr}),fwt={kernelName:_g,backendName:"webgl",kernelFunc:INr};re();var DNr=vs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,NNr=er({opSnippet:DNr}),dwt={kernelName:wg,backendName:"webgl",kernelFunc:NNr};re();var rg=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left;this.outputShape=r.outShape;let g=n==="avg",y=`((batch  * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + d`,b=`(xR * ${r.inWidth} + xC) * ${r.inChannels} + d`,x="0.0";if(g||(x="-1.0 / 1e-20"),o){let E=">=";this.userCode=`
        const ivec2 strides = ivec2(${l}, ${u});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?y:b:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let v="max",w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");let _=Math.floor(a/4)*4,C=a%4,S=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${S}
          }

          int xC = xCCorner + ${_};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${S}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${S}
          }
        }
        setOutput(${w});
      }
    `}},G2=class{constructor(r,n,o,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");let a=r.filterWidth,l=r.strideDepth,u=r.strideHeight,c=r.strideWidth,f=r.dilationDepth,d=r.dilationHeight,p=r.dilationWidth,h=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,x=r.padInfo.left;this.outputShape=r.outShape;let v=n==="avg",w="0.0";if(v||(w="-1.0 / 1e-20"),o){let N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${l}, ${u}, ${c});
        const ivec3 pads = ivec3(${y}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${r.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${r.inDepth} + xD) * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`((xD * ${r.inHeight} + xR) * ${r.inWidth} + xC) * ${r.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let _="max",C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");let S=Math.floor(a/4)*4,E=a%4,A=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${l}, ${u}, ${c});
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${r.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${S}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${A}
            }

            int xC = xCCorner + ${S};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${A}
            }
          }
        }
        setOutput(${C});
      }
    `}};function ONr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;ib(i,"avgPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))return Li({inputs:{x:i},backend:n});let d=new rg(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}var pwt={kernelName:Eb,backendName:"webgl",kernelFunc:ONr};re();function FNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dimRoundingMode:u,dataFormat:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,u,c),p=new G2(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}var hwt={kernelName:Tb,backendName:"webgl",kernelFunc:FNr};re();var Qee=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=u-1-r.padInfo.top,d=c-1-r.padInfo.left,p=1/(n*o);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${l}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},Jee=class{constructor(r){this.variableNames=["dy"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,m=d-1-r.padInfo.front,g=p-1-r.padInfo.top,y=h-1-r.padInfo.left,b=1/(n*o*i);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function RNr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),h=new Jee(p);return n.runWebGLProgram(h,[i],a.dtype)}var mwt={kernelName:pS,backendName:"webgl",kernelFunc:RNr};re();function MNr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s;ib([i,s],"avgPoolGrad");let{filterSize:l,strides:u,pad:c}=o,f=ce.computePool2DInfo(a.shape,l,u,1,c),d=new Qee(f);return n.runWebGLProgram(d,[i],a.dtype)}var gwt={kernelName:dS,backendName:"webgl",kernelFunc:MNr};re();function PNr(t){let{inputs:r,backend:n,attrs:o}=t,{a:i,b:s}=r,{transposeA:a,transposeB:l}=o;return ak({a:i,b:s,transposeA:a,transposeB:l,backend:n})}var ywt={kernelName:Ab,backendName:"webgl",kernelFunc:PNr};re();re();var ete=class{constructor(r,n,o,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="0.0";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="1.0";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${l};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};re();var tte=class{constructor(r,n,o,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ce.assertAndGetBroadcastShape(r,n),ce.assertAndGetBroadcastShape(r,o);let l="vec4(0.0)";i!=null&&(ce.assertAndGetBroadcastShape(r,i),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(ce.assertAndGetBroadcastShape(r,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=r,this.userCode=`
      void main() {
        vec4 offset = ${l};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var jNr=({inputs:t,backend:r,attrs:n})=>{let{x:o,mean:i,variance:s,offset:a,scale:l}=t;H.assert(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),H.assert(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),H.assert(l==null||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=[o,i,s],f=null;a!=null&&(f=a.shape,c.push(a));let d=null;l!=null&&(d=l.shape,c.push(l));let p=Oe().getBool("WEBGL_PACK_NORMALIZATION")?new tte(o.shape,i.shape,s.shape,f,d,u):new ete(o.shape,i.shape,s.shape,f,d,u);return r.runWebGLProgram(p,c,c[0].dtype)},bwt={kernelName:Lb,backendName:"webgl",kernelFunc:jNr};re();re();var rte=class{constructor(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;let n=zr(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let o=LNr(this.rank),i,s=r.map((a,l)=>`sourceLoc.${REe[l]} = start[${l}] + coords.${REe[l]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${o}));
      }
    `}},REe=["x","y","z","w","u","v"];function LNr(t){if(t===1)return"sourceLoc";if(t<=6)return REe.slice(0,t).map(r=>"sourceLoc."+r).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var nte=class{constructor(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=zr(this.rank),o=ji("coords",this.rank),i=ji("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,l=`
      result.x = ${a};
      if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${o[this.rank-1]};
      if (++${o[this.rank-2]} < ${r[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${o[this.rank-1]} < ${r[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${r.map((f,d)=>`start[${d}]`).join()});`:r.map((f,d)=>`${i[d]} = ${o[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${l}
        ${u}
        setOutput(result);
      }
    `}};function BNr(t,r,n,o){let i=o.texData.get(t.dataId),s=o.makeTensorInfo(n,t.dtype),a=o.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=t.dtype;let l=Ns.computeFlatOffset(r,H.computeStrides(t.shape));i.slice&&(l+=i.slice.flatOffset),a.slice={flatOffset:l,origDataId:i.slice&&i.slice.origDataId||t.dataId};let u=o.dataRefCount.get(a.slice.origDataId)||1;return o.dataRefCount.set(a.slice.origDataId,u+1),s}function ng(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,size:a}=o,[l,u]=Ns.parseSliceParams(i,s,a);if(Ns.assertParamsValid(i,l,u),H.sizeFromShape(u)===0)return n.makeTensorInfo(u,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){let d=n.texData.get(i.dataId),p=l1t(d.values,l,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,p)}let{isPacked:c}=n.texData.get(i.dataId),f=Ns.isSliceContinous(i.shape,l,u);if(c||!f){let d=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nte(u):new rte(u),p=[l];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),BNr(i,l,u,n)}var xwt={kernelName:sx,backendName:"webgl",kernelFunc:ng};var $Nr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,crops:a}=o;H.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((x,v)=>x*v),u=ce.getReshaped(i.shape,s,l),c=ce.getPermuted(u.length,s.length),f=ce.getReshapedPermuted(i.shape,s,l),d=ce.getSliceBeginCoords(a,s.length),p=ce.getSliceSize(f,a,s.length),h=[],m=yt({inputs:{x:i},backend:n,attrs:{shape:u}}),g=Zo({inputs:{x:m},backend:n,attrs:{perm:c}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:f}}),b=ng({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return h.push(m),h.push(g),h.push(y),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},vwt={kernelName:kb,backendName:"webgl",kernelFunc:$Nr};re();function zNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a}=o,l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=Pee(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}var wwt={kernelName:hS,backendName:"webgl",kernelFunc:zNr};re();var UNr=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,VNr=`
  return float(int(a.r) & int(b.r));
`;function GNr(t){let{inputs:r,backend:n}=t,{a:o,b:i}=r,s=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=Oe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([o,i])||a===1){let u=n.texData.get(o.dataId).values,c=n.texData.get(i.dataId).values,[f,d]=Ovt(o.shape,i.shape,u,c,o.dtype),p=n.makeTensorInfo(d,o.dtype),h=n.texData.get(p.dataId);return h.values=f,p}let l;return s?l=new Mf(UNr,o.shape,i.shape,!1):l=new kc(VNr,o.shape,i.shape),n.runWebGLProgram(l,[o,i],o.dtype)}var _wt={kernelName:S1,backendName:"webgl",kernelFunc:GNr};re();function WNr(t){let{inputs:r,backend:n}=t,{s0:o,s1:i}=r,s=n.readSync(o.dataId),a=n.readSync(i.dataId),l=ce.assertAndGetBroadcastShape(Array.from(s),Array.from(a));return n.makeTensorInfo([l.length],"int32",Int32Array.from(l))}var Swt={kernelName:mS,backendName:"webgl",kernelFunc:WNr};re();re();re();var qNr="return float(a != b);",MEe=Mn({opSnippet:qNr,cpuKernelImpl:Jvt,dtype:"bool"}),Cwt={kernelName:N1,backendName:"webgl",kernelFunc:MEe};re();function i1(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Li({inputs:{x:i.complexTensorInfos.real},backend:n})}var Ewt={kernelName:YS,backendName:"webgl",kernelFunc:i1};var HNr="return float(int(x));";function Twt(t,r){let n=new Na(t.shape,HNr),o=r.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}function PEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dtype:s}=o;if(s==="complex64"){if(i.dtype==="complex64")return Li({inputs:{x:i},backend:n});let a=xo(i.shape),l=PEe({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),u=Ic({inputs:{real:l,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(l),u}if(i.dtype==="complex64"){let a=i1({inputs:{input:i},backend:n}),l=PEe({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),l}if(!H.hasEncodingLoss(i.dtype,s)){let a=Li({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){let a=n.texData.get(i.dataId).values,[l,u,c]=Fvt(a,i.shape,i.dtype,s);return n.makeTensorInfo(l,u,c)}if(s==="int32")return Twt(i,n);if(s==="bool"){let a=n.makeTensorInfo([],"bool",H.getTypedArrayFromDType("bool",1)),u=MEe({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}var Awt={kernelName:ph,backendName:"webgl",kernelFunc:PEe};re();var kwt="return ceil(x);",YNr=er({opSnippet:kwt,packedOpSnippet:kwt,cpuKernelImpl:Rvt}),Iwt={kernelName:Sg,backendName:"webgl",kernelFunc:YNr};re();var ote=class{constructor(r){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var ite=class{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=r,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function XNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{clipValueMin:s,clipValueMax:a}=o,l;Oe().getBool("WEBGL_PACK_CLIP")?l=new ite(i.shape):l=new ote(i.shape);let u=[[s],[a]];return n.runWebGLProgram(l,[i],i.dtype,u)}var Dwt={kernelName:Cg,backendName:"webgl",kernelFunc:XNr};re();var ste=class{constructor(r){this.variableNames=["real","imag"],this.outputShape=r,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function Nwt(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}}function KNr(t){let{inputs:r,backend:n}=t,{x:o}=r,i=n.texData.get(o.dataId),s=new ste(o.shape),a=[Nwt(o,i.complexTensorInfos.real),Nwt(o,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}var Owt={kernelName:Ib,backendName:"webgl",kernelFunc:KNr};re();re();re();var ate=class{constructor(r){this.outputShape=[],this.outputShape=ce.computeOutShape(r,1),this.variableNames=r.map((a,l)=>`T${l}`);let n=new Array(r.length-1);n[0]=r[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+r[a][1];let o=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){let l=n[a-1];o.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${l}));`)}let i=n.length,s=n[n.length-1];o.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${o.join(`
        `)}
      }
    `}};re();var ute=class{constructor(r,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ce.computeOutShape(r,n);let o=this.outputShape,i=o.length,s=zr(i),a=ji("coords",i),l=["x","y","z","w","u","v"].slice(0,i);this.variableNames=r.map((g,y)=>`T${y}`);let u=new Array(r.length-1);u[0]=r[0][n];for(let g=1;g<u.length;g++)u[g]=u[g-1]+r[g][n];let c=l[n],f=l.slice(-2),d=l.join(),p=`if (${c} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${f.join()}));
        }`;for(let g=1;g<u.length;g++){let y=u[g-1];p+=`
        if (${c} < ${u[g]}  && ${c} >= ${u[g-1]}) {
          return getChannel(
            getT${g}(${lte(l,c,y)}),
            vec2(${lte(f,c,y)}));
        }`}let h=u.length,m=u[u.length-1];p+=`
        return getChannel(
          getT${h}(${lte(l,c,m)}),
          vec2(${lte(f,c,m)}));`,this.userCode=`
      float getValue(${l.map(g=>"int "+g)}) {
        ${p}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${o[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${o[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${o[i-2]} &&
            ${a[i-1]} < ${o[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}};function lte(t,r,n){let o=t.indexOf(r);return t.map((s,a)=>a===o?`${s} - ${n}`:s).join()}re();function lk(t){let{inputs:r,backend:n}=t,{input:o}=r,i=n.texData.get(o.dataId);return Li({inputs:{x:i.complexTensorInfos.imag},backend:n})}var Fwt={kernelName:RS,backendName:"webgl",kernelFunc:lk};function VR(t,r,n){let o=t[0].dtype;if(o==="complex64"){let h=t.map(x=>i1({inputs:{input:x},backend:n})),m=t.map(x=>lk({inputs:{input:x},backend:n})),g=VR(h,r,n),y=VR(m,r,n),b=Ic({inputs:{real:g,imag:y},backend:n});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}let i=n.shouldExecuteOnCPU(t);if(o==="string"&&(i=!0),i){let h=t.map(w=>{let C=[-1,H.sizeFromShape(w.shape.slice(r))];return yt({inputs:{x:w},backend:n,attrs:{shape:C}})}),m=h.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),g=ce.computeOutShape(h.map(w=>w.shape),1),y=h[0].shape[0]===1,b=Mvt(m,g,o,y),x=ce.computeOutShape(t.map(w=>w.shape),r),v=n.makeTensorInfo(x,o,b);return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}let s=t.filter(h=>H.sizeFromShape(h.shape)>0),a=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){let h=a?new Na(t[0].shape,sb):new Ac(t[0].shape,sb);return n.runWebGLProgram(h,t,o)}let l=Oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>l){let h=[];for(let g=0;g<s.length;g+=l){let y=s.slice(g,g+l);h.push(VR(y,r,n))}let m=VR(h,r,n);for(let g of h)n.disposeIntermediateTensorInfo(g);return m}if(a){let h=new ute(s.map(m=>m.shape),r);return n.runWebGLProgram(h,s,o)}let{tensors2D:u,outShape:c}=ZNr(s,r,n),f=new ate(u.map(h=>h.shape)),d=n.runWebGLProgram(f,u,o);u.forEach(h=>n.disposeIntermediateTensorInfo(h));let p=yt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function ZNr(t,r,n){let o=ce.computeOutShape(t.map(s=>s.shape),r);return{tensors2D:t.map(s=>yt({inputs:{x:s},attrs:{shape:[-1,H.sizeFromShape(s.shape.slice(r))]},backend:n})),outShape:o}}function jEe(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o,s=H.parseAxisParam(i,r[0].shape)[0],a=r.map(c=>c.shape);ce.assertParamsConsistent(a,s);let l=ce.computeOutShape(r.map(c=>c.shape),s);if(H.sizeFromShape(l)===0)return n.makeTensorInfo(l,r[0].dtype,[]);let u=r.filter(c=>H.sizeFromShape(c.shape)>0);return u.length===1?Li({inputs:{x:u[0]},backend:n}):VR(u,s,n)}var Rwt={kernelName:Db,backendName:"webgl",kernelFunc:jEe};re();var GR=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=r.outShape;let a=r.padInfo.top,l=r.padInfo.left,u=r.strideHeight,c=r.strideWidth,f=r.dilationHeight,d=r.dilationWidth,p=r.filterHeight,h=r.filterWidth,m=Math.floor(r.inChannels/4)*4,g=r.inChannels%4,y=r.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,v=y?3:1,w="",_="";o&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:w=`
          float activation(float x) {
            ${o}
          }
        `,_="result = activation(result);");let C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${r.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${r.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${_}
        setOutput(result);
      }
    `}},cte=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let n=r.padInfo.front,o=r.padInfo.top,i=r.padInfo.left,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,f=r.dilationWidth,d=r.filterDepth,p=r.filterHeight,h=r.filterWidth,m=Math.floor(r.inChannels/4)*4,g=r.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${l});
      const ivec3 pads = ivec3(${n}, ${o}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${r.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};re();var WR=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=qn(this.outputShape.length);let a=r.padInfo.left,l=r.strideWidth,u=r.dilationWidth,c=r.filterHeight,f=r.filterWidth,d=f,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)p+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${r.inChannels}; d1 += 2) {
       `;for(let y=0;y<f;y++)p+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){let b=y*2;if(p+=`
           xC = xCCorner + ${b*u};
           `,l===1){if(b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?p+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<f)){let x=a%2===0?H.nearestLargerEven(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:p+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?p+=`
                     xC${b+1} = xTexelC${b};
                     `:p+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<f&&(p+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<f&&(p+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${r.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<f&&(p+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${r.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",m="";o&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${o}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${o}
         }`:h=`vec4 activation(vec4 x) {
           ${o}
         }`,m="result = activation(result);");let g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}};re();var fte=class{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length);let{dataFormat:o}=n,i=pi(),s=o==="channelsLast",a=s?1:2,l=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${r[2]} && pos < ${r[1]}) {`,c="";for(let f=0;f<=1;f++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${f};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${l}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}};function dte(t,r){let n=t.length;return n>=3?r?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!r&&n===1&&t[0]>1?[t[0],1]:null}function pte({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let u=t.shape,c=o.texData.get(t.dataId),f=n.inChannels,d=u[0]*u[1]*u[2],p=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,g=!1,y,b=[];if(s!=null){let w=dte(s.shape,h);w!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:w}}),b.push(s))}if(i!=null){let w=dte(i.shape,h);w!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:w}}),b.push(i))}if(!((d===1||p===1)&&f>FEe)&&c.isPacked&&h&&c.texture!=null&&u[2]%2!==0&&H.arraysEqual(c.shape.slice(-3),u.slice(-3))){let w=u[0]*u[1]*(u[2]+1),_={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,H.assert(rk(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);let S=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(S);let E=ak({a:_,b:S,backend:o,transposeA:m,transposeB:g,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a}),A=o.texData.get(E.dataId);H.assert(A.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,A.shape=n.outShape,y=Li({inputs:{x:E},backend:o}),y.shape=n.outShape,b.push(E)}else{let w=n.outHeight*n.outWidth,_=yt({inputs:{x:t},backend:o,attrs:{shape:h?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),C=yt({inputs:{x:r},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}}),S=ak({a:h?_:C,b:h?C:_,transposeA:!h,transposeB:g,backend:o,bias:i,activation:l,preluActivationWeights:s,leakyreluAlpha:a});y=yt({inputs:{x:S},backend:o,attrs:{shape:n.outShape}}),b.push(_),b.push(C),b.push(S)}for(let w of b)o.disposeIntermediateTensorInfo(w);return y}function hte({x:t,filter:r,convInfo:n,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let{filterWidth:u,filterHeight:c,inChannels:f,outWidth:d,outHeight:p,dataFormat:h}=n,m=h==="channelsLast",g=u*c*f,y=p*d,b=[n.batchSize,g,y],x=!0,v=!1,w=[];if(s!=null){let G=dte(s.shape,m);G!=null&&(s=yt({inputs:{x:s},backend:o,attrs:{shape:G}}),w.push(s))}if(i!=null){let G=dte(i.shape,m);G!=null&&(i=yt({inputs:{x:i},backend:o,attrs:{shape:G}}),w.push(i))}let _=yt({inputs:{x:r},backend:o,attrs:{shape:[1,g,H.sizeFromShape(r.shape)/g]}});w.push(_);let C=new fte(b,n),S=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=o.runWebGLProgram(C,[t],"float32",S),A=yt({inputs:{x:E},backend:o,attrs:{shape:b}});w.push(E),w.push(A);let N=i!=null,k=s!=null,R=l==="leakyrelu",I=l?o1(l,!0):null,L=new UR(m?A.shape:_.shape,m?_.shape:A.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,v,N,I,k,R),j=m?[A,_]:[_,A];if(i&&j.push(i),k&&j.push(s),R){let G=o.makeTensorInfo([],"float32",H.createScalarValue(a,"float32"));j.push(G),w.push(G)}let M=o.runWebGLProgram(L,j,"float32"),V=yt({inputs:{x:M},backend:o,attrs:{shape:n.outShape}});w.push(M);for(let G of w)o.disposeIntermediateTensorInfo(G);return V}function QNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dataFormat:u,dilations:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,s.shape,a,c,l,f,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=pte({x:i,filter:s,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&Oe().getBool("WEBGL_EXP_CONV")){let g=new WR(p),y=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(g,[i,s],"float32",y)}else if(Oe().getBool("WEBGL_CONV_IM2COL"))h=hte({x:i,filter:s,convInfo:p,backend:n});else{let g=new GR(p);h=n.runWebGLProgram(g,[i,s],"float32")}let m=yt({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),m}var Mwt={kernelName:Nb,backendName:"webgl",kernelFunc:QNr};re();var mte=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},gte=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=r.dataFormat==="channelsLast",l=n-1-r.padInfo.top,u=o-1-r.padInfo.left,c=a?1:2,f=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            for (int d2 = 0; d2 < ${r.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},yte=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.padInfo.front,a=r.padInfo.top,l=r.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yF = 0; yF < ${r.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${r.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${r.outHeight}; yR++) {
              int xR = wR + yR * ${o} - ${a};

              if (xR < 0 || xR >= ${r.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${r.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${l};

                if (xC < 0 || xC >= ${r.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},bte=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterDepth,o=r.filterHeight,i=r.filterWidth,s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,u=n-1-r.padInfo.front,c=o-1-r.padInfo.top,f=i-1-r.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${r.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${o}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${o} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${l}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${r.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function JNr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,dataFormat:u,dimRoundingMode:c,filterShape:f}=o,d=ce.convertConv2DDataFormat(u),p=ce.computeConv2DInfo(i.shape,f,a,1,l,c,!1,d),h=new mte(p);return n.runWebGLProgram(h,[i,s],"float32")}var Pwt={kernelName:yS,backendName:"webgl",kernelFunc:JNr};re();var xte=class{constructor(r){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=r.inShape,this.enableShapeUniforms=qn(this.outputShape.length);let n=r.filterHeight,o=r.filterWidth,i=n-1-r.padInfo.top,s=o-1-r.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            int wCPerm = ${o} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${r.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${r.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${r.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function eOr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{inputShape:a,strides:l,pad:u,dataFormat:c,dimRoundingMode:f}=o,d=ce.convertConv2DDataFormat(c),p=ce.computeConv2DInfo(a,s.shape,l,1,u,f,!1,d);if(Oe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],m=new xte(p);return n.runWebGLProgram(m,[i,s],"float32",h)}else{let h=new gte(p);return n.runWebGLProgram(h,[i,s],"float32")}}var jwt={kernelName:Ob,backendName:"webgl",kernelFunc:eOr};re();function tOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeConv3DInfo(i.shape,s.shape,a,u,l),f=new cte(c);return n.runWebGLProgram(f,[i,s],"float32")}var Lwt={kernelName:Fb,backendName:"webgl",kernelFunc:tOr};re();function rOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,pad:l,filterShape:u}=o,c=ce.computeConv3DInfo(i.shape,u,a,1,l),f=new yte(c);return n.runWebGLProgram(f,[i,s],"float32")}var Bwt={kernelName:bS,backendName:"webgl",kernelFunc:rOr};re();function nOr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{pad:a,strides:l,inputShape:u}=o,c=ce.computeConv3DInfo(u,s.shape,l,1,a),f=new bte(c);return n.runWebGLProgram(f,[i,s],"float32")}var $wt={kernelName:xS,backendName:"webgl",kernelFunc:nOr};re();var oOr=nh+`
  return cos(x);
`,iOr=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Pf}
  return result;
`,sOr=er({opSnippet:oOr,packedOpSnippet:iOr}),zwt={kernelName:Eg,backendName:"webgl",kernelFunc:sOr};re();var aOr=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,lOr=er({opSnippet:aOr}),Uwt={kernelName:Tg,backendName:"webgl",kernelFunc:lOr};re();var vte=class{constructor(r,n,o,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,l,u,c]=r,[f]=n,[d,p]=o;this.outputShape=[f,d,p,c];let h=i==="bilinear"?1:0,[m,g]=[`${l-1}.0`,`${u-1}.0`],[y,b,x]=d>1?[`${(l-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[v,w,_]=p>1?[`${(u-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${w};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var uOr=t=>{let{inputs:r,backend:n,attrs:o}=t,{image:i,boxes:s,boxInd:a}=r,{cropSize:l,method:u,extrapolationValue:c}=o,f=new vte(i.shape,s.shape,l,u,c);return n.runWebGLProgram(f,[i,s,a],"float32")},Vwt={kernelName:wS,backendName:"webgl",kernelFunc:uOr};re();var qR=function(t){return t.Prod="*",t.Sum="+",t}(qR||{}),X6=class{constructor(r,n,o,i){this.op=r,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let s=this.outputShape.length,a=this.op===qR.Prod?"1.0":"0.0",l=o?a:`getX(${Gwt(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1],c="",f="";o?(c=i?`end != ${u-1}`:"end != 0",f=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${u}`:"end >= pow2",f=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${zr(s)} coords = getOutputCoords();
        int end = ${Wwt(s,"coords",this.op)};
        float val = ${l};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${Wwt(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${Gwt(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function Gwt(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.x, ${r}.y`;if(t===3)return`${r}.x, ${r}.y, ${r}.z`;if(t===4)return`${r}.x, ${r}.y, ${r}.z, ${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function Wwt(t,r,n){if(t===1)return`${r}`;if(t===2)return`${r}.y`;if(t===3)return`${r}.z`;if(t===4)return`${r}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}re();function wte(t,r,n,o,i,s){let a=r.shape.length,l=ce.getAxesPermutation([o],a),u=r;l!=null&&(u=Zo({inputs:{x:r},backend:n,attrs:{perm:l}}));let c=ce.getInnerMostAxes(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${r.shape.length-1} but got axis=${o}`);let f=u.shape[c],d=Li({inputs:{x:u},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){let h=new X6(t,u.shape,!1,s),m=[[p]],g=d;d=n.runWebGLProgram(h,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(i){let p=new X6(t,u.shape,i,s),h=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(l!=null){let p=ce.getUndoAxesPermutation(l),h=Zo({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),h}return d}function cOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return wte(qR.Prod,i,n,s,a,l)}var qwt={kernelName:vS,backendName:"webgl",kernelFunc:cOr};re();function fOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,exclusive:a,reverse:l}=o;return wte(qR.Sum,i,n,s,a,l)}var Hwt={kernelName:Rb,backendName:"webgl",kernelFunc:fOr};re();function dOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,weights:s}=r,{size:a,binaryOutput:l}=o;if(i.shape.length===1){let u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=Pee(u,c,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,f)}else if(i.shape.length===2){let u=n.bufferSync(i),c=n.bufferSync(s),f=Nvt(u,c,a,l);return n.makeTensorInfo(f.shape,s.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var Ywt={kernelName:_S,backendName:"webgl",kernelFunc:dOr};re();var _te=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=[],this.outputShape=r,this.blockSize=n,this.dataFormat=o,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function pOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockSize:s,dataFormat:a}=o,l=i.shape[0],u=a==="NHWC"?i.shape[1]:i.shape[2],c=a==="NHWC"?i.shape[2]:i.shape[3],f=a==="NHWC"?i.shape[3]:i.shape[1],d=u*s,p=c*s,h=f/(s*s),m=a==="NHWC"?[l,d,p,h]:[l,h,d,p],g=new _te(m,s,a);return n.runWebGLProgram(g,[i],i.dtype)}var Xwt={kernelName:SS,backendName:"webgl",kernelFunc:pOr};re();var HR=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=qn(this.outputShape.length);let a=r.filterHeight,l=r.filterWidth,u=r.outChannels/r.inChannels,c="",f="";o&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:c=`
          float activation(float x) {
            ${o}
          }
        `,f="result = activation(result);");let d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${l}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${f}
        setOutput(result);
      }
    `}};re();var YR=class{constructor(r,n=!1,o=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=r.outShape,this.enableShapeUniforms=qn(this.outputShape.length);let a=r.outChannels/r.inChannels,l=r.padInfo.left,u=r.strideWidth,c=r.dilationWidth,f=r.filterHeight,d=r.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)h+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;h+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let b=0;b<d;b++)h+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(p+1)/2;b++){let x=b*2;if(h+=`
          xC = xCCorner + ${x*c};
          `,u===1){if(x<d&&(l%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,c===1&&x>0?h+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<d)){let v=l%2===0?H.nearestLargerEven(c):c;c%2===0&&l%2===1||c%2!==0&&l%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:h+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):v===1?h+=`
                    xC${x+1} = xTexelC${x};
                    `:h+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<d&&(l%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<d&&(h+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<d&&(h+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<d&&(h+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",g="";o&&(i?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:s?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:m=`vec4 activation(vec4 x) {
          ${o}
        }`,g="result = activation(result);");let y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${g}
        setOutput(result);
      }
    `}};function hOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o,f=u;f==null&&(f=[1,1]),H.assert(ce.eitherStridesOrDilationsAreOne(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);let d=ce.computeConv2DInfo(i.shape,s.shape,a,f,l,c,!0),p;Oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new YR(d):p=new HR(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,s],"float32",h)}var Kwt={kernelName:Mb,backendName:"webgl",kernelFunc:hOr};re();var Ste=class{constructor(r){this.variableNames=["x","dy"],this.outputShape=r.filterShape;let n=r.strideHeight,o=r.strideWidth,i=r.padInfo.top,s=r.padInfo.left,a=r.outChannels/r.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${r.batchSize}; b++) {
          for (int yR = 0; yR < ${r.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${r.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${r.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${s};

              if (xC < 0 || xC >= ${r.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Cte=class{constructor(r){this.variableNames=["dy","W"],this.outputShape=r.inShape;let n=r.filterHeight,o=r.filterWidth,i=r.strideHeight,s=r.strideWidth,a=n-1-r.padInfo.top,l=o-1-r.padInfo.left,u=r.outChannels/r.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function mOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,dy:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,filterShape:f}=o,d=ce.computeConv2DInfo(i.shape,f,a,l,u,c,!0),p=new Ste(d);return n.runWebGLProgram(p,[i,s],"float32")}var Zwt={kernelName:CS,backendName:"webgl",kernelFunc:mOr};re();function gOr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,filter:s}=r,{strides:a,dilations:l,pad:u,dimRoundingMode:c,inputShape:f}=o,d=ce.computeConv2DInfo(f,s.shape,a,l,u,c,!0),p=new Cte(d);return n.runWebGLProgram(p,[i,s],"float32")}var Qwt={kernelName:ES,backendName:"webgl",kernelFunc:gOr};re();var Ete=class{constructor(r){this.variableNames=["X"],this.outputShape=[r,r],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function yOr(t){let{inputs:r,backend:n}=t,{x:o}=r,i=[...o.shape,...o.shape],s=H.sizeFromShape(o.shape),a=yt({inputs:{x:o},backend:n,attrs:{shape:[s]}}),l=new Ete(s),u=n.runWebGLProgram(l,[a],a.dtype),c=yt({inputs:{x:u},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),c}var Jwt={kernelName:TS,backendName:"webgl",kernelFunc:yOr};re();var Tte=class{constructor(r){this.variableNames=["x","W"],this.outputShape=r.outShape;let{inHeight:n,inWidth:o,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:l,filterWidth:u,dilationHeight:c,dilationWidth:f}=r,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${l}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${o}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function bOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s}=r,{strides:a,pad:l,dilations:u}=o,c=ce.computeDilation2DInfo(i.shape,s.shape,a,l,"NHWC",u),f,d=new Tte(c);f=n.runWebGLProgram(d,[i,s],"float32");let p=yt({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}var e_t={kernelName:Pb,backendName:"webgl",kernelFunc:bOr};re();function xOr(t){let{inputs:r,backend:n,attrs:o}=t,{equation:i}=o,s=r,{allDims:a,summedDims:l,idDims:u}=ce.decodeEinsumEquation(i,s.length);ce.checkEinsumDimSizes(a.length,u,s);let{path:c,steps:f}=ce.getEinsumComputePath(l,u),d=f.length,p=null,h=a.length,m=[];for(let g=0;g<d;++g){for(let y of f[g]){let{permutationIndices:b,expandDims:x}=ce.getEinsumPermutation(h,u[y]),v;ce.isIdentityPermutation(b)?v=s[y]:(v=Zo({inputs:{x:s[y]},backend:n,attrs:{perm:b}}),m.push(v));let w=v.shape.slice();for(let _=0;_<x.length;++_)w.splice(x[_],0,1);H.arraysEqual(v.shape,w)||(v=yt({inputs:{x:v},backend:n,attrs:{shape:w}}),m.push(v)),p===null?p=v:(p=H6({inputs:{a:v,b:p},backend:n}),m.push(p))}g<d-1&&(c[g]>=0&&(p=sk({inputs:{x:p},backend:n,attrs:{axis:c[g]-(a.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var t_t={kernelName:AS,backendName:"webgl",kernelFunc:xOr};re();var vOr="return (x >= 0.0) ? x : (exp(x) - 1.0);",wOr=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_Or=er({opSnippet:vOr,packedOpSnippet:wOr}),r_t={kernelName:kg,backendName:"webgl",kernelFunc:_Or};re();var SOr="return (b >= 0.0) ? a : a * (b + 1.0);",COr=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,EOr=t=>{let{inputs:r,backend:n}=t,{dy:o,y:i}=r,s=Oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mf(COr,o.shape,i.shape):new kc(SOr,o.shape,i.shape);return n.runWebGLProgram(s,[o,i],o.dtype)},n_t={kernelName:kS,backendName:"webgl",kernelFunc:EOr};re();var TOr=`
  return vec4(equal(a, b));
`,AOr="return float(a == b);",kOr=Mn({opSnippet:AOr,packedOpSnippet:TOr,dtype:"bool",cpuKernelImpl:Pvt}),o_t={kernelName:C1,backendName:"webgl",kernelFunc:kOr};re();var IOr=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ce.ERF_P};
  float a1 = ${ce.ERF_A1};
  float a2 = ${ce.ERF_A2};
  float a3 = ${ce.ERF_A3};
  float a4 = ${ce.ERF_A4};
  float a5 = ${ce.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,DOr=er({opSnippet:IOr}),i_t={kernelName:Ig,backendName:"webgl",kernelFunc:DOr};re();var NOr=nh+`
  return exp(x);
`,OOr=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,LEe=er({opSnippet:NOr,packedOpSnippet:OOr,cpuKernelImpl:jvt,dtype:"float32"}),s_t={kernelName:Dg,backendName:"webgl",kernelFunc:LEe};re();function Ate(t){let{inputs:r,attrs:n,backend:o}=t,{dim:i}=n,{input:s}=r,a=s.shape.length,l=s.shape.slice(),u=i;return i<0&&(H.assert(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+i+1),l.splice(u,0,1),yt({inputs:{x:s},backend:o,attrs:{shape:l}})}var a_t={kernelName:jb,backendName:"webgl",kernelFunc:Ate};re();var l_t="return exp(x) - 1.0;",FOr=er({opSnippet:l_t,packedOpSnippet:l_t,cpuKernelImpl:Lvt}),u_t={kernelName:Ng,backendName:"webgl",kernelFunc:FOr};re();re();var K6=class{constructor(r,n,o){this.variableNames=["real","imag"];let i=n[1];this.outputShape=n;let s=o?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=o?`${i}.0`:"1.0",l;if(r==="real")l="return real * expR - imag * expI;";else if(r==="imag")l="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${r}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${l}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function kte(t,r,n){let o=n.texData.get(t.dataId),i=H.sizeFromShape(t.shape),s=t.shape[t.shape.length-1],a=i/s,l=yt({inputs:{x:t},backend:n,attrs:{shape:[a,s]}}),u=l.shape,c=new K6("real",u,r),f=new K6("imag",u,r),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:u},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:u}],p=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(f,d,"float32"),m=Ic({inputs:{real:p,imag:h},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h);let g=yt({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),g}function ROr(t){let{inputs:r,backend:n}=t,{input:o}=r;return kte(o,!1,n)}var c_t={kernelName:IS,backendName:"webgl",kernelFunc:ROr};re();var Ite=class{constructor(r,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=r,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function s1(t){let{backend:r,attrs:n}=t,{shape:o,value:i}=n,{dtype:s}=n;if(s=s||H.inferDtype(i),s==="string"){let a=H.getArrayFromDType(s,H.sizeFromShape(o));return a.fill(i),r.makeTensorInfo(o,s,a)}else{let a=new Ite(o,i),l=[[i]];return r.runWebGLProgram(a,[],s,l)}}var f_t={kernelName:DS,backendName:"webgl",kernelFunc:s1};re();var Dte=class{constructor(r){this.variableNames=["Image"],this.outputShape=[];let n=r[2];this.outputShape=r,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var d_t={kernelName:NS,backendName:"webgl",kernelFunc:({inputs:t,backend:r})=>{let{image:n}=t,o=r,i=new Dte(n.shape);return o.runWebGLProgram(i,[n],n.dtype)}};re();var p_t="return floor(x);",MOr=er({opSnippet:p_t,packedOpSnippet:p_t,cpuKernelImpl:Bvt}),h_t={kernelName:Og,backendName:"webgl",kernelFunc:MOr};re();var POr=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,jOr=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,LOr=Mn({opSnippet:POr,packedOpSnippet:jOr,dtype:"int32"}),m_t={kernelName:Fg,backendName:"webgl",kernelFunc:LOr};re();re();var Nte=class{constructor(r){this.variableNames=["A"];let n=pi(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${o}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var Ote=class{constructor(r){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=pi(),[o,i]=r;this.outputShape=r,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${o}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}};var g_t={kernelName:Xk,backendName:"webgl",kernelFunc:BOr},XR,BEe=Oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function BOr(t){let{inputs:r,backend:n,attrs:o}=t,{pixels:i}=r,{numChannels:s}=o,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],f=[c,u],d=[c,u,s];if(l||a){let g=Oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(XR==null||g!==BEe)&&(BEe=g,XR=document.createElement("canvas").getContext("2d",{willReadFrequently:BEe})),XR.canvas.width=u,XR.canvas.height=c,XR.drawImage(i,0,0,u,c),i=XR.canvas}let p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Wl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);let h=Oe().getBool("WEBGL_PACK")?new Ote(d):new Nte(d),m=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),m}re();function $Or(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=o,g=ce.convertConv2DDataFormat(f),y=ce.computeConv2DInfo(i.shape,s.shape,u,d,c,p,!1,g),b,x=[],v=a!=null,w=l!=null,_=h==="leakyrelu",C=()=>{let E=[i,s],A=(N,k)=>{if(k==="NCHW"&&N.shape.length===1&&N.shape[0]!==1){let R=yt({inputs:{x:N},backend:n,attrs:{shape:[N.shape[0],1,1]}});return x.push(R),R}return N};if(v&&E.push(A(a,f)),w&&E.push(A(l,f)),_){let N=n.makeTensorInfo([],"float32",H.createScalarValue(m,"float32"));E.push(N),x.push(N)}return E};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=pte({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:h,preluActivationWeights:l,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&Oe().getBool("WEBGL_EXP_CONV")){let E=h?o1(h,!0):null,A=new WR(y,v,E,w,_),N=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],k=C();b=n.runWebGLProgram(A,k,"float32",N)}else if(Oe().getBool("WEBGL_CONV_IM2COL"))b=hte({x:i,filter:s,convInfo:y,backend:n,bias:a,activation:h,preluActivationWeights:l,leakyreluAlpha:m});else{let E=h?o1(h,!1):null,A=new GR(y,v,E,w,_),N=C();b=n.runWebGLProgram(A,N,"float32")}let S=yt({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return x.push(b),x.forEach(E=>n.disposeIntermediateTensorInfo(E)),S}var y_t={kernelName:R1,backendName:"webgl",kernelFunc:$Or};re();function zOr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,filter:s,bias:a,preluActivationWeights:l}=r,{strides:u,pad:c,dilations:f,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=o,m=[],g=f;g==null&&(g=[1,1]),H.assert(ce.eitherStridesOrDilationsAreOne(u,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`);let y=ce.computeConv2DInfo(i.shape,s.shape,u,g,c,d,!0),b=Oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=p?o1(p,b):null,v=[i,s],w=a!=null,_=l!=null,C=p==="leakyrelu";if(w&&v.push(a),_&&v.push(l),C){let N=n.makeTensorInfo([],"float32",H.createScalarValue(h,"float32"));v.push(N),m.push(N)}let S;b?S=new YR(y,w,x,_,C):S=new HR(y,w,x,_,C);let E=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],A=n.runWebGLProgram(S,v,"float32",E);return m.forEach(N=>n.disposeIntermediateTensorInfo(N)),A}var b_t={kernelName:M1,backendName:"webgl",kernelFunc:zOr};re();var Fte=class{constructor(r,n,o,i){this.sliceDim=r,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=o;let s=zr(o.length),a=`
    int index;`;for(let l=0;l<this.sliceDim;l++)a+=`
          index = round(getIndices(coords[0], ${l}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[l]};
          flattenIndex += index * ${this.strides[l]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function UOr(t){let{inputs:r,backend:n}=t,{params:o,indices:i}=r,s=i.shape,a=s[s.length-1],l=H.sizeFromShape(o.shape),[u,c,f,d]=ce.prepareAndValidate(o,i),p=yt({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),h=yt({inputs:{x:o},backend:n,attrs:{shape:[H.sizeFromShape(o.shape)/f,f]}});if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let b=n.readSync(i.dataId),x=n.bufferSync(o),v=$vt(b,x,o.dtype,c,a,f,d,o.shape,l);return n.makeTensorInfo(u,o.dtype,v.values)}let m=new Fte(a,d,[c,f],o.shape),g=n.runWebGLProgram(m,[h,p],h.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}var x_t={kernelName:OS,backendName:"webgl",kernelFunc:UOr};re();var Rte=class{constructor(r,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let o=zr(this.rank),i=VOr(r,2);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${r[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}};function VOr(t,r){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let i=0;i<t.length;i++)i===2?o.push("index"):o.push(`${n[i]}`);return o.join()}function $Ee(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,indices:s}=r,{axis:a,batchDims:l}=o,u=H.parseAxisParam(a,i.shape)[0];if(Oe().get("DEBUG")){let x=n.readSync(s.dataId),v=i.shape[u];for(let w=0;w<x.length;++w){let _=x[w];H.assert(_<=v-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${v-1}]`)}}let c=ce.segment_util.collectGatherOpShapeInfo(i,s,u,l),f=H.sizeFromShape(s.shape),d=[],p=yt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=yt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});d.push(p),d.push(h);let m=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){let x=n.bufferSync(h),v=n.bufferSync(p),w=zvt(v,x,m);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}let g=new Rte(p.shape,m),y=n.runWebGLProgram(g,[p,h],p.dtype);d.push(y);let b=yt({inputs:{x:y},backend:n,attrs:{shape:c.outputShape}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}var v_t={kernelName:Bb,backendName:"webgl",kernelFunc:$Ee};re();var GOr="return float(a > b);",WOr=`
  return vec4(greaterThan(a, b));
`,qOr=Mn({opSnippet:GOr,packedOpSnippet:WOr,cpuKernelImpl:Uvt,dtype:"bool"}),w_t={kernelName:E1,backendName:"webgl",kernelFunc:qOr};re();var HOr="return float(a >= b);",YOr=`
  return vec4(greaterThanEqual(a, b));
`,XOr=Mn({opSnippet:HOr,packedOpSnippet:YOr,dtype:"bool",cpuKernelImpl:Vvt}),__t={kernelName:Rg,backendName:"webgl",kernelFunc:XOr};re();function KOr(t){let{inputs:r,backend:n}=t,{input:o}=r;return kte(o,!0,n)}var S_t={kernelName:FS,backendName:"webgl",kernelFunc:KOr};re();var ZOr="return float(!isnan(x) && !isinf(x));",QOr=er({opSnippet:ZOr,dtype:"bool"}),C_t={kernelName:Mg,backendName:"webgl",kernelFunc:QOr};re();var JOr="return float(isinf(x));",eFr=er({opSnippet:JOr,dtype:"bool"}),E_t={kernelName:Pg,backendName:"webgl",kernelFunc:eFr};re();var tFr="return float(isnan(x));",rFr=er({opSnippet:tFr,dtype:"bool"}),T_t={kernelName:jg,backendName:"webgl",kernelFunc:rFr};re();var nFr="return float(a < b);",oFr=`
  return vec4(lessThan(a, b));
`,iFr=Mn({opSnippet:nFr,packedOpSnippet:oFr,cpuKernelImpl:Gvt,dtype:"bool"}),A_t={kernelName:T1,backendName:"webgl",kernelFunc:iFr};re();var sFr="return float(a <= b);",aFr=`
  return vec4(lessThanEqual(a, b));
`,lFr=Mn({opSnippet:sFr,packedOpSnippet:aFr,cpuKernelImpl:Wvt,dtype:"bool"}),k_t={kernelName:A1,backendName:"webgl",kernelFunc:lFr};re();function uFr(t){let{backend:r,attrs:n}=t,{start:o,stop:i,num:s}=n,a=qvt(o,i,s);return r.makeTensorInfo([a.length],"float32",a)}var I_t={kernelName:MS,backendName:"webgl",kernelFunc:uFr};re();var cFr=nh+`
  return x < 0.0 ? 0./0. : log(x);
`,fFr=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,dFr=er({opSnippet:cFr,packedOpSnippet:fFr,cpuKernelImpl:Hvt}),D_t={kernelName:Lg,backendName:"webgl",kernelFunc:dFr};re();var pFr=nh+`
  return log(1.0 + x);
`,hFr=er({opSnippet:pFr}),N_t={kernelName:Bg,backendName:"webgl",kernelFunc:hFr};re();var mFr="return float(a >= 1.0 && b >= 1.0);",gFr=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,yFr=Mn({opSnippet:mFr,packedOpSnippet:gFr,dtype:"bool"}),O_t={kernelName:k1,backendName:"webgl",kernelFunc:yFr};re();var bFr="return float(!(x >= 1.0));",xFr=er({opSnippet:bFr}),F_t={kernelName:I1,backendName:"webgl",kernelFunc:xFr};re();var vFr="return float(a >= 1.0 || b >= 1.0);",wFr=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,_Fr=Mn({opSnippet:vFr,packedOpSnippet:wFr,dtype:"bool"}),R_t={kernelName:D1,backendName:"webgl",kernelFunc:_Fr};re();var Mte=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[];let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${l}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}};var Pte=class{constructor(r,n,o,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let a=n,l=r[3]-1;this.outputShape=r;let u,c=`float(${o}) + float(${i}) * sum`;s===.5?u=`inversesqrt(${c})`:s===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${l}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}};var SFr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{depthRadius:s,bias:a,alpha:l,beta:u}=o,c=Oe().getBool("WEBGL_PACK_NORMALIZATION")?new Pte(i.shape,s,a,l,u):new Mte(i.shape,s,a,l,u);return n.runWebGLProgram(c,[i],i.dtype)},M_t={kernelName:zb,backendName:"webgl",kernelFunc:SFr};re();var jte=class{constructor(r,n,o,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=r,this.depth=r[3],this.depthRadius=n,this.bias=o,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${o});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var CFr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i,y:s,dy:a}=r,{depthRadius:l,bias:u,alpha:c,beta:f}=o,d=new jte(i.shape,l,u,c,f);return n.runWebGLProgram(d,[i,s,a],i.dtype)},P_t={kernelName:PS,backendName:"webgl",kernelFunc:CFr};re();re();re();function j_t(t,r,n,o){let i=H.sizeFromShape(r),a=H.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=jf(l,t.dtype,"max",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}function zEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reductionIndices:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=n.shouldExecuteOnCPU([i]),h=i;if(d){if(p){let v=n.texData.get(h.dataId).values,w=new Array(l);for(let S=0;S<w.length;S++)w[S]=i.shape[f[S]];let _=ik(v,i.shape,i.dtype,f,w);h=n.makeTensorInfo(w,i.dtype);let C=n.texData.get(h.dataId);C.values=_}else h=V2(i,f,n);c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("max",c,l);let[m,g]=ce.computeOutAndReduceShapes(h.shape,c),y=m;a&&(y=ce.expandShapeToKeepDim(m,u));let b;if(p){let v=n.texData.get(h.dataId).values,w=Yvt(v,H.sizeFromShape(g),y,i.dtype);b=n.makeTensorInfo(y,i.dtype);let _=n.texData.get(b.dataId);_.values=w}else b=j_t(h,g,y,n);return d&&n.disposeIntermediateTensorInfo(h),b}var L_t={kernelName:Ub,backendName:"webgl",kernelFunc:zEe};re();var EFr=zR+`
  return max(a, b);
`,TFr=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Pf+`
  return result;
`,AFr=Mn({opSnippet:EFr,packedOpSnippet:TFr,cpuKernelImpl:Xvt}),B_t={kernelName:$g,backendName:"webgl",kernelFunc:AFr};re();function kFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;ib(i,"maxPool");let{filterSize:s,strides:a,pad:l,dimRoundingMode:u}=o,c=1;H.assert(ce.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let f=ce.computePool2DInfo(i.shape,s,a,c,l,u);if(f.filterWidth===1&&f.filterHeight===1&&H.arraysEqual(f.inShape,f.outShape))return Li({inputs:{x:i},backend:n});let d=new rg(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}var $_t={kernelName:Vb,backendName:"webgl",kernelFunc:kFr};re();function IFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{filterSize:s,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=o,f=[1,1,1],d=ce.computePool3DInfo(i.shape,s,a,f,l,c,u),p=new G2(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}var z_t={kernelName:Gb,backendName:"webgl",kernelFunc:IFr};re();var Lte=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideHeight,o=r.strideWidth,i=r.dilationHeight,s=r.effectiveFilterHeight,a=r.effectiveFilterWidth,l=s-1-r.padInfo.top,u=a-1-r.padInfo.left,c=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${r.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},Bte=class{constructor(r){this.variableNames=["dy","maxPos"],this.outputShape=r.inShape;let n=r.strideDepth,o=r.strideHeight,i=r.strideWidth,s=r.dilationDepth,a=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterDepth,c=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=u-1-r.padInfo.front,p=c-1-r.padInfo.top,h=f-1-r.padInfo.left,m=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${r.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${r.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${r.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function DFr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s}=r,a=s,{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=o,d=[1,1,1],p=ce.computePool3DInfo(a.shape,l,u,d,c,f),h=new G2(p,"max",!0),m=n.runWebGLProgram(h,[a],a.dtype),g=new Bte(p),y=n.runWebGLProgram(g,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}var U_t={kernelName:LS,backendName:"webgl",kernelFunc:DFr};re();function NFr(t){let{inputs:r,backend:n,attrs:o}=t,{dy:i,input:s,output:a}=r,l=s;ib([s,a],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=o,p=ce.computePool2DInfo(l.shape,u,c,1,f,d),h=!0,m=new rg(p,"max",h),g=n.runWebGLProgram(m,[l],l.dtype),y=new Lte(p),b=n.runWebGLProgram(y,[i,g],l.dtype);return n.disposeIntermediateTensorInfo(g),b}var V_t={kernelName:jS,backendName:"webgl",kernelFunc:NFr};re();re();function G_t(t,r,n,o){let i=new rg(n,"max",!1),s=o.runWebGLProgram(i,[t],"float32");i=new rg(n,"max",!0,!0,r);let a=o.runWebGLProgram(i,[t],"float32");return[s,a]}var W_t={kernelName:BS,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{filterSize:i,strides:s,pad:a,includeBatchInIndex:l}=r,u=n;H.assert(o.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.shape.length}.`);let c=[1,1];H.assert(ce.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let f=ce.computePool2DInfo(o.shape,i,s,c,a),[d,p]=G_t(o,l,f,u);return[d,p]}};re();re();function q_t(t,r,n,o){let i=H.sizeFromShape(r),a=H.sizeFromShape(t.shape)/i,l=yt({inputs:{x:t},attrs:{shape:[a,i]},backend:o}),u=jf(l,"float32","mean",o),c=yt({inputs:{x:u},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(l),o.disposeIntermediateTensorInfo(u),c}var H_t={kernelName:Wb,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{x:o}=t,{keepDims:i,axis:s}=r,a=n,l=o.shape.length,u=H.parseAxisParam(s,o.shape),c=u,f=ce.getAxesPermutation(c,l),d=f!=null,p=a.shouldExecuteOnCPU([o]),h=[],m=o;if(d){if(p){let w=a.texData.get(m.dataId).values,_=new Array(l);for(let E=0;E<_.length;E++)_[E]=o.shape[f[E]];let C=ik(w,o.shape,o.dtype,f,_);m=a.makeTensorInfo(_,o.dtype);let S=a.texData.get(m.dataId);S.values=C}else m=V2(o,f,a);h.push(m),c=ce.getInnerMostAxes(c.length,l)}ce.assertAxesAreInnerMostDims("sum",c,l);let[g,y]=ce.computeOutAndReduceShapes(m.shape,c),b=g;i&&(b=ce.expandShapeToKeepDim(g,u));let x=q_t(m,y,b,a);for(let v of h)a.disposeIntermediateTensorInfo(v);return x}};re();function OFr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=H.parseAxisParam(s,i.shape),c=u,f=ce.getAxesPermutation(c,l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),c=ce.getInnerMostAxes(c.length,i.shape.length)),ce.assertAxesAreInnerMostDims("min",c,l);let[p,h]=ce.computeOutAndReduceShapes(d.shape,c),m=H.sizeFromShape(h),g=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=jf(g,g.dtype,"min",n),b;if(a){let x=ce.expandShapeToKeepDim(p,u);b=yt({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=yt({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),f!=null&&n.disposeIntermediateTensorInfo(d),b}var Y_t={kernelName:qb,backendName:"webgl",kernelFunc:OFr};re();var FFr=zR+`
  return min(a, b);
`,RFr=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Pf+`
  return result;
`,MFr=Mn({opSnippet:FFr,packedOpSnippet:RFr,cpuKernelImpl:Kvt}),X_t={kernelName:zg,backendName:"webgl",kernelFunc:MFr};re();var $te=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=n.map((f,d)=>f[0]+r[d]+f[1]);let i=r.length,s=zr(i),a=n.map(f=>f[0]).join(","),l=n.map((f,d)=>f[0]+r[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=o==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}};var zte=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+r[g]+m[1]);let i=r.length,s=zr(i),a=n.map(m=>m[0]).join(","),l=n.map((m,g)=>m[0]+r[g]).join(","),u=ji("rc",i),c=ji("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=o==="reflect"?0:1,h="";if(i===1){let m=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let m=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[i-1]} += 1;
        if(${f}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${u[i-1]} += 1;
          if(${f}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var PFr=({inputs:t,backend:r,attrs:n})=>{let{x:o}=t,{paddings:i,mode:s}=n,a=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zte(o.shape,i,s):new $te(o.shape,i,s);return r.runWebGLProgram(a,[o],o.dtype)},K_t={kernelName:Hb,backendName:"webgl",kernelFunc:PFr};re();var jFr=`if (b == 0.0) return NAN;
  return mod(a, b);`,LFr=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Pf+`
  return result;
`,BFr=Mn({opSnippet:jFr,packedOpSnippet:LFr}),Z_t={kernelName:Ug,backendName:"webgl",kernelFunc:BFr};re();var Ute=class{constructor(r,n,o){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[r,o],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};re();re();var $Fr=`
if (a == b) {
  return 1.0;
};
return a / b;`,zFr=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,UEe=Mn({opSnippet:$Fr,packedOpSnippet:zFr,checkOutOfBounds:!0}),Q_t={kernelName:Ag,backendName:"webgl",kernelFunc:UEe};re();var J_t="return a - b;",VEe=Mn({opSnippet:J_t,packedOpSnippet:J_t,supportsComplex:!0,cpuKernelImpl:y1t}),e2t={kernelName:o0,backendName:"webgl",kernelFunc:VEe};function GEe(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{dim:s}=o,a=H.parseAxisParam([s],i.shape),l=zEe({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),u=ce.expandShapeToKeepDim(l.shape,a),c=yt({inputs:{x:l},backend:n,attrs:{shape:u}}),f=VEe({inputs:{a:i,b:c},backend:n}),d=LEe({inputs:{x:f},backend:n}),p=sk({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),h=yt({inputs:{x:p},backend:n,attrs:{shape:u}}),m=UEe({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}var t2t={kernelName:cx,backendName:"webgl",kernelFunc:GEe};function UFr(t){let{inputs:r,backend:n,attrs:o}=t,{logits:i}=r,{numSamples:s,seed:a,normalized:l}=o,u=l?i:GEe({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=u.shape[0],f=u.shape[1],d=new Ute(c,f,s),p=[[a]],h=n.runWebGLProgram(d,[u],"int32",p);return l||n.disposeIntermediateTensorInfo(u),h}var r2t={kernelName:$S,backendName:"webgl",kernelFunc:UFr};re();var VFr=vs+`
  return -x;
`,GFr=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function WFr(t){let{inputs:r,backend:n}=t,{x:o}=r;if(n.shouldExecuteOnCPU([o])){let s=n.texData.get(o.dataId),[a,l]=Qvt(s.values,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,a)}let i;return Oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Ac(o.shape,GFr):i=new Na(o.shape,VFr),n.runWebGLProgram(i,[o],o.dtype)}var n2t={kernelName:Yb,backendName:"webgl",kernelFunc:WFr};re();var qFr=_a.nonMaxSuppressionV3Impl;function HFr(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d}=qFr(c,f,a,l,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var o2t={kernelName:zS,backendName:"webgl",kernelFunc:HFr};re();var YFr=_a.nonMaxSuppressionV4Impl;function XFr(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,padToMaxOutputSize:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:p,validOutputs:h}=YFr(f,d,a,l,u,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var i2t={kernelName:US,backendName:"webgl",kernelFunc:XFr};re();var KFr=_a.nonMaxSuppressionV5Impl;function ZFr(t){ce.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:r,backend:n,attrs:o}=t,{boxes:i,scores:s}=r,{maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=o,f=n.readSync(i.dataId),d=n.readSync(s.dataId),p=a,h=l,m=u,g=c,{selectedIndices:y,selectedScores:b}=KFr(f,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var s2t={kernelName:VS,backendName:"webgl",kernelFunc:ZFr};re();var Vte=class{constructor(r,n,o,i){this.variableNames=["indices"],this.outputShape=[r,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${o}),
                      float(index == coords.y)));
      }
    `}};var QFr=t=>{let{inputs:r,backend:n,attrs:o}=t,{indices:i}=r,{dtype:s,depth:a,onValue:l,offValue:u}=o,c=H.sizeFromShape(i.shape),f=new Vte(c,a,l,u),d=yt({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[d],s);n.disposeIntermediateTensorInfo(d);let h=[...i.shape,a],m=yt({inputs:{x:p},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),m},a2t={kernelName:Kb,backendName:"webgl",kernelFunc:QFr};re();re();function Z6(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="complex64"){let i=i1({inputs:{input:o},backend:n}),s=Z6({inputs:{x:i},backend:n}),a=lk({inputs:{input:o},backend:n}),l=Z6({inputs:{x:a},backend:n}),u=Ic({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return s1({attrs:{shape:o.shape,dtype:o.dtype,value:o.dtype==="string"?"":0},backend:n})}var l2t={kernelName:px,backendName:"webgl",kernelFunc:Z6};function u2t(t){let{inputs:r,backend:n}=t,{x:o}=r;if(o.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(o.dtype==="complex64"){let i=i1({inputs:{input:o},backend:n}),s=u2t({inputs:{x:i},backend:n}),a=lk({inputs:{input:o},backend:n}),l=Z6({inputs:{x:a},backend:n}),u=Ic({inputs:{real:s,imag:l},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}else return s1({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:n})}var c2t={kernelName:Xb,backendName:"webgl",kernelFunc:u2t};re();function JFr(t){let{inputs:r,backend:n,attrs:o}=t,{axis:i}=o;if(r.length===1)return Ate({inputs:{input:r[0]},backend:n,attrs:{dim:i}});let s=r[0].shape,a=r[0].dtype;r.forEach(f=>{H.assertShapesMatch(s,f.shape,"All tensors passed to stack must have matching shapes"),H.assert(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let l=[],u=r.map(f=>{let d=Ate({inputs:{input:f},backend:n,attrs:{dim:i}});return l.push(d),d}),c=jEe({inputs:u,backend:n,attrs:{axis:i}});return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var f2t={kernelName:Zb,backendName:"webgl",kernelFunc:JFr};re();var Gte=class{constructor(r,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+r[f]+c[1]);let i=r.length,s=zr(i),a=n.map(c=>c[0]).join(","),l=n.map((c,f)=>c[0]+r[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${l};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${l});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}};var Wte=class{constructor(r,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,y)=>g[0]+r[y]+g[1]);let i=r.length,s=zr(i),a=n.map(g=>g[0]).join(","),l=n.map((g,y)=>g[0]+r[y]).join(","),u=ji("rc",i),c=ji("source",i),f=`${u[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${s} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${f}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${f}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="";for(let g=0,y=i===1?2:4;g<y;g++)m+=`
        ${p[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${l});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var WEe=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{paddings:s,constantValue:a}=o;if(H.sizeFromShape(i.shape)===0){let c=s.map((f,d)=>f[0]+i.shape[d]+f[1]);return s1({backend:n,attrs:{shape:c,value:a,dtype:i.dtype}})}let l=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wte(i.shape,s,a):new Gte(i.shape,s,a),u=[[a]];return n.runWebGLProgram(l,[i],i.dtype,u)},d2t={kernelName:Qb,backendName:"webgl",kernelFunc:WEe};re();var eRr=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,tRr=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Pf+`
  return result;
`,rRr=Mn({opSnippet:eRr,packedOpSnippet:tRr}),p2t={kernelName:Gg,backendName:"webgl",kernelFunc:rRr};re();function nRr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{axis:s,keepDims:a}=o,l=i.shape.length,u=[],c=H.parseAxisParam(s,i.shape),f=c,d=ce.getAxesPermutation(f,l),p=i;d!=null&&(p=Zo({inputs:{x:i},backend:n,attrs:{perm:d}}),f=ce.getInnerMostAxes(f.length,l),u.push(p)),ce.assertAxesAreInnerMostDims("prod",f,l);let h;if(n.shouldExecuteOnCPU([p])){let m=n.texData.get(p.dataId).values,{outVals:g,outShape:y,outDtype:b}=e1t(p.shape,p.dtype,m,f);h=n.makeTensorInfo(y,b,g)}else{let[m,g]=ce.computeOutAndReduceShapes(p.shape,f),y=H.sizeFromShape(g),b=yt({inputs:{x:p},backend:n,attrs:{shape:[-1,y]}}),x=L1(i.dtype),v=jf(b,x,"prod",n);h=yt({inputs:{x:v},backend:n,attrs:{shape:m}}),u.push(b),u.push(v)}if(a){u.push(h);let m=ce.expandShapeToKeepDim(h.shape,c);h=yt({inputs:{x:h},backend:n,attrs:{shape:m}})}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var h2t={kernelName:ex,backendName:"webgl",kernelFunc:nRr};re();function oRr(t){let{inputs:r,backend:n,attrs:o}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=r,{outputRaggedRank:l}=o,u=i.map(b=>n.readSync(b.dataId)),c=i.map(b=>b.shape),f=n.readSync(s.dataId),d=n.readSync(a.dataId),[p,h,m]=t1t(u,c,f,s.shape,s.dtype,d,a.shape,l),g=p.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,s.dtype,h);return g.concat([y])}var m2t={kernelName:GS,backendName:"webgl",kernelFunc:oRr};re();function iRr(t){let{inputs:r,backend:n}=t,{starts:o,limits:i,deltas:s}=r,a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=r1t(a,o.shape,o.dtype,l,i.shape,u,s.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],o.dtype,f);return[d,p]}var g2t={kernelName:WS,backendName:"webgl",kernelFunc:iRr};re();function sRr(t){let{inputs:r,backend:n,attrs:o}=t,{shape:i,values:s,defaultValue:a,rowPartitionTensors:l}=r,{rowPartitionTypes:u}=o,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=n.readSync(a.dataId),p=l.map(y=>n.readSync(y.dataId)),h=l.map(y=>y.shape),[m,g]=n1t(c,i.shape,f,s.shape,s.dtype,d,a.shape,p,h,u);return n.makeTensorInfo(m,s.dtype,g)}var y2t={kernelName:qS,backendName:"webgl",kernelFunc:sRr};re();var qEe=t=>{let{backend:r,attrs:n}=t,{start:o,stop:i,step:s,dtype:a}=n,l=o1t(o,i,s,a);return r.makeTensorInfo([l.length],a,l)},b2t={kernelName:HS,backendName:"webgl",kernelFunc:qEe};re();var aRr="return 1.0 / x;",lRr=er({opSnippet:aRr}),x2t={kernelName:Wg,backendName:"webgl",kernelFunc:lRr};re();var uRr=vs+`
  return (x < 0.0) ? 0.0 : x;
`,cRr=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fRr=er({opSnippet:uRr,packedOpSnippet:cRr}),v2t={kernelName:qg,backendName:"webgl",kernelFunc:fRr};re();var dRr=vs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pRr=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hRr=er({opSnippet:dRr,packedOpSnippet:pRr}),w2t={kernelName:Hg,backendName:"webgl",kernelFunc:hRr};re();var qte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var Hte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p;s?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function mRr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Hte(i.shape,u,c,s,a):new qte(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],"float32")}var _2t={kernelName:nx,backendName:"webgl",kernelFunc:mRr};re();var Yte=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function gRr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new Yte(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var S2t={kernelName:KS,backendName:"webgl",kernelFunc:gRr};re();var Xte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${l}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var Kte=class{constructor(r,n,o,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,l,u,c]=r;this.outputShape=[a,n,o,c];let f=[i&&n>1?l-1:l,i&&o>1?u-1:u],d=[i&&n>1?n-1:n,i&&o>1?o-1:o],p=i?"0.5":"0.0",h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${l}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${o-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function yRr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i}=r,{alignCorners:s,halfPixelCenters:a,size:l}=o,[u,c]=l,f=Oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Kte(i.shape,u,c,s,a):new Xte(i.shape,u,c,s,a);return n.runWebGLProgram(f,[i],i.dtype)}var C2t={kernelName:rx,backendName:"webgl",kernelFunc:yRr};re();var Zte=class{constructor(r,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,i,s]=n,[,a,l]=r,u=[o&&a>1?i-1:i,o&&l>1?s-1:s],c=[o&&a>1?a-1:a,o&&l>1?l-1:l],f=u[0]/c[0],d=u[1]/c[1],p=1/f,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${l}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${o} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${o} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function bRr(t){let{inputs:r,backend:n,attrs:o}=t,{images:i,dy:s}=r,{alignCorners:a}=o,l=new Zte(s.shape,i.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}var E2t={kernelName:XS,backendName:"webgl",kernelFunc:bRr};re();var Qte=class{constructor(r,n){this.variableNames=["x"];let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);if(this.outputShape=r,o===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${r[0]} - coord - 1));
        }
      `;return}let i=l=>n.indexOf(l)!==-1&&r[l]!==1?`${r[l]} - coords[${l}] - 1`:`coords[${l}]`,s=r.map((l,u)=>i(u)).join(","),a=zr(o);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};var Jte=class{constructor(r,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let o=r.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);this.outputShape=r;let i=ji("rc",o),s=`${i[o-1]} + 1 < ${this.outputShape[o-1]}`,a=`${i[o-2]} + 1 < ${this.outputShape[o-2]}`,l=zr(o);o===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${r[0]} - rc - 1),
            ${r[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${r[0]} - (rc  + 1) - 1),
                ${r[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${a}) {
            result.b = ${f(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(m){return p(m)}function c(m){return m[o-1]="("+m[o-1]+" + 1)",p(m)}function f(m){return m[o-2]="("+m[o-2]+" + 1)",p(m)}function d(m){return m[o-1]="("+m[o-1]+" + 1)",m[o-2]="("+m[o-2]+" + 1)",p(m)}function p(m){let g=r.map((x,v)=>h(v,m)),y=g.join(","),b=g.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function h(m,g){return n.indexOf(m)!==-1&&r[m]!==1?`${r[m]} - ${g[m]} - 1`:`${g[m]}`}}};function xRr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{dims:s}=o,a=i.shape.length,l=H.parseAxisParam(s,i.shape);if(a===0)return Li({inputs:{x:i},backend:n});let u=Oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jte(i.shape,l):new Qte(i.shape,l);return n.runWebGLProgram(u,[i],i.dtype)}var T2t={kernelName:ox,backendName:"webgl",kernelFunc:xRr};re();re();var ere=class{constructor(r,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let o=r[1],i=r[2];this.outputShape=r;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${o}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var A2t={kernelName:pC,backendName:"webgl",kernelFunc:({inputs:t,attrs:r,backend:n})=>{let{image:o}=t,{radians:i,fillValue:s,center:a}=r,l=n,u=new ere(o.shape,s),[c,f]=ce.getImageCenter(a,o.shape[1],o.shape[2]),d=[[c,f,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(u,[o],o.dtype,d)}};re();var vRr=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,wRr=er({opSnippet:vRr}),k2t={kernelName:Yg,backendName:"webgl",kernelFunc:wRr};re();var _Rr="return inversesqrt(x);",SRr=er({opSnippet:_Rr,cpuKernelImpl:i1t}),I2t={kernelName:Xg,backendName:"webgl",kernelFunc:SRr};re();var W2=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let c=zr(s.length),f=zr(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,h="";i===1?h="i":i===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${r}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}};var tre=class{constructor(r,n,o,i,s,a,l=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let c=zr(s.length),f=zr(a.length),d="";o===1?d="i":o===2&&(d="i, j");let p=`getIndices(${d})`,h="";i===1?h="i":i===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";u&&(g="coords[0], coords[1]");let y=`getDefaultValue(${g})`,b=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${r}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}};function CRr(t){let{inputs:r,backend:n,attrs:o}=t,{indices:i,updates:s}=r,{shape:a}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(s,i,a),p=[d/c,c];if(d===0)return n.makeTensorInfo(a,i.dtype);let h=yt({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=yt({inputs:{x:s},backend:n,attrs:{shape:[u,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y;Oe().getBool("WEBGL_PACK")?y=new tre(u,l,h.shape.length,m.shape.length,f,p):y=new W2(u,l,h.shape.length,m.shape.length,f,p);let b=n.runWebGLProgram(y,[m,h,g],m.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),x}var D2t={kernelName:ZS,backendName:"webgl",kernelFunc:CRr};re();re();var rre=class{constructor(r,n,o,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[r,o];let s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,l=Oe().getNumber("WEBGL_VERSION")===2?s:a,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${l}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function ERr(t){let{inputs:r,backend:n,attrs:o}=t,{sortedSequence:i,values:s}=r,{side:a}=o,l=new rre(i.shape[0],i.shape[1],s.shape[1],a),u=[[i.shape[1]]];return n.runWebGLProgram(l,[i,s],"int32",u)}var N2t={kernelName:JS,backendName:"webgl",kernelFunc:ERr};re();var nre=class{constructor(r,n,o){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(o>4)throw Error(`Where for rank ${o} is not yet supported`);if(o===1)s="resRC",i="resRC";else{let l=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],c=[];for(let f=0;f<n.length;f++)c.push(`${l[f]}`),f<r&&u.push(`${l[f]}`);i=u.join(),s=c.join()}let a=zr(o);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}};function TRr(t){let{inputs:r,backend:n}=t,{condition:o,t:i,e:s}=r,a=new nre(o.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[o,i,s],zi(i.dtype,s.dtype))}var O2t={kernelName:ix,backendName:"webgl",kernelFunc:TRr};re();var ARr=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${ce.SELU_SCALEALPHA};
  float scale = ${ce.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,kRr=er({opSnippet:ARr}),F2t={kernelName:Kg,backendName:"webgl",kernelFunc:kRr};re();var IRr=nh+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,DRr=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,NRr=er({opSnippet:IRr,packedOpSnippet:DRr,cpuKernelImpl:a1t}),R2t={kernelName:e0,backendName:"webgl",kernelFunc:NRr};re();var ORr=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,FRr=er({opSnippet:ORr}),M2t={kernelName:Jg,backendName:"webgl",kernelFunc:FRr};re();var RRr=nh+`
  return sin(x);
`,MRr=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Pf}
  return result;
`,PRr=er({opSnippet:RRr,packedOpSnippet:MRr}),P2t={kernelName:Zg,backendName:"webgl",kernelFunc:PRr};re();var jRr=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,LRr=er({opSnippet:jRr}),j2t={kernelName:Qg,backendName:"webgl",kernelFunc:LRr};re();var BRr=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,$Rr=er({opSnippet:BRr}),L2t={kernelName:t0,backendName:"webgl",kernelFunc:$Rr};re();var zRr=t=>{let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{blockShape:s,paddings:a}=o;H.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let l=s.reduce((b,x)=>b*x),u=[[0,0]];u.push(...a);for(let b=1+s.length;b<i.shape.length;++b)u.push([0,0]);let c=[],f=WEe({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),d=ce.getReshaped(f.shape,s,l,!1),p=ce.getPermuted(d.length,s.length,!1),h=ce.getReshapedPermuted(f.shape,s,l,!1),m=yt({inputs:{x:f},backend:n,attrs:{shape:d}}),g=Zo({inputs:{x:m},backend:n,attrs:{perm:p}}),y=yt({inputs:{x:g},backend:n,attrs:{shape:h}});return c.push(f),c.push(m),c.push(g),c.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},B2t={kernelName:lx,backendName:"webgl",kernelFunc:zRr};re();function URr(t){let{inputs:r,backend:n}=t,{indices:o,values:i,denseShape:s,defaultValue:a}=r;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);let l=n.readSync(o.dataId),u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId)[0],[d,p,h,m,g]=u1t(l,o.shape,o.dtype,u,i.dtype,c,f);return[n.makeTensorInfo(p,o.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],o.dtype,new Int32Array(g))]}var $2t={kernelName:eC,backendName:"webgl",kernelFunc:URr};re();function VRr(t){let{inputs:r,backend:n}=t,{inputIndices:o,inputShape:i,newShape:s}=r;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);let a=Array.from(n.readSync(i.dataId)),l=n.readSync(o.dataId),u=Array.from(n.readSync(s.dataId)),[c,f,d]=c1t(l,o.shape,o.dtype,a,u);return[n.makeTensorInfo(f,o.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}var z2t={kernelName:tC,backendName:"webgl",kernelFunc:VRr};re();function GRr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=Lee(a,o.shape,o.dtype,l,u,!0);return n.makeTensorInfo(f,o.dtype,c)}var U2t={kernelName:rC,backendName:"webgl",kernelFunc:GRr};re();function WRr(t){let{inputs:r,backend:n}=t,{data:o,indices:i,segmentIds:s}=r;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);let a=n.readSync(o.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),[c,f]=Lee(a,o.shape,o.dtype,l,u);return n.makeTensorInfo(f,o.dtype,c)}var V2t={kernelName:nC,backendName:"webgl",kernelFunc:WRr};re();function qRr(t){let{inputs:r,backend:n,attrs:o}=t,{sparseIndices:i,sparseValues:s,defaultValue:a}=r,{outputShape:l}=o,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:p}=ce.calculateShapes(s,i,l),h=!1;if(s.dtype==="string"){let b=n.bufferSync(i),x=n.bufferSync(s),v=H.decodeString(n.readSync(a.dataId)[0]),w=s1t(b,x,l,p,f,c,u,d,v,h);return n.makeTensorInfo(l,w.dtype,w.values)}let m=new W2(c,u,i.shape.length,s.shape.length,d,[p,1],h),g=n.runWebGLProgram(m,[s,i,a],s.dtype),y=yt({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(g),y}var G2t={kernelName:oC,backendName:"webgl",kernelFunc:qRr};re();function HRr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{numOrSizeSplits:s,axis:a}=o,l=H.parseAxisParam(a,i.shape)[0],u=ce.prepareSplitSize(i,s,l),c=i.shape.length,f=new Array(c).fill(0),d=i.shape.slice();return u.map(p=>{let h=[...d];h[l]=p;let m=ng({inputs:{x:i},backend:n,attrs:{begin:f,size:h}});return f[l]+=p,m})}var W2t={kernelName:ux,backendName:"webgl",kernelFunc:HRr};re();var q2t="return sqrt(x);",YRr=er({opSnippet:q2t,packedOpSnippet:q2t,cpuKernelImpl:f1t}),H2t={kernelName:r0,backendName:"webgl",kernelFunc:YRr};re();var XRr="return x * x;",KRr=er({opSnippet:XRr}),Y2t={kernelName:iC,backendName:"webgl",kernelFunc:KRr};re();var X2t="return (a - b) * (a - b);",ZRr=Mn({opSnippet:X2t,packedOpSnippet:X2t}),K2t={kernelName:n0,backendName:"webgl",kernelFunc:ZRr};re();function QRr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r;if(i.dtype!=="string")throw new Error("Input must be of datatype string");let s=n.readSync(i.dataId),a=ce.fromUint8ToStringArray(s),l=d1t(a,"string",o);return n.makeTensorInfo(i.shape,"string",l)}var Z2t={kernelName:O1,backendName:"webgl",kernelFunc:QRr};re();function JRr({inputs:t,attrs:r,backend:n}){let{x:o}=t,i=vs+`
    return x > 0.0 ? 1.0 : float(${r.alpha});
  `,s=new Na(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}var Q2t={kernelName:a0,backendName:"webgl",kernelFunc:JRr};re();var ore=class{constructor(r,n,o){this.variableNames=["x"],this.outputShape=o;let i=o.length,s=zr(o.length),a=zr(o.length),l="";if(i===1)l="coords * strides + begin";else{let u=0;l=o.map((c,f)=>(u++,o.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${u-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${r});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${l}));
      }
    `}};function eMr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{begin:s,end:a,strides:l,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:p}=o,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:x,end:v,strides:w}=Ns.sliceInfo(i.shape,s,a,l,u,c,f,d,p),_;if(g)_=yt({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||b){H.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let S=Ns.computeOutShape(x,v,w),E=ng({inputs:{x:i},backend:n,attrs:{begin:x,size:S}});_=yt({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([i])){let E=n.readSync(i.dataId),A=Jt(i.shape,i.dtype,E),N=p1t(h,A,w,x);_=n.makeTensorInfo(m,i.dtype,N.values)}else{let E=new ore(x,w,h);_=n.runWebGLProgram(E,[i],i.dtype)}let C=yt({inputs:{x:_},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(_),C}var J2t={kernelName:sC,backendName:"webgl",kernelFunc:eMr};re();function tMr(t){let{inputs:r,backend:n,attrs:o}=t,{separator:i,nGramWidths:s,leftPad:a,rightPad:l,padWidth:u,preserveShortSequences:c}=o,{data:f,dataSplits:d}=r,p=n.readSync(f.dataId),h=n.readSync(d.dataId),[m,g]=h1t(p,h,i,s,a,l,u,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var eSt={kernelName:aC,backendName:"webgl",kernelFunc:tMr};re();function rMr(t){let{inputs:r,backend:n,attrs:o}=t,{skipEmpty:i}=o,{input:s,delimiter:a}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);let l=n.readSync(s.dataId),u=n.readSync(a.dataId)[0],[c,f,d]=m1t(l,u,i),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var tSt={kernelName:lC,backendName:"webgl",kernelFunc:rMr};re();function nMr(t){let{inputs:r,backend:n,attrs:o}=t,{numBuckets:i}=o,{input:s}=r;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.readSync(s.dataId),l=g1t(a,i);return n.makeTensorInfo(s.shape,"int32",l)}var rSt={kernelName:uC,backendName:"webgl",kernelFunc:nMr};re();var oMr="return tan(x);",iMr=er({opSnippet:oMr}),nSt={kernelName:i0,backendName:"webgl",kernelFunc:iMr};re();var sMr=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,aMr=er({opSnippet:sMr}),oSt={kernelName:s0,backendName:"webgl",kernelFunc:aMr};re();function lMr(t){let{inputs:r,backend:n,attrs:o}=t,{tensor:i,indices:s,updates:a}=r,{}=o,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=ce.calculateShapes(a,s,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);let h=yt({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),m=yt({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}),g=yt({inputs:{x:i},backend:n,attrs:{shape:p}}),y=new W2(u,l,h.shape.length,m.shape.length,f,p,!1,!0),b=n.runWebGLProgram(y,[m,h,g],g.dtype),x=yt({inputs:{x:b},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}var iSt={kernelName:QS,backendName:"webgl",kernelFunc:lMr};re();var ire=class{constructor(r,n){this.variableNames=["A"];let o=new Array(r.length);for(let a=0;a<o.length;a++)o[a]=r[a]*n[a];this.outputShape=o,this.rank=o.length;let i=zr(this.rank),s=uMr(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}};function uMr(t){let r=t.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(r===1)return`imod(resRC, ${t[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],o=[];for(let i=0;i<t.length;i++)o.push(`imod(${n[i]}, ${t[i]})`);return o.join()}function HEe(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{reps:s}=o;if(i.dtype==="string"||i.shape.length>5){let u=n.readSync(i.dataId),c=i.dtype==="string"?u.map(p=>H.decodeString(p)):u,f=Jt(i.shape,i.dtype,c),d=b1t(f,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}let a=new ire(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var sSt={kernelName:mh,backendName:"webgl",kernelFunc:HEe};re();var sre=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=r,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},are=class{constructor(r){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=r,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function uk(t,r){r!==null&&t.disposeIntermediateTensorInfo(r)}function aSt(t){let r=1;for(;r<t;)r*=2;return r}function cMr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i}=r,{k:s,sorted:a}=o,l=Oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([i])||f<l||s>u){let N=n.readSync(i.dataId),[k,R]=x1t(N,c,i.dtype,s,a);return[n.makeTensorInfo(k.shape,k.dtype,k.values),n.makeTensorInfo(R.shape,R.dtype,R.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[i,s1({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,h=p?n.unpackTensor(i):i,g=H.sizeFromShape(c)/f,y=yt({inputs:{x:h},attrs:{shape:[g,f]},backend:n});p&&uk(n,h);let b=aSt(s),x=aSt(f),v=null,w=()=>v===null?[y,y]:[y,v],_=(N,k,R)=>{let I=w(),L=new sre(R),M=[[f],[v===null?1:0],[Number.NEGATIVE_INFINITY],[N],[k]],V=v;v=n.runWebGLProgram(L,I,"int32",M),uk(n,V)};for(let N=1;N<b;N*=2){let k=N*2;for(let R=N;R>=1;R/=2)_(k,R,[g,x])}for(let N=x;N>b;N/=2){let k=w(),R=new are([g,N/2]),L=[[f],[v===null?1:0],[b]],j=v;v=n.runWebGLProgram(R,k,"int32",L),uk(n,j);let M=b/2,V=M*2;for(let G=M;G>=1;G/=2)_(V,G,v.shape)}let C=v;v=ng({inputs:{x:v},backend:n,attrs:{begin:0,size:[g,s]}}),uk(n,C);let S=$Ee({inputs:{x:y,indices:v},backend:n,attrs:{axis:1,batchDims:1}});uk(n,y);let E=c.slice(0,-1);E.push(s),C=v,v=yt({inputs:{x:v},attrs:{shape:E},backend:n}),uk(n,C);let A=S;return S=yt({inputs:{x:S},attrs:{shape:E},backend:n}),uk(n,A),[S,v]}var lSt={kernelName:cC,backendName:"webgl",kernelFunc:cMr};re();var lre=class{constructor(r,n,o,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;let l=o==="nearest"?1:2,u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${r} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${r}));

                if (${l} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function fMr(t){let{inputs:r,backend:n,attrs:o}=t,{image:i,transforms:s}=r,{interpolation:a,fillMode:l,fillValue:u,outputShape:c}=o,[f,d,p,h]=i.shape,[m,g]=c??[d,p],y=[f,m,g,h],b=new lre(d,p,a,l,u,y);return n.runWebGLProgram(b,[i,s],"float32")}var uSt={kernelName:fC,backendName:"webgl",kernelFunc:fMr};re();function dMr(t){let{inputs:r,attrs:n,backend:o}=t,{axis:i}=n,{x:s}=r;ib(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let a=o.readSync(s.dataId),{outputValues:l,outputShape:u,indices:c}=v1t(a,i,s.shape,s.dtype);return[o.makeTensorInfo(u,s.dtype,l),o.makeTensorInfo([c.length],"int32",c)]}var cSt={kernelName:dC,backendName:"webgl",kernelFunc:dMr};re();function pMr(t){let{inputs:r,backend:n,attrs:o}=t,{value:i}=r,{axis:s}=o;s<0&&(s+=i.shape.length);let a=i,l=a.shape.length,u=i.shape[s],c=new Array(l-1),f=0;for(let g=0;g<l;g++)g!==s&&(c[f++]=a.shape[g]);let d=[],p=new Array(l).fill(0),h=a.shape.slice();h[s]=1;let m=new Array(u);for(let g=0;g<m.length;g++){p[s]=g;let y=ng({inputs:{x:a},backend:n,attrs:{begin:p,size:h}}),b=yt({inputs:{x:y},backend:n,attrs:{shape:c}});m[g]=b,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var fSt={kernelName:fx,backendName:"webgl",kernelFunc:pMr};re();var ure=class{constructor(r,n){this.variableNames=["x","segmentIds"];let o=r.windowSize,i=r.batchSize,s=r.inSize,a=r.numSegments,l=a*Math.ceil(s/o);this.outputShape=[i,l];let u="0.0",c="sumValue",f=Math.floor(o/4)*4,d=o%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";s%o>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let m="";s%o>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${o}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function hMr(t){let{inputs:r,backend:n,attrs:o}=t,{x:i,segmentIds:s}=r,{numSegments:a}=o,l=i.shape.length,u=[],c=0,f=ce.getAxesPermutation([c],l),d=i;f!=null&&(d=Zo({inputs:{x:i},backend:n,attrs:{perm:f}}),u.push(d),c=ce.getInnerMostAxes(1,l)[0]);let p=ce.segment_util.computeOutShape(d.shape,c,a),h=H.sizeFromShape([d.shape[c]]),m=yt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(m);let g=L1(i.dtype),y=(w,_,C,S,E)=>{let A=w.shape[0],N=w.shape[1],k=ce.segment_util.segOpComputeOptimalWindowSize(N,E),R={windowSize:k,inSize:N,batchSize:A,numSegments:E},I=new ure(R,_),L=n.compileAndRun(I,[w,C],S);if(u.push(L),L.shape[1]===E)return L;let j=qEe({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),M=HEe({inputs:{x:j},backend:n,attrs:{reps:[N/k]}});return u.push(j),u.push(M),y(L,_,M,S,E)},b=y(m,"unsortedSegmentSum",s,g,a),x=yt({inputs:{x:b},backend:n,attrs:{shape:p}}),v=x;if(f!=null){u.push(x);let w=ce.getUndoAxesPermutation(f);v=Zo({inputs:{x:v},backend:n,attrs:{perm:w}})}return u.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}var dSt={kernelName:dx,backendName:"webgl",kernelFunc:hMr};var mMr=[Y1t,K1t,Z1t,Q1t,ewt,twt,rwt,nwt,swt,awt,lwt,uwt,cwt,fwt,dwt,pwt,hwt,mwt,gwt,ywt,bwt,vwt,wwt,_wt,Swt,Awt,Iwt,Dwt,L1t,Owt,Rwt,Mwt,Pwt,jwt,Lwt,Bwt,$wt,zwt,Uwt,Vwt,qwt,Hwt,Ywt,Xwt,Kwt,Zwt,Qwt,Jwt,e_t,t_t,r_t,n_t,o_t,i_t,s_t,a_t,u_t,c_t,f_t,d_t,h_t,m_t,g_t,y_t,b_t,x_t,v_t,w_t,__t,j1t,S_t,Fwt,C_t,E_t,T_t,B1t,A_t,k_t,I_t,D_t,N_t,O_t,F_t,R_t,M_t,P_t,L_t,B_t,$_t,z_t,U_t,V_t,W_t,H_t,Y_t,X_t,K_t,Z_t,r2t,U1t,n2t,o2t,i2t,s2t,Cwt,a2t,c2t,f2t,d2t,p2t,$1t,h2t,m2t,g2t,y2t,b2t,Ewt,Q_t,x2t,v2t,w2t,G1t,_2t,S2t,C2t,E2t,T2t,A2t,k2t,I2t,D2t,N2t,O2t,F2t,R2t,M2t,P2t,j2t,xwt,t2t,L2t,B2t,$2t,z2t,U2t,V2t,G2t,W2t,H2t,Y2t,K2t,Z2t,Q2t,J2t,eSt,tSt,rSt,e2t,q1t,nSt,oSt,iSt,sSt,lSt,uSt,H1t,cSt,fSt,dSt,l2t];for(let t of mMr)Zk(t);re();var gMr=["vis"],mSt=(()=>{let r=class r{get settings(){return this._tensorflowSettings.getValue()}set settings(o){this._tensorflowSettings.getValue()!==o&&this._tensorflowSettings.next(o)}constructor(){this.modelTrainned=new ha,this._tensorflowSettings=new Pa(null),this.settings$=this._tensorflowSettings.asObservable().pipe(cb(),mM({bufferSize:1,refCount:!0})),this.settings$.pipe(Bi(o=>Be(this,null,function*(){if(o){let{inputs:i,labels:s,mainLayers:a,finalLayer:l}=o,u=Ah(i,[i.length,2],"float32"),c=No(s);this.model=cSe(),a.forEach(h=>this.model.add(h)),this.model.add(l),this.model.compile(o.compiler),this.model.compile({optimizer:op.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]});let f={name:"show.fitCallbacks",tab:"Training",drawArea:this.container?.nativeElement},d={onTrainEnd:()=>{alert("Trainning complete!"),this.modelTrainned.emit(this.model)}},p=Ss(Kt({},o.fit),{callbacks:[hSt.show.fitCallbacks(f,["loss","acc"]),d]});yield this.model.fit(u,c,p)}}))).subscribe()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=Es({type:r,selectors:[["app-tensorflow-visualization"]],viewQuery:function(i,s){if(i&1&&qd(gMr,7),i&2){let a;$u(a=zu())&&(s.container=a.first)}},inputs:{settings:"settings"},outputs:{modelTrainned:"modelTrainned"},standalone:!0,features:[Ts],decls:3,vars:0,consts:[["vis",""],[1,"container"]],template:function(i,s){i&1&&(Gs(0,"div",1),Zl(1,"div",null,0),ma())},styles:[".container[_ngcontent-%COMP%]{background:#fff;width:100%;height:100%;margin-top:40px}"]});let t=r;return t})();var bSt=Bf(ySt());var cre=class{constructor(r,n,o,i,s){this.p=r,this.background=n,this.ground=o,this.w=i,this.y=s}drawBackground(){let r=Math.round(this.w/this.background.width)+1;for(let n=0;n<r;n++)this.p.image(this.background,this.background.width*n,this.y-this.ground.height-this.background.height)}drawGround(){let r=Math.round(this.w/this.ground.width)+1;for(let n=0;n<r;n++)this.p.image(this.ground,this.ground.width*n,this.y-this.ground.height)}};var fre=class{constructor(r,n,o,i,s,a){this.p=r,this.upPipe=n,this.downPipe=o,this.w=i,this.h=s,this.minBottom=0,this.maxBottom=0,this.yBottom=0,this.distancePipe=420,this.x=0,this.velocity=5,this.targetX=0,this.targetY=0,this.minBottom=this.h-480,this.maxBottom=this.h-140,this.yBottom=r.random(this.minBottom,this.maxBottom),this.x=a}draw(){let r=this.yBottom-this.distancePipe,n=0-this.downPipe.height+r;if(r>0){let o=Math.round(r/this.downPipe.height)+1;for(let i=0;i<o;i++)n*i>0?this.p.image(this.downPipe,this.x,n*i):this.p.image(this.downPipe,this.x,n)}this.p.image(this.downPipe,this.x,this.yBottom),this.p.image(this.upPipe,this.x,this.yBottom-this.distancePipe),this.targetY=this.yBottom-70,this.targetX=this.x+65,this.image=this.downPipe,this.x=this.x-this.velocity}isOffscreen(r){let n=!1;if(this.x+this.downPipe.width<-10){let i=r.sort((s,a)=>s.x<a.x?1:s.x>a.x?-1:0)[0].x+400;this.x=i,this.yBottom=this.p.random(this.minBottom,this.maxBottom),n=!0}return n}isOffscreenScore(r){return this.targetX>r?1:0}};var dre=class{constructor(r,n,o,i,s=-5){this.p=r,this.bird=n,this.ground=o,this.height=i,this.isAlive=!0,this.x=70,this.y=0,this.gravity=.9,this.velocity=0,this.score=0,this.generation=0,this.isAlive=!0,this.y=window.innerHeight/2-170,this.jumpForce=s}update(r){let n=this.getNearObstacle(r),o=0,i=0;n?.targetX>this.x?i=n?.targetX-this.x:i=this.x-n?.targetX,n?.targetY<this.y?o=n?.targetY-this.y:o=this.y-n?.targetY,this.fall(i,o),this.p.image(this.bird,this.x,this.y)}fall(r,n){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.score=this.score-r-n}getNearObstacle(r){return r.filter(o=>o.x>=this.x+this.bird.width).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0]}hits(r){let o=r.filter(i=>i.x<this.x+this.bird.width).sort((i,s)=>i.x<s.x?-1:i.x>s.x?1:0)[0];return(this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y+this.bird.height>o.yBottom+10||this.x+this.bird?.width>o?.x&&this.x<o.x+o.image.width&&this.y<o.yBottom-180)&&(this.isAlive=!1),!1}isOffScreen(){(this.y+this.bird.height<0||this.y>this.height-this.ground.height)&&(this.isAlive=!1)}jump(){this.velocity+=this.jumpForce,this.velocity*=.9}info(r){let n=r.filter(o=>o.targetX>=this.x).sort((o,i)=>o.x<i.x?-1:o.x>i.x?1:0)[0];return{agentY:this.y,targetY:n?.targetY}}};var bMr=["canvas"];function xMr(t,r){if(t&1){let n=gb();Gs(0,"app-tensorflow-visualization",3),ch("modelTrainned",function(i){db(n);let s=cg();return pb(s.modelTrainned(i))}),ma()}if(t&2){let n=cg();ug("settings",n.settings)}}var XEe=function(t){return t[t.Nothing=0]="Nothing",t[t.Jump=1]="Jump",t}(XEe||{}),xSt=(()=>{let r=class r{get model(){return this._model.getValue()}set model(o){this._model.getValue()!==o&&this._model.next(o)}constructor(){this.screenYSize=window.innerHeight,this.data=[],this.inputs=[],this.labels=[],this._model=new Pa(null),this.model$=this._model.asObservable().pipe(cb(),mM({bufferSize:1,refCount:!0})),this.nextYellowPointX=0,this.birdX=0,this.scorePipes=0,this.obstacles=[],this.width=window.innerWidth,this.height=window.innerHeight;let o=this.creatingDataToTraining();this.settingTensorflow()}ngOnInit(){this.canvas,this._model.subscribe(o=>{o&&(this.p=new bSt.default(this.sketch.bind(this)))})}sketch(o){o.setup=()=>this.setup(o),o.draw=()=>this.draw(o)}setup(o){let i=o.loadImage("assets/bg.png"),s=o.loadImage("assets/ground.png");this.upPipe=o.loadImage("assets/pipeUp.png"),this.downPipe=o.loadImage("assets/pipeDown.png");let a=o.loadImage("assets/bird.png");this.background=new cre(o,i,s,this.width,this.height),this.initObstacles(o,this.upPipe,this.downPipe),o.createCanvas(this.width,this.height,this.canvas.nativeElement),this.bird=new dre(o,a,s,this.height)}draw(o){o.background(111,197,206),this.background.drawBackground(),this.obstacles.forEach(h=>{h.draw(),h.isOffscreen(this.obstacles)&&(this.scorePipes+=1)}),this.bird.update(this.obstacles);let{agentY:i,targetY:s}=this.bird.info(this.obstacles),a=La([[i,s]]),l=this.model?.predict(a),f=Jd(l,1).arraySync()[0];["Nothing","JUMP"][f]==="JUMP"&&this.bird.jump(),o.textSize(20),o.text(`Score (Pipe counter): ${this.scorePipes}`,10,110),this.background.drawGround()}initObstacles(o,i,s){this.obstacles=[];let a=400;for(let l=0;l<10;l++)this.obstacles.push(new fre(o,i,s,this.width,this.height,this.width+a*l))}settingTensorflow(){this.inputs=this.data.map(o=>[o.yAgent,o.yTarget]),this.labels=this.data.map(o=>Number(o.action)),this.settings={compiler:{optimizer:op.adam(),loss:"sparseCategoricalCrossentropy",metrics:["accuracy"]},fit:{batchSize:512,epochs:10},inputs:this.inputs,labels:this.labels,mainLayers:[D6.dense({units:10,activation:"relu",inputShape:[2]})],finalLayer:D6.dense({units:2,activation:"softmax"})}}creatingDataToTraining(){for(let o=0;o<this.screenYSize;o+=5)for(let i=0;i<this.screenYSize;i+=5)i<o?this.data.push({yAgent:i,yTarget:o,action:XEe.Nothing}):this.data.push({yAgent:i,yTarget:o,action:XEe.Jump});return JSON.stringify(this.data)}modelTrainned(o){this.model=o}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=Es({type:r,selectors:[["app-flappy-bird-supervised"]],viewQuery:function(i,s){if(i&1&&qd(bMr,7),i&2){let a;$u(a=zu())&&(s.canvas=a.first)}},standalone:!0,features:[Ts],decls:4,vars:2,consts:[["canvas",""],[3,"settings","modelTrainned",4,"ngIf"],["height","0",2,"background","white","margin-top","200px",3,"width"],[3,"modelTrainned","settings"]],template:function(i,s){i&1&&(Gs(0,"div"),mb(1,xMr,1,1,"app-tensorflow-visualization",1),Zl(2,"canvas",2,0),ma()),i&2&&(Vd(),ug("ngIf",!s.model),Vd(),ug("width",0))},dependencies:[yb,GAe,mSt],styles:["canvas[_ngcontent-%COMP%]{margin-top:0!important;display:block;width:100%;height:100%}"]});let t=r;return t})();var vSt=[{path:"",component:xSt}];var vMr="@",wMr=(()=>{let r=class r{constructor(o,i,s,a,l){this.doc=o,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=l,this._rendererFactoryPromise=null,this.scheduler=ar(AAe,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-UEJSJP7S.js").then(i=>i)).catch(i=>{throw new es(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(o,i){let s=this.delegate.createRenderer(o,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new KEe(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(l=>{let u=l.createRenderer(o,i);a.use(u),this.scheduler?.notify(9)}).catch(l=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(i){_M()},r.\u0275prov=Er({token:r,factory:r.\u0275fac});let t=r;return t})(),KEe=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let n of this.replay)n(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,n){return this.delegate.createElement(r,n)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,n){this.delegate.appendChild(r,n)}insertBefore(r,n,o,i){this.delegate.insertBefore(r,n,o,i)}removeChild(r,n,o){this.delegate.removeChild(r,n,o)}selectRootElement(r,n){return this.delegate.selectRootElement(r,n)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,n,o,i){this.delegate.setAttribute(r,n,o,i)}removeAttribute(r,n,o){this.delegate.removeAttribute(r,n,o)}addClass(r,n){this.delegate.addClass(r,n)}removeClass(r,n){this.delegate.removeClass(r,n)}setStyle(r,n,o,i){this.delegate.setStyle(r,n,o,i)}removeStyle(r,n,o){this.delegate.removeStyle(r,n,o)}setProperty(r,n,o){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(r,n,o)),this.delegate.setProperty(r,n,o)}setValue(r,n){this.delegate.setValue(r,n)}listen(r,n,o){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(r,n,o)),this.delegate.listen(r,n,o)}shouldReplay(r){return this.replay!==null&&r.startsWith(vMr)}};function wSt(t="animations"){return kAe("NgAsyncAnimations"),yM([{provide:xz,useFactory:(r,n,o)=>new wMr(r,n,o,t),deps:[xn,Cz,kn]},{provide:uh,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var _St={providers:[LAe({eventCoalescing:!0}),qke(vSt),wSt()]};var QEe;try{QEe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QEe=!1}var Qi=(()=>{let r=class r{constructor(o){this._platformId=o,this.isBrowser=this._platformId?qAe(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||QEe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};r.\u0275fac=function(i){return new(i||r)(kt(Q2))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Q6;function _Mr(){if(Q6==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Q6=!0}))}finally{Q6=Q6||!1}return Q6}function KR(t){return _Mr()?t:!!t.capture}var og=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(og||{}),pre,ck;function hre(){if(ck==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ck=!1,ck;if("scrollBehavior"in document.documentElement.style)ck=!0;else{let t=Element.prototype.scrollTo;t?ck=!/\{\s*\[native code\]\s*\}/.test(t.toString()):ck=!1}}return ck}function ZR(){if(typeof document!="object"||!document)return og.NORMAL;if(pre==null){let t=document.createElement("div"),r=t.style;t.dir="rtl",r.width="1px",r.overflow="auto",r.visibility="hidden",r.pointerEvents="none",r.position="absolute";let n=document.createElement("div"),o=n.style;o.width="2px",o.height="1px",t.appendChild(n),document.body.appendChild(t),pre=og.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,pre=t.scrollLeft===0?og.NEGATED:og.INVERTED),t.remove()}return pre}var ZEe;function SMr(){if(ZEe==null){let t=typeof document<"u"?document.head:null;ZEe=!!(t&&(t.createShadowRoot||t.attachShadow))}return ZEe}function SSt(t){if(SMr()){let r=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function oh(t){return t.composedPath?t.composedPath()[0]:t.target}function J6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function CSt(t,...r){return r.length?r.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function dk(t){return t!=null&&`${t}`!="false"}function QR(t){return Array.isArray(t)?t:[t]}function Bs(t){return t==null?"":typeof t=="string"?t:`${t}px`}function a1(t){return t instanceof ei?t.nativeElement:t}var CMr=(()=>{let r=class r{create(o){return typeof MutationObserver>"u"?null:new MutationObserver(o)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var ESt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({providers:[CMr]});let t=r;return t})();var TSt=new Set,pk,EMr=(()=>{let r=class r{constructor(o,i){this._platform=o,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):AMr}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&TMr(o,this._nonce),this._matchMedia(o)}};r.\u0275fac=function(i){return new(i||r)(kt(Qi),kt(vM,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function TMr(t,r){if(!TSt.has(t))try{pk||(pk=document.createElement("style"),r&&pk.setAttribute("nonce",r),pk.setAttribute("type","text/css"),document.head.appendChild(pk)),pk.sheet&&(pk.sheet.insertRule(`@media ${t} {body{ }}`,0),TSt.add(t))}catch(n){console.error(n)}}function AMr(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var kSt=(()=>{let r=class r{constructor(o,i){this._mediaMatcher=o,this._zone=i,this._queries=new Map,this._destroySubject=new no}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return ASt(QR(o)).some(s=>this._registerQuery(s).mql.matches)}observe(o){let s=ASt(QR(o)).map(l=>this._registerQuery(l).observable),a=fM(s);return a=pz(a.pipe(Dc(1)),a.pipe(mz(1),pM(0))),a.pipe(dn(l=>{let u={matches:!1,breakpoints:{}};return l.forEach(({matches:c,query:f})=>{u.matches=u.matches||c,u.breakpoints[f]=c}),u}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let i=this._mediaMatcher.matchMedia(o),a={observable:new vk(l=>{let u=c=>this._zone.run(()=>l.next(c));return i.addListener(u),()=>{i.removeListener(u)}}).pipe(y1(i),dn(({matches:l})=>({query:o,matches:l})),Cs(this._destroySubject)),mql:i};return this._queries.set(o,a),a}};r.\u0275fac=function(i){return new(i||r)(kt(EMr),kt(kn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function ASt(t){return t.map(r=>r.split(",")).reduce((r,n)=>r.concat(n)).map(r=>r.trim())}var tTe=(()=>{let r=class r{constructor(o){this._platform=o}isDisabled(o){return o.hasAttribute("disabled")}isVisible(o){return IMr(o)&&getComputedStyle(o).visibility==="visible"}isTabbable(o){if(!this._platform.isBrowser)return!1;let i=kMr(jMr(o));if(i&&(ISt(i)===-1||!this.isVisible(i)))return!1;let s=o.nodeName.toLowerCase(),a=ISt(o);return o.hasAttribute("contenteditable")?a!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!MMr(o)?!1:s==="audio"?o.hasAttribute("controls")?a!==-1:!1:s==="video"?a===-1?!1:a!==null?!0:this._platform.FIREFOX||o.hasAttribute("controls"):o.tabIndex>=0}isFocusable(o,i){return PMr(o)&&!this.isDisabled(o)&&(i?.ignoreVisibility||this.isVisible(o))}};r.\u0275fac=function(i){return new(i||r)(kt(Qi))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function kMr(t){try{return t.frameElement}catch{return null}}function IMr(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function DMr(t){let r=t.nodeName.toLowerCase();return r==="input"||r==="select"||r==="button"||r==="textarea"}function NMr(t){return FMr(t)&&t.type=="hidden"}function OMr(t){return RMr(t)&&t.hasAttribute("href")}function FMr(t){return t.nodeName.toLowerCase()=="input"}function RMr(t){return t.nodeName.toLowerCase()=="a"}function OSt(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let r=t.getAttribute("tabindex");return!!(r&&!isNaN(parseInt(r,10)))}function ISt(t){if(!OSt(t))return null;let r=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(r)?-1:r}function MMr(t){let r=t.nodeName.toLowerCase(),n=r==="input"&&t.type;return n==="text"||n==="password"||r==="select"||r==="textarea"}function PMr(t){return NMr(t)?!1:DMr(t)||OMr(t)||t.hasAttribute("contenteditable")||OSt(t)}function jMr(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var eTe=class{get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}constructor(r,n,o,i,s=!1,a){this._element=r,this._checker=n,this._ngZone=o,this._document=i,this._injector=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let r=this._startAnchor,n=this._endAnchor;r&&(r.removeEventListener("focus",this.startAnchorListener),r.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(r)))})}focusFirstTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(r)))})}focusLastTabbableElementWhenReady(r){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(r)))})}_getRegionBoundary(r){let n=this._element.querySelectorAll(`[cdk-focus-region-${r}], [cdkFocusRegion${r}], [cdk-focus-${r}]`);return r=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(r){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let o=this._getFirstTabbableElement(n);return o?.focus(r),!!o}return n.focus(r),!0}return this.focusFirstTabbableElement(r)}focusFirstTabbableElement(r){let n=this._getRegionBoundary("start");return n&&n.focus(r),!!n}focusLastTabbableElement(r){let n=this._getRegionBoundary("end");return n&&n.focus(r),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=0;o<n.length;o++){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[o]):null;if(i)return i}return null}_getLastTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let n=r.children;for(let o=n.length-1;o>=0;o--){let i=n[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[o]):null;if(i)return i}return null}_createAnchor(){let r=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,r),r.classList.add("cdk-visually-hidden"),r.classList.add("cdk-focus-trap-anchor"),r.setAttribute("aria-hidden","true"),r}_toggleAnchorTabIndex(r,n){r?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(r){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_executeOnStable(r){this._ngZone.isStable?this._injector?hb(r,{injector:this._injector}):r():this._ngZone.onStable.pipe(Dc(1)).subscribe(r)}},FSt=(()=>{let r=class r{constructor(o,i,s){this._checker=o,this._ngZone=i,this._injector=ar($f),this._document=s}create(o,i=!1){return new eTe(o,this._checker,this._ngZone,this._document,i,this._injector)}};r.\u0275fac=function(i){return new(i||r)(kt(tTe),kt(kn),kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function rTe(t){return t.buttons===0||t.detail===0}function nTe(t){let r=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!r&&r.identifier===-1&&(r.radiusX==null||r.radiusX===1)&&(r.radiusY==null||r.radiusY===1)}var LMr=new jn("cdk-input-modality-detector-options"),BMr={ignoreKeys:[18,17,224,91,16]},RSt=650,JR=KR({passive:!0,capture:!0}),$Mr=(()=>{let r=class r{get mostRecentModality(){return this._modality.value}constructor(o,i,s,a){this._platform=o,this._mostRecentTarget=null,this._modality=new Pa(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(u=>u===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=oh(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<RSt||(this._modality.next(rTe(l)?"keyboard":"mouse"),this._mostRecentTarget=oh(l))},this._onTouchstart=l=>{if(nTe(l)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=oh(l)},this._options=Kt(Kt({},BMr),a),this.modalityDetected=this._modality.pipe(mz(1)),this.modalityChanged=this.modalityDetected.pipe(cb()),o.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,JR),s.addEventListener("mousedown",this._onMousedown,JR),s.addEventListener("touchstart",this._onTouchstart,JR)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,JR),document.removeEventListener("mousedown",this._onMousedown,JR),document.removeEventListener("touchstart",this._onTouchstart,JR))}};r.\u0275fac=function(i){return new(i||r)(kt(Qi),kt(kn),kt(xn),kt(LMr,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var gre=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(gre||{}),zMr=new jn("cdk-focus-monitor-default-options"),mre=KR({passive:!0,capture:!0}),yre=(()=>{let r=class r{constructor(o,i,s,a,l){this._ngZone=o,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new no,this._rootNodeFocusAndBlurListener=u=>{let c=oh(u);for(let f=c;f;f=f.parentElement)u.type==="focus"?this._onFocus(u,f):this._onBlur(u,f)},this._document=a,this._detectionMode=l?.detectionMode||gre.IMMEDIATE}monitor(o,i=!1){let s=a1(o);if(!this._platform.isBrowser||s.nodeType!==1)return Pr();let a=SSt(s)||this._getDocument(),l=this._elementInfo.get(s);if(l)return i&&(l.checkChildren=!0),l.subject;let u={checkChildren:i,subject:new no,rootNode:a};return this._elementInfo.set(s,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(o){let i=a1(o),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(o,i,s){let a=a1(o),l=this._getDocument().activeElement;a===l?this._getClosestElementsInfo(a).forEach(([u,c])=>this._originChanged(u,i,c)):(this._setOrigin(i),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((o,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(o){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(o)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:o&&this._isLastInteractionFromInputLabel(o)?"mouse":"program"}_shouldBeAttributedToTouch(o){return this._detectionMode===gre.EVENTUAL||!!o?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(o,i){o.classList.toggle("cdk-focused",!!i),o.classList.toggle("cdk-touch-focused",i==="touch"),o.classList.toggle("cdk-keyboard-focused",i==="keyboard"),o.classList.toggle("cdk-mouse-focused",i==="mouse"),o.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(o,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=o,this._originFromTouchInteraction=o==="touch"&&i,this._detectionMode===gre.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?RSt:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(o,i){let s=this._elementInfo.get(i),a=oh(o);!s||!s.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),s)}_onBlur(o,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&o.relatedTarget instanceof Node&&i.contains(o.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(o,i){o.subject.observers.length&&this._ngZone.run(()=>o.subject.next(i))}_registerGlobalListeners(o){if(!this._platform.isBrowser)return;let i=o.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,mre),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,mre)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Cs(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(o){let i=o.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mre),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mre),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(o,i,s){this._setClasses(o,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(o){let i=[];return this._elementInfo.forEach((s,a)=>{(a===o||s.checkChildren&&a.contains(o))&&i.push([a,s])}),i}_isLastInteractionFromInputLabel(o){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===o||o.nodeName!=="INPUT"&&o.nodeName!=="TEXTAREA"||o.disabled)return!1;let a=o.labels;if(a){for(let l=0;l<a.length;l++)if(a[l].contains(i))return!0}return!1}};r.\u0275fac=function(i){return new(i||r)(kt(kn),kt(Qi),kt($Mr),kt(xn,8),kt(zMr,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var hk=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(hk||{}),DSt="cdk-high-contrast-black-on-white",NSt="cdk-high-contrast-white-on-black",JEe="cdk-high-contrast-active",MSt=(()=>{let r=class r{constructor(o,i){this._platform=o,this._document=i,this._breakpointSubscription=ar(kSt).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return hk.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(o):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(o.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return hk.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return hk.BLACK_ON_WHITE}return hk.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(JEe,DSt,NSt),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===hk.BLACK_ON_WHITE?o.add(JEe,DSt):i===hk.WHITE_ON_BLACK&&o.add(JEe,NSt)}}};r.\u0275fac=function(i){return new(i||r)(kt(Qi),kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var UMr=new jn("cdk-dir-doc",{providedIn:"root",factory:VMr});function VMr(){return ar(xn)}var GMr=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function WMr(t){let r=t?.toLowerCase()||"";return r==="auto"&&typeof navigator<"u"&&navigator?.language?GMr.test(navigator.language)?"rtl":"ltr":r==="rtl"?"rtl":"ltr"}var eM=(()=>{let r=class r{constructor(o){if(this.value="ltr",this.change=new ha,o){let i=o.body?o.body.dir:null,s=o.documentElement?o.documentElement.dir:null;this.value=WMr(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}};r.\u0275fac=function(i){return new(i||r)(kt(UMr,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var q2=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({});let t=r;return t})();function HMr(){return!0}var YMr=new jn("mat-sanity-checks",{providedIn:"root",factory:HMr}),ws=(()=>{let r=class r{constructor(o,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return J6()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};r.\u0275fac=function(i){return new(i||r)(kt(MSt),kt(YMr,8),kt(xn))},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[q2,q2]});let t=r;return t})();var ih=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(ih||{}),aTe=class{constructor(r,n,o,i=!1){this._renderer=r,this.element=n,this.config=o,this._animationForciblyDisabledThroughCss=i,this.state=ih.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},jSt=KR({passive:!0,capture:!0}),lTe=class{constructor(){this._events=new Map,this._delegateEventHandler=r=>{let n=oh(r);n&&this._events.get(r.type)?.forEach((o,i)=>{(i===n||i.contains(n))&&o.forEach(s=>s.handleEvent(r))})}}addHandler(r,n,o,i){let s=this._events.get(n);if(s){let a=s.get(o);a?a.add(i):s.set(o,new Set([i]))}else this._events.set(n,new Map([[o,new Set([i])]])),r.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,jSt)})}removeHandler(r,n,o){let i=this._events.get(r);if(!i)return;let s=i.get(n);s&&(s.delete(o),s.size===0&&i.delete(n),i.size===0&&(this._events.delete(r),document.removeEventListener(r,this._delegateEventHandler,jSt)))}},LSt={enterDuration:225,exitDuration:150},XMr=800,BSt=KR({passive:!0,capture:!0}),$St=["mousedown","touchstart"],zSt=["mouseup","mouseleave","touchend","touchcancel"],ez=class ez{constructor(r,n,o,i){this._target=r,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=a1(o))}fadeInRipple(r,n,o={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Kt(Kt({},LSt),o.animation);o.centered&&(r=i.left+i.width/2,n=i.top+i.height/2);let a=o.radius||KMr(r,n,i),l=r-i.left,u=n-i.top,c=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${l-a}px`,f.style.top=`${u-a}px`,f.style.height=`${a*2}px`,f.style.width=`${a*2}px`,o.color!=null&&(f.style.backgroundColor=o.color),f.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(f);let d=window.getComputedStyle(f),p=d.transitionProperty,h=d.transitionDuration,m=p==="none"||h==="0s"||h==="0s, 0s"||i.width===0&&i.height===0,g=new aTe(this,f,o,m);f.style.transform="scale3d(1, 1, 1)",g.state=ih.FADING_IN,o.persistent||(this._mostRecentTransientRipple=g);let y=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>this._finishRippleTransition(g),x=()=>this._destroyRipple(g);f.addEventListener("transitionend",b),f.addEventListener("transitioncancel",x),y={onTransitionEnd:b,onTransitionCancel:x}}),this._activeRipples.set(g,y),(m||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(r){if(r.state===ih.FADING_OUT||r.state===ih.HIDDEN)return;let n=r.element,o=Kt(Kt({},LSt),r.config.animation);n.style.transitionDuration=`${o.exitDuration}ms`,n.style.opacity="0",r.state=ih.FADING_OUT,(r._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(r)}fadeOutAll(){this._getActiveRipples().forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){let n=a1(r);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,$St.forEach(o=>{ez._eventManager.addHandler(this._ngZone,o,n,this)}))}handleEvent(r){r.type==="mousedown"?this._onMousedown(r):r.type==="touchstart"?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{zSt.forEach(n=>{this._triggerElement.addEventListener(n,this,BSt)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(r){r.state===ih.FADING_IN?this._startFadeOutTransition(r):r.state===ih.FADING_OUT&&this._destroyRipple(r)}_startFadeOutTransition(r){let n=r===this._mostRecentTransientRipple,{persistent:o}=r.config;r.state=ih.VISIBLE,!o&&(!n||!this._isPointerDown)&&r.fadeOut()}_destroyRipple(r){let n=this._activeRipples.get(r)??null;this._activeRipples.delete(r),this._activeRipples.size||(this._containerRect=null),r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),r.state=ih.HIDDEN,n!==null&&(r.element.removeEventListener("transitionend",n.onTransitionEnd),r.element.removeEventListener("transitioncancel",n.onTransitionCancel)),r.element.remove()}_onMousedown(r){let n=rTe(r),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+XMr;!this._target.rippleDisabled&&!n&&!o&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!nTe(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=r.changedTouches;if(n)for(let o=0;o<n.length;o++)this.fadeInRipple(n[o].clientX,n[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(r=>{let n=r.state===ih.VISIBLE||r.config.terminateOnPointerUp&&r.state===ih.FADING_IN;!r.config.persistent&&n&&r.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let r=this._triggerElement;r&&($St.forEach(n=>ez._eventManager.removeHandler(n,r,this)),this._pointerUpEventsRegistered&&(zSt.forEach(n=>r.removeEventListener(n,this,BSt)),this._pointerUpEventsRegistered=!1))}};ez._eventManager=new lTe;var uTe=ez;function KMr(t,r,n){let o=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom));return Math.sqrt(o*o+i*i)}var qSt=new jn("mat-ripple-global-options"),HSt=(()=>{let r=class r{get disabled(){return this._disabled}set disabled(o){o&&this.fadeOutAllNonPersistent(),this._disabled=o,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(o){this._trigger=o,this._setupTriggerEventsIfEnabled()}constructor(o,i,s,a,l){this._elementRef=o,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new uTe(this,i,o,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Kt(Kt(Kt({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(o,i=0,s){return typeof o=="number"?this._rippleRenderer.fadeInRipple(o,i,Kt(Kt({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Kt(Kt({},this.rippleConfig),o))}};r.\u0275fac=function(i){return new(i||r)(Ur(ei),Ur(kn),Ur(Qi),Ur(qSt,8),Ur(uh,8))},r.\u0275dir=Kl({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){i&2&&Nc("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=r;return t})(),tz=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[ws,ws]});let t=r;return t})();var ZMr=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[ws]});let t=r;return t})();var cTe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[tz,ws,ZMr]});let t=r;return t})(),USt={capture:!0},VSt=["focus","mousedown","mouseenter","touchstart"],iTe="mat-ripple-loader-uninitialized",sTe="mat-ripple-loader-class-name",GSt="mat-ripple-loader-centered",bre="mat-ripple-loader-disabled",YSt=(()=>{let r=class r{constructor(){this._document=ar(xn,{optional:!0}),this._animationMode=ar(uh,{optional:!0}),this._globalRippleOptions=ar(qSt,{optional:!0}),this._platform=ar(Qi),this._ngZone=ar(kn),this._hosts=new Map,this._onInteraction=o=>{let i=oh(o);if(i instanceof HTMLElement){let s=i.closest(`[${iTe}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(let o of VSt)this._document?.addEventListener(o,this._onInteraction,USt)})}ngOnDestroy(){let o=this._hosts.keys();for(let i of o)this.destroyRipple(i);for(let i of VSt)this._document?.removeEventListener(i,this._onInteraction,USt)}configureRipple(o,i){o.setAttribute(iTe,this._globalRippleOptions?.namespace??""),(i.className||!o.hasAttribute(sTe))&&o.setAttribute(sTe,i.className||""),i.centered&&o.setAttribute(GSt,""),i.disabled&&o.setAttribute(bre,"")}getRipple(o){return this._hosts.get(o)||this._createRipple(o)}setDisabled(o,i){let s=this._hosts.get(o);if(s){s.disabled=i;return}i?o.setAttribute(bre,""):o.removeAttribute(bre)}_createRipple(o){if(!this._document)return;let i=this._hosts.get(o);if(i)return i;o.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",o.getAttribute(sTe)),o.append(s);let a=new HSt(new ei(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=o,a.centered=o.hasAttribute(GSt),a.disabled=o.hasAttribute(bre),this.attachRipple(o,a),a}attachRipple(o,i){o.removeAttribute(iTe),this._hosts.set(o,i)}destroyRipple(o){let i=this._hosts.get(o);i&&(i.ngOnDestroy(),this._hosts.delete(o))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var JMr=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var e3r=["mat-icon-button",""],t3r=["*"];var r3r=new jn("MAT_BUTTON_CONFIG");var n3r=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],o3r=(()=>{let r=class r{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(o){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,o)}get disableRipple(){return this._disableRipple}set disableRipple(o){this._disableRipple=o,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(o){this._disabled=o,this._updateRippleDisabled()}constructor(o,i,s,a){this._elementRef=o,this._platform=i,this._ngZone=s,this._animationMode=a,this._focusMonitor=ar(yre),this._rippleLoader=ar(YSt),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let l=ar(r3r,{optional:!0}),u=o.nativeElement,c=u.classList;this.disabledInteractive=l?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:d}of n3r)u.hasAttribute(f)&&c.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(o="program",i){o?this._focusMonitor.focusVia(this._elementRef.nativeElement,o,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};r.\u0275fac=function(i){_M()},r.\u0275dir=Kl({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Vf],disabled:[2,"disabled","disabled",Vf],ariaDisabled:[2,"aria-disabled","ariaDisabled",Vf],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Vf]},features:[Gd]});let t=r;return t})();var XSt=(()=>{let r=class r extends o3r{constructor(o,i,s,a){super(o,i,s,a),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};r.\u0275fac=function(i){return new(i||r)(Ur(ei),Ur(Qi),Ur(kn),Ur(uh,8))},r.\u0275cmp=Es({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,s){i&2&&(Wd("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),SM(s.color?"mat-"+s.color:""),Nc("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ek,Ts],attrs:e3r,ngContentSelectors:t3r,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){i&1&&(Uf(),Zl(0,"span",0),Bu(1),Zl(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',JMr],encapsulation:2,changeDetection:0});let t=r;return t})();var KSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[ws,tz,ws]});let t=r;return t})();var s3r=20,rz=(()=>{let r=class r{constructor(o,i,s){this._ngZone=o,this._platform=i,this._scrolled=new no,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(o){this.scrollContainers.has(o)||this.scrollContainers.set(o,o.elementScrolled().subscribe(()=>this._scrolled.next(o)))}deregister(o){let i=this.scrollContainers.get(o);i&&(i.unsubscribe(),this.scrollContainers.delete(o))}scrolled(o=s3r){return this._platform.isBrowser?new vk(i=>{this._globalSubscription||this._addGlobalListener();let s=o>0?this._scrolled.pipe($re(o)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Pr()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((o,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(o,i){let s=this.getAncestorScrollContainers(o);return this.scrolled(i).pipe(Vs(a=>!a||s.indexOf(a)>-1))}getAncestorScrollContainers(o){let i=[];return this.scrollContainers.forEach((s,a)=>{this._scrollableContainsElement(a,o)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(o,i){let s=a1(i),a=o.getElementRef().nativeElement;do if(s==a)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let o=this._getWindow();return dM(o.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};r.\u0275fac=function(i){return new(i||r)(kt(kn),kt(Qi),kt(xn,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),vre=(()=>{let r=class r{constructor(o,i,s,a){this.elementRef=o,this.scrollDispatcher=i,this.ngZone=s,this.dir=a,this._destroyed=new no,this._elementScrolled=new vk(l=>this.ngZone.runOutsideAngular(()=>dM(this.elementRef.nativeElement,"scroll").pipe(Cs(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(o){let i=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";o.left==null&&(o.left=s?o.end:o.start),o.right==null&&(o.right=s?o.start:o.end),o.bottom!=null&&(o.top=i.scrollHeight-i.clientHeight-o.bottom),s&&ZR()!=og.NORMAL?(o.left!=null&&(o.right=i.scrollWidth-i.clientWidth-o.left),ZR()==og.INVERTED?o.left=o.right:ZR()==og.NEGATED&&(o.left=o.right?-o.right:o.right)):o.right!=null&&(o.left=i.scrollWidth-i.clientWidth-o.right),this._applyScrollToOptions(o)}_applyScrollToOptions(o){let i=this.elementRef.nativeElement;hre()?i.scrollTo(o):(o.top!=null&&(i.scrollTop=o.top),o.left!=null&&(i.scrollLeft=o.left))}measureScrollOffset(o){let i="left",s="right",a=this.elementRef.nativeElement;if(o=="top")return a.scrollTop;if(o=="bottom")return a.scrollHeight-a.clientHeight-a.scrollTop;let l=this.dir&&this.dir.value=="rtl";return o=="start"?o=l?s:i:o=="end"&&(o=l?i:s),l&&ZR()==og.INVERTED?o==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:l&&ZR()==og.NEGATED?o==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:o==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}};r.\u0275fac=function(i){return new(i||r)(Ur(ei),Ur(rz),Ur(kn),Ur(eM,8))},r.\u0275dir=Kl({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let t=r;return t})(),a3r=20,nz=(()=>{let r=class r{constructor(o,i,s){this._platform=o,this._change=new no,this._changeListener=a=>{this._change.next(a)},this._document=s,i.runOutsideAngular(()=>{if(o.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let o=this._getWindow();o.removeEventListener("resize",this._changeListener),o.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let o={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),o}getViewportRect(){let o=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:o.top,left:o.left,bottom:o.top+s,right:o.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let o=this._document,i=this._getWindow(),s=o.documentElement,a=s.getBoundingClientRect(),l=-a.top||o.body.scrollTop||i.scrollY||s.scrollTop||0,u=-a.left||o.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:l,left:u}}change(o=a3r){return o>0?this._change.pipe($re(o)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let o=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:o.innerWidth,height:o.innerHeight}:{width:0,height:0}}};r.\u0275fac=function(i){return new(i||r)(kt(Qi),kt(kn),kt(xn,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var l1=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({});let t=r;return t})(),fTe=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[q2,l1,q2,l1]});let t=r;return t})();var oz=class{attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;r!=null&&(this._attachedHost=null,r.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},dTe=class extends oz{constructor(r,n,o,i,s){super(),this.component=r,this.viewContainerRef=n,this.injector=o,this.componentFactoryResolver=i,this.projectableNodes=s}},wre=class extends oz{constructor(r,n,o,i){super(),this.templateRef=r,this.viewContainerRef=n,this.context=o,this.injector=i}get origin(){return this.templateRef.elementRef}attach(r,n=this.context){return this.context=n,super.attach(r)}detach(){return this.context=void 0,super.detach()}},pTe=class extends oz{constructor(r){super(),this.element=r instanceof ei?r.nativeElement:r}},hTe=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(r){if(r instanceof dTe)return this._attachedPortal=r,this.attachComponentPortal(r);if(r instanceof wre)return this._attachedPortal=r,this.attachTemplatePortal(r);if(this.attachDomPortal&&r instanceof pTe)return this._attachedPortal=r,this.attachDomPortal(r)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var _re=class extends hTe{constructor(r,n,o,i,s){super(),this.outletElement=r,this._componentFactoryResolver=n,this._appRef=o,this._defaultInjector=i,this.attachDomPortal=a=>{this._document;let l=a.element;l.parentNode;let u=this._document.createComment("dom-portal");l.parentNode.insertBefore(u,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(l,u)})},this._document=s}attachComponentPortal(r){let o=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component),i;return r.viewContainerRef?(i=r.viewContainerRef.createComponent(o,r.viewContainerRef.length,r.injector||r.viewContainerRef.injector,r.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=o.create(r.injector||this._defaultInjector||$f.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=r,i}attachTemplatePortal(r){let n=r.viewContainerRef,o=n.createEmbeddedView(r.templateRef,r.context,{injector:r.injector});return o.rootNodes.forEach(i=>this.outletElement.appendChild(i)),o.detectChanges(),this.setDisposeFn(()=>{let i=n.indexOf(o);i!==-1&&n.remove(i)}),this._attachedPortal=r,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(r){return r.hostView.rootNodes[0]}};var QSt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({});let t=r;return t})();var JSt=hre(),mTe=class{constructor(r,n){this._viewportRuler=r,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=Bs(-this._previousScrollPosition.left),r.style.top=Bs(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let r=this._document.documentElement,n=this._document.body,o=r.style,i=n.style,s=o.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),JSt&&(o.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),JSt&&(o.scrollBehavior=s,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,o=this._viewportRuler.getViewportSize();return n.scrollHeight>o.height||n.scrollWidth>o.width}};var gTe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._ngZone=n,this._viewportRuler=o,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(this._scrollSubscription)return;let r=this._scrollDispatcher.scrolled(0).pipe(Vs(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Sre=class{enable(){}disable(){}attach(){}};function yTe(t,r){return r.some(n=>{let o=t.bottom<n.top,i=t.top>n.bottom,s=t.right<n.left,a=t.left>n.right;return o||i||s||a})}function eCt(t,r){return r.some(n=>{let o=t.top<n.top,i=t.bottom>n.bottom,s=t.left<n.left,a=t.right>n.right;return o||i||s||a})}var bTe=class{constructor(r,n,o,i){this._scrollDispatcher=r,this._viewportRuler=n,this._ngZone=o,this._config=i,this._scrollSubscription=null}attach(r){this._overlayRef,this._overlayRef=r}enable(){if(!this._scrollSubscription){let r=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(r).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:i}=this._viewportRuler.getViewportSize();yTe(n,[{width:o,height:i,bottom:i,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},l3r=(()=>{let r=class r{constructor(o,i,s,a){this._scrollDispatcher=o,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new Sre,this.close=l=>new gTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new mTe(this._viewportRuler,this._document),this.reposition=l=>new bTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=a}};r.\u0275fac=function(i){return new(i||r)(kt(rz),kt(nz),kt(kn),kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),Cre=class{constructor(r){if(this.scrollStrategy=new Sre,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,r){let n=Object.keys(r);for(let o of n)r[o]!==void 0&&(this[o]=r[o])}}};var xTe=class{constructor(r,n){this.connectionPair=r,this.scrollableViewProperties=n}};var iCt=(()=>{let r=class r{constructor(o){this._attachedOverlays=[],this._document=o}ngOnDestroy(){this.detach()}add(o){this.remove(o),this._attachedOverlays.push(o)}remove(o){let i=this._attachedOverlays.indexOf(o);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}};r.\u0275fac=function(i){return new(i||r)(kt(xn))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),u3r=(()=>{let r=class r extends iCt{constructor(o,i){super(o),this._ngZone=i,this._keydownListener=s=>{let a=this._attachedOverlays;for(let l=a.length-1;l>-1;l--)if(a[l]._keydownEvents.observers.length>0){let u=a[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s);break}}}add(o){super.add(o),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};r.\u0275fac=function(i){return new(i||r)(kt(xn),kt(kn,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),c3r=(()=>{let r=class r extends iCt{constructor(o,i,s){super(o),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=oh(a)},this._clickListener=a=>{let l=oh(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let f=c.length-1;f>-1;f--){let d=c[f];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(l)||d.overlayElement.contains(u))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(a)):p.next(a)}}}add(o){if(super.add(o),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let o=this._document.body;o.removeEventListener("pointerdown",this._pointerDownListener,!0),o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(o){o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0)}};r.\u0275fac=function(i){return new(i||r)(kt(xn),kt(Qi),kt(kn,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),sCt=(()=>{let r=class r{constructor(o,i){this._platform=i,this._document=o}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let o="cdk-overlay-container";if(this._platform.isBrowser||J6()){let s=this._document.querySelectorAll(`.${o}[platform="server"], .${o}[platform="test"]`);for(let a=0;a<s.length;a++)s[a].remove()}let i=this._document.createElement("div");i.classList.add(o),J6()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}};r.\u0275fac=function(i){return new(i||r)(kt(xn),kt(Qi))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),vTe=class{constructor(r,n,o,i,s,a,l,u,c,f=!1,d){this._portalOutlet=r,this._host=n,this._pane=o,this._config=i,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=u,this._outsideClickDispatcher=c,this._animationsDisabled=f,this._injector=d,this._backdropElement=null,this._backdropClick=new no,this._attachments=new no,this._detachments=new no,this._locationChanges=ub.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new no,this._outsidePointerEvents=new no,this._renders=new no,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=$Ae(()=>DAe(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(r){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(r);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),hb(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let r=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){let r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,r&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=Kt(Kt({},this._config),r),this._updateElementSize()}setDirection(r){this._config=Ss(Kt({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){let r=this._config.direction;return r?typeof r=="string"?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let r=this._pane.style;r.width=Bs(this._config.width),r.height=Bs(this._config.height),r.minWidth=Bs(this._config.minWidth),r.minHeight=Bs(this._config.minHeight),r.maxWidth=Bs(this._config.maxWidth),r.maxHeight=Bs(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){let r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let r=this._backdropElement;if(r){if(this._animationsDisabled){this._disposeBackdrop(r);return}r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{r.addEventListener("transitionend",this._backdropTransitionendHandler)}),r.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(r)},500))}}_toggleClasses(r,n,o){let i=QR(n||[]).filter(s=>!!s);i.length&&(o?r.classList.add(...i):r.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let r=this._renders.pipe(Cs(hz(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),r.unsubscribe())})})}_disposeScrollStrategy(){let r=this._scrollStrategy;r&&(r.disable(),r.detach&&r.detach())}_disposeBackdrop(r){r&&(r.removeEventListener("click",this._backdropClickHandler),r.removeEventListener("transitionend",this._backdropTransitionendHandler),r.remove(),this._backdropElement===r&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},tCt="cdk-overlay-connected-position-bounding-box",f3r=/([A-Za-z%]+)$/,wTe=class{get positions(){return this._preferredPositions}constructor(r,n,o,i,s){this._viewportRuler=n,this._document=o,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new no,this._resizeSubscription=ub.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(r)}attach(r){this._overlayRef&&this._overlayRef,this._validatePositions(),r.hostElement.classList.add(tCt),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let r=this._originRect,n=this._overlayRect,o=this._viewportRect,i=this._containerRect,s=[],a;for(let l of this._preferredPositions){let u=this._getOriginPoint(r,i,l),c=this._getOverlayPoint(u,n,l),f=this._getOverlayFit(c,n,o,l);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,u);return}if(this._canFitWithFlexibleDimensions(f,c,o)){s.push({position:l,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,l)});continue}(!a||a.overlayFit.visibleArea<f.visibleArea)&&(a={overlayFit:f,overlayPoint:c,originPoint:u,position:l,overlayRect:n})}if(s.length){let l=null,u=-1;for(let c of s){let f=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);f>u&&(u=f,l=c)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&mk(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(tCt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let r=this._lastPosition;if(r){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,r);this._applyPosition(r,n)}else this.apply()}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,r.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,n,o){let i;if(o.originX=="center")i=r.left+r.width/2;else{let a=this._isRtl()?r.right:r.left,l=this._isRtl()?r.left:r.right;i=o.originX=="start"?a:l}n.left<0&&(i-=n.left);let s;return o.originY=="center"?s=r.top+r.height/2:s=o.originY=="top"?r.top:r.bottom,n.top<0&&(s-=n.top),{x:i,y:s}}_getOverlayPoint(r,n,o){let i;o.overlayX=="center"?i=-n.width/2:o.overlayX==="start"?i=this._isRtl()?-n.width:0:i=this._isRtl()?0:-n.width;let s;return o.overlayY=="center"?s=-n.height/2:s=o.overlayY=="top"?0:-n.height,{x:r.x+i,y:r.y+s}}_getOverlayFit(r,n,o,i){let s=nCt(n),{x:a,y:l}=r,u=this._getOffset(i,"x"),c=this._getOffset(i,"y");u&&(a+=u),c&&(l+=c);let f=0-a,d=a+s.width-o.width,p=0-l,h=l+s.height-o.height,m=this._subtractOverflows(s.width,f,d),g=this._subtractOverflows(s.height,p,h),y=m*g;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(r,n,o){if(this._hasFlexibleDimensions){let i=o.bottom-n.y,s=o.right-n.x,a=rCt(this._overlayRef.getConfig().minHeight),l=rCt(this._overlayRef.getConfig().minWidth),u=r.fitsInViewportVertically||a!=null&&a<=i,c=r.fitsInViewportHorizontally||l!=null&&l<=s;return u&&c}return!1}_pushOverlayOnScreen(r,n,o){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};let i=nCt(n),s=this._viewportRect,a=Math.max(r.x+i.width-s.width,0),l=Math.max(r.y+i.height-s.height,0),u=Math.max(s.top-o.top-r.y,0),c=Math.max(s.left-o.left-r.x,0),f=0,d=0;return i.width<=s.width?f=c||-a:f=r.x<this._viewportMargin?s.left-o.left-r.x:0,i.height<=s.height?d=u||-l:d=r.y<this._viewportMargin?s.top-o.top-r.y:0,this._previousPushAmount={x:f,y:d},{x:r.x+f,y:r.y+d}}_applyPosition(r,n){if(this._setTransformOrigin(r),this._setOverlayElementStyles(n,r),this._setBoundingBoxStyles(n,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(r!==this._lastPosition||!this._lastScrollVisibility||!d3r(this._lastScrollVisibility,o)){let i=new xTe(r,o);this._positionChanges.next(i)}this._lastScrollVisibility=o}this._lastPosition=r,this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,i=r.overlayY;r.overlayX==="center"?o="center":this._isRtl()?o=r.overlayX==="start"?"right":"left":o=r.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${o} ${i}`}_calculateBoundingBoxRect(r,n){let o=this._viewportRect,i=this._isRtl(),s,a,l;if(n.overlayY==="top")a=r.y,s=o.height-a+this._viewportMargin;else if(n.overlayY==="bottom")l=o.height-r.y+this._viewportMargin*2,s=o.height-l+this._viewportMargin;else{let h=Math.min(o.bottom-r.y+o.top,r.y),m=this._lastBoundingBoxSize.height;s=h*2,a=r.y-h,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(a=r.y-m/2)}let u=n.overlayX==="start"&&!i||n.overlayX==="end"&&i,c=n.overlayX==="end"&&!i||n.overlayX==="start"&&i,f,d,p;if(c)p=o.width-r.x+this._viewportMargin*2,f=r.x-this._viewportMargin;else if(u)d=r.x,f=o.right-r.x;else{let h=Math.min(o.right-r.x+o.left,r.x),m=this._lastBoundingBoxSize.width;f=h*2,d=r.x-h,f>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=r.x-m/2)}return{top:a,left:d,bottom:l,right:p,width:f,height:s}}_setBoundingBoxStyles(r,n){let o=this._calculateBoundingBoxRect(r,n);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Bs(o.height),i.top=Bs(o.top),i.bottom=Bs(o.bottom),i.width=Bs(o.width),i.left=Bs(o.left),i.right=Bs(o.right),n.overlayX==="center"?i.alignItems="center":i.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?i.justifyContent="center":i.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(i.maxHeight=Bs(s)),a&&(i.maxWidth=Bs(a))}this._lastBoundingBoxSize=o,mk(this._boundingBox.style,i)}_resetBoundingBoxStyles(){mk(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){mk(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,n){let o={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){let f=this._viewportRuler.getViewportScrollPosition();mk(o,this._getExactOverlayY(n,r,f)),mk(o,this._getExactOverlayX(n,r,f))}else o.position="static";let l="",u=this._getOffset(n,"x"),c=this._getOffset(n,"y");u&&(l+=`translateX(${u}px) `),c&&(l+=`translateY(${c}px)`),o.transform=l.trim(),a.maxHeight&&(i?o.maxHeight=Bs(a.maxHeight):s&&(o.maxHeight="")),a.maxWidth&&(i?o.maxWidth=Bs(a.maxWidth):s&&(o.maxWidth="")),mk(this._pane.style,o)}_getExactOverlayY(r,n,o){let i={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,r);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o)),r.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;i.bottom=`${a-(s.y+this._overlayRect.height)}px`}else i.top=Bs(s.y);return i}_getExactOverlayX(r,n,o){let i={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,r);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,o));let a;if(this._isRtl()?a=r.overlayX==="end"?"left":"right":a=r.overlayX==="end"?"right":"left",a==="right"){let l=this._document.documentElement.clientWidth;i.right=`${l-(s.x+this._overlayRect.width)}px`}else i.left=Bs(s.x);return i}_getScrollVisibility(){let r=this._getOriginRect(),n=this._pane.getBoundingClientRect(),o=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:eCt(r,o),isOriginOutsideView:yTe(r,o),isOverlayClipped:eCt(n,o),isOverlayOutsideView:yTe(n,o)}}_subtractOverflows(r,...n){return n.reduce((o,i)=>o-Math.max(i,0),r)}_getNarrowedViewportRect(){let r=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+r-this._viewportMargin,bottom:o.top+n-this._viewportMargin,width:r-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,n){return n==="x"?r.offsetX==null?this._offsetX:r.offsetX:r.offsetY==null?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&QR(r).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){let r=this._origin;if(r instanceof ei)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();let n=r.width||0,o=r.height||0;return{top:r.y,bottom:r.y+o,left:r.x,right:r.x+n,height:o,width:n}}};function mk(t,r){for(let n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}function rCt(t){if(typeof t!="number"&&t!=null){let[r,n]=t.split(f3r);return!n||n==="px"?parseFloat(r):null}return t||null}function nCt(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function d3r(t,r){return t===r?!0:t.isOriginClipped===r.isOriginClipped&&t.isOriginOutsideView===r.isOriginOutsideView&&t.isOverlayClipped===r.isOverlayClipped&&t.isOverlayOutsideView===r.isOverlayOutsideView}var oCt="cdk-global-overlay-wrapper",_Te=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(r){let n=r.getConfig();this._overlayRef=r,this._width&&!n.width&&r.updateSize({width:this._width}),this._height&&!n.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(oCt),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._xOffset=r,this._xPosition="left",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._xOffset=r,this._xPosition="right",this}start(r=""){return this._xOffset=r,this._xPosition="start",this}end(r=""){return this._xOffset=r,this._xPosition="end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._xPosition="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:a,maxHeight:l}=o,u=(i==="100%"||i==="100vw")&&(!a||a==="100%"||a==="100vw"),c=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),f=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",m="",g="";u?g="flex-start":f==="center"?(g="center",p?m=d:h=d):p?f==="left"||f==="end"?(g="flex-end",h=d):(f==="right"||f==="start")&&(g="flex-start",m=d):f==="left"||f==="start"?(g="flex-start",h=d):(f==="right"||f==="end")&&(g="flex-end",m=d),r.position=this._cssPosition,r.marginLeft=u?"0":h,r.marginTop=c?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=u?"0":m,n.justifyContent=g,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let r=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,o=n.style;n.classList.remove(oCt),o.justifyContent=o.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}},p3r=(()=>{let r=class r{constructor(o,i,s,a){this._viewportRuler=o,this._document=i,this._platform=s,this._overlayContainer=a}global(){return new _Te}flexibleConnectedTo(o){return new wTe(o,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};r.\u0275fac=function(i){return new(i||r)(kt(nz),kt(xn),kt(Qi),kt(sCt))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})(),h3r=0,u1=(()=>{let r=class r{constructor(o,i,s,a,l,u,c,f,d,p,h,m){this.scrollStrategies=o,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=a,this._keyboardDispatcher=l,this._injector=u,this._ngZone=c,this._document=f,this._directionality=d,this._location=p,this._outsideClickDispatcher=h,this._animationsModuleType=m}create(o){let i=this._createHostElement(),s=this._createPaneElement(i),a=this._createPortalOutlet(s),l=new Cre(o);return l.direction=l.direction||this._directionality.value,new vTe(a,i,s,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(K2))}position(){return this._positionBuilder}_createPaneElement(o){let i=this._document.createElement("div");return i.id=`cdk-overlay-${h3r++}`,i.classList.add("cdk-overlay-pane"),o.appendChild(i),i}_createHostElement(){let o=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalOutlet(o){return this._appRef||(this._appRef=this._injector.get(Ak)),new _re(o,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};r.\u0275fac=function(i){return new(i||r)(kt(l3r),kt(sCt),kt(bz),kt(p3r),kt(u3r),kt($f),kt(kn),kt(xn),kt(eM),kt(kk),kt(c3r),kt(uh,8))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var m3r=new jn("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=ar(u1);return()=>t.scrollStrategies.reposition()}});function g3r(t){return()=>t.scrollStrategies.reposition()}var y3r={provide:m3r,deps:[u1],useFactory:g3r},Ere=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({providers:[u1,y3r],imports:[q2,QSt,fTe,fTe]});let t=r;return t})();var Tre=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[ws,yb,ESt,ws]});let t=r;return t})();var v3r=new jn("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=ar(u1);return()=>t.scrollStrategies.reposition()}});function w3r(t){return()=>t.scrollStrategies.reposition()}var _3r={provide:v3r,deps:[u1],useFactory:w3r};var aCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({providers:[_3r],imports:[yb,Ere,cTe,ws,l1,Tre,cTe,ws]});let t=r;return t})();var lCt=["*"],C3r=["content"],E3r=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],T3r=["mat-drawer","mat-drawer-content","*"];function A3r(t,r){if(t&1){let n=gb();Gs(0,"div",1),ch("click",function(){db(n);let i=cg();return pb(i._onBackdropClicked())}),ma()}if(t&2){let n=cg();Nc("mat-drawer-shown",n._isShowingBackdrop())}}function k3r(t,r){t&1&&(Gs(0,"mat-drawer-content"),Bu(1,2),ma())}var I3r={transformDrawer:CM("transform",[Ik("open, open-instant",bb({transform:"none",visibility:"visible"})),Ik("void",bb({"box-shadow":"none",visibility:"hidden"})),rS("void => open-instant",tS("0ms")),rS("void <=> open, open-instant => void",tS("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var D3r=new jn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:N3r}),uCt=new jn("MAT_DRAWER_CONTAINER");function N3r(){return!1}var iz=(()=>{let r=class r extends vre{constructor(o,i,s,a,l){super(s,a,l),this._changeDetectorRef=o,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}};r.\u0275fac=function(i){return new(i||r)(Ur(Hd),Ur(mAe(()=>CTe)),Ur(ei),Ur(rz),Ur(kn))},r.\u0275cmp=Es({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,s){i&2&&Gre("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},standalone:!0,features:[fg([{provide:vre,useExisting:r}]),Ek,Ts],ngContentSelectors:lCt,decls:1,vars:0,template:function(i,s){i&1&&(Uf(),Bu(0))},encapsulation:2,changeDetection:0});let t=r;return t})(),STe=(()=>{let r=class r{get position(){return this._position}set position(o){o=o==="end"?"end":"start",o!==this._position&&(this._isAttached&&this._updatePositionInParent(o),this._position=o,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(o){this._mode=o,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(o){this._disableClose=dk(o)}get autoFocus(){let o=this._autoFocus;return o??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(o){(o==="true"||o==="false"||o==null)&&(o=dk(o)),this._autoFocus=o}get opened(){return this._opened}set opened(o){this.toggle(dk(o))}constructor(o,i,s,a,l,u,c,f){this._elementRef=o,this._focusTrapFactory=i,this._focusMonitor=s,this._platform=a,this._ngZone=l,this._interactivityChecker=u,this._doc=c,this._container=f,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new no,this._animationEnd=new no,this._animationState="void",this.openedChange=new ha(!0),this._openedStream=this.openedChange.pipe(Vs(d=>d),dn(()=>{})),this.openedStart=this._animationStarted.pipe(Vs(d=>d.fromState!==d.toState&&d.toState.indexOf("open")===0),hM(void 0)),this._closedStream=this.openedChange.pipe(Vs(d=>!d),dn(()=>{})),this.closedStart=this._animationStarted.pipe(Vs(d=>d.fromState!==d.toState&&d.toState==="void"),hM(void 0)),this._destroyed=new no,this.onPositionChanged=new ha,this._modeChanged=new no,this._injector=ar($f),this.openedChange.pipe(Cs(this._destroyed)).subscribe(d=>{d?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{dM(this._elementRef.nativeElement,"keydown").pipe(Vs(d=>d.keyCode===27&&!this.disableClose&&!CSt(d)),Cs(this._destroyed)).subscribe(d=>this._ngZone.run(()=>{this.close(),d.stopPropagation(),d.preventDefault()}))}),this._animationEnd.pipe(cb((d,p)=>d.fromState===p.fromState&&d.toState===p.toState)).subscribe(d=>{let{fromState:p,toState:h}=d;(h.indexOf("open")===0&&p==="void"||h==="void"&&p.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(o,i){this._interactivityChecker.isFocusable(o)||(o.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{o.removeEventListener("blur",s),o.removeEventListener("mousedown",s),o.removeAttribute("tabindex")};o.addEventListener("blur",s),o.addEventListener("mousedown",s)})),o.focus(i)}_focusByCssSelector(o,i){let s=this._elementRef.nativeElement.querySelector(o);s&&this._forceFocus(s,i)}_takeFocus(){if(!this._focusTrap)return;let o=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":hb(()=>{!this._focusTrap.focusInitialElement()&&typeof o.focus=="function"&&o.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(o){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,o):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let o=this._doc.activeElement;return!!o&&this._elementRef.nativeElement.contains(o)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(o){return this.toggle(!0,o)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(o=!this.opened,i){o&&i&&(this._openedVia=i);let s=this._setOpen(o,!o&&this._isFocusWithinDrawer(),this._openedVia||"program");return o||(this._openedVia=null),s}_setOpen(o,i,s){return this._opened=o,o?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(s)),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(Dc(1)).subscribe(l=>a(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop)}_updatePositionInParent(o){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,s=i.parentNode;o==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),s.insertBefore(this._anchor,i)),s.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}};r.\u0275fac=function(i){return new(i||r)(Ur(ei),Ur(FSt),Ur(yre),Ur(Qi),Ur(kn),Ur(tTe),Ur(xn,8),Ur(uCt,8))},r.\u0275cmp=Es({type:r,selectors:[["mat-drawer"]],viewQuery:function(i,s){if(i&1&&qd(C3r,5),i&2){let a;$u(a=zu())&&(s._content=a.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,s){i&1&&MAe("@transform.start",function(l){return s._animationStarted.next(l)})("@transform.done",function(l){return s._animationEnd.next(l)}),i&2&&(RAe("@transform",s._animationState),Wd("align",null),Nc("mat-drawer-end",s.position==="end")("mat-drawer-over",s.mode==="over")("mat-drawer-push",s.mode==="push")("mat-drawer-side",s.mode==="side")("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[Ts],ngContentSelectors:lCt,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,s){i&1&&(Uf(),Gs(0,"div",1,0),Bu(2),ma())},dependencies:[vre],encapsulation:2,data:{animation:[I3r.transformDrawer]},changeDetection:0});let t=r;return t})(),CTe=(()=>{let r=class r{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(o){this._autosize=dk(o)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(o){this._backdropOverride=o==null?null:dk(o)}get scrollable(){return this._userContent||this._content}constructor(o,i,s,a,l,u=!1,c){this._dir=o,this._element=i,this._ngZone=s,this._changeDetectorRef=a,this._animationMode=c,this._drawers=new gz,this.backdropClick=new ha,this._destroyed=new no,this._doCheckSubject=new no,this._contentMargins={left:null,right:null},this._contentMarginChanges=new no,this._injector=ar($f),o&&o.change.pipe(Cs(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(Cs(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=u}ngAfterContentInit(){this._allDrawers.changes.pipe(y1(this._allDrawers),Cs(this._destroyed)).subscribe(o=>{this._drawers.reset(o.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(y1(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(o=>{this._watchDrawerToggle(o),this._watchDrawerPosition(o),this._watchDrawerMode(o)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(pM(10),Cs(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(o=>o.open())}close(){this._drawers.forEach(o=>o.close())}updateContentMargins(){let o=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")o+=this._left._getWidth();else if(this._left.mode=="push"){let s=this._left._getWidth();o+=s,i-=s}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let s=this._right._getWidth();i+=s,o-=s}}o=o||null,i=i||null,(o!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:o,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(o){o._animationStarted.pipe(Vs(i=>i.fromState!==i.toState),Cs(this._drawers.changes)).subscribe(i=>{i.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),o.mode!=="side"&&o.openedChange.pipe(Cs(this._drawers.changes)).subscribe(()=>this._setContainerClass(o.opened))}_watchDrawerPosition(o){o&&o.onPositionChanged.pipe(Cs(this._drawers.changes)).subscribe(()=>{hb(()=>{this._validateDrawers()},{injector:this._injector,phase:IAe.Read})})}_watchDrawerMode(o){o&&o._modeChanged.pipe(Cs(hz(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(o){let i=this._element.nativeElement.classList,s="mat-drawer-container-has-open";o?i.add(s):i.remove(s)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(o=>{o.position=="end"?(this._end!=null,this._end=o):(this._start!=null,this._start=o)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(o=>o&&!o.disableClose&&this._drawerHasBackdrop(o)).forEach(o=>o._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(o){return o!=null&&o.opened}_drawerHasBackdrop(o){return this._backdropOverride==null?!!o&&o.mode!=="side":this._backdropOverride}};r.\u0275fac=function(i){return new(i||r)(Ur(eM,8),Ur(ei),Ur(kn),Ur(Hd),Ur(nz),Ur(D3r),Ur(uh,8))},r.\u0275cmp=Es({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(i,s,a){if(i&1&&(eS(a,iz,5),eS(a,STe,5)),i&2){let l;$u(l=zu())&&(s._content=l.first),$u(l=zu())&&(s._allDrawers=l)}},viewQuery:function(i,s){if(i&1&&qd(iz,5),i&2){let a;$u(a=zu())&&(s._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,s){i&2&&Nc("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[fg([{provide:uCt,useExisting:r}]),Ts],ngContentSelectors:T3r,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,s){i&1&&(Uf(E3r),mb(0,A3r,1,2,"div",0),Bu(1),Bu(2,1),mb(3,k3r,2,0,"mat-drawer-content")),i&2&&(J2(s.hasBackdrop?0:-1),Vd(3),J2(s._content?-1:3))},dependencies:[iz],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color);background-color:var(--mat-sidenav-content-background-color);box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color);box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color);border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape);border-bottom-left-radius:var(--mat-sidenav-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape);border-bottom-right-radius:var(--mat-sidenav-container-shape);border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0});let t=r;return t})();var cCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[ws,l1,l1,ws]});let t=r;return t})();var F3r=["*"],Are;function R3r(){if(Are===void 0&&(Are=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Are=t.trustedTypes.createPolicy("angular#components",{createHTML:r=>r}))}return Are}function sz(t){return R3r()?.createHTML(t)||t}function fCt(t){return Error(`Unable to find icon with the name "${t}"`)}function M3r(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function dCt(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function pCt(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var c1=class{constructor(r,n,o){this.url=r,this.svgText=n,this.options=o}},P3r=(()=>{let r=class r{constructor(o,i,s,a){this._httpClient=o,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(o,i,s){return this.addSvgIconInNamespace("",o,i,s)}addSvgIconLiteral(o,i,s){return this.addSvgIconLiteralInNamespace("",o,i,s)}addSvgIconInNamespace(o,i,s,a){return this._addSvgIconConfig(o,i,new c1(s,null,a))}addSvgIconResolver(o){return this._resolvers.push(o),this}addSvgIconLiteralInNamespace(o,i,s,a){let l=this._sanitizer.sanitize(zf.HTML,s);if(!l)throw pCt(s);let u=sz(l);return this._addSvgIconConfig(o,i,new c1("",u,a))}addSvgIconSet(o,i){return this.addSvgIconSetInNamespace("",o,i)}addSvgIconSetLiteral(o,i){return this.addSvgIconSetLiteralInNamespace("",o,i)}addSvgIconSetInNamespace(o,i,s){return this._addSvgIconSetConfig(o,new c1(i,null,s))}addSvgIconSetLiteralInNamespace(o,i,s){let a=this._sanitizer.sanitize(zf.HTML,i);if(!a)throw pCt(i);let l=sz(a);return this._addSvgIconSetConfig(o,new c1("",l,s))}registerFontClassAlias(o,i=o){return this._fontCssClassesByAlias.set(o,i),this}classNameForFontAlias(o){return this._fontCssClassesByAlias.get(o)||o}setDefaultFontSetClass(...o){return this._defaultFontSetClass=o,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(o){let i=this._sanitizer.sanitize(zf.RESOURCE_URL,o);if(!i)throw dCt(o);let s=this._cachedIconsByUrl.get(i);return s?Pr(kre(s)):this._loadSvgIconFromConfig(new c1(o,null)).pipe(Bi(a=>this._cachedIconsByUrl.set(i,a)),dn(a=>kre(a)))}getNamedSvgIcon(o,i=""){let s=hCt(i,o),a=this._svgIconConfigs.get(s);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,o),a)return this._svgIconConfigs.set(s,a),this._getSvgFromConfig(a);let l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(o,l):H2(fCt(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(o){return o.svgText?Pr(kre(this._svgElementFromConfig(o))):this._loadSvgIconFromConfig(o).pipe(dn(i=>kre(i)))}_getSvgFromIconSetConfigs(o,i){let s=this._extractIconWithNameFromAnySet(o,i);if(s)return Pr(s);let a=i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(m1(u=>{let f=`Loading icon set URL: ${this._sanitizer.sanitize(zf.RESOURCE_URL,l.url)} failed: ${u.message}`;return this._errorHandler.handleError(new Error(f)),Pr(null)})));return fAe(a).pipe(dn(()=>{let l=this._extractIconWithNameFromAnySet(o,i);if(!l)throw fCt(o);return l}))}_extractIconWithNameFromAnySet(o,i){for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.svgText&&a.svgText.toString().indexOf(o)>-1){let l=this._svgElementFromConfig(a),u=this._extractSvgIconFromSet(l,o,a.options);if(u)return u}}return null}_loadSvgIconFromConfig(o){return this._fetchIcon(o).pipe(Bi(i=>o.svgText=i),dn(()=>this._svgElementFromConfig(o)))}_loadSvgIconSetFromConfig(o){return o.svgText?Pr(null):this._fetchIcon(o).pipe(Bi(i=>o.svgText=i))}_extractSvgIconFromSet(o,i,s){let a=o.querySelector(`[id="${i}"]`);if(!a)return null;let l=a.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,s);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),s);let u=this._svgElementFromString(sz("<svg></svg>"));return u.appendChild(l),this._setSvgAttributes(u,s)}_svgElementFromString(o){let i=this._document.createElement("DIV");i.innerHTML=o;let s=i.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(o){let i=this._svgElementFromString(sz("<svg></svg>")),s=o.attributes;for(let a=0;a<s.length;a++){let{name:l,value:u}=s[a];l!=="id"&&i.setAttribute(l,u)}for(let a=0;a<o.childNodes.length;a++)o.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(o.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(o,i){return o.setAttribute("fit",""),o.setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("preserveAspectRatio","xMidYMid meet"),o.setAttribute("focusable","false"),i&&i.viewBox&&o.setAttribute("viewBox",i.viewBox),o}_fetchIcon(o){let{url:i,options:s}=o,a=s?.withCredentials??!1;if(!this._httpClient)throw M3r();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let l=this._sanitizer.sanitize(zf.RESOURCE_URL,i);if(!l)throw dCt(i);let u=this._inProgressUrlFetches.get(l);if(u)return u;let c=this._httpClient.get(l,{responseType:"text",withCredentials:a}).pipe(dn(f=>sz(f)),X2(()=>this._inProgressUrlFetches.delete(l)),hAe());return this._inProgressUrlFetches.set(l,c),c}_addSvgIconConfig(o,i,s){return this._svgIconConfigs.set(hCt(o,i),s),this}_addSvgIconSetConfig(o,i){let s=this._iconSetConfigs.get(o);return s?s.push(i):this._iconSetConfigs.set(o,[i]),this}_svgElementFromConfig(o){if(!o.svgElement){let i=this._svgElementFromString(o.svgText);this._setSvgAttributes(i,o.options),o.svgElement=i}return o.svgElement}_getIconConfigFromResolvers(o,i){for(let s=0;s<this._resolvers.length;s++){let a=this._resolvers[s](i,o);if(a)return j3r(a)?new c1(a.url,null,a.options):new c1(a,null)}}};r.\u0275fac=function(i){return new(i||r)(kt(JAe,8),kt(ane),kt(xn,8),kt(Z2))},r.\u0275prov=Er({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();function kre(t){return t.cloneNode(!0)}function hCt(t,r){return t+":"+r}function j3r(t){return!!(t.url&&t.options)}var L3r=new jn("MAT_ICON_DEFAULT_OPTIONS"),B3r=new jn("mat-icon-location",{providedIn:"root",factory:$3r});function $3r(){let t=ar(xn),r=t?t.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}var mCt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],z3r=mCt.map(t=>`[${t}]`).join(", "),U3r=/^url\(['"]?#(.*?)['"]?\)$/,gCt=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(o){this._color=o}get svgIcon(){return this._svgIcon}set svgIcon(o){o!==this._svgIcon&&(o?this._updateSvgIcon(o):this._svgIcon&&this._clearSvgElement(),this._svgIcon=o)}get fontSet(){return this._fontSet}set fontSet(o){let i=this._cleanupFontValue(o);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(o){let i=this._cleanupFontValue(o);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(o,i,s,a,l,u){this._elementRef=o,this._iconRegistry=i,this._location=a,this._errorHandler=l,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ub.EMPTY,u&&(u.color&&(this.color=this._defaultColor=u.color),u.fontSet&&(this.fontSet=u.fontSet)),s||o.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(o){if(!o)return["",""];let i=o.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${o}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let o=this._elementsWithExternalReferences;if(o&&o.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(o){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(o),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(o)}_clearSvgElement(){let o=this._elementRef.nativeElement,i=o.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let s=o.childNodes[i];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let o=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>o.classList.remove(s)),i.forEach(s=>o.classList.add(s)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&o.classList.remove(this._previousFontIconClass),this.fontIcon&&o.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(o){return typeof o=="string"?o.trim().split(" ")[0]:o}_prependPathToReferences(o){let i=this._elementsWithExternalReferences;i&&i.forEach((s,a)=>{s.forEach(l=>{a.setAttribute(l.name,`url('${o}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(o){let i=o.querySelectorAll(z3r),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)mCt.forEach(l=>{let u=i[a],c=u.getAttribute(l),f=c?c.match(U3r):null;if(f){let d=s.get(u);d||(d=[],s.set(u,d)),d.push({name:l,value:f[1]})}})}_updateSvgIcon(o){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),o){let[i,s]=this._splitIconName(o);i&&(this._svgNamespace=i),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,i).pipe(Dc(1)).subscribe(a=>this._setSvgElement(a),a=>{let l=`Error retrieving icon ${i}:${s}! ${a.message}`;this._errorHandler.handleError(new Error(l))})}}};r.\u0275fac=function(i){return new(i||r)(Ur(ei),Ur(P3r),xM("aria-hidden"),Ur(B3r),Ur(Z2),Ur(L3r,8))},r.\u0275cmp=Es({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,s){i&2&&(Wd("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),SM(s.color?"mat-"+s.color:""),Nc("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Vf],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Gd,Ts],ngContentSelectors:F3r,decls:1,vars:0,template:function(i,s){i&1&&(Uf(),Bu(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=r;return t})(),yCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({imports:[ws,ws]});let t=r;return t})();var bCt={transformMenu:CM("transformMenu",[Ik("void",bb({opacity:0,transform:"scale(0.8)"})),rS("void => enter",tS("120ms cubic-bezier(0, 0, 0.2, 1)",bb({opacity:1,transform:"scale(1)"}))),rS("* => void",tS("100ms 25ms linear",bb({opacity:0})))]),fadeInItems:CM("fadeInItems",[Ik("showing",bb({opacity:1})),rS("void => *",[bb({opacity:0}),tS("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},uSi=bCt.fadeInItems,cSi=bCt.transformMenu;var G3r=new jn("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=ar(u1);return()=>t.scrollStrategies.reposition()}});function W3r(t){return()=>t.scrollStrategies.reposition()}var q3r={provide:G3r,deps:[u1],useFactory:W3r};var xCt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=$n({type:r}),r.\u0275inj=Bn({providers:[q3r],imports:[yb,tz,ws,Ere,l1,ws]});let t=r;return t})();var vCt=(()=>{let r=class r{constructor(){this.title="victorbarbosa"}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=Es({type:r,selectors:[["app-root"]],standalone:!0,features:[Ts],decls:11,vars:1,consts:[["drawer",""],[1,"example-container"],[3,"mode"],[1,"top-bar"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"click"]],template:function(i,s){if(i&1){let a=gb();Gs(0,"mat-drawer-container",1)(1,"mat-drawer",2,0),Tk(3,"I'm a drawer"),ma(),Gs(4,"mat-drawer-content")(5,"div",3)(6,"button",4),ch("click",function(){db(a);let u=vz(2);return pb(u.toggle())}),Gs(7,"mat-icon"),Tk(8,"more_vert"),ma()()(),Gs(9,"div"),Zl(10,"router-outlet"),ma()()()}i&2&&(Vd(),ug("mode","over"))},dependencies:[zne,cCt,STe,CTe,iz,Tre,aCt,KSt,XSt,xCt,yCt,gCt],styles:['.top-bar[_ngcontent-%COMP%]{float:right;width:100%;display:flex;align-items:flex-end;justify-content:flex-end;position:fixed;background:#000}.top-bar[_ngcontent-%COMP%]:after{content:"";background:#fff;position:absolute;width:100vw;height:1px}mat-drawer-content[_ngcontent-%COMP%]{height:100vh}']});let t=r;return t})();lke(vCt,_St).catch(t=>console.error(t));
